var zD=Object.defineProperty;var WD=(e,t,n)=>t in e?zD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ha=(e,t,n)=>WD(e,typeof t!="symbol"?t+"":t,n);import{dW as Ev,fg as Eu,dT as oo,fh as jS,dH as Jp,fi as Wm,fj as Ud,fk as Qp,fl as DT,fm as js,eO as hc,dK as va,fn as HD,dI as vc,eJ as jT,fo as XD,fp as Hm,fq as Is,eF as o_,eH as Hw,dQ as eh,au as mc,fr as IT,fs as th,eP as Rv,ft as Xw,dO as ao,fu as i_,eg as a_,eN as Nf,em as Bo,fv as Ov,dP as Wd,fw as Cv,fx as Xm,el as yc,dN as dl,dM as Ao,fy as qD,fz as LT,f6 as Ou,eM as Pa,fA as YD,fB as KD,fC as Dv,fD as l_,fE as $T,ef as nh,fF as FT,bK as qw,dL as qm,at as jv,ek as Im,ei as Xp,eI as ZD,eL as IS,eK as JD,as as BT,fG as UT,fH as QD,dS as s_,dJ as ej,eR as Tg,fI as tj,fJ as VT,fK as GT,fL as zT,fM as nj,fN as rj,dU as oj,fO as ij,fP as aj,fQ as lj,fR as sj,fS as Mg,eU as uj,fT as WT,eh as HT,eQ as Yw,fU as XT,fV as Kw,fW as cj,dR as Ym,fX as qT,fY as fj,fZ as YT,f_ as KT,f$ as dj,g0 as pj,g1 as hj,eV as Lm,f4 as vj,g2 as mj,g3 as yj,aw as gj,g4 as _j,g5 as bj,g6 as wj,g7 as Ej,g8 as Oj,g9 as Sj,ga as xj,ai as Aj,f7 as Tj,gb as Mj,ax as kj,gc as Nj,gd as Pj,ge as Rj,gf as Cj,gg as Dj,gh as jj,av as Ij,gi as Lj,f8 as $j,gj as Fj,f5 as Bj,gk as Uj,gl as Vj,gm as Gj,gn as zj,ay as $n,aB as je,aQ as Km,aD as Q,aR as Yt,aF as _e,aS as tr,aH as k,aI as K,aE as Ke,aT as Wr,aG as R,b1 as cn,b6 as Zt,bZ as Sv,b_ as Cl,aJ as me,c0 as Zw,aK as tt,aU as qt,e6 as Uo,aZ as Zi,aA as u_,a_ as Gn,bU as Jw,b7 as Ur,b0 as Wa,bf as Qw,cr as fc,cj as Vd,ck as qp,bW as fw,c9 as Wj,bX as xm,aN as xr,b2 as si,aO as uc,aV as Se,a$ as Zm,ci as wu,d9 as Hj,cv as kg,c4 as za,aC as _t,c3 as ZT,aM as kn,co as rh,b9 as Su,cp as Ar,cq as is,ct as $d,dx as Xj,aP as oh,bC as xv,go as qj,gp as Yj,gq as JT,gr as QT,gs as Kj,gt as Zj,gu as Jj,gv as Qj,gw as e8,gx as Co,dk as c_,dl as eM,cU as t8,bE as Ng,cM as n8,b3 as Jm,gy as fl,cZ as r8,gz as LS,cu as o8,gA as i8,cl as a8,dY as l8,gB as s8,gC as eE,gD as tE,gE as u8,b8 as c8}from"./admin-BOU8h_tu.js";import{g as f_,t as Av,a as $S,i as Tu,n as f8,c as d8}from"./data-DzIfGPow.js";import{_ as ih,G as tM,d as p8,e as h8,a as nM,b as v8,c as m8}from"./GeneratePromptDialog-Bvq-fe0w.js";import{d as rM,c as ah,v as Qm,e as y8,g as oM,f as g8,a as _8,r as b8}from"./reduce-CFxiYU-r.js";import{c as nE,b as d_,i as rE,p as iM,n as oE,a as w8,d as iE,e as E8,f as O8,g as S8,h as x8,u as A8,j as T8,k as M8,l as k8,m as N8,r as P8,o as R8,q as C8,s as D8,t as j8}from"./uniqBy-nYQPFyOR.js";import{c as I8,a as L8,b as $8,e as F8,f as B8,m as U8,d as V8,h as G8}from"./min-hetjePR5.js";import{d as aM,e as z8,g as W8,h as H8,i as X8,z as q8,s as Y8,m as K8,a as Z8,b as J8,f as Q8,c as eI,r as tI,u as nI}from"./zipObject-oGo6QN0g.js";import{l as rI,_ as oI}from"./vue-draggable-plus-Dng2Mvn3.js";import{_ as iI}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-lPLqgbgK.js";import{_ as un}from"./defineProperty-DbXIQDXj.js";var aI=NaN;function FS(e){return typeof e=="number"?e:Ev(e)?aI:+e}function p_(e,t){return function(n,a){var r;if(n===void 0&&a===void 0)return t;if(n!==void 0&&(r=n),a!==void 0){if(r===void 0)return a;typeof n=="string"||typeof a=="string"?(n=Eu(n),a=Eu(a)):(n=FS(n),a=FS(a)),r=e(n,a)}return r}}var lI=p_(function(e,t){return e+t},0),sI="Expected a function";function uI(e,t){if(typeof t!="function")throw new TypeError(sI);return e=oo(e),function(){if(--e<1)return t.apply(this,arguments)}}var Pg=jS&&new jS,lM=Pg?function(e,t){return Pg.set(e,t),e}:Jp;function $m(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Wm(e.prototype),a=e.apply(n,t);return Ud(a)?a:n}}var cI=1;function fI(e,t,n){var a=t&cI,r=$m(e);function s(){var c=this&&this!==Qp&&this instanceof s?r:e;return c.apply(a?n:this,arguments)}return s}var dI=Math.max;function sM(e,t,n,a){for(var r=-1,s=e.length,c=n.length,p=-1,d=t.length,_=dI(s-c,0),g=Array(d+_),b=!a;++p<d;)g[p]=t[p];for(;++r<c;)(b||r<s)&&(g[n[r]]=e[r]);for(;_--;)g[p++]=e[r++];return g}var pI=Math.max;function uM(e,t,n,a){for(var r=-1,s=e.length,c=-1,p=n.length,d=-1,_=t.length,g=pI(s-p,0),b=Array(g+_),S=!a;++r<g;)b[r]=e[r];for(var T=r;++d<_;)b[T+d]=t[d];for(;++c<p;)(S||r<s)&&(b[T+n[c]]=e[r++]);return b}function hI(e,t){for(var n=e.length,a=0;n--;)e[n]===t&&++a;return a}function h_(){}var vI=4294967295;function eo(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=vI,this.__views__=[]}eo.prototype=Wm(h_.prototype);eo.prototype.constructor=eo;var aE=Pg?function(e){return Pg.get(e)}:DT,hv={},mI=Object.prototype,yI=mI.hasOwnProperty;function hg(e){for(var t=e.name+"",n=hv[t],a=yI.call(hv,t)?n.length:0;a--;){var r=n[a],s=r.func;if(s==null||s==e)return r.name}return t}function Ls(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Ls.prototype=Wm(h_.prototype);Ls.prototype.constructor=Ls;function cM(e){if(e instanceof eo)return e.clone();var t=new Ls(e.__wrapped__,e.__chain__);return t.__actions__=js(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var gI=Object.prototype,_I=gI.hasOwnProperty;function ue(e){if(hc(e)&&!va(e)&&!(e instanceof eo)){if(e instanceof Ls)return e;if(_I.call(e,"__wrapped__"))return cM(e)}return new Ls(e)}ue.prototype=h_.prototype;ue.prototype.constructor=ue;function dw(e){var t=hg(e),n=ue[t];if(typeof n!="function"||!(t in eo.prototype))return!1;if(e===n)return!0;var a=aE(n);return!!a&&e===a[0]}var fM=HD(lM),bI=/\{\n\/\* \[wrapped with (.+)\] \*/,wI=/,? & /;function EI(e){var t=e.match(bI);return t?t[1].split(wI):[]}var OI=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function SI(e,t){var n=t.length;if(!n)return e;var a=n-1;return t[a]=(n>1?"& ":"")+t[a],t=t.join(n>2?", ":" "),e.replace(OI,`{
/* [wrapped with `+t+`] */
`)}var xI=1,AI=2,TI=8,MI=16,kI=32,NI=64,PI=128,RI=256,CI=512,DI=[["ary",PI],["bind",xI],["bindKey",AI],["curry",TI],["curryRight",MI],["flip",CI],["partial",kI],["partialRight",NI],["rearg",RI]];function jI(e,t){return vc(DI,function(n){var a="_."+n[0];t&n[1]&&!jT(e,a)&&e.push(a)}),e.sort()}function dM(e,t,n){var a=t+"";return XD(e,SI(a,jI(EI(a),n)))}var II=4,LI=8,BS=32,US=64;function pM(e,t,n,a,r,s,c,p,d,_){var g=t&LI,b=g?c:void 0,S=g?void 0:c,T=g?s:void 0,A=g?void 0:s;t|=g?BS:US,t&=~(g?US:BS),t&II||(t&=-4);var O=[e,t,r,T,b,A,S,p,d,_],E=n.apply(void 0,O);return dw(e)&&fM(E,O),E.placeholder=a,dM(E,e,t)}function Iv(e){var t=e;return t.placeholder}var $I=Math.min;function FI(e,t){for(var n=e.length,a=$I(t.length,n),r=js(e);a--;){var s=t[a];e[a]=Hm(s,n)?r[s]:void 0}return e}var VS="__lodash_placeholder__";function Gd(e,t){for(var n=-1,a=e.length,r=0,s=[];++n<a;){var c=e[n];(c===t||c===VS)&&(e[n]=VS,s[r++]=n)}return s}var BI=1,UI=2,VI=8,GI=16,zI=128,WI=512;function v_(e,t,n,a,r,s,c,p,d,_){var g=t&zI,b=t&BI,S=t&UI,T=t&(VI|GI),A=t&WI,O=S?void 0:$m(e);function E(){for(var C=arguments.length,j=Array(C),U=C;U--;)j[U]=arguments[U];if(T)var L=Iv(E),V=hI(j,L);if(a&&(j=sM(j,a,r,T)),s&&(j=uM(j,s,c,T)),C-=V,T&&C<_){var $=Gd(j,L);return pM(e,t,v_,E.placeholder,n,j,$,p,d,_-C)}var H=b?n:this,Y=S?H[e]:e;return C=j.length,p?j=FI(j,p):A&&C>1&&j.reverse(),g&&d<C&&(j.length=d),this&&this!==Qp&&this instanceof E&&(Y=O||$m(Y)),Y.apply(H,j)}return E}function HI(e,t,n){var a=$m(e);function r(){for(var s=arguments.length,c=Array(s),p=s,d=Iv(r);p--;)c[p]=arguments[p];var _=s<3&&c[0]!==d&&c[s-1]!==d?[]:Gd(c,d);if(s-=_.length,s<n)return pM(e,t,v_,r.placeholder,void 0,c,_,void 0,void 0,n-s);var g=this&&this!==Qp&&this instanceof r?a:e;return Is(g,this,c)}return r}var XI=1;function qI(e,t,n,a){var r=t&XI,s=$m(e);function c(){for(var p=-1,d=arguments.length,_=-1,g=a.length,b=Array(g+d),S=this&&this!==Qp&&this instanceof c?s:e;++_<g;)b[_]=a[_];for(;d--;)b[_++]=arguments[++p];return Is(S,r?n:this,b)}return c}var GS="__lodash_placeholder__",w1=1,YI=2,KI=4,zS=8,vm=128,WS=256,ZI=Math.min;function JI(e,t){var n=e[1],a=t[1],r=n|a,s=r<(w1|YI|vm),c=a==vm&&n==zS||a==vm&&n==WS&&e[7].length<=t[8]||a==(vm|WS)&&t[7].length<=t[8]&&n==zS;if(!(s||c))return e;a&w1&&(e[2]=t[2],r|=n&w1?0:KI);var p=t[3];if(p){var d=e[3];e[3]=d?sM(d,p,t[4]):p,e[4]=d?Gd(e[3],GS):t[4]}return p=t[5],p&&(d=e[5],e[5]=d?uM(d,p,t[6]):p,e[6]=d?Gd(e[5],GS):t[6]),p=t[7],p&&(e[7]=p),a&vm&&(e[8]=e[8]==null?t[8]:ZI(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var QI="Expected a function",HS=1,eL=2,XS=8,qS=16,YS=32,tL=64,KS=Math.max;function Cf(e,t,n,a,r,s,c,p){var d=t&eL;if(!d&&typeof e!="function")throw new TypeError(QI);var _=a?a.length:0;if(_||(t&=-97,a=r=void 0),c=c===void 0?c:KS(oo(c),0),p=p===void 0?p:oo(p),_-=r?r.length:0,t&tL){var g=a,b=r;a=r=void 0}var S=d?void 0:aE(e),T=[e,t,n,a,r,g,b,s,c,p];if(S&&JI(T,S),e=T[0],t=T[1],n=T[2],a=T[3],r=T[4],p=T[9]=T[9]===void 0?d?0:e.length:KS(T[9]-_,0),!p&&t&(XS|qS)&&(t&=-25),!t||t==HS)var A=fI(e,t,n);else t==XS||t==qS?A=HI(e,t,p):(t==YS||t==(HS|YS))&&!r.length?A=qI(e,t,n,a):A=v_.apply(void 0,T);var O=S?lM:fM;return dM(O(A,T),e,t)}var nL=128;function hM(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,Cf(e,nL,void 0,void 0,void 0,void 0,t)}var rL=o_(function(e,t){Hw(t,eh(t),e)}),pw=o_(function(e,t,n,a){Hw(t,eh(t),e,a)}),oL=o_(function(e,t,n,a){Hw(t,mc(t),e,a)});function lE(e,t){for(var n=-1,a=t.length,r=Array(a),s=e==null;++n<a;)r[n]=s?void 0:IT(e,t[n]);return r}var iL=th(lE),aL="[object DOMException]",lL="[object Error]";function sE(e){if(!hc(e))return!1;var t=Rv(e);return t==lL||t==aL||typeof e.message=="string"&&typeof e.name=="string"&&!Xw(e)}var vM=ao(function(e,t){try{return Is(e,void 0,t)}catch(n){return sE(n)?n:new Error(n)}}),sL="Expected a function";function mM(e,t){var n;if(typeof t!="function")throw new TypeError(sL);return e=oo(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var uL=1,cL=32,m_=ao(function(e,t,n){var a=uL;if(n.length){var r=Gd(n,Iv(m_));a|=cL}return Cf(e,a,t,n,r)});m_.placeholder={};var fL=th(function(e,t){return vc(t,function(n){n=i_(n),a_(e,n,m_(e[n],e))}),e}),dL=1,pL=2,hL=32,uE=ao(function(e,t,n){var a=dL|pL;if(n.length){var r=Gd(n,Iv(uE));a|=hL}return Cf(t,a,e,n,r)});uE.placeholder={};function Hd(e,t,n){var a=e.length;return n=n===void 0?a:n,!t&&n>=a?e:Nf(e,t,n)}var vL="\\ud800-\\udfff",mL="\\u0300-\\u036f",yL="\\ufe20-\\ufe2f",gL="\\u20d0-\\u20ff",_L=mL+yL+gL,bL="\\ufe0e\\ufe0f",wL="\\u200d",EL=RegExp("["+wL+vL+_L+bL+"]");function Lv(e){return EL.test(e)}function OL(e){return e.split("")}var yM="\\ud800-\\udfff",SL="\\u0300-\\u036f",xL="\\ufe20-\\ufe2f",AL="\\u20d0-\\u20ff",TL=SL+xL+AL,ML="\\ufe0e\\ufe0f",kL="["+yM+"]",hw="["+TL+"]",vw="\\ud83c[\\udffb-\\udfff]",NL="(?:"+hw+"|"+vw+")",gM="[^"+yM+"]",_M="(?:\\ud83c[\\udde6-\\uddff]){2}",bM="[\\ud800-\\udbff][\\udc00-\\udfff]",PL="\\u200d",wM=NL+"?",EM="["+ML+"]?",RL="(?:"+PL+"(?:"+[gM,_M,bM].join("|")+")"+EM+wM+")*",CL=EM+wM+RL,DL="(?:"+[gM+hw+"?",hw,_M,bM,kL].join("|")+")",jL=RegExp(vw+"(?="+vw+")|"+DL+CL,"g");function IL(e){return e.match(jL)||[]}function xu(e){return Lv(e)?IL(e):OL(e)}function OM(e){return function(t){t=Bo(t);var n=Lv(t)?xu(t):void 0,a=n?n[0]:t.charAt(0),r=n?Hd(n,1).join(""):t.slice(1);return a[e]()+r}}var cE=OM("toUpperCase");function SM(e){return cE(Bo(e).toLowerCase())}function fE(e){return function(t){return e==null?void 0:e[t]}}var LL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},$L=fE(LL),FL=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,BL="\\u0300-\\u036f",UL="\\ufe20-\\ufe2f",VL="\\u20d0-\\u20ff",GL=BL+UL+VL,zL="["+GL+"]",WL=RegExp(zL,"g");function xM(e){return e=Bo(e),e&&e.replace(FL,$L).replace(WL,"")}var HL=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function XL(e){return e.match(HL)||[]}var qL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function YL(e){return qL.test(e)}var AM="\\ud800-\\udfff",KL="\\u0300-\\u036f",ZL="\\ufe20-\\ufe2f",JL="\\u20d0-\\u20ff",QL=KL+ZL+JL,TM="\\u2700-\\u27bf",MM="a-z\\xdf-\\xf6\\xf8-\\xff",e4="\\xac\\xb1\\xd7\\xf7",t4="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",n4="\\u2000-\\u206f",r4=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kM="A-Z\\xc0-\\xd6\\xd8-\\xde",o4="\\ufe0e\\ufe0f",NM=e4+t4+n4+r4,PM="['’]",ZS="["+NM+"]",i4="["+QL+"]",RM="\\d+",a4="["+TM+"]",CM="["+MM+"]",DM="[^"+AM+NM+RM+TM+MM+kM+"]",l4="\\ud83c[\\udffb-\\udfff]",s4="(?:"+i4+"|"+l4+")",u4="[^"+AM+"]",jM="(?:\\ud83c[\\udde6-\\uddff]){2}",IM="[\\ud800-\\udbff][\\udc00-\\udfff]",iv="["+kM+"]",c4="\\u200d",JS="(?:"+CM+"|"+DM+")",f4="(?:"+iv+"|"+DM+")",QS="(?:"+PM+"(?:d|ll|m|re|s|t|ve))?",ex="(?:"+PM+"(?:D|LL|M|RE|S|T|VE))?",LM=s4+"?",$M="["+o4+"]?",d4="(?:"+c4+"(?:"+[u4,jM,IM].join("|")+")"+$M+LM+")*",p4="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",h4="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",v4=$M+LM+d4,m4="(?:"+[a4,jM,IM].join("|")+")"+v4,y4=RegExp([iv+"?"+CM+"+"+QS+"(?="+[ZS,iv,"$"].join("|")+")",f4+"+"+ex+"(?="+[ZS,iv+JS,"$"].join("|")+")",iv+"?"+JS+"+"+QS,iv+"+"+ex,h4,p4,RM,m4].join("|"),"g");function g4(e){return e.match(y4)||[]}function FM(e,t,n){return e=Bo(e),t=n?void 0:t,t===void 0?YL(e)?g4(e):XL(e):e.match(t)||[]}var _4="['’]",b4=RegExp(_4,"g");function $v(e){return function(t){return rM(FM(xM(t).replace(b4,"")),e,"")}}var w4=$v(function(e,t,n){return t=t.toLowerCase(),e+(n?SM(t):t)}),E4=Qp.isFinite,O4=Math.min;function dE(e){var t=Math[e];return function(n,a){if(n=Ov(n),a=a==null?0:O4(oo(a),292),a&&E4(n)){var r=(Bo(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+a));return r=(Bo(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-a))}return t(n)}}var S4=dE("ceil");function BM(e){var t=ue(e);return t.__chain__=!0,t}var x4=Math.ceil,A4=Math.max;function T4(e,t,n){(n?Wd(e,t,n):t===void 0)?t=1:t=A4(oo(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var r=0,s=0,c=Array(x4(a/t));r<a;)c[s++]=Nf(e,r,r+=t);return c}var M4=1,k4=4;function N4(e,t){return t=typeof t=="function"?t:void 0,Cv(e,M4|k4,t)}var P4=4;function R4(e,t){return t=typeof t=="function"?t:void 0,Cv(e,P4,t)}function C4(){return new Ls(this.value(),this.__chain__)}function D4(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Xm(va(n)?js(n):[n],yc(t,1))}var j4="Expected a function";function I4(e){var t=e==null?0:e.length,n=Ao;return e=t?dl(e,function(a){if(typeof a[1]!="function")throw new TypeError(j4);return[n(a[0]),a[1]]}):[],ao(function(a){for(var r=-1;++r<t;){var s=e[r];if(Is(s[0],this,a))return Is(s[1],this,a)}})}function UM(e,t,n){var a=n.length;if(e==null)return!a;for(e=Object(e);a--;){var r=n[a],s=t[r],c=e[r];if(c===void 0&&!(r in e)||!s(c))return!1}return!0}function L4(e){var t=mc(e);return function(n){return UM(n,e,t)}}var $4=1;function F4(e){return L4(Cv(e,$4))}function B4(e,t){return t==null||UM(e,t,mc(t))}var U4=Object.prototype,V4=U4.hasOwnProperty,G4=nE(function(e,t,n){V4.call(e,n)?++e[n]:a_(e,n,1)});function z4(e,t){var n=Wm(e);return t==null?n:qD(n,t)}var W4=8;function pE(e,t,n){t=n?void 0:t;var a=Cf(e,W4,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=pE.placeholder,a}pE.placeholder={};var H4=16;function hE(e,t,n){t=n?void 0:t;var a=Cf(e,H4,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=hE.placeholder,a}hE.placeholder={};function X4(e,t){return e==null||e!==e?t:e}function VM(e,t,n,a,r,s){return Ud(e)&&Ud(t)&&(s.set(t,e),LT(e,t,void 0,VM,s),s.delete(t)),e}var GM=o_(function(e,t,n,a){LT(e,t,n,a)}),q4=ao(function(e){return e.push(void 0,VM),Is(GM,void 0,e)}),Y4="Expected a function";function zM(e,t,n){if(typeof e!="function")throw new TypeError(Y4);return setTimeout(function(){e.apply(void 0,n)},t)}var K4=ao(function(e,t){return zM(e,1,t)}),Z4=ao(function(e,t,n){return zM(e,Ov(t)||0,n)}),J4=ao(function(e,t){var n=Ou(t);return Pa(n)&&(n=void 0),Pa(e)?d_(e,yc(t,1,Pa,!0),Ao(n)):[]}),Q4=ao(function(e,t){var n=Ou(t);return Pa(n)&&(n=void 0),Pa(e)?d_(e,yc(t,1,Pa,!0),void 0,n):[]}),e6=p_(function(e,t){return e/t},1);function y_(e,t,n,a){for(var r=e.length,s=a?r:-1;(a?s--:++s<r)&&t(e[s],s,e););return n?Nf(e,a?0:s,a?s+1:r):Nf(e,a?s+1:0,a?r:s)}function t6(e,t){return e&&e.length?y_(e,Ao(t),!0,!0):[]}function n6(e,t){return e&&e.length?y_(e,Ao(t),!0):[]}function r6(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var WM=YD(!0);function vE(e,t){return e&&WM(e,t,mc)}var HM=KD(vE,!0);function o6(e,t){var n=va(e)?r6:HM;return n(e,ah(t))}function i6(e,t,n){e=Bo(e),t=Eu(t);var a=e.length;n=n===void 0?a:Dv(oo(n),0,a);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function a6(e,t){return dl(t,function(n){return[n,e[n]]})}function l6(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=[a,a]}),n}var s6="[object Map]",u6="[object Set]";function XM(e){return function(t){var n=l_(t);return n==s6?$T(t):n==u6?l6(t):a6(t,e(t))}}var c6=XM(mc),f6=XM(eh),d6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},p6=fE(d6),qM=/[&<>"']/g,h6=RegExp(qM.source);function YM(e){return e=Bo(e),e&&h6.test(e)?e.replace(qM,p6):e}var KM=/[\\^$.*+?()[\]{}|]/g,v6=RegExp(KM.source);function m6(e){return e=Bo(e),e&&v6.test(e)?e.replace(KM,"\\$&"):e}var y6=4294967295;function ZM(e){return e?Dv(oo(e),0,y6):0}function g6(e,t,n,a){var r=e.length;for(n=oo(n),n<0&&(n=-n>r?0:r+n),a=a===void 0||a>r?r:oo(a),a<0&&(a+=r),a=n>a?0:ZM(a);n<a;)e[n++]=t;return e}function _6(e,t,n,a){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&Wd(e,t,n)&&(n=0,a=r),g6(e,t,n,a)):[]}function JM(e,t,n){var a;return n(e,function(r,s,c){if(t(r,s,c))return a=s,!1}),a}function b6(e,t){return JM(e,Ao(t),nh)}var w6=I8(FT);function E6(e,t){return JM(e,Ao(t),vE)}var O6=1/0;function S6(e,t){return yc(qw(e,t),O6)}function x6(e,t,n){return n=n===void 0?1:oo(n),yc(qw(e,t),n)}function A6(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:oo(t),yc(e,t)):[]}var T6=512;function M6(e){return Cf(e,T6)}var k6=dE("floor"),N6="Expected a function",P6=8,R6=32,C6=128,D6=256;function QM(e){return th(function(t){var n=t.length,a=n,r=Ls.prototype.thru;for(e&&t.reverse();a--;){var s=t[a];if(typeof s!="function")throw new TypeError(N6);if(r&&!c&&hg(s)=="wrapper")var c=new Ls([],!0)}for(a=c?a:n;++a<n;){s=t[a];var p=hg(s),d=p=="wrapper"?aE(s):void 0;d&&dw(d[0])&&d[1]==(C6|P6|R6|D6)&&!d[4].length&&d[9]==1?c=c[hg(d[0])].apply(c,d[3]):c=s.length==1&&dw(s)?c[p]():c.thru(s)}return function(){var _=arguments,g=_[0];if(c&&_.length==1&&va(g))return c.plant(g).value();for(var b=0,S=n?t[b].apply(this,_):g;++b<n;)S=t[b].call(this,S);return S}})}var j6=QM(),I6=QM(!0);function L6(e,t){return e==null?e:WM(e,ah(t),eh)}function $6(e,t){return e&&vE(e,ah(t))}function g_(e,t){return qm(t,function(n){return jv(e[n])})}function F6(e){return e==null?[]:g_(e,mc(e))}function B6(e){return e==null?[]:g_(e,eh(e))}function __(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Ov(t),n=Ov(n)),e(t,n)}}var U6=__(aM),V6=__(function(e,t){return e>=t}),G6=Math.max,z6=Math.min;function W6(e,t,n){return e>=z6(t,n)&&e<G6(t,n)}function H6(e,t,n){return t=Im(t),n===void 0?(n=t,t=0):n=Im(n),e=Ov(e),W6(e,t,n)}function X6(e){var t=e==null?0:e.length;return t?Nf(e,0,-1):[]}var q6=Math.min;function mE(e,t,n){for(var a=n?JD:jT,r=e[0].length,s=e.length,c=s,p=Array(s),d=1/0,_=[];c--;){var g=e[c];c&&t&&(g=dl(g,Xp(t))),d=q6(g.length,d),p[c]=!n&&(t||r>=120&&g.length>=120)?new ZD(c&&g):void 0}g=e[0];var b=-1,S=p[0];e:for(;++b<r&&_.length<d;){var T=g[b],A=t?t(T):T;if(T=n||T!==0?T:0,!(S?IS(S,A):a(_,A,n))){for(c=s;--c;){var O=p[c];if(!(O?IS(O,A):a(e[c],A,n)))continue e}S&&S.push(A),_.push(T)}}return _}function yE(e){return Pa(e)?e:[]}var Y6=ao(function(e){var t=dl(e,yE);return t.length&&t[0]===e[0]?mE(t):[]}),K6=ao(function(e){var t=Ou(e),n=dl(e,yE);return t===Ou(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?mE(n,Ao(t)):[]}),Z6=ao(function(e){var t=Ou(e),n=dl(e,yE);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?mE(n,void 0,t):[]});function J6(e,t,n,a){return nh(e,function(r,s,c){t(a,n(r),s,c)}),a}function ek(e,t){return function(n,a){return J6(n,e,t(a),{})}}var Q6=Object.prototype,e5=Q6.toString,t5=ek(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=e5.call(t)),e[t]=n},BT(Jp)),tk=Object.prototype,n5=tk.hasOwnProperty,r5=tk.toString,o5=ek(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=r5.call(t)),n5.call(e,t)?e[t].push(n):e[t]=[n]},Ao);function ey(e,t,n){t=UT(t,e),e=QD(e,t);var a=e==null?e:e[i_(Ou(t))];return a==null?void 0:Is(a,e,n)}var i5=ao(ey),a5=ao(function(e,t,n){var a=-1,r=typeof t=="function",s=s_(e)?Array(e.length):[];return ej(e,function(c){s[++a]=r?Is(t,c,n):ey(c,t,n)}),s}),l5="[object ArrayBuffer]";function s5(e){return hc(e)&&Rv(e)==l5}var tx=Tg&&Tg.isArrayBuffer,u5=tx?Xp(tx):s5,c5="[object Boolean]";function f5(e){return e===!0||e===!1||hc(e)&&Rv(e)==c5}var d5="[object Date]";function p5(e){return hc(e)&&Rv(e)==d5}var nx=Tg&&Tg.isDate,h5=nx?Xp(nx):p5;function v5(e){return hc(e)&&e.nodeType===1&&!Xw(e)}function m5(e,t,n){n=typeof n=="function"?n:void 0;var a=n?n(e,t):void 0;return a===void 0?tj(e,t,void 0,n):!!a}var y5=Qp.isFinite;function g5(e){return typeof e=="number"&&y5(e)}function nk(e){return typeof e=="number"&&e==oo(e)}function _5(e,t){return e===t||VT(e,t,GT(t))}function b5(e,t,n){return n=typeof n=="function"?n:void 0,VT(e,t,GT(t),n)}var w5="[object Number]";function rk(e){return typeof e=="number"||hc(e)&&Rv(e)==w5}function E5(e){return rk(e)&&e!=+e}var O5=nj?jv:zT,S5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function x5(e){if(O5(e))throw new Error(S5);return rj(e)}var rx=9007199254740991;function A5(e){return nk(e)&&e>=-rx&&e<=rx}var T5="[object WeakMap]";function M5(e){return hc(e)&&l_(e)==T5}var k5="[object WeakSet]";function N5(e){return hc(e)&&Rv(e)==k5}var P5=1;function R5(e){return Ao(typeof e=="function"?e:Cv(e,P5))}var C5=Array.prototype,D5=C5.join;function j5(e,t){return e==null?"":D5.call(e,t)}var I5=$v(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),L5=nE(function(e,t,n){a_(e,n,t)});function $5(e,t,n){for(var a=n+1;a--;)if(e[a]===t)return a;return a}var F5=Math.max,B5=Math.min;function U5(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=a;return n!==void 0&&(r=oo(n),r=r<0?F5(a+r,0):B5(r,a-1)),t===t?$5(e,t,r):oj(e,ij,r,!0)}var V5=$v(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),G5=OM("toLowerCase"),z5=__(L8),W5=__(function(e,t){return e<=t});function H5(e,t){var n={};return t=Ao(t),nh(e,function(a,r,s){a_(n,t(a,r,s),a)}),n}var X5=1;function q5(e){return aj(Cv(e,X5))}var Y5=1;function K5(e,t){return lj(e,Cv(t,Y5))}function Z5(e,t){return e&&e.length?$8(e,Ao(t),aM):void 0}function gE(e,t){for(var n,a=-1,r=e.length;++a<r;){var s=t(e[a]);s!==void 0&&(n=n===void 0?s:n+s)}return n}var J5=NaN;function ok(e,t){var n=e==null?0:e.length;return n?gE(e,t)/n:J5}function Q5(e){return ok(e,Jp)}function e$(e,t){return ok(e,Ao(t))}var t$=ao(function(e,t){return function(n){return ey(n,e,t)}}),n$=ao(function(e,t){return function(n){return ey(e,n,t)}});function r$(e,t,n){var a=mc(t),r=g_(t,a),s=!(Ud(n)&&"chain"in n)||!!n.chain,c=jv(e);return vc(r,function(p){var d=t[p];e[p]=d,c&&(e.prototype[p]=function(){var _=this.__chain__;if(s||_){var g=e(this.__wrapped__),b=g.__actions__=js(this.__actions__);return b.push({func:d,args:arguments,thisArg:e}),g.__chain__=_,g}return d.apply(e,Xm([this.value()],arguments))})}),e}var o$=p_(function(e,t){return e*t},1);function i$(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var a$="[object Map]",l$="[object Set]",E1=Mg?Mg.iterator:void 0;function ik(e){if(!e)return[];if(s_(e))return rE(e)?xu(e):js(e);if(E1&&e[E1])return i$(e[E1]());var t=l_(e),n=t==a$?$T:t==l$?sj:Qm;return n(e)}function s$(){this.__values__===void 0&&(this.__values__=ik(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function ak(e,t){var n=e.length;if(n)return t+=t<0?n:0,Hm(t,n)?e[t]:void 0}function u$(e,t){return e&&e.length?ak(e,oo(t)):void 0}function c$(e){return e=oo(e),ao(function(t){return ak(t,e)})}function f$(e,t){return iM(e,oE(Ao(t)))}function d$(e){return mM(2,e)}function p$(e,t,n,a){return e==null?[]:(va(t)||(t=t==null?[]:[t]),n=a?void 0:n,va(n)||(n=n==null?[]:[n]),z8(e,t,n))}function _E(e){return th(function(t){return t=dl(t,Xp(Ao)),ao(function(n){var a=this;return e(t,function(r){return Is(r,a,n)})})})}var h$=_E(dl),v$=ao,m$=Math.min,y$=v$(function(e,t){t=t.length==1&&va(t[0])?dl(t[0],Xp(Ao)):dl(yc(t,1),Xp(Ao));var n=t.length;return ao(function(a){for(var r=-1,s=m$(a.length,n);++r<s;)a[r]=t[r].call(this,a[r]);return Is(e,this,a)})}),g$=_E(w8),_$=_E(uj),b$=9007199254740991,w$=Math.floor;function mw(e,t){var n="";if(!e||t<1||t>b$)return n;do t%2&&(n+=e),t=w$(t/2),t&&(e+=e);while(t);return n}var E$=WT("length"),lk="\\ud800-\\udfff",O$="\\u0300-\\u036f",S$="\\ufe20-\\ufe2f",x$="\\u20d0-\\u20ff",A$=O$+S$+x$,T$="\\ufe0e\\ufe0f",M$="["+lk+"]",yw="["+A$+"]",gw="\\ud83c[\\udffb-\\udfff]",k$="(?:"+yw+"|"+gw+")",sk="[^"+lk+"]",uk="(?:\\ud83c[\\udde6-\\uddff]){2}",ck="[\\ud800-\\udbff][\\udc00-\\udfff]",N$="\\u200d",fk=k$+"?",dk="["+T$+"]?",P$="(?:"+N$+"(?:"+[sk,uk,ck].join("|")+")"+dk+fk+")*",R$=dk+fk+P$,C$="(?:"+[sk+yw+"?",yw,uk,ck,M$].join("|")+")",ox=RegExp(gw+"(?="+gw+")|"+C$+R$,"g");function D$(e){for(var t=ox.lastIndex=0;ox.test(e);)++t;return t}function Fv(e){return Lv(e)?D$(e):E$(e)}var j$=Math.ceil;function Rg(e,t){t=t===void 0?" ":Eu(t);var n=t.length;if(n<2)return n?mw(t,e):t;var a=mw(t,j$(e/Fv(t)));return Lv(t)?Hd(xu(a),0,e).join(""):a.slice(0,e)}var I$=Math.ceil,L$=Math.floor;function $$(e,t,n){e=Bo(e),t=oo(t);var a=t?Fv(e):0;if(!t||a>=t)return e;var r=(t-a)/2;return Rg(L$(r),n)+e+Rg(I$(r),n)}function F$(e,t,n){e=Bo(e),t=oo(t);var a=t?Fv(e):0;return t&&a<t?e+Rg(t-a,n):e}function B$(e,t,n){e=Bo(e),t=oo(t);var a=t?Fv(e):0;return t&&a<t?Rg(t-a,n)+e:e}var U$=/^\s+/,V$=Qp.parseInt;function G$(e,t,n){return n||t==null?t=0:t&&(t=+t),V$(Bo(e).replace(U$,""),t||0)}var z$=32,b_=ao(function(e,t){var n=Gd(t,Iv(b_));return Cf(e,z$,void 0,t,n)});b_.placeholder={};var W$=64,bE=ao(function(e,t){var n=Gd(t,Iv(bE));return Cf(e,W$,void 0,t,n)});bE.placeholder={};var H$=nE(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function X$(e){for(var t,n=this;n instanceof h_;){var a=cM(n);a.__index__=0,a.__values__=void 0,t?r.__wrapped__=a:t=a;var r=a;n=n.__wrapped__}return r.__wrapped__=e,t}function q$(e){return function(t){return e==null?void 0:HT(e,t)}}function Y$(e,t,n,a){for(var r=n-1,s=e.length;++r<s;)if(a(e[r],t))return r;return-1}var K$=Array.prototype,ix=K$.splice;function wE(e,t,n,a){var r=a?Y$:Yw,s=-1,c=t.length,p=e;for(e===t&&(t=js(t)),n&&(p=dl(e,Xp(n)));++s<c;)for(var d=0,_=t[s],g=n?n(_):_;(d=r(p,g,d,a))>-1;)p!==e&&ix.call(p,d,1),ix.call(e,d,1);return e}function pk(e,t){return e&&e.length&&t&&t.length?wE(e,t):e}var Z$=ao(pk);function J$(e,t,n){return e&&e.length&&t&&t.length?wE(e,t,Ao(n)):e}function Q$(e,t,n){return e&&e.length&&t&&t.length?wE(e,t,void 0,n):e}var eF=Array.prototype,tF=eF.splice;function hk(e,t){for(var n=e?t.length:0,a=n-1;n--;){var r=t[n];if(n==a||r!==s){var s=r;Hm(r)?tF.call(e,r,1):XT(e,r)}}return e}var nF=th(function(e,t){var n=e==null?0:e.length,a=lE(e,t);return hk(e,dl(t,function(r){return Hm(r,n)?+r:r}).sort(W8)),a}),rF=Math.floor,oF=Math.random;function EE(e,t){return e+rF(oF()*(t-e+1))}var iF=parseFloat,aF=Math.min,lF=Math.random;function sF(e,t,n){if(n&&typeof n!="boolean"&&Wd(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Im(e),t===void 0?(t=e,e=0):t=Im(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var r=lF();return aF(e+r*(t-e+iF("1e-"+((r+"").length-1))),t)}return EE(e,t)}var uF=H8(!0),cF=256,fF=th(function(e,t){return Cf(e,cF,void 0,void 0,void 0,t)});function dF(e,t,n,a){var r=e==null?0:e.length;for(a&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function pF(e,t,n){var a=va(e)?dF:y8,r=arguments.length<3;return a(e,Ao(t),n,r,HM)}function hF(e,t){var n=[];if(!(e&&e.length))return n;var a=-1,r=[],s=e.length;for(t=Ao(t);++a<s;){var c=e[a];t(c,a,e)&&(n.push(c),r.push(a))}return hk(e,r),n}function vF(e,t,n){return(n?Wd(e,t,n):t===void 0)?t=1:t=oo(t),mw(Bo(e),t)}function mF(){var e=arguments,t=Bo(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var yF="Expected a function";function gF(e,t){if(typeof e!="function")throw new TypeError(yF);return t=t===void 0?t:oo(t),ao(e,t)}function _F(e,t,n){t=UT(t,e);var a=-1,r=t.length;for(r||(r=1,e=void 0);++a<r;){var s=e==null?void 0:e[i_(t[a])];s===void 0&&(a=r,s=n),e=jv(s)?s.call(e):s}return e}var bF=Array.prototype,wF=bF.reverse;function _w(e){return e==null?e:wF.call(e)}var EF=dE("round");function vk(e){var t=e.length;return t?e[EE(0,t-1)]:void 0}function OF(e){return vk(Qm(e))}function SF(e){var t=va(e)?vk:OF;return t(e)}function w_(e,t){var n=-1,a=e.length,r=a-1;for(t=t===void 0?a:t;++n<t;){var s=EE(n,r),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}function xF(e,t){return w_(js(e),Dv(t,0,e.length))}function AF(e,t){var n=Qm(e);return w_(n,Dv(t,0,n.length))}function TF(e,t,n){(n?Wd(e,t,n):t===void 0)?t=1:t=oo(t);var a=va(e)?xF:AF;return a(e,t)}function MF(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:Kw(e,t,n,a)}function kF(e){return w_(js(e))}function NF(e){return w_(Qm(e))}function PF(e){var t=va(e)?kF:NF;return t(e)}var RF="[object Map]",CF="[object Set]";function DF(e){if(e==null)return 0;if(s_(e))return rE(e)?Fv(e):e.length;var t=l_(e);return t==RF||t==CF?e.size:cj(e).length}function jF(e,t,n){var a=e==null?0:e.length;return a?(n&&typeof n!="number"&&Wd(e,t,n)?(t=0,n=a):(t=t==null?0:oo(t),n=n===void 0?a:oo(n)),Nf(e,t,n)):[]}var IF=$v(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),LF=4294967295,$F=LF-1,FF=Math.floor,BF=Math.min;function OE(e,t,n,a){var r=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var c=t!==t,p=t===null,d=Ev(t),_=t===void 0;r<s;){var g=FF((r+s)/2),b=n(e[g]),S=b!==void 0,T=b===null,A=b===b,O=Ev(b);if(c)var E=a||A;else _?E=A&&(a||S):p?E=A&&S&&(a||!T):d?E=A&&S&&!T&&(a||!O):T||O?E=!1:E=a?b<=t:b<t;E?r=g+1:s=g}return BF(s,$F)}var UF=4294967295,VF=UF>>>1;function E_(e,t,n){var a=0,r=e==null?a:e.length;if(typeof t=="number"&&t===t&&r<=VF){for(;a<r;){var s=a+r>>>1,c=e[s];c!==null&&!Ev(c)&&(n?c<=t:c<t)?a=s+1:r=s}return r}return OE(e,t,Jp,n)}function GF(e,t){return E_(e,t)}function zF(e,t,n){return OE(e,t,Ao(n))}function WF(e,t){var n=e==null?0:e.length;if(n){var a=E_(e,t);if(a<n&&Ym(e[a],t))return a}return-1}function HF(e,t){return E_(e,t,!0)}function XF(e,t,n){return OE(e,t,Ao(n),!0)}function qF(e,t){var n=e==null?0:e.length;if(n){var a=E_(e,t,!0)-1;if(Ym(e[a],t))return a}return-1}function mk(e,t){for(var n=-1,a=e.length,r=0,s=[];++n<a;){var c=e[n],p=t?t(c):c;if(!n||!Ym(p,d)){var d=p;s[r++]=c===0?0:c}}return s}function YF(e){return e&&e.length?mk(e):[]}function KF(e,t){return e&&e.length?mk(e,Ao(t)):[]}var ZF=4294967295;function JF(e,t,n){return n&&typeof n!="number"&&Wd(e,t,n)&&(t=n=void 0),n=n===void 0?ZF:n>>>0,n?(e=Bo(e),e&&(typeof t=="string"||t!=null&&!iE(t))&&(t=Eu(t),!t&&Lv(e))?Hd(xu(e),0,n):e.split(t,n)):[]}var QF="Expected a function",e9=Math.max;function t9(e,t){if(typeof e!="function")throw new TypeError(QF);return t=t==null?0:e9(oo(t),0),ao(function(n){var a=n[t],r=Hd(n,0,t);return a&&Xm(r,a),Is(e,this,r)})}var n9=$v(function(e,t,n){return e+(n?" ":"")+cE(t)});function r9(e,t,n){return e=Bo(e),n=n==null?0:Dv(oo(n),0,e.length),t=Eu(t),e.slice(n,n+t.length)==t}function o9(){return{}}function i9(){return""}function a9(){return!0}var l9=p_(function(e,t){return e-t},0);function s9(e){return e&&e.length?gE(e,Jp):0}function u9(e,t){return e&&e.length?gE(e,Ao(t)):0}function c9(e){var t=e==null?0:e.length;return t?Nf(e,1,t):[]}function f9(e,t,n){return e&&e.length?(t=n||t===void 0?1:oo(t),Nf(e,0,t<0?0:t)):[]}function d9(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:oo(t),t=a-t,Nf(e,t<0?0:t,a)):[]}function p9(e,t){return e&&e.length?y_(e,Ao(t),!1,!0):[]}function h9(e,t){return e&&e.length?y_(e,Ao(t)):[]}function v9(e,t){return t(e),e}var yk=Object.prototype,m9=yk.hasOwnProperty;function ax(e,t,n,a){return e===void 0||Ym(e,yk[n])&&!m9.call(a,n)?t:e}var y9={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function g9(e){return"\\"+y9[e]}var gk=/<%=([\s\S]+?)%>/g,_9=/<%-([\s\S]+?)%>/g,b9=/<%([\s\S]+?)%>/g,bw={escape:_9,evaluate:b9,interpolate:gk,variable:"",imports:{_:{escape:YM}}},w9="Invalid `variable` option passed into `_.template`",E9=/\b__p \+= '';/g,O9=/\b(__p \+=) '' \+/g,S9=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x9=/[()=,{}\[\]\/\s]/,A9=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rg=/($^)/,T9=/['\n\r\u2028\u2029\\]/g,M9=Object.prototype,lx=M9.hasOwnProperty;function k9(e,t,n){var a=bw.imports._.templateSettings||bw;n&&Wd(e,t,n)&&(t=void 0),e=Bo(e),t=pw({},t,a,ax);var r=pw({},t.imports,a.imports,ax),s=mc(r),c=oM(r,s),p,d,_=0,g=t.interpolate||rg,b="__p += '",S=RegExp((t.escape||rg).source+"|"+g.source+"|"+(g===gk?A9:rg).source+"|"+(t.evaluate||rg).source+"|$","g"),T=lx.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(S,function(E,C,j,U,L,V){return j||(j=U),b+=e.slice(_,V).replace(T9,g9),C&&(p=!0,b+=`' +
__e(`+C+`) +
'`),L&&(d=!0,b+=`';
`+L+`;
__p += '`),j&&(b+=`' +
((__t = (`+j+`)) == null ? '' : __t) +
'`),_=V+E.length,E}),b+=`';
`;var A=lx.call(t,"variable")&&t.variable;if(!A)b=`with (obj) {
`+b+`
}
`;else if(x9.test(A))throw new Error(w9);b=(d?b.replace(E9,""):b).replace(O9,"$1").replace(S9,"$1;"),b="function("+(A||"obj")+`) {
`+(A?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(p?", __e = _.escape":"")+(d?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var O=vM(function(){return Function(s,T+"return "+b).apply(void 0,c)});if(O.source=b,sE(O))throw O;return O}function O_(e,t){return t(e)}var N9=9007199254740991,O1=4294967295,P9=Math.min;function R9(e,t){if(e=oo(e),e<1||e>N9)return[];var n=O1,a=P9(e,O1);t=ah(t),e-=O1;for(var r=qT(a,t);++n<e;)t(n);return r}function C9(){return this}function _k(e,t){var n=e;return n instanceof eo&&(n=n.value()),rM(t,function(a,r){return r.func.apply(r.thisArg,Xm([a],r.args))},n)}function D9(){return _k(this.__wrapped__,this.__actions__)}function j9(e){return Bo(e).toLowerCase()}function I9(e){return va(e)?dl(e,i_):Ev(e)?[e]:js(fj(Bo(e)))}var sx=9007199254740991;function L9(e){return e?Dv(oo(e),-sx,sx):e===0?e:0}function $9(e){return Bo(e).toUpperCase()}function F9(e,t,n){var a=va(e),r=a||YT(e)||KT(e);if(t=Ao(t),n==null){var s=e&&e.constructor;r?n=a?new s:[]:Ud(e)?n=jv(s)?Wm(dj(e)):{}:n={}}return(r?vc:nh)(e,function(c,p,d){return t(n,c,p,d)}),n}function bk(e,t){for(var n=e.length;n--&&Yw(t,e[n],0)>-1;);return n}function wk(e,t){for(var n=-1,a=e.length;++n<a&&Yw(t,e[n],0)>-1;);return n}function B9(e,t,n){if(e=Bo(e),e&&(n||t===void 0))return pj(e);if(!e||!(t=Eu(t)))return e;var a=xu(e),r=xu(t),s=wk(a,r),c=bk(a,r)+1;return Hd(a,s,c).join("")}function U9(e,t,n){if(e=Bo(e),e&&(n||t===void 0))return e.slice(0,hj(e)+1);if(!e||!(t=Eu(t)))return e;var a=xu(e),r=bk(a,xu(t))+1;return Hd(a,0,r).join("")}var V9=/^\s+/;function G9(e,t,n){if(e=Bo(e),e&&(n||t===void 0))return e.replace(V9,"");if(!e||!(t=Eu(t)))return e;var a=xu(e),r=wk(a,xu(t));return Hd(a,r).join("")}var z9=30,W9="...",H9=/\w*$/;function X9(e,t){var n=z9,a=W9;if(Ud(t)){var r="separator"in t?t.separator:r;n="length"in t?oo(t.length):n,a="omission"in t?Eu(t.omission):a}e=Bo(e);var s=e.length;if(Lv(e)){var c=xu(e);s=c.length}if(n>=s)return e;var p=n-Fv(a);if(p<1)return a;var d=c?Hd(c,0,p).join(""):e.slice(0,p);if(r===void 0)return d+a;if(c&&(p+=d.length-p),iE(r)){if(e.slice(p).search(r)){var _,g=d;for(r.global||(r=RegExp(r.source,Bo(H9.exec(r))+"g")),r.lastIndex=0;_=r.exec(g);)var b=_.index;d=d.slice(0,b===void 0?p:b)}}else if(e.indexOf(Eu(r),p)!=p){var S=d.lastIndexOf(r);S>-1&&(d=d.slice(0,S))}return d+a}function q9(e){return hM(e,1)}var Y9={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},K9=fE(Y9),Ek=/&(?:amp|lt|gt|quot|#39);/g,Z9=RegExp(Ek.source);function J9(e){return e=Bo(e),e&&Z9.test(e)?e.replace(Ek,K9):e}var Q9=ao(function(e){var t=Ou(e);return Pa(t)&&(t=void 0),Lm(yc(e,1,Pa,!0),Ao(t))}),e7=ao(function(e){var t=Ou(e);return t=typeof t=="function"?t:void 0,Lm(yc(e,1,Pa,!0),void 0,t)});function t7(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?Lm(e,void 0,t):[]}function n7(e,t){return e==null?!0:XT(e,t)}var r7=Math.max;function SE(e){if(!(e&&e.length))return[];var t=0;return e=qm(e,function(n){if(Pa(n))return t=r7(n.length,t),!0}),qT(t,function(n){return dl(e,WT(n))})}function Ok(e,t){if(!(e&&e.length))return[];var n=SE(e);return t==null?n:dl(n,function(a){return Is(t,void 0,a)})}function Sk(e,t,n,a){return Kw(e,t,n(HT(e,t)),a)}function o7(e,t,n){return e==null?e:Sk(e,t,ah(n))}function i7(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:Sk(e,t,ah(n),a)}var a7=$v(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});function l7(e){return e==null?[]:oM(e,eh(e))}var s7=ao(function(e,t){return Pa(e)?d_(e,t):[]});function u7(e,t){return b_(ah(t),e)}var c7=th(function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,r=function(s){return lE(s,e)};return t>1||this.__actions__.length||!(a instanceof eo)||!Hm(n)?this.thru(r):(a=a.slice(n,+n+(t?1:0)),a.__actions__.push({func:O_,args:[r],thisArg:void 0}),new Ls(a,this.__chain__).thru(function(s){return t&&!s.length&&s.push(void 0),s}))});function f7(){return BM(this)}function d7(){var e=this.__wrapped__;if(e instanceof eo){var t=e;return this.__actions__.length&&(t=new eo(this)),t=t.reverse(),t.__actions__.push({func:O_,args:[_w],thisArg:void 0}),new Ls(t,this.__chain__)}return this.thru(_w)}function xE(e,t,n){var a=e.length;if(a<2)return a?Lm(e[0]):[];for(var r=-1,s=Array(a);++r<a;)for(var c=e[r],p=-1;++p<a;)p!=r&&(s[r]=d_(s[r]||c,e[p],t,n));return Lm(yc(s,1),t,n)}var p7=ao(function(e){return xE(qm(e,Pa))}),h7=ao(function(e){var t=Ou(e);return Pa(t)&&(t=void 0),xE(qm(e,Pa),Ao(t))}),v7=ao(function(e){var t=Ou(e);return t=typeof t=="function"?t:void 0,xE(qm(e,Pa),void 0,t)}),m7=ao(SE);function y7(e,t){return X8(e||[],t||[],Kw)}var g7=ao(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,Ok(e,n)});const Bn={chunk:T4,compact:E8,concat:D4,difference:O8,differenceBy:J4,differenceWith:Q4,drop:S8,dropRight:x8,dropRightWhile:t6,dropWhile:n6,fill:_6,findIndex:F8,findLastIndex:FT,flatten:vj,flattenDeep:mj,flattenDepth:A6,fromPairs:yj,head:M8,indexOf:k8,initial:X6,intersection:Y6,intersectionBy:K6,intersectionWith:Z6,join:j5,lastIndexOf:U5,nth:u$,pull:Z$,pullAll:pk,pullAllBy:J$,pullAllWith:Q$,pullAt:nF,remove:hF,reverse:_w,slice:jF,sortedIndex:GF,sortedIndexBy:zF,sortedIndexOf:WF,sortedLastIndex:HF,sortedLastIndexBy:XF,sortedLastIndexOf:qF,sortedUniq:YF,sortedUniqBy:KF,tail:c9,take:f9,takeRight:d9,takeRightWhile:p9,takeWhile:h9,union:gj,unionBy:Q9,unionWith:e7,uniq:A8,uniqBy:T8,uniqWith:t7,unzip:SE,unzipWith:Ok,without:s7,xor:p7,xorBy:h7,xorWith:v7,zip:m7,zipObject:q8,zipObjectDeep:y7,zipWith:g7},Vo={countBy:G4,every:R8,filter:g8,find:B8,findLast:w6,flatMap:_j,flatMapDeep:S6,flatMapDepth:x6,forEach:_8,forEachRight:o6,groupBy:N8,includes:C8,invokeMap:a5,keyBy:L5,map:qw,orderBy:p$,partition:H$,reduce:b8,reduceRight:pF,reject:P8,sample:SF,sampleSize:TF,shuffle:PF,size:DF,some:D8,sortBy:Y8},_7={now:bj},ji={after:uI,ary:hM,before:mM,bind:m_,bindKey:uE,curry:pE,curryRight:hE,debounce:wj,defer:K4,delay:Z4,flip:M6,memoize:Ej,once:d$,overArgs:y$,partial:b_,partialRight:bE,rearg:fF,rest:gF,spread:t9,throttle:Oj,unary:q9,wrap:u7},dr={castArray:Sj,clone:Aj,cloneDeep:Tj,cloneDeepWith:N4,cloneWith:R4,conformsTo:B4,eq:Ym,gt:U6,gte:V6,isArguments:Mj,isArrayBuffer:u5,isArrayLike:s_,isArrayLikeObject:Pa,isBoolean:f5,isBuffer:YT,isDate:h5,isElement:v5,isEmpty:kj,isEqual:Nj,isEqualWith:m5,isError:sE,isFinite:g5,isFunction:jv,isInteger:nk,isLength:Pj,isMap:Rj,isMatch:_5,isMatchWith:b5,isNaN:E5,isNative:x5,isNil:Cj,isNull:Dj,isNumber:rk,isObjectLike:hc,isPlainObject:Xw,isRegExp:iE,isSafeInteger:A5,isSet:jj,isString:rE,isSymbol:Ev,isTypedArray:KT,isUndefined:Ij,isWeakMap:M5,isWeakSet:N5,lt:z5,lte:W5,toArray:ik,toFinite:Im,toLength:ZM,toNumber:Ov,toPlainObject:xj,toSafeInteger:L9,toString:Bo},hl={add:lI,ceil:S4,divide:e6,floor:k6,max:K8,maxBy:Z5,mean:Q5,meanBy:e$,min:U8,minBy:Z8,multiply:o$,round:EF,subtract:l9,sum:s9,sumBy:u9},AE={clamp:Lj,inRange:H6,random:sF},Tr={assign:j8,assignIn:rL,assignInWith:pw,assignWith:oL,at:iL,create:z4,defaults:V8,defaultsDeep:q4,findKey:b6,findLastKey:E6,forIn:Q8,forInRight:L6,forOwn:eI,forOwnRight:$6,functions:F6,functionsIn:B6,get:IT,has:G8,hasIn:Vj,invert:t5,invertBy:o5,invoke:i5,keysIn:eh,mapKeys:H5,mapValues:J8,merge:$j,mergeWith:GM,omit:Fj,omitBy:f$,pick:Bj,pickBy:iM,result:_F,set:Uj,setWith:MF,toPairs:c6,toPairsIn:f6,transform:F9,unset:n7,update:o7,updateWith:i7,values:Qm,valuesIn:l7},gc={at:c7,chain:BM,commit:C4,next:s$,plant:X$,reverse:d7,tap:v9,toIterator:C9,value:D9,wrapperChain:f7},yo={camelCase:w4,capitalize:SM,deburr:xM,endsWith:i6,escape:YM,escapeRegExp:m6,kebabCase:I5,lowerCase:V5,lowerFirst:G5,pad:$$,padEnd:F$,padStart:B$,parseInt:G$,repeat:vF,replace:mF,snakeCase:IF,split:JF,startCase:n9,startsWith:r9,template:k9,templateSettings:bw,toLower:j9,toUpper:$9,trim:B9,trimEnd:U9,trimStart:G9,truncate:X9,unescape:J9,upperCase:a7,upperFirst:cE,words:FM},To={attempt:vM,bindAll:fL,cond:I4,conforms:F4,constant:BT,defaultTo:X4,flow:j6,flowRight:I6,iteratee:R5,matches:q5,matchesProperty:K5,method:t$,methodOf:n$,noop:DT,nthArg:c$,over:h$,overEvery:g$,overSome:_$,property:Gj,propertyOf:q$,range:tI,rangeRight:uF,stubArray:zj,stubFalse:zT,stubObject:o9,stubString:i9,stubTrue:a9,times:R9,toPath:I9,uniqueId:nI};function b7(){var e=new eo(this.__wrapped__);return e.__actions__=js(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=js(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=js(this.__views__),e}function w7(){if(this.__filtered__){var e=new eo(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var E7=Math.max,O7=Math.min;function S7(e,t,n){for(var a=-1,r=n.length;++a<r;){var s=n[a],c=s.size;switch(s.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=O7(t,e+c);break;case"takeRight":e=E7(e,t-c);break}}return{start:e,end:t}}var x7=1,A7=2,T7=Math.min;function M7(){var e=this.__wrapped__.value(),t=this.__dir__,n=va(e),a=t<0,r=n?e.length:0,s=S7(0,r,this.__views__),c=s.start,p=s.end,d=p-c,_=a?p:c-1,g=this.__iteratees__,b=g.length,S=0,T=T7(d,this.__takeCount__);if(!n||!a&&r==d&&T==d)return _k(e,this.__actions__);var A=[];e:for(;d--&&S<T;){_+=t;for(var O=-1,E=e[_];++O<b;){var C=g[O],j=C.iteratee,U=C.type,L=j(E);if(U==A7)E=L;else if(!L){if(U==x7)continue e;break e}}A[S++]=E}return A}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var k7="4.17.21",N7=2,P7=1,R7=3,xk=4294967295,C7=Array.prototype,D7=Object.prototype,Ak=D7.hasOwnProperty,ux=Mg?Mg.iterator:void 0,j7=Math.max,cx=Math.min,TE=function(e){return function(t,n,a){if(a==null){var r=Ud(n),s=r&&mc(n),c=s&&s.length&&g_(n,s);(c?c.length:r)||(a=n,n=t,t=this)}return e(t,n,a)}}(r$);ue.after=ji.after;ue.ary=ji.ary;ue.assign=Tr.assign;ue.assignIn=Tr.assignIn;ue.assignInWith=Tr.assignInWith;ue.assignWith=Tr.assignWith;ue.at=Tr.at;ue.before=ji.before;ue.bind=ji.bind;ue.bindAll=To.bindAll;ue.bindKey=ji.bindKey;ue.castArray=dr.castArray;ue.chain=gc.chain;ue.chunk=Bn.chunk;ue.compact=Bn.compact;ue.concat=Bn.concat;ue.cond=To.cond;ue.conforms=To.conforms;ue.constant=To.constant;ue.countBy=Vo.countBy;ue.create=Tr.create;ue.curry=ji.curry;ue.curryRight=ji.curryRight;ue.debounce=ji.debounce;ue.defaults=Tr.defaults;ue.defaultsDeep=Tr.defaultsDeep;ue.defer=ji.defer;ue.delay=ji.delay;ue.difference=Bn.difference;ue.differenceBy=Bn.differenceBy;ue.differenceWith=Bn.differenceWith;ue.drop=Bn.drop;ue.dropRight=Bn.dropRight;ue.dropRightWhile=Bn.dropRightWhile;ue.dropWhile=Bn.dropWhile;ue.fill=Bn.fill;ue.filter=Vo.filter;ue.flatMap=Vo.flatMap;ue.flatMapDeep=Vo.flatMapDeep;ue.flatMapDepth=Vo.flatMapDepth;ue.flatten=Bn.flatten;ue.flattenDeep=Bn.flattenDeep;ue.flattenDepth=Bn.flattenDepth;ue.flip=ji.flip;ue.flow=To.flow;ue.flowRight=To.flowRight;ue.fromPairs=Bn.fromPairs;ue.functions=Tr.functions;ue.functionsIn=Tr.functionsIn;ue.groupBy=Vo.groupBy;ue.initial=Bn.initial;ue.intersection=Bn.intersection;ue.intersectionBy=Bn.intersectionBy;ue.intersectionWith=Bn.intersectionWith;ue.invert=Tr.invert;ue.invertBy=Tr.invertBy;ue.invokeMap=Vo.invokeMap;ue.iteratee=To.iteratee;ue.keyBy=Vo.keyBy;ue.keys=mc;ue.keysIn=Tr.keysIn;ue.map=Vo.map;ue.mapKeys=Tr.mapKeys;ue.mapValues=Tr.mapValues;ue.matches=To.matches;ue.matchesProperty=To.matchesProperty;ue.memoize=ji.memoize;ue.merge=Tr.merge;ue.mergeWith=Tr.mergeWith;ue.method=To.method;ue.methodOf=To.methodOf;ue.mixin=TE;ue.negate=oE;ue.nthArg=To.nthArg;ue.omit=Tr.omit;ue.omitBy=Tr.omitBy;ue.once=ji.once;ue.orderBy=Vo.orderBy;ue.over=To.over;ue.overArgs=ji.overArgs;ue.overEvery=To.overEvery;ue.overSome=To.overSome;ue.partial=ji.partial;ue.partialRight=ji.partialRight;ue.partition=Vo.partition;ue.pick=Tr.pick;ue.pickBy=Tr.pickBy;ue.property=To.property;ue.propertyOf=To.propertyOf;ue.pull=Bn.pull;ue.pullAll=Bn.pullAll;ue.pullAllBy=Bn.pullAllBy;ue.pullAllWith=Bn.pullAllWith;ue.pullAt=Bn.pullAt;ue.range=To.range;ue.rangeRight=To.rangeRight;ue.rearg=ji.rearg;ue.reject=Vo.reject;ue.remove=Bn.remove;ue.rest=ji.rest;ue.reverse=Bn.reverse;ue.sampleSize=Vo.sampleSize;ue.set=Tr.set;ue.setWith=Tr.setWith;ue.shuffle=Vo.shuffle;ue.slice=Bn.slice;ue.sortBy=Vo.sortBy;ue.sortedUniq=Bn.sortedUniq;ue.sortedUniqBy=Bn.sortedUniqBy;ue.split=yo.split;ue.spread=ji.spread;ue.tail=Bn.tail;ue.take=Bn.take;ue.takeRight=Bn.takeRight;ue.takeRightWhile=Bn.takeRightWhile;ue.takeWhile=Bn.takeWhile;ue.tap=gc.tap;ue.throttle=ji.throttle;ue.thru=O_;ue.toArray=dr.toArray;ue.toPairs=Tr.toPairs;ue.toPairsIn=Tr.toPairsIn;ue.toPath=To.toPath;ue.toPlainObject=dr.toPlainObject;ue.transform=Tr.transform;ue.unary=ji.unary;ue.union=Bn.union;ue.unionBy=Bn.unionBy;ue.unionWith=Bn.unionWith;ue.uniq=Bn.uniq;ue.uniqBy=Bn.uniqBy;ue.uniqWith=Bn.uniqWith;ue.unset=Tr.unset;ue.unzip=Bn.unzip;ue.unzipWith=Bn.unzipWith;ue.update=Tr.update;ue.updateWith=Tr.updateWith;ue.values=Tr.values;ue.valuesIn=Tr.valuesIn;ue.without=Bn.without;ue.words=yo.words;ue.wrap=ji.wrap;ue.xor=Bn.xor;ue.xorBy=Bn.xorBy;ue.xorWith=Bn.xorWith;ue.zip=Bn.zip;ue.zipObject=Bn.zipObject;ue.zipObjectDeep=Bn.zipObjectDeep;ue.zipWith=Bn.zipWith;ue.entries=Tr.toPairs;ue.entriesIn=Tr.toPairsIn;ue.extend=Tr.assignIn;ue.extendWith=Tr.assignInWith;TE(ue,ue);ue.add=hl.add;ue.attempt=To.attempt;ue.camelCase=yo.camelCase;ue.capitalize=yo.capitalize;ue.ceil=hl.ceil;ue.clamp=AE.clamp;ue.clone=dr.clone;ue.cloneDeep=dr.cloneDeep;ue.cloneDeepWith=dr.cloneDeepWith;ue.cloneWith=dr.cloneWith;ue.conformsTo=dr.conformsTo;ue.deburr=yo.deburr;ue.defaultTo=To.defaultTo;ue.divide=hl.divide;ue.endsWith=yo.endsWith;ue.eq=dr.eq;ue.escape=yo.escape;ue.escapeRegExp=yo.escapeRegExp;ue.every=Vo.every;ue.find=Vo.find;ue.findIndex=Bn.findIndex;ue.findKey=Tr.findKey;ue.findLast=Vo.findLast;ue.findLastIndex=Bn.findLastIndex;ue.findLastKey=Tr.findLastKey;ue.floor=hl.floor;ue.forEach=Vo.forEach;ue.forEachRight=Vo.forEachRight;ue.forIn=Tr.forIn;ue.forInRight=Tr.forInRight;ue.forOwn=Tr.forOwn;ue.forOwnRight=Tr.forOwnRight;ue.get=Tr.get;ue.gt=dr.gt;ue.gte=dr.gte;ue.has=Tr.has;ue.hasIn=Tr.hasIn;ue.head=Bn.head;ue.identity=Jp;ue.includes=Vo.includes;ue.indexOf=Bn.indexOf;ue.inRange=AE.inRange;ue.invoke=Tr.invoke;ue.isArguments=dr.isArguments;ue.isArray=va;ue.isArrayBuffer=dr.isArrayBuffer;ue.isArrayLike=dr.isArrayLike;ue.isArrayLikeObject=dr.isArrayLikeObject;ue.isBoolean=dr.isBoolean;ue.isBuffer=dr.isBuffer;ue.isDate=dr.isDate;ue.isElement=dr.isElement;ue.isEmpty=dr.isEmpty;ue.isEqual=dr.isEqual;ue.isEqualWith=dr.isEqualWith;ue.isError=dr.isError;ue.isFinite=dr.isFinite;ue.isFunction=dr.isFunction;ue.isInteger=dr.isInteger;ue.isLength=dr.isLength;ue.isMap=dr.isMap;ue.isMatch=dr.isMatch;ue.isMatchWith=dr.isMatchWith;ue.isNaN=dr.isNaN;ue.isNative=dr.isNative;ue.isNil=dr.isNil;ue.isNull=dr.isNull;ue.isNumber=dr.isNumber;ue.isObject=Ud;ue.isObjectLike=dr.isObjectLike;ue.isPlainObject=dr.isPlainObject;ue.isRegExp=dr.isRegExp;ue.isSafeInteger=dr.isSafeInteger;ue.isSet=dr.isSet;ue.isString=dr.isString;ue.isSymbol=dr.isSymbol;ue.isTypedArray=dr.isTypedArray;ue.isUndefined=dr.isUndefined;ue.isWeakMap=dr.isWeakMap;ue.isWeakSet=dr.isWeakSet;ue.join=Bn.join;ue.kebabCase=yo.kebabCase;ue.last=Ou;ue.lastIndexOf=Bn.lastIndexOf;ue.lowerCase=yo.lowerCase;ue.lowerFirst=yo.lowerFirst;ue.lt=dr.lt;ue.lte=dr.lte;ue.max=hl.max;ue.maxBy=hl.maxBy;ue.mean=hl.mean;ue.meanBy=hl.meanBy;ue.min=hl.min;ue.minBy=hl.minBy;ue.stubArray=To.stubArray;ue.stubFalse=To.stubFalse;ue.stubObject=To.stubObject;ue.stubString=To.stubString;ue.stubTrue=To.stubTrue;ue.multiply=hl.multiply;ue.nth=Bn.nth;ue.noop=To.noop;ue.now=_7.now;ue.pad=yo.pad;ue.padEnd=yo.padEnd;ue.padStart=yo.padStart;ue.parseInt=yo.parseInt;ue.random=AE.random;ue.reduce=Vo.reduce;ue.reduceRight=Vo.reduceRight;ue.repeat=yo.repeat;ue.replace=yo.replace;ue.result=Tr.result;ue.round=hl.round;ue.sample=Vo.sample;ue.size=Vo.size;ue.snakeCase=yo.snakeCase;ue.some=Vo.some;ue.sortedIndex=Bn.sortedIndex;ue.sortedIndexBy=Bn.sortedIndexBy;ue.sortedIndexOf=Bn.sortedIndexOf;ue.sortedLastIndex=Bn.sortedLastIndex;ue.sortedLastIndexBy=Bn.sortedLastIndexBy;ue.sortedLastIndexOf=Bn.sortedLastIndexOf;ue.startCase=yo.startCase;ue.startsWith=yo.startsWith;ue.subtract=hl.subtract;ue.sum=hl.sum;ue.sumBy=hl.sumBy;ue.template=yo.template;ue.times=To.times;ue.toFinite=dr.toFinite;ue.toInteger=oo;ue.toLength=dr.toLength;ue.toLower=yo.toLower;ue.toNumber=dr.toNumber;ue.toSafeInteger=dr.toSafeInteger;ue.toString=dr.toString;ue.toUpper=yo.toUpper;ue.trim=yo.trim;ue.trimEnd=yo.trimEnd;ue.trimStart=yo.trimStart;ue.truncate=yo.truncate;ue.unescape=yo.unescape;ue.uniqueId=To.uniqueId;ue.upperCase=yo.upperCase;ue.upperFirst=yo.upperFirst;ue.each=Vo.forEach;ue.eachRight=Vo.forEachRight;ue.first=Bn.head;TE(ue,function(){var e={};return nh(ue,function(t,n){Ak.call(ue.prototype,n)||(e[n]=t)}),e}(),{chain:!1});ue.VERSION=k7;(ue.templateSettings=yo.templateSettings).imports._=ue;vc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ue[e].placeholder=ue});vc(["drop","take"],function(e,t){eo.prototype[e]=function(n){n=n===void 0?1:j7(oo(n),0);var a=this.__filtered__&&!t?new eo(this):this.clone();return a.__filtered__?a.__takeCount__=cx(n,a.__takeCount__):a.__views__.push({size:cx(n,xk),type:e+(a.__dir__<0?"Right":"")}),a},eo.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});vc(["filter","map","takeWhile"],function(e,t){var n=t+1,a=n==P7||n==R7;eo.prototype[e]=function(r){var s=this.clone();return s.__iteratees__.push({iteratee:Ao(r),type:n}),s.__filtered__=s.__filtered__||a,s}});vc(["head","last"],function(e,t){var n="take"+(t?"Right":"");eo.prototype[e]=function(){return this[n](1).value()[0]}});vc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");eo.prototype[e]=function(){return this.__filtered__?new eo(this):this[n](1)}});eo.prototype.compact=function(){return this.filter(Jp)};eo.prototype.find=function(e){return this.filter(e).head()};eo.prototype.findLast=function(e){return this.reverse().find(e)};eo.prototype.invokeMap=ao(function(e,t){return typeof e=="function"?new eo(this):this.map(function(n){return ey(n,e,t)})});eo.prototype.reject=function(e){return this.filter(oE(Ao(e)))};eo.prototype.slice=function(e,t){e=oo(e);var n=this;return n.__filtered__&&(e>0||t<0)?new eo(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=oo(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};eo.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};eo.prototype.toArray=function(){return this.take(xk)};nh(eo.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),r=ue[a?"take"+(t=="last"?"Right":""):t],s=a||/^find/.test(t);r&&(ue.prototype[t]=function(){var c=this.__wrapped__,p=a?[1]:arguments,d=c instanceof eo,_=p[0],g=d||va(c),b=function(C){var j=r.apply(ue,Xm([C],p));return a&&S?j[0]:j};g&&n&&typeof _=="function"&&_.length!=1&&(d=g=!1);var S=this.__chain__,T=!!this.__actions__.length,A=s&&!S,O=d&&!T;if(!s&&g){c=O?c:new eo(this);var E=e.apply(c,p);return E.__actions__.push({func:O_,args:[b],thisArg:void 0}),new Ls(E,S)}return A&&O?e.apply(this,p):(E=this.thru(b),A?a?E.value()[0]:E.value():E)})});vc(["pop","push","shift","sort","splice","unshift"],function(e){var t=C7[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);ue.prototype[e]=function(){var r=arguments;if(a&&!this.__chain__){var s=this.value();return t.apply(va(s)?s:[],r)}return this[n](function(c){return t.apply(va(c)?c:[],r)})}});nh(eo.prototype,function(e,t){var n=ue[t];if(n){var a=n.name+"";Ak.call(hv,a)||(hv[a]=[]),hv[a].push({name:t,func:n})}});hv[v_(void 0,N7).name]=[{name:"wrapper",func:void 0}];eo.prototype.clone=b7;eo.prototype.reverse=w7;eo.prototype.value=M7;ue.prototype.at=gc.at;ue.prototype.chain=gc.wrapperChain;ue.prototype.commit=gc.commit;ue.prototype.next=gc.next;ue.prototype.plant=gc.plant;ue.prototype.reverse=gc.reverse;ue.prototype.toJSON=ue.prototype.valueOf=ue.prototype.value=gc.value;ue.prototype.first=ue.prototype.head;ux&&(ue.prototype[ux]=gc.toIterator);const I7="data:image/svg+xml,%3csvg%20width='27'%20height='20'%20viewBox='0%200%2027%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.6667%203.33329H3.66667V16.6666H23.6667V3.33329ZM3.66667%201.66663C2.74619%201.66663%202%202.41282%202%203.33329V16.6666C2%2017.5871%202.74619%2018.3333%203.66667%2018.3333H23.6667C24.5871%2018.3333%2025.3333%2017.5871%2025.3333%2016.6666V3.33329C25.3333%202.41282%2024.5871%201.66663%2023.6667%201.66663H3.66667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.2196%206.91331H18.2767L19.4%209.89549L20.4758%206.91331L22.5375%206.83044L19.4%2014.8138L17.3565%2014.8966L18.437%2012.3756L16.2196%206.91331Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.1034%207.06327C13.1302%207.04839%2013.1574%207.03404%2013.1848%207.02023C13.5166%206.84295%2013.8759%206.77344%2014.2468%206.77344C14.9611%206.77344%2015.5729%206.97047%2015.9992%207.43635C16.419%207.89521%2016.5934%208.54454%2016.5934%209.3101V12.9168H14.7001V9.4001C14.7001%209.01738%2014.6103%208.80651%2014.5052%208.69229C14.4059%208.58445%2014.2319%208.49677%2013.9067%208.49677C13.7078%208.49677%2013.5468%208.55932%2013.4114%208.69473C13.2534%208.85274%2013.1382%209.08146%2013.1034%209.41091V12.9168H11.2101V6.91344H13.1034V7.06327Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.01665%2012.6833V12.9168H10.83V9.2001C10.83%208.50266%2010.6523%207.90623%2010.247%207.47482L10.2458%207.47354C9.77726%206.97898%209.08554%206.77344%208.26332%206.77344C7.58671%206.77344%206.97894%206.88784%206.50606%207.18452C5.95355%207.51308%205.61381%208.04132%205.48446%208.69979L5.39493%209.15558L6.60828%209.25958C6.45695%209.32645%206.3157%209.40545%206.18578%209.49774C5.6067%209.89006%205.31665%2010.4724%205.31665%2011.1801C5.31665%2011.727%205.52656%2012.1949%205.95194%2012.5464C6.34831%2012.8992%206.87585%2013.0568%207.48332%2013.0568C7.99851%2013.0568%208.45994%2012.9557%208.86073%2012.7671L8.86966%2012.7628C8.91982%2012.7377%208.96882%2012.7112%209.01665%2012.6833ZM7.33362%209.04021C7.60234%208.98907%207.88998%208.96154%208.19236%208.95358L8.93243%208.93444C8.90662%208.77431%208.84911%208.68249%208.7882%208.62627C8.69958%208.54447%208.527%208.46677%208.19332%208.46677C7.90772%208.46677%207.72064%208.51963%207.60769%208.58739L7.60328%208.59004C7.46993%208.66783%207.38847%208.77506%207.35134%208.95452L7.33362%209.04021ZM8.93782%2010.5386L8.28478%2010.5566L8.28191%2010.5567C7.83203%2010.566%207.5658%2010.6502%207.4222%2010.7499C7.3054%2010.831%207.23998%2010.9409%207.23998%2011.1401C7.23998%2011.2037%207.25413%2011.2438%207.32642%2011.2991L7.3313%2011.3029L7.33606%2011.3067C7.40443%2011.3623%207.52395%2011.4134%207.72332%2011.4134C8.07815%2011.4134%208.36218%2011.3062%208.60462%2011.1017C8.80129%2010.9357%208.90794%2010.7499%208.93782%2010.5386Z'%20fill='%23646A73'/%3e%3c/svg%3e",L7="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.6667%203.33329H3.33335V16.6666H16.6667V3.33329ZM3.33335%201.66663C2.41288%201.66663%201.66669%202.41282%201.66669%203.33329V16.6666C1.66669%2017.5871%202.41288%2018.3333%203.33335%2018.3333H16.6667C17.5872%2018.3333%2018.3334%2017.5871%2018.3334%2016.6666V3.33329C18.3334%202.41282%2017.5872%201.66663%2016.6667%201.66663H3.33335Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.33%205.83667H15.2233V13.95H13.33V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.83%205.83667H12.7233V13.95H10.83V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.51665%2013.7165V13.95H10.33V10.2333C10.33%209.53587%2010.1523%208.93943%209.747%208.50803L9.7458%208.50675C9.27726%208.01218%208.58554%207.80664%207.76332%207.80664C7.08671%207.80664%206.47894%207.92104%206.00606%208.21772C5.45355%208.54628%205.11381%209.07452%204.98446%209.733L4.89493%2010.1888L6.10828%2010.2928C5.95695%2010.3597%205.8157%2010.4386%205.68578%2010.5309C5.1067%2010.9233%204.81665%2011.5057%204.81665%2012.2133C4.81665%2012.7602%205.02656%2013.2281%205.45194%2013.5796C5.84831%2013.9324%206.37585%2014.09%206.98332%2014.09C7.49851%2014.09%207.95994%2013.9889%208.36073%2013.8003L8.36966%2013.796C8.41982%2013.7709%208.46882%2013.7444%208.51665%2013.7165ZM6.83361%2010.0734C7.10234%2010.0223%207.38998%209.99474%207.69236%209.98678L8.43243%209.96764C8.40662%209.80751%208.3491%209.71569%208.2882%209.65948C8.19958%209.57767%208.027%209.49997%207.69332%209.49997C7.40772%209.49997%207.22064%209.55283%207.10769%209.6206L7.10328%209.62324C6.96993%209.70103%206.88847%209.80826%206.85134%209.98773L6.83361%2010.0734ZM8.43782%2011.5718L7.78478%2011.5898L7.78191%2011.5899C7.33203%2011.5992%207.0658%2011.6834%206.9222%2011.7831C6.8054%2011.8642%206.73998%2011.9741%206.73998%2012.1733C6.73998%2012.2369%206.75413%2012.277%206.82642%2012.3323L6.8313%2012.3361L6.83606%2012.3399C6.90443%2012.3955%207.02395%2012.4466%207.22332%2012.4466C7.57815%2012.4466%207.86218%2012.3394%208.10462%2012.1349C8.30129%2011.9689%208.40794%2011.7831%208.43782%2011.5718Z'%20fill='%23646A73'/%3e%3c/svg%3e",fx="data:image/svg+xml,%3csvg%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15.8888%203.44443V5.22221H18.9999C19.4908%205.22221%2019.8888%205.62018%2019.8888%206.1111V9.22221H15.4443V8.33332H13.6666V9.22221H8.33324V8.33332H6.55546V9.22221H2.11102V6.1111C2.11102%205.62018%202.50898%205.22221%202.9999%205.22221H6.11102V3.44443C6.11102%202.95351%206.50898%202.55554%206.9999%202.55554H14.9999C15.4908%202.55554%2015.8888%202.95351%2015.8888%203.44443ZM7.88879%205.22221H14.111V4.33332H7.88879V5.22221Z'%20fill='white'/%3e%3cpath%20d='M2.11102%2011H6.55546V11.8889H8.33324V11H13.6666V11.8889H15.4443V11H19.8888V18.5555C19.8888%2019.0465%2019.4908%2019.4444%2018.9999%2019.4444H2.9999C2.50898%2019.4444%202.11102%2019.0465%202.11102%2018.5555V11Z'%20fill='white'/%3e%3c/svg%3e",$7={class:"list flex-wrap"},F7=["onClick","onMousedown"],B7=["src"],U7=["title"],V7={class:"flex-between"},G7={class:"flex align-center"},z7=["src"],W7=["title"],H7={key:0,class:"status-tag",style:{"margin-left":"auto"}},dx=$n({__name:"NodeContent",props:{list:{}},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=e,a=t,r=je(""),s=je([]);function c(p,d){return d.length?p.filter(_=>_.name.toLowerCase().includes(d.toLowerCase())):p}return Km([()=>r.value,()=>n.list],()=>{s.value=c(n.list,r.value)}),(p,d)=>{const _=Q("el-input"),g=Q("el-avatar"),b=Q("el-tag"),S=Q("el-text"),T=Q("el-popover"),A=Q("el-empty");return _e(),Yt(tr,null,[k(_,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=O=>r.value=O),modelModifiers:{trim:!0},placeholder:p.$t("common.search"),"prefix-icon":"Search",clearable:"",style:{padding:"12px 12px 0 12px"}},null,8,["modelValue","placeholder"]),K("div",$7,[s.value.length?(_e(!0),Yt(tr,{key:0},Wr(s.value,O=>(_e(),Ke(T,{key:O.id,placement:"right",width:280,"show-after":500},{reference:R(()=>[K("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:qt(E=>a("clickNodes",O),["stop"]),onMousedown:qt(E=>a("onmousedown",O),["stop"])},[Zt(Sv)(O==null?void 0:O.icon)?(_e(),Ke(g,{key:0,shape:"square",size:20,style:{background:"none"}},{default:R(()=>[K("img",{src:Zt(Cl)(O==null?void 0:O.icon,Zt(Cl)("./favicon.ico")),alt:""},null,8,B7)]),_:2},1024)):(_e(),Ke(g,{key:1,class:"avatar-green",shape:"square",size:20},{default:R(()=>d[1]||(d[1]=[K("img",{src:fx,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[1]})),K("span",{class:"ml-8 ellipsis",title:O.name},me(O.name),9,U7)],40,F7)]),default:R(()=>[K("div",V7,[K("div",G7,[Zt(Sv)(O==null?void 0:O.icon)?(_e(),Ke(g,{key:0,shape:"square",size:20,style:{background:"none"}},{default:R(()=>[K("img",{src:Zt(Cl)(O==null?void 0:O.icon,Zt(Cl)("./favicon.ico")),alt:""},null,8,z7)]),_:2},1024)):(_e(),Ke(g,{key:1,class:"avatar-green",shape:"square",size:20},{default:R(()=>d[2]||(d[2]=[K("img",{src:fx,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[2]})),K("span",{class:"font-medium ml-8 break-all",title:O.name},me(O.name),9,W7)]),O.type?(_e(),Yt("div",H7,[Zt(Zw)(O.type)?(_e(),Ke(b,{key:0,class:"warning-tag"},{default:R(()=>[tt(me(p.$t("views.application.workflow")),1)]),_:1})):(_e(),Ke(b,{key:1,class:"blue-tag"},{default:R(()=>[tt(me(p.$t("views.application.simple")),1)]),_:1}))])):cn("",!0)]),k(S,{type:"info",size:"small",class:"mt-4"},{default:R(()=>[tt(me(O.desc),1)]),_:2},1024)]),_:2},1024))),128)):(_e(),Ke(A,{key:1,description:p.$t("common.noData")},null,8,["description"]))])],64)}}}),X7={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-12 mt-12"},q7={key:0},Y7={class:"flex-wrap",style:{gap:"12px",padding:"12px"}},K7=["onClick","onMousedown"],Z7={class:"lighter"},J7={class:"flex align-center mb-8"},Q7={class:"lighter color-text-primary"},eB={key:1,class:"ml-16 mt-8"},px=$n({__name:"index",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=Uo("workflowMode"),a=Zi(),{user:r,folder:s}=u_(),c=f_(n||xr.Application),p=je(""),d=e,_=t,g=Gn(()=>a.path.includes("shared")?"systemShare":a.path.includes("resource-management")?"systemManage":"workspace");Gn(()=>Jw.tool[g.value]);const b=je(!1),S=je("base"),T=Gn(()=>{if(!p.value)return c||[];const W=p.value.toLowerCase();return(c||[]).reduce((B,q)=>{const J=q.list.filter(ce=>ce.label.toLowerCase().includes(W));return J.length&&B.push({...q,list:J}),B},[])});function A(W,B,q){var J;B&&(W.properties.nodeName=B.name,q=="tool"&&(W.properties.nodeData={...B,toolLibId:B.id,input_field_list:B.input_field_list.map(ce=>({...ce,value:ce.source=="reference"?[]:""}))}),q=="application"&&(W.properties.nodeData={name:B.name,icon:B.icon,application_id:B.id})),(J=d.workflowRef)==null||J.addNode(W),_("clickNodes",W)}function O(W,B,q){var J;B&&(W.properties.nodeName=B.name,q=="tool"&&(W.properties.nodeData={...B,toolLibId:B.id,input_field_list:B.input_field_list.map(ce=>({...ce,value:ce.source=="reference"?[]:""}))}),q=="application"&&(Zw(B.type)?(B.workFlow.nodes[0].properties.nodeData.file_upload_setting,W.properties.nodeData={name:B.name,icon:B.icon,application_id:B.id}):W.properties.nodeData={name:B.name,icon:B.icon,application_id:B.id})),(J=d.workflowRef)==null||J.onmousedown(W),_("onmousedown",W)}const E=je([]),C=je([]);async function j(){var B;const W=await s.asyncGetFolder(xm.TOOL,{source_id:d.id},g.value,b);E.value=W.data,s.setCurrentFolder(((B=W.data)==null?void 0:B[0])||{})}async function U(){var B,q,J,ce;const W=await si({type:"tool",isShared:((B=s.currentFolder)==null?void 0:B.id)==="share",systemType:g.value}).getToolList({folder_id:((q=s.currentFolder)==null?void 0:q.id)||r.getWorkspaceId(),tool_type:"CUSTOM"});C.value=((J=W.data)==null?void 0:J.tools)||W.data||[],C.value=(ce=C.value)==null?void 0:ce.filter(re=>re.is_active)}const L=je([]),V=je([]);function $(){s.asyncGetFolder(xm.APPLICATION,{source_id:d.id},g.value,b).then(W=>{var B;L.value=W.data,s.setCurrentFolder(((B=W.data)==null?void 0:B[0])||{})})}async function H(){var B;const W=await si({type:"application",systemType:g.value}).getAllApplication({folder_id:((B=s.currentFolder)==null?void 0:B.id)||r.getWorkspaceId()});V.value=W.data.filter(q=>q.resource_type==="application"&&q.id!==d.id&&q.is_publish)}function Y(W){s.setCurrentFolder(W),S.value==="tool"?U():H()}async function z(W){W==="tool"?(await j(),U()):W==="application"&&($(),H())}return Ur(()=>{}),(W,B)=>{const q=Q("search"),J=Q("el-icon"),ce=Q("el-input"),re=Q("el-text"),Pe=Q("el-popover"),ge=Q("el-scrollbar"),fe=Q("el-tab-pane"),Ee=Q("el-tabs");return Wa((_e(),Yt("div",{class:"workflow-dropdown-menu border border-r-6 white-bg",style:Qw({width:S.value==="base"?"400px":"640px"})},[k(Ee,{modelValue:S.value,"onUpdate:modelValue":B[5]||(B[5]=Ne=>S.value=Ne),class:"workflow-dropdown-tabs",onTabChange:z},{default:R(()=>[Wa(K("div",X7,[k(ce,{modelValue:p.value,"onUpdate:modelValue":B[0]||(B[0]=Ne=>p.value=Ne),class:"mr-12 ml-12",placeholder:W.$t("common.searchBar.placeholder")},{suffix:R(()=>[k(J,{class:"el-input__icon"},{default:R(()=>[k(q)]),_:1})]),_:1},8,["modelValue","placeholder"])],512),[[fc,S.value==="base"]]),k(fe,{label:W.$t("workflow.baseComponent"),name:"base"},{default:R(()=>[k(ge,{height:"400"},{default:R(()=>[T.value.length>0?(_e(),Yt("div",q7,[(_e(!0),Yt(tr,null,Wr(T.value,(Ne,rt)=>(_e(),Yt(tr,{key:rt},[k(re,{type:"info",size:"small",class:"color-secondary ml-12"},{default:R(()=>[tt(me(Ne.label),1)]),_:2},1024),K("div",Y7,[(_e(!0),Yt(tr,null,Wr(Ne.list,(mt,Je)=>(_e(),Ke(Pe,{key:Je,placement:"right",width:280,"show-after":500},{reference:R(()=>[K("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:qt(Xt=>A(mt),["stop"]),onMousedown:qt(Xt=>O(mt),["stop"])},[(_e(),Ke(Vd(Zt(qp)(`${mt.type}-icon`)),{class:"mr-8",size:20})),K("div",Z7,me(mt.label),1)],40,K7)]),default:R(()=>[K("div",J7,[(_e(),Ke(Vd(Zt(qp)(`${mt.type}-icon`)),{class:"mr-8",size:32})),K("div",Q7,me(mt.label),1)]),k(re,{type:"info",size:"small",class:"color-secondary lighter"},{default:R(()=>[tt(me(mt.text),1)]),_:2},1024)]),_:2},1024))),128))])],64))),128))])):(_e(),Yt("div",eB,[k(re,{type:"info"},{default:R(()=>[tt(me(W.$t("workflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),k(fe,{label:W.$t("views.tool.title"),name:"tool"},{default:R(()=>[k(fw,null,{default:R(()=>[k(ge,{height:"450"},{default:R(()=>[k(dx,{list:C.value,onClickNodes:B[1]||(B[1]=Ne=>A(Zt(Av),Ne,"tool")),onOnmousedown:B[2]||(B[2]=Ne=>O(Zt(Av),Ne,"tool"))},null,8,["list"])]),_:1})]),_:1})]),_:1},8,["label"]),k(fe,{label:W.$t("views.application.title"),name:"application"},{default:R(()=>[k(fw,null,{left:R(()=>{var Ne;return[k(Wj,{source:Zt(xm).APPLICATION,data:L.value,currentNodeKey:(Ne=Zt(s).currentFolder)==null?void 0:Ne.id,onHandleNodeClick:Y,canOperation:!1,treeStyle:{height:"400px"}},null,8,["source","data","currentNodeKey"])]}),default:R(()=>[k(ge,{height:"450"},{default:R(()=>[k(dx,{list:V.value,onClickNodes:B[3]||(B[3]=Ne=>A(Zt($S),Ne,"application")),onOnmousedown:B[4]||(B[4]=Ne=>O(Zt($S),Ne,"application"))},null,8,["list"])]),_:1})]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],4)),[[fc,e.show]])}}}),tB={class:"list flex-wrap"},nB=["onClick","onMousedown"],rB=["src"],oB=["title"],iB={class:"flex-between"},aB={class:"flex align-center"},lB=["src"],sB=["title"],uB=$n({__name:"NodeContent",props:{list:{}},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=e,a=t,r=je(""),s=je([]);function c(p,d){return d.length?p.filter(_=>_.name.toLowerCase().includes(d.toLowerCase())):p}return Km([()=>r.value,()=>n.list],()=>{s.value=c(n.list,r.value)}),(p,d)=>{const _=Q("el-input"),g=Q("el-avatar"),b=Q("ToolIcon"),S=Q("el-text"),T=Q("el-popover"),A=Q("el-empty");return _e(),Yt(tr,null,[k(_,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=O=>r.value=O),modelModifiers:{trim:!0},placeholder:p.$t("common.search"),"prefix-icon":"Search",clearable:"",style:{padding:"12px 12px 0 12px"}},null,8,["modelValue","placeholder"]),K("div",tB,[s.value.length?(_e(!0),Yt(tr,{key:0},Wr(s.value,O=>(_e(),Ke(T,{key:O.id,placement:"right",width:280,"show-after":500},{reference:R(()=>[K("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:qt(E=>a("clickNodes",O),["stop"]),onMousedown:qt(E=>a("onmousedown",O),["stop"])},[Zt(Sv)(O==null?void 0:O.icon)?(_e(),Ke(g,{key:0,shape:"square",size:20,style:{background:"none"}},{default:R(()=>[K("img",{src:Zt(Cl)(O==null?void 0:O.icon,Zt(Cl)("./favicon.ico")),alt:""},null,8,rB)]),_:2},1024)):(_e(),Ke(b,{key:1,size:20,type:O==null?void 0:O.tool_type},null,8,["type"])),K("span",{class:"ml-8 ellipsis",title:O.name},me(O.name),9,oB)],40,nB)]),default:R(()=>[K("div",iB,[K("div",aB,[Zt(Sv)(O==null?void 0:O.icon)?(_e(),Ke(g,{key:0,shape:"square",size:20,style:{background:"none"}},{default:R(()=>[K("img",{src:Zt(Cl)(O==null?void 0:O.icon,Zt(Cl)("./favicon.ico")),alt:""},null,8,lB)]),_:2},1024)):(_e(),Ke(b,{key:1,size:20,type:O==null?void 0:O.tool_type},null,8,["type"])),K("span",{class:"font-medium ml-8 break-all",title:O.name},me(O.name),9,sB)])]),k(S,{type:"info",size:"small",class:"mt-4"},{default:R(()=>[tt(me(O.desc),1)]),_:2},1024)]),_:2},1024))),128)):(_e(),Ke(A,{key:1,description:p.$t("common.noData")},null,8,["description"]))])],64)}}}),cB={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-12 mt-12"},fB={key:0},dB={class:"flex-wrap",style:{gap:"12px",padding:"12px"}},pB=["onClick","onMousedown"],hB={class:"lighter"},vB={class:"flex align-center mb-8"},mB={class:"lighter color-text-primary"},yB={key:1,class:"ml-16 mt-8"},hx=$n({__name:"index",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=Uo("workflowMode"),a=Zi(),{user:r,folder:s}=u_(),c=f_(n||xr.Application),p=je(""),d=e,_=t,g=Gn(()=>a.path.includes("shared")?"systemShare":a.path.includes("resource-management")?"systemManage":"workspace");Gn(()=>Jw.tool[g.value]),je(!1);const b=je("base"),S=Gn(()=>{if(!p.value)return c||[];const j=p.value.toLowerCase();return(c||[]).reduce((U,L)=>{const V=L.list.filter($=>$.label.toLowerCase().includes(j));return V.length&&U.push({...L,list:V}),U},[])});function T(j,U){var L;U&&(j.properties.nodeName=U.name,U.tool_type=="DATA_SOURCE"&&(j.properties.kind=uc.DataSource),j.properties.nodeData={...U,toolLibId:U.id,inputFieldList:U.inputFieldList.map(V=>({...V,value:V.source=="reference"?[]:""}))}),j.properties.condition="OR",(L=d.workflowRef)==null||L.addNode(j),_("clickNodes",j)}function A(j,U){var L;U&&(j.properties.nodeName=U.name,U.tool_type=="DATA_SOURCE"&&(j.properties.kind=uc.DataSource),j.properties.nodeData={...U,toolLibId:U.id,inputFieldList:U.inputFieldList.map(V=>({...V,value:V.source=="reference"?[]:""}))}),j.properties.condition="OR",(L=d.workflowRef)==null||L.onmousedown(j),_("onmousedown",j)}je([]);const O=je([]);async function E(){var U,L,V,$;const j=await si({type:"tool",isShared:((U=s.currentFolder)==null?void 0:U.id)==="share",systemType:g.value}).getToolList({folderId:((L=s.currentFolder)==null?void 0:L.id)||r.getWorkspaceId(),toolType:b.value=="DATA_SOURCE_TOOL"?"DATA_SOURCE":"CUSTOM"});O.value=((V=j.data)==null?void 0:V.tools)||j.data||[],O.value=($=O.value)==null?void 0:$.filter(H=>H.isActive)}async function C(j){["DATA_SOURCE_TOOL","CUSTOM_TOOL"].includes(j)&&await E()}return Ur(()=>{}),(j,U)=>{const L=Q("search"),V=Q("el-icon"),$=Q("el-input"),H=Q("el-text"),Y=Q("el-popover"),z=Q("el-scrollbar"),W=Q("el-tab-pane"),B=Q("el-tabs");return Wa((_e(),Yt("div",{class:"workflow-dropdown-menu border border-r-6 white-bg",style:Qw({width:(b.value==="base","400px")})},[k(B,{modelValue:b.value,"onUpdate:modelValue":U[3]||(U[3]=q=>b.value=q),class:"workflow-dropdown-tabs",onTabChange:C},{default:R(()=>[Wa(K("div",cB,[k($,{modelValue:p.value,"onUpdate:modelValue":U[0]||(U[0]=q=>p.value=q),class:"mr-12 ml-12",placeholder:j.$t("common.searchBar.placeholder")},{suffix:R(()=>[k(V,{class:"el-input__icon"},{default:R(()=>[k(L)]),_:1})]),_:1},8,["modelValue","placeholder"])],512),[[fc,b.value==="base"]]),k(W,{label:j.$t("workflow.baseComponent"),name:"base"},{default:R(()=>[k(z,{height:"400"},{default:R(()=>[S.value.length>0?(_e(),Yt("div",fB,[(_e(!0),Yt(tr,null,Wr(S.value,(q,J)=>(_e(),Yt(tr,{key:J},[k(H,{type:"info",size:"small",class:"color-secondary ml-12"},{default:R(()=>[tt(me(q.label),1)]),_:2},1024),K("div",dB,[(_e(!0),Yt(tr,null,Wr(q.list,(ce,re)=>(_e(),Ke(Y,{key:re,placement:"right",width:280,"show-after":500},{reference:R(()=>[K("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:qt(Pe=>T(ce),["stop"]),onMousedown:qt(Pe=>A(ce),["stop"])},[(_e(),Ke(Vd(Zt(qp)(`${ce.type}-icon`)),{class:"mr-8",size:20})),K("div",hB,me(ce.label),1)],40,pB)]),default:R(()=>[K("div",vB,[(_e(),Ke(Vd(Zt(qp)(`${ce.type}-icon`)),{class:"mr-8",size:32})),K("div",mB,me(ce.label),1)]),k(H,{type:"info",size:"small",class:"color-secondary lighter"},{default:R(()=>[tt(me(ce.text),1)]),_:2},1024)]),_:2},1024))),128))])],64))),128))])):(_e(),Yt("div",yB,[k(H,{type:"info"},{default:R(()=>[tt(me(j.$t("workflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),k(W,{label:j.$t("views.tool.title"),name:"CUSTOM_TOOL"},{default:R(()=>[k(fw,{"show-collapse":""},{default:R(()=>[k(z,{height:"450"},{default:R(()=>[k(uB,{list:O.value,onClickNodes:U[1]||(U[1]=q=>T(Zt(Av),q)),onOnmousedown:U[2]||(U[2]=q=>A(Zt(Av),q))},null,8,["list"])]),_:1})]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],4)),[[fc,e.show]])}}}),gB={class:"list flex-wrap"},_B=["onClick","onMousedown"],bB=["src"],wB=["title"],EB={class:"flex-between"},OB={class:"flex align-center"},SB=["src"],xB=["title"],AB=$n({__name:"NodeContent",props:{list:{}},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=e,a=t,r=je(""),s=je([]);function c(p,d){return d.length?p.filter(_=>_.name.toLowerCase().includes(d.toLowerCase())):p}return Km([()=>r.value,()=>n.list],()=>{s.value=c(n.list,r.value)}),(p,d)=>{const _=Q("el-input"),g=Q("el-avatar"),b=Q("ToolIcon"),S=Q("el-text"),T=Q("el-popover"),A=Q("el-empty");return _e(),Yt(tr,null,[k(_,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=O=>r.value=O),modelModifiers:{trim:!0},placeholder:p.$t("common.search"),"prefix-icon":"Search",clearable:"",style:{padding:"12px 12px 0 12px"}},null,8,["modelValue","placeholder"]),K("div",gB,[s.value.length?(_e(!0),Yt(tr,{key:0},Wr(s.value,O=>(_e(),Ke(T,{key:O.id,placement:"right",width:280,"show-after":500},{reference:R(()=>[K("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:qt(E=>a("clickNodes",O),["stop"]),onMousedown:qt(E=>a("onmousedown",O),["stop"])},[Zt(Sv)(O==null?void 0:O.icon)?(_e(),Ke(g,{key:0,shape:"square",size:20,style:{background:"none"}},{default:R(()=>[K("img",{src:Zt(Cl)(O==null?void 0:O.icon,Zt(Cl)("./favicon.ico")),alt:""},null,8,bB)]),_:2},1024)):(_e(),Ke(b,{key:1,size:20,type:O==null?void 0:O.tool_type},null,8,["type"])),K("span",{class:"ml-8 ellipsis",title:O.name},me(O.name),9,wB)],40,_B)]),default:R(()=>[K("div",EB,[K("div",OB,[Zt(Sv)(O==null?void 0:O.icon)?(_e(),Ke(g,{key:0,shape:"square",size:20,style:{background:"none"}},{default:R(()=>[K("img",{src:Zt(Cl)(O==null?void 0:O.icon,Zt(Cl)("./favicon.ico")),alt:""},null,8,SB)]),_:2},1024)):(_e(),Ke(b,{key:1,size:20,type:O==null?void 0:O.tool_type},null,8,["type"])),K("span",{class:"font-medium ml-8 break-all",title:O.name},me(O.name),9,xB)])]),k(S,{type:"info",size:"small",class:"mt-4"},{default:R(()=>[tt(me(O.desc),1)]),_:2},1024)]),_:2},1024))),128)):(_e(),Ke(A,{key:1,description:p.$t("common.noData")},null,8,["description"]))])],64)}}}),TB={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-12 mt-12"},MB={key:0},kB={class:"flex-wrap",style:{gap:"12px",padding:"12px"}},NB=["onClick","onMousedown"],PB={class:"lighter"},RB={class:"flex align-center mb-8"},CB={class:"lighter color-text-primary"},DB={key:1,class:"ml-16 mt-8"},vx=$n({__name:"index",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){var H;const n=Uo("workflowMode"),a=Zi(),{user:r,folder:s}=u_(),c=(H=f_(n||xr.Application))==null?void 0:H.filter((Y,z)=>z>0),p=je(""),d=e,_=t,g=Gn(()=>a.path.includes("shared")?"systemShare":a.path.includes("resource-management")?"systemManage":"workspace"),b=Gn(()=>Jw.tool[g.value]),S=je(!1),T=je("base"),A=Gn(()=>{if(!p.value)return c||[];const Y=p.value.toLowerCase();return(c||[]).reduce((z,W)=>{const B=W.list.filter(q=>q.label.toLowerCase().includes(Y));return B.length&&z.push({...W,list:B}),z},[])});function O(Y,z){var W;z&&(Y.properties.nodeName=z.name,z.tool_type=="DATA_SOURCE"&&(Y.properties.kind=uc.DataSource),Y.properties.nodeData={...z,toolLibId:z.id,input_field_list:z.input_field_list.map(B=>({...B,value:B.source=="reference"?[]:""}))}),Y.properties.condition="OR",(W=d.workflowRef)==null||W.addNode(Y),_("clickNodes",Y)}function E(Y,z){var W;z&&(Y.properties.nodeName=z.name,z.tool_type=="DATA_SOURCE"&&(Y.properties.kind=uc.DataSource),Y.properties.nodeData={...z,toolLibId:z.id,input_field_list:z.input_field_list.map(B=>({...B,value:B.source=="reference"?[]:""}))}),Y.properties.condition="OR",(W=d.workflowRef)==null||W.onmousedown(Y),_("onmousedown",Y)}const C=je([]),j=je([]);async function U(){var z;const Y=await s.asyncGetFolder(xm.TOOL,{source_id:d.id},g.value,S);C.value=Y.data,s.setCurrentFolder(((z=Y.data)==null?void 0:z[0])||{})}async function L(){var z,W,B,q;const Y=await si({type:"tool",isShared:((z=s.currentFolder)==null?void 0:z.id)==="share",systemType:g.value}).getToolList({folder_id:((W=s.currentFolder)==null?void 0:W.id)||r.getWorkspaceId(),tool_type:T.value=="DATA_SOURCE_TOOL"?"DATA_SOURCE":"CUSTOM"});j.value=((B=Y.data)==null?void 0:B.tools)||Y.data||[],j.value=(q=j.value)==null?void 0:q.filter(J=>J.is_active)}function V(Y){s.setCurrentFolder(Y),["DATA_SOURCE_TOOL","CUSTOM_TOOL"].includes(T.value)&&L()}async function $(Y){["DATA_SOURCE_TOOL","CUSTOM_TOOL"].includes(Y)&&(a.path.includes("shared")||await U(),L())}return Ur(()=>{}),(Y,z)=>{const W=Q("search"),B=Q("el-icon"),q=Q("el-input"),J=Q("el-text"),ce=Q("el-popover"),re=Q("el-scrollbar"),Pe=Q("el-tab-pane"),ge=Q("folder-tree"),fe=Q("LayoutContainer"),Ee=Q("el-tabs");return Wa((_e(),Yt("div",{class:"workflow-dropdown-menu border border-r-6 white-bg",style:Qw({width:T.value==="base"||Zt(a).path.includes("shared")?"400px":"640px"})},[k(Ee,{modelValue:T.value,"onUpdate:modelValue":z[3]||(z[3]=Ne=>T.value=Ne),class:"workflow-dropdown-tabs",onTabChange:$},{default:R(()=>[Wa(K("div",TB,[k(q,{modelValue:p.value,"onUpdate:modelValue":z[0]||(z[0]=Ne=>p.value=Ne),class:"mr-12 ml-12",placeholder:Y.$t("common.searchBar.placeholder")},{suffix:R(()=>[k(B,{class:"el-input__icon"},{default:R(()=>[k(W)]),_:1})]),_:1},8,["modelValue","placeholder"])],512),[[fc,T.value==="base"]]),k(Pe,{label:Y.$t("workflow.baseComponent"),name:"base"},{default:R(()=>[k(re,{height:"400"},{default:R(()=>[A.value.length>0?(_e(),Yt("div",MB,[(_e(!0),Yt(tr,null,Wr(A.value,(Ne,rt)=>(_e(),Yt(tr,{key:rt},[k(J,{type:"info",size:"small",class:"color-secondary ml-12"},{default:R(()=>[tt(me(Ne.label),1)]),_:2},1024),K("div",kB,[(_e(!0),Yt(tr,null,Wr(Ne.list,(mt,Je)=>(_e(),Ke(ce,{key:Je,placement:"right",width:280,"show-after":500},{reference:R(()=>[K("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:qt(Xt=>O(mt),["stop"]),onMousedown:qt(Xt=>E(mt),["stop"])},[(_e(),Ke(Vd(Zt(qp)(`${mt.type}-icon`)),{class:"mr-8",size:20})),K("div",PB,me(mt.label),1)],40,NB)]),default:R(()=>[K("div",RB,[(_e(),Ke(Vd(Zt(qp)(`${mt.type}-icon`)),{class:"mr-8",size:32})),K("div",CB,me(mt.label),1)]),k(J,{type:"info",size:"small",class:"color-secondary lighter"},{default:R(()=>[tt(me(mt.text),1)]),_:2},1024)]),_:2},1024))),128))])],64))),128))])):(_e(),Yt("div",DB,[k(J,{type:"info"},{default:R(()=>[tt(me(Y.$t("workflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),k(Pe,{label:Y.$t("views.tool.title"),name:"CUSTOM_TOOL"},{default:R(()=>[k(fe,{showLeft:!Zt(a).path.includes("shared")},{left:R(()=>{var Ne;return[k(ge,{source:Zt(xm).TOOL,data:C.value,currentNodeKey:(Ne=Zt(s).currentFolder)==null?void 0:Ne.id,onHandleNodeClick:V,shareTitle:Y.$t("views.shared.shared_tool"),showShared:b.value.is_share(),canOperation:!1,treeStyle:{height:"400px"}},null,8,["source","data","currentNodeKey","shareTitle","showShared"])]}),default:R(()=>[k(re,{height:"450"},{default:R(()=>[k(AB,{list:j.value,onClickNodes:z[1]||(z[1]=Ne=>O(Zt(Av),Ne)),onOnmousedown:z[2]||(z[2]=Ne=>E(Zt(Av),Ne))},null,8,["list"])]),_:1})]),_:1},8,["showLeft"])]),_:1},8,["label"])]),_:1},8,["modelValue"])],4)),[[fc,e.show]])}}}),jB=$n({__name:"index",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object,inner:{type:Boolean,default:!1}},setup(e){const t=Uo("workflowMode")||xr.Application,n=e,a={[xr.Application]:px,[xr.ApplicationLoop]:px,[xr.Knowledge]:n.inner?vx:hx,[xr.KnowledgeLoop]:n.inner?vx:hx};return(r,s)=>(_e(),Ke(Vd(a[Zt(t)]),{show:e.show,id:e.id,"workflow-ref":e.workflowRef},null,8,["show","id","workflow-ref"]))}}),IB={class:"flex-between"},LB={class:"ellipsis-1 break-all"},$B={key:0,src:I7,alt:""},FB={key:1,src:L7,alt:""},BB={style:{width:"280px"},class:"p-12-16"},UB={class:"mt-8 lighter"},VB={class:"title-decoration-1 mb-8 mt-8"},GB=["onMouseenter"],zB={class:"break-all"},WB={class:"dialog-footer"},HB=$n({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const t=Zi(),{params:{id:n}}=t,a=je({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),r=je(!1),s=je(),c=je(),p=je(!1),d=je({title:""}),_=Gn({set:B=>{Se.set(V.nodeModel.properties,"condition",B)},get:()=>V.nodeModel.properties.condition?V.nodeModel.properties.condition:(Se.set(V.nodeModel.properties,"condition","AND"),!0)}),g=Gn({set:B=>{Se.set(V.nodeModel.properties,"showNode",B)},get:()=>V.nodeModel.properties.showNode!==void 0?V.nodeModel.properties.showNode:(Se.set(V.nodeModel.properties,"showNode",!0),!0)}),b=B=>{B.ctrlKey||B.metaKey||B.stopPropagation()},S=Gn(()=>V.nodeModel.properties.status?V.nodeModel.properties.status:200);function T(){d.value.title=V.nodeModel.properties.nodeName,p.value=!0}const A=async B=>{B&&await B.validate(q=>{var J;q&&((J=V.nodeModel.graphModel.nodes.filter(ce=>ce.id!==V.nodeModel.id))!=null&&J.some(ce=>ce.properties.nodeName===d.value.title)?za(_t("workflow.tip.repeatedNodeError")):(Se.set(V.nodeModel.properties,"nodeName",d.value.title),V.nodeModel.clear_next_node_field(!0),p.value=!1,B.resetFields()))})},O=B=>{B!=null&&B.shiftKey||V.nodeModel.graphModel.clearSelectElements(),Se.set(V.nodeModel,"isSelected",!V.nodeModel.isSelected),Se.set(V.nodeModel,"isHovered",!V.nodeModel.isSelected),V.nodeModel.graphModel.toFront(V.nodeModel.id)},E=je(null),C=()=>{V.nodeModel.graphModel.clearSelectElements();const B=V.nodeModel.graphModel.cloneNode(V.nodeModel.id);Se.set(B,"isSelected",!0),Se.set(B,"isHovered",!0),V.nodeModel.graphModel.toFront(B.id)},j=()=>{ZT(_t("common.tip"),_t("workflow.delete.confirmTitle"),{confirmButtonText:_t("common.confirm"),confirmButtonClass:"danger"}).then(()=>{V.nodeModel.type===kn.LoopNode&&V.nodeModel.graphModel.getNodeOutgoingNode(V.nodeModel.id).forEach(q=>{q.type==="loop-body-node"&&V.nodeModel.graphModel.deleteNode(q.id)}),V.nodeModel.graphModel.deleteNode(V.nodeModel.id)}),V.nodeModel.graphModel.eventCenter.emit("delete_node")},U=B=>{B.height&&(V.nodeModel.virtual||(a.value.stepContainerHeight=B.height,V.nodeModel.setHeight(a.value.stepContainerHeight)))};function L(B){var ce,re,Pe;const q=B.properties.width?B.properties.width:214,J=V.nodeModel.graphModel.addNode({type:B.type,properties:B.properties,x:((ce=s.value)==null?void 0:ce.x)+q/2+200,y:((re=s.value)==null?void 0:re.y)-B.height});V.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:V.nodeModel.id,sourceAnchorId:(Pe=s.value)==null?void 0:Pe.id,targetNodeId:J.id,targetAnchorId:J.id+"_left"}),W()}const V=e,$=Gn(()=>{var B;return V.nodeModel.properties.config.fields?(B=V.nodeModel.properties.config.fields)==null?void 0:B.map(J=>({label:J.label,value:J.value,globeLabel:`{{${V.nodeModel.properties.nodeName}.${J.value}}}`,globeValue:`{{context['${V.nodeModel.id}'].${J.value}}}`})):[]});function H(B){return![kn.Start,kn.Base,kn.KnowledgeBase,kn.LoopStartNode.toString()].includes(B)}function Y(B){return![kn.Start,kn.Base,kn.KnowledgeBase,kn.LoopStartNode.toString(),kn.DataSourceLocalNode,kn.DataSourceWebNode].includes(B)&&V.nodeModel.properties.kind!=uc.DataSource}const z=B=>{r.value=!0,s.value=B},W=()=>{r.value=!1,s.value=void 0};return Ur(()=>{Se.set(V.nodeModel,"openNodeMenu",B=>{r.value?W():z(B)})}),(B,q)=>{var $e;const J=Q("ArrowDownBold"),ce=Q("el-icon"),re=Q("el-button"),Pe=Q("el-option"),ge=Q("el-select"),fe=Q("el-dropdown"),Ee=Q("AppIcon"),Ne=Q("el-dropdown-item"),rt=Q("el-dropdown-menu"),mt=Q("el-alert"),Je=Q("el-tooltip"),Xt=Q("el-collapse-transition"),en=Q("el-input"),Bt=Q("el-form-item"),Nn=Q("el-form"),Ue=Q("el-dialog"),Ae=Zm("resize");return _e(),Yt("div",{onMousedown:O,class:"workflow-node-container p-16",style:{overflow:"visible"}},[K("div",{class:wu(["step-container app-card p-16",{isSelected:V.nodeModel.isSelected,error:S.value!==200}]),style:{overflow:"visible"}},[Wa((_e(),Yt("div",null,[K("div",IB,[K("div",{class:"flex align-center",onDragstart:q[0]||(q[0]=qt(()=>{},["prevent"])),onDrag:q[1]||(q[1]=qt(()=>{},["prevent"])),onDragover:q[2]||(q[2]=qt(()=>{},["prevent"])),onDragend:q[3]||(q[3]=qt(()=>{},["prevent"])),style:{width:"69%"}},[(_e(),Ke(Vd(Zt(qp)(`${B.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:($e=B.nodeModel)==null?void 0:$e.properties.node_data},null,8,["item"])),K("h4",LB,me(B.nodeModel.properties.nodeName),1)],32),K("div",{onMousemove:q[6]||(q[6]=qt(()=>{},["stop"])),onMousedown:q[7]||(q[7]=qt(()=>{},["stop"])),onKeydown:q[8]||(q[8]=qt(()=>{},["stop"])),onClick:q[9]||(q[9]=qt(()=>{},["stop"]))},[k(re,{text:"",onClick:q[4]||(q[4]=vt=>g.value=!g.value)},{default:R(()=>[k(ce,{class:wu(["arrow-icon color-secondary",g.value?"rotate-180":""])},{default:R(()=>[k(J)]),_:1},8,["class"])]),_:1}),Y(B.nodeModel.type)?(_e(),Ke(fe,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:R(()=>[K("div",BB,[K("h5",null,me(B.$t("workflow.condition.title")),1),K("p",UB,[K("span",null,me(B.$t("workflow.condition.front")),1),k(ge,{modelValue:_.value,"onUpdate:modelValue":q[5]||(q[5]=vt=>_.value=vt),size:"small",style:{width:"60px",margin:"0 8px"}},{default:R(()=>[k(Pe,{label:B.$t("workflow.condition.AND"),value:"AND"},null,8,["label"]),k(Pe,{label:B.$t("workflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),K("span",null,me(B.$t("workflow.condition.text")),1)])])]),default:R(()=>[k(re,{text:""},{default:R(()=>[_.value==="OR"?(_e(),Yt("img",$B)):cn("",!0),_.value==="AND"?(_e(),Yt("img",FB)):cn("",!0)]),_:1})]),_:1})):cn("",!0),H(B.nodeModel.type)?(_e(),Ke(fe,{key:1,teleported:!1,trigger:"click"},{dropdown:R(()=>[k(rt,{style:{"min-width":"80px"}},{default:R(()=>[k(Ne,{onClick:T,class:"p-8"},{default:R(()=>[tt(me(B.$t("common.rename")),1)]),_:1}),k(Ne,{onClick:C,class:"p-8"},{default:R(()=>[tt(me(B.$t("common.copy")),1)]),_:1}),k(Ne,{onClick:j,class:"border-t p-8"},{default:R(()=>[tt(me(B.$t("common.delete")),1)]),_:1})]),_:1})]),default:R(()=>[k(re,{text:""},{default:R(()=>[k(Ee,{iconName:"app-more",class:"color-secondary"})]),_:1})]),_:1})):cn("",!0)],32)]),k(Xt,null,{default:R(()=>[Wa(K("div",{onMousedown:q[11]||(q[11]=qt(()=>{},["stop"])),onKeydown:q[12]||(q[12]=qt(()=>{},["stop"])),onClick:q[13]||(q[13]=qt(()=>{},["stop"])),class:"mt-16"},[S.value!=200?(_e(),Ke(mt,{key:0,class:"mb-16",title:V.nodeModel.type==="application-node"?B.$t("workflow.tip.applicationNodeError"):B.$t("workflow.tip.toolNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):cn("",!0),Hj(B.$slots,"default",{},void 0,!0),$.value.length>0?(_e(),Yt(tr,{key:1},[K("h5",VB,me(B.$t("common.param.outputParam")),1),(_e(!0),Yt(tr,null,Wr($.value,(vt,Ut)=>(_e(),Yt("div",{key:Ut,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:Et=>E.value=Ut,onMouseleave:q[10]||(q[10]=Et=>E.value=null)},[K("span",zB,me(vt.label)+" "+me("{"+vt.value+"}"),1),E.value===Ut?(_e(),Ke(Je,{key:0,effect:"dark",content:B.$t("workflow.setting.copyParam"),placement:"top"},{default:R(()=>[k(re,{link:"",onClick:Et=>Zt(kg)(vt.globeLabel),style:{padding:"0"}},{default:R(()=>[k(Ee,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):cn("",!0)],40,GB))),128))],64)):cn("",!0)],544),[[fc,g.value]])]),_:3})])),[[Ae,U]])],2),k(Xt,null,{default:R(()=>[r.value?(_e(),Ke(jB,{key:0,onMousemove:q[14]||(q[14]=qt(()=>{},["stop"])),onMousedown:q[15]||(q[15]=qt(()=>{},["stop"])),onClick:q[16]||(q[16]=qt(()=>{},["stop"])),onWheel:b,show:r.value,inner:!0,id:Zt(n),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:L},null,8,["show","id"])):cn("",!0)]),_:1}),k(Ue,{title:B.$t("workflow.nodeName"),modelValue:p.value,"onUpdate:modelValue":q[21]||(q[21]=vt=>p.value=vt),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:q[22]||(q[22]=qt(()=>{},["prevent"]))},{footer:R(()=>[K("span",WB,[k(re,{onClick:q[19]||(q[19]=qt(vt=>p.value=!1,["prevent"]))},{default:R(()=>[tt(me(B.$t("common.cancel")),1)]),_:1}),k(re,{type:"primary",onClick:q[20]||(q[20]=vt=>A(c.value))},{default:R(()=>[tt(me(B.$t("common.save")),1)]),_:1})])]),default:R(()=>[k(Nn,{"label-position":"top",ref_key:"titleFormRef",ref:c,model:d.value},{default:R(()=>[k(Bt,{prop:"title",rules:[{required:!0,message:B.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:R(()=>[k(en,{modelValue:d.value.title,"onUpdate:modelValue":q[17]||(q[17]=vt=>d.value.title=vt),onBlur:q[18]||(q[18]=vt=>d.value.title=d.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}}),go=rh(HB,[["__scopeId","data-v-f2272353"]]),XB={class:"title-decoration-1 mb-8"},qB={class:"flex-between w-full"},YB={class:"flex-between"},KB={class:"flex align-center"},ZB={class:"flex align-center"},JB={class:"mr-4"},QB={class:"flex-between"},eU={class:"flex-between mb-16"},tU={class:"lighter"},nU={key:0,class:"w-full mb-16"},rU={class:"flex align-center",style:{"line-height":"20px"}},oU=["src"],iU=["title"],aU={class:"flex-between"},lU={class:"mr-4"},sU={class:"flex"},uU={class:"flex-between"},cU={class:"flex-between"},fU={class:"flex align-center"},dU={class:"mr-4"},pU={class:"flex"},hU=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("workflowMode")||xr.Application,n=Uo("getResourceDetail"),a=Zi(),{params:{id:r}}=a,s=Gn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=ge=>ge.ctrlKey===!0?(ge.preventDefault(),!0):(ge.stopPropagation(),!0);function p(ge){Se.set(T.nodeModel.properties.nodeData,"system",ge)}function d(ge){Se.set(T.nodeModel.properties.nodeData,"prompt",ge)}const _=ge=>{var fe;ge?(fe=E.value)==null||fe.reset_default(ge,r):z({})},b={modelId:"",system:"",prompt:`${_t("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${_t("views.applicationWorkflow.nodes.searchKnowledgeNode.label")}.data}}
${_t("views.problem.title")}：
{{${_t("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:1,isResult:!0,temperature:null,maxTokens:null,dialogueType:"WORK_FLOW",toolId:[],modelSetting:{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}},S=Gn({get:()=>T.nodeModel.properties.nodeData?(T.nodeModel.properties.nodeData.modelSetting||Se.set(T.nodeModel.properties.nodeData,"modelSetting",{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}),T.nodeModel.properties.nodeData):(Se.set(T.nodeModel.properties,"nodeData",b),T.nodeModel.properties.nodeData),set:ge=>{Se.set(T.nodeModel.properties,"nodeData",ge)}}),T=e,A=je(),O=je(null),E=je(),C=je(),j=()=>{var ge;return(ge=A.value)==null?void 0:ge.validate().catch(fe=>Promise.reject({node:T.nodeModel,errMessage:fe}))},U=n();function L(){var fe;const ge=s.value==="systemManage"?{modelType:"LLM",workspaceId:(fe=U.value)==null?void 0:fe.workspaceId}:{modelType:"LLM"};si({type:"model",systemType:s.value}).getSelectModelList(ge).then(Ee=>{O.value=Se.groupBy(Ee==null?void 0:Ee.data,"provider")})}const V=ge=>{var fe;ge&&((fe=E.value)==null||fe.open(ge,r,S.value.modelParamsSetting))},$=je(),H=ge=>{var fe;ge&&((fe=$.value)==null||fe.open(ge,r))},Y=ge=>{Se.set(T.nodeModel.properties.nodeData,"system",ge)};function z(ge){Se.set(T.nodeModel.properties.nodeData,"modelParamsSetting",ge)}function W(ge){let fe=Se.cloneDeep(T.nodeModel.properties.nodeData.modelSetting);fe={...fe,...ge},Se.set(T.nodeModel.properties.nodeData,"modelSetting",fe)}const B=je();function q(){B.value.open(S.value.toolIds)}function J(ge){Se.set(T.nodeModel.properties.nodeData,"toolIds",ge.toolIds)}function ce(ge){const fe=T.nodeModel.properties.nodeData.toolIds.filter(Ee=>Ee!==ge);Se.set(T.nodeModel.properties.nodeData,"toolIds",fe)}const re=je([]);function Pe(){var fe;const ge=s.value==="systemManage"?{scope:"WORKSPACE",workspaceId:(fe=U.value)==null?void 0:fe.workspaceId}:{scope:"WORKSPACE"};si({type:"tool",systemType:s.value}).getAllToolList(ge).then(Ee=>{re.value=[...Ee.data.shared_tools,...Ee.data.tools].filter(Ne=>Ne.isActive)})}return Ur(()=>{var ge,fe;L(),typeof((ge=T.nodeModel.properties.nodeData)==null?void 0:ge.isResult)>"u"&&Tu(T.nodeModel)&&Se.set(T.nodeModel.properties.nodeData,"isResult",!0),Se.set(T.nodeModel,"validate",j),S.value.dialogueType||(S.value.dialogueType="WORK_FLOW"),((fe=T.nodeModel.properties.nodeData)==null?void 0:fe.toolOutputEnable)===void 0&&Se.set(T.nodeModel.properties.nodeData,"toolOutputEnable",!0),Pe()}),(ge,fe)=>{const Ee=Q("el-button"),Ne=Q("el-form-item"),rt=Q("el-tooltip"),mt=Q("el-option"),Je=Q("el-select"),Xt=Q("el-input-number"),en=Q("Plus"),Bt=Q("el-icon"),Nn=Q("el-avatar"),Ue=Q("ToolIcon"),Ae=Q("Close"),$e=Q("el-switch"),vt=Q("el-form"),Ut=Q("el-card");return _e(),Ke(go,{nodeModel:ge.nodeModel},{default:R(()=>[K("h5",XB,me(ge.$t("views.applicationWorkflow.nodeSetting")),1),k(Ut,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(vt,{onSubmit:fe[13]||(fe[13]=qt(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:A,"hide-required-asterisk":""},{default:R(()=>{var Et,rn;return[k(Ne,{label:ge.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:ge.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:R(()=>[K("div",qB,[K("div",null,[K("span",null,[tt(me(ge.$t("views.application.form.aiModel.label")),1),fe[14]||(fe[14]=K("span",{class:"color-danger"},"*",-1))])]),k(Ee,{disabled:!S.value.modelId,type:"primary",link:"",onClick:fe[0]||(fe[0]=Kt=>V(S.value.modelId)),onRefreshForm:z},{default:R(()=>[k(Ar,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(Su,{onChange:_,onWheel:c,teleported:!1,modelValue:S.value.modelId,"onUpdate:modelValue":fe[1]||(fe[1]=Kt=>S.value.modelId=Kt),placeholder:ge.$t("views.application.form.aiModel.placeholder"),options:O.value,onSubmitModel:L,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(Ne,null,{label:R(()=>[K("div",YB,[K("div",KB,[K("span",null,me(ge.$t("views.application.form.roleSettings.label")),1),k(rt,{effect:"dark",content:ge.$t("views.application.form.roleSettings.tooltip"),placement:"right"},{default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])]),k(Ee,{type:"primary",link:"",onClick:fe[2]||(fe[2]=Kt=>H(S.value.modelId)),disabled:!S.value.modelId},{default:R(()=>[k(Ar,{iconName:"app-generate-star"})]),_:1},8,["disabled"])])]),default:R(()=>[k(is,{title:ge.$t("views.application.form.roleSettings.label"),modelValue:S.value.system,"onUpdate:modelValue":fe[3]||(fe[3]=Kt=>S.value.system=Kt),style:{height:"100px"},onSubmitDialog:p,placeholder:`${Zt(_t)("views.applicationWorkflow.SystemPromptPlaceholder")} {{${Zt(_t)("views.applicationWorkflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1}),k(Ne,{label:ge.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:ge.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:R(()=>[K("div",ZB,[K("div",JB,[K("span",null,[tt(me(ge.$t("views.application.form.prompt.label")),1),fe[15]||(fe[15]=K("span",{class:"color-danger"},"*",-1))])]),k(rt,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(ge.$t("views.application.form.prompt.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(is,{onWheel:c,title:ge.$t("views.application.form.prompt.label"),modelValue:S.value.prompt,"onUpdate:modelValue":fe[4]||(fe[4]=Kt=>S.value.prompt=Kt),style:{height:"150px"},onSubmitDialog:d,placeholder:`${Zt(_t)("views.applicationWorkflow.UserPromptPlaceholder")}{{${Zt(_t)("views.applicationWorkflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),k(Ne,{label:ge.$t("views.application.form.historyRecord.label")},{label:R(()=>[K("div",QB,[K("div",null,me(ge.$t("views.application.form.historyRecord.label")),1),k(Je,{modelValue:S.value.dialogueType,"onUpdate:modelValue":fe[5]||(fe[5]=Kt=>S.value.dialogueType=Kt),type:"small",style:{width:"100px"}},{default:R(()=>[k(mt,{label:ge.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),k(mt,{label:ge.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[k(Xt,{modelValue:S.value.dialogueNumber,"onUpdate:modelValue":fe[6]||(fe[6]=Kt=>S.value.dialogueNumber=Kt),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),K("div",eU,[K("div",tU,me(ge.$t("views.tool.title")),1),K("div",null,[k(Ee,{type:"primary",class:"mr-4",link:"",onClick:q,onRefreshForm:z},{default:R(()=>[k(Bt,null,{default:R(()=>[k(en)]),_:1})]),_:1})])]),((Et=S.value.toolIds)==null?void 0:Et.length)>0?(_e(),Yt("div",nU,[(_e(!0),Yt(tr,null,Wr(S.value.toolIds,(Kt,Pn)=>{var yn,dt,An,Ve;return _e(),Yt("div",{key:Pn,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[K("div",rU,[(yn=Zt($d)(re.value,Kt,"id"))!=null&&yn.icon?(_e(),Ke(Nn,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:R(()=>{var bn;return[K("img",{src:Zt(Cl)((bn=Zt($d)(re.value,Kt,"id"))==null?void 0:bn.icon),alt:""},null,8,oU)]}),_:2},1024)):(_e(),Ke(Ue,{key:1,type:(dt=Zt($d)(re.value,Kt,"id"))==null?void 0:dt.toolType,class:"mr-8",size:20},null,8,["type"])),K("div",{class:"ellipsis",title:(An=Zt($d)(re.value,Kt,"id"))==null?void 0:An.name},me((Ve=Zt($d)(re.value,Kt,"id"))==null?void 0:Ve.name),9,iU)]),k(Ee,{text:"",onClick:bn=>ce(Kt)},{default:R(()=>[k(Bt,null,{default:R(()=>[k(Ae)]),_:1})]),_:2},1032,["onClick"])])}),128))])):cn("",!0),((rn=S.value.toolIds)==null?void 0:rn.length)>0?(_e(),Ke(Ne,{key:1,onClick:fe[8]||(fe[8]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",aU,[K("span",lU,me(ge.$t("views.application.form.toolOutputEnable")),1),K("div",sU,[k($e,{class:"ml-8",size:"small",modelValue:S.value.toolOutputEnable,"onUpdate:modelValue":fe[7]||(fe[7]=Kt=>S.value.toolOutputEnable=Kt)},null,8,["modelValue"])])])]),_:1})):cn("",!0),k(Ne,{onClick:fe[10]||(fe[10]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",uU,[K("div",null,[K("span",null,me(ge.$t("views.application.form.reasoningContent.label")),1)]),K("div",null,[k($e,{size:"small",modelValue:S.value.modelSetting.reasoningContentEnable,"onUpdate:modelValue":fe[9]||(fe[9]=Kt=>S.value.modelSetting.reasoningContentEnable=Kt)},null,8,["modelValue"])])])]),_:1}),[Zt(xr).Application,Zt(xr).ApplicationLoop].includes(Zt(t))?(_e(),Ke(Ne,{key:2,onClick:fe[12]||(fe[12]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",cU,[K("div",fU,[K("div",dU,[K("span",null,me(ge.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(rt,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(ge.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",pU,[k($e,{size:"small",modelValue:S.value.isResult,"onUpdate:modelValue":fe[11]||(fe[11]=Kt=>S.value.isResult=Kt)},null,8,["modelValue"])])])]),_:1})):cn("",!0)]}),_:1},8,["model"])]),_:1}),k(ih,{ref_key:"AIModeParamSettingDialogRef",ref:E,onRefresh:z},null,512),k(tM,{onReplace:Y,ref_key:"GeneratePromptDialogRef",ref:$},null,512),k(p8,{ref_key:"ReasoningParamSettingDialogRef",ref:C,onRefresh:W},null,512),k(h8,{ref_key:"toolDialogRef",ref:B,onRefresh:J},null,512)]),_:1},8,["nodeModel"])}}});var og={exports:{}},mx;function vU(){return mx||(mx=1,function(e,t){(function(n,a){e.exports=a()})(window,function(){return function(n){var a={};function r(s){if(a[s])return a[s].exports;var c=a[s]={i:s,l:!1,exports:{}};return n[s].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=a,r.d=function(s,c,p){r.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:p})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,c){if(1&c&&(s=r(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var p=Object.create(null);if(r.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var d in s)r.d(p,d,(function(_){return s[_]}).bind(null,d));return p},r.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(c,"a",c),c},r.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},r.p="",r(r.s=222)}([function(n,a,r){r.d(a,"a",function(){return V}),r.d(a,"b",function(){return L}),r.d(a,"c",function(){return Bt}),r.d(a,"d",function(){return Nn}),r.d(a,"e",function(){return C}),r.d(a,"f",function(){return U}),r.d(a,"g",function(){return C}),r.d(a,"h",function(){return en}),r.d(a,"i",function(){return c}),r.d(a,"j",function(){return Xt}),r.d(a,"k",function(){return q});var s,c,p,d,_,g,b,S={},T=[],A=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function O(Ue,Ae){for(var $e in Ae)Ue[$e]=Ae[$e];return Ue}function E(Ue){var Ae=Ue.parentNode;Ae&&Ae.removeChild(Ue)}function C(Ue,Ae,$e){var vt,Ut,Et,rn={};for(Et in Ae)Et=="key"?vt=Ae[Et]:Et=="ref"?Ut=Ae[Et]:rn[Et]=Ae[Et];if(arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):$e),typeof Ue=="function"&&Ue.defaultProps!=null)for(Et in Ue.defaultProps)rn[Et]===void 0&&(rn[Et]=Ue.defaultProps[Et]);return j(Ue,rn,vt,Ut,null)}function j(Ue,Ae,$e,vt,Ut){var Et={type:Ue,props:Ae,key:$e,ref:vt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Ut??++p};return Ut==null&&c.vnode!=null&&c.vnode(Et),Et}function U(){return{current:null}}function L(Ue){return Ue.children}function V(Ue,Ae){this.props=Ue,this.context=Ae}function $(Ue,Ae){if(Ae==null)return Ue.__?$(Ue.__,Ue.__.__k.indexOf(Ue)+1):null;for(var $e;Ae<Ue.__k.length;Ae++)if(($e=Ue.__k[Ae])!=null&&$e.__e!=null)return $e.__e;return typeof Ue.type=="function"?$(Ue):null}function H(Ue){var Ae,$e;if((Ue=Ue.__)!=null&&Ue.__c!=null){for(Ue.__e=Ue.__c.base=null,Ae=0;Ae<Ue.__k.length;Ae++)if(($e=Ue.__k[Ae])!=null&&$e.__e!=null){Ue.__e=Ue.__c.base=$e.__e;break}return H(Ue)}}function Y(Ue){(!Ue.__d&&(Ue.__d=!0)&&d.push(Ue)&&!z.__r++||g!==c.debounceRendering)&&((g=c.debounceRendering)||_)(z)}function z(){for(var Ue;z.__r=d.length;)Ue=d.sort(function(Ae,$e){return Ae.__v.__b-$e.__v.__b}),d=[],Ue.some(function(Ae){var $e,vt,Ut,Et,rn,Kt;Ae.__d&&(rn=(Et=($e=Ae).__v).__e,(Kt=$e.__P)&&(vt=[],(Ut=O({},Et)).__v=Et.__v+1,fe(Kt,Et,Ut,$e.__n,Kt.ownerSVGElement!==void 0,Et.__h!=null?[rn]:null,vt,rn??$(Et),Et.__h),Ee(vt,Et),Et.__e!=rn&&H(Et)))})}function W(Ue,Ae,$e,vt,Ut,Et,rn,Kt,Pn,yn){var dt,An,Ve,bn,lr,le,sr,Ir=vt&&vt.__k||T,io=Ir.length;for($e.__k=[],dt=0;dt<Ae.length;dt++)if((bn=$e.__k[dt]=(bn=Ae[dt])==null||typeof bn=="boolean"?null:typeof bn=="string"||typeof bn=="number"||typeof bn=="bigint"?j(null,bn,null,null,bn):Array.isArray(bn)?j(L,{children:bn},null,null,null):bn.__b>0?j(bn.type,bn.props,bn.key,null,bn.__v):bn)!=null){if(bn.__=$e,bn.__b=$e.__b+1,(Ve=Ir[dt])===null||Ve&&bn.key==Ve.key&&bn.type===Ve.type)Ir[dt]=void 0;else for(An=0;An<io;An++){if((Ve=Ir[An])&&bn.key==Ve.key&&bn.type===Ve.type){Ir[An]=void 0;break}Ve=null}fe(Ue,bn,Ve=Ve||S,Ut,Et,rn,Kt,Pn,yn),lr=bn.__e,(An=bn.ref)&&Ve.ref!=An&&(sr||(sr=[]),Ve.ref&&sr.push(Ve.ref,null,bn),sr.push(An,bn.__c||lr,bn)),lr!=null?(le==null&&(le=lr),typeof bn.type=="function"&&bn.__k===Ve.__k?bn.__d=Pn=B(bn,Pn,Ue):Pn=J(Ue,bn,Ve,Ir,lr,Pn),typeof $e.type=="function"&&($e.__d=Pn)):Pn&&Ve.__e==Pn&&Pn.parentNode!=Ue&&(Pn=$(Ve))}for($e.__e=le,dt=io;dt--;)Ir[dt]!=null&&(typeof $e.type=="function"&&Ir[dt].__e!=null&&Ir[dt].__e==$e.__d&&($e.__d=$(vt,dt+1)),mt(Ir[dt],Ir[dt]));if(sr)for(dt=0;dt<sr.length;dt++)rt(sr[dt],sr[++dt],sr[++dt])}function B(Ue,Ae,$e){for(var vt,Ut=Ue.__k,Et=0;Ut&&Et<Ut.length;Et++)(vt=Ut[Et])&&(vt.__=Ue,Ae=typeof vt.type=="function"?B(vt,Ae,$e):J($e,vt,vt,Ut,vt.__e,Ae));return Ae}function q(Ue,Ae){return Ae=Ae||[],Ue==null||typeof Ue=="boolean"||(Array.isArray(Ue)?Ue.some(function($e){q($e,Ae)}):Ae.push(Ue)),Ae}function J(Ue,Ae,$e,vt,Ut,Et){var rn,Kt,Pn;if(Ae.__d!==void 0)rn=Ae.__d,Ae.__d=void 0;else if($e==null||Ut!=Et||Ut.parentNode==null)e:if(Et==null||Et.parentNode!==Ue)Ue.appendChild(Ut),rn=null;else{for(Kt=Et,Pn=0;(Kt=Kt.nextSibling)&&Pn<vt.length;Pn+=2)if(Kt==Ut)break e;Ue.insertBefore(Ut,Et),rn=Et}return rn!==void 0?rn:Ut.nextSibling}function ce(Ue,Ae,$e){Ae[0]==="-"?Ue.setProperty(Ae,$e):Ue[Ae]=$e==null?"":typeof $e!="number"||A.test(Ae)?$e:$e+"px"}function re(Ue,Ae,$e,vt,Ut){var Et;e:if(Ae==="style")if(typeof $e=="string")Ue.style.cssText=$e;else{if(typeof vt=="string"&&(Ue.style.cssText=vt=""),vt)for(Ae in vt)$e&&Ae in $e||ce(Ue.style,Ae,"");if($e)for(Ae in $e)vt&&$e[Ae]===vt[Ae]||ce(Ue.style,Ae,$e[Ae])}else if(Ae[0]==="o"&&Ae[1]==="n")Et=Ae!==(Ae=Ae.replace(/Capture$/,"")),Ae=Ae.toLowerCase()in Ue?Ae.toLowerCase().slice(2):Ae.slice(2),Ue.l||(Ue.l={}),Ue.l[Ae+Et]=$e,$e?vt||Ue.addEventListener(Ae,Et?ge:Pe,Et):Ue.removeEventListener(Ae,Et?ge:Pe,Et);else if(Ae!=="dangerouslySetInnerHTML"){if(Ut)Ae=Ae.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(Ae!=="href"&&Ae!=="list"&&Ae!=="form"&&Ae!=="tabIndex"&&Ae!=="download"&&Ae in Ue)try{Ue[Ae]=$e??"";break e}catch{}typeof $e=="function"||($e!=null&&($e!==!1||Ae[0]==="a"&&Ae[1]==="r")?Ue.setAttribute(Ae,$e):Ue.removeAttribute(Ae))}}function Pe(Ue){this.l[Ue.type+!1](c.event?c.event(Ue):Ue)}function ge(Ue){this.l[Ue.type+!0](c.event?c.event(Ue):Ue)}function fe(Ue,Ae,$e,vt,Ut,Et,rn,Kt,Pn){var yn,dt,An,Ve,bn,lr,le,sr,Ir,io,wo,Yn=Ae.type;if(Ae.constructor!==void 0)return null;$e.__h!=null&&(Pn=$e.__h,Kt=Ae.__e=$e.__e,Ae.__h=null,Et=[Kt]),(yn=c.__b)&&yn(Ae);try{e:if(typeof Yn=="function"){if(sr=Ae.props,Ir=(yn=Yn.contextType)&&vt[yn.__c],io=yn?Ir?Ir.props.value:yn.__:vt,$e.__c?le=(dt=Ae.__c=$e.__c).__=dt.__E:("prototype"in Yn&&Yn.prototype.render?Ae.__c=dt=new Yn(sr,io):(Ae.__c=dt=new V(sr,io),dt.constructor=Yn,dt.render=Je),Ir&&Ir.sub(dt),dt.props=sr,dt.state||(dt.state={}),dt.context=io,dt.__n=vt,An=dt.__d=!0,dt.__h=[]),dt.__s==null&&(dt.__s=dt.state),Yn.getDerivedStateFromProps!=null&&(dt.__s==dt.state&&(dt.__s=O({},dt.__s)),O(dt.__s,Yn.getDerivedStateFromProps(sr,dt.__s))),Ve=dt.props,bn=dt.state,An)Yn.getDerivedStateFromProps==null&&dt.componentWillMount!=null&&dt.componentWillMount(),dt.componentDidMount!=null&&dt.__h.push(dt.componentDidMount);else{if(Yn.getDerivedStateFromProps==null&&sr!==Ve&&dt.componentWillReceiveProps!=null&&dt.componentWillReceiveProps(sr,io),!dt.__e&&dt.shouldComponentUpdate!=null&&dt.shouldComponentUpdate(sr,dt.__s,io)===!1||Ae.__v===$e.__v){dt.props=sr,dt.state=dt.__s,Ae.__v!==$e.__v&&(dt.__d=!1),dt.__v=Ae,Ae.__e=$e.__e,Ae.__k=$e.__k,Ae.__k.forEach(function(Go){Go&&(Go.__=Ae)}),dt.__h.length&&rn.push(dt);break e}dt.componentWillUpdate!=null&&dt.componentWillUpdate(sr,dt.__s,io),dt.componentDidUpdate!=null&&dt.__h.push(function(){dt.componentDidUpdate(Ve,bn,lr)})}dt.context=io,dt.props=sr,dt.state=dt.__s,(yn=c.__r)&&yn(Ae),dt.__d=!1,dt.__v=Ae,dt.__P=Ue,yn=dt.render(dt.props,dt.state,dt.context),dt.state=dt.__s,dt.getChildContext!=null&&(vt=O(O({},vt),dt.getChildContext())),An||dt.getSnapshotBeforeUpdate==null||(lr=dt.getSnapshotBeforeUpdate(Ve,bn)),wo=yn!=null&&yn.type===L&&yn.key==null?yn.props.children:yn,W(Ue,Array.isArray(wo)?wo:[wo],Ae,$e,vt,Ut,Et,rn,Kt,Pn),dt.base=Ae.__e,Ae.__h=null,dt.__h.length&&rn.push(dt),le&&(dt.__E=dt.__=null),dt.__e=!1}else Et==null&&Ae.__v===$e.__v?(Ae.__k=$e.__k,Ae.__e=$e.__e):Ae.__e=Ne($e.__e,Ae,$e,vt,Ut,Et,rn,Pn);(yn=c.diffed)&&yn(Ae)}catch(Go){Ae.__v=null,(Pn||Et!=null)&&(Ae.__e=Kt,Ae.__h=!!Pn,Et[Et.indexOf(Kt)]=null),c.__e(Go,Ae,$e)}}function Ee(Ue,Ae){c.__c&&c.__c(Ae,Ue),Ue.some(function($e){try{Ue=$e.__h,$e.__h=[],Ue.some(function(vt){vt.call($e)})}catch(vt){c.__e(vt,$e.__v)}})}function Ne(Ue,Ae,$e,vt,Ut,Et,rn,Kt){var Pn,yn,dt,An=$e.props,Ve=Ae.props,bn=Ae.type,lr=0;if(bn==="svg"&&(Ut=!0),Et!=null){for(;lr<Et.length;lr++)if((Pn=Et[lr])&&"setAttribute"in Pn==!!bn&&(bn?Pn.localName===bn:Pn.nodeType===3)){Ue=Pn,Et[lr]=null;break}}if(Ue==null){if(bn===null)return document.createTextNode(Ve);Ue=Ut?document.createElementNS("http://www.w3.org/2000/svg",bn):document.createElement(bn,Ve.is&&Ve),Et=null,Kt=!1}if(bn===null)An===Ve||Kt&&Ue.data===Ve||(Ue.data=Ve);else{if(Et=Et&&s.call(Ue.childNodes),yn=(An=$e.props||S).dangerouslySetInnerHTML,dt=Ve.dangerouslySetInnerHTML,!Kt){if(Et!=null)for(An={},lr=0;lr<Ue.attributes.length;lr++)An[Ue.attributes[lr].name]=Ue.attributes[lr].value;(dt||yn)&&(dt&&(yn&&dt.__html==yn.__html||dt.__html===Ue.innerHTML)||(Ue.innerHTML=dt&&dt.__html||""))}if(function(le,sr,Ir,io,wo){var Yn;for(Yn in Ir)Yn==="children"||Yn==="key"||Yn in sr||re(le,Yn,null,Ir[Yn],io);for(Yn in sr)wo&&typeof sr[Yn]!="function"||Yn==="children"||Yn==="key"||Yn==="value"||Yn==="checked"||Ir[Yn]===sr[Yn]||re(le,Yn,sr[Yn],Ir[Yn],io)}(Ue,Ve,An,Ut,Kt),dt)Ae.__k=[];else if(lr=Ae.props.children,W(Ue,Array.isArray(lr)?lr:[lr],Ae,$e,vt,Ut&&bn!=="foreignObject",Et,rn,Et?Et[0]:$e.__k&&$($e,0),Kt),Et!=null)for(lr=Et.length;lr--;)Et[lr]!=null&&E(Et[lr]);Kt||("value"in Ve&&(lr=Ve.value)!==void 0&&(lr!==An.value||lr!==Ue.value||bn==="progress"&&!lr)&&re(Ue,"value",lr,An.value,!1),"checked"in Ve&&(lr=Ve.checked)!==void 0&&lr!==Ue.checked&&re(Ue,"checked",lr,An.checked,!1))}return Ue}function rt(Ue,Ae,$e){try{typeof Ue=="function"?Ue(Ae):Ue.current=Ae}catch(vt){c.__e(vt,$e)}}function mt(Ue,Ae,$e){var vt,Ut;if(c.unmount&&c.unmount(Ue),(vt=Ue.ref)&&(vt.current&&vt.current!==Ue.__e||rt(vt,null,Ae)),(vt=Ue.__c)!=null){if(vt.componentWillUnmount)try{vt.componentWillUnmount()}catch(Et){c.__e(Et,Ae)}vt.base=vt.__P=null}if(vt=Ue.__k)for(Ut=0;Ut<vt.length;Ut++)vt[Ut]&&mt(vt[Ut],Ae,typeof Ue.type!="function");$e||Ue.__e==null||E(Ue.__e),Ue.__e=Ue.__d=void 0}function Je(Ue,Ae,$e){return this.constructor(Ue,$e)}function Xt(Ue,Ae,$e){var vt,Ut,Et;c.__&&c.__(Ue,Ae),Ut=(vt=typeof $e=="function")?null:$e&&$e.__k||Ae.__k,Et=[],fe(Ae,Ue=(!vt&&$e||Ae).__k=C(L,null,[Ue]),Ut||S,S,Ae.ownerSVGElement!==void 0,!vt&&$e?[$e]:Ut?null:Ae.firstChild?s.call(Ae.childNodes):null,Et,!vt&&$e?$e:Ut?Ut.__e:Ae.firstChild,vt),Ee(Et,Ue)}function en(Ue,Ae){Xt(Ue,Ae,en)}function Bt(Ue,Ae,$e){var vt,Ut,Et,rn=O({},Ue.props);for(Et in Ae)Et=="key"?vt=Ae[Et]:Et=="ref"?Ut=Ae[Et]:rn[Et]=Ae[Et];return arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):$e),j(Ue.type,rn,vt||Ue.key,Ut||Ue.ref,null)}function Nn(Ue,Ae){var $e={__c:Ae="__cC"+b++,__:Ue,Consumer:function(vt,Ut){return vt.children(Ut)},Provider:function(vt){var Ut,Et;return this.getChildContext||(Ut=[],(Et={})[Ae]=this,this.getChildContext=function(){return Et},this.shouldComponentUpdate=function(rn){this.props.value!==rn.value&&Ut.some(Y)},this.sub=function(rn){Ut.push(rn);var Kt=rn.componentWillUnmount;rn.componentWillUnmount=function(){Ut.splice(Ut.indexOf(rn),1),Kt&&Kt.call(rn)}}),vt.children}};return $e.Provider.__=$e.Consumer.contextType=$e}s=T.slice,c={__e:function(Ue,Ae){for(var $e,vt,Ut;Ae=Ae.__;)if(($e=Ae.__c)&&!$e.__)try{if((vt=$e.constructor)&&vt.getDerivedStateFromError!=null&&($e.setState(vt.getDerivedStateFromError(Ue)),Ut=$e.__d),$e.componentDidCatch!=null&&($e.componentDidCatch(Ue),Ut=$e.__d),Ut)return $e.__E=$e}catch(Et){Ue=Et}throw Ue}},p=0,V.prototype.setState=function(Ue,Ae){var $e;$e=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=O({},this.state),typeof Ue=="function"&&(Ue=Ue(O({},$e),this.props)),Ue&&O($e,Ue),Ue!=null&&this.__v&&(Ae&&this.__h.push(Ae),Y(this))},V.prototype.forceUpdate=function(Ue){this.__v&&(this.__e=!0,Ue&&this.__h.push(Ue),Y(this))},V.prototype.render=L,d=[],_=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,z.__r=0,b=0},function(n,a,r){(function(s,c){r.d(a,"a",function(){return Y}),r.d(a,"b",function(){return Cc}),r.d(a,"c",function(){return Ca}),r.d(a,"d",function(){return Kn}),r.d(a,"e",function(){return Jt}),r.d(a,"f",function(){return on}),r.d(a,"g",function(){return Un}),r.d(a,"h",function(){return Ii}),r.d(a,"i",function(){return wo}),r.d(a,"j",function(){return Tn}),r.d(a,"k",function(){return _l}),r.d(a,"l",function(){return Tc}),r.d(a,"m",function(){return le}),r.d(a,"n",function(){return ls}),r.d(a,"o",function(){return B}),r.d(a,"p",function(){return Qd}),r.d(a,"q",function(){return ga}),r.d(a,"r",function(){return ss}),r.d(a,"s",function(){return sa}),r.d(a,"t",function(){return zo}),r.d(a,"u",function(){return Nu}),r.d(a,"v",function(){return zf}),r.d(a,"w",function(){return kc}),r.d(a,"x",function(){return ci}),r.d(a,"y",function(){return wa}),r.d(a,"z",function(){return Jo}),r.d(a,"A",function(){return di}),r.d(a,"B",function(){return _a}),r.d(a,"C",function(){return yn}),r.d(a,"D",function(){return Wf}),r.d(a,"E",function(){return Xr}),r.d(a,"F",function(){return Kr}),r.d(a,"G",function(){return xc}),r.d(a,"H",function(){return Sc}),r.d(a,"I",function(){return Nc}),r.d(a,"J",function(){return fi}),r.d(a,"K",function(){return Ze}),r.d(a,"L",function(){return lo}),r.d(a,"M",function(){return Cu});var p=[];Object.freeze(p);var d={};function _(){return++Cn.mobxGuid}function g(N){throw b(!1,N),"X"}function b(N,P){if(!N)throw new Error("[mobx] "+(P||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(d);function S(N){var P=!1;return function(){if(!P)return P=!0,N.apply(this,arguments)}}var T=function(){};function A(N){return N!==null&&typeof N=="object"}function O(N){if(N===null||typeof N!="object")return!1;var P=Object.getPrototypeOf(N);return P===Object.prototype||P===null}function E(N,P,X){Object.defineProperty(N,P,{enumerable:!1,writable:!0,configurable:!0,value:X})}function C(N,P){var X="isMobX"+N;return P.prototype[X]=!0,function(ie){return A(ie)&&ie[X]===!0}}function j(N){return N instanceof Map}function U(N){return N instanceof Set}function L(N){var P=new Set;for(var X in N)P.add(X);return Object.getOwnPropertySymbols(N).forEach(function(ie){Object.getOwnPropertyDescriptor(N,ie).enumerable&&P.add(ie)}),Array.from(P)}function V(N){return N&&N.toString?N.toString():new String(N).toString()}function $(N){return N===null?null:typeof N=="object"?""+N:N}var H=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:Object.getOwnPropertyNames,Y=Symbol("mobx administration"),z=function(){function N(P){P===void 0&&(P="Atom@"+_()),this.name=P,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=An.NOT_TRACKING}return N.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(P){return P()})},N.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(P){return P()})},N.prototype.reportObserved=function(){return ku(this)},N.prototype.reportChanged=function(){Ji(),function(P){P.lowestObserverState!==An.STALE&&(P.lowestObserverState=An.STALE,P.observers.forEach(function(X){X.dependenciesState===An.UP_TO_DATE&&(X.isTracing!==Ve.NONE&&Ra(X,P),X.onBecomeStale()),X.dependenciesState=An.STALE}))}(this),aa()},N.prototype.toString=function(){return this.name},N}(),W=C("Atom",z);function B(N,P,X){P===void 0&&(P=T),X===void 0&&(X=T);var ie,we=new z(N);return P!==T&&Vf("onBecomeObserved",we,P,ie),X!==T&&Xr(we,X),we}var q={structural:function(N,P){return It(N,P)},default:function(N,P){return Object.is(N,P)}},J=function(N,P){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,ie){X.__proto__=ie}||function(X,ie){for(var we in ie)ie.hasOwnProperty(we)&&(X[we]=ie[we])},J(N,P)};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation. All rights reserved.
		Licensed under the Apache License, Version 2.0 (the "License"); you may not use
		this file except in compliance with the License. You may obtain a copy of the
		License at http://www.apache.org/licenses/LICENSE-2.0

		THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
		KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
		WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
		MERCHANTABLITY OR NON-INFRINGEMENT.

		See the Apache Version 2.0 License for specific language governing permissions
		and limitations under the License.
		***************************************************************************** */var ce=function(){return ce=Object.assign||function(N){for(var P,X=1,ie=arguments.length;X<ie;X++)for(var we in P=arguments[X])Object.prototype.hasOwnProperty.call(P,we)&&(N[we]=P[we]);return N},ce.apply(this,arguments)};function re(N){var P=typeof Symbol=="function"&&N[Symbol.iterator],X=0;return P?P.call(N):{next:function(){return N&&X>=N.length&&(N=void 0),{value:N&&N[X++],done:!N}}}}function Pe(N,P){var X=typeof Symbol=="function"&&N[Symbol.iterator];if(!X)return N;var ie,we,Xe=X.call(N),yt=[];try{for(;(P===void 0||P-- >0)&&!(ie=Xe.next()).done;)yt.push(ie.value)}catch(zt){we={error:zt}}finally{try{ie&&!ie.done&&(X=Xe.return)&&X.call(Xe)}finally{if(we)throw we.error}}return yt}function ge(){for(var N=[],P=0;P<arguments.length;P++)N=N.concat(Pe(arguments[P]));return N}var fe=Symbol("mobx did run lazy initializers"),Ee=Symbol("mobx pending decorators"),Ne={},rt={};function mt(N,P){var X=P?Ne:rt;return X[N]||(X[N]={configurable:!0,enumerable:P,get:function(){return Je(this),this[N]},set:function(ie){Je(this),this[N]=ie}})}function Je(N){var P,X;if(N[fe]!==!0){var ie=N[Ee];if(ie){E(N,fe,!0);var we=ge(Object.getOwnPropertySymbols(ie),Object.keys(ie));try{for(var Xe=re(we),yt=Xe.next();!yt.done;yt=Xe.next()){var zt=ie[yt.value];zt.propertyCreator(N,zt.prop,zt.descriptor,zt.decoratorTarget,zt.decoratorArguments)}}catch(En){P={error:En}}finally{try{yt&&!yt.done&&(X=Xe.return)&&X.call(Xe)}finally{if(P)throw P.error}}}}}function Xt(N,P){return function(){var X,ie=function(we,Xe,yt,zt){if(zt===!0)return P(we,Xe,yt,we,X),null;if(!Object.prototype.hasOwnProperty.call(we,Ee)){var En=we[Ee];E(we,Ee,ce({},En))}return we[Ee][Xe]={prop:Xe,propertyCreator:P,descriptor:yt,decoratorTarget:we,decoratorArguments:X},mt(Xe,N)};return en(arguments)?(X=p,ie.apply(null,arguments)):(X=Array.prototype.slice.call(arguments),ie)}}function en(N){return(N.length===2||N.length===3)&&(typeof N[1]=="string"||typeof N[1]=="symbol")||N.length===4&&N[3]===!0}function Bt(N,P,X){return ci(N)?N:Array.isArray(N)?yn.array(N,{name:X}):O(N)?yn.object(N,void 0,{name:X}):j(N)?yn.map(N,{name:X}):U(N)?yn.set(N,{name:X}):N}function Nn(N){return N}function Ue(N){b(N);var P=Xt(!0,function(ie,we,Xe,yt,zt){var En=Xe?Xe.initializer?Xe.initializer.call(ie):Xe.value:void 0;la(ie).addObservableProp(we,En,N)}),X=(s!==void 0&&s.env,P);return X.enhancer=N,X}var Ae={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function $e(N){return N==null?Ae:typeof N=="string"?{name:N,deep:!0,proxy:!0}:N}Object.freeze(Ae);var vt=Ue(Bt),Ut=Ue(function(N,P,X){return N==null||di(N)||wa(N)||Jo(N)||ri(N)?N:Array.isArray(N)?yn.array(N,{name:X,deep:!1}):O(N)?yn.object(N,void 0,{name:X,deep:!1}):j(N)?yn.map(N,{name:X,deep:!1}):U(N)?yn.set(N,{name:X,deep:!1}):g(!1)}),Et=Ue(Nn),rn=Ue(function(N,P,X){return It(N,P)?P:N});function Kt(N){return N.defaultDecorator?N.defaultDecorator.enhancer:N.deep===!1?Nn:Bt}var Pn={box:function(N,P){arguments.length>2&&dt("box");var X=$e(P);return new Lr(N,Kt(X),X.name,!0,X.equals)},array:function(N,P){arguments.length>2&&dt("array");var X=$e(P);return Fl(N,Kt(X),X.name)},map:function(N,P){arguments.length>2&&dt("map");var X=$e(P);return new Cc(N,Kt(X),X.name)},set:function(N,P){arguments.length>2&&dt("set");var X=$e(P);return new Ya(N,Kt(X),X.name)},object:function(N,P,X){typeof arguments[1]=="string"&&dt("object");var ie=$e(X);if(ie.proxy===!1)return ga({},N,P,ie);var we=Pu(ie),Xe=ga({},void 0,void 0,ie),yt=us(Xe);return Gf(yt,N,P,we),yt},ref:Et,shallow:Ut,deep:vt,struct:rn},yn=function(N,P,X){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return vt.apply(null,arguments);if(ci(N))return N;var ie=O(N)?yn.object(N,P,X):Array.isArray(N)?yn.array(N,P):j(N)?yn.map(N,P):U(N)?yn.set(N,P):N;if(ie!==N)return ie;g(!1)};function dt(N){g("Expected one or two arguments to observable."+N+". Did you accidentally try to use observable."+N+" as decorator?")}Object.keys(Pn).forEach(function(N){return yn[N]=Pn[N]});var An,Ve,bn=Xt(!1,function(N,P,X,ie,we){var Xe=X.get,yt=X.set,zt=we[0]||{};la(N).addComputedProp(N,P,ce({get:Xe,set:yt,context:N},zt))}),lr=bn({equals:q.structural}),le=function(N,P,X){if(typeof P=="string"||N!==null&&typeof N=="object"&&arguments.length===1)return bn.apply(null,arguments);var ie=typeof P=="object"?P:{};return ie.get=N,ie.set=typeof P=="function"?P:ie.set,ie.name=ie.name||N.name||"",new Ha(ie)};le.struct=lr,function(N){N[N.NOT_TRACKING=-1]="NOT_TRACKING",N[N.UP_TO_DATE=0]="UP_TO_DATE",N[N.POSSIBLY_STALE=1]="POSSIBLY_STALE",N[N.STALE=2]="STALE"}(An||(An={})),function(N){N[N.NONE=0]="NONE",N[N.LOG=1]="LOG",N[N.BREAK=2]="BREAK"}(Ve||(Ve={}));var sr=function(N){this.cause=N};function Ir(N){return N instanceof sr}function io(N){switch(N.dependenciesState){case An.UP_TO_DATE:return!1;case An.NOT_TRACKING:case An.STALE:return!0;case An.POSSIBLY_STALE:for(var P=on(!0),X=Le(),ie=N.observing,we=ie.length,Xe=0;Xe<we;Xe++){var yt=ie[Xe];if(gl(yt)){if(Cn.disableErrorBoundaries)yt.get();else try{yt.get()}catch{return lt(X),Jt(P),!0}if(N.dependenciesState===An.STALE)return lt(X),Jt(P),!0}}return Dn(N),lt(X),Jt(P),!1}}function wo(){return Cn.trackingDerivation!==null}function Yn(N){var P=N.observers.size>0;Cn.computationDepth>0&&P&&g(!1),Cn.allowStateChanges||!P&&Cn.enforceActions!=="strict"||g(!1)}function Go(N,P,X){var ie=on(!0);Dn(N),N.newObserving=new Array(N.observing.length+100),N.unboundDepsCount=0,N.runId=++Cn.runId;var we,Xe=Cn.trackingDerivation;if(Cn.trackingDerivation=N,Cn.disableErrorBoundaries===!0)we=P.call(X);else try{we=P.call(X)}catch(yt){we=new sr(yt)}return Cn.trackingDerivation=Xe,function(yt){for(var zt=yt.observing,En=yt.observing=yt.newObserving,Er=An.UP_TO_DATE,dn=0,qr=yt.unboundDepsCount,_r=0;_r<qr;_r++)(Fr=En[_r]).diffValue===0&&(Fr.diffValue=1,dn!==_r&&(En[dn]=Fr),dn++),Fr.dependenciesState>Er&&(Er=Fr.dependenciesState);for(En.length=dn,yt.newObserving=null,qr=zt.length;qr--;)(Fr=zt[qr]).diffValue===0&&Eo(Fr,yt),Fr.diffValue=0;for(;dn--;){var Fr;(Fr=En[dn]).diffValue===1&&(Fr.diffValue=0,Lf(Fr,yt))}Er!==An.UP_TO_DATE&&(yt.dependenciesState=Er,yt.onBecomeStale())}(N),Jt(ie),we}function Me(N){var P=N.observing;N.observing=[];for(var X=P.length;X--;)Eo(P[X],N);N.dependenciesState=An.NOT_TRACKING}function Ze(N){var P=Le();try{return N()}finally{lt(P)}}function Le(){var N=Cn.trackingDerivation;return Cn.trackingDerivation=null,N}function lt(N){Cn.trackingDerivation=N}function on(N){var P=Cn.allowStateReads;return Cn.allowStateReads=N,P}function Jt(N){Cn.allowStateReads=N}function Dn(N){if(N.dependenciesState!==An.UP_TO_DATE){N.dependenciesState=An.UP_TO_DATE;for(var P=N.observing,X=P.length;X--;)P[X].lowestObserverState=An.UP_TO_DATE}}var Sr=0,ui=1,Si=Object.getOwnPropertyDescriptor(function(){},"name");Si&&Si.configurable;function Zo(N,P,X){var ie=function(){return ni(N,P,X||this,arguments)};return ie.isMobxAction=!0,ie}function ni(N,P,X,ie){var we=Tn();try{return P.apply(X,ie)}catch(Xe){throw we.error=Xe,Xe}finally{Un(we)}}function Tn(N,P,X){var ie=0,we=Le();Ji();var Xe={prevDerivation:we,prevAllowStateChanges:ur(!0),prevAllowStateReads:on(!0),notifySpy:!1,startTime:ie,actionId:ui++,parentActionId:Sr};return Sr=Xe.actionId,Xe}function Un(N){Sr!==N.actionId&&g("invalid action stack. did you forget to finish an action?"),Sr=N.parentActionId,N.error!==void 0&&(Cn.suppressReactionErrors=!0),to(N.prevAllowStateChanges),Jt(N.prevAllowStateReads),aa(),lt(N.prevDerivation),N.notifySpy,Cn.suppressReactionErrors=!1}function Kn(N,P){var X,ie=ur(N);try{X=P()}finally{to(ie)}return X}function ur(N){var P=Cn.allowStateChanges;return Cn.allowStateChanges=N,P}function to(N){Cn.allowStateChanges=N}var Lr=function(N){function P(X,ie,we,Xe,yt){we===void 0&&(we="ObservableValue@"+_()),yt===void 0&&(yt=q.default);var zt=N.call(this,we)||this;return zt.enhancer=ie,zt.name=we,zt.equals=yt,zt.hasUnreportedChange=!1,zt.value=ie(X,void 0,we),zt}return function(X,ie){function we(){this.constructor=X}J(X,ie),X.prototype=ie===null?Object.create(ie):(we.prototype=ie.prototype,new we)}(P,N),P.prototype.dehanceValue=function(X){return this.dehancer!==void 0?this.dehancer(X):X},P.prototype.set=function(X){this.value,(X=this.prepareNewValue(X))!==Cn.UNCHANGED&&this.setNewValue(X)},P.prototype.prepareNewValue=function(X){if(Yn(this),ea(this)){var ie=Cr(this,{object:this,type:"update",newValue:X});if(!ie)return Cn.UNCHANGED;X=ie.newValue}return X=this.enhancer(X,this.value,this.name),this.equals(this.value,X)?Cn.UNCHANGED:X},P.prototype.setNewValue=function(X){var ie=this.value;this.value=X,this.reportChanged(),Gi(this)&&gi(this,{type:"update",object:this,newValue:X,oldValue:ie})},P.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},P.prototype.intercept=function(X){return ba(this,X)},P.prototype.observe=function(X,ie){return ie&&X({object:this,type:"update",newValue:this.value,oldValue:void 0}),Da(this,X)},P.prototype.toJSON=function(){return this.get()},P.prototype.toString=function(){return this.name+"["+this.value+"]"},P.prototype.valueOf=function(){return $(this.get())},P.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},P}(z),yl=C("ObservableValue",Lr),Ha=function(){function N(P){this.dependenciesState=An.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=An.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+_(),this.value=new sr(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Ve.NONE,b(P.get,"missing option for computed: get"),this.derivation=P.get,this.name=P.name||"ComputedValue@"+_(),P.set&&(this.setter=Zo(this.name+"-setter",P.set)),this.equals=P.equals||(P.compareStructural||P.struct?q.structural:q.default),this.scope=P.context,this.requiresReaction=!!P.requiresReaction,this.keepAlive=!!P.keepAlive}return N.prototype.onBecomeStale=function(){(function(P){P.lowestObserverState===An.UP_TO_DATE&&(P.lowestObserverState=An.POSSIBLY_STALE,P.observers.forEach(function(X){X.dependenciesState===An.UP_TO_DATE&&(X.dependenciesState=An.POSSIBLY_STALE,X.isTracing!==Ve.NONE&&Ra(X,P),X.onBecomeStale())}))})(this)},N.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(P){return P()})},N.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(P){return P()})},N.prototype.get=function(){this.isComputing&&g("Cycle detected in computation "+this.name+": "+this.derivation),Cn.inBatch!==0||this.observers.size!==0||this.keepAlive?(ku(this),io(this)&&this.trackAndCompute()&&function(X){X.lowestObserverState!==An.STALE&&(X.lowestObserverState=An.STALE,X.observers.forEach(function(ie){ie.dependenciesState===An.POSSIBLY_STALE?ie.dependenciesState=An.STALE:ie.dependenciesState===An.UP_TO_DATE&&(X.lowestObserverState=An.UP_TO_DATE)}))}(this)):io(this)&&(this.warnAboutUntrackedRead(),Ji(),this.value=this.computeValue(!1),aa());var P=this.value;if(Ir(P))throw P.cause;return P},N.prototype.peek=function(){var P=this.computeValue(!1);if(Ir(P))throw P.cause;return P},N.prototype.set=function(P){if(this.setter){b(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,P)}finally{this.isRunningSetter=!1}}else b(!1,!1)},N.prototype.trackAndCompute=function(){var P=this.value,X=this.dependenciesState===An.NOT_TRACKING,ie=this.computeValue(!0),we=X||Ir(P)||Ir(ie)||!this.equals(P,ie);return we&&(this.value=ie),we},N.prototype.computeValue=function(P){var X;if(this.isComputing=!0,Cn.computationDepth++,P)X=Go(this,this.derivation,this.scope);else if(Cn.disableErrorBoundaries===!0)X=this.derivation.call(this.scope);else try{X=this.derivation.call(this.scope)}catch(ie){X=new sr(ie)}return Cn.computationDepth--,this.isComputing=!1,X},N.prototype.suspend=function(){this.keepAlive||(Me(this),this.value=void 0)},N.prototype.observe=function(P,X){var ie=this,we=!0,Xe=void 0;return Tc(function(){var yt=ie.get();if(!we||X){var zt=Le();P({type:"update",object:ie,newValue:yt,oldValue:Xe}),lt(zt)}we=!1,Xe=yt})},N.prototype.warnAboutUntrackedRead=function(){},N.prototype.toJSON=function(){return this.get()},N.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},N.prototype.valueOf=function(){return $(this.get())},N.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},N}(),gl=C("ComputedValue",Ha),as=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Kd={};function bc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:Kd}var ma=!0,Fs=!1,Cn=function(){var N=bc();return N.__mobxInstanceCount>0&&!N.__mobxGlobals&&(ma=!1),N.__mobxGlobals&&N.__mobxGlobals.version!==new as().version&&(ma=!1),ma?N.__mobxGlobals?(N.__mobxInstanceCount+=1,N.__mobxGlobals.UNCHANGED||(N.__mobxGlobals.UNCHANGED={}),N.__mobxGlobals):(N.__mobxInstanceCount=1,N.__mobxGlobals=new as):(setTimeout(function(){Fs||g("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new as)}();function Lf(N,P){N.observers.add(P),N.lowestObserverState>P.dependenciesState&&(N.lowestObserverState=P.dependenciesState)}function Eo(N,P){N.observers.delete(P),N.observers.size===0&&wc(N)}function wc(N){N.isPendingUnobservation===!1&&(N.isPendingUnobservation=!0,Cn.pendingUnobservations.push(N))}function Ji(){Cn.inBatch++}function aa(){if(--Cn.inBatch==0){Oc();for(var N=Cn.pendingUnobservations,P=0;P<N.length;P++){var X=N[P];X.isPendingUnobservation=!1,X.observers.size===0&&(X.isBeingObserved&&(X.isBeingObserved=!1,X.onBecomeUnobserved()),X instanceof Ha&&X.suspend())}Cn.pendingUnobservations=[]}}function ku(N){var P=Cn.trackingDerivation;return P!==null?(P.runId!==N.lastAccessedBy&&(N.lastAccessedBy=P.runId,P.newObserving[P.unboundDepsCount++]=N,N.isBeingObserved||(N.isBeingObserved=!0,N.onBecomeObserved())),!0):(N.observers.size===0&&Cn.inBatch>0&&wc(N),!1)}function Ra(N,P){if(N.isTracing===Ve.BREAK){var X=[];ya(zo(N),X,1),new Function(`debugger;
/*
Tracing '`+N.name+`'

You are entering this break point because derivation '`+N.name+"' is being traced and '"+P.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(N instanceof Ha?N.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+X.join(`
`)+`
*/
    `)()}}function ya(N,P,X){P.length>=1e3?P.push("(and many more)"):(P.push(""+new Array(X).join("	")+N.name),N.dependencies&&N.dependencies.forEach(function(ie){return ya(ie,P,X+1)}))}var Ca=function(){function N(P,X,ie,we){P===void 0&&(P="Reaction@"+_()),we===void 0&&(we=!1),this.name=P,this.onInvalidate=X,this.errorHandler=ie,this.requiresObservable=we,this.observing=[],this.newObserving=[],this.dependenciesState=An.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+_(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Ve.NONE}return N.prototype.onBecomeStale=function(){this.schedule()},N.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Cn.pendingReactions.push(this),Oc())},N.prototype.isScheduled=function(){return this._isScheduled},N.prototype.runReaction=function(){if(!this.isDisposed){if(Ji(),this._isScheduled=!1,io(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(P){this.reportExceptionInDerivation(P)}}aa()}},N.prototype.track=function(P){if(!this.isDisposed){Ji(),this._isRunning=!0;var X=Go(this,P,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Me(this),Ir(X)&&this.reportExceptionInDerivation(X.cause),aa()}},N.prototype.reportExceptionInDerivation=function(P){var X=this;if(this.errorHandler)this.errorHandler(P,this);else{if(Cn.disableErrorBoundaries)throw P;Cn.suppressReactionErrors,Cn.globalReactionErrorHandlers.forEach(function(ie){return ie(P,X)})}},N.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ji(),Me(this),aa()))},N.prototype.getDisposer=function(){var P=this.dispose.bind(this);return P[Y]=this,P},N.prototype.toString=function(){return"Reaction["+this.name+"]"},N.prototype.trace=function(P){P===void 0&&(P=!1),function(){for(var X=[],ie=0;ie<arguments.length;ie++)X[ie]=arguments[ie];var we=!1;typeof X[X.length-1]=="boolean"&&(we=X.pop());var Xe=Vr(X);if(!Xe)return g(!1);Xe.isTracing,Ve.NONE,Xe.isTracing=we?Ve.BREAK:Ve.LOG}(this,P)},N}(),Ec=function(N){return N()};function Oc(){Cn.inBatch>0||Cn.isRunningReactions||Ec($f)}function $f(){Cn.isRunningReactions=!0;for(var N=Cn.pendingReactions,P=0;N.length>0;){++P==100&&N.splice(0);for(var X=N.splice(0),ie=0,we=X.length;ie<we;ie++)X[ie].runReaction()}Cn.isRunningReactions=!1}var Bs=C("Reaction",Ca);function Ff(N){var P=Ec;Ec=function(X){return N(function(){return P(X)})}}function Sc(N){return function(){}}function Zd(){g(!1)}function Il(N){return function(P,X,ie){if(ie){if(ie.value)return{value:Zo(N,ie.value),enumerable:!1,configurable:!0,writable:!0};var we=ie.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Zo(N,we.call(this))}}}return Bf(N).apply(this,arguments)}}function Bf(N){return function(P,X,ie){Object.defineProperty(P,X,{configurable:!0,enumerable:!1,get:function(){},set:function(we){E(this,X,_l(N,we))}})}}var _l=function(N,P,X,ie){return arguments.length===1&&typeof N=="function"?Zo(N.name||"<unnamed action>",N):arguments.length===2&&typeof P=="function"?Zo(N,P):arguments.length===1&&typeof N=="string"?Il(N):ie!==!0?Il(P).apply(null,arguments):void E(N,P,Zo(N.name||P,X.value,this))};function xc(N,P){return ni(typeof N=="string"?N:N.name||"<unnamed action>",typeof N=="function"?N:P,this,void 0)}function Nu(N){return typeof N=="function"&&N.isMobxAction===!0}function Ac(N,P,X){E(N,P,Zo(P,X.bind(N)))}function Tc(N,P){P===void 0&&(P=d);var X,ie=P&&P.name||N.name||"Autorun@"+_();if(!P.scheduler&&!P.delay)X=new Ca(ie,function(){this.track(yt)},P.onError,P.requiresObservable);else{var we=Uf(P),Xe=!1;X=new Ca(ie,function(){Xe||(Xe=!0,we(function(){Xe=!1,X.isDisposed||X.track(yt)}))},P.onError,P.requiresObservable)}function yt(){N(X)}return X.schedule(),X.getDisposer()}_l.bound=function(N,P,X,ie){return ie===!0?(Ac(N,P,X.value),null):X?{configurable:!0,enumerable:!1,get:function(){return Ac(this,P,X.value||X.initializer.call(this)),this[P]},set:Zd}:{enumerable:!1,configurable:!0,set:function(we){Ac(this,P,we)},get:function(){}}};var Jd=function(N){return N()};function Uf(N){return N.scheduler?N.scheduler:N.delay?function(P){return setTimeout(P,N.delay)}:Jd}function Kr(N,P,X){X===void 0&&(X=d);var ie,we,Xe,yt=X.name||"Reaction@"+_(),zt=_l(yt,X.onError?(ie=X.onError,we=P,function(){try{return we.apply(this,arguments)}catch(Mo){ie.call(this,Mo)}}):P),En=!X.scheduler&&!X.delay,Er=Uf(X),dn=!0,qr=!1,_r=X.compareStructural?q.structural:X.equals||q.default,Fr=new Ca(yt,function(){dn||En?ua():qr||(qr=!0,Er(ua))},X.onError,X.requiresObservable);function ua(){if(qr=!1,!Fr.isDisposed){var Mo=!1;Fr.track(function(){var na=N(Fr);Mo=dn||!_r(Xe,na),Xe=na}),dn&&X.fireImmediately&&zt(Xe,Fr),dn||Mo!==!0||zt(Xe,Fr),dn&&(dn=!1)}}return Fr.schedule(),Fr.getDisposer()}function Xr(N,P,X){return Vf("onBecomeUnobserved",N,P,X)}function Vf(N,P,X,ie){var we=typeof ie=="function"?sa(P,X):sa(P),Xe=typeof ie=="function"?ie:X,yt=N+"Listeners";return we[yt]?we[yt].add(Xe):we[yt]=new Set([Xe]),typeof we[N]!="function"?g(!1):function(){var zt=we[yt];zt&&(zt.delete(Xe),zt.size===0&&delete we[yt])}}function ls(N){var P=N.enforceActions,X=N.computedRequiresReaction,ie=N.computedConfigurable,we=N.disableErrorBoundaries,Xe=N.reactionScheduler,yt=N.reactionRequiresObservable,zt=N.observableRequiresReaction;if(N.isolateGlobalState===!0&&((Cn.pendingReactions.length||Cn.inBatch||Cn.isRunningReactions)&&g("isolateGlobalState should be called before MobX is running any reactions"),Fs=!0,ma&&(--bc().__mobxInstanceCount==0&&(bc().__mobxGlobals=void 0),Cn=new as)),P!==void 0){var En=void 0;switch(P){case!0:case"observed":En=!0;break;case!1:case"never":En=!1;break;case"strict":case"always":En="strict";break;default:g("Invalid value for 'enforceActions': '"+P+"', expected 'never', 'always' or 'observed'")}Cn.enforceActions=En,Cn.allowStateChanges=En!==!0&&En!=="strict"}X!==void 0&&(Cn.computedRequiresReaction=!!X),yt!==void 0&&(Cn.reactionRequiresObservable=!!yt),zt!==void 0&&(Cn.observableRequiresReaction=!!zt,Cn.allowStateReads=!Cn.observableRequiresReaction),ie!==void 0&&(Cn.computedConfigurable=!!ie),we!==void 0&&(Cn.disableErrorBoundaries=!!we),Xe&&Ff(Xe)}function ga(N,P,X,ie){var we=Pu(ie=$e(ie));return Je(N),la(N,ie.name,we.enhancer),P&&Gf(N,P,X,we),N}function Pu(N){return N.defaultDecorator||(N.deep===!1?Et:vt)}function Gf(N,P,X,ie){var we,Xe;Ji();try{var yt=H(P);try{for(var zt=re(yt),En=zt.next();!En.done;En=zt.next()){var Er=En.value,dn=Object.getOwnPropertyDescriptor(P,Er),qr=(X&&Er in X?X[Er]:dn.get?bn:ie)(N,Er,dn,!0);qr&&Object.defineProperty(N,Er,qr)}}catch(_r){we={error:_r}}finally{try{En&&!En.done&&(Xe=zt.return)&&Xe.call(zt)}finally{if(we)throw we.error}}}finally{aa()}}function zo(N,P){return Ll(sa(N,P))}function Ll(N){var P,X,ie={name:N.name};return N.observing&&N.observing.length>0&&(ie.dependencies=(P=N.observing,X=[],P.forEach(function(we){X.indexOf(we)===-1&&X.push(we)}),X).map(Ll)),ie}var $l=0;function Ru(){this.message="FLOW_CANCELLED"}function ss(N){arguments.length!==1&&g("Flow expects 1 argument and cannot be used as decorator");var P=N.name||"<unnamed flow>";return function(){var X,ie=this,we=arguments,Xe=++$l,yt=_l(P+" - runid: "+Xe+" - init",N).apply(ie,we),zt=void 0,En=new Promise(function(Er,dn){var qr=0;function _r(Mo){var na;zt=void 0;try{na=_l(P+" - runid: "+Xe+" - yield "+qr++,yt.next).call(yt,Mo)}catch(bl){return dn(bl)}ua(na)}function Fr(Mo){var na;zt=void 0;try{na=_l(P+" - runid: "+Xe+" - yield "+qr++,yt.throw).call(yt,Mo)}catch(bl){return dn(bl)}ua(na)}function ua(Mo){if(!Mo||typeof Mo.then!="function")return Mo.done?Er(Mo.value):(zt=Promise.resolve(Mo.value)).then(_r,Fr);Mo.then(ua,dn)}X=dn,_r(void 0)});return En.cancel=_l(P+" - runid: "+Xe+" - cancel",function(){try{zt&&xi(zt);var Er=yt.return(void 0),dn=Promise.resolve(Er.value);dn.then(T,T),xi(dn),X(new Ru)}catch(qr){X(qr)}}),En}}function xi(N){typeof N.cancel=="function"&&N.cancel()}function Mc(N,P){if(N==null)return!1;if(P!==void 0){if(di(N)===!1||!N[Y].values.has(P))return!1;var X=sa(N,P);return gl(X)}return gl(N)}function zf(N){return arguments.length>1?g(!1):Mc(N)}function kc(N,P){return typeof P!="string"?g(!1):Mc(N,P)}function Fi(N,P){return N!=null&&(P!==void 0?!!di(N)&&N[Y].values.has(P):di(N)||!!N[Y]||W(N)||Bs(N)||gl(N))}function ci(N){return arguments.length!==1&&g(!1),Fi(N)}function _a(N){return di(N)?N[Y].getKeys():Jo(N)||ri(N)?Array.from(N.keys()):wa(N)?N.map(function(P,X){return X}):g(!1)}function lo(N){return di(N)?_a(N).map(function(P){return N[P]}):Jo(N)?_a(N).map(function(P){return N.get(P)}):ri(N)?Array.from(N.values()):wa(N)?N.slice():g(!1)}function Qd(N){return di(N)?_a(N).map(function(P){return[P,N[P]]}):Jo(N)?_a(N).map(function(P){return[P,N.get(P)]}):ri(N)?Array.from(N.entries()):wa(N)?N.map(function(P,X){return[X,P]}):g(!1)}function Bi(N,P,X){if(arguments.length!==2||ri(N))if(di(N)){var ie=N[Y],we=ie.values.get(P);we?ie.write(P,X):ie.addObservableProp(P,X,ie.defaultEnhancer)}else if(Jo(N))N.set(P,X);else if(ri(N))N.add(P);else{if(!wa(N))return g(!1);typeof P!="number"&&(P=parseInt(P,10)),b(P>=0,"Not a valid index: '"+P+"'"),Ji(),P>=N.length&&(N.length=P+1),N[P]=X,aa()}else{Ji();var Xe=P;try{for(var yt in Xe)Bi(N,yt,Xe[yt])}finally{aa()}}}function Wf(N,P,X,ie){return typeof X=="function"?function(we,Xe,yt,zt){return Ii(we,Xe).observe(yt,zt)}(N,P,X,ie):function(we,Xe,yt){return Ii(we).observe(Xe,yt)}(N,P,X)}Ru.prototype=Object.create(Error.prototype);var Hf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Ui(N,P,X,ie){return ie.detectCycles&&N.set(P,X),X}function Qi(N,P,X){if(!P.recurseEverything&&!ci(N)||typeof N!="object")return N;if(N===null)return null;if(N instanceof Date)return N;if(yl(N))return Qi(N.get(),P,X);if(ci(N)&&_a(N),P.detectCycles===!0&&N!==null&&X.has(N))return X.get(N);if(wa(N)||Array.isArray(N)){var ie=Ui(X,N,[],P),we=N.map(function(_r){return Qi(_r,P,X)});ie.length=we.length;for(var Xe=0,yt=we.length;Xe<yt;Xe++)ie[Xe]=we[Xe];return ie}if(ri(N)||Object.getPrototypeOf(N)===Set.prototype){if(P.exportMapsAsObjects===!1){var zt=Ui(X,N,new Set,P);return N.forEach(function(_r){zt.add(Qi(_r,P,X))}),zt}var En=Ui(X,N,[],P);return N.forEach(function(_r){En.push(Qi(_r,P,X))}),En}if(Jo(N)||Object.getPrototypeOf(N)===Map.prototype){if(P.exportMapsAsObjects===!1){var Er=Ui(X,N,new Map,P);return N.forEach(function(_r,Fr){Er.set(Fr,Qi(_r,P,X))}),Er}var dn=Ui(X,N,{},P);return N.forEach(function(_r,Fr){dn[Fr]=Qi(_r,P,X)}),dn}var qr=Ui(X,N,{},P);return L(N).forEach(function(_r){qr[_r]=Qi(N[_r],P,X)}),qr}function Nc(N,P){var X;return typeof P=="boolean"&&(P={detectCycles:P}),P||(P=Hf),P.detectCycles=P.detectCycles===void 0?P.recurseEverything===!0:P.detectCycles===!0,P.detectCycles&&(X=new Map),Qi(N,P,X)}function Vr(N){switch(N.length){case 0:return Cn.trackingDerivation;case 1:return sa(N[0]);case 2:return sa(N[0],N[1])}}function fi(N,P){P===void 0&&(P=void 0),Ji();try{return N.apply(P)}finally{aa()}}function Cu(N,P,X){return arguments.length===1||P&&typeof P=="object"?Pc(N,P):Xf(N,P,X||{})}function Xf(N,P,X){var ie;typeof X.timeout=="number"&&(ie=setTimeout(function(){if(!Xe[Y].isDisposed){Xe();var yt=new Error("WHEN_TIMEOUT");if(!X.onError)throw yt;X.onError(yt)}},X.timeout)),X.name=X.name||"When@"+_();var we=Zo(X.name+"-effect",P),Xe=Tc(function(yt){N()&&(yt.dispose(),ie&&clearTimeout(ie),we())},X);return Xe}function Pc(N,P){var X,ie=new Promise(function(we,Xe){var yt=Xf(N,we,ce(ce({},P),{onError:Xe}));X=function(){yt(),Xe("WHEN_CANCELLED")}});return ie.cancel=X,ie}function Du(N){return N[Y]}function Xa(N){return typeof N=="string"||typeof N=="number"||typeof N=="symbol"}var Vi={has:function(N,P){if(P===Y||P==="constructor"||P===fe)return!0;var X=Du(N);return Xa(P)?X.has(P):P in N},get:function(N,P){if(P===Y||P==="constructor"||P===fe)return N[P];var X=Du(N),ie=X.values.get(P);if(ie instanceof z){var we=ie.get();return we===void 0&&X.has(P),we}return Xa(P)&&X.has(P),N[P]},set:function(N,P,X){return!!Xa(P)&&(Bi(N,P,X),!0)},deleteProperty:function(N,P){return!!Xa(P)&&(Du(N).remove(P),!0)},ownKeys:function(N){return Du(N).keysAtom.reportObserved(),Reflect.ownKeys(N)},preventExtensions:function(N){return g("Dynamic observable objects cannot be frozen"),!1}};function us(N){var P=new Proxy(N,Vi);return N[Y].proxy=P,P}function ea(N){return N.interceptors!==void 0&&N.interceptors.length>0}function ba(N,P){var X=N.interceptors||(N.interceptors=[]);return X.push(P),S(function(){var ie=X.indexOf(P);ie!==-1&&X.splice(ie,1)})}function Cr(N,P){var X=Le();try{for(var ie=ge(N.interceptors||[]),we=0,Xe=ie.length;we<Xe&&(b(!(P=ie[we](P))||P.type,"Intercept handlers should return nothing or a change object"),P);we++);return P}finally{lt(X)}}function Gi(N){return N.changeListeners!==void 0&&N.changeListeners.length>0}function Da(N,P){var X=N.changeListeners||(N.changeListeners=[]);return X.push(P),S(function(){var ie=X.indexOf(P);ie!==-1&&X.splice(ie,1)})}function gi(N,P){var X=Le(),ie=N.changeListeners;if(ie){for(var we=0,Xe=(ie=ie.slice()).length;we<Xe;we++)ie[we](P);lt(X)}}var cs={get:function(N,P){return P===Y?N[Y]:P==="length"?N[Y].getArrayLength():typeof P=="number"?po.get.call(N,P):typeof P!="string"||isNaN(P)?po.hasOwnProperty(P)?po[P]:N[P]:po.get.call(N,parseInt(P))},set:function(N,P,X){return P==="length"&&N[Y].setArrayLength(X),typeof P=="number"&&po.set.call(N,P,X),typeof P=="symbol"||isNaN(P)?N[P]=X:po.set.call(N,parseInt(P),X),!0},preventExtensions:function(N){return g("Observable arrays cannot be frozen"),!1}};function Fl(N,P,X,ie){X===void 0&&(X="ObservableArray@"+_()),ie===void 0&&(ie=!1);var we,Xe,yt,zt=new ja(X,P,ie);we=zt.values,Xe=Y,yt=zt,Object.defineProperty(we,Xe,{enumerable:!1,writable:!1,configurable:!0,value:yt});var En=new Proxy(zt.values,cs);if(zt.proxy=En,N&&N.length){var Er=ur(!0);zt.spliceWithArray(0,0,N),to(Er)}return En}var ja=function(){function N(P,X,ie){this.owned=ie,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new z(P||"ObservableArray@"+_()),this.enhancer=function(we,Xe){return X(we,Xe,P+"[..]")}}return N.prototype.dehanceValue=function(P){return this.dehancer!==void 0?this.dehancer(P):P},N.prototype.dehanceValues=function(P){return this.dehancer!==void 0&&P.length>0?P.map(this.dehancer):P},N.prototype.intercept=function(P){return ba(this,P)},N.prototype.observe=function(P,X){return X===void 0&&(X=!1),X&&P({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Da(this,P)},N.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},N.prototype.setArrayLength=function(P){if(typeof P!="number"||P<0)throw new Error("[mobx.array] Out of range: "+P);var X=this.values.length;if(P!==X)if(P>X){for(var ie=new Array(P-X),we=0;we<P-X;we++)ie[we]=void 0;this.spliceWithArray(X,0,ie)}else this.spliceWithArray(P,X-P)},N.prototype.updateArrayLength=function(P,X){if(P!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=X},N.prototype.spliceWithArray=function(P,X,ie){var we=this;Yn(this.atom);var Xe=this.values.length;if(P===void 0?P=0:P>Xe?P=Xe:P<0&&(P=Math.max(0,Xe+P)),X=arguments.length===1?Xe-P:X==null?0:Math.max(0,Math.min(X,Xe-P)),ie===void 0&&(ie=p),ea(this)){var yt=Cr(this,{object:this.proxy,type:"splice",index:P,removedCount:X,added:ie});if(!yt)return p;X=yt.removedCount,ie=yt.added}ie=ie.length===0?ie:ie.map(function(En){return we.enhancer(En,void 0)});var zt=this.spliceItemsIntoValues(P,X,ie);return X===0&&ie.length===0||this.notifyArraySplice(P,ie,zt),this.dehanceValues(zt)},N.prototype.spliceItemsIntoValues=function(P,X,ie){var we;if(ie.length<1e4)return(we=this.values).splice.apply(we,ge([P,X],ie));var Xe=this.values.slice(P,P+X);return this.values=this.values.slice(0,P).concat(ie,this.values.slice(P+X)),Xe},N.prototype.notifyArrayChildUpdate=function(P,X,ie){var we=!this.owned&&!1,Xe=Gi(this),yt=Xe||we?{object:this.proxy,type:"update",index:P,newValue:X,oldValue:ie}:null;this.atom.reportChanged(),Xe&&gi(this,yt)},N.prototype.notifyArraySplice=function(P,X,ie){var we=!this.owned&&!1,Xe=Gi(this),yt=Xe||we?{object:this.proxy,type:"splice",index:P,removed:ie,added:X,removedCount:ie.length,addedCount:X.length}:null;this.atom.reportChanged(),Xe&&gi(this,yt)},N}(),po={intercept:function(N){return this[Y].intercept(N)},observe:function(N,P){return P===void 0&&(P=!1),this[Y].observe(N,P)},clear:function(){return this.splice(0)},replace:function(N){var P=this[Y];return P.spliceWithArray(0,P.values.length,N)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(N,P){for(var X=[],ie=2;ie<arguments.length;ie++)X[ie-2]=arguments[ie];var we=this[Y];switch(arguments.length){case 0:return[];case 1:return we.spliceWithArray(N);case 2:return we.spliceWithArray(N,P)}return we.spliceWithArray(N,P,X)},spliceWithArray:function(N,P,X){return this[Y].spliceWithArray(N,P,X)},push:function(){for(var N=[],P=0;P<arguments.length;P++)N[P]=arguments[P];var X=this[Y];return X.spliceWithArray(X.values.length,0,N),X.values.length},pop:function(){return this.splice(Math.max(this[Y].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var N=[],P=0;P<arguments.length;P++)N[P]=arguments[P];var X=this[Y];return X.spliceWithArray(0,0,N),X.values.length},reverse:function(){var N=this.slice();return N.reverse.apply(N,arguments)},sort:function(N){var P=this.slice();return P.sort.apply(P,arguments)},remove:function(N){var P=this[Y],X=P.dehanceValues(P.values).indexOf(N);return X>-1&&(this.splice(X,1),!0)},get:function(N){var P=this[Y];if(P&&N<P.values.length)return P.atom.reportObserved(),P.dehanceValue(P.values[N])},set:function(N,P){var X=this[Y],ie=X.values;if(N<ie.length){Yn(X.atom);var we=ie[N];if(ea(X)){var Xe=Cr(X,{type:"update",object:X.proxy,index:N,newValue:P});if(!Xe)return;P=Xe.newValue}(P=X.enhancer(P,we))!==we&&(ie[N]=P,X.notifyArrayChildUpdate(N,P,we))}else{if(N!==ie.length)throw new Error("[mobx.array] Index out of bounds, "+N+" is larger than "+ie.length);X.spliceWithArray(N,0,[P])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(N){typeof Array.prototype[N]=="function"&&(po[N]=function(){var P=this[Y];P.atom.reportObserved();var X=P.dehanceValues(P.values);return X[N].apply(X,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(N){typeof Array.prototype[N]=="function"&&(po[N]=function(P,X){var ie=this,we=this[Y];return we.atom.reportObserved(),we.dehanceValues(we.values)[N](function(Xe,yt){return P.call(X,Xe,yt,ie)},X)})}),["reduce","reduceRight"].forEach(function(N){po[N]=function(){var P=this,X=this[Y];X.atom.reportObserved();var ie=arguments[0];return arguments[0]=function(we,Xe,yt){return Xe=X.dehanceValue(Xe),ie(we,Xe,yt,P)},X.values[N].apply(X.values,arguments)}});var Us,qa=C("ObservableArrayAdministration",ja);function wa(N){return A(N)&&qa(N[Y])}var Rc,ep={},Cc=function(){function N(P,X,ie){if(X===void 0&&(X=Bt),ie===void 0&&(ie="ObservableMap@"+_()),this.enhancer=X,this.name=ie,this[Us]=ep,this._keysAtom=B(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(P)}return N.prototype._has=function(P){return this._data.has(P)},N.prototype.has=function(P){var X=this;if(!Cn.trackingDerivation)return this._has(P);var ie=this._hasMap.get(P);if(!ie){var we=ie=new Lr(this._has(P),Nn,this.name+"."+V(P)+"?",!1);this._hasMap.set(P,we),Xr(we,function(){return X._hasMap.delete(P)})}return ie.get()},N.prototype.set=function(P,X){var ie=this._has(P);if(ea(this)){var we=Cr(this,{type:ie?"update":"add",object:this,newValue:X,name:P});if(!we)return this;X=we.newValue}return ie?this._updateValue(P,X):this._addValue(P,X),this},N.prototype.delete=function(P){var X=this;if(Yn(this._keysAtom),ea(this)&&!(we=Cr(this,{type:"delete",object:this,name:P})))return!1;if(this._has(P)){var ie=Gi(this),we=ie?{type:"delete",object:this,oldValue:this._data.get(P).value,name:P}:null;return fi(function(){X._keysAtom.reportChanged(),X._updateHasMapEntry(P,!1),X._data.get(P).setNewValue(void 0),X._data.delete(P)}),ie&&gi(this,we),!0}return!1},N.prototype._updateHasMapEntry=function(P,X){var ie=this._hasMap.get(P);ie&&ie.setNewValue(X)},N.prototype._updateValue=function(P,X){var ie=this._data.get(P);if((X=ie.prepareNewValue(X))!==Cn.UNCHANGED){var we=Gi(this),Xe=we?{type:"update",object:this,oldValue:ie.value,name:P,newValue:X}:null;ie.setNewValue(X),we&&gi(this,Xe)}},N.prototype._addValue=function(P,X){var ie=this;Yn(this._keysAtom),fi(function(){var yt=new Lr(X,ie.enhancer,ie.name+"."+V(P),!1);ie._data.set(P,yt),X=yt.value,ie._updateHasMapEntry(P,!0),ie._keysAtom.reportChanged()});var we=Gi(this),Xe=we?{type:"add",object:this,name:P,newValue:X}:null;we&&gi(this,Xe)},N.prototype.get=function(P){return this.has(P)?this.dehanceValue(this._data.get(P).get()):this.dehanceValue(void 0)},N.prototype.dehanceValue=function(P){return this.dehancer!==void 0?this.dehancer(P):P},N.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},N.prototype.values=function(){var P=this,X=this.keys();return Dr({next:function(){var ie=X.next(),we=ie.done,Xe=ie.value;return{done:we,value:we?void 0:P.get(Xe)}}})},N.prototype.entries=function(){var P=this,X=this.keys();return Dr({next:function(){var ie=X.next(),we=ie.done,Xe=ie.value;return{done:we,value:we?void 0:[Xe,P.get(Xe)]}}})},N.prototype[Us=Y,Symbol.iterator]=function(){return this.entries()},N.prototype.forEach=function(P,X){var ie,we;try{for(var Xe=re(this),yt=Xe.next();!yt.done;yt=Xe.next()){var zt=Pe(yt.value,2),En=zt[0],Er=zt[1];P.call(X,Er,En,this)}}catch(dn){ie={error:dn}}finally{try{yt&&!yt.done&&(we=Xe.return)&&we.call(Xe)}finally{if(ie)throw ie.error}}},N.prototype.merge=function(P){var X=this;return Jo(P)&&(P=P.toJS()),fi(function(){var ie=ur(!0);try{O(P)?L(P).forEach(function(we){return X.set(we,P[we])}):Array.isArray(P)?P.forEach(function(we){var Xe=Pe(we,2),yt=Xe[0],zt=Xe[1];return X.set(yt,zt)}):j(P)?(P.constructor!==Map&&g("Cannot initialize from classes that inherit from Map: "+P.constructor.name),P.forEach(function(we,Xe){return X.set(Xe,we)})):P!=null&&g("Cannot initialize map from "+P)}finally{to(ie)}}),this},N.prototype.clear=function(){var P=this;fi(function(){Ze(function(){var X,ie;try{for(var we=re(P.keys()),Xe=we.next();!Xe.done;Xe=we.next()){var yt=Xe.value;P.delete(yt)}}catch(zt){X={error:zt}}finally{try{Xe&&!Xe.done&&(ie=we.return)&&ie.call(we)}finally{if(X)throw X.error}}})})},N.prototype.replace=function(P){var X=this;return fi(function(){var ie,we,Xe,yt,zt=function(oi){if(j(oi)||Jo(oi))return oi;if(Array.isArray(oi))return new Map(oi);if(O(oi)){var Ul=new Map;for(var El in oi)Ul.set(El,oi[El]);return Ul}return g("Cannot convert to map from '"+oi+"'")}(P),En=new Map,Er=!1;try{for(var dn=re(X._data.keys()),qr=dn.next();!qr.done;qr=dn.next()){var _r=qr.value;if(!zt.has(_r))if(X.delete(_r))Er=!0;else{var Fr=X._data.get(_r);En.set(_r,Fr)}}}catch(oi){ie={error:oi}}finally{try{qr&&!qr.done&&(we=dn.return)&&we.call(dn)}finally{if(ie)throw ie.error}}try{for(var ua=re(zt.entries()),Mo=ua.next();!Mo.done;Mo=ua.next()){var na=Pe(Mo.value,2),bl=(_r=na[0],Fr=na[1],X._data.has(_r));if(X.set(_r,Fr),X._data.has(_r)){var wl=X._data.get(_r);En.set(_r,wl),bl||(Er=!0)}}}catch(oi){Xe={error:oi}}finally{try{Mo&&!Mo.done&&(yt=ua.return)&&yt.call(ua)}finally{if(Xe)throw Xe.error}}if(!Er)if(X._data.size!==En.size)X._keysAtom.reportChanged();else for(var Bl=X._data.keys(),fs=En.keys(),Ka=Bl.next(),ds=fs.next();!Ka.done;){if(Ka.value!==ds.value){X._keysAtom.reportChanged();break}Ka=Bl.next(),ds=fs.next()}X._data=En}),this},Object.defineProperty(N.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),N.prototype.toPOJO=function(){var P,X,ie={};try{for(var we=re(this),Xe=we.next();!Xe.done;Xe=we.next()){var yt=Pe(Xe.value,2),zt=yt[0],En=yt[1];ie[typeof zt=="symbol"?zt:V(zt)]=En}}catch(Er){P={error:Er}}finally{try{Xe&&!Xe.done&&(X=we.return)&&X.call(we)}finally{if(P)throw P.error}}return ie},N.prototype.toJS=function(){return new Map(this)},N.prototype.toJSON=function(){return this.toPOJO()},N.prototype.toString=function(){var P=this;return this.name+"[{ "+Array.from(this.keys()).map(function(X){return V(X)+": "+P.get(X)}).join(", ")+" }]"},N.prototype.observe=function(P,X){return Da(this,P)},N.prototype.intercept=function(P){return ba(this,P)},N}(),Jo=C("ObservableMap",Cc),Vs={},Ya=function(){function N(P,X,ie){if(X===void 0&&(X=Bt),ie===void 0&&(ie="ObservableSet@"+_()),this.name=ie,this[Rc]=Vs,this._data=new Set,this._atom=B(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(we,Xe){return X(we,Xe,ie)},P&&this.replace(P)}return N.prototype.dehanceValue=function(P){return this.dehancer!==void 0?this.dehancer(P):P},N.prototype.clear=function(){var P=this;fi(function(){Ze(function(){var X,ie;try{for(var we=re(P._data.values()),Xe=we.next();!Xe.done;Xe=we.next()){var yt=Xe.value;P.delete(yt)}}catch(zt){X={error:zt}}finally{try{Xe&&!Xe.done&&(ie=we.return)&&ie.call(we)}finally{if(X)throw X.error}}})})},N.prototype.forEach=function(P,X){var ie,we;try{for(var Xe=re(this),yt=Xe.next();!yt.done;yt=Xe.next()){var zt=yt.value;P.call(X,zt,zt,this)}}catch(En){ie={error:En}}finally{try{yt&&!yt.done&&(we=Xe.return)&&we.call(Xe)}finally{if(ie)throw ie.error}}},Object.defineProperty(N.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),N.prototype.add=function(P){var X=this;if(Yn(this._atom),ea(this)&&!(we=Cr(this,{type:"add",object:this,newValue:P})))return this;if(!this.has(P)){fi(function(){X._data.add(X.enhancer(P,void 0)),X._atom.reportChanged()});var ie=Gi(this),we=ie?{type:"add",object:this,newValue:P}:null;ie&&gi(this,we)}return this},N.prototype.delete=function(P){var X=this;if(ea(this)&&!(we=Cr(this,{type:"delete",object:this,oldValue:P})))return!1;if(this.has(P)){var ie=Gi(this),we=ie?{type:"delete",object:this,oldValue:P}:null;return fi(function(){X._atom.reportChanged(),X._data.delete(P)}),ie&&gi(this,we),!0}return!1},N.prototype.has=function(P){return this._atom.reportObserved(),this._data.has(this.dehanceValue(P))},N.prototype.entries=function(){var P=0,X=Array.from(this.keys()),ie=Array.from(this.values());return Dr({next:function(){var we=P;return P+=1,we<ie.length?{value:[X[we],ie[we]],done:!1}:{done:!0}}})},N.prototype.keys=function(){return this.values()},N.prototype.values=function(){this._atom.reportObserved();var P=this,X=0,ie=Array.from(this._data.values());return Dr({next:function(){return X<ie.length?{value:P.dehanceValue(ie[X++]),done:!1}:{done:!0}}})},N.prototype.replace=function(P){var X=this;return ri(P)&&(P=P.toJS()),fi(function(){var ie=ur(!0);try{Array.isArray(P)||U(P)?(X.clear(),P.forEach(function(we){return X.add(we)})):P!=null&&g("Cannot initialize set from "+P)}finally{to(ie)}}),this},N.prototype.observe=function(P,X){return Da(this,P)},N.prototype.intercept=function(P){return ba(this,P)},N.prototype.toJS=function(){return new Set(this)},N.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},N.prototype[Rc=Y,Symbol.iterator]=function(){return this.values()},N}(),ri=C("ObservableSet",Ya),Dc=function(){function N(P,X,ie,we){X===void 0&&(X=new Map),this.target=P,this.values=X,this.name=ie,this.defaultEnhancer=we,this.keysAtom=new z(ie+".keys")}return N.prototype.read=function(P){return this.values.get(P).get()},N.prototype.write=function(P,X){var ie=this.target,we=this.values.get(P);if(we instanceof Ha)we.set(X);else{if(ea(this)){if(!(yt=Cr(this,{type:"update",object:this.proxy||ie,name:P,newValue:X})))return;X=yt.newValue}if((X=we.prepareNewValue(X))!==Cn.UNCHANGED){var Xe=Gi(this),yt=Xe?{type:"update",object:this.proxy||ie,oldValue:we.value,name:P,newValue:X}:null;we.setNewValue(X),Xe&&gi(this,yt)}}},N.prototype.has=function(P){var X=this.pendingKeys||(this.pendingKeys=new Map),ie=X.get(P);if(ie)return ie.get();var we=!!this.values.get(P);return ie=new Lr(we,Nn,this.name+"."+V(P)+"?",!1),X.set(P,ie),ie.get()},N.prototype.addObservableProp=function(P,X,ie){ie===void 0&&(ie=this.defaultEnhancer);var we=this.target;if(ea(this)){var Xe=Cr(this,{object:this.proxy||we,name:P,type:"add",newValue:X});if(!Xe)return;X=Xe.newValue}var yt=new Lr(X,ie,this.name+"."+V(P),!1);this.values.set(P,yt),X=yt.value,Object.defineProperty(we,P,function(zt){return Ea[zt]||(Ea[zt]={configurable:!0,enumerable:!0,get:function(){return this[Y].read(zt)},set:function(En){this[Y].write(zt,En)}})}(P)),this.notifyPropertyAddition(P,X)},N.prototype.addComputedProp=function(P,X,ie){var we,Xe,yt,zt=this.target;ie.name=ie.name||this.name+"."+V(X),this.values.set(X,new Ha(ie)),(P===zt||(we=P,Xe=X,!(yt=Object.getOwnPropertyDescriptor(we,Xe))||yt.configurable!==!1&&yt.writable!==!1))&&Object.defineProperty(P,X,function(En){return ju[En]||(ju[En]={configurable:Cn.computedConfigurable,enumerable:!1,get:function(){return zi(this).read(En)},set:function(Er){zi(this).write(En,Er)}})}(X))},N.prototype.remove=function(P){if(this.values.has(P)){var X=this.target;if(ea(this)&&!(En=Cr(this,{object:this.proxy||X,name:P,type:"remove"})))return;try{Ji();var ie=Gi(this),we=!1,Xe=this.values.get(P),yt=Xe&&Xe.get();if(Xe&&Xe.set(void 0),this.keysAtom.reportChanged(),this.values.delete(P),this.pendingKeys){var zt=this.pendingKeys.get(P);zt&&zt.set(!1)}delete this.target[P];var En=ie?{type:"remove",object:this.proxy||X,oldValue:yt,name:P}:null;ie&&gi(this,En)}finally{aa()}}},N.prototype.illegalAccess=function(P,X){},N.prototype.observe=function(P,X){return Da(this,P)},N.prototype.intercept=function(P){return ba(this,P)},N.prototype.notifyPropertyAddition=function(P,X){var ie=Gi(this),we=ie?{type:"add",object:this.proxy||this.target,name:P,newValue:X}:null;if(ie&&gi(this,we),this.pendingKeys){var Xe=this.pendingKeys.get(P);Xe&&Xe.set(!0)}this.keysAtom.reportChanged()},N.prototype.getKeys=function(){var P,X;this.keysAtom.reportObserved();var ie=[];try{for(var we=re(this.values),Xe=we.next();!Xe.done;Xe=we.next()){var yt=Pe(Xe.value,2),zt=yt[0];yt[1]instanceof Lr&&ie.push(zt)}}catch(En){P={error:En}}finally{try{Xe&&!Xe.done&&(X=we.return)&&X.call(we)}finally{if(P)throw P.error}}return ie},N}();function la(N,P,X){if(P===void 0&&(P=""),X===void 0&&(X=Bt),Object.prototype.hasOwnProperty.call(N,Y))return N[Y];O(N)||(P=(N.constructor.name||"ObservableObject")+"@"+_()),P||(P="ObservableObject@"+_());var ie=new Dc(N,new Map,V(P),X);return E(N,Y,ie),ie}var Ea=Object.create(null),ju=Object.create(null);function zi(N){var P=N[Y];return P||(Je(N),N[Y])}var ta=C("ObservableObjectAdministration",Dc);function di(N){return!!A(N)&&(Je(N),ta(N[Y]))}function sa(N,P){if(typeof N=="object"&&N!==null){if(wa(N))return P!==void 0&&g(!1),N[Y].atom;if(ri(N))return N[Y];if(Jo(N)){var X=N;return P===void 0?X._keysAtom:((ie=X._data.get(P)||X._hasMap.get(P))||g(!1),ie)}var ie;if(Je(N),P&&!N[Y]&&N[P],di(N))return P?((ie=N[Y].values.get(P))||g(!1),ie):g(!1);if(W(N)||gl(N)||Bs(N))return N}else if(typeof N=="function"&&Bs(N[Y]))return N[Y];return g(!1)}function Ii(N,P){return N||g("Expecting some object"),P!==void 0?Ii(sa(N,P)):W(N)||gl(N)||Bs(N)||Jo(N)||ri(N)?N:(Je(N),N[Y]?N[Y]:void g(!1))}var ct=Object.prototype.toString;function It(N,P,X){return X===void 0&&(X=-1),Lt(N,P,X)}function Lt(N,P,X,ie,we){if(N===P)return N!==0||1/N==1/P;if(N==null||P==null)return!1;if(N!=N)return P!=P;var Xe=typeof N;if(Xe!=="function"&&Xe!=="object"&&typeof P!="object")return!1;var yt=ct.call(N);if(yt!==ct.call(P))return!1;switch(yt){case"[object RegExp]":case"[object String]":return""+N==""+P;case"[object Number]":return+N!=+N?+P!=+P:+N==0?1/+N==1/P:+N==+P;case"[object Date]":case"[object Boolean]":return+N==+P;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(N)===Symbol.valueOf.call(P);case"[object Map]":case"[object Set]":X>=0&&X++}N=vn(N),P=vn(P);var zt=yt==="[object Array]";if(!zt){if(typeof N!="object"||typeof P!="object")return!1;var En=N.constructor,Er=P.constructor;if(En!==Er&&!(typeof En=="function"&&En instanceof En&&typeof Er=="function"&&Er instanceof Er)&&"constructor"in N&&"constructor"in P)return!1}if(X===0)return!1;X<0&&(X=-1),we=we||[];for(var dn=(ie=ie||[]).length;dn--;)if(ie[dn]===N)return we[dn]===P;if(ie.push(N),we.push(P),zt){if((dn=N.length)!==P.length)return!1;for(;dn--;)if(!Lt(N[dn],P[dn],X-1,ie,we))return!1}else{var qr=Object.keys(N),_r=void 0;if(dn=qr.length,Object.keys(P).length!==dn)return!1;for(;dn--;)if(!pr(P,_r=qr[dn])||!Lt(N[_r],P[_r],X-1,ie,we))return!1}return ie.pop(),we.pop(),!0}function vn(N){return wa(N)?N.slice():j(N)||Jo(N)||U(N)||ri(N)?Array.from(N.entries()):N}function pr(N,P){return Object.prototype.hasOwnProperty.call(N,P)}function Dr(N){return N[Symbol.iterator]=ho,N}function ho(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Sc,extras:{getDebugName:function(N,P){return(P!==void 0?sa(N,P):di(N)||Jo(N)||ri(N)?Ii(N):sa(N)).name}},$mobx:Y})}).call(this,r(163),r(68))},function(n,a,r){var s=r(113),c=r(42),p=r(179);s||c(Object.prototype,"toString",p,{unsafe:!0})},function(n,a,r){var s=r(41),c=r(100),p=r(80),d=r(58),_=r(116),g="Array Iterator",b=d.set,S=d.getterFor(g);n.exports=_(Array,"Array",function(T,A){b(this,{type:g,target:s(T),index:0,kind:A})},function(){var T=S(this),A=T.target,O=T.kind,E=T.index++;return!A||E>=A.length?(T.target=void 0,{value:void 0,done:!0}):O=="keys"?{value:E,done:!1}:O=="values"?{value:A[E],done:!1}:{value:[E,A[E]],done:!1}},"values"),p.Arguments=p.Array,c("keys"),c("values"),c("entries")},function(n,a,r){var s=r(16),c=r(7),p=r(46),d=r(76),_=r(34),g=r(15),b=r(71),S=r(36),T=r(108),A=r(18),O=r(35),E=r(96),C=r(30),j=r(33),U=r(54),L=r(87),V=r(32),$=r(40),H=r(41),Y=r(86),z=r(39),W=r(69),B=r(60),q=r(77),J=r(74),ce=r(139),re=r(112),Pe=r(50),ge=r(38),fe=r(84),Ee=r(98),Ne=r(42),rt=r(89),mt=r(93),Je=r(72),Xt=r(90),en=r(28),Bt=r(140),Nn=r(141),Ue=r(78),Ae=r(58),$e=r(79).forEach,vt=mt("hidden"),Ut="Symbol",Et=en("toPrimitive"),rn=Ae.set,Kt=Ae.getterFor(Ut),Pn=Object.prototype,yn=c.Symbol,dt=yn&&yn.prototype,An=c.TypeError,Ve=c.QObject,bn=p("JSON","stringify"),lr=Pe.f,le=ge.f,sr=ce.f,Ir=fe.f,io=g([].push),wo=rt("symbols"),Yn=rt("op-symbols"),Go=rt("string-to-symbol-registry"),Me=rt("symbol-to-string-registry"),Ze=rt("wks"),Le=!Ve||!Ve.prototype||!Ve.prototype.findChild,lt=S&&A(function(){return B(le({},"a",{get:function(){return le(this,"a",{value:7}).a}})).a!=7})?function(Tn,Un,Kn){var ur=lr(Pn,Un);ur&&delete Pn[Un],le(Tn,Un,Kn),ur&&Tn!==Pn&&le(Pn,Un,ur)}:le,on=function(Tn,Un){var Kn=wo[Tn]=B(dt);return rn(Kn,{type:Ut,tag:Tn,description:Un}),S||(Kn.description=Un),Kn},Jt=function(Tn,Un,Kn){Tn===Pn&&Jt(Yn,Un,Kn),V(Tn);var ur=Y(Un);return V(Kn),O(wo,ur)?(Kn.enumerable?(O(Tn,vt)&&Tn[vt][ur]&&(Tn[vt][ur]=!1),Kn=B(Kn,{enumerable:W(0,!1)})):(O(Tn,vt)||le(Tn,vt,W(1,{})),Tn[vt][ur]=!0),lt(Tn,ur,Kn)):le(Tn,ur,Kn)},Dn=function(Tn,Un){V(Tn);var Kn=H(Un),ur=q(Kn).concat(Zo(Kn));return $e(ur,function(to){S&&!_(Sr,Kn,to)||Jt(Tn,to,Kn[to])}),Tn},Sr=function(Tn){var Un=Y(Tn),Kn=_(Ir,this,Un);return!(this===Pn&&O(wo,Un)&&!O(Yn,Un))&&(!(Kn||!O(this,Un)||!O(wo,Un)||O(this,vt)&&this[vt][Un])||Kn)},ui=function(Tn,Un){var Kn=H(Tn),ur=Y(Un);if(Kn!==Pn||!O(wo,ur)||O(Yn,ur)){var to=lr(Kn,ur);return!to||!O(wo,ur)||O(Kn,vt)&&Kn[vt][ur]||(to.enumerable=!0),to}},Si=function(Tn){var Un=sr(H(Tn)),Kn=[];return $e(Un,function(ur){O(wo,ur)||O(Je,ur)||io(Kn,ur)}),Kn},Zo=function(Tn){var Un=Tn===Pn,Kn=sr(Un?Yn:H(Tn)),ur=[];return $e(Kn,function(to){!O(wo,to)||Un&&!O(Pn,to)||io(ur,wo[to])}),ur};if(T||(yn=function(){if(U(dt,this))throw An("Symbol is not a constructor");var Tn=arguments.length&&arguments[0]!==void 0?z(arguments[0]):void 0,Un=Xt(Tn),Kn=function(ur){this===Pn&&_(Kn,Yn,ur),O(this,vt)&&O(this[vt],Un)&&(this[vt][Un]=!1),lt(this,Un,W(1,ur))};return S&&Le&&lt(Pn,Un,{configurable:!0,set:Kn}),on(Un,Tn)},Ne(dt=yn.prototype,"toString",function(){return Kt(this).tag}),Ne(yn,"withoutSetter",function(Tn){return on(Xt(Tn),Tn)}),fe.f=Sr,ge.f=Jt,Pe.f=ui,J.f=ce.f=Si,re.f=Zo,Bt.f=function(Tn){return on(en(Tn),Tn)},S&&(le(dt,"description",{configurable:!0,get:function(){return Kt(this).description}}),b||Ne(Pn,"propertyIsEnumerable",Sr,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!T,sham:!T},{Symbol:yn}),$e(q(Ze),function(Tn){Nn(Tn)}),s({target:Ut,stat:!0,forced:!T},{for:function(Tn){var Un=z(Tn);if(O(Go,Un))return Go[Un];var Kn=yn(Un);return Go[Un]=Kn,Me[Kn]=Un,Kn},keyFor:function(Tn){if(!L(Tn))throw An(Tn+" is not a symbol");if(O(Me,Tn))return Me[Tn]},useSetter:function(){Le=!0},useSimple:function(){Le=!1}}),s({target:"Object",stat:!0,forced:!T,sham:!S},{create:function(Tn,Un){return Un===void 0?B(Tn):Dn(B(Tn),Un)},defineProperty:Jt,defineProperties:Dn,getOwnPropertyDescriptor:ui}),s({target:"Object",stat:!0,forced:!T},{getOwnPropertyNames:Si,getOwnPropertySymbols:Zo}),s({target:"Object",stat:!0,forced:A(function(){re.f(1)})},{getOwnPropertySymbols:function(Tn){return re.f($(Tn))}}),bn&&s({target:"JSON",stat:!0,forced:!T||A(function(){var Tn=yn();return bn([Tn])!="[null]"||bn({a:Tn})!="{}"||bn(Object(Tn))!="{}"})},{stringify:function(Tn,Un,Kn){var ur=Ee(arguments),to=Un;if((j(Un)||Tn!==void 0)&&!L(Tn))return E(Un)||(Un=function(Lr,yl){if(C(to)&&(yl=_(to,this,Lr,yl)),!L(yl))return yl}),ur[1]=Un,d(bn,null,ur)}}),!dt[Et]){var ni=dt.valueOf;Ne(dt,Et,function(Tn){return _(ni,this)})}Ue(yn,Ut),Je[vt]=!0},function(n,a,r){var s=r(7),c=r(152),p=r(153),d=r(3),_=r(57),g=r(28),b=g("iterator"),S=g("toStringTag"),T=d.values,A=function(E,C){if(E){if(E[b]!==T)try{_(E,b,T)}catch{E[b]=T}if(E[S]||_(E,S,C),c[C]){for(var j in d)if(E[j]!==d[j])try{_(E,j,d[j])}catch{E[j]=d[j]}}}};for(var O in c)A(s[O]&&s[O].prototype,O);A(p,"DOMTokenList")},function(n,a,r){var s=r(151).charAt,c=r(39),p=r(58),d=r(116),_="String Iterator",g=p.set,b=p.getterFor(_);d(String,"String",function(S){g(this,{type:_,string:c(S),index:0})},function(){var S,T=b(this),A=T.string,O=T.index;return O>=A.length?{value:void 0,done:!0}:(S=s(A,O),T.index+=S.length,{value:S,done:!1})})},function(n,a,r){(function(s){var c=function(p){return p&&p.Math==Math&&p};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,a,r){var s=r(16),c=r(36),p=r(7),d=r(15),_=r(35),g=r(30),b=r(54),S=r(39),T=r(38).f,A=r(134),O=p.Symbol,E=O&&O.prototype;if(c&&g(O)&&(!("description"in E)||O().description!==void 0)){var C={},j=function(){var z=arguments.length<1||arguments[0]===void 0?void 0:S(arguments[0]),W=b(E,this)?new O(z):z===void 0?O():O(z);return z===""&&(C[W]=!0),W};A(j,O),j.prototype=E,E.constructor=j;var U=String(O("test"))=="Symbol(test)",L=d(E.toString),V=d(E.valueOf),$=/^Symbol\((.*)\)[^)]+$/,H=d("".replace),Y=d("".slice);T(E,"description",{configurable:!0,get:function(){var z=V(this),W=L(z);if(_(C,z))return"";var B=U?Y(W,7,-1):H(W,$,"$1");return B===""?void 0:B}}),s({global:!0,forced:!0},{Symbol:j})}},function(n,a,r){r(141)("iterator")},function(n,a,r){r.d(a,"a",function(){return d.a}),r.d(a,"c",function(){return d.e}),r.d(a,"h",function(){return $}),r.d(a,"i",function(){return U}),r.d(a,"j",function(){return C}),r.d(a,"b",function(){return Pe}),r.d(a,"e",function(){return Ne}),r.d(a,"f",function(){return ge}),r.d(a,"g",function(){return wo});var s,c,p,d=r(0),_=0,g=[],b=d.i.__b,S=d.i.__r,T=d.i.diffed,A=d.i.__c,O=d.i.unmount;function E(Me,Ze){d.i.__h&&d.i.__h(c,Me,_||Ze),_=0;var Le=c.__H||(c.__H={__:[],__h:[]});return Me>=Le.__.length&&Le.__.push({}),Le.__[Me]}function C(Me){return _=1,j(J,Me)}function j(Me,Ze,Le){var lt=E(s++,2);return lt.t=Me,lt.__c||(lt.__=[Le?Le(Ze):J(void 0,Ze),function(on){var Jt=lt.t(lt.__[0],on);lt.__[0]!==Jt&&(lt.__=[Jt,lt.__[1]],lt.__c.setState({}))}],lt.__c=c),lt.__}function U(Me,Ze){var Le=E(s++,3);!d.i.__s&&q(Le.__H,Ze)&&(Le.__=Me,Le.__H=Ze,c.__H.__h.push(Le))}function L(Me,Ze){var Le=E(s++,4);!d.i.__s&&q(Le.__H,Ze)&&(Le.__=Me,Le.__H=Ze,c.__h.push(Le))}function V(Me,Ze){var Le=E(s++,7);return q(Le.__H,Ze)&&(Le.__=Me(),Le.__H=Ze,Le.__h=Me),Le.__}function $(Me,Ze){return _=8,V(function(){return Me},Ze)}function H(){var Me;for(g.sort(function(Ze,Le){return Ze.__v.__b-Le.__v.__b});Me=g.pop();)if(Me.__P)try{Me.__H.__h.forEach(W),Me.__H.__h.forEach(B),Me.__H.__h=[]}catch(Ze){Me.__H.__h=[],d.i.__e(Ze,Me.__v)}}d.i.__b=function(Me){c=null,b&&b(Me)},d.i.__r=function(Me){S&&S(Me),s=0;var Ze=(c=Me.__c).__H;Ze&&(Ze.__h.forEach(W),Ze.__h.forEach(B),Ze.__h=[])},d.i.diffed=function(Me){T&&T(Me);var Ze=Me.__c;Ze&&Ze.__H&&Ze.__H.__h.length&&(g.push(Ze)!==1&&p===d.i.requestAnimationFrame||((p=d.i.requestAnimationFrame)||z)(H)),c=null},d.i.__c=function(Me,Ze){Ze.some(function(Le){try{Le.__h.forEach(W),Le.__h=Le.__h.filter(function(lt){return!lt.__||B(lt)})}catch(lt){Ze.some(function(on){on.__h&&(on.__h=[])}),Ze=[],d.i.__e(lt,Le.__v)}}),A&&A(Me,Ze)},d.i.unmount=function(Me){O&&O(Me);var Ze,Le=Me.__c;Le&&Le.__H&&(Le.__H.__.forEach(function(lt){try{W(lt)}catch(on){Ze=on}}),Ze&&d.i.__e(Ze,Le.__v))};var Y=typeof requestAnimationFrame=="function";function z(Me){var Ze,Le=function(){clearTimeout(lt),Y&&cancelAnimationFrame(Ze),setTimeout(Me)},lt=setTimeout(Le,100);Y&&(Ze=requestAnimationFrame(Le))}function W(Me){var Ze=c,Le=Me.__c;typeof Le=="function"&&(Me.__c=void 0,Le()),c=Ze}function B(Me){var Ze=c;Me.__c=Me.__(),c=Ze}function q(Me,Ze){return!Me||Me.length!==Ze.length||Ze.some(function(Le,lt){return Le!==Me[lt]})}function J(Me,Ze){return typeof Ze=="function"?Ze(Me):Ze}function ce(Me,Ze){for(var Le in Ze)Me[Le]=Ze[Le];return Me}function re(Me,Ze){for(var Le in Me)if(Le!=="__source"&&!(Le in Ze))return!0;for(var lt in Ze)if(lt!=="__source"&&Me[lt]!==Ze[lt])return!0;return!1}function Pe(Me){this.props=Me}function ge(Me,Ze){function Le(on){var Jt=this.props.ref,Dn=Jt==on.ref;return!Dn&&Jt&&(Jt.call?Jt(null):Jt.current=null),Ze?!Ze(this.props,on)||!Dn:re(this.props,on)}function lt(on){return this.shouldComponentUpdate=Le,Object(d.e)(Me,on)}return lt.displayName="Memo("+(Me.displayName||Me.name)+")",lt.prototype.isReactComponent=!0,lt.__f=!0,lt}(Pe.prototype=new d.a).isPureReactComponent=!0,Pe.prototype.shouldComponentUpdate=function(Me,Ze){return re(this.props,Me)||re(this.state,Ze)};var fe=d.i.__b;d.i.__b=function(Me){Me.type&&Me.type.__f&&Me.ref&&(Me.props.ref=Me.ref,Me.ref=null),fe&&fe(Me)};var Ee=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ne(Me){function Ze(Le,lt){var on=ce({},Le);return delete on.ref,Me(on,!(lt=Le.ref||lt)||typeof lt=="object"&&!("current"in lt)?null:lt)}return Ze.$$typeof=Ee,Ze.render=Ze,Ze.prototype.isReactComponent=Ze.__f=!0,Ze.displayName="ForwardRef("+(Me.displayName||Me.name)+")",Ze}var rt=function(Me,Ze){return Me==null?null:Object(d.k)(Object(d.k)(Me).map(Ze))},mt={map:rt,forEach:rt,count:function(Me){return Me?Object(d.k)(Me).length:0},only:function(Me){var Ze=Object(d.k)(Me);if(Ze.length!==1)throw"Children.only";return Ze[0]},toArray:d.k},Je=d.i.__e;d.i.__e=function(Me,Ze,Le){if(Me.then){for(var lt,on=Ze;on=on.__;)if((lt=on.__c)&&lt.__c)return Ze.__e==null&&(Ze.__e=Le.__e,Ze.__k=Le.__k),lt.__c(Me,Ze)}Je(Me,Ze,Le)};var Xt=d.i.unmount;function en(Me,Ze,Le){return Me&&(Me.__c&&Me.__c.__H&&(Me.__c.__H.__.forEach(function(lt){typeof lt.__c=="function"&&lt.__c()}),Me.__c.__H=null),(Me=ce({},Me)).__c!=null&&(Me.__c.__P===Le&&(Me.__c.__P=Ze),Me.__c=null),Me.__k=Me.__k&&Me.__k.map(function(lt){return en(lt,Ze,Le)})),Me}function Bt(Me,Ze,Le){return Me&&(Me.__v=null,Me.__k=Me.__k&&Me.__k.map(function(lt){return Bt(lt,Ze,Le)}),Me.__c&&Me.__c.__P===Ze&&(Me.__e&&Le.insertBefore(Me.__e,Me.__d),Me.__c.__e=!0,Me.__c.__P=Le)),Me}function Nn(){this.__u=0,this.t=null,this.__b=null}function Ue(Me){var Ze=Me.__.__c;return Ze&&Ze.__e&&Ze.__e(Me)}function Ae(){this.u=null,this.o=null}d.i.unmount=function(Me){var Ze=Me.__c;Ze&&Ze.__R&&Ze.__R(),Ze&&Me.__h===!0&&(Me.type=null),Xt&&Xt(Me)},(Nn.prototype=new d.a).__c=function(Me,Ze){var Le=Ze.__c,lt=this;lt.t==null&&(lt.t=[]),lt.t.push(Le);var on=Ue(lt.__v),Jt=!1,Dn=function(){Jt||(Jt=!0,Le.__R=null,on?on(Sr):Sr())};Le.__R=Dn;var Sr=function(){if(!--lt.__u){if(lt.state.__e){var Si=lt.state.__e;lt.__v.__k[0]=Bt(Si,Si.__c.__P,Si.__c.__O)}var Zo;for(lt.setState({__e:lt.__b=null});Zo=lt.t.pop();)Zo.forceUpdate()}},ui=Ze.__h===!0;lt.__u++||ui||lt.setState({__e:lt.__b=lt.__v.__k[0]}),Me.then(Dn,Dn)},Nn.prototype.componentWillUnmount=function(){this.t=[]},Nn.prototype.render=function(Me,Ze){if(this.__b){if(this.__v.__k){var Le=document.createElement("div"),lt=this.__v.__k[0].__c;this.__v.__k[0]=en(this.__b,Le,lt.__O=lt.__P)}this.__b=null}var on=Ze.__e&&Object(d.e)(d.b,null,Me.fallback);return on&&(on.__h=null),[Object(d.e)(d.b,null,Ze.__e?null:Me.children),on]};var $e=function(Me,Ze,Le){if(++Le[1]===Le[0]&&Me.o.delete(Ze),Me.props.revealOrder&&(Me.props.revealOrder[0]!=="t"||!Me.o.size))for(Le=Me.u;Le;){for(;Le.length>3;)Le.pop()();if(Le[1]<Le[0])break;Me.u=Le=Le[2]}};function vt(Me){return this.getChildContext=function(){return Me.context},Me.children}function Ut(Me){var Ze=this,Le=Me.i;Ze.componentWillUnmount=function(){Object(d.j)(null,Ze.l),Ze.l=null,Ze.i=null},Ze.i&&Ze.i!==Le&&Ze.componentWillUnmount(),Me.__v?(Ze.l||(Ze.i=Le,Ze.l={nodeType:1,parentNode:Le,childNodes:[],appendChild:function(lt){this.childNodes.push(lt),Ze.i.appendChild(lt)},insertBefore:function(lt,on){this.childNodes.push(lt),Ze.i.appendChild(lt)},removeChild:function(lt){this.childNodes.splice(this.childNodes.indexOf(lt)>>>1,1),Ze.i.removeChild(lt)}}),Object(d.j)(Object(d.e)(vt,{context:Ze.context},Me.__v),Ze.l)):Ze.l&&Ze.componentWillUnmount()}(Ae.prototype=new d.a).__e=function(Me){var Ze=this,Le=Ue(Ze.__v),lt=Ze.o.get(Me);return lt[0]++,function(on){var Jt=function(){Ze.props.revealOrder?(lt.push(on),$e(Ze,Me,lt)):on()};Le?Le(Jt):Jt()}},Ae.prototype.render=function(Me){this.u=null,this.o=new Map;var Ze=Object(d.k)(Me.children);Me.revealOrder&&Me.revealOrder[0]==="b"&&Ze.reverse();for(var Le=Ze.length;Le--;)this.o.set(Ze[Le],this.u=[1,0,this.u]);return Me.children},Ae.prototype.componentDidUpdate=Ae.prototype.componentDidMount=function(){var Me=this;this.o.forEach(function(Ze,Le){$e(Me,Le,Ze)})};var Et=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Kt=typeof document<"u",Pn=function(Me){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Me)};d.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Me){Object.defineProperty(d.a.prototype,Me,{configurable:!0,get:function(){return this["UNSAFE_"+Me]},set:function(Ze){Object.defineProperty(this,Me,{configurable:!0,writable:!0,value:Ze})}})});var yn=d.i.event;function dt(){}function An(){return this.cancelBubble}function Ve(){return this.defaultPrevented}d.i.event=function(Me){return yn&&(Me=yn(Me)),Me.persist=dt,Me.isPropagationStopped=An,Me.isDefaultPrevented=Ve,Me.nativeEvent=Me};var bn,lr={configurable:!0,get:function(){return this.class}},le=d.i.vnode;d.i.vnode=function(Me){var Ze=Me.type,Le=Me.props,lt=Le;if(typeof Ze=="string"){var on=Ze.indexOf("-")===-1;for(var Jt in lt={},Le){var Dn=Le[Jt];Kt&&Jt==="children"&&Ze==="noscript"||Jt==="value"&&"defaultValue"in Le&&Dn==null||(Jt==="defaultValue"&&"value"in Le&&Le.value==null?Jt="value":Jt==="download"&&Dn===!0?Dn="":/ondoubleclick/i.test(Jt)?Jt="ondblclick":/^onchange(textarea|input)/i.test(Jt+Ze)&&!Pn(Le.type)?Jt="oninput":/^onfocus$/i.test(Jt)?Jt="onfocusin":/^onblur$/i.test(Jt)?Jt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Jt)?Jt=Jt.toLowerCase():on&&rn.test(Jt)?Jt=Jt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Dn===null&&(Dn=void 0),lt[Jt]=Dn)}Ze=="select"&&lt.multiple&&Array.isArray(lt.value)&&(lt.value=Object(d.k)(Le.children).forEach(function(Sr){Sr.props.selected=lt.value.indexOf(Sr.props.value)!=-1})),Ze=="select"&&lt.defaultValue!=null&&(lt.value=Object(d.k)(Le.children).forEach(function(Sr){Sr.props.selected=lt.multiple?lt.defaultValue.indexOf(Sr.props.value)!=-1:lt.defaultValue==Sr.props.value})),Me.props=lt,Le.class!=Le.className&&(lr.enumerable="className"in Le,Le.className!=null&&(lt.class=Le.className),Object.defineProperty(lt,"className",lr))}Me.$$typeof=Et,le&&le(Me)};var sr=d.i.__r;d.i.__r=function(Me){sr&&sr(Me),bn=Me.__c};var Ir={ReactCurrentDispatcher:{current:{readContext:function(Me){return bn.__n[Me.__c].props.value}}}};function io(Me){return!!Me&&Me.$$typeof===Et}var wo=function(Me,Ze){return Me(Ze)},Yn=d.b,Go={useState:C,useReducer:j,useEffect:U,useLayoutEffect:L,useRef:function(Me){return _=5,V(function(){return{current:Me}},[])},useImperativeHandle:function(Me,Ze,Le){_=6,L(function(){typeof Me=="function"?Me(Ze()):Me&&(Me.current=Ze())},Le==null?Le:Le.concat(Me))},useMemo:V,useCallback:$,useContext:function(Me){var Ze=c.context[Me.__c],Le=E(s++,9);return Le.c=Me,Ze?(Le.__==null&&(Le.__=!0,Ze.sub(c)),Ze.props.value):Me.__},useDebugValue:function(Me,Ze){d.i.useDebugValue&&d.i.useDebugValue(Ze?Ze(Me):Me)},version:"17.0.2",Children:mt,render:function(Me,Ze,Le){return Ze.__k==null&&(Ze.textContent=""),Object(d.j)(Me,Ze),typeof Le=="function"&&Le(),Me?Me.__c:null},hydrate:function(Me,Ze,Le){return Object(d.h)(Me,Ze),typeof Le=="function"&&Le(),Me?Me.__c:null},unmountComponentAtNode:function(Me){return!!Me.__k&&(Object(d.j)(null,Me),!0)},createPortal:function(Me,Ze){return Object(d.e)(Ut,{__v:Me,i:Ze})},createElement:d.e,createContext:d.d,createFactory:function(Me){return d.e.bind(null,Me)},cloneElement:function(Me){return io(Me)?d.c.apply(null,arguments):Me},createRef:d.f,Fragment:d.b,isValidElement:io,findDOMNode:function(Me){return Me&&(Me.base||Me.nodeType===1&&Me)||null},Component:d.a,PureComponent:Pe,memo:ge,forwardRef:Ne,flushSync:function(Me,Ze){return Me(Ze)},unstable_batchedUpdates:wo,StrictMode:Yn,Suspense:Nn,SuspenseList:Ae,lazy:function(Me){var Ze,Le,lt;function on(Jt){if(Ze||(Ze=Me()).then(function(Dn){Le=Dn.default||Dn},function(Dn){lt=Dn}),lt)throw lt;if(!Le)throw Ze;return Object(d.e)(Le,Jt)}return on.displayName="Lazy",on.__f=!0,on},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Ir};a.d=Go},function(n,a,r){var s=r(7),c=r(152),p=r(153),d=r(187),_=r(57),g=function(S){if(S&&S.forEach!==d)try{_(S,"forEach",d)}catch{S.forEach=d}};for(var b in c)c[b]&&g(s[b]&&s[b].prototype);g(p)},function(n,a,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,a,r){var s=r(16),c=r(18),p=r(40),d=r(101),_=r(143);s({target:"Object",stat:!0,forced:c(function(){d(1)}),sham:!_},{getPrototypeOf:function(g){return d(p(g))}})},function(n,a,r){var s=r(16),c=r(46),p=r(76),d=r(203),_=r(165),g=r(32),b=r(33),S=r(60),T=r(18),A=c("Reflect","construct"),O=Object.prototype,E=[].push,C=T(function(){function L(){}return!(A(function(){},[],L)instanceof L)}),j=!T(function(){A(function(){})}),U=C||j;s({target:"Reflect",stat:!0,forced:U,sham:U},{construct:function(L,V){_(L),g(V);var $=arguments.length<3?L:_(arguments[2]);if(j&&!C)return A(L,V,$);if(L==$){switch(V.length){case 0:return new L;case 1:return new L(V[0]);case 2:return new L(V[0],V[1]);case 3:return new L(V[0],V[1],V[2]);case 4:return new L(V[0],V[1],V[2],V[3])}var H=[null];return p(E,H,V),new(p(d,L,H))}var Y=$.prototype,z=S(b(Y)?Y:O),W=p(L,z,V);return b(W)?W:z}})},function(n,a){var r=Function.prototype,s=r.bind,c=r.call,p=s&&s.bind(c);n.exports=s?function(d){return d&&p(c,d)}:function(d){return d&&function(){return c.apply(d,arguments)}}},function(n,a,r){var s=r(7),c=r(50).f,p=r(57),d=r(42),_=r(110),g=r(134),b=r(95);n.exports=function(S,T){var A,O,E,C,j,U=S.target,L=S.global,V=S.stat;if(A=L?s:V?s[U]||_(U,{}):(s[U]||{}).prototype)for(O in T){if(C=T[O],E=S.noTargetGet?(j=c(A,O))&&j.value:A[O],!b(L?O:U+(V?".":"#")+O,S.forced)&&E!==void 0){if(typeof C==typeof E)continue;g(C,E)}(S.sham||E&&E.sham)&&p(C,"sham",!0),d(A,O,C,S)}}},function(n,a,r){var s=r(16),c=r(7),p=r(96),d=r(99),_=r(33),g=r(75),b=r(45),S=r(41),T=r(63),A=r(28),O=r(81),E=r(98),C=O("slice"),j=A("species"),U=c.Array,L=Math.max;s({target:"Array",proto:!0,forced:!C},{slice:function(V,$){var H,Y,z,W=S(this),B=b(W),q=g(V,B),J=g($===void 0?B:$,B);if(p(W)&&(H=W.constructor,(d(H)&&(H===U||p(H.prototype))||_(H)&&(H=H[j])===null)&&(H=void 0),H===U||H===void 0))return E(W,q,J);for(Y=new(H===void 0?U:H)(L(J-q,0)),z=0;q<J;q++,z++)q in W&&T(Y,z,W[q]);return Y.length=z,Y}})},function(n,a){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,a,r){var s=r(16),c=r(103);s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,a,r){var s=r(16),c=r(40),p=r(77);s({target:"Object",stat:!0,forced:r(18)(function(){p(1)})},{keys:function(d){return p(c(d))}})},function(n,a,r){var s=r(36),c=r(73).EXISTS,p=r(15),d=r(38).f,_=Function.prototype,g=p(_.toString),b=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,S=p(b.exec);s&&!c&&d(_,"name",{configurable:!0,get:function(){try{return S(b,g(this))[1]}catch{return""}}})},function(n,a,r){var s=r(16),c=r(18),p=r(41),d=r(50).f,_=r(36),g=c(function(){d(1)});s({target:"Object",stat:!0,forced:!_||g,sham:!_},{getOwnPropertyDescriptor:function(b,S){return d(p(b),S)}})},function(n,a,r){var s=r(16),c=r(188);s({target:"Array",stat:!0,forced:!r(120)(function(p){Array.from(p)})},{from:c})},function(n,a,r){var s=r(16),c=r(79).filter;s({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(p){return c(this,p,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var s=r(16),c=r(36),p=r(135),d=r(41),_=r(50),g=r(63);s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(b){for(var S,T,A=d(b),O=_.f,E=p(A),C={},j=0;E.length>j;)(T=O(A,S=E[j++]))!==void 0&&g(C,S,T);return C}})},,function(n,a,r){var s=r(16),c=r(7),p=r(18),d=r(96),_=r(33),g=r(40),b=r(45),S=r(63),T=r(115),A=r(81),O=r(28),E=r(70),C=O("isConcatSpreadable"),j=9007199254740991,U="Maximum allowed index exceeded",L=c.TypeError,V=E>=51||!p(function(){var Y=[];return Y[C]=!1,Y.concat()[0]!==Y}),$=A("concat"),H=function(Y){if(!_(Y))return!1;var z=Y[C];return z!==void 0?!!z:d(Y)};s({target:"Array",proto:!0,forced:!V||!$},{concat:function(Y){var z,W,B,q,J,ce=g(this),re=T(ce,0),Pe=0;for(z=-1,B=arguments.length;z<B;z++)if(H(J=z===-1?ce:arguments[z])){if(Pe+(q=b(J))>j)throw L(U);for(W=0;W<q;W++,Pe++)W in J&&S(re,Pe,J[W])}else{if(Pe>=j)throw L(U);S(re,Pe++,J)}return re.length=Pe,re}})},function(n,a,r){var s=r(7),c=r(89),p=r(35),d=r(90),_=r(108),g=r(132),b=c("wks"),S=s.Symbol,T=S&&S.for,A=g?S:S&&S.withoutSetter||d;n.exports=function(O){if(!p(b,O)||!_&&typeof b[O]!="string"){var E="Symbol."+O;_&&p(S,O)?b[O]=S[O]:b[O]=g&&T?T(E):A(E)}return b[O]}},function(n,a,r){var s=r(16),c=r(202);s({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,a){n.exports=function(r){return typeof r=="function"}},function(n,a,r){var s=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,p=s.a||c||Function("return this")();a.a=p},function(n,a,r){var s=r(7),c=r(33),p=s.String,d=s.TypeError;n.exports=function(_){if(c(_))return _;throw d(p(_)+" is not an object")}},function(n,a,r){var s=r(30);n.exports=function(c){return typeof c=="object"?c!==null:s(c)}},function(n,a){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,a,r){var s=r(15),c=r(40),p=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(d,_){return p(c(d),_)}},function(n,a,r){var s=r(18);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,a,r){var s=r(16),c=r(79).map;s({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(p){return c(this,p,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var s=r(7),c=r(36),p=r(133),d=r(32),_=r(86),g=s.TypeError,b=Object.defineProperty;a.f=c?b:function(S,T,A){if(d(S),T=_(T),d(A),p)try{return b(S,T,A)}catch{}if("get"in A||"set"in A)throw g("Accessors not supported");return"value"in A&&(S[T]=A.value),S}},function(n,a,r){var s=r(7),c=r(97),p=s.String;n.exports=function(d){if(c(d)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return p(d)}},function(n,a,r){var s=r(7),c=r(44),p=s.Object;n.exports=function(d){return p(c(d))}},function(n,a,r){var s=r(85),c=r(44);n.exports=function(p){return s(c(p))}},function(n,a,r){var s=r(7),c=r(30),p=r(35),d=r(57),_=r(110),g=r(92),b=r(58),S=r(73).CONFIGURABLE,T=b.get,A=b.enforce,O=String(String).split("String");(n.exports=function(E,C,j,U){var L,V=!!U&&!!U.unsafe,$=!!U&&!!U.enumerable,H=!!U&&!!U.noTargetGet,Y=U&&U.name!==void 0?U.name:C;c(j)&&(String(Y).slice(0,7)==="Symbol("&&(Y="["+String(Y).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!p(j,"name")||S&&j.name!==Y)&&d(j,"name",Y),(L=A(j)).source||(L.source=O.join(typeof Y=="string"?Y:""))),E!==s?(V?!H&&E[C]&&($=!0):delete E[C],$?E[C]=j:d(E,C,j)):$?E[C]=j:_(C,j)})(Function.prototype,"toString",function(){return c(this)&&T(this).source||g(this)})},function(n,a,r){(function(s){r.d(a,"d",function(){return d}),r.d(a,"c",function(){return _}),r.d(a,"b",function(){return g}),r.d(a,"a",function(){return S});var c=r(10),p=function(T,A){var O=typeof Symbol=="function"&&T[Symbol.iterator];if(!O)return T;var E,C,j=O.call(T),U=[];try{for(;(A===void 0||A-- >0)&&!(E=j.next()).done;)U.push(E.value)}catch(L){C={error:L}}finally{try{E&&!E.done&&(O=j.return)&&O.call(j)}finally{if(C)throw C.error}}return U};function d(){var T=p(Object(c.j)(0),2)[1];return Object(c.h)(function(){T(function(A){return A+1})},[])}function _(T){if(!T||typeof T!="object")return!1;var A=Object.getPrototypeOf(T);return!A||A===Object.prototype}function g(T){return typeof Symbol=="function"?Symbol.for(T):"__$mobx-react "+T+"__"}var b={};function S(){return typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:b}}).call(this,r(68))},function(n,a,r){var s=r(7).TypeError;n.exports=function(c){if(c==null)throw s("Can't call method on "+c);return c}},function(n,a,r){var s=r(94);n.exports=function(c){return s(c.length)}},function(n,a,r){var s=r(7),c=r(30),p=function(d){return c(d)?d:void 0};n.exports=function(d,_){return arguments.length<2?p(s[d]):s[d]&&s[d][_]}},function(n,a,r){var s=r(16),c=r(34),p=r(33),d=r(32),_=r(204),g=r(50),b=r(101);s({target:"Reflect",stat:!0},{get:function S(T,A){var O,E,C=arguments.length<3?T:arguments[2];return d(T)===C?T[A]:(O=g.f(T,A))?_(O)?O.value:O.get===void 0?void 0:c(O.get,C):p(E=b(T))?S(E,A,C):void 0}})},function(n,a,r){(function(s){var c=r(31),p=r(171),d=t&&!t.nodeType&&t,_=d&&typeof s=="object"&&s&&!s.nodeType&&s,g=_&&_.exports===d?c.a.Buffer:void 0,b=(g?g.isBuffer:void 0)||p.a;a.a=b}).call(this,r(122)(n))},function(n,a,r){(function(s){var c=r(106),p=t&&!t.nodeType&&t,d=p&&typeof s=="object"&&s&&!s.nodeType&&s,_=d&&d.exports===p&&c.a.process,g=function(){try{var b=d&&d.require&&d.require("util").types;return b||_&&_.binding&&_.binding("util")}catch{}}();a.a=g}).call(this,r(122)(n))},function(n,a,r){var s=r(36),c=r(34),p=r(84),d=r(69),_=r(41),g=r(86),b=r(35),S=r(133),T=Object.getOwnPropertyDescriptor;a.f=s?T:function(A,O){if(A=_(A),O=g(O),S)try{return T(A,O)}catch{}if(b(A,O))return d(!c(p.f,A,O),A[O])}},function(n,a,r){var s=r(15),c=s({}.toString),p=s("".slice);n.exports=function(d){return p(c(d),8,-1)}},function(n,a,r){r(182)("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,a,r){var s=r(16),c=r(220).entries;s({target:"Object",stat:!0},{entries:function(p){return c(p)}})},function(n,a,r){var s=r(15);n.exports=s({}.isPrototypeOf)},function(n,a,r){var s=r(46);n.exports=s("navigator","userAgent")||""},function(n,a,r){var s=r(7),c=r(30),p=r(88),d=s.TypeError;n.exports=function(_){if(c(_))return _;throw d(p(_)+" is not a function")}},function(n,a,r){var s=r(36),c=r(38),p=r(69);n.exports=s?function(d,_,g){return c.f(d,_,p(1,g))}:function(d,_,g){return d[_]=g,d}},function(n,a,r){var s,c,p,d=r(175),_=r(7),g=r(15),b=r(33),S=r(57),T=r(35),A=r(109),O=r(93),E=r(72),C="Object already initialized",j=_.TypeError,U=_.WeakMap;if(d||A.state){var L=A.state||(A.state=new U),V=g(L.get),$=g(L.has),H=g(L.set);s=function(z,W){if($(L,z))throw new j(C);return W.facade=z,H(L,z,W),W},c=function(z){return V(L,z)||{}},p=function(z){return $(L,z)}}else{var Y=O("state");E[Y]=!0,s=function(z,W){if(T(z,Y))throw new j(C);return W.facade=z,S(z,Y,W),W},c=function(z){return T(z,Y)?z[Y]:{}},p=function(z){return T(z,Y)}}n.exports={set:s,get:c,has:p,enforce:function(z){return p(z)?c(z):s(z,{})},getterFor:function(z){return function(W){var B;if(!b(W)||(B=c(W)).type!==z)throw j("Incompatible receiver, "+z+" required");return B}}}},function(n,a){var r=Math.ceil,s=Math.floor;n.exports=function(c){var p=+c;return p!=p||p===0?0:(p>0?s:r)(p)}},function(n,a,r){var s,c=r(32),p=r(176),d=r(111),_=r(72),g=r(138),b=r(91),S=r(93),T=S("IE_PROTO"),A=function(){},O=function(j){return"<script>"+j+"<\/script>"},E=function(j){j.write(O("")),j.close();var U=j.parentWindow.Object;return j=null,U},C=function(){try{s=new ActiveXObject("htmlfile")}catch{}var j,U;C=typeof document<"u"?document.domain&&s?E(s):((U=b("iframe")).style.display="none",g.appendChild(U),U.src="javascript:",(j=U.contentWindow.document).open(),j.write(O("document.F=Object")),j.close(),j.F):E(s);for(var L=d.length;L--;)delete C.prototype[d[L]];return C()};_[T]=!0,n.exports=Object.create||function(j,U){var L;return j!==null?(A.prototype=c(j),L=new A,A.prototype=null,L[T]=j):L=C(),U===void 0?L:p(L,U)}},function(n,a,r){var s=r(36),c=r(7),p=r(15),d=r(95),_=r(42),g=r(35),b=r(148),S=r(54),T=r(87),A=r(131),O=r(18),E=r(74).f,C=r(50).f,j=r(38).f,U=r(160),L=r(161).trim,V="Number",$=c.Number,H=$.prototype,Y=c.TypeError,z=p("".slice),W=p("".charCodeAt),B=function(ge){var fe=A(ge,"number");return typeof fe=="bigint"?fe:q(fe)},q=function(ge){var fe,Ee,Ne,rt,mt,Je,Xt,en,Bt=A(ge,"number");if(T(Bt))throw Y("Cannot convert a Symbol value to a number");if(typeof Bt=="string"&&Bt.length>2){if(Bt=L(Bt),(fe=W(Bt,0))===43||fe===45){if((Ee=W(Bt,2))===88||Ee===120)return NaN}else if(fe===48){switch(W(Bt,1)){case 66:case 98:Ne=2,rt=49;break;case 79:case 111:Ne=8,rt=55;break;default:return+Bt}for(Je=(mt=z(Bt,2)).length,Xt=0;Xt<Je;Xt++)if((en=W(mt,Xt))<48||en>rt)return NaN;return parseInt(mt,Ne)}}return+Bt};if(d(V,!$(" 0o1")||!$("0b1")||$("+0x1"))){for(var J,ce=function(ge){var fe=arguments.length<1?0:$(B(ge)),Ee=this;return S(H,Ee)&&O(function(){U(Ee)})?b(Object(fe),Ee,ce):fe},re=s?E($):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Pe=0;re.length>Pe;Pe++)g($,J=re[Pe])&&!g(ce,J)&&j(ce,J,C($,J));ce.prototype=H,H.constructor=ce,_(c,V,ce)}},function(n,a,r){var s=r(56);n.exports=function(c,p){var d=c[p];return d==null?void 0:s(d)}},function(n,a,r){var s=r(86),c=r(38),p=r(69);n.exports=function(d,_,g){var b=s(_);b in d?c.f(d,b,p(0,g)):d[b]=g}},function(n,a,r){var s=r(15),c=r(56),p=s(s.bind);n.exports=function(d,_){return c(d),_===void 0?d:p?p(d,_):function(){return d.apply(_,arguments)}}},function(n,a,r){var s=r(16),c=r(15),p=r(85),d=r(41),_=r(121),g=c([].join),b=p!=Object,S=_("join",",");s({target:"Array",proto:!0,forced:b||!S},{join:function(T){return g(d(this),T===void 0?",":T)}})},function(n,a,r){var s=r(15),c=r(73).PROPER,p=r(42),d=r(32),_=r(54),g=r(39),b=r(18),S=r(154),T="toString",A=RegExp.prototype,O=A.toString,E=s(S),C=b(function(){return O.call({source:"a",flags:"b"})!="/a/b"}),j=c&&O.name!=T;(C||j)&&p(RegExp.prototype,T,function(){var U=d(this),L=g(U.source),V=U.flags;return"/"+L+"/"+g(V===void 0&&_(A,U)&&!("flags"in A)?E(U):V)},{unsafe:!0})},function(n,a,r){var s=r(16),c=r(217),p=r(100);s({target:"Array",proto:!0},{fill:c}),p("fill")},function(n,a){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,a){n.exports=function(r,s){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:s}}},function(n,a,r){var s,c,p=r(7),d=r(55),_=p.process,g=p.Deno,b=_&&_.versions||g&&g.version,S=b&&b.v8;S&&(c=(s=S.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&d&&(!(s=d.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=d.match(/Chrome\/(\d+)/))&&(c=+s[1]),n.exports=c},function(n,a){n.exports=!1},function(n,a){n.exports={}},function(n,a,r){var s=r(36),c=r(35),p=Function.prototype,d=s&&Object.getOwnPropertyDescriptor,_=c(p,"name"),g=_&&(function(){}).name==="something",b=_&&(!s||s&&d(p,"name").configurable);n.exports={EXISTS:_,PROPER:g,CONFIGURABLE:b}},function(n,a,r){var s=r(136),c=r(111).concat("length","prototype");a.f=Object.getOwnPropertyNames||function(p){return s(p,c)}},function(n,a,r){var s=r(59),c=Math.max,p=Math.min;n.exports=function(d,_){var g=s(d);return g<0?c(g+_,0):p(g,_)}},function(n,a){var r=Function.prototype,s=r.apply,c=r.bind,p=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?p.bind(s):function(){return p.apply(s,arguments)})},function(n,a,r){var s=r(136),c=r(111);n.exports=Object.keys||function(p){return s(p,c)}},function(n,a,r){var s=r(38).f,c=r(35),p=r(28)("toStringTag");n.exports=function(d,_,g){d&&!c(d=g?d:d.prototype,p)&&s(d,p,{configurable:!0,value:_})}},function(n,a,r){var s=r(64),c=r(15),p=r(85),d=r(40),_=r(45),g=r(115),b=c([].push),S=function(T){var A=T==1,O=T==2,E=T==3,C=T==4,j=T==6,U=T==7,L=T==5||j;return function(V,$,H,Y){for(var z,W,B=d(V),q=p(B),J=s($,H),ce=_(q),re=0,Pe=Y||g,ge=A?Pe(V,ce):O||U?Pe(V,0):void 0;ce>re;re++)if((L||re in q)&&(W=J(z=q[re],re,B),T))if(A)ge[re]=W;else if(W)switch(T){case 3:return!0;case 5:return z;case 6:return re;case 2:b(ge,z)}else switch(T){case 4:return!1;case 7:b(ge,z)}return j?-1:E||C?C:ge}};n.exports={forEach:S(0),map:S(1),filter:S(2),some:S(3),every:S(4),find:S(5),findIndex:S(6),filterReject:S(7)}},function(n,a){n.exports={}},function(n,a,r){var s=r(18),c=r(28),p=r(70),d=c("species");n.exports=function(_){return p>=51||!s(function(){var g=[];return(g.constructor={})[d]=function(){return{foo:1}},g[_](Boolean).foo!==1})}},function(n,a,r){var s=r(76),c=r(34),p=r(15),d=r(123),_=r(159),g=r(32),b=r(44),S=r(164),T=r(124),A=r(94),O=r(39),E=r(62),C=r(114),j=r(125),U=r(103),L=r(155),V=r(18),$=L.UNSUPPORTED_Y,H=4294967295,Y=Math.min,z=[].push,W=p(/./.exec),B=p(z),q=p("".slice),J=!V(function(){var ce=/(?:)/,re=ce.exec;ce.exec=function(){return re.apply(this,arguments)};var Pe="ab".split(ce);return Pe.length!==2||Pe[0]!=="a"||Pe[1]!=="b"});d("split",function(ce,re,Pe){var ge;return ge="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(fe,Ee){var Ne=O(b(this)),rt=Ee===void 0?H:Ee>>>0;if(rt===0)return[];if(fe===void 0)return[Ne];if(!_(fe))return c(re,Ne,fe,rt);for(var mt,Je,Xt,en=[],Bt=(fe.ignoreCase?"i":"")+(fe.multiline?"m":"")+(fe.unicode?"u":"")+(fe.sticky?"y":""),Nn=0,Ue=new RegExp(fe.source,Bt+"g");(mt=c(U,Ue,Ne))&&!((Je=Ue.lastIndex)>Nn&&(B(en,q(Ne,Nn,mt.index)),mt.length>1&&mt.index<Ne.length&&s(z,en,C(mt,1)),Xt=mt[0].length,Nn=Je,en.length>=rt));)Ue.lastIndex===mt.index&&Ue.lastIndex++;return Nn===Ne.length?!Xt&&W(Ue,"")||B(en,""):B(en,q(Ne,Nn)),en.length>rt?C(en,0,rt):en}:"0".split(void 0,0).length?function(fe,Ee){return fe===void 0&&Ee===0?[]:c(re,this,fe,Ee)}:re,[function(fe,Ee){var Ne=b(this),rt=fe==null?void 0:E(fe,ce);return rt?c(rt,fe,Ne,Ee):c(ge,O(Ne),fe,Ee)},function(fe,Ee){var Ne=g(this),rt=O(fe),mt=Pe(ge,Ne,rt,Ee,ge!==re);if(mt.done)return mt.value;var Je=S(Ne,RegExp),Xt=Ne.unicode,en=(Ne.ignoreCase?"i":"")+(Ne.multiline?"m":"")+(Ne.unicode?"u":"")+($?"g":"y"),Bt=new Je($?"^(?:"+Ne.source+")":Ne,en),Nn=Ee===void 0?H:Ee>>>0;if(Nn===0)return[];if(rt.length===0)return j(Bt,rt)===null?[rt]:[];for(var Ue=0,Ae=0,$e=[];Ae<rt.length;){Bt.lastIndex=$?0:Ae;var vt,Ut=j(Bt,$?q(rt,Ae):rt);if(Ut===null||(vt=Y(A(Bt.lastIndex+($?Ae:0)),rt.length))===Ue)Ae=T(rt,Ae,Xt);else{if(B($e,q(rt,Ue,Ae)),$e.length===Nn)return $e;for(var Et=1;Et<=Ut.length-1;Et++)if(B($e,Ut[Et]),$e.length===Nn)return $e;Ae=Ue=vt}}return B($e,q(rt,Ue)),$e}]},!J,$)},function(n,a,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,a,r){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,p=c&&!s.call({1:2},1);a.f=p?function(d){var _=c(this,d);return!!_&&_.enumerable}:s},function(n,a,r){var s=r(7),c=r(15),p=r(18),d=r(51),_=s.Object,g=c("".split);n.exports=p(function(){return!_("z").propertyIsEnumerable(0)})?function(b){return d(b)=="String"?g(b,""):_(b)}:_},function(n,a,r){var s=r(131),c=r(87);n.exports=function(p){var d=s(p,"string");return c(d)?d:d+""}},function(n,a,r){var s=r(7),c=r(46),p=r(30),d=r(54),_=r(132),g=s.Object;n.exports=_?function(b){return typeof b=="symbol"}:function(b){var S=c("Symbol");return p(S)&&d(S.prototype,g(b))}},function(n,a,r){var s=r(7).String;n.exports=function(c){try{return s(c)}catch{return"Object"}}},function(n,a,r){var s=r(71),c=r(109);(n.exports=function(p,d){return c[p]||(c[p]=d!==void 0?d:{})})("versions",[]).push({version:"3.19.3",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,a,r){var s=r(15),c=0,p=Math.random(),d=s(1 .toString);n.exports=function(_){return"Symbol("+(_===void 0?"":_)+")_"+d(++c+p,36)}},function(n,a,r){var s=r(7),c=r(33),p=s.document,d=c(p)&&c(p.createElement);n.exports=function(_){return d?p.createElement(_):{}}},function(n,a,r){var s=r(15),c=r(30),p=r(109),d=s(Function.toString);c(p.inspectSource)||(p.inspectSource=function(_){return d(_)}),n.exports=p.inspectSource},function(n,a,r){var s=r(89),c=r(90),p=s("keys");n.exports=function(d){return p[d]||(p[d]=c(d))}},function(n,a,r){var s=r(59),c=Math.min;n.exports=function(p){return p>0?c(s(p),9007199254740991):0}},function(n,a,r){var s=r(18),c=r(30),p=/#|\.prototype\./,d=function(T,A){var O=g[_(T)];return O==S||O!=b&&(c(A)?s(A):!!A)},_=d.normalize=function(T){return String(T).replace(p,".").toLowerCase()},g=d.data={},b=d.NATIVE="N",S=d.POLYFILL="P";n.exports=d},function(n,a,r){var s=r(51);n.exports=Array.isArray||function(c){return s(c)=="Array"}},function(n,a,r){var s=r(7),c=r(113),p=r(30),d=r(51),_=r(28)("toStringTag"),g=s.Object,b=d(function(){return arguments}())=="Arguments";n.exports=c?d:function(S){var T,A,O;return S===void 0?"Undefined":S===null?"Null":typeof(A=function(E,C){try{return E[C]}catch{}}(T=g(S),_))=="string"?A:b?d(T):(O=d(T))=="Object"&&p(T.callee)?"Arguments":O}},function(n,a,r){var s=r(15);n.exports=s([].slice)},function(n,a,r){var s=r(15),c=r(18),p=r(30),d=r(97),_=r(46),g=r(92),b=function(){},S=[],T=_("Reflect","construct"),A=/^\s*(?:class|function)\b/,O=s(A.exec),E=!A.exec(b),C=function(j){if(!p(j))return!1;try{return T(b,S,j),!0}catch{return!1}};n.exports=!T||c(function(){var j;return C(C.call)||!C(Object)||!C(function(){j=!0})||j})?function(j){if(!p(j))return!1;switch(d(j)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return E||!!O(A,g(j))}:C},function(n,a,r){var s=r(28),c=r(60),p=r(38),d=s("unscopables"),_=Array.prototype;_[d]==null&&p.f(_,d,{configurable:!0,value:c(null)}),n.exports=function(g){_[d][g]=!0}},function(n,a,r){var s=r(7),c=r(35),p=r(30),d=r(40),_=r(93),g=r(143),b=_("IE_PROTO"),S=s.Object,T=S.prototype;n.exports=g?S.getPrototypeOf:function(A){var O=d(A);if(c(O,b))return O[b];var E=O.constructor;return p(E)&&O instanceof E?E.prototype:O instanceof S?T:null}},function(n,a,r){var s=r(15),c=r(32),p=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d,_=!1,g={};try{(d=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(g,[]),_=g instanceof Array}catch{}return function(b,S){return c(b),p(S),_?d(b,S):b.__proto__=S,b}}():void 0)},function(n,a,r){var s,c,p=r(34),d=r(15),_=r(39),g=r(154),b=r(155),S=r(89),T=r(60),A=r(58).get,O=r(190),E=r(191),C=S("native-string-replace",String.prototype.replace),j=RegExp.prototype.exec,U=j,L=d("".charAt),V=d("".indexOf),$=d("".replace),H=d("".slice),Y=(c=/b*/g,p(j,s=/a/,"a"),p(j,c,"a"),s.lastIndex!==0||c.lastIndex!==0),z=b.BROKEN_CARET,W=/()??/.exec("")[1]!==void 0;(Y||W||z||O||E)&&(U=function(B){var q,J,ce,re,Pe,ge,fe,Ee=this,Ne=A(Ee),rt=_(B),mt=Ne.raw;if(mt)return mt.lastIndex=Ee.lastIndex,q=p(U,mt,rt),Ee.lastIndex=mt.lastIndex,q;var Je=Ne.groups,Xt=z&&Ee.sticky,en=p(g,Ee),Bt=Ee.source,Nn=0,Ue=rt;if(Xt&&(en=$(en,"y",""),V(en,"g")===-1&&(en+="g"),Ue=H(rt,Ee.lastIndex),Ee.lastIndex>0&&(!Ee.multiline||Ee.multiline&&L(rt,Ee.lastIndex-1)!==`
`)&&(Bt="(?: "+Bt+")",Ue=" "+Ue,Nn++),J=new RegExp("^(?:"+Bt+")",en)),W&&(J=new RegExp("^"+Bt+"$(?!\\s)",en)),Y&&(ce=Ee.lastIndex),re=p(j,Xt?J:Ee,Ue),Xt?re?(re.input=H(re.input,Nn),re[0]=H(re[0],Nn),re.index=Ee.lastIndex,Ee.lastIndex+=re[0].length):Ee.lastIndex=0:Y&&re&&(Ee.lastIndex=Ee.global?re.index+re[0].length:ce),W&&re&&re.length>1&&p(C,re[0],J,function(){for(Pe=1;Pe<arguments.length-2;Pe++)arguments[Pe]===void 0&&(re[Pe]=void 0)}),re&&Je)for(re.groups=ge=T(null),Pe=0;Pe<Je.length;Pe++)ge[(fe=Je[Pe])[0]]=re[fe[1]];return re}),n.exports=U},function(n,a,r){var s=r(16),c=r(7),p=r(75),d=r(59),_=r(45),g=r(40),b=r(115),S=r(63),T=r(81)("splice"),A=c.TypeError,O=Math.max,E=Math.min,C=9007199254740991,j="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!T},{splice:function(U,L){var V,$,H,Y,z,W,B=g(this),q=_(B),J=p(U,q),ce=arguments.length;if(ce===0?V=$=0:ce===1?(V=0,$=q-J):(V=ce-2,$=E(O(d(L),0),q-J)),q+V-$>C)throw A(j);for(H=b(B,$),Y=0;Y<$;Y++)(z=J+Y)in B&&S(H,Y,B[z]);if(H.length=$,V<$){for(Y=J;Y<q-$;Y++)W=Y+V,(z=Y+$)in B?B[W]=B[z]:delete B[W];for(Y=q;Y>q-$+V;Y--)delete B[Y-1]}else if(V>$)for(Y=q-$;Y>J;Y--)W=Y+V-1,(z=Y+$-1)in B?B[W]=B[z]:delete B[W];for(Y=0;Y<V;Y++)B[Y+J]=arguments[Y+2];return B.length=q-$+V,H}})},function(n,a,r){var s=r(16),c=r(205);s({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(p){return c(this,"a","name",p)}})},function(n,a,r){(function(s){var c=typeof s=="object"&&s&&s.Object===Object&&s;a.a=c}).call(this,r(68))},function(n,a,r){(function(s){var c=r(31),p=t&&!t.nodeType&&t,d=p&&typeof s=="object"&&s&&!s.nodeType&&s,_=d&&d.exports===p?c.a.Buffer:void 0,g=_?_.allocUnsafe:void 0;a.a=function(b,S){if(S)return b.slice();var T=b.length,A=g?g(T):new b.constructor(T);return b.copy(A),A}}).call(this,r(122)(n))},function(n,a,r){var s=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var p=Symbol();return!String(p)||!(Object(p)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(n,a,r){var s=r(7),c=r(110),p="__core-js_shared__",d=s[p]||c(p,{});n.exports=d},function(n,a,r){var s=r(7),c=Object.defineProperty;n.exports=function(p,d){try{c(s,p,{value:d,configurable:!0,writable:!0})}catch{s[p]=d}return d}},function(n,a){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,a){a.f=Object.getOwnPropertySymbols},function(n,a,r){var s={};s[r(28)("toStringTag")]="z",n.exports=String(s)==="[object z]"},function(n,a,r){var s=r(7),c=r(75),p=r(45),d=r(63),_=s.Array,g=Math.max;n.exports=function(b,S,T){for(var A=p(b),O=c(S,A),E=c(T===void 0?A:T,A),C=_(g(E-O,0)),j=0;O<E;O++,j++)d(C,j,b[O]);return C.length=j,C}},function(n,a,r){var s=r(178);n.exports=function(c,p){return new(s(c))(p===0?0:p)}},function(n,a,r){var s=r(16),c=r(34),p=r(71),d=r(73),_=r(30),g=r(180),b=r(101),S=r(102),T=r(78),A=r(57),O=r(42),E=r(28),C=r(80),j=r(142),U=d.PROPER,L=d.CONFIGURABLE,V=j.IteratorPrototype,$=j.BUGGY_SAFARI_ITERATORS,H=E("iterator"),Y="keys",z="values",W="entries",B=function(){return this};n.exports=function(q,J,ce,re,Pe,ge,fe){g(ce,J,re);var Ee,Ne,rt,mt=function(Ae){if(Ae===Pe&&Nn)return Nn;if(!$&&Ae in en)return en[Ae];switch(Ae){case Y:case z:case W:return function(){return new ce(this,Ae)}}return function(){return new ce(this)}},Je=J+" Iterator",Xt=!1,en=q.prototype,Bt=en[H]||en["@@iterator"]||Pe&&en[Pe],Nn=!$&&Bt||mt(Pe),Ue=J=="Array"&&en.entries||Bt;if(Ue&&(Ee=b(Ue.call(new q)))!==Object.prototype&&Ee.next&&(p||b(Ee)===V||(S?S(Ee,V):_(Ee[H])||O(Ee,H,B)),T(Ee,Je,!0,!0),p&&(C[Je]=B)),U&&Pe==z&&Bt&&Bt.name!==z&&(!p&&L?A(en,"name",z):(Xt=!0,Nn=function(){return c(Bt,this)})),Pe)if(Ne={values:mt(z),keys:ge?Nn:mt(Y),entries:mt(W)},fe)for(rt in Ne)($||Xt||!(rt in en))&&O(en,rt,Ne[rt]);else s({target:J,proto:!0,forced:$||Xt},Ne);return p&&!fe||en[H]===Nn||O(en,H,Nn,{name:Pe}),C[J]=Nn,Ne}},function(n,a,r){var s=r(7),c=r(64),p=r(34),d=r(32),_=r(88),g=r(145),b=r(45),S=r(54),T=r(146),A=r(118),O=r(147),E=s.TypeError,C=function(U,L){this.stopped=U,this.result=L},j=C.prototype;n.exports=function(U,L,V){var $,H,Y,z,W,B,q,J=V&&V.that,ce=!(!V||!V.AS_ENTRIES),re=!(!V||!V.IS_ITERATOR),Pe=!(!V||!V.INTERRUPTED),ge=c(L,J),fe=function(Ne){return $&&O($,"normal",Ne),new C(!0,Ne)},Ee=function(Ne){return ce?(d(Ne),Pe?ge(Ne[0],Ne[1],fe):ge(Ne[0],Ne[1])):Pe?ge(Ne,fe):ge(Ne)};if(re)$=U;else{if(!(H=A(U)))throw E(_(U)+" is not iterable");if(g(H)){for(Y=0,z=b(U);z>Y;Y++)if((W=Ee(U[Y]))&&S(j,W))return W;return new C(!1)}$=T(U,H)}for(B=$.next;!(q=p(B,$)).done;){try{W=Ee(q.value)}catch(Ne){O($,"throw",Ne)}if(typeof W=="object"&&W&&S(j,W))return W}return new C(!1)}},function(n,a,r){var s=r(97),c=r(62),p=r(80),d=r(28)("iterator");n.exports=function(_){if(_!=null)return c(_,d)||c(_,"@@iterator")||p[s(_)]}},function(n,a,r){var s=r(7),c=r(54),p=s.TypeError;n.exports=function(d,_){if(c(_,d))return d;throw p("Incorrect invocation")}},function(n,a,r){var s=r(28)("iterator"),c=!1;try{var p=0,d={next:function(){return{done:!!p++}},return:function(){c=!0}};d[s]=function(){return this},Array.from(d,function(){throw 2})}catch{}n.exports=function(_,g){if(!g&&!c)return!1;var b=!1;try{var S={};S[s]=function(){return{next:function(){return{done:b=!0}}}},_(S)}catch{}return b}},function(n,a,r){var s=r(18);n.exports=function(c,p){var d=[][c];return!!d&&s(function(){d.call(null,p||function(){throw 1},1)})}},function(n,a){n.exports=function(r){if(!r.webpackPolyfill){var s=Object.create(r);s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),Object.defineProperty(s,"exports",{enumerable:!0}),s.webpackPolyfill=1}return s}},function(n,a,r){r(19);var s=r(15),c=r(42),p=r(103),d=r(18),_=r(28),g=r(57),b=_("species"),S=RegExp.prototype;n.exports=function(T,A,O,E){var C=_(T),j=!d(function(){var $={};return $[C]=function(){return 7},""[T]($)!=7}),U=j&&!d(function(){var $=!1,H=/a/;return T==="split"&&((H={}).constructor={},H.constructor[b]=function(){return H},H.flags="",H[C]=/./[C]),H.exec=function(){return $=!0,null},H[C](""),!$});if(!j||!U||O){var L=s(/./[C]),V=A(C,""[T],function($,H,Y,z,W){var B=s($),q=H.exec;return q===p||q===S.exec?j&&!W?{done:!0,value:L(H,Y,z)}:{done:!0,value:B(Y,H,z)}:{done:!1}});c(String.prototype,T,V[0]),c(S,C,V[1])}E&&g(S[C],"sham",!0)}},function(n,a,r){var s=r(151).charAt;n.exports=function(c,p,d){return p+(d?s(c,p).length:1)}},function(n,a,r){var s=r(7),c=r(34),p=r(32),d=r(30),_=r(51),g=r(103),b=s.TypeError;n.exports=function(S,T){var A=S.exec;if(d(A)){var O=c(A,S,T);return O!==null&&p(O),O}if(_(S)==="RegExp")return c(g,S,T);throw b("RegExp#exec called on incompatible receiver")}},function(n,a,r){var s=r(76),c=r(34),p=r(15),d=r(123),_=r(18),g=r(32),b=r(30),S=r(59),T=r(94),A=r(39),O=r(44),E=r(124),C=r(62),j=r(201),U=r(125),L=r(28)("replace"),V=Math.max,$=Math.min,H=p([].concat),Y=p([].push),z=p("".indexOf),W=p("".slice),B="a".replace(/./,"$0")==="$0",q=!!/./[L]&&/./[L]("a","$0")==="";d("replace",function(J,ce,re){var Pe=q?"$":"$0";return[function(ge,fe){var Ee=O(this),Ne=ge==null?void 0:C(ge,L);return Ne?c(Ne,ge,Ee,fe):c(ce,A(Ee),ge,fe)},function(ge,fe){var Ee=g(this),Ne=A(ge);if(typeof fe=="string"&&z(fe,Pe)===-1&&z(fe,"$<")===-1){var rt=re(ce,Ee,Ne,fe);if(rt.done)return rt.value}var mt=b(fe);mt||(fe=A(fe));var Je=Ee.global;if(Je){var Xt=Ee.unicode;Ee.lastIndex=0}for(var en=[];;){var Bt=U(Ee,Ne);if(Bt===null||(Y(en,Bt),!Je))break;A(Bt[0])===""&&(Ee.lastIndex=E(Ne,T(Ee.lastIndex),Xt))}for(var Nn,Ue="",Ae=0,$e=0;$e<en.length;$e++){for(var vt=A((Bt=en[$e])[0]),Ut=V($(S(Bt.index),Ne.length),0),Et=[],rn=1;rn<Bt.length;rn++)Y(Et,(Nn=Bt[rn])===void 0?Nn:String(Nn));var Kt=Bt.groups;if(mt){var Pn=H([vt],Et,Ut,Ne);Kt!==void 0&&Y(Pn,Kt);var yn=A(s(fe,void 0,Pn))}else yn=j(vt,Ne,Ut,Et,Kt,fe);Ut>=Ae&&(Ue+=W(Ne,Ae,Ut)+yn,Ae=Ut+vt.length)}return Ue+W(Ne,Ae)}]},!!_(function(){var J=/./;return J.exec=function(){var ce=[];return ce.groups={a:"7"},ce},"".replace(J,"$<a>")!=="7"})||!B||q)},function(n,a,r){var s=r(16),c=Math.hypot,p=Math.abs,d=Math.sqrt;s({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(_,g){for(var b,S,T=0,A=0,O=arguments.length,E=0;A<O;)E<(b=p(arguments[A++]))?(T=T*(S=E/b)*S+1,E=b):T+=b>0?(S=b/E)*S:b;return E===1/0?1/0:E*d(T)}})},function(n,a,r){var s=r(51),c=r(7);n.exports=s(c.process)=="process"},function(n,a,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,a,r){(function(s,c){var p;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var d,_="Expected a function",g="__lodash_hash_undefined__",b="__lodash_placeholder__",S=16,T=32,A=64,O=128,E=256,C=1/0,j=9007199254740991,U=NaN,L=4294967295,V=[["ary",O],["bind",1],["bindKey",2],["curry",8],["curryRight",S],["flip",512],["partial",T],["partialRight",A],["rearg",E]],$="[object Arguments]",H="[object Array]",Y="[object Boolean]",z="[object Date]",W="[object Error]",B="[object Function]",q="[object GeneratorFunction]",J="[object Map]",ce="[object Number]",re="[object Object]",Pe="[object Promise]",ge="[object RegExp]",fe="[object Set]",Ee="[object String]",Ne="[object Symbol]",rt="[object WeakMap]",mt="[object ArrayBuffer]",Je="[object DataView]",Xt="[object Float32Array]",en="[object Float64Array]",Bt="[object Int8Array]",Nn="[object Int16Array]",Ue="[object Int32Array]",Ae="[object Uint8Array]",$e="[object Uint8ClampedArray]",vt="[object Uint16Array]",Ut="[object Uint32Array]",Et=/\b__p \+= '';/g,rn=/\b(__p \+=) '' \+/g,Kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pn=/&(?:amp|lt|gt|quot|#39);/g,yn=/[&<>"']/g,dt=RegExp(Pn.source),An=RegExp(yn.source),Ve=/<%-([\s\S]+?)%>/g,bn=/<%([\s\S]+?)%>/g,lr=/<%=([\s\S]+?)%>/g,le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sr=/^\w*$/,Ir=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,io=/[\\^$.*+?()[\]{}|]/g,wo=RegExp(io.source),Yn=/^\s+/,Go=/\s/,Me=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ze=/\{\n\/\* \[wrapped with (.+)\] \*/,Le=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,on=/[()=,{}\[\]\/\s]/,Jt=/\\(\\)?/g,Dn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sr=/\w*$/,ui=/^[-+]0x[0-9a-f]+$/i,Si=/^0b[01]+$/i,Zo=/^\[object .+?Constructor\]$/,ni=/^0o[0-7]+$/i,Tn=/^(?:0|[1-9]\d*)$/,Un=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kn=/($^)/,ur=/['\n\r\u2028\u2029\\]/g,to="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Lr="\\u2700-\\u27bf",yl="a-z\\xdf-\\xf6\\xf8-\\xff",Ha="A-Z\\xc0-\\xd6\\xd8-\\xde",gl="\\ufe0e\\ufe0f",as="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kd="['’]",bc="[\\ud800-\\udfff]",ma="["+as+"]",Fs="["+to+"]",Cn="\\d+",Lf="[\\u2700-\\u27bf]",Eo="["+yl+"]",wc="[^\\ud800-\\udfff"+as+Cn+Lr+yl+Ha+"]",Ji="\\ud83c[\\udffb-\\udfff]",aa="[^\\ud800-\\udfff]",ku="(?:\\ud83c[\\udde6-\\uddff]){2}",Ra="[\\ud800-\\udbff][\\udc00-\\udfff]",ya="["+Ha+"]",Ca="(?:"+Eo+"|"+wc+")",Ec="(?:"+ya+"|"+wc+")",Oc="(?:['’](?:d|ll|m|re|s|t|ve))?",$f="(?:['’](?:D|LL|M|RE|S|T|VE))?",Bs="(?:"+Fs+"|"+Ji+")?",Ff="[\\ufe0e\\ufe0f]?",Sc=Ff+Bs+("(?:\\u200d(?:"+[aa,ku,Ra].join("|")+")"+Ff+Bs+")*"),Zd="(?:"+[Lf,ku,Ra].join("|")+")"+Sc,Il="(?:"+[aa+Fs+"?",Fs,ku,Ra,bc].join("|")+")",Bf=RegExp(Kd,"g"),_l=RegExp(Fs,"g"),xc=RegExp(Ji+"(?="+Ji+")|"+Il+Sc,"g"),Nu=RegExp([ya+"?"+Eo+"+"+Oc+"(?="+[ma,ya,"$"].join("|")+")",Ec+"+"+$f+"(?="+[ma,ya+Ca,"$"].join("|")+")",ya+"?"+Ca+"+"+Oc,ya+"+"+$f,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Cn,Zd].join("|"),"g"),Ac=RegExp("[\\u200d\\ud800-\\udfff"+to+gl+"]"),Tc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Uf=-1,Kr={};Kr[Xt]=Kr[en]=Kr[Bt]=Kr[Nn]=Kr[Ue]=Kr[Ae]=Kr[$e]=Kr[vt]=Kr[Ut]=!0,Kr[$]=Kr[H]=Kr[mt]=Kr[Y]=Kr[Je]=Kr[z]=Kr[W]=Kr[B]=Kr[J]=Kr[ce]=Kr[re]=Kr[ge]=Kr[fe]=Kr[Ee]=Kr[rt]=!1;var Xr={};Xr[$]=Xr[H]=Xr[mt]=Xr[Je]=Xr[Y]=Xr[z]=Xr[Xt]=Xr[en]=Xr[Bt]=Xr[Nn]=Xr[Ue]=Xr[J]=Xr[ce]=Xr[re]=Xr[ge]=Xr[fe]=Xr[Ee]=Xr[Ne]=Xr[Ae]=Xr[$e]=Xr[vt]=Xr[Ut]=!0,Xr[W]=Xr[B]=Xr[rt]=!1;var Vf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ls=parseFloat,ga=parseInt,Pu=typeof s=="object"&&s&&s.Object===Object&&s,Gf=typeof self=="object"&&self&&self.Object===Object&&self,zo=Pu||Gf||Function("return this")(),Ll=a&&!a.nodeType&&a,$l=Ll&&typeof c=="object"&&c&&!c.nodeType&&c,Ru=$l&&$l.exports===Ll,ss=Ru&&Pu.process,xi=function(){try{var ct=$l&&$l.require&&$l.require("util").types;return ct||ss&&ss.binding&&ss.binding("util")}catch{}}(),Mc=xi&&xi.isArrayBuffer,zf=xi&&xi.isDate,kc=xi&&xi.isMap,Fi=xi&&xi.isRegExp,ci=xi&&xi.isSet,_a=xi&&xi.isTypedArray;function lo(ct,It,Lt){switch(Lt.length){case 0:return ct.call(It);case 1:return ct.call(It,Lt[0]);case 2:return ct.call(It,Lt[0],Lt[1]);case 3:return ct.call(It,Lt[0],Lt[1],Lt[2])}return ct.apply(It,Lt)}function Qd(ct,It,Lt,vn){for(var pr=-1,Dr=ct==null?0:ct.length;++pr<Dr;){var ho=ct[pr];It(vn,ho,Lt(ho),ct)}return vn}function Bi(ct,It){for(var Lt=-1,vn=ct==null?0:ct.length;++Lt<vn&&It(ct[Lt],Lt,ct)!==!1;);return ct}function Wf(ct,It){for(var Lt=ct==null?0:ct.length;Lt--&&It(ct[Lt],Lt,ct)!==!1;);return ct}function Hf(ct,It){for(var Lt=-1,vn=ct==null?0:ct.length;++Lt<vn;)if(!It(ct[Lt],Lt,ct))return!1;return!0}function Ui(ct,It){for(var Lt=-1,vn=ct==null?0:ct.length,pr=0,Dr=[];++Lt<vn;){var ho=ct[Lt];It(ho,Lt,ct)&&(Dr[pr++]=ho)}return Dr}function Qi(ct,It){return!!(ct!=null&&ct.length)&&us(ct,It,0)>-1}function Nc(ct,It,Lt){for(var vn=-1,pr=ct==null?0:ct.length;++vn<pr;)if(Lt(It,ct[vn]))return!0;return!1}function Vr(ct,It){for(var Lt=-1,vn=ct==null?0:ct.length,pr=Array(vn);++Lt<vn;)pr[Lt]=It(ct[Lt],Lt,ct);return pr}function fi(ct,It){for(var Lt=-1,vn=It.length,pr=ct.length;++Lt<vn;)ct[pr+Lt]=It[Lt];return ct}function Cu(ct,It,Lt,vn){var pr=-1,Dr=ct==null?0:ct.length;for(vn&&Dr&&(Lt=ct[++pr]);++pr<Dr;)Lt=It(Lt,ct[pr],pr,ct);return Lt}function Xf(ct,It,Lt,vn){var pr=ct==null?0:ct.length;for(vn&&pr&&(Lt=ct[--pr]);pr--;)Lt=It(Lt,ct[pr],pr,ct);return Lt}function Pc(ct,It){for(var Lt=-1,vn=ct==null?0:ct.length;++Lt<vn;)if(It(ct[Lt],Lt,ct))return!0;return!1}var Du=Gi("length");function Xa(ct,It,Lt){var vn;return Lt(ct,function(pr,Dr,ho){if(It(pr,Dr,ho))return vn=Dr,!1}),vn}function Vi(ct,It,Lt,vn){for(var pr=ct.length,Dr=Lt+(vn?1:-1);vn?Dr--:++Dr<pr;)if(It(ct[Dr],Dr,ct))return Dr;return-1}function us(ct,It,Lt){return It==It?function(vn,pr,Dr){for(var ho=Dr-1,N=vn.length;++ho<N;)if(vn[ho]===pr)return ho;return-1}(ct,It,Lt):Vi(ct,ba,Lt)}function ea(ct,It,Lt,vn){for(var pr=Lt-1,Dr=ct.length;++pr<Dr;)if(vn(ct[pr],It))return pr;return-1}function ba(ct){return ct!=ct}function Cr(ct,It){var Lt=ct==null?0:ct.length;return Lt?cs(ct,It)/Lt:U}function Gi(ct){return function(It){return It==null?d:It[ct]}}function Da(ct){return function(It){return ct==null?d:ct[It]}}function gi(ct,It,Lt,vn,pr){return pr(ct,function(Dr,ho,N){Lt=vn?(vn=!1,Dr):It(Lt,Dr,ho,N)}),Lt}function cs(ct,It){for(var Lt,vn=-1,pr=ct.length;++vn<pr;){var Dr=It(ct[vn]);Dr!==d&&(Lt=Lt===d?Dr:Lt+Dr)}return Lt}function Fl(ct,It){for(var Lt=-1,vn=Array(ct);++Lt<ct;)vn[Lt]=It(Lt);return vn}function ja(ct){return ct&&ct.slice(0,di(ct)+1).replace(Yn,"")}function po(ct){return function(It){return ct(It)}}function Us(ct,It){return Vr(It,function(Lt){return ct[Lt]})}function qa(ct,It){return ct.has(It)}function wa(ct,It){for(var Lt=-1,vn=ct.length;++Lt<vn&&us(It,ct[Lt],0)>-1;);return Lt}function Rc(ct,It){for(var Lt=ct.length;Lt--&&us(It,ct[Lt],0)>-1;);return Lt}function ep(ct,It){for(var Lt=ct.length,vn=0;Lt--;)ct[Lt]===It&&++vn;return vn}var Cc=Da({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Jo=Da({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Vs(ct){return"\\"+Vf[ct]}function Ya(ct){return Ac.test(ct)}function ri(ct){var It=-1,Lt=Array(ct.size);return ct.forEach(function(vn,pr){Lt[++It]=[pr,vn]}),Lt}function Dc(ct,It){return function(Lt){return ct(It(Lt))}}function la(ct,It){for(var Lt=-1,vn=ct.length,pr=0,Dr=[];++Lt<vn;){var ho=ct[Lt];ho!==It&&ho!==b||(ct[Lt]=b,Dr[pr++]=Lt)}return Dr}function Ea(ct){var It=-1,Lt=Array(ct.size);return ct.forEach(function(vn){Lt[++It]=vn}),Lt}function ju(ct){var It=-1,Lt=Array(ct.size);return ct.forEach(function(vn){Lt[++It]=[vn,vn]}),Lt}function zi(ct){return Ya(ct)?function(It){for(var Lt=xc.lastIndex=0;xc.test(It);)++Lt;return Lt}(ct):Du(ct)}function ta(ct){return Ya(ct)?function(It){return It.match(xc)||[]}(ct):function(It){return It.split("")}(ct)}function di(ct){for(var It=ct.length;It--&&Go.test(ct.charAt(It)););return It}var sa=Da({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ii=function ct(It){var Lt,vn=(It=It==null?zo:Ii.defaults(zo.Object(),It,Ii.pick(zo,Jd))).Array,pr=It.Date,Dr=It.Error,ho=It.Function,N=It.Math,P=It.Object,X=It.RegExp,ie=It.String,we=It.TypeError,Xe=vn.prototype,yt=ho.prototype,zt=P.prototype,En=It["__core-js_shared__"],Er=yt.toString,dn=zt.hasOwnProperty,qr=0,_r=(Lt=/[^.]+$/.exec(En&&En.keys&&En.keys.IE_PROTO||""))?"Symbol(src)_1."+Lt:"",Fr=zt.toString,ua=Er.call(P),Mo=zo._,na=X("^"+Er.call(dn).replace(io,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bl=Ru?It.Buffer:d,wl=It.Symbol,Bl=It.Uint8Array,fs=bl?bl.allocUnsafe:d,Ka=Dc(P.getPrototypeOf,P),ds=P.create,oi=zt.propertyIsEnumerable,Ul=Xe.splice,El=wl?wl.isConcatSpreadable:d,Za=wl?wl.iterator:d,Ja=wl?wl.toStringTag:d,Gs=function(){try{var h=il(P,"defineProperty");return h({},"",{}),h}catch{}}(),fh=It.clearTimeout!==zo.clearTimeout&&It.clearTimeout,dh=pr&&pr.now!==zo.Date.now&&pr.now,tp=It.setTimeout!==zo.setTimeout&&It.setTimeout,jc=N.ceil,zs=N.floor,qf=P.getOwnPropertySymbols,ph=bl?bl.isBuffer:d,Ws=It.isFinite,Ic=Xe.join,Yf=Dc(P.keys,P),Wo=N.max,Wi=N.min,Kf=pr.now,Zf=It.parseInt,Iu=N.random,Wv=Xe.reverse,Lu=il(It,"DataView"),$u=il(It,"Map"),Lc=il(It,"Promise"),Hs=il(It,"Set"),ps=il(It,"WeakMap"),Fu=il(P,"create"),$c=ps&&new ps,hs={},Hv=Es(Lu),Fc=Es($u),Xv=Es(Lc),qv=Es(Hs),hh=Es(ps),Jf=wl?wl.prototype:d,Li=Jf?Jf.valueOf:d,vh=Jf?Jf.toString:d;function ae(h){if(Yo(h)&&!br(h)&&!(h instanceof jr)){if(h instanceof Ia)return h;if(dn.call(h,"__wrapped__"))return wd(h)}return new Ia(h)}var Xs=function(){function h(){}return function(y){if(!Lo(y))return{};if(ds)return ds(y);h.prototype=y;var x=new h;return h.prototype=d,x}}();function Vl(){}function Ia(h,y){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=d}function jr(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=L,this.__views__=[]}function Ai(h){var y=-1,x=h==null?0:h.length;for(this.clear();++y<x;){var I=h[y];this.set(I[0],I[1])}}function Gr(h){var y=-1,x=h==null?0:h.length;for(this.clear();++y<x;){var I=h[y];this.set(I[0],I[1])}}function Qa(h){var y=-1,x=h==null?0:h.length;for(this.clear();++y<x;){var I=h[y];this.set(I[0],I[1])}}function Gl(h){var y=-1,x=h==null?0:h.length;for(this.__data__=new Qa;++y<x;)this.add(h[y])}function Oa(h){var y=this.__data__=new Gr(h);this.size=y.size}function Qf(h,y){var x=br(h),I=!x&&cu(h),Z=!x&&!I&&oa(h),ne=!x&&!I&&!Z&&Qe(h),ve=x||I||Z||ne,xe=ve?Fl(h.length,ie):[],Be=xe.length;for(var ht in h)!y&&!dn.call(h,ht)||ve&&(ht=="length"||Z&&(ht=="offset"||ht=="parent")||ne&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||$i(ht,Be))||xe.push(ht);return xe}function ed(h){var y=h.length;return y?h[dp(0,y-1)]:d}function np(h,y){return Ml(_i(h),vs(y,0,h.length))}function mh(h){return Ml(_i(h))}function zl(h,y,x){(x!==d&&!Ba(h[y],x)||x===d&&!(y in h))&&el(h,y,x)}function Ho(h,y,x){var I=h[y];dn.call(h,y)&&Ba(I,x)&&(x!==d||y in h)||el(h,y,x)}function Bu(h,y){for(var x=h.length;x--;)if(Ba(h[x][0],y))return x;return-1}function rp(h,y,x,I){return Oo(h,function(Z,ne,ve){y(I,Z,x(Z),ve)}),I}function Wl(h,y){return h&&nl(y,Rt(y),h)}function el(h,y,x){y=="__proto__"&&Gs?Gs(h,y,{configurable:!0,enumerable:!0,value:x,writable:!0}):h[y]=x}function Bc(h,y){for(var x=-1,I=y.length,Z=vn(I),ne=h==null;++x<I;)Z[x]=ne?d:Gt(h,y[x]);return Z}function vs(h,y,x){return h==h&&(x!==d&&(h=h<=x?h:x),y!==d&&(h=h>=y?h:y)),h}function Sa(h,y,x,I,Z,ne){var ve,xe=1&y,Be=2&y,ht=4&y;if(x&&(ve=Z?x(h,I,Z,ne):x(h)),ve!==d)return ve;if(!Lo(h))return h;var bt=br(h);if(bt){if(ve=function(Ct){var tn=Ct.length,ar=new Ct.constructor(tn);return tn&&typeof Ct[0]=="string"&&dn.call(Ct,"index")&&(ar.index=Ct.index,ar.input=Ct.input),ar}(h),!xe)return _i(h,ve)}else{var Vt=jo(h),wn=Vt==B||Vt==q;if(oa(h))return Sh(h,xe);if(Vt==re||Vt==$||wn&&!Z){if(ve=Be||wn?{}:ra(h),!xe)return Be?function(Ct,tn){return nl(Ct,nu(Ct),tn)}(h,function(Ct,tn){return Ct&&nl(tn,Tt(tn),Ct)}(ve,h)):function(Ct,tn){return nl(Ct,pi(Ct),tn)}(h,Wl(ve,h))}else{if(!Xr[Vt])return Z?h:{};ve=function(Ct,tn,ar){var Mn=Ct.constructor;switch(tn){case mt:return Ks(Ct);case Y:case z:return new Mn(+Ct);case Je:return function(yr,Br){var Zn=Br?Ks(yr.buffer):yr.buffer;return new yr.constructor(Zn,yr.byteOffset,yr.byteLength)}(Ct,ar);case Xt:case en:case Bt:case Nn:case Ue:case Ae:case $e:case vt:case Ut:return xh(Ct,ar);case J:return new Mn;case ce:case Ee:return new Mn(Ct);case ge:return function(yr){var Br=new yr.constructor(yr.source,Sr.exec(yr));return Br.lastIndex=yr.lastIndex,Br}(Ct);case fe:return new Mn;case Ne:return He=Ct,Li?P(Li.call(He)):{}}var He}(h,Vt,xe)}}ne||(ne=new Oa);var On=ne.get(h);if(On)return On;ne.set(h,ve),Oe(h)?h.forEach(function(Ct){ve.add(Sa(Ct,y,x,Ct,h,ne))}):Ad(h)&&h.forEach(function(Ct,tn){ve.set(tn,Sa(Ct,y,x,tn,h,ne))});var Xn=bt?d:(ht?Be?md:Yc:Be?Tt:Rt)(h);return Bi(Xn||h,function(Ct,tn){Xn&&(Ct=h[tn=Ct]),Ho(ve,tn,Sa(Ct,y,x,tn,h,ne))}),ve}function op(h,y,x){var I=x.length;if(h==null)return!I;for(h=P(h);I--;){var Z=x[I],ne=y[Z],ve=h[Z];if(ve===d&&!(Z in h)||!ne(ve))return!1}return!0}function ip(h,y,x){if(typeof h!="function")throw new we(_);return iu(function(){h.apply(d,x)},y)}function tl(h,y,x,I){var Z=-1,ne=Qi,ve=!0,xe=h.length,Be=[],ht=y.length;if(!xe)return Be;x&&(y=Vr(y,po(x))),I?(ne=Nc,ve=!1):y.length>=200&&(ne=qa,ve=!1,y=new Gl(y));e:for(;++Z<xe;){var bt=h[Z],Vt=x==null?bt:x(bt);if(bt=I||bt!==0?bt:0,ve&&Vt==Vt){for(var wn=ht;wn--;)if(y[wn]===Vt)continue e;Be.push(bt)}else ne(y,Vt,I)||Be.push(bt)}return Be}ae.templateSettings={escape:Ve,evaluate:bn,interpolate:lr,variable:"",imports:{_:ae}},ae.prototype=Vl.prototype,ae.prototype.constructor=ae,Ia.prototype=Xs(Vl.prototype),Ia.prototype.constructor=Ia,jr.prototype=Xs(Vl.prototype),jr.prototype.constructor=jr,Ai.prototype.clear=function(){this.__data__=Fu?Fu(null):{},this.size=0},Ai.prototype.delete=function(h){var y=this.has(h)&&delete this.__data__[h];return this.size-=y?1:0,y},Ai.prototype.get=function(h){var y=this.__data__;if(Fu){var x=y[h];return x===g?d:x}return dn.call(y,h)?y[h]:d},Ai.prototype.has=function(h){var y=this.__data__;return Fu?y[h]!==d:dn.call(y,h)},Ai.prototype.set=function(h,y){var x=this.__data__;return this.size+=this.has(h)?0:1,x[h]=Fu&&y===d?g:y,this},Gr.prototype.clear=function(){this.__data__=[],this.size=0},Gr.prototype.delete=function(h){var y=this.__data__,x=Bu(y,h);return!(x<0)&&(x==y.length-1?y.pop():Ul.call(y,x,1),--this.size,!0)},Gr.prototype.get=function(h){var y=this.__data__,x=Bu(y,h);return x<0?d:y[x][1]},Gr.prototype.has=function(h){return Bu(this.__data__,h)>-1},Gr.prototype.set=function(h,y){var x=this.__data__,I=Bu(x,h);return I<0?(++this.size,x.push([h,y])):x[I][1]=y,this},Qa.prototype.clear=function(){this.size=0,this.__data__={hash:new Ai,map:new($u||Gr),string:new Ai}},Qa.prototype.delete=function(h){var y=qu(this,h).delete(h);return this.size-=y?1:0,y},Qa.prototype.get=function(h){return qu(this,h).get(h)},Qa.prototype.has=function(h){return qu(this,h).has(h)},Qa.prototype.set=function(h,y){var x=qu(this,h),I=x.size;return x.set(h,y),this.size+=x.size==I?0:1,this},Gl.prototype.add=Gl.prototype.push=function(h){return this.__data__.set(h,g),this},Gl.prototype.has=function(h){return this.__data__.has(h)},Oa.prototype.clear=function(){this.__data__=new Gr,this.size=0},Oa.prototype.delete=function(h){var y=this.__data__,x=y.delete(h);return this.size=y.size,x},Oa.prototype.get=function(h){return this.__data__.get(h)},Oa.prototype.has=function(h){return this.__data__.has(h)},Oa.prototype.set=function(h,y){var x=this.__data__;if(x instanceof Gr){var I=x.__data__;if(!$u||I.length<199)return I.push([h,y]),this.size=++x.size,this;x=this.__data__=new Qa(I)}return x.set(h,y),this.size=x.size,this};var Oo=Qs(jn),yh=Qs(fo,!0);function ap(h,y){var x=!0;return Oo(h,function(I,Z,ne){return x=!!y(I,Z,ne)}),x}function Xo(h,y,x){for(var I=-1,Z=h.length;++I<Z;){var ne=h[I],ve=y(ne);if(ve!=null&&(xe===d?ve==ve&&!pt(ve):x(ve,xe)))var xe=ve,Be=ne}return Be}function Zr(h,y){var x=[];return Oo(h,function(I,Z,ne){y(I,Z,ne)&&x.push(I)}),x}function ii(h,y,x,I,Z){var ne=-1,ve=h.length;for(x||(x=Zc),Z||(Z=[]);++ne<ve;){var xe=h[ne];y>0&&x(xe)?y>1?ii(xe,y-1,x,I,Z):fi(Z,xe):I||(Z[Z.length]=xe)}return Z}var Mr=eu(),co=eu(!0);function jn(h,y){return h&&Mr(h,y,Rt)}function fo(h,y){return h&&co(h,y,Rt)}function Uc(h,y){return Ui(y,function(x){return Ta(h[x])})}function Ol(h,y){for(var x=0,I=(y=Yr(y,h)).length;h!=null&&x<I;)h=h[al(y[x++])];return x&&x==I?h:d}function td(h,y,x){var I=y(h);return br(h)?I:fi(I,x(h))}function ko(h){return h==null?h===d?"[object Undefined]":"[object Null]":Ja&&Ja in P(h)?function(y){var x=dn.call(y,Ja),I=y[Ja];try{y[Ja]=d;var Z=!0}catch{}var ne=Fr.call(y);return Z&&(x?y[Ja]=I:delete y[Ja]),ne}(h):function(y){return Fr.call(y)}(h)}function Do(h,y){return h>y}function lp(h,y){return h!=null&&dn.call(h,y)}function sp(h,y){return h!=null&&y in P(h)}function Vc(h,y,x){for(var I=x?Nc:Qi,Z=h[0].length,ne=h.length,ve=ne,xe=vn(ne),Be=1/0,ht=[];ve--;){var bt=h[ve];ve&&y&&(bt=Vr(bt,po(y))),Be=Wi(bt.length,Be),xe[ve]=!x&&(y||Z>=120&&bt.length>=120)?new Gl(ve&&bt):d}bt=h[0];var Vt=-1,wn=xe[0];e:for(;++Vt<Z&&ht.length<Be;){var On=bt[Vt],Xn=y?y(On):On;if(On=x||On!==0?On:0,!(wn?qa(wn,Xn):I(ht,Xn,x))){for(ve=ne;--ve;){var Ct=xe[ve];if(!(Ct?qa(Ct,Xn):I(h[ve],Xn,x)))continue e}wn&&wn.push(Xn),ht.push(On)}}return ht}function Hi(h,y,x){var I=(h=ws(h,y=Yr(y,h)))==null?h:h[al(So(y))];return I==null?d:lo(I,h,x)}function nd(h){return Yo(h)&&ko(h)==$}function Uu(h,y,x,I,Z){return h===y||(h==null||y==null||!Yo(h)&&!Yo(y)?h!=h&&y!=y:function(ne,ve,xe,Be,ht,bt){var Vt=br(ne),wn=br(ve),On=Vt?H:jo(ne),Xn=wn?H:jo(ve),Ct=(On=On==$?re:On)==re,tn=(Xn=Xn==$?re:Xn)==re,ar=On==Xn;if(ar&&oa(ne)){if(!oa(ve))return!1;Vt=!0,Ct=!1}if(ar&&!Ct)return bt||(bt=new Oa),Vt||Qe(ne)?Xu(ne,ve,xe,Be,ht,bt):function(Zn,fr,ki,Ua,Jl,Ni,As){switch(ki){case Je:if(Zn.byteLength!=fr.byteLength||Zn.byteOffset!=fr.byteOffset)return!1;Zn=Zn.buffer,fr=fr.buffer;case mt:return!(Zn.byteLength!=fr.byteLength||!Ni(new Bl(Zn),new Bl(fr)));case Y:case z:case ce:return Ba(+Zn,+fr);case W:return Zn.name==fr.name&&Zn.message==fr.message;case ge:case Ee:return Zn==fr+"";case J:var du=ri;case fe:var Td=1&Ua;if(du||(du=Ea),Zn.size!=fr.size&&!Td)return!1;var Np=As.get(Zn);if(Np)return Np==fr;Ua|=2,As.set(Zn,fr);var Ts=Xu(du(Zn),du(fr),Ua,Jl,Ni,As);return As.delete(Zn),Ts;case Ne:if(Li)return Li.call(Zn)==Li.call(fr)}return!1}(ne,ve,On,xe,Be,ht,bt);if(!(1&xe)){var Mn=Ct&&dn.call(ne,"__wrapped__"),He=tn&&dn.call(ve,"__wrapped__");if(Mn||He){var yr=Mn?ne.value():ne,Br=He?ve.value():ve;return bt||(bt=new Oa),ht(yr,Br,xe,Be,bt)}}return ar?(bt||(bt=new Oa),function(Zn,fr,ki,Ua,Jl,Ni){var As=1&ki,du=Yc(Zn),Td=du.length,Np=Yc(fr).length;if(Td!=Np&&!As)return!1;for(var Ts=Td;Ts--;){var Ju=du[Ts];if(!(As?Ju in fr:dn.call(fr,Ju)))return!1}var tm=Ni.get(Zn),Md=Ni.get(fr);if(tm&&Md)return tm==fr&&Md==Zn;var Pp=!0;Ni.set(Zn,fr),Ni.set(fr,Zn);for(var nm=As;++Ts<Td;){var Rp=Zn[Ju=du[Ts]],vf=fr[Ju];if(Ua)var mf=As?Ua(vf,Rp,Ju,fr,Zn,Ni):Ua(Rp,vf,Ju,Zn,fr,Ni);if(!(mf===d?Rp===vf||Jl(Rp,vf,ki,Ua,Ni):mf)){Pp=!1;break}nm||(nm=Ju=="constructor")}if(Pp&&!nm){var pu=Zn.constructor,Cp=fr.constructor;pu==Cp||!("constructor"in Zn)||!("constructor"in fr)||typeof pu=="function"&&pu instanceof pu&&typeof Cp=="function"&&Cp instanceof Cp||(Pp=!1)}return Ni.delete(Zn),Ni.delete(fr),Pp}(ne,ve,xe,Be,ht,bt)):!1}(h,y,x,I,Uu,Z))}function La(h,y,x,I){var Z=x.length,ne=Z,ve=!I;if(h==null)return!ne;for(h=P(h);Z--;){var xe=x[Z];if(ve&&xe[2]?xe[1]!==h[xe[0]]:!(xe[0]in h))return!1}for(;++Z<ne;){var Be=(xe=x[Z])[0],ht=h[Be],bt=xe[1];if(ve&&xe[2]){if(ht===d&&!(Be in h))return!1}else{var Vt=new Oa;if(I)var wn=I(ht,bt,Be,h,y,Vt);if(!(wn===d?Uu(bt,ht,3,I,Vt):wn))return!1}}return!0}function ms(h){return!(!Lo(h)||(y=h,_r&&_r in y))&&(Ta(h)?na:Zo).test(Es(h));var y}function Hl(h){return typeof h=="function"?h:h==null?er:typeof h=="object"?br(h)?cp(h[0],h[1]):up(h):he(h)}function $a(h){if(!Mt(h))return Yf(h);var y=[];for(var x in P(h))dn.call(h,x)&&x!="constructor"&&y.push(x);return y}function gh(h){if(!Lo(h))return function(Z){var ne=[];if(Z!=null)for(var ve in P(Z))ne.push(ve);return ne}(h);var y=Mt(h),x=[];for(var I in h)(I!="constructor"||!y&&dn.call(h,I))&&x.push(I);return x}function Sl(h,y){return h<y}function xa(h,y){var x=-1,I=da(h)?vn(h.length):[];return Oo(h,function(Z,ne,ve){I[++x]=y(Z,ne,ve)}),I}function up(h){var y=Kc(h);return y.length==1&&y[0][2]?Jc(y[0][0],y[0][1]):function(x){return x===h||La(x,h,y)}}function cp(h,y){return Al(h)&&ru(y)?Jc(al(h),y):function(x){var I=Gt(x,h);return I===d&&I===y?xt(x,h):Uu(y,I,3)}}function rd(h,y,x,I,Z){h!==y&&Mr(y,function(ne,ve){if(Z||(Z=new Oa),Lo(ne))(function(Be,ht,bt,Vt,wn,On,Xn){var Ct=_d(Be,bt),tn=_d(ht,bt),ar=Xn.get(tn);if(ar)return void zl(Be,bt,ar);var Mn=On?On(Ct,tn,bt+"",Be,ht,Xn):d,He=Mn===d;if(He){var yr=br(tn),Br=!yr&&oa(tn),Zn=!yr&&!Br&&Qe(tn);Mn=tn,yr||Br||Zn?br(Ct)?Mn=Ct:Po(Ct)?Mn=_i(Ct):Br?(He=!1,Mn=Sh(tn,!0)):Zn?(He=!1,Mn=xh(tn,!0)):Mn=[]:G(tn)||cu(tn)?(Mn=Ct,cu(Ct)?Mn=Pt(Ct):Lo(Ct)&&!Ta(Ct)||(Mn=ra(tn))):He=!1}He&&(Xn.set(tn,Mn),wn(Mn,tn,Vt,On,Xn),Xn.delete(tn)),zl(Be,bt,Mn)})(h,y,ve,x,rd,I,Z);else{var xe=I?I(_d(h,ve),ne,ve+"",h,y,Z):d;xe===d&&(xe=ne),zl(h,ve,xe)}},Tt)}function _h(h,y){var x=h.length;if(x)return $i(y+=y<0?x:0,x)?h[y]:d}function bh(h,y,x){y=y.length?Vr(y,function(ne){return br(ne)?function(ve){return Ol(ve,ne.length===1?ne[0]:ne)}:ne}):[er];var I=-1;y=Vr(y,po(nr()));var Z=xa(h,function(ne,ve,xe){var Be=Vr(y,function(ht){return ht(ne)});return{criteria:Be,index:++I,value:ne}});return function(ne,ve){var xe=ne.length;for(ne.sort(ve);xe--;)ne[xe]=ne[xe].value;return ne}(Z,function(ne,ve){return function(xe,Be,ht){for(var bt=-1,Vt=xe.criteria,wn=Be.criteria,On=Vt.length,Xn=ht.length;++bt<On;){var Ct=Vu(Vt[bt],wn[bt]);if(Ct)return bt>=Xn?Ct:Ct*(ht[bt]=="desc"?-1:1)}return xe.index-Be.index}(ne,ve,x)})}function wh(h,y,x){for(var I=-1,Z=y.length,ne={};++I<Z;){var ve=y[I],xe=Ol(h,ve);x(xe,ve)&&qs(ne,Yr(ve,h),xe)}return ne}function od(h,y,x,I){var Z=I?ea:us,ne=-1,ve=y.length,xe=h;for(h===y&&(y=_i(y)),x&&(xe=Vr(h,po(x)));++ne<ve;)for(var Be=0,ht=y[ne],bt=x?x(ht):ht;(Be=Z(xe,bt,Be,I))>-1;)xe!==h&&Ul.call(xe,Be,1),Ul.call(h,Be,1);return h}function fp(h,y){for(var x=h?y.length:0,I=x-1;x--;){var Z=y[x];if(x==I||Z!==ne){var ne=Z;$i(Z)?Ul.call(h,Z,1):ad(h,Z)}}return h}function dp(h,y){return h+zs(Iu()*(y-h+1))}function Gc(h,y){var x="";if(!h||y<1||y>j)return x;do y%2&&(x+=h),(y=zs(y/2))&&(h+=h);while(y);return x}function kr(h,y){return ef(Qc(h,y,er),h+"")}function Yv(h){return ed(wr(h))}function pp(h,y){var x=wr(h);return Ml(x,vs(y,0,x.length))}function qs(h,y,x,I){if(!Lo(h))return h;for(var Z=-1,ne=(y=Yr(y,h)).length,ve=ne-1,xe=h;xe!=null&&++Z<ne;){var Be=al(y[Z]),ht=x;if(Be==="__proto__"||Be==="constructor"||Be==="prototype")return h;if(Z!=ve){var bt=xe[Be];(ht=I?I(bt,Be,xe):d)===d&&(ht=Lo(bt)?bt:$i(y[Z+1])?[]:{})}Ho(xe,Be,ht),xe=xe[Be]}return h}var zc=$c?function(h,y){return $c.set(h,y),h}:er,Kv=Gs?function(h,y){return Gs(h,"toString",{configurable:!0,enumerable:!1,value:Nr(y),writable:!0})}:er;function Eh(h){return Ml(wr(h))}function Aa(h,y,x){var I=-1,Z=h.length;y<0&&(y=-y>Z?0:Z+y),(x=x>Z?Z:x)<0&&(x+=Z),Z=y>x?0:x-y>>>0,y>>>=0;for(var ne=vn(Z);++I<Z;)ne[I]=h[I+y];return ne}function Zv(h,y){var x;return Oo(h,function(I,Z,ne){return!(x=y(I,Z,ne))}),!!x}function Wc(h,y,x){var I=0,Z=h==null?I:h.length;if(typeof y=="number"&&y==y&&Z<=2147483647){for(;I<Z;){var ne=I+Z>>>1,ve=h[ne];ve!==null&&!pt(ve)&&(x?ve<=y:ve<y)?I=ne+1:Z=ne}return Z}return id(h,y,er,x)}function id(h,y,x,I){var Z=0,ne=h==null?0:h.length;if(ne===0)return 0;for(var ve=(y=x(y))!=y,xe=y===null,Be=pt(y),ht=y===d;Z<ne;){var bt=zs((Z+ne)/2),Vt=x(h[bt]),wn=Vt!==d,On=Vt===null,Xn=Vt==Vt,Ct=pt(Vt);if(ve)var tn=I||Xn;else tn=ht?Xn&&(I||wn):xe?Xn&&wn&&(I||!On):Be?Xn&&wn&&!On&&(I||!Ct):!On&&!Ct&&(I?Vt<=y:Vt<y);tn?Z=bt+1:ne=bt}return Wi(ne,4294967294)}function hp(h,y){for(var x=-1,I=h.length,Z=0,ne=[];++x<I;){var ve=h[x],xe=y?y(ve):ve;if(!x||!Ba(xe,Be)){var Be=xe;ne[Z++]=ve===0?0:ve}}return ne}function Oh(h){return typeof h=="number"?h:pt(h)?U:+h}function ca(h){if(typeof h=="string")return h;if(br(h))return Vr(h,ca)+"";if(pt(h))return vh?vh.call(h):"";var y=h+"";return y=="0"&&1/h==-1/0?"-0":y}function ys(h,y,x){var I=-1,Z=Qi,ne=h.length,ve=!0,xe=[],Be=xe;if(x)ve=!1,Z=Nc;else if(ne>=200){var ht=y?null:Th(h);if(ht)return Ea(ht);ve=!1,Z=qa,Be=new Gl}else Be=y?[]:xe;e:for(;++I<ne;){var bt=h[I],Vt=y?y(bt):bt;if(bt=x||bt!==0?bt:0,ve&&Vt==Vt){for(var wn=Be.length;wn--;)if(Be[wn]===Vt)continue e;y&&Be.push(Vt),xe.push(bt)}else Z(Be,Vt,x)||(Be!==xe&&Be.push(Vt),xe.push(bt))}return xe}function ad(h,y){return(h=ws(h,y=Yr(y,h)))==null||delete h[al(So(y))]}function Ys(h,y,x,I){return qs(h,y,x(Ol(h,y)),I)}function ld(h,y,x,I){for(var Z=h.length,ne=I?Z:-1;(I?ne--:++ne<Z)&&y(h[ne],ne,h););return x?Aa(h,I?0:ne,I?ne+1:Z):Aa(h,I?ne+1:0,I?Z:ne)}function vp(h,y){var x=h;return x instanceof jr&&(x=x.value()),Cu(y,function(I,Z){return Z.func.apply(Z.thisArg,fi([I],Z.args))},x)}function sd(h,y,x){var I=h.length;if(I<2)return I?ys(h[0]):[];for(var Z=-1,ne=vn(I);++Z<I;)for(var ve=h[Z],xe=-1;++xe<I;)xe!=Z&&(ne[Z]=tl(ne[Z]||ve,h[xe],y,x));return ys(ii(ne,1),y,x)}function Hc(h,y,x){for(var I=-1,Z=h.length,ne=y.length,ve={};++I<Z;){var xe=I<ne?y[I]:d;x(ve,h[I],xe)}return ve}function ud(h){return Po(h)?h:[]}function cd(h){return typeof h=="function"?h:er}function Yr(h,y){return br(h)?h:Al(h,y)?[h]:Op(wt(h))}var Jv=kr;function no(h,y,x){var I=h.length;return x=x===d?I:x,!y&&x>=I?h:Aa(h,y,x)}var fd=fh||function(h){return zo.clearTimeout(h)};function Sh(h,y){if(y)return h.slice();var x=h.length,I=fs?fs(x):new h.constructor(x);return h.copy(I),I}function Ks(h){var y=new h.constructor(h.byteLength);return new Bl(y).set(new Bl(h)),y}function xh(h,y){var x=y?Ks(h.buffer):h.buffer;return new h.constructor(x,h.byteOffset,h.length)}function Vu(h,y){if(h!==y){var x=h!==d,I=h===null,Z=h==h,ne=pt(h),ve=y!==d,xe=y===null,Be=y==y,ht=pt(y);if(!xe&&!ht&&!ne&&h>y||ne&&ve&&Be&&!xe&&!ht||I&&ve&&Be||!x&&Be||!Z)return 1;if(!I&&!ne&&!ht&&h<y||ht&&x&&Z&&!I&&!ne||xe&&x&&Z||!ve&&Z||!Be)return-1}return 0}function Ah(h,y,x,I){for(var Z=-1,ne=h.length,ve=x.length,xe=-1,Be=y.length,ht=Wo(ne-ve,0),bt=vn(Be+ht),Vt=!I;++xe<Be;)bt[xe]=y[xe];for(;++Z<ve;)(Vt||Z<ne)&&(bt[x[Z]]=h[Z]);for(;ht--;)bt[xe++]=h[Z++];return bt}function Zs(h,y,x,I){for(var Z=-1,ne=h.length,ve=-1,xe=x.length,Be=-1,ht=y.length,bt=Wo(ne-xe,0),Vt=vn(bt+ht),wn=!I;++Z<bt;)Vt[Z]=h[Z];for(var On=Z;++Be<ht;)Vt[On+Be]=y[Be];for(;++ve<xe;)(wn||Z<ne)&&(Vt[On+x[ve]]=h[Z++]);return Vt}function _i(h,y){var x=-1,I=h.length;for(y||(y=vn(I));++x<I;)y[x]=h[x];return y}function nl(h,y,x,I){var Z=!x;x||(x={});for(var ne=-1,ve=y.length;++ne<ve;){var xe=y[ne],Be=I?I(x[xe],h[xe],xe,x,h):d;Be===d&&(Be=h[xe]),Z?el(x,xe,Be):Ho(x,xe,Be)}return x}function Xl(h,y){return function(x,I){var Z=br(x)?Qd:rp,ne=y?y():{};return Z(x,h,nr(I,2),ne)}}function Js(h){return kr(function(y,x){var I=-1,Z=x.length,ne=Z>1?x[Z-1]:d,ve=Z>2?x[2]:d;for(ne=h.length>3&&typeof ne=="function"?(Z--,ne):d,ve&&qo(x[0],x[1],ve)&&(ne=Z<3?d:ne,Z=1),y=P(y);++I<Z;){var xe=x[I];xe&&h(y,xe,I,ne)}return y})}function Qs(h,y){return function(x,I){if(x==null)return x;if(!da(x))return h(x,I);for(var Z=x.length,ne=y?Z:-1,ve=P(x);(y?ne--:++ne<Z)&&I(ve[ne],ne,ve)!==!1;);return x}}function eu(h){return function(y,x,I){for(var Z=-1,ne=P(y),ve=I(y),xe=ve.length;xe--;){var Be=ve[h?xe:++Z];if(x(ne[Be],Be,ne)===!1)break}return y}}function dd(h){return function(y){var x=Ya(y=wt(y))?ta(y):d,I=x?x[0]:y.charAt(0),Z=x?no(x,1).join(""):y.slice(1);return I[h]()+Z}}function ql(h){return function(y){return Cu(vo(or(y).replace(Bf,"")),h,"")}}function tu(h){return function(){var y=arguments;switch(y.length){case 0:return new h;case 1:return new h(y[0]);case 2:return new h(y[0],y[1]);case 3:return new h(y[0],y[1],y[2]);case 4:return new h(y[0],y[1],y[2],y[3]);case 5:return new h(y[0],y[1],y[2],y[3],y[4]);case 6:return new h(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new h(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var x=Xs(h.prototype),I=h.apply(x,y);return Lo(I)?I:x}}function pd(h){return function(y,x,I){var Z=P(y);if(!da(y)){var ne=nr(x,3);y=Rt(y),x=function(xe){return ne(Z[xe],xe,Z)}}var ve=h(y,x,I);return ve>-1?Z[ne?y[ve]:ve]:d}}function rl(h){return xl(function(y){var x=y.length,I=x,Z=Ia.prototype.thru;for(h&&y.reverse();I--;){var ne=y[I];if(typeof ne!="function")throw new we(_);if(Z&&!ve&&gs(ne)=="wrapper")var ve=new Ia([],!0)}for(I=ve?I:x;++I<x;){var xe=gs(ne=y[I]),Be=xe=="wrapper"?yd(ne):d;ve=Be&&Tl(Be[0])&&Be[1]==424&&!Be[4].length&&Be[9]==1?ve[gs(Be[0])].apply(ve,Be[3]):ne.length==1&&Tl(ne)?ve[xe]():ve.thru(ne)}return function(){var ht=arguments,bt=ht[0];if(ve&&ht.length==1&&br(bt))return ve.plant(bt).value();for(var Vt=0,wn=x?y[Vt].apply(this,ht):bt;++Vt<x;)wn=y[Vt].call(this,wn);return wn}})}function Xc(h,y,x,I,Z,ne,ve,xe,Be,ht){var bt=y&O,Vt=1&y,wn=2&y,On=24&y,Xn=512&y,Ct=wn?d:tu(h);return function tn(){for(var ar=arguments.length,Mn=vn(ar),He=ar;He--;)Mn[He]=arguments[He];if(On)var yr=_s(tn),Br=ep(Mn,yr);if(I&&(Mn=Ah(Mn,I,Z,On)),ne&&(Mn=Zs(Mn,ne,ve,On)),ar-=Br,On&&ar<ht){var Zn=la(Mn,yr);return mp(h,y,Xc,tn.placeholder,x,Mn,Zn,xe,Be,ht-ar)}var fr=Vt?x:this,ki=wn?fr[h]:h;return ar=Mn.length,xe?Mn=ou(Mn,xe):Xn&&ar>1&&Mn.reverse(),bt&&Be<ar&&(Mn.length=Be),this&&this!==zo&&this instanceof tn&&(ki=Ct||tu(ki)),ki.apply(fr,Mn)}}function qc(h,y){return function(x,I){return function(Z,ne,ve,xe){return jn(Z,function(Be,ht,bt){ne(xe,ve(Be),ht,bt)}),xe}(x,h,y(I),{})}}function Gu(h,y){return function(x,I){var Z;if(x===d&&I===d)return y;if(x!==d&&(Z=x),I!==d){if(Z===d)return I;typeof x=="string"||typeof I=="string"?(x=ca(x),I=ca(I)):(x=Oh(x),I=Oh(I)),Z=h(x,I)}return Z}}function zu(h){return xl(function(y){return y=Vr(y,po(nr())),kr(function(x){var I=this;return h(y,function(Z){return lo(Z,I,x)})})})}function Wu(h,y){var x=(y=y===d?" ":ca(y)).length;if(x<2)return x?Gc(y,h):y;var I=Gc(y,jc(h/zi(y)));return Ya(y)?no(ta(I),0,h).join(""):I.slice(0,h)}function hd(h){return function(y,x,I){return I&&typeof I!="number"&&qo(y,x,I)&&(x=I=d),y=Nt(y),x===d?(x=y,y=0):x=Nt(x),function(Z,ne,ve,xe){for(var Be=-1,ht=Wo(jc((ne-Z)/(ve||1)),0),bt=vn(ht);ht--;)bt[xe?ht:++Be]=Z,Z+=ve;return bt}(y,x,I=I===d?y<x?1:-1:Nt(I),h)}}function Hu(h){return function(y,x){return typeof y=="string"&&typeof x=="string"||(y=$t(y),x=$t(x)),h(y,x)}}function mp(h,y,x,I,Z,ne,ve,xe,Be,ht){var bt=8&y;y|=bt?T:A,4&(y&=~(bt?A:T))||(y&=-4);var Vt=[h,y,Z,bt?ne:d,bt?ve:d,bt?d:ne,bt?d:ve,xe,Be,ht],wn=x.apply(d,Vt);return Tl(h)&&wp(wn,Vt),wn.placeholder=I,bd(wn,h,y)}function vd(h){var y=N[h];return function(x,I){if(x=$t(x),(I=I==null?0:Wi(ut(I),292))&&Ws(x)){var Z=(wt(x)+"e").split("e");return+((Z=(wt(y(Z[0]+"e"+(+Z[1]+I)))+"e").split("e"))[0]+"e"+(+Z[1]-I))}return y(x)}}var Th=Hs&&1/Ea(new Hs([,-0]))[1]==C?function(h){return new Hs(h)}:ot;function yp(h){return function(y){var x=jo(y);return x==J?ri(y):x==fe?ju(y):function(I,Z){return Vr(Z,function(ne){return[ne,I[ne]]})}(y,h(y))}}function ol(h,y,x,I,Z,ne,ve,xe){var Be=2&y;if(!Be&&typeof h!="function")throw new we(_);var ht=I?I.length:0;if(ht||(y&=-97,I=Z=d),ve=ve===d?ve:Wo(ut(ve),0),xe=xe===d?xe:ut(xe),ht-=Z?Z.length:0,y&A){var bt=I,Vt=Z;I=Z=d}var wn=Be?d:yd(h),On=[h,y,x,I,Z,bt,Vt,ne,ve,xe];if(wn&&function(Ct,tn){var ar=Ct[1],Mn=tn[1],He=ar|Mn,yr=He<131,Br=Mn==O&&ar==8||Mn==O&&ar==E&&Ct[7].length<=tn[8]||Mn==384&&tn[7].length<=tn[8]&&ar==8;if(!yr&&!Br)return Ct;1&Mn&&(Ct[2]=tn[2],He|=1&ar?0:4);var Zn=tn[3];if(Zn){var fr=Ct[3];Ct[3]=fr?Ah(fr,Zn,tn[4]):Zn,Ct[4]=fr?la(Ct[3],b):tn[4]}(Zn=tn[5])&&(fr=Ct[5],Ct[5]=fr?Zs(fr,Zn,tn[6]):Zn,Ct[6]=fr?la(Ct[5],b):tn[6]),(Zn=tn[7])&&(Ct[7]=Zn),Mn&O&&(Ct[8]=Ct[8]==null?tn[8]:Wi(Ct[8],tn[8])),Ct[9]==null&&(Ct[9]=tn[9]),Ct[0]=tn[0],Ct[1]=He}(On,wn),h=On[0],y=On[1],x=On[2],I=On[3],Z=On[4],!(xe=On[9]=On[9]===d?Be?0:h.length:Wo(On[9]-ht,0))&&24&y&&(y&=-25),y&&y!=1)Xn=y==8||y==S?function(Ct,tn,ar){var Mn=tu(Ct);return function He(){for(var yr=arguments.length,Br=vn(yr),Zn=yr,fr=_s(He);Zn--;)Br[Zn]=arguments[Zn];var ki=yr<3&&Br[0]!==fr&&Br[yr-1]!==fr?[]:la(Br,fr);return(yr-=ki.length)<ar?mp(Ct,tn,Xc,He.placeholder,d,Br,ki,d,d,ar-yr):lo(this&&this!==zo&&this instanceof He?Mn:Ct,this,Br)}}(h,y,xe):y!=T&&y!=33||Z.length?Xc.apply(d,On):function(Ct,tn,ar,Mn){var He=1&tn,yr=tu(Ct);return function Br(){for(var Zn=-1,fr=arguments.length,ki=-1,Ua=Mn.length,Jl=vn(Ua+fr),Ni=this&&this!==zo&&this instanceof Br?yr:Ct;++ki<Ua;)Jl[ki]=Mn[ki];for(;fr--;)Jl[ki++]=arguments[++Zn];return lo(Ni,He?ar:this,Jl)}}(h,y,x,I);else var Xn=function(Ct,tn,ar){var Mn=1&tn,He=tu(Ct);return function yr(){return(this&&this!==zo&&this instanceof yr?He:Ct).apply(Mn?ar:this,arguments)}}(h,y,x);return bd((wn?zc:wp)(Xn,On),h,y)}function gp(h,y,x,I){return h===d||Ba(h,zt[x])&&!dn.call(I,x)?y:h}function _p(h,y,x,I,Z,ne){return Lo(h)&&Lo(y)&&(ne.set(y,h),rd(h,y,d,_p,ne),ne.delete(y)),h}function bp(h){return G(h)?d:h}function Xu(h,y,x,I,Z,ne){var ve=1&x,xe=h.length,Be=y.length;if(xe!=Be&&!(ve&&Be>xe))return!1;var ht=ne.get(h),bt=ne.get(y);if(ht&&bt)return ht==y&&bt==h;var Vt=-1,wn=!0,On=2&x?new Gl:d;for(ne.set(h,y),ne.set(y,h);++Vt<xe;){var Xn=h[Vt],Ct=y[Vt];if(I)var tn=ve?I(Ct,Xn,Vt,y,h,ne):I(Xn,Ct,Vt,h,y,ne);if(tn!==d){if(tn)continue;wn=!1;break}if(On){if(!Pc(y,function(ar,Mn){if(!qa(On,Mn)&&(Xn===ar||Z(Xn,ar,x,I,ne)))return On.push(Mn)})){wn=!1;break}}else if(Xn!==Ct&&!Z(Xn,Ct,x,I,ne)){wn=!1;break}}return ne.delete(h),ne.delete(y),wn}function xl(h){return ef(Qc(h,d,tf),h+"")}function Yc(h){return td(h,Rt,pi)}function md(h){return td(h,Tt,nu)}var yd=$c?function(h){return $c.get(h)}:ot;function gs(h){for(var y=h.name+"",x=hs[y],I=dn.call(hs,y)?x.length:0;I--;){var Z=x[I],ne=Z.func;if(ne==null||ne==h)return Z.name}return y}function _s(h){return(dn.call(ae,"placeholder")?ae:h).placeholder}function nr(){var h=ae.iteratee||mo;return h=h===mo?Hl:h,arguments.length?h(arguments[0],arguments[1]):h}function qu(h,y){var x,I,Z=h.__data__;return((I=typeof(x=y))=="string"||I=="number"||I=="symbol"||I=="boolean"?x!=="__proto__":x===null)?Z[typeof y=="string"?"string":"hash"]:Z.map}function Kc(h){for(var y=Rt(h),x=y.length;x--;){var I=y[x],Z=h[I];y[x]=[I,Z,ru(Z)]}return y}function il(h,y){var x=function(I,Z){return I==null?d:I[Z]}(h,y);return ms(x)?x:d}var pi=qf?function(h){return h==null?[]:(h=P(h),Ui(qf(h),function(y){return oi.call(h,y)}))}:Ge,nu=qf?function(h){for(var y=[];h;)fi(y,pi(h)),h=Ka(h);return y}:Ge,jo=ko;function bs(h,y,x){for(var I=-1,Z=(y=Yr(y,h)).length,ne=!1;++I<Z;){var ve=al(y[I]);if(!(ne=h!=null&&x(h,ve)))break;h=h[ve]}return ne||++I!=Z?ne:!!(Z=h==null?0:h.length)&&hf(Z)&&$i(ve,Z)&&(br(h)||cu(h))}function ra(h){return typeof h.constructor!="function"||Mt(h)?{}:Xs(Ka(h))}function Zc(h){return br(h)||cu(h)||!!(El&&h&&h[El])}function $i(h,y){var x=typeof h;return!!(y=y??j)&&(x=="number"||x!="symbol"&&Tn.test(h))&&h>-1&&h%1==0&&h<y}function qo(h,y,x){if(!Lo(x))return!1;var I=typeof y;return!!(I=="number"?da(x)&&$i(y,x.length):I=="string"&&y in x)&&Ba(x[y],h)}function Al(h,y){if(br(h))return!1;var x=typeof h;return!(x!="number"&&x!="symbol"&&x!="boolean"&&h!=null&&!pt(h))||sr.test(h)||!le.test(h)||y!=null&&h in P(y)}function Tl(h){var y=gs(h),x=ae[y];if(typeof x!="function"||!(y in jr.prototype))return!1;if(h===x)return!0;var I=yd(x);return!!I&&h===I[0]}(Lu&&jo(new Lu(new ArrayBuffer(1)))!=Je||$u&&jo(new $u)!=J||Lc&&jo(Lc.resolve())!=Pe||Hs&&jo(new Hs)!=fe||ps&&jo(new ps)!=rt)&&(jo=function(h){var y=ko(h),x=y==re?h.constructor:d,I=x?Es(x):"";if(I)switch(I){case Hv:return Je;case Fc:return J;case Xv:return Pe;case qv:return fe;case hh:return rt}return y});var gd=En?Ta:Ye;function Mt(h){var y=h&&h.constructor;return h===(typeof y=="function"&&y.prototype||zt)}function ru(h){return h==h&&!Lo(h)}function Jc(h,y){return function(x){return x!=null&&x[h]===y&&(y!==d||h in P(x))}}function Qc(h,y,x){return y=Wo(y===d?h.length-1:y,0),function(){for(var I=arguments,Z=-1,ne=Wo(I.length-y,0),ve=vn(ne);++Z<ne;)ve[Z]=I[y+Z];Z=-1;for(var xe=vn(y+1);++Z<y;)xe[Z]=I[Z];return xe[y]=x(ve),lo(h,this,xe)}}function ws(h,y){return y.length<2?h:Ol(h,Aa(y,0,-1))}function ou(h,y){for(var x=h.length,I=Wi(y.length,x),Z=_i(h);I--;){var ne=y[I];h[I]=$i(ne,x)?Z[ne]:d}return h}function _d(h,y){if((y!=="constructor"||typeof h[y]!="function")&&y!="__proto__")return h[y]}var wp=Ep(zc),iu=tp||function(h,y){return zo.setTimeout(h,y)},ef=Ep(Kv);function bd(h,y,x){var I=y+"";return ef(h,function(Z,ne){var ve=ne.length;if(!ve)return Z;var xe=ve-1;return ne[xe]=(ve>1?"& ":"")+ne[xe],ne=ne.join(ve>2?", ":" "),Z.replace(Me,`{
/* [wrapped with `+ne+`] */
`)}(I,function(Z,ne){return Bi(V,function(ve){var xe="_."+ve[0];ne&ve[1]&&!Qi(Z,xe)&&Z.push(xe)}),Z.sort()}(function(Z){var ne=Z.match(Ze);return ne?ne[1].split(Le):[]}(I),x)))}function Ep(h){var y=0,x=0;return function(){var I=Kf(),Z=16-(I-x);if(x=I,Z>0){if(++y>=800)return arguments[0]}else y=0;return h.apply(d,arguments)}}function Ml(h,y){var x=-1,I=h.length,Z=I-1;for(y=y===d?I:y;++x<y;){var ne=dp(x,Z),ve=h[ne];h[ne]=h[x],h[x]=ve}return h.length=y,h}var Op=function(h){var y=Zl(h,function(I){return x.size===500&&x.clear(),I}),x=y.cache;return y}(function(h){var y=[];return h.charCodeAt(0)===46&&y.push(""),h.replace(Ir,function(x,I,Z,ne){y.push(Z?ne.replace(Jt,"$1"):I||x)}),y});function al(h){if(typeof h=="string"||pt(h))return h;var y=h+"";return y=="0"&&1/h==-1/0?"-0":y}function Es(h){if(h!=null){try{return Er.call(h)}catch{}try{return h+""}catch{}}return""}function wd(h){if(h instanceof jr)return h.clone();var y=new Ia(h.__wrapped__,h.__chain__);return y.__actions__=_i(h.__actions__),y.__index__=h.__index__,y.__values__=h.__values__,y}var Mh=kr(function(h,y){return Po(h)?tl(h,ii(y,1,Po,!0)):[]}),kh=kr(function(h,y){var x=So(y);return Po(x)&&(x=d),Po(h)?tl(h,ii(y,1,Po,!0),nr(x,2)):[]}),Nh=kr(function(h,y){var x=So(y);return Po(x)&&(x=d),Po(h)?tl(h,ii(y,1,Po,!0),d,x):[]});function Sp(h,y,x){var I=h==null?0:h.length;if(!I)return-1;var Z=x==null?0:ut(x);return Z<0&&(Z=Wo(I+Z,0)),Vi(h,nr(y,3),Z)}function Ed(h,y,x){var I=h==null?0:h.length;if(!I)return-1;var Z=I-1;return x!==d&&(Z=ut(x),Z=x<0?Wo(I+Z,0):Wi(Z,I-1)),Vi(h,nr(y,3),Z,!0)}function tf(h){return h!=null&&h.length?ii(h,1):[]}function Ph(h){return h&&h.length?h[0]:d}var ll=kr(function(h){var y=Vr(h,ud);return y.length&&y[0]===h[0]?Vc(y):[]}),Os=kr(function(h){var y=So(h),x=Vr(h,ud);return y===So(x)?y=d:x.pop(),x.length&&x[0]===h[0]?Vc(x,nr(y,2)):[]}),Qv=kr(function(h){var y=So(h),x=Vr(h,ud);return(y=typeof y=="function"?y:d)&&x.pop(),x.length&&x[0]===h[0]?Vc(x,d,y):[]});function So(h){var y=h==null?0:h.length;return y?h[y-1]:d}var nf=kr(au);function au(h,y){return h&&h.length&&y&&y.length?od(h,y):h}var rf=xl(function(h,y){var x=h==null?0:h.length,I=Bc(h,y);return fp(h,Vr(y,function(Z){return $i(Z,x)?+Z:Z}).sort(Vu)),I});function Yu(h){return h==null?h:Wv.call(h)}var of=kr(function(h){return ys(ii(h,1,Po,!0))}),af=kr(function(h){var y=So(h);return Po(y)&&(y=d),ys(ii(h,1,Po,!0),nr(y,2))}),lf=kr(function(h){var y=So(h);return y=typeof y=="function"?y:d,ys(ii(h,1,Po,!0),d,y)});function lu(h){if(!h||!h.length)return[];var y=0;return h=Ui(h,function(x){if(Po(x))return y=Wo(x.length,y),!0}),Fl(y,function(x){return Vr(h,Gi(x))})}function Yl(h,y){if(!h||!h.length)return[];var x=lu(h);return y==null?x:Vr(x,function(I){return lo(y,d,I)})}var bi=kr(function(h,y){return Po(h)?tl(h,y):[]}),Od=kr(function(h){return sd(Ui(h,Po))}),sf=kr(function(h){var y=So(h);return Po(y)&&(y=d),sd(Ui(h,Po),nr(y,2))}),su=kr(function(h){var y=So(h);return y=typeof y=="function"?y:d,sd(Ui(h,Po),d,y)}),Ku=kr(lu),Ti=kr(function(h){var y=h.length,x=y>1?h[y-1]:d;return x=typeof x=="function"?(h.pop(),x):d,Yl(h,x)});function No(h){var y=ae(h);return y.__chain__=!0,y}function uf(h,y){return y(h)}var Xi=xl(function(h){var y=h.length,x=y?h[0]:0,I=this.__wrapped__,Z=function(ne){return Bc(ne,h)};return!(y>1||this.__actions__.length)&&I instanceof jr&&$i(x)?((I=I.slice(x,+x+(y?1:0))).__actions__.push({func:uf,args:[Z],thisArg:d}),new Ia(I,this.__chain__).thru(function(ne){return y&&!ne.length&&ne.push(d),ne})):this.thru(Z)}),Vn=Xl(function(h,y,x){dn.call(h,x)?++h[x]:el(h,x,1)}),Sd=pd(Sp),cf=pd(Ed);function xd(h,y){return(br(h)?Bi:Oo)(h,nr(y,3))}function xp(h,y){return(br(h)?Wf:yh)(h,nr(y,3))}var Rh=Xl(function(h,y,x){dn.call(h,x)?h[x].push(y):el(h,x,[y])}),Ss=kr(function(h,y,x){var I=-1,Z=typeof y=="function",ne=da(h)?vn(h.length):[];return Oo(h,function(ve){ne[++I]=Z?lo(y,ve,x):Hi(ve,y,x)}),ne}),Ch=Xl(function(h,y,x){el(h,x,y)});function uu(h,y){return(br(h)?Vr:xa)(h,nr(y,3))}var Dh=Xl(function(h,y,x){h[x?0:1].push(y)},function(){return[[],[]]}),Ap=kr(function(h,y){if(h==null)return[];var x=y.length;return x>1&&qo(h,y[0],y[1])?y=[]:x>2&&qo(y[0],y[1],y[2])&&(y=[y[0]]),bh(h,ii(y,1),[])}),ff=dh||function(){return zo.Date.now()};function jh(h,y,x){return y=x?d:y,y=h&&y==null?h.length:y,ol(h,O,d,d,d,d,y)}function Fa(h,y){var x;if(typeof y!="function")throw new we(_);return h=ut(h),function(){return--h>0&&(x=y.apply(this,arguments)),h<=1&&(y=d),x}}var Kl=kr(function(h,y,x){var I=1;if(x.length){var Z=la(x,_s(Kl));I|=T}return ol(h,I,y,x,Z)}),xs=kr(function(h,y,x){var I=3;if(x.length){var Z=la(x,_s(xs));I|=T}return ol(y,I,h,x,Z)});function zn(h,y,x){var I,Z,ne,ve,xe,Be,ht=0,bt=!1,Vt=!1,wn=!0;if(typeof h!="function")throw new we(_);function On(He){var yr=I,Br=Z;return I=Z=d,ht=He,ve=h.apply(Br,yr)}function Xn(He){return ht=He,xe=iu(tn,y),bt?On(He):ve}function Ct(He){var yr=He-Be;return Be===d||yr>=y||yr<0||Vt&&He-ht>=ne}function tn(){var He=ff();if(Ct(He))return ar(He);xe=iu(tn,function(yr){var Br=y-(yr-Be);return Vt?Wi(Br,ne-(yr-ht)):Br}(He))}function ar(He){return xe=d,wn&&I?On(He):(I=Z=d,ve)}function Mn(){var He=ff(),yr=Ct(He);if(I=arguments,Z=this,Be=He,yr){if(xe===d)return Xn(Be);if(Vt)return fd(xe),xe=iu(tn,y),On(Be)}return xe===d&&(xe=iu(tn,y)),ve}return y=$t(y)||0,Lo(x)&&(bt=!!x.leading,ne=(Vt="maxWait"in x)?Wo($t(x.maxWait)||0,y):ne,wn="trailing"in x?!!x.trailing:wn),Mn.cancel=function(){xe!==d&&fd(xe),ht=0,I=Be=Z=xe=d},Mn.flush=function(){return xe===d?ve:ar(ff())},Mn}var Tp=kr(function(h,y){return ip(h,1,y)}),Zu=kr(function(h,y,x){return ip(h,$t(y)||0,x)});function Zl(h,y){if(typeof h!="function"||y!=null&&typeof y!="function")throw new we(_);var x=function(){var I=arguments,Z=y?y.apply(this,I):I[0],ne=x.cache;if(ne.has(Z))return ne.get(Z);var ve=h.apply(this,I);return x.cache=ne.set(Z,ve)||ne,ve};return x.cache=new(Zl.Cache||Qa),x}function df(h){if(typeof h!="function")throw new we(_);return function(){var y=arguments;switch(y.length){case 0:return!h.call(this);case 1:return!h.call(this,y[0]);case 2:return!h.call(this,y[0],y[1]);case 3:return!h.call(this,y[0],y[1],y[2])}return!h.apply(this,y)}}Zl.Cache=Qa;var qi=Jv(function(h,y){var x=(y=y.length==1&&br(y[0])?Vr(y[0],po(nr())):Vr(ii(y,1),po(nr()))).length;return kr(function(I){for(var Z=-1,ne=Wi(I.length,x);++Z<ne;)I[Z]=y[Z].call(this,I[Z]);return lo(h,this,I)})}),sl=kr(function(h,y){var x=la(y,_s(sl));return ol(h,T,d,y,x)}),Io=kr(function(h,y){var x=la(y,_s(Io));return ol(h,A,d,y,x)}),fa=xl(function(h,y){return ol(h,E,d,d,d,y)});function Ba(h,y){return h===y||h!=h&&y!=y}var em=Hu(Do),pf=Hu(function(h,y){return h>=y}),cu=nd(function(){return arguments}())?nd:function(h){return Yo(h)&&dn.call(h,"callee")&&!oi.call(h,"callee")},br=vn.isArray,Ih=Mc?po(Mc):function(h){return Yo(h)&&ko(h)==mt};function da(h){return h!=null&&hf(h.length)&&!Ta(h)}function Po(h){return Yo(h)&&da(h)}var oa=ph||Ye,Mp=zf?po(zf):function(h){return Yo(h)&&ko(h)==z};function Mi(h){if(!Yo(h))return!1;var y=ko(h);return y==W||y=="[object DOMException]"||typeof h.message=="string"&&typeof h.name=="string"&&!G(h)}function Ta(h){if(!Lo(h))return!1;var y=ko(h);return y==B||y==q||y=="[object AsyncFunction]"||y=="[object Proxy]"}function fu(h){return typeof h=="number"&&h==ut(h)}function hf(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=j}function Lo(h){var y=typeof h;return h!=null&&(y=="object"||y=="function")}function Yo(h){return h!=null&&typeof h=="object"}var Ad=kc?po(kc):function(h){return Yo(h)&&jo(h)==J};function kp(h){return typeof h=="number"||Yo(h)&&ko(h)==ce}function G(h){if(!Yo(h)||ko(h)!=re)return!1;var y=Ka(h);if(y===null)return!0;var x=dn.call(y,"constructor")&&y.constructor;return typeof x=="function"&&x instanceof x&&Er.call(x)==ua}var se=Fi?po(Fi):function(h){return Yo(h)&&ko(h)==ge},Oe=ci?po(ci):function(h){return Yo(h)&&jo(h)==fe};function nt(h){return typeof h=="string"||!br(h)&&Yo(h)&&ko(h)==Ee}function pt(h){return typeof h=="symbol"||Yo(h)&&ko(h)==Ne}var Qe=_a?po(_a):function(h){return Yo(h)&&hf(h.length)&&!!Kr[ko(h)]},ft=Hu(Sl),kt=Hu(function(h,y){return h<=y});function jt(h){if(!h)return[];if(da(h))return nt(h)?ta(h):_i(h);if(Za&&h[Za])return function(x){for(var I,Z=[];!(I=x.next()).done;)Z.push(I.value);return Z}(h[Za]());var y=jo(h);return(y==J?ri:y==fe?Ea:wr)(h)}function Nt(h){return h?(h=$t(h))===C||h===-1/0?17976931348623157e292*(h<0?-1:1):h==h?h:0:h===0?h:0}function ut(h){var y=Nt(h),x=y%1;return y==y?x?y-x:y:0}function Wt(h){return h?vs(ut(h),0,L):0}function $t(h){if(typeof h=="number")return h;if(pt(h))return U;if(Lo(h)){var y=typeof h.valueOf=="function"?h.valueOf():h;h=Lo(y)?y+"":y}if(typeof h!="string")return h===0?h:+h;h=ja(h);var x=Si.test(h);return x||ni.test(h)?ga(h.slice(2),x?2:8):ui.test(h)?U:+h}function Pt(h){return nl(h,Tt(h))}function wt(h){return h==null?"":ca(h)}var qe=Js(function(h,y){if(Mt(y)||da(y))nl(y,Rt(y),h);else for(var x in y)dn.call(y,x)&&Ho(h,x,y[x])}),st=Js(function(h,y){nl(y,Tt(y),h)}),Dt=Js(function(h,y,x,I){nl(y,Tt(y),h,I)}),Qt=Js(function(h,y,x,I){nl(y,Rt(y),h,I)}),St=xl(Bc),nn=kr(function(h,y){h=P(h);var x=-1,I=y.length,Z=I>2?y[2]:d;for(Z&&qo(y[0],y[1],Z)&&(I=1);++x<I;)for(var ne=y[x],ve=Tt(ne),xe=-1,Be=ve.length;++xe<Be;){var ht=ve[xe],bt=h[ht];(bt===d||Ba(bt,zt[ht])&&!dn.call(h,ht))&&(h[ht]=ne[ht])}return h}),At=kr(function(h){return h.push(d,_p),lo(Ln,d,h)});function Gt(h,y,x){var I=h==null?d:Ol(h,y);return I===d?x:I}function xt(h,y){return h!=null&&bs(h,y,sp)}var Ht=qc(function(h,y,x){y!=null&&typeof y.toString!="function"&&(y=Fr.call(y)),h[y]=x},Nr(er)),Rn=qc(function(h,y,x){y!=null&&typeof y.toString!="function"&&(y=Fr.call(y)),dn.call(h,y)?h[y].push(x):h[y]=[x]},nr),Wn=kr(Hi);function Rt(h){return da(h)?Qf(h):$a(h)}function Tt(h){return da(h)?Qf(h,!0):gh(h)}var Ot=Js(function(h,y,x){rd(h,y,x)}),Ln=Js(function(h,y,x,I){rd(h,y,x,I)}),rr=xl(function(h,y){var x={};if(h==null)return x;var I=!1;y=Vr(y,function(ne){return ne=Yr(ne,h),I||(I=ne.length>1),ne}),nl(h,md(h),x),I&&(x=Sa(x,7,bp));for(var Z=y.length;Z--;)ad(x,y[Z]);return x}),pn=xl(function(h,y){return h==null?{}:function(x,I){return wh(x,I,function(Z,ne){return xt(x,ne)})}(h,y)});function cr(h,y){if(h==null)return{};var x=Vr(md(h),function(I){return[I]});return y=nr(y),wh(h,x,function(I,Z){return y(I,Z[0])})}var Hn=yp(Rt),ir=yp(Tt);function wr(h){return h==null?[]:Us(h,Rt(h))}var $o=ql(function(h,y,x){return y=y.toLowerCase(),h+(x?Ro(y):y)});function Ro(h){return ei(wt(h).toLowerCase())}function or(h){return(h=wt(h))&&h.replace(Un,Cc).replace(_l,"")}var Qo=ql(function(h,y,x){return h+(x?"-":"")+y.toLowerCase()}),so=ql(function(h,y,x){return h+(x?" ":"")+y.toLowerCase()}),Fo=dd("toLowerCase"),Ko=ql(function(h,y,x){return h+(x?"_":"")+y.toLowerCase()}),ai=ql(function(h,y,x){return h+(x?" ":"")+ei(y)}),hi=ql(function(h,y,x){return h+(x?" ":"")+y.toUpperCase()}),ei=dd("toUpperCase");function vo(h,y,x){return h=wt(h),(y=x?d:y)===d?function(I){return Tc.test(I)}(h)?function(I){return I.match(Nu)||[]}(h):function(I){return I.match(lt)||[]}(h):h.match(y)||[]}var Qn=kr(function(h,y){try{return lo(h,d,y)}catch(x){return Mi(x)?x:new Dr(x)}}),vi=xl(function(h,y){return Bi(y,function(x){x=al(x),el(h,x,Kl(h[x],h))}),h});function Nr(h){return function(){return h}}var In=rl(),mr=rl(!0);function er(h){return h}function mo(h){return Hl(typeof h=="function"?h:Sa(h,1))}var kl=kr(function(h,y){return function(x){return Hi(x,h,y)}}),xo=kr(function(h,y){return function(x){return Hi(h,x,y)}});function ye(h,y,x){var I=Rt(y),Z=Uc(y,I);x!=null||Lo(y)&&(Z.length||!I.length)||(x=y,y=h,h=this,Z=Uc(y,Rt(y)));var ne=!(Lo(x)&&"chain"in x&&!x.chain),ve=Ta(h);return Bi(Z,function(xe){var Be=y[xe];h[xe]=Be,ve&&(h.prototype[xe]=function(){var ht=this.__chain__;if(ne||ht){var bt=h(this.__wrapped__),Vt=bt.__actions__=_i(this.__actions__);return Vt.push({func:Be,args:arguments,thisArg:h}),bt.__chain__=ht,bt}return Be.apply(h,fi([this.value()],arguments))})}),h}function ot(){}var et=zu(Vr),sn=zu(Hf),hr=zu(Pc);function he(h){return Al(h)?Gi(al(h)):function(y){return function(x){return Ol(x,y)}}(h)}var oe=hd(),Re=hd(!0);function Ge(){return[]}function Ye(){return!1}var De=Gu(function(h,y){return h+y},0),Ce=vd("ceil"),Fe=Gu(function(h,y){return h/y},1),pe=vd("floor"),Te,de=Gu(function(h,y){return h*y},1),ze=vd("round"),We=Gu(function(h,y){return h-y},0);return ae.after=function(h,y){if(typeof y!="function")throw new we(_);return h=ut(h),function(){if(--h<1)return y.apply(this,arguments)}},ae.ary=jh,ae.assign=qe,ae.assignIn=st,ae.assignInWith=Dt,ae.assignWith=Qt,ae.at=St,ae.before=Fa,ae.bind=Kl,ae.bindAll=vi,ae.bindKey=xs,ae.castArray=function(){if(!arguments.length)return[];var h=arguments[0];return br(h)?h:[h]},ae.chain=No,ae.chunk=function(h,y,x){y=(x?qo(h,y,x):y===d)?1:Wo(ut(y),0);var I=h==null?0:h.length;if(!I||y<1)return[];for(var Z=0,ne=0,ve=vn(jc(I/y));Z<I;)ve[ne++]=Aa(h,Z,Z+=y);return ve},ae.compact=function(h){for(var y=-1,x=h==null?0:h.length,I=0,Z=[];++y<x;){var ne=h[y];ne&&(Z[I++]=ne)}return Z},ae.concat=function(){var h=arguments.length;if(!h)return[];for(var y=vn(h-1),x=arguments[0],I=h;I--;)y[I-1]=arguments[I];return fi(br(x)?_i(x):[x],ii(y,1))},ae.cond=function(h){var y=h==null?0:h.length,x=nr();return h=y?Vr(h,function(I){if(typeof I[1]!="function")throw new we(_);return[x(I[0]),I[1]]}):[],kr(function(I){for(var Z=-1;++Z<y;){var ne=h[Z];if(lo(ne[0],this,I))return lo(ne[1],this,I)}})},ae.conforms=function(h){return function(y){var x=Rt(y);return function(I){return op(I,y,x)}}(Sa(h,1))},ae.constant=Nr,ae.countBy=Vn,ae.create=function(h,y){var x=Xs(h);return y==null?x:Wl(x,y)},ae.curry=function h(y,x,I){var Z=ol(y,8,d,d,d,d,d,x=I?d:x);return Z.placeholder=h.placeholder,Z},ae.curryRight=function h(y,x,I){var Z=ol(y,S,d,d,d,d,d,x=I?d:x);return Z.placeholder=h.placeholder,Z},ae.debounce=zn,ae.defaults=nn,ae.defaultsDeep=At,ae.defer=Tp,ae.delay=Zu,ae.difference=Mh,ae.differenceBy=kh,ae.differenceWith=Nh,ae.drop=function(h,y,x){var I=h==null?0:h.length;return I?Aa(h,(y=x||y===d?1:ut(y))<0?0:y,I):[]},ae.dropRight=function(h,y,x){var I=h==null?0:h.length;return I?Aa(h,0,(y=I-(y=x||y===d?1:ut(y)))<0?0:y):[]},ae.dropRightWhile=function(h,y){return h&&h.length?ld(h,nr(y,3),!0,!0):[]},ae.dropWhile=function(h,y){return h&&h.length?ld(h,nr(y,3),!0):[]},ae.fill=function(h,y,x,I){var Z=h==null?0:h.length;return Z?(x&&typeof x!="number"&&qo(h,y,x)&&(x=0,I=Z),function(ne,ve,xe,Be){var ht=ne.length;for((xe=ut(xe))<0&&(xe=-xe>ht?0:ht+xe),(Be=Be===d||Be>ht?ht:ut(Be))<0&&(Be+=ht),Be=xe>Be?0:Wt(Be);xe<Be;)ne[xe++]=ve;return ne}(h,y,x,I)):[]},ae.filter=function(h,y){return(br(h)?Ui:Zr)(h,nr(y,3))},ae.flatMap=function(h,y){return ii(uu(h,y),1)},ae.flatMapDeep=function(h,y){return ii(uu(h,y),C)},ae.flatMapDepth=function(h,y,x){return x=x===d?1:ut(x),ii(uu(h,y),x)},ae.flatten=tf,ae.flattenDeep=function(h){return h!=null&&h.length?ii(h,C):[]},ae.flattenDepth=function(h,y){return h!=null&&h.length?ii(h,y=y===d?1:ut(y)):[]},ae.flip=function(h){return ol(h,512)},ae.flow=In,ae.flowRight=mr,ae.fromPairs=function(h){for(var y=-1,x=h==null?0:h.length,I={};++y<x;){var Z=h[y];I[Z[0]]=Z[1]}return I},ae.functions=function(h){return h==null?[]:Uc(h,Rt(h))},ae.functionsIn=function(h){return h==null?[]:Uc(h,Tt(h))},ae.groupBy=Rh,ae.initial=function(h){return h!=null&&h.length?Aa(h,0,-1):[]},ae.intersection=ll,ae.intersectionBy=Os,ae.intersectionWith=Qv,ae.invert=Ht,ae.invertBy=Rn,ae.invokeMap=Ss,ae.iteratee=mo,ae.keyBy=Ch,ae.keys=Rt,ae.keysIn=Tt,ae.map=uu,ae.mapKeys=function(h,y){var x={};return y=nr(y,3),jn(h,function(I,Z,ne){el(x,y(I,Z,ne),I)}),x},ae.mapValues=function(h,y){var x={};return y=nr(y,3),jn(h,function(I,Z,ne){el(x,Z,y(I,Z,ne))}),x},ae.matches=function(h){return up(Sa(h,1))},ae.matchesProperty=function(h,y){return cp(h,Sa(y,1))},ae.memoize=Zl,ae.merge=Ot,ae.mergeWith=Ln,ae.method=kl,ae.methodOf=xo,ae.mixin=ye,ae.negate=df,ae.nthArg=function(h){return h=ut(h),kr(function(y){return _h(y,h)})},ae.omit=rr,ae.omitBy=function(h,y){return cr(h,df(nr(y)))},ae.once=function(h){return Fa(2,h)},ae.orderBy=function(h,y,x,I){return h==null?[]:(br(y)||(y=y==null?[]:[y]),br(x=I?d:x)||(x=x==null?[]:[x]),bh(h,y,x))},ae.over=et,ae.overArgs=qi,ae.overEvery=sn,ae.overSome=hr,ae.partial=sl,ae.partialRight=Io,ae.partition=Dh,ae.pick=pn,ae.pickBy=cr,ae.property=he,ae.propertyOf=function(h){return function(y){return h==null?d:Ol(h,y)}},ae.pull=nf,ae.pullAll=au,ae.pullAllBy=function(h,y,x){return h&&h.length&&y&&y.length?od(h,y,nr(x,2)):h},ae.pullAllWith=function(h,y,x){return h&&h.length&&y&&y.length?od(h,y,d,x):h},ae.pullAt=rf,ae.range=oe,ae.rangeRight=Re,ae.rearg=fa,ae.reject=function(h,y){return(br(h)?Ui:Zr)(h,df(nr(y,3)))},ae.remove=function(h,y){var x=[];if(!h||!h.length)return x;var I=-1,Z=[],ne=h.length;for(y=nr(y,3);++I<ne;){var ve=h[I];y(ve,I,h)&&(x.push(ve),Z.push(I))}return fp(h,Z),x},ae.rest=function(h,y){if(typeof h!="function")throw new we(_);return kr(h,y=y===d?y:ut(y))},ae.reverse=Yu,ae.sampleSize=function(h,y,x){return y=(x?qo(h,y,x):y===d)?1:ut(y),(br(h)?np:pp)(h,y)},ae.set=function(h,y,x){return h==null?h:qs(h,y,x)},ae.setWith=function(h,y,x,I){return I=typeof I=="function"?I:d,h==null?h:qs(h,y,x,I)},ae.shuffle=function(h){return(br(h)?mh:Eh)(h)},ae.slice=function(h,y,x){var I=h==null?0:h.length;return I?(x&&typeof x!="number"&&qo(h,y,x)?(y=0,x=I):(y=y==null?0:ut(y),x=x===d?I:ut(x)),Aa(h,y,x)):[]},ae.sortBy=Ap,ae.sortedUniq=function(h){return h&&h.length?hp(h):[]},ae.sortedUniqBy=function(h,y){return h&&h.length?hp(h,nr(y,2)):[]},ae.split=function(h,y,x){return x&&typeof x!="number"&&qo(h,y,x)&&(y=x=d),(x=x===d?L:x>>>0)?(h=wt(h))&&(typeof y=="string"||y!=null&&!se(y))&&!(y=ca(y))&&Ya(h)?no(ta(h),0,x):h.split(y,x):[]},ae.spread=function(h,y){if(typeof h!="function")throw new we(_);return y=y==null?0:Wo(ut(y),0),kr(function(x){var I=x[y],Z=no(x,0,y);return I&&fi(Z,I),lo(h,this,Z)})},ae.tail=function(h){var y=h==null?0:h.length;return y?Aa(h,1,y):[]},ae.take=function(h,y,x){return h&&h.length?Aa(h,0,(y=x||y===d?1:ut(y))<0?0:y):[]},ae.takeRight=function(h,y,x){var I=h==null?0:h.length;return I?Aa(h,(y=I-(y=x||y===d?1:ut(y)))<0?0:y,I):[]},ae.takeRightWhile=function(h,y){return h&&h.length?ld(h,nr(y,3),!1,!0):[]},ae.takeWhile=function(h,y){return h&&h.length?ld(h,nr(y,3)):[]},ae.tap=function(h,y){return y(h),h},ae.throttle=function(h,y,x){var I=!0,Z=!0;if(typeof h!="function")throw new we(_);return Lo(x)&&(I="leading"in x?!!x.leading:I,Z="trailing"in x?!!x.trailing:Z),zn(h,y,{leading:I,maxWait:y,trailing:Z})},ae.thru=uf,ae.toArray=jt,ae.toPairs=Hn,ae.toPairsIn=ir,ae.toPath=function(h){return br(h)?Vr(h,al):pt(h)?[h]:_i(Op(wt(h)))},ae.toPlainObject=Pt,ae.transform=function(h,y,x){var I=br(h),Z=I||oa(h)||Qe(h);if(y=nr(y,4),x==null){var ne=h&&h.constructor;x=Z?I?new ne:[]:Lo(h)&&Ta(ne)?Xs(Ka(h)):{}}return(Z?Bi:jn)(h,function(ve,xe,Be){return y(x,ve,xe,Be)}),x},ae.unary=function(h){return jh(h,1)},ae.union=of,ae.unionBy=af,ae.unionWith=lf,ae.uniq=function(h){return h&&h.length?ys(h):[]},ae.uniqBy=function(h,y){return h&&h.length?ys(h,nr(y,2)):[]},ae.uniqWith=function(h,y){return y=typeof y=="function"?y:d,h&&h.length?ys(h,d,y):[]},ae.unset=function(h,y){return h==null||ad(h,y)},ae.unzip=lu,ae.unzipWith=Yl,ae.update=function(h,y,x){return h==null?h:Ys(h,y,cd(x))},ae.updateWith=function(h,y,x,I){return I=typeof I=="function"?I:d,h==null?h:Ys(h,y,cd(x),I)},ae.values=wr,ae.valuesIn=function(h){return h==null?[]:Us(h,Tt(h))},ae.without=bi,ae.words=vo,ae.wrap=function(h,y){return sl(cd(y),h)},ae.xor=Od,ae.xorBy=sf,ae.xorWith=su,ae.zip=Ku,ae.zipObject=function(h,y){return Hc(h||[],y||[],Ho)},ae.zipObjectDeep=function(h,y){return Hc(h||[],y||[],qs)},ae.zipWith=Ti,ae.entries=Hn,ae.entriesIn=ir,ae.extend=st,ae.extendWith=Dt,ye(ae,ae),ae.add=De,ae.attempt=Qn,ae.camelCase=$o,ae.capitalize=Ro,ae.ceil=Ce,ae.clamp=function(h,y,x){return x===d&&(x=y,y=d),x!==d&&(x=(x=$t(x))==x?x:0),y!==d&&(y=(y=$t(y))==y?y:0),vs($t(h),y,x)},ae.clone=function(h){return Sa(h,4)},ae.cloneDeep=function(h){return Sa(h,5)},ae.cloneDeepWith=function(h,y){return Sa(h,5,y=typeof y=="function"?y:d)},ae.cloneWith=function(h,y){return Sa(h,4,y=typeof y=="function"?y:d)},ae.conformsTo=function(h,y){return y==null||op(h,y,Rt(y))},ae.deburr=or,ae.defaultTo=function(h,y){return h==null||h!=h?y:h},ae.divide=Fe,ae.endsWith=function(h,y,x){h=wt(h),y=ca(y);var I=h.length,Z=x=x===d?I:vs(ut(x),0,I);return(x-=y.length)>=0&&h.slice(x,Z)==y},ae.eq=Ba,ae.escape=function(h){return(h=wt(h))&&An.test(h)?h.replace(yn,Jo):h},ae.escapeRegExp=function(h){return(h=wt(h))&&wo.test(h)?h.replace(io,"\\$&"):h},ae.every=function(h,y,x){var I=br(h)?Hf:ap;return x&&qo(h,y,x)&&(y=d),I(h,nr(y,3))},ae.find=Sd,ae.findIndex=Sp,ae.findKey=function(h,y){return Xa(h,nr(y,3),jn)},ae.findLast=cf,ae.findLastIndex=Ed,ae.findLastKey=function(h,y){return Xa(h,nr(y,3),fo)},ae.floor=pe,ae.forEach=xd,ae.forEachRight=xp,ae.forIn=function(h,y){return h==null?h:Mr(h,nr(y,3),Tt)},ae.forInRight=function(h,y){return h==null?h:co(h,nr(y,3),Tt)},ae.forOwn=function(h,y){return h&&jn(h,nr(y,3))},ae.forOwnRight=function(h,y){return h&&fo(h,nr(y,3))},ae.get=Gt,ae.gt=em,ae.gte=pf,ae.has=function(h,y){return h!=null&&bs(h,y,lp)},ae.hasIn=xt,ae.head=Ph,ae.identity=er,ae.includes=function(h,y,x,I){h=da(h)?h:wr(h),x=x&&!I?ut(x):0;var Z=h.length;return x<0&&(x=Wo(Z+x,0)),nt(h)?x<=Z&&h.indexOf(y,x)>-1:!!Z&&us(h,y,x)>-1},ae.indexOf=function(h,y,x){var I=h==null?0:h.length;if(!I)return-1;var Z=x==null?0:ut(x);return Z<0&&(Z=Wo(I+Z,0)),us(h,y,Z)},ae.inRange=function(h,y,x){return y=Nt(y),x===d?(x=y,y=0):x=Nt(x),function(I,Z,ne){return I>=Wi(Z,ne)&&I<Wo(Z,ne)}(h=$t(h),y,x)},ae.invoke=Wn,ae.isArguments=cu,ae.isArray=br,ae.isArrayBuffer=Ih,ae.isArrayLike=da,ae.isArrayLikeObject=Po,ae.isBoolean=function(h){return h===!0||h===!1||Yo(h)&&ko(h)==Y},ae.isBuffer=oa,ae.isDate=Mp,ae.isElement=function(h){return Yo(h)&&h.nodeType===1&&!G(h)},ae.isEmpty=function(h){if(h==null)return!0;if(da(h)&&(br(h)||typeof h=="string"||typeof h.splice=="function"||oa(h)||Qe(h)||cu(h)))return!h.length;var y=jo(h);if(y==J||y==fe)return!h.size;if(Mt(h))return!$a(h).length;for(var x in h)if(dn.call(h,x))return!1;return!0},ae.isEqual=function(h,y){return Uu(h,y)},ae.isEqualWith=function(h,y,x){var I=(x=typeof x=="function"?x:d)?x(h,y):d;return I===d?Uu(h,y,d,x):!!I},ae.isError=Mi,ae.isFinite=function(h){return typeof h=="number"&&Ws(h)},ae.isFunction=Ta,ae.isInteger=fu,ae.isLength=hf,ae.isMap=Ad,ae.isMatch=function(h,y){return h===y||La(h,y,Kc(y))},ae.isMatchWith=function(h,y,x){return x=typeof x=="function"?x:d,La(h,y,Kc(y),x)},ae.isNaN=function(h){return kp(h)&&h!=+h},ae.isNative=function(h){if(gd(h))throw new Dr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ms(h)},ae.isNil=function(h){return h==null},ae.isNull=function(h){return h===null},ae.isNumber=kp,ae.isObject=Lo,ae.isObjectLike=Yo,ae.isPlainObject=G,ae.isRegExp=se,ae.isSafeInteger=function(h){return fu(h)&&h>=-9007199254740991&&h<=j},ae.isSet=Oe,ae.isString=nt,ae.isSymbol=pt,ae.isTypedArray=Qe,ae.isUndefined=function(h){return h===d},ae.isWeakMap=function(h){return Yo(h)&&jo(h)==rt},ae.isWeakSet=function(h){return Yo(h)&&ko(h)=="[object WeakSet]"},ae.join=function(h,y){return h==null?"":Ic.call(h,y)},ae.kebabCase=Qo,ae.last=So,ae.lastIndexOf=function(h,y,x){var I=h==null?0:h.length;if(!I)return-1;var Z=I;return x!==d&&(Z=(Z=ut(x))<0?Wo(I+Z,0):Wi(Z,I-1)),y==y?function(ne,ve,xe){for(var Be=xe+1;Be--;)if(ne[Be]===ve)return Be;return Be}(h,y,Z):Vi(h,ba,Z,!0)},ae.lowerCase=so,ae.lowerFirst=Fo,ae.lt=ft,ae.lte=kt,ae.max=function(h){return h&&h.length?Xo(h,er,Do):d},ae.maxBy=function(h,y){return h&&h.length?Xo(h,nr(y,2),Do):d},ae.mean=function(h){return Cr(h,er)},ae.meanBy=function(h,y){return Cr(h,nr(y,2))},ae.min=function(h){return h&&h.length?Xo(h,er,Sl):d},ae.minBy=function(h,y){return h&&h.length?Xo(h,nr(y,2),Sl):d},ae.stubArray=Ge,ae.stubFalse=Ye,ae.stubObject=function(){return{}},ae.stubString=function(){return""},ae.stubTrue=function(){return!0},ae.multiply=de,ae.nth=function(h,y){return h&&h.length?_h(h,ut(y)):d},ae.noConflict=function(){return zo._===this&&(zo._=Mo),this},ae.noop=ot,ae.now=ff,ae.pad=function(h,y,x){h=wt(h);var I=(y=ut(y))?zi(h):0;if(!y||I>=y)return h;var Z=(y-I)/2;return Wu(zs(Z),x)+h+Wu(jc(Z),x)},ae.padEnd=function(h,y,x){h=wt(h);var I=(y=ut(y))?zi(h):0;return y&&I<y?h+Wu(y-I,x):h},ae.padStart=function(h,y,x){h=wt(h);var I=(y=ut(y))?zi(h):0;return y&&I<y?Wu(y-I,x)+h:h},ae.parseInt=function(h,y,x){return x||y==null?y=0:y&&(y=+y),Zf(wt(h).replace(Yn,""),y||0)},ae.random=function(h,y,x){if(x&&typeof x!="boolean"&&qo(h,y,x)&&(y=x=d),x===d&&(typeof y=="boolean"?(x=y,y=d):typeof h=="boolean"&&(x=h,h=d)),h===d&&y===d?(h=0,y=1):(h=Nt(h),y===d?(y=h,h=0):y=Nt(y)),h>y){var I=h;h=y,y=I}if(x||h%1||y%1){var Z=Iu();return Wi(h+Z*(y-h+ls("1e-"+((Z+"").length-1))),y)}return dp(h,y)},ae.reduce=function(h,y,x){var I=br(h)?Cu:gi,Z=arguments.length<3;return I(h,nr(y,4),x,Z,Oo)},ae.reduceRight=function(h,y,x){var I=br(h)?Xf:gi,Z=arguments.length<3;return I(h,nr(y,4),x,Z,yh)},ae.repeat=function(h,y,x){return y=(x?qo(h,y,x):y===d)?1:ut(y),Gc(wt(h),y)},ae.replace=function(){var h=arguments,y=wt(h[0]);return h.length<3?y:y.replace(h[1],h[2])},ae.result=function(h,y,x){var I=-1,Z=(y=Yr(y,h)).length;for(Z||(Z=1,h=d);++I<Z;){var ne=h==null?d:h[al(y[I])];ne===d&&(I=Z,ne=x),h=Ta(ne)?ne.call(h):ne}return h},ae.round=ze,ae.runInContext=ct,ae.sample=function(h){return(br(h)?ed:Yv)(h)},ae.size=function(h){if(h==null)return 0;if(da(h))return nt(h)?zi(h):h.length;var y=jo(h);return y==J||y==fe?h.size:$a(h).length},ae.snakeCase=Ko,ae.some=function(h,y,x){var I=br(h)?Pc:Zv;return x&&qo(h,y,x)&&(y=d),I(h,nr(y,3))},ae.sortedIndex=function(h,y){return Wc(h,y)},ae.sortedIndexBy=function(h,y,x){return id(h,y,nr(x,2))},ae.sortedIndexOf=function(h,y){var x=h==null?0:h.length;if(x){var I=Wc(h,y);if(I<x&&Ba(h[I],y))return I}return-1},ae.sortedLastIndex=function(h,y){return Wc(h,y,!0)},ae.sortedLastIndexBy=function(h,y,x){return id(h,y,nr(x,2),!0)},ae.sortedLastIndexOf=function(h,y){if(h!=null&&h.length){var x=Wc(h,y,!0)-1;if(Ba(h[x],y))return x}return-1},ae.startCase=ai,ae.startsWith=function(h,y,x){return h=wt(h),x=x==null?0:vs(ut(x),0,h.length),y=ca(y),h.slice(x,x+y.length)==y},ae.subtract=We,ae.sum=function(h){return h&&h.length?cs(h,er):0},ae.sumBy=function(h,y){return h&&h.length?cs(h,nr(y,2)):0},ae.template=function(h,y,x){var I=ae.templateSettings;x&&qo(h,y,x)&&(y=d),h=wt(h),y=Dt({},y,I,gp);var Z,ne,ve=Dt({},y.imports,I.imports,gp),xe=Rt(ve),Be=Us(ve,xe),ht=0,bt=y.interpolate||Kn,Vt="__p += '",wn=X((y.escape||Kn).source+"|"+bt.source+"|"+(bt===lr?Dn:Kn).source+"|"+(y.evaluate||Kn).source+"|$","g"),On="//# sourceURL="+(dn.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Uf+"]")+`
`;h.replace(wn,function(tn,ar,Mn,He,yr,Br){return Mn||(Mn=He),Vt+=h.slice(ht,Br).replace(ur,Vs),ar&&(Z=!0,Vt+=`' +
__e(`+ar+`) +
'`),yr&&(ne=!0,Vt+=`';
`+yr+`;
__p += '`),Mn&&(Vt+=`' +
((__t = (`+Mn+`)) == null ? '' : __t) +
'`),ht=Br+tn.length,tn}),Vt+=`';
`;var Xn=dn.call(y,"variable")&&y.variable;if(Xn){if(on.test(Xn))throw new Dr("Invalid `variable` option passed into `_.template`")}else Vt=`with (obj) {
`+Vt+`
}
`;Vt=(ne?Vt.replace(Et,""):Vt).replace(rn,"$1").replace(Kt,"$1;"),Vt="function("+(Xn||"obj")+`) {
`+(Xn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Z?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Vt+`return __p
}`;var Ct=Qn(function(){return ho(xe,On+"return "+Vt).apply(d,Be)});if(Ct.source=Vt,Mi(Ct))throw Ct;return Ct},ae.times=function(h,y){if((h=ut(h))<1||h>j)return[];var x=L,I=Wi(h,L);y=nr(y),h-=L;for(var Z=Fl(I,y);++x<h;)y(x);return Z},ae.toFinite=Nt,ae.toInteger=ut,ae.toLength=Wt,ae.toLower=function(h){return wt(h).toLowerCase()},ae.toNumber=$t,ae.toSafeInteger=function(h){return h?vs(ut(h),-9007199254740991,j):h===0?h:0},ae.toString=wt,ae.toUpper=function(h){return wt(h).toUpperCase()},ae.trim=function(h,y,x){if((h=wt(h))&&(x||y===d))return ja(h);if(!h||!(y=ca(y)))return h;var I=ta(h),Z=ta(y);return no(I,wa(I,Z),Rc(I,Z)+1).join("")},ae.trimEnd=function(h,y,x){if((h=wt(h))&&(x||y===d))return h.slice(0,di(h)+1);if(!h||!(y=ca(y)))return h;var I=ta(h);return no(I,0,Rc(I,ta(y))+1).join("")},ae.trimStart=function(h,y,x){if((h=wt(h))&&(x||y===d))return h.replace(Yn,"");if(!h||!(y=ca(y)))return h;var I=ta(h);return no(I,wa(I,ta(y))).join("")},ae.truncate=function(h,y){var x=30,I="...";if(Lo(y)){var Z="separator"in y?y.separator:Z;x="length"in y?ut(y.length):x,I="omission"in y?ca(y.omission):I}var ne=(h=wt(h)).length;if(Ya(h)){var ve=ta(h);ne=ve.length}if(x>=ne)return h;var xe=x-zi(I);if(xe<1)return I;var Be=ve?no(ve,0,xe).join(""):h.slice(0,xe);if(Z===d)return Be+I;if(ve&&(xe+=Be.length-xe),se(Z)){if(h.slice(xe).search(Z)){var ht,bt=Be;for(Z.global||(Z=X(Z.source,wt(Sr.exec(Z))+"g")),Z.lastIndex=0;ht=Z.exec(bt);)var Vt=ht.index;Be=Be.slice(0,Vt===d?xe:Vt)}}else if(h.indexOf(ca(Z),xe)!=xe){var wn=Be.lastIndexOf(Z);wn>-1&&(Be=Be.slice(0,wn))}return Be+I},ae.unescape=function(h){return(h=wt(h))&&dt.test(h)?h.replace(Pn,sa):h},ae.uniqueId=function(h){var y=++qr;return wt(h)+y},ae.upperCase=hi,ae.upperFirst=ei,ae.each=xd,ae.eachRight=xp,ae.first=Ph,ye(ae,(Te={},jn(ae,function(h,y){dn.call(ae.prototype,y)||(Te[y]=h)}),Te),{chain:!1}),ae.VERSION="4.17.21",Bi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){ae[h].placeholder=ae}),Bi(["drop","take"],function(h,y){jr.prototype[h]=function(x){x=x===d?1:Wo(ut(x),0);var I=this.__filtered__&&!y?new jr(this):this.clone();return I.__filtered__?I.__takeCount__=Wi(x,I.__takeCount__):I.__views__.push({size:Wi(x,L),type:h+(I.__dir__<0?"Right":"")}),I},jr.prototype[h+"Right"]=function(x){return this.reverse()[h](x).reverse()}}),Bi(["filter","map","takeWhile"],function(h,y){var x=y+1,I=x==1||x==3;jr.prototype[h]=function(Z){var ne=this.clone();return ne.__iteratees__.push({iteratee:nr(Z,3),type:x}),ne.__filtered__=ne.__filtered__||I,ne}}),Bi(["head","last"],function(h,y){var x="take"+(y?"Right":"");jr.prototype[h]=function(){return this[x](1).value()[0]}}),Bi(["initial","tail"],function(h,y){var x="drop"+(y?"":"Right");jr.prototype[h]=function(){return this.__filtered__?new jr(this):this[x](1)}}),jr.prototype.compact=function(){return this.filter(er)},jr.prototype.find=function(h){return this.filter(h).head()},jr.prototype.findLast=function(h){return this.reverse().find(h)},jr.prototype.invokeMap=kr(function(h,y){return typeof h=="function"?new jr(this):this.map(function(x){return Hi(x,h,y)})}),jr.prototype.reject=function(h){return this.filter(df(nr(h)))},jr.prototype.slice=function(h,y){h=ut(h);var x=this;return x.__filtered__&&(h>0||y<0)?new jr(x):(h<0?x=x.takeRight(-h):h&&(x=x.drop(h)),y!==d&&(x=(y=ut(y))<0?x.dropRight(-y):x.take(y-h)),x)},jr.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},jr.prototype.toArray=function(){return this.take(L)},jn(jr.prototype,function(h,y){var x=/^(?:filter|find|map|reject)|While$/.test(y),I=/^(?:head|last)$/.test(y),Z=ae[I?"take"+(y=="last"?"Right":""):y],ne=I||/^find/.test(y);Z&&(ae.prototype[y]=function(){var ve=this.__wrapped__,xe=I?[1]:arguments,Be=ve instanceof jr,ht=xe[0],bt=Be||br(ve),Vt=function(ar){var Mn=Z.apply(ae,fi([ar],xe));return I&&wn?Mn[0]:Mn};bt&&x&&typeof ht=="function"&&ht.length!=1&&(Be=bt=!1);var wn=this.__chain__,On=!!this.__actions__.length,Xn=ne&&!wn,Ct=Be&&!On;if(!ne&&bt){ve=Ct?ve:new jr(this);var tn=h.apply(ve,xe);return tn.__actions__.push({func:uf,args:[Vt],thisArg:d}),new Ia(tn,wn)}return Xn&&Ct?h.apply(this,xe):(tn=this.thru(Vt),Xn?I?tn.value()[0]:tn.value():tn)})}),Bi(["pop","push","shift","sort","splice","unshift"],function(h){var y=Xe[h],x=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",I=/^(?:pop|shift)$/.test(h);ae.prototype[h]=function(){var Z=arguments;if(I&&!this.__chain__){var ne=this.value();return y.apply(br(ne)?ne:[],Z)}return this[x](function(ve){return y.apply(br(ve)?ve:[],Z)})}}),jn(jr.prototype,function(h,y){var x=ae[y];if(x){var I=x.name+"";dn.call(hs,I)||(hs[I]=[]),hs[I].push({name:y,func:x})}}),hs[Xc(d,2).name]=[{name:"wrapper",func:d}],jr.prototype.clone=function(){var h=new jr(this.__wrapped__);return h.__actions__=_i(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=_i(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=_i(this.__views__),h},jr.prototype.reverse=function(){if(this.__filtered__){var h=new jr(this);h.__dir__=-1,h.__filtered__=!0}else(h=this.clone()).__dir__*=-1;return h},jr.prototype.value=function(){var h=this.__wrapped__.value(),y=this.__dir__,x=br(h),I=y<0,Z=x?h.length:0,ne=function(Br,Zn,fr){for(var ki=-1,Ua=fr.length;++ki<Ua;){var Jl=fr[ki],Ni=Jl.size;switch(Jl.type){case"drop":Br+=Ni;break;case"dropRight":Zn-=Ni;break;case"take":Zn=Wi(Zn,Br+Ni);break;case"takeRight":Br=Wo(Br,Zn-Ni)}}return{start:Br,end:Zn}}(0,Z,this.__views__),ve=ne.start,xe=ne.end,Be=xe-ve,ht=I?xe:ve-1,bt=this.__iteratees__,Vt=bt.length,wn=0,On=Wi(Be,this.__takeCount__);if(!x||!I&&Z==Be&&On==Be)return vp(h,this.__actions__);var Xn=[];e:for(;Be--&&wn<On;){for(var Ct=-1,tn=h[ht+=y];++Ct<Vt;){var ar=bt[Ct],Mn=ar.iteratee,He=ar.type,yr=Mn(tn);if(He==2)tn=yr;else if(!yr){if(He==1)continue e;break e}}Xn[wn++]=tn}return Xn},ae.prototype.at=Xi,ae.prototype.chain=function(){return No(this)},ae.prototype.commit=function(){return new Ia(this.value(),this.__chain__)},ae.prototype.next=function(){this.__values__===d&&(this.__values__=jt(this.value()));var h=this.__index__>=this.__values__.length;return{done:h,value:h?d:this.__values__[this.__index__++]}},ae.prototype.plant=function(h){for(var y,x=this;x instanceof Vl;){var I=wd(x);I.__index__=0,I.__values__=d,y?Z.__wrapped__=I:y=I;var Z=I;x=x.__wrapped__}return Z.__wrapped__=h,y},ae.prototype.reverse=function(){var h=this.__wrapped__;if(h instanceof jr){var y=h;return this.__actions__.length&&(y=new jr(this)),(y=y.reverse()).__actions__.push({func:uf,args:[Yu],thisArg:d}),new Ia(y,this.__chain__)}return this.thru(Yu)},ae.prototype.toJSON=ae.prototype.valueOf=ae.prototype.value=function(){return vp(this.__wrapped__,this.__actions__)},ae.prototype.first=ae.prototype.head,Za&&(ae.prototype[Za]=function(){return this}),ae}();zo._=Ii,(p=(function(){return Ii}).call(a,r,a,c))===d||(c.exports=p)}).call(this)}).call(this,r(68),r(221)(n))},function(n,a,r){var s=r(7),c=r(34),p=r(33),d=r(87),_=r(62),g=r(174),b=r(28),S=s.TypeError,T=b("toPrimitive");n.exports=function(A,O){if(!p(A)||d(A))return A;var E,C=_(A,T);if(C){if(O===void 0&&(O="default"),E=c(C,A,O),!p(E)||d(E))return E;throw S("Can't convert object to primitive value")}return O===void 0&&(O="number"),g(A,O)}},function(n,a,r){var s=r(108);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,a,r){var s=r(36),c=r(18),p=r(91);n.exports=!s&&!c(function(){return Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a!=7})},function(n,a,r){var s=r(35),c=r(135),p=r(50),d=r(38);n.exports=function(_,g){for(var b=c(g),S=d.f,T=p.f,A=0;A<b.length;A++){var O=b[A];s(_,O)||S(_,O,T(g,O))}}},function(n,a,r){var s=r(46),c=r(15),p=r(74),d=r(112),_=r(32),g=c([].concat);n.exports=s("Reflect","ownKeys")||function(b){var S=p.f(_(b)),T=d.f;return T?g(S,T(b)):S}},function(n,a,r){var s=r(15),c=r(35),p=r(41),d=r(137).indexOf,_=r(72),g=s([].push);n.exports=function(b,S){var T,A=p(b),O=0,E=[];for(T in A)!c(_,T)&&c(A,T)&&g(E,T);for(;S.length>O;)c(A,T=S[O++])&&(~d(E,T)||g(E,T));return E}},function(n,a,r){var s=r(41),c=r(75),p=r(45),d=function(_){return function(g,b,S){var T,A=s(g),O=p(A),E=c(S,O);if(_&&b!=b){for(;O>E;)if((T=A[E++])!=T)return!0}else for(;O>E;E++)if((_||E in A)&&A[E]===b)return _||E||0;return!_&&-1}};n.exports={includes:d(!0),indexOf:d(!1)}},function(n,a,r){var s=r(46);n.exports=s("document","documentElement")},function(n,a,r){var s=r(51),c=r(41),p=r(74).f,d=r(114),_=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(g){return _&&s(g)=="Window"?function(b){try{return p(b)}catch{return d(_)}}(g):p(c(g))}},function(n,a,r){var s=r(28);a.f=s},function(n,a,r){var s=r(177),c=r(35),p=r(140),d=r(38).f;n.exports=function(_){var g=s.Symbol||(s.Symbol={});c(g,_)||d(g,_,{value:p.f(_)})}},function(n,a,r){var s,c,p,d=r(18),_=r(30),g=r(60),b=r(101),S=r(42),T=r(28),A=r(71),O=T("iterator"),E=!1;[].keys&&("next"in(p=[].keys())?(c=b(b(p)))!==Object.prototype&&(s=c):E=!0),s==null||d(function(){var C={};return s[O].call(C)!==C})?s={}:A&&(s=g(s)),_(s[O])||S(s,O,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:E}},function(n,a,r){var s=r(18);n.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,a,r){var s=r(16),c=r(15),p=r(72),d=r(33),_=r(35),g=r(38).f,b=r(74),S=r(139),T=r(183),A=r(90),O=r(185),E=!1,C=A("meta"),j=0,U=function(V){g(V,C,{value:{objectID:"O"+j++,weakData:{}}})},L=n.exports={enable:function(){L.enable=function(){},E=!0;var V=b.f,$=c([].splice),H={};H[C]=1,V(H).length&&(b.f=function(Y){for(var z=V(Y),W=0,B=z.length;W<B;W++)if(z[W]===C){$(z,W,1);break}return z},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:S.f}))},fastKey:function(V,$){if(!d(V))return typeof V=="symbol"?V:(typeof V=="string"?"S":"P")+V;if(!_(V,C)){if(!T(V))return"F";if(!$)return"E";U(V)}return V[C].objectID},getWeakData:function(V,$){if(!_(V,C)){if(!T(V))return!0;if(!$)return!1;U(V)}return V[C].weakData},onFreeze:function(V){return O&&E&&T(V)&&!_(V,C)&&U(V),V}};p[C]=!0},function(n,a,r){var s=r(28),c=r(80),p=s("iterator"),d=Array.prototype;n.exports=function(_){return _!==void 0&&(c.Array===_||d[p]===_)}},function(n,a,r){var s=r(7),c=r(34),p=r(56),d=r(32),_=r(88),g=r(118),b=s.TypeError;n.exports=function(S,T){var A=arguments.length<2?g(S):T;if(p(A))return d(c(A,S));throw b(_(S)+" is not iterable")}},function(n,a,r){var s=r(34),c=r(32),p=r(62);n.exports=function(d,_,g){var b,S;c(d);try{if(!(b=p(d,"return"))){if(_==="throw")throw g;return g}b=s(b,d)}catch(T){S=!0,b=T}if(_==="throw")throw g;if(S)throw b;return c(b),g}},function(n,a,r){var s=r(30),c=r(33),p=r(102);n.exports=function(d,_,g){var b,S;return p&&s(b=_.constructor)&&b!==g&&c(S=b.prototype)&&S!==g.prototype&&p(d,S),d}},function(n,a,r){var s=r(42);n.exports=function(c,p,d){for(var _ in p)s(c,_,p[_],d);return c}},function(n,a,r){var s=r(46),c=r(38),p=r(28),d=r(36),_=p("species");n.exports=function(g){var b=s(g),S=c.f;d&&b&&!b[_]&&S(b,_,{configurable:!0,get:function(){return this}})}},function(n,a,r){var s=r(15),c=r(59),p=r(39),d=r(44),_=s("".charAt),g=s("".charCodeAt),b=s("".slice),S=function(T){return function(A,O){var E,C,j=p(d(A)),U=c(O),L=j.length;return U<0||U>=L?T?"":void 0:(E=g(j,U))<55296||E>56319||U+1===L||(C=g(j,U+1))<56320||C>57343?T?_(j,U):E:T?b(j,U,U+2):C-56320+(E-55296<<10)+65536}};n.exports={codeAt:S(!1),charAt:S(!0)}},function(n,a){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,a,r){var s=r(91)("span").classList,c=s&&s.constructor&&s.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,a,r){var s=r(32);n.exports=function(){var c=s(this),p="";return c.global&&(p+="g"),c.ignoreCase&&(p+="i"),c.multiline&&(p+="m"),c.dotAll&&(p+="s"),c.unicode&&(p+="u"),c.sticky&&(p+="y"),p}},function(n,a,r){var s=r(18),c=r(7).RegExp,p=s(function(){var g=c("a","y");return g.lastIndex=2,g.exec("abcd")!=null}),d=p||s(function(){return!c("a","y").sticky}),_=p||s(function(){var g=c("^r","gy");return g.lastIndex=2,g.exec("str")!=null});n.exports={BROKEN_CARET:_,MISSED_STICKY:d,UNSUPPORTED_Y:p}},function(n,a,r){var s=r(16),c=r(79).find,p=r(100),d="find",_=!0;d in[]&&Array(1).find(function(){_=!1}),s({target:"Array",proto:!0,forced:_},{find:function(g){return c(this,g,arguments.length>1?arguments[1]:void 0)}}),p(d)},function(n,a,r){var s=r(16),c=r(137).includes,p=r(100);s({target:"Array",proto:!0},{includes:function(d){return c(this,d,arguments.length>1?arguments[1]:void 0)}}),p("includes")},function(n,a,r){var s=r(16),c=r(15),p=r(197),d=r(44),_=r(39),g=r(198),b=c("".indexOf);s({target:"String",proto:!0,forced:!g("includes")},{includes:function(S){return!!~b(_(d(this)),_(p(S)),arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var s=r(33),c=r(51),p=r(28)("match");n.exports=function(d){var _;return s(d)&&((_=d[p])!==void 0?!!_:c(d)=="RegExp")}},function(n,a,r){var s=r(15);n.exports=s(1 .valueOf)},function(n,a,r){var s=r(15),c=r(44),p=r(39),d=r(162),_=s("".replace),g="["+d+"]",b=RegExp("^"+g+g+"*"),S=RegExp(g+g+"*$"),T=function(A){return function(O){var E=p(c(O));return 1&A&&(E=_(E,b,"")),2&A&&(E=_(E,S,"")),E}};n.exports={start:T(1),end:T(2),trim:T(3)}},function(n,a){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,a){var r,s,c=n.exports={};function p(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function _(j){if(r===setTimeout)return setTimeout(j,0);if((r===p||!r)&&setTimeout)return r=setTimeout,setTimeout(j,0);try{return r(j,0)}catch{try{return r.call(null,j,0)}catch{return r.call(this,j,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:p}catch{r=p}try{s=typeof clearTimeout=="function"?clearTimeout:d}catch{s=d}})();var g,b=[],S=!1,T=-1;function A(){S&&g&&(S=!1,g.length?b=g.concat(b):T=-1,b.length&&O())}function O(){if(!S){var j=_(A);S=!0;for(var U=b.length;U;){for(g=b,b=[];++T<U;)g&&g[T].run();T=-1,U=b.length}g=null,S=!1,function(L){if(s===clearTimeout)return clearTimeout(L);if((s===d||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(L);try{s(L)}catch{try{return s.call(null,L)}catch{return s.call(this,L)}}}(j)}}function E(j,U){this.fun=j,this.array=U}function C(){}c.nextTick=function(j){var U=new Array(arguments.length-1);if(arguments.length>1)for(var L=1;L<arguments.length;L++)U[L-1]=arguments[L];b.push(new E(j,U)),b.length!==1||S||_(O)},E.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=C,c.addListener=C,c.once=C,c.off=C,c.removeListener=C,c.removeAllListeners=C,c.emit=C,c.prependListener=C,c.prependOnceListener=C,c.listeners=function(j){return[]},c.binding=function(j){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(j){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,a,r){var s=r(32),c=r(165),p=r(28)("species");n.exports=function(d,_){var g,b=s(d).constructor;return b===void 0||(g=s(b)[p])==null?_:c(g)}},function(n,a,r){var s=r(7),c=r(99),p=r(88),d=s.TypeError;n.exports=function(_){if(c(_))return _;throw d(p(_)+" is not a constructor")}},function(n,a,r){var s=r(16),c=r(161).trim;s({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,a,r){var s=r(34),c=r(123),p=r(32),d=r(94),_=r(39),g=r(44),b=r(62),S=r(124),T=r(125);c("match",function(A,O,E){return[function(C){var j=g(this),U=C==null?void 0:b(C,A);return U?s(U,C,j):new RegExp(C)[A](_(j))},function(C){var j=p(this),U=_(C),L=E(O,j,U);if(L.done)return L.value;if(!j.global)return T(j,U);var V=j.unicode;j.lastIndex=0;for(var $,H=[],Y=0;($=T(j,U))!==null;){var z=_($[0]);H[Y]=z,z===""&&(j.lastIndex=S(U,d(j.lastIndex),V)),Y++}return Y===0?null:H}]})},function(n,a,r){var s,c,p,d,_=r(7),g=r(76),b=r(64),S=r(30),T=r(35),A=r(18),O=r(138),E=r(98),C=r(91),j=r(169),U=r(128),L=_.setImmediate,V=_.clearImmediate,$=_.process,H=_.Dispatch,Y=_.Function,z=_.MessageChannel,W=_.String,B=0,q={},J="onreadystatechange";try{s=_.location}catch{}var ce=function(fe){if(T(q,fe)){var Ee=q[fe];delete q[fe],Ee()}},re=function(fe){return function(){ce(fe)}},Pe=function(fe){ce(fe.data)},ge=function(fe){_.postMessage(W(fe),s.protocol+"//"+s.host)};L&&V||(L=function(fe){var Ee=E(arguments,1);return q[++B]=function(){g(S(fe)?fe:Y(fe),void 0,Ee)},c(B),B},V=function(fe){delete q[fe]},U?c=function(fe){$.nextTick(re(fe))}:H&&H.now?c=function(fe){H.now(re(fe))}:z&&!j?(d=(p=new z).port2,p.port1.onmessage=Pe,c=b(d.postMessage,d)):_.addEventListener&&S(_.postMessage)&&!_.importScripts&&s&&s.protocol!=="file:"&&!A(ge)?(c=ge,_.addEventListener("message",Pe,!1)):c=J in C("script")?function(fe){O.appendChild(C("script")).onreadystatechange=function(){O.removeChild(this),ce(fe)}}:function(fe){setTimeout(re(fe),0)}),n.exports={set:L,clear:V}},function(n,a,r){var s=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(n,a,r){var s=r(56),c=function(p){var d,_;this.promise=new p(function(g,b){if(d!==void 0||_!==void 0)throw TypeError("Bad Promise constructor");d=g,_=b}),this.resolve=s(d),this.reject=s(_)};n.exports.f=function(p){return new c(p)}},function(n,a,r){a.a=function(){return!1}},function(n,a,r){(function(s){r.d(a,"a",function(){return $});var c=r(1);function p(z){throw new Error("[mobx-utils] "+z)}function d(z,W){W===void 0&&(W="Illegal state"),z||p(W)}var _=function(z){return z&&z!==Object.prototype&&Object.getOwnPropertyNames(z).concat(_(Object.getPrototypeOf(z))||[])},g=function(z){return function(W){var B=_(W);return B.filter(function(q,J){return B.indexOf(q)===J})}(z).filter(function(W){return W!=="constructor"&&!~W.indexOf("__")})},b="pending",S="fulfilled",T="rejected";function A(z){switch(this.state){case b:return z.pending&&z.pending(this.value);case T:return z.rejected&&z.rejected(this.value);case S:return z.fulfilled?z.fulfilled(this.value):this.value}}function O(z,W){if(d(arguments.length<=2,"fromPromise expects up to two arguments"),d(typeof z=="function"||typeof z=="object"&&z&&typeof z.then=="function","Please pass a promise or function to fromPromise"),z.isPromiseBasedObservable===!0)return z;typeof z=="function"&&(z=new Promise(z));var B=z;z.then(Object(c.k)("observableFromPromise-resolve",function(J){B.value=J,B.state=S}),Object(c.k)("observableFromPromise-reject",function(J){B.value=J,B.state=T})),B.isPromiseBasedObservable=!0,B.case=A;var q=W&&W.state===S?W.value:void 0;return Object(c.q)(B,{value:q,state:b},{},{deep:!1}),B}(function(z){z.reject=Object(c.k)("fromPromise.reject",function(W){var B=z(Promise.reject(W));return B.state=T,B.value=W,B}),z.resolve=Object(c.k)("fromPromise.resolve",function(W){W===void 0&&(W=void 0);var B=z(Promise.resolve(W));return B.state=S,B.value=W,B})})(O||(O={}));var E=function(z,W,B,q){var J,ce=arguments.length,re=ce<3?W:q===null?q=Object.getOwnPropertyDescriptor(W,B):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(z,W,B,q);else for(var Pe=z.length-1;Pe>=0;Pe--)(J=z[Pe])&&(re=(ce<3?J(re):ce>3?J(W,B,re):J(W,B))||re);return ce>3&&re&&Object.defineProperty(W,B,re),re};(function(){function z(W,B){var q=this;Object(c.G)(function(){q.current=B,q.subscription=W.subscribe(q)})}z.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},z.prototype.next=function(W){this.current=W},z.prototype.complete=function(){this.dispose()},z.prototype.error=function(W){this.current=W,this.dispose()},E([c.C.ref],z.prototype,"current",void 0),E([c.k.bound],z.prototype,"next",null),E([c.k.bound],z.prototype,"complete",null),E([c.k.bound],z.prototype,"error",null)})();var C=function(){return C=Object.assign||function(z){for(var W,B=1,q=arguments.length;B<q;B++)for(var J in W=arguments[B])Object.prototype.hasOwnProperty.call(W,J)&&(z[J]=W[J]);return z},C.apply(this,arguments)},j=function(z,W,B,q){var J,ce=arguments.length,re=ce<3?W:q===null?q=Object.getOwnPropertyDescriptor(W,B):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(z,W,B,q);else for(var Pe=z.length-1;Pe>=0;Pe--)(J=z[Pe])&&(re=(ce<3?J(re):ce>3?J(W,B,re):J(W,B))||re);return ce>3&&re&&Object.defineProperty(W,B,re),re},U=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function z(W){var B=this;this.model=W,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(q){return B.localValues.has(q)},d(Object(c.A)(W),"createViewModel expects an observable object"),g(W).forEach(function(q){if(q!==c.a&&q!=="__mobxDidRunLazyInitializers"){if(d(U.indexOf(q)===-1,"The propertyname "+q+" is reserved and cannot be used with viewModels"),Object(c.w)(W,q)){var J=Object(c.h)(W,q).derivation;B.localComputedValues.set(q,Object(c.m)(J.bind(B)))}var ce=Object.getOwnPropertyDescriptor(W,q),re=ce?{enumerable:ce.enumerable}:{};Object.defineProperty(B,q,C(C({},re),{configurable:!0,get:function(){return Object(c.w)(W,q)?B.localComputedValues.get(q).get():B.isPropertyDirty(q)?B.localValues.get(q):B.model[q]},set:Object(c.k)(function(Pe){Pe!==B.model[q]?B.localValues.set(q,Pe):B.localValues.delete(q)})}))}})}Object.defineProperty(z.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),z.prototype.submit=function(){var W=this;Object(c.B)(this.localValues).forEach(function(B){var q=W.localValues.get(B),J=W.model[B];Object(c.y)(J)?J.replace(q):Object(c.z)(J)?(J.clear(),J.merge(q)):Object(c.v)(q)||(W.model[B]=q)}),this.localValues.clear()},z.prototype.reset=function(){this.localValues.clear()},z.prototype.resetProperty=function(W){this.localValues.delete(W)},j([c.m],z.prototype,"isDirty",null),j([c.m],z.prototype,"changedValues",null),j([c.k.bound],z.prototype,"submit",null),j([c.k.bound],z.prototype,"reset",null),j([c.k.bound],z.prototype,"resetProperty",null)})();function L(z){if(!z)return"ROOT";for(var W=[];z.parent;)W.push(z.path),z=z.parent;return W.reverse().join("/")}function V(z){return Object(c.A)(z)||Object(c.y)(z)||Object(c.z)(z)}function $(z,W){var B=new WeakMap;function q(re){var Pe=B.get(re.object);(function(ge,fe){switch(ge.type){case"add":J(ge.newValue,fe,ge.name);break;case"update":ce(ge.oldValue),J(ge.newValue,fe,ge.name||""+ge.index);break;case"remove":case"delete":ce(ge.oldValue);break;case"splice":ge.removed.map(ce),ge.added.forEach(function(rt,mt){return J(rt,fe,""+(ge.index+mt))});for(var Ee=ge.index+ge.addedCount;Ee<ge.object.length;Ee++)if(V(ge.object[Ee])){var Ne=B.get(ge.object[Ee]);Ne&&(Ne.path=""+Ee)}}})(re,Pe),W(re,L(Pe),z)}function J(re,Pe,ge){if(V(re)){var fe=B.get(re);if(fe){if(fe.parent!==Pe||fe.path!==ge)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+L(Pe)+"/"+ge+"', but it already exists at '"+L(fe.parent)+"/"+fe.path+"'")}else{var Ee={parent:Pe,path:ge,dispose:Object(c.D)(re,q)};B.set(re,Ee),Object(c.p)(re).forEach(function(Ne){var rt=Ne[0];return J(Ne[1],Ee,rt)})}}}function ce(re){if(V(re)){var Pe=B.get(re);if(!Pe)return;B.delete(re),Pe.dispose(),Object(c.L)(re).forEach(ce)}}return J(z,void 0,""),function(){ce(z)}}var H,Y=(H=function(z,W){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,q){B.__proto__=q}||function(B,q){for(var J in q)q.hasOwnProperty(J)&&(B[J]=q[J])},H(z,W)},function(z,W){function B(){this.constructor=z}H(z,W),z.prototype=W===null?Object.create(W):(B.prototype=W.prototype,new B)});(function(z){function W(B,q,J){var ce=J===void 0?{}:J,re=ce.name,Pe=re===void 0?"ogm"+(1e3*Math.random()|0):re,ge=ce.keyToName,fe=ge===void 0?function(rt){return""+rt}:ge,Ee=z.call(this)||this;Ee._keyToName=fe,Ee._groupBy=q,Ee._ogmInfoKey=Symbol("ogmInfo"+Pe),Ee._base=B;for(var Ne=0;Ne<B.length;Ne++)Ee._addItem(B[Ne]);return Ee._disposeBaseObserver=Object(c.D)(Ee._base,function(rt){if(rt.type==="splice")Object(c.J)(function(){for(var mt=0,Je=rt.removed;mt<Je.length;mt++){var Xt=Je[mt];Ee._removeItem(Xt)}for(var en=0,Bt=rt.added;en<Bt.length;en++){var Nn=Bt[en];Ee._addItem(Nn)}});else{if(rt.type!=="update")throw new Error("illegal state");Object(c.J)(function(){Ee._removeItem(rt.oldValue),Ee._addItem(rt.newValue)})}}),Ee}Y(W,z),W.prototype.clear=function(){throw new Error("not supported")},W.prototype.delete=function(B){throw new Error("not supported")},W.prototype.set=function(B,q){throw new Error("not supported")},W.prototype.dispose=function(){this._disposeBaseObserver();for(var B=0;B<this._base.length;B++){var q=this._base[B];q[this._ogmInfoKey].reaction(),delete q[this._ogmInfoKey]}},W.prototype._getGroupArr=function(B){var q=z.prototype.get.call(this,B);return q===void 0&&(q=Object(c.C)([],{name:"GroupArray["+this._keyToName(B)+"]",deep:!1}),z.prototype.set.call(this,B,q)),q},W.prototype._removeFromGroupArr=function(B,q){var J=z.prototype.get.call(this,B);J.length===1?z.prototype.delete.call(this,B):(q===J.length-1||(J[q]=J[J.length-1],J[q][this._ogmInfoKey].groupArrIndex=q),J.length--)},W.prototype._addItem=function(B){var q=this,J=this._groupBy(B),ce=this._getGroupArr(J),re={groupByValue:J,groupArrIndex:ce.length,reaction:Object(c.F)(function(){return q._groupBy(B)},function(Pe,ge){var fe=B[q._ogmInfoKey];q._removeFromGroupArr(fe.groupByValue,fe.groupArrIndex);var Ee=q._getGroupArr(Pe),Ne=Ee.length;Ee.push(B),fe.groupByValue=Pe,fe.groupArrIndex=Ne})};Object.defineProperty(B,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:re}),ce.push(B)},W.prototype._removeItem=function(B){var q=B[this._ogmInfoKey];this._removeFromGroupArr(q.groupByValue,q.groupArrIndex),q.reaction(),delete B[this._ogmInfoKey]}})(c.b),function(){function z(W,B){this.base=W,this.args=B,this.closestIdx=0,this.isDisposed=!1;for(var q=this.closest=this.root=W,J=0;J<this.args.length-1&&(q=q.get(B[J]));J++)this.closest=q;this.closestIdx=J}return z.prototype.exists=function(){this.assertNotDisposed();var W=this.args.length;return this.closestIdx>=W-1&&this.closest.has(this.args[W-1])},z.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},z.prototype.set=function(W){this.assertNotDisposed();for(var B=this.args.length,q=this.closest,J=this.closestIdx;J<B-1;J++){var ce=new Map;q.set(this.args[J],ce),q=ce}this.closestIdx=B-1,this.closest=q,q.set(this.args[B-1],W)},z.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var W=this.args.length;this.closest.delete(this.args[W-1]);for(var B=this.root,q=[B],J=0;J<W-1;J++)B=B.get(this.args[J]),q.push(B);for(J=q.length-1;J>0;J--)q[J].size===0&&q[J-1].delete(this.args[J-1]);this.isDisposed=!0},z.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},z}(),Promise.resolve(),typeof queueMicrotask<"u"||s!==void 0&&s.nextTick}).call(this,r(163))},function(n,a,r){var s;(function(c,p,d){if(c){for(var _,g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},b={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},S={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},T={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},A=1;A<20;++A)g[111+A]="f"+A;for(A=0;A<=9;++A)g[A+96]=A.toString();V.prototype.bind=function($,H,Y){var z=this;return $=$ instanceof Array?$:[$],z._bindMultiple.call(z,$,H,Y),z},V.prototype.unbind=function($,H){return this.bind.call(this,$,function(){},H)},V.prototype.trigger=function($,H){var Y=this;return Y._directMap[$+":"+H]&&Y._directMap[$+":"+H]({},$),Y},V.prototype.reset=function(){var $=this;return $._callbacks={},$._directMap={},$},V.prototype.stopCallback=function($,H){if((" "+H.className+" ").indexOf(" mousetrap ")>-1||L(H,this.target))return!1;if("composedPath"in $&&typeof $.composedPath=="function"){var Y=$.composedPath()[0];Y!==$.target&&(H=Y)}return H.tagName=="INPUT"||H.tagName=="SELECT"||H.tagName=="TEXTAREA"||H.isContentEditable},V.prototype.handleKey=function(){var $=this;return $._handleKey.apply($,arguments)},V.addKeycodes=function($){for(var H in $)$.hasOwnProperty(H)&&(g[H]=$[H]);_=null},V.init=function(){var $=V(p);for(var H in $)H.charAt(0)!=="_"&&(V[H]=function(Y){return function(){return $[Y].apply($,arguments)}}(H))},V.init(),c.Mousetrap=V,n.exports&&(n.exports=V),(s=(function(){return V}).call(a,r,a,n))===void 0||(n.exports=s)}function O($,H,Y){$.addEventListener?$.addEventListener(H,Y,!1):$.attachEvent("on"+H,Y)}function E($){if($.type=="keypress"){var H=String.fromCharCode($.which);return $.shiftKey||(H=H.toLowerCase()),H}return g[$.which]?g[$.which]:b[$.which]?b[$.which]:String.fromCharCode($.which).toLowerCase()}function C($){return $=="shift"||$=="ctrl"||$=="alt"||$=="meta"}function j($,H,Y){return Y||(Y=function(){if(!_)for(var z in _={},g)z>95&&z<112||g.hasOwnProperty(z)&&(_[g[z]]=z);return _}()[$]?"keydown":"keypress"),Y=="keypress"&&H.length&&(Y="keydown"),Y}function U($,H){var Y,z,W,B=[];for(Y=function(q){return q==="+"?["+"]:(q=q.replace(/\+{2}/g,"+plus")).split("+")}($),W=0;W<Y.length;++W)z=Y[W],T[z]&&(z=T[z]),H&&H!="keypress"&&S[z]&&(z=S[z],B.push("shift")),C(z)&&B.push(z);return{key:z,modifiers:B,action:H=j(z,B,H)}}function L($,H){return $!==null&&$!==p&&($===H||L($.parentNode,H))}function V($){var H=this;if($=$||p,!(H instanceof V))return new V($);H.target=$,H._callbacks={},H._directMap={};var Y,z={},W=!1,B=!1,q=!1;function J(Ee){Ee=Ee||{};var Ne,rt=!1;for(Ne in z)Ee[Ne]?rt=!0:z[Ne]=0;rt||(q=!1)}function ce(Ee,Ne,rt,mt,Je,Xt){var en,Bt,Nn,Ue,Ae=[],$e=rt.type;if(!H._callbacks[Ee])return[];for($e=="keyup"&&C(Ee)&&(Ne=[Ee]),en=0;en<H._callbacks[Ee].length;++en)if(Bt=H._callbacks[Ee][en],(mt||!Bt.seq||z[Bt.seq]==Bt.level)&&$e==Bt.action&&($e=="keypress"&&!rt.metaKey&&!rt.ctrlKey||(Nn=Ne,Ue=Bt.modifiers,Nn.sort().join(",")===Ue.sort().join(",")))){var vt=!mt&&Bt.combo==Je,Ut=mt&&Bt.seq==mt&&Bt.level==Xt;(vt||Ut)&&H._callbacks[Ee].splice(en,1),Ae.push(Bt)}return Ae}function re(Ee,Ne,rt,mt){H.stopCallback(Ne,Ne.target||Ne.srcElement,rt,mt)||Ee(Ne,rt)===!1&&(function(Je){Je.preventDefault?Je.preventDefault():Je.returnValue=!1}(Ne),function(Je){Je.stopPropagation?Je.stopPropagation():Je.cancelBubble=!0}(Ne))}function Pe(Ee){typeof Ee.which!="number"&&(Ee.which=Ee.keyCode);var Ne=E(Ee);Ne&&(Ee.type!="keyup"||W!==Ne?H.handleKey(Ne,function(rt){var mt=[];return rt.shiftKey&&mt.push("shift"),rt.altKey&&mt.push("alt"),rt.ctrlKey&&mt.push("ctrl"),rt.metaKey&&mt.push("meta"),mt}(Ee),Ee):W=!1)}function ge(Ee,Ne,rt,mt){function Je(Nn){return function(){q=Nn,++z[Ee],clearTimeout(Y),Y=setTimeout(J,1e3)}}function Xt(Nn){re(rt,Nn,Ee),mt!=="keyup"&&(W=E(Nn)),setTimeout(J,10)}z[Ee]=0;for(var en=0;en<Ne.length;++en){var Bt=en+1===Ne.length?Xt:Je(mt||U(Ne[en+1]).action);fe(Ne[en],Bt,mt,Ee,en)}}function fe(Ee,Ne,rt,mt,Je){H._directMap[Ee+":"+rt]=Ne;var Xt,en=(Ee=Ee.replace(/\s+/g," ")).split(" ");en.length>1?ge(Ee,en,Ne,rt):(Xt=U(Ee,rt),H._callbacks[Xt.key]=H._callbacks[Xt.key]||[],ce(Xt.key,Xt.modifiers,{type:Xt.action},mt,Ee,Je),H._callbacks[Xt.key][mt?"unshift":"push"]({callback:Ne,modifiers:Xt.modifiers,action:Xt.action,seq:mt,level:Je,combo:Ee}))}H._handleKey=function(Ee,Ne,rt){var mt,Je=ce(Ee,Ne,rt),Xt={},en=0,Bt=!1;for(mt=0;mt<Je.length;++mt)Je[mt].seq&&(en=Math.max(en,Je[mt].level));for(mt=0;mt<Je.length;++mt)if(Je[mt].seq){if(Je[mt].level!=en)continue;Bt=!0,Xt[Je[mt].seq]=1,re(Je[mt].callback,rt,Je[mt].combo,Je[mt].seq)}else Bt||re(Je[mt].callback,rt,Je[mt].combo);var Nn=rt.type=="keypress"&&B;rt.type!=q||C(Ee)||Nn||J(Xt),B=Bt&&rt.type=="keydown"},H._bindMultiple=function(Ee,Ne,rt){for(var mt=0;mt<Ee.length;++mt)fe(Ee[mt],Ne,rt)},O($,"keypress",Pe),O($,"keydown",Pe),O($,"keyup",Pe)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,a,r){var s=r(7),c=r(34),p=r(30),d=r(33),_=s.TypeError;n.exports=function(g,b){var S,T;if(b==="string"&&p(S=g.toString)&&!d(T=c(S,g))||p(S=g.valueOf)&&!d(T=c(S,g))||b!=="string"&&p(S=g.toString)&&!d(T=c(S,g)))return T;throw _("Can't convert object to primitive value")}},function(n,a,r){var s=r(7),c=r(30),p=r(92),d=s.WeakMap;n.exports=c(d)&&/native code/.test(p(d))},function(n,a,r){var s=r(36),c=r(38),p=r(32),d=r(41),_=r(77);n.exports=s?Object.defineProperties:function(g,b){p(g);for(var S,T=d(b),A=_(b),O=A.length,E=0;O>E;)c.f(g,S=A[E++],T[S]);return g}},function(n,a,r){var s=r(7);n.exports=s},function(n,a,r){var s=r(7),c=r(96),p=r(99),d=r(33),_=r(28)("species"),g=s.Array;n.exports=function(b){var S;return c(b)&&(S=b.constructor,(p(S)&&(S===g||c(S.prototype))||d(S)&&(S=S[_])===null)&&(S=void 0)),S===void 0?g:S}},function(n,a,r){var s=r(113),c=r(97);n.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,a,r){var s=r(142).IteratorPrototype,c=r(60),p=r(69),d=r(78),_=r(80),g=function(){return this};n.exports=function(b,S,T,A){var O=S+" Iterator";return b.prototype=c(s,{next:p(+!A,T)}),d(b,O,!1,!0),_[O]=g,b}},function(n,a,r){var s=r(7),c=r(30),p=s.String,d=s.TypeError;n.exports=function(_){if(typeof _=="object"||c(_))return _;throw d("Can't set "+p(_)+" as a prototype")}},function(n,a,r){var s=r(16),c=r(7),p=r(15),d=r(95),_=r(42),g=r(144),b=r(117),S=r(119),T=r(30),A=r(33),O=r(18),E=r(120),C=r(78),j=r(148);n.exports=function(U,L,V){var $=U.indexOf("Map")!==-1,H=U.indexOf("Weak")!==-1,Y=$?"set":"add",z=c[U],W=z&&z.prototype,B=z,q={},J=function(Ee){var Ne=p(W[Ee]);_(W,Ee,Ee=="add"?function(rt){return Ne(this,rt===0?0:rt),this}:Ee=="delete"?function(rt){return!(H&&!A(rt))&&Ne(this,rt===0?0:rt)}:Ee=="get"?function(rt){return H&&!A(rt)?void 0:Ne(this,rt===0?0:rt)}:Ee=="has"?function(rt){return!(H&&!A(rt))&&Ne(this,rt===0?0:rt)}:function(rt,mt){return Ne(this,rt===0?0:rt,mt),this})};if(d(U,!T(z)||!(H||W.forEach&&!O(function(){new z().entries().next()}))))B=V.getConstructor(L,U,$,Y),g.enable();else if(d(U,!0)){var ce=new B,re=ce[Y](H?{}:-0,1)!=ce,Pe=O(function(){ce.has(1)}),ge=E(function(Ee){new z(Ee)}),fe=!H&&O(function(){for(var Ee=new z,Ne=5;Ne--;)Ee[Y](Ne,Ne);return!Ee.has(-0)});ge||((B=L(function(Ee,Ne){S(Ee,W);var rt=j(new z,Ee,B);return Ne!=null&&b(Ne,rt[Y],{that:rt,AS_ENTRIES:$}),rt})).prototype=W,W.constructor=B),(Pe||fe)&&(J("delete"),J("has"),$&&J("get")),(fe||re)&&J(Y),H&&W.clear&&delete W.clear}return q[U]=B,s({global:!0,forced:B!=z},q),C(B,U),H||V.setStrong(B,U,$),B}},function(n,a,r){var s=r(18),c=r(33),p=r(51),d=r(184),_=Object.isExtensible,g=s(function(){});n.exports=g||d?function(b){return!!c(b)&&(!d||p(b)!="ArrayBuffer")&&(!_||_(b))}:_},function(n,a,r){var s=r(18);n.exports=s(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,a,r){var s=r(18);n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,a,r){var s=r(38).f,c=r(60),p=r(149),d=r(64),_=r(119),g=r(117),b=r(116),S=r(150),T=r(36),A=r(144).fastKey,O=r(58),E=O.set,C=O.getterFor;n.exports={getConstructor:function(j,U,L,V){var $=j(function(B,q){_(B,H),E(B,{type:U,index:c(null),first:void 0,last:void 0,size:0}),T||(B.size=0),q!=null&&g(q,B[V],{that:B,AS_ENTRIES:L})}),H=$.prototype,Y=C(U),z=function(B,q,J){var ce,re,Pe=Y(B),ge=W(B,q);return ge?ge.value=J:(Pe.last=ge={index:re=A(q,!0),key:q,value:J,previous:ce=Pe.last,next:void 0,removed:!1},Pe.first||(Pe.first=ge),ce&&(ce.next=ge),T?Pe.size++:B.size++,re!=="F"&&(Pe.index[re]=ge)),B},W=function(B,q){var J,ce=Y(B),re=A(q);if(re!=="F")return ce.index[re];for(J=ce.first;J;J=J.next)if(J.key==q)return J};return p(H,{clear:function(){for(var B=Y(this),q=B.index,J=B.first;J;)J.removed=!0,J.previous&&(J.previous=J.previous.next=void 0),delete q[J.index],J=J.next;B.first=B.last=void 0,T?B.size=0:this.size=0},delete:function(B){var q=this,J=Y(q),ce=W(q,B);if(ce){var re=ce.next,Pe=ce.previous;delete J.index[ce.index],ce.removed=!0,Pe&&(Pe.next=re),re&&(re.previous=Pe),J.first==ce&&(J.first=re),J.last==ce&&(J.last=Pe),T?J.size--:q.size--}return!!ce},forEach:function(B){for(var q,J=Y(this),ce=d(B,arguments.length>1?arguments[1]:void 0);q=q?q.next:J.first;)for(ce(q.value,q.key,this);q&&q.removed;)q=q.previous},has:function(B){return!!W(this,B)}}),p(H,L?{get:function(B){var q=W(this,B);return q&&q.value},set:function(B,q){return z(this,B===0?0:B,q)}}:{add:function(B){return z(this,B=B===0?0:B,B)}}),T&&s(H,"size",{get:function(){return Y(this).size}}),$},setStrong:function(j,U,L){var V=U+" Iterator",$=C(U),H=C(V);b(j,U,function(Y,z){E(this,{type:V,target:Y,state:$(Y),kind:z,last:void 0})},function(){for(var Y=H(this),z=Y.kind,W=Y.last;W&&W.removed;)W=W.previous;return Y.target&&(Y.last=W=W?W.next:Y.state.first)?z=="keys"?{value:W.key,done:!1}:z=="values"?{value:W.value,done:!1}:{value:[W.key,W.value],done:!1}:(Y.target=void 0,{value:void 0,done:!0})},L?"entries":"values",!L,!0),S(U)}}},function(n,a,r){var s=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(p){return s(this,p,arguments.length>1?arguments[1]:void 0)}},function(n,a,r){var s=r(7),c=r(64),p=r(34),d=r(40),_=r(189),g=r(145),b=r(99),S=r(45),T=r(63),A=r(146),O=r(118),E=s.Array;n.exports=function(C){var j=d(C),U=b(this),L=arguments.length,V=L>1?arguments[1]:void 0,$=V!==void 0;$&&(V=c(V,L>2?arguments[2]:void 0));var H,Y,z,W,B,q,J=O(j),ce=0;if(!J||this==E&&g(J))for(H=S(j),Y=U?new this(H):E(H);H>ce;ce++)q=$?V(j[ce],ce):j[ce],T(Y,ce,q);else for(B=(W=A(j,J)).next,Y=U?new this:[];!(z=p(B,W)).done;ce++)q=$?_(W,V,[z.value,ce],!0):z.value,T(Y,ce,q);return Y.length=ce,Y}},function(n,a,r){var s=r(32),c=r(147);n.exports=function(p,d,_,g){try{return g?d(s(_)[0],_[1]):d(_)}catch(b){c(p,"throw",b)}}},function(n,a,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var p=c(".","s");return!(p.dotAll&&p.exec(`
`)&&p.flags==="s")})},function(n,a,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var p=c("(?<a>b)","g");return p.exec("b").groups.a!=="b"||"b".replace(p,"$<a>c")!=="bc"})},function(n,a,r){var s=r(16),c=r(15),p=r(56),d=r(40),_=r(45),g=r(39),b=r(18),S=r(193),T=r(121),A=r(194),O=r(195),E=r(70),C=r(196),j=[],U=c(j.sort),L=c(j.push),V=b(function(){j.sort(void 0)}),$=b(function(){j.sort(null)}),H=T("sort"),Y=!b(function(){if(E)return E<70;if(!(A&&A>3)){if(O)return!0;if(C)return C<603;var z,W,B,q,J="";for(z=65;z<76;z++){switch(W=String.fromCharCode(z),z){case 66:case 69:case 70:case 72:B=3;break;case 68:case 71:B=4;break;default:B=2}for(q=0;q<47;q++)j.push({k:W+q,v:B})}for(j.sort(function(ce,re){return re.v-ce.v}),q=0;q<j.length;q++)W=j[q].k.charAt(0),J.charAt(J.length-1)!==W&&(J+=W);return J!=="DGBEFHACIJK"}});s({target:"Array",proto:!0,forced:V||!$||!H||!Y},{sort:function(z){z!==void 0&&p(z);var W=d(this);if(Y)return z===void 0?U(W):U(W,z);var B,q,J=[],ce=_(W);for(q=0;q<ce;q++)q in W&&L(J,W[q]);for(S(J,function(re){return function(Pe,ge){return ge===void 0?-1:Pe===void 0?1:re!==void 0?+re(Pe,ge)||0:g(Pe)>g(ge)?1:-1}}(z)),B=J.length,q=0;q<B;)W[q]=J[q++];for(;q<ce;)delete W[q++];return W}})},function(n,a,r){var s=r(114),c=Math.floor,p=function(g,b){var S=g.length,T=c(S/2);return S<8?d(g,b):_(g,p(s(g,0,T),b),p(s(g,T),b),b)},d=function(g,b){for(var S,T,A=g.length,O=1;O<A;){for(T=O,S=g[O];T&&b(g[T-1],S)>0;)g[T]=g[--T];T!==O++&&(g[T]=S)}return g},_=function(g,b,S,T){for(var A=b.length,O=S.length,E=0,C=0;E<A||C<O;)g[E+C]=E<A&&C<O?T(b[E],S[C])<=0?b[E++]:S[C++]:E<A?b[E++]:S[C++];return g};n.exports=p},function(n,a,r){var s=r(55).match(/firefox\/(\d+)/i);n.exports=!!s&&+s[1]},function(n,a,r){var s=r(55);n.exports=/MSIE|Trident/.test(s)},function(n,a,r){var s=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!s&&+s[1]},function(n,a,r){var s=r(7),c=r(159),p=s.TypeError;n.exports=function(d){if(c(d))throw p("The method doesn't accept regular expressions");return d}},function(n,a,r){var s=r(28)("match");n.exports=function(c){var p=/./;try{"/./"[c](p)}catch{try{return p[s]=!1,"/./"[c](p)}catch{}}return!1}},function(n,a,r){r(16)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},function(n,a,r){var s=r(73).PROPER,c=r(18),p=r(162);n.exports=function(d){return c(function(){return!!p[d]()||"​᠎"[d]()!=="​᠎"||s&&p[d].name!==d})}},function(n,a,r){var s=r(15),c=r(40),p=Math.floor,d=s("".charAt),_=s("".replace),g=s("".slice),b=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,S=/\$([$&'`]|\d{1,2})/g;n.exports=function(T,A,O,E,C,j){var U=O+T.length,L=E.length,V=S;return C!==void 0&&(C=c(C),V=b),_(j,V,function($,H){var Y;switch(d(H,0)){case"$":return"$";case"&":return T;case"`":return g(A,0,O);case"'":return g(A,U);case"<":Y=C[g(H,1,-1)];break;default:var z=+H;if(z===0)return $;if(z>L){var W=p(z/10);return W===0?$:W<=L?E[W-1]===void 0?d(H,1):E[W-1]+d(H,1):$}Y=E[z-1]}return Y===void 0?"":Y})}},function(n,a,r){var s=r(36),c=r(15),p=r(34),d=r(18),_=r(77),g=r(112),b=r(84),S=r(40),T=r(85),A=Object.assign,O=Object.defineProperty,E=c([].concat);n.exports=!A||d(function(){if(s&&A({b:1},A(O({},"a",{enumerable:!0,get:function(){O(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var C={},j={},U=Symbol(),L="abcdefghijklmnopqrst";return C[U]=7,L.split("").forEach(function(V){j[V]=V}),A({},C)[U]!=7||_(A({},j)).join("")!=L})?function(C,j){for(var U=S(C),L=arguments.length,V=1,$=g.f,H=b.f;L>V;)for(var Y,z=T(arguments[V++]),W=$?E(_(z),$(z)):_(z),B=W.length,q=0;B>q;)Y=W[q++],s&&!p(H,z,Y)||(U[Y]=z[Y]);return U}:A},function(n,a,r){var s=r(7),c=r(15),p=r(56),d=r(33),_=r(35),g=r(98),b=s.Function,S=c([].concat),T=c([].join),A={},O=function(E,C,j){if(!_(A,C)){for(var U=[],L=0;L<C;L++)U[L]="a["+L+"]";A[C]=b("C,a","return new C("+T(U,",")+")")}return A[C](E,j)};n.exports=b.bind||function(E){var C=p(this),j=C.prototype,U=g(arguments,1),L=function(){var V=S(U,g(arguments));return this instanceof L?O(C,V.length,V):C.apply(E,V)};return d(j)&&(L.prototype=j),L}},function(n,a,r){var s=r(35);n.exports=function(c){return c!==void 0&&(s(c,"value")||s(c,"writable"))}},function(n,a,r){var s=r(15),c=r(44),p=r(39),d=/"/g,_=s("".replace);n.exports=function(g,b,S,T){var A=p(c(g)),O="<"+b;return S!==""&&(O+=" "+S+'="'+_(p(T),d,"&quot;")+'"'),O+">"+A+"</"+b+">"}},function(n,a,r){var s=r(18);n.exports=function(c){return s(function(){var p=""[c]('"');return p!==p.toLowerCase()||p.split('"').length>3})}},function(n,a,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,a,r){var s,c,p,d,_=r(16),g=r(71),b=r(7),S=r(46),T=r(34),A=r(209),O=r(42),E=r(149),C=r(102),j=r(78),U=r(150),L=r(56),V=r(30),$=r(33),H=r(119),Y=r(92),z=r(117),W=r(120),B=r(164),q=r(168).set,J=r(210),ce=r(213),re=r(214),Pe=r(170),ge=r(215),fe=r(58),Ee=r(95),Ne=r(28),rt=r(216),mt=r(128),Je=r(70),Xt=Ne("species"),en="Promise",Bt=fe.getterFor(en),Nn=fe.set,Ue=fe.getterFor(en),Ae=A&&A.prototype,$e=A,vt=Ae,Ut=b.TypeError,Et=b.document,rn=b.process,Kt=Pe.f,Pn=Kt,yn=!!(Et&&Et.createEvent&&b.dispatchEvent),dt=V(b.PromiseRejectionEvent),An="unhandledrejection",Ve=!1,bn=Ee(en,function(){var Le=Y($e),lt=Le!==String($e);if(!lt&&Je===66||g&&!vt.finally)return!0;if(Je>=51&&/native code/.test(Le))return!1;var on=new $e(function(Dn){Dn(1)}),Jt=function(Dn){Dn(function(){},function(){})};return(on.constructor={})[Xt]=Jt,!(Ve=on.then(function(){})instanceof Jt)||!lt&&rt&&!dt}),lr=bn||!W(function(Le){$e.all(Le).catch(function(){})}),le=function(Le){var lt;return!(!$(Le)||!V(lt=Le.then))&&lt},sr=function(Le,lt){if(!Le.notified){Le.notified=!0;var on=Le.reactions;J(function(){for(var Jt=Le.value,Dn=Le.state==1,Sr=0;on.length>Sr;){var ui,Si,Zo,ni=on[Sr++],Tn=Dn?ni.ok:ni.fail,Un=ni.resolve,Kn=ni.reject,ur=ni.domain;try{Tn?(Dn||(Le.rejection===2&&Yn(Le),Le.rejection=1),Tn===!0?ui=Jt:(ur&&ur.enter(),ui=Tn(Jt),ur&&(ur.exit(),Zo=!0)),ui===ni.promise?Kn(Ut("Promise-chain cycle")):(Si=le(ui))?T(Si,ui,Un,Kn):Un(ui)):Kn(Jt)}catch(to){ur&&!Zo&&ur.exit(),Kn(to)}}Le.reactions=[],Le.notified=!1,lt&&!Le.rejection&&io(Le)})}},Ir=function(Le,lt,on){var Jt,Dn;yn?((Jt=Et.createEvent("Event")).promise=lt,Jt.reason=on,Jt.initEvent(Le,!1,!0),b.dispatchEvent(Jt)):Jt={promise:lt,reason:on},!dt&&(Dn=b["on"+Le])?Dn(Jt):Le===An&&re("Unhandled promise rejection",on)},io=function(Le){T(q,b,function(){var lt,on=Le.facade,Jt=Le.value;if(wo(Le)&&(lt=ge(function(){mt?rn.emit("unhandledRejection",Jt,on):Ir(An,on,Jt)}),Le.rejection=mt||wo(Le)?2:1,lt.error))throw lt.value})},wo=function(Le){return Le.rejection!==1&&!Le.parent},Yn=function(Le){T(q,b,function(){var lt=Le.facade;mt?rn.emit("rejectionHandled",lt):Ir("rejectionhandled",lt,Le.value)})},Go=function(Le,lt,on){return function(Jt){Le(lt,Jt,on)}},Me=function(Le,lt,on){Le.done||(Le.done=!0,on&&(Le=on),Le.value=lt,Le.state=2,sr(Le,!0))},Ze=function(Le,lt,on){if(!Le.done){Le.done=!0,on&&(Le=on);try{if(Le.facade===lt)throw Ut("Promise can't be resolved itself");var Jt=le(lt);Jt?J(function(){var Dn={done:!1};try{T(Jt,lt,Go(Ze,Dn,Le),Go(Me,Dn,Le))}catch(Sr){Me(Dn,Sr,Le)}}):(Le.value=lt,Le.state=1,sr(Le,!1))}catch(Dn){Me({done:!1},Dn,Le)}}};if(bn&&(vt=($e=function(Le){H(this,vt),L(Le),T(s,this);var lt=Bt(this);try{Le(Go(Ze,lt),Go(Me,lt))}catch(on){Me(lt,on)}}).prototype,(s=function(Le){Nn(this,{type:en,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=E(vt,{then:function(Le,lt){var on=Ue(this),Jt=on.reactions,Dn=Kt(B(this,$e));return Dn.ok=!V(Le)||Le,Dn.fail=V(lt)&&lt,Dn.domain=mt?rn.domain:void 0,on.parent=!0,Jt[Jt.length]=Dn,on.state!=0&&sr(on,!1),Dn.promise},catch:function(Le){return this.then(void 0,Le)}}),c=function(){var Le=new s,lt=Bt(Le);this.promise=Le,this.resolve=Go(Ze,lt),this.reject=Go(Me,lt)},Pe.f=Kt=function(Le){return Le===$e||Le===p?new c(Le):Pn(Le)},!g&&V(A)&&Ae!==Object.prototype)){d=Ae.then,Ve||(O(Ae,"then",function(Le,lt){var on=this;return new $e(function(Jt,Dn){T(d,on,Jt,Dn)}).then(Le,lt)},{unsafe:!0}),O(Ae,"catch",vt.catch,{unsafe:!0}));try{delete Ae.constructor}catch{}C&&C(Ae,vt)}_({global:!0,wrap:!0,forced:bn},{Promise:$e}),j($e,en,!1,!0),U(en),p=S(en),_({target:en,stat:!0,forced:bn},{reject:function(Le){var lt=Kt(this);return T(lt.reject,void 0,Le),lt.promise}}),_({target:en,stat:!0,forced:g||bn},{resolve:function(Le){return ce(g&&this===p?$e:this,Le)}}),_({target:en,stat:!0,forced:lr},{all:function(Le){var lt=this,on=Kt(lt),Jt=on.resolve,Dn=on.reject,Sr=ge(function(){var ui=L(lt.resolve),Si=[],Zo=0,ni=1;z(Le,function(Tn){var Un=Zo++,Kn=!1;ni++,T(ui,lt,Tn).then(function(ur){Kn||(Kn=!0,Si[Un]=ur,--ni||Jt(Si))},Dn)}),--ni||Jt(Si)});return Sr.error&&Dn(Sr.value),on.promise},race:function(Le){var lt=this,on=Kt(lt),Jt=on.reject,Dn=ge(function(){var Sr=L(lt.resolve);z(Le,function(ui){T(Sr,lt,ui).then(on.resolve,Jt)})});return Dn.error&&Jt(Dn.value),on.promise}})},function(n,a,r){var s=r(7);n.exports=s.Promise},function(n,a,r){var s,c,p,d,_,g,b,S,T=r(7),A=r(64),O=r(50).f,E=r(168).set,C=r(169),j=r(211),U=r(212),L=r(128),V=T.MutationObserver||T.WebKitMutationObserver,$=T.document,H=T.process,Y=T.Promise,z=O(T,"queueMicrotask"),W=z&&z.value;W||(s=function(){var B,q;for(L&&(B=H.domain)&&B.exit();c;){q=c.fn,c=c.next;try{q()}catch(J){throw c?d():p=void 0,J}}p=void 0,B&&B.enter()},C||L||U||!V||!$?!j&&Y&&Y.resolve?((b=Y.resolve(void 0)).constructor=Y,S=A(b.then,b),d=function(){S(s)}):L?d=function(){H.nextTick(s)}:(E=A(E,T),d=function(){E(s)}):(_=!0,g=$.createTextNode(""),new V(s).observe(g,{characterData:!0}),d=function(){g.data=_=!_})),n.exports=W||function(B){var q={fn:B,next:void 0};p&&(p.next=q),c||(c=q,d()),p=q}},function(n,a,r){var s=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(s)&&c.Pebble!==void 0},function(n,a,r){var s=r(55);n.exports=/web0s(?!.*chrome)/i.test(s)},function(n,a,r){var s=r(32),c=r(33),p=r(170);n.exports=function(d,_){if(s(d),c(_)&&_.constructor===d)return _;var g=p.f(d);return(0,g.resolve)(_),g.promise}},function(n,a,r){var s=r(7);n.exports=function(c,p){var d=s.console;d&&d.error&&(arguments.length==1?d.error(c):d.error(c,p))}},function(n,a){n.exports=function(r){try{return{error:!1,value:r()}}catch(s){return{error:!0,value:s}}}},function(n,a){n.exports=typeof window=="object"},function(n,a,r){var s=r(40),c=r(75),p=r(45);n.exports=function(d){for(var _=s(this),g=p(_),b=arguments.length,S=c(b>1?arguments[1]:void 0,g),T=b>2?arguments[2]:void 0,A=T===void 0?g:c(T,g);A>S;)_[S++]=d;return _}},function(n,a,r){var s=r(16),c=r(7),p=r(15),d=r(59),_=r(160),g=r(219),b=r(18),S=c.RangeError,T=c.String,A=Math.floor,O=p(g),E=p("".slice),C=p(1 .toFixed),j=function($,H,Y){return H===0?Y:H%2==1?j($,H-1,Y*$):j($*$,H/2,Y)},U=function($,H,Y){for(var z=-1,W=Y;++z<6;)W+=H*$[z],$[z]=W%1e7,W=A(W/1e7)},L=function($,H){for(var Y=6,z=0;--Y>=0;)z+=$[Y],$[Y]=A(z/H),z=z%H*1e7},V=function($){for(var H=6,Y="";--H>=0;)if(Y!==""||H===0||$[H]!==0){var z=T($[H]);Y=Y===""?z:Y+O("0",7-z.length)+z}return Y};s({target:"Number",proto:!0,forced:b(function(){return C(8e-5,3)!=="0.000"||C(.9,0)!=="1"||C(1.255,2)!=="1.25"||C(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!b(function(){C({})})},{toFixed:function($){var H,Y,z,W,B=_(this),q=d($),J=[0,0,0,0,0,0],ce="",re="0";if(q<0||q>20)throw S("Incorrect fraction digits");if(B!=B)return"NaN";if(B<=-1e21||B>=1e21)return T(B);if(B<0&&(ce="-",B=-B),B>1e-21)if(Y=(H=function(Pe){for(var ge=0,fe=Pe;fe>=4096;)ge+=12,fe/=4096;for(;fe>=2;)ge+=1,fe/=2;return ge}(B*j(2,69,1))-69)<0?B*j(2,-H,1):B/j(2,H,1),Y*=4503599627370496,(H=52-H)>0){for(U(J,0,Y),z=q;z>=7;)U(J,1e7,0),z-=7;for(U(J,j(10,z,1),0),z=H-1;z>=23;)L(J,1<<23),z-=23;L(J,1<<z),U(J,1,1),L(J,2),re=V(J)}else U(J,0,Y),U(J,1<<-H,0),re=V(J)+O("0",q);return re=q>0?ce+((W=re.length)<=q?"0."+O("0",q-W)+re:E(re,0,W-q)+"."+E(re,W-q)):ce+re}})},function(n,a,r){var s=r(7),c=r(59),p=r(39),d=r(44),_=s.RangeError;n.exports=function(g){var b=p(d(this)),S="",T=c(g);if(T<0||T==1/0)throw _("Wrong number of repetitions");for(;T>0;(T>>>=1)&&(b+=b))1&T&&(S+=b);return S}},function(n,a,r){var s=r(36),c=r(15),p=r(77),d=r(41),_=c(r(84).f),g=c([].push),b=function(S){return function(T){for(var A,O=d(T),E=p(O),C=E.length,j=0,U=[];C>j;)A=E[j++],s&&!_(O,A)||g(U,S?[A,O[A]]:O[A]);return U}};n.exports={entries:b(!0),values:b(!1)}},function(n,a){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,a,r){r.r(a),r.d(a,"observer",function(){return gu}),r.d(a,"LogicFlow",function(){return b1}),r.d(a,"h",function(){return Ve.g}),r.d(a,"LogicFlowUtil",function(){return s}),r.d(a,"BaseNode",function(){return wf}),r.d(a,"RectNode",function(){return f0}),r.d(a,"CircleNode",function(){return v0}),r.d(a,"PolygonNode",function(){return b0}),r.d(a,"DiamondNode",function(){return S0}),r.d(a,"EllipseNode",function(){return k0}),r.d(a,"TextNode",function(){return R0}),r.d(a,"HtmlNode",function(){return I0}),r.d(a,"BaseEdge",function(){return dm}),r.d(a,"LineEdge",function(){return K0}),r.d(a,"PolylineEdge",function(){return t1}),r.d(a,"BezierEdge",function(){return i1}),r.d(a,"Arrow",function(){return _D}),r.d(a,"BaseEdgeModel",function(){return Sd}),r.d(a,"BezierEdgeModel",function(){return yb}),r.d(a,"LineEdgeModel",function(){return Zu}),r.d(a,"PolylineEdgeModel",function(){return Ta}),r.d(a,"BaseNodeModel",function(){return bf}),r.d(a,"CircleNodeModel",function(){return Ob}),r.d(a,"DiamondNodeModel",function(){return Mb}),r.d(a,"EllipseNodeModel",function(){return Rb}),r.d(a,"PolygonNodeModel",function(){return $b}),r.d(a,"RectNodeModel",function(){return Vb}),r.d(a,"TextNodeModel",function(){return Hb}),r.d(a,"HtmlNodeModel",function(){return Yb}),r.d(a,"EditConfigModel",function(){return td}),r.d(a,"GraphModel",function(){return i2}),r.d(a,"SnaplineModel",function(){return VO}),r.d(a,"Keyboard",function(){return MS}),r.d(a,"get",function(){return M2}),r.d(a,"defaults",function(){return N2}),r.d(a,"ElementState",function(){return Zr}),r.d(a,"ModelType",function(){return Mr}),r.d(a,"ElementType",function(){return co}),r.d(a,"EventType",function(){return jn}),r.d(a,"formateAnchorConnectValidateData",function(){return Yl});var s={};r.r(s),r.d(s,"createUuid",function(){return ra}),r.d(s,"refreshGraphId",function(){return Zc}),r.d(s,"StepDrag",function(){return ye}),r.d(s,"setupEdgeModel",function(){return jt}),r.d(s,"isBboxOverLapping",function(){return Nt}),r.d(s,"filterRepeatPoints",function(){return ut}),r.d(s,"getSimplePolyline",function(){return Wt}),r.d(s,"getExpandedBBox",function(){return $t}),r.d(s,"pointDirection",function(){return Pt}),r.d(s,"getExpandedBBoxPoint",function(){return wt}),r.d(s,"mergeBBox",function(){return qe}),r.d(s,"getBBoxOfPoints",function(){return st}),r.d(s,"getPointsFromBBox",function(){return Dt}),r.d(s,"isPointOutsideBBox",function(){return Qt}),r.d(s,"getBBoxXCrossPoints",function(){return St}),r.d(s,"getBBoxYCrossPoints",function(){return nn}),r.d(s,"getBBoxCrossPointsByPoint",function(){return At}),r.d(s,"estimateDistance",function(){return Gt}),r.d(s,"costByPoints",function(){return xt}),r.d(s,"heuristicCostEstimate",function(){return Ht}),r.d(s,"rebuildPath",function(){return Rn}),r.d(s,"removeClosePointFromOpenList",function(){return Wn}),r.d(s,"isSegmentsIntersected",function(){return Rt}),r.d(s,"isSegmentCrossingBBox",function(){return Tt}),r.d(s,"getNextNeighborPoints",function(){return Ot}),r.d(s,"pathFinder",function(){return Ln}),r.d(s,"getBoxByOriginNode",function(){return rr}),r.d(s,"pointFilter",function(){return pn}),r.d(s,"getPolylinePoints",function(){return cr}),r.d(s,"getLongestEdge",function(){return Hn}),r.d(s,"isSegmentsInNode",function(){return ir}),r.d(s,"isSegmentsCrossNode",function(){return wr}),r.d(s,"getCrossPointInRect",function(){return $o}),r.d(s,"segmentDirection",function(){return Ro}),r.d(s,"points2PointsList",function(){return or}),r.d(s,"getSimplePoints",function(){return Qo}),r.d(s,"getBytesLength",function(){return Fo}),r.d(s,"getTextWidth",function(){return ai}),r.d(s,"getAppendAttributes",function(){return hi}),r.d(s,"getBezierControlPoints",function(){return ei}),r.d(s,"getBezierPoints",function(){return vo}),r.d(s,"getEndTangent",function(){return vi}),r.d(s,"getClosestPointOfPolyline",function(){return Nr}),r.d(s,"pickEdgeConfig",function(){return In}),r.d(s,"twoPointDistance",function(){return mr}),r.d(s,"createEdgeGenerator",function(){return er}),r.d(s,"snapToGrid",function(){return rl}),r.d(s,"getGridOffset",function(){return Xc}),r.d(s,"sampleCubic",function(){return Lo}),r.d(s,"getThetaOfVector",function(){return Ad}),r.d(s,"degrees",function(){return kp}),r.d(s,"Vector",function(){return We}),r.d(s,"Point",function(){return h}),r.d(s,"Matrix",function(){return Ts}),r.d(s,"RotateMatrix",function(){return Ju}),r.d(s,"ScaleMatrix",function(){return tm}),r.d(s,"TranslateMatrix",function(){return Md});var c=r(1),p=r(10);if(!p.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var d=r(43),_=Object(d.b)("observerBatching");function g(i){i()}var b=!1;function S(){return b}function T(i){return Object(c.t)(i)}var A,O=1e4,E=new Set;function C(){A===void 0&&(A=setTimeout(j,1e4))}function j(){A=void 0;var i=Date.now();E.forEach(function(o){var l=o.current;l&&i>=l.cleanAt&&(l.reaction.dispose(),o.current=null,E.delete(o))}),E.size>0&&C()}var U=!1,L=[],V={};function $(i){return"observer"+i}function H(i,o,l){o===void 0&&(o="observed"),l===void 0&&(l=V),S();var u,v=function(D){return function(){U?L.push(D):D()}}((l.useForceUpdate||d.d)()),f=p.d.useRef(null);if(!f.current){var m=new c.c($(o),function(){w.mounted?v():(m.dispose(),f.current=null)}),w=function(D){return{cleanAt:Date.now()+O,reaction:D}}(m);f.current=w,u=f,E.add(u),C()}var M=f.current.reaction;return p.d.useDebugValue(M,T),p.d.useEffect(function(){var D;return D=f,E.delete(D),f.current?f.current.mounted=!0:(f.current={reaction:new c.c($(o),function(){v()}),cleanAt:1/0},v()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(D){U=!0,L=[];try{var F=D();U=!1;var ee=L.length>0?L:void 0;return p.d.useLayoutEffect(function(){ee&&ee.forEach(function(te){return te()})},[ee]),F}finally{U=!1}}(function(){var D,F;if(M.track(function(){try{D=i()}catch(ee){F=ee}}),F)throw F;return D})}var Y=function(){return Y=Object.assign||function(i){for(var o,l=1,u=arguments.length;l<u;l++)for(var v in o=arguments[l])Object.prototype.hasOwnProperty.call(o,v)&&(i[v]=o[v]);return i},Y.apply(this,arguments)};function z(i,o){var l,u,v,f=Y({forwardRef:!1},o),m=i.displayName||i.name,w=function(M,D){return H(function(){return i(M,D)},m)};return w.displayName=m,l=f.forwardRef?Object(p.f)(Object(p.e)(w)):Object(p.f)(w),u=i,v=l,Object.keys(u).forEach(function(M){W[M]||Object.defineProperty(v,M,Object.getOwnPropertyDescriptor(u,M))}),l.displayName=m,l}var W={$$typeof:!0,render:!0,compare:!0,type:!0};function B(i){var o=i.children,l=i.render,u=o||l;return typeof u!="function"?null:H(u)}function q(i,o,l,u,v){var f=o==="children"?"render":"children",m=typeof i[o]=="function",w=typeof i[f]=="function";return m&&w?new Error("MobX Observer: Do not use children and render in the same time in`"+l):m||w?null:new Error("Invalid prop `"+v+"` of type `"+typeof i[o]+"` supplied to `"+l+"`, expected `function`.")}B.propTypes={children:q,render:q},B.displayName="Observer";var J;(J=p.g)||(J=g),Object(c.n)({reactionScheduler:J}),Object(d.a)()[_]=!0;var ce=0,re={};function Pe(i){return re[i]||(re[i]=function(o){if(typeof Symbol=="function")return Symbol(o);var l="__$mobx-react "+o+" ("+ce+")";return ce++,l}(i)),re[i]}function ge(i,o){if(fe(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),u=Object.keys(o);if(l.length!==u.length)return!1;for(var v=0;v<l.length;v++)if(!Object.hasOwnProperty.call(o,l[v])||!fe(i[l[v]],o[l[v]]))return!1;return!0}function fe(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o}function Ee(i,o,l){Object.hasOwnProperty.call(i,o)?i[o]=l:Object.defineProperty(i,o,{enumerable:!1,configurable:!0,writable:!0,value:l})}var Ne=Pe("patchMixins"),rt=Pe("patchedDefinition");function mt(i,o){for(var l=this,u=arguments.length,v=new Array(u>2?u-2:0),f=2;f<u;f++)v[f-2]=arguments[f];o.locks++;try{var m;return i!=null&&(m=i.apply(this,v)),m}finally{o.locks--,o.locks===0&&o.methods.forEach(function(w){w.apply(l,v)})}}function Je(i,o){return function(){for(var l=arguments.length,u=new Array(l),v=0;v<l;v++)u[v]=arguments[v];mt.call.apply(mt,[this,i,o].concat(u))}}function Xt(i,o,l){var u=function(w,M){var D=w[Ne]=w[Ne]||{},F=D[M]=D[M]||{};return F.locks=F.locks||0,F.methods=F.methods||[],F}(i,o);u.methods.indexOf(l)<0&&u.methods.push(l);var v=Object.getOwnPropertyDescriptor(i,o);if(!v||!v[rt]){var f=i[o],m=en(i,o,v?v.enumerable:void 0,u,f);Object.defineProperty(i,o,m)}}function en(i,o,l,u,v){var f,m=Je(v,u);return(f={})[rt]=!0,f.get=function(){return m},f.set=function(w){if(this===i)m=Je(w,u);else{var M=en(this,o,l,u,w);Object.defineProperty(this,o,M)}},f.configurable=!0,f.enumerable=l,f}var Bt=c.a||"$mobx",Nn=Pe("isMobXReactObserver"),Ue=Pe("isUnmounted"),Ae=Pe("skipRender"),$e=Pe("isForcingUpdate");function vt(i){var o=i.prototype;if(i[Nn]?Ut(o):i[Nn]=!0,o.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(i.__proto__!==p.b)if(o.shouldComponentUpdate){if(o.shouldComponentUpdate!==rn)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else o.shouldComponentUpdate=rn;Kt(o,"props"),Kt(o,"state");var l=o.render;return o.render=function(){return Et.call(this,l)},Xt(o,"componentWillUnmount",function(){var u;(u=this.render[Bt])===null||u===void 0||u.dispose(),this[Ue]=!0,!this.render[Bt]&&Ut(this)}),i}function Ut(i){return i.displayName||i.name||i.constructor&&(i.constructor.displayName||i.constructor.name)||"<component>"}function Et(i){var o=this;Ee(this,Ae,!1),Ee(this,$e,!1);var l=Ut(this),u=i.bind(this),v=!1,f=new c.c(l+".render()",function(){if(!v&&(v=!0,o[Ue]!==!0)){var w=!0;try{Ee(o,$e,!0),o[Ae]||p.a.prototype.forceUpdate.call(o),w=!1}finally{Ee(o,$e,!1),w&&f.dispose()}}});function m(){v=!1;var w=void 0,M=void 0;if(f.track(function(){try{M=Object(c.d)(!1,u)}catch(D){w=D}}),w)throw w;return M}return f.reactComponent=this,m[Bt]=f,this.render=m,m.call(this)}function rn(i,o){return this.state!==o||!ge(this.props,i)}function Kt(i,o){var l=Pe("reactProp_"+o+"_valueHolder"),u=Pe("reactProp_"+o+"_atomHolder");function v(){return this[u]||Ee(this,u,Object(c.o)("reactive "+o)),this[u]}Object.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){var f=!1;return c.f&&c.e&&(f=Object(c.f)(!0)),v.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(f),this[l]},set:function(f){this[$e]||ge(this[l],f)?Ee(this,l,f):(Ee(this,l,f),Ee(this,Ae,!0),v.call(this).reportChanged(),Ee(this,Ae,!1))}})}var Pn=typeof Symbol=="function"&&Symbol.for,yn=Pn?Symbol.for("react.forward_ref"):typeof p.e=="function"&&Object(p.e)(function(i){return null}).$$typeof,dt=Pn?Symbol.for("react.memo"):typeof p.f=="function"&&Object(p.f)(function(i){return null}).$$typeof;function An(i){if(i.isMobxInjector,dt&&i.$$typeof===dt)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(yn&&i.$$typeof===yn){var o=i.render;if(typeof o!="function")throw new Error("render property of ForwardRef was not a function");return Object(p.e)(function(){var l=arguments;return Object(p.c)(B,null,function(){return o.apply(void 0,l)})})}return typeof i!="function"||i.prototype&&i.prototype.render||i.isReactClass||Object.prototype.isPrototypeOf.call(p.a,i)?vt(i):z(i)}if(!p.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Ve=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var bn=function(i,o){for(var l=-1,u=i==null?0:i.length,v=Array(u);++l<u;)v[l]=o(i[l],l,i);return v},lr=function(){this.__data__=[],this.size=0},le=function(i,o){return i===o||i!=i&&o!=o},sr=function(i,o){for(var l=i.length;l--;)if(le(i[l][0],o))return l;return-1},Ir=Array.prototype.splice,io=function(i){var o=this.__data__,l=sr(o,i);return!(l<0)&&(l==o.length-1?o.pop():Ir.call(o,l,1),--this.size,!0)},wo=function(i){var o=this.__data__,l=sr(o,i);return l<0?void 0:o[l][1]},Yn=function(i){return sr(this.__data__,i)>-1},Go=function(i,o){var l=this.__data__,u=sr(l,i);return u<0?(++this.size,l.push([i,o])):l[u][1]=o,this};function Me(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}Me.prototype.clear=lr,Me.prototype.delete=io,Me.prototype.get=wo,Me.prototype.has=Yn,Me.prototype.set=Go;var Ze=Me,Le=function(){this.__data__=new Ze,this.size=0},lt=function(i){var o=this.__data__,l=o.delete(i);return this.size=o.size,l},on=function(i){return this.__data__.get(i)},Jt=function(i){return this.__data__.has(i)},Dn=r(31),Sr=Dn.a.Symbol,ui=Object.prototype,Si=ui.hasOwnProperty,Zo=ui.toString,ni=Sr?Sr.toStringTag:void 0,Tn=function(i){var o=Si.call(i,ni),l=i[ni];try{i[ni]=void 0;var u=!0}catch{}var v=Zo.call(i);return u&&(o?i[ni]=l:delete i[ni]),v},Un=Object.prototype.toString,Kn=function(i){return Un.call(i)},ur=Sr?Sr.toStringTag:void 0,to=function(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":ur&&ur in Object(i)?Tn(i):Kn(i)},Lr=function(i){var o=typeof i;return i!=null&&(o=="object"||o=="function")},yl,Ha=function(i){if(!Lr(i))return!1;var o=to(i);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"},gl=Dn.a["__core-js_shared__"],as=(yl=/[^.]+$/.exec(gl&&gl.keys&&gl.keys.IE_PROTO||""))?"Symbol(src)_1."+yl:"",Kd=function(i){return!!as&&as in i},bc=Function.prototype.toString,ma=function(i){if(i!=null){try{return bc.call(i)}catch{}try{return i+""}catch{}}return""},Fs=/^\[object .+?Constructor\]$/,Cn=Function.prototype,Lf=Object.prototype,Eo=Cn.toString,wc=Lf.hasOwnProperty,Ji=RegExp("^"+Eo.call(wc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=function(i){return!(!Lr(i)||Kd(i))&&(Ha(i)?Ji:Fs).test(ma(i))},ku=function(i,o){return i==null?void 0:i[o]},Ra=function(i,o){var l=ku(i,o);return aa(l)?l:void 0},ya=Ra(Dn.a,"Map"),Ca=Ra(Object,"create"),Ec=function(){this.__data__=Ca?Ca(null):{},this.size=0},Oc=function(i){var o=this.has(i)&&delete this.__data__[i];return this.size-=o?1:0,o},$f=Object.prototype.hasOwnProperty,Bs=function(i){var o=this.__data__;if(Ca){var l=o[i];return l==="__lodash_hash_undefined__"?void 0:l}return $f.call(o,i)?o[i]:void 0},Ff=Object.prototype.hasOwnProperty,Sc=function(i){var o=this.__data__;return Ca?o[i]!==void 0:Ff.call(o,i)},Zd=function(i,o){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=Ca&&o===void 0?"__lodash_hash_undefined__":o,this};function Il(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}Il.prototype.clear=Ec,Il.prototype.delete=Oc,Il.prototype.get=Bs,Il.prototype.has=Sc,Il.prototype.set=Zd;var Bf=Il,_l=function(){this.size=0,this.__data__={hash:new Bf,map:new(ya||Ze),string:new Bf}},xc=function(i){var o=typeof i;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?i!=="__proto__":i===null},Nu=function(i,o){var l=i.__data__;return xc(o)?l[typeof o=="string"?"string":"hash"]:l.map},Ac=function(i){var o=Nu(this,i).delete(i);return this.size-=o?1:0,o},Tc=function(i){return Nu(this,i).get(i)},Jd=function(i){return Nu(this,i).has(i)},Uf=function(i,o){var l=Nu(this,i),u=l.size;return l.set(i,o),this.size+=l.size==u?0:1,this};function Kr(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}Kr.prototype.clear=_l,Kr.prototype.delete=Ac,Kr.prototype.get=Tc,Kr.prototype.has=Jd,Kr.prototype.set=Uf;var Xr=Kr,Vf=function(i,o){var l=this.__data__;if(l instanceof Ze){var u=l.__data__;if(!ya||u.length<199)return u.push([i,o]),this.size=++l.size,this;l=this.__data__=new Xr(u)}return l.set(i,o),this.size=l.size,this};function ls(i){var o=this.__data__=new Ze(i);this.size=o.size}ls.prototype.clear=Le,ls.prototype.delete=lt,ls.prototype.get=on,ls.prototype.has=Jt,ls.prototype.set=Vf;var ga=ls,Pu=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},Gf=function(i){return this.__data__.has(i)};function zo(i){var o=-1,l=i==null?0:i.length;for(this.__data__=new Xr;++o<l;)this.add(i[o])}zo.prototype.add=zo.prototype.push=Pu,zo.prototype.has=Gf;var Ll=zo,$l=function(i,o){for(var l=-1,u=i==null?0:i.length;++l<u;)if(o(i[l],l,i))return!0;return!1},Ru=function(i,o){return i.has(o)},ss=function(i,o,l,u,v,f){var m=1&l,w=i.length,M=o.length;if(w!=M&&!(m&&M>w))return!1;var D=f.get(i),F=f.get(o);if(D&&F)return D==o&&F==i;var ee=-1,te=!0,be=2&l?new Ll:void 0;for(f.set(i,o),f.set(o,i);++ee<w;){var ke=i[ee],Ie=o[ee];if(u)var at=m?u(Ie,ke,ee,o,i,f):u(ke,Ie,ee,i,o,f);if(at!==void 0){if(at)continue;te=!1;break}if(be){if(!$l(o,function(it,gt){if(!Ru(be,gt)&&(ke===it||v(ke,it,l,u,f)))return be.push(gt)})){te=!1;break}}else if(ke!==Ie&&!v(ke,Ie,l,u,f)){te=!1;break}}return f.delete(i),f.delete(o),te},xi=Dn.a.Uint8Array,Mc=function(i){var o=-1,l=Array(i.size);return i.forEach(function(u,v){l[++o]=[v,u]}),l},zf=function(i){var o=-1,l=Array(i.size);return i.forEach(function(u){l[++o]=u}),l},kc=Sr?Sr.prototype:void 0,Fi=kc?kc.valueOf:void 0,ci=function(i,o,l,u,v,f,m){switch(l){case"[object DataView]":if(i.byteLength!=o.byteLength||i.byteOffset!=o.byteOffset)return!1;i=i.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=o.byteLength||!f(new xi(i),new xi(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return le(+i,+o);case"[object Error]":return i.name==o.name&&i.message==o.message;case"[object RegExp]":case"[object String]":return i==o+"";case"[object Map]":var w=Mc;case"[object Set]":var M=1&u;if(w||(w=zf),i.size!=o.size&&!M)return!1;var D=m.get(i);if(D)return D==o;u|=2,m.set(i,o);var F=ss(w(i),w(o),u,v,f,m);return m.delete(i),F;case"[object Symbol]":if(Fi)return Fi.call(i)==Fi.call(o)}return!1},_a=function(i,o){for(var l=-1,u=o.length,v=i.length;++l<u;)i[v+l]=o[l];return i},lo=Array.isArray,Qd=function(i,o,l){var u=o(i);return lo(i)?u:_a(u,l(i))},Bi=function(i,o){for(var l=-1,u=i==null?0:i.length,v=0,f=[];++l<u;){var m=i[l];o(m,l,i)&&(f[v++]=m)}return f},Wf=function(){return[]},Hf=Object.prototype.propertyIsEnumerable,Ui=Object.getOwnPropertySymbols,Qi=Ui?function(i){return i==null?[]:(i=Object(i),Bi(Ui(i),function(o){return Hf.call(i,o)}))}:Wf,Nc=function(i,o){for(var l=-1,u=Array(i);++l<i;)u[l]=o(l);return u},Vr=function(i){return i!=null&&typeof i=="object"},fi=function(i){return Vr(i)&&to(i)=="[object Arguments]"},Cu=Object.prototype,Xf=Cu.hasOwnProperty,Pc=Cu.propertyIsEnumerable,Du=fi(function(){return arguments}())?fi:function(i){return Vr(i)&&Xf.call(i,"callee")&&!Pc.call(i,"callee")},Xa=Du,Vi=r(48),us=/^(?:0|[1-9]\d*)$/,ea=function(i,o){var l=typeof i;return!!(o=o??9007199254740991)&&(l=="number"||l!="symbol"&&us.test(i))&&i>-1&&i%1==0&&i<o},ba=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991},Cr={};Cr["[object Float32Array]"]=Cr["[object Float64Array]"]=Cr["[object Int8Array]"]=Cr["[object Int16Array]"]=Cr["[object Int32Array]"]=Cr["[object Uint8Array]"]=Cr["[object Uint8ClampedArray]"]=Cr["[object Uint16Array]"]=Cr["[object Uint32Array]"]=!0,Cr["[object Arguments]"]=Cr["[object Array]"]=Cr["[object ArrayBuffer]"]=Cr["[object Boolean]"]=Cr["[object DataView]"]=Cr["[object Date]"]=Cr["[object Error]"]=Cr["[object Function]"]=Cr["[object Map]"]=Cr["[object Number]"]=Cr["[object Object]"]=Cr["[object RegExp]"]=Cr["[object Set]"]=Cr["[object String]"]=Cr["[object WeakMap]"]=!1;var Gi=function(i){return Vr(i)&&ba(i.length)&&!!Cr[to(i)]},Da=function(i){return function(o){return i(o)}},gi=r(49),cs=gi.a&&gi.a.isTypedArray,Fl=cs?Da(cs):Gi,ja=Object.prototype.hasOwnProperty,po=function(i,o){var l=lo(i),u=!l&&Xa(i),v=!l&&!u&&Object(Vi.a)(i),f=!l&&!u&&!v&&Fl(i),m=l||u||v||f,w=m?Nc(i.length,String):[],M=w.length;for(var D in i)!o&&!ja.call(i,D)||m&&(D=="length"||v&&(D=="offset"||D=="parent")||f&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||ea(D,M))||w.push(D);return w},Us=Object.prototype,qa=function(i){var o=i&&i.constructor;return i===(typeof o=="function"&&o.prototype||Us)},wa=function(i,o){return function(l){return i(o(l))}},Rc=wa(Object.keys,Object),ep=Object.prototype.hasOwnProperty,Cc=function(i){if(!qa(i))return Rc(i);var o=[];for(var l in Object(i))ep.call(i,l)&&l!="constructor"&&o.push(l);return o},Jo=function(i){return i!=null&&ba(i.length)&&!Ha(i)},Vs=function(i){return Jo(i)?po(i):Cc(i)},Ya=function(i){return Qd(i,Vs,Qi)},ri=Object.prototype.hasOwnProperty,Dc=function(i,o,l,u,v,f){var m=1&l,w=Ya(i),M=w.length;if(M!=Ya(o).length&&!m)return!1;for(var D=M;D--;){var F=w[D];if(!(m?F in o:ri.call(o,F)))return!1}var ee=f.get(i),te=f.get(o);if(ee&&te)return ee==o&&te==i;var be=!0;f.set(i,o),f.set(o,i);for(var ke=m;++D<M;){var Ie=i[F=w[D]],at=o[F];if(u)var it=m?u(at,Ie,F,o,i,f):u(Ie,at,F,i,o,f);if(!(it===void 0?Ie===at||v(Ie,at,l,u,f):it)){be=!1;break}ke||(ke=F=="constructor")}if(be&&!ke){var gt=i.constructor,Ft=o.constructor;gt==Ft||!("constructor"in i)||!("constructor"in o)||typeof gt=="function"&&gt instanceof gt&&typeof Ft=="function"&&Ft instanceof Ft||(be=!1)}return f.delete(i),f.delete(o),be},la=Ra(Dn.a,"DataView"),Ea=Ra(Dn.a,"Promise"),ju=Ra(Dn.a,"Set"),zi=Ra(Dn.a,"WeakMap"),ta="[object Map]",di="[object Promise]",sa="[object Set]",Ii="[object WeakMap]",ct="[object DataView]",It=ma(la),Lt=ma(ya),vn=ma(Ea),pr=ma(ju),Dr=ma(zi),ho=to;(la&&ho(new la(new ArrayBuffer(1)))!=ct||ya&&ho(new ya)!=ta||Ea&&ho(Ea.resolve())!=di||ju&&ho(new ju)!=sa||zi&&ho(new zi)!=Ii)&&(ho=function(i){var o=to(i),l=o=="[object Object]"?i.constructor:void 0,u=l?ma(l):"";if(u)switch(u){case It:return ct;case Lt:return ta;case vn:return di;case pr:return sa;case Dr:return Ii}return o});var N=ho,P="[object Arguments]",X="[object Array]",ie="[object Object]",we=Object.prototype.hasOwnProperty,Xe=function(i,o,l,u,v,f){var m=lo(i),w=lo(o),M=m?X:N(i),D=w?X:N(o),F=(M=M==P?ie:M)==ie,ee=(D=D==P?ie:D)==ie,te=M==D;if(te&&Object(Vi.a)(i)){if(!Object(Vi.a)(o))return!1;m=!0,F=!1}if(te&&!F)return f||(f=new ga),m||Fl(i)?ss(i,o,l,u,v,f):ci(i,o,M,l,u,v,f);if(!(1&l)){var be=F&&we.call(i,"__wrapped__"),ke=ee&&we.call(o,"__wrapped__");if(be||ke){var Ie=be?i.value():i,at=ke?o.value():o;return f||(f=new ga),v(Ie,at,l,u,f)}}return!!te&&(f||(f=new ga),Dc(i,o,l,u,v,f))},yt=function i(o,l,u,v,f){return o===l||(o==null||l==null||!Vr(o)&&!Vr(l)?o!=o&&l!=l:Xe(o,l,u,v,i,f))},zt=function(i,o,l,u){var v=l.length,f=v;if(i==null)return!f;for(i=Object(i);v--;){var m=l[v];if(m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++v<f;){var w=(m=l[v])[0],M=i[w],D=m[1];if(m[2]){if(M===void 0&&!(w in i))return!1}else{var F=new ga,ee;if(!(ee===void 0?yt(D,M,3,u,F):ee))return!1}}return!0},En=function(i){return i==i&&!Lr(i)},Er=function(i){for(var o=Vs(i),l=o.length;l--;){var u=o[l],v=i[u];o[l]=[u,v,En(v)]}return o},dn=function(i,o){return function(l){return l!=null&&l[i]===o&&(o!==void 0||i in Object(l))}},qr=function(i){var o=Er(i);return o.length==1&&o[0][2]?dn(o[0][0],o[0][1]):function(l){return l===i||zt(l,i,o)}},_r=function(i){return typeof i=="symbol"||Vr(i)&&to(i)=="[object Symbol]"},Fr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ua=/^\w*$/,Mo=function(i,o){if(lo(i))return!1;var l=typeof i;return!(l!="number"&&l!="symbol"&&l!="boolean"&&i!=null&&!_r(i))||ua.test(i)||!Fr.test(i)||o!=null&&i in Object(o)};function na(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError("Expected a function");var l=function(){var u=arguments,v=o?o.apply(this,u):u[0],f=l.cache;if(f.has(v))return f.get(v);var m=i.apply(this,u);return l.cache=f.set(v,m)||f,m};return l.cache=new(na.Cache||Xr),l}na.Cache=Xr;var bl=na,wl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bl=/\\(\\)?/g,fs=function(i){var o=bl(i,function(u){return l.size===500&&l.clear(),u}),l=o.cache;return o}(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(wl,function(l,u,v,f){o.push(v?f.replace(Bl,"$1"):u||l)}),o}),Ka=Sr?Sr.prototype:void 0,ds=Ka?Ka.toString:void 0,oi=function i(o){if(typeof o=="string")return o;if(lo(o))return bn(o,i)+"";if(_r(o))return ds?ds.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l},Ul=function(i){return i==null?"":oi(i)},El=function(i,o){return lo(i)?i:Mo(i,o)?[i]:fs(Ul(i))},Za=function(i){if(typeof i=="string"||_r(i))return i;var o=i+"";return o=="0"&&1/i==-1/0?"-0":o},Ja=function(i,o){for(var l=0,u=(o=El(o,i)).length;i!=null&&l<u;)i=i[Za(o[l++])];return l&&l==u?i:void 0},Gs=function(i,o,l){var u=i==null?void 0:Ja(i,o);return u===void 0?l:u},fh=function(i,o){return i!=null&&o in Object(i)},dh=function(i,o,l){for(var u=-1,v=(o=El(o,i)).length,f=!1;++u<v;){var m=Za(o[u]);if(!(f=i!=null&&l(i,m)))break;i=i[m]}return f||++u!=v?f:!!(v=i==null?0:i.length)&&ba(v)&&ea(m,v)&&(lo(i)||Xa(i))},tp=function(i,o){return i!=null&&dh(i,o,fh)},jc=function(i,o){return Mo(i)&&En(o)?dn(Za(i),o):function(l){var u=Gs(l,i);return u===void 0&&u===o?tp(l,i):yt(o,u,3)}},zs=function(i){return i},qf=function(i){return function(o){return o==null?void 0:o[i]}},ph=function(i){return function(o){return Ja(o,i)}},Ws=function(i){return Mo(i)?qf(Za(i)):ph(i)},Ic=function(i){return typeof i=="function"?i:i==null?zs:typeof i=="object"?lo(i)?jc(i[0],i[1]):qr(i):Ws(i)},Yf=function(i){return function(o,l,u){for(var v=-1,f=Object(o),m=u(o),w=m.length;w--;){var M=m[++v];if(l(f[M],M,f)===!1)break}return o}}(),Wo=function(i,o){return function(l,u){if(l==null)return l;if(!Jo(l))return i(l,u);for(var v=l.length,f=-1,m=Object(l);++f<v&&u(m[f],f,m)!==!1;);return l}}(function(i,o){return i&&Yf(i,o,Vs)}),Wi=function(i,o){var l=-1,u=Jo(i)?Array(i.length):[];return Wo(i,function(v,f,m){u[++l]=o(v,f,m)}),u},Kf=function(i,o){return(lo(i)?bn:Wi)(i,Ic(o))};Object(c.n)({isolateGlobalState:!0});var Zf=function(){try{var i=Ra(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Iu=function(i,o,l){o=="__proto__"&&Zf?Zf(i,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[o]=l},Wv=Object.prototype.hasOwnProperty,Lu=function(i,o,l){var u=i[o];Wv.call(i,o)&&le(u,l)&&(l!==void 0||o in i)||Iu(i,o,l)},$u=function(i,o,l,u){var v=!l;l||(l={});for(var f=-1,m=o.length;++f<m;){var w=o[f],M=void 0;M===void 0&&(M=i[w]),v?Iu(l,w,M):Lu(l,w,M)}return l},Lc=function(i,o,l){switch(l.length){case 0:return i.call(o);case 1:return i.call(o,l[0]);case 2:return i.call(o,l[0],l[1]);case 3:return i.call(o,l[0],l[1],l[2])}return i.apply(o,l)},Hs=Math.max,ps=function(i,o,l){return o=Hs(o===void 0?i.length-1:o,0),function(){for(var u=arguments,v=-1,f=Hs(u.length-o,0),m=Array(f);++v<f;)m[v]=u[o+v];v=-1;for(var w=Array(o+1);++v<o;)w[v]=u[v];return w[o]=l(m),Lc(i,this,w)}},Fu=function(i){return function(){return i}},$c=Zf?function(i,o){return Zf(i,"toString",{configurable:!0,enumerable:!1,value:Fu(o),writable:!0})}:zs,hs=Date.now,Hv=function(i){var o=0,l=0;return function(){var u=hs(),v=16-(u-l);if(l=u,v>0){if(++o>=800)return arguments[0]}else o=0;return i.apply(void 0,arguments)}},Fc=Hv($c),Xv=function(i,o){return Fc(ps(i,o,zs),i+"")},qv=function(i,o,l){if(!Lr(l))return!1;var u=typeof o;return!!(u=="number"?Jo(l)&&ea(o,l.length):u=="string"&&o in l)&&le(l[o],i)},hh=function(i){return Xv(function(o,l){var u=-1,v=l.length,f=v>1?l[v-1]:void 0,m=v>2?l[2]:void 0;for(f=i.length>3&&typeof f=="function"?(v--,f):void 0,m&&qv(l[0],l[1],m)&&(f=v<3?void 0:f,v=1),o=Object(o);++u<v;){var w=l[u];w&&i(o,w,u,f)}return o})},Jf=Object.prototype.hasOwnProperty,Li=hh(function(i,o){if(qa(o)||Jo(o))$u(o,Vs(o),i);else for(var l in o)Jf.call(o,l)&&Lu(i,l,o[l])}),vh=function(i,o,l,u){if(!Lr(i))return i;for(var v=-1,f=(o=El(o,i)).length,m=f-1,w=i;w!=null&&++v<f;){var M=Za(o[v]),D=l;if(M==="__proto__"||M==="constructor"||M==="prototype")return i;if(v!=m){var F=w[M];(D=void 0)==void 0&&(D=Lr(F)?F:ea(o[v+1])?[]:{})}Lu(w,M,D),w=w[M]}return i},ae=function(i,o,l){for(var u=-1,v=o.length,f={};++u<v;){var m=o[u],w=Ja(i,m);l(w,m)&&vh(f,El(m,i),w)}return f},Xs=function(i,o){return ae(i,o,function(l,u){return tp(i,u)})},Vl=Sr?Sr.isConcatSpreadable:void 0,Ia=function(i){return lo(i)||Xa(i)||!!(Vl&&i&&i[Vl])},jr=function(o,l,u,v,f){var m=-1,w=o.length;for(u||(u=Ia),f||(f=[]);++m<w;){var M=o[m];u(M)?_a(f,M):f[f.length]=M}return f},Ai=function(i){return i!=null&&i.length?jr(i):[]},Gr,Qa,Gl,Oa,Qf,ed,np,mh,zl,Ho,Bu,rp,Wl,el,Bc,vs,Sa,op,ip,tl=function(i){return Fc(ps(i,void 0,Ai),i+"")}(function(i,o){return i==null?{}:Xs(i,o)});function Oo(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function yh(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function ap(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Xo(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Zr,ii,Mr,co,jn,fo,Uc={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Ol=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],td=(Qa=Xo((Gr=function(){function i(u){(function(v,f){if(!(v instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),Oo(this,"isSilentMode",Qa,this),Oo(this,"stopZoomGraph",Gl,this),Oo(this,"stopScrollGraph",Oa,this),Oo(this,"stopMoveGraph",Qf,this),Oo(this,"adjustEdge",ed,this),Oo(this,"adjustEdgeMiddle",np,this),Oo(this,"adjustEdgeStartAndEnd",mh,this),Oo(this,"adjustNodePosition",zl,this),Oo(this,"hideAnchors",Ho,this),Oo(this,"allowRotation",Bu,this),Oo(this,"hoverOutline",rp,this),Oo(this,"nodeSelectedOutline",Wl,this),Oo(this,"edgeSelectedOutline",el,this),Oo(this,"nodeTextEdit",Bc,this),Oo(this,"edgeTextEdit",vs,this),Oo(this,"nodeTextDraggable",Sa,this),Oo(this,"edgeTextDraggable",op,this),Oo(this,"autoExpand",ip,this),ap(this,"multipleSelectKey",""),ap(this,"defaultConfig",{}),Li(this,this.getConfigDetail(u))}var o,l;return o=i,(l=[{key:"updateEditConfig",value:function(u){var v=this.getConfigDetail(u);Li(this,v)}},{key:"getConfigDetail",value:function(u){var v=u.isSilentMode,f=u.textEdit,m={};if(v===!1&&Li(m,this.defaultConfig),v===!0&&v!==this.isSilentMode){var w=tl(Uc,Ol);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Li(m,w)}f===!1&&Li(m,{nodeTextEdit:!1,edgeTextEdit:!1});var M=tl(u,Ol);return Li(m,M)}},{key:"getConfig",value:function(){return tl(this,Ol)}}])&&yh(o.prototype,l),i}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gl=Xo(Gr.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oa=Xo(Gr.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qf=Xo(Gr.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ed=Xo(Gr.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),np=Xo(Gr.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mh=Xo(Gr.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zl=Xo(Gr.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ho=Xo(Gr.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bu=Xo(Gr.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rp=Xo(Gr.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wl=Xo(Gr.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),el=Xo(Gr.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bc=Xo(Gr.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vs=Xo(Gr.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Sa=Xo(Gr.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),op=Xo(Gr.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ip=Xo(Gr.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xo(Gr.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateEditConfig"),Gr.prototype),Gr);r(65),r(66),function(i){i[i.DEFAULT=1]="DEFAULT",i[i.TEXT_EDIT=2]="TEXT_EDIT",i[i.SHOW_MENU=3]="SHOW_MENU",i[i.ALLOW_CONNECT=4]="ALLOW_CONNECT",i[i.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Zr||(Zr={})),function(i){i.KEY="logic-flow",i.NODE_NAME="lf-node",i.EDGE_NAME="lf-edge"}(ii||(ii={})),function(i){i.NODE="node",i.CIRCLE_NODE="circle-node",i.POLYGON_NODE="polygon-node",i.RECT_NODE="rect-node",i.TEXT_NODE="text-node",i.ELLIPSE_NODE="ellipse-node",i.DIAMOND_NODE="diamond-node",i.HTML_NODE="html-node",i.EDGE="edge",i.LINE_EDGE="line-edge",i.POLYLINE_EDGE="polyline-edge",i.BEZIER_EDGE="bezier-edge",i.GRAPH="graph"}(Mr||(Mr={})),function(i){i.NODE="node",i.EDGE="edge",i.GRAPH="graph"}(co||(co={})),function(i){i.ELEMENT_CLICK="element:click",i.NODE_CLICK="node:click",i.NODE_DBCLICK="node:dbclick",i.NODE_DELETE="node:delete",i.NODE_ADD="node:add",i.NODE_GROUP_COPY="node:group-copy-add",i.NODE_DND_ADD="node:dnd-add",i.NODE_DND_DRAG="node:dnd-drag",i.NODE_MOUSEDOWN="node:mousedown",i.NODE_DRAGSTART="node:dragstart",i.NODE_DRAG="node:drag",i.NODE_DROP="node:drop",i.NODE_MOUSEUP="node:mouseup",i.NODE_MOUSEMOVE="node:mousemove",i.NODE_MOUSEENTER="node:mouseenter",i.NODE_MOUSELEAVE="node:mouseleave",i.NODE_CONTEXTMENU="node:contextmenu",i.NODE_ROTATE="node:rotate",i.EDGE_DELETE="edge:delete",i.EDGE_ADD="edge:add",i.EDGE_CLICK="edge:click",i.EDGE_DBCLICK="edge:dbclick",i.EDGE_MOUSEENTER="edge:mouseenter",i.EDGE_MOUSELEAVE="edge:mouseleave",i.EDGE_CONTEXTMENU="edge:contextmenu",i.EDGE_ADJUST="edge:adjust",i.EDGE_EXCHANGE_NODE="edge:exchange-node",i.ANCHOR_DRAGSTART="anchor:dragstart",i.ANCHOR_DRAG="anchor:drag",i.ANCHOR_DROP="anchor:drop",i.ANCHOR_DRAGEND="anchor:dragend",i.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",i.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",i.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",i.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",i.ADJUST_POINT_DRAG="adjustPoint:drag",i.ADJUST_POINT_DROP="adjustPoint:drop",i.ADJUST_POINT_DRAGEND="adjustPoint:dragend",i.BLANK_MOUSEDOWN="blank:mousedown",i.BLANK_DRAGSTART="blank:dragstart",i.BLANK_DRAG="blank:drag",i.BLANK_DROP="blank:drop",i.BLANK_MOUSEMOVE="blank:mousemove",i.BLANK_MOUSEUP="blank:mouseup",i.BLANK_CLICK="blank:click",i.BLANK_CONTEXTMENU="blank:contextmenu",i.SELECTION_MOUSEDOWN="selection:mousedown",i.SELECTION_DRAGSTART="selection:dragstart",i.SELECTION_DRAG="selection:drag",i.SELECTION_DROP="selection:drop",i.SELECTION_MOUSEMOVE="selection:mousemove",i.SELECTION_MOUSEUP="selection:mouseup",i.SELECTION_CONTEXTMENU="selection:contextmenu",i.CONNECTION_NOT_ALLOWED="connection:not-allowed",i.HISTORY_CHANGE="history:change",i.TEXT_UPDATE="text:update",i.GRAPH_TRANSFORM="graph:transform",i.GRAPH_RENDERED="graph:rendered"}(jn||(jn={})),function(i){i.HORIZONTAL="horizontal",i.VERTICAL="vertical"}(fo||(fo={}));var ko,Do,lp,sp,Vc,Hi,nd,Uu,La;function ms(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return Hl(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return Hl(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hl(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function $a(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function gh(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Sl(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function xa(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}(function(i){i[i.DEFAULT=0]="DEFAULT",i[i.INCREASE=1]="INCREASE"})(ko||(ko={}));var up={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},cp=(Do=function(){function i(u,v){(function(w,M){if(!(w instanceof M))throw new TypeError("Cannot call a class as a function")})(this,i),Sl(this,"MINI_SCALE_SIZE",.2),Sl(this,"MAX_SCALE_SIZE",16),$a(this,"SCALE_X",lp,this),$a(this,"SKEW_Y",sp,this),$a(this,"SKEW_X",Vc,this),$a(this,"SCALE_Y",Hi,this),$a(this,"TRANSLATE_X",nd,this),$a(this,"TRANSLATE_Y",Uu,this),$a(this,"ZOOM_SIZE",La,this),Sl(this,"eventCenter",void 0),Sl(this,"translateLimitMinX",void 0),Sl(this,"translateLimitMinY",void 0),Sl(this,"translateLimitMaxX",void 0),Sl(this,"translateLimitMaxY",void 0),this.eventCenter=u;var f=v.stopMoveGraph,m=f!==void 0&&f;this.updateTranslateLimits(m)}var o,l;return o=i,l=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var v=ms(u,2),f=v[0],m=v[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(m-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var v=ms(u,2),f=v[0],m=v[1];return[f*this.SCALE_X+this.TRANSLATE_X,m*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,v,f){var m=ms(u,2),w=m[0],M=m[1];return[w+v/this.SCALE_X,M+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,v){return[u/this.SCALE_X,v/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],v=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,m=this.SCALE_Y;return u===!0?(f+=this.ZOOM_SIZE,m+=this.ZOOM_SIZE):u===!1?(f-=this.ZOOM_SIZE,m-=this.ZOOM_SIZE):typeof u=="number"&&(f=u,m=u),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(v&&(this.TRANSLATE_X-=(f-this.SCALE_X)*v[0],this.TRANSLATE_Y-=(m-this.SCALE_Y)*v[1]),this.SCALE_X=f,this.SCALE_Y=m,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(jn.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,v){this.TRANSLATE_X+u<=this.translateLimitMaxX&&this.TRANSLATE_X+u>=this.translateLimitMinX&&(this.TRANSLATE_X+=u),this.TRANSLATE_Y+v<=this.translateLimitMaxY&&this.TRANSLATE_Y+v>=this.translateLimitMinY&&(this.TRANSLATE_Y+=v),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,v,f,m){var w=ms(this.CanvasPointToHtmlPoint([u,v]),2),M=f/2-w[0],D=m/2-w[1];this.TRANSLATE_X+=M,this.TRANSLATE_Y+=D,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(u){var v=ms(Array.isArray(u)&&u.length===4?u:up[u.toString()],4);this.translateLimitMinX=v[0],this.translateLimitMinY=v[1],this.translateLimitMaxX=v[2],this.translateLimitMaxY=v[3]}}],l&&gh(o.prototype,l),i}(),lp=xa(Do.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),sp=xa(Do.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vc=xa(Do.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hi=xa(Do.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),nd=xa(Do.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Uu=xa(Do.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),La=xa(Do.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),xa(Do.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(Do.prototype,"zoom"),Do.prototype),xa(Do.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(Do.prototype,"resetZoom"),Do.prototype),xa(Do.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(Do.prototype,"translate"),Do.prototype),xa(Do.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(Do.prototype,"focusOn"),Do.prototype),Do),rd=function(i,o){for(var l=-1,u=i==null?0:i.length;++l<u&&o(i[l],l,i)!==!1;);return i},_h=function(i){var o=[];if(i!=null)for(var l in Object(i))o.push(l);return o},bh=Object.prototype.hasOwnProperty,wh=function(i){if(!Lr(i))return _h(i);var o=qa(i),l=[];for(var u in i)(u!="constructor"||!o&&bh.call(i,u))&&l.push(u);return l},od=function(i){return Jo(i)?po(i,!0):wh(i)},fp=r(107),dp=function(i,o){var l=-1,u=i.length;for(o||(o=Array(u));++l<u;)o[l]=i[l];return o},Gc=wa(Object.getPrototypeOf,Object),kr=Object.prototype.hasOwnProperty,Yv=function(i){var o=i.length,l=new i.constructor(o);return o&&typeof i[0]=="string"&&kr.call(i,"index")&&(l.index=i.index,l.input=i.input),l},pp=function(i){var o=new i.constructor(i.byteLength);return new xi(o).set(new xi(i)),o},qs=function(i,o){var l=pp(i.buffer);return new i.constructor(l,i.byteOffset,i.byteLength)},zc=/\w*$/,Kv=function(i){var o=new i.constructor(i.source,zc.exec(i));return o.lastIndex=i.lastIndex,o},Eh=Sr?Sr.prototype:void 0,Aa=Eh?Eh.valueOf:void 0,Zv=function(i){return Aa?Object(Aa.call(i)):{}},Wc=function(i,o){var l=o?pp(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)},id=function(i,o,l){var u=i.constructor;switch(o){case"[object ArrayBuffer]":return pp(i);case"[object Boolean]":case"[object Date]":return new u(+i);case"[object DataView]":return qs(i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Wc(i,l);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(i);case"[object RegExp]":return Kv(i);case"[object Symbol]":return Zv(i)}},hp=Object.create,Oh=function(){function i(){}return function(o){if(!Lr(o))return{};if(hp)return hp(o);i.prototype=o;var l=new i;return i.prototype=void 0,l}}(),ca=function(i){return typeof i.constructor!="function"||qa(i)?{}:Oh(Gc(i))},ys=function(i){return Vr(i)&&N(i)=="[object Map]"},ad=gi.a&&gi.a.isMap,Ys=ad?Da(ad):ys,ld=function(i){return Vr(i)&&N(i)=="[object Set]"},vp=gi.a&&gi.a.isSet,sd=vp?Da(vp):ld,Hc="[object Arguments]",ud="[object Function]",cd="[object Object]",Yr={};Yr[Hc]=Yr["[object Array]"]=Yr["[object ArrayBuffer]"]=Yr["[object DataView]"]=Yr["[object Boolean]"]=Yr["[object Date]"]=Yr["[object Float32Array]"]=Yr["[object Float64Array]"]=Yr["[object Int8Array]"]=Yr["[object Int16Array]"]=Yr["[object Int32Array]"]=Yr["[object Map]"]=Yr["[object Number]"]=Yr["[object Object]"]=Yr["[object RegExp]"]=Yr["[object Set]"]=Yr["[object String]"]=Yr["[object Symbol]"]=Yr["[object Uint8Array]"]=Yr["[object Uint8ClampedArray]"]=Yr["[object Uint16Array]"]=Yr["[object Uint32Array]"]=!0,Yr["[object Error]"]=Yr[ud]=Yr["[object WeakMap]"]=!1;var Jv=function i(o,l,u,v,f,m){var w,M=1&l;if(w!==void 0)return w;if(!Lr(o))return o;var D=lo(o);if(D)w=Yv(o);else{var F=N(o),ee=F==ud||F=="[object GeneratorFunction]";if(Object(Vi.a)(o))return Object(fp.a)(o,M);if(F==cd||F==Hc||ee&&!f)w=ee?{}:ca(o);else{if(!Yr[F])return f?o:{};w=id(o,F,M)}}m||(m=new ga);var te=m.get(o);if(te)return te;m.set(o,w),sd(o)?o.forEach(function(ke){w.add(i(ke,l,u,ke,o,m))}):Ys(o)&&o.forEach(function(ke,Ie){w.set(Ie,i(ke,l,u,Ie,o,m))});var be=D?void 0:Ya(o);return rd(be||o,function(ke,Ie){be&&(ke=o[Ie=ke]),Lu(w,Ie,i(ke,l,u,Ie,o,m))}),w},no=function(i){return Jv(i,5)},fd=function(i,o,l){(l!==void 0&&!le(i[o],l)||l===void 0&&!(o in i))&&Iu(i,o,l)},Sh=function(i){return Vr(i)&&Jo(i)},Ks=Function.prototype,xh=Object.prototype,Vu=Ks.toString,Ah=xh.hasOwnProperty,Zs=Vu.call(Object),_i=function(i){if(!Vr(i)||to(i)!="[object Object]")return!1;var o=Gc(i);if(o===null)return!0;var l=Ah.call(o,"constructor")&&o.constructor;return typeof l=="function"&&l instanceof l&&Vu.call(l)==Zs},nl=function(i,o){if((o!=="constructor"||typeof i[o]!="function")&&o!="__proto__")return i[o]},Xl=function(i){return $u(i,od(i))},Js=function(i,o,l,u,v,f,m){var w=nl(i,l),M=nl(o,l),D=m.get(M);if(D)fd(i,l,D);else{var F=void 0,ee=F===void 0;if(ee){var te=lo(M),be=!te&&Object(Vi.a)(M),ke=!te&&!be&&Fl(M);F=M,te||be||ke?lo(w)?F=w:Sh(w)?F=dp(w):be?(ee=!1,F=Object(fp.a)(M,!0)):ke?(ee=!1,F=Wc(M,!0)):F=[]:_i(M)||Xa(M)?(F=w,Xa(w)?F=Xl(w):Lr(w)&&!Ha(w)||(F=ca(M))):ee=!1}ee&&(m.set(M,F),v(F,M,u,f,m),m.delete(M)),fd(i,l,F)}},Qs=function i(o,l,u,v,f){o!==l&&Yf(l,function(m,w){if(f||(f=new ga),Lr(m))Js(o,l,w,u,i,v,f);else{var M=void 0;M===void 0&&(M=m),fd(o,w,M)}},od)},eu=hh(function(i,o,l){Qs(i,o,l)}),dd={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},ql=function(i){var o=no(dd);return i&&(o=eu(o,i)),o};r(82),r(166);function tu(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}var pd=function(){function i(){var u,v,f;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),f={},(v="_events")in(u=this)?Object.defineProperty(u,v,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[v]=f}var o,l;return o=i,(l=[{key:"on",value:function(u,v,f){var m=this;return u==null||u.split(",").forEach(function(w){w=w.trim(),m._events[w]||(m._events[w]=[]),m._events[w].push({callback:v,once:!!f})}),this}},{key:"once",value:function(u,v){var f=this;u==null||u.split(",").forEach(function(m){return m=m.trim(),f.on(m,v,!0)})}},{key:"emit",value:function(u,v){var f=this;u==null||u.split(",").forEach(function(m){var w=f._events[m]||[],M=f._events["*"]||[],D=function(F){for(var ee=F.length,te=0;te<ee;te++)if(F[te]){var be=F[te],ke=be.callback;be.once&&(F.splice(te,1),F.length===0&&delete f._events[m],ee--,te--),ke.apply(f,[v])}};D(w),D(M)})}},{key:"off",value:function(u,v){var f=this;return u||(this._events={}),u.split(",").forEach(function(m){if(v){for(var w=f._events[m]||[],M=w.length,D=0;D<M;D++)w[D].callback===v&&(w.splice(D,1),M--,D--);w.length===0&&delete f._events[m]}else delete f._events[m]}),this}},{key:"getEvents",value:function(){return this._events}}])&&tu(o.prototype,l),i}();function rl(i,o){return o*Math.round(i/o)||i}function Xc(i,o){return i%o}function qc(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return Gu(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return Gu(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gu(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}var zu=function(i,o,l){var u=qc(i,2),v=u[0],f=u[1],m=qc(o,2),w=m[0],M=m[1],D=qc(l,2),F=D[0],ee=D[1];return v>w&&v<F&&f>M&&f<ee},Wu=function(i,o){var l=!1;switch(o.multipleSelectKey){case"meta":l=i.metaKey;break;case"alt":l=i.altKey;break;case"shift":l=i.shiftKey;break;case"ctrl":l=i.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var hd=function(i){return function(o,l,u){var v=Object(o);if(!Jo(o)){var f=Ic(l);o=Vs(o),l=function(w){return f(v[w],w,v)}}var m=i(o,l,u);return m>-1?v[f?o[m]:m]:void 0}},Hu=function(i,o,l,u){for(var v=i.length,f=l+-1;++f<v;)if(o(i[f],f,i))return f;return-1},mp=/\s/,vd=function(i){for(var o=i.length;o--&&mp.test(i.charAt(o)););return o},Th=/^\s+/,yp=function(i){return i&&i.slice(0,vd(i)+1).replace(Th,"")},ol=/^[-+]0x[0-9a-f]+$/i,gp=/^0b[01]+$/i,_p=/^0o[0-7]+$/i,bp=parseInt,Xu=function(i){if(typeof i=="number")return i;if(_r(i))return NaN;if(Lr(i)){var o=typeof i.valueOf=="function"?i.valueOf():i;i=Lr(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=yp(i);var l=gp.test(i);return l||_p.test(i)?bp(i.slice(2),l?2:8):ol.test(i)?NaN:+i},xl=1/0,Yc=function(i){return i?(i=Xu(i))===xl||i===-1/0?17976931348623157e292*(i<0?-1:1):i==i?i:0:i===0?i:0},md=function(i){var o=Yc(i),l=o%1;return o==o?l?o-l:o:0},yd=Math.max,gs,_s=hd(function(i,o,l){var u=i==null?0:i.length;if(!u)return-1;var v=l==null?0:md(l);return v<0&&(v=yd(u+v,0)),Hu(i,Ic(o),v)}),nr=new Uint8Array(16);function qu(){if(!gs&&!(gs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gs(nr)}for(var Kc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,il=function(i){return typeof i=="string"&&Kc.test(i)},pi=[],nu=0;nu<256;++nu)pi.push((nu+256).toString(16).substr(1));var jo=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(pi[i[o+0]]+pi[i[o+1]]+pi[i[o+2]]+pi[i[o+3]]+"-"+pi[i[o+4]]+pi[i[o+5]]+"-"+pi[i[o+6]]+pi[i[o+7]]+"-"+pi[i[o+8]]+pi[i[o+9]]+"-"+pi[i[o+10]]+pi[i[o+11]]+pi[i[o+12]]+pi[i[o+13]]+pi[i[o+14]]+pi[i[o+15]]).toLowerCase();if(!il(l))throw TypeError("Stringified UUID is invalid");return l},bs=function(i,o,l){var u=(i=i||{}).random||(i.rng||qu)();return u[6]=15&u[6]|64,u[8]=63&u[8]|128,jo(u)},ra=function(){return bs()},Zc=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=i.nodes.reduce(function(u,v){return u[v.id]=o+bs(),v.id=u[v.id],u},{});return i.edges.forEach(function(u){u.id=o+bs(),u.sourceNodeId=l[u.sourceNodeId],u.targetNodeId=l[u.targetNodeId]}),i},$i=(r(105),r(127),r(207),function(i,o,l){var u=i.x,v=i.y,f=o.x,m=o.y,w=l.x,M=l.y,D=(M-m)/(w-f),F=m-D*f;return u>=f&&u<=w&&v>=m&&v<=M&&Math.abs(v-D*u+F)<Number.EPSILON});function qo(i){return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},qo(i)}function Al(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function Tl(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Al(Object(l),!0).forEach(function(u){gd(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Al(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function gd(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Mt,ru,Jc,Qc,ws,ou,_d,wp,iu,ef,bd,Ep,Ml,Op,al,Es,wd,Mh,kh,Nh,Sp,Ed=function(i){return i.anchors},tf=function(i,o){for(var l,u=o.nodes,v=u.length-1;v>=0;v--){var f=u[v];if(Qv(i,f)){var m=f.getTargetAnchor(i);if(m){var w={node:f,anchorIndex:m.index,anchor:m.anchor};l&&!Ph(f,l.node,o)||(l=w)}}}return l},Ph=function(i,o,l){return i.zIndex>o.zIndex||l.nodesMap[i.id].index>l.nodesMap[o.id].index},ll=function(i,o,l,u){return Math.hypot(i-l,o-u)},Os=function(i,o){var l=!1,u=So(o);return i.x>=u.minX-0&&i.x<=u.maxX+0&&i.y>=u.minY-0&&i.y<=u.maxY+0&&(l=!0),l},Qv=function(i,o){var l=!1,u=So(o);return i.x>=u.minX-5&&i.x<=u.maxX+5&&i.y>=u.minY-5&&i.y<=u.maxY+5&&(l=!0),l},So=function(i){var o=i.x,l=i.y,u=i.width,v=i.height;return{minX:o-u/2,minY:l-v/2,maxX:o+u/2,maxY:l+v/2,x:o,y:l,width:u,height:v,centerX:o,centerY:l}},nf=function(i,o,l){var u,v=function(m){var w=m,M=w.x,D=w.y,F=w.width,ee=w.height,te=w.radius;return[{x:M-F/2+te,y:D-ee/2+te,r:te},{x:M+F/2-te,y:D-ee/2+te,r:te},{x:M-F/2+te,y:D+ee/2-te,r:te},{x:M+F/2-te,y:D+ee/2-te,r:te}]}(l),f=Number.MAX_SAFE_INTEGER;return v.forEach(function(m){var w=ll(i.x,i.y,m.x,m.y);w<f&&(f=w,u=m)}),au(i,o,u)},au=function(i,o,l){var u,v=l,f=v.x,m=v.y,w=v.r;if(o===fo.HORIZONTAL){var M=f-Math.sqrt(w*w-(i.y-m)*(i.y-m)),D=f+Math.sqrt(w*w-(i.y-m)*(i.y-m));u={x:Math.abs(M-i.x)<Math.abs(D-i.x)?M:D,y:i.y}}else if(o===fo.VERTICAL){var F=m-Math.sqrt(w*w-(i.x-f)*(i.x-f)),ee=m+Math.sqrt(w*w-(i.x-f)*(i.x-f)),te=Math.abs(F-i.y)<Math.abs(ee-i.y)?F:ee;u={x:i.x,y:te}}return u},rf=function(i,o){var l=o,u=!1,v=l.x-l.width/2+l.radius,f=l.x+l.width/2-l.radius,m=l.y-l.height/2+l.radius,w=l.y+l.height/2-l.radius,M=l.x,D=l.y,F=l.width,ee=l.height;return i.y===D+ee/2||i.y===D-ee/2?u=i.x>v&&i.x<f:i.x!==M+F/2&&i.x!==M-F/2||(u=i.y>m&&i.y<w),u},Yu=function(i,o,l){var u,v=l,f=v.x,m=v.y,w=v.rx,M=v.ry;if(o===fo.HORIZONTAL){var D=f-Math.sqrt(w*w-(i.y-m)*(i.y-m)*w*w/(M*M)),F=f+Math.sqrt(w*w-(i.y-m)*(i.y-m)*w*w/(M*M));u={x:Math.abs(D-i.x)<Math.abs(F-i.x)?D:F,y:i.y}}else if(o===fo.VERTICAL){var ee=m-Math.sqrt(M*M-(i.x-f)*(i.x-f)*M*M/(w*w)),te=m+Math.sqrt(M*M-(i.x-f)*(i.x-f)*M*M/(w*w)),be=Math.abs(ee-i.y)<Math.abs(te-i.y)?ee:te;u={x:i.x,y:be}}return u},of=function(i,o,l){for(var u,v=l.pointsPosition,f=Number.MAX_SAFE_INTEGER,m=[],w=0;w<v.length;w++)m.push({start:v[w],end:v[(w+1)%v.length]});return m.forEach(function(M){var D=M.start,F=M.end,ee=D,te=F;D.x>F.x&&(ee=F,te=D);var be={x:i.x,y:i.y};if(ee.x===te.x&&o===fo.HORIZONTAL&&(be={x:ee.x,y:i.y}),ee.y===te.y&&o===fo.VERTICAL&&(be={x:i.x,y:ee.y}),ee.x!==te.x&&ee.y!==te.y){var ke=(te.y-ee.y)/(te.x-ee.x),Ie=(ee.x*te.y-te.x*ee.y)/(ee.x-te.x);o===fo.HORIZONTAL?be={x:(i.y-Ie)/ke,y:i.y}:o===fo.VERTICAL&&(be={x:i.x,y:ke*i.x+Ie})}if($i(be,D,F)){var at=ll(be.x,be.y,i.x,i.y);at<f&&(f=at,u=be)}}),u},af=function(i,o,l,u){var v=i.x,f=i.y;return o.x>i.x?v=i.x+l/2:o.x<i.x&&(v=i.x-l/2),o.y>i.y?f=i.y+u/2:o.y<i.y&&(f=i.y-u/2),{x:v,y:f}},lf=function(i){var o=i.rows,l=i.style,u=i.rowsLength,v=i.className,f=document.createElement("div");f.style.fontSize=l.fontSize,f.style.width=l.width,f.className=v,f.style.lineHeight=l.lineHeight,f.style.padding=l.padding,l.fontFamily&&(f.style.fontFamily=l.fontFamily),u>1?o.forEach(function(w){var M=document.createElement("div");M.textContent=w,f.appendChild(M)}):f.textContent=o,document.body.appendChild(f);var m=f.clientHeight;return document.body.removeChild(f),m},lu=function(i){var o=i.rows,l=i.rowsLength,u=i.fontSize,v=0;return o&&o.forEach(function(f){var m=Fo(f);v=m>v?m:v}),{width:Math.ceil(v/2)*u+u/4,height:l*(u+2)+u/4}},Yl=function(i){return qo(i)!=="object"?{isAllPass:!!i,msg:i?"":"不允许连接"}:i},bi=function(i){try{return JSON.parse(JSON.stringify(i))}catch{return i}},Od=1e3,sf=999,su=function(){return++Od};function Ku(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function Ti(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Ku(Object(l),!0).forEach(function(u){Xi(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Ku(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function No(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function uf(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Xi(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Vn(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Sd=(Mt=function(){function i(u,v){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),Xi(this,"id",""),No(this,"type",ru,this),No(this,"sourceNodeId",Jc,this),No(this,"targetNodeId",Qc,this),No(this,"startPoint",ws,this),No(this,"endPoint",ou,this),No(this,"text",_d,this),No(this,"properties",wp,this),No(this,"points",iu,this),No(this,"pointsList",ef,this),No(this,"isSelected",bd,this),No(this,"isHovered",Ep,this),No(this,"isHitable",Ml,this),No(this,"draggable",Op,this),No(this,"visible",al,this),Xi(this,"virtual",!1),No(this,"isAnimation",Es,this),No(this,"isShowAdjustPoint",wd,this),Xi(this,"graphModel",void 0),No(this,"zIndex",Mh,this),Xi(this,"BaseType",co.EDGE),Xi(this,"modelType",Mr.EDGE),No(this,"state",kh,this),Xi(this,"additionStateData",void 0),Xi(this,"sourceAnchorId",""),Xi(this,"targetAnchorId",""),Xi(this,"menu",void 0),Xi(this,"customTextPosition",!1),No(this,"style",Nh,this),No(this,"arrowConfig",Sp,this),this.graphModel=v,this.initEdgeData(u),this.setAttributes()}var o,l;return o=i,l=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var v=this.graphModel.idGenerator,f=v&&v(u.type),m=this.createId();u.id=m||f||ra()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var w=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=w,Li(this,In(u)),this.graphModel.overlapMode===ko.INCREASE&&(this.zIndex=u.zIndex||su()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Ti(Ti({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Ti({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return no(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return no(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),v=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,m=this.isAnimation?v.stroke:u.stroke;return Ti(Ti({},u),{},{fill:m,stroke:m},f)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return no(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,v;return(u=this.graphModel)===null||u===void 0||(v=u.nodesMap[this.sourceNodeId])===null||v===void 0?void 0:v.model}},{key:"targetNode",get:function(){var u,v;return(u=this.graphModel)===null||u===void 0||(v=u.nodesMap[this.targetNodeId])===null||v===void 0?void 0:v.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,v,f){var m,w,M=Ed(u);return f&&(m=_s(M,function(D){return D.id===f}))||M.forEach(function(D){var F=mr(D,v);(w===void 0||F<w)&&(w=F,m=D)}),m}},{key:"getEndAnchor",value:function(u,v){var f,m,w=this,M=Ed(u);return v&&(f=_s(M,function(D){return D.id===v}))||M.forEach(function(D){var F=mr(D,w.startPoint);(m===void 0||F<m)&&(m=F,f=D)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,v=u.x,f=u.y,m=u.value,w={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return m&&(w.text={x:v,y:f,value:m}),this.graphModel.overlapMode===ko.INCREASE&&(w.zIndex=this.zIndex),w}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,v){this.properties[u]=bi(v),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Ti(Ti({},Object(c.I)(this.properties)),bi(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var v=this.arrowConfig,f=v.markerEnd,m=v.markerStart;m&&m==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,v){this.style=Ti(Ti({},this.style),{},Xi({},u,bi(v)))}},{key:"setStyles",value:function(u){this.style=Ti(Ti({},this.style),bi(u))}},{key:"updateStyles",value:function(u){this.style=Ti({},bi(u))}},{key:"formatText",value:function(u){var v=this.textPosition,f=v.x,m=v.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||f,y:u.text.y||m,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:f,y:m,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,v=u.x,f=u.y;this.text.x=v,this.text.y=f}},{key:"moveText",value:function(u,v){if(this.text){var f=this.text,m=f.x,w=f.y,M=f.value,D=f.draggable,F=f.editable;this.text={value:M,draggable:D,x:m+u,y:w+v,editable:F}}}},{key:"setText",value:function(u){u&&Li(this.text,u)}},{key:"updateText",value:function(u){this.text=Ti(Ti({},Object(c.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!u)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var v=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!v)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:v.x,y:v.y}),this.targetAnchorId||(this.targetAnchorId=v.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,v){this.state=u,this.additionStateData=v}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,v){this.startPoint.x+=u,this.startPoint.y+=v}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,v){this.endPoint.x+=u,this.endPoint.y+=v}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Li(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var v=u.startPoint,f=u.endPoint;this.updateStartPoint({x:v.x,y:v.y}),this.updateEndPoint({x:f.x,y:f.y})}}],l&&uf(o.prototype,l),i}(),ru=Vn(Mt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Jc=Vn(Mt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qc=Vn(Mt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ws=Vn(Mt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ou=Vn(Mt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_d=Vn(Mt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),wp=Vn(Mt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),iu=Vn(Mt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ef=Vn(Mt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bd=Vn(Mt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ep=Vn(Mt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ml=Vn(Mt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Op=Vn(Mt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),al=Vn(Mt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Es=Vn(Mt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wd=Vn(Mt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mh=Vn(Mt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),kh=Vn(Mt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Nh=Vn(Mt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Sp=Vn(Mt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Vn(Mt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Mt.prototype,"sourceNode"),Mt.prototype),Vn(Mt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Mt.prototype,"targetNode"),Mt.prototype),Vn(Mt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Mt.prototype,"textPosition"),Mt.prototype),Vn(Mt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setProperty"),Mt.prototype),Vn(Mt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"deleteProperty"),Mt.prototype),Vn(Mt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setProperties"),Mt.prototype),Vn(Mt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"changeEdgeId"),Mt.prototype),Vn(Mt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setStyle"),Mt.prototype),Vn(Mt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setStyles"),Mt.prototype),Vn(Mt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"updateStyles"),Mt.prototype),Vn(Mt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"formatText"),Mt.prototype),Vn(Mt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"resetTextPosition"),Mt.prototype),Vn(Mt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"moveText"),Mt.prototype),Vn(Mt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setText"),Mt.prototype),Vn(Mt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"updateText"),Mt.prototype),Vn(Mt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setAnchors"),Mt.prototype),Vn(Mt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setSelected"),Mt.prototype),Vn(Mt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setHovered"),Mt.prototype),Vn(Mt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setHitable"),Mt.prototype),Vn(Mt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"openEdgeAnimation"),Mt.prototype),Vn(Mt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"closeEdgeAnimation"),Mt.prototype),Vn(Mt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setElementState"),Mt.prototype),Vn(Mt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"updateStartPoint"),Mt.prototype),Vn(Mt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"moveStartPoint"),Mt.prototype),Vn(Mt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"updateEndPoint"),Mt.prototype),Vn(Mt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"moveEndPoint"),Mt.prototype),Vn(Mt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"setZIndex"),Mt.prototype),Vn(Mt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"initPoints"),Mt.prototype),Vn(Mt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"updateAttributes"),Mt.prototype),Vn(Mt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"getAdjustStart"),Mt.prototype),Vn(Mt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"getAdjustEnd"),Mt.prototype),Vn(Mt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Mt.prototype,"updateAfterAdjustStartAndEnd"),Mt.prototype),Mt),cf=Sd;function xd(i){return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},xd(i)}function xp(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function Rh(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?xp(Object(l),!0).forEach(function(u){xs(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):xp(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function Ss(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Ch(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function uu(){return uu=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=Dh(i,o);if(u){var v=Object.getOwnPropertyDescriptor(u,o);return v.get?v.get.call(arguments.length<3?i:l):v.value}},uu.apply(this,arguments)}function Dh(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Kl(i))!==null;);return i}function Ap(i,o){return Ap=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Ap(i,o)}function ff(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Kl(i);if(o){var v=Kl(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return jh(this,l)}}function jh(i,o){if(o&&(xd(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fa(i)}function Fa(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Kl(i){return Kl=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Kl(i)}function xs(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var zn,Tp,Zu=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Ap(f,m)})(v,i);var o,l,u=ff(v);function v(){var f;Ss(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return xs(Fa(f=u.call.apply(u,[this].concat(w))),"modelType",Mr.LINE_EDGE),f}return o=v,(l=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return Rh(Rh({},uu(Kl(v.prototype),"getEdgeStyle",this).call(this)),no(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Ch(o.prototype,l),v}(cf);function Zl(i){return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Zl(i)}function df(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return qi(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return qi(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qi(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function sl(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function Io(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?sl(Object(l),!0).forEach(function(u){Mp(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):sl(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function fa(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Ba(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function em(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function pf(){return pf=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=cu(i,o);if(u){var v=Object.getOwnPropertyDescriptor(u,o);return v.get?v.get.call(arguments.length<3?i:l):v.value}},pf.apply(this,arguments)}function cu(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=oa(i))!==null;);return i}function br(i,o){return br=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},br(i,o)}function Ih(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=oa(i);if(o){var v=oa(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return da(this,l)}}function da(i,o){if(o&&(Zl(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Po(i)}function Po(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function oa(i){return oa=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},oa(i)}function Mp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Mi(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Ta=(zn=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&br(f,m)})(v,i);var o,l,u=Ih(v);function v(){var f;Ba(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return Mp(Po(f=u.call.apply(u,[this].concat(w))),"modelType",Mr.POLYLINE_EDGE),Mp(Po(f),"draggingPointList",void 0),fa(Po(f),"dbClickPosition",Tp,Po(f)),f}return o=v,(l=[{key:"initEdgeData",value:function(f){this.offset=30,pf(oa(v.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return Io(Io({},pf(oa(v.prototype),"getEdgeStyle",this).call(this)),no(f))}},{key:"getTextPosition",value:function(){var f,m=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!m){var w=this.dbClickPosition;return{x:w.x,y:w.y}}var M=or(this.points),D=df(Hn(M),2),F=D[0],ee=D[1];return{x:(F.x+ee.x)/2,y:(F.y+ee.y)/2}}},{key:"getAfterAnchor",value:function(f,m,w){var M,D;return w.forEach(function(F){var ee;f===fo.HORIZONTAL?ee=Math.abs(m.y-F.y):f===fo.VERTICAL&&(ee=Math.abs(m.x-F.x)),(!D||D>ee)&&(D=ee,M=F)}),M}},{key:"getCrossPoint",value:function(f,m,w){var M;return f===fo.HORIZONTAL?M={x:w.x,y:m.y}:f===fo.VERTICAL&&(M={x:m.x,y:w.y}),M}},{key:"removeCrossPoints",value:function(f,m,w){var M=w.map(function(it){return it});if(f===1){var D=M[f],F=M[m],ee=M[f-1];if(ir(ee,D,this.sourceNode)){if(wr(D,F,this.sourceNode)){var te=$o(D,F,this.sourceNode);te&&(M[f]=te,M.splice(f-1,1),f--,m--)}}else this.sourceNode.anchors.forEach(function(it){(it.x===ee.x&&it.x===D.x||it.y===ee.y&&it.y===D.y)&&ll(it.x,it.y,D.x,D.y)<ll(ee.x,ee.y,D.x,D.y)&&(M[f-1]=it)})}if(m===w.length-2){var be=M[f],ke=M[m],Ie=M[m+1];if(ir(ke,Ie,this.targetNode)){if(wr(be,ke,this.targetNode)){var at=$o(be,ke,this.targetNode);at&&(M[m]=at,M.splice(m+1,1))}}else this.targetNode.anchors.forEach(function(it){(it.x===Ie.x&&it.x===ke.x||it.y===Ie.y&&it.y===ke.y)&&ll(it.x,it.y,ke.x,ke.y)<ll(Ie.x,Ie.y,ke.x,ke.y)&&(M[m+1]=it)})}return M}},{key:"getDraggingPoints",value:function(f,m,w,M,D){var F=D.map(function(be){return be}),ee=this.getAfterAnchor(f,w,M),te=this.getCrossPoint(f,w,ee);return m==="start"?(F.unshift(te),F.unshift(ee)):(F.push(te),F.push(ee)),F}},{key:"updateCrossPoints",value:function(f){var m=f.map(function(Ft){return Ft}),w=f[0],M=f[1],D=f[m.length-2],F=f[m.length-1],ee=this.sourceNode,te=this.targetNode,be=ee.modelType,ke=te.modelType,Ie=Ro(w,M),at=m[0];switch(be){case Mr.RECT_NODE:ee.radius!==0&&(rf(w,ee)||(at=nf(w,Ie,ee)));break;case Mr.CIRCLE_NODE:at=au(w,Ie,ee);break;case Mr.ELLIPSE_NODE:at=Yu(w,Ie,ee);break;case Mr.DIAMOND_NODE:case Mr.POLYGON_NODE:at=of(w,Ie,ee)}at&&(m[0]=at);var it=Ro(D,F),gt=m[m.length-1];switch(ke){case Mr.RECT_NODE:te.radius!==0&&(rf(F,te)||(gt=nf(F,it,te)));break;case Mr.CIRCLE_NODE:gt=au(F,it,te);break;case Mr.ELLIPSE_NODE:gt=Yu(F,it,te);break;case Mr.DIAMOND_NODE:case Mr.POLYGON_NODE:gt=of(F,it,te)}return gt&&(m[m.length-1]=gt),m}},{key:"getData",value:function(){var f=pf(oa(v.prototype),"getData",this).call(this),m=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return Object.assign({},f,{pointsList:m})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=cr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(m){return"".concat(m.x,",").concat(m.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,m){this.startPoint.x+=f,this.startPoint.y+=m,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveEndPoint",value:function(f,m){this.endPoint.x+=f,this.endPoint.y+=m,this.updatePoints()}},{key:"updatePointsList",value:function(f,m){this.pointsList.forEach(function(D){D.x+=f,D.y+=m});var w=this.pointsList[0];this.startPoint=Object.assign({},w);var M=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},M),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,m){this.isDragging=!0;var w=f.start,M=f.end,D=f.startIndex,F=f.endIndex,ee=f.direction,te=this.pointsList,be=te;return ee===fo.HORIZONTAL?(te[D]={x:w.x,y:w.y+m.y},te[F]={x:M.x,y:M.y+m.y},be=this.pointsList.map(function(ke){return ke})):ee===fo.VERTICAL&&(te[D]={x:w.x+m.x,y:w.y},te[F]={x:M.x+m.x,y:M.y},be=this.pointsList.map(function(ke){return ke})),this.updatePointsAfterDrag(be),this.draggingPointList=be,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[D]),end:Object.assign({},te[F]),startIndex:D,endIndex:F,direction:ee}}},{key:"dragAppend",value:function(f,m){this.isDragging=!0;var w=f.start,M=f.end,D=f.startIndex,F=f.endIndex,ee=f.direction,te=this.pointsList;if(ee===fo.HORIZONTAL){te[D]={x:w.x,y:w.y+m.y},te[F]={x:M.x,y:M.y+m.y};var be=this.pointsList.map(function(hn){return hn});if(D!==0&&F!==this.pointsList.length-1&&(be=this.removeCrossPoints(D,F,be)),D===0){var ke={x:w.x,y:w.y+m.y};if(!Os(ke,this.sourceNode)){var Ie=this.sourceNode.anchors;be=this.getDraggingPoints(ee,"start",ke,Ie,be)}}if(F===this.pointsList.length-1){var at={x:M.x,y:M.y+m.y};if(!Os(at,this.targetNode)){var it=this.targetNode.anchors;be=this.getDraggingPoints(ee,"end",at,it,be)}}this.updatePointsAfterDrag(be),this.draggingPointList=be}else if(ee===fo.VERTICAL){te[D]={x:w.x+m.x,y:w.y},te[F]={x:M.x+m.x,y:M.y};var gt=this.pointsList.map(function(hn){return hn});if(D!==0&&F!==this.pointsList.length-1&&(gt=this.removeCrossPoints(D,F,gt)),D===0){var Ft={x:w.x+m.x,y:w.y};if(!Os(Ft,this.sourceNode)){var gn=this.sourceNode.anchors;gt=this.getDraggingPoints(ee,"start",Ft,gn,gt)}}if(F===this.pointsList.length-1){var mn={x:M.x+m.x,y:M.y};if(!Os(mn,this.targetNode)){var qn=this.targetNode.anchors;gt=this.getDraggingPoints(ee,"end",mn,qn,gt)}}this.updatePointsAfterDrag(gt),this.draggingPointList=gt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[D]),end:Object.assign({},te[F]),startIndex:D,endIndex:F,direction:ee}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=pn(or(this.points));this.pointsList=f.map(function(M){return M}),this.draggingPointList=[];var m=f[0];this.startPoint=Object.assign({},m);var w=f[f.length-1];this.endPoint=Object.assign({},w)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var m=this.updateCrossPoints(f);this.points=m.map(function(w){return"".concat(w.x,",").concat(w.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var m=f.startPoint,w=f.endPoint,M=f.sourceNode,D=f.targetNode,F=cr({x:m.x,y:m.y},{x:w.x,y:w.y},M,D,this.offset||0);this.pointsList=F,this.initPoints()}}])&&em(o.prototype,l),v}(cf),Tp=Mi(zn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi(zn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"initPoints"),zn.prototype),Mi(zn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"updatePoints"),zn.prototype),Mi(zn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"updateStartPoint"),zn.prototype),Mi(zn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"moveStartPoint"),zn.prototype),Mi(zn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"updateEndPoint"),zn.prototype),Mi(zn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"moveEndPoint"),zn.prototype),Mi(zn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"updatePointsList"),zn.prototype),Mi(zn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"dragAppendStart"),zn.prototype),Mi(zn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"dragAppendSimple"),zn.prototype),Mi(zn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"dragAppend"),zn.prototype),Mi(zn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"dragAppendEnd"),zn.prototype),Mi(zn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"updatePointsAfterDrag"),zn.prototype),Mi(zn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"getAdjustStart"),zn.prototype),Mi(zn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"getAdjustEnd"),zn.prototype),Mi(zn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(zn.prototype,"updateAfterAdjustStartAndEnd"),zn.prototype),zn),fu=function(i){var o=i.start,l=i.end,u=i.offset,v=i.verticalLength,f=i.type,m={leftX:0,leftY:0,rightX:0,rightY:0},w=Math.atan((l.y-o.y)/(l.x-o.x)),M=Math.atan(u/v),D=Math.sqrt(v*v+u*u);return f==="start"?l.x>=o.x?(m.leftX=o.x+D*Math.sin(w+M),m.leftY=o.y-D*Math.cos(w+M),m.rightX=o.x-D*Math.sin(w-M),m.rightY=o.y+D*Math.cos(w-M)):(m.leftX=o.x-D*Math.sin(w+M),m.leftY=o.y+D*Math.cos(w+M),m.rightX=o.x+D*Math.sin(w-M),m.rightY=o.y-D*Math.cos(w-M)):f==="end"&&(l.x>=o.x?(m.leftX=l.x+D*Math.sin(w-M),m.leftY=l.y-D*Math.cos(w-M),m.rightX=l.x-D*Math.sin(w+M),m.rightY=l.y+D*Math.cos(w+M)):(m.leftX=l.x-D*Math.sin(w-M),m.leftY=l.y+D*Math.cos(w-M),m.rightX=l.x+D*Math.sin(w+M),m.rightY=l.y-D*Math.cos(w+M))),m},hf={x:1,y:0,z:0};function Lo(i,o,l,u,v){for(var f=function(ke){if(ke<0||ke>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:i.x*Math.pow(1-ke,3)+3*o.x*ke*Math.pow(1-ke,2)+3*l.x*Math.pow(ke,2)*(1-ke)+u.x*Math.pow(ke,3),y:i.y*Math.pow(1-ke,3)+3*o.y*ke*Math.pow(1-ke,2)+3*l.y*Math.pow(ke,2)*(1-ke)+u.y*Math.pow(ke,3)}},m=0,w=2,M=u.x,D=u.y,F=u;m<v&&w<50;){var ee=F=f(1-w/100),te=ee.x,be=ee.y;m=ll(M,D,te,be),w++}return F}function Yo(i){var o=Math.hypot(i.x,i.y);return{x:i.x/o,y:i.y/o,z:0}}function Ad(i){return u=function(f,m){return f.x*m.y-f.y*m.x}(o=hf,l=i),v=Math.acos(function(f,m){var w=[f.x,f.y,f.z];return[m.x,m.y,m.z].reduce(function(M,D,F){return M+D*w[F]})}(Yo(o),Yo(l))),u>=0?v:-v;var o,l,u,v}function kp(i){return i*(180/Math.PI)}function G(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function se(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?G(Object(l),!0).forEach(function(u){Oe(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):G(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function Oe(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function nt(i){return function(o){if(Array.isArray(o))return kt(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||ft(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pt(i){return pt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},pt(i)}function Qe(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||ft(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ft(i,o){if(i){if(typeof i=="string")return kt(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?kt(i,o):void 0}}function kt(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}var jt=function(i,o){var l;switch(i.type){case"line":default:l=new Zu(i,o);break;case"polyline":l=new Ta(i,o)}return l},Nt=function(i,o){return 2*Math.abs(i.centerX-o.centerX)<i.width+o.width&&2*Math.abs(i.centerY-o.centerY)<i.height+o.height},ut=function(i){var o=[],l={};return i.forEach(function(u){var v="".concat(u.x,"-").concat(u.y);u.id=v,l[v]=u}),Object.keys(l).forEach(function(u){o.push(l[u])}),o},Wt=function(i,o){var l=[i,{x:i.x,y:o.y},o];return ut(l)},$t=function(i,o){return i.width===0&&i.height===0?i:{centerX:i.centerX,centerY:i.centerY,minX:i.minX-o,minY:i.minY-o,maxX:i.maxX+o,maxY:i.maxY+o,height:i.height+2*o,width:i.width+2*o}},Pt=function(i,o){var l=Math.abs(i.x-o.centerX),u=Math.abs(i.y-o.centerY);return l/o.width>u/o.height?fo.HORIZONTAL:fo.VERTICAL},wt=function(i,o,l){return Pt(l,o)===fo.HORIZONTAL?{x:l.x>i.centerX?i.maxX:i.minX,y:l.y}:{x:l.x,y:l.y>i.centerY?i.maxY:i.minY}},qe=function(i,o){var l=Math.min(i.minX,o.minX),u=Math.min(i.minY,o.minY),v=Math.max(i.maxX,o.maxX),f=Math.max(i.maxY,o.maxY);return{centerX:(l+v)/2,centerY:(u+f)/2,minX:l,minY:u,maxX:v,maxY:f,height:f-u,width:v-l}},st=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,l=[],u=[];i.forEach(function(F){l.push(F.x),u.push(F.y)});var v=Math.min.apply(Math,l),f=Math.max.apply(Math,l),m=Math.min.apply(Math,u),w=Math.max.apply(Math,u),M=f-v,D=w-m;return o&&(M+=o,D+=o),{centerX:(v+f)/2,centerY:(m+w)/2,maxX:f,maxY:w,minX:v,minY:m,x:(v+f)/2,y:(m+w)/2,height:D,width:M}},Dt=function(i){var o=i.minX,l=i.minY,u=i.maxX,v=i.maxY;return[{x:o,y:l},{x:u,y:l},{x:u,y:v},{x:o,y:v}]},Qt=function(i,o){var l=i.x,u=i.y;return l<o.minX||l>o.maxX||u<o.minY||u>o.maxY},St=function(i,o){return o<i.minX||o>i.maxX?[]:[{x:o,y:i.minY},{x:o,y:i.maxY}]},nn=function(i,o){return o<i.minY||o>i.maxY?[]:[{x:i.minX,y:o},{x:i.maxX,y:o}]},At=function(i,o){return St(i,o.x).concat(nn(i,o.y))},Gt=function(i,o){return Math.abs(i.x-o.x)+Math.abs(i.y-o.y)},xt=function(i,o){var l=0;return o.forEach(function(u){u&&(i.x===u.x&&(l+=-2),i.y===u.y&&(l+=-2))}),l},Ht=function(i,o,l,u,v){return Gt(i,o)+Gt(i,l)+xt(i,[o,l,u,v])},Rn=function i(o,l,u,v,f){f||(f=0),o.unshift(l[v]),u[v]&&u[v]!==v&&f<=100&&i(o,l,u,u[v],f+1)},Wn=function(i,o){var l=i.indexOf(o);l>-1&&i.splice(l,1)},Rt=function(i,o,l,u){var v=o.x-i.x,f=o.y-i.y,m=u.x-l.x,w=u.y-l.y,M=(-f*(i.x-l.x)+v*(i.y-l.y))/(-m*f+v*w),D=(m*(i.y-l.y)-w*(i.x-l.x))/(-m*f+v*w);return M>=0&&M<=1&&D>=0&&D<=1},Tt=function(i,o,l){if(l.width===0&&l.height===0)return!1;var u=Qe(Dt(l),4),v=u[0],f=u[1],m=u[2],w=u[3];return Rt(i,o,v,f)||Rt(i,o,v,w)||Rt(i,o,f,m)||Rt(i,o,m,w)},Ot=function(i,o,l,u){var v=[];return i.forEach(function(f){f!==o&&(f.x!==o.x&&f.y!==o.y||Tt(f,o,l)||Tt(f,o,u)||v.push(f))}),ut(v)},Ln=function(i,o,l,u,v,f,m){var w=[],M=[o],D={},F={},ee={};F[o.id]=0,ee[o.id]=Ht(o,l,o);var te={};i.forEach(function(Ie){te[Ie.id]=Ie});for(var be=function(){var Ie=void 0,at=1/0;if(M.forEach(function(gt){ee[gt.id]<at&&(at=ee[gt.id],Ie=gt)}),Ie===l){var it=[];return Rn(it,te,D,l.id),{v:it}}Wn(M,Ie),w.push(Ie),Ot(i,Ie,u,v).forEach(function(gt){if(w.indexOf(gt)===-1){M.indexOf(gt)===-1&&M.push(gt);var Ft=ee[Ie.id]+Gt(Ie,gt);F[gt.id]&&Ft>=F[gt.id]||(D[gt.id]=Ie.id,F[gt.id]=Ft,ee[gt.id]=F[gt.id]+Ht(gt,l,o,f,m))}})};M.length;){var ke=be();if(pt(ke)==="object")return ke.v}return[o,l]},rr=function(i){return So(i)},pn=function(i){for(var o=1;o<i.length-1;){var l=i[o-1],u=i[o],v=i[o+1];l.x===u.x&&u.x===v.x||l.y===u.y&&u.y===v.y?i.splice(o,1):o++}return i},cr=function(i,o,l,u,v){var f=rr(l),m=rr(u),w=$t(f,v),M=$t(m,v),D=wt(w,f,i),F=wt(M,m,o);if(Nt(w,M)){var ee=Qo(i,o,D,F);return[i,D].concat(nt(ee),[F,o])}var te=st([D,F]),be=qe(w,te),ke=qe(M,te),Ie=[];Ie=(Ie=Ie.concat(Dt(be))).concat(Dt(ke));var at={x:(i.x+o.x)/2,y:(i.y+o.y)/2};[te,be,ke].forEach(function(gt){Ie=Ie.concat(At(gt,at).filter(function(Ft){return Qt(Ft,w)&&Qt(Ft,M)}))}),[{x:D.x,y:F.y},{x:F.x,y:D.y}].forEach(function(gt){Qt(gt,w)&&Qt(gt,M)&&Ie.push(gt)}),Ie.unshift(D),Ie.push(F),Ie=ut(Ie);var it=Ln(Ie,D,F,f,m,i,o);return it.unshift(i),it.push(o),it.length>2&&(it=pn(it)),ut(it)},Hn=function(i){var o;if(i.length===1)o=[i[0],i[0]];else if(i.length>=2){for(var l=i[0],u=i[1],v=ll(l.x,l.y,u.x,u.y),f=1;f<i.length-1;f++){var m=i[f],w=i[f+1],M=ll(m.x,m.y,w.x,w.y);M>v&&(v=M,l=m,u=w)}o=[l,u]}return o},ir=function(i,o,l){var u=Os(i,l),v=Os(o,l);return u&&v},wr=function(i,o,l){var u=Os(i,l),v=Os(o,l);return!(u&&v)&&(u||v)},$o=function(i,o,l){for(var u,v,f=So(l),m=Dt(f),w=0;w<m.length;w++)Rt(i,o,m[w],m[(w+1)%m.length])&&(v=[m[w],m[(w+1)%m.length]]);return v&&(u=function(M,D,F,ee){var te=(D.y-M.y)*(ee.x-F.x)-(M.x-D.x)*(F.y-ee.y);if(te===0)return!1;var be=((D.x-M.x)*(ee.x-F.x)*(F.y-M.y)+(D.y-M.y)*(ee.x-F.x)*M.x-(ee.y-F.y)*(D.x-M.x)*F.x)/te,ke=-((D.y-M.y)*(ee.y-F.y)*(F.x-M.x)+(D.x-M.x)*(ee.y-F.y)*M.y-(ee.x-F.x)*(D.y-M.y)*F.y)/te;return(be-M.x)*(be-D.x)<=0&&(ke-M.y)*(ke-D.y)<=0&&(be-F.x)*(be-ee.x)<=0&&(ke-F.y)*(ke-ee.y)<=0&&{x:be,y:ke}}(i,o,v[0],v[1])),u},Ro=function(i,o){var l;return i.x===o.x?l=fo.VERTICAL:i.y===o.y&&(l=fo.HORIZONTAL),l},or=function(i){var o=i.split(" "),l=[];return o&&o.forEach(function(u){var v=Qe(u.split(","),2),f=v[0],m=v[1];l.push({x:Number(f),y:Number(m)})}),l},Qo=function(i,o,l,u){var v=[];if(Ro(i,l)===Ro(o,u))i.y===l.y?(v.push({x:l.x,y:(l.y+u.y)/2}),v.push({x:u.x,y:(l.y+u.y)/2})):(v.push({x:(l.x+u.x)/2,y:l.y}),v.push({x:(l.x+u.x)/2,y:u.y}));else{var f={x:l.x,y:u.y},m=$i(f,i,l),w=$i(f,o,u);if(m||w)f={x:u.x,y:l.y};else{var M=so(f,i,l),D=so(f,o,u);M&&D&&(f={x:u.x,y:l.y})}v.push(f)}return v},so=function(i,o,l){return i.x===o.x&&i.x===l.x||i.y===o.y&&i.y===l.y},Fo=function(i){if(!i)return 0;for(var o=0,l=0;l<i.length;l++){var u=i.charCodeAt(l);i.match(/[A-Z]/)?o+=1.5:o+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return o},Ko=null,ai=function(i,o){Ko||(Ko=document.createElement("canvas"));var l=Ko.getContext("2d");return l.font=o,l.measureText(i).width},hi=function(i){var o,l=i.start,u=i.end;if(l.x===u.x&&l.y===u.y)o="";else{var v={start:l,end:u,offset:10,verticalLength:5},f=fu(se(se({},v),{},{type:"start"})),m=fu(se(se({},v),{},{type:"end"}));o="M".concat(f.leftX," ").concat(f.leftY,` 
    L`).concat(f.rightX," ").concat(f.rightY,` 
    L`).concat(m.rightX," ").concat(m.rightY,`
    L`).concat(m.leftX," ").concat(m.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},ei=function(i){var o=i.start,l=i.end,u=i.sourceNode,v=i.targetNode,f=i.offset,m=So(u),w=So(v),M=$t(m,f),D=$t(w,f);return{sNext:wt(M,m,o),ePre:wt(D,w,l)}},vo=function(i){var o=i.replace(/M/g,"").replace(/C/g,",").split(",");return[Qn(o[0]),Qn(o[1]),Qn(o[2]),Qn(o[3])]},Qn=function(i){var o=Qe(i.replace(/(^\s*)/g,"").split(" "),2);return{x:+o[0],y:+o[1]}},vi=function(i,o){var l=Qe(i,4);return[Lo(l[0],l[1],l[2],l[3],o),i[3]]},Nr=function(i,o){for(var l,u=i.x,v=i.y,f=or(o),m=Number.MAX_SAFE_INTEGER,w=[],M=0;M<f.length;M++)w.push({start:f[M],end:f[(M+1)%f.length]});if(w.forEach(function(te){var be=te.start,ke=te.end;if(be.x===ke.x){var Ie={x:be.x,y:v};if($i(Ie,be,ke)){var at=Math.abs(be.x-u);at<m&&(m=at,l=Ie)}}else if(be.y===ke.y){var it={x:u,y:be.y};if($i(it,be,ke)){var gt=Math.abs(be.y-v);gt<m&&(m=gt,l=it)}}}),!l){var D=w[0],F=D.start,ee=D.end;l={x:F.x+(ee.x-F.x)/2,y:F.y+(ee.y-F.y)/2}}return l},In=function(i){return tl(i,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},mr=function(i,o){return Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2))};function er(i,o){return typeof o!="function"?function(l,u,v){return Object.assign({type:i.edgeType},v)}:function(l,u,v){var f=o(l,u,v);return f?typeof f=="string"?Object.assign({},v,{type:f}):Object.assign({type:f},v):{type:i.edgeType}}}r(208);var mo=function(){};function kl(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function xo(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ye=function(){function i(u){var v=this,f=u.onDragStart,m=f===void 0?mo:f,w=u.onDragging,M=w===void 0?mo:w,D=u.onDragEnd,F=D===void 0?mo:D,ee=u.eventType,te=ee===void 0?"":ee,be=u.eventCenter,ke=be===void 0?null:be,Ie=u.step,at=Ie===void 0?1:Ie,it=u.isStopPropagation,gt=it===void 0||it,Ft=u.model,gn=Ft===void 0?null:Ft,mn=u.data,qn=mn===void 0?null:mn;(function(hn,Fn){if(!(hn instanceof Fn))throw new TypeError("Cannot call a class as a function")})(this,i),xo(this,"onDragStart",void 0),xo(this,"onDragging",void 0),xo(this,"onDragEnd",void 0),xo(this,"step",void 0),xo(this,"isStopPropagation",void 0),xo(this,"isDragging",!1),xo(this,"isStartDragging",!1),xo(this,"startX",0),xo(this,"startY",0),xo(this,"sumDeltaX",0),xo(this,"sumDeltaY",0),xo(this,"eventType",void 0),xo(this,"eventCenter",void 0),xo(this,"model",void 0),xo(this,"data",void 0),xo(this,"startTime",void 0),xo(this,"handleMouseDown",function(hn){var Fn,Sn,$r,zr=(Fn=window)===null||Fn===void 0?void 0:Fn.document;if(hn.button===0){v.isStopPropagation&&hn.stopPropagation(),v.isStartDragging=!0,v.startX=hn.clientX,v.startY=hn.clientY,zr.addEventListener("mousemove",v.handleMouseMove,!1),zr.addEventListener("mouseup",v.handleMouseUp,!1);var vr=(Sn=v.model)===null||Sn===void 0?void 0:Sn.getData();($r=v.eventCenter)===null||$r===void 0||$r.emit(jn["".concat(v.eventType,"_MOUSEDOWN")],{e:hn,data:v.data||vr}),v.startTime=new Date().getTime()}}),xo(this,"handleMouseMove",function(hn){if(v.isStopPropagation&&hn.stopPropagation(),v.isStartDragging&&(v.sumDeltaX+=hn.clientX-v.startX,v.sumDeltaY+=hn.clientY-v.startY,v.startX=hn.clientX,v.startY=hn.clientY,v.step<=1||Math.abs(v.sumDeltaX)>v.step||Math.abs(v.sumDeltaY)>v.step)){var Fn,Sn=v.sumDeltaX%v.step,$r=v.sumDeltaY%v.step,zr=v.sumDeltaX-Sn,vr=v.sumDeltaY-$r;v.sumDeltaX=Sn,v.sumDeltaY=$r;var Jr,wi=(Fn=v.model)===null||Fn===void 0?void 0:Fn.getData();v.isDragging||((Jr=v.eventCenter)===null||Jr===void 0||Jr.emit(jn["".concat(v.eventType,"_DRAGSTART")],{e:hn,data:v.data||wi}),v.onDragStart({event:hn})),v.isDragging=!0,Promise.resolve().then(function(){var Ei,Ma;v.onDragging({deltaX:zr,deltaY:vr,event:hn}),(Ei=v.eventCenter)===null||Ei===void 0||Ei.emit(jn["".concat(v.eventType,"_MOUSEMOVE")],{e:hn,data:v.data||wi}),(Ma=v.eventCenter)===null||Ma===void 0||Ma.emit(jn["".concat(v.eventType,"_DRAG")],{e:hn,data:v.data||wi})})}}),xo(this,"handleMouseUp",function(hn){var Fn=window.document;v.isStartDragging=!1,v.isStopPropagation&&hn.stopPropagation(),Promise.resolve().then(function(){var Sn,$r,zr;Fn.removeEventListener("mousemove",v.handleMouseMove,!1),Fn.removeEventListener("mouseup",v.handleMouseUp,!1);var vr=(Sn=v.model)===null||Sn===void 0?void 0:Sn.getData();($r=v.eventCenter)===null||$r===void 0||$r.emit(jn["".concat(v.eventType,"_MOUSEUP")],{e:hn,data:v.data||vr}),v.isDragging&&(v.isDragging=!1,v.onDragEnd({event:hn}),(zr=v.eventCenter)===null||zr===void 0||zr.emit(jn["".concat(v.eventType,"_DROP")],{e:hn,data:v.data||vr}))})}),xo(this,"cancelDrag",function(){var hn,Fn=(hn=window)===null||hn===void 0?void 0:hn.document;Fn.removeEventListener("mousemove",v.handleMouseMove,!1),Fn.removeEventListener("mouseup",v.handleMouseUp,!1),v.onDragEnd({event:null}),v.isDragging=!1}),this.onDragStart=m,this.onDragging=M,this.onDragEnd=F,this.step=at,this.isStopPropagation=gt,this.eventType=te,this.eventCenter=ke,this.model=gn,this.data=qn}var o,l;return o=i,(l=[{key:"setStep",value:function(u){this.step=u}},{key:"setModel",value:function(u){this.model=u}}])&&kl(o.prototype,l),i}();function ot(i){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ot(i)}function et(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function sn(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function hr(i,o,l){return o&&sn(i.prototype,o),i}function he(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&Fe(i,o)}function oe(i){var o=Ce();return function(){var l,u=pe(i);if(o){var v=pe(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return Re(this,l)}}function Re(i,o){if(o&&(ot(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ge(i)}function Ge(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ye(i){var o=typeof Map=="function"?new Map:void 0;return Ye=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(l))return o.get(l);o.set(l,v)}function v(){return De(l,arguments,pe(this).constructor)}return v.prototype=Object.create(l.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),Fe(v,l)},Ye(i)}function De(i,o,l){return De=Ce()?Reflect.construct:function(u,v,f){var m=[null];m.push.apply(m,v);var w=new(Function.bind.apply(u,m));return f&&Fe(w,f.prototype),w},De.apply(null,arguments)}function Ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fe(i,o){return Fe=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Fe(i,o)}function pe(i){return pe=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},pe(i)}function Te(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function de(i,o){return i instanceof We&&o instanceof We}var ze=function(i){he(l,i);var o=oe(l);function l(u,v,f){var m;return et(this,l),Te(Ge(m=o.call(this,3)),"x",void 0),Te(Ge(m),"y",void 0),Te(Ge(m),"z",void 0),m[0]=u,m[1]=v,m[2]=f,m.x=u,m.y=v,m.z=f,Object.setPrototypeOf(Ge(m),l.prototype),m}return hr(l,[{key:"add",value:function(u){if(de(this,u))return new We(this.x+u.x,this.y+u.y);var v=this.z+u.z;return new h((this.x+u.x)/v,(this.y+u.y)/v)}},{key:"subtract",value:function(u){if(de(this,u))return new We(this.x-u.x,this.y-u.y);var v=this.z-u.z;return v===0?new We(this.x-u.x,this.y-u.y):new h((this.x-u.x)/v,(this.y-u.y)/v)}}]),l}(Ye(Array)),We=function(i){he(l,i);var o=oe(l);function l(u,v,f){var m;return et(this,l),m=o.call(this,u,v,f??0),Object.setPrototypeOf(Ge(m),l.prototype),m}return hr(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(u){var v=this;return u.reduce(function(f,m,w){return f+m*v[w]})}},{key:"cross",value:function(u){return new l(this.y*u.z-this.z*u.y,this.z*u.x-this.x*u.z,this.x*u.y-this.y*u.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var u=this.getLength();return new l(this.x/u,this.y/u)}},{key:"crossZ",value:function(u){return this.x*u.y-this.y*u.x}},{key:"angle",value:function(u){var v=this.crossZ(u),f=Math.acos(this.normalize().dot(u.normalize()));return v>=0?f:-f}}]),l}(ze),h=function(i){he(l,i);var o=oe(l);function l(u,v){var f;return et(this,l),f=o.call(this,u,v,1),Object.setPrototypeOf(Ge(f),l.prototype),f}return hr(l,[{key:"toString",value:function(){return"Point"}}]),l}(ze);r(67),r(218);function y(i){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},y(i)}function x(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||Z(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function I(i){return function(o){if(Array.isArray(o))return ne(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||Z(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Z(i,o){if(i){if(typeof i=="string")return ne(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?ne(i,o):void 0}}function ne(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function ve(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function xe(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Be(i,o,l){return o&&xe(i.prototype,o),i}function ht(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&tn(i,o)}function bt(i){var o=Ct();return function(){var l,u=ar(i);if(o){var v=ar(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return Vt(this,l)}}function Vt(i,o){if(o&&(y(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wn(i)}function wn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function On(i){var o=typeof Map=="function"?new Map:void 0;return On=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(l))return o.get(l);o.set(l,v)}function v(){return Xn(l,arguments,ar(this).constructor)}return v.prototype=Object.create(l.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),tn(v,l)},On(i)}function Xn(i,o,l){return Xn=Ct()?Reflect.construct:function(u,v,f){var m=[null];m.push.apply(m,v);var w=new(Function.bind.apply(u,m));return f&&tn(w,f.prototype),w},Xn.apply(null,arguments)}function Ct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tn(i,o){return tn=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},tn(i,o)}function ar(i){return ar=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ar(i)}function Mn(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var He,yr,Br,Zn,fr,ki,Ua,Jl,Ni,As,du,Td,Np,Ts=function(i){ht(l,i);var o=bt(l);function l(){var u;ve(this,l);for(var v=arguments.length,f=new Array(v),m=0;m<v;m++)f[m]=arguments[m];return Mn(wn(u=o.call(this,f.length)),"rows",void 0),Mn(wn(u),"columns",void 0),u.fill(new Array(3)),f.forEach(function(w,M){u[M]=w}),u.columns=f[0].length,u.rows=f.length,Object.setPrototypeOf(wn(u),l.prototype),u}return Be(l,[{key:"getRow",value:function(u){return this[u]}},{key:"getColumn",value:function(u){return I(this.map(function(v){return v[u]}))}},{key:"transpose",value:function(){for(var u=[],v=0;v<this.columns;v++)u.push(this.getColumn(v));return Xn(l,u)}},{key:"cross",value:function(u){var v=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===u.rows)for(var f=0;f<this.rows;f++)for(var m=this.getRow(f),w=function(D){var F=u.getColumn(D);v[f][D]=m.reduce(function(ee,te,be){return ee+te*F[be]},0)},M=0;M<u.columns;M++)w(M);return Xn(l,I(v))}},{key:"to2D",value:function(){return this.map(function(u){return[u[0],u[1]]})}},{key:"toPoints",value:function(){return this.map(function(u){return new h(u[0],u[1])})}},{key:"toString",value:function(){var u=x(this[0],2),v=u[0],f=u[1],m=x(this[1],2),w=m[0],M=m[1],D=x(this[2],2),F=D[0],ee=D[1];return"matrix(".concat(v," ").concat(f," ").concat(w," ").concat(M," ").concat(F," ").concat(ee,")")}},{key:"translate",value:function(u,v){return this.cross(new Md(u,v))}},{key:"rotate",value:function(u){return this.cross(new Ju(u))}},{key:"scale",value:function(u,v){return this.cross(new tm(u,v))}}]),l}(On(Array)),Ju=function(i){ht(l,i);var o=bt(l);function l(u){var v;return ve(this,l),v=o.call(this,new We(+Math.cos(u).toFixed(2),+Math.sin(u).toFixed(2),0),new We(-Math.sin(u).toFixed(2),+Math.cos(u).toFixed(2),0),new We(0,0,1)),Object.setPrototypeOf(wn(v),l.prototype),v}return Be(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Ts),tm=function(i){ht(l,i);var o=bt(l);function l(u,v){var f;return ve(this,l),Mn(wn(f=o.call(this,new We(u,0,0),new We(0,v,0),new We(0,0,1))),"sx",void 0),Mn(wn(f),"sy",void 0),f.sx=u,f.sy=v,Object.setPrototypeOf(wn(f),l.prototype),f}return Be(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Ts),Md=function(i){ht(l,i);var o=bt(l);function l(u,v){var f;return ve(this,l),Mn(wn(f=o.call(this,new We(1,0,0),new We(0,1,0),new We(u,v,1))),"tx",void 0),Mn(wn(f),"ty",void 0),f.tx=u,f.ty=v,Object.setPrototypeOf(wn(f),l.prototype),f}return Be(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Ts),Pp={node:!1,edge:!1},nm={node:!0,edge:!0};function Rp(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function vf(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Rp(Object(l),!0).forEach(function(u){hu(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Rp(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function mf(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||Cp(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pu(i){return function(o){if(Array.isArray(o))return G_(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||Cp(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Cp(i,o){if(i){if(typeof i=="string")return G_(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?G_(i,o):void 0}}function G_(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function ly(i){return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ly(i)}function Ms(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function WP(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function hu(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Jn(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var r2,o2=200,i2=(He=function(){function i(u){(function(be,ke){if(!(be instanceof ke))throw new TypeError("Cannot call a class as a function")})(this,i),hu(this,"rootEl",void 0),Ms(this,"width",yr,this),Ms(this,"height",Br,this),hu(this,"theme",void 0),hu(this,"eventCenter",void 0),hu(this,"modelMap",new Map),hu(this,"topElement",void 0),hu(this,"animation",void 0),hu(this,"idGenerator",void 0),hu(this,"edgeGenerator",void 0),hu(this,"nodeMoveRules",[]),hu(this,"customTrajectory",void 0),Ms(this,"edgeType",Zn,this),Ms(this,"nodes",fr,this),Ms(this,"edges",ki,this),Ms(this,"overlapMode",Ua,this),Ms(this,"background",Jl,this),Ms(this,"transformModel",Ni,this),Ms(this,"editConfigModel",As,this),Ms(this,"gridSize",du,this),Ms(this,"partial",Td,this),Ms(this,"fakerNode",Np,this);var v,f=u.container,m=u.background,w=m===void 0?{}:m,M=u.grid,D=u.idGenerator,F=u.edgeGenerator,ee=u.animation,te=u.customTrajectory;this.background=w,ly(M)==="object"&&(this.gridSize=M.size),this.rootEl=f,this.editConfigModel=new td(u),this.eventCenter=new pd,this.transformModel=new cp(this.eventCenter,u),this.theme=ql(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(v=ee)&&typeof v!="boolean"?eu(no(Pp),v):no(v===!0?nm:Pp),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=D,this.customTrajectory=te,this.edgeGenerator=er(this,F),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=ra()}var o,l;return o=i,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,v,f){return u[v.id]={index:f,model:v},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,v,f){return u[v.id]={index:f,model:v},u},{})}},{key:"modelsMap",get:function(){return[].concat(pu(this.nodes),pu(this.edges)).reduce(function(u,v){return u[v.id]=v,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(D){return u.push(D)}),this.edges.forEach(function(D){return u.push(D)}),u=u.sort(function(D,F){return D.zIndex-F.zIndex});for(var v=[],f=[-200,-200],m=[this.width+o2,this.height+o2],w=0;w<u.length;w++){var M=u[w];M.visible&&(!this.partial||M.isSelected||this.isElementInArea(M,f,m,!1,!1))&&v.push(M)}return v}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(f){return f.state===Zr.TEXT_EDIT}),v=this.edges.find(function(f){return f.state===Zr.TEXT_EDIT});return u||v}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(v){v.isSelected&&u.set(v.id,v)}),this.edges.forEach(function(v){v.isSelected&&u.set(v.id,v)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(v){v.isSelected&&u.push(v)}),u}},{key:"getAreaElement",value:function(u,v){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=arguments.length>4&&arguments[4]!==void 0&&arguments[4],M=[],D=[];this.nodes.forEach(function(te){return D.push(te)}),this.edges.forEach(function(te){return D.push(te)});for(var F=0;F<D.length;F++){var ee=D[F];w&&!ee.visible||!this.isElementInArea(ee,u,v,f,m)||M.push(ee)}return M}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var v;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(v=this.nodesMap[u])===null||v===void 0?void 0:v.model}},{key:"getPointByClient",value:function(u){var v=u.x,f=u.y,m=this.rootEl.getBoundingClientRect(),w={x:v-m.left,y:f-m.top},M=mf(this.transformModel.HtmlPointToCanvasPoint([w.x,w.y]),2);return{domOverlayPosition:w,canvasOverlayPosition:{x:M[0],y:M[1]}}}},{key:"isElementInArea",value:function(u,v,f){var m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===co.NODE){for(var M=So(u=u),D=M.minX,F=M.minY,ee=M.maxX,te=M.maxY,be=[{x:D,y:F},{x:ee,y:F},{x:ee,y:te},{x:D,y:te}],ke=w,Ie=0;Ie<be.length;Ie++){var at=be[Ie],it=at.x,gt=at.y,Ft=this.transformModel.CanvasPointToHtmlPoint([it,gt]),gn=mf(Ft,2);if(it=gn[0],gt=gn[1],zu([it,gt],v,f)!==w){ke=!w;break}}return ke}if(u.BaseType===co.EDGE){var mn=u=u,qn=mn.startPoint,hn=mn.endPoint,Fn=this.transformModel.CanvasPointToHtmlPoint([qn.x,qn.y]),Sn=this.transformModel.CanvasPointToHtmlPoint([hn.x,hn.y]),$r=zu(Fn,v,f),zr=zu(Sn,v,f);return m?$r&&zr:$r||zr}return!1}},{key:"graphDataToModel",value:function(u){var v=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=Kf(u.nodes,function(f){return v.getModelAfterSnapToGrid(f)}):this.nodes=[],u.edges?this.edges=Kf(u.edges,function(f){var m=v.getModel(f.type);if(!m)throw new Error("找不到".concat(f.type,"对应的边。"));return new m(f,v)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(f){var m=f.getData();m&&!f.virtual&&u.push(m)});var v=[];return this.nodes.forEach(function(f){var m=f.getData();m&&!f.virtual&&v.push(m)}),{nodes:v,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,v=[],f=0;f<this.nodes.length;f++){var m=this.nodes[f];if(m.isDragging){u=!0;break}v.push(m.getHistoryData())}if(u)return!1;for(var w=!1,M=[],D=0;D<this.edges.length;D++){var F=this.edges[D];if(F.isDragging){w=!0;break}M.push(F.getHistoryData())}return!w&&{nodes:v,edges:M}}},{key:"getEdgeModelById",value:function(u){var v;return(v=this.edgesMap[u])===null||v===void 0?void 0:v.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var v=[],f=0;f<this.edges.length;f++){var m=this.edges[f],w=this.edges[f].sourceNodeId===u,M=this.edges[f].targetNodeId===u;(w||M)&&v.push(m)}return v}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],v=this.selectElements,f={nodes:[],edges:[]};return v.forEach(function(m){if(m.BaseType===co.NODE&&f.nodes.push(m.getData()),m.BaseType===co.EDGE){var w=m.getData(),M=v.get(w.sourceNodeId)&&v.get(w.targetNodeId);(u||M)&&f.edges.push(w)}}),f}},{key:"updateAttributes",value:function(u,v){this.getElement(u).updateAttributes(v)}},{key:"changeNodeId",value:function(u,v){return v||(v=ra()),this.nodesMap[v]?"":this.nodesMap[u]?(this.edges.forEach(function(f){f.sourceNodeId===u&&(f.sourceNodeId=v),f.targetNodeId===u&&(f.targetNodeId=v)}),this.nodesMap[u].model.id=v,this.nodesMap[v]=this.nodesMap[u],v):""}},{key:"changeEdgeId",value:function(u,v){return v||(v=ra()),this.edgesMap[v]?"":this.edgesMap[u]?(this.edges.forEach(function(f){f.id===u&&f.changeEdgeId(v)}),v):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,v){return this.modelMap.set(u,v)}},{key:"toFront",value:function(u){var v,f,m,w=((v=this.nodesMap[u])===null||v===void 0?void 0:v.model)||((f=this.edgesMap[u])===null||f===void 0?void 0:f.model);w&&(this.overlapMode===ko.DEFAULT&&((m=this.topElement)===null||m===void 0||m.setZIndex(),w.setZIndex(9999),this.topElement=w),this.overlapMode===ko.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,v){var f,m,w,M=((f=this.nodesMap[u])===null||f===void 0?void 0:f.model)||((m=this.edgesMap[u])===null||m===void 0?void 0:m.model);M&&(typeof v=="number"&&(w=v),v==="top"&&(w=su()),v==="bottom"&&(w=--sf),M.setZIndex(w))}},{key:"deleteNode",value:function(u){var v=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(jn.NODE_DELETE,{data:v})}},{key:"addNode",value:function(u){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jn.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,m=bi(u);m.id&&this.nodesMap[u.id]&&delete m.id;var w=this.getModelAfterSnapToGrid(m);this.nodes.push(w);var M=w.getData(),D={data:M};return f&&(D.e=f),this.eventCenter.emit(v,D),w}},{key:"getModelAfterSnapToGrid",value:function(u){var v=this.getModel(u.type);if(!v)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));var f=u.x,m=u.y;return f&&m&&(u.x=rl(f,this.gridSize),u.y=rl(m,this.gridSize),ly(u.text)==="object"&&(u.text.x+=u.x-f,u.text.y+=u.y-m)),new v(u,this)}},{key:"cloneNode",value:function(u){var v=this.getNodeModelById(u),f=v.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var m=this.addNode(f);return m.setSelected(!0),v.setSelected(!1),m.getData()}},{key:"moveNode",value:function(u,v,f){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[u];if(w){var M=w.model,D=M.getMoveDistance(v,f,m),F=mf(D,2);v=F[0],f=F[1],this.moveEdge(u,v,f)}}},{key:"moveNode2Coordinate",value:function(u,v,f){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[u];if(w){var M=w.model,D=M.x,F=M.y,ee=v-D,te=f-F;this.moveNode(u,ee,te,m)}}},{key:"editText",value:function(u){this.setElementStateById(u,Zr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var v=bi(u),f=v.type;f||(f=this.edgeType),v.id&&this.edgesMap[v.id]&&delete v.id;var m=this.getModel(f);if(!m)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var w=new m(vf(vf({},v),{},{type:f}),this),M=w.getData();return this.edges.push(w),this.eventCenter.emit(jn.EDGE_ADD,{data:M}),w}},{key:"moveEdge",value:function(u,v,f){for(var m=0;m<this.edges.length;m++){var w=this.edges[m],M=w.textPosition,D=M.x,F=M.y,ee=this.edges[m].sourceNodeId===u,te=this.edges[m].targetNodeId===u;ee&&w.moveStartPoint(v,f),te&&w.moveEndPoint(v,f),(ee||te)&&this.handleEdgeTextMove(w,D,F)}}},{key:"handleEdgeTextMove",value:function(u,v,f){var m;if(u.customTextPosition===!0)u.resetTextPosition();else if(u.modelType===Mr.POLYLINE_EDGE&&(m=u.text)!==null&&m!==void 0&&m.value){var w=u.text,M=Nr(w,u.points);u.moveText(M.x-w.x,M.y-w.y)}else{var D=u.textPosition,F=D.x,ee=D.y;u.moveText(F-v,ee-f)}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,v){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===u&&this.edges[f].targetNodeId===v){var m=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(jn.EDGE_DELETE,{data:m})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var v=this.edgesMap[u].index,f=this.edgesMap[u].model.getData();this.edges.splice(v,1),this.eventCenter.emit(jn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(u){for(var v=0;v<this.edges.length;v++)if(this.edges[v].sourceNodeId===u){var f=this.edges[v].getData();this.edges.splice(v,1),v--,this.eventCenter.emit(jn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(u){for(var v=0;v<this.edges.length;v++)if(this.edges[v].targetNodeId===u){var f=this.edges[v].getData();this.edges.splice(v,1),v--,this.eventCenter.emit(jn.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(u,v,f){this.nodes.forEach(function(m){m.id===u?m.setElementState(v,f):m.setElementState(Zr.DEFAULT)}),this.edges.forEach(function(m){m.id===u?m.setElementState(v,f):m.setElementState(Zr.DEFAULT)})}},{key:"updateText",value:function(u,v){this.nodes.forEach(function(f){f.id===u&&f.updateText(v)}),this.edges.forEach(function(f){f.id===u&&f.updateText(v)})}},{key:"selectNodeById",value:function(u){var v,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var m=(v=this.nodesMap[u])===null||v===void 0?void 0:v.model;m==null||m.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var v,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var m=(v=this.edgesMap[u])===null||v===void 0?void 0:v.model;m==null||m.setSelected(!0)}},{key:"selectElementById",value:function(u){var v=arguments.length>1&&arguments[1]!==void 0&&arguments[1];v||this.clearSelectElements();var f=this.getElement(u);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(v){v==null||v.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===ko.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,v,f){for(var m=this,w=arguments.length>3&&arguments[3]!==void 0&&arguments[3],M=u.reduce(function(mn,qn){var hn=m.nodesMap[qn].model.getMoveDistance(v,f,w);return mn[qn]=hn,mn},{}),D=0;D<this.edges.length;D++){var F=this.edges[D],ee=F.textPosition,te=ee.x,be=ee.y,ke=M[F.sourceNodeId],Ie=M[F.targetNodeId],at=void 0,it=void 0;if(ke&&Ie&&F.modelType===Mr.POLYLINE_EDGE){var gt=mf(ke,2);at=gt[0],it=gt[1],F.updatePointsList(at,it)}else{if(ke){var Ft=mf(ke,2);at=Ft[0],it=Ft[1],F.moveStartPoint(at,it)}if(Ie){var gn=mf(Ie,2);at=gn[0],it=gn[1],F.moveEndPoint(at,it)}}(ke||Ie)&&this.handleEdgeTextMove(F,te,be)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,v){var f=this.getNodeModelById(u);if(f){var m=f.getData();m.type=v;var w=this.getModel(v);if(!w)throw new Error("找不到".concat(v,"对应的节点，请确认是否已注册此类型节点。"));var M=new w(m,this);this.nodes.splice(this.nodesMap[u].index,1,M),this.getNodeEdges(u).forEach(function(D){if(D.sourceNodeId===u){var F=af(M,D.startPoint,M.width,M.height);D.updateStartPoint(F)}if(D.targetNodeId===u){var ee=af(M,D.endPoint,M.width,M.height);D.updateEndPoint(ee)}})}}},{key:"changeEdgeType",value:function(u,v){var f=this.getEdgeModelById(u);if(f&&f.type!==v){var m=f.getData();m.type=v;var w=this.getModel(v);if(!w)throw new Error("找不到".concat(v,"对应的节点，请确认是否已注册此类型节点。"));delete m.pointsList;var M=new w(m,this);this.edges.splice(this.edgesMap[u].index,1,M)}}},{key:"getNodeIncomingEdge",value:function(u){var v=[];return this.edges.forEach(function(f){f.targetNodeId===u&&v.push(f)}),v}},{key:"getNodeOutgoingEdge",value:function(u){var v=[];return this.edges.forEach(function(f){f.sourceNodeId===u&&v.push(f)}),v}},{key:"getAnchorIncomingEdge",value:function(u){var v=[];return this.edges.forEach(function(f){f.targetAnchorId===u&&v.push(f)}),v}},{key:"getAnchorOutcomingEdge",value:function(u){var v=[];return this.edges.forEach(function(f){f.sourceAnchorId===u&&v.push(f)}),v}},{key:"getNodeIncomingNode",value:function(u){var v=this,f=[];return this.edges.forEach(function(m){m.targetNodeId===u&&f.push(v.nodesMap[m.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(u){var v=this,f=[];return this.edges.forEach(function(m){m.sourceNodeId===u&&f.push(v.nodesMap[m.targetNodeId].model)}),f}},{key:"setTheme",value:function(u){this.theme=ql(vf(vf({},this.theme),u))}},{key:"resize",value:function(u,v){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=v||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,v=[],f=[];u.forEach(function(ee){var te=ee.x,be=ee.y,ke=ee.width,Ie=ee.height,at=ee.getNodeStyle().strokeWidth,it=at===void 0?0:at,gt=te+ke/2+it,Ft=te-ke/2-it,gn=be+Ie/2+it,mn=be-Ie/2-it;v=v.concat([gt,Ft].filter(function(qn){return!Number.isNaN(qn)})),f=f.concat([gn,mn].filter(function(qn){return!Number.isNaN(qn)}))});var m=Math.min.apply(Math,pu(v)),w=Math.max.apply(Math,pu(v)),M=Math.min.apply(Math,pu(f)),D=w-m||0,F=Math.max.apply(Math,pu(f))-M||0;return{virtualRectWidth:D,virtualRectHeight:F,virtualRectCenterPositionX:m+D/2,virtualRectCenterPositionY:M+F/2}}},{key:"translateCenter",value:function(){var u=this.nodes,v=this.width,f=this.height,m=this.rootEl,w=this.transformModel;if(u.length){var M=v||m.clientWidth,D=f||m.clientHeight,F=this.getVirtualRectSize(),ee=F.virtualRectCenterPositionX,te=F.virtualRectCenterPositionY;w.focusOn(ee,te,M,D)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,m=this.width,w=this.height,M=this.rootEl,D=this.transformModel;if(f.length){var F=m||M.clientWidth,ee=w||M.clientHeight,te=this.getVirtualRectSize(),be=te.virtualRectWidth,ke=te.virtualRectHeight,Ie=te.virtualRectCenterPositionX,at=te.virtualRectCenterPositionY,it=(be+v)/F,gt=(ke+u)/ee,Ft=0;Ft=1/Math.max(it,gt);var gn=[F/2,ee/2];D.zoom(Ft,gn),D.focusOn(Ie,at,F,ee)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],l&&WP(o.prototype,l),i}(),yr=Jn(He.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Br=Jn(He.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zn=Jn(He.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fr=Jn(He.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ki=Jn(He.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ua=Jn(He.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ko.DEFAULT}}),Jl=Jn(He.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ni=Jn(He.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),As=Jn(He.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),du=Jn(He.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Td=Jn(He.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Np=Jn(He.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jn(He.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"nodesMap"),He.prototype),Jn(He.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"edgesMap"),He.prototype),Jn(He.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"modelsMap"),He.prototype),Jn(He.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"sortElements"),He.prototype),Jn(He.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"textEditElement"),He.prototype),Jn(He.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"selectElements"),He.prototype),Jn(He.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"selectNodes"),He.prototype),Jn(He.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setFakerNode"),He.prototype),Jn(He.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"removeFakerNode"),He.prototype),Jn(He.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setModel"),He.prototype),Jn(He.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"toFront"),He.prototype),Jn(He.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setElementZIndex"),He.prototype),Jn(He.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"deleteNode"),He.prototype),Jn(He.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"addNode"),He.prototype),Jn(He.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"cloneNode"),He.prototype),Jn(He.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"moveNode"),He.prototype),Jn(He.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"moveNode2Coordinate"),He.prototype),Jn(He.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"editText"),He.prototype),Jn(He.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"addEdge"),He.prototype),Jn(He.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"moveEdge"),He.prototype),Jn(He.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"deleteEdgeBySourceAndTarget"),He.prototype),Jn(He.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"deleteEdgeById"),He.prototype),Jn(He.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"deleteEdgeBySource"),He.prototype),Jn(He.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"deleteEdgeByTarget"),He.prototype),Jn(He.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setElementStateById"),He.prototype),Jn(He.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"updateText"),He.prototype),Jn(He.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"selectNodeById"),He.prototype),Jn(He.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"selectEdgeById"),He.prototype),Jn(He.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"selectElementById"),He.prototype),Jn(He.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"clearSelectElements"),He.prototype),Jn(He.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"moveNodes"),He.prototype),Jn(He.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setDefaultEdgeType"),He.prototype),Jn(He.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"changeNodeType"),He.prototype),Jn(He.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"changeEdgeType"),He.prototype),Jn(He.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getNodeIncomingEdge"),He.prototype),Jn(He.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getNodeOutgoingEdge"),He.prototype),Jn(He.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getAnchorIncomingEdge"),He.prototype),Jn(He.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getAnchorOutcomingEdge"),He.prototype),Jn(He.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getNodeIncomingNode"),He.prototype),Jn(He.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getNodeOutgoingNode"),He.prototype),Jn(He.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setTheme"),He.prototype),Jn(He.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"resize"),He.prototype),Jn(He.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"clearData"),He.prototype),Jn(He.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"translateCenter"),He.prototype),Jn(He.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"fitView"),He.prototype),Jn(He.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"openEdgeAnimation"),He.prototype),Jn(He.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"closeEdgeAnimation"),He.prototype),He),HP=i2;function z_(i){return z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},z_(i)}function W_(){return W_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},W_.apply(this,arguments)}function XP(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function H_(i,o){return H_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},H_(i,o)}function qP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=sy(i);if(o){var v=sy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return YP(this,l)}}function YP(i,o){if(o&&(z_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qu(i)}function Qu(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function sy(i){return sy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},sy(i)}function yf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var a2,KP=gu(r2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&H_(f,m)})(v,i);var o,l,u=qP(v);function v(f){var m;(function(F,ee){if(!(F instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,v),yf(Qu(m=u.call(this)),"stepDrag",void 0),yf(Qu(m),"stepScrollX",0),yf(Qu(m),"stepScrollY",0),yf(Qu(m),"onDragging",function(F){var ee=F.deltaX,te=F.deltaY;m.setState({isDragging:!0});var be=m.props.graphModel,ke=be.transformModel;be.editConfigModel.stopMoveGraph!==!0&&ke.translate(ee,te)}),yf(Qu(m),"onDragEnd",function(){m.setState({isDragging:!1})}),yf(Qu(m),"zoomHandler",function(F){var ee=m.props,te=ee.graphModel,be=te.editConfigModel,ke=te.transformModel,Ie=te.gridSize,at=ee.graphModel,it=F.deltaX,gt=F.deltaY;if(be.stopScrollGraph||F.ctrlKey===!0){if(!be.stopZoomGraph){F.preventDefault();var Ft=at.getPointByClient({x:F.clientX,y:F.clientY}).canvasOverlayPosition,gn=Ft.x,mn=Ft.y;ke.zoom(F.deltaY<0,[gn,mn])}}else{if(F.preventDefault(),m.stepScrollX+=it,m.stepScrollY+=gt,Math.abs(m.stepScrollX)>=Ie){var qn=m.stepScrollX%Ie,hn=m.stepScrollX-qn;ke.translate(-hn*ke.SCALE_X,0),m.stepScrollX=qn}if(Math.abs(m.stepScrollY)>=Ie){var Fn=m.stepScrollY%Ie,Sn=m.stepScrollY-Fn;ke.translate(0,-Sn*ke.SCALE_Y),m.stepScrollY=Fn}}}),yf(Qu(m),"clickHandler",function(F){if(F.target.getAttribute("name")==="canvas-overlay"){var ee=m.props.graphModel;ee.selectElements.size>0&&ee.clearSelectElements(),ee.eventCenter.emit(jn.BLANK_CLICK,{e:F})}}),yf(Qu(m),"handleContextMenu",function(F){if(F.target.getAttribute("name")==="canvas-overlay"){F.preventDefault();var ee=m.props.graphModel,te=ee.getPointByClient({x:F.clientX,y:F.clientY});ee.eventCenter.emit(jn.BLANK_CONTEXTMENU,{e:F,position:te})}}),yf(Qu(m),"mouseDownHandler",function(F){var ee=m.props.graphModel,te=ee.eventCenter,be=ee.editConfigModel,ke=ee.transformModel.SCALE_X,Ie=ee.gridSize,at=F.target,it=!be.adjustEdge&&!be.adjustNodePosition;(at.getAttribute("name")==="canvas-overlay"||it)&&(be.stopMoveGraph!==!0?(m.stepDrag.setStep(Ie*ke),m.stepDrag.handleMouseDown(F)):te.emit(jn.BLANK_MOUSEDOWN,{e:F}),m.clickHandler(F))});var w=f.graphModel,M=w.gridSize,D=w.eventCenter;return m.stepDrag=new ye({onDragging:m.onDragging,onDragEnd:m.onDragEnd,step:M,eventType:"BLANK",isStopPropagation:!1,eventCenter:D,model:null}),m.state={isDragging:!1},m}return o=v,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props,w=m.children,M=m.dnd,D=this.state.isDragging;return Object(Ve.g)("svg",W_({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:D?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},M.eventMap()),Object(Ve.g)("g",{transform:f},w))}}])&&XP(o.prototype,l),v}(Ve.a))||r2;function X_(i){return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},X_(i)}function ZP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function JP(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function q_(i,o){return q_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},q_(i,o)}function QP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=uy(i);if(o){var v=uy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return eR(this,l)}}function eR(i,o){if(o&&(X_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function uy(i){return uy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},uy(i)}var tR=gu(a2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&q_(f,m)})(v,i);var o,l,u=QP(v);function v(){return ZP(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,m=f.tool,w=f.graphModel,M=m.getTools().map(function(D){return Object(Ve.g)(D,{graphModel:w,logicFlow:m.instance})});return m.components=M,M}},{key:"triggerToolRender",value:function(){var f=this.props,m=f.tool,w=f.graphModel,M=document.querySelector("#ToolOverlay_".concat(w.flowId)),D=m.getInstance();D.components.forEach(function(F){return F(D,M)}),D.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(Ve.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&JP(o.prototype,l),v}(Ve.a))||a2;function Y_(i){return Y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Y_(i)}function nR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function rR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function K_(i,o){return K_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},K_(i,o)}function oR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=cy(i);if(o){var v=cy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return iR(this,l)}}function iR(i,o){if(o&&(Y_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function cy(i){return cy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},cy(i)}var l2,aR=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&K_(f,m)})(v,i);var o,l,u=oR(v);function v(){return nR(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"render",value:function(){var f=this.props.background;return Object(Ve.g)("div",{className:"lf-background"},Object(Ve.g)("div",{style:f,className:"lf-background-area"}))}}])&&rR(o.prototype,l),v}(Ve.a);function Z_(i){return Z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Z_(i)}function lR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function sR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function J_(i,o){return J_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},J_(i,o)}function uR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=fy(i);if(o){var v=fy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return cR(this,l)}}function cR(i,o){if(o&&(Z_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s2(i)}function s2(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function fy(i){return fy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},fy(i)}function fR(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var u2=gu(l2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&J_(f,m)})(v,i);var o,l,u=uR(v);function v(){var f;lR(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return fR(s2(f=u.call.apply(u,[this].concat(w))),"id",ra()),f}return o=v,(l=[{key:"renderDot",value:function(){var f=this.props,m=f.config,w=m.color,M=m.thickness,D=M===void 0?2:M,F=f.size,ee=f.visible,te=Math.min(Math.max(2,D),F/2),be=1;return ee||(be=0),Object(Ve.g)("rect",{width:te,height:te,rx:te/2,ry:te/2,fill:w,opacity:be})}},{key:"renderMesh",value:function(){var f=this.props,m=f.config,w=m.color,M=m.thickness,D=M===void 0?1:M,F=f.size,ee=f.visible,te=Math.min(Math.max(1,D),F/2),be="M ".concat(F," 0 H0 M0 0 V0 ").concat(F),ke=1;return ee||(ke=0),Object(Ve.g)("path",{d:be,stroke:w,strokeWidth:te,opacity:ke})}},{key:"render",value:function(){var f=this.props,m=f.type,w=f.size,M=f.graphModel.transformModel,D=[M.SCALE_X,M.SKEW_Y,M.SKEW_X,M.SCALE_Y,M.TRANSLATE_X,M.TRANSLATE_Y].join(","),F="matrix(".concat(D,")");return Object(Ve.g)("div",{className:"lf-grid"},Object(Ve.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Ve.g)("defs",null,Object(Ve.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:F,x:"0",y:"0",width:w,height:w},m==="dot"&&this.renderDot(),m==="mesh"&&this.renderMesh())),Object(Ve.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&sR(o.prototype,l),v}(Ve.a))||l2;u2.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function Q_(i){return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Q_(i)}function dR(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return c2(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return c2(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function c2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}var f2,Lh=function(i){var o={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(i).forEach(function(l){var u=dR(l,2),v=u[0],f=u[1];(v==="style"||Q_(f)!=="object")&&(o[v]=f)}),Object(Ve.g)("line",o)};function eb(i){return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},eb(i)}function d2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function dy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?d2(Object(l),!0).forEach(function(u){pR(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):d2(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function pR(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function hR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function vR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function tb(i,o){return tb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},tb(i,o)}function mR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=py(i);if(o){var v=py(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return yR(this,l)}}function yR(i,o){if(o&&(eb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function py(i){return py=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},py(i)}var p2,gR=gu(f2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&tb(f,m)})(v,i);var o,l,u=mR(v);function v(){return hR(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"render",value:function(){var f=this.props.snaplineModel,m=f.position,w=f.isShowHorizontal,M=f.isShowVertical,D=f.getStyle(),F=m.x,ee=F===void 0?0:F,te=m.y,be=te===void 0?0:te,ke=dy(dy({x1:-1e5,y1:be,x2:1e5,y2:be},D),{},{stroke:w?D.stroke:"none"}),Ie=dy(dy({x1:ee,y1:-1e5,x2:ee,y2:1e5},D),{},{stroke:M?D.stroke:"none"});return Object(Ve.g)("g",{className:"lf-snapline"},Object(Ve.g)(Lh,ke),Object(Ve.g)(Lh,Ie))}}])&&vR(o.prototype,l),v}(Ve.a))||f2;function nb(i){return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},nb(i)}function _R(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return h2(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return h2(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function h2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function kd(i){var o=i.x,l=i.y,u=i.width,v=i.height,f=i.className,m=i.radius,w=o-u/2,M=l-v/2,D={};return Object.entries(i).forEach(function(F){var ee=_R(F,2),te=ee[0],be=ee[1];nb(be)!=="object"&&(D[te]=be)}),D.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",m&&(D.rx=m,D.ry=m),D.x=w,D.y=M,Object(Ve.g)("rect",D)}function rb(i){return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},rb(i)}function $h(){return $h=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},$h.apply(this,arguments)}function v2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function m2(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?v2(Object(l),!0).forEach(function(u){bR(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):v2(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function bR(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function wR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function ER(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function ob(i,o){return ob=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},ob(i,o)}function OR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=hy(i);if(o){var v=hy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return SR(this,l)}}function SR(i,o){if(o&&(rb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function hy(i){return hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},hy(i)}kd.defaultProps={className:"",radius:""};var y2,xR=gu(p2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&ob(f,m)})(v,i);var o,l,u=OR(v);function v(){return wR(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,m=f.nodes,w=f.editConfigModel,M=w.hoverOutline,D=w.nodeSelectedOutline,F=[];return m.forEach(function(ee){if(ee.isHovered||ee.isSelected){var te=ee.isHovered,be=ee.isSelected,ke=ee.x,Ie=ee.y,at=ee.width,it=ee.height;if(D&&be||M&&te){var gt=ee.getOutlineStyle(),Ft={};if(Object.keys(gt).forEach(function(mn){mn!=="hover"&&(Ft[mn]=gt[mn])}),te){var gn=gt.hover;Ft=m2(m2({},Ft),gn)}F.push(Object(Ve.g)(kd,$h({transform:ee.transform,className:"lf-outline-node",x:ke,y:Ie,width:at+10,height:it+10},Ft)))}}}),F}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,m=f.edges,w=f.editConfigModel,M=w.edgeSelectedOutline,D=w.hoverOutline,F=[],ee=0;ee<m.length;ee++){var te=m[ee];(M&&te.isSelected||D&&te.isHovered)&&(te.modelType===Mr.LINE_EDGE?F.push(this.getLineOutline(te)):te.modelType===Mr.POLYLINE_EDGE?F.push(this.getPolylineOutline(te)):te.modelType===Mr.BEZIER_EDGE&&F.push(this.getBezierOutline(te)))}return F}},{key:"getLineOutline",value:function(f){var m=f.startPoint,w=f.endPoint,M=(m.x+w.x)/2,D=(m.y+w.y)/2,F=Math.abs(m.x-w.x)+10,ee=Math.abs(m.y-w.y)+10,te=f.getOutlineStyle();return Object(Ve.g)(kd,$h({className:"lf-outline-edge",x:M,y:D,width:F,height:ee},te))}},{key:"getPolylineOutline",value:function(f){var m=f.points,w=or(m),M=st(w,8),D=M.x,F=M.y,ee=M.width,te=M.height,be=f.getOutlineStyle();return Object(Ve.g)(kd,$h({className:"lf-outline",x:D,y:F,width:ee,height:te},be))}},{key:"getBezierOutline",value:function(f){var m=f.path,w=vo(m),M=st(w,8),D=M.x,F=M.y,ee=M.width,te=M.height,be=f.getOutlineStyle();return Object(Ve.g)(kd,$h({className:"lf-outline",x:D,y:F,width:ee,height:te},be))}},{key:"render",value:function(){return Object(Ve.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&ER(o.prototype,l),v}(Ve.a))||p2;function ib(i){return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ib(i)}function AR(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return g2(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return g2(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function Fh(i){var o=i.x,l=o===void 0?0:o,u=i.y,v=u===void 0?0:u,f=i.r,m=f===void 0?4:f,w=i.className,M={cx:l,cy:v,r:m,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(D){var F=AR(D,2),ee=F[0],te=F[1];ib(te)!=="object"&&(M[ee]=te)}),M.className=w?"lf-basic-shape ".concat(w):"lf-basic-shape",Object(Ve.g)("circle",M)}function ab(i){return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ab(i)}function TR(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return _2(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return _2(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function rm(){return rm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},rm.apply(this,arguments)}function b2(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function MR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function w2(i,o,l){return o&&MR(i.prototype,o),i}function E2(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&lb(i,o)}function lb(i,o){return lb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},lb(i,o)}function O2(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=my(i);if(o){var v=my(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return kR(this,l)}}function kR(i,o){if(o&&(ab(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vy(i)}function vy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function my(i){return my=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},my(i)}function sb(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var S2,x2=function(i){E2(l,i);var o=O2(l);function l(){var u;return b2(this,l),sb(vy(u=o.call(this)),"dragHandler",void 0),sb(vy(u),"onDragging",function(v){var f=v.event,m=u.props,w=m.graphModel,M=m.bezierModel,D=m.type,F=w.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,ee=F.x,te=F.y;M.updateAdjustAnchor({x:ee,y:te},D),w.eventCenter.emit(jn.EDGE_ADJUST,{data:M.getData()})}),sb(vy(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new ye({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return w2(l,[{key:"render",value:function(){var u=this,v=this.props.position,f=v.x,m=v.y,w=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(Ve.g)(Fh,rm({className:"lf-bezier-adjust-anchor",x:f,y:m},w,{onMouseDown:function(M){u.dragHandler.handleMouseDown(M)}}))}}]),l}(Ve.a),NR=gu(y2=function(i){E2(l,i);var o=O2(l);function l(){return b2(this,l),o.apply(this,arguments)}return w2(l,[{key:"getBezierAdjust",value:function(u,v){var f=u.path,m=u.id,w=TR(vo(f),4),M=w[0],D=w[1],F=w[2],ee=w[3],te=u.getEdgeStyle().adjustLine,be=[];return be.push(Object(Ve.g)(Lh,rm({x1:M.x,y1:M.y,x2:D.x,y2:D.y},te))),be.push(Object(Ve.g)(x2,{position:D,bezierModel:u,graphModel:v,key:"".concat(m,"_ePre"),type:"sNext"})),be.push(Object(Ve.g)(Lh,rm({x1:ee.x,y1:ee.y,x2:F.x,y2:F.y},te))),be.push(Object(Ve.g)(x2,{position:F,bezierModel:u,graphModel:v,key:"".concat(m,"_sNext"),type:"ePre"})),be}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,v=u.edges,f=[],m=0;m<v.length;m++){var w=v[m];w.isSelected&&w.modelType===Mr.BEZIER_EDGE&&w.draggable&&f.push(this.getBezierAdjust(w,u))}return f}},{key:"render",value:function(){return Object(Ve.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}(Ve.a))||y2;function ub(i){return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ub(i)}function PR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function RR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function cb(i,o){return cb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},cb(i,o)}function CR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=yy(i);if(o){var v=yy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return DR(this,l)}}function DR(i,o){if(o&&(ub(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function yy(i){return yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},yy(i)}var A2,jR=gu(S2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&cb(f,m)})(v,i);var o,l,u=CR(v);function v(){return PR(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props.children;return Object(Ve.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Ve.g)("g",{transform:f},m))}}])&&RR(o.prototype,l),v}(Ve.a))||S2;function fb(i){return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},fb(i)}function db(){return db=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},db.apply(this,arguments)}function IR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function LR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function pb(i,o){return pb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},pb(i,o)}function $R(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=gy(i);if(o){var v=gy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return FR(this,l)}}function FR(i,o){if(o&&(fb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function gy(i){return gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},gy(i)}var BR=gu(A2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&pb(f,m)})(v,i);var o,l,u=$R(v);function v(){return IR(this,v),u.apply(this,arguments)}return o=v,l=[{key:"getComponent",value:function(f,m){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",M=this.props.getView,D=M(f.type);return Object(Ve.g)(D,{key:f.id,model:f,graphModel:m,overlay:w})}},{key:"render",value:function(){var f=this,m=this.props,w=m.graphModel,M=m.tool,D=m.options,F=m.dnd,ee=m.snaplineModel,te={};D.width&&(te.width="".concat(w.width,"px")),D.height&&(te.height="".concat(w.height,"px"));var be=D.grid,ke=w.fakerNode,Ie=w.editConfigModel.adjustEdge;return Object(Ve.g)("div",{className:"lf-graph","flow-id":w.flowId,style:te},Object(Ve.g)(KP,{graphModel:w,dnd:F},Object(Ve.g)("g",{className:"lf-base"},Kf(w.sortElements,function(at){return f.getComponent(at,w)})),ke?this.getComponent(ke,w):""),Object(Ve.g)(jR,{graphModel:w},Object(Ve.g)(xR,{graphModel:w}),Ie?Object(Ve.g)(NR,{graphModel:w}):"",D.snapline!==!1?Object(Ve.g)(gR,{snaplineModel:ee}):""),Object(Ve.g)(tR,{graphModel:w,tool:M}),D.background&&Object(Ve.g)(aR,{background:D.background}),D.grid&&Object(Ve.g)(u2,db({},be,{graphModel:w})))}}],l&&LR(o.prototype,l),v}(Ve.a))||A2,UR=BR;function T2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function _y(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?T2(Object(l),!0).forEach(function(u){gf(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):T2(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function VR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function gf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var GR=function(){function i(u){var v=this;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),gf(this,"nodeConfig",void 0),gf(this,"lf",void 0),gf(this,"fakerNode",void 0),gf(this,"stopDrag",function(){v.nodeConfig=null,window.document.removeEventListener("mouseup",v.stopDrag)}),gf(this,"dragEnter",function(m){v.nodeConfig&&!v.fakerNode&&(v.fakerNode=v.lf.createFakerNode(_y(_y({},v.nodeConfig),v.clientToLocalPoint({x:m.clientX,y:m.clientY}))))}),gf(this,"onDragOver",function(m){if(m.preventDefault(),v.fakerNode){var w=v.clientToLocalPoint({x:m.clientX,y:m.clientY}),M=w.x,D=w.y;v.fakerNode.moveTo(M,D);var F=v.fakerNode.getData();v.lf.setNodeSnapLine(F),v.lf.graphModel.eventCenter.emit(jn.NODE_DND_DRAG,{data:F})}return!1}),gf(this,"onDragLeave",function(){v.fakerNode&&(v.lf.removeNodeSnapLine(),v.lf.graphModel.removeFakerNode(),v.fakerNode=null)}),gf(this,"onDrop",function(m){v.lf.graphModel&&m&&v.nodeConfig&&(v.lf.addNode(_y(_y({},v.nodeConfig),v.clientToLocalPoint({x:m.clientX,y:m.clientY})),jn.NODE_DND_ADD,m),m.preventDefault(),m.stopPropagation(),v.nodeConfig=null,v.lf.removeNodeSnapLine(),v.lf.graphModel.removeFakerNode(),v.fakerNode=null)});var f=u.lf;this.lf=f}var o,l;return o=i,(l=[{key:"clientToLocalPoint",value:function(u){var v=u.x,f=u.y,m=Gs(this.lf.options,["grid","size"]),w=this.lf.graphModel.getPointByClient({x:v,y:f}).canvasOverlayPosition,M=w.x,D=w.y;return{x:rl(M,m),y:rl(D,m)}}},{key:"startDrag",value:function(u){var v=this.lf.graphModel.editConfigModel;v!=null&&v.isSilentMode||(this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&VR(o.prototype,l),i}();function M2(i){var o=i.container,l=i.grid,u=i.width,v=i.height;if(!o)throw new Error("请检查 container 参数是否有效");if(typeof u=="string"||typeof v=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(i.grid=eu({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),eu({},N2,i)}var uo,k2,N2={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function hb(i){return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},hb(i)}function vb(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return P2(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return P2(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function R2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function by(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?R2(Object(l),!0).forEach(function(u){C2(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):R2(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function zR(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function WR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function HR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function om(){return om=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=XR(i,o);if(u){var v=Object.getOwnPropertyDescriptor(u,o);return v.get?v.get.call(arguments.length<3?i:l):v.value}},om.apply(this,arguments)}function XR(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Nd(i))!==null;);return i}function mb(i,o){return mb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},mb(i,o)}function qR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Nd(i);if(o){var v=Nd(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return YR(this,l)}}function YR(i,o){if(o&&(hb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wy(i)}function wy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Nd(i){return Nd=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Nd(i)}function C2(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function vu(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var yb=(uo=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&mb(f,m)})(v,i);var o,l,u=qR(v);function v(){var f;WR(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return C2(wy(f=u.call.apply(u,[this].concat(w))),"modelType",Mr.BEZIER_EDGE),zR(wy(f),"path",k2,wy(f)),f}return o=v,(l=[{key:"initEdgeData",value:function(f){this.offset=100,om(Nd(v.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return by(by({},om(Nd(v.prototype),"getEdgeStyle",this).call(this)),no(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,m=0;return this.pointsList.forEach(function(w){var M=w.x,D=w.y;f+=M,m+=D}),{x:f/this.pointsList.length,y:m/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=om(Nd(v.prototype),"getData",this).call(this),m=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return by(by({},f),{},{pointsList:m})}},{key:"getControls",value:function(){var f=this.startPoint,m=this.endPoint;return ei({start:f,end:m,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var m=vb(f,4),w=m[0],M=m[1],D=m[2],F=m[3];return"M ".concat(w.x," ").concat(w.y,`
    C `).concat(M.x," ").concat(M.y,`,
    `).concat(D.x," ").concat(D.y,`,
    `).concat(F.x," ").concat(F.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),m=f.sNext,w=f.ePre;this.updatePath(m,w)}},{key:"updatePath",value:function(f,m){f=no(f),m=no(m);var w={x:this.startPoint.x,y:this.startPoint.y},M={x:this.endPoint.x,y:this.endPoint.y};if(!f||!m){var D=this.getControls();f=D.sNext,m=D.ePre}this.pointsList=[w,f,m,M],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,m){this.startPoint.x+=f,this.startPoint.y+=m;var w=vb(this.pointsList,3),M=w[1],D=w[2];M.x+=f,M.y+=m,this.updatePath(M,D)}},{key:"moveEndPoint",value:function(f,m){this.endPoint.x+=f,this.endPoint.y+=m;var w=vb(this.pointsList,3),M=w[1],D=w[2];D.x+=f,D.y+=m,this.updatePath(M,D)}},{key:"updateAdjustAnchor",value:function(f,m){m==="sNext"?this.pointsList[1]=f:m==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var m=f.startPoint,w=f.endPoint,M=f.sourceNode,D=f.targetNode,F=ei({start:m,end:w,sourceNode:M,targetNode:D,offset:this.offset}),ee=F.sNext,te=F.ePre;this.pointsList=[m,ee,te,w],this.initPoints()}}])&&HR(o.prototype,l),v}(cf),k2=vu(uo.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),vu(uo.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"initPoints"),uo.prototype),vu(uo.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"updatePoints"),uo.prototype),vu(uo.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"updateStartPoint"),uo.prototype),vu(uo.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"updateEndPoint"),uo.prototype),vu(uo.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"moveStartPoint"),uo.prototype),vu(uo.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"moveEndPoint"),uo.prototype),vu(uo.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"updateAdjustAnchor"),uo.prototype),vu(uo.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"getAdjustStart"),uo.prototype),vu(uo.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"getAdjustEnd"),uo.prototype),vu(uo.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"updateAfterAdjustStartAndEnd"),uo.prototype),uo),an,D2,j2,I2,L2,$2,F2,B2,U2,V2,G2,z2,W2,H2,X2,q2,Y2,K2,Z2,J2,Q2,eO,tO,KR=function(i){return i==null};function ZR(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||nO(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gb(i){return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},gb(i)}function nO(i,o){if(i){if(typeof i=="string")return rO(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?rO(i,o):void 0}}function rO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function oO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function ul(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?oO(Object(l),!0).forEach(function(u){Nl(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):oO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function Pi(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function JR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Nl(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Pr(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var _f,iO,bf=(an=function(){function i(u,v){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),Nl(this,"id",""),Pi(this,"type",D2,this),Pi(this,"x",j2,this),Pi(this,"y",I2,this),Pi(this,"text",L2,this),Pi(this,"properties",$2,this),Pi(this,"_width",F2,this),Pi(this,"_height",B2,this),Pi(this,"anchorsOffset",U2,this),Pi(this,"isSelected",V2,this),Pi(this,"isHovered",G2,this),Pi(this,"isShowAnchor",z2,this),Pi(this,"isDragging",W2,this),Pi(this,"isHitable",H2,this),Pi(this,"draggable",X2,this),Pi(this,"visible",q2,this),Pi(this,"enableRotate",Y2,this),Nl(this,"virtual",!1),Nl(this,"graphModel",void 0),Pi(this,"zIndex",K2,this),Pi(this,"state",Z2,this),Pi(this,"autoToFront",J2,this),Pi(this,"style",Q2,this),Pi(this,"transform",eO,this),Pi(this,"_rotate",tO,this),Nl(this,"BaseType",co.NODE),Nl(this,"modelType",Mr.NODE),Nl(this,"additionStateData",void 0),Nl(this,"targetRules",[]),Nl(this,"sourceRules",[]),Nl(this,"moveRules",[]),Nl(this,"hasSetTargetRules",!1),Nl(this,"hasSetSourceRules",!1),this.graphModel=v,this.initNodeData(u),this.setAttributes()}var o,l;return o=i,l=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"rotate",get:function(){return this._rotate},set:function(u){this._rotate=u;var v=this.x,f=v===void 0?0:v,m=this.y,w=m===void 0?0:m;this.transform=new Md(-f,-w).rotate(u).translate(f,w).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var v=this.graphModel.idGenerator,f=v&&v(u.type),m=this.createId();u.id=m||f||ra()}this.formatText(u),Li(this,function(w){return tl(w,["id","type","x","y","text","properties","virtual","rotate"])}(u)),this.graphModel.overlapMode===ko.INCREASE&&(this.zIndex=u.zIndex||su())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,v=u.x,f=u.y,m=u.value,w=this.properties;Object(c.x)(w)&&(w=Object(c.I)(w));var M={id:this.id,type:this.type,x:this.x,y:this.y,properties:w};return this.rotate&&(M.rotate=this.rotate),this.graphModel.overlapMode===ko.INCREASE&&(M.zIndex=this.zIndex),m&&(M.text={x:v,y:f,value:m}),M}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return ul(ul({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return no(u)}},{key:"getRotateControlStyle",value:function(){var u=this.graphModel.theme.rotateControl;return no(u)}},{key:"getAnchorStyle",value:function(u){var v=this.graphModel.theme.anchor;return no(v)}},{key:"getAnchorLineStyle",value:function(u){var v=this.graphModel.theme.anchorLine;return no(v)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return no(u)}},{key:"isAllowConnectedAsSource",value:function(u,v,f,m){var w=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var M,D=!0,F=0;F<w.length;F++){var ee=w[F];if(!ee.validate.call(this,this,u,v,f,m)){D=!1,M=ee.message;break}}return{isAllPass:D,msg:M}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,v,f,m){var w=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var M,D=!0,F=0;F<w.length;F++){var ee=w[F];if(!ee.validate.call(this,u,this,v,f,m)){D=!1,M=ee.message;break}}return{isAllPass:D,msg:M}}},{key:"isAllowMoveNode",value:function(u,v){var f,m=!0,w=!0,M=function(ee,te){var be=typeof Symbol<"u"&&ee[Symbol.iterator]||ee["@@iterator"];if(!be){if(Array.isArray(ee)||(be=nO(ee))||te){be&&(ee=be);var ke=0,Ie=function(){};return{s:Ie,n:function(){return ke>=ee.length?{done:!0}:{done:!1,value:ee[ke++]}},e:function(Ft){throw Ft},f:Ie}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var at,it=!0,gt=!1;return{s:function(){be=be.call(ee)},n:function(){var Ft=be.next();return it=Ft.done,Ft},e:function(Ft){gt=!0,at=Ft},f:function(){try{it||be.return==null||be.return()}finally{if(gt)throw at}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(M.s();!(f=M.n()).done;){var D=(0,f.value)(this,u,v);if(!D)return!1;if(gb(D)==="object"){var F=D;if(F.x===!1&&F.y===!1)return!1;m=m&&F.x,w=w&&F.y}}}catch(ee){M.e(ee)}finally{M.f()}return{x:m,y:w}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,v=this.id,f=this.x,m=this.y;return u&&u.length>0?u.map(function(w,M){return w.length?(w=w,{id:"".concat(v,"_").concat(M),x:f+w[0],y:m+w[1]}):ul(ul({},w=w),{},{x:f+w.x,y:m+w.y,id:w.id||"".concat(v,"_").concat(M)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(v,f){for(var m,w=Ed(f),M=Number.MAX_SAFE_INTEGER,D=0;D<w.length;D++){var F=ll(v.x,v.y,w[D].x,w[D].y);F<M&&(M=F,m={index:D,anchor:Tl(Tl({},w[D]),{},{x:w[D].x,y:w[D].y,id:w[D].id})})}return m}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var u=this.getAnchorsByOffset(),v=this.x,f=this.y,m=this.rotate;return u.forEach(function(w){var M=w.x,D=w.y,F=ZR(new Ts([M,D,1]).translate(-v,-f).rotate(m).translate(v,f)[0],2),ee=F[0],te=F[1];w.x=ee,w.y=te}),u}},{key:"getAnchorInfo",value:function(u){if(!KR(u))for(var v=0;v<this.anchors.length;v++){var f=this.anchors[v];if(f.id===u)return f}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,v){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,w=!1;if(f)m=!0,w=!0;else{var M=this.isAllowMoveNode(u,v);typeof M=="boolean"?(m=M,w=M):(m=M.x,w=M.y)}if(m){var D=this.x+u;this.x=D,this.text&&this.moveText(u,0)}if(w){var F=this.y+v;this.y=F,this.text&&this.moveText(0,v)}return m||w}},{key:"getMoveDistance",value:function(u,v){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,w=!1,M=0,D=0;if(f)m=!0,w=!0;else{var F=this.isAllowMoveNode(u,v);typeof F=="boolean"?(m=F,w=F):(m=F.x,w=F.y)}if(m&&u){var ee=this.x+u;this.x=ee,this.text&&this.moveText(u,0),M=u}if(w&&v){var te=this.y+v;this.y=te,this.text&&this.moveText(0,v),D=v}return[M,D]}},{key:"moveTo",value:function(u,v){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=u-this.x,w=v-this.y;return!(!f&&!this.isAllowMoveNode(m,w)||(this.text&&this.text&&this.moveText(m,w),this.x=u,this.y=v,0))}},{key:"moveText",value:function(u,v){var f=this.text,m=f.x,w=f.y,M=f.value,D=f.draggable,F=f.editable;this.text={value:M,editable:F,draggable:D,x:m+u,y:w+v}}},{key:"updateText",value:function(u){this.text=ul(ul({},Object(c.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setEnableRotate",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,v){this.state=u,this.additionStateData=v}},{key:"setProperty",value:function(u,v){this.properties=ul(ul({},Object(c.I)(this.properties)),{},Nl({},u,bi(v))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=ul(ul({},Object(c.I)(this.properties)),bi(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,v){this.style=ul(ul({},this.style),{},Nl({},u,bi(v)))}},{key:"setStyles",value:function(u){this.style=ul(ul({},this.style),bi(u))}},{key:"updateStyles",value:function(u){this.style=ul({},bi(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Li(this,u)}}],l&&JR(o.prototype,l),i}(),D2=Pr(an.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j2=Pr(an.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I2=Pr(an.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L2=Pr(an.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),$2=Pr(an.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),F2=Pr(an.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),B2=Pr(an.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),U2=Pr(an.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V2=Pr(an.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G2=Pr(an.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z2=Pr(an.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W2=Pr(an.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H2=Pr(an.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),X2=Pr(an.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q2=Pr(an.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Y2=Pr(an.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),K2=Pr(an.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Z2=Pr(an.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),J2=Pr(an.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q2=Pr(an.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),eO=Pr(an.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tO=Pr(an.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pr(an.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(an.prototype,"incoming"),an.prototype),Pr(an.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(an.prototype,"outgoing"),an.prototype),Pr(an.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"addNodeMoveRules"),an.prototype),Pr(an.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"move"),an.prototype),Pr(an.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"getMoveDistance"),an.prototype),Pr(an.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"moveTo"),an.prototype),Pr(an.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"moveText"),an.prototype),Pr(an.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"updateText"),an.prototype),Pr(an.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setSelected"),an.prototype),Pr(an.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setHovered"),an.prototype),Pr(an.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setIsShowAnchor"),an.prototype),Pr(an.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setEnableRotate"),an.prototype),Pr(an.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setHitable"),an.prototype),Pr(an.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setElementState"),an.prototype),Pr(an.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setProperty"),an.prototype),Pr(an.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setProperties"),an.prototype),Pr(an.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"deleteProperty"),an.prototype),Pr(an.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setStyle"),an.prototype),Pr(an.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setStyles"),an.prototype),Pr(an.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"updateStyles"),an.prototype),Pr(an.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setZIndex"),an.prototype),Pr(an.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"updateAttributes"),an.prototype),an);function _b(i){return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_b(i)}function aO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function lO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?aO(Object(l),!0).forEach(function(u){sO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):aO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function QR(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function eC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function tC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function bb(){return bb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=nC(i,o);if(u){var v=Object.getOwnPropertyDescriptor(u,o);return v.get?v.get.call(arguments.length<3?i:l):v.value}},bb.apply(this,arguments)}function nC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Bh(i))!==null;);return i}function wb(i,o){return wb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},wb(i,o)}function rC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Bh(i);if(o){var v=Bh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return oC(this,l)}}function oC(i,o){if(o&&(_b(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ey(i)}function Ey(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Bh(i){return Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Bh(i)}function sO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Eb(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Va,uO,cO,Ob=(_f=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&wb(f,m)})(v,i);var o,l,u=rC(v);function v(){var f;eC(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return sO(Ey(f=u.call.apply(u,[this].concat(w))),"modelType",Mr.CIRCLE_NODE),QR(Ey(f),"r",iO,Ey(f)),f}return o=v,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=bb(Bh(v.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.circle;return lO(lO({},f),no(m))}},{key:"getDefaultAnchor",value:function(){var f=this.x,m=this.y,w=this.r;return[{x:f,y:m-w,id:"".concat(this.id,"_0")},{x:f+w,y:m,id:"".concat(this.id,"_1")},{x:f,y:m+w,id:"".concat(this.id,"_2")},{x:f-w,y:m,id:"".concat(this.id,"_3")}]}}])&&tC(o.prototype,l),v}(bf),iO=Eb(_f.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Eb(_f.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(_f.prototype,"width"),_f.prototype),Eb(_f.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(_f.prototype,"height"),_f.prototype),_f);r(129);function Sb(i){return Sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Sb(i)}function xb(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return fO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return fO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function dO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function pO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?dO(Object(l),!0).forEach(function(u){vO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):dO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function hO(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function iC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function aC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Ab(){return Ab=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=lC(i,o);if(u){var v=Object.getOwnPropertyDescriptor(u,o);return v.get?v.get.call(arguments.length<3?i:l):v.value}},Ab.apply(this,arguments)}function lC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Vh(i))!==null;);return i}function Tb(i,o){return Tb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Tb(i,o)}function sC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Vh(i);if(o){var v=Vh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return uC(this,l)}}function uC(i,o){if(o&&(Sb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uh(i)}function Uh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Vh(i){return Vh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Vh(i)}function vO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Gh(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var ec,mO,yO,Mb=(Va=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Tb(f,m)})(v,i);var o,l,u=sC(v);function v(){var f;iC(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return vO(Uh(f=u.call.apply(u,[this].concat(w))),"modelType",Mr.DIAMOND_NODE),hO(Uh(f),"rx",uO,Uh(f)),hO(Uh(f),"ry",cO,Uh(f)),f}return o=v,(l=[{key:"getNodeStyle",value:function(){var f=Ab(Vh(v.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.diamond;return pO(pO({},f),no(m))}},{key:"points",get:function(){var f=this.x,m=this.y,w=this.rx,M=this.ry;return[[f,m-M],[f+w,m],[f,m+M],[f-w,m]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var M=xb(w,1)[0];M<f&&(f=M),M>m&&(m=M)}),m-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var M=xb(w,2)[1];M<f&&(f=M),M>m&&(m=M)}),m-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(m,w){var M=xb(m,2);return{x:M[0],y:M[1],id:"".concat(f.id,"_").concat(w)}})}}])&&aC(o.prototype,l),v}(bf),uO=Gh(Va.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),cO=Gh(Va.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Gh(Va.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Va.prototype,"points"),Va.prototype),Gh(Va.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Va.prototype,"pointsPosition"),Va.prototype),Gh(Va.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Va.prototype,"width"),Va.prototype),Gh(Va.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Va.prototype,"height"),Va.prototype),Va);function kb(i){return kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},kb(i)}function gO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function _O(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?gO(Object(l),!0).forEach(function(u){wO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):gO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function bO(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function cC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function fC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Nb(){return Nb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=dC(i,o);if(u){var v=Object.getOwnPropertyDescriptor(u,o);return v.get?v.get.call(arguments.length<3?i:l):v.value}},Nb.apply(this,arguments)}function dC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Wh(i))!==null;);return i}function Pb(i,o){return Pb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Pb(i,o)}function pC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wh(i);if(o){var v=Wh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return hC(this,l)}}function hC(i,o){if(o&&(kb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zh(i)}function zh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Wh(i){return Wh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Wh(i)}function wO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Oy(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var ks,EO,Rb=(ec=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Pb(f,m)})(v,i);var o,l,u=pC(v);function v(){var f;cC(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return wO(zh(f=u.call.apply(u,[this].concat(w))),"modelType",Mr.ELLIPSE_NODE),bO(zh(f),"rx",mO,zh(f)),bO(zh(f),"ry",yO,zh(f)),f}return o=v,(l=[{key:"getNodeStyle",value:function(){var f=Nb(Wh(v.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.ellipse;return _O(_O({},f),no(m))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,m=this.y,w=this.rx,M=this.ry;return[{x:f,y:m-M,id:"".concat(this.id,"_0")},{x:f+w,y:m,id:"".concat(this.id,"_1")},{x:f,y:m+M,id:"".concat(this.id,"_2")},{x:f-w,y:m,id:"".concat(this.id,"_3")}]}}])&&fC(o.prototype,l),v}(bf),mO=Oy(ec.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),yO=Oy(ec.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Oy(ec.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(ec.prototype,"width"),ec.prototype),Oy(ec.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(ec.prototype,"height"),ec.prototype),ec);function Cb(i){return Cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Cb(i)}function Db(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return OO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return OO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function OO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function SO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function xO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?SO(Object(l),!0).forEach(function(u){AO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):SO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function vC(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function mC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function yC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function jb(){return jb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=gC(i,o);if(u){var v=Object.getOwnPropertyDescriptor(u,o);return v.get?v.get.call(arguments.length<3?i:l):v.value}},jb.apply(this,arguments)}function gC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Hh(i))!==null;);return i}function Ib(i,o){return Ib=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Ib(i,o)}function _C(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hh(i);if(o){var v=Hh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return bC(this,l)}}function bC(i,o){if(o&&(Cb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sy(i)}function Sy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Hh(i){return Hh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Hh(i)}function AO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function xy(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Lb,TO,$b=(ks=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Ib(f,m)})(v,i);var o,l,u=_C(v);function v(){var f;mC(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return AO(Sy(f=u.call.apply(u,[this].concat(w))),"modelType",Mr.POLYGON_NODE),vC(Sy(f),"points",EO,Sy(f)),f}return o=v,(l=[{key:"getNodeStyle",value:function(){var f=jb(Hh(v.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.polygon;return xO(xO({},f),no(m))}},{key:"pointsPosition",get:function(){var f=this.x,m=this.y,w=this.width,M=this.height;return this.points.map(function(D){return{x:D[0]+f-w/2,y:D[1]+m-M/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var M=Db(w,1)[0];M<f&&(f=M),M>m&&(m=M)}),m-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var M=Db(w,2)[1];M<f&&(f=M),M>m&&(m=M)}),m-f}},{key:"getDefaultAnchor",value:function(){var f=this,m=this.x,w=this.y,M=this.width,D=this.height;return this.points.map(function(F,ee){var te=Db(F,2),be=te[0],ke=te[1];return{x:m+be-M/2,y:w+ke-D/2,id:"".concat(f.id,"_").concat(ee)}})}}])&&yC(o.prototype,l),v}(bf),EO=xy(ks.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),xy(ks.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(ks.prototype,"pointsPosition"),ks.prototype),xy(ks.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(ks.prototype,"width"),ks.prototype),xy(ks.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(ks.prototype,"height"),ks.prototype),ks);function Fb(i){return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Fb(i)}function MO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function kO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?MO(Object(l),!0).forEach(function(u){NO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):MO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function wC(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function EC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function OC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Bb(){return Bb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=SC(i,o);if(u){var v=Object.getOwnPropertyDescriptor(u,o);return v.get?v.get.call(arguments.length<3?i:l):v.value}},Bb.apply(this,arguments)}function SC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Xh(i))!==null;);return i}function Ub(i,o){return Ub=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Ub(i,o)}function xC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Xh(i);if(o){var v=Xh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return AC(this,l)}}function AC(i,o){if(o&&(Fb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ay(i)}function Ay(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xh(i){return Xh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Xh(i)}function NO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Pd,Vb=(Lb=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Ub(f,m)})(v,i);var o,l,u=xC(v);function v(){var f;EC(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return NO(Ay(f=u.call.apply(u,[this].concat(w))),"modelType",Mr.RECT_NODE),wC(Ay(f),"radius",TO,Ay(f)),f}return o=v,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,m=this.y,w=this.width,M=this.height;return[{x:f,y:m-M/2,id:"".concat(this.id,"_0")},{x:f+w/2,y:m,id:"".concat(this.id,"_1")},{x:f,y:m+M/2,id:"".concat(this.id,"_2")},{x:f-w/2,y:m,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=Bb(Xh(v.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.rect;return kO(kO({},f),no(m))}}])&&OC(o.prototype,l),v}(bf),TO=function(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}(Lb.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Lb);function Gb(i){return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Gb(i)}function PO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function RO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?PO(Object(l),!0).forEach(function(u){DO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):PO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function TC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function MC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function zb(){return zb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=kC(i,o);if(u){var v=Object.getOwnPropertyDescriptor(u,o);return v.get?v.get.call(arguments.length<3?i:l):v.value}},zb.apply(this,arguments)}function kC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=qh(i))!==null;);return i}function Wb(i,o){return Wb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Wb(i,o)}function NC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=qh(i);if(o){var v=qh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return PC(this,l)}}function PC(i,o){if(o&&(Gb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CO(i)}function CO(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qh(i){return qh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},qh(i)}function DO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function jO(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Hb=(Pd=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Wb(f,m)})(v,i);var o,l,u=NC(v);function v(){var f;TC(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return DO(CO(f=u.call.apply(u,[this].concat(w))),"modelType",Mr.TEXT_NODE),f}return o=v,(l=[{key:"getTextStyle",value:function(){var f=zb(qh(v.prototype),"getTextStyle",this).call(this),m=this.graphModel.theme.text;return RO(RO({},f),no(m))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return lu({rows:f,fontSize:m,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return lu({rows:f,fontSize:m,rowsLength:f.length}).height}}])&&MC(o.prototype,l),v}(bf),jO(Pd.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Pd.prototype,"width"),Pd.prototype),jO(Pd.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Pd.prototype,"height"),Pd.prototype),Pd);function Xb(i){return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Xb(i)}function RC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function CC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function qb(i,o){return qb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},qb(i,o)}function DC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ty(i);if(o){var v=Ty(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return jC(this,l)}}function jC(i,o){if(o&&(Xb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IO(i)}function IO(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ty(i){return Ty=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ty(i)}function IC(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var mu,LO,$O,FO,Yb=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&qb(f,m)})(v,i);var o,l,u=DC(v);function v(){var f;RC(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return IC(IO(f=u.call.apply(u,[this].concat(w))),"modelType",Mr.HTML_NODE),f}return o=v,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,m=this.y,w=this.width,M=this.height;return[{x:f,y:m-M/2,id:"".concat(this.id,"_0")},{x:f+w/2,y:m,id:"".concat(this.id,"_1")},{x:f,y:m+M/2,id:"".concat(this.id,"_2")},{x:f-w/2,y:m,id:"".concat(this.id,"_3")}]}}])&&CC(o.prototype,l),v}(bf);function BO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function Kb(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function LC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function UO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function im(i,o,l,u,v){var f={};return Object.keys(u).forEach(function(m){f[m]=u[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),v&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var VO=(mu=function(){function i(u){(function(v,f){if(!(v instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),UO(this,"graphModel",void 0),Kb(this,"isShowHorizontal",LO,this),Kb(this,"isShowVertical",$O,this),Kb(this,"position",FO,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var o,l;return o=i,l=[{key:"getStyle",value:function(){return function(u){for(var v=1;v<arguments.length;v++){var f=arguments[v]!=null?arguments[v]:{};v%2?BO(Object(f),!0).forEach(function(m){UO(u,m,f[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):BO(Object(f)).forEach(function(m){Object.defineProperty(u,m,Object.getOwnPropertyDescriptor(f,m))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,v){for(var f=u.x,m=u.y,w=!1,M=!1,D=0;D<v.length;D++){var F=v[D];if(F.id!==u.id&&(f===F.x&&(w=!0),m===F.y&&(M=!0),w&&M))break}return{isShowVertical:w,isShowHorizontal:M,position:{x:f,y:m}}}},{key:"getHorizontalSnapline",value:function(u,v){var f,m,w=!1,M=u.id;if(M){var D=this.graphModel.fakerNode;if(D&&D.id===M)m=So(D);else{var F=this.graphModel.getNodeModelById(M);m=So(F)}}for(var ee=0;ee<v.length;ee++){var te=v[ee];if(te.id!==u.id){var be=So(te);if(be.minY===m.minY||be.maxY===m.minY){w=!0,f=m.minY;break}if(be.minY===m.maxY||be.maxY===m.maxY){w=!0,f=m.maxY;break}}}return Li({isShowHorizontal:w,position:{y:f}})}},{key:"getVerticalSnapline",value:function(u,v){var f,m,w=!1,M=u.id;if(M){var D=this.graphModel.fakerNode;if(D&&D.id===M)m=So(D);else{var F=this.graphModel.getNodeModelById(M);m=So(F)}}for(var ee=0;ee<v.length;ee++){var te=v[ee];if(te.id!==u.id){var be=So(te);if(be.minX===m.minX||be.maxX===m.minX){w=!0,f=m.minX;break}if(be.minX===m.maxX||be.maxX===m.maxX){w=!0,f=m.maxX;break}}}return Li({isShowVertical:w,position:{x:f}})}},{key:"getSnapLinePosition",value:function(u,v){var f=this.getCenterSnapLine(u,v),m=f.isShowHorizontal,w=f.isShowVertical;if(!m){var M=this.getHorizontalSnapline(u,v);M.isShowHorizontal&&(f.isShowHorizontal=M.isShowHorizontal,f.position.y=M.position.y)}if(!w){var D=this.getVerticalSnapline(u,v);D.isShowVertical&&(f.isShowVertical=D.isShowVertical,f.position.x=D.position.x)}return f}},{key:"setSnaplineInfo",value:function(u){var v=u.isShowHorizontal,f=u.isShowVertical,m=u.position;this.position=m,this.isShowHorizontal=v,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var v=this.graphModel.nodes,f=this.getSnapLinePosition(u,v);this.setSnaplineInfo(f)}}],l&&LC(o.prototype,l),i}(),LO=im(mu.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$O=im(mu.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FO=im(mu.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),im(mu.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(mu.prototype,"clearSnapline"),mu.prototype),im(mu.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(mu.prototype,"setNodeSnapLine"),mu.prototype),mu),am=new Map,GO=function(i){var o=ra(),l=window.requestAnimationFrame(function u(){if(i(),am.get(o)){var v=window.requestAnimationFrame(u);am.set(o,v)}});return am.set(o,l),o},My=function(i){var o=am.get(i);o&&(window.cancelAnimationFrame(o),am.delete(i))};function Zb(i){return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Zb(i)}function lm(){return lm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},lm.apply(this,arguments)}function zO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function sm(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?zO(Object(l),!0).forEach(function(u){nc(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):zO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function $C(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return WO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return WO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function WO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function FC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Jb(i,o){return Jb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Jb(i,o)}function BC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=ky(i);if(o){var v=ky(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return UC(this,l)}}function UC(i,o){if(o&&(Zb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tc(i)}function tc(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ky(i){return ky=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ky(i)}function nc(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var VC=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Jb(f,m)})(v,i);var o,l,u=BC(v);function v(){var f;return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,v),nc(tc(f=u.call(this)),"preTargetNode",void 0),nc(tc(f),"sourceRuleResults",void 0),nc(tc(f),"targetRuleResults",void 0),nc(tc(f),"dragHandler",void 0),nc(tc(f),"t",void 0),nc(tc(f),"onDragStart",function(m){var w=m.event,M=f.props,D=M.anchorData,F=M.nodeModel,ee=M.graphModel;ee.overlapMode,ee.selectNodeById(F.id),F.autoToFront&&ee.toFront(F.id),ee.eventCenter.emit(jn.ANCHOR_DRAGSTART,{data:D,e:w,nodeModel:F}),f.setState({startX:D.x,startY:D.y,endX:D.x,endY:D.y})}),nc(tc(f),"onDragging",function(m){var w=m.event,M=f.props,D=M.graphModel,F=M.nodeModel,ee=M.anchorData,te=D.transformModel,be=D.eventCenter,ke=D.width,Ie=D.height,at=D.editConfigModel,it=at.autoExpand,gt=at.stopMoveGraph,Ft=w.clientX,gn=w.clientY,mn=D.getPointByClient({x:Ft,y:gn}),qn=mn.domOverlayPosition,hn=qn.x,Fn=qn.y,Sn=mn.canvasOverlayPosition,$r=Sn.x,zr=Sn.y;f.t&&My(f.t);var vr=[];hn<10?vr=[10,0]:hn+10>ke?vr=[-10,0]:Fn<10?vr=[0,10]:Fn+10>Ie&&(vr=[0,-10]),f.setState({endX:$r,endY:zr,dragging:!0}),f.moveAnchorEnd($r,zr),vr.length>0&&!gt&&it&&(f.t=GO(function(){var Jr=$C(vr,2),wi=Jr[0],Ei=Jr[1];te.translate(wi,Ei);var Ma=f.state,ts=Ma.endX,ns=Ma.endY;f.setState({endX:ts-wi,endY:ns-Ei}),f.moveAnchorEnd(ts-wi,ns-Ei)})),be.emit(jn.ANCHOR_DRAG,{data:ee,e:w,nodeModel:F})}),nc(tc(f),"onDragEnd",function(m){var w=m.event;f.t&&My(f.t);var M=f.checkEnd(w);f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var D=f.props,F=D.graphModel,ee=D.nodeModel,te=D.anchorData;F.eventCenter.emit(jn.ANCHOR_DRAGEND,{data:te,e:w,nodeModel:ee,edgeModel:M})}),nc(tc(f),"checkEnd",function(m){var w=f.props,M=w.graphModel,D=w.nodeModel,F=w.anchorData,ee=F.x,te=F.y,be=F.id,ke=(M.edgeType,f.state),Ie=ke.endX,at=ke.endY,it=ke.dragging,gt=tf({x:Ie,y:at},M);if(f.preTargetNode&&f.preTargetNode.state!==Zr.DEFAULT&&f.preTargetNode.setElementState(Zr.DEFAULT),it&&gt&&gt.node){var Ft=gt.node,gn=gt.anchor.id,mn="".concat(D.id,"_").concat(Ft.id,"_").concat(gn,"_").concat(be),qn=f.sourceRuleResults.get(mn)||{},hn=qn.isAllPass,Fn=qn.msg,Sn=f.targetRuleResults.get(mn)||{},$r=Sn.isAllPass,zr=Sn.msg;if(hn&&$r){Ft.setElementState(Zr.DEFAULT);var vr=M.edgeGenerator(D.getData(),M.getNodeModelById(gt.node.id).getData()),Jr=M.addEdge(sm(sm({},vr),{},{sourceNodeId:D.id,sourceAnchorId:be,startPoint:{x:ee,y:te},targetNodeId:gt.node.id,targetAnchorId:gt.anchor.id,endPoint:{x:gt.anchor.x,y:gt.anchor.y}})),wi=f.props.anchorData;return M.eventCenter.emit(jn.ANCHOR_DROP,{data:wi,e:m,nodeModel:D,edgeModel:Jr}),Jr}var Ei=Ft.getData();return M.eventCenter.emit(jn.CONNECTION_NOT_ALLOWED,{data:Ei,msg:zr||Fn||"不允许添加连线"}),null}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new ye({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return o=v,(l=[{key:"getAnchorShape",value:function(){var f=this.props,m=f.anchorData,w=f.style,M=f.node.getAnchorShape(m);if(M)return M;var D=m.x,F=m.y,ee=sm(sm({},w),w.hover);return Object(Ve.g)("g",null,Object(Ve.g)(Fh,lm({className:"lf-node-anchor-hover"},ee,{x:D,y:F})),Object(Ve.g)(Fh,lm({className:"lf-node-anchor"},w,{x:D,y:F})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var f=this.props,m=f.graphModel,w=m.getAnchorIncomingEdge,M=m.getAnchorOutcomingEdge,D=f.anchorData.id;return{incomingEdgeList:w(D),outcomingEdgeList:M(D)}}},{key:"moveAnchorEnd",value:function(f,m){var w=this.props,M=w.graphModel,D=w.nodeModel,F=w.anchorData,ee=tf({x:f,y:m},M);if(ee){var te=ee.node,be=ee.anchor.id;if(this.preTargetNode&&this.preTargetNode!==ee.node&&this.preTargetNode.setElementState(Zr.DEFAULT),F.id===be)return;this.preTargetNode=te;var ke="".concat(D.id,"_").concat(te.id,"_").concat(be,"_").concat(F.id);if(!this.targetRuleResults.has(ke)){var Ie=ee.anchor,at=D.isAllowConnectedAsSource(te,F,Ie),it=te.isAllowConnectedAsTarget(D,F,Ie);this.sourceRuleResults.set(ke,Yl(at)),this.targetRuleResults.set(ke,Yl(it))}var gt=this.sourceRuleResults.get(ke).isAllPass,Ft=this.targetRuleResults.get(ke).isAllPass;gt&&Ft?te.setElementState(Zr.ALLOW_CONNECT):te.setElementState(Zr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Zr.DEFAULT&&this.preTargetNode.setElementState(Zr.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,m=f.startX,w=f.startY,M=f.endX,D=f.endY;return ll(m,w,M,D)>10}},{key:"render",value:function(){var f=this,m=this.state,w=m.startX,M=m.startY,D=m.endX,F=m.endY,ee=this.props,te=ee.anchorData.edgeAddable,be=ee.edgeStyle;return Object(Ve.g)("g",{className:"lf-anchor"},Object(Ve.g)("g",{onMouseDown:function(ke){te!==!1&&f.dragHandler.handleMouseDown(ke)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(sm({sourcePoint:{x:w,y:M},targetPoint:{x:D,y:F}},be)):Object(Ve.g)(Lh,lm({x1:w,y1:M,x2:D,y2:F},be,{"pointer-events":"none"}))))}}])&&FC(o.prototype,l),v}(Ve.a);function HO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function GC(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?HO(Object(l),!0).forEach(function(u){zC(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):HO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function zC(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Qb(i){return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Qb(i)}function WC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return XO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return XO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function XO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function qO(i){var o=i.x,l=o===void 0?0:o,u=i.y,v=u===void 0?0:u,f=i.value,m=i.fontSize,w=i.fill,M=w===void 0?"currentColor":w,D=i.overflowMode,F=D===void 0?"default":D,ee=i.textWidth,te=ee===void 0?"":ee,be=i.model,ke={textAnchor:"middle","dominant-baseline":"middle",x:l,y:v,fill:M};if(Object.entries(i).forEach(function(gn){var mn=WC(gn,2),qn=mn[0],hn=mn[1];Qb(hn)!=="object"&&(ke[qn]=hn)}),f){var Ie=String(f).split(/[\r\n]/g),at=Ie.length;if(F!=="default"){var it=be.BaseType,gt=be.modelType;if(it===co.NODE&&gt!==Mr.TEXT_NODE||it===co.EDGE&&te)return function(gn){var mn=gn.value,qn=gn.fontSize,hn=gn.model,Fn=gn.fontFamily,Sn=Fn===void 0?"":Fn,$r=gn.lineHeight,zr=gn.wrapPadding,vr=zr===void 0?"0, 0":zr,Jr=gn.overflowMode,wi=gn.x,Ei=gn.y,Ma=hn.width,ts=hn.textHeight,ns=gn.textWidth||Ma,ic=String(mn).split(/[\r\n]/g),$p=ic.length,eg=lf({rows:ic,style:{fontSize:"".concat(qn,"px"),width:"".concat(ns,"px"),fontFamily:Sn,lineHeight:$r,padding:vr},rowsLength:$p,className:"lf-get-text-height"}),Fp=hn.height>eg?hn.height:eg;ts&&(Fp=ts);var Dd=Jr==="ellipsis";return Dd&&(Fp=qn+2),Object(Ve.g)("g",null,Object(Ve.g)("foreignObject",{width:ns,height:Fp,x:wi-ns/2,y:Ei-Fp/2},Object(Ve.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:Fp,width:ns,padding:vr}},Object(Ve.g)("div",{className:Dd?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Dd?ic.join(""):"",style:GC({},gn)},ic.map(function(jd){return Object(Ve.g)("div",{className:"lf-node-text--auto-wrap-inner"},jd)})))))}(i)}if(at>1){var Ft=Ie.map(function(gn,mn){var qn=(mn-(at-1)/2)*(m+2);return Object(Ve.g)("tspan",{className:"lf-text-tspan",x:l,y:v+qn},gn)});return Object(Ve.g)("text",ke,Ft)}return Object(Ve.g)("text",ke,f)}}function e0(i){return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e0(i)}function t0(){return t0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},t0.apply(this,arguments)}function HC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return YO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return YO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function YO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function XC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function n0(i,o){return n0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},n0(i,o)}function qC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ny(i);if(o){var v=Ny(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return YC(this,l)}}function YC(i,o){if(o&&(e0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rd(i)}function Rd(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ny(i){return Ny=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ny(i)}function Dp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var KO=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&n0(f,m)})(v,i);var o,l,u=qC(v);function v(f){var m;(function(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")})(this,v),Dp(Rd(m=u.call(this)),"dragHandler",void 0),Dp(Rd(m),"sumDeltaX",0),Dp(Rd(m),"sumDeltaY",0),Dp(Rd(m),"stepDrag",void 0),Dp(Rd(m),"onDragging",function(M){var D=M.deltaX,F=M.deltaY,ee=m.props,te=ee.model,be=HC(ee.graphModel.transformModel.fixDeltaXY(D,F),2),ke=be[0],Ie=be[1];te.moveText(ke,Ie)}),Dp(Rd(m),"dblClickHandler",function(){m.props.editable&&m.props.model.setElementState(Zr.TEXT_EDIT)}),Dp(Rd(m),"mouseDownHandle",function(M){var D=m.props,F=D.draggable,ee=D.model,te=D.graphModel.editConfigModel.nodeTextDraggable;(F||te)&&(m.stepDrag.model=ee,m.stepDrag.handleMouseDown(M))}),f.model;var w=f.draggable;return m.stepDrag=new ye({onDragging:m.onDragging,step:1,isStopPropagation:w}),m}return o=v,(l=[{key:"getShape",value:function(){var f=this.props,m=f.model,w=f.graphModel,M=m.text,D=w.editConfigModel,F=M.value,ee=M.x,te=M.y,be=M.editable,ke=M.draggable,Ie={x:ee,y:te,className:"",value:F};be?Ie.className="lf-element-text":ke||D.nodeTextDraggable?Ie.className="lf-text-draggable":Ie.className="lf-text-disabled";var at=m.getTextStyle();return Object(Ve.g)(qO,t0({},Ie,at,{model:m}))}},{key:"render",value:function(){if(this.props.model.text)return Object(Ve.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&XC(o.prototype,l),v}(Ve.a),KC=Gs(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,ZO=r(130);function r0(i){return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},r0(i)}function o0(){return o0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},o0.apply(this,arguments)}function ZC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function i0(i,o){return i0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},i0(i,o)}function JC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Py(i);if(o){var v=Py(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return QC(this,l)}}function QC(i,o){if(o&&(r0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yh(i)}function Yh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Py(i){return Py=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Py(i)}function um(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var e3=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&i0(f,m)})(v,i);var o,l,u=JC(v);function v(f){var m;return function(w,M){if(!(w instanceof M))throw new TypeError("Cannot call a class as a function")}(this,v),um(Yh(m=u.call(this,f)),"style",{}),um(Yh(m),"defaultAngle",void 0),um(Yh(m),"normal",void 0),um(Yh(m),"stepperDrag",void 0),um(Yh(m),"onDragging",function(w){var M,D=w.event,F=m.props,ee=F.graphModel,te=F.nodeModel,be=F.eventCenter,ke=ee.selectNodes,Ie=te.x,at=te.y,it=D.clientX,gt=D.clientY,Ft=ee.getPointByClient({x:it,y:gt}).canvasOverlayPosition,gn=Ft.x,mn=Ft.y,qn=new We(gn-Ie,mn-at),hn=((M=m.normal)===null||M===void 0?void 0:M.angle(qn))-m.defaultAngle,Fn=new Md(-Ie,-at).rotate(hn).translate(Ie,at).toString();te.transform=Fn,te.rotate=hn;var Sn=Object(ZO.map)(ke,function(zr){return zr.id});Sn.indexOf(te.id)===-1&&(Sn=[te.id]);var $r=Object(ZO.reduce)(Sn,function(zr,vr){var Jr=ee.getNodeModelById(vr);return zr[vr]=Jr==null?void 0:Jr.getMoveDistance(0,0,!1),zr},{});Sn.forEach(function(zr){ee.getNodeEdges(zr).forEach(function(vr){if($r[vr.sourceNodeId]){var Jr=ee.getNodeModelById(vr.sourceNodeId).anchors.find(function(Ei){return Ei.id===vr.sourceAnchorId});vr.updateStartPoint(Jr)}if($r[vr.targetNodeId]){var wi=ee.getNodeModelById(vr.targetNodeId).anchors.find(function(Ei){return Ei.id===vr.targetAnchorId});vr.updateEndPoint(wi)}})}),be.emit(jn.NODE_ROTATE,{e:D,nodeModel:te})}),m.style=f.style,m.stepperDrag=new ye({onDragging:m.onDragging}),m}return o=v,(l=[{key:"render",value:function(){var f=this,m=this.props.nodeModel,w=m.x,M=m.y,D=w+m.width/2+20,F=M-m.height/2-20;return this.normal=new We(1,0),this.defaultAngle=this.normal.angle(new We(D-w,F-M)),m.defaultAngle=this.defaultAngle,Object(Ve.g)("g",{className:"lf-rotate-control"},Object(Ve.g)("g",{onMouseDown:function(ee){f.stepperDrag.handleMouseDown(ee)}},Object(Ve.g)(Fh,o0({},this.style,{cx:D,cy:F}))))}}])&&ZC(o.prototype,l),v}(Ve.a);function a0(i){return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},a0(i)}var t3=["className"];function Ry(){return Ry=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},Ry.apply(this,arguments)}function n3(i,o){if(i==null)return{};var l,u,v=function(m,w){if(m==null)return{};var M,D,F={},ee=Object.keys(m);for(D=0;D<ee.length;D++)M=ee[D],w.indexOf(M)>=0||(F[M]=m[M]);return F}(i,o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(u=0;u<f.length;u++)l=f[u],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(v[l]=i[l])}return v}function Cy(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return JO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return JO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function JO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function QO(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function l0(i,o){return l0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l0(i,o)}function r3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Dy(i);if(o){var v=Dy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return o3(this,l)}}function o3(i,o){if(o&&(a0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ia(i)}function ia(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Dy(i){return Dy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Dy(i)}function pa(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var wf=function(i){(function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),w&&l0(m,w)})(f,i);var o,l,u,v=r3(f);function f(m){var w;(function(te,be){if(!(te instanceof be))throw new TypeError("Cannot call a class as a function")})(this,f),pa(ia(w=v.call(this)),"t",void 0),pa(ia(w),"moveOffset",void 0),pa(ia(w),"stepDrag",void 0),pa(ia(w),"contextMenuTime",void 0),pa(ia(w),"mouseUpDrag",void 0),pa(ia(w),"startTime",void 0),pa(ia(w),"clickTimer",void 0),pa(ia(w),"modelDisposer",void 0),pa(ia(w),"onDragStart",function(te){var be=te.event,ke=be.clientX,Ie=be.clientY,at=w.props,it=at.model,gt=at.graphModel.getPointByClient({x:ke,y:Ie}).canvasOverlayPosition,Ft=gt.x,gn=gt.y;w.moveOffset={x:it.x-Ft,y:it.y-gn}}),pa(ia(w),"onDragging",function(te){var be=te.event,ke=w.props,Ie=ke.model,at=ke.graphModel,it=at.editConfigModel,gt=it.stopMoveGraph,Ft=it.autoExpand,gn=at.transformModel,mn=at.selectNodes,qn=at.width,hn=at.height,Fn=at.gridSize;Ie.isDragging=!0;var Sn=be.clientX,$r=be.clientY,zr=at.getPointByClient({x:Sn,y:$r}).canvasOverlayPosition,vr=zr.x,Jr=zr.y,wi=Cy(gn.CanvasPointToHtmlPoint([vr,Jr]),2),Ei=wi[0],Ma=wi[1];if(vr+=w.moveOffset.x,Jr+=w.moveOffset.y,vr=rl(vr,Fn),Jr=rl(Jr,Fn),qn&&hn){if(!Ft||gt||!(Ei<0||Ma<0||Ei>qn||Ma>hn)){var ts=Cy(gn.CanvasPointToHtmlPoint([vr-Ie.width/2,Jr-Ie.height/2]),2),ns=ts[0],ic=ts[1],$p=Cy(gn.CanvasPointToHtmlPoint([vr+Ie.width/2,Jr+Ie.height/2]),2),eg=$p[0],Fp=$p[1],Dd=Math.max(Fn,20),jd=[];ns<0?jd=[Dd,0]:eg>at.width?jd=[-Dd,0]:ic<0?jd=[0,Dd]:Fp>at.height&&(jd=[0,-Dd]),w.t&&My(w.t);var UD=new Md(-vr,-Jr).rotate(Ie.rotate).translate(vr,Jr).toString();Ie.transform=UD;var tg=mn.map(function(ng){return ng.id});tg.indexOf(Ie.id)===-1&&(tg=[Ie.id]),jd.length>0&&!gt&&Ft?w.t=GO(function(){var ng=Cy(jd,2),CS=ng[0],DS=ng[1];gn.translate(CS,DS);var VD=-CS/gn.SCALE_X,GD=-DS/gn.SCALE_X;at.moveNodes(tg,VD,GD)}):at.moveNodes(tg,vr-Ie.x,Jr-Ie.y)}}else at.moveNode2Coordinate(Ie.id,vr,Jr)}),pa(ia(w),"onDragEnd",function(){w.t&&My(w.t),w.props.model.isDragging=!1}),pa(ia(w),"handleMouseUp",function(){var te=w.props.model;w.mouseUpDrag=te.isDragging}),pa(ia(w),"handleClick",function(te){var be=w.mouseUpDrag===!1;if(w.startTime){var ke=w.props,Ie=ke.model,at=ke.graphModel;if(be){var it={data:Ie.getData(),e:te,position:at.getPointByClient({x:te.clientX,y:te.clientY}),isSelected:!1,isMultiple:!1},gt=te.button===2,Ft=te.detail===2;if(!gt){var gn=at.editConfigModel,mn=Wu(te,gn);it.isMultiple=mn,Ie.isSelected&&!Ft&&mn?(it.isSelected=!1,Ie.setSelected(!1)):(at.selectNodeById(Ie.id,mn),it.isSelected=!0,w.toFront()),Ft?(gn.nodeTextEdit&&Ie.text.editable&&(Ie.setSelected(!1),at.setElementStateById(Ie.id,Zr.TEXT_EDIT)),at.eventCenter.emit(jn.NODE_DBCLICK,it)):(at.eventCenter.emit(jn.ELEMENT_CLICK,it),at.eventCenter.emit(jn.NODE_CLICK,it))}}}}),pa(ia(w),"handleContextMenu",function(te){te.preventDefault();var be=w.props,ke=be.model,Ie=be.graphModel,at=ke.getData(),it=Ie.getPointByClient({x:te.clientX,y:te.clientY});Ie.setElementStateById(ke.id,Zr.SHOW_MENU,it.domOverlayPosition),ke.isSelected||Ie.selectNodeById(ke.id),Ie.eventCenter.emit(jn.NODE_CONTEXTMENU,{data:at,e:te,position:it}),w.toFront()}),pa(ia(w),"handleMouseDown",function(te){var be=w.props,ke=be.model,Ie=be.graphModel;w.startTime=new Date().getTime(),Ie.editConfigModel.adjustNodePosition&&ke.draggable&&w.stepDrag&&w.stepDrag.handleMouseDown(te)}),pa(ia(w),"setHoverON",function(te){var be=w.props,ke=be.model,Ie=be.graphModel;if(!ke.isHovered){var at=ke.getData();ke.setHovered(!0),Ie.eventCenter.emit(jn.NODE_MOUSEENTER,{data:at,e:te})}}),pa(ia(w),"setHoverOFF",function(te){var be=w.props,ke=be.model,Ie=be.graphModel,at=ke.getData();ke.isHovered&&(ke.setHovered(!1),Ie.eventCenter.emit(jn.NODE_MOUSELEAVE,{data:at,e:te}))}),pa(ia(w),"onMouseOut",function(te){KC&&w.setHoverOFF(te)});var M=m.graphModel,D=M.gridSize,F=M.eventCenter,ee=m.model;return w.stepDrag=new ye({onDragStart:w.onDragStart,onDragging:w.onDragging,onDragEnd:w.onDragEnd,step:D,eventType:"NODE",isStopPropagation:!1,eventCenter:F,model:ee}),w.modelDisposer=Object(c.F)(function(){return w.props},function(te){te&&te.model&&w.stepDrag.setModel(te.model)}),w}return o=f,u=[{key:"getModel",value:function(m){return m}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(m){return null}},{key:"getAnchors",value:function(){var m=this,w=this.props,M=w.model,D=w.graphModel,F=M.isSelected,ee=M.isHitable,te=M.isDragging,be=M.isShowAnchor;return ee&&(F||be)&&!te?Kf(M.anchors,function(ke,Ie){var at=M.getAnchorLineStyle(ke),it=M.getAnchorStyle(ke);return Object(Ve.g)(VC,{anchorData:ke,node:m,style:it,edgeStyle:at,anchorIndex:Ie,nodeModel:M,graphModel:D,setHoverOFF:m.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var m=this.props,w=m.model,M=m.graphModel,D=w.isSelected,F=w.isHitable,ee=w.enableRotate,te=w.isHovered,be=w.getRotateControlStyle().style;if(F&&(D||te)&&ee)return Object(Ve.g)(e3,{graphModel:M,nodeModel:w,eventCenter:M.eventCenter,style:be})}},{key:"getText",value:function(){var m=this.props,w=m.model,M=m.graphModel;if(w.state===Zr.TEXT_EDIT)return"";if(w.text){var D=M.editConfigModel,F=!1;return(w.text.draggable||D.nodeTextDraggable)&&(F=!0),Object(Ve.g)(KO,{editable:D.nodeTextEdit&&w.text.editable,model:w,graphModel:M,draggable:F})}}},{key:"getStateClassName",value:function(){var m=this.props.model,w=m.state,M=m.isDragging,D=m.isSelected,F="lf-node";switch(w){case Zr.ALLOW_CONNECT:F+=" lf-node-allow";break;case Zr.NOT_ALLOW_CONNECT:F+=" lf-node-not-allow";break;default:F+=" lf-node-default"}return M&&(F+=" lf-isDragging"),D&&(F+=" lf-node-selected"),F}},{key:"toFront",value:function(){var m=this.props,w=m.model,M=m.graphModel;w.autoToFront&&M.toFront(w.id)}},{key:"render",value:function(){var m,w=this.props,M=w.model,D=w.graphModel,F=D.editConfigModel,ee=F.hideAnchors,te=F.adjustNodePosition,be=F.allowRotation,ke=D.gridSize,Ie=D.transformModel.SCALE_X,at=M.isHitable,it=M.draggable,gt=M.transform,Ft=M.getOuterGAttributes(),gn=Ft.className,mn=gn===void 0?"":gn,qn=n3(Ft,t3),hn=Object(Ve.g)("g",{className:"lf-node-content"},Object(Ve.g)("g",{transform:gt},this.getShape(),this.getText(),be&&this.getRotateControl()),!ee&&this.getAnchors());return at?(te&&it&&this.stepDrag.setStep(ke*Ie),m=Object(Ve.g)("g",Ry({className:"".concat(this.getStateClassName()," ").concat(mn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},qn),hn)):m=Object(Ve.g)("g",Ry({className:"".concat(this.getStateClassName()," ").concat(mn)},qn),hn),m}}])&&QO(o.prototype,l),u&&QO(o,u),f}(Ve.a);function s0(i){return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},s0(i)}function u0(){return u0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},u0.apply(this,arguments)}function i3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function a3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function c0(i,o){return c0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},c0(i,o)}function l3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=jy(i);if(o){var v=jy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return s3(this,l)}}function s3(i,o){if(o&&(s0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function jy(i){return jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},jy(i)}var f0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&c0(f,m)})(v,i);var o,l,u=l3(v);function v(){return i3(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"getShape",value:function(){var f=this.props.model,m=f.getNodeStyle();return Object(Ve.g)(kd,u0({},m,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&a3(o.prototype,l),v}(wf);function d0(i){return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},d0(i)}function p0(){return p0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},p0.apply(this,arguments)}function u3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function c3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function h0(i,o){return h0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},h0(i,o)}function f3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Iy(i);if(o){var v=Iy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return d3(this,l)}}function d3(i,o){if(o&&(d0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Iy(i){return Iy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Iy(i)}var v0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&h0(f,m)})(v,i);var o,l,u=f3(v);function v(){return u3(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"getShape",value:function(){var f=this.props.model,m=f.x,w=f.y,M=f.r,D=f.getNodeStyle();return Object(Ve.g)(Fh,p0({},D,{x:m,y:w,r:M}))}}])&&c3(o.prototype,l),v}(wf);function m0(i){return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},m0(i)}function p3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return eS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return eS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function eS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function tS(i){var o=i.points,l=i.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(i).forEach(function(v){var f=p3(v,2),m=f[0],w=f[1];m0(w)!=="object"&&(u[m]=w)}),u.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",u.points=o.map(function(v){return v.join(",")}).join(" "),Object(Ve.g)("polygon",u)}function y0(i){return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},y0(i)}function g0(){return g0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},g0.apply(this,arguments)}function h3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function v3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function _0(i,o){return _0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},_0(i,o)}function m3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ly(i);if(o){var v=Ly(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return y3(this,l)}}function y3(i,o){if(o&&(y0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Ly(i){return Ly=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ly(i)}var b0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&_0(f,m)})(v,i);var o,l,u=m3(v);function v(){return h3(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"getShape",value:function(){var f=this.props.model,m=f.x,w=f.y,M=f.width,D=f.height,F=f.points,ee=f.getNodeStyle(),te={transform:"matrix(1 0 0 1 ".concat(m-M/2," ").concat(w-D/2,")")};return Object(Ve.g)("g",te,Object(Ve.g)(tS,g0({},ee,{points:F,x:m,y:w})))}}])&&v3(o.prototype,l),v}(wf);function w0(i){return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},w0(i)}function E0(){return E0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},E0.apply(this,arguments)}function g3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function O0(i,o){return O0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},O0(i,o)}function b3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$y(i);if(o){var v=$y(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return w3(this,l)}}function w3(i,o){if(o&&(w0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function $y(i){return $y=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},$y(i)}var S0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&O0(f,m)})(v,i);var o,l,u=b3(v);function v(){return g3(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"getShape",value:function(){var f=this.props.model,m=f.getNodeStyle();return Object(Ve.g)("g",null,Object(Ve.g)(tS,E0({},m,{points:f.points,x:f.x,y:f.y})))}}])&&_3(o.prototype,l),v}(wf);function x0(i){return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},x0(i)}function E3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return nS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return nS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function O3(i){var o=i.x,l=o===void 0?0:o,u=i.y,v=u===void 0?0:u,f=i.rx,m=f===void 0?4:f,w=i.ry,M=w===void 0?4:w,D=i.className,F={cx:l,cy:v,rx:m,ry:M,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(ee){var te=E3(ee,2),be=te[0],ke=te[1];x0(ke)!=="object"&&(F[be]=ke)}),F.className=D?"lf-basic-shape ".concat(D):"lf-basic-shape",Object(Ve.g)("ellipse",F)}function A0(i){return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},A0(i)}function T0(){return T0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},T0.apply(this,arguments)}function S3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function x3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function M0(i,o){return M0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},M0(i,o)}function A3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fy(i);if(o){var v=Fy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return T3(this,l)}}function T3(i,o){if(o&&(A0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Fy(i){return Fy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Fy(i)}var k0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&M0(f,m)})(v,i);var o,l,u=A3(v);function v(){return S3(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"getShape",value:function(){var f=this.props.model,m=f.getNodeStyle();return Object(Ve.g)(O3,T0({},m,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&x3(o.prototype,l),v}(wf);function N0(i){return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},N0(i)}function rS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function oS(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?rS(Object(l),!0).forEach(function(u){M3(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):rS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function M3(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function k3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function N3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function P0(i,o){return P0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},P0(i,o)}function P3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=By(i);if(o){var v=By(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return R3(this,l)}}function R3(i,o){if(o&&(N0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function By(i){return By=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},By(i)}var R0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&P0(f,m)})(v,i);var o,l,u=P3(v);function v(){return k3(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"getBackground",value:function(){var f=this.props.model,m=f.getTextStyle(),w=f.width,M=f.height,D=f.x,F=f.y,ee=oS(oS({},m.background),{},{x:D,y:F-1,width:w,height:M});return Object(Ve.g)(kd,ee)}},{key:"getShape",value:function(){return Object(Ve.g)("g",null,this.getBackground())}}])&&N3(o.prototype,l),v}(wf);function C0(i){return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},C0(i)}function D0(){return D0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},D0.apply(this,arguments)}function C3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function D3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function j0(i,o){return j0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},j0(i,o)}function j3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Uy(i);if(o){var v=Uy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return I3(this,l)}}function I3(i,o){if(o&&(C0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cm(i)}function cm(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Uy(i){return Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Uy(i)}function Vy(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var I0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&j0(f,m)})(v,i);var o,l,u=j3(v);function v(){var f;C3(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return Vy(cm(f=u.call.apply(u,[this].concat(w))),"ref",void 0),Vy(cm(f),"currentProperties",void 0),Vy(cm(f),"preProperties",void 0),Vy(cm(f),"setRef",function(D){f.ref=D}),f}return o=v,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,m=f.x,w=f.y,M=f.height,D=f.width,F=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(Ve.g)("foreignObject",D0({},F,{x:m-D/2,y:w-M/2,width:D,height:M,ref:this.setRef}))}}])&&D3(o.prototype,l),v}(wf);function L0(i){return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},L0(i)}function $0(){return $0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},$0.apply(this,arguments)}function iS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function jp(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?iS(Object(l),!0).forEach(function(u){U0(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):iS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function L3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function F0(i,o){return F0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},F0(i,o)}function $3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Gy(i);if(o){var v=Gy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return F3(this,l)}}function F3(i,o){if(o&&(L0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B0(i)}function B0(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Gy(i){return Gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Gy(i)}function U0(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var B3=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&F0(f,m)})(v,i);var o,l,u=$3(v);function v(f){var m;return function(w,M){if(!(w instanceof M))throw new TypeError("Cannot call a class as a function")}(this,v),U0(B0(m=u.call(this,f)),"setHoverON",function(){m.setState({isHovered:!0})}),U0(B0(m),"setHoverOFF",function(){m.setState({isHovered:!1})}),m.state={isHovered:!1},m}return o=v,(l=[{key:"getBackground",value:function(){var f=this.props.model,m=f.getTextStyle(),w=f.text,M=f.width,D=m.background||{};if(this.state.isHovered&&m.hover&&m.hover.background&&(D=jp(jp({},D),m.hover.background)),w&&w.value&&D.fill!=="transparent"){var F,ee=m.fontSize,te=m.overflowMode,be=m.lineHeight,ke=m.wrapPadding,Ie=m.textWidth,at=w.value,it=w.x,gt=w.y,Ft=String(at).split(/[\r\n]/g),gn=Ft.length;if(te==="autoWrap"&&Ie){var mn=lf({rows:Ft,style:{fontSize:"".concat(ee,"px"),width:"".concat(Ie,"px"),lineHeight:be,padding:ke},rowsLength:gn,className:"lf-get-text-height"});F=jp(jp({},D),{},{x:it-1,y:gt-1,width:Ie,height:mn})}else{Ft&&Ft.forEach(function($r){Fo($r)});var qn=lu({rows:Ft,fontSize:ee,rowsLength:gn}),hn=qn.width,Fn=qn.height;if(te==="ellipsis"&&(hn=Ie||M,Fn=ee+2),typeof D.wrapPadding=="string"){var Sn=D.wrapPadding.split(",").filter(function($r){return $r.trim()}).map(function($r){return parseFloat($r.trim())});Sn.length>0&&Sn.length<=4&&(Sn.length===1?Sn=[Sn[0],Sn[0],Sn[0],Sn[0]]:Sn.length===2?Sn=[Sn[0],Sn[1],Sn[0],Sn[1]]:Sn.length===3&&(Sn=[Sn[0],Sn[1],Sn[2],Sn[1]]),hn+=Sn[1]+Sn[3],Fn+=Sn[0]+Sn[2],it+=(Sn[1]-Sn[3])/2,gt+=(Sn[2]-Sn[0])/2)}F=jp(jp({},D),{},{x:it-1,y:gt-1,width:hn,height:Fn})}return Object(Ve.g)(kd,F)}}},{key:"getShape",value:function(){var f=this.props.model,m=f.text,w=m.value,M=m.x,D=m.y;if(w){var F=jp({x:M,y:D,className:"lf-element-text",value:w},f.getTextStyle());return Object(Ve.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Ve.g)(qO,$0({},F,{model:f})))}}}])&&L3(o.prototype,l),v}(KO);function V0(i){return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},V0(i)}var rc,U3=["text","sourceAnchorId","targetAnchorId"];function aS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function Ef(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?aS(Object(l),!0).forEach(function(u){es(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):aS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function V3(i,o){if(i==null)return{};var l,u,v=function(m,w){if(m==null)return{};var M,D,F={},ee=Object.keys(m);for(D=0;D<ee.length;D++)M=ee[D],w.indexOf(M)>=0||(F[M]=m[M]);return F}(i,o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(u=0;u<f.length;u++)l=f[u],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(v[l]=i[l])}return v}function G3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return lS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return lS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function z3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function G0(i,o){return G0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},G0(i,o)}function W3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=zy(i);if(o){var v=zy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return H3(this,l)}}function H3(i,o){if(o&&(V0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ql(i)}function Ql(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function zy(i){return zy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},zy(i)}function es(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(rc||(rc={}));var sS=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&G0(f,m)})(v,i);var o,l,u=W3(v);function v(f){var m;(function(F,ee){if(!(F instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,v),es(Ql(m=u.call(this)),"stepDragData",void 0),es(Ql(m),"stepDrag",void 0),es(Ql(m),"oldEdge",void 0),es(Ql(m),"preTargetNode",void 0),es(Ql(m),"targetRuleResults",void 0),es(Ql(m),"sourceRuleResults",void 0),es(Ql(m),"handleMouseDown",function(F){m.stepDrag&&m.stepDrag.handleMouseDown(F)}),es(Ql(m),"onDragStart",function(){var F=m.props,ee=F.x,te=F.y,be=F.edgeModel,ke=be.startPoint,Ie=be.endPoint,at=be.pointsList;m.oldEdge={startPoint:ke,endPoint:Ie,pointsList:at},m.setState({endX:ee,endY:te,dragging:!0})}),es(Ql(m),"onDragging",function(F){var ee=F.deltaX,te=F.deltaY,be=m.state,ke=be.endX,Ie=be.endY,at=m.props,it=at.graphModel,gt=at.type,Ft=it.transformModel,gn=it.editConfigModel,mn=G3(Ft.moveCanvasPointByHtml([ke,Ie],ee,te),2),qn=mn[0],hn=mn[1];m.setState({endX:qn,endY:hn,dragging:!0});var Fn=m.props.edgeModel,Sn=tf({x:ke,y:Ie},it);if(Sn&&Sn.node&&m.isAllowAdjust(Sn).pass){var $r,zr=Fn.startPoint,vr=Fn.endPoint,Jr=Fn.sourceNode,wi=Fn.targetNode;gt===rc.SOURCE?$r={startPoint:{x:Sn.anchor.x,y:Sn.anchor.y},endPoint:{x:vr.x,y:vr.y},sourceNode:Sn.node,targetNode:wi}:gt===rc.TARGET&&($r={startPoint:{x:zr.x,y:zr.y},endPoint:{x:Sn.anchor.x,y:Sn.anchor.y},sourceNode:Jr,targetNode:Sn.node}),Fn.updateAfterAdjustStartAndEnd($r)}else gt===rc.SOURCE?Fn.updateStartPoint({x:qn,y:hn}):gt===rc.TARGET&&Fn.updateEndPoint({x:qn,y:hn});Fn.text.value&&gn.adjustEdge&&Fn.setText(Object.assign({},Fn.text,Fn.textPosition))}),es(Ql(m),"onDragEnd",function(F){var ee=F.event;try{var te;m.setState({dragging:!1});var be=m.props,ke=be.graphModel,Ie=be.edgeModel,at=be.type,it=m.state,gt=it.endX,Ft=it.endY,gn=it.dragging,mn=tf({x:gt,y:Ft},ke);if(!gn)return;var qn,hn=!1;if(mn&&mn.node){var Fn=m.isAllowAdjust(mn),Sn=Fn.pass,$r=Fn.msg,zr=Fn.newTargetNode;if(Sn){var vr=Ie.getData(),Jr=vr.text,wi=vr.sourceAnchorId,Ei=wi===void 0?"":wi,Ma=vr.targetAnchorId;qn=Ef(Ef({sourceAnchorId:Ei,targetAnchorId:Ma===void 0?"":Ma},V3(vr,U3)),{},{text:(Jr==null?void 0:Jr.value)||""}),at===rc.SOURCE?(qn=Ef(Ef({},ke.edgeGenerator(ke.getNodeModelById(mn.node.id).getData(),ke.getNodeModelById(Ie.targetNodeId).getData(),qn)),{},{sourceNodeId:mn.node.id,sourceAnchorId:mn.anchor.id,startPoint:{x:mn.anchor.x,y:mn.anchor.y},targetNodeId:Ie.targetNodeId,endPoint:Ef({},Ie.endPoint)}),Ie.sourceNodeId===mn.node.id&&Ie.sourceAnchorId===mn.anchor.id&&(hn=!0)):at===rc.TARGET&&(qn=Ef(Ef({},ke.edgeGenerator(ke.getNodeModelById(Ie.sourceNodeId).getData(),ke.getNodeModelById(mn.node.id).getData(),qn)),{},{sourceNodeId:Ie.sourceNodeId,startPoint:Ef({},Ie.startPoint),targetNodeId:mn.node.id,targetAnchorId:mn.anchor.id,endPoint:{x:mn.anchor.x,y:mn.anchor.y}}),Ie.targetNodeId===mn.node.id&&Ie.targetAnchorId===mn.anchor.id&&(hn=!0))}else{hn=!0;var ts=zr.getData();ke.eventCenter.emit(jn.CONNECTION_NOT_ALLOWED,{data:ts,msg:$r})}}else hn=!0;if(hn)m.recoveryEdge();else{var ns=Ie.getData();ke.deleteEdgeById(Ie.id);var ic=ke.addEdge(Ef({},qn));ke.eventCenter.emit(jn.EDGE_EXCHANGE_NODE,{data:{newEdge:ic.getData(),oldEdge:ns}})}(te=m.preTargetNode)===null||te===void 0||te.setElementState(Zr.DEFAULT)}finally{m.props.graphModel.eventCenter.emit(jn.ADJUST_POINT_DRAGEND,{e:ee,data:m.stepDragData})}}),es(Ql(m),"recoveryEdge",function(){var F=m.props.edgeModel,ee=m.oldEdge,te=ee.startPoint,be=ee.endPoint,ke=ee.pointsList;F.updateStartPoint(te),F.updateEndPoint(be),F.modelType!==Mr.LINE_EDGE&&(F.pointsList=ke,F.initPoints())}),es(Ql(m),"getAdjustPointStyle",function(){var F=m.props,ee=F.graphModel.theme;return F.edgeModel,ee.edgeAdjust}),m.state={dragging:!1,endX:0,endY:0},m.targetRuleResults=new Map,m.sourceRuleResults=new Map;var w=f.type,M=f.edgeModel,D=f.graphModel.eventCenter;return m.stepDragData={type:w,edgeData:M.getData()},m.stepDrag=new ye({onDragStart:m.onDragStart,onDragging:m.onDragging,onDragEnd:m.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:D,data:m.stepDragData}),m}return o=v,(l=[{key:"isAllowAdjust",value:function(f){var m=this.props,w=m.edgeModel,M=w.id,D=w.sourceNode,F=w.targetNode,ee=w.sourceAnchorId,te=w.targetAnchorId,be=m.type,ke=null,Ie=null,at=null,it=null;if(be===rc.SOURCE?(ke=f.node,Ie=F,at=f.anchor,it=F.getAnchorInfo(te)):(ke=D,Ie=f.node,it=f.anchor,at=D.getAnchorInfo(ee)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(Zr.DEFAULT),this.preTargetNode=f.node,it.id===at.id)return{pass:!1,msg:"",newTargetNode:Ie};var gt="".concat(ke.id,"_").concat(Ie.id,"_").concat(at.id,"_").concat(it.id);if(!this.targetRuleResults.has(gt)){var Ft=ke.isAllowConnectedAsSource(Ie,at,it,M),gn=Ie.isAllowConnectedAsTarget(ke,at,it,M);this.sourceRuleResults.set(gt,Yl(Ft)),this.targetRuleResults.set(gt,Yl(gn))}var mn=this.sourceRuleResults.get(gt),qn=mn.isAllPass,hn=mn.msg,Fn=this.targetRuleResults.get(gt),Sn=Fn.isAllPass,$r=Fn.msg,zr=qn&&Sn?Zr.ALLOW_CONNECT:Zr.NOT_ALLOW_CONNECT;return be===rc.SOURCE?ke.setElementState(zr):Ie.setElementState(zr),{pass:qn&&Sn,msg:$r||hn,newTargetNode:Ie}}},{key:"render",value:function(){var f=this.props,m=f.x,w=f.y,M=f.getAdjustPointShape,D=f.edgeModel,F=this.state.dragging;return Object(Ve.g)("g",{pointerEvents:F?"none":"",onMouseDown:this.handleMouseDown},F?"":M(m,w,D))}}])&&z3(o.prototype,l),v}(Ve.a);function z0(i){return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},z0(i)}function fm(){return fm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},fm.apply(this,arguments)}function X3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return uS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return uS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function uS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function q3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Y3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function W0(i,o){return W0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},W0(i,o)}function K3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wy(i);if(o){var v=Wy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return Z3(this,l)}}function Z3(i,o){if(o&&(z0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yu(i)}function yu(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Wy(i){return Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Wy(i)}function oc(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var dm=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&W0(f,m)})(v,i);var o,l,u=K3(v);function v(){var f;q3(this,v);for(var m=arguments.length,w=new Array(m),M=0;M<m;M++)w[M]=arguments[M];return oc(yu(f=u.call.apply(u,[this].concat(w))),"startTime",void 0),oc(yu(f),"contextMenuTime",void 0),oc(yu(f),"clickTimer",void 0),oc(yu(f),"textRef",Object(Ve.f)()),oc(yu(f),"handleHover",function(D,F){var ee=f.props,te=ee.model,be=ee.graphModel.eventCenter;te.setHovered(D);var ke=D?jn.EDGE_MOUSEENTER:jn.EDGE_MOUSELEAVE,Ie=te.getData();be.emit(ke,{data:Ie,e:F})}),oc(yu(f),"setHoverON",function(D){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,D))}),oc(yu(f),"setHoverOFF",function(D){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,D))}),oc(yu(f),"handleContextMenu",function(D){D.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var F=f.props,ee=F.model,te=F.graphModel,be=te.getPointByClient({x:D.clientX,y:D.clientY});te.setElementStateById(ee.id,Zr.SHOW_MENU,be.domOverlayPosition),f.toFront(),ee.isSelected||te.selectEdgeById(ee.id);var ke=ee==null?void 0:ee.getData();te.eventCenter.emit(jn.EDGE_CONTEXTMENU,{data:ke,e:D,position:be})}),oc(yu(f),"handleMouseDown",function(D){D.stopPropagation(),f.startTime=new Date().getTime()}),oc(yu(f),"handleMouseUp",function(D){if(f.startTime&&!(new Date().getTime()-f.startTime>200||D.button===2)){var F=D.detail===2,ee=f.props,te=ee.model,be=ee.graphModel,ke=te==null?void 0:te.getData(),Ie=be.getPointByClient({x:D.clientX,y:D.clientY});if(F){var at=be.editConfigModel,it=be.textEditElement;if(it&&it.id===te.id&&be.setElementStateById(te.id,Zr.DEFAULT),at.edgeTextEdit&&te.text.editable&&be.setElementStateById(te.id,Zr.TEXT_EDIT),te.modelType===Mr.POLYLINE_EDGE){var gt=te,Ft=be.getPointByClient({x:D.x,y:D.y}).canvasOverlayPosition,gn=Ft.x,mn=Ft.y,qn=Nr({x:gn,y:mn},gt.points);gt.dbClickPosition=qn}be.eventCenter.emit(jn.EDGE_DBCLICK,{data:ke,e:D,position:Ie})}else be.eventCenter.emit(jn.ELEMENT_CLICK,{data:ke,e:D,position:Ie}),be.eventCenter.emit(jn.EDGE_CLICK,{data:ke,e:D,position:Ie});var hn=be.editConfigModel;be.selectEdgeById(te.id,Wu(D,hn)),f.toFront()}}),f}return o=v,(l=[{key:"getShape",value:function(){return Object(Ve.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,m=f.model,w=f.graphModel;if(m.state===Zr.TEXT_EDIT)return null;var M=!1,D=w.editConfigModel;return(m.text.draggable||D.edgeTextDraggable)&&(M=!0),Object(Ve.g)(B3,{ref:this.textRef,editable:D.edgeTextEdit&&m.text.editable,model:m,graphModel:w,draggable:M})}},{key:"getArrowInfo",value:function(){var f=this.props.model,m=f.startPoint,w=f.endPoint,M=f.isSelected;return{start:m,end:w,hover:this.state.hover,isSelected:M}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,m=f.id,w=f.getArrowStyle(),M=w.refY,D=M===void 0?0:M,F=w.refX,ee=F===void 0?2:F,te=X3(this.getLastTwoPoints(),2),be=te[0],ke=te[1],Ie="auto";return be!==null&&ke!==null&&(Ie=kp(Ad({x:ke.x-be.x,y:ke.y-be.y,z:0}))),Object(Ve.g)("g",null,Object(Ve.g)("defs",null,Object(Ve.g)("marker",{id:"marker-start-".concat(m),refX:-ee,refY:D,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Ve.g)("marker",{id:"marker-end-".concat(m),refX:ee,refY:D,overflow:"visible",orient:Ie,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object(Ve.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),m=f.stroke,w=f.strokeWidth,M=f.offset,D=f.verticalLength;return Object(Ve.g)("path",{stroke:m,fill:m,strokeWidth:w,transform:"rotate(180)",d:"M 0 0 L ".concat(M," -").concat(D," L ").concat(M," ").concat(D," Z")})}},{key:"getAdjustPointShape",value:function(f,m,w){var M=w.getAdjustPointStyle();return Object(Ve.g)(Fh,fm({className:"lf-edge-adjust-point"},M,{x:f,y:m}))}},{key:"getAdjustPoints",value:function(){var f=this.props,m=f.model,w=f.graphModel,M=m.getAdjustStart(),D=m.getAdjustEnd();return Object(Ve.g)("g",null,Object(Ve.g)(sS,fm({type:"SOURCE"},M,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:w})),Object(Ve.g)(sS,fm({type:"TARGET"},D,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:w})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(Ve.g)("g",null)}},{key:"getAppend",value:function(){return Object(Ve.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,m=f.graphModel,w=f.model;m.toFront(w.id)}},{key:"render",value:function(){var f=this.props,m=f.model,w=m.isSelected,M=m.isHitable,D=m.isShowAdjustPoint;return f.graphModel.animation,Object(Ve.g)("g",null,Object(Ve.g)("g",{className:["lf-edge",!M&&"pointer-none",w&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),D&&w?this.getAdjustPoints():"")}}])&&Y3(o.prototype,l),v}(Ve.a);function H0(i){return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},H0(i)}function J3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return cS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return cS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function cS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}var pm=function(i){var o={d:""};return Object.entries(i).forEach(function(l){var u=J3(l,2),v=u[0],f=u[1],m=H0(f);v!=="style"&&m==="object"||(o[v]=f)}),Object(Ve.g)("path",o)};function X0(i){return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},X0(i)}function q0(){return q0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},q0.apply(this,arguments)}function Q3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function eD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Y0(i,o){return Y0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Y0(i,o)}function tD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hy(i);if(o){var v=Hy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return nD(this,l)}}function nD(i,o){if(o&&(X0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Hy(i){return Hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Hy(i)}var K0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Y0(f,m)})(v,i);var o,l,u=tD(v);function v(){return Q3(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"getEdge",value:function(){var f=this.props.model,m=f.startPoint,w=f.endPoint,M=f.isAnimation,D=f.arrowConfig,F=f.getEdgeStyle(),ee=f.getEdgeAnimationStyle(),te=ee.strokeDasharray,be=ee.stroke,ke=ee.strokeDashoffset,Ie=ee.animationName,at=ee.animationDuration,it=ee.animationIterationCount,gt=ee.animationTimingFunction,Ft=ee.animationDirection;return Object(Ve.g)(Lh,q0({},F,{x1:m.x,y1:m.y,x2:w.x,y2:w.y},D,M?{strokeDasharray:te,stroke:be,style:{strokeDashoffset:ke,animationName:Ie,animationDuration:at,animationIterationCount:it,animationTimingFunction:gt,animationDirection:Ft}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,m=f.startPoint,w=f.endPoint,M=hi({start:m,end:w}),D=M.d,F=M.strokeWidth,ee=M.fill,te=M.strokeDasharray,be=M.stroke;return Object(Ve.g)(pm,{d:D,fill:ee,strokeWidth:F,stroke:be,strokeDasharray:te})}}])&&eD(o.prototype,l),v}(dm);function Z0(i){return Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Z0(i)}function rD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return fS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return fS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}var oD=function(i){var o={points:"",fill:"none"};return Object.entries(i).forEach(function(l){var u=rD(l,2),v=u[0],f=u[1];(v==="style"||Z0(f)!=="object")&&(o[v]=f)}),Object(Ve.g)("polyline",o)};function J0(i){return J0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},J0(i)}function dS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function Xy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?dS(Object(l),!0).forEach(function(u){Sf(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):dS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function Q0(){return Q0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},Q0.apply(this,arguments)}function iD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return pS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return pS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function aD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function e1(i,o){return e1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e1(i,o)}function lD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=qy(i);if(o){var v=qy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return sD(this,l)}}function sD(i,o){if(o&&(J0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Of(i)}function Of(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qy(i){return qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},qy(i)}function Sf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var t1=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&e1(f,m)})(v,i);var o,l,u=lD(v);function v(){var f;return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,v),Sf(Of(f=u.call(this)),"drag",void 0),Sf(Of(f),"isDragging",void 0),Sf(Of(f),"isShowAdjustPointTemp",void 0),Sf(Of(f),"appendInfo",void 0),Sf(Of(f),"onDragStart",function(){var m=f.props.model;m.dragAppendStart(),f.isShowAdjustPointTemp=m.isShowAdjustPoint,m.isShowAdjustPoint=!1}),Sf(Of(f),"onDragging",function(m){var w=m.deltaX,M=m.deltaY,D=f.props,F=D.model,ee=D.graphModel;f.isDragging=!0;var te=ee.transformModel,be=ee.editConfigModel,ke=iD(te.fixDeltaXY(w,M),2),Ie=ke[0],at=ke[1],it=F,gt=be.adjustEdgeMiddle;f.appendInfo=gt?it.dragAppendSimple(f.appendInfo,{x:Ie,y:at}):it.dragAppend(f.appendInfo,{x:Ie,y:at})}),Sf(Of(f),"onDragEnd",function(){var m=f.props,w=m.model,M=m.graphModel.eventCenter,D=w;D.dragAppendEnd(),f.isDragging=!1,D.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,M.emit(jn.EDGE_ADJUST,{data:D.getData()})}),Sf(Of(f),"beforeDragStart",function(m,w){w.dragAble&&f.drag.handleMouseDown(m),f.appendInfo=w}),f.drag=new ye({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return o=v,(l=[{key:"getEdge",value:function(){var f=this.props.model,m=f.points,w=f.isAnimation,M=f.arrowConfig,D=f.getEdgeStyle(),F=f.getEdgeAnimationStyle(),ee=F.strokeDasharray,te=F.stroke,be=F.strokeDashoffset,ke=F.animationName,Ie=F.animationDuration,at=F.animationIterationCount,it=F.animationTimingFunction,gt=F.animationDirection;return Object(Ve.g)(oD,Q0({points:m},D,M,w?{strokeDasharray:ee,stroke:te,style:{strokeDashoffset:be,animationName:ke,animationDuration:Ie,animationIterationCount:at,animationTimingFunction:it,animationDirection:gt}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,m=f.points,w=f.isSelected,M={start:null,end:null,hover:this.state.hover,isSelected:w},D=or(m);return D.length>=2&&(M.start=D[D.length-2],M.end=D[D.length-1]),M}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,m=or(f);return m.length>=2?[m[m.length-2],m[m.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var m,w=f.start,M=f.end;if(w.x===M.x&&w.y===M.y)m="";else{var D={start:w,end:M,offset:10,verticalLength:5},F=fu(Xy(Xy({},D),{},{type:"start"})),ee=fu(Xy(Xy({},D),{},{type:"end"}));m="M".concat(F.leftX," ").concat(F.leftY,` 
      L`).concat(F.rightX," ").concat(F.rightY,` 
      L`).concat(ee.rightX," ").concat(ee.rightY,`
      L`).concat(ee.leftX," ").concat(ee.leftY," z")}return{d:m,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var m=this.getAppendAttributes(f),w=m.d,M=m.strokeWidth,D=m.fill,F=m.strokeDasharray,ee=m.stroke;return Object(Ve.g)(pm,{d:w,fill:D,strokeWidth:M,stroke:ee,strokeDasharray:F})}},{key:"getAppendWidth",value:function(){for(var f=this,m=this.props,w=m.model,M=m.graphModel,D=w.pointsList,F=w.draggable,ee=[],te=D.length,be=function(Ie){var at="lf-polyline-append",it={start:{x:D[Ie].x,y:D[Ie].y},end:{x:D[Ie+1].x,y:D[Ie+1].y},startIndex:Ie,endIndex:Ie+1,direction:"",dragAble:!0},gt=Object(Ve.g)("g",{className:at},f.getAppendShape(it)),Ft=M.editConfigModel,gn=Ft.adjustEdge,mn=Ft.adjustEdgeMiddle;if(gn&&F){var qn=it.startIndex,hn=it.endIndex,Fn=mn&&(qn===0||hn===te-1);it.dragAble=!Fn,it.start.x===it.end.x?(it.dragAble&&(at+="-ew-resize"),it.direction=fo.VERTICAL):it.start.y===it.end.y&&(it.dragAble&&(at+="-ns-resize"),it.direction=fo.HORIZONTAL),gt=Object(Ve.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Sn){return f.beforeDragStart(Sn,it)}},Object(Ve.g)("g",{className:at},f.getAppendShape(it)))}ee.push(gt)},ke=0;ke<te-1;ke++)be(ke);return Object(Ve.g)("g",null,ee)}}])&&aD(o.prototype,l),v}(dm);function n1(i){return n1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},n1(i)}function uD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return hS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return hS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function r1(){return r1=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},r1.apply(this,arguments)}function cD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function fD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function o1(i,o){return o1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},o1(i,o)}function dD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Yy(i);if(o){var v=Yy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return pD(this,l)}}function pD(i,o){if(o&&(n1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Yy(i){return Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yy(i)}var i1=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&o1(f,m)})(v,i);var o,l,u=dD(v);function v(){return cD(this,v),u.apply(this,arguments)}return o=v,(l=[{key:"getEdge",value:function(){var f=this.props.model,m=f.getEdgeStyle(),w=f.path,M=f.isAnimation,D=f.arrowConfig,F=f.getEdgeAnimationStyle(),ee=F.strokeDasharray,te=F.stroke,be=F.strokeDashoffset,ke=F.animationName,Ie=F.animationDuration,at=F.animationIterationCount,it=F.animationTimingFunction,gt=F.animationDirection;return Object(Ve.g)(pm,r1({d:w},m,D,M?{strokeDasharray:ee,stroke:te,style:{strokeDashoffset:be,animationName:ke,animationDuration:Ie,animationIterationCount:at,animationTimingFunction:it,animationDirection:gt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(Ve.g)(pm,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,m=this.state.hover,w=f.isSelected,M=f.getArrowStyle().offset,D=f.pointsList.map(function(ee){return{x:ee.x,y:ee.y}}),F=uD(vi(D,M),2);return{start:F[0],end:F[1],hover:m,isSelected:w}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model,m=f.getArrowStyle().offset,w=f.pointsList.map(function(M){return{x:M.x,y:M.y}});return vi(w,m)}}])&&fD(o.prototype,l),v}(dm);function a1(i){return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},a1(i)}function vS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function hD(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function vD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function mD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function l1(i,o){return l1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l1(i,o)}function yD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ky(i);if(o){var v=Ky(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return gD(this,l)}}function gD(i,o){if(o&&(a1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Ky(i){return Ky=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ky(i)}var _D=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&l1(f,m)})(v,i);var o,l,u=yD(v);function v(){return vD(this,v),u.apply(this,arguments)}return o=v,l=[{key:"getArrowAttributes",value:function(){var f=this.props,m=f.arrowInfo,w=f.style,M=m.start,D=m.end,F={start:M,end:D,offset:w.offset,verticalLength:w.verticalLength,type:"end"},ee=fu(F),te=ee.leftX,be=ee.leftY,ke=ee.rightX,Ie=ee.rightY;return function(at){for(var it=1;it<arguments.length;it++){var gt=arguments[it]!=null?arguments[it]:{};it%2?vS(Object(gt),!0).forEach(function(Ft){hD(at,Ft,gt[Ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(gt)):vS(Object(gt)).forEach(function(Ft){Object.defineProperty(at,Ft,Object.getOwnPropertyDescriptor(gt,Ft))})}return at}({d:"M".concat(te," ").concat(be," L").concat(D.x," ").concat(D.y," L").concat(ke," ").concat(Ie," z")},w)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),m=f.d,w=f.strokeWidth,M=f.stroke,D=f.fill;return Object(Ve.g)(pm,{d:m,fill:D,strokeWidth:w,stroke:M})}},{key:"render",value:function(){return Object(Ve.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&mD(o.prototype,l),v}(Ve.a),mS=function(i,o){return yt(i,o)},bD=function(i){var o=i==null?0:i.length;return o?i[o-1]:void 0},s1=function(){return Dn.a.Date.now()},wD=Math.max,ED=Math.min,OD=function(i,o,l){var u,v,f,m,w,M,D=0,F=!1,ee=!1,te=!0;if(typeof i!="function")throw new TypeError("Expected a function");function be(Ft){var gn=u,mn=v;return u=v=void 0,D=Ft,m=i.apply(mn,gn)}function ke(Ft){return D=Ft,w=setTimeout(at,o),F?be(Ft):m}function Ie(Ft){var gn=Ft-M;return M===void 0||gn>=o||gn<0||ee&&Ft-D>=f}function at(){var Ft=s1();if(Ie(Ft))return it(Ft);w=setTimeout(at,function(gn){var mn=o-(gn-M);return ee?ED(mn,f-(gn-D)):mn}(Ft))}function it(Ft){return w=void 0,te&&u?be(Ft):(u=v=void 0,m)}function gt(){var Ft=s1(),gn=Ie(Ft);if(u=arguments,v=this,M=Ft,gn){if(w===void 0)return ke(M);if(ee)return clearTimeout(w),w=setTimeout(at,o),be(M)}return w===void 0&&(w=setTimeout(at,o)),m}return o=Xu(o)||0,Lr(l)&&(F=!!l.leading,f=(ee="maxWait"in l)?wD(Xu(l.maxWait)||0,o):f,te="trailing"in l?!!l.trailing:te),gt.cancel=function(){w!==void 0&&clearTimeout(w),D=0,u=M=v=w=void 0},gt.flush=function(){return w===void 0?m:it(s1())},gt},SD=r(172);function xD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Cd(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var yS,gS,_S,AD=function(){function i(u){(function(v,f){if(!(v instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),Cd(this,"undos",[]),Cd(this,"redos",[]),Cd(this,"callbacks",[]),Cd(this,"stopWatch",null),Cd(this,"curData",null),Cd(this,"maxSize",50),Cd(this,"waitTime",100),Cd(this,"eventCenter",void 0),this.eventCenter=u}var o,l;return o=i,(l=[{key:"add",value:function(u){mS(bD(this.undos),u)||(this.undos.push(u),mS(this.curData,u)||(this.redos=[]),this.eventCenter.emit(jn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var v=this.undos.pop();return this.curData=no(v),v}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=no(u),u}}},{key:"watch",value:function(u){var v=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(SD.a)(u,OD(function(){var f=u.modelToHistoryData();f&&v.add(f)},this.waitTime))}}])&&xD(o.prototype,l),i}();function u1(i){return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},u1(i)}function TD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return bS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return bS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function bS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function wS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function Ip(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?wS(Object(l),!0).forEach(function(u){Lp(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):wS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function ES(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function c1(i,o){return c1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},c1(i,o)}function MD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Zy(i);if(o){var v=Zy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return kD(this,l)}}function kD(i,o){if(o&&(u1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kh(i)}function Kh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Zy(i){return Zy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Zy(i)}function Lp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var OS,SS,xS,f1=gu((_S=gS=function(i){(function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),w&&c1(m,w)})(f,i);var o,l,u,v=MD(f);function f(){var m;return function(w,M){if(!(w instanceof M))throw new TypeError("Cannot call a class as a function")}(this,f),Lp(Kh(m=v.call(this)),"ref",Object(Ve.f)()),Lp(Kh(m),"__prevText",{type:"",text:"",id:""}),Lp(Kh(m),"keyupHandler",function(w){var M=m.props.graphModel.textEditElement;w.key==="Enter"&&w.altKey&&M.setElementState(0)}),Lp(Kh(m),"inputHandler",function(w){var M=w.target.innerText,D=m.props.graphModel.textEditElement;m.__prevText={type:D.type,text:M.replace(/(\r\n)+$|(\n)+$/,""),id:D.id}}),Lp(Kh(m),"keydownHandler",function(w){w.stopPropagation()}),m.state={style:{left:0,top:0}},m}return o=f,u=[{key:"getDerivedStateFromProps",value:function(m){var w,M=m.graphModel,D=M.transformModel,F=M.theme,ee=F.inputText,te=M.textEditElement;if(te){var be;if((be=te.text)===null||be===void 0||!be.value)if(te.BaseType===co.EDGE){var ke=(te=te).text,Ie=te.textPosition,at=Ie.x,it=Ie.y;ke.x=at,ke.y=it,te.setText(ke)}else te=te;var gt={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(te.BaseType===co.EDGE){var Ft=F.edgeText,gn=Ft.overflowMode,mn=Ft.lineHeight,qn=Ft.wrapPadding,hn=Ft.textWidth;hn&&gn==="autoWrap"&&(w=Ip(Ip({},gt),{},{width:hn,minWidth:hn,lineHeight:mn,padding:qn}))}else if(te.BaseType===co.NODE){var Fn=F.nodeText,Sn=Fn.overflowMode,$r=Fn.lineHeight,zr=Fn.wrapPadding,vr=Fn.textWidth,Jr=te,wi=Jr.width,Ei=Jr.modelType,Ma=Jr.textWidth||vr||wi;(Ei!==Mr.TEXT_NODE&&Sn==="autoWrap"||Ei===Mr.TEXT_NODE&&vr)&&(w=Ip(Ip({},gt),{},{width:Ma,minWidth:Ma,lineHeight:$r,padding:zr}))}var ts=te.text,ns=ts.x,ic=ts.y,$p=TD(D.CanvasPointToHtmlPoint([ns,ic]),2);return{style:Ip(Ip({left:$p[0],top:$p[1]},w),ee)}}}}],(l=[{key:"componentDidUpdate",value:function(){var m=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var w=this.__prevText,M=w.text,D=w.id;m.updateText(D,M),m.eventCenter.emit(jn.TEXT_UPDATE,Ip({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(m){if(window.getSelection!==void 0&&document.createRange!==void 0){var w=document.createRange();w.selectNodeContents(m),w.collapse(!1);var M=window.getSelection();M.removeAllRanges(),M.addRange(w)}}},{key:"render",value:function(){var m,w=this.props.graphModel.textEditElement,M=this.state.style;return w?Object(Ve.g)("div",{contentEditable:!0,className:"lf-text-input",style:M,ref:this.ref,key:w.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(m=w.text)===null||m===void 0?void 0:m.value):null}}])&&ES(o.prototype,l),u&&ES(o,u),f}(Ve.a),Lp(gS,"toolName","textEdit"),yS=_S))||yS,ND=function(i){return i.modelType===Mr.LINE_EDGE?function(o){var l=o.startPoint,u=o.endPoint,v=(l.x+u.x)/2,f=(l.y+u.y)/2,m=Math.abs(l.x-u.x)+10,w=Math.abs(l.y-u.y)+10;return{x:v-m/2,y:f-w/2,x1:v+m/2,y1:f+w/2}}(i):i.modelType===Mr.POLYLINE_EDGE?function(o){var l=o.points,u=or(l),v=st(u,8),f=v.x,m=v.y,w=v.width,M=v.height;return{x:f-w/2,y:m-M/2,x1:f+w/2,y1:m+M/2}}(i):i.modelType===Mr.BEZIER_EDGE?function(o){var l=o.path,u=vo(l),v=st(u,8),f=v.x,m=v.y,w=v.width,M=v.height;return{x:f-w/2,y:m-M/2,x1:f+w/2,y1:m+M/2}}(i):void 0};function d1(i){return d1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},d1(i)}function AS(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var f,m,w=[],M=!0,D=!1;try{for(v=v.call(l);!(M=(f=v.next()).done)&&(w.push(f.value),!u||w.length!==u);M=!0);}catch(F){D=!0,m=F}finally{try{M||v.return==null||v.return()}finally{if(D)throw m}}return w}}(i,o)||TS(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function PD(i){return function(o){if(Array.isArray(o))return p1(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||TS(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function TS(i,o){if(i){if(typeof i=="string")return p1(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?p1(i,o):void 0}}function p1(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function RD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function h1(i,o){return h1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},h1(i,o)}function CD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jy(i);if(o){var v=Jy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return DD(this,l)}}function DD(i,o){if(o&&(d1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zh(i)}function Zh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Jy(i){return Jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Jy(i)}function Jh(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var v1=gu((xS=SS=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&h1(f,m)})(v,i);var o,l,u=CD(v);function v(f){var m;(function(F,ee){if(!(F instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,v),Jh(Zh(m=u.call(this)),"stepDrag",void 0),Jh(Zh(m),"handleMouseDown",function(F){m.stepDrag.handleMouseDown(F)}),Jh(Zh(m),"handleWheelEvent",function(F){var ee,te;F.preventDefault();var be=F.deltaX,ke=F.deltaY,Ie=F.clientX,at=F.clientY,it=F.ctrlKey,gt=new WheelEvent("wheel",{deltaX:be,deltaY:ke,clientX:Ie,clientY:at,ctrlKey:it});(ee=m.props.logicFlow.container)===null||ee===void 0||(te=ee.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||te===void 0||te.dispatchEvent(gt)}),Jh(Zh(m),"onDragging",function(F){var ee=F.deltaX,te=F.deltaY,be=m.props.graphModel,ke=be.getSelectElements(!0);be.moveNodes(ke.nodes.map(function(Ie){return Ie.id}),ee,te)}),Jh(Zh(m),"handleContextMenu",function(F){F.preventDefault();var ee=m.props,te=ee.graphModel,be=ee.graphModel,ke=be.eventCenter,Ie=be.selectElements,at=te.getPointByClient({x:F.clientX,y:F.clientY}),it={nodes:[],edges:[]};PD(Ie.values()).forEach(function(gt){gt.BaseType===co.NODE&&it.nodes.push(gt.getData()),gt.BaseType===co.EDGE&&it.edges.push(gt.getData())}),ke.emit(jn.SELECTION_CONTEXTMENU,{data:it,e:F,position:at})});var w=f.graphModel,M=w.gridSize,D=w.eventCenter;return m.stepDrag=new ye({onDragging:m.onDragging,step:M,eventType:"SELECTION",eventCenter:D}),m}return o=v,(l=[{key:"render",value:function(){var f=this.props.graphModel,m=f.selectElements,w=f.transformModel;if(!(m.size<=1)){var M=Number.MAX_SAFE_INTEGER,D=Number.MAX_SAFE_INTEGER,F=Number.MIN_SAFE_INTEGER,ee=Number.MIN_SAFE_INTEGER;m.forEach(function(Ie){var at={x:0,y:0,x1:0,y1:0};Ie.BaseType===co.NODE&&(at=function(it){var gt=it.x,Ft=it.y,gn=it.width,mn=it.height;return{x:gt-gn/2,y:Ft-mn/2,x1:gt+gn/2,y1:Ft+mn/2}}(Ie)),Ie.BaseType===co.EDGE&&(at=ND(Ie)),M=Math.min(M,at.x),D=Math.min(D,at.y),F=Math.max(F,at.x1),ee=Math.max(ee,at.y1)});var te=AS(w.CanvasPointToHtmlPoint([M,D]),2);M=te[0],D=te[1];var be=AS(w.CanvasPointToHtmlPoint([F,ee]),2);F=be[0],ee=be[1];var ke={left:"".concat(M-10,"px"),top:"".concat(D-10,"px"),width:"".concat(F-M+20,"px"),height:"".concat(ee-D+20,"px")};return Object(Ve.g)("div",{className:"lf-multiple-select",style:ke,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&RD(o.prototype,l),v}(Ve.a),Jh(SS,"toolName","multipleSelect"),OS=xS))||OS;function jD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Qy(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ID=function(){function i(u){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),Qy(this,"tools",void 0),Qy(this,"components",void 0),Qy(this,"toolMap",new Map),Qy(this,"instance",void 0),this.instance=u,this.isDisabledTool(f1.toolName)||this.registerTool(f1.toolName,f1),this.isDisabledTool(v1.toolName)||this.registerTool(v1.toolName,v1);var v=u.graphModel;v.eventCenter.on("".concat(jn.GRAPH_TRANSFORM,",").concat(jn.NODE_CLICK,",").concat(jn.BLANK_CLICK," "),function(){var f=v.textEditElement,m=v.editConfigModel,w=m.edgeTextEdit,M=m.nodeTextEdit;(w||M)&&f&&v.textEditElement.setElementState(Zr.DEFAULT)})}var o,l;return o=i,(l=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,v){this.toolMap.set(u,v)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&jD(o.prototype,l),i}(),LD=r(173),$D=r.n(LD);function FD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function m1(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var MS=function(){function i(u){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),m1(this,"mousetrap",void 0),m1(this,"options",void 0),m1(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var v=u.lf;this.target=v.container,this.mousetrap=new $D.a(this.target),u.keyboard.enabled&&!v.options.isSilentMode&&this.enable(!0)}var o,l;return o=i,(l=[{key:"initShortcuts",value:function(){var u=this,v=this.options.keyboard.shortcuts;if(v)if(lo(v))v.forEach(function(M){var D=M.keys,F=M.callback,ee=M.action;return u.on(D,F,ee)});else{var f=v.keys,m=v.callback,w=v.action;this.on(f,m,w)}}},{key:"on",value:function(u,v,f){this.mousetrap.bind(this.getKeys(u),v,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,v){this.mousetrap.unbind(this.getKeys(u),v)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var v=this;return(Array.isArray(u)?u:[u]).map(function(f){return v.formatKey(f)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&FD(o.prototype,l),i}(),BD=MS,xf=null;function kS(i,o){return i.x+=o,i.y+=o,i.text&&(i.text.x+=o,i.text.y+=o),i}function NS(i,o){return i.startPoint&&(i.startPoint.x+=o,i.startPoint.y+=o),i.endPoint&&(i.endPoint.x+=o,i.endPoint.y+=o),i.pointsList&&i.pointsList.length>0&&i.pointsList.forEach(function(l){l.x+=o,l.y+=o}),i.text&&(i.text.x+=o,i.text.y+=o),i}var Qh=40,y1=40;function g1(i){return g1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},g1(i)}function PS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,u)}return l}function hm(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?PS(Object(l),!0).forEach(function(u){mi(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):PS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function RS(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function mi(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var _1=Symbol("plugin register by Logicflow.use"),b1=function(){function i(v){var f,m,w=this;(function(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")})(this,i),mi(this,"container",void 0),mi(this,"width",void 0),mi(this,"height",void 0),mi(this,"graphModel",void 0),mi(this,"history",void 0),mi(this,"viewMap",new Map),mi(this,"tool",void 0),mi(this,"keyboard",void 0),mi(this,"dnd",void 0),mi(this,"options",void 0),mi(this,"snaplineModel",void 0),mi(this,"components",[]),mi(this,"plugins",void 0),mi(this,"extension",{}),mi(this,"adapterIn",void 0),mi(this,"adapterOut",void 0),mi(this,"getView",function(M){return w.viewMap.get(M)}),v=M2(v),this.options=v,this.container=this.initContainer(v.container),this.plugins=v.plugins,this.graphModel=new HP(hm({},v)),this.tool=new ID(this),this.history=new AD(this.graphModel.eventCenter),this.dnd=new GR({lf:this}),this.keyboard=new BD({lf:this,keyboard:v.keyboard}),v.snapline!==!1&&(this.snaplineModel=new VO(this.graphModel),f=this.graphModel.eventCenter,m=this.snaplineModel,f.on("node:mousemove",function(M){var D=M.data;m.setNodeSnapLine(D)}),f.on("node:mouseup",function(){m.clearSnapline()})),function(M,D){var F=M.keyboard,ee=F.options.keyboard;F.on(["cmd + c","ctrl + c"],function(){if(y1=Qh,!ee.enabled||D.textEditElement)return!0;var te=M.options.guards,be=D.getSelectElements(!1);return te&&te.beforeClone&&!te.beforeClone(be)||be.nodes.length===0&&be.edges.length===0?(xf=null,!0):((xf=be).nodes.forEach(function(ke){return kS(ke,Qh)}),xf.edges.forEach(function(ke){return NS(ke,Qh)}),!1)}),F.on(["cmd + v","ctrl + v"],function(){if(!ee.enabled||D.textEditElement)return!0;if(xf&&(xf.nodes||xf.edges)){M.clearSelectElements();var te=M.addElements(xf,y1);if(!te)return!0;te.nodes.forEach(function(be){return M.selectElementById(be.id,!0)}),te.edges.forEach(function(be){return M.selectElementById(be.id,!0)}),xf.nodes.forEach(function(be){return kS(be,Qh)}),xf.edges.forEach(function(be){return NS(be,Qh)}),y1+=Qh}return!1}),F.on(["cmd + z","ctrl + z"],function(){return!ee.enabled||!!D.textEditElement||(M.undo(),!1)}),F.on(["cmd + y","ctrl + y"],function(){return!ee.enabled||!!D.textEditElement||(M.redo(),!1)}),F.on(["backspace"],function(){if(!ee.enabled||D.textEditElement)return!0;var te=D.getSelectElements(!0);return M.clearSelectElements(),te.edges.forEach(function(be){return M.deleteEdge(be.id)}),te.nodes.forEach(function(be){return M.deleteNode(be.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(v.disabledPlugins)}var o,l,u;return o=i,l=[{key:"register",value:function(v,f){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof v=="string"){var w={BaseEdge:dm,BaseEdgeModel:Sd,BaseNode:wf,BaseNodeModel:bf,RectNode:f0,RectNodeModel:Vb,CircleNode:v0,CircleNodeModel:Ob,PolygonNode:b0,PolygonNodeModel:$b,TextNode:R0,TextNodeModel:Hb,LineEdge:K0,LineEdgeModel:Zu,DiamondNode:S0,DiamondNodeModel:Mb,PolylineEdge:t1,PolylineEdgeModel:Ta,BezierEdge:i1,BezierEdgeModel:yb,EllipseNode:k0,EllipseNodeModel:Rb,HtmlNode:I0,HtmlNodeModel:Yb,h:Ve.g,type:v};this.viewMap.forEach(function(te){var be=te.extendKey;be&&(w[be]=te)}),this.graphModel.modelMap.forEach(function(te){var be=te.extendKey;be&&(w[be]=te)});var M=f(w),D=M.view,F=M.model,ee=D;m&&!ee.isObervered&&(ee.isObervered=!0,ee=An(ee)),this.setView(v,ee),this.graphModel.setModel(v,F)}else this.registerElement(v)}},{key:"registerElement",value:function(v){var f=v.view;v.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=An(f)),this.setView(v.type,f),this.graphModel.setModel(v.type,v.model)}},{key:"batchRegister",value:function(){var v=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(m){v.registerElement(m)})}},{key:"defaultRegister",value:function(){this.registerElement({view:f0,model:Vb,type:"rect"}),this.registerElement({type:"circle",view:v0,model:Ob}),this.registerElement({type:"polygon",view:b0,model:$b}),this.registerElement({type:"line",view:K0,model:Zu}),this.registerElement({type:"polyline",view:t1,model:Ta}),this.registerElement({type:"bezier",view:i1,model:yb}),this.registerElement({type:"text",view:R0,model:Hb}),this.registerElement({type:"ellipse",view:k0,model:Rb}),this.registerElement({type:"diamond",view:S0,model:Mb}),this.registerElement({type:"html",view:I0,model:Yb})}},{key:"selectElementById",value:function(v){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(v,f),!f&&m&&this.graphModel.toFront(v)}},{key:"focusOn",value:function(v){var f=this.graphModel.transformModel,m=v.coordinate,w=v.id;if(!m){var M=this.getNodeModelById(w);M&&(m=M.getData());var D=this.getEdgeModelById(w);D&&(m=D.textPosition)}var F=m,ee=F.x,te=F.y;f.focusOn(ee,te,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(v){this.graphModel.setTheme(v)}},{key:"resize",value:function(v,f){this.graphModel.resize(v,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(v){this.graphModel.setDefaultEdgeType(v)}},{key:"updateText",value:function(v,f){this.graphModel.updateText(v,f)}},{key:"deleteElement",value:function(v){var f,m,w,M=this.getModelById(v);return!!M&&(m=(w=(mi(f={},co.NODE,this.deleteNode),mi(f,co.EDGE,this.deleteEdge),f)[M.BaseType])===null||w===void 0?void 0:w.call(this,v))!==null&&m!==void 0&&m}},{key:"getModelById",value:function(v){return this.graphModel.getElement(v)}},{key:"getDataById",value:function(v){var f;return(f=this.graphModel.getElement(v))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(v,f){this.graphModel.changeNodeType(v,f)}},{key:"changeEdgeType",value:function(v,f){this.graphModel.changeEdgeType(v,f)}},{key:"getNodeEdges",value:function(v){return this.graphModel.getNodeEdges(v)}},{key:"addNode",value:function(v){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jn.NODE_ADD,m=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(v,f,m)}},{key:"deleteNode",value:function(v){var f=this.graphModel.getNodeModelById(v);if(!f)return!1;var m=f.getData(),w=this.options.guards,M=!w||!w.beforeDelete||w.beforeDelete(m);return M&&this.graphModel.deleteNode(v),M}},{key:"cloneNode",value:function(v){var f=this.graphModel.getNodeModelById(v).getData(),m=this.options.guards;if(!m||!m.beforeClone||m.beforeClone(f))return this.graphModel.cloneNode(v)}},{key:"changeNodeId",value:function(v,f){return this.graphModel.changeNodeId(v,f)}},{key:"getNodeModelById",value:function(v){return this.graphModel.getNodeModelById(v)}},{key:"getNodeDataById",value:function(v){var f;return(f=this.graphModel.getNodeModelById(v))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(v){return this.graphModel.addEdge(v)}},{key:"deleteEdge",value:function(v){var f=this.options.guards,m=this.graphModel.edgesMap[v];if(!m)return!1;var w=m.model.getData(),M=!f||!f.beforeDelete||f.beforeDelete(w);return M&&this.graphModel.deleteEdgeById(v),M}},{key:"deleteEdgeByNodeId",value:function(v){var f=v.sourceNodeId,m=v.targetNodeId;f&&m?this.graphModel.deleteEdgeBySourceAndTarget(f,m):f?this.graphModel.deleteEdgeBySource(f):m&&this.graphModel.deleteEdgeByTarget(m)}},{key:"changeEdgeId",value:function(v,f){return this.graphModel.changeEdgeId(v,f)}},{key:"getEdgeModelById",value:function(v){var f;return(f=this.graphModel.edgesMap[v])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(v){var f=this.graphModel.edges,m=v.sourceNodeId,w=v.targetNodeId;if(m&&w){var M=[];return f.forEach(function(ee){ee.sourceNodeId===m&&ee.targetNodeId===w&&M.push(ee)}),M}if(m){var D=[];return f.forEach(function(ee){ee.sourceNodeId===m&&D.push(ee)}),D}if(w){var F=[];return f.forEach(function(ee){ee.targetNodeId===w&&F.push(ee)}),F}return[]}},{key:"getEdgeDataById",value:function(v){var f;return(f=this.getEdgeModelById(v))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(v){return this.graphModel.getNodeIncomingEdge(v)}},{key:"getNodeOutgoingEdge",value:function(v){return this.graphModel.getNodeOutgoingEdge(v)}},{key:"getNodeIncomingNode",value:function(v){return this.graphModel.getNodeIncomingNode(v)}},{key:"getNodeOutgoingNode",value:function(v){return this.graphModel.getNodeOutgoingNode(v)}},{key:"editText",value:function(v){this.graphModel.editText(v)}},{key:"setProperties",value:function(v,f){var m;(m=this.graphModel.getElement(v))===null||m===void 0||m.setProperties(bi(f))}},{key:"deleteProperty",value:function(v,f){var m;(m=this.graphModel.getElement(v))===null||m===void 0||m.deleteProperty(f)}},{key:"getProperties",value:function(v){var f;return(f=this.graphModel.getElement(v))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(v){this.graphModel.toFront(v)}},{key:"setElementZIndex",value:function(v,f){return this.graphModel.setElementZIndex(v,f)}},{key:"addElements",value:function(v){for(var f=this,m=v.nodes,w=v.edges,M={},D={nodes:[],edges:[]},F=0;F<m.length;F++){var ee=m[F],te=ee.id,be=this.addNode(ee);if(!be)return;te&&(M[te]=be.id),D.nodes.push(be)}return w.forEach(function(ke){var Ie=ke.sourceNodeId,at=ke.targetNodeId;M[Ie]&&(Ie=M[Ie]),M[at]&&(at=M[at]);var it=f.graphModel.addEdge(hm(hm({},ke),{},{sourceNodeId:Ie,targetNodeId:at}));D.edges.push(it)}),D}},{key:"getAreaElement",value:function(v,f){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],w=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],M=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(v,f,m,w,M).map(function(D){return D.getData()})}},{key:"getSelectElements",value:function(){var v=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(v)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var v=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,m=new Array(f),w=0;w<f;w++)m[w]=arguments[w];return this.adapterOut.apply(this,[v].concat(m))}return v}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(v){var f=this.graphModel,m=f.editConfigModel,w=f.transformModel;m.updateEditConfig(v),(v==null?void 0:v.stopMoveGraph)!==void 0&&w.updateTranslateLimits(v.stopMoveGraph),v!=null&&v.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(v,f){return this.graphModel.getPointByClient({x:v,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var v=bi(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(v)}}},{key:"redo",value:function(){if(this.history.redoAble()){var v=bi(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(v)}}},{key:"zoom",value:function(v,f){return this.graphModel.transformModel.zoom(v,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(v){this.graphModel.transformModel.setZoomMiniSize(v)}},{key:"setZoomMaxSize",value:function(v){this.graphModel.transformModel.setZoomMaxSize(v)}},{key:"getTransform",value:function(){var v=this.graphModel.transformModel;return{SCALE_X:v.SCALE_X,SCALE_Y:v.SCALE_Y,TRANSLATE_X:v.TRANSLATE_X,TRANSLATE_Y:v.TRANSLATE_Y}}},{key:"translate",value:function(v,f){this.graphModel.transformModel.translate(v,f)}},{key:"resetTranslate",value:function(){var v=this.graphModel.transformModel,f=v.TRANSLATE_X,m=v.TRANSLATE_Y;this.translate(-f,-m)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(v,f){f===void 0&&(f=v),this.graphModel.fitView(v,f)}},{key:"openEdgeAnimation",value:function(v){this.graphModel.openEdgeAnimation(v)}},{key:"closeEdgeAnimation",value:function(v){this.graphModel.closeEdgeAnimation(v)}},{key:"on",value:function(v,f){this.graphModel.eventCenter.on(v,f)}},{key:"off",value:function(v,f){this.graphModel.eventCenter.off(v,f)}},{key:"once",value:function(v,f){this.graphModel.eventCenter.once(v,f)}},{key:"emit",value:function(v,f){this.graphModel.eventCenter.emit(v,f)}},{key:"initContainer",value:function(v){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",v.innerHTML="",v.appendChild(f),f}},{key:"installPlugins",value:function(){var v,f=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=(v=this.plugins)!==null&&v!==void 0?v:i.extensions;w.forEach(function(M){var D=null,F=null;M[_1]?(D=M.extension,F=M.props):D=M;var ee=D.pluginName||D.name;m.indexOf(ee)===-1&&f.installPlugin(D,F)})}},{key:"installPlugin",value:function(v,f){if(g1(v)==="object"){var m=v.install,w=v.render;return m&&m.call(v,this,i),w&&this.components.push(w.bind(v)),void(this.extension[v.pluginName]=v)}var M=v,D=new M({lf:this,LogicFlow:i,options:this.options.pluginsOptions,props:f});D.render&&this.components.push(D.render.bind(D)),this.extension[M.pluginName]=D}},{key:"updateAttributes",value:function(v,f){this.graphModel.updateAttributes(v,f)}},{key:"createFakerNode",value:function(v){var f=this.graphModel.modelMap.get(v.type);if(f){var m=new f(hm(hm({},v),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(m),m}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(v){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(v)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(v,f){this.viewMap.set(v,f)}},{key:"renderRawData",value:function(v){this.graphModel.graphDataToModel(bi(v)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Ve.j)(Object(Ve.g)(UR,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(jn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(v=this.adapterIn(v)),this.renderRawData(v)}}],u=[{key:"use",value:function(v,f){var m,w,M=v.pluginName;M||(M=v.name);var D=(m=this.extensions.get(M))===null||m===void 0?void 0:m.extension;D&&D.destroy&&D.destroy(),this.extensions.set(M,(mi(w={},_1,_1),mi(w,"extension",v),mi(w,"props",f),w))}}],l&&RS(o.prototype,l),u&&RS(o,u),i}();function gu(i){return An(i)}mi(b1,"extensions",new Map),a.default=b1}])})}(og,og.exports)),og.exports}var fn=vU();const mU=Xj(fn);var yU=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),gU=(globalThis==null?void 0:globalThis._ids)||new yU;function Bv(){return gU.next()}var Tk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Tk(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Bv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),a={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(a),n},t.extendKey="StartEventModel",t})(fn.CircleNodeModel);(function(e){Tk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(fn.CircleNode);var Mk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Cg=function(){return Cg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cg.apply(this,arguments)};(function(e){Mk(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Bv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),a={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(a),n},t.extendKey="EndEventModel",t})(fn.CircleNodeModel);(function(e){Mk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,a=n.getNodeStyle(),r=n.x,s=n.y,c=n.r,p=e.prototype.getShape.call(this);return fn.h("g",{},p,fn.h("circle",Cg(Cg({},a),{cx:r,cy:s,r:c-5})))},t.extendKey="EndEventView",t})(fn.CircleNode);var kk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Am=function(){return Am=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Am.apply(this,arguments)};(function(e){kk(t,e);function t(n,a){var r=this;return n.id||(n.id="Gateway_"+Bv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(fn.PolygonNodeModel);(function(e){kk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,p=n.points,d=n.getNodeStyle();return fn.h("g",{transform:"matrix(1 0 0 1 "+(a-s/2)+" "+(r-c/2)+")"},fn.h("polygon",Am(Am({},d),{x:a,y:r,points:p})),fn.h("path",Am({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},d)))},t.extendKey="ExclusiveGatewayNode",t})(fn.PolygonNode);var Nk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Dg=function(){return Dg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dg.apply(this,arguments)};(function(e){Nk(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Bv()),r=e.call(this,n,a)||this,r}return t.extendKey="UserTaskModel",t})(fn.RectNodeModel);(function(e){Nk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,p=n.getNodeStyle();return fn.h("svg",{x:a-s/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},fn.h("path",{fill:p.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,p=n.radius,d=n.getNodeStyle();return fn.h("g",{},[fn.h("rect",Dg(Dg({},d),{x:a-s/2,y:r-c/2,rx:p,ry:p,width:s,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(fn.RectNode);var Pk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),ww=function(){return ww=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ww.apply(this,arguments)};(function(e){Pk(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Bv()),r=e.call(this,n,a)||this,r}return t.extendKey="ServiceTaskModel",t})(fn.RectNodeModel);(function(e){Pk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,p=n.getNodeStyle();return fn.h("svg",{x:a-s/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},fn.h("path",{fill:p.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,p=n.radius,d=n.getNodeStyle();return fn.h("g",{},[fn.h("rect",ww({x:a-s/2,y:r-c/2,rx:p,ry:p,width:s,height:c},d)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(fn.RectNode);var Rk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Rk(t,e);function t(n,a){var r=this;return n.id||(n.id="Flow_"+Bv()),r=e.call(this,n,a)||this,r}return t.extendKey="SequenceFlowModel",t})(fn.PolylineEdgeModel);(function(e){Rk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(fn.PolylineEdge);var yx={width:40,height:40},gx={width:40,height:40},_x={width:40,height:40},bx={width:100,height:80},wx={width:100,height:80},_U=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),bU=(globalThis==null?void 0:globalThis._ids)||new _U;function Ex(){return bU.next()}function Ck(e){return Object.prototype.toString.call(e)}function wU(e){return"  ".repeat(e)}function jg(e){var t=e;return Ck(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var a=n;n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=jg(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,a){t[a]=jg(n)})),t}function EU(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(jg(e)).replace(/"/g,"'")}return t}var ev=`	
`;function vg(e,t,n){var a=wU(n),r="";if(t==="#text")return ev+a+e;if(t==="#cdata-section")return ev+a+"<![CDATA["+e+"]]>";if(t==="#comment")return ev+a+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+EU(e)+'"';if(Array.isArray(e))e.forEach(function(d){r+=vg(d,t,n+1)});else if(Ck(e)==="[object Object]"){var s=Object.keys(e),c="",p="";r+=(n===0?"":ev+a)+"<"+t,s.forEach(function(d){d.charAt(0)==="-"?c+=vg(e[d],d,n+1):p+=vg(e[d],d,n+1)}),r+=c+(p!==""?">"+p+(ev+a)+"</"+t+">":" />")}else r+=ev+a+("<"+t+">"+e.toString()+"</"+t+">");return r}function OU(e){var t="";for(var n in e)t+=vg(e[n],n,0);return t}var vl=function(){};vl.ObjTree=function(){return this};vl.ObjTree.VERSION="0.23";vl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;vl.ObjTree.prototype.attr_prefix="-";vl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};vl.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var s=this,c=n,p=a.onComplete;a.onComplete=function(g){var b;g&&g.responseXML&&g.responseXML.documentElement&&(b=s.parseDOM(g.responseXML.documentElement)),c(b,g),p&&p(g)}}else a.asynchronous=!1;var d;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var _=new HTTP.Request(a);_&&(d=_.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var _=new Ajax.Request(e,a);_&&(d=_.transport)}if(n)return d;if(d&&d.responseXML&&d.responseXML.documentElement)return this.parseDOM(d.responseXML.documentElement)};vl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var a={};a[e.nodeName]=n,n=a}return n}};vl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(s=this.attr_prefix+s,typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}if(e.childNodes&&e.childNodes.length){var p=!0;n&&(p=!1);for(var r=0;r<e.childNodes.length&&p;r++){var d=e.childNodes[r].nodeType;d==3||d==4||d==8||(p=!1)}if(p){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}}else n===null&&(n={});return n}};vl.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=a):n==1?e[t]=a:n==2?e[t]=[e[t],a]:e[t][e[t].length]=a};vl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};vl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!=this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=a.join(""),p=n.join("");return typeof e>"u"||e==null||(n.length>0?p.match(/\n/)?p="<"+e+c+`>
`+p+"</"+e+`>
`:p="<"+e+c+">"+p+"</"+e+`>
`:p="<"+e+c+` />
`),p};vl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};vl.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};vl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var SU=function(e){return new vl.ObjTree().parseXML(e)},xU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ew=function(){return Ew=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ew.apply(this,arguments)},S_=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(p){c={error:p}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},dc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(dc||(dc={}));var Dk=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Ox=["properties","startPoint","endPoint","pointsList"];function Sx(e){var t=e?Ox.concat(e):Ox;return function(n){function a(r){var s={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return a(c)}):(Object.entries(r).forEach(function(c){var p=S_(c,2),d=p[0],_=p[1];typeof _!="object"?d.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(d)?s[d]=_:s["-"+d]=_:t.includes(d)?s["-"+d]=a(_):s[d]=a(_)}),s)}return a(n)}}function Ig(e){var t={};return Object.entries(e).forEach(function(n){var a=S_(n,2),r=a[0],s=a[1];r.indexOf("-")===0?t[r.substring(1)]=jg(s):typeof s=="string"?t[r]=s:Object.prototype.toString.call(s)==="[object Object]"?t[r]=Ig(s):Array.isArray(s)?t[r]=s.map(function(c){return Ig(c)}):t[r]=s}),t}function AU(e,t,n){var a=new Map;t.nodes.forEach(function(s){var c,p={"-id":s.id};if(!((c=s.text)===null||c===void 0)&&c.value&&(p["-name"]=s.text.value),s.properties){var d=Sx(n)(s.properties);Object.assign(p,d)}a.set(s.id,p),e[s.type]?Array.isArray(e[s.type])?e[s.type].push(p):e[s.type]=[e[s.type],p]:e[s.type]=p});var r=t.edges.map(function(s){var c,p,d=a.get(s.targetNodeId);d["bpmn:incoming"]?Array.isArray(d["bpmn:incoming"])?d["bpmn:incoming"].push(s.id):d["bpmn:incoming"]=[d["bpmn:incoming"],s.id]:d["bpmn:incoming"]=s.id;var _={"-id":s.id,"-sourceRef":s.sourceNodeId,"-targetRef":s.targetNodeId};if(!((c=s.text)===null||c===void 0)&&c.value&&(_["-name"]=(p=s.text)===null||p===void 0?void 0:p.value),s.properties){var g=Sx(n)(s.properties);Object.assign(_,g)}return _});t.edges.forEach(function(s){var c=a.get(s.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(s.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],s.id]:c["bpmn:outgoing"]=s.id}),e[dc.FLOW]=r}function TU(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,s=n.pointsList.map(function(p){var d=p.x,_=p.y;return{"-x":d,"-y":_}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,s=100,c=80,p=n.x,d=n.y,_=Xd.shapeConfigMap.get(n.type);_&&(s=_.width,c=_.height),p-=s/2,d-=c/2;var g={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":p,"-y":d,"-width":s,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(g["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),g})}function MU(e){var t=[],n=[],a=e["bpmn:definitions"];if(a){var r=a["bpmn:process"];Object.keys(r).forEach(function(s){if(s.indexOf("bpmn:")===0){var c=r[s];if(s===dc.FLOW){var p=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=NU(c,p)}else{var d=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(kU(c,d,s))}}})}return{nodes:t,edges:n}}function kU(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var p;Array.isArray(t)?p=t.find(function(_){return _["-bpmnElement"]===c["-id"]}):p=t;var d=xx(p,n,c);a.push(d)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=xx(r,n,e);a.push(s)}return a}function xx(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-name"],c=Xd.shapeConfigMap.get(t);c&&(a+=c.width/2,r+=c.height/2);var p;Object.entries(n).forEach(function(b){var S=S_(b,2),T=S[0],A=S[1];Dk.indexOf(T)===-1&&(p||(p={}),p[T]=A)}),p&&(p=Ig(p));var d;if(s&&(d={x:a,y:r,value:s},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var _=e["bpmndi:BPMNLabel"]["dc:Bounds"];d.x=Number(_["-x"])+Number(_["-width"])/2,d.y=Number(_["-y"])+Number(_["-height"])/2}var g={id:e["-bpmnElement"],type:t,x:a,y:r,properties:p};return d&&(g.text=d),g}function NU(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(Ax(s,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(Ax(a,e))}return n}function Ax(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;a.split(`
`).forEach(function(d){s<d.length&&(s=d.length)}),n={value:a,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(d){var _=S_(d,2),g=_[0],b=_[1];Dk.indexOf(g)===-1&&(c||(c={}),c[g]=b)}),c&&(c=Ig(c));var p={id:t["-id"],type:dc.FLOW,pointsList:e["di:waypoint"].map(function(d){return{x:Number(d["-x"]),y:Number(d["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(p.text=n),p}var Xd=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,s){var c=Ew({},n.processAttributes);AU(c,r,s);var p={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};TU(p,r);var d=n.definitionAttributes;d["bpmn:process"]=c,d["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":p};var _={"bpmn:definitions":d};return _},this.adapterIn=function(r){if(r)return MU(r)},a.adapterIn=function(r){return n.adapterIn(r)},a.adapterOut=function(r,s){return n.adapterOut(r,s)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Ex()},this.definitionAttributes={"-id":"Definitions_"+Ex(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Xd.shapeConfigMap.set(dc.START,{width:yx.width,height:yx.height});Xd.shapeConfigMap.set(dc.END,{width:gx.width,height:gx.height});Xd.shapeConfigMap.set(dc.GATEWAY,{width:_x.width,height:_x.height});Xd.shapeConfigMap.set(dc.SYSTEM,{width:bx.width,height:bx.height});Xd.shapeConfigMap.set(dc.USER,{width:wx.width,height:wx.height});(function(e){xU(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(s){var c=SU(s);return a.adapterIn(c)},a.adapterXmlOut=function(s,c){var p=a.adapterOut(s,c);return OU(p)};var r=n.lf;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a}return t.pluginName="bpmnXmlAdapter",t})(Xd);var PU=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),RU=(globalThis==null?void 0:globalThis._ids)||new PU;function CU(){return RU.next()}fn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),fn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),fn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});fn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});fn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var ME,Ci,jk,Wp,Tx,Ik,Lk,$k,kE,Ow,Sw,xw={},Fk=[],DU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,x_=Array.isArray;function Mf(e,t){for(var n in t)e[n]=t[n];return e}function NE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Tm(e,t,n){var a,r,s,c={};for(s in t)s=="key"?a=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?ME.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return mg(e,c,a,r,null)}function mg(e,t,n,a,r){var s={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++jk,__i:-1,__u:0};return r==null&&Ci.vnode!=null&&Ci.vnode(s),s}function PE(e){return e.children}function vv(e,t){this.props=e,this.context=t}function Tv(e,t){if(t==null)return e.__?Tv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Tv(e):null}function Bk(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Bk(e)}}function Mx(e){(!e.__d&&(e.__d=!0)&&Wp.push(e)&&!Lg.__r++||Tx!=Ci.debounceRendering)&&((Tx=Ci.debounceRendering)||Ik)(Lg)}function Lg(){for(var e,t,n,a,r,s,c,p=1;Wp.length;)Wp.length>p&&Wp.sort(Lk),e=Wp.shift(),p=Wp.length,e.__d&&(n=void 0,r=(a=(t=e).__v).__e,s=[],c=[],t.__P&&((n=Mf({},a)).__v=a.__v+1,Ci.vnode&&Ci.vnode(n),Gk(t.__P,n,a,t.__n,t.__P.namespaceURI,32&a.__u?[r]:null,s,r??Tv(a),!!(32&a.__u),c),n.__v=a.__v,n.__.__k[n.__i]=n,LU(s,n,c),n.__e!=r&&Bk(n)));Lg.__r=0}function Uk(e,t,n,a,r,s,c,p,d,_,g){var b,S,T,A,O,E,C=a&&a.__k||Fk,j=t.length;for(d=jU(n,t,C,d,j),b=0;b<j;b++)(T=n.__k[b])!=null&&(S=T.__i==-1?xw:C[T.__i]||xw,T.__i=b,E=Gk(e,T,S,r,s,c,p,d,_,g),A=T.__e,T.ref&&S.ref!=T.ref&&(S.ref&&RE(S.ref,null,T),g.push(T.ref,T.__c||A,T)),O==null&&A!=null&&(O=A),4&T.__u||S.__k===T.__k?d=Vk(T,d,e):typeof T.type=="function"&&E!==void 0?d=E:A&&(d=A.nextSibling),T.__u&=-7);return n.__e=O,d}function jU(e,t,n,a,r){var s,c,p,d,_,g=n.length,b=g,S=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(d=s+S,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?mg(null,c,null,null,null):x_(c)?mg(PE,{children:c},null,null,null):c.constructor==null&&c.__b>0?mg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,p=null,(_=c.__i=IU(c,n,d,b))!=-1&&(b--,(p=n[_])&&(p.__u|=2)),p==null||p.__v==null?(_==-1&&(r>g?S--:r<g&&S++),typeof c.type!="function"&&(c.__u|=4)):_!=d&&(_==d-1?S--:_==d+1?S++:(_>d?S--:S++,c.__u|=4))):e.__k[s]=null;if(b)for(s=0;s<g;s++)(p=n[s])!=null&&(2&p.__u)==0&&(p.__e==a&&(a=Tv(p)),Wk(p,p));return a}function Vk(e,t,n){var a,r;if(typeof e.type=="function"){for(a=e.__k,r=0;a&&r<a.length;r++)a[r]&&(a[r].__=e,t=Vk(a[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Tv(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function IU(e,t,n,a){var r,s,c=e.key,p=e.type,d=t[n];if(d===null&&e.key==null||d&&c==d.key&&p==d.type&&(2&d.__u)==0)return n;if(a>(d!=null&&(2&d.__u)==0?1:0))for(r=n-1,s=n+1;r>=0||s<t.length;){if(r>=0){if((d=t[r])&&(2&d.__u)==0&&c==d.key&&p==d.type)return r;r--}if(s<t.length){if((d=t[s])&&(2&d.__u)==0&&c==d.key&&p==d.type)return s;s++}}return-1}function kx(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||DU.test(t)?n:n+"px"}function ig(e,t,n,a,r){var s,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||kx(e.style,t,"");if(n)for(t in n)a&&n[t]==a[t]||kx(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace($k,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?a?n.u=a.u:(n.u=kE,e.addEventListener(t,s?Sw:Ow,s)):e.removeEventListener(t,s?Sw:Ow,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Nx(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=kE++;else if(t.t<n.u)return;return n(Ci.event?Ci.event(t):t)}}}function Gk(e,t,n,a,r,s,c,p,d,_){var g,b,S,T,A,O,E,C,j,U,L,V,$,H,Y,z,W,B=t.type;if(t.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),s=[p=t.__e=n.__e]),(g=Ci.__b)&&g(t);e:if(typeof B=="function")try{if(C=t.props,j="prototype"in B&&B.prototype.render,U=(g=B.contextType)&&a[g.__c],L=g?U?U.props.value:g.__:a,n.__c?E=(b=t.__c=n.__c).__=b.__E:(j?t.__c=b=new B(C,L):(t.__c=b=new vv(C,L),b.constructor=B,b.render=FU),U&&U.sub(b),b.props=C,b.state||(b.state={}),b.context=L,b.__n=a,S=b.__d=!0,b.__h=[],b._sb=[]),j&&b.__s==null&&(b.__s=b.state),j&&B.getDerivedStateFromProps!=null&&(b.__s==b.state&&(b.__s=Mf({},b.__s)),Mf(b.__s,B.getDerivedStateFromProps(C,b.__s))),T=b.props,A=b.state,b.__v=t,S)j&&B.getDerivedStateFromProps==null&&b.componentWillMount!=null&&b.componentWillMount(),j&&b.componentDidMount!=null&&b.__h.push(b.componentDidMount);else{if(j&&B.getDerivedStateFromProps==null&&C!==T&&b.componentWillReceiveProps!=null&&b.componentWillReceiveProps(C,L),!b.__e&&b.shouldComponentUpdate!=null&&b.shouldComponentUpdate(C,b.__s,L)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(b.props=C,b.state=b.__s,b.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(q){q&&(q.__=t)}),V=0;V<b._sb.length;V++)b.__h.push(b._sb[V]);b._sb=[],b.__h.length&&c.push(b);break e}b.componentWillUpdate!=null&&b.componentWillUpdate(C,b.__s,L),j&&b.componentDidUpdate!=null&&b.__h.push(function(){b.componentDidUpdate(T,A,O)})}if(b.context=L,b.props=C,b.__P=e,b.__e=!1,$=Ci.__r,H=0,j){for(b.state=b.__s,b.__d=!1,$&&$(t),g=b.render(b.props,b.state,b.context),Y=0;Y<b._sb.length;Y++)b.__h.push(b._sb[Y]);b._sb=[]}else do b.__d=!1,$&&$(t),g=b.render(b.props,b.state,b.context),b.state=b.__s;while(b.__d&&++H<25);b.state=b.__s,b.getChildContext!=null&&(a=Mf(Mf({},a),b.getChildContext())),j&&!S&&b.getSnapshotBeforeUpdate!=null&&(O=b.getSnapshotBeforeUpdate(T,A)),z=g,g!=null&&g.type===PE&&g.key==null&&(z=zk(g.props.children)),p=Uk(e,x_(z)?z:[z],t,n,a,r,s,c,p,d,_),b.base=t.__e,t.__u&=-161,b.__h.length&&c.push(b),E&&(b.__E=b.__=null)}catch(q){if(t.__v=null,d||s!=null)if(q.then){for(t.__u|=d?160:128;p&&p.nodeType==8&&p.nextSibling;)p=p.nextSibling;s[s.indexOf(p)]=null,t.__e=p}else for(W=s.length;W--;)NE(s[W]);else t.__e=n.__e,t.__k=n.__k;Ci.__e(q,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):p=t.__e=$U(n.__e,t,n,a,r,s,c,d,_);return(g=Ci.diffed)&&g(t),128&t.__u?void 0:p}function LU(e,t,n){for(var a=0;a<n.length;a++)RE(n[a],n[++a],n[++a]);Ci.__c&&Ci.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){Ci.__e(s,r.__v)}})}function zk(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:x_(e)?e.map(zk):Mf({},e)}function $U(e,t,n,a,r,s,c,p,d){var _,g,b,S,T,A,O,E=n.props,C=t.props,j=t.type;if(j=="svg"?r="http://www.w3.org/2000/svg":j=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(_=0;_<s.length;_++)if((T=s[_])&&"setAttribute"in T==!!j&&(j?T.localName==j:T.nodeType==3)){e=T,s[_]=null;break}}if(e==null){if(j==null)return document.createTextNode(C);e=document.createElementNS(r,j,C.is&&C),p&&(Ci.__m&&Ci.__m(t,s),p=!1),s=null}if(j==null)E===C||p&&e.data==C||(e.data=C);else{if(s=s&&ME.call(e.childNodes),E=n.props||xw,!p&&s!=null)for(E={},_=0;_<e.attributes.length;_++)E[(T=e.attributes[_]).name]=T.value;for(_ in E)if(T=E[_],_!="children"){if(_=="dangerouslySetInnerHTML")b=T;else if(!(_ in C)){if(_=="value"&&"defaultValue"in C||_=="checked"&&"defaultChecked"in C)continue;ig(e,_,null,T,r)}}for(_ in C)T=C[_],_=="children"?S=T:_=="dangerouslySetInnerHTML"?g=T:_=="value"?A=T:_=="checked"?O=T:p&&typeof T!="function"||E[_]===T||ig(e,_,T,E[_],r);if(g)p||b&&(g.__html==b.__html||g.__html==e.innerHTML)||(e.innerHTML=g.__html),t.__k=[];else if(b&&(e.innerHTML=""),Uk(t.type=="template"?e.content:e,x_(S)?S:[S],t,n,a,j=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&Tv(n,0),p,d),s!=null)for(_=s.length;_--;)NE(s[_]);p||(_="value",j=="progress"&&A==null?e.removeAttribute("value"):A!=null&&(A!==e[_]||j=="progress"&&!A||j=="option"&&A!=E[_])&&ig(e,_,A,E[_],r),_="checked",O!=null&&O!=e[_]&&ig(e,_,O,E[_],r))}return e}function RE(e,t,n){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Ci.__e(r,n)}}function Wk(e,t,n){var a,r;if(Ci.unmount&&Ci.unmount(e),(a=e.ref)&&(a.current&&a.current!=e.__e||RE(a,null,t)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(s){Ci.__e(s,t)}a.base=a.__P=null}if(a=e.__k)for(r=0;r<a.length;r++)a[r]&&Wk(a[r],t,n||typeof e.type!="function");n||NE(e.__e),e.__c=e.__=e.__e=void 0}function FU(e,t,n){return this.constructor(e,n)}ME=Fk.slice,Ci={__e:function(e,t,n,a){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,a||{}),c=r.__d),c)return r.__E=r}catch(p){e=p}throw e}},jk=0,vv.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Mf({},this.state),typeof e=="function"&&(e=e(Mf({},n),this.props)),e&&Mf(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Mx(this))},vv.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Mx(this))},vv.prototype.render=PE,Wp=[],Ik=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Lk=function(e,t){return e.__v.__b-t.__v.__b},Lg.__r=0,$k=/(PointerCapture)$|Capture$/i,kE=0,Ow=Nx(!1),Sw=Nx(!0);var Mm=function(){return Mm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Mm.apply(this,arguments)};function CE(e){var t=e.x,n=e.y,a=e.width,r=e.height,s=e.radius,c=e.className,p=t-a/2,d=n-r/2,_=Mm(Mm({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:p,y:d});return fn.h("rect",Mm({},_))}CE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var fv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(fv||(fv={}));var BU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Hp=function(){return Hp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Hp.apply(this,arguments)},UU=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(p){c={error:p}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},VU=fn.LogicFlowUtil.StepDrag,GU=function(e){BU(t,e);function t(n){var a=e.call(this)||this;return a.updatePosition=function(r){var s=r.deltaX,c=r.deltaY,p=a.nodeModel,d=p.x,_=p.y;a.nodeModel.x=d+s/2,a.nodeModel.y=_+c/2,a.nodeModel.moveText(s/2,c/2)},a.getResize=function(r){var s=r.index,c=r.deltaX,p=r.deltaY,d=r.width,_=r.height,g=r.PCTResizeInfo,b=r.pct,S=b===void 0?1:b,T=r.freezeWidth,A=T===void 0?!1:T,O=r.freezeHeight,E=O===void 0?!1:O,C={width:d,height:_,deltaX:c,deltaY:p};if(g){var j=4,U=0,L=0;switch(s){case 0:L=(c*-1-p)/j;break;case 1:L=(c-p)/j;break;case 2:L=(c+p)/j;break;case 3:L=(c*-1+p)/j;break}L!==0&&(U=Math.round(L/g.ResizeBasis.basisHeight*1e5)/1e3),g.ResizePCT.widthPCT=Math.max(Math.min(g.ResizePCT.widthPCT+U,g.ScaleLimit.maxScaleLimit),g.ScaleLimit.minScaleLimit),g.ResizePCT.hightPCT=Math.max(Math.min(g.ResizePCT.hightPCT+U,g.ScaleLimit.maxScaleLimit),g.ScaleLimit.minScaleLimit);var V=Math.round(g.ResizePCT.widthPCT*g.ResizeBasis.basisWidth/100),$=Math.round(g.ResizePCT.hightPCT*g.ResizeBasis.basisHeight/100);switch(s){case 0:c=d-V,p=_-$;break;case 1:c=V-d,p=_-$;break;case 2:c=V-d,p=$-_;break;case 3:c=d-V,p=$-_;break}return C.width=V,C.height=$,C.deltaX=c/S,C.deltaY=p/S,C}switch(s){case 0:C.width=A?d:d-c*S,C.height=E?_:_-p*S;break;case 1:C.width=A?d:d+c*S,C.height=E?_:_-p*S;break;case 2:C.width=A?d:d+c*S,C.height=E?_:_+p*S;break;case 3:C.width=A?d:d-c*S,C.height=E?_:_+p*S;break}return C},a.updateEdgePointByAnchors=function(){var r=a.nodeModel,s=r.id,c=r.anchors,p=a.getNodeEdges(s);p.sourceEdges.forEach(function(d){var _=c.find(function(g){return g.id===d.sourceAnchorId});d.updateStartPoint({x:_.x,y:_.y})}),p.targetEdges.forEach(function(d){var _=c.find(function(g){return g.id===d.targetAnchorId});d.updateEndPoint({x:_.x,y:_.y})})},a.updateRect=function(r){var s=r.deltaX,c=r.deltaY,p=a.nodeModel,d=p.id,_=p.x,g=p.y,b=p.width,S=p.height,T=p.radius,A=p.PCTResizeInfo,O=a.nodeModel,E=O.minWidth,C=O.minHeight,j=O.maxWidth,U=O.maxHeight,L=a.index,V=E===j,$=C===U,H=a.getResize({index:L,deltaX:s,deltaY:c,width:b,height:S,PCTResizeInfo:A,pct:1,freezeWidth:V,freezeHeight:$});if(H.width<E||H.width>j||H.height<C||H.height>U){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:V?0:H.deltaX,deltaY:$?0:H.deltaY}),a.nodeModel.width=H.width,a.nodeModel.height=H.height,a.nodeModel.setProperties({nodeSize:{width:H.width,height:H.height}}),a.getNodeEdges(d);var Y={x:_,y:g,width:b,height:S,radius:T},z={x:a.nodeModel.x,y:a.nodeModel.y,width:a.nodeModel.width,height:a.nodeModel.height,radius:T};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Y,afterNode:z})},a.updateEllipse=function(r){var s=r.deltaX,c=r.deltaY,p=a.nodeModel,d=p.id,_=p.rx,g=p.ry,b=p.x,S=p.y,T=p.PCTResizeInfo,A=a.index,O=a.nodeModel,E=O.minWidth,C=O.minHeight,j=O.maxWidth,U=O.maxHeight,L=E===j,V=C===U,$=_,H=g,Y=a.getResize({index:A,deltaX:s,deltaY:c,width:$,height:H,PCTResizeInfo:T,pct:1/2,freezeWidth:L,freezeHeight:V});if(Y.width<E/2||Y.width>j/2||Y.height<C/2||Y.height>U/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:L?0:Y.deltaX,deltaY:V?0:Y.deltaY}),a.nodeModel.rx=Y.width,a.nodeModel.ry=Y.height,a.nodeModel.setProperties({nodeSize:{rx:Y.width,ry:Y.height}}),a.getNodeEdges(d);var z={x:b,y:S},W={rx:Y.width,ry:Y.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Hp(Hp({},z),{rx:_,ry:g}),afterNode:W})},a.updateDiamond=function(r){var s=r.deltaX,c=r.deltaY,p=a.nodeModel;p.id;var d=p.rx,_=p.ry,g=p.x,b=p.y,S=p.PCTResizeInfo,T=a.index,A=a.nodeModel,O=A.minWidth,E=A.minHeight,C=A.maxWidth,j=A.maxHeight,U=O===C,L=E===j,V=d,$=_,H=a.getResize({index:T,deltaX:s,deltaY:c,width:V,height:$,PCTResizeInfo:S,pct:1/2,freezeWidth:U,freezeHeight:L});if(H.width<O/2||H.width>C/2||H.height<E/2||H.height>j/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:U?0:H.deltaX,deltaY:L?0:H.deltaY}),a.nodeModel.rx=H.width,a.nodeModel.ry=H.height,a.nodeModel.setProperties({nodeSize:{rx:H.width,ry:H.height}});var Y={x:g,y:b,rx:d,ry:_},z={rx:H.width,ry:H.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Y,afterNode:z})},a.eventEmit=function(r){var s=r.beforeNode,c=r.afterNode,p=a.nodeModel,d=p.id,_=p.modelType,g=p.type,b=Hp({id:d,modelType:_,type:g},s),S=Hp({id:d,modelType:_,type:g},c);a.graphModel.eventCenter.emit("node:resize",{oldNodeSize:b,newNodeSize:S})},a.onDragging=function(r){var s,c=r.deltaX,p=r.deltaY,d=a.graphModel.transformModel,_=a.nodeModel.modelType;s=UU(d.fixDeltaXY(c,p),2),c=s[0],p=s[1],_===fv.RECT_NODE||_===fv.HTML_NODE?a.updateRect({deltaX:c,deltaY:p}):_===fv.ELLIPSE_NODE?a.updateEllipse({deltaX:c,deltaY:p}):_===fv.DIAMOND_NODE&&a.updateDiamond({deltaX:c,deltaY:p})},a.onDragEnd=function(){var r=a.graphModel.gridSize,s=r===void 0?1:r,c=s*Math.round(a.nodeModel.x/s),p=s*Math.round(a.nodeModel.y/s);a.nodeModel.moveTo(c,p),a.updateEdgePointByAnchors()},a.index=n.index,a.nodeModel=n.model,a.graphModel=n.graphModel,a.state={},a.dragHandler=new VU({onDragging:a.onDragging,onDragEnd:a.onDragEnd,step:1}),a}return t.prototype.getNodeEdges=function(n){for(var a=this.graphModel,r=a.edges,s=[],c=[],p=0;p<r.length;p++){var d=r[p];d.sourceNodeId===n?s.push(d):r[p].targetNodeId===n&&c.push(d)}return{sourceEdges:s,targetEdges:c}},t.prototype.render=function(){var n=this.props,a=n.x,r=n.y,s=n.index,c=n.model,p=c.getControlPointStyle();return Tm("g",{className:"lf-resize-control-"+s},Tm(CE,Hp({className:"lf-node-control"},{x:a,y:r},p,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(vv),zU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),$g=function(){return $g=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$g.apply(this,arguments)},A_=function(e){zU(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,a=n.model,r=n.graphModel,s=a.x,c=a.y,p=a.width,d=a.height,_={minX:s-p/2,minY:c-d/2,maxX:s+p/2,maxY:c+d/2},g=_.minX,b=_.minY,S=_.maxX,T=_.maxY,A=[{x:g,y:b},{x:S,y:b},{x:S,y:T},{x:g,y:T}];return A.map(function(O,E){return Tm(GU,$g({index:E},O,{model:a,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,p=n.getResizeOutlineStyle();return Tm(CE,$g({fill:"none"},p,{x:a,y:r,width:s,height:c}))},t.prototype.render=function(){return Tm("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(vv),Hk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),WU=function(e){Hk(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,a){console.log(n,a)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(fn.RectNodeModel),HU=function(e){Hk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return fn.h(A_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return fn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(fn.RectNode),Xk={view:HU,model:WU},qk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){qk(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(fn.EllipseNodeModel);(function(e){qk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return fn.h(A_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model,r=n.graphModel.editConfigModel.isSilentMode;return fn.h("g",null,this.getResizeShape(),a.isSelected&&!r?this.getControlGroup():"")},t})(fn.EllipseNode);var Aw=function(){return Aw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Aw.apply(this,arguments)};function XU(e){var t=e.fillOpacity,n=t===void 0?1:t,a=e.strokeWidth,r=a===void 0?1:a,s=e.strokeOpacity,c=s===void 0?1:s,p=e.fill,d=p===void 0?"transparent":p,_=e.stroke,g=_===void 0?"#000":_,b=e.points,S=e.className,T=S===void 0?"lf-basic-shape":S,A={fill:d,fillOpacity:n,strokeWidth:r,stroke:g,strokeOpacity:c,points:"",className:T};return A.points=b.map(function(O){return O.join(",")}).join(" "),fn.h("polygon",Aw({},A))}var Yk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Tw=function(){return Tw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Tw.apply(this,arguments)};(function(e){Yk(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(fn.DiamondNodeModel);(function(e){Yk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return fn.h(A_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,a=n.points,r=n.getNodeStyle();return fn.h("g",null,fn.h(XU,Tw({},r,{points:a})))},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return fn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t})(fn.DiamondNode);var Kk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),qU=function(e){Kk(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(fn.HtmlNodeModel),YU=function(e){Kk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return fn.h(A_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return fn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(fn.HtmlNode),Zk={view:YU,model:qU},Jk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Fg=function(){return Fg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fg.apply(this,arguments)},KU=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(p){c={error:p}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},ZU=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(KU(arguments[t]));return e},Px=500,Rx=300,JU=-1e4;(function(e){Jk(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=Px,n.unfoldedHight=Rx,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var a=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=Px,this.height=Rx,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=JU,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){a.isFolded&&a.foldGroup(a.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var a=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(s){var c=a.graphModel.getElement(s),p=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var d=a.childrenLastFoldStatus[s];d!==void 0&&d!==c.isFolded&&c.foldGroup(d)}a.childrenLastFoldStatus[s]=p,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var a=e.prototype.getAnchorStyle.call(this,n);return a.stroke="transparent",a.fill="transparent",a.hover.fill="transparent",a.hover.stroke="transparent",a},t.prototype.foldEdge=function(n,a){var r=this;a.forEach(function(s,c){var p=s.id,d=s.sourceNodeId,_=s.targetNodeId,g=s.startPoint,b=s.endPoint,S=s.type,T=s.text,A=s.getProperties(),O={id:p+"__"+c,sourceNodeId:d,targetNodeId:_,startPoint:g,endPoint:b,type:S,properties:A,text:T==null?void 0:T.value};s.virtual&&r.graphModel.deleteEdgeById(s.id);var E=r.graphModel.group.getNodeGroup(_);E||(E=r.graphModel.getNodeModelById(_));var C=r.graphModel.group.getNodeGroup(d);C||(C=r.graphModel.getNodeModelById(d)),n&&s.visible!==!1&&(r.children.has(d)||r.id===d?(O.startPoint=void 0,O.sourceNodeId=r.id):(O.endPoint=void 0,O.targetNodeId=r.id),(E.id!==r.id||C.id!==r.id)&&r.createVirtualEdge(O),s.visible=!1),!n&&s.visible===!1&&(E&&E.isGroup&&E.isFolded?(O.targetNodeId=E.id,O.endPoint=void 0,r.createVirtualEdge(O)):C&&C.isGroup&&C.isFolded?(O.sourceNodeId=C.id,O.startPoint=void 0,r.createVirtualEdge(O)):s.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var a=this.graphModel.addEdge(n);a.virtual=!0,a.text.editable=!1,a.isFoldedEdge=!0},t.prototype.isInRange=function(n){var a=n.x1,r=n.y1,s=n.x2,c=n.y2;return a>=this.x-this.width/2&&s<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var a=n.x1,r=n.y1,s=n.x2,c=n.y2;return{x:a>=this.x-this.width/2&&s<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,a=e.prototype.getData.call(this);a.children=[],this.children.forEach(function(s){var c=n.graphModel.getNodeModelById(s);c&&!c.virtual&&a.children.push(s)});var r=a.properties;return delete r.groupAddable,delete r.isFolded,a},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=ZU(this.children),n.isGroup=!0;var a=n.properties;return delete a.groupAddable,a.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(Xk.model);(function(e){Jk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,a=n.resizable,r=n.properties;return a&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,a=n.width,r=n.height,s=n.x,c=n.y,p=n.radius,d=n.properties;if(!d.groupAddable)return null;var _=this.props.model.getNodeStyle().strokeWidth,g=this.props.model.getAddableOutlineStyle(),b=a+_+8,S=r+_+8;return fn.h("rect",Fg(Fg({},g),{width:b,height:S,x:s-b/2,y:c-S/2,rx:p,ry:p}))},t.prototype.getFoldIcon=function(){var n=this.props.model,a=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var s=fn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" M"+(a+7)+","+(r+2)+" "+(a+7)+","+(r+10):"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" "});return fn.h("g",{},[fn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),s])},t.prototype.getResizeShape=function(){return fn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(Xk.view);var Cx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),km=function(){return km=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},km.apply(this,arguments)};function QU(e){var t=function(a){Cx(r,a);function r(s,c){var p=this;s.id||(s.id="Flow_"+CU());var d=km(km(km({},{}),s.properties),{isDefaultFlow:!1});return s.properties=d,p=a.call(this,s,c)||this,p}return r.extendKey="SequenceFlowModel",r}(fn.PolylineEdgeModel),n=function(a){Cx(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var s=this.props.model,c=s.properties.isDefaultFlow;return c?fn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):fn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(fn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}QU();var Dx={width:40,height:40},jx={width:40,height:40},Ix={width:100,height:80},Bg={width:100,height:80},Lx={width:100,height:80},$x={width:100,height:80},Fx={width:100,height:80},Bx={width:100,height:80},Ux={width:100,height:80},Vx={width:100,height:80},ml=function(){};ml.ObjTree=function(){return this};ml.ObjTree.VERSION="0.23";ml.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;ml.ObjTree.prototype.attr_prefix="-";ml.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};ml.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var s=this,c=n,p=a.onComplete;a.onComplete=function(g){var b;g&&g.responseXML&&g.responseXML.documentElement&&(b=s.parseDOM(g.responseXML.documentElement)),c(b,g),p&&p(g)}}else a.asynchronous=!1;var d;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var _=new HTTP.Request(a);_&&(d=_.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var _=new Ajax.Request(e,a);_&&(d=_.transport)}if(n)return d;if(d&&d.responseXML&&d.responseXML.documentElement)return this.parseDOM(d.responseXML.documentElement)};ml.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var a={};a[e.nodeName]=n,n=a}return n}};ml.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(s=this.attr_prefix+s,typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}if(e.childNodes&&e.childNodes.length){var p=!0;n&&(p=!1);for(var r=0;r<e.childNodes.length&&p;r++){var d=e.childNodes[r].nodeType;d===3||d===4||d===8||(p=!1)}if(p){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}}else n===null&&(n={});return n}};ml.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=a):n===1?e[t]=a:n===2?e[t]=[e[t],a]:e[t][e[t].length]=a};ml.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};ml.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!==this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor===Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=a.join(""),p=n.join("");return typeof e>"u"||e==null||(n.length>0?p.match(/\n/)?p="<"+e+c+`>
`+p+"</"+e+`>
`:p="<"+e+c+">"+p+"</"+e+`>
`:p="<"+e+c+` />
`),p};ml.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};ml.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};ml.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var eV=function(e){return new ml.ObjTree().parseXML(e)};function Qk(e){return Object.prototype.toString.call(e)}function Gx(e){return"  ".repeat(e)}function Ug(e){return Qk(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var a=n;return n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=Ug(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Ug(t)}):e}function tV(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Ug(e)).replace(/"/g,"'")}return t}var zx=`	
`;function yg(e,t,n){var a=Gx(n),r="",s=zx+a;if(t==="-json")return"";if(t==="#text")return s+e;if(t==="#cdata-section")return s+"<![CDATA["+e+"]]>";if(t==="#comment")return s+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+tV(e)+'"';if(Array.isArray(e))r+=e.map(function(_){return yg(_,t,n+1)}).join("");else if(Qk(e)==="[object Object]"){var c=Object.keys(e),p="",d=e["-json"]?zx+Gx(n+1)+e["-json"]:"";r+=(n===0?"":s)+"<"+t,c.forEach(function(_){_.charAt(0)==="-"?p+=yg(e[_],_,n+1):d+=yg(e[_],_,n+1)}),r+=p+(d!==""?">"+d+s+"</"+t+">":" />")}else r+=s+"<"+t+">"+e.toString()+"</"+t+">";return r}function nV(e){var t="";for(var n in e)t+=yg(e[n],n,0);return t}var rV=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Mw=function(){return Mw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Mw.apply(this,arguments)},Wx=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},DE=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Uv=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(p){c={error:p}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},mv=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Uv(arguments[t]));return e},pl;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(pl||(pl={}));var eN=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],oV=["properties","startPoint","endPoint","pointsList"],Vg={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},tN=function(e,t){var n=Object.keys(t||{});return n.forEach(function(a){if(e[a]){var r=t[a],s=r.in,c=r.out;s&&(e[a].in=s),c&&(e[a].out=c)}else e[a]=t[a]}),e},Ds={"bpmn:startEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Ds[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Ds[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Ds[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Ds[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,a=t.condition;return a?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+a+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+a+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,a=t.timerValue,r=t.definitionId,s=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+a+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&a?">"+s()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,a,r,s,c=e,p=t["-id"],d="",_="";try{for(var g=DE(Object.keys(t)),b=g.next();!b.done;b=g.next()){var S=b.value;S.includes("bpmn:")&&(r=Uv(S.split(":"),2),d=r[1],_=(s=t[S])===null||s===void 0?void 0:s["#text"])}}catch(T){n={error:T}}finally{try{b&&!b.done&&(a=g.return)&&a.call(g)}finally{if(n)throw n.error}}return{"-definitionId":p,"-definitionType":c,"-timerType":d,"-timerValue":_}}},"bpmn:conditionExpression":{in:function(e,t){var n,a="",r="";return t["#cdata-section"]?(r="cdata",a=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",a=t["#text"]),{"-condition":a,"-expressionType":r}}}};function iV(e){var t=e??{},n=t.retainedAttrsFields,a=t.excludeFields,r=t.transformer,s=new Set(mv(oV,n||[])),c={in:new Set(mv(Vg.in,(a==null?void 0:a.in)||[])),out:new Set(mv(Vg.out,(a==null?void 0:a.out)||[]))};return Ds=tN(Ds,r),function(p){var d=p.nodes,_=p.edges;function g(b,S){var T,A,O;if((b==null?void 0:b.flag)!==1){var E;if((E=Ds[b.type])&&E.out){var C=E.out(b),j=Object.keys(C);j.length>0&&j.forEach(function(W){b[W]=C[W]})}b!=null&&b.children&&(b.children=b.children.map(function(W){var B=d.find(function(q){return q.id===W})||_.find(function(q){return q.id===W});return B||{}}));var U={};if(typeof b=="string")return b;if(Array.isArray(b))return b.map(function(W){return g(W,"")}).filter(function(W){return W!=null});try{for(var L=DE(Object.entries(b)),V=L.next();!V.done;V=L.next()){var $=Uv(V.value,2),H=$[0],Y=$[1];if(((O=Y)===null||O===void 0?void 0:O.flag)===1)return;var z=[S,H].filter(function(W){return W}).join(".");c.out.has(z)||(typeof Y!="object"?H.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(H)?U[H]=Y:U["-"+H]=Y:s.has(z)?U["-"+H]=g(Y,z):U[H]=g(Y,z))}}catch(W){T={error:W}}finally{try{V&&!V.done&&(A=L.return)&&A.call(L)}finally{if(T)throw T.error}}return U}}return g(p,"")}}function Gg(e){var t,n,a={};try{for(var r=DE(Object.entries(e)),s=r.next();!s.done;s=r.next()){var c=Uv(s.value,2),p=c[0],d=c[1];p.indexOf("-")===0?a[p.substring(1)]=Ug(d):typeof d=="string"?a[p]=d:Object.prototype.toString.call(d)==="[object Object]"?a[p]=Gg(d):Array.isArray(d)?a[p]=d.map(function(_){return Gg(_)}):a[p]=d}}catch(_){t={error:_}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a}function aV(e,t,n){var a,r=new Map,s=iV(n)(t);s.nodes.forEach(function(p){var d=p["-id"],_=p["-type"],g=p.text,b=p.children,S=Wx(p,["-id","-type","text","children"]),T={"-id":d};g!=null&&g["-value"]&&(T["-name"]=g["-value"]),S["-json"]&&(T["-json"]=S["-json"]),S["-properties"]&&Object.assign(T,S["-properties"]),b&&(T.children=b),e[_]||(e[_]=[]),e[_].push(T),r.set(d,T)});var c=s.edges.map(function(p){var d=p["-id"];p["-type"];var _=p["-sourceNodeId"],g=p["-targetNodeId"],b=p.text,S=Wx(p,["-id","-type","-sourceNodeId","-targetNodeId","text"]),T=r.get(g);T["bpmn:incoming"]||(T["bpmn:incoming"]=[]),T["bpmn:incoming"].push(d);var A={"-id":d,"-sourceRef":_,"-targetRef":g};return b!=null&&b["-value"]&&(A["-name"]=b["-value"]),S["-json"]&&(A["-json"]=S["-json"]),S["-properties"]&&Object.assign(A,S["-properties"]),A});return t.edges.forEach(function(p){var d=p.sourceNodeId,_=p.id,g=r.get(d);g["bpmn:outgoing"]||(g["bpmn:outgoing"]=[]),g["bpmn:outgoing"].push(_)}),(a=e["bpmn:subProcess"])===null||a===void 0||a.forEach(function(p){var d={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},_=[];p.children.forEach(function(O){var E,C=r.get(O["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(U){C[U]&&C[U].forEach(function(L){d[U].add(L)})});var j=(E=e[O["-type"]])===null||E===void 0?void 0:E.findIndex(function(U){return U["-id"]===O["-id"]});j>=0&&e[O["-type"]].splice(j,1),r.delete(O["-id"]),p[O["-type"]]||(p[O["-type"]]=[]),p[O["-type"]].push(C)});var g=d["bpmn:incoming"],b=d["bpmn:outgoing"];b.forEach(function(O){g.has(O)&&_.push(O)});for(var S=function(O){var E=c.findIndex(function(C){return C["-id"]===_[O]});E>=0?(p["bpmn:sequenceFlow"]||(p["bpmn:sequenceFlow"]=[]),p["bpmn:sequenceFlow"].push(c[E]),c.splice(E,1)):O++,T=O},T,A=0;A<_.length;)S(A),A=T;delete p.children}),e[pl.FLOW]=c,e}function lV(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,s=n.pointsList.map(function(p){var d=p.x,_=p.y;return{"-x":d,"-y":_}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,s=100,c=80,p=n.x,d=n.y,_=jl.shapeConfigMap.get(n.type);_&&(s=_.width,c=_.height),p-=s/2,d-=c/2;var g={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":p,"-y":d,"-width":s,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(g["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),g})}var sV=["bpmn:incoming","bpmn:outgoing"];function uV(e,t){var n=[],a=[],r=new Map,s=t??{},c=s.transformer,p=s.excludeFields,d={in:new Set(mv(Vg.in,(p==null?void 0:p.in)||[])),out:new Set(mv(Vg.out,(p==null?void 0:p.out)||[]))};Ds=tN(Ds,c);var _=e["bpmn:definitions"];if(_){var g=_["bpmn:process"];(function(S,T){T.forEach(function(A){try{Object.keys(S).forEach(function(O){try{A(O)}catch(E){console.error(E)}})}catch(O){console.error(O)}})})(g,[function(S){function T(O){O["-children"]||(O["-children"]=[]),Object.keys(O).forEach(function(E){var C;E.indexOf("bpmn:")===0&&!sV.includes(E)&&(g[E]||(g[E]=[]),!Array.isArray(g[E])&&(g[E]=[g[E]]),Array.isArray(O[E])?(C=g[E]).push.apply(C,mv(O[E])):g[E].push(O[E]),Array.isArray(O[E])?O[E].forEach(function(j){!E.includes("Flow")&&O["-children"].push(j["-id"])}):!E.includes("Flow")&&O["-children"].push(O[E]["-id"]),delete O[E])})}if(S==="bpmn:subProcess"){var A=g[S];Array.isArray(A)?A.forEach(function(O){S==="bpmn:subProcess"&&T(O)}):T(A)}},function(S){var T=function(O){Object.keys(O).forEach(function(E){var C,j;if(E.includes("bpmn:")){var U={};Ds[E]&&Ds[E].in?(U=(j=(C=Ds[E]).in)===null||j===void 0?void 0:j.call(C,E,ue.cloneDeep(O[E])),delete O[E]):A(O[E]);var L=void 0;(L=Reflect.ownKeys(U)).length>0&&L.forEach(function(V){Reflect.set(O,V,U[V])})}})};function A(O){r.set(O["-id"],O),Array.isArray(O)?O.forEach(function(E){A(E)}):typeof O=="object"&&T(O)}A(g[S])},function(S){if(S.indexOf("bpmn:")===0){var T=g[S];if(S==="bpmn:sequenceFlow"){var A=_["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];a=fV(T,A)}else{var O=_["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(S==="bpmn:boundaryEvent"){var E=g[S],C=function(j){var U=j["-attachedToRef"],L=r.get(U);L["-boundaryEvents"]||(L["-boundaryEvents"]=[]),L["-boundaryEvents"].push(j["-id"])};Array.isArray(E)?E.forEach(function(j){C(j)}):C(E)}n=n.concat(cV(T,O,S))}}}])}var b=function(S,T,A){Object.keys(S).forEach(function(O){var E=A?A+"."+O:O;T.has(E)?delete S[O]:typeof S[O]=="object"&&b(S[O],T,E)})};return n.forEach(function(S){var T,A;if(!((T=t==null?void 0:t.mapping)===null||T===void 0)&&T.in){var O=(A=t==null?void 0:t.mapping)===null||A===void 0?void 0:A.in,E=S.type;O[E]&&(S.type=O[E])}b(S,d.in,"")}),a.forEach(function(S){var T,A;if(!((T=t==null?void 0:t.mapping)===null||T===void 0)&&T.in){var O=(A=t==null?void 0:t.mapping)===null||A===void 0?void 0:A.in,E=S.type;O[E]&&(S.type=O[E])}b(S,d.in,"")}),{nodes:n,edges:a}}function cV(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var p;Array.isArray(t)?p=t.find(function(_){return _["-bpmnElement"]===c["-id"]}):p=t;var d=Hx(p,n,c);a.push(d)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=Hx(r,n,e);a.push(s)}return a}function Hx(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-children"],c=n["-name"],p=jl.shapeConfigMap.get(t);p&&(a+=p.width/2,r+=p.height/2);var d={};Object.entries(n).forEach(function(S){var T=Uv(S,2),A=T[0],O=T[1];eN.includes(A)||(d[A]=O)}),d=Gg(d);var _;if(c&&(_={x:a,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];_.x=Number(g["-x"])+Number(g["-width"])/2,_.y=Number(g["-y"])+Number(g["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:a,y:r,properties:d};return s&&(b.children=s),_&&(b.text=_),b}function fV(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(Xx(s,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(Xx(a,e))}return n}function Xx(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;a.split(`
`).forEach(function(_){s<_.length&&(s=_.length)}),n={value:a,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(_){var g=Uv(_,2),b=g[0],S=g[1];eN.includes(b)||(c[b]=S)}),c=Gg(c);var p=e["di:waypoint"].map(function(_){return{x:Number(_["-x"]),y:Number(_["-y"])}}),d={id:t["-id"],type:pl.FLOW,pointsList:p,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(d.text=n),d}var jl=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,s){var c,p,d=Mw({},n.processAttributes);aV(d,r,s);var _={"-id":"BPMNPlane_1","-bpmnElement":d["-id"]};lV(_,r);var g=n.definitionAttributes;g["bpmn:process"]=d,g["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":_};var b={"bpmn:definitions":g};if(!((c=s==null?void 0:s.mapping)===null||c===void 0)&&c.out){var S=(p=s==null?void 0:s.mapping)===null||p===void 0?void 0:p.out,T=function(A){Array.isArray(A)&&A.forEach(function(O){return T(O)}),typeof A=="object"&&Object.keys(A).forEach(function(O){var E;(E=S[O])?(A[E]=ue.cloneDeep(A[O]),delete A[O],T(A[E])):T(A[O])})};T(b)}return b},this.adapterIn=function(r,s){if(r)return uV(r,s)},a.adapterIn=this.adapterIn,a.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();jl.shapeConfigMap.set(pl.START,{width:Dx.width,height:Dx.height});jl.shapeConfigMap.set(pl.END,{width:jx.width,height:jx.height});jl.shapeConfigMap.set(pl.INTERMEDIATE_CATCH,{width:Bg.width,height:Bg.height});jl.shapeConfigMap.set(pl.INTERMEDIATE_THROW,{width:Bg.width,height:Bg.height});jl.shapeConfigMap.set(pl.BOUNDARY,{width:Ix.width,height:Ix.height});jl.shapeConfigMap.set(pl.PARALLEL_GATEWAY,{width:Lx.width,height:Lx.height});jl.shapeConfigMap.set(pl.INCLUSIVE_GATEWAY,{width:$x.width,height:$x.height});jl.shapeConfigMap.set(pl.EXCLUSIVE_GATEWAY,{width:Fx.width,height:Fx.height});jl.shapeConfigMap.set(pl.SYSTEM,{width:Bx.width,height:Bx.height});jl.shapeConfigMap.set(pl.USER,{width:Ux.width,height:Ux.height});jl.shapeConfigMap.set(pl.SUBPROCESS,{width:Vx.width,height:Vx.height});(function(e){rV(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(c){var p=eV(c);return a.adapterIn(p,a.props)},a.adapterXmlOut=function(c){var p=a.adapterOut(c,a.props);return nV(p)};var r=n.lf,s=n.props;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a.props=s,a}return t.pluginName="BPMNAdapter",t})(jl);var qx;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(qx||(qx={}));var dV=function(){function e(t){var n=this,a=t.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(s){var c=n.lf.getPointByClient(s.clientX,s.clientY).domOverlayPosition,p=c.x,d=c.y;n.endPoint={x:p,y:d};var _=n.startPoint,g=_.x,b=_.y,S=n.wrapper.style,T=g,A=b,O=p-g,E=d-b;p<g&&(T=p,O=g-p),d<b&&(A=d,E=b-d),S.left=T+"px",S.top=A+"px",S.width=O+"px",S.height=E+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",n.__draw),document.removeEventListener("mouseup",n.__drawOff),n.wrapper.oncontextmenu=null,n.__domContainer.removeChild(n.wrapper);var s=n.startPoint,c=s.x,p=s.y,d=n.endPoint,_=d.x,g=d.y;if(!(Math.abs(_-c)<10&&Math.abs(g-p)<10)){var b=[Math.min(c,_),Math.min(p,g)],S=[Math.max(c,_),Math.max(p,g)],T=n.lf.graphModel.getAreaElement(b,S,n.isWholeEdge,n.isWholeNode,!0),A=n.lf.graphModel.group;T.forEach(function(O){(!A||!A.getNodeGroup(O.id))&&n.lf.selectElementById(O.id,!0)}),n.lf.emit("selection:selected",T)}},this.lf=a;var r=a.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=r,a.openSelectionSelect=function(){n.openSelectionSelect()},a.closeSelectionSelect=function(){n.closeSelectionSelect()}}return e.prototype.render=function(t,n){var a=this;this.__domContainer=n,t.on("blank:mousedown",function(r){var s=r.e,c=t.getEditConfig();if(!(!c.stopMoveGraph||a.__disabled)){var p=s.button===2;if(!p){var d=t.getPointByClient(s.clientX,s.clientY).domOverlayPosition,_=d.x,g=d.y;a.startPoint={x:_,y:g},a.endPoint={x:_,y:g};var b=document.createElement("div");b.className="lf-selection-select",b.oncontextmenu=function(T){T.preventDefault()},b.style.top=a.startPoint.y+"px",b.style.left=a.startPoint.x+"px",n.appendChild(b),a.wrapper=b,document.addEventListener("mousemove",a.__draw),document.addEventListener("mouseup",a.__drawOff)}}})},e.prototype.setSelectionSense=function(t,n){t===void 0&&(t=!0),n===void 0&&(n=!0),this.isWholeEdge=t,this.isWholeNode=n},e.prototype.openSelectionSelect=function(){var t=this.lf.getEditConfig().stopMoveGraph;t||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},e.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},e.prototype.open=function(){this.__disabled=!1},e.prototype.close=function(){this.__disabled=!0},e.pluginName="selectionSelect",e}(),nN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),dv=function(){return dv=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dv.apply(this,arguments)},Nm=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(p){c={error:p}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},pV={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function hV(e){for(var t=e,n=1;n<t.length-1;){var a=Nm(t[n-1],2),r=a[0],s=a[1],c=Nm(t[n],2),p=c[0],d=c[1],_=Nm(t[n+1],2),g=_[0],b=_[1];r===p&&p===g||s===d&&d===b?t.splice(n,1):n++}return t}function vV(e,t,n,a){var r=[e[0],e[1]],s=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=a,s[0]+=a):t==="lb"&&(r[0]+=a,s[1]+=a),[r,s];case"tr":return t==="tl"?(r[1]+=a,s[0]-=a):t==="rb"&&(r[0]-=a,s[1]+=a),[r,s];case"bl":return t==="br"?(r[1]-=a,s[0]+=a):t==="lt"&&(r[0]+=a,s[1]-=a),[r,s];case"br":return t==="bl"?(r[1]-=a,s[0]-=a):t==="rt"&&(r[0]-=a,s[1]-=a),[r,s];default:return[]}}function mV(e,t,n,a){var r,s="",c="";e[0]===t[0]?s=e[1]>t[1]?"t":"b":e[1]===t[1]&&(s=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var p=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,a)||1/5*a,d=""+s+c,_=pV[d]||"-",g="L "+e[0]+" "+e[1];if(_==="-")g+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var b=Nm(vV(t,d,_,p),2),S=b[0],T=b[1];S&&T&&(g+="L "+S[0]+" "+S[1]+" Q "+t[0]+" "+t[1]+" "+T[0]+" "+T[1],r=Nm(T,2),t[0]=r[0],t[1]=r[1])}return g}function yV(e,t){var n=0,a="";if(e.length===2)a+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(a+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],s=e[n],c=e[n+++1];a+=mV(r,s,c,t)}a+="L "+e[n][0]+" "+e[n][1]}return a}(function(e){nN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,a=n.points,r=n.isAnimation,s=n.arrowConfig,c=n.radius,p=c===void 0?5:c,d=n.getEdgeStyle(),_=n.getEdgeAnimationStyle(),g=hV(a.split(" ").map(function(T){return T.split(",").map(function(A){return+A})})),b=yV(g,p),S=dv(dv(dv({style:r?_:{}},d),s),{fill:"none"});return fn.h("path",dv({d:b},S))},t})(fn.PolylineEdge);(function(e){nN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(fn.PolylineEdgeModel);let T_=!1;const Mv=oh({});function rN(e,t,n,a,r,s,c){s||(s=(p,d)=>({nodeModel:p,graph:d})),c||(c=(p,d)=>({getNode:()=>p,getGraph:()=>d})),T_&&(Mv[e]=qj($n({render:()=>xv(Yj,{to:n},[xv(t,s(a,r))]),provide:()=>c(a,r)})))}function oN(e){T_&&delete Mv[e]}function gV(){Object.keys(Mv).forEach(e=>{delete Mv[e]})}function zg(){return T_}function _V(){return T_=!0,$n({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Mv).forEach(n=>{t.push(Mv[n])}),xv(tr,{},t.map(n=>xv(n)))}}})}class _o extends Zk.view{constructor(n,a){super(n);ha(this,"isMounted");ha(this,"r");ha(this,"component");ha(this,"app");ha(this,"root");ha(this,"VueNode");ha(this,"up_node_field_dict");this.component=a,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender?delete n.model.properties.noRender:n.model.properties.nodeName=this.getNodeName(n.graphModel.nodes.filter(r=>r.id!==n.model.id),n.model.properties.nodeName),n.model.properties.config=this.getConfig(n),n.model.properties.height&&(n.model.height=n.model.properties.height)}getConfig(n){return f8[n.model.type].properties.config}getNodeName(n,a){let r=0,s=a;for(;;){if(r>0&&(s=a+r),!n.some(c=>c.properties.nodeName===s.trim()))return s;r++}}get_node_field_list(){var r,s,c,p,d,_,g;const n=[];if(this.props.model.type==="start-node"&&(n.push({value:"global",label:_t("workflow.variable.global"),type:"global",children:((s=(r=this.props.model.properties)==null?void 0:r.config)==null?void 0:s.globalFields)||[]}),n.push({value:"chat",label:_t("workflow.variable.chat"),type:"chat",children:((p=(c=this.props.model.properties)==null?void 0:c.config)==null?void 0:p.chatFields)||[]})),this.props.model.type==="knowledge-base-node"){let b=[];this.props.model.properties.user_input_field_list&&(b=this.props.model.properties.user_input_field_list.map(S=>({label:typeof S.label=="string"?S.label:S.label.label,value:S.field}))),n.push({value:"global",label:_t("workflow.variable.global"),type:"global",children:b})}const a={value:this.props.model.id,icon:(d=this.props.model.properties.nodeData)==null?void 0:d.icon,label:this.props.model.properties.nodeName,type:this.props.model.type,children:((g=(_=this.props.model.properties)==null?void 0:_.config)==null?void 0:g.fields)||[]};return this.props.model.properties.kind&&(a.kind=this.props.model.properties.kind),n.push(a),n}get_up_node_field_dict(n,a){if(!this.up_node_field_dict||!a){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(s=>s.id!="start-node"&&s.id!="loop-start-node").map(s=>s.get_up_node_field_dict(!0,a)).reduce((s,c)=>({...s,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,a){var p;const r=Object.values(this.get_up_node_field_dict(n,a)).reduce((d,_)=>[...d,..._],[]),s=((p=this.props.graphModel.getNodeModelById("start-node")||this.props.graphModel.getNodeModelById("loop-start-node"))==null?void 0:p.get_node_field_list())||[],c=this.props.graphModel.getNodeModelById("knowledge-base-node");return c?[...c.get_node_field_list(),...s,...r]:[...s,...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:a,y:r,type:s}=n;let c=!1;return s=="left"?c=this.props.graphModel.edges.some(p=>p.targetAnchorId==n.id):c=this.props.graphModel.edges.some(p=>p.sourceAnchorId==n.id),fn.h("foreignObject",{...n,x:a-10,y:r-12,width:30,height:30},[fn.h("div",{style:{zindex:0},onClick:()=>{s=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const a=document.createElement("div");n.appendChild(a),this.renderVueComponent(a)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var s;this.unmountVueComponent(),this.root=n;const{model:a,graphModel:r}=this.props;if(n)if(zg())rN(this.targetId(),this.component,n,a,r,void 0,this.props.graphModel.get_provide);else{this.r=xv(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=QT({render(){return this.r},provide(){return{getNode:()=>a,getGraph:()=>r,workflowMode:xr.Application}}}),this.app.use(Kj,{locale:Zj}),this.app.use(Jj),this.app.use(Qj),this.app.use(JT);for(const[c,p]of Object.entries(e8))this.app.component(c,p);(s=this.app)==null||s.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){zg()&&oN(this.targetId()),this.unmountVueComponent()}}class bo extends Zk.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:a}=t;n&&(this.x=n),a&&(this.y=a),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,a=t+100;this.height=a,this.properties.height=a,this.move(0,(a-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=JT.global;this.width=this.get_width();const n=(r,s)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const p in c){const d=c[p];if(d.id===s)return!0;if(n(d.id,s))return!0}return!1},a={message:t("workflow.tip.onlyRight"),validate:(r,s,c)=>c.type==="right"};this.sourceRules.push({message:t("workflow.tip.notRecyclable"),validate:(r,s,c,p)=>s.id==r.id?!1:!this.graphModel.getNodeIncomingEdge(s.id).find(g=>g.targetAnchorId==p.id&&g.sourceAnchorId==c.id)&&!n(r.id,s.id)}),this.sourceRules.push(a),this.targetRules.push({message:t("workflow.tip.onlyLeft"),validate:(r,s,c,p)=>p.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r}=this,s=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return[kn.Base,kn.KnowledgeBase].includes(this.type)||(![kn.Start,kn.LoopStartNode.toString()].includes(this.type)&&this.properties.kind!=uc.DataSource&&c.push({x:n-r/2+10,y:s?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:s?a:a-15,id:`${t}_right`,type:"right"})),c}}let bV=class extends _o{constructor(t){super(t,hU)}};const wV={type:"ai-chat-node",model:bo,view:bV},EV=Object.freeze(Object.defineProperty({__proto__:null,default:wV},Symbol.toStringTag,{value:"Module"})),OV={class:"title-decoration-1 mb-8"},SV={class:"flex-between w-full"},xV={class:"flex align-center"},AV={class:"mr-4"},TV={class:"flex"},MV=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Zi(),n=Gn(()=>t.path.includes("resource-management")?"systemManage":"workspace"),a={questionReferenceAddress:["start-node","question"],api_input_field_list:[],user_input_field_list:[],documentList:["start-node","document"],imageList:["start-node","image"],audioList:["start-node","audio"]},r=je(),s=Gn({get:()=>(d.nodeModel.properties.nodeData||Se.set(d.nodeModel.properties,"nodeData",a),d.nodeModel.properties.nodeData),set:g=>{Se.set(d.nodeModel.properties,"nodeData",g)}});function c(g,b){const S=`${g}List`;b?(console.log("listKey",S),d.nodeModel.properties.nodeData[S]||Se.set(d.nodeModel.properties.nodeData,S,[])):delete d.nodeModel.properties.nodeData[S]}const p=()=>{if(!d.nodeModel.properties.nodeData.applicationId){Se.set(d.nodeModel.properties,"status",500);return}si({type:"application",systemType:n.value}).getApplicationDetail(d.nodeModel.properties.nodeData.applicationId).then(g=>{const b=Se.cloneDeep(d.nodeModel.properties.nodeData.api_input_field_list),S=Se.cloneDeep(d.nodeModel.properties.nodeData.user_input_field_list);if(Zw(g.data.type)){const T=g.data.workFlow.nodes[0].properties.nodeData,A=Se.cloneDeep(g.data.workFlow.nodes[0].properties.api_input_field_list),O=Se.cloneDeep(g.data.workFlow.nodes[0].properties.user_input_field_list),E=(A||[]).map(L=>{const V=b==null?void 0:b.find($=>$.variable==L.variable);return V?{...L,value:V.value,label:typeof L.label=="object"&&L.label!=null?L.label.label:L.label}:L});Se.set(d.nodeModel.properties.nodeData,"api_input_field_list",E);const C=(O||[]).map(L=>{const V=S==null?void 0:S.find($=>$.field==L.field);return V?{...L,value:V.value,label:typeof L.label=="object"&&L.label!=null?L.label.label:L.label}:L});Se.set(d.nodeModel.properties.nodeData,"user_input_field_list",C),console.log("nodeData",T);const j=T.fileUploadEnable,U=T.fileUploadSetting;j?(c("document",U.document),c("image",U.image),c("audio",U.audio)):["documentList","imageList","audioList"].forEach(L=>{delete d.nodeModel.properties.nodeData[L]}),Se.set(d.nodeModel.properties,"status",g.data.id?200:500)}}).catch(g=>{console.log(g),Se.set(d.nodeModel.properties,"status",500)})},d=e,_=()=>{var g;return(g=r.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:d.nodeModel,errMessage:b}))};return Ur(()=>{p(),Se.set(d.nodeModel,"validate",_)}),(g,b)=>{const S=Q("el-form-item"),T=Q("el-tooltip"),A=Q("el-switch"),O=Q("el-form"),E=Q("el-card");return _e(),Ke(go,{nodeModel:g.nodeModel},{default:R(()=>[K("h5",OV,me(g.$t("views.applicationWorkflow.nodeSetting")),1),k(E,{shadow:"never",class:"card-never"},{default:R(()=>[k(O,{onSubmit:b[6]||(b[6]=qt(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:r},{default:R(()=>[k(S,{label:g.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"questionReferenceAddress",rules:{message:g.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:R(()=>[k(Co,{ref_key:"applicationNodeFormRef",ref:r,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.questionReferenceAddress,"onUpdate:modelValue":b[0]||(b[0]=C=>s.value.questionReferenceAddress=C)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),s.value.hasOwnProperty("documentList")||"documentList"in s.value?(_e(),Ke(S,{key:0,label:g.$t("views.problem.relateParagraph.selectDocument"),prop:"documentList",rules:{message:g.$t("views.chatLog.documentPlaceholder"),trigger:"blur",required:!1}},{default:R(()=>[k(Co,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.chatLog.documentPlaceholder"),modelValue:s.value.documentList,"onUpdate:modelValue":b[1]||(b[1]=C=>s.value.documentList=C)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):cn("",!0),s.value.hasOwnProperty("imageList")||"imageList"in s.value?(_e(),Ke(S,{key:1,label:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"imageList",rules:{message:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:R(()=>[k(Co,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:s.value.imageList,"onUpdate:modelValue":b[2]||(b[2]=C=>s.value.imageList=C)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):cn("",!0),s.value.hasOwnProperty("audioList")||"audioList"in s.value?(_e(),Ke(S,{key:2,label:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:R(()=>[k(Co,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:s.value.audioList,"onUpdate:modelValue":b[3]||(b[3]=C=>s.value.audioList=C)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):cn("",!0),(_e(!0),Yt(tr,null,Wr(s.value.api_input_field_list,(C,j)=>(_e(),Yt("div",{key:"api-input-"+j},[k(S,{label:C.variable,prop:"api_input_field_list."+j+".value",rules:[{required:C.isRequired,message:`${g.$t("common.inputPlaceholder")}${C.variable}`,trigger:"blur"}]},{default:R(()=>[k(Co,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.api_input_field_list[j].value,"onUpdate:modelValue":U=>s.value.api_input_field_list[j].value=U},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(_e(!0),Yt(tr,null,Wr(s.value.user_input_field_list,(C,j)=>(_e(),Yt("div",{key:"user-input-"+j},[k(S,{label:C.label,prop:"user_input_field_list."+j+".value",rules:[{required:C.required,message:`${g.$t("common.inputPlaceholder")}${C.label}`,trigger:"blur"}]},{default:R(()=>[k(Co,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.user_input_field_list[j].value,"onUpdate:modelValue":U=>s.value.user_input_field_list[j].value=U},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),k(S,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[5]||(b[5]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",SV,[K("div",xV,[K("div",AV,[K("span",null,me(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(T,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",TV,[k(A,{size:"small",modelValue:s.value.isResult,"onUpdate:modelValue":b[4]||(b[4]=C=>s.value.isResult=C)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class kV extends _o{constructor(t){super(t,MV)}}const NV={type:"application-node",model:bo,view:kV},PV=Object.freeze(Object.defineProperty({__proto__:null,default:NV},Symbol.toStringTag,{value:"Module"}));/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Yx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function pc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yx(Object(n),!0).forEach(function(a){RV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yx(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gg=function(t){return typeof t}:gg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}function RV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pf(){return Pf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pf.apply(this,arguments)}function CV(e,t){if(e==null)return{};var n={},a=Object.keys(e),r,s;for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function DV(e,t){if(e==null)return{};var n=CV(e,t),a,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var jV="1.15.6";function kf(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Df=kf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ty=kf(/Edge/i),Kx=kf(/firefox/i),Pm=kf(/safari/i)&&!kf(/chrome/i)&&!kf(/android/i),jE=kf(/iP(ad|od|hone)/i),iN=kf(/chrome/i)&&kf(/android/i),aN={capture:!1,passive:!1};function ro(e,t,n){e.addEventListener(t,n,!Df&&aN)}function Qr(e,t,n){e.removeEventListener(t,n,!Df&&aN)}function Wg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function lN(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function bu(e,t,n,a){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Wg(e,t):Wg(e,t))||a&&e===n)return e;if(e===n)break}while(e=lN(e))}return null}var Zx=/\s+/g;function rs(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(Zx," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(Zx," ")}}function Or(e,t,n){var a=e&&e.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in a)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),a[t]=n+(typeof n=="string"?"":"px")}}function yv(e,t){var n="";if(typeof e=="string")n=e;else do{var a=Or(e,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function sN(e,t,n){if(e){var a=e.getElementsByTagName(t),r=0,s=a.length;if(n)for(;r<s;r++)n(a[r],r);return a}return[]}function cc(){var e=document.scrollingElement;return e||document.documentElement}function Ki(e,t,n,a,r){if(!(!e.getBoundingClientRect&&e!==window)){var s,c,p,d,_,g,b;if(e!==window&&e.parentNode&&e!==cc()?(s=e.getBoundingClientRect(),c=s.top,p=s.left,d=s.bottom,_=s.right,g=s.height,b=s.width):(c=0,p=0,d=window.innerHeight,_=window.innerWidth,g=window.innerHeight,b=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!Df))do if(r&&r.getBoundingClientRect&&(Or(r,"transform")!=="none"||n&&Or(r,"position")!=="static")){var S=r.getBoundingClientRect();c-=S.top+parseInt(Or(r,"border-top-width")),p-=S.left+parseInt(Or(r,"border-left-width")),d=c+s.height,_=p+s.width;break}while(r=r.parentNode);if(a&&e!==window){var T=yv(r||e),A=T&&T.a,O=T&&T.d;T&&(c/=O,p/=A,b/=A,g/=O,d=c+g,_=p+b)}return{top:c,left:p,bottom:d,right:_,width:b,height:g}}}function Jx(e,t,n){for(var a=Bd(e,!0),r=Ki(e)[t];a;){var s=Ki(a)[n],c=void 0;if(c=r>=s,!c)return a;if(a===cc())break;a=Bd(a,!1)}return!1}function kv(e,t,n,a){for(var r=0,s=0,c=e.children;s<c.length;){if(c[s].style.display!=="none"&&c[s]!==gr.ghost&&(a||c[s]!==gr.dragged)&&bu(c[s],n.draggable,e,!1)){if(r===t)return c[s];r++}s++}return null}function IE(e,t){for(var n=e.lastElementChild;n&&(n===gr.ghost||Or(n,"display")==="none"||t&&!Wg(n,t));)n=n.previousElementSibling;return n||null}function Cs(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==gr.clone&&(!t||Wg(e,t))&&n++;return n}function Qx(e){var t=0,n=0,a=cc();if(e)do{var r=yv(e),s=r.a,c=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*c}while(e!==a&&(e=e.parentNode));return[t,n]}function IV(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n)}return-1}function Bd(e,t){if(!e||!e.getBoundingClientRect)return cc();var n=e,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Or(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return cc();if(a||t)return n;a=!0}}while(n=n.parentNode);return cc()}function LV(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function S1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Rm;function uN(e,t){return function(){if(!Rm){var n=arguments,a=this;n.length===1?e.call(a,n[0]):e.apply(a,n),Rm=setTimeout(function(){Rm=void 0},t)}}}function $V(){clearTimeout(Rm),Rm=void 0}function cN(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function fN(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function dN(e,t,n){var a={};return Array.from(e.children).forEach(function(r){var s,c,p,d;if(!(!bu(r,t.draggable,e,!1)||r.animated||r===n)){var _=Ki(r);a.left=Math.min((s=a.left)!==null&&s!==void 0?s:1/0,_.left),a.top=Math.min((c=a.top)!==null&&c!==void 0?c:1/0,_.top),a.right=Math.max((p=a.right)!==null&&p!==void 0?p:-1/0,_.right),a.bottom=Math.max((d=a.bottom)!==null&&d!==void 0?d:-1/0,_.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Rl="Sortable"+new Date().getTime();function FV(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(r){if(!(Or(r,"display")==="none"||r===gr.ghost)){e.push({target:r,rect:Ki(r)});var s=pc({},e[e.length-1].rect);if(r.thisAnimationDuration){var c=yv(r,!0);c&&(s.top-=c.f,s.left-=c.e)}r.fromRect=s}})}},addAnimationState:function(a){e.push(a)},removeAnimationState:function(a){e.splice(IV(e,{target:a}),1)},animateAll:function(a){var r=this;if(!this.options.animation){clearTimeout(t),typeof a=="function"&&a();return}var s=!1,c=0;e.forEach(function(p){var d=0,_=p.target,g=_.fromRect,b=Ki(_),S=_.prevFromRect,T=_.prevToRect,A=p.rect,O=yv(_,!0);O&&(b.top-=O.f,b.left-=O.e),_.toRect=b,_.thisAnimationDuration&&S1(S,b)&&!S1(g,b)&&(A.top-b.top)/(A.left-b.left)===(g.top-b.top)/(g.left-b.left)&&(d=UV(A,S,T,r.options)),S1(b,g)||(_.prevFromRect=g,_.prevToRect=b,d||(d=r.options.animation),r.animate(_,A,b,d)),d&&(s=!0,c=Math.max(c,d),clearTimeout(_.animationResetTimer),_.animationResetTimer=setTimeout(function(){_.animationTime=0,_.prevFromRect=null,_.fromRect=null,_.prevToRect=null,_.thisAnimationDuration=null},d),_.thisAnimationDuration=d)}),clearTimeout(t),s?t=setTimeout(function(){typeof a=="function"&&a()},c):typeof a=="function"&&a(),e=[]},animate:function(a,r,s,c){if(c){Or(a,"transition",""),Or(a,"transform","");var p=yv(this.el),d=p&&p.a,_=p&&p.d,g=(r.left-s.left)/(d||1),b=(r.top-s.top)/(_||1);a.animatingX=!!g,a.animatingY=!!b,Or(a,"transform","translate3d("+g+"px,"+b+"px,0)"),this.forRepaintDummy=BV(a),Or(a,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),Or(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){Or(a,"transition",""),Or(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},c)}}}}function BV(e){return e.offsetWidth}function UV(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}var tv=[],x1={initializeByDefault:!0},ny={mount:function(t){for(var n in x1)x1.hasOwnProperty(n)&&!(n in t)&&(t[n]=x1[n]);tv.forEach(function(a){if(a.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),tv.push(t)},pluginEvent:function(t,n,a){var r=this;this.eventCanceled=!1,a.cancel=function(){r.eventCanceled=!0};var s=t+"Global";tv.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][s]&&n[c.pluginName][s](pc({sortable:n},a)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](pc({sortable:n},a)))})},initializePlugins:function(t,n,a,r){tv.forEach(function(p){var d=p.pluginName;if(!(!t.options[d]&&!p.initializeByDefault)){var _=new p(t,n,t.options);_.sortable=t,_.options=t.options,t[d]=_,Pf(a,_.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var c=this.modifyOption(t,s,t.options[s]);typeof c<"u"&&(t.options[s]=c)}},getEventProperties:function(t,n){var a={};return tv.forEach(function(r){typeof r.eventProperties=="function"&&Pf(a,r.eventProperties.call(n[r.pluginName],t))}),a},modifyOption:function(t,n,a){var r;return tv.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(r=s.optionListeners[n].call(t[s.pluginName],a))}),r}};function VV(e){var t=e.sortable,n=e.rootEl,a=e.name,r=e.targetEl,s=e.cloneEl,c=e.toEl,p=e.fromEl,d=e.oldIndex,_=e.newIndex,g=e.oldDraggableIndex,b=e.newDraggableIndex,S=e.originalEvent,T=e.putSortable,A=e.extraEventProperties;if(t=t||n&&n[Rl],!!t){var O,E=t.options,C="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Df&&!ty?O=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(O=document.createEvent("Event"),O.initEvent(a,!0,!0)),O.to=c||n,O.from=p||n,O.item=r||n,O.clone=s,O.oldIndex=d,O.newIndex=_,O.oldDraggableIndex=g,O.newDraggableIndex=b,O.originalEvent=S,O.pullMode=T?T.lastPutMode:void 0;var j=pc(pc({},A),ny.getEventProperties(a,t));for(var U in j)O[U]=j[U];n&&n.dispatchEvent(O),E[C]&&E[C].call(t,O)}}var GV=["evt"],Pl=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=a.evt,s=DV(a,GV);ny.pluginEvent.bind(gr)(t,n,pc({dragEl:_n,parentEl:Ri,ghostEl:Rr,rootEl:yi,nextEl:Gp,lastDownEl:_g,cloneEl:Oi,cloneHidden:Fd,dragStarted:bm,putSortable:Na,activeSortable:gr.active,originalEvent:r,oldIndex:pv,oldDraggableIndex:Cm,newIndex:os,newDraggableIndex:Ld,hideGhostForTarget:mN,unhideGhostForTarget:yN,cloneNowHidden:function(){Fd=!0},cloneNowShown:function(){Fd=!1},dispatchSortableEvent:function(p){cl({sortable:n,name:p,originalEvent:r})}},s))};function cl(e){VV(pc({putSortable:Na,cloneEl:Oi,targetEl:_n,rootEl:yi,oldIndex:pv,oldDraggableIndex:Cm,newIndex:os,newDraggableIndex:Ld},e))}var _n,Ri,Rr,yi,Gp,_g,Oi,Fd,pv,os,Cm,Ld,ag,Na,av=!1,Hg=!1,Xg=[],Bp,_u,A1,T1,eA,tA,bm,nv,Dm,jm=!1,lg=!1,bg,Ga,M1=[],kw=!1,qg=[],M_=typeof document<"u",sg=jE,nA=ty||Df?"cssFloat":"float",zV=M_&&!iN&&!jE&&"draggable"in document.createElement("div"),pN=function(){if(M_){if(Df)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),hN=function(t,n){var a=Or(t),r=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),s=kv(t,0,n),c=kv(t,1,n),p=s&&Or(s),d=c&&Or(c),_=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+Ki(s).width,g=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+Ki(c).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&p.float&&p.float!=="none"){var b=p.float==="left"?"left":"right";return c&&(d.clear==="both"||d.clear===b)?"vertical":"horizontal"}return s&&(p.display==="block"||p.display==="flex"||p.display==="table"||p.display==="grid"||_>=r&&a[nA]==="none"||c&&a[nA]==="none"&&_+g>r)?"vertical":"horizontal"},WV=function(t,n,a){var r=a?t.left:t.top,s=a?t.right:t.bottom,c=a?t.width:t.height,p=a?n.left:n.top,d=a?n.right:n.bottom,_=a?n.width:n.height;return r===p||s===d||r+c/2===p+_/2},HV=function(t,n){var a;return Xg.some(function(r){var s=r[Rl].options.emptyInsertThreshold;if(!(!s||IE(r))){var c=Ki(r),p=t>=c.left-s&&t<=c.right+s,d=n>=c.top-s&&n<=c.bottom+s;if(p&&d)return a=r}}),a},vN=function(t){function n(s,c){return function(p,d,_,g){var b=p.options.group.name&&d.options.group.name&&p.options.group.name===d.options.group.name;if(s==null&&(c||b))return!0;if(s==null||s===!1)return!1;if(c&&s==="clone")return s;if(typeof s=="function")return n(s(p,d,_,g),c)(p,d,_,g);var S=(c?p:d).options.group.name;return s===!0||typeof s=="string"&&s===S||s.join&&s.indexOf(S)>-1}}var a={},r=t.group;(!r||gg(r)!="object")&&(r={name:r}),a.name=r.name,a.checkPull=n(r.pull,!0),a.checkPut=n(r.put),a.revertClone=r.revertClone,t.group=a},mN=function(){!pN&&Rr&&Or(Rr,"display","none")},yN=function(){!pN&&Rr&&Or(Rr,"display","")};M_&&!iN&&document.addEventListener("click",function(e){if(Hg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Hg=!1,!1},!0);var Up=function(t){if(_n){t=t.touches?t.touches[0]:t;var n=HV(t.clientX,t.clientY);if(n){var a={};for(var r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);a.target=a.rootEl=n,a.preventDefault=void 0,a.stopPropagation=void 0,n[Rl]._onDragOver(a)}}},XV=function(t){_n&&_n.parentNode[Rl]._isOutsideThisEl(t.target)};function gr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Pf({},t),e[Rl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return hN(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,p){c.setData("Text",p.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:gr.supportPointer!==!1&&"PointerEvent"in window&&(!Pm||jE),emptyInsertThreshold:5};ny.initializePlugins(this,e,n);for(var a in n)!(a in t)&&(t[a]=n[a]);vN(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:zV,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ro(e,"pointerdown",this._onTapStart):(ro(e,"mousedown",this._onTapStart),ro(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ro(e,"dragover",this),ro(e,"dragenter",this)),Xg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Pf(this,FV())}gr.prototype={constructor:gr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(nv=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,_n):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,a=this.el,r=this.options,s=r.preventOnFilter,c=t.type,p=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,d=(p||t).target,_=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||d,g=r.filter;if(tG(a),!_n&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||r.disabled)&&!_.isContentEditable&&!(!this.nativeDraggable&&Pm&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=bu(d,r.draggable,a,!1),!(d&&d.animated)&&_g!==d)){if(pv=Cs(d),Cm=Cs(d,r.draggable),typeof g=="function"){if(g.call(this,t,d,this)){cl({sortable:n,rootEl:_,name:"filter",targetEl:d,toEl:a,fromEl:a}),Pl("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(g&&(g=g.split(",").some(function(b){if(b=bu(_,b.trim(),a,!1),b)return cl({sortable:n,rootEl:b,name:"filter",targetEl:d,fromEl:a,toEl:a}),Pl("filter",n,{evt:t}),!0}),g)){s&&t.preventDefault();return}r.handle&&!bu(_,r.handle,a,!1)||this._prepareDragStart(t,p,d)}}},_prepareDragStart:function(t,n,a){var r=this,s=r.el,c=r.options,p=s.ownerDocument,d;if(a&&!_n&&a.parentNode===s){var _=Ki(a);if(yi=s,_n=a,Ri=_n.parentNode,Gp=_n.nextSibling,_g=a,ag=c.group,gr.dragged=_n,Bp={target:_n,clientX:(n||t).clientX,clientY:(n||t).clientY},eA=Bp.clientX-_.left,tA=Bp.clientY-_.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,_n.style["will-change"]="all",d=function(){if(Pl("delayEnded",r,{evt:t}),gr.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Kx&&r.nativeDraggable&&(_n.draggable=!0),r._triggerDragStart(t,n),cl({sortable:r,name:"choose",originalEvent:t}),rs(_n,c.chosenClass,!0)},c.ignore.split(",").forEach(function(g){sN(_n,g.trim(),k1)}),ro(p,"dragover",Up),ro(p,"mousemove",Up),ro(p,"touchmove",Up),c.supportPointer?(ro(p,"pointerup",r._onDrop),!this.nativeDraggable&&ro(p,"pointercancel",r._onDrop)):(ro(p,"mouseup",r._onDrop),ro(p,"touchend",r._onDrop),ro(p,"touchcancel",r._onDrop)),Kx&&this.nativeDraggable&&(this.options.touchStartThreshold=4,_n.draggable=!0),Pl("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ty||Df))){if(gr.eventCanceled){this._onDrop();return}c.supportPointer?(ro(p,"pointerup",r._disableDelayedDrag),ro(p,"pointercancel",r._disableDelayedDrag)):(ro(p,"mouseup",r._disableDelayedDrag),ro(p,"touchend",r._disableDelayedDrag),ro(p,"touchcancel",r._disableDelayedDrag)),ro(p,"mousemove",r._delayedDragTouchMoveHandler),ro(p,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&ro(p,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(d,c.delay)}else d()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){_n&&k1(_n),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Qr(t,"mouseup",this._disableDelayedDrag),Qr(t,"touchend",this._disableDelayedDrag),Qr(t,"touchcancel",this._disableDelayedDrag),Qr(t,"pointerup",this._disableDelayedDrag),Qr(t,"pointercancel",this._disableDelayedDrag),Qr(t,"mousemove",this._delayedDragTouchMoveHandler),Qr(t,"touchmove",this._delayedDragTouchMoveHandler),Qr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?ro(document,"pointermove",this._onTouchMove):n?ro(document,"touchmove",this._onTouchMove):ro(document,"mousemove",this._onTouchMove):(ro(_n,"dragend",this),ro(yi,"dragstart",this._onDragStart));try{document.selection?wg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(av=!1,yi&&_n){Pl("dragStarted",this,{evt:n}),this.nativeDraggable&&ro(document,"dragover",XV);var a=this.options;!t&&rs(_n,a.dragClass,!1),rs(_n,a.ghostClass,!0),gr.active=this,t&&this._appendGhost(),cl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(_u){this._lastX=_u.clientX,this._lastY=_u.clientY,mN();for(var t=document.elementFromPoint(_u.clientX,_u.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(_u.clientX,_u.clientY),t!==n);)n=t;if(_n.parentNode[Rl]._isOutsideThisEl(t),n)do{if(n[Rl]){var a=void 0;if(a=n[Rl]._onDragOver({clientX:_u.clientX,clientY:_u.clientY,target:t,rootEl:n}),a&&!this.options.dragoverBubble)break}t=n}while(n=lN(n));yN()}},_onTouchMove:function(t){if(Bp){var n=this.options,a=n.fallbackTolerance,r=n.fallbackOffset,s=t.touches?t.touches[0]:t,c=Rr&&yv(Rr,!0),p=Rr&&c&&c.a,d=Rr&&c&&c.d,_=sg&&Ga&&Qx(Ga),g=(s.clientX-Bp.clientX+r.x)/(p||1)+(_?_[0]-M1[0]:0)/(p||1),b=(s.clientY-Bp.clientY+r.y)/(d||1)+(_?_[1]-M1[1]:0)/(d||1);if(!gr.active&&!av){if(a&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<a)return;this._onDragStart(t,!0)}if(Rr){c?(c.e+=g-(A1||0),c.f+=b-(T1||0)):c={a:1,b:0,c:0,d:1,e:g,f:b};var S="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");Or(Rr,"webkitTransform",S),Or(Rr,"mozTransform",S),Or(Rr,"msTransform",S),Or(Rr,"transform",S),A1=g,T1=b,_u=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Rr){var t=this.options.fallbackOnBody?document.body:yi,n=Ki(_n,!0,sg,!0,t),a=this.options;if(sg){for(Ga=t;Or(Ga,"position")==="static"&&Or(Ga,"transform")==="none"&&Ga!==document;)Ga=Ga.parentNode;Ga!==document.body&&Ga!==document.documentElement?(Ga===document&&(Ga=cc()),n.top+=Ga.scrollTop,n.left+=Ga.scrollLeft):Ga=cc(),M1=Qx(Ga)}Rr=_n.cloneNode(!0),rs(Rr,a.ghostClass,!1),rs(Rr,a.fallbackClass,!0),rs(Rr,a.dragClass,!0),Or(Rr,"transition",""),Or(Rr,"transform",""),Or(Rr,"box-sizing","border-box"),Or(Rr,"margin",0),Or(Rr,"top",n.top),Or(Rr,"left",n.left),Or(Rr,"width",n.width),Or(Rr,"height",n.height),Or(Rr,"opacity","0.8"),Or(Rr,"position",sg?"absolute":"fixed"),Or(Rr,"zIndex","100000"),Or(Rr,"pointerEvents","none"),gr.ghost=Rr,t.appendChild(Rr),Or(Rr,"transform-origin",eA/parseInt(Rr.style.width)*100+"% "+tA/parseInt(Rr.style.height)*100+"%")}},_onDragStart:function(t,n){var a=this,r=t.dataTransfer,s=a.options;if(Pl("dragStart",this,{evt:t}),gr.eventCanceled){this._onDrop();return}Pl("setupClone",this),gr.eventCanceled||(Oi=fN(_n),Oi.removeAttribute("id"),Oi.draggable=!1,Oi.style["will-change"]="",this._hideClone(),rs(Oi,this.options.chosenClass,!1),gr.clone=Oi),a.cloneId=wg(function(){Pl("clone",a),!gr.eventCanceled&&(a.options.removeCloneOnHide||yi.insertBefore(Oi,_n),a._hideClone(),cl({sortable:a,name:"clone"}))}),!n&&rs(_n,s.dragClass,!0),n?(Hg=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Qr(document,"mouseup",a._onDrop),Qr(document,"touchend",a._onDrop),Qr(document,"touchcancel",a._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(a,r,_n)),ro(document,"drop",a),Or(_n,"transform","translateZ(0)")),av=!0,a._dragStartId=wg(a._dragStarted.bind(a,n,t)),ro(document,"selectstart",a),bm=!0,window.getSelection().removeAllRanges(),Pm&&Or(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,a=t.target,r,s,c,p=this.options,d=p.group,_=gr.active,g=ag===d,b=p.sort,S=Na||_,T,A=this,O=!1;if(kw)return;function E(fe,Ee){Pl(fe,A,pc({evt:t,isOwner:g,axis:T?"vertical":"horizontal",revert:c,dragRect:r,targetRect:s,canSort:b,fromSortable:S,target:a,completed:j,onMove:function(rt,mt){return ug(yi,n,_n,r,rt,Ki(rt),t,mt)},changed:U},Ee))}function C(){E("dragOverAnimationCapture"),A.captureAnimationState(),A!==S&&S.captureAnimationState()}function j(fe){return E("dragOverCompleted",{insertion:fe}),fe&&(g?_._hideClone():_._showClone(A),A!==S&&(rs(_n,Na?Na.options.ghostClass:_.options.ghostClass,!1),rs(_n,p.ghostClass,!0)),Na!==A&&A!==gr.active?Na=A:A===gr.active&&Na&&(Na=null),S===A&&(A._ignoreWhileAnimating=a),A.animateAll(function(){E("dragOverAnimationComplete"),A._ignoreWhileAnimating=null}),A!==S&&(S.animateAll(),S._ignoreWhileAnimating=null)),(a===_n&&!_n.animated||a===n&&!a.animated)&&(nv=null),!p.dragoverBubble&&!t.rootEl&&a!==document&&(_n.parentNode[Rl]._isOutsideThisEl(t.target),!fe&&Up(t)),!p.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),O=!0}function U(){os=Cs(_n),Ld=Cs(_n,p.draggable),cl({sortable:A,name:"change",toEl:n,newIndex:os,newDraggableIndex:Ld,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),a=bu(a,p.draggable,n,!0),E("dragOver"),gr.eventCanceled)return O;if(_n.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||A._ignoreWhileAnimating===a)return j(!1);if(Hg=!1,_&&!p.disabled&&(g?b||(c=Ri!==yi):Na===this||(this.lastPutMode=ag.checkPull(this,_,_n,t))&&d.checkPut(this,_,_n,t))){if(T=this._getDirection(t,a)==="vertical",r=Ki(_n),E("dragOverValid"),gr.eventCanceled)return O;if(c)return Ri=yi,C(),this._hideClone(),E("revert"),gr.eventCanceled||(Gp?yi.insertBefore(_n,Gp):yi.appendChild(_n)),j(!0);var L=IE(n,p.draggable);if(!L||ZV(t,T,this)&&!L.animated){if(L===_n)return j(!1);if(L&&n===t.target&&(a=L),a&&(s=Ki(a)),ug(yi,n,_n,r,a,s,t,!!a)!==!1)return C(),L&&L.nextSibling?n.insertBefore(_n,L.nextSibling):n.appendChild(_n),Ri=n,U(),j(!0)}else if(L&&KV(t,T,this)){var V=kv(n,0,p,!0);if(V===_n)return j(!1);if(a=V,s=Ki(a),ug(yi,n,_n,r,a,s,t,!1)!==!1)return C(),n.insertBefore(_n,V),Ri=n,U(),j(!0)}else if(a.parentNode===n){s=Ki(a);var $=0,H,Y=_n.parentNode!==n,z=!WV(_n.animated&&_n.toRect||r,a.animated&&a.toRect||s,T),W=T?"top":"left",B=Jx(a,"top","top")||Jx(_n,"top","top"),q=B?B.scrollTop:void 0;nv!==a&&(H=s[W],jm=!1,lg=!z&&p.invertSwap||Y),$=JV(t,a,s,T,z?1:p.swapThreshold,p.invertedSwapThreshold==null?p.swapThreshold:p.invertedSwapThreshold,lg,nv===a);var J;if($!==0){var ce=Cs(_n);do ce-=$,J=Ri.children[ce];while(J&&(Or(J,"display")==="none"||J===Rr))}if($===0||J===a)return j(!1);nv=a,Dm=$;var re=a.nextElementSibling,Pe=!1;Pe=$===1;var ge=ug(yi,n,_n,r,a,s,t,Pe);if(ge!==!1)return(ge===1||ge===-1)&&(Pe=ge===1),kw=!0,setTimeout(YV,30),C(),Pe&&!re?n.appendChild(_n):a.parentNode.insertBefore(_n,Pe?re:a),B&&cN(B,0,q-B.scrollTop),Ri=_n.parentNode,H!==void 0&&!lg&&(bg=Math.abs(H-Ki(a)[W])),U(),j(!0)}if(n.contains(_n))return j(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Qr(document,"mousemove",this._onTouchMove),Qr(document,"touchmove",this._onTouchMove),Qr(document,"pointermove",this._onTouchMove),Qr(document,"dragover",Up),Qr(document,"mousemove",Up),Qr(document,"touchmove",Up)},_offUpEvents:function(){var t=this.el.ownerDocument;Qr(t,"mouseup",this._onDrop),Qr(t,"touchend",this._onDrop),Qr(t,"pointerup",this._onDrop),Qr(t,"pointercancel",this._onDrop),Qr(t,"touchcancel",this._onDrop),Qr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,a=this.options;if(os=Cs(_n),Ld=Cs(_n,a.draggable),Pl("drop",this,{evt:t}),Ri=_n&&_n.parentNode,os=Cs(_n),Ld=Cs(_n,a.draggable),gr.eventCanceled){this._nulling();return}av=!1,lg=!1,jm=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Nw(this.cloneId),Nw(this._dragStartId),this.nativeDraggable&&(Qr(document,"drop",this),Qr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Pm&&Or(document.body,"user-select",""),Or(_n,"transform",""),t&&(bm&&(t.cancelable&&t.preventDefault(),!a.dropBubble&&t.stopPropagation()),Rr&&Rr.parentNode&&Rr.parentNode.removeChild(Rr),(yi===Ri||Na&&Na.lastPutMode!=="clone")&&Oi&&Oi.parentNode&&Oi.parentNode.removeChild(Oi),_n&&(this.nativeDraggable&&Qr(_n,"dragend",this),k1(_n),_n.style["will-change"]="",bm&&!av&&rs(_n,Na?Na.options.ghostClass:this.options.ghostClass,!1),rs(_n,this.options.chosenClass,!1),cl({sortable:this,name:"unchoose",toEl:Ri,newIndex:null,newDraggableIndex:null,originalEvent:t}),yi!==Ri?(os>=0&&(cl({rootEl:Ri,name:"add",toEl:Ri,fromEl:yi,originalEvent:t}),cl({sortable:this,name:"remove",toEl:Ri,originalEvent:t}),cl({rootEl:Ri,name:"sort",toEl:Ri,fromEl:yi,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ri,originalEvent:t})),Na&&Na.save()):os!==pv&&os>=0&&(cl({sortable:this,name:"update",toEl:Ri,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ri,originalEvent:t})),gr.active&&((os==null||os===-1)&&(os=pv,Ld=Cm),cl({sortable:this,name:"end",toEl:Ri,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Pl("nulling",this),yi=_n=Ri=Rr=Gp=Oi=_g=Fd=Bp=_u=bm=os=Ld=pv=Cm=nv=Dm=Na=ag=gr.dragged=gr.ghost=gr.clone=gr.active=null,qg.forEach(function(t){t.checked=!0}),qg.length=A1=T1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":_n&&(this._onDragOver(t),qV(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,a=this.el.children,r=0,s=a.length,c=this.options;r<s;r++)n=a[r],bu(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||eG(n));return t},sort:function(t,n){var a={},r=this.el;this.toArray().forEach(function(s,c){var p=r.children[c];bu(p,this.options.draggable,r,!1)&&(a[s]=p)},this),n&&this.captureAnimationState(),t.forEach(function(s){a[s]&&(r.removeChild(a[s]),r.appendChild(a[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return bu(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var a=this.options;if(n===void 0)return a[t];var r=ny.modifyOption(this,t,n);typeof r<"u"?a[t]=r:a[t]=n,t==="group"&&vN(a)},destroy:function(){Pl("destroy",this);var t=this.el;t[Rl]=null,Qr(t,"mousedown",this._onTapStart),Qr(t,"touchstart",this._onTapStart),Qr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Qr(t,"dragover",this),Qr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Xg.splice(Xg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Fd){if(Pl("hideClone",this),gr.eventCanceled)return;Or(Oi,"display","none"),this.options.removeCloneOnHide&&Oi.parentNode&&Oi.parentNode.removeChild(Oi),Fd=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Fd){if(Pl("showClone",this),gr.eventCanceled)return;_n.parentNode==yi&&!this.options.group.revertClone?yi.insertBefore(Oi,_n):Gp?yi.insertBefore(Oi,Gp):yi.appendChild(Oi),this.options.group.revertClone&&this.animate(_n,Oi),Or(Oi,"display",""),Fd=!1}}};function qV(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ug(e,t,n,a,r,s,c,p){var d,_=e[Rl],g=_.options.onMove,b;return window.CustomEvent&&!Df&&!ty?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=t,d.from=e,d.dragged=n,d.draggedRect=a,d.related=r||t,d.relatedRect=s||Ki(t),d.willInsertAfter=p,d.originalEvent=c,e.dispatchEvent(d),g&&(b=g.call(_,d,c)),b}function k1(e){e.draggable=!1}function YV(){kw=!1}function KV(e,t,n){var a=Ki(kv(n.el,0,n.options,!0)),r=dN(n.el,n.options,Rr),s=10;return t?e.clientX<r.left-s||e.clientY<a.top&&e.clientX<a.right:e.clientY<r.top-s||e.clientY<a.bottom&&e.clientX<a.left}function ZV(e,t,n){var a=Ki(IE(n.el,n.options.draggable)),r=dN(n.el,n.options,Rr),s=10;return t?e.clientX>r.right+s||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>r.bottom+s||e.clientX>a.right&&e.clientY>a.top}function JV(e,t,n,a,r,s,c,p){var d=a?e.clientY:e.clientX,_=a?n.height:n.width,g=a?n.top:n.left,b=a?n.bottom:n.right,S=!1;if(!c){if(p&&bg<_*r){if(!jm&&(Dm===1?d>g+_*s/2:d<b-_*s/2)&&(jm=!0),jm)S=!0;else if(Dm===1?d<g+bg:d>b-bg)return-Dm}else if(d>g+_*(1-r)/2&&d<b-_*(1-r)/2)return QV(t)}return S=S||c,S&&(d<g+_*s/2||d>b-_*s/2)?d>g+_/2?1:-1:0}function QV(e){return Cs(_n)<Cs(e)?1:-1}function eG(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function tG(e){qg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&qg.push(a)}}function wg(e){return setTimeout(e,0)}function Nw(e){return clearTimeout(e)}M_&&ro(document,"touchmove",function(e){(gr.active||av)&&e.cancelable&&e.preventDefault()});gr.utils={on:ro,off:Qr,css:Or,find:sN,is:function(t,n){return!!bu(t,n,t,!1)},extend:LV,throttle:uN,closest:bu,toggleClass:rs,clone:fN,index:Cs,nextTick:wg,cancelNextTick:Nw,detectDirection:hN,getChild:kv,expando:Rl};gr.get=function(e){return e[Rl]};gr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(gr.utils=pc(pc({},gr.utils),a.utils)),ny.mount(a)})};gr.create=function(e,t){return new gr(e,t)};gr.version=jV;var Yi=[],wm,Pw,Rw=!1,N1,P1,Yg,Em;function nG(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var a=n.originalEvent;this.sortable.nativeDraggable?ro(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ro(document,"pointermove",this._handleFallbackAutoScroll):a.touches?ro(document,"touchmove",this._handleFallbackAutoScroll):ro(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var a=n.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?Qr(document,"dragover",this._handleAutoScroll):(Qr(document,"pointermove",this._handleFallbackAutoScroll),Qr(document,"touchmove",this._handleFallbackAutoScroll),Qr(document,"mousemove",this._handleFallbackAutoScroll)),rA(),Eg(),$V()},nulling:function(){Yg=Pw=wm=Rw=Em=N1=P1=null,Yi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,a){var r=this,s=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,p=document.elementFromPoint(s,c);if(Yg=n,a||this.options.forceAutoScrollFallback||ty||Df||Pm){R1(n,this.options,p,a);var d=Bd(p,!0);Rw&&(!Em||s!==N1||c!==P1)&&(Em&&rA(),Em=setInterval(function(){var _=Bd(document.elementFromPoint(s,c),!0);_!==d&&(d=_,Eg()),R1(n,r.options,_,a)},10),N1=s,P1=c)}else{if(!this.options.bubbleScroll||Bd(p,!0)===cc()){Eg();return}R1(n,this.options,Bd(p,!1),!1)}}},Pf(e,{pluginName:"scroll",initializeByDefault:!0})}function Eg(){Yi.forEach(function(e){clearInterval(e.pid)}),Yi=[]}function rA(){clearInterval(Em)}var R1=uN(function(e,t,n,a){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,p=t.scrollSpeed,d=cc(),_=!1,g;Pw!==n&&(Pw=n,Eg(),wm=t.scroll,g=t.scrollFn,wm===!0&&(wm=Bd(n,!0)));var b=0,S=wm;do{var T=S,A=Ki(T),O=A.top,E=A.bottom,C=A.left,j=A.right,U=A.width,L=A.height,V=void 0,$=void 0,H=T.scrollWidth,Y=T.scrollHeight,z=Or(T),W=T.scrollLeft,B=T.scrollTop;T===d?(V=U<H&&(z.overflowX==="auto"||z.overflowX==="scroll"||z.overflowX==="visible"),$=L<Y&&(z.overflowY==="auto"||z.overflowY==="scroll"||z.overflowY==="visible")):(V=U<H&&(z.overflowX==="auto"||z.overflowX==="scroll"),$=L<Y&&(z.overflowY==="auto"||z.overflowY==="scroll"));var q=V&&(Math.abs(j-r)<=c&&W+U<H)-(Math.abs(C-r)<=c&&!!W),J=$&&(Math.abs(E-s)<=c&&B+L<Y)-(Math.abs(O-s)<=c&&!!B);if(!Yi[b])for(var ce=0;ce<=b;ce++)Yi[ce]||(Yi[ce]={});(Yi[b].vx!=q||Yi[b].vy!=J||Yi[b].el!==T)&&(Yi[b].el=T,Yi[b].vx=q,Yi[b].vy=J,clearInterval(Yi[b].pid),(q!=0||J!=0)&&(_=!0,Yi[b].pid=setInterval((function(){a&&this.layer===0&&gr.active._onTouchMove(Yg);var re=Yi[this.layer].vy?Yi[this.layer].vy*p:0,Pe=Yi[this.layer].vx?Yi[this.layer].vx*p:0;typeof g=="function"&&g.call(gr.dragged.parentNode[Rl],Pe,re,e,Yg,Yi[this.layer].el)!=="continue"||cN(Yi[this.layer].el,Pe,re)}).bind({layer:b}),24))),b++}while(t.bubbleScroll&&S!==d&&(S=Bd(S,!1)));Rw=_}},30),gN=function(t){var n=t.originalEvent,a=t.putSortable,r=t.dragEl,s=t.activeSortable,c=t.dispatchSortableEvent,p=t.hideGhostForTarget,d=t.unhideGhostForTarget;if(n){var _=a||s;p();var g=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,b=document.elementFromPoint(g.clientX,g.clientY);d(),_&&!_.el.contains(b)&&(c("spill"),this.onSpill({dragEl:r,putSortable:a}))}};function LE(){}LE.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,a=t.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var r=kv(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),a&&a.animateAll()},drop:gN};Pf(LE,{pluginName:"revertOnSpill"});function $E(){}$E.prototype={onSpill:function(t){var n=t.dragEl,a=t.putSortable,r=a||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:gN};Pf($E,{pluginName:"removeOnSpill"});gr.mount(new nG);gr.mount($E,LE);const rG={class:"dialog-footer"},oG=$n({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=je(),s=je(!1),c=je(!1),p=je({name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],default_value:""}),d=oh({name:[{required:!0,message:_t("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:_t("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:_t("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),_=je(!1);Km(_,T=>{T||(p.value={name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const g=T=>{T&&(p.value=Se.cloneDeep(T),c.value=!0),_.value=!0},b=()=>{_.value=!1,c.value=!1},S=async T=>{T&&await T.validate(A=>{A&&a("refresh",p.value)})};return t({open:g,close:b}),(T,A)=>{const O=Q("el-input"),E=Q("el-form-item"),C=Q("el-switch"),j=Q("el-form"),U=Q("el-button"),L=Q("el-dialog");return _e(),Ke(L,{title:c.value?T.$t("common.param.editParam"):T.$t("common.param.addParam"),modelValue:_.value,"onUpdate:modelValue":A[8]||(A[8]=V=>_.value=V),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:R(()=>[K("span",rG,[k(U,{onClick:A[6]||(A[6]=qt(V=>_.value=!1,["prevent"]))},{default:R(()=>[tt(me(T.$t("common.cancel")),1)]),_:1}),k(U,{type:"primary",onClick:A[7]||(A[7]=V=>S(r.value)),loading:s.value},{default:R(()=>[tt(me(c.value?T.$t("common.save"):T.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:d,model:p.value,"require-asterisk-position":"right"},{default:R(()=>[k(E,{label:T.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:R(()=>[k(O,{modelValue:p.value.variable,"onUpdate:modelValue":A[0]||(A[0]=V=>p.value.variable=V),placeholder:T.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:A[1]||(A[1]=V=>p.value.variable=p.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),k(E,{label:T.$t("dynamicsForm.paramForm.required.label"),onClick:A[3]||(A[3]=qt(()=>{},["prevent"]))},{default:R(()=>[k(C,{size:"small",modelValue:p.value.isRequired,"onUpdate:modelValue":A[2]||(A[2]=V=>p.value.isRequired=V)},null,8,["modelValue"])]),_:1},8,["label"]),k(E,{label:T.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:p.value.isRequired,message:T.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:R(()=>[k(O,{modelValue:p.value.default_value,"onUpdate:modelValue":A[4]||(A[4]=V=>p.value.default_value=V),placeholder:T.$t("dynamicsForm.default.placeholder"),onBlur:A[5]||(A[5]=V=>p.value.name=p.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),iG={class:"flex-between mb-16"},aG={class:"lighter"},lG=["title"],sG=["title"],uG={class:"mr-4"},cG=$n({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=je(),a=je(null),r=je(),s=je([]);function c(g,b){typeof b<"u"&&(a.value=b),r.value.open(g)}function p(g){s.value.splice(g,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),_()}function d(g){for(let S=0;S<s.value.length;S++)if(s.value[S].variable===g.variable&&a.value!==S){za(_t("views.applicationWorkflow.tip.paramErrorMessage")+g.variable);return}const b=t.nodeModel.properties.user_input_field_list;for(let S=0;S<b.length;S++)if(b[S].field===g.variable){za(_t("views.applicationWorkflow.tip.paramErrorMessage")+g.variable);return}a.value!==null?s.value.splice(a.value,1,g):s.value.push(g),a.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),_()}function _(){if(!n.value)return;const b=n.value.$el.querySelector(".el-table__body-wrapper tbody");b&&gr.create(b,{animation:150,ghostClass:"ghost-row",onEnd:S=>{if(S.oldIndex===void 0||S.newIndex===void 0)return;const T=[...s.value],[A]=T.splice(S.oldIndex,1);T.splice(S.newIndex,0,A),s.value=T,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return Ur(()=>{t.nodeModel.properties.api_input_field_list?s.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(g=>g.assignment_method==="api_input").forEach(g=>{s.value.push(g)}),Se.set(t.nodeModel.properties,"api_input_field_list",s)}),(g,b)=>{var L;const S=Q("Plus"),T=Q("el-icon"),A=Q("el-button"),O=Q("el-table-column"),E=Q("el-switch"),C=Q("AppIcon"),j=Q("el-tooltip"),U=Q("el-table");return _e(),Yt(tr,null,[K("div",iG,[K("h5",aG,me(g.$t("views.model.modelForm.title.apiParamPassing")),1),k(A,{link:"",type:"primary",onClick:b[0]||(b[0]=V=>c())},{default:R(()=>[k(T,{class:"mr-4"},{default:R(()=>[k(S)]),_:1}),tt(" "+me(g.$t("common.add")),1)]),_:1})]),((L=t.nodeModel.properties.api_input_field_list)==null?void 0:L.length)>0?(_e(),Ke(U,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:R(()=>[k(O,{prop:"variable",label:g.$t("dynamicsForm.paramForm.field.label")},{default:R(({row:V})=>[K("span",{class:"ellipsis-1",title:V.variable},me(V.variable),9,lG)]),_:1},8,["label"]),k(O,{prop:"default_value",label:g.$t("dynamicsForm.default.label")},{default:R(({row:V})=>[K("span",{class:"ellipsis-1",title:V.default_value},me(V.default_value),9,sG)]),_:1},8,["label"]),k(O,{label:g.$t("common.required")},{default:R(({row:V})=>[K("div",{onClick:b[1]||(b[1]=qt(()=>{},["stop"]))},[k(E,{disabled:"",size:"small",modelValue:V.isRequired,"onUpdate:modelValue":$=>V.isRequired=$},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(O,{label:g.$t("common.operation"),align:"left",width:"90"},{default:R(({row:V,$index:$})=>[K("span",uG,[k(j,{effect:"dark",content:g.$t("common.modify"),placement:"top"},{default:R(()=>[k(A,{type:"primary",text:"",onClick:qt(H=>c(V,$),["stop"])},{default:R(()=>[k(C,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(j,{effect:"dark",content:g.$t("common.delete"),placement:"top"},{default:R(()=>[k(A,{type:"primary",text:"",onClick:H=>p($)},{default:R(()=>[k(C,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):cn("",!0),k(oG,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:d},null,512)],64)}}}),fG={class:"dialog-footer"},dG=$n({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=je(),s=je(!1),c=je(!1),p=je(),d=(E,C)=>E.every(j=>eM.get(C,j,void 0)!==void 0),_=Gn(()=>{if(p.value){const E=p.value;switch(E.type){case"input":return d(["field","input_type","label","required","attrs"],p.value)?p.value:{attrs:E.attrs||{maxlength:200,minlength:0},field:E.field||E.variable,input_type:"TextInput",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired};case"select":return d(["field","input_type","label","required","option_list"],p.value)?p.value:{attrs:E.attrs||{},field:E.field||E.variable,input_type:"SingleSelect",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired,option_list:E.option_list?E.option_list:E.optionList.map(C=>({key:C,value:C}))};case"date":return d(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],p.value)?p.value:{field:E.field||E.variable,input_type:"DatePicker",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return p.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:200,minlength:0},show_default_value:!0}}),g=je(null),b=je([{label:_t("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:_t("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:_t("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:_t("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:_t("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:_t("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:_t("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),S=je(!1),T=(E,C)=>{S.value=!0,E?(c.value=!0,p.value=Se.cloneDeep(E),g.value=C):p.value=null},A=()=>{S.value=!1,c.value=!1,g.value=null,p.value=null},O=async()=>{const E=r.value;E&&await E.validate().then(()=>{a("refresh",E==null?void 0:E.getData(),g.value),c.value=!1,p.value=null,g.value=null})};return t({open:T,close:A}),(E,C)=>{const j=Q("el-button"),U=Q("el-dialog");return _e(),Ke(U,{title:c.value?E.$t("common.param.editParam"):E.$t("common.param.addParam"),modelValue:S.value,"onUpdate:modelValue":C[2]||(C[2]=L=>S.value=L),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":A,"append-to-body":""},{footer:R(()=>[K("span",fG,[k(j,{onClick:qt(A,["prevent"])},{default:R(()=>[tt(me(E.$t("common.cancel")),1)]),_:1}),k(j,{type:"primary",onClick:C[1]||(C[1]=L=>O()),loading:s.value},{default:R(()=>[tt(me(c.value?E.$t("common.save"):E.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(c_,{modelValue:_.value,"onUpdate:modelValue":C[0]||(C[0]=L=>_.value=L),"label-position":"top","require-asterisk-position":"right",input_type_list:b.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),pG={class:"dialog-footer"},_N=$n({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=je(),s=je(!1),c=je({title:_t("chat.userInput")}),p=oh({title:[{required:!0,message:_t("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),d=je(!1),_=S=>{S&&(c.value=Se.cloneDeep(S)),d.value=!0},g=()=>{d.value=!1},b=async S=>{S&&await S.validate(T=>{T&&a("refresh",c.value)})};return t({open:_,close:g}),(S,T)=>{const A=Q("el-input"),O=Q("el-form-item"),E=Q("el-form"),C=Q("el-button"),j=Q("el-dialog");return _e(),Ke(j,{title:S.$t("common.setting"),modelValue:d.value,"onUpdate:modelValue":T[4]||(T[4]=U=>d.value=U),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:R(()=>[K("span",pG,[k(C,{onClick:T[2]||(T[2]=qt(U=>d.value=!1,["prevent"]))},{default:R(()=>[tt(me(S.$t("common.cancel")),1)]),_:1}),k(C,{type:"primary",onClick:T[3]||(T[3]=U=>b(r.value)),loading:s.value},{default:R(()=>[tt(me(S.$t("common.save")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(E,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:p,model:c.value,"require-asterisk-position":"right"},{default:R(()=>[k(O,{label:S.$t("common.title"),prop:"title"},{default:R(()=>[k(A,{modelValue:c.value.title,"onUpdate:modelValue":T[0]||(T[0]=U=>c.value.title=U),maxlength:"64","show-word-limit":"",onBlur:T[1]||(T[1]=U=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),hG={class:"flex-between mb-16"},vG=["title"],mG={class:"ml-4"},yG=["title"],gG={key:0},_G=["title"],bG={key:1},wG=["title"],EG=["title"],OG={class:"mr-4"},SG=$n({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=je(),a=je(),r=je(),s=je([]),c=je({title:_t("chat.userInput")});function p(A,O){a.value.open(A,O)}function d(){r.value.open(c.value)}function _(A){s.value.splice(A,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),T()}function g(A,O){for(let C=0;C<s.value.length;C++)if(s.value[C].field===A.field&&O!==C){za(_t("views.applicationWorkflow.tip.paramErrorMessage")+A.field);return}const E=t.nodeModel.properties.api_input_field_list;for(let C=0;C<E.length;C++)if(E[C].variable===A.field){za(_t("views.applicationWorkflow.tip.paramErrorMessage")+A.field);return}O!==null?s.value.splice(O,1,A):s.value.push(A),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),T()}function b(A){c.value=A,r.value.close()}const S=A=>{var O;if(A.input_type==="PasswordInput")return"******";if(A.default_value){const E=(O=A.option_list)==null?void 0:O.filter(C=>A.default_value.indexOf(C.value)>-1).map(C=>C.label).join(",");return E||A.default_value}if(A.default_value!==void 0)return A.default_value};function T(){if(!n.value)return;const O=n.value.$el.querySelector(".el-table__body-wrapper tbody");O&&gr.create(O,{animation:150,ghostClass:"ghost-row",onEnd:E=>{if(E.oldIndex===void 0||E.newIndex===void 0)return;const C=[...s.value],[j]=C.splice(E.oldIndex,1);C.splice(E.newIndex,0,j),s.value=C,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return Ur(()=>{t.nodeModel.properties.user_input_field_list?s.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(A=>A.assignment_method==="user_input").forEach(A=>{s.value.push(A)}),s.value.forEach((A,O)=>{switch(A.label=A.label||A.name,A.field=A.field||A.variable,A.required=A.required||A.isRequired,A.type){case"input":A.input_type="TextInput";break;case"select":A.input_type="SingleSelect";break;case"date":A.input_type="DatePicker";break}}),Se.set(t.nodeModel.properties,"user_input_field_list",s),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),Se.set(t.nodeModel.properties,"user_input_config",c),T()}),(A,O)=>{var z;const E=Q("AppIcon"),C=Q("el-button"),j=Q("Plus"),U=Q("el-icon"),L=Q("el-table-column"),V=Q("el-tag"),$=Q("el-switch"),H=Q("el-tooltip"),Y=Q("el-table");return _e(),Yt(tr,null,[K("div",hG,[K("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},me(c.value.title),9,vG),K("div",null,[k(C,{type:"primary",link:"",onClick:d},{default:R(()=>[k(E,{iconName:"app-setting"})]),_:1}),K("span",mG,[k(C,{link:"",type:"primary",onClick:O[0]||(O[0]=W=>p())},{default:R(()=>[k(U,{class:"mr-4"},{default:R(()=>[k(j)]),_:1}),tt(" "+me(A.$t("common.add")),1)]),_:1})])])]),((z=t.nodeModel.properties.user_input_field_list)==null?void 0:z.length)>0?(_e(),Ke(Y,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:R(()=>[k(L,{prop:"field",label:A.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:R(({row:W})=>[K("span",{title:W.field,class:"ellipsis-1"},me(W.field),9,yG)]),_:1},8,["label"]),k(L,{prop:"label",label:A.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:W})=>[W.label&&W.label.input_type==="TooltipLabel"?(_e(),Yt("span",gG,[K("span",{title:W.label.label,class:"ellipsis-1"},me(W.label.label),9,_G)])):(_e(),Yt("span",bG,[K("span",{title:W.label,class:"ellipsis-1"},me(W.label),9,wG)]))]),_:1},8,["label"]),k(L,{label:A.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:R(({row:W})=>[W.input_type==="TextInput"?(_e(),Ke(V,{key:0,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):cn("",!0),W.input_type==="PasswordInput"?(_e(),Ke(V,{key:1,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):cn("",!0),W.input_type==="Slider"?(_e(),Ke(V,{key:2,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):cn("",!0),W.input_type==="SwitchInput"?(_e(),Ke(V,{key:3,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):cn("",!0),W.input_type==="SingleSelect"?(_e(),Ke(V,{key:4,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):cn("",!0),W.input_type==="MultiSelect"?(_e(),Ke(V,{key:5,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):cn("",!0),W.input_type==="RadioCard"?(_e(),Ke(V,{key:6,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):cn("",!0),W.input_type==="DatePicker"?(_e(),Ke(V,{key:7,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):cn("",!0)]),_:1},8,["label"]),k(L,{prop:"default_value",label:A.$t("dynamicsForm.default.label")},{default:R(({row:W})=>[K("span",{title:W.default_value,class:"ellipsis-1"},me(S(W)),9,EG)]),_:1},8,["label"]),k(L,{label:A.$t("common.required")},{default:R(({row:W})=>[K("div",{onClick:O[1]||(O[1]=qt(()=>{},["stop"]))},[k($,{disabled:"",size:"small",modelValue:W.required,"onUpdate:modelValue":B=>W.required=B},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(L,{label:A.$t("common.operation"),align:"left",width:"90"},{default:R(({row:W,$index:B})=>[K("span",OG,[k(H,{effect:"dark",content:A.$t("common.modify"),placement:"top"},{default:R(()=>[k(C,{type:"primary",text:"",onClick:qt(q=>p(W,B),["stop"])},{default:R(()=>[k(E,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(H,{effect:"dark",content:A.$t("common.delete"),placement:"top"},{default:R(()=>[k(C,{type:"primary",text:"",onClick:q=>_(B)},{default:R(()=>[k(E,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):cn("",!0),k(dG,{ref_key:"UserFieldFormDialogRef",ref:a,onRefresh:g},null,512),k(_N,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:b},null,512)],64)}}}),xG="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.8146C19.9934%202%2020.1647%202.07183%2020.29%202.19934L26.4756%208.49255C26.5982%208.61722%2026.6668%208.78505%2026.6668%208.95987V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.02637C20.1089%202.05793%2020.2089%202.11704%2020.2899%202.19936L26.4755%208.49256C26.5261%208.54408%2026.5675%208.60297%2026.5987%208.66668H21.5135C20.6776%208.66668%2020%207.98906%2020%207.15317V2.02637Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M10.7636%2013.5757H20.8727C20.9932%2013.5757%2021.0909%2013.6734%2021.0909%2013.7939V14.8121C21.0909%2014.9326%2020.9932%2015.0303%2020.8727%2015.0303H10.7636C10.6431%2015.0303%2010.5454%2014.9326%2010.5454%2014.8121V13.7939C10.5454%2013.6734%2010.6431%2013.5757%2010.7636%2013.5757ZM10.7636%2017.9394H20.8727C20.9932%2017.9394%2021.0909%2018.0371%2021.0909%2018.1576V19.1757C21.0909%2019.2962%2020.9932%2019.3939%2020.8727%2019.3939H10.7636C10.6431%2019.3939%2010.5454%2019.2962%2010.5454%2019.1757V18.1576C10.5454%2018.0371%2010.6431%2017.9394%2010.7636%2017.9394ZM10.7636%2022.303H16.1454C16.2659%2022.303%2016.3636%2022.4007%2016.3636%2022.5212V23.5394C16.3636%2023.6599%2016.2659%2023.7576%2016.1454%2023.7576H10.7636C10.6431%2023.7576%2010.5454%2023.6599%2010.5454%2023.5394V22.5212C10.5454%2022.4007%2010.6431%2022.303%2010.7636%2022.303Z'%20fill='white'/%3e%3c/svg%3e",AG="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%2314C0FF'/%3e%3cpath%20d='M20%202.05988C20.072%202.09264%2020.1383%202.13825%2020.1953%202.19526L26.4714%208.4714C26.5284%208.52841%2026.574%208.59467%2026.6068%208.66666H21.3333C20.597%208.66666%2020%208.06971%2020%207.33333V2.05988Z'%20fill='%2311A3D9'/%3e%3cpath%20d='M11.3335%2016C12.4381%2016%2013.3335%2015.1046%2013.3335%2014C13.3335%2012.8954%2012.4381%2012%2011.3335%2012C10.2289%2012%209.3335%2012.8954%209.3335%2014C9.3335%2015.1046%2010.2289%2016%2011.3335%2016Z'%20fill='white'/%3e%3cpath%20d='M22.2785%2014.9317C22.4218%2014.7884%2022.6668%2014.8899%2022.6668%2015.0925V24.0645C22.6668%2024.1901%2022.565%2024.2919%2022.4394%2024.2919H13.4674L13.4587%2024.2918H9.56142C9.35877%2024.2918%209.25728%2024.0468%209.40058%2023.9035L14.366%2018.938C14.4549%2018.8492%2014.5989%2018.8492%2014.6877%2018.938L16.48%2020.7302L22.2785%2014.9317Z'%20fill='white'/%3e%3c/svg%3e",TG="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.05994C20.072%202.0927%2020.1383%202.13831%2020.1953%202.19532L26.4714%208.47146C26.5284%208.52847%2026.574%208.59473%2026.6068%208.66672H21.3333C20.597%208.66672%2020%208.06977%2020%207.33339V2.05994Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M19.976%2012.8794C20.254%2012.9447%2020.4595%2013.1796%2020.4872%2013.4638L20.6106%2014.7297C20.6546%2015.1805%2020.2459%2015.5429%2019.8037%2015.4455L16.7344%2014.7691C16.5577%2014.7302%2016.3944%2014.8747%2016.4116%2015.0548L17.1297%2022.5884C17.1297%2022.7046%2017.1151%2022.7812%2017.0891%2022.8249C17.0254%2024.3752%2015.7484%2025.6124%2014.1825%2025.6124C12.5759%2025.6124%2011.2734%2024.31%2011.2734%2022.7033C11.2734%2021.0967%2012.5759%2019.7942%2014.1825%2019.7942C14.8467%2019.7942%2015.4589%2020.0168%2015.9485%2020.3914L15.274%2012.6749C15.2345%2012.2228%2015.6485%2011.8642%2016.0904%2011.9678L19.976%2012.8794Z'%20fill='white'/%3e%3c/svg%3e",MG="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%202.5C4%201.94772%204.44772%201.5%205%201.5H14.7929C14.9255%201.5%2015.0527%201.55268%2015.1464%201.64645L19.8536%206.35355C19.9473%206.44732%2020%206.5745%2020%206.70711V21.5C20%2022.0523%2019.5523%2022.5%2019%2022.5H5C4.44772%2022.5%204%2022.0523%204%2021.5V2.5Z'%20fill='%238F959E'/%3e%3cpath%20d='M15%201.54492C15.054%201.56949%2015.1037%201.6037%2015.1464%201.64646L19.8536%206.35357C19.8963%206.39632%2019.9305%206.44602%2019.9551%206.50001H16C15.4477%206.50001%2015%206.0523%2015%205.50001V1.54492Z'%20fill='%23646A73'/%3e%3cpath%20d='M14.288%209.86441C13.7422%209.34739%2013.026%209.09082%2012.1353%209.09082C11.1347%209.09082%2010.3505%209.41162%209.78235%2010.065C9.30108%2010.6265%209.04179%2011.1646%209.00471%2012.013C9.00384%2012.033%209.00309%2012.0697%209.00247%2012.1122C9.00043%2012.2508%209.11287%2012.3635%209.25147%2012.3635H9.84253C9.98%2012.3635%2010.0914%2012.2525%2010.0936%2012.1151C10.0943%2012.0737%2010.0951%2012.038%2010.0961%2012.0189C10.1251%2011.4328%2010.278%2011.1262%2010.5508%2010.7851C10.8953%2010.3259%2011.4006%2010.0999%2012.0943%2010.0999C12.7134%2010.0999%2013.1776%2010.2578%2013.4979%2010.5782C13.8033%2010.8963%2013.9625%2011.3294%2013.9625%2011.8726C13.9625%2012.2435%2013.8281%2012.5967%2013.5549%2012.948C13.4678%2013.0568%2013.3425%2013.1862%2012.9388%2013.5899C12.3012%2014.1474%2011.9073%2014.601%2011.6993%2015.0468C11.5282%2015.3888%2011.441%2015.7775%2011.441%2016.1954V16.4772C11.441%2016.6153%2011.5529%2016.7272%2011.691%2016.7272H12.2956C12.4336%2016.7272%2012.5456%2016.6153%2012.5456%2016.4772V16.1954C12.5456%2015.8413%2012.6327%2015.5237%2012.8133%2015.2141C12.9486%2014.9841%2013.1223%2014.8038%2013.4251%2014.5389C14.0321%2013.9897%2014.3689%2013.6625%2014.5198%2013.4705C14.8821%2012.9923%2015.0671%2012.4446%2015.0671%2011.8454C15.0671%2011.0185%2014.8075%2010.355%2014.288%209.86441ZM11.7046%2017.8181C11.5666%2017.8181%2011.4546%2017.93%2011.4546%2018.0681V18.659C11.4546%2018.7971%2011.5666%2018.909%2011.7046%2018.909H12.2956C12.4336%2018.909%2012.5456%2018.7971%2012.5456%2018.659V18.0681C12.5456%2017.93%2012.4336%2017.8181%2012.2956%2017.8181H11.7046Z'%20fill='white'/%3e%3c/svg%3e",kG={class:"flex-between"},NG={class:"flex align-center"},PG={class:"line-height-22 mt-4"},RG={class:"flex-between"},CG={class:"flex align-center"},DG={class:"line-height-22 mt-4"},jG={class:"flex-between"},IG={class:"flex align-center"},LG={class:"line-height-22 mt-4"},$G={class:"flex-between"},FG={class:"flex align-center"},BG={class:"line-height-22 mt-4"},UG={class:"dialog-footer"},VG=$n({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=e,s=je(!1),c=je(!1),p=je(""),d=je(!1),_=je(),g=je(),b=["TXT","MD","DOCX","HTML","CSV","XLSX","XLS","PDF"],S=["JPG","JPEG","PNG","GIF"],T=["MP3","WAV","OGG","ACC","M4A"],A=je({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["PPT","DOC"]});function O(V){s.value=!0,Ng(()=>{A.value={...A.value,...V}})}function E(){s.value=!1}const C=V=>{A.value.otherExtensions=A.value.otherExtensions.filter($=>$!==V)},j=()=>{c.value=!0,Ng(()=>{g.value.input.focus()})},U=()=>{if(p.value){if(p.value=p.value.toUpperCase(),A.value.otherExtensions.includes(p.value)||b.includes(p.value)||S.includes(p.value)||T.includes(p.value)){c.value=!1,p.value="",n8(_t("common.fileUpload.existingExtensionsTip"));return}A.value.otherExtensions.push(p.value)}c.value=!1,p.value=""};async function L(){const V=_.value;V&&await V.validate().then(()=>{const $=Se.cloneDeep(A.value);a("refresh",$),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),s.value=!1})}return t({open:O}),(V,$)=>{const H=Q("el-slider"),Y=Q("el-form-item"),z=Q("el-text"),W=Q("el-checkbox"),B=Q("el-card"),q=Q("el-tag"),J=Q("el-input"),ce=Q("el-button"),re=Q("el-space"),Pe=Q("el-form"),ge=Q("el-dialog");return _e(),Ke(ge,{title:V.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:s.value,"onUpdate:modelValue":$[16]||($[16]=fe=>s.value=fe),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":E,"append-to-body":"",width:"800"},{footer:R(()=>[K("span",UG,[k(ce,{onClick:qt(E,["prevent"])},{default:R(()=>[tt(me(V.$t("common.cancel")),1)]),_:1}),k(ce,{type:"primary",onClick:$[15]||($[15]=fe=>L()),loading:d.value},{default:R(()=>[tt(me(V.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(Pe,{"label-position":"top",ref_key:"fieldFormRef",ref:_,model:A.value,"require-asterisk-position":"right"},{default:R(()=>[k(Y,{label:V.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:R(()=>[k(H,{modelValue:A.value.maxFiles,"onUpdate:modelValue":$[0]||($[0]=fe=>A.value.maxFiles=fe),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),k(Y,{label:V.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:R(()=>[k(H,{modelValue:A.value.fileLimit,"onUpdate:modelValue":$[1]||($[1]=fe=>A.value.fileLimit=fe),"show-input":"","show-input-controls":!1,min:1,max:1e3},null,8,["modelValue"])]),_:1},8,["label"]),k(Y,{label:V.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:R(()=>[k(B,{shadow:"hover",class:wu(["card-checkbox cursor w-full mb-8",A.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:$[4]||($[4]=qt(fe=>A.value.document=!A.value.document,["stop"]))},{default:R(()=>[K("div",kG,[K("div",NG,[$[17]||($[17]=K("img",{class:"mr-12",src:xG,alt:""},null,-1)),K("div",null,[K("p",PG,[tt(me(V.$t("common.fileUpload.document"))+" ",1),k(z,{class:"color-secondary"},{default:R(()=>[tt(me(V.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})]),K("p",null,me(b.join("、")),1)])]),k(W,{modelValue:A.value.document,"onUpdate:modelValue":$[2]||($[2]=fe=>A.value.document=fe),onChange:$[3]||($[3]=fe=>A.value.document=!A.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),k(B,{shadow:"hover",class:wu(["card-checkbox cursor w-full mb-8",A.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:$[7]||($[7]=qt(fe=>A.value.image=!A.value.image,["stop"]))},{default:R(()=>[K("div",RG,[K("div",CG,[$[18]||($[18]=K("img",{class:"mr-12",src:AG,alt:""},null,-1)),K("div",null,[K("p",DG,[tt(me(V.$t("common.fileUpload.image"))+" ",1),k(z,{class:"color-secondary"},{default:R(()=>[tt(me(V.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})]),K("p",null,me(S.join("、")),1)])]),k(W,{modelValue:A.value.image,"onUpdate:modelValue":$[5]||($[5]=fe=>A.value.image=fe),onChange:$[6]||($[6]=fe=>A.value.image=!A.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),k(B,{shadow:"hover",class:wu(["card-checkbox cursor w-full mb-8",A.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:$[10]||($[10]=qt(fe=>A.value.audio=!A.value.audio,["stop"]))},{default:R(()=>[K("div",jG,[K("div",IG,[$[19]||($[19]=K("img",{class:"mr-12",src:TG,alt:""},null,-1)),K("div",null,[K("p",LG,[tt(me(V.$t("common.fileUpload.audio"))+" ",1),k(z,{class:"color-secondary"},{default:R(()=>[tt(me(V.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})]),K("p",null,me(T.join("、")),1)])]),k(W,{modelValue:A.value.audio,"onUpdate:modelValue":$[8]||($[8]=fe=>A.value.audio=fe),onChange:$[9]||($[9]=fe=>A.value.audio=!A.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"]),k(B,{shadow:"hover",class:wu(["card-checkbox cursor w-full mb-8",A.value.other?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:$[14]||($[14]=qt(fe=>A.value.other=!A.value.other,["stop"]))},{default:R(()=>[K("div",$G,[K("div",FG,[$[20]||($[20]=K("img",{class:"mr-12",width:32,src:MG,alt:""},null,-1)),K("div",null,[K("p",BG,[tt(me(V.$t("common.fileUpload.other"))+" ",1),k(z,{class:"color-secondary"},{default:R(()=>[tt(me(V.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.otherText")),1)]),_:1})]),k(re,{wrap:"",size:2,class:"mt-4"},{default:R(()=>[(_e(!0),Yt(tr,null,Wr(A.value.otherExtensions,fe=>(_e(),Ke(q,{key:fe,closable:"","disable-transitions":!1,onClose:Ee=>C(fe),type:"info",class:"mr-4",effect:"plain",style:{"--el-tag-border-radius":"4px","--el-tag-border-color":"var(--el-border-color)"}},{default:R(()=>[tt(me(fe),1)]),_:2},1032,["onClose"]))),128)),c.value?(_e(),Ke(J,{key:0,ref_key:"InputRef",ref:g,modelValue:p.value,"onUpdate:modelValue":$[11]||($[11]=fe=>p.value=fe),size:"small",onKeyup:t8(U,["enter"]),onBlur:U},null,8,["modelValue"])):(_e(),Ke(ce,{key:1,class:"button-new-tag",size:"small",onClick:qt(j,["stop"])},{default:R(()=>[tt(" + "+me(V.$t("common.fileUpload.addExtensions")),1)]),_:1}))]),_:1})])]),k(W,{modelValue:A.value.other,"onUpdate:modelValue":$[12]||($[12]=fe=>A.value.other=fe),onChange:$[13]||($[13]=fe=>A.value.other=!A.value.other)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),GG={class:"dialog-footer"},zG=$n({__name:"ChatFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=je(),s=je(!1),c=je(!1),p=je(null),d=je({field:"",label:""}),_=oh({label:[{required:!0,message:_t("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:_t("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:_t("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=je(!1),b=(A,O)=>{A&&(d.value=Se.cloneDeep(A),c.value=!0,p.value=O),g.value=!0},S=()=>{g.value=!1,c.value=!1,p.value=null,d.value={field:"",label:""}},T=async A=>{A&&await A.validate(O=>{O&&a("refresh",d.value,p.value)})};return t({open:b,close:S}),(A,O)=>{const E=Q("el-input"),C=Q("el-form-item"),j=Q("el-form"),U=Q("el-button"),L=Q("el-dialog");return _e(),Ke(L,{title:c.value?A.$t("common.param.editParam"):A.$t("common.param.addParam"),modelValue:g.value,"onUpdate:modelValue":O[3]||(O[3]=V=>g.value=V),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":S,"append-to-body":""},{footer:R(()=>[K("span",GG,[k(U,{onClick:qt(S,["prevent"])},{default:R(()=>[tt(me(A.$t("common.cancel")),1)]),_:1}),k(U,{type:"primary",onClick:O[2]||(O[2]=V=>T(r.value)),loading:s.value},{default:R(()=>[tt(me(c.value?A.$t("common.save"):A.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:_,model:d.value,"require-asterisk-position":"right"},{default:R(()=>[k(C,{label:A.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:_.field},{default:R(()=>[k(E,{modelValue:d.value.field,"onUpdate:modelValue":O[0]||(O[0]=V=>d.value.field=V),maxlength:64,placeholder:A.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(C,{label:A.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:_.label},{default:R(()=>[k(E,{modelValue:d.value.label,"onUpdate:modelValue":O[1]||(O[1]=V=>d.value.label=V),maxlength:64,"show-word-limit":"",placeholder:A.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),WG={class:"flex-between mb-16"},HG={class:"break-all ellipsis lighter",style:{"max-width":"80%"}},XG={class:"ml-4"},qG=["title"],YG=["title"],KG={class:"mr-4"},ZG=$n({__name:"ChatFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=je(),a=je(),r=je([]);function s(d,_){a.value.open(d,_)}function c(d){r.value.splice(d,1),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}function p(d,_){for(let g=0;g<r.value.length;g++)if(r.value[g].field===d.field&&_!==g){za(_t("views.applicationWorkflow.tip.paramErrorMessage")+d.field);return}[void 0,null].includes(_)?r.value.push(d):r.value.splice(_,1,d),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}return Ur(()=>{t.nodeModel.properties.chat_input_field_list&&(r.value=Se.cloneDeep(t.nodeModel.properties.chat_input_field_list)),Se.set(t.nodeModel.properties,"chat_input_field_list",r)}),(d,_)=>{var O;const g=Q("AppIcon"),b=Q("el-button"),S=Q("el-table-column"),T=Q("el-tooltip"),A=Q("el-table");return _e(),Yt(tr,null,[K("div",WG,[K("h5",HG,me(d.$t("views.applicationWorkflow.variable.chat")),1),K("div",null,[K("span",XG,[k(b,{link:"",type:"primary",onClick:_[0]||(_[0]=E=>s())},{default:R(()=>[k(g,{iconName:"app-add-outlined",class:"mr-4"}),tt(" "+me(d.$t("common.add")),1)]),_:1})])])]),((O=t.nodeModel.properties.chat_input_field_list)==null?void 0:O.length)>0?(_e(),Ke(A,{key:0,data:t.nodeModel.properties.chat_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:R(()=>[k(S,{prop:"field",label:d.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:R(({row:E})=>[K("span",{title:E.field,class:"ellipsis-1"},me(E.field),9,qG)]),_:1},8,["label"]),k(S,{prop:"label",label:d.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:E})=>[K("span",null,[K("span",{title:E.label,class:"ellipsis-1"},me(E.label),9,YG)])]),_:1},8,["label"]),k(S,{label:d.$t("common.operation"),align:"left",width:"90"},{default:R(({row:E,$index:C})=>[K("span",KG,[k(T,{effect:"dark",content:d.$t("common.modify"),placement:"top"},{default:R(()=>[k(b,{type:"primary",text:"",onClick:qt(j=>s(E,C),["stop"])},{default:R(()=>[k(g,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(T,{effect:"dark",content:d.$t("common.delete"),placement:"top"},{default:R(()=>[k(b,{type:"primary",text:"",onClick:j=>c(C)},{default:R(()=>[k(g,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):cn("",!0),k(zG,{ref_key:"ChatFieldDialogRef",ref:a,onRefresh:p},null,512)],64)}}}),JG={class:"flex-between"},QG={class:"flex align-center"},ez={class:"mr-4"},tz={class:"flex-between"},nz={class:"mr-4"},rz={class:"flex"},oz={class:"flex-between"},iz={class:"mr-4"},az={class:"flex"},lz={class:"w-full"},sz={class:"flex-between w-full"},uz=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("getResourceDetail"),n=Zi(),{params:{id:a}}=n,r=Gn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=e,c=je(null),p=je(null),d=je(),_=je(),g=je(),b=je(),S={name:"",desc:"",prologue:_t("views.application.form.defaultPrologue")},T=J=>J.ctrlKey===!0?(J.preventDefault(),!0):(J.stopPropagation(),!0);function A(J){Se.set(s.nodeModel.properties.nodeData,"prologue",J)}const O=Gn({get:()=>(s.nodeModel.properties.nodeData||Se.set(s.nodeModel.properties,"nodeData",S),s.nodeModel.properties.nodeData),set:J=>{Se.set(s.nodeModel.properties,"nodeData",J)}}),E=je(),C=()=>{var J;return O.value.ttsModelEnable&&!O.value.ttsModelId&&O.value.ttsType==="TTS"?Promise.reject({node:s.nodeModel,errMessage:_t("views.application.form.voicePlay.requiredMessage")}):O.value.sttModelEnable&&!O.value.sttModelId?Promise.reject({node:s.nodeModel,errMessage:_t("views.application.form.voiceInput.requiredMessage")}):(J=E.value)==null?void 0:J.validate().catch(ce=>Promise.reject({node:s.nodeModel,errMessage:ce}))},j=t();function U(){var ce;const J=r.value==="systemManage"?{modelType:"STT",workspaceId:(ce=j.value)==null?void 0:ce.workspaceId}:{modelType:"STT"};si({type:"model",systemType:r.value}).getSelectModelList(J).then(re=>{c.value=Se.groupBy(re==null?void 0:re.data,"provider")})}function L(){var ce;const J=r.value==="systemManage"?{modelType:"TTS",workspaceId:(ce=j.value)==null?void 0:ce.workspaceId}:{modelType:"TTS"};si({type:"model",systemType:r.value}).getSelectModelList(J).then(re=>{p.value=Se.groupBy(re==null?void 0:re.data,"provider")})}function V(){Ng(()=>{var J;O.value.ttsModelId?(J=d.value)==null||J.reset_default(O.value.ttsModelId,a):z({})})}function $(){O.value.ttsModelEnable||(O.value.ttsModelId="",O.value.ttsType="BROWSER")}function H(){O.value.sttModelEnable||(O.value.sttModelId="")}const Y=()=>{var ce;const J=O.value.ttsModelId;if(!J){Jm(_t("views.application.form.voicePlay.requiredMessage"));return}(ce=d.value)==null||ce.open(J,a,O.value.ttsModelParamsSetting)},z=J=>{O.value.ttsModelParamsSetting=J},W=()=>{const J={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["ppt","doc"]};O.value.fileUploadEnable&&(O.value.fileUploadSetting=O.value.fileUploadSetting||J),s.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},B=()=>{var J;(J=b.value)==null||J.open(O.value.fileUploadSetting)},q=J=>{O.value.fileUploadSetting=J};return Ur(()=>{Se.set(s.nodeModel,"validate",C),s.nodeModel.properties.nodeData.ttsType||Se.set(s.nodeModel.properties.nodeData,"ttsType","BROWSER"),L(),U()}),(J,ce)=>{const re=Q("el-input"),Pe=Q("el-form-item"),ge=Q("el-tooltip"),fe=Q("el-button"),Ee=Q("el-switch"),Ne=Q("el-checkbox"),rt=Q("el-radio"),mt=Q("el-radio-group"),Je=Q("Operation"),Xt=Q("el-icon"),en=Q("el-form");return _e(),Ke(go,{nodeModel:J.nodeModel},{default:R(()=>[k(en,{onSubmit:ce[13]||(ce[13]=qt(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:E},{default:R(()=>[k(Pe,{label:J.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:Zt(_t)("views.application.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:R(()=>[k(re,{modelValue:O.value.name,"onUpdate:modelValue":ce[0]||(ce[0]=Bt=>O.value.name=Bt),maxlength:"64",placeholder:Zt(_t)("views.application.form.appName.placeholder"),"show-word-limit":"",onBlur:ce[1]||(ce[1]=Bt=>{var Nn;return O.value.name=(Nn=O.value.name)==null?void 0:Nn.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(Pe,{label:J.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:R(()=>[k(re,{modelValue:O.value.desc,"onUpdate:modelValue":ce[2]||(ce[2]=Bt=>O.value.desc=Bt),placeholder:J.$t("views.application.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),k(Pe,{label:J.$t("views.application.form.prologue")},{default:R(()=>[k(is,{onWheel:T,title:J.$t("views.application.form.prologue"),modelValue:O.value.prologue,"onUpdate:modelValue":ce[3]||(ce[3]=Bt=>O.value.prologue=Bt),style:{height:"150px"},onSubmitDialog:A},null,8,["title","modelValue"])]),_:1},8,["label"]),k(Pe,null,{label:R(()=>[K("div",JG,[K("div",QG,[K("span",ez,me(J.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),k(ge,{effect:"dark",content:J.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),K("div",null,[O.value.fileUploadEnable?(_e(),Ke(fe,{key:0,type:"primary",link:"",onClick:B,class:"mr-4"},{default:R(()=>[k(Ar,{iconName:"app-setting",class:"mr-4"})]),_:1})):cn("",!0),k(Ee,{size:"small",modelValue:O.value.fileUploadEnable,"onUpdate:modelValue":ce[4]||(ce[4]=Bt=>O.value.fileUploadEnable=Bt),onChange:W},null,8,["modelValue"])])])]),_:1}),k(SG,{ref_key:"UserInputFieldTableFef",ref:_,"node-model":J.nodeModel},null,8,["node-model"]),k(cG,{ref_key:"ApiInputFieldTableFef",ref:g,"node-model":J.nodeModel},null,8,["node-model"]),k(ZG,{ref:"ChatFieldTeble","node-model":J.nodeModel},null,8,["node-model"]),k(Pe,null,{label:R(()=>[K("div",tz,[K("span",nz,me(J.$t("views.application.form.voiceInput.label")),1),K("div",rz,[O.value.sttModelEnable?(_e(),Ke(Ne,{key:0,modelValue:O.value.sttAutoSend,"onUpdate:modelValue":ce[5]||(ce[5]=Bt=>O.value.sttAutoSend=Bt)},{default:R(()=>[tt(me(J.$t("views.application.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):cn("",!0),k(Ee,{class:"ml-8",size:"small",modelValue:O.value.sttModelEnable,"onUpdate:modelValue":ce[6]||(ce[6]=Bt=>O.value.sttModelEnable=Bt),onChange:H},null,8,["modelValue"])])])]),default:R(()=>[Wa(k(Su,{onWheel:T,modelValue:O.value.sttModelId,"onUpdate:modelValue":ce[7]||(ce[7]=Bt=>O.value.sttModelId=Bt),placeholder:J.$t("views.application.form.voiceInput.placeholder"),options:c.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"]),[[fc,O.value.sttModelEnable]])]),_:1}),k(Pe,null,{label:R(()=>[K("div",oz,[K("span",iz,me(J.$t("views.application.form.voicePlay.label")),1),K("div",az,[O.value.ttsModelEnable?(_e(),Ke(Ne,{key:0,modelValue:O.value.ttsAutoplay,"onUpdate:modelValue":ce[8]||(ce[8]=Bt=>O.value.ttsAutoplay=Bt)},{default:R(()=>[tt(me(J.$t("views.application.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):cn("",!0),k(Ee,{class:"ml-8",size:"small",modelValue:O.value.ttsModelEnable,"onUpdate:modelValue":ce[9]||(ce[9]=Bt=>O.value.ttsModelEnable=Bt),onChange:$},null,8,["modelValue"])])])]),default:R(()=>[K("div",lz,[Wa(k(mt,{modelValue:O.value.ttsType,"onUpdate:modelValue":ce[10]||(ce[10]=Bt=>O.value.ttsType=Bt)},{default:R(()=>[k(rt,{label:J.$t("views.application.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),k(rt,{label:J.$t("views.application.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[fc,O.value.ttsModelEnable]])]),K("div",sz,[O.value.ttsType==="TTS"&&O.value.ttsModelEnable?(_e(),Ke(Su,{key:0,onWheel:T,modelValue:O.value.ttsModelId,"onUpdate:modelValue":ce[11]||(ce[11]=Bt=>O.value.ttsModelId=Bt),placeholder:J.$t("views.application.form.voicePlay.placeholder"),options:p.value,onChange:ce[12]||(ce[12]=Bt=>V()),showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])):cn("",!0),O.value.ttsType==="TTS"&&O.value.ttsModelEnable?(_e(),Ke(fe,{key:1,onClick:Y,disabled:!O.value.ttsModelId,class:"ml-8"},{default:R(()=>[k(Xt,null,{default:R(()=>[k(Xt,null,{default:R(()=>[k(Je)]),_:1})]),_:1})]),_:1},8,["disabled"])):cn("",!0)])]),_:1})]),_:1},8,["model"]),k(nM,{ref_key:"TTSModeParamSettingDialogRef",ref:d,onRefresh:z},null,512),k(VG,{ref_key:"FileUploadSettingDialogRef",ref:b,"node-model":J.nodeModel,onRefresh:q},null,8,["node-model"])]),_:1},8,["nodeModel"])}}}),cz=rh(uz,[["__scopeId","data-v-0889e9a7"]]);let fz=class extends _o{constructor(t){super(t,cz)}},dz=class extends bo{constructor(t,n){super(t,n)}get_width(){return 600}};const pz={type:"base-node",model:dz,view:fz},hz=Object.freeze(Object.defineProperty({__proto__:null,default:pz},Symbol.toStringTag,{value:"Module"})),vz={class:"handle flex-between lighter"},mz={class:"flex align-center"},yz={key:0,class:"info"},gz={key:0,class:"mt-8"},_z=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:fl(),type:"IF",condition:"and"},{conditions:[],id:fl(),type:"ELSE",condition:"and"}]},a=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),r=(O,E,C)=>{const U=Se.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]).map(L=>L.id===E.id?{...L,height:O.height,index:C}:L);Se.set(t.nodeModel.properties,"branch_condition_list",U),b(t.nodeModel.properties.nodeData.branch,!0)},s=Gn({get:()=>(t.nodeModel.properties.nodeData||(Se.set(t.nodeModel.properties,"nodeData",n),b(n.branch,!0)),t.nodeModel.properties.nodeData),set:O=>{Se.set(t.nodeModel.properties,"nodeData",O)}}),c=je(),p=je(),d=()=>{var E;const O=[(E=c.value)==null?void 0:E.validate(),...p.value.map(C=>C.validate())];return Promise.all(O).catch(C=>Promise.reject({node:t.nodeModel,errMessage:C}))};function _(O){const{oldIndex:E,newIndex:C}=O;if(E===void 0||C===void 0)return;const j=Se.cloneDeep(t.nodeModel.properties.nodeData.branch);if(E===j.length-1||C===j.length-1)return;const U={...j[E],type:j[C].type,id:j[C].id},L={...j[C],type:j[E].type,id:j[E].id};j[C]=U,j[E]=L,Se.set(t.nodeModel.properties.nodeData,"branch",j)}function g(){const O=Se.cloneDeep(t.nodeModel.properties.nodeData.branch),E={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(O.length-1),id:fl(),condition:"and"};O.splice(O.length-1,0,E),b(O,!0),Se.set(t.nodeModel.properties.nodeData,"branch",O)}function b(O,E){const C=Se.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]),j=O.map((U,L)=>{const V=C.find($=>$.id===U.id);if(V)return{index:L,height:V.height,id:U.id};if(E)return{index:L,height:12,id:U.id}}).filter(U=>U);Se.set(t.nodeModel.properties,"branch_condition_list",j),t.nodeModel.refreshBranch()}function S(O){const E=Se.cloneDeep(t.nodeModel.properties.nodeData.branch);E[O].conditions.push({field:[],compare:"",value:""}),Se.set(t.nodeModel.properties.nodeData,"branch",E)}function T(O,E){const C=Se.cloneDeep(t.nodeModel.properties.nodeData.branch);if(C[O].conditions.splice(E,1),C[O].conditions.length===0){const U=C.splice(O,1).map(L=>t.nodeModel.id+"_"+L.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(L=>U.includes(L.sourceAnchorId)).map(L=>L.id)),b(C,!1),C.forEach((L,V)=>{L.type==="ELSE IF "+(V+1)&&(L.type="ELSE IF "+V)})}Se.set(t.nodeModel.properties.nodeData,"branch",C)}function A(O,E,C){if(["is_null","is_not_null","is_true","is_not_true"].includes(O)){const j=Se.cloneDeep(t.nodeModel.properties.nodeData.branch);j[E].conditions[C].value=1,Se.set(t.nodeModel.properties.nodeData,"branch",j)}}return Ur(()=>{Se.set(t.nodeModel,"validate",d)}),(O,E)=>{const C=Q("el-option"),j=Q("el-select"),U=Q("el-form-item"),L=Q("el-col"),V=Q("el-input"),$=Q("AppIcon"),H=Q("el-button"),Y=Q("el-row"),z=Q("Plus"),W=Q("el-icon"),B=Q("el-card"),q=Q("el-form"),J=Zm("resize");return _e(),Ke(go,{nodeModel:O.nodeModel},{default:R(()=>[k(q,{model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:E[0]||(E[0]=qt(()=>{},["prevent"]))},{default:R(()=>[k(Zt(rI),{ref:"el",modelValue:s.value.branch,disabled:s.value.branch===2,handle:".handle",animation:150,ghostClass:"ghost",onEnd:_},{default:R(()=>[(_e(!0),Yt(tr,null,Wr(s.value.branch,(ce,re)=>Wa((_e(),Ke(B,{key:ce.id,shadow:"never",class:wu(["drag-card card-never mb-8",{"no-drag":re===s.value.branch.length-1||s.value.branch.length===2}]),style:{"--el-card-padding":"12px"}},{default:R(()=>[K("div",vz,[K("span",mz,[E[1]||(E[1]=K("img",{src:oI,alt:"",height:"15",class:"handle-img mr-4"},null,-1)),tt(" "+me(ce.type),1)]),ce.conditions.length>1?(_e(),Yt("div",yz,[K("span",null,me(O.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),k(j,{teleported:!1,modelValue:ce.condition,"onUpdate:modelValue":Pe=>ce.condition=Pe,size:"small",style:{width:"60px",margin:"0 8px"}},{default:R(()=>[k(C,{label:O.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),k(C,{label:O.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),K("span",null,me(O.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):cn("",!0)]),re!==s.value.branch.length-1?(_e(),Yt("div",gz,[(_e(!0),Yt(tr,null,Wr(ce.conditions,(Pe,ge)=>(_e(),Ke(Y,{key:ge,gutter:8},{default:R(()=>[k(L,{span:11},{default:R(()=>[k(U,{prop:"branch."+re+".conditions."+ge+".field",rules:{type:"array",required:!0,message:O.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:R(()=>[k(Co,{ref_for:!0,ref_key:"nodeCascaderRef",ref:p,nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Pe.field,"onUpdate:modelValue":fe=>Pe.field=fe},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(L,{span:6},{default:R(()=>[k(U,{prop:"branch."+re+".conditions."+ge+".compare",rules:{required:!0,message:O.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:R(()=>[k(j,{onWheel:a,teleported:!1,modelValue:Pe.compare,"onUpdate:modelValue":fe=>Pe.compare=fe,placeholder:O.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:fe=>A(fe,re,ge)},{default:R(()=>[(_e(!0),Yt(tr,null,Wr(Zt(d8),(fe,Ee)=>(_e(),Ke(C,{key:Ee,label:fe.label,value:fe.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(L,{span:6},{default:R(()=>[["is_null","is_not_null","is_true","is_not_true"].includes(Pe.compare)?cn("",!0):(_e(),Ke(U,{key:0,prop:"branch."+re+".conditions."+ge+".value",rules:{required:!0,message:O.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:R(()=>[k(V,{modelValue:Pe.value,"onUpdate:modelValue":fe=>Pe.value=fe,placeholder:O.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"]))]),_:2},1024),k(L,{span:1},{default:R(()=>[k(H,{disabled:re===0&&ge===0,link:"",type:"info",class:"mt-4",onClick:fe=>T(re,ge)},{default:R(()=>[k($,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):cn("",!0),re!==s.value.branch.length-1?(_e(),Ke(H,{key:1,link:"",type:"primary",onClick:Pe=>S(re)},{default:R(()=>[k(W,{class:"mr-4"},{default:R(()=>[k(z)]),_:1}),tt(" "+me(O.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):cn("",!0)]),_:2},1032,["class"])),[[J,Pe=>r(Pe,ce,re)]])),128))]),_:1},8,["modelValue","disabled"]),k(H,{link:"",type:"primary",onClick:g},{default:R(()=>[k(W,{class:"mr-4"},{default:R(()=>[k(z)]),_:1}),tt(" "+me(O.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}}),bz=rh(_z,[["__scopeId","data-v-05396cf6"]]);class wz extends _o{constructor(t){super(t,bz)}}const Ez=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class Oz extends bo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:s,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const p=this.properties.showNode===void 0?!0:this.properties.showNode,d=[];if(d.push({x:n-r/2+10,y:p?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let _=0;_<c.length;_++){const g=c[_],b=Ez(c,_);d.push({x:n+r/2-10,y:p?a-s/2+75+b+g.height/2:a-15,id:`${t}_${g.id}_right`,type:"right"})}return d}}const Sz={type:"condition-node",model:Oz,view:wz},xz=Object.freeze(Object.defineProperty({__proto__:null,default:Sz},Symbol.toStringTag,{value:"Module"})),Az={class:"title-decoration-1 mb-8"},Tz=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=je(),n=e,a=["TXT","DOCX","PDF","HTML","XLS","XLSX","ZIP","CSV","MD"],r={fileTypeList:["TXT","DOCX","PDF","HTML","XLS","XLSX","ZIP","CSV","MD"],fileSizeLimit:100,fileCountLimit:50},s=Gn({get:()=>(n.nodeModel.properties.nodeData||Se.set(n.nodeModel.properties,"nodeData",r),n.nodeModel.properties.nodeData),set:p=>{Se.set(n.nodeModel.properties,"nodeData",p)}}),c=()=>t.value.validate();return Ur(()=>{Se.set(n.nodeModel,"validate",c)}),(p,d)=>{const _=Q("el-option"),g=Q("el-select"),b=Q("el-form-item"),S=Q("el-input-number"),T=Q("el-form"),A=Q("el-card");return _e(),Ke(go,{nodeModel:p.nodeModel},{default:R(()=>[K("h5",Az,me(p.$t("workflow.nodeSetting")),1),k(A,{shadow:"never",class:"card-never"},{default:R(()=>[k(T,{onSubmit:d[3]||(d[3]=qt(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"NodeFormRef",ref:t},{default:R(()=>[k(b,{label:p.$t("workflow.nodes.dataSourceLocalNode.fileFormat.label"),rules:{type:"array",required:!0,message:p.$t("workflow.nodes.dataSourceLocalNode.fileFormat.requiredMessage"),trigger:"change"},prop:"fileTypeList"},{default:R(()=>[k(g,{modelValue:s.value.fileTypeList,"onUpdate:modelValue":d[0]||(d[0]=O=>s.value.fileTypeList=O),placeholder:p.$t("workflow.nodes.dataSourceLocalNode.fileFormat.requiredMessage"),class:"w-240",clearable:"",multiple:"","allow-create":"",filterable:"","default-first-option":""},{label:R(({label:O,value:E})=>[K("span",null,me(O),1)]),default:R(()=>[(_e(),Yt(tr,null,Wr(a,O=>k(_,{key:O,label:O,value:O},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(b,{label:p.$t("workflow.nodes.dataSourceLocalNode.maxFileNumber.label"),rules:{required:!0,message:p.$t("common.inputPlaceholder"),trigger:"change"},prop:"fileCountLimit"},{default:R(()=>[k(S,{modelValue:s.value.fileCountLimit,"onUpdate:modelValue":d[1]||(d[1]=O=>s.value.fileCountLimit=O),min:1,max:1e3,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label","rules"]),k(b,{label:p.$t("workflow.nodes.dataSourceLocalNode.maxFileCountNumber.label"),rules:{required:!0,message:p.$t("common.inputPlaceholder"),trigger:"change"},prop:"fileSizeLimit"},{default:R(()=>[k(S,{modelValue:s.value.fileSizeLimit,"onUpdate:modelValue":d[2]||(d[2]=O=>s.value.fileSizeLimit=O),min:1,max:1e3,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let Mz=class extends _o{constructor(t){super(t,Tz)}};const kz={type:"data-source-local-node",model:bo,view:Mz},Nz=Object.freeze(Object.defineProperty({__proto__:null,default:kz},Symbol.toStringTag,{value:"Module"})),Pz={class:"title-decoration-1 mb-8"},Rz={class:"lighter"},Cz=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]};return Gn({get:()=>(t.nodeModel.properties.nodeData||Se.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:a=>{Se.set(t.nodeModel.properties,"nodeData",a)}}),(a,r)=>{const s=Q("el-card");return _e(),Ke(go,{nodeModel:a.nodeModel},{default:R(()=>[K("h5",Pz,me(a.$t("workflow.nodeSetting")),1),k(s,{shadow:"never",class:"card-never"},{default:R(()=>[K("span",Rz,me(a.$t("common.noData")),1)]),_:1})]),_:1},8,["nodeModel"])}}});class Dz extends _o{constructor(t){super(t,Cz)}}const jz={type:"data-source-web-node",model:bo,view:Dz},Iz=Object.freeze(Object.defineProperty({__proto__:null,default:jz},Symbol.toStringTag,{value:"Module"})),Lz={class:"title-decoration-1 mb-8"},$z=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]},a=Gn({get:()=>(t.nodeModel.properties.nodeData||Se.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:r=>{Se.set(t.nodeModel.properties,"nodeData",r)}});return(r,s)=>{const c=Q("el-form-item"),p=Q("el-form"),d=Q("el-card");return _e(),Ke(go,{nodeModel:r.nodeModel},{default:R(()=>[K("h5",Lz,me(r.$t("views.applicationWorkflow.nodeSetting")),1),k(d,{shadow:"never",class:"card-never"},{default:R(()=>[k(p,{onSubmit:s[1]||(s[1]=qt(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto"},{default:R(()=>[k(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.chatLog.documentPlaceholder"),trigger:"change"}},{default:R(()=>[k(Co,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.chatLog.documentPlaceholder"),modelValue:a.value.documentList,"onUpdate:modelValue":s[0]||(s[0]=_=>a.value.documentList=_)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let Fz=class extends _o{constructor(t){super(t,$z)}};const Bz={type:"document-extract-node",model:bo,view:Fz},Uz=Object.freeze(Object.defineProperty({__proto__:null,default:Bz},Symbol.toStringTag,{value:"Module"})),Vz={class:"title-decoration-1 mb-8"},Gz={class:"flex-between"},zz={class:"flex align-center"},Wz={class:"flex-between"},Hz={class:"flex align-center mb-8"},Xz={class:"mr-4"},qz={class:"flex-between"},Yz={class:"flex align-center mb-8"},Kz={class:"mr-4"},Zz={class:"mr-4"},Jz={class:"flex"},Qz={class:"flex-between"},eW={class:"flex align-center"},tW={class:"mr-4"},nW={class:"flex"},rW={class:"flex-between"},oW={class:"flex align-center"},iW={class:"mr-4"},aW={class:"flex"},lW=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Zi(),{query:{id:n}}=t,a=Gn(()=>t.path.includes("shared")?"systemShare":t.path.includes("resource-management")?"systemManage":"workspace"),r=e,s=je([]),c={documentList:[],splitStrategy:"auto",paragraph_title_relate_problem_type:"custom",paragraphTitleRelateProblem:!1,paragraph_title_relate_problem_reference:[],document_name_relate_problem_type:"custom",documentNameRelateProblem:!1,document_name_relate_problem_reference:[],limit:4096,limit_type:"custom",limit_reference:[],chunkSize:256,chunk_size_type:"custom",chunk_size_reference:[],patterns:[],patterns_type:"custom",patterns_reference:[],withFilter:!1,with_filter_type:"custom",with_filter_reference:[]},p=Gn({get:()=>(r.nodeModel.properties.nodeData||Se.set(r.nodeModel.properties,"nodeData",c),r.nodeModel.properties.nodeData),set:U=>{Se.set(r.nodeModel.properties,"nodeData",U)}}),d=je(),_=je(),g=je(),b=je(),S=je(),T=je(),A=je(),O=je(),E=()=>{var U;return Promise.all([_.value?_.value.validate():Promise.resolve(""),g.value?g.value.validate():Promise.resolve(""),b.value?b.value.validate():Promise.resolve(""),S.value?S.value.validate():Promise.resolve(""),T.value?T.value.validate():Promise.resolve(""),A.value?A.value.validate():Promise.resolve(""),O.value?O.value.validate():Promise.resolve(""),(U=d.value)==null?void 0:U.validate()]).catch(L=>Promise.reject({node:r.nodeModel,errMessage:L}))},C=je(!1),j=()=>{si({type:"document",systemType:a.value}).listSplitPattern(n,C).then(U=>{s.value=U.data})};return Ur(()=>{j(),Se.set(r.nodeModel,"validate",E)}),(U,L)=>{const V=Q("el-form-item"),$=Q("el-option"),H=Q("el-select"),Y=Q("el-tooltip"),z=Q("el-input-number"),W=Q("el-switch"),B=Q("el-form"),q=Q("el-card");return _e(),Ke(go,{nodeModel:U.nodeModel},{default:R(()=>[K("h5",Vz,me(U.$t("workflow.nodeSetting")),1),k(q,{shadow:"never",class:"card-never"},{default:R(()=>[k(B,{ref_key:"aiChatNodeFormRef",ref:d,onSubmit:L[8]||(L[8]=qt(()=>{},["prevent"])),model:p.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto"},{default:R(()=>[k(V,{label:U.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:U.$t("views.chatLog.documentPlaceholder"),trigger:"change"}},{default:R(()=>[k(Co,{ref_key:"nodeCascaderRef",ref:_,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.chatLog.documentPlaceholder"),modelValue:p.value.documentList,"onUpdate:modelValue":L[0]||(L[0]=J=>p.value.documentList=J)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(V,{label:U.$t("workflow.nodes.documentSplitNode.splitStrategy.label"),rules:{required:!0,message:U.$t("workflow.nodes.documentSplitNode.splitStrategy.requiredMessage"),trigger:"change"}},{default:R(()=>[k(H,{modelValue:p.value.splitStrategy,"onUpdate:modelValue":L[1]||(L[1]=J=>p.value.splitStrategy=J),placeholder:U.$t("workflow.nodes.documentSplitNode.splitStrategy.placeholder"),teleported:!1},{default:R(()=>[k($,{label:U.$t("views.document.setRules.intelligent.label"),value:"auto"},null,8,["label"]),k($,{label:U.$t("views.document.setRules.advanced.label"),value:"custom"},null,8,["label"]),k($,{label:U.$t("views.document.fileType.QA.label"),value:"qa"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(V,null,{label:R(()=>[K("div",Gz,[K("span",zz,[K("span",null,me(U.$t("workflow.nodes.documentSplitNode.chunk_length.label")),1),k(Y,{effect:"dark",placement:"right"},{content:R(()=>[tt(me(U.$t("workflow.nodes.documentSplitNode.chunk_length.tooltip1")),1),L[9]||(L[9]=K("br",null,null,-1)),tt(" "+me(U.$t("workflow.nodes.documentSplitNode.chunk_length.tooltip2")),1),L[10]||(L[10]=K("br",null,null,-1)),tt(" "+me(U.$t("workflow.nodes.documentSplitNode.chunk_length.tooltip3")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])])]),default:R(()=>[p.value.chunk_size_type==="custom"?(_e(),Ke(z,{key:0,modelValue:p.value.chunkSize,"onUpdate:modelValue":L[2]||(L[2]=J=>p.value.chunkSize=J),min:50,max:1e5,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])):(_e(),Ke(Co,{key:1,ref_key:"nodeCascaderRef4",ref:S,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.chatLog.documentPlaceholder"),modelValue:p.value.chunk_size_reference,"onUpdate:modelValue":L[3]||(L[3]=J=>p.value.chunk_size_reference=J)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1}),p.value.splitStrategy==="custom"?(_e(),Ke(V,{key:0},{label:R(()=>[K("div",Wz,[K("div",Hz,[K("span",Xz,me(U.$t("views.document.setRules.patterns.label")),1),k(Y,{effect:"dark",content:U.$t("views.document.setRules.patterns.tooltip"),placement:"right"},{default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])])]),default:R(()=>[p.value.patterns_type==="custom"?(_e(),Ke(H,{key:0,teleported:!1,modelValue:p.value.patterns,"onUpdate:modelValue":L[4]||(L[4]=J=>p.value.patterns=J),multiple:"","reserve-keyword":!1,"allow-create":"","default-first-option":"",filterable:"",placeholder:U.$t("views.document.setRules.patterns.placeholder")},{default:R(()=>[(_e(!0),Yt(tr,null,Wr(s.value,(J,ce)=>(_e(),Ke($,{key:ce,label:J.key,value:J.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])):cn("",!0)]),_:1})):cn("",!0),p.value.splitStrategy==="custom"?(_e(),Ke(V,{key:1},{label:R(()=>[K("div",qz,[K("div",Yz,[K("div",Kz,[K("span",Zz,me(U.$t("views.document.setRules.withFilter.label")),1),k(Y,{effect:"dark",content:U.$t("views.document.setRules.withFilter.text"),placement:"right"},{default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),K("div",Jz,[k(W,{size:"small",modelValue:p.value.withFilter,"onUpdate:modelValue":L[5]||(L[5]=J=>p.value.withFilter=J)},null,8,["modelValue"])])])]),_:1})):cn("",!0),p.value.splitStrategy!=="qa"?(_e(),Ke(V,{key:2},{label:R(()=>[K("div",Qz,[K("div",eW,[K("div",tW,[K("span",null,me(U.$t("workflow.nodes.documentSplitNode.title1")),1)])]),K("div",nW,[k(W,{size:"small",modelValue:p.value.paragraphTitleRelateProblem,"onUpdate:modelValue":L[6]||(L[6]=J=>p.value.paragraphTitleRelateProblem=J)},null,8,["modelValue"])])])]),_:1})):cn("",!0),k(V,null,{label:R(()=>[K("div",rW,[K("div",oW,[K("div",iW,[K("span",null,me(U.$t("workflow.nodes.documentSplitNode.title2")),1)])]),K("div",aW,[k(W,{size:"small",modelValue:p.value.documentNameRelateProblem,"onUpdate:modelValue":L[7]||(L[7]=J=>p.value.documentNameRelateProblem=J)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class sW extends _o{constructor(t){super(t,lW)}}const uW={type:"document-split-node",model:bo,view:sW},cW=Object.freeze(Object.defineProperty({__proto__:null,default:uW},Symbol.toStringTag,{value:"Module"})),fW={class:"dialog-footer"},dW=$n({__name:"AddFormCollect",props:{title:{default:_t("common.param.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=je(!1),s=je(),c=je({}),p=je(!1),d=()=>{r.value=!0},_=()=>{r.value=!1,c.value={}},g=()=>{var b;(b=s.value)==null||b.validate().then(()=>{var S;a.addFormField((S=s.value)==null?void 0:S.getData()),_()})};return t({close:_,open:d}),(b,S)=>{const T=Q("el-button"),A=Q("el-dialog");return _e(),Ke(A,{title:b.title,modelValue:r.value,"onUpdate:modelValue":S[3]||(S[3]=O=>r.value=O),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:R(()=>[K("span",fW,[k(T,{onClick:S[1]||(S[1]=qt(O=>r.value=!1,["prevent"]))},{default:R(()=>[tt(me(b.$t("common.cancel")),1)]),_:1}),k(T,{type:"primary",onClick:S[2]||(S[2]=O=>g()),loading:p.value},{default:R(()=>[tt(me(b.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(c_,{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=O=>c.value=O),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),pW={class:"dialog-footer"},hW=$n({__name:"EditFormCollect",props:{title:{default:_t("common.param.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=je(!1),s=je(),c=je({}),p=je(0),d=je(!1),_=(S,T)=>{r.value=!0,c.value=S,p.value=T},g=()=>{r.value=!1,c.value={}},b=()=>{var S;(S=s.value)==null||S.validate().then(()=>{var T;a.editFormField((T=s.value)==null?void 0:T.getData(),p.value),g()})};return t({close:g,open:_}),(S,T)=>{const A=Q("el-button"),O=Q("el-dialog");return _e(),Ke(O,{title:S.title,modelValue:r.value,"onUpdate:modelValue":T[3]||(T[3]=E=>r.value=E),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:R(()=>[K("span",pW,[k(A,{onClick:T[1]||(T[1]=qt(E=>r.value=!1,["prevent"]))},{default:R(()=>[tt(me(S.$t("common.cancel")),1)]),_:1}),k(A,{type:"primary",onClick:T[2]||(T[2]=E=>b()),loading:d.value},{default:R(()=>[tt(me(S.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(c_,{modelValue:c.value,"onUpdate:modelValue":T[0]||(T[0]=E=>c.value=E),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),vW={class:"title-decoration-1 mb-8"},mW={class:"flex align-center"},yW={class:"mr-4"},gW={class:"flex-between"},_W={class:"lighter"},bW=["title"],wW={key:0},EW=["title"],OW={key:1},SW=["title"],xW=["title"],AW={class:"mr-4"},TW=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=je(),a=je(),r=(j,U)=>{const L=T.value.form_field_list.map((V,$)=>U===$?Se.cloneDeep(j):Se.cloneDeep(V));T.value.form_field_list=L,c()},s=j=>{if(T.value.form_field_list.some(U=>U.field===j.field)){za(_t("views.applicationWorkflow.tip.paramErrorMessage")+j.field);return}T.value.form_field_list=Se.cloneDeep([...T.value.form_field_list,j]),c()},c=()=>{const j=[{label:_t("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"form_data"},...T.value.form_field_list.map(U=>({value:U.field,label:typeof U.label=="string"?U.label:U.label.label}))];Se.set(t.nodeModel.properties.config,"fields",j),t.nodeModel.clear_next_node_field(!1),C()},p=je(),d=je(),_=()=>{var j;(j=p.value)==null||j.open()},g=(j,U)=>{var L;(L=d.value)==null||L.open(Se.cloneDeep(j),U)},b=j=>{T.value.form_field_list=T.value.form_field_list.filter(U=>U.field!==j.field),c()},S=je({isResult:!0,form_content_format:`${_t("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${_t("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),T=Gn({get:()=>(t.nodeModel.properties.nodeData||Se.set(t.nodeModel.properties,"nodeData",S.value),t.nodeModel.properties.nodeData),set:j=>{Se.set(t.nodeModel.properties,"nodeData",j)}}),A=j=>{var U;if(j.default_value){const L=(U=j.option_list)==null?void 0:U.filter(V=>j.default_value.indexOf(V.value)>-1).map(V=>V.label).join(",");return L||j.default_value}if(j.default_value!==void 0)return j.default_value},O=()=>{var j;return(j=n.value)==null?void 0:j.validate()};function E(j){Se.set(t.nodeModel.properties.nodeData,"form_content_format",j)}function C(){if(!a.value)return;const U=a.value.$el.querySelector(".el-table__body-wrapper tbody");U&&gr.create(U,{animation:150,ghostClass:"ghost-row",onEnd:L=>{if(L.oldIndex===void 0||L.newIndex===void 0)return;const V=[...T.value.form_field_list],[$]=V.splice(L.oldIndex,1);V.splice(L.newIndex,0,$),T.value.form_field_list=V,c()}})}return Ur(()=>{Se.set(t.nodeModel,"validate",O),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(j,U)=>{const L=Q("AppIcon"),V=Q("el-tooltip"),$=Q("MdEditorMagnify"),H=Q("el-form-item"),Y=Q("Plus"),z=Q("el-icon"),W=Q("el-button"),B=Q("el-table-column"),q=Q("el-tag"),J=Q("el-switch"),ce=Q("el-table"),re=Q("el-form"),Pe=Q("el-card");return _e(),Ke(go,{nodeModel:j.nodeModel},{default:R(()=>[K("h5",vW,me(j.$t("views.applicationWorkflow.nodeSetting")),1),k(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(re,{onSubmit:U[4]||(U[4]=qt(()=>{},["prevent"])),model:T.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:R(()=>[k(H,{label:j.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:j.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:R(()=>[K("div",mW,[K("div",yW,[K("span",null,[tt(me(j.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),U[5]||(U[5]=K("span",{class:"color-danger"},"*",-1))])]),k(V,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(j.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:R(()=>[k(L,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k($,{title:j.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:T.value.form_content_format,"onUpdate:modelValue":U[0]||(U[0]=ge=>T.value.form_content_format=ge),style:{height:"150px"},onSubmitDialog:E},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(H,{label:j.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:U[3]||(U[3]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",gW,[K("h5",_W,me(j.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),k(W,{link:"",type:"primary",onClick:U[1]||(U[1]=ge=>_())},{default:R(()=>[k(z,{class:"mr-4"},{default:R(()=>[k(Y)]),_:1}),tt(" "+me(j.$t("common.add")),1)]),_:1})])]),default:R(()=>[T.value.form_field_list.length>0?(_e(),Ke(ce,{key:0,class:"border",data:T.value.form_field_list,ref_key:"tableRef",ref:a,"row-key":"field"},{default:R(()=>[k(B,{prop:"field",label:j.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:R(({row:ge})=>[K("span",{title:ge.field,class:"ellipsis-1"},me(ge.field),9,bW)]),_:1},8,["label"]),k(B,{prop:"label",label:j.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:ge})=>[ge.label&&ge.label.input_type==="TooltipLabel"?(_e(),Yt("span",wW,[K("span",{title:ge.label.label,class:"ellipsis-1"},me(ge.label.label),9,EW)])):(_e(),Yt("span",OW,[K("span",{title:ge.label,class:"ellipsis-1"},me(ge.label),9,SW)]))]),_:1},8,["label"]),k(B,{label:j.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:R(({row:ge})=>[k(q,{type:"info",class:"info-tag"},{default:R(()=>{var fe;return[tt(me((fe=Zt(r8).find(Ee=>Ee.value===ge.input_type))==null?void 0:fe.label),1)]}),_:2},1024)]),_:1},8,["label"]),k(B,{prop:"default_value",label:j.$t("dynamicsForm.default.label")},{default:R(({row:ge})=>[K("span",{title:ge.default_value,class:"ellipsis-1"},me(A(ge)),9,xW)]),_:1},8,["label"]),k(B,{label:j.$t("common.required"),width:"85"},{default:R(({row:ge})=>[K("div",{onClick:U[2]||(U[2]=qt(()=>{},["stop"]))},[k(J,{disabled:"",size:"small",modelValue:ge.required,"onUpdate:modelValue":fe=>ge.required=fe},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(B,{label:j.$t("common.operation"),align:"left",width:"90"},{default:R(({row:ge,$index:fe})=>[K("span",AW,[k(V,{effect:"dark",content:j.$t("common.modify"),placement:"top"},{default:R(()=>[k(W,{type:"primary",text:"",onClick:qt(Ee=>g(ge,fe),["stop"])},{default:R(()=>[k(L,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(V,{effect:"dark",content:j.$t("common.delete"),placement:"top"},{default:R(()=>[k(W,{type:"primary",text:"",onClick:Ee=>b(ge)},{default:R(()=>[k(L,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):cn("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(dW,{ref_key:"addFormCollectRef",ref:p,addFormField:s},null,512),k(hW,{ref_key:"editFormCollectRef",ref:d,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class MW extends _o{constructor(t){super(t,TW)}}const kW={type:"form-node",model:bo,view:MW},NW=Object.freeze(Object.defineProperty({__proto__:null,default:kW},Symbol.toStringTag,{value:"Module"})),PW={class:"title-decoration-1 mb-8"},RW={class:"flex-between mb-8"},CW={class:"lighter"},DW={class:"flex w-full"},jW={class:"flex-between mb-8"},IW={class:"lighter"},LW={class:"flex-between mb-8"},$W={class:"lighter"},FW=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=je(),a=["GET","POST","PUT","DELETE","PATCH"],r=["none","form-data","x-www-form-urlencoded","json","xml","raw-text"],s=S=>S.ctrlKey===!0?(S.preventDefault(),!0):(S.stopPropagation(),!0),c=je({activeTab:"params",method:"GET",url:"",timeout:30,headers:[{}],params:[{}],contentType:"json",authType:"none",token:"",username:"",password:"",body:""}),p=Gn({get:()=>(t.nodeModel.properties.nodeData||Se.set(t.nodeModel.properties,"nodeData",c.value),t.nodeModel.properties.nodeData),set:S=>{Se.set(t.nodeModel.properties,"nodeData",S)}}),d=()=>{var S;return(S=n.value)==null?void 0:S.validate()},_=()=>{const S=p.value.activeTab,T=p.value.contentType,A={...p.value};S==="params"?A.params[p.value.params.length-1].name.trim()!==""&&(A.params=[...A.params||[],{name:"",value:""}]):S==="headers"?A.headers[p.value.headers.length-1].name.trim()!==""&&(A.headers=[...A.headers||[],{name:"",value:""}]):S==="body"&&["form-data","x-www-form-urlencoded"].includes(T)&&A.params[p.value.params.length-1].name.trim()!==""&&(A.params=[...A.params||[],{name:"",value:""}]),p.value=A};function g(S){const T=p.value.activeTab,A=p.value.contentType,O={...p.value};T==="params"?O.params=(O.params||[]).filter((E,C)=>C!==S):T==="headers"?O.headers=(O.headers||[]).filter((E,C)=>C!==S):T==="body"&&["form-data","x-www-form-urlencoded"].includes(A)&&(O.params=(O.params||[]).filter((E,C)=>C!==S)),p.value=O}function b(S){Se.set(t.nodeModel.properties.nodeData,"body",S)}return Ur(()=>{Se.set(t.nodeModel,"validate",d),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(S,T)=>{const A=Q("el-option"),O=Q("el-select"),E=Q("el-input"),C=Q("el-form-item"),j=Q("el-input-number"),U=Q("el-table-column"),L=Q("Delete"),V=Q("el-icon"),$=Q("el-button"),H=Q("el-tooltip"),Y=Q("el-table"),z=Q("el-tab-pane"),W=Q("el-radio"),B=Q("el-radio-group"),q=Q("el-tabs"),J=Q("el-form"),ce=Q("el-card");return _e(),Ke(go,{nodeModel:S.nodeModel},{default:R(()=>[K("h5",PW,me(S.$t("views.applicationWorkflow.nodeSetting")),1),k(ce,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(J,{onSubmit:T[11]||(T[11]=qt(()=>{},["prevent"])),model:p.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:R(()=>[K("div",RW,[K("span",CW,[tt(me(S.$t("views.applicationWorkflow.nodes.httpNode.configuration")),1),T[12]||(T[12]=K("span",{class:"color-danger"},"*",-1))])]),K("div",DW,[k(O,{modelValue:c.value.method,"onUpdate:modelValue":T[0]||(T[0]=re=>c.value.method=re),style:{"max-width":"85px"},class:"mr-8",onChange:T[1]||(T[1]=re=>c.value.method=null)},{default:R(()=>[(_e(),Yt(tr,null,Wr(a,re=>k(A,{key:re,label:re,value:re},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),k(C,{prop:"url",rules:{message:Zt(_t)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:R(()=>[k(E,{modelValue:p.value.url,"onUpdate:modelValue":T[2]||(T[2]=re=>p.value.url=re),placeholder:S.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:s,style:{"min-width":"400px"}},null,8,["modelValue","placeholder"])]),_:1},8,["rules"])]),K("div",jW,[K("span",IW,[tt(me(S.$t("views.applicationWorkflow.nodes.httpNode.timeout")),1),T[13]||(T[13]=K("span",{class:"color-danger"},"*",-1))]),k(j,{modelValue:c.value.timeout,"onUpdate:modelValue":T[3]||(T[3]=re=>c.value.timeout=re)},null,8,["modelValue"])]),K("div",LW,[K("span",$W,[tt(me(S.$t("views.applicationWorkflow.nodes.httpNode.params")),1),T[14]||(T[14]=K("span",{class:"color-danger"},"*",-1))])]),k(q,{modelValue:p.value.activeTab,"onUpdate:modelValue":T[10]||(T[10]=re=>p.value.activeTab=re),class:"w-full"},{default:R(()=>[k(z,{name:"params",label:"Params"},{default:R(()=>[k(Y,{data:p.value.params,border:"",style:{width:"100%"}},{default:R(()=>[k(U,{prop:"name",label:"Name"},{default:R(re=>[k(E,{modelValue:re.row.name,"onUpdate:modelValue":Pe=>re.row.name=Pe,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{prop:"value",label:"Value"},{default:R(re=>[k(E,{modelValue:re.row.value,"onUpdate:modelValue":Pe=>re.row.value=Pe,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{label:"",width:"50"},{default:R(re=>[re.$index!==p.value.params.length-1?(_e(),Ke(H,{key:0,effect:"dark",content:S.$t("common.delete"),placement:"top"},{default:R(()=>[k($,{type:"primary",text:"",onClick:Pe=>g(re.$index)},{default:R(()=>[k(V,null,{default:R(()=>[k(L)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):cn("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),k(z,{name:"authorization",label:"Authorization"},{default:R(()=>[k(B,{modelValue:p.value.authType,"onUpdate:modelValue":T[7]||(T[7]=re=>p.value.authType=re)},{default:R(()=>[k(W,{label:"No Auth",value:"none"}),k(W,{label:"Bearer Token",value:"bearer"}),k(W,{label:"Basic Auth",value:"basic"}),p.value.authType==="bearer"?(_e(),Ke(E,{key:0,placeholder:S.$t("views.applicationWorkflow.nodes.httpNode.authToken"),"show-word-limit":"",modelValue:p.value.token,"onUpdate:modelValue":T[4]||(T[4]=re=>p.value.token=re),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):cn("",!0),p.value.authType==="basic"?(_e(),Ke(E,{key:1,placeholder:S.$t("views.applicationWorkflow.nodes.httpNode.authUsername"),"show-word-limit":"",modelValue:p.value.username,"onUpdate:modelValue":T[5]||(T[5]=re=>p.value.username=re),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):cn("",!0),p.value.authType==="basic"?(_e(),Ke(E,{key:2,placeholder:S.$t("views.applicationWorkflow.nodes.httpNode.authPassword"),"show-word-limit":"",modelValue:p.value.password,"onUpdate:modelValue":T[6]||(T[6]=re=>p.value.password=re),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):cn("",!0)]),_:1},8,["modelValue"])]),_:1}),k(z,{name:"headers",label:"Headers"},{default:R(()=>[k(Y,{data:p.value.headers,border:"",style:{width:"100%"}},{default:R(()=>[k(U,{prop:"name",label:"Name"},{default:R(re=>[k(E,{modelValue:re.row.name,"onUpdate:modelValue":Pe=>re.row.name=Pe,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{prop:"value",label:"Value"},{default:R(re=>[k(E,{modelValue:re.row.value,"onUpdate:modelValue":Pe=>re.row.value=Pe,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{label:"",width:"50"},{default:R(re=>[re.$index!==p.value.headers.length-1?(_e(),Ke(H,{key:0,effect:"dark",content:S.$t("common.delete"),placement:"top"},{default:R(()=>[k($,{type:"primary",text:"",onClick:Pe=>g(re.$index)},{default:R(()=>[k(V,null,{default:R(()=>[k(L)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):cn("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),k(z,{name:"body",label:"Body"},{default:R(()=>[k(B,{modelValue:p.value.contentType,"onUpdate:modelValue":T[9]||(T[9]=re=>p.value.contentType=re)},{default:R(()=>[(_e(),Yt(tr,null,Wr(r,re=>k(W,{key:re,label:re,value:re},null,8,["label","value"])),64)),["form-data","x-www-form-urlencoded"].includes(p.value.contentType)?(_e(),Ke(Y,{key:0,data:p.value.params,border:"",style:{width:"100%"}},{default:R(()=>[k(U,{prop:"name",label:"Name"},{default:R(re=>[k(E,{modelValue:re.row.name,"onUpdate:modelValue":Pe=>re.row.name=Pe,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{prop:"value",label:"Value"},{default:R(re=>[k(E,{modelValue:re.row.value,"onUpdate:modelValue":Pe=>re.row.value=Pe,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{label:"",width:"50"},{default:R(re=>[re.$index!==0?(_e(),Ke(H,{key:0,effect:"dark",content:S.$t("common.delete"),placement:"top"},{default:R(()=>[k($,{type:"primary",text:"",onClick:Pe=>g(re.$index)},{default:R(()=>[k(V,null,{default:R(()=>[k(L)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):cn("",!0)]),_:1})]),_:1},8,["data"])):cn("",!0),["json","xml","raw-text"].includes(p.value.contentType)?(_e(),Ke(is,{key:1,title:S.$t("views.applicationWorkflow.nodes.httpNode.body"),modelValue:p.value.body,"onUpdate:modelValue":T[8]||(T[8]=re=>p.value.body=re),style:{height:"150px"},onSubmitDialog:b},null,8,["title","modelValue"])):cn("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}}),BW=rh(FW,[["__scopeId","data-v-ac24d5c2"]]);class UW extends _o{constructor(t){super(t,BW)}}const VW={type:"http-node",model:bo,view:UW},GW=Object.freeze(Object.defineProperty({__proto__:null,default:VW},Symbol.toStringTag,{value:"Module"})),zW={class:"title-decoration-1 mb-8"},WW={class:"flex-between w-full"},HW={class:"flex align-center"},XW={class:"mr-4"},qW={class:"flex align-center"},YW={class:"mr-4"},KW={class:"flex-between w-full"},ZW={class:"flex align-center"},JW={class:"mr-4"},QW={class:"flex"},eH=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("workflowMode")||xr.Application,n=Uo("getResourceDetail"),a=Zi(),{params:{id:r}}=a,s=Gn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=e,p=je(null),d=je(),_=je(),g=()=>{var $;return($=_.value)==null?void 0:$.validate().catch(H=>Promise.reject({node:c.nodeModel,errMessage:H}))},b=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),T={modelId:"",system:"",prompt:`{{${_t("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null},A=Gn({get:()=>(c.nodeModel.properties.nodeData||Se.set(c.nodeModel.properties,"nodeData",T),c.nodeModel.properties.nodeData),set:$=>{Se.set(c.nodeModel.properties,"nodeData",$)}}),O=n();function E(){var H;const $=s.value==="systemManage"?{modelType:"TTI",workspaceId:(H=O.value)==null?void 0:H.workspaceId}:{modelType:"TTI"};si({type:"model",systemType:s.value}).getSelectModelList($).then(Y=>{p.value=Se.groupBy(Y==null?void 0:Y.data,"provider")})}const C=()=>{Ng(()=>{var $;A.value.modelId?($=d.value)==null||$.reset_default(A.value.modelId,r):U({})})},j=$=>{var H;$&&((H=d.value)==null||H.open($,r,A.value.modelParamsSetting))};function U($){Se.set(c.nodeModel.properties.nodeData,"modelParamsSetting",$)}function L($){Se.set(c.nodeModel.properties.nodeData,"prompt",$)}function V($){Se.set(c.nodeModel.properties.nodeData,"negative_prompt",$)}return Ur(()=>{E(),Se.set(c.nodeModel,"validate",g)}),($,H)=>{const Y=Q("AppIcon"),z=Q("el-button"),W=Q("ModelSelect"),B=Q("el-form-item"),q=Q("el-tooltip"),J=Q("el-switch"),ce=Q("el-form"),re=Q("el-card");return _e(),Ke(go,{"node-model":$.nodeModel},{default:R(()=>[K("h5",zW,me($.$t("views.applicationWorkflow.nodeSetting")),1),k(re,{shadow:"never",class:"card-never"},{default:R(()=>[k(ce,{onSubmit:H[6]||(H[6]=qt(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:_,"hide-required-asterisk":""},{default:R(()=>[k(B,{label:$.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"modelId",rules:{required:!0,message:$.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:R(()=>[K("div",WW,[K("div",null,[K("span",null,[tt(me($.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),H[7]||(H[7]=K("span",{class:"color-danger"},"*",-1))])]),k(z,{disabled:!A.value.modelId,type:"primary",link:"",onClick:H[0]||(H[0]=Pe=>j(A.value.modelId)),onRefreshForm:U},{default:R(()=>[k(Y,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(W,{onChange:C,onWheel:b,teleported:!1,modelValue:A.value.modelId,"onUpdate:modelValue":H[1]||(H[1]=Pe=>A.value.modelId=Pe),placeholder:$.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:p.value,showFooter:"","model-type":"TTI"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(B,{label:$.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:$.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:R(()=>[K("div",HW,[K("div",XW,[K("span",null,[tt(me($.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),H[8]||(H[8]=K("span",{class:"color-danger"},"*",-1))])]),k(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me($.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:R(()=>[k(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(is,{onWheel:b,title:$.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:A.value.prompt,"onUpdate:modelValue":H[2]||(H[2]=Pe=>A.value.prompt=Pe),style:{height:"150px"},onSubmitDialog:L},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(B,{label:$.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:$.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:R(()=>[K("div",qW,[K("div",YW,[K("span",null,me($.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),k(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me($.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:R(()=>[k(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(is,{onWheel:b,title:$.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:A.value.negative_prompt,"onUpdate:modelValue":H[3]||(H[3]=Pe=>A.value.negative_prompt=Pe),placeholder:$.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:V},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),[Zt(xr).Application,Zt(xr).ApplicationLoop].includes(Zt(t))?(_e(),Ke(B,{key:0,label:$.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:H[5]||(H[5]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",KW,[K("div",ZW,[K("div",JW,[K("span",null,me($.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me($.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",QW,[k(J,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":H[4]||(H[4]=Pe=>A.value.isResult=Pe)},null,8,["modelValue"])])])]),_:1},8,["label"])):cn("",!0)]),_:1},8,["model"])]),_:1}),k(ih,{ref_key:"AIModeParamSettingDialogRef",ref:d,onRefresh:U},null,512)]),_:1},8,["node-model"])}}});let tH=class extends _o{constructor(t){super(t,eH)}};const nH={type:"image-generate-node",model:bo,view:tH},rH=Object.freeze(Object.defineProperty({__proto__:null,default:nH},Symbol.toStringTag,{value:"Module"})),oH={class:"title-decoration-1 mb-8"},iH={class:"flex-between w-full"},aH={class:"flex-between"},lH={class:"flex align-center"},sH={class:"flex align-center"},uH={class:"mr-4"},cH={class:"flex-between"},fH={class:"flex-between w-full"},dH={class:"flex align-center"},pH={class:"mr-4"},hH={class:"flex"},vH=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("workflowMode")||xr.Application,n=Uo("getResourceDetail"),a=Zi(),{params:{id:r}}=a,s=Gn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=e,p=je(null),d=je(),_=je(),g=je(),b=()=>{var z;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(z=_.value)==null?void 0:z.validate()]).catch(W=>Promise.reject({node:c.nodeModel,errMessage:W}))},S=z=>z.ctrlKey===!0?(z.preventDefault(),!0):(z.stopPropagation(),!0),A={modelId:"",system:"",prompt:`{{${_t("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null,imageList:["start-node","image"]},O=Gn({get:()=>(c.nodeModel.properties.nodeData||Se.set(c.nodeModel.properties,"nodeData",A),c.nodeModel.properties.nodeData),set:z=>{Se.set(c.nodeModel.properties,"nodeData",z)}}),E=n();function C(){var W;const z=s.value==="systemManage"?{modelType:"VISION",workspaceId:(W=E.value)==null?void 0:W.workspaceId}:{modelType:"VISION"};si({type:"model",systemType:s.value}).getSelectModelList(z).then(B=>{p.value=Se.groupBy(B==null?void 0:B.data,"provider")})}function j(z){Se.set(c.nodeModel.properties.nodeData,"system",z)}function U(z){Se.set(c.nodeModel.properties.nodeData,"prompt",z)}const L=z=>{var W;z&&((W=d.value)==null||W.open(z,r,O.value.modelParamsSetting))},V=je(),$=z=>{var W;z&&((W=V.value)==null||W.open(z,r))},H=z=>{Se.set(c.nodeModel.properties.nodeData,"system",z)};function Y(z){Se.set(c.nodeModel.properties.nodeData,"modelParamsSetting",z)}return Ur(()=>{C(),Se.set(c.nodeModel,"validate",b)}),(z,W)=>{const B=Q("el-button"),q=Q("el-form-item"),J=Q("el-tooltip"),ce=Q("el-option"),re=Q("el-select"),Pe=Q("el-input-number"),ge=Q("el-switch"),fe=Q("el-form"),Ee=Q("el-card");return _e(),Ke(go,{"node-model":z.nodeModel},{default:R(()=>[K("h5",oH,me(z.$t("views.applicationWorkflow.nodeSetting")),1),k(Ee,{shadow:"never",class:"card-never"},{default:R(()=>[k(fe,{onSubmit:W[10]||(W[10]=qt(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:_,"hide-required-asterisk":""},{default:R(()=>[k(q,{label:z.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"modelId",rules:{required:!0,message:z.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:R(()=>[K("div",iH,[K("div",null,[K("span",null,[tt(me(Zt(_t)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),W[11]||(W[11]=K("span",{class:"color-danger"},"*",-1))])]),k(B,{disabled:!O.value.modelId,type:"primary",link:"",onClick:W[0]||(W[0]=Ne=>L(O.value.modelId)),onRefreshForm:Y},{default:R(()=>[k(Ar,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(Su,{onWheel:S,teleported:!1,modelValue:O.value.modelId,"onUpdate:modelValue":W[1]||(W[1]=Ne=>O.value.modelId=Ne),placeholder:z.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:p.value,showFooter:"","model-type":"VISION"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(q,{label:z.$t("views.application.form.roleSettings.label")},{label:R(()=>[K("div",aH,[K("div",lH,[K("span",null,me(z.$t("views.application.form.roleSettings.label")),1),k(J,{effect:"dark",content:z.$t("views.application.form.roleSettings.tooltip"),placement:"right"},{default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])]),k(B,{type:"primary",link:"",onClick:W[2]||(W[2]=Ne=>$(O.value.modelId)),disabled:!O.value.modelId},{default:R(()=>[k(Ar,{iconName:"app-generate-star"})]),_:1},8,["disabled"])])]),default:R(()=>[k(is,{title:z.$t("views.application.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":W[3]||(W[3]=Ne=>O.value.system=Ne),style:{height:"100px"},onSubmitDialog:j,placeholder:`${Zt(_t)("views.applicationWorkflow.SystemPromptPlaceholder")} {{${Zt(_t)("views.applicationWorkflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),k(q,{label:z.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:z.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:R(()=>[K("div",sH,[K("div",uH,[K("span",null,[tt(me(z.$t("views.application.form.prompt.label")),1),W[12]||(W[12]=K("span",{class:"color-danger"},"*",-1))])]),k(J,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(z.$t("views.application.form.prompt.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(is,{onWheel:S,title:z.$t("views.application.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":W[4]||(W[4]=Ne=>O.value.prompt=Ne),style:{height:"150px"},onSubmitDialog:U},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(q,null,{label:R(()=>[K("div",cH,[K("div",null,me(z.$t("views.application.form.historyRecord.label")),1),k(re,{modelValue:O.value.dialogue_type,"onUpdate:modelValue":W[5]||(W[5]=Ne=>O.value.dialogue_type=Ne),type:"small",style:{width:"100px"}},{default:R(()=>[k(ce,{label:z.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),k(ce,{label:z.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[k(Pe,{modelValue:O.value.dialogueNumber,"onUpdate:modelValue":W[6]||(W[6]=Ne=>O.value.dialogueNumber=Ne),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),k(q,{label:z.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:z.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:R(()=>[tt(me(z.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),W[13]||(W[13]=K("span",{class:"color-danger"},"*",-1))]),default:R(()=>[k(Co,{ref_key:"nodeCascaderRef",ref:g,nodeModel:z.nodeModel,class:"w-full",placeholder:z.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:O.value.imageList,"onUpdate:modelValue":W[7]||(W[7]=Ne=>O.value.imageList=Ne)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),[Zt(xr).Application,Zt(xr).ApplicationLoop].includes(Zt(t))?(_e(),Ke(q,{key:0,label:z.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:W[9]||(W[9]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",fH,[K("div",dH,[K("div",pH,[K("span",null,me(z.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(J,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(z.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",hH,[k(ge,{size:"small",modelValue:O.value.isResult,"onUpdate:modelValue":W[8]||(W[8]=Ne=>O.value.isResult=Ne)},null,8,["modelValue"])])])]),_:1},8,["label"])):cn("",!0)]),_:1},8,["model"])]),_:1}),k(ih,{ref_key:"AIModeParamSettingDialogRef",ref:d,onRefresh:Y},null,512),k(tM,{onReplace:H,ref_key:"GeneratePromptDialogRef",ref:V},null,512)]),_:1},8,["node-model"])}}});let mH=class extends _o{constructor(t){super(t,vH)}};const yH={type:"image-understand-node",model:bo,view:mH},gH=Object.freeze(Object.defineProperty({__proto__:null,default:yH},Symbol.toStringTag,{value:"Module"})),_H={class:"title-decoration-1 mb-8"},bH={class:"flex-between"},wH={class:"flex-between"},EH={class:"flex-between"},OH=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("getResourceDetail"),n=Zi(),{params:{id:a}}=n,r=Gn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=je(),c=je();function p(){const $=Se.cloneDeep(E.nodeModel.properties.nodeData.branch),H={id:fl(),content:"",isOther:!1};$.splice($.length-1,0,H),_($,!0),Se.set(E.nodeModel.properties.nodeData,"branch",$),E.nodeModel.refreshBranch()}function d($){var J;const H=Se.cloneDeep(E.nodeModel.properties.nodeData.branch),Y=H.find(ce=>ce.id===$);if(!Y||Y.isOther||H.filter(ce=>!ce.isOther).length<=1)return;const W=`${E.nodeModel.id}_${$}_right`,B=(((J=E.nodeModel.outgoing)==null?void 0:J.edges)||[]).filter(ce=>ce.sourceAnchorId===W).map(ce=>ce.id);B.length>0&&E.nodeModel.graphModel.eventCenter.emit("delete_edge",B);const q=H.filter(ce=>ce.id!==$);Se.set(E.nodeModel.properties.nodeData,"branch",q),_(q,!1)}function _($,H){const Y=Se.cloneDeep(E.nodeModel.properties.branch_condition_list?E.nodeModel.properties.branch_condition_list:[]),z=$.map((W,B)=>{const q=Y.find(J=>J.id===W.id);if(q)return{index:B,height:q.height,id:W.id};if(H)return{index:B,height:12,id:W.id}}).filter(W=>W);Se.set(E.nodeModel.properties,"branch_condition_list",z),E.nodeModel.refreshBranch()}const g=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),b=$=>{var H;$?(H=c.value)==null||H.reset_default($,a):T({})},S={modelId:"",branch:[{id:fl(),content:"",isOther:!1},{id:fl(),content:_t("views.applicationWorkflow.nodes.intentNode.other"),isOther:!0}],dialogueNumber:1,contentList:[]};function T($){Se.set(E.nodeModel.properties.nodeData,"modelParamsSetting",$)}const A=$=>{var H;$&&((H=c.value)==null||H.open($,a,O.value.modelParamsSetting))},O=Gn({get:()=>(E.nodeModel.properties.nodeData||(Se.set(E.nodeModel.properties,"nodeData",S),_(S.branch,!0)),E.nodeModel.properties.nodeData),set:$=>{Se.set(E.nodeModel.properties,"nodeData",$)}}),E=e,C=je(),j=je(null),U=()=>{var $;return Promise.all([s.value?s.value.validate():Promise.resolve(""),($=C.value)==null?void 0:$.validate()]).then(()=>{if(O.value.branch.length!=new Set(O.value.branch.map(H=>H.content)).size)throw _t("views.applicationWorkflow.nodes.intentNode.error2")}).catch(H=>Promise.reject({node:E.nodeModel,errMessage:H}))},L=t();function V(){var H;const $=r.value==="systemManage"?{modelType:"LLM",workspaceId:(H=L.value)==null?void 0:H.workspaceId}:{modelType:"LLM"};si({type:"model",systemType:r.value}).getSelectModelList($).then(Y=>{j.value=Se.groupBy(Y==null?void 0:Y.data,"provider")})}return Ur(()=>{var $;V(),typeof(($=E.nodeModel.properties.nodeData)==null?void 0:$.isResult)>"u"&&Tu(E.nodeModel)&&Se.set(E.nodeModel.properties.nodeData,"isResult",!0),Se.set(E.nodeModel,"validate",U)}),($,H)=>{const Y=Q("el-button"),z=Q("el-form-item"),W=Q("el-input-number"),B=Q("Plus"),q=Q("el-icon"),J=Q("el-input"),ce=Q("el-col"),re=Q("Delete"),Pe=Q("el-row"),ge=Q("el-form"),fe=Q("el-card");return _e(),Ke(go,{nodeModel:$.nodeModel},{default:R(()=>[K("h5",_H,me($.$t("views.applicationWorkflow.nodeSetting")),1),k(fe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(ge,{onSubmit:H[4]||(H[4]=qt(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"IntentClassifyNodeFormRef",ref:C,"hide-required-asterisk":""},{default:R(()=>[k(z,{label:$.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:$.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:R(()=>[K("div",bH,[K("div",null,[K("span",null,[tt(me($.$t("views.application.form.aiModel.label")),1),H[5]||(H[5]=K("span",{class:"color-danger"},"*",-1))])]),k(Y,{type:"primary",link:"",disabled:!O.value.modelId,onClick:H[0]||(H[0]=Ee=>A(O.value.modelId)),onRefreshForm:T},{default:R(()=>[k(Ar,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(Su,{onChange:b,onWheel:g,teleported:!1,modelValue:O.value.modelId,"onUpdate:modelValue":H[1]||(H[1]=Ee=>O.value.modelId=Ee),placeholder:$.$t("views.application.form.aiModel.placeholder"),options:j.value,onSubmitModel:V,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(z,{prop:"contentList",label:$.$t("views.applicationWorkflow.nodes.intentNode.input.label"),rules:{message:$.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"change",required:!0}},{label:R(()=>[K("div",wH,[K("div",null,[K("span",null,[tt(me($.$t("views.applicationWorkflow.nodes.intentNode.input.label")),1),H[6]||(H[6]=K("span",{class:"color-danger"},"*",-1))])])])]),default:R(()=>[k(Co,{ref_key:"nodeCascaderRef",ref:s,nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:O.value.contentList,"onUpdate:modelValue":H[2]||(H[2]=Ee=>O.value.contentList=Ee)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(z,{label:$.$t("views.application.form.historyRecord.label")},{default:R(()=>[k(W,{modelValue:O.value.dialogueNumber,"onUpdate:modelValue":H[3]||(H[3]=Ee=>O.value.dialogueNumber=Ee),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),k(z,null,{label:R(()=>[K("div",EH,[K("div",null,[K("span",null,[tt(me($.$t("views.applicationWorkflow.nodes.intentNode.classify.label")),1),H[7]||(H[7]=K("span",{class:"color-danger"},"*",-1))])]),k(Y,{onClick:p,type:"primary",size:"large",link:""},{default:R(()=>[k(q,null,{default:R(()=>[k(B)]),_:1})]),_:1})])]),default:R(()=>[K("div",null,[(_e(!0),Yt(tr,null,Wr(O.value.branch,(Ee,Ne)=>(_e(),Yt("div",{key:Ee.id,class:"mb-8"},[k(z,{prop:`branch.${Ne}.content`,rules:{message:$.$t("views.applicationWorkflow.nodes.intentNode.classify.placeholder"),trigger:"change",required:!0}},{default:R(()=>[k(Pe,{gutter:12,align:"middle"},{default:R(()=>[k(ce,{span:21},{default:R(()=>[k(J,{modelValue:Ee.content,"onUpdate:modelValue":rt=>Ee.content=rt,style:{width:"210px"},disabled:Ee.isOther,placeholder:$.$t("views.applicationWorkflow.nodes.intentNode.classify.placeholder")},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])]),_:2},1024),k(ce,{span:3},{default:R(()=>[Ee.isOther?cn("",!0):(_e(),Ke(Y,{key:0,link:"",size:"large",disabled:O.value.branch.filter(rt=>!rt.isOther).length<=1,onClick:rt=>d(Ee.id)},{default:R(()=>[k(q,null,{default:R(()=>[k(re)]),_:1})]),_:2},1032,["disabled","onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["prop","rules"])]))),128))])]),_:1})]),_:1},8,["model"])]),_:1}),k(ih,{ref_key:"AIModeParamSettingDialogRef",ref:c,onRefresh:T},null,512)]),_:1},8,["nodeModel"])}}});class SH extends _o{constructor(t){super(t,OH)}}class xH extends bo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:s,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const p=this.properties.showNode===void 0?!0:this.properties.showNode,d=[];if(d.push({x:n-r/2+10,y:p?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g];d.push({x:n+r/2-10,y:p?a-s/2+397+g*41.36:a-15,id:`${t}_${b.id}_right`,type:"right"}),console.log(a-s/2+397+100/2)}return d}}const AH={type:"intent-node",model:xH,view:SH},TH=Object.freeze(Object.defineProperty({__proto__:null,default:AH},Symbol.toStringTag,{value:"Module"})),MH={class:"dialog-footer"},kH=$n({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=je(),s=je(!1),c=je(!1),p=je(),d=(E,C)=>E.every(j=>eM.get(C,j,void 0)!==void 0),_=Gn(()=>{if(p.value){const E=p.value;switch(E.type){case"input":return d(["field","input_type","label","required","attrs"],p.value)?p.value:{attrs:E.attrs||{maxlength:200,minlength:0},field:E.field||E.variable,input_type:"TextInput",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.is_required};case"select":return d(["field","input_type","label","required","option_list"],p.value)?p.value:{attrs:E.attrs||{},field:E.field||E.variable,input_type:"SingleSelect",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.is_required,option_list:E.option_list?E.option_list:E.optionList.map(C=>({key:C,value:C}))};case"date":return d(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],p.value)?p.value:{field:E.field||E.variable,input_type:"DatePicker",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.is_required,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return p.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:200,minlength:0},show_default_value:!0}}),g=je(null),b=je([{label:_t("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:_t("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:_t("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:_t("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:_t("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:_t("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:_t("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),S=je(!1),T=(E,C)=>{S.value=!0,E?(c.value=!0,p.value=Se.cloneDeep(E),g.value=C):p.value=null},A=()=>{S.value=!1,c.value=!1,g.value=null,p.value=null},O=async()=>{const E=r.value;E&&await E.validate().then(()=>{a("refresh",E==null?void 0:E.getData(),g.value),c.value=!1,p.value=null,g.value=null})};return t({open:T,close:A}),(E,C)=>{const j=Q("el-button"),U=Q("el-dialog");return _e(),Ke(U,{title:c.value?E.$t("common.param.editParam"):E.$t("common.param.addParam"),modelValue:S.value,"onUpdate:modelValue":C[2]||(C[2]=L=>S.value=L),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":A,"append-to-body":""},{footer:R(()=>[K("span",MH,[k(j,{onClick:qt(A,["prevent"])},{default:R(()=>[tt(me(E.$t("common.cancel")),1)]),_:1}),k(j,{type:"primary",onClick:C[1]||(C[1]=L=>O()),loading:s.value},{default:R(()=>[tt(me(c.value?E.$t("common.save"):E.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(c_,{modelValue:_.value,"onUpdate:modelValue":C[0]||(C[0]=L=>_.value=L),"label-position":"top","require-asterisk-position":"right",input_type_list:b.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),NH={class:"flex-between mb-16"},PH=["title"],RH={class:"ml-4"},CH=["title"],DH={key:0},jH=["title"],IH={key:1},LH=["title"],$H=["title"],FH={class:"mr-4"},BH=$n({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=je(),a=je(),r=je(),s=je([]),c=je({title:_t("workflow.nodes.KnowledgeBaseNode.DocumentSetting")});function p(A,O){a.value.open(A,O)}function d(){r.value.open(c.value)}function _(A){s.value.splice(A,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList");const O=s.value.map(E=>({label:E.label.label,value:E.field}));Se.set(t.nodeModel.properties,"user_input_field_list",Se.cloneDeep(s.value)),Se.set(t.nodeModel.properties.config,"fields",O),T()}function g(A,O){for(let E=0;E<s.value.length;E++)if(s.value[E].field===A.field&&O!==E){za(_t("workflow.tip.paramErrorMessage")+A.field);return}O!==null?s.value.splice(O,1,A):s.value.push(A),a.value.close(),Se.set(t.nodeModel.properties,"user_input_field_list",Se.cloneDeep(s.value)),T()}function b(A){c.value=A,r.value.close()}const S=A=>{var O;if(A.input_type==="PasswordInput")return"******";if(A.default_value){const E=(O=A.option_list)==null?void 0:O.filter(C=>A.default_value.indexOf(C.value)>-1).map(C=>C.label).join(",");return E||A.default_value}if(A.default_value!==void 0)return A.default_value};function T(){if(!n.value)return;const O=n.value.$el.querySelector(".el-table__body-wrapper tbody");O&&gr.create(O,{animation:150,ghostClass:"ghost-row",onEnd:E=>{if(E.oldIndex===void 0||E.newIndex===void 0)return;const C=Se.cloneDeep([...s.value]),[j]=C.splice(E.oldIndex,1);C.splice(E.newIndex,0,j),s.value=C}})}return Ur(()=>{s.value=[],t.nodeModel.properties.user_input_field_list&&(s.value=Se.cloneDeep(t.nodeModel.properties.user_input_field_list)),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),Se.set(t.nodeModel.properties,"user_input_config",c),T()}),(A,O)=>{const E=Q("AppIcon"),C=Q("el-button"),j=Q("el-table-column"),U=Q("el-tag"),L=Q("el-switch"),V=Q("el-tooltip"),$=Q("el-table");return _e(),Yt(tr,null,[K("div",NH,[K("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},me(c.value.title),9,PH),K("div",null,[k(C,{type:"primary",link:"",onClick:d},{default:R(()=>[k(E,{iconName:"app-setting"})]),_:1}),K("span",RH,[k(C,{link:"",type:"primary",onClick:O[0]||(O[0]=H=>p())},{default:R(()=>[k(E,{iconName:"app-add-outlined",class:"mr-4"}),tt(" "+me(A.$t("common.add")),1)]),_:1})])])]),k($,{data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:R(()=>[k(j,{prop:"field",label:A.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:R(({row:H})=>[K("span",{title:H.field,class:"ellipsis-1"},me(H.field),9,CH)]),_:1},8,["label"]),k(j,{prop:"label",label:A.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:H})=>[H.label&&H.label.input_type==="TooltipLabel"?(_e(),Yt("span",DH,[K("span",{title:H.label.label,class:"ellipsis-1"},me(H.label.label),9,jH)])):(_e(),Yt("span",IH,[K("span",{title:H.label,class:"ellipsis-1"},me(H.label),9,LH)]))]),_:1},8,["label"]),k(j,{label:A.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:R(({row:H})=>[H.input_type==="TextInput"?(_e(),Ke(U,{key:0,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):cn("",!0),H.input_type==="PasswordInput"?(_e(),Ke(U,{key:1,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):cn("",!0),H.input_type==="Slider"?(_e(),Ke(U,{key:2,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):cn("",!0),H.input_type==="SwitchInput"?(_e(),Ke(U,{key:3,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):cn("",!0),H.input_type==="SingleSelect"?(_e(),Ke(U,{key:4,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):cn("",!0),H.input_type==="MultiSelect"?(_e(),Ke(U,{key:5,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):cn("",!0),H.input_type==="RadioCard"?(_e(),Ke(U,{key:6,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):cn("",!0),H.input_type==="DatePicker"?(_e(),Ke(U,{key:7,type:"info",class:"info-tag"},{default:R(()=>[tt(me(A.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):cn("",!0)]),_:1},8,["label"]),k(j,{prop:"default_value",label:A.$t("dynamicsForm.default.label")},{default:R(({row:H})=>[K("span",{title:H.default_value,class:"ellipsis-1"},me(S(H)),9,$H)]),_:1},8,["label"]),k(j,{label:A.$t("common.required")},{default:R(({row:H})=>[K("div",{onClick:O[1]||(O[1]=qt(()=>{},["stop"]))},[k(L,{disabled:"",size:"small",modelValue:H.required,"onUpdate:modelValue":Y=>H.required=Y},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(j,{label:A.$t("common.operation"),align:"left",width:"90"},{default:R(({row:H,$index:Y})=>[K("span",FH,[k(V,{effect:"dark",content:A.$t("common.modify"),placement:"top"},{default:R(()=>[k(C,{type:"primary",text:"",onClick:qt(z=>p(H,Y),["stop"])},{default:R(()=>[k(E,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(V,{effect:"dark",content:A.$t("common.delete"),placement:"top"},{default:R(()=>[k(C,{type:"primary",text:"",onClick:z=>_(Y)},{default:R(()=>[k(E,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"]),k(kH,{ref_key:"UserFieldFormDialogRef",ref:a,onRefresh:g},null,512),k(_N,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:b},null,512)],64)}}}),UH={class:"title-decoration-1 mb-8"},VH={class:"title-decoration-1 mb-8 mt-8"},GH=["onMouseenter"],zH={class:"break-all"},WH={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},HH=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=je(null),n=Uo("getResourceDetail"),a=e,r=je(),s=Gn(()=>{if(a.nodeModel.properties.user_input_field_list){const c=a.nodeModel.properties.user_input_field_list.map(p=>({label:typeof p.label=="string"?p.label:p.label.label,value:p.field,globeLabel:`{{global.${typeof p.label=="string"?p.label:p.label.label}}}`,globeValue:`{{context['global'].${p.field}}}`}));return Se.set(a.nodeModel.properties.config,"globalFields",c),c}return Se.set(a.nodeModel.properties.config,"globalFields",[]),[]});return n(),Ur(()=>{}),(c,p)=>{const d=Q("AppIcon"),_=Q("el-button"),g=Q("el-tooltip");return _e(),Ke(go,{nodeModel:c.nodeModel},{default:R(()=>[K("h5",UH,me(c.$t("workflow.nodeSetting")),1),k(BH,{ref_key:"UserInputFieldTableFef",ref:r,"node-model":c.nodeModel},null,8,["node-model"]),K("h5",VH,me(c.$t("common.param.outputParam")),1),s.value.length>0?(_e(!0),Yt(tr,{key:0},Wr(s.value,(b,S)=>(_e(),Yt("div",{key:S,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:T=>t.value=S,onMouseleave:p[0]||(p[0]=T=>t.value=null)},[K("span",zH,me(b.label)+" "+me("{"+b.value+"}"),1),t.value===S?(_e(),Ke(g,{key:0,effect:"dark",content:c.$t("workflow.setting.copyParam"),placement:"top"},{default:R(()=>[k(_,{link:"",onClick:T=>Zt(kg)(b.globeLabel),style:{padding:"0"}},{default:R(()=>[k(d,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):cn("",!0)],40,GH))),128)):(_e(),Yt("div",WH,me(c.$t("common.noData")),1))]),_:1},8,["nodeModel"])}}}),XH=rh(HH,[["__scopeId","data-v-6c44fa93"]]);class qH extends _o{constructor(t){super(t,XH)}}class YH extends bo{constructor(t,n){super(t,n)}get_width(){return 600}}const KH={type:"knowledge-base-node",model:YH,view:qH},ZH=Object.freeze(Object.defineProperty({__proto__:null,default:KH},Symbol.toStringTag,{value:"Module"})),JH={class:"title-decoration-1 mb-8"},QH={class:"flex-between"},eX=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=je(),a=je(),r={documentList:[]},s=async()=>{var d;let p=[(d=n.value)==null?void 0:d.validate(),a.value?a.value.validate():Promise.resolve("")];return Promise.all(p).catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))},c=Gn({get:()=>(t.nodeModel.properties.nodeData||Se.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:p=>{Se.set(t.nodeModel.properties,"nodeData",p)}});return Ur(()=>{var p;typeof((p=t.nodeModel.properties.nodeData)==null?void 0:p.is_result)>"u"&&Tu(t.nodeModel)&&Se.set(t.nodeModel.properties.nodeData,"is_result",!0),Se.set(t.nodeModel,"validate",s)}),(p,d)=>{const _=Q("el-form-item"),g=Q("el-form"),b=Q("el-card");return _e(),Ke(go,{nodeModel:p.nodeModel},{default:R(()=>[K("h5",JH,me(p.$t("workflow.nodeSetting")),1),k(b,{shadow:"never",class:"card-never"},{default:R(()=>[k(g,{onSubmit:d[1]||(d[1]=qt(()=>{},["prevent"])),model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"KnowledgeWriteRef",ref:n,"hide-required-asterisk":""},{default:R(()=>[k(_,{prop:"documentList",label:p.$t("common.inputContent"),rules:{message:p.$t("workflow.nodes.textToSpeechNode.content.label"),trigger:"change",required:!0}},{label:R(()=>[K("div",QH,[K("div",null,[K("span",null,[tt(me(p.$t("common.inputContent")),1),d[2]||(d[2]=K("span",{class:"color-danger"},"*",-1))])])])]),default:R(()=>[k(Co,{ref_key:"nodeCascaderRef",ref:a,nodeModel:p.nodeModel,class:"w-full",placeholder:p.$t("workflow.nodes.textToSpeechNode.content.label"),modelValue:c.value.documentList,"onUpdate:modelValue":d[0]||(d[0]=S=>c.value.documentList=S)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class tX extends _o{constructor(t){super(t,eX)}}const nX={type:"knowledge-write-node",model:bo,view:tX},rX=Object.freeze(Object.defineProperty({__proto__:null,default:nX},Symbol.toStringTag,{value:"Module"})),oX={class:"title-decoration-1 mb-8"},iX={class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},aX={class:"flex-between"},lX={class:"flex align-center"},sX=["src"],uX={class:"flex-between"},cX={class:"ml-4"},fX={class:"title-decoration-1 mb-8"},dX={key:0,class:"p-8-12"},pX={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},hX={class:"flex-between"},vX={key:0,class:"color-danger"},mX={key:0,class:"p-8-12"},yX={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},gX={class:"flex-between"},_X={key:0,class:"color-danger"},bX=`{
  "math": {
    "url": "your_server",
    "type": "sse"
  }
}`,wX=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e;u_();const n=Zi(),{params:{id:a}}=n,s=Uo("getResourceDetail")(),c=Gn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),p=je(),d=je(!1),_=L=>L.ctrlKey===!0?(L.preventDefault(),!0):(L.stopPropagation(),!0),g={mcpTool:"",mcpTools:[],mcpServers:"",mcpServer:"",mcpSource:"referencing",mcpToolId:"",toolParams:{},tool_form_field:[],params_nested:""},b=je([]);function S(L){Se.set(t.nodeModel.properties.nodeData,"mcpServers",L)}async function T(){const L=await si({type:"tool",systemType:c.value}).getToolById(E.value.mcpToolId,d);E.value.mcpServers=L.data.code}function A(){if(E.value.mcpSource==="referencing"&&!E.value.mcpToolId){alert(1),za(_t("views.applicationWorkflow.nodes.mcpNode.mcpToolTip"));return}if(E.value.mcpSource==="custom"&&!E.value.mcpServers){alert(2),za(_t("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}try{JSON.parse(E.value.mcpServers)}catch{alert(3),za(_t("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}si({type:"application",systemType:c.value}).getMcpTools(a,E.value.mcpServers,d).then(L=>{var V;E.value.mcpTools=L.data,Jm(_t("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess")),E.value.mcpServer=(V=E.value.mcpTools.find($=>$.name===E.value.mcpTool))==null?void 0:V.server})}function O(){var V,$,H,Y,z,W;E.value.mcpServer=(V=E.value.mcpTools.find(B=>B.name===E.value.mcpTool))==null?void 0:V.server;const L=($=E.value.mcpTools.find(B=>B.name===E.value.mcpTool))==null?void 0:$.args_schema;E.value.tool_form_field=[];for(const B in L==null?void 0:L.properties){const q=L==null?void 0:L.properties[B].properties;if(q){E.value.params_nested=B;for(const J in q){let ce="TextInput";q[J].type==="string"?ce="TextInput":q[J].type==="number"?ce="NumberInput":q[J].type==="boolean"?ce="SwitchInput":(q[J].type==="array"||q[J].type==="object")&&(ce="JsonInput"),E.value.tool_form_field.push({field:J,label:{input_type:"TooltipLabel",label:J,attrs:{tooltip:q[J].description},props_info:{}},input_type:ce,source:"referencing",required:((H=L.properties[B].required)==null?void 0:H.indexOf(J))!==-1,props_info:{rules:[{required:((Y=L.properties[B].required)==null?void 0:Y.indexOf(J))!==-1,message:_t("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{E.value.params_nested="";let J="TextInput";L.properties[B].type==="string"?J="TextInput":L.properties[B].type==="number"?J="NumberInput":L.properties[B].type==="boolean"?J="SwitchInput":(L.properties[B].type==="array"||L.properties[B].type==="object")&&(J="JsonInput"),E.value.tool_form_field.push({field:B,label:{input_type:"TooltipLabel",label:B,attrs:{tooltip:L.properties[B].description},props_info:{}},input_type:J,source:"referencing",required:((z=L.required)==null?void 0:z.indexOf(B))!==-1,props_info:{rules:[{required:((W=L.required)==null?void 0:W.indexOf(B))!==-1,message:_t("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}E.value.params_nested?E.value.toolParams={[E.value.params_nested]:{}}:E.value.toolParams={}}const E=Gn({get:()=>(t.nodeModel.properties.nodeData||Se.set(t.nodeModel.properties,"nodeData",g),t.nodeModel.properties.nodeData),set:L=>{Se.set(t.nodeModel.properties,"nodeData",L)}}),C=je(),j=async()=>{if(p.value){const L=E.value.tool_form_field.filter(V=>V.required).map(V=>V.label.label);if(L.length>0){for(const V of L)if(E.value.params_nested){if(!E.value.toolParams[E.value.params_nested][V])return Promise.reject({node:t.nodeModel,errMessage:V+_t("dynamicsForm.tip.requiredMessage")})}else if(!E.value.toolParams[V])return Promise.reject({node:t.nodeModel,errMessage:V+_t("dynamicsForm.tip.requiredMessage")})}}if(C.value){const L=Se.cloneDeep(E.value);if(!L.mcpServers)return Promise.reject({node:t.nodeModel,errMessage:_t("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!L.mcpTool)return Promise.reject({node:t.nodeModel,errMessage:_t("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};function U(){var V;const L=c.value==="systemManage"?{scope:"WORKSPACE",toolType:"MCP",workspaceId:(V=s.value)==null?void 0:V.workspaceId}:{scope:"WORKSPACE",toolType:"MCP"};si({type:"tool",systemType:c.value}).getAllToolList(L,d).then($=>{b.value=[...$.data.shared_tools,...$.data.tools].filter(H=>H.isActive)})}return Ur(()=>{var L;typeof((L=t.nodeModel.properties.nodeData)==null?void 0:L.isResult)>"u"&&Tu(t.nodeModel)&&Se.set(t.nodeModel.properties.nodeData,"isResult",!0),U(),Se.set(t.nodeModel,"validate",j)}),(L,V)=>{const $=Q("el-option"),H=Q("el-select"),Y=Q("el-avatar"),z=Q("ToolIcon"),W=Q("el-tag"),B=Q("el-form-item"),q=Q("Plus"),J=Q("el-icon"),ce=Q("el-button"),re=Q("AppIcon"),Pe=Q("el-tooltip"),ge=Q("el-form"),fe=Q("el-text"),Ee=Q("el-input"),Ne=Q("el-input-number"),rt=Q("el-switch"),mt=Zm("loading");return _e(),Ke(go,{nodeModel:L.nodeModel},{default:R(()=>[K("h5",oX,me(L.$t("views.applicationWorkflow.nodeSetting")),1),K("div",iX,[k(ge,{onSubmit:V[5]||(V[5]=qt(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:C,"hide-required-asterisk":""},{default:R(()=>[k(B,{label:"MCP Server Config"},{label:R(()=>[K("div",aX,[V[9]||(V[9]=K("div",null,[tt(" MCP Server Config "),K("span",{class:"color-danger"},"*")],-1)),k(H,{teleported:!1,modelValue:E.value.mcpSource,"onUpdate:modelValue":V[0]||(V[0]=Je=>E.value.mcpSource=Je),size:"small",style:{width:"85px"}},{default:R(()=>[k($,{label:L.$t("views.applicationWorkflow.nodes.mcpNode.reference"),value:"referencing"},null,8,["label"]),k($,{label:L.$t("common.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[E.value.mcpSource==="custom"?(_e(),Ke(is,{key:0,onWheel:_,title:"MCP Server Config",modelValue:E.value.mcpServers,"onUpdate:modelValue":V[1]||(V[1]=Je=>E.value.mcpServers=Je),style:{height:"150px"},onSubmitDialog:S,placeholder:bX},null,8,["modelValue"])):(_e(),Ke(H,{key:1,modelValue:E.value.mcpToolId,"onUpdate:modelValue":V[2]||(V[2]=Je=>E.value.mcpToolId=Je),filterable:"",onChange:T},{default:R(()=>[(_e(!0),Yt(tr,null,Wr(b.value,Je=>(_e(),Ke($,{key:Je.id,label:Je.name,value:Je.id},{default:R(()=>[K("div",lX,[Je!=null&&Je.icon?(_e(),Ke(Y,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:R(()=>[K("img",{src:Zt(Cl)(Je==null?void 0:Je.icon),alt:""},null,8,sX)]),_:2},1024)):(_e(),Ke(z,{key:1,size:20,type:Je==null?void 0:Je.toolType,class:"mr-8"},null,8,["type"])),K("span",null,me(Je.name),1),Je.scope==="SHARED"?(_e(),Ke(W,{key:2,type:"info",class:"info-tag ml-8"},{default:R(()=>[tt(me(Zt(_t)("views.shared.title")),1)]),_:1})):cn("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1}),k(B,null,{label:R(()=>[K("div",uX,[K("span",null,me(L.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),k(ce,{type:"primary",link:"",onClick:V[3]||(V[3]=Je=>A())},{default:R(()=>[k(J,{class:"mr-4"},{default:R(()=>[k(q)]),_:1}),tt(" "+me(L.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:R(()=>[k(H,{modelValue:E.value.mcpTool,"onUpdate:modelValue":V[4]||(V[4]=Je=>E.value.mcpTool=Je),onChange:O,filterable:""},{default:R(()=>[(_e(!0),Yt(tr,null,Wr(E.value.mcpTools,Je=>(_e(),Ke($,{key:Je.value,label:Je.name,value:Je.name,class:"flex align-center"},{default:R(()=>[k(Pe,{effect:"dark",content:Je.description,placement:"top-start","popper-class":"max-w-350"},{default:R(()=>[k(re,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),K("span",cX,me(Je.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),K("h5",fX,me(L.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),E.value.toolParams[E.value.params_nested]?(_e(),Yt(tr,{key:0},[E.value.mcpTool?(_e(),Yt("div",pX,[E.value.mcpTool?Wa((_e(),Ke(ge,{key:0,ref_key:"dynamicsFormRef",ref:p,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:V[7]||(V[7]=qt(()=>{},["prevent"]))},{default:R(()=>[(_e(!0),Yt(tr,null,Wr(E.value.tool_form_field,Je=>(_e(),Ke(B,{key:Je.field,required:Je.required},{label:R(()=>[K("div",hX,[K("div",null,[k(LS,{label:Je.label.label,tooltip:Je.label.attrs.tooltip},null,8,["label","tooltip"]),Je.required?(_e(),Yt("span",vX,"*")):cn("",!0)]),k(H,{teleported:!1,modelValue:Je.source,"onUpdate:modelValue":Xt=>Je.source=Xt,size:"small",style:{width:"85px"},onChange:V[6]||(V[6]=Xt=>E.value.toolParams[E.value.params_nested]={})},{default:R(()=>[k($,{label:L.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k($,{label:L.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:R(()=>[Je.source==="custom"&&Je.input_type==="TextInput"?(_e(),Ke(Ee,{key:0,modelValue:E.value.toolParams[E.value.params_nested][Je.label.label],"onUpdate:modelValue":Xt=>E.value.toolParams[E.value.params_nested][Je.label.label]=Xt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="NumberInput"?(_e(),Ke(Ne,{key:1,modelValue:E.value.toolParams[E.value.params_nested][Je.label.label],"onUpdate:modelValue":Xt=>E.value.toolParams[E.value.params_nested][Je.label.label]=Xt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="SwitchInput"?(_e(),Ke(rt,{key:2,modelValue:E.value.toolParams[E.value.params_nested][Je.label.label],"onUpdate:modelValue":Xt=>E.value.toolParams[E.value.params_nested][Je.label.label]=Xt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="JsonInput"?(_e(),Ke(Ee,{key:3,modelValue:E.value.toolParams[E.value.params_nested][Je.label.label],"onUpdate:modelValue":Xt=>E.value.toolParams[E.value.params_nested][Je.label.label]=Xt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):cn("",!0),Je.source==="referencing"?(_e(),Ke(Co,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:L.nodeModel,class:"w-full",placeholder:L.$t("views.applicationWorkflow.variable.placeholder"),modelValue:E.value.toolParams[E.value.params_nested][Je.label.label],"onUpdate:modelValue":Xt=>E.value.toolParams[E.value.params_nested][Je.label.label]=Xt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):cn("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[mt,d.value]]):cn("",!0)])):(_e(),Yt("div",dX,[k(fe,{type:"info"},{default:R(()=>[tt(me(L.$t("common.noData")),1)]),_:1})]))],64)):(_e(),Yt(tr,{key:1},[E.value.mcpTool?(_e(),Yt("div",yX,[E.value.mcpTool?Wa((_e(),Ke(ge,{key:0,ref_key:"dynamicsFormRef",ref:p,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:V[8]||(V[8]=qt(()=>{},["prevent"]))},{default:R(()=>[(_e(!0),Yt(tr,null,Wr(E.value.tool_form_field,Je=>(_e(),Ke(B,{key:Je.field,required:Je.required},{label:R(()=>[K("div",gX,[K("div",null,[k(LS,{label:Je.label.label,tooltip:Je.label.attrs.tooltip},null,8,["label","tooltip"]),Je.required?(_e(),Yt("span",_X,"*")):cn("",!0)]),k(H,{teleported:!1,modelValue:Je.source,"onUpdate:modelValue":Xt=>Je.source=Xt,size:"small",style:{width:"85px"}},{default:R(()=>[k($,{label:L.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k($,{label:L.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:R(()=>[Je.source==="custom"&&Je.input_type==="TextInput"?(_e(),Ke(Ee,{key:0,modelValue:E.value.toolParams[Je.label.label],"onUpdate:modelValue":Xt=>E.value.toolParams[Je.label.label]=Xt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="NumberInput"?(_e(),Ke(Ne,{key:1,modelValue:E.value.toolParams[Je.label.label],"onUpdate:modelValue":Xt=>E.value.toolParams[Je.label.label]=Xt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="SwitchInput"?(_e(),Ke(rt,{key:2,modelValue:E.value.toolParams[Je.label.label],"onUpdate:modelValue":Xt=>E.value.toolParams[Je.label.label]=Xt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="JsonInput"?(_e(),Ke(Ee,{key:3,modelValue:E.value.toolParams[Je.label.label],"onUpdate:modelValue":Xt=>E.value.toolParams[Je.label.label]=Xt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):cn("",!0),Je.source==="referencing"?(_e(),Ke(Co,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:L.nodeModel,class:"w-full",placeholder:L.$t("views.applicationWorkflow.variable.placeholder"),modelValue:E.value.toolParams[Je.label.label],"onUpdate:modelValue":Xt=>E.value.toolParams[Je.label.label]=Xt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):cn("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[mt,d.value]]):cn("",!0)])):(_e(),Yt("div",mX,[k(fe,{type:"info"},{default:R(()=>[tt(me(L.$t("common.noData")),1)]),_:1})]))],64))]),_:1},8,["nodeModel"])}}});class EX extends _o{constructor(t){super(t,wX)}}const OX={type:"mcp-node",model:bo,view:EX},SX=Object.freeze(Object.defineProperty({__proto__:null,default:OX},Symbol.toStringTag,{value:"Module"})),xX={class:"p-8"},AX={class:"dialog-footer"},TX=$n({__name:"DatabaseSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=je(),s=je({databaseSetting:{type:"mysql",host:"127.0.0.1",port:3306,username:"",password:"",database:"mysql"}}),c=je(!1),p=je(!1),d=b=>{s.value={databaseSetting:Se.cloneDeep(b.databaseSetting)},c.value=!0},_=async()=>{a("refresh",s.value),c.value=!1};function g(b){b==="mysql"?(s.value.databaseSetting.port=3306,s.value.databaseSetting.database="mysql"):b==="postgresql"&&(s.value.databaseSetting.port=5432,s.value.databaseSetting.database="postgres")}return t({open:d}),(b,S)=>{const T=Q("el-radio"),A=Q("el-card"),O=Q("el-radio-group"),E=Q("el-form-item"),C=Q("el-input"),j=Q("el-col"),U=Q("el-input-number"),L=Q("el-row"),V=Q("el-form"),$=Q("el-scrollbar"),H=Q("el-button"),Y=Q("el-dialog"),z=Zm("loading");return _e(),Ke(Y,{class:"scrollbar-dialog","align-center":"",title:b.$t("common.paramSetting"),modelValue:c.value,"onUpdate:modelValue":S[8]||(S[8]=W=>c.value=W),width:"550px","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:R(()=>[K("span",AX,[k(H,{onClick:S[6]||(S[6]=qt(W=>c.value=!1,["prevent"]))},{default:R(()=>[tt(me(b.$t("common.cancel")),1)]),_:1}),k(H,{type:"primary",onClick:S[7]||(S[7]=W=>_()),loading:p.value},{default:R(()=>[tt(me(b.$t("common.save")),1)]),_:1},8,["loading"])])]),default:R(()=>[k($,{"max-height":"550"},{default:R(()=>[K("div",xX,[Wa((_e(),Ke(V,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:R(()=>[k(E,{label:"数据库类型"},{default:R(()=>[k(O,{modelValue:s.value.databaseSetting.type,"onUpdate:modelValue":S[0]||(S[0]=W=>s.value.databaseSetting.type=W),class:"card__radio",onChange:g},{default:R(()=>[k(A,{shadow:"never",class:wu(["mb-16",s.value.type==="mysql"?"active":""])},{default:R(()=>[k(T,{value:"mysql",size:"small"},{default:R(()=>S[9]||(S[9]=[K("p",{class:"mb-4"}," MYSQL ",-1)])),_:1,__:[9]})]),_:1},8,["class"]),k(A,{shadow:"never",class:wu(["mb-16",s.value.databaseSetting.type==="postgresql"?"active":""])},{default:R(()=>[k(T,{value:"postgresql",size:"small"},{default:R(()=>S[10]||(S[10]=[K("p",{class:"mb-4"}," POSTGRESQL ",-1)])),_:1,__:[10]})]),_:1},8,["class"])]),_:1},8,["modelValue"])]),_:1}),k(L,{gutter:10},{default:R(()=>[k(j,{span:12},{default:R(()=>[k(E,null,{label:R(()=>S[11]||(S[11]=[K("div",{class:"flex align-center"},[K("span",{class:"mr-4"},"host")],-1)])),default:R(()=>[k(C,{modelValue:s.value.databaseSetting.host,"onUpdate:modelValue":S[1]||(S[1]=W=>s.value.databaseSetting.host=W),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),k(j,{span:12},{default:R(()=>[k(E,{label:"port"},{default:R(()=>[k(U,{modelValue:s.value.databaseSetting.port,"onUpdate:modelValue":S[2]||(S[2]=W=>s.value.databaseSetting.port=W),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),k(L,{gutter:10},{default:R(()=>[k(j,{span:12},{default:R(()=>[k(E,null,{label:R(()=>S[12]||(S[12]=[K("div",{class:"flex align-center"},[K("span",{class:"mr-4"},"username")],-1)])),default:R(()=>[k(C,{modelValue:s.value.databaseSetting.username,"onUpdate:modelValue":S[3]||(S[3]=W=>s.value.databaseSetting.username=W),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),k(j,{span:12},{default:R(()=>[k(E,{label:"password"},{default:R(()=>[k(C,{modelValue:s.value.databaseSetting.password,"onUpdate:modelValue":S[4]||(S[4]=W=>s.value.databaseSetting.password=W),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),k(E,{label:"database"},{default:R(()=>[k(C,{modelValue:s.value.databaseSetting.database,"onUpdate:modelValue":S[5]||(S[5]=W=>s.value.databaseSetting.database=W),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[z,p.value]])])]),_:1})]),_:1},8,["title","modelValue"])}}}),MX={class:"title-decoration-1 mb-8"},kX={class:"flex-between w-full"},NX={class:"flex-between"},PX={class:"flex-between"},RX={class:"w-full"},CX=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("getResourceDetail"),n=Zi(),{params:{id:a}}=n,r=Gn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=je(),c=()=>{var $;($=s.value)==null||$.open(g.value)},p=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),d=$=>{var H;$?(H=A.value)==null||H.reset_default($,a):U({})},_={dialogueNumber:1,dialogueType:"WORK_FLOW",databaseSetting:{type:"mysql",host:"127.0.0.1",port:3306,database:"mysql",username:"root",password:"123456"},questionReferenceAddress:[]},g=Gn({get:()=>(b.nodeModel.properties.nodeData||Se.set(b.nodeModel.properties,"nodeData",_),b.nodeModel.properties.nodeData),set:$=>{Se.set(b.nodeModel.properties,"nodeData",$)}}),b=e,S=je(),T=je(null),A=je(),O=()=>{var $;return($=S.value)==null?void 0:$.validate().catch(H=>Promise.reject({node:b.nodeModel,errMessage:H}))},E=t();function C(){var H;const $=r.value==="systemManage"?{modelType:"LLM",workspaceId:(H=E.value)==null?void 0:H.workspaceId}:{modelType:"LLM"};si({type:"model",systemType:r.value}).getSelectModelList($).then(Y=>{T.value=Se.groupBy(Y==null?void 0:Y.data,"provider")})}const j=$=>{var H;$&&((H=A.value)==null||H.open($,a,g.value.modelParamsSetting))};function U($){Se.set(b.nodeModel.properties.nodeData,"modelParamsSetting",$)}function L($){Se.set(b.nodeModel.properties.nodeData,"databaseSetting",$.databaseSetting)}const V=je();return Ur(()=>{var $;C(),typeof(($=b.nodeModel.properties.nodeData)==null?void 0:$.isResult)>"u"&&Tu(b.nodeModel)&&Se.set(b.nodeModel.properties.nodeData,"isResult",!0),Se.set(b.nodeModel,"validate",O),g.value.type||(g.value.type="mysql")}),($,H)=>{const Y=Q("el-button"),z=Q("el-form-item"),W=Q("el-option"),B=Q("el-select"),q=Q("el-input-number"),J=Q("el-col"),ce=Q("el-row"),re=Q("el-form"),Pe=Q("el-card");return _e(),Ke(go,{nodeModel:$.nodeModel},{default:R(()=>[K("h5",MX,me($.$t("views.applicationWorkflow.nodeSetting")),1),k(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(re,{onSubmit:H[5]||(H[5]=qt(()=>{},["prevent"])),model:g.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:S,"hide-required-asterisk":""},{default:R(()=>[k(z,{label:$.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:$.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:R(()=>[K("div",kX,[K("div",null,[K("span",null,[tt(me($.$t("views.application.form.aiModel.label")),1),H[6]||(H[6]=K("span",{class:"color-danger"},"*",-1))])]),k(Y,{disabled:!g.value.modelId,type:"primary",link:"",onClick:H[0]||(H[0]=ge=>j(g.value.modelId)),onRefreshForm:U},{default:R(()=>[k(Ar,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(Su,{onChange:d,onWheel:p,teleported:!1,modelValue:g.value.modelId,"onUpdate:modelValue":H[1]||(H[1]=ge=>g.value.modelId=ge),placeholder:$.$t("views.application.form.aiModel.placeholder"),options:T.value,onSubmitModel:C,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(z,{label:$.$t("views.application.form.historyRecord.label")},{label:R(()=>[K("div",NX,[K("div",null,me($.$t("views.application.form.historyRecord.label")),1),k(B,{modelValue:g.value.dialogueType,"onUpdate:modelValue":H[2]||(H[2]=ge=>g.value.dialogueType=ge),type:"small",style:{width:"100px"}},{default:R(()=>[k(W,{label:$.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),k(W,{label:$.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[k(q,{modelValue:g.value.dialogueNumber,"onUpdate:modelValue":H[3]||(H[3]=ge=>g.value.dialogueNumber=ge),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),k(z,{label:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:R(()=>[K("div",PX,[H[7]||(H[7]=K("span",null,"数据库配置",-1)),k(Y,{type:"primary",link:"",onClick:c},{default:R(()=>[k(Ar,{iconName:"app-setting"})]),_:1})])]),default:R(()=>[K("div",RX,[k(ce,null,{default:R(()=>[k(J,{span:12,class:"color-secondary lighter"},{default:R(()=>H[8]||(H[8]=[tt("数据库类型",-1)])),_:1,__:[8]}),k(J,{span:12,class:"lighter"},{default:R(()=>[tt(me(g.value.databaseSetting.type),1)]),_:1}),k(J,{span:12,class:"color-secondary lighter"},{default:R(()=>H[9]||(H[9]=[tt("host",-1)])),_:1,__:[9]}),k(J,{span:12,class:"lighter"},{default:R(()=>[tt(me(g.value.databaseSetting.host),1)]),_:1}),k(J,{span:12,class:"color-secondary lighter"},{default:R(()=>H[10]||(H[10]=[tt("port",-1)])),_:1,__:[10]}),k(J,{span:12,class:"lighter"},{default:R(()=>[tt(me(g.value.databaseSetting.port),1)]),_:1}),k(J,{span:12,class:"color-secondary lighter"},{default:R(()=>H[11]||(H[11]=[tt("database",-1)])),_:1,__:[11]}),k(J,{span:12,class:"lighter"},{default:R(()=>[tt(me(g.value.databaseSetting.database),1)]),_:1})]),_:1})])]),_:1},8,["label"]),k(z,{label:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:R(()=>[k(Co,{ref_key:"nodeCascaderRef",ref:V,nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:g.value.questionReferenceAddress,"onUpdate:modelValue":H[4]||(H[4]=ge=>g.value.questionReferenceAddress=ge)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),k(ih,{ref_key:"AIModeParamSettingDialogRef",ref:A,onRefresh:U},null,512),k(TX,{ref_key:"ParamSettingDialogRef",ref:s,onRefresh:L},null,512)]),_:1},8,["nodeModel"])}}});class DX extends _o{constructor(t){super(t,CX)}}const jX={type:"nl2sql-node",model:bo,view:DX},IX=Object.freeze(Object.defineProperty({__proto__:null,default:jX},Symbol.toStringTag,{value:"Module"})),LX={class:"dialog-footer"},$X=$n({__name:"ParametersFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"boolean",label:"Boolean"},{value:"array",label:"Array"}],s=je(),c=je(!1),p=je(!1),d=je(null),_=je({field:"",label:"",parameterType:"",desc:""}),g=oh({label:[{required:!0,message:_t("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:_t("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:_t("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),b=je(!1),S=(O,E)=>{O&&(_.value=Se.cloneDeep(O),p.value=!0,d.value=E),b.value=!0},T=()=>{b.value=!1,p.value=!1,d.value=null,_.value={field:"",label:""}},A=async O=>{O&&await O.validate(E=>{E&&a("refresh",_.value,d.value)})};return t({open:S,close:T}),(O,E)=>{const C=Q("el-input"),j=Q("el-form-item"),U=Q("el-option"),L=Q("el-select"),V=Q("el-form"),$=Q("el-button"),H=Q("el-dialog");return _e(),Ke(H,{title:p.value?O.$t("common.param.editParam"):O.$t("common.param.addParam"),modelValue:b.value,"onUpdate:modelValue":E[5]||(E[5]=Y=>b.value=Y),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":T,"append-to-body":""},{footer:R(()=>[K("span",LX,[k($,{onClick:qt(T,["prevent"])},{default:R(()=>[tt(me(O.$t("common.cancel")),1)]),_:1}),k($,{type:"primary",onClick:E[4]||(E[4]=Y=>A(s.value)),loading:c.value},{default:R(()=>[tt(me(O.$t("common.save")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(V,{"label-position":"top",ref_key:"fieldFormRef",ref:s,rules:g,model:_.value,"require-asterisk-position":"right"},{default:R(()=>[k(j,{label:O.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:g.field},{default:R(()=>[k(C,{modelValue:_.value.field,"onUpdate:modelValue":E[0]||(E[0]=Y=>_.value.field=Y),maxlength:64,placeholder:O.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(j,{label:O.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:g.label},{default:R(()=>[k(C,{modelValue:_.value.label,"onUpdate:modelValue":E[1]||(E[1]=Y=>_.value.label=Y),maxlength:64,"show-word-limit":"",placeholder:O.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(j,{label:O.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType"),required:!0,prop:"parameterType",rules:g.label},{default:R(()=>[k(L,{modelValue:_.value.parameterType,"onUpdate:modelValue":E[2]||(E[2]=Y=>_.value.parameterType=Y),placeholder:O.$t("common.selectPlaceholder")+O.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType"),style:{width:"100%"}},{default:R(()=>[(_e(),Yt(tr,null,Wr(r,Y=>k(U,{key:Y.value,label:Y.label,value:Y.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(j,{label:O.$t("common.desc"),prop:"desc"},{default:R(()=>[k(C,{modelValue:_.value.desc,"onUpdate:modelValue":E[3]||(E[3]=Y=>_.value.desc=Y),style:{width:"100%"},rows:2,type:"textarea",placeholder:O.$t("common.descPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),FX={class:"flex-between w-full"},BX={class:"break-all lighter"},UX={class:"ml-4",style:{"margin-top":"-4px"}},VX=["title"],GX=["title"],zX={class:"mr-4"},WX=$n({__name:"ParametersFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=je(),a=je(),r=je([]);function s(d,_){a.value.open(d,_)}function c(d){r.value.splice(d,1);const _=[{label:_t("common.result"),value:"result"},...r.value.map(g=>({label:g.label,value:g.field}))];Se.set(t.nodeModel.properties.config,"fields",_)}function p(d,_){for(let b=0;b<r.value.length;b++)if(r.value[b].field===d.field&&_!==b){za(_t("views.applicationWorkflow.tip.paramErrorMessage")+d.field);return}[void 0,null].includes(_)?r.value.push(d):r.value.splice(_,1,d),a.value.close();const g=[{label:_t("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];Se.set(t.nodeModel.properties.config,"fields",g)}return Ur(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=Se.cloneDeep(t.nodeModel.properties.nodeData.variableList)),Se.set(t.nodeModel.properties.nodeData,"variableList",r);const d=[{label:_t("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];Se.set(t.nodeModel.properties.config,"fields",d)}),(d,_)=>{var O;const g=Q("el-button"),b=Q("el-table-column"),S=Q("el-tag"),T=Q("el-tooltip"),A=Q("el-table");return _e(),Yt(tr,null,[K("div",FX,[K("h5",BX,[tt(me(d.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.label"))+" ",1),_[1]||(_[1]=K("span",{class:"color-danger"},"*",-1))]),K("span",UX,[k(g,{link:"",type:"primary",onClick:_[0]||(_[0]=E=>s())},{default:R(()=>[k(Ar,{iconName:"app-add-outlined",class:"mr-4"})]),_:1})])]),((O=t.nodeModel.properties.nodeData.variableList)==null?void 0:O.length)>0?(_e(),Ke(A,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:R(()=>[k(b,{prop:"field",label:d.$t("dynamicsForm.paramForm.field.label"),width:"90"},{default:R(({row:E})=>[K("span",{title:E.field,class:"ellipsis-1"},me(E.field),9,VX)]),_:1},8,["label"]),k(b,{prop:"label",label:d.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:E})=>[K("span",null,[K("span",{title:E.label,class:"ellipsis-1"},me(E.label),9,GX)])]),_:1},8,["label"]),k(b,{prop:"label",label:d.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType")},{default:R(({row:E})=>[k(S,{type:"info",class:"info-tag"},{default:R(()=>[tt(me(E.parameterType),1)]),_:2},1024)]),_:1},8,["label"]),k(b,{label:d.$t("common.operation"),align:"left",width:"80"},{default:R(({row:E,$index:C})=>[K("span",zX,[k(T,{effect:"dark",content:d.$t("common.modify"),placement:"top"},{default:R(()=>[k(g,{type:"primary",text:"",onClick:qt(j=>s(E,C),["stop"])},{default:R(()=>[k(Ar,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(T,{effect:"dark",content:d.$t("common.delete"),placement:"top"},{default:R(()=>[k(g,{type:"primary",text:"",onClick:j=>c(C)},{default:R(()=>[k(Ar,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):cn("",!0),k($X,{ref_key:"ParametersFieldDialogRef",ref:a,onRefresh:p},null,512)],64)}}}),HX={class:"title-decoration-1 mb-8"},XX={class:"flex-between w-full"},qX={class:"flex-between"},YX=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("getResourceDetail"),n=e,a=je(),r=Zi(),{params:{id:s}}=r,c=j=>{var U;j&&((U=a.value)==null||U.open(j,s,A.value.modelParamsSetting))};function p(j){Se.set(n.nodeModel.properties.nodeData,"modelParamsSetting",j)}const d=t(),_=je(null),g=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),b=Gn(()=>r.path.includes("resource-management")?"systemManage":"workspace");function S(){var U;const j=b.value==="systemManage"?{modelType:"LLM",workspace_id:(U=d.value)==null?void 0:U.workspaceId}:{modelType:"LLM"};si({type:"model",systemType:b.value}).getSelectModelList(j).then(L=>{_.value=Se.groupBy(L==null?void 0:L.data,"provider")})}const T={inputVariable:[],modelParamsSetting:{},modelId:"",variableList:[]},A=Gn({get:()=>(n.nodeModel.properties.nodeData||Se.set(n.nodeModel.properties,"nodeData",T),n.nodeModel.properties.nodeData),set:j=>{Se.set(n.nodeModel.properties,"nodeData",j)}}),O=j=>{var U;j?(U=a.value)==null||U.reset_default(j,s):p({})},E=je(),C=async()=>E.value.validate();return Ur(()=>{S(),Se.set(n.nodeModel,"validate",C)}),(j,U)=>{const L=Q("el-button"),V=Q("el-form-item"),$=Q("el-form"),H=Q("el-card");return _e(),Ke(go,{nodeModel:j.nodeModel},{default:R(()=>[K("h5",HX,me(j.$t("views.applicationWorkflow.nodeSetting")),1),k(H,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k($,{onSubmit:U[3]||(U[3]=qt(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:E,"hide-required-asterisk":""},{default:R(()=>[k(V,{label:j.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:j.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:R(()=>[K("div",XX,[K("div",null,[K("span",null,[tt(me(j.$t("views.application.form.aiModel.label")),1),U[4]||(U[4]=K("span",{class:"color-danger ml-4"},"*",-1))])]),k(L,{disabled:!A.value.modelId,type:"primary",link:"",onClick:U[0]||(U[0]=Y=>c(A.value.modelId)),onRefreshForm:p},{default:R(()=>[k(Ar,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(Su,{onChange:O,onWheel:g,teleported:!1,modelValue:A.value.modelId,"onUpdate:modelValue":U[1]||(U[1]=Y=>A.value.modelId=Y),placeholder:j.$t("views.application.form.aiModel.placeholder"),options:_.value,onSubmitModel:S,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(V,{prop:"inputVariable",rules:{message:j.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:R(()=>[K("div",qX,[K("div",null,[tt(me(j.$t("views.applicationWorkflow.nodes.variableSplittingNode.inputVariables"))+" ",1),U[5]||(U[5]=K("span",{class:"color-danger"},"*",-1))])])]),default:R(()=>[k(Co,{ref:"nodeCascaderRef",nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.variable.placeholder"),modelValue:A.value.inputVariable,"onUpdate:modelValue":U[2]||(U[2]=Y=>A.value.inputVariable=Y)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),k(V,{prop:"variableList",rules:{message:j.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.label"),trigger:"blur",required:!0}},{default:R(()=>[k(WX,{ref:"ParametersFieldTableRef","node-model":j.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),k(ih,{ref_key:"AIModeParamSettingDialogRef",ref:a,onRefresh:p},null,512)]),_:1},8,["nodeModel"])}}});class KX extends _o{constructor(t){super(t,YX)}}const ZX={type:"parameter-extraction-node",model:bo,view:KX},JX=Object.freeze(Object.defineProperty({__proto__:null,default:ZX},Symbol.toStringTag,{value:"Module"})),QX={class:"title-decoration-1 mb-8"},eq={class:"flex-between"},tq={class:"flex align-center"},nq={class:"mr-4"},rq={class:"flex-between w-full"},oq={class:"flex align-center"},iq={class:"mr-4"},aq={class:"flex"},lq=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("workflowMode")||xr.Application,n=Uo("getResourceDetail"),a=Zi(),{params:{id:r}}=a,s=Gn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=je(),p=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),d=$=>{var H;$?(H=c.value)==null||H.reset_default($,r):T({})};function _($){Se.set(E.nodeModel.properties.nodeData,"prompt",$)}function g($){Se.set(E.nodeModel.properties.nodeData,"system",$)}const b=`${_t("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${_t("views.applicationWorkflow.nodes.startNode.label")}.question}}
${_t("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,S={modelId:"",system:_t("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:b,dialogueNumber:1,isResult:!1};function T($){Se.set(E.nodeModel.properties.nodeData,"modelParamsSetting",$)}const A=$=>{var H;$&&((H=c.value)==null||H.open($,r,O.value.modelParamsSetting))},O=Gn({get:()=>(E.nodeModel.properties.nodeData||Se.set(E.nodeModel.properties,"nodeData",S),E.nodeModel.properties.nodeData),set:$=>{Se.set(E.nodeModel.properties,"nodeData",$)}}),E=e,C=je(),j=je(null),U=()=>{var $;return($=C.value)==null?void 0:$.validate().catch(H=>Promise.reject({node:E.nodeModel,errMessage:H}))},L=n();function V(){var H;const $=s.value==="systemManage"?{modelType:"LLM",workspaceId:(H=L.value)==null?void 0:H.workspaceId}:{modelType:"LLM"};si({type:"model",systemType:s.value}).getSelectModelList($).then(Y=>{j.value=Se.groupBy(Y==null?void 0:Y.data,"provider")})}return Ur(()=>{var $;V(),typeof(($=E.nodeModel.properties.nodeData)==null?void 0:$.isResult)>"u"&&Tu(E.nodeModel)&&Se.set(E.nodeModel.properties.nodeData,"isResult",!0),Se.set(E.nodeModel,"validate",U)}),($,H)=>{const Y=Q("el-button"),z=Q("el-form-item"),W=Q("el-tooltip"),B=Q("el-input-number"),q=Q("el-switch"),J=Q("el-form"),ce=Q("el-card");return _e(),Ke(go,{nodeModel:$.nodeModel},{default:R(()=>[K("h5",QX,me($.$t("views.applicationWorkflow.nodeSetting")),1),k(ce,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(J,{onSubmit:H[7]||(H[7]=qt(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"questionNodeFormRef",ref:C,"hide-required-asterisk":""},{default:R(()=>[k(z,{label:$.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:$.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:R(()=>[K("div",eq,[K("div",null,[K("span",null,[tt(me($.$t("views.application.form.aiModel.label")),1),H[8]||(H[8]=K("span",{class:"color-danger"},"*",-1))])]),k(Y,{type:"primary",link:"",disabled:!O.value.modelId,onClick:H[0]||(H[0]=re=>A(O.value.modelId)),onRefreshForm:T},{default:R(()=>[k(Ar,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(Su,{onChange:d,onWheel:p,teleported:!1,modelValue:O.value.modelId,"onUpdate:modelValue":H[1]||(H[1]=re=>O.value.modelId=re),placeholder:$.$t("views.application.form.aiModel.placeholder"),options:j.value,onSubmitModel:V,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(z,{label:$.$t("views.application.form.roleSettings.label")},{default:R(()=>[k(is,{title:$.$t("views.application.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":H[2]||(H[2]=re=>O.value.system=re),style:{height:"100px"},onSubmitDialog:g,placeholder:$.$t("views.application.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),k(z,{label:$.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:$.$t("views.application.form.prompt.tooltip"),trigger:"blur"}},{label:R(()=>[K("div",tq,[K("div",nq,[K("span",null,[tt(me($.$t("views.application.form.prompt.label")),1),H[9]||(H[9]=K("span",{class:"color-danger"},"*",-1))])]),k(W,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me($.$t("views.application.form.prompt.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(is,{onWheel:p,title:$.$t("views.application.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":H[3]||(H[3]=re=>O.value.prompt=re),style:{height:"150px"},onSubmitDialog:_},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(z,{label:$.$t("views.application.form.historyRecord.label")},{default:R(()=>[k(B,{modelValue:O.value.dialogueNumber,"onUpdate:modelValue":H[4]||(H[4]=re=>O.value.dialogueNumber=re),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),[Zt(xr).Application,Zt(xr).ApplicationLoop].includes(Zt(t))?(_e(),Ke(z,{key:0,label:$.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:H[6]||(H[6]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",rq,[K("div",oq,[K("div",iq,[K("span",null,me($.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(W,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me($.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",aq,[k(q,{size:"small",modelValue:O.value.isResult,"onUpdate:modelValue":H[5]||(H[5]=re=>O.value.isResult=re)},null,8,["modelValue"])])])]),_:1},8,["label"])):cn("",!0)]),_:1},8,["model"])]),_:1}),k(ih,{ref_key:"AIModeParamSettingDialogRef",ref:c,onRefresh:T},null,512)]),_:1},8,["nodeModel"])}}});class sq extends _o{constructor(t){super(t,lq)}}const uq={type:"question-node",model:bo,view:sq},cq=Object.freeze(Object.defineProperty({__proto__:null,default:uq},Symbol.toStringTag,{value:"Module"})),fq={class:"flex-between"},dq={class:"flex-between w-full"},pq={class:"flex align-center"},hq={class:"mr-4"},vq={class:"flex"},mq=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("workflowMode")||xr.Application,n=e,a=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),r={replyType:"content",content:"",fields:[],isResult:!0},s=Gn({get:()=>(n.nodeModel.properties.nodeData||Se.set(n.nodeModel.properties,"nodeData",r),n.nodeModel.properties.nodeData),set:g=>{Se.set(n.nodeModel.properties,"nodeData",g)}});function c(g){Se.set(n.nodeModel.properties.nodeData,"content",g)}const p=je(),d=je(),_=()=>{var g;return Promise.all([d.value?d.value.validate():Promise.resolve(""),(g=p.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:n.nodeModel,errMessage:b}))};return Ur(()=>{var g;typeof((g=n.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Tu(n.nodeModel)&&Se.set(n.nodeModel.properties.nodeData,"isResult",!0),Se.set(n.nodeModel,"validate",_)}),(g,b)=>{const S=Q("el-option"),T=Q("el-select"),A=Q("el-form-item"),O=Q("el-tooltip"),E=Q("el-switch"),C=Q("el-form"),j=Q("el-card");return _e(),Ke(go,{nodeModel:g.nodeModel},{default:R(()=>[k(j,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(C,{onSubmit:b[5]||(b[5]=qt(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:p},{default:R(()=>[k(A,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:R(()=>[K("div",fq,[K("span",null,me(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),k(T,{teleported:!1,modelValue:s.value.replyType,"onUpdate:modelValue":b[0]||(b[0]=U=>s.value.replyType=U),size:"small",style:{width:"85px"}},{default:R(()=>[k(S,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(S,{label:g.$t("common.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[s.value.replyType==="content"?(_e(),Ke(is,{key:0,onWheel:a,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:s.value.content,"onUpdate:modelValue":b[1]||(b[1]=U=>s.value.content=U),style:{height:"150px"},onSubmitDialog:c},null,8,["title","modelValue"])):(_e(),Ke(Co,{key:1,ref_key:"nodeCascaderRef",ref:d,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.fields,"onUpdate:modelValue":b[2]||(b[2]=U=>s.value.fields=U)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),[Zt(xr).Application,Zt(xr).ApplicationLoop].includes(Zt(t))?(_e(),Ke(A,{key:0,label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[4]||(b[4]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",dq,[K("div",pq,[K("div",hq,[K("span",null,me(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(O,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",vq,[k(E,{size:"small",modelValue:s.value.isResult,"onUpdate:modelValue":b[3]||(b[3]=U=>s.value.isResult=U)},null,8,["modelValue"])])])]),_:1},8,["label"])):cn("",!0)]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class yq extends _o{constructor(t){super(t,mq)}}const gq={type:"reply-node",model:bo,view:yq},_q=Object.freeze(Object.defineProperty({__proto__:null,default:gq},Symbol.toStringTag,{value:"Module"})),bq={class:"flex align-center"},wq={class:"mr-4"},Eq={class:"dialog-footer"},Oq=$n({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=je(),s=je({topN:3,similarity:0,maxParagraphCharNumber:5e3}),c=je(!1),p=je(!1);Km(c,g=>{g||(s.value={topN:3,similarity:0,maxParagraphCharNumber:5e3})});const d=g=>{s.value={...s.value,...Se.cloneDeep(g)},c.value=!0},_=()=>{var g;(g=r==null?void 0:r.value)==null||g.validate((b,S)=>{b&&(a("refresh",Se.cloneDeep(s.value)),c.value=!1)})};return t({open:d}),(g,b)=>{const S=Q("AppIcon"),T=Q("el-tooltip"),A=Q("el-input-number"),O=Q("el-form-item"),E=Q("el-col"),C=Q("el-row"),j=Q("el-slider"),U=Q("el-form"),L=Q("el-button"),V=Q("el-dialog");return _e(),Ke(V,{"align-center":"",title:g.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":b[5]||(b[5]=$=>c.value=$),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:R(()=>[K("span",Eq,[k(L,{onClick:b[3]||(b[3]=qt($=>c.value=!1,["prevent"]))},{default:R(()=>[tt(me(g.$t("common.cancel")),1)]),_:1}),k(L,{type:"primary",onClick:b[4]||(b[4]=$=>_()),loading:p.value},{default:R(()=>[tt(me(g.$t("common.save")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(U,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:R(()=>[k(C,{gutter:12},{default:R(()=>[k(E,{span:12},{default:R(()=>[k(O,null,{label:R(()=>[K("div",bq,[K("span",wq,"Score "+me(g.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),k(T,{effect:"dark",content:g.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:R(()=>[k(S,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:R(()=>[k(A,{modelValue:s.value.similarity,"onUpdate:modelValue":b[0]||(b[0]=$=>s.value.similarity=$),min:0,max:s.value.searchMode==="hybrid"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),k(E,{span:12},{default:R(()=>[k(O,{label:g.$t("views.application.dialog.topReferences")},{default:R(()=>[k(A,{modelValue:s.value.topN,"onUpdate:modelValue":b[1]||(b[1]=$=>s.value.topN=$),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),k(O,{label:g.$t("views.application.dialog.maxCharacters")},{default:R(()=>[k(j,{modelValue:s.value.maxParagraphCharNumber,"onUpdate:modelValue":b[2]||(b[2]=$=>s.value.maxParagraphCharNumber=$),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),Sq={class:"flex-between"},xq={class:"flex-between"},Aq={class:"w-full"},Tq={class:"flex-between"},Mq={class:"flex-between"},kq={class:"flex-between"},Nq=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("getResourceDetail"),n=Zi(),{params:{id:a}}=n,r=Gn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=e,c=je(),p={reranker_reference_list:[[]],reranker_model_id:"",questionReferenceAddress:[],reranker_setting:{topN:3,similarity:0,maxParagraphCharNumber:5e3},show_knowledge:!1},d=je(null),_=()=>{var L;(L=c.value)==null||L.open(S.value.reranker_setting)},g=L=>{const V=Se.cloneDeep(s.nodeModel.properties.nodeData.reranker_reference_list);V.splice(L,1),Se.set(s.nodeModel.properties.nodeData,"reranker_reference_list",V)},b=L=>L.ctrlKey===!0?(L.preventDefault(),!0):(L.stopPropagation(),!0),S=Gn({get:()=>(s.nodeModel.properties.nodeData||Se.set(s.nodeModel.properties,"nodeData",p),s.nodeModel.properties.nodeData),set:L=>{Se.set(s.nodeModel.properties,"nodeData",L)}});function T(L){Se.set(s.nodeModel.properties.nodeData,"reranker_setting",L)}const A=t();function O(){var V;const L=r.value==="systemManage"?{modelType:"RERANKER",workspaceId:(V=A.value)==null?void 0:V.workspaceId}:{modelType:"RERANKER"};si({type:"model",systemType:r.value}).getSelectModelList(L).then($=>{d.value=Se.groupBy($==null?void 0:$.data,"provider")})}const E=()=>{const L=Se.cloneDeep(s.nodeModel.properties.nodeData.reranker_reference_list);L.push([]),Se.set(s.nodeModel.properties.nodeData,"reranker_reference_list",L)},C=je(),j=je(),U=()=>{var L;return Promise.all([j.value?j.value.validate():Promise.resolve(""),(L=C.value)==null?void 0:L.validate()]).catch(V=>Promise.reject({node:s.nodeModel,errMessage:V}))};return Ur(()=>{O(),Se.set(s.nodeModel,"validate",U)}),(L,V)=>{const $=Q("Plus"),H=Q("el-icon"),Y=Q("el-button"),z=Q("el-form-item"),W=Q("el-col"),B=Q("AppIcon"),q=Q("el-row"),J=Q("el-switch"),ce=Q("el-form"),re=Q("el-card");return _e(),Ke(go,{nodeModel:L.nodeModel},{default:R(()=>[k(re,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(ce,{onSubmit:V[4]||(V[4]=qt(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:C,"hide-required-asterisk":""},{default:R(()=>[k(z,{label:L.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:L.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:R(()=>[K("div",Sq,[K("span",null,[tt(me(L.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),V[5]||(V[5]=K("span",{class:"color-danger"},"*",-1))]),k(Y,{onClick:E,link:"",type:"primary"},{default:R(()=>[k(H,{class:"mr-4"},{default:R(()=>[k($)]),_:1})]),_:1})])]),default:R(()=>[(_e(!0),Yt(tr,null,Wr(S.value.reranker_reference_list,(Pe,ge)=>(_e(),Ke(q,{gutter:8,style:{"margin-bottom":"8px"},key:ge,class:"w-full"},{default:R(()=>[k(W,{span:22},{default:R(()=>[k(z,{prop:"reranker_reference_list."+ge,rules:{type:"array",required:!0,message:L.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:R(()=>[(_e(),Ke(Co,{key:ge,nodeModel:L.nodeModel,class:"w-full",placeholder:L.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:S.value.reranker_reference_list[ge],"onUpdate:modelValue":fe=>S.value.reranker_reference_list[ge]=fe},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),k(W,{span:2},{default:R(()=>[k(Y,{link:"",type:"info",onClick:fe=>g(ge)},{default:R(()=>[k(B,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),k(z,{label:L.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:R(()=>[K("div",xq,[K("span",null,me(L.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")),1),k(Y,{type:"primary",link:"",onClick:_},{default:R(()=>[k(B,{iconName:"app-setting"})]),_:1})])]),default:R(()=>[K("div",Aq,[k(q,null,{default:R(()=>[k(W,{span:12,class:"color-secondary lighter"},{default:R(()=>[tt(" Score "+me(L.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),k(W,{span:12,class:"lighter"},{default:R(()=>{var Pe;return[tt(me((Pe=S.value.reranker_setting.similarity)==null?void 0:Pe.toFixed(3)),1)]}),_:1}),k(W,{span:12,class:"color-secondary lighter"},{default:R(()=>[tt(me(L.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),k(W,{span:12,class:"lighter"},{default:R(()=>[tt(me(S.value.reranker_setting.topN),1)]),_:1}),k(W,{span:12,class:"color-secondary lighter"},{default:R(()=>[tt(me(L.$t("views.applicationWorkflow.nodes.rerankerNode.maxParagraphCharNumber")),1)]),_:1}),k(W,{span:12,class:"lighter"},{default:R(()=>[tt(me(S.value.reranker_setting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),k(z,{label:L.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:L.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:R(()=>[K("div",Tq,[K("span",null,[tt(me(L.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label")),1),V[6]||(V[6]=K("span",{class:"color-danger"},"*",-1))])])]),default:R(()=>[k(Co,{ref_key:"nodeCascaderRef",ref:j,nodeModel:L.nodeModel,class:"w-full",placeholder:L.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),modelValue:S.value.questionReferenceAddress,"onUpdate:modelValue":V[0]||(V[0]=Pe=>S.value.questionReferenceAddress=Pe)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(z,{label:L.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:L.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:R(()=>[K("div",Mq,[K("span",null,[tt(me(L.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label")),1),V[7]||(V[7]=K("span",{class:"color-danger"},"*",-1))])])]),default:R(()=>[k(Su,{onWheel:b,teleported:!1,modelValue:S.value.reranker_model_id,"onUpdate:modelValue":V[1]||(V[1]=Pe=>S.value.reranker_model_id=Pe),placeholder:L.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),options:d.value,onSubmitModel:O,showFooter:"","model-type":"RERANKER"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(z,{onClick:V[3]||(V[3]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",kq,[K("div",null,[K("span",null,me(L.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.label")),1)]),K("div",null,[k(J,{size:"small",modelValue:S.value.showKnowledge,"onUpdate:modelValue":V[2]||(V[2]=Pe=>S.value.showKnowledge=Pe)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1}),k(Oq,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:T},null,512)]),_:1},8,["nodeModel"])}}}),Pq=rh(Nq,[["__scopeId","data-v-aa940603"]]);class Rq extends _o{constructor(t){super(t,Pq)}}const Cq={type:"reranker-node",model:bo,view:Rq},Dq=Object.freeze(Object.defineProperty({__proto__:null,default:Cq},Symbol.toStringTag,{value:"Module"})),jq={class:"title-decoration-1 mb-8"},Iq={class:"flex-between"},Lq={class:"w-full"},$q={class:"flex align-center",style:{"line-height":"20px"}},Fq=["title"],Bq={class:"flex-between"},Uq={class:"w-full"},Vq={class:"flex-between"},Gq=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=je(),a={knowledgeIdList:[],knowledgeSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding"},questionReferenceAddress:[],showKnowledge:!1},r=Gn({get:()=>(t.nodeModel.properties.nodeData||Se.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:E=>{Se.set(t.nodeModel.properties,"nodeData",E)}}),s=je(),c=je(),p=je(),d=je([]),_=je(!1);function g(E){Se.set(t.nodeModel.properties.nodeData,"knowledgeSetting",E.knowledgeSetting)}const b=()=>{var E;(E=c.value)==null||E.open(r.value,"WORK_FLOW")};function S(E){const C=t.nodeModel.properties.nodeData.knowledgeIdList.filter(j=>j!==E);Se.set(t.nodeModel.properties.nodeData,"knowledgeIdList",C)}function T(E){Se.set(t.nodeModel.properties.nodeData,"knowledgeIdList",E.map(C=>C.id)),d.value=E}function A(){p.value&&p.value.open(r.value.knowledgeIdList)}const O=()=>{var E;return Promise.all([n.value.validate(),(E=s.value)==null?void 0:E.validate()]).catch(C=>Promise.reject({node:t.nodeModel,errMessage:C}))};return Ur(()=>{d.value=t.nodeModel.properties.nodeData.knowledgeList,Se.set(t.nodeModel,"validate",O)}),(E,C)=>{const j=Q("Plus"),U=Q("el-icon"),L=Q("el-button"),V=Q("el-text"),$=Q("Close"),H=Q("el-form-item"),Y=Q("el-col"),z=Q("el-row"),W=Q("el-switch"),B=Q("el-form"),q=Q("el-card");return _e(),Ke(go,{nodeModel:E.nodeModel},{default:R(()=>[K("h5",jq,me(E.$t("views.applicationWorkflow.nodeSetting")),1),k(q,{shadow:"never",class:"card-never"},{default:R(()=>[k(B,{onSubmit:C[3]||(C[3]=qt(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"knowledgeNodeFormRef",ref:s},{default:R(()=>[k(H,{label:E.$t("views.chatLog.selectKnowledge")},{label:R(()=>[K("div",Iq,[K("span",null,me(E.$t("views.chatLog.selectKnowledge")),1),k(L,{type:"primary",link:"",onClick:A},{default:R(()=>[k(U,null,{default:R(()=>[k(j)]),_:1})]),_:1})])]),default:R(()=>{var J;return[K("div",Lq,[((J=r.value.knowledgeIdList)==null?void 0:J.length)===0?(_e(),Ke(V,{key:0,type:"info"},{default:R(()=>[tt(me(E.$t("views.application.form.relatedKnowledge.placeholder")),1)]),_:1})):(_e(!0),Yt(tr,{key:1},Wr(r.value.knowledgeIdList,(ce,re)=>{var Pe,ge,fe;return _e(),Yt("div",{key:re,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[K("div",$q,[k(o8,{type:(Pe=Zt($d)(d.value,ce,"id"))==null?void 0:Pe.type,class:"mr-8",size:20},null,8,["type"]),K("div",{class:"ellipsis",title:(ge=Zt($d)(d.value,ce,"id"))==null?void 0:ge.name},me((fe=Zt($d)(d.value,ce,"id"))==null?void 0:fe.name),9,Fq)]),k(L,{text:"",onClick:Ee=>S(ce)},{default:R(()=>[k(U,null,{default:R(()=>[k($)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),k(H,{label:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:R(()=>[K("div",Bq,[K("span",null,me(E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")),1),k(L,{type:"primary",link:"",onClick:b},{default:R(()=>[k(Ar,{iconName:"app-setting"})]),_:1})])]),default:R(()=>[K("div",Uq,[k(z,null,{default:R(()=>[k(Y,{span:12,class:"color-secondary lighter"},{default:R(()=>[tt(me(E.$t("views.application.dialog.selectSearchMode")),1)]),_:1}),k(Y,{span:12,class:"lighter"},{default:R(()=>[tt(me(E.$t(Zt(i8)[r.value.knowledgeSetting.searchMode])),1)]),_:1}),k(Y,{span:12,class:"color-secondary lighter"},{default:R(()=>[tt(me(E.$t("views.application.dialog.similarityThreshold")),1)]),_:1}),k(Y,{span:12,class:"lighter"},{default:R(()=>{var J;return[tt(me((J=r.value.knowledgeSetting.similarity)==null?void 0:J.toFixed(3)),1)]}),_:1}),k(Y,{span:12,class:"color-secondary lighter"},{default:R(()=>[tt(me(E.$t("views.application.dialog.topReferences")),1)]),_:1}),k(Y,{span:12,class:"lighter"},{default:R(()=>[tt(me(r.value.knowledgeSetting.topN),1)]),_:1}),k(Y,{span:12,class:"color-secondary lighter"},{default:R(()=>[tt(me(E.$t("views.application.dialog.maxCharacters")),1)]),_:1}),k(Y,{span:12,class:"lighter"},{default:R(()=>[tt(me(r.value.knowledgeSetting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),k(H,{label:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:R(()=>[k(Co,{ref_key:"nodeCascaderRef",ref:n,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:r.value.questionReferenceAddress,"onUpdate:modelValue":C[0]||(C[0]=J=>r.value.questionReferenceAddress=J)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(H,{onClick:C[2]||(C[2]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",Vq,[K("div",null,[K("span",null,me(E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.label")),1)]),K("div",null,[k(W,{size:"small",modelValue:r.value.showKnowledge,"onUpdate:modelValue":C[1]||(C[1]=J=>r.value.showKnowledge=J)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1}),k(v8,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:g},null,512),k(m8,{ref_key:"AddKnowledgeDialogRef",ref:p,onAddData:T,data:d.value,loading:_.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class zq extends _o{constructor(t){super(t,Gq)}}const Wq={type:"search-knowledge-node",model:bo,view:zq},Hq=Object.freeze(Object.defineProperty({__proto__:null,default:Wq},Symbol.toStringTag,{value:"Module"})),Xq={class:"flex-between"},qq={class:"dialog-footer"},Yq=$n({__name:"STTModelParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=Zi(),{params:{id:r}}=a,s=Gn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=je(!1),p=je({}),d=je(),_=je(""),g=je(!1),b=je([]),S=n,T=(E,C,j)=>{p.value={},_.value=E,si({type:"model",systemType:s.value}).getModelParamsForm(E,g).then(U=>{var V;b.value=U.data;const L=U.data.map($=>({[$.field]:$.show_default_value!==!1?$.default_value:void 0})).reduce(($,H)=>({...$,...H}),{});j&&Object.keys(j).forEach($=>{$ in L||delete j[$]}),j={...L,...j},(V=d.value)==null||V.render(b.value,j)}),c.value=!0},A=async()=>{var E;(E=d.value)==null||E.validate().then(()=>{S("refresh",p.value),c.value=!1})};return t({open:T,reset_default:(E,C)=>{si({type:"model",systemType:s.value}).getModelParamsForm(E,g).then(j=>{b.value=j.data;const U=j.data.map(L=>({[L.field]:L.show_default_value!==!1?L.default_value:void 0})).reduce((L,V)=>({...L,...V}),{});S("refresh",U)})}}),(E,C)=>{const j=Q("el-button"),U=Q("el-dialog");return _e(),Ke(U,{"align-center":"",title:E.$t("common.paramSetting"),modelValue:c.value,"onUpdate:modelValue":C[2]||(C[2]=L=>c.value=L),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:R(()=>[K("div",Xq,[K("span",qq,[k(j,{onClick:C[1]||(C[1]=qt(L=>c.value=!1,["prevent"]))},{default:R(()=>[tt(me(E.$t("common.cancel")),1)]),_:1}),k(j,{type:"primary",onClick:A,loading:g.value},{default:R(()=>[tt(me(E.$t("common.confirm")),1)]),_:1},8,["loading"])])])]),default:R(()=>[k(a8,{modelValue:p.value,"onUpdate:modelValue":C[0]||(C[0]=L=>p.value=L),model:p.value,"label-position":"top","require-asterisk-position":"right",render_data:b.value,ref_key:"dynamicsFormRef",ref:d},null,8,["modelValue","model","render_data"])]),_:1},8,["title","modelValue"])}}}),Kq={class:"title-decoration-1 mb-8"},Zq={class:"flex-between w-full"},Jq={class:"flex-between w-full"},Qq={class:"flex-between w-full"},eY={class:"flex align-center"},tY={class:"mr-4"},nY={class:"flex"},rY=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("workflowMode")||xr.Application,n=Uo("getResourceDetail"),a=Zi(),{params:{id:r}}=a,s=Gn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=e,p=je(null),d=je(),_=je(),g=je(),b=()=>{var L;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(L=_.value)==null?void 0:L.validate()]).catch(V=>Promise.reject({node:c.nodeModel,errMessage:V}))},S=L=>L.ctrlKey===!0?(L.preventDefault(),!0):(L.stopPropagation(),!0),T={stt_model_id:"",isResult:!0,audioList:[],modelParamsSetting:{}},A=Gn({get:()=>(c.nodeModel.properties.nodeData||Se.set(c.nodeModel.properties,"nodeData",T),c.nodeModel.properties.nodeData),set:L=>{Se.set(c.nodeModel.properties,"nodeData",L)}}),O=()=>{var V;const L=A.value.stt_model_id;if(!L){Jm(_t("views.application.form.voiceInput.requiredMessage"));return}(V=d.value)==null||V.open(L,r,A.value.modelParamsSetting)},E=L=>{Se.set(c.nodeModel.properties.nodeData,"modelParamsSetting",L)};function C(L){var V;L?(V=d.value)==null||V.reset_default(L,r):E({})}const j=n();function U(){var V;const L=s.value==="systemManage"?{modelType:"STT",workspace_id:(V=j.value)==null?void 0:V.workspace_id}:{modelType:"STT"};si({type:"model",systemType:s.value}).getSelectModelList(L).then($=>{p.value=Se.groupBy($==null?void 0:$.data,"provider")})}return Ur(()=>{U(),Se.set(c.nodeModel,"validate",b)}),(L,V)=>{const $=Q("el-button"),H=Q("el-form-item"),Y=Q("el-tooltip"),z=Q("el-switch"),W=Q("el-form"),B=Q("el-card");return _e(),Ke(go,{"node-model":L.nodeModel},{default:R(()=>[K("h5",Kq,me(L.$t("views.applicationWorkflow.nodeSetting")),1),k(B,{shadow:"never",class:"card-never"},{default:R(()=>[k(W,{onSubmit:V[4]||(V[4]=qt(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:_,"hide-required-asterisk":""},{default:R(()=>[k(H,{label:L.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label"),prop:"stt_model_id",rules:{required:!0,message:L.$t("views.application.form.voiceInput.placeholder"),trigger:"change"}},{label:R(()=>[K("div",Zq,[K("div",null,[K("span",null,[tt(me(L.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),V[5]||(V[5]=K("span",{class:"color-danger"},"*",-1))])]),k($,{type:"primary",link:"",onClick:O,disabled:!A.value.stt_model_id,class:"mr-4"},{default:R(()=>[k(Ar,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(Su,{onWheel:S,teleported:!1,onChange:C,modelValue:A.value.stt_model_id,"onUpdate:modelValue":V[0]||(V[0]=q=>A.value.stt_model_id=q),placeholder:L.$t("views.application.form.voiceInput.placeholder"),options:p.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(H,{label:L.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:L.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:R(()=>[K("div",Jq,[K("div",null,[K("span",null,[tt(me(L.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),V[6]||(V[6]=K("span",{class:"color-danger"},"*",-1))])])])]),default:R(()=>[k(Co,{ref_key:"nodeCascaderRef",ref:g,nodeModel:L.nodeModel,class:"w-full",placeholder:L.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:A.value.audioList,"onUpdate:modelValue":V[1]||(V[1]=q=>A.value.audioList=q)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),[Zt(xr).Application,Zt(xr).ApplicationLoop].includes(Zt(t))?(_e(),Ke(H,{key:0,label:L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:V[3]||(V[3]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",Qq,[K("div",eY,[K("div",tY,[K("span",null,me(L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(Y,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",nY,[k(z,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":V[2]||(V[2]=q=>A.value.isResult=q)},null,8,["modelValue"])])])]),_:1},8,["label"])):cn("",!0)]),_:1},8,["model"])]),_:1}),k(Yq,{ref_key:"STTModeParamSettingDialogRef",ref:d,onRefresh:E},null,512)]),_:1},8,["node-model"])}}});class oY extends _o{constructor(t){super(t,rY)}}const iY={type:"speech-to-text-node",model:bo,view:oY},aY=Object.freeze(Object.defineProperty({__proto__:null,default:iY},Symbol.toStringTag,{value:"Module"})),lY={class:"title-decoration-1 mb-8"},sY={class:"break-all"},uY={class:"title-decoration-1 mb-8"},cY={class:"break-all"},fY=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=je(!1),a=[{label:_t("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:_t("views.application.form.historyRecord.label"),value:"historyContext"},{label:_t("chat.chatId"),value:"chatId"},{label:_t("chat.chatUserId"),value:"chatUserId"},{label:_t("chat.chatUserType"),value:"chatUserType"},{label:_t("chat.chatUser"),value:"chatUser"}],r=()=>{const d=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>Se.cloneDeep(g.properties.user_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>g.label&&g.label.input_type==="TooltipLabel"?{label:g.label.label,value:g.field||g.variable}:{label:g.label||g.name,value:g.field||g.variable}),_=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>Se.cloneDeep(g.properties.api_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>({label:g.name||g.variable,value:g.variable}));return[...d,..._]},s=()=>{const d=r();Se.set(t.nodeModel.properties.config,"globalFields",[...a,...d])},c=()=>{const d=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").map(_=>Se.cloneDeep(_.properties.chat_input_field_list)).reduce((_,g)=>[..._,...g],[]).map(_=>({label:_.label,value:_.field}));Se.set(t.nodeModel.properties.config,"chatFields",d)};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",s),t.nodeModel.graphModel.eventCenter.on("chatFieldList",c);const p=()=>{let d=Se.cloneDeep(t.nodeModel.properties.config.fields);const _=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").filter(b=>b.properties.nodeData.fileUploadEnable).map(b=>Se.cloneDeep(b.properties.nodeData.fileUploadSetting)).filter(b=>b);if(d=d.filter(b=>b.value!=="image"&&b.value!=="document"&&b.value!=="audio"&&b.value!=="video"&&b.value!=="other"),_.length===0){Se.set(t.nodeModel.properties.config,"fields",d);return}const g=[];_[0].document&&g.push({label:_t("common.fileUpload.document"),value:"document"}),_[0].image&&g.push({label:_t("common.fileUpload.image"),value:"image"}),_[0].audio&&g.push({label:_t("common.fileUpload.audio"),value:"audio"}),_[0].video&&g.push({label:_t("common.fileUpload.video"),value:"video"}),_[0].other&&g.push({label:_t("common.fileUpload.other"),value:"other"}),Se.set(t.nodeModel.properties.config,"fields",[...d,...g])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",p),Ur(()=>{c(),s(),p()}),(d,_)=>{const g=Q("el-button"),b=Q("el-tooltip");return _e(),Ke(go,{nodeModel:d.nodeModel},{default:R(()=>[K("h5",lY,me(d.$t("views.applicationWorkflow.variable.global")),1),(_e(!0),Yt(tr,null,Wr(d.nodeModel.properties.config.globalFields,(S,T)=>(_e(),Yt("div",{key:T,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:_[0]||(_[0]=A=>n.value=!0),onMouseleave:_[1]||(_[1]=A=>n.value=!1)},[K("span",sY,me(S.label)+" "+me("{"+S.value+"}"),1),n.value===!0?(_e(),Ke(b,{key:0,effect:"dark",content:d.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:R(()=>[k(g,{link:"",onClick:A=>Zt(kg)(`{{global.${S.value}}}`),style:{padding:"0"}},{default:R(()=>[k(Ar,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):cn("",!0)],32))),128)),d.nodeModel.properties.config.chatFields?(_e(),Yt(tr,{key:0},[K("h5",uY,me(d.$t("views.applicationWorkflow.variable.chat")),1),(_e(!0),Yt(tr,null,Wr(d.nodeModel.properties.config.chatFields?d.nodeModel.properties.config.chatFields:[],(S,T)=>(_e(),Yt("div",{key:T,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:_[2]||(_[2]=A=>n.value=!0),onMouseleave:_[3]||(_[3]=A=>n.value=!1)},[K("span",cY,me(S.label)+" "+me("{"+S.value+"}"),1),n.value===!0?(_e(),Ke(b,{key:0,effect:"dark",content:d.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:R(()=>[k(g,{link:"",onClick:A=>Zt(kg)(`{{chat.${S.value}}}`),style:{padding:"0"}},{default:R(()=>[k(Ar,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):cn("",!0)],32))),128))],64)):cn("",!0)]),_:1},8,["nodeModel"])}}});class dY extends _o{constructor(t){super(t,fY)}}const pY={type:"start-node",model:bo,view:dY},hY=Object.freeze(Object.defineProperty({__proto__:null,default:pY},Symbol.toStringTag,{value:"Module"})),vY={class:"title-decoration-1 mb-8"},mY={class:"flex-between w-full"},yY={class:"flex-between w-full"},gY={class:"flex-between w-full"},_Y={class:"flex align-center"},bY={class:"mr-4"},wY={class:"flex"},EY=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("workflowMode")||xr.Application,n=Uo("getResourceDetail"),a=Zi(),{params:{id:r}}=a,s=Gn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=e,p=je(),d=je(null),_=je(),g=je(),b=()=>{var U;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(U=_.value)==null?void 0:U.validate()]).catch(L=>Promise.reject({node:c.nodeModel,errMessage:L}))},S=U=>U.ctrlKey===!0?(U.preventDefault(),!0):(U.stopPropagation(),!0),T={ttsModelId:"",isResult:!0,content_list:[],modelParamsSetting:{}},A=Gn({get:()=>(c.nodeModel.properties.nodeData||Se.set(c.nodeModel.properties,"nodeData",T),c.nodeModel.properties.nodeData),set:U=>{Se.set(c.nodeModel.properties,"nodeData",U)}}),O=n();function E(){var L;const U=s.value==="systemManage"?{modelType:"TTS",workspaceId:(L=O.value)==null?void 0:L.workspaceId}:{modelType:"TTS"};si({type:"model",systemType:s.value}).getSelectModelList(U).then(V=>{d.value=Se.groupBy(V==null?void 0:V.data,"provider")})}const C=()=>{var L;const U=A.value.ttsModelId;if(!U){Jm(_t("views.application.form.voicePlay.requiredMessage"));return}(L=p.value)==null||L.open(U,r,A.value.modelParamsSetting)},j=U=>{A.value.modelParamsSetting=U};return Ur(()=>{E(),Se.set(c.nodeModel,"validate",b)}),(U,L)=>{const V=Q("el-button"),$=Q("el-form-item"),H=Q("el-tooltip"),Y=Q("el-switch"),z=Q("el-form"),W=Q("el-card");return _e(),Ke(go,{"node-model":U.nodeModel},{default:R(()=>[K("h5",vY,me(U.$t("views.applicationWorkflow.nodeSetting")),1),k(W,{shadow:"never",class:"card-never"},{default:R(()=>[k(z,{onSubmit:L[4]||(L[4]=qt(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:_,"hide-required-asterisk":""},{default:R(()=>[k($,{label:U.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label"),prop:"ttsModelId",rules:{required:!0,message:U.$t("views.application.form.voicePlay.placeholder"),trigger:"change"}},{label:R(()=>[K("div",mY,[K("div",null,[K("span",null,[tt(me(U.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),L[5]||(L[5]=K("span",{class:"color-danger"},"*",-1))])]),k(V,{type:"primary",link:"",onClick:C,disabled:!A.value.ttsModelId,class:"mr-4"},{default:R(()=>[k(Ar,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(Su,{onWheel:S,teleported:!1,modelValue:A.value.ttsModelId,"onUpdate:modelValue":L[0]||(L[0]=B=>A.value.ttsModelId=B),placeholder:U.$t("views.application.form.voicePlay.placeholder"),options:d.value,showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k($,{prop:"content_list",label:U.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:U.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:R(()=>[K("div",yY,[K("div",null,[K("span",null,[tt(me(U.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),L[6]||(L[6]=K("span",{class:"color-danger"},"*",-1))])])])]),default:R(()=>[k(Co,{ref_key:"nodeCascaderRef",ref:g,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:A.value.content_list,"onUpdate:modelValue":L[1]||(L[1]=B=>A.value.content_list=B)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),[Zt(xr).Application,Zt(xr).ApplicationLoop].includes(Zt(t))?(_e(),Ke($,{key:0,label:U.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:L[3]||(L[3]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",gY,[K("div",_Y,[K("div",bY,[K("span",null,me(U.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(H,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(U.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",wY,[k(Y,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":L[2]||(L[2]=B=>A.value.isResult=B)},null,8,["modelValue"])])])]),_:1},8,["label"])):cn("",!0)]),_:1},8,["model"])]),_:1}),k(nM,{ref_key:"TTSModeParamSettingDialogRef",ref:p,onRefresh:j},null,512)]),_:1},8,["node-model"])}}});class OY extends _o{constructor(t){super(t,EY)}}const SY={type:"text-to-speech-node",model:bo,view:OY},xY=Object.freeze(Object.defineProperty({__proto__:null,default:SY},Symbol.toStringTag,{value:"Module"})),AY={class:"title-decoration-1 mb-16"},TY={class:"lighter mb-8"},MY={key:0},kY={class:"flex-between"},NY={class:"flex"},PY={class:"flex"},RY={key:0,class:"color-danger"},CY={class:"flex-between w-full"},DY={class:"flex align-center"},jY={class:"mr-4"},IY={class:"flex"},LY=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("workflowMode")||xr.Application,n=e,a=Zi(),r=Gn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),s=je(),c={inputFieldList:[],isResult:!1},p=Gn({get:()=>(n.nodeModel.properties.nodeData||Se.set(n.nodeModel.properties,"nodeData",c),n.nodeModel.properties.nodeData),set:b=>{Se.set(n.nodeModel.properties,"nodeData",b)}}),d=je(),_=()=>{var b;return(b=d.value)==null?void 0:b.validate().catch(S=>Promise.reject({node:n.nodeModel,errMessage:S}))},g=()=>{if(!n.nodeModel.properties.nodeData.toolLibId){Se.set(n.nodeModel.properties,"status",500);return}si({type:"tool",systemType:r.value}).getToolById(n.nodeModel.properties.nodeData.toolLibId).then(b=>{const S=n.nodeModel.properties.nodeData.inputFieldList,T=b.data.inputFieldList.map(A=>{const O=S.find(E=>E.name==A.name);return O&&O.source==A.source?{...A,value:JSON.parse(JSON.stringify(O.value))}:{...A,value:A.source=="reference"?[]:""}});Se.set(n.nodeModel.properties.nodeData,"inputFieldList",T),Se.set(n.nodeModel.properties,"status",b.data.isActive?200:500)}).catch(()=>{Se.set(n.nodeModel.properties,"status",500)})};return Ur(()=>{var b;typeof((b=n.nodeModel.properties.nodeData)==null?void 0:b.isResult)>"u"&&Tu(n.nodeModel)&&Se.set(n.nodeModel.properties.nodeData,"isResult",!0),g(),Se.set(n.nodeModel,"validate",_)}),(b,S)=>{const T=Q("el-tag"),A=Q("el-option"),O=Q("el-select"),E=Q("el-input"),C=Q("el-form-item"),j=Q("el-text"),U=Q("el-card"),L=Q("el-tooltip"),V=Q("el-switch"),$=Q("el-form");return _e(),Ke(go,{nodeModel:b.nodeModel},{default:R(()=>[K("h5",AY,me(b.$t("views.applicationWorkflow.nodeSetting")),1),K("h5",TY,me(b.$t("common.param.inputParam")),1),k($,{onSubmit:S[2]||(S[2]=qt(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:d,model:p.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:R(()=>[k(U,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:R(()=>{var H;return[((H=p.value.inputFieldList)==null?void 0:H.length)>0?(_e(),Yt("div",MY,[(_e(!0),Yt(tr,null,Wr(p.value.inputFieldList,(Y,z)=>(_e(),Ke(C,{key:Y.name,label:Y.name,prop:"inputFieldList."+z+".value",rules:{required:Y.isRequired,message:Y.source==="reference"?b.$t("views.tool.form.param.selectPlaceholder"):b.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:R(()=>[K("div",kY,[K("div",NY,[K("span",PY,[k(l8,{content:Y.name,style:{"max-width":"130px"}},{default:R(()=>[tt(me(Y.name),1)]),_:2},1032,["content"]),Y.isRequired?(_e(),Yt("span",RY,"*")):cn("",!0)]),k(T,{type:"info",class:"info-tag ml-4"},{default:R(()=>[tt(me(Y.type),1)]),_:2},1024)]),k(O,{teleported:!1,modelValue:Y.source,"onUpdate:modelValue":W=>Y.source=W,size:"small",style:{width:"85px"}},{default:R(()=>[k(A,{label:b.$t("common.reference"),value:"reference"},null,8,["label"]),k(A,{label:b.$t("common.custom"),value:"content"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:R(()=>[Y.source==="reference"?(_e(),Ke(Co,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:s,nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.tool.form.param.selectPlaceholder"),modelValue:Y.value,"onUpdate:modelValue":W=>Y.value=W},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(_e(),Ke(E,{key:1,modelValue:Y.value,"onUpdate:modelValue":W=>Y.value=W,placeholder:b.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(_e(),Ke(j,{key:1,type:"info"},{default:R(()=>[tt(me(b.$t("common.noData")),1)]),_:1}))]}),_:1}),[Zt(xr).Application,Zt(xr).ApplicationLoop].includes(Zt(t))?(_e(),Ke(C,{key:0,label:b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:S[1]||(S[1]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",CY,[K("div",DY,[K("div",jY,[K("span",null,me(b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(L,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",IY,[k(V,{size:"small",modelValue:p.value.isResult,"onUpdate:modelValue":S[0]||(S[0]=H=>p.value.isResult=H)},null,8,["modelValue"])])])]),_:1},8,["label"])):cn("",!0)]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class $Y extends _o{constructor(t){super(t,LY)}}const FY={type:"tool-lib-node",model:bo,view:$Y},BY=Object.freeze(Object.defineProperty({__proto__:null,default:FY},Symbol.toStringTag,{value:"Module"})),UY={class:"title-decoration-1 mb-16"},VY={class:"flex-between"},GY={class:"lighter mb-8"},zY={key:0},WY={class:"flex-between"},HY={class:"flex"},XY={class:"flex"},qY={key:0,class:"color-danger"},YY={class:"lighter mb-8"},KY={key:0,class:"mb-8"},ZY={class:"flex-between w-full"},JY={class:"flex align-center"},QY={class:"mr-4"},eK={class:"flex"},tK=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=Uo("workflowMode")||xr.Application,n=e,a=E=>E.ctrlKey===!0?(E.preventDefault(),!0):(E.stopPropagation(),!0),r=je(),s=je(),c={code:"",inputFieldList:[],isResult:!1},p=je(null),d=je(!1),_=Gn({get:()=>(n.nodeModel.properties.nodeData||Se.set(n.nodeModel.properties,"nodeData",c),n.nodeModel.properties.nodeData),set:E=>{Se.set(n.nodeModel.properties,"nodeData",E)}}),g=je(),b=()=>{var E;return(E=g.value)==null?void 0:E.validate().catch(C=>Promise.reject({node:n.nodeModel,errMessage:C}))};function S(E){Se.set(n.nodeModel.properties.nodeData,"code",E)}function T(E,C){typeof C<"u"&&(p.value=C),r.value.open(E)}function A(E){const C=Se.cloneDeep(n.nodeModel.properties.nodeData.inputFieldList);C.splice(E,1),Se.set(n.nodeModel.properties.nodeData,"inputFieldList",C)}function O(E){const C=Se.cloneDeep(n.nodeModel.properties.nodeData.inputFieldList),j={...E,value:E.source==="reference"?[]:""};p.value!==null?C.splice(p.value,1,j):C.push(j),Se.set(n.nodeModel.properties.nodeData,"inputFieldList",C),p.value=null}return Ur(()=>{var E;typeof((E=n.nodeModel.properties.nodeData)==null?void 0:E.isResult)>"u"&&Tu(n.nodeModel)&&Se.set(n.nodeModel.properties.nodeData,"isResult",!0),Se.set(n.nodeModel,"validate",b),setTimeout(()=>{d.value=!0},100)}),(E,C)=>{const j=Q("Plus"),U=Q("el-icon"),L=Q("el-button"),V=Q("auto-tooltip"),$=Q("el-tag"),H=Q("el-input"),Y=Q("el-form-item"),z=Q("el-text"),W=Q("el-card"),B=Q("el-tooltip"),q=Q("el-switch"),J=Q("el-form");return _e(),Ke(go,{nodeModel:E.nodeModel},{default:R(()=>[K("h5",UY,me(E.$t("views.applicationWorkflow.nodeSetting")),1),K("div",VY,[K("h5",GY,me(E.$t("common.param.inputParam")),1),k(L,{link:"",type:"primary",onClick:C[0]||(C[0]=ce=>T())},{default:R(()=>[k(U,{class:"mr-4"},{default:R(()=>[k(j)]),_:1}),tt(" "+me(E.$t("common.add")),1)]),_:1})]),k(J,{onSubmit:C[4]||(C[4]=qt(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:g,model:_.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:R(()=>[k(W,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:R(()=>{var ce;return[((ce=_.value.inputFieldList)==null?void 0:ce.length)>0?(_e(),Yt("div",zY,[(_e(!0),Yt(tr,null,Wr(_.value.inputFieldList,(re,Pe)=>(_e(),Ke(Y,{key:Pe,label:re.name,prop:"inputFieldList."+Pe+".value",rules:{required:re.isRequired,message:re.source==="reference"?E.$t("views.tool.form.param.selectPlaceholder"):E.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:R(()=>[K("div",WY,[K("div",HY,[K("span",XY,[k(V,{content:re.name,style:{"max-width":"130px"}},{default:R(()=>[tt(me(re.name),1)]),_:2},1032,["content"]),re.isRequired?(_e(),Yt("span",qY,"*")):cn("",!0)]),k($,{type:"info",class:"info-tag ml-4"},{default:R(()=>[tt(me(re.type),1)]),_:2},1024)]),K("div",null,[k(L,{text:"",onClick:qt(ge=>T(re,Pe),["stop"])},{default:R(()=>[k(Ar,{iconName:"app-edit"})]),_:2},1032,["onClick"]),k(L,{text:"",onClick:ge=>A(Pe),style:{"margin-left":"4px !important"}},{default:R(()=>[k(Ar,{iconName:"app-delete"})]),_:2},1032,["onClick"])])])]),default:R(()=>[re.source==="reference"?(_e(),Ke(Co,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:s,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("views.tool.form.param.selectPlaceholder"),modelValue:re.value,"onUpdate:modelValue":ge=>re.value=ge,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(_e(),Ke(H,{key:1,modelValue:re.value,"onUpdate:modelValue":ge=>re.value=ge,placeholder:E.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(_e(),Ke(z,{key:1,type:"info"},{default:R(()=>[tt(me(E.$t("common.noData")),1)]),_:1}))]}),_:1}),K("h5",YY,me(E.$t("views.tool.form.param.code")),1),d.value?(_e(),Yt("div",KY,[k(s8,{title:E.$t("views.tool.form.param.code"),modelValue:_.value.code,"onUpdate:modelValue":C[1]||(C[1]=ce=>_.value.code=ce),onWheel:a,style:{height:"130px !important"},onSubmitDialog:S},null,8,["title","modelValue"])])):cn("",!0),[Zt(xr).Application,Zt(xr).ApplicationLoop].includes(Zt(t))?(_e(),Ke(Y,{key:1,label:E.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:C[3]||(C[3]=qt(()=>{},["prevent"]))},{label:R(()=>[K("div",ZY,[K("div",JY,[K("div",QY,[K("span",null,me(E.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(B,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[tt(me(E.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Ar,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",eK,[k(q,{size:"small",modelValue:_.value.isResult,"onUpdate:modelValue":C[2]||(C[2]=ce=>_.value.isResult=ce)},null,8,["modelValue"])])])]),_:1},8,["label"])):cn("",!0)]),_:1},8,["model"]),k(iI,{ref_key:"FieldFormDialogRef",ref:r,onRefresh:O},null,512)]),_:1},8,["nodeModel"])}}});class nK extends _o{constructor(t){super(t,tK)}}const rK={type:"tool-node",model:bo,view:nK},oK=Object.freeze(Object.defineProperty({__proto__:null,default:rK},Symbol.toStringTag,{value:"Module"})),iK={class:"title-decoration-1 mb-8"},aK={class:"flex-between lighter"},lK={key:0,class:"mt-8"},sK=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={isResult:!0,labelName:"",branch:[{id:fl(),type:"选项 1",option:""}]},a=(g,b,S)=>{const A=Se.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(O=>O.id===b.id?{...O,height:g.height,index:S}:O);Se.set(t.nodeModel.properties,"branchConditionList",A),d(t.nodeModel.properties.nodeData.branch,!0)},r=Gn({get:()=>(t.nodeModel.properties.nodeData||(Se.set(t.nodeModel.properties,"nodeData",n),d(n.branch,!0)),t.nodeModel.properties.nodeData),set:g=>{Se.set(t.nodeModel.properties,"nodeData",g)}}),s=je();je();const c=()=>{var b;const g=[(b=s.value)==null?void 0:b.validate()];return Promise.all(g).catch(S=>Promise.reject({node:t.nodeModel,errMessage:S}))};function p(){const g=Se.cloneDeep(t.nodeModel.properties.nodeData.branch),b={type:"选项 "+(g.length+1),id:fl(),option:"选项 "+(g.length+1)};g.splice(g.length,0,b),d(g,!0),Se.set(t.nodeModel.properties.nodeData,"branch",g)}function d(g,b){const S=Se.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),T=g.map((A,O)=>{const E=S.find(C=>C.id===A.id);if(E)return{index:O,height:E.height,id:A.id};if(b)return{index:O,height:100,id:A.id}}).filter(A=>A);Se.set(t.nodeModel.properties,"branchConditionList",T),t.nodeModel.refreshBranch()}function _(g){const b=Se.cloneDeep(t.nodeModel.properties.nodeData.branch);if(b[g].conditions.length===0){const T=b.splice(g,1).map(A=>t.nodeModel.id+"_"+A.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(A=>T.includes(A.sourceAnchorId)).map(A=>A.id)),d(b,!1),b.forEach((A,O)=>{A.type="选项 "+(O+1)})}Se.set(t.nodeModel.properties.nodeData,"branch",b)}return Ur(()=>{Se.set(t.nodeModel,"validate",c)}),(g,b)=>{const S=Q("el-form-item"),T=Q("el-input"),A=Q("el-col"),O=Q("Delete"),E=Q("el-icon"),C=Q("el-button"),j=Q("el-row"),U=Q("el-card"),L=Q("Plus"),V=Q("el-form"),$=Zm("resize");return _e(),Ke(go,{nodeModel:g.nodeModel},{default:R(()=>[K("h5",iK,me(g.$t("views.applicationWorkflow.nodeSetting")),1),k(U,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(V,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"UserSelectNodeFormRef",ref:s,onSubmit:b[1]||(b[1]=qt(()=>{},["prevent"]))},{default:R(()=>[k(S,{label:g.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},{default:R(()=>[k(is,{title:g.$t("views.applicationWorkflow.nodes.userSelectNode.caption"),modelValue:r.value.labelName,"onUpdate:modelValue":b[0]||(b[0]=H=>r.value.labelName=H),style:{height:"100px"},placeholder:g.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),(_e(!0),Yt(tr,null,Wr(r.value.branch,(H,Y)=>Wa((_e(),Ke(U,{key:H.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:R(()=>[K("div",aK,me(H.type),1),Y!==r.value.branch.length?(_e(),Yt("div",lK,[k(j,{gutter:8},{default:R(()=>[k(A,{span:23},{default:R(()=>[k(S,{prop:"branch."+Y+".option",rules:{required:!0,message:g.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage"),trigger:"blur"}},{default:R(()=>[k(T,{modelValue:H.option,"onUpdate:modelValue":z=>H.option=z,placeholder:g.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(A,{span:1},{default:R(()=>[k(C,{disabled:Y===0,link:"",type:"info",class:"mt-4",onClick:z=>_(Y)},{default:R(()=>[k(E,null,{default:R(()=>[k(O)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):cn("",!0)]),_:2},1024)),[[$,z=>a(z,H,Y)]])),128)),k(C,{link:"",type:"primary",onClick:p},{default:R(()=>[k(E,{class:"mr-4"},{default:R(()=>[k(L)]),_:1}),tt(" "+me(g.$t("views.applicationWorkflow.nodes.userSelectNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class uK extends _o{constructor(t){super(t,sK)}}const cK=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class fK extends bo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const p=this.properties.showNode===void 0?!0:this.properties.showNode,d=[];if(d.push({x:n-r/2+10,y:p?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let _=0;_<c.length;_++){const g=c[_],b=cK(c,_);d.push({x:n+r/2-10,y:p?a-s/2+275+b+g.height/2:a-15,id:`${t}_${g.id}_right`,type:"right"})}return d}}const dK={type:"user-select-node",model:fK,view:uK},pK=Object.freeze(Object.defineProperty({__proto__:null,default:dK},Symbol.toStringTag,{value:"Module"})),hK={class:"dialog-footer"},vK=$n({__name:"GroupFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=je(),s=je(!1),c=je(!1),p=je(null),d=je({field:"",label:""}),_=oh({label:[{required:!0,message:_t("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"}],field:[{required:!0,message:_t("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:_t("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=je(!1),b=(A,O)=>{A&&(d.value=Se.cloneDeep(A),c.value=!0,p.value=O),g.value=!0},S=()=>{g.value=!1,c.value=!1,p.value=null,d.value={field:"",label:""}},T=async A=>{A&&await A.validate(O=>{O&&a("refresh",d.value,p.value)})};return t({open:b,close:S}),(A,O)=>{const E=Q("el-input"),C=Q("el-form-item"),j=Q("el-form"),U=Q("el-button"),L=Q("el-dialog");return _e(),Ke(L,{title:c.value?A.$t("views.applicationWorkflow.nodes.variableAggregationNode.editGroup"):A.$t("views.applicationWorkflow.nodes.variableAggregationNode.addGroup"),modelValue:g.value,"onUpdate:modelValue":O[3]||(O[3]=V=>g.value=V),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":S,"append-to-body":""},{footer:R(()=>[K("span",hK,[k(U,{onClick:qt(S,["prevent"])},{default:R(()=>[tt(me(A.$t("common.cancel")),1)]),_:1}),k(U,{type:"primary",onClick:O[2]||(O[2]=V=>T(r.value)),loading:s.value},{default:R(()=>[tt(me(c.value?A.$t("common.save"):A.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:_,model:d.value,"require-asterisk-position":"right"},{default:R(()=>[k(C,{label:A.$t("common.variable"),required:!0,prop:"field",rules:_.field},{default:R(()=>[k(E,{modelValue:d.value.field,"onUpdate:modelValue":O[0]||(O[0]=V=>d.value.field=V),maxlength:64,placeholder:A.$t("views.applicationWorkflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(C,{label:A.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:_.label},{default:R(()=>[k(E,{modelValue:d.value.label,"onUpdate:modelValue":O[1]||(O[1]=V=>d.value.label=V),maxlength:64,"show-word-limit":"",placeholder:A.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),mK={class:"title-decoration-1 mb-8"},yK={class:"flex-between"},gK={class:"flex-between mb-12"},_K={class:"font-bold"},bK={class:"flex align-center",style:{"margin-right":"-3px"}},wK=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=je(),a=je(),r=je(),s={strategy:"first_non_null",groupList:[{id:fl(),label:"Group1",field:"Group1",variableList:[{v_id:fl(),variable:[]}]}]},c=Gn({get:()=>(t.nodeModel.properties.nodeData||Se.set(t.nodeModel.properties,"nodeData",s),t.nodeModel.properties.nodeData),set:E=>{Se.set(t.nodeModel.properties,"nodeData",E)}}),p=je([]);function d(E,C){let j=null;E&&C!==void 0&&(j={field:E.field,label:E.label}),r.value.open(j,C)}function _(E,C){for(let U=0;U<p.value.length;U++)if(p.value[U].field===E.field&&C!==U){za(_t("views.applicationWorkflow.tip.paramErrorMessage")+E.field);return}[void 0,null].includes(C)?(p.value.push(E),A(E)):(p.value.splice(C,1,E),g(E,C)),r.value.close();const j=[...p.value.map(U=>({label:U.label,value:U.field}))];Se.set(t.nodeModel.properties.config,"fields",j)}const g=(E,C)=>{const j=Se.cloneDeep(c.value.groupList);j[C].field=E.field,j[C].label=E.label,c.value.groupList=j},b=E=>{const C=Se.cloneDeep(c.value.groupList);C.splice(E,1),c.value.groupList=C,p.value.splice(E,1);const j=C.map(U=>({label:U.label,value:U.field}));Se.set(t.nodeModel.properties.config,"fields",j)},S=E=>{const C=Se.cloneDeep(c.value.groupList);C[E].variableList.push({v_id:fl(),variable:[]}),c.value.groupList=C},T=(E,C)=>{const j=Se.cloneDeep(c.value.groupList);j[E].variableList.splice(C,1),c.value.groupList=j},A=E=>{const C=Se.cloneDeep(c.value.groupList);C.push({id:fl(),field:E.field,label:E.label,variableList:[{v_id:fl(),variable:[]}]}),c.value.groupList=C},O=async()=>{var C;const E=[...a.value.map(j=>j.validate()),(C=n.value)==null?void 0:C.validate()];return Promise.all(E).catch(j=>Promise.reject({node:t.nodeModel,errMessage:j}))};return Ur(()=>{var C;typeof((C=t.nodeModel.properties.nodeData)==null?void 0:C.isResult)>"u"&&Tu(t.nodeModel)&&Se.set(t.nodeModel.properties.nodeData,"isResult",!0),Se.set(t.nodeModel,"validate",O),t.nodeModel.properties.nodeData.groupList&&(p.value=c.value.groupList.map(j=>({label:j.label,field:j.field})));const E=c.value.groupList.map(j=>({label:j.label,value:j.field}));Se.set(t.nodeModel.properties.config,"fields",E)}),(E,C)=>{const j=Q("el-option"),U=Q("el-select"),L=Q("el-form-item"),V=Q("EditPen"),$=Q("el-icon"),H=Q("el-button"),Y=Q("el-col"),z=Q("el-row"),W=Q("el-card"),B=Q("el-form");return _e(),Ke(go,{nodeModel:E.nodeModel},{default:R(()=>[K("h5",mK,me(E.$t("views.applicationWorkflow.nodeSetting")),1),k(B,{onSubmit:C[2]||(C[2]=qt(()=>{},["prevent"])),model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableAggregationRef",ref:n,"hide-required-asterisk":""},{default:R(()=>[k(L,{label:E.$t("views.applicationWorkflow.nodes.variableAggregationNode.Strategy"),rules:{required:!0,trigger:"change"}},{label:R(()=>[K("div",yK,[K("div",null,[K("span",null,[tt(me(E.$t("views.applicationWorkflow.nodes.variableAggregationNode.Strategy"))+" ",1),C[3]||(C[3]=K("span",{class:"color-danger"},"*",-1))])])])]),default:R(()=>[k(U,{modelValue:c.value.strategy,"onUpdate:modelValue":C[0]||(C[0]=q=>c.value.strategy=q),teleported:!1},{default:R(()=>[k(j,{label:Zt(_t)("workflow.nodes.variableAggregationNode.placeholder"),value:"first_non_null"},null,8,["label"]),k(j,{label:Zt(_t)("workflow.nodes.variableAggregationNode.placeholder1"),value:"variable_to_json"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),(_e(!0),Yt(tr,null,Wr(c.value.groupList,(q,J)=>(_e(),Yt("div",{key:q.id,class:"mb-8"},[k(W,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[K("div",gK,[K("span",_K,me(q.label),1),K("div",bK,[k(H,{onClick:ce=>d(q,J),link:""},{default:R(()=>[k($,null,{default:R(()=>[k(V)]),_:1})]),_:2},1032,["onClick"]),k(H,{onClick:ce=>b(J),link:"",disabled:c.value.groupList.length<=1},{default:R(()=>[k(Ar,{iconName:"app-delete"})]),_:2},1032,["onClick","disabled"])])]),(_e(!0),Yt(tr,null,Wr(q.variableList,(ce,re)=>(_e(),Yt("div",{key:ce.v_id},[k(z,null,{default:R(()=>[k(Y,{span:22},{default:R(()=>[k(L,{prop:`groupList.${J}.variableList.${re}.variable`,rules:{type:"array",required:!0,message:E.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:R(()=>[k(Co,{ref_for:!0,ref_key:"nodeCascaderRef",ref:a,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("views.applicationWorkflow.variable.placeholder"),modelValue:ce.variable,"onUpdate:modelValue":Pe=>ce.variable=Pe},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(Y,{span:2},{default:R(()=>[k(H,{link:"",class:"mt-4 ml-4",disabled:q.variableList.length<=1,onClick:Pe=>T(J,re)},{default:R(()=>[k(Ar,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]))),128)),k(H,{onClick:ce=>S(J),type:"primary",size:"large",link:""},{default:R(()=>[k(Ar,{iconName:"app-add-outlined",class:"mr-4"}),tt(" "+me(E.$t("common.add")),1)]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),k(H,{onClick:C[1]||(C[1]=q=>d()),type:"primary",size:"large",link:""},{default:R(()=>[k(Ar,{iconName:"app-add-outlined",class:"mr-4"}),tt(" "+me(E.$t("views.applicationWorkflow.nodes.variableAggregationNode.addGroup")),1)]),_:1})]),_:1},8,["model"]),k(vK,{ref_key:"GroupFieldDialogRef",ref:r,onRefresh:_},null,512)]),_:1},8,["nodeModel"])}}});class EK extends _o{constructor(t){super(t,wK)}getConfig(t){return t.model.properties.config}}const OK={type:"variable-aggregation-node",model:bo,view:EK},SK=Object.freeze(Object.defineProperty({__proto__:null,default:OK},Symbol.toStringTag,{value:"Module"})),xK={class:"flex-between"},AK={class:"flex-between mb-8"},TK={class:"lighter"},MK={key:0,class:"flex w-full"},kK=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],a=T=>T.ctrlKey===!0?(T.preventDefault(),!0):(T.stopPropagation(),!0),r={variableList:[{id:fl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},s=Gn({get:()=>(t.nodeModel.properties.nodeData||Se.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:T=>{Se.set(t.nodeModel.properties,"nodeData",T)}}),c=je(),p=je(),d=je(),_=async()=>{var A;let T=[(A=c.value)==null?void 0:A.validate(),...p.value.map(O=>O.validate())];return d.value&&(T=[...T,...p.value.map(O=>O.validate())]),Promise.all(T).catch(O=>Promise.reject({node:t.nodeModel,errMessage:O}))};function g(){const T=Se.cloneDeep(t.nodeModel.properties.nodeData.variableList),A={id:fl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};T.push(A),Se.set(t.nodeModel.properties.nodeData,"variableList",T)}function b(T){const A=Se.cloneDeep(t.nodeModel.properties.nodeData.variableList);A.splice(T,1),Se.set(t.nodeModel.properties.nodeData,"variableList",A)}function S(T){t.nodeModel.graphModel.nodes.map(A=>{A.id==="start-node"&&(A.properties.config.globalFields.forEach(O=>{O.value===T.fields[1]&&(T.name=O.label)}),A.properties.config.chatFields.forEach(O=>{O.value===T.fields[1]&&(T.name=O.label)}))})}return Ur(()=>{var T;typeof((T=t.nodeModel.properties.nodeData)==null?void 0:T.isResult)>"u"&&Tu(t.nodeModel)&&Se.set(t.nodeModel.properties.nodeData,"isResult",!0),Se.set(t.nodeModel,"validate",_)}),(T,A)=>{const O=Q("AppIcon"),E=Q("el-button"),C=Q("el-form-item"),j=Q("el-option"),U=Q("el-select"),L=Q("el-input"),V=Q("el-input-number"),$=Q("CodemirrorEditor"),H=Q("el-card"),Y=Q("Plus"),z=Q("el-icon"),W=Q("el-form");return _e(),Ke(go,{nodeModel:T.nodeModel},{default:R(()=>[k(W,{onSubmit:A[0]||(A[0]=qt(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:R(()=>[(_e(!0),Yt(tr,null,Wr(s.value.variableList,(B,q)=>(_e(),Ke(H,{key:B.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(C,{label:T.$t("views.applicationWorkflow.variable.label")},{label:R(()=>[K("div",xK,[K("div",null,[tt(me(T.$t("views.applicationWorkflow.variable.label"))+" ",1),A[1]||(A[1]=K("span",{class:"color-danger"},"*",-1))]),s.value.variableList.length>1?(_e(),Ke(E,{key:0,text:"",onClick:J=>b(q)},{default:R(()=>[k(O,{iconName:"app-delete"})]),_:2},1032,["onClick"])):cn("",!0)])]),default:R(()=>[k(Co,{ref_for:!0,ref_key:"nodeCascaderRef",ref:p,nodeModel:T.nodeModel,class:"w-full",placeholder:T.$t("views.applicationWorkflow.variable.placeholder"),modelValue:B.fields,"onUpdate:modelValue":J=>B.fields=J,global:!0,onChange:J=>S(B)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),K("div",AK,[K("span",TK,[tt(me(T.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),A[2]||(A[2]=K("span",{class:"color-danger"},"*",-1))]),k(U,{teleported:!1,modelValue:B.source,"onUpdate:modelValue":J=>B.source=J,size:"small",style:{width:"85px"}},{default:R(()=>[k(j,{label:T.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(j,{label:T.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),B.source==="custom"?(_e(),Yt("div",MK,[k(U,{modelValue:B.type,"onUpdate:modelValue":J=>B.type=J,style:{"max-width":"85px"},class:"mr-8",onChange:J=>s.value.variableList[q].value=null},{default:R(()=>[(_e(),Yt(tr,null,Wr(n,J=>k(j,{key:J,label:J,value:J},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),B.type==="string"?(_e(),Ke(C,{key:0,prop:"variableList."+q+".value",rules:{message:Zt(_t)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:R(()=>[k(L,{modelValue:B.value,"onUpdate:modelValue":J=>B.value=J,placeholder:T.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:a},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):B.type==="num"?(_e(),Ke(C,{key:1,prop:"variableList."+q+".value",rules:{message:T.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:R(()=>[k(V,{modelValue:B.value,"onUpdate:modelValue":J=>B.value=J},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):B.type==="json"?(_e(),Ke(C,{key:2,class:"w-full",prop:"variableList."+q+".value",rules:[{message:T.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(J,ce,re)=>{try{JSON.parse(ce),re()}catch{re(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:R(()=>[k($,{title:"JSON",modelValue:B.value,"onUpdate:modelValue":J=>B.value=J,style:{height:"100px",width:"155px"},onSubmitDialog:J=>s.value.variableList[q].value=J},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):cn("",!0)])):(_e(),Ke(C,{key:1},{default:R(()=>[k(Co,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:d,nodeModel:T.nodeModel,class:"w-full",placeholder:T.$t("views.applicationWorkflow.variable.placeholder"),modelValue:B.reference,"onUpdate:modelValue":J=>B.reference=J},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),k(E,{link:"",type:"primary",onClick:g},{default:R(()=>[k(z,{class:"mr-4"},{default:R(()=>[k(Y)]),_:1}),tt(" "+me(T.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class NK extends _o{constructor(t){super(t,kK)}}const PK={type:"variable-assign-node",model:bo,view:NK},RK=Object.freeze(Object.defineProperty({__proto__:null,default:PK},Symbol.toStringTag,{value:"Module"})),CK={class:"flex align-center"},DK={class:"mr-4"},jK={class:"flex align-center"},IK={class:"mr-4"},LK={class:"flex align-center"},$K={class:"mr-4"},FK={class:"dialog-footer"},BK=$n({__name:"VariableFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=je(),s=je(!1),c=je(!1),p=je(null),d=je({field:"",label:"",expression:""}),_=oh({label:[{required:!0,message:_t("dynamicsForm.paramForm.name.placeholder"),trigger:"blur"}],field:[{required:!0,message:_t("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:_t("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}],expression:[{required:!0,message:_t("views.applicationWorkflow.nodes.variableSplittingNode.expression.placeholder"),trigger:"blur"}]}),g=je(!1),b=(A,O)=>{A&&(d.value=Se.cloneDeep(A),c.value=!0,p.value=O),g.value=!0},S=()=>{g.value=!1,c.value=!1,p.value=null,d.value={field:"",label:""}},T=async A=>{A&&await A.validate(O=>{O&&a("refresh",d.value,p.value)})};return t({open:b,close:S}),(A,O)=>{const E=Q("el-input"),C=Q("el-form-item"),j=Q("AppIcon"),U=Q("el-tooltip"),L=Q("el-form"),V=Q("el-button"),$=Q("el-dialog");return _e(),Ke($,{title:c.value?A.$t("views.applicationWorkflow.nodes.variableSplittingNode.editVariables"):A.$t("views.applicationWorkflow.nodes.variableSplittingNode.addVariables"),modelValue:g.value,"onUpdate:modelValue":O[4]||(O[4]=H=>g.value=H),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":S,"append-to-body":""},{footer:R(()=>[K("span",FK,[k(V,{onClick:qt(S,["prevent"])},{default:R(()=>[tt(me(A.$t("common.cancel")),1)]),_:1}),k(V,{type:"primary",onClick:O[3]||(O[3]=H=>T(r.value)),loading:s.value},{default:R(()=>[tt(me(A.$t("common.save")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(L,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:_,model:d.value,"require-asterisk-position":"right","hide-required-asterisk":""},{default:R(()=>[k(C,{prop:"field"},{label:R(()=>[K("div",CK,[K("span",DK,me(A.$t("common.variable")),1),O[5]||(O[5]=K("span",{class:"color-danger"},"*",-1))])]),default:R(()=>[k(E,{modelValue:d.value.field,"onUpdate:modelValue":O[0]||(O[0]=H=>d.value.field=H),maxlength:64,placeholder:A.$t("views.applicationWorkflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1}),k(C,{prop:"label"},{label:R(()=>[K("div",jK,[K("span",IK,me(A.$t("dynamicsForm.paramForm.name.label")),1),O[6]||(O[6]=K("span",{class:"color-danger"},"*",-1))])]),default:R(()=>[k(E,{modelValue:d.value.label,"onUpdate:modelValue":O[1]||(O[1]=H=>d.value.label=H),maxlength:64,"show-word-limit":"",placeholder:A.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),k(C,{prop:"expression"},{label:R(()=>[K("div",LK,[K("span",$K,[tt(me(A.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.label"))+" ",1),O[7]||(O[7]=K("span",{class:"color-danger"},"*",-1))]),k(U,{effect:"dark",content:A.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.tooltip"),placement:"right"},{default:R(()=>[k(j,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:R(()=>[k(E,{modelValue:d.value.expression,"onUpdate:modelValue":O[2]||(O[2]=H=>d.value.expression=H),maxlength:64,"show-word-limit":"",placeholder:A.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),UK={class:"flex-between w-full"},VK={class:"break-all lighter"},GK={class:"ml-4",style:{"margin-top":"-4px"}},zK=["title"],WK=["title"],HK={class:"mr-4"},XK=$n({__name:"VariableFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=je(),a=je(),r=je([]);function s(d,_){a.value.open(d,_)}function c(d){r.value.splice(d,1);const _=[{label:_t("common.result"),value:"result"},...r.value.map(g=>({label:g.label,value:g.field}))];Se.set(t.nodeModel.properties.config,"fields",_)}function p(d,_){for(let b=0;b<r.value.length;b++)if(r.value[b].field===d.field&&_!==b){za(_t("views.applicationWorkflow.tip.paramErrorMessage")+d.field);return}[void 0,null].includes(_)?r.value.push(d):r.value.splice(_,1,d),a.value.close();const g=[{label:_t("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];Se.set(t.nodeModel.properties.config,"fields",g)}return Ur(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=Se.cloneDeep(t.nodeModel.properties.nodeData.variableList)),Se.set(t.nodeModel.properties.nodeData,"variableList",r);const d=[{label:_t("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];Se.set(t.nodeModel.properties.config,"fields",d)}),(d,_)=>{var O;const g=Q("AppIcon"),b=Q("el-button"),S=Q("el-table-column"),T=Q("el-tooltip"),A=Q("el-table");return _e(),Yt(tr,null,[K("div",UK,[K("h5",VK,[tt(me(d.$t("views.applicationWorkflow.nodes.variableSplittingNode.splitVariables"))+" ",1),_[1]||(_[1]=K("span",{class:"color-danger"},"*",-1))]),K("span",GK,[k(b,{link:"",type:"primary",onClick:_[0]||(_[0]=E=>s())},{default:R(()=>[k(g,{iconName:"app-add-outlined"})]),_:1})])]),((O=t.nodeModel.properties.nodeData.variableList)==null?void 0:O.length)>0?(_e(),Ke(A,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:R(()=>[k(S,{prop:"field",label:d.$t("common.variable"),width:"95"},{default:R(({row:E})=>[K("span",{title:E.field,class:"ellipsis-1"},me(E.field),9,zK)]),_:1},8,["label"]),k(S,{prop:"label",label:d.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:E})=>[K("span",{title:E.label,class:"ellipsis-1"},me(E.label),9,WK)]),_:1},8,["label"]),k(S,{label:d.$t("common.operation"),align:"left",width:"90"},{default:R(({row:E,$index:C})=>[K("span",HK,[k(T,{effect:"dark",content:d.$t("common.modify"),placement:"top"},{default:R(()=>[k(b,{type:"primary",text:"",onClick:qt(j=>s(E,C),["stop"])},{default:R(()=>[k(g,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(T,{effect:"dark",content:d.$t("common.delete"),placement:"top"},{default:R(()=>[k(b,{type:"primary",text:"",onClick:j=>c(C)},{default:R(()=>[k(g,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):cn("",!0),k(BK,{ref_key:"VariableFieldDialogRef",ref:a,onRefresh:p},null,512)],64)}}}),qK={class:"title-decoration-1 mb-8"},YK={class:"flex-between"},KK=$n({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={inputVariable:[],variableList:[]},a=Gn({get:()=>(t.nodeModel.properties.nodeData||Se.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:c=>{Se.set(t.nodeModel.properties,"nodeData",c)}}),r=je(),s=async()=>r.value.validate();return Ur(()=>{Se.set(t.nodeModel,"validate",s)}),(c,p)=>{const d=Q("el-form-item"),_=Q("el-form"),g=Q("el-card");return _e(),Ke(go,{nodeModel:c.nodeModel},{default:R(()=>[K("h5",qK,me(c.$t("views.applicationWorkflow.nodeSetting")),1),k(g,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(_,{onSubmit:p[1]||(p[1]=qt(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:r,"hide-required-asterisk":""},{default:R(()=>[k(d,{prop:"inputVariable",rules:{message:c.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:R(()=>[K("div",YK,[K("div",null,[tt(me(c.$t("views.applicationWorkflow.nodes.variableSplittingNode.inputVariables"))+" ",1),p[2]||(p[2]=K("span",{class:"color-danger"},"*",-1))])])]),default:R(()=>[k(Co,{ref:"nodeCascaderRef",nodeModel:c.nodeModel,class:"w-full",placeholder:c.$t("views.applicationWorkflow.variable.placeholder"),modelValue:a.value.inputVariable,"onUpdate:modelValue":p[0]||(p[0]=b=>a.value.inputVariable=b)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),k(d,{prop:"variableList",rules:{message:c.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{default:R(()=>[k(XK,{ref:"VariableFieldTableRef","node-model":c.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class ZK extends _o{constructor(t){super(t,KK)}}const JK={type:"variable-splitting-node",model:bo,view:ZK},QK=Object.freeze(Object.defineProperty({__proto__:null,default:JK},Symbol.toStringTag,{value:"Module"})),oA=$n({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(a,r)=>Wa((_e(),Yt("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=qt(()=>{},["stop"])),onClick:r[1]||(r[1]=qt(()=>{},["stop"]))},[(_e(),Yt("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[K("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),K("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[fc,t.model.isHovered]])}});function eZ(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const tZ=32,nZ=32;class rZ extends fn.BezierEdge{constructor(){super();ha(this,"isMounted");ha(this,"customLineApp");ha(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const a=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");eZ(a,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:a}=this.props;n&&(zg()?rN(this.targetId(),oA,n,this.props.model,a,(s,c)=>({model:s,graph:c})):(this.customLineApp=QT({render:()=>xv(oA,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),zg()&&oN(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,a=n.id,{customWidth:r=tZ,customHeight:s=nZ}=n.getProperties(),{startPoint:c,endPoint:p,path:d,isAnimation:_,arrowConfig:g}=n,b=n.getEdgeAnimationStyle(),{strokeDasharray:S,stroke:T,strokeDashoffset:A,animationName:O,animationDuration:E,animationIterationCount:C,animationTimingFunction:j,animationDirection:U}=b,L={x:(c.x+p.x-r)/2,y:(c.y+p.y-s)/2,width:r,height:s},V=n.getEdgeStyle(),$={width:r,height:s};return setTimeout(()=>{const H=document.getElementById(a);H&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(H))},0),delete V.stroke,fn.h("g",{},[fn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),fn.h("path",{d,...V,...g,..._?{strokeDasharray:S,stroke:T,style:{strokeDashoffset:A,animationName:O,animationDuration:E,animationIterationCount:C,animationTimingFunction:j,animationDirection:U}}:{}}),fn.h("foreignObject",{...L,y:L.y+5,x:L.x+5,style:{}},[fn.h("div",{id:a,style:{...$},className:"lf-custom-edge-wrapper"})])])}}let oZ=class extends fn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y};this.updateStartPoint(s);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}};const iZ={type:"app-edge",view:rZ,model:oZ};class aZ extends fn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=0,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y-10};this.updateStartPoint(s);const c={x:r.x,y:r.y+3};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const lZ={type:"loop-edge",view:fn.BezierEdge,model:aZ},sZ=$n({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e,n=je(!1);function a(){var g;(g=t.lf)==null||g.zoom(!0,[0,0])}function r(){var g;(g=t.lf)==null||g.zoom(!1,[0,0])}function s(){var g,b,S;(g=t.lf)==null||g.resetZoom(),(b=t.lf)==null||b.resetTranslate(),(S=t.lf)==null||S.fitView()}const c=()=>{var g,b;(g=t.lf)==null||g.extension.dagre.layout(),console.log(t.lf),(b=t.lf)==null||b.graphModel.nodes.forEach(S=>{var T;S.type==="loop-body-node"&&((T=S==null?void 0:S.loopLayout)==null||T.call(S))})},p=()=>{var g;(g=t.lf)==null||g.graphModel.nodes.forEach(b=>{b.properties.showNode=!1})},d=()=>{var g;(g=t.lf)==null||g.graphModel.nodes.forEach(b=>{b.properties.showNode=!0})},_=g=>{var S,T,A;const b=document.querySelector(".lf-drag-able");n.value=g,g?(b.style.cursor="default",(S=t.lf)==null||S.openSelectionSelect(),(T=t.lf)==null||T.extension.selectionSelect.setSelectionSense(!0,!1)):(b.style.cursor="pointer",(A=t.lf)==null||A.closeSelectionSelect())};return(g,b)=>{const S=Q("Position"),T=Q("el-icon"),A=Q("el-button"),O=Q("el-divider"),E=Q("ZoomOut"),C=Q("el-tooltip"),j=Q("ZoomIn"),U=Q("el-card");return _e(),Ke(U,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:R(()=>[k(A,{onClick:b[0]||(b[0]=L=>_(!0)),style:{border:"none",padding:"4px",height:"24px"},class:wu({"is-drag-active":n.value})},{default:R(()=>[k(T,{size:16},{default:R(()=>[k(S)]),_:1})]),_:1},8,["class"]),k(A,{onClick:b[1]||(b[1]=L=>_(!1)),style:{border:"none",padding:"4px",height:"24px","margin-left":"8px"},class:wu({"is-drag-active":!n.value})},{default:R(()=>[k(Ar,{iconName:"app-raisehand",size:16})]),_:1},8,["class"]),k(O,{direction:"vertical"}),k(A,{link:"",onClick:r,style:{border:"none"}},{default:R(()=>[k(C,{effect:"dark",content:g.$t("workflow.control.zoomOut"),placement:"top"},{default:R(()=>[k(T,{size:16,title:g.$t("workflow.control.zoomOut")},{default:R(()=>[k(E)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:a,style:{border:"none"}},{default:R(()=>[k(C,{effect:"dark",content:g.$t("workflow.control.zoomIn"),placement:"top"},{default:R(()=>[k(T,{size:16,title:g.$t("workflow.control.zoomIn")},{default:R(()=>[k(j)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:s,style:{border:"none"}},{default:R(()=>[k(C,{effect:"dark",content:g.$t("workflow.control.fitView"),placement:"top"},{default:R(()=>[k(Ar,{iconName:"app-fitview",title:g.$t("workflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(O,{direction:"vertical"}),k(A,{link:"",onClick:p,style:{border:"none"}},{default:R(()=>[k(C,{effect:"dark",content:g.$t("workflow.control.retract"),placement:"top"},{default:R(()=>[k(Ar,{style:{"font-size":"16px"},iconName:"app-retract",title:g.$t("workflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:d,style:{border:"none"}},{default:R(()=>[k(C,{effect:"dark",content:g.$t("workflow.control.extend"),placement:"top"},{default:R(()=>[k(Ar,{style:{"font-size":"16px"},iconName:"app-extend",title:g.$t("workflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:c,style:{border:"none"}},{default:R(()=>[k(C,{effect:"dark",content:g.$t("workflow.control.beautify"),placement:"top"},{default:R(()=>[k(Ar,{style:{"font-size":"16px"},iconName:"app-beautify",title:g.$t("workflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}}),uZ=rh(sZ,[["__scopeId","data-v-c8e52397"]]);let Ns=null;function iA(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function aA(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const rv=40;let cg=40;function cZ(e,t){const{keyboard:n}=e,{options:{keyboard:a}}=n,r=()=>{var b,S;if(cg=rv,!(a!=null&&a.enabled)||t.textEditElement)return!0;const{guards:p}=e.options,d=t.getSelectElements(!1);if(!(p&&p.beforeClone?p.beforeClone(d):!0)||d.nodes.length===0&&d.edges.length===0)return Ns=null,!0;const g=d.nodes.filter(T=>T.type===kn.Start||T.type===kn.Base);if(g.length>0){za(((S=(b=g[0])==null?void 0:b.properties)==null?void 0:S.stepName)+_t("workflow.tip.cannotCopy"));return}return Ns=Se.cloneDeep(d),Ns.nodes.forEach(T=>iA(T,rv)),Ns.edges.forEach(T=>aA(T,rv)),Jm(_t("workflow.tip.copyError")),!1},s=()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;const p=f_(e.graphModel.get_provide(null,null).workflowMode),d=p==null?void 0:p.flatMap(_=>_.list).map(_=>_.type);if(Ns.nodes=Ns.nodes.filter(_=>d==null?void 0:d.includes(_.type)),Ns&&(Ns.nodes||Ns.edges)){e.clearSelectElements();const _=e.addElements(Ns,cg);if(!_)return!0;_.nodes.forEach(g=>e.selectElementById(g.id,!0)),_.edges.forEach(g=>e.selectElementById(g.id,!0)),Ns.nodes.forEach(g=>iA(g,rv)),Ns.edges.forEach(g=>aA(g,rv)),cg=cg+rv}return!1},c=()=>{var _;const p=t.getSelectElements(!0);if(e.clearSelectElements(),p.nodes.length==0&&p.edges.length==0)return;if(p.edges.length>0&&p.nodes.length==0){p.edges.filter(g=>!["loop-edge"].includes(g.type||"")).forEach(g=>e.deleteEdge(g.id));return}const d=p.nodes.filter(g=>["start-node","base-node","loop-body-node","loop-start-node","knowledge-base-node"].includes(g.type));if(d.length>0){za(`${(_=d[0].properties)==null?void 0:_.stepName}${_t("workflow.delete.deleteMessage")}`);return}return ZT(_t("common.tip"),_t("workflow.delete.confirmTitle"),{confirmButtonText:_t("common.confirm"),confirmButtonClass:"danger"}).then(()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;p.edges.forEach(g=>e.deleteEdge(g.id)),p.nodes.forEach(g=>{g.type==="loop-node"&&e.getNodeOutgoingNode(g.id).forEach(S=>{S.type==="loop-body-node"&&e.deleteNode(S.id)}),e.deleteNode(g.id)})}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],s),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(a!=null&&a.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class fZ{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const dZ=e=>typeof e=="string",lA=Array.isArray,Kg=e=>typeof e=="number",bN=e=>e!==null&&typeof e=="object",Zg=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Zg(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Zg(t[n])}),t}return e},ov=(e,t)=>{const n=e[t];return bN(n)?n.cell:n},sA=(e,t,n)=>{let a;return n?a=n:Kg(e)?a=()=>e:a=()=>t,a},pZ=(e,t)=>{if(e!=="next"&&e!=="prev")return t},uA=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let hZ=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return uA(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&uA(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let a=n.prev;for(;a!==n;)t.push(JSON.stringify(a,pZ)),a=a==null?void 0:a.prev;return`[${t.join(", ")}]`}};var gv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(gv||(gv={}));function cA(e,t){var n=e.get(t)||0;e.set(t,n+1)}function fA(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function wN(e,t,n,a){var r=String(t),s=String(n);if(!e&&r>s){var c=r;r=s,s=c}return r+gv.EDGE_KEY_DELIM+s+gv.EDGE_KEY_DELIM+(a===void 0?gv.DEFAULT_EDGE_NAME:a)}function dA(e,t,n,a){var r=String(t),s=String(n),c={v:t,w:n};if(!e&&r>s){var p=c.v;c.v=c.w,c.w=p}return a!==void 0&&(c.name=a),c}function C1(e,t){return wN(e,t.v,t.w,t.name)}function pA(e){return typeof e=="function"}var vZ=function(t){return t.nodes().map(function(n){var a=t.node(n),r=t.parent(n),s={id:n,value:a,parent:r};return s.value===void 0&&delete s.value,s.parent===void 0&&delete s.parent,s})},mZ=function(t){return t.edges().map(function(n){var a=t.edge(n),r={v:n.v,w:n.w,value:a,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},yZ=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:vZ(t),edges:mZ(t),value:t.graph()};return n.value===void 0&&delete n.value,n},gZ=function(t){var n=new Vv(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(a){n.setNode(a.id,a.value),a.parent&&n.setParent(a.id,a.parent)}),t.edges.forEach(function(a){n.setEdge(a.v,a.w,a.value,a.name)}),n};function hA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function vA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(n),!0).forEach(function(a){_Z(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wZ(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function EZ(e,t,n){return t&&wZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var OZ={compound:!1,multigraph:!1,directed:!0},Vv=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};bZ(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=gv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return pA(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.inEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.sinks=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.outEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.setNodes=function(r,s){return r.map(function(c){return t.setNode(c,s)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var s,c=(s=t.parentMap)===null||s===void 0?void 0:s.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var s=t.parentMap.get(r);t.childrenMap.get(s).delete(r)},this.setParent=function(r,s){var c,p;t.checkCompound();for(var d=s===void 0?t.GRAPH_NODE:s,_=t.parent(d);_;){if(r===_)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");_=t.parent(_)}s&&t.setNode(s),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,d);var g=t.childrenMap.get(d);return g.set(r,!0),(p=t.childrenMap)===null||p===void 0||p.set(d,g),t},this.children=function(r){var s=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,p=(c=t.childrenMap)===null||c===void 0?void 0:c.get(s);return p?Array.from(p.keys()):void 0}if(s===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var s=t.predecessorsMap.get(r);return s?Array.from(s.keys()):void 0},this.successors=function(r){var s=t.successorsMap.get(r);return s?Array.from(s.keys()):void 0},this.neighbors=function(r){var s;if(t.hasNode(r))return Array.from(new Set((s=t.predecessors(r))===null||s===void 0?void 0:s.concat(t.successors(r))))},this.isLeaf=function(r){var s;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((s=t.neighbors(r))===null||s===void 0)&&s.length)},this.filterNodes=function(r){var s=t.directed,c=t.multigraph,p=t.compound,d=new e({directed:s,multigraph:c,compound:p});if(d.setGraph(t.graph()),t.nodes().forEach(function(g){r(g)&&d.setNode(g,t.node(g))}),t.edges().forEach(function(g){d.hasNode(g.v)&&d.hasNode(g.w)&&d.setEdgeObj(g,t.edge(g))}),p){var _=function(b){for(var S=t.parent(b);S!==void 0&&!d.hasNode(S);)S=t.parent(S);return S};d.nodes().forEach(function(g){d.setParent(g,_(g))})}return d},this.setDefaultEdgeLabel=function(r){return pA(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,s){return t.setEdge(r.v,r.w,s,r.name)},this.setPath=function(r,s){return r.reduce(function(c,p){return t.setEdge(c,p,s),p}),t},this.edgeFromArgs=function(r,s,c){return t.edge({v:r,w:s,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(C1(t.isDirected(),r))},this.hasEdge=function(r,s,c){return t.edgesLabelsMap.has(C1(t.isDirected(),{v:r,w:s,name:c}))},this.removeEdgeObj=function(r){var s=r.v,c=r.w,p=r.name;return t.removeEdge(s,c,p)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,s){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(p){return!s||p.v===s})},this.outEdges=function(r,s){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(p){return!s||p.w===s})},this.nodeEdges=function(r,s){var c;if(t.hasNode(r))return(c=t.inEdges(r,s))===null||c===void 0?void 0:c.concat(t.outEdges(r,s))},this.toJSON=function(){return yZ(t)},this.nodeInDegree=function(r){var s=t.inEdgesMap.get(r);return s?s.size:0},this.nodeOutDegree=function(r){var s=t.outEdgesMap.get(r);return s?s.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var a=vA(vA({},OZ),n);this.compound=a.compound,this.directed=a.directed,this.multigraph=a.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return EZ(e,[{key:"setNode",value:function(n,a){var r=this.nodesLabelMap,s=this.defaultNodeLabelFn,c=this.isCompound,p=this.parentMap,d=this.childrenMap,_=this.inEdgesMap,g=this.outEdgesMap,b=this.predecessorsMap,S=this.successorsMap;if(r.has(n))return a!==void 0&&r.set(n,a),this;if(r.set(n,a||s(n)),c()){var T;p==null||p.set(n,this.GRAPH_NODE),d==null||d.set(n,new Map),d!=null&&d.has(this.GRAPH_NODE)||d==null||d.set(this.GRAPH_NODE,new Map),d==null||(T=d.get(this.GRAPH_NODE))===null||T===void 0||T.set(n,!0)}return[_,g,b,S].forEach(function(A){return A.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var a=this;if(this.hasNode(n)){var r=function(E){a.removeEdge(E.v,E.w,E.name)},s=this.inEdgesMap,c=this.outEdgesMap,p=this.predecessorsMap,d=this.successorsMap,_=this.nodesLabelMap;if(this.isCompound()){var g,b,S;this.removeFromParentsChildList(n),(g=this.parentMap)===null||g===void 0||g.delete(n),(b=this.children(n))===null||b===void 0||b.forEach(function(O){return a.setParent(O)}),(S=this.childrenMap)===null||S===void 0||S.delete(n)}var T=s.get(n),A=c.get(n);Array.from(T.values()).forEach(function(O){return r(O)}),Array.from(A.values()).forEach(function(O){return r(O)}),_.delete(n),s.delete(n),c.delete(n),p.delete(n),d.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,a,r,s){var c,p,d=dA(this.isDirected(),n,a,s),_=C1(this.isDirected(),d),g=d.v,b=d.w;if(this.edgesLabelsMap.has(_))return this.edgesLabelsMap.set(_,r),this;if(s!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(g),this.setNode(b),this.edgesLabelsMap.set(_,r||this.defaultEdgeLabelFn(g,b,s)),Object.freeze(d),this.edgesMap.set(_,d);var S=this.predecessorsMap.get(b),T=this.successorsMap.get(g);return cA(S,g),cA(T,b),(c=this.inEdgesMap.get(b))===null||c===void 0||c.set(_,d),(p=this.outEdgesMap.get(g))===null||p===void 0||p.set(_,d),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,a,r){var s=wN(this.isDirected(),n,a,r),c=this.edgesMap.get(s);if(c){var p=dA(this.isDirected(),n,a,r),d=p.v,_=p.w;this.edgesLabelsMap.delete(s),this.edgesMap.delete(s);var g=this.predecessorsMap.get(_),b=this.successorsMap.get(d);fA(g,d),fA(b,_),this.inEdgesMap.get(_).delete(s),this.outEdgesMap.get(d).delete(s),this.edgeCountNum-=1}return this}}]),e}();Vv.fromJSON=gZ;function SZ(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function xZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var EN=SZ(function e(){var t=this;xZ(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var a=t.keyIndice.get(n);if(a!==void 0)return t.arr[a].priority},this.swap=function(n,a){var r=t.arr,s=t.keyIndice,c=[r[n],r[a]],p=c[0],d=c[1];r[n]=d,r[a]=p,s.set(p.key,a),s.set(d.key,n)},this.innerDecrease=function(n){for(var a=t.arr,r=a[n].priority,s,c=n;c!==0;){var p;if(s=c>>1,((p=a[s])===null||p===void 0?void 0:p.priority)<r)break;t.swap(c,s),c=s}},this.heapify=function(n){var a=t.arr,r=n<<1,s=r+1,c=n;r<a.length&&(c=a[r].priority<a[c].priority?r:c,s<a.length&&(c=a[s].priority<a[c].priority?s:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,a){var r=t.keyIndice,s=t.arr;if(!r.has(n)){var c=s.length;return r.set(n,c),s.push({key:n,priority:a}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,a){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(a>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(a));t.arr[r].priority=a,t.innerDecrease(r)}}),AZ=function(t,n){var a=new Vv,r=new Map,s=new EN,c;function p(g){var b=g.v===c?g.w:g.v,S=s.priority(b);if(S!==void 0){var T=n(g);T<S&&(r.set(b,c),s.decrease(b,T))}}if(t.nodeCount()===0)return a;t.nodes().forEach(function(g){s.add(g,Number.POSITIVE_INFINITY),a.setNode(g)}),s.decrease(t.nodes()[0],0);for(var d=!1;s.size()>0;){var _;if(c=s.removeMin(),r.has(c))a.setEdge(c,r.get(c));else{if(d)throw new Error("Input graph is not connected: "+t.graph());d=!0}(_=t.nodeEdges(c))===null||_===void 0||_.forEach(p)}return a},TZ=function(t){var n=new Set,a=[],r=t.nodes();return r.forEach(function(s){for(var c=[],p=[s];p.length>0;){var d=p.pop();if(!n.has(d)){var _,g;n.add(d),c.push(d),(_=t.successors(d))===null||_===void 0||_.forEach(function(b){return p.push(b)}),(g=t.predecessors(d))===null||g===void 0||g.forEach(function(b){return p.push(b)})}}c.length&&a.push(c)}),a},MZ=function e(t,n,a,r,s,c){r.includes(n)||(r.push(n),a||c.push(n),s(n).forEach(function(p){return e(t,p,a,r,s,c)}),a&&c.push(n))},FE=function(t,n,a){var r=Array.isArray(n)?n:[n],s=function(_){return t.isDirected()?t.successors(_):t.neighbors(_)},c=[],p=[];return r.forEach(function(d){if(t.hasNode(d))MZ(t,d,a==="post",p,s,c);else throw new Error("Graph does not have node: "+d)}),c};function kZ(e,t){return CZ(e)||RZ(e,t)||PZ(e,t)||NZ()}function NZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PZ(e,t){if(e){if(typeof e=="string")return mA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mA(e,t)}}function mA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function RZ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],r=!0,s=!1,c,p;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(a.push(c.value),!(t&&a.length===t));r=!0);}catch(d){s=!0,p=d}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw p}}return a}}function CZ(e){if(Array.isArray(e))return e}var DZ=function(){return 1},ON=function(t,n,a,r){return jZ(t,n,a||DZ,r||function(s){return t.outEdges(s)})},jZ=function(t,n,a,r){var s=new Map,c=new EN,p,d,_=function(S){var T=S.v!==p?S.v:S.w,A=s.get(T),O=a(S),E=d.distance+O;if(O<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+O);E<A.distance&&(A.distance=E,A.predecessor=p,c.decrease(T,E))};for(t.nodes().forEach(function(b){var S=b===n?0:Number.POSITIVE_INFINITY;s.set(b,{distance:S}),c.add(b,S)});c.size()>0&&(p=c.removeMin(),d=s.get(p),!(d&&d.distance===Number.POSITIVE_INFINITY));)r(p).forEach(_);var g={};return Array.from(s.entries()).forEach(function(b){var S=kZ(b,2),T=S[0],A=S[1];return g[String(T)]=A,g}),g},IZ=function(t,n,a){var r={};return t.nodes().forEach(function(s){return r[String(s)]=ON(t,s,n,a),r}),r},SN=function(t){var n=0,a=[],r=new Map,s=[];function c(p){var d,_={onStack:!0,lowlink:n,index:n};if(r.set(p,_),n+=1,a.push(p),(d=t.successors(p))===null||d===void 0||d.forEach(function(T){var A;if(r.has(T)){if(!((A=r.get(T))===null||A===void 0)&&A.onStack){var E=r.get(T);_.lowlink=Math.min(_.lowlink,E.index)}}else{c(T);var O=r.get(T);_.lowlink=Math.min(_.lowlink,O.lowlink)}}),_.lowlink===_.index){var g=[],b;do{b=a.pop();var S=r.get(b);S.onStack=!1,g.push(b)}while(p!==b);s.push(g)}}return t.nodes().forEach(function(p){r.has(p)||c(p)}),s},LZ=function(t){return SN(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function Cw(e){"@babel/helpers - typeof";return Cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cw(e)}function $Z(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function FZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fm(e,t)}function UZ(e){var t=xN();return function(){var a=Bm(e),r;if(t){var s=Bm(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return VZ(this,r)}}function VZ(e,t){if(t&&(Cw(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GZ(e)}function GZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dw(e){var t=typeof Map=="function"?new Map:void 0;return Dw=function(a){if(a===null||!zZ(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,r)}function r(){return Og(a,arguments,Bm(this).constructor)}return r.prototype=Object.create(a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Fm(r,a)},Dw(e)}function Og(e,t,n){return xN()?Og=Reflect.construct:Og=function(r,s,c){var p=[null];p.push.apply(p,s);var d=Function.bind.apply(r,p),_=new d;return c&&Fm(_,c.prototype),_},Og.apply(null,arguments)}function xN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zZ(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Fm(e,t){return Fm=Object.setPrototypeOf||function(a,r){return a.__proto__=r,a},Fm(e,t)}function Bm(e){return Bm=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Bm(e)}var jw=function(e){BZ(n,e);var t=UZ(n);function n(){return FZ(this,n),t.apply(this,arguments)}return $Z(n)}(Dw(Error));function AN(e){var t=new Set,n=new Set,a=[];function r(s){if(n.has(s))throw new jw;if(!t.has(s)){var c;n.add(s),t.add(s),(c=e.predecessors(s))===null||c===void 0||c.forEach(r),n.delete(s),a.push(s)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new jw;return a}var WZ=function(t){try{AN(t)}catch(n){if(n instanceof jw)return!1;throw n}return!0},HZ=function(t,n){return FE(t,n,"post")},XZ=function(t,n){return FE(t,n,"pre")},qZ=function(){return 1};function YZ(e,t,n){return KZ(e,t||qZ,n||function(a){return e.outEdges(a)})}function KZ(e,t,n){var a={},r=e.nodes();return r.forEach(function(s){var c=String(s);a[c]={},a[c][c]={distance:0},r.forEach(function(p){s!==p&&(a[c][String(p)]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(p){var d=p.v===s?p.w:p.v,_=t(p);a[c][String(d)]={distance:_,predecessor:s}})}),r.forEach(function(s){var c=String(s),p=a[c];r.forEach(function(d){var _=String(d),g=a[_];r.forEach(function(b){var S=String(b),T=g[c],A=p[S],O=g[S],E=T.distance+A.distance;E<O.distance&&(O.distance=E,O.predecessor=A.predecessor)})})}),a}const ZZ=Object.freeze(Object.defineProperty({__proto__:null,components:TZ,dfs:FE,dijkstra:ON,dijkstraAll:IZ,findCycles:LZ,floydWarshall:YZ,isAcyclic:WZ,postorder:HZ,preorder:XZ,prim:AZ,tarjan:SN,topsort:AN},Symbol.toStringTag,{value:"Module"}));class JZ extends hZ{}class QZ extends Vv{}const eJ=()=>1,tJ=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const a=rJ(e,t||eJ);return(n=nJ(a.graph,a.buckets,a.zeroIdx).map(s=>e.outEdges(s.v,s.w)))===null||n===void 0?void 0:n.flat()},nJ=(e,t,n)=>{let a=[];const r=t[t.length-1],s=t[0];let c;for(;e.nodeCount();){for(;c=s.dequeue();)D1(e,t,n,c);for(;c=r.dequeue();)D1(e,t,n,c);if(e.nodeCount()){for(let p=t.length-2;p>0;--p)if(c=t[p].dequeue(),c){a=a.concat(D1(e,t,n,c,!0));break}}}return a},D1=(e,t,n,a,r)=>{var s,c;const p=[];return(s=e.inEdges(a.v))===null||s===void 0||s.forEach(d=>{const _=e.edge(d),g=e.node(d.v);r&&p.push({v:d.v,w:d.w,in:0,out:0}),g.out===void 0&&(g.out=0),g.out-=_,Iw(t,n,g)}),(c=e.outEdges(a.v))===null||c===void 0||c.forEach(d=>{const _=e.edge(d),g=d.w,b=e.node(g);b.in===void 0&&(b.in=0),b.in-=_,Iw(t,n,b)}),e.removeNode(a.v),r?p:void 0},rJ=(e,t)=>{const n=new QZ;let a=0,r=0;e.nodes().forEach(d=>{n.setNode(d,{v:d,in:0,out:0})}),e.edges().forEach(d=>{const _=n.edge(d)||0,g=(t==null?void 0:t(d))||1,b=_+g;n.setEdge(d.v,d.w,b),r=Math.max(r,n.node(d.v).out+=g),a=Math.max(a,n.node(d.w).in+=g)});const s=[],c=r+a+3;for(let d=0;d<c;d++)s.push(new JZ);const p=a+1;return n.nodes().forEach(d=>{Iw(s,p,n.node(d))}),{buckets:s,zeroIdx:p,graph:n}},Iw=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},oJ=e=>{const t=a=>r=>{var s;return((s=a.edge(r))===null||s===void 0?void 0:s.weight)||1},n=e.graph().acyclicer==="greedy"?tJ(e,t(e)):iJ(e);n==null||n.forEach(a=>{const r=e.edge(a);e.removeEdgeObj(a),r.forwardName=a.name,r.reversed=!0,e.setEdge(a.w,a.v,r,`rev-${Math.random()}`)})},iJ=e=>{const t=[],n={},a={},r=s=>{var c;a[s]||(a[s]=!0,n[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.forEach(p=>{n[p.w]?t.push(p):r(p.w)}),delete n[s])};return e.nodes().forEach(r),t},aJ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const a=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,a)}})},yA={run:oJ,undo:aJ};class Rf extends Vv{}const lJ=(e,t)=>Number(e)-Number(t),Gv=(e,t,n,a)=>{let r;do r=`${a}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},sJ=e=>{const t=new Rf().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const a=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:a.weight+r.weight,minlen:Math.max(a.minlen,r.minlen)})}),t},TN=e=>{const t=new Rf({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var a;!((a=e.children(n))===null||a===void 0)&&a.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},uJ=(e,t)=>e==null?void 0:e.reduce((n,a,r)=>(n[a]=t[r],n),{}),gA=(e,t)=>{const n=Number(e.x),a=Number(e.y),r=Number(t.x)-n,s=Number(t.y)-a;let c=Number(e.width)/2,p=Number(e.height)/2;if(!r&&!s)return{x:0,y:0};let d,_;return Math.abs(s)*c>Math.abs(r)*p?(s<0&&(p=-p),d=p*r/s,_=p):(r<0&&(c=-c),d=c,_=c*s/r),{x:n+d,y:a+_}},Um=e=>{const t=[],n=MN(e)+1;for(let a=0;a<n;a++)t.push([]);e.nodes().forEach(a=>{const r=e.node(a);if(!r)return;const s=r.rank;s!==void 0&&t[s]&&t[s].push(a)});for(let a=0;a<n;a++)t[a]=t[a].sort((r,s)=>{var c,p;return lJ((c=e.node(r))===null||c===void 0?void 0:c.order,(p=e.node(s))===null||p===void 0?void 0:p.order)});return t},cJ=e=>{const t=e.nodes().filter(a=>{var r;return((r=e.node(a))===null||r===void 0?void 0:r.rank)!==void 0}).map(a=>e.node(a).rank),n=Math.min(...t);e.nodes().forEach(a=>{const r=e.node(a);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},fJ=e=>{const t=e.nodes(),n=t.filter(p=>{var d;return((d=e.node(p))===null||d===void 0?void 0:d.rank)!==void 0}).map(p=>e.node(p).rank),a=Math.min(...n),r=[];t.forEach(p=>{var d;const _=(((d=e.node(p))===null||d===void 0?void 0:d.rank)||0)-a;r[_]||(r[_]=[]),r[_].push(p)});let s=0;const c=e.graph().nodeRankFactor||0;for(let p=0;p<r.length;p++){const d=r[p];d===void 0?p%c!==0&&(s-=1):s&&(d==null||d.forEach(_=>{const g=e.node(_);g&&(g.rank=g.rank||0,g.rank+=s)}))}},_A=(e,t,n,a)=>{const r={width:0,height:0};return Kg(n)&&Kg(a)&&(r.rank=n,r.order=a),Gv(e,"border",r,t)},MN=e=>{let t;return e.nodes().forEach(n=>{var a;const r=(a=e.node(n))===null||a===void 0?void 0:a.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},dJ=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(a=>{t(a)?n.lhs.push(a):n.rhs.push(a)}),n},kN=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},NN=(e,t)=>t(),BE=(e,t)=>e.reduce((n,a)=>{const r=t(n),s=t(a);return r>s?a:n}),pJ=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>hJ(e,t))},hJ=(e,t)=>{let n=t.v,a=e.node(n).rank;const r=t.w,s=e.node(r).rank,c=t.name,p=e.edge(t),d=p.labelRank;if(s===a+1)return;e.removeEdgeObj(t);const _=e.graph();let g,b,S;for(S=0,++a;a<s;++S,++a)p.points=[],b={edgeLabel:p,width:0,height:0,edgeObj:t,rank:a},g=Gv(e,"edge",b,"_d"),a===d&&(b.width=p.width,b.height=p.height,b.dummy="edge-label",b.labelpos=p.labelpos),e.setEdge(n,g,{weight:p.weight},c),S===0&&(_.dummyChains||(_.dummyChains=[]),_.dummyChains.push(g)),n=g;e.setEdge(n,r,{weight:p.weight},c)},vJ=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let a=e.node(n);const r=a.edgeLabel;let s;a.edgeObj&&e.setEdgeObj(a.edgeObj,r);let c=n;for(;a.dummy;)s=e.successors(c)[0],e.removeNode(c),r.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height),c=s,a=e.node(c)})},bA={run:pJ,undo:vJ},PN=e=>{var t;const n={},a=r=>{var s;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let p;return(s=e.outEdges(r))===null||s===void 0||s.forEach(d=>{const _=a(d.w),g=e.edge(d).minlen,b=_-g;b&&(p===void 0||b<p)&&(p=b)}),p||(p=0),c.rank=p,p};(t=e.sources())===null||t===void 0||t.forEach(r=>a(r))},mJ=e=>{var t;const n={};let a;const r=p=>{var d;const _=e.node(p);if(!_)return 0;if(n[p])return _.rank;n[p]=!0;let g;return(d=e.outEdges(p))===null||d===void 0||d.forEach(b=>{const S=r(b.w),T=e.edge(b).minlen,A=S-T;A&&(g===void 0||A<g)&&(g=A)}),g||(g=0),(a===void 0||g<a)&&(a=g),_.rank=g,g};(t=e.sources())===null||t===void 0||t.forEach(p=>{e.node(p)&&r(p)}),a===void 0&&(a=0);const s={},c=(p,d)=>{var _;const g=e.node(p),b=isNaN(g.layer)?d:g.layer;(g.rank===void 0||g.rank<b)&&(g.rank=b),!s[p]&&(s[p]=!0,(_=e.outEdges(p))===null||_===void 0||_.map(S=>{c(S.w,b+e.edge(S).minlen)}))};e.nodes().forEach(p=>{const d=e.node(p);d&&(isNaN(d.layer)?d.rank-=a:c(p,d.layer))})},zd=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,yJ=e=>{const t=new Rf({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});let r,s;for(;gJ(t,e)<a;)r=RN(t,e),s=t.hasNode(r.v)?zd(e,r):-zd(e,r),CN(t,e,s);return t},gJ=(e,t)=>{const n=a=>{t.nodeEdges(a).forEach(r=>{const s=r.v,c=a===s?r.w:s;!e.hasNode(c)&&!zd(t,r)&&(e.setNode(c,{}),e.setEdge(a,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},_J=e=>{const t=new Rf({directed:!1}),n=e.nodes()[0],a=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,s;for(;bJ(t,e)<a;)r=RN(t,e),s=t.hasNode(r.v)?zd(e,r):-zd(e,r),CN(t,e,s);return t},bJ=(e,t)=>{const n=a=>{var r;(r=t.nodeEdges(a))===null||r===void 0||r.forEach(s=>{const c=s.v,p=a===c?s.w:c;!e.hasNode(p)&&(t.node(p).layer!==void 0||!zd(t,s))&&(e.setNode(p,{}),e.setEdge(a,p,{}),n(p))})};return e.nodes().forEach(n),e.nodeCount()},RN=(e,t)=>BE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?zd(t,n):1/0),CN=(e,t,n)=>{e.nodes().forEach(a=>{t.node(a).rank||(t.node(a).rank=0),t.node(a).rank+=n})},{preorder:wJ,postorder:EJ}=ZZ,OJ=e=>{const t=sJ(e);PN(t);const n=yJ(t);jN(n),DN(n,t);let a,r;for(;a=AJ(n);)r=TJ(n,t,a),MJ(n,t,a,r)},DN=(e,t)=>{let n=EJ(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(a=>{SJ(e,t,a)})},SJ=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=xJ(e,t,n)},xJ=(e,t,n)=>{var a;const s=e.node(n).parent;let c=!0,p=t.edgeFromArgs(n,s),d=0;return p||(c=!1,p=t.edgeFromArgs(s,n)),d=p.weight,(a=t.nodeEdges(n))===null||a===void 0||a.forEach(_=>{const g=_.v===n,b=g?_.w:_.v;if(b!==s){const S=g===c,T=t.edge(_).weight;if(d+=S?T:-T,NJ(e,n,b)){const A=e.edgeFromArgs(n,b).cutvalue;d+=S?-A:A}}}),d},jN=(e,t=e.nodes()[0])=>{IN(e,{},1,t)},IN=(e,t,n,a,r)=>{var s;const c=n;let p=n;const d=e.node(a);return t[a]=!0,(s=e.neighbors(a))===null||s===void 0||s.forEach(_=>{t[_]||(p=IN(e,t,p,_,a))}),d.low=c,d.lim=p++,r?d.parent=r:delete d.parent,p},AJ=e=>e.edges().find(t=>e.edge(t).cutvalue<0),TJ=(e,t,n)=>{let a=n.v,r=n.w;t.hasEdge(a,r)||(a=n.w,r=n.v);const s=e.node(a),c=e.node(r);let p=s,d=!1;s.lim>c.lim&&(p=c,d=!0);const _=t.edges().filter(g=>d===wA(e,e.node(g.v),p)&&d!==wA(e,e.node(g.w),p));return BE(_,g=>zd(t,g))},MJ=(e,t,n,a)=>{const r=n.v,s=n.w;e.removeEdge(r,s),e.setEdge(a.v,a.w,{}),jN(e),DN(e,t),kJ(e,t)},kJ=(e,t)=>{const n=e.nodes().find(r=>{var s;return!(!((s=t.node(r))===null||s===void 0)&&s.parent)});let a=wJ(e,n);a=a==null?void 0:a.slice(1),a==null||a.forEach(r=>{const s=e.node(r).parent;let c=t.edgeFromArgs(r,s),p=!1;c||(c=t.edgeFromArgs(s,r),p=!0),t.node(r).rank=t.node(s).rank+(p?c.minlen:-c.minlen)})},NJ=(e,t,n)=>e.hasEdge(t,n),wA=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,PJ=e=>{switch(e.graph().ranker){case"network-simplex":CJ(e);break;case"tight-tree":EA(e);break;case"longest-path":RJ(e);break;default:EA(e)}},RJ=PN,EA=e=>{mJ(e),_J(e)},CJ=e=>{OJ(e)},DJ=e=>{var t;const n={};let a=0;const r=s=>{var c;const p=a;(c=e.children(s))===null||c===void 0||c.forEach(r),n[s]={low:p,lim:a++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},jJ=(e,t,n,a)=>{const r=[],s=[],c=Math.min(t[n].low,t[a].low),p=Math.max(t[n].lim,t[a].lim);let d,_;d=n;do d=e.parent(d),r.push(d);while(d&&(t[d].low>c||p>t[d].lim));for(_=d,d=a;d&&d!==_;)s.push(d),d=e.parent(d);return{lca:_,path:r.concat(s.reverse())}},IJ=e=>{var t;const n=DJ(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(a=>{var r,s;let c=a,p=e.node(c);const d=p.edgeObj;if(!d)return;const _=jJ(e,n,d.v,d.w),g=_.path,b=_.lca;let S=0,T=g[S],A=!0;for(;c!==d.w;){if(p=e.node(c),A){for(;T!==b&&((r=e.node(T))===null||r===void 0?void 0:r.maxRank)<p.rank;)S++,T=g[S];T===b&&(A=!1)}if(!A){for(;S<g.length-1&&((s=e.node(g[S+1]))===null||s===void 0?void 0:s.minRank)<=p.rank;)S++;T=g[S]}e.setParent(c,T),c=e.successors(c)[0]}})},LJ=e=>{var t;const n=Gv(e,"root",{},"_root"),a=$J(e);let r=Math.max(...Object.values(a));Math.abs(r)===1/0&&(r=1);const s=r-1,c=2*s+1;e.graph().nestingRoot=n,e.edges().forEach(d=>{e.edge(d).minlen*=c});const p=FJ(e)+1;(t=e.children())===null||t===void 0||t.forEach(d=>{LN(e,n,c,p,s,a,d)}),e.graph().nodeRankFactor=c},LN=(e,t,n,a,r,s,c)=>{const p=e.children(c);if(!(p!=null&&p.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const d=_A(e,"_bt"),_=_A(e,"_bb"),g=e.node(c);e.setParent(d,c),g.borderTop=d,e.setParent(_,c),g.borderBottom=_,p==null||p.forEach(b=>{LN(e,t,n,a,r,s,b);const S=e.node(b),T=S.borderTop?S.borderTop:b,A=S.borderBottom?S.borderBottom:b,O=S.borderTop?a:2*a,E=T!==A?1:r-s[c]+1;e.setEdge(d,T,{minlen:E,weight:O,nestingEdge:!0}),e.setEdge(A,_,{minlen:E,weight:O,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,d,{weight:0,minlen:r+s[c]})},$J=e=>{var t;const n={},a=(r,s)=>{const c=e.children(r);c==null||c.forEach(p=>a(p,s+1)),n[r]=s};return(t=e.children())===null||t===void 0||t.forEach(r=>a(r,1)),n},FJ=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},BJ=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},OA={run:LJ,cleanup:BJ},UJ=e=>{var t;const n=a=>{const r=e.children(a),s=e.node(a);if(r!=null&&r.length&&r.forEach(c=>n(c)),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let c=s.minRank,p=s.maxRank+1;c<p;c+=1)SA(e,"borderLeft","_bl",a,s,c),SA(e,"borderRight","_br",a,s,c)}};(t=e.children())===null||t===void 0||t.forEach(a=>n(a))},SA=(e,t,n,a,r,s)=>{const c={rank:s,borderType:t,width:0,height:0},p=r[t][s-1],d=Gv(e,"border",c,n);r[t][s]=d,e.setParent(d,a),p&&e.setEdge(p,d,{weight:1})},VJ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&$N(e)},GJ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&zJ(e),(n==="lr"||n==="rl")&&(WJ(e),$N(e))},$N=e=>{e.nodes().forEach(t=>{xA(e.node(t))}),e.edges().forEach(t=>{xA(e.edge(t))})},xA=e=>{const t=e.width;e.width=e.height,e.height=t},zJ=e=>{e.nodes().forEach(t=>{j1(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>j1(r)),a.hasOwnProperty("y")&&j1(a)})},j1=e=>{e!=null&&e.y&&(e.y=-e.y)},WJ=e=>{e.nodes().forEach(t=>{I1(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>I1(r)),a.hasOwnProperty("x")&&I1(a)})},I1=e=>{const t=e.x;e.x=e.y,e.y=t},AA={adjust:VJ,undo:GJ};function HJ(e){return Array.isArray(e)}function Lw(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],a=1;a<t;a++)n=Math.max(n,e[a]);return n}const TA=function(e){if(HJ(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},MA=e=>{const t={},n=e.nodes().filter(g=>{var b;return!(!((b=e.children(g))===null||b===void 0)&&b.length)}),a=n.map(g=>e.node(g).rank),r=Lw(a),s=[];for(let g=0;g<r+1;g++)s.push([]);const c=g=>{var b;if(t.hasOwnProperty(g))return;t[g]=!0;const S=e.node(g);isNaN(S.rank)||s[S.rank].push(g),(b=e.successors(g))===null||b===void 0||b.forEach(T=>c(T))},p=n.sort((g,b)=>e.node(g).rank-e.node(b).rank),_=p.filter(g=>e.node(g).fixorder!==void 0).sort((g,b)=>e.node(g).fixorder-e.node(b).fixorder);return _==null||_.forEach(g=>{isNaN(e.node(g).rank)||s[e.node(g).rank].push(g),t[g]=!0}),p==null||p.forEach(c),s},XJ=(e,t,n)=>{const a=uJ(n,n.map((g,b)=>b)),s=t.map(g=>{var b;const S=(b=e.outEdges(g))===null||b===void 0?void 0:b.map(T=>({pos:a[T.w]||0,weight:e.edge(T).weight}));return S==null?void 0:S.sort((T,A)=>T.pos-A.pos)}).flat().filter(g=>g!==void 0);let c=1;for(;c<n.length;)c<<=1;const p=2*c-1;c-=1;const d=Array(p).fill(0,0,p);let _=0;return s==null||s.forEach(g=>{if(g){let b=g.pos+c;d[b]+=g.weight;let S=0;for(;b>0;)b%2&&(S+=d[b+1]),b=b-1>>1,d[b]+=g.weight;_+=g.weight*S}}),_},kA=(e,t)=>{let n=0;for(let a=1;a<(t==null?void 0:t.length);a+=1)n+=XJ(e,t[a-1],t[a]);return n},qJ=(e,t,n)=>{const a=YJ(e),r=new Rf({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{var c;const p=e.node(s),d=e.parent(s);(p.rank===t||p.minRank<=t&&t<=p.maxRank)&&(r.setNode(s),r.setParent(s,d||a),(c=e[n](s))===null||c===void 0||c.forEach(_=>{const g=_.v===s?_.w:_.v,b=r.edgeFromArgs(g,s),S=b!==void 0?b.weight:0;r.setEdge(g,s,{weight:e.edge(_).weight+S})}),p.hasOwnProperty("minRank")&&r.setNode(s,{borderLeft:p.borderLeft[t],borderRight:p.borderRight[t]}))}),r},YJ=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},KJ=(e,t,n)=>{const a={};let r;n==null||n.forEach(s=>{let c=e.parent(s),p,d;for(;c;){if(p=e.parent(c),p?(d=a[p],a[p]=c):(d=r,r=c),d&&d!==c){t.setEdge(d,c);return}c=p}})},ZJ=(e,t)=>t.map(n=>{const a=e.inEdges(n);if(!(a!=null&&a.length))return{v:n};{const r={sum:0,weight:0};return a==null||a.forEach(s=>{const c=e.edge(s),p=e.node(s.v);r.sum+=c.weight*p.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),JJ=(e,t)=>{var n,a,r;const s={};e==null||e.forEach((p,d)=>{s[p.v]={i:d,indegree:0,in:[],out:[],vs:[p.v]};const _=s[p.v];p.barycenter!==void 0&&(_.barycenter=p.barycenter,_.weight=p.weight)}),(n=t.edges())===null||n===void 0||n.forEach(p=>{const d=s[p.v],_=s[p.w];d!==void 0&&_!==void 0&&(_.indegree++,d.out.push(s[p.w]))});const c=(r=(a=Object.values(s)).filter)===null||r===void 0?void 0:r.call(a,p=>!p.indegree);return QJ(c)},QJ=e=>{var t,n;const a=[],r=d=>_=>{_.merged||(_.barycenter===void 0||d.barycenter===void 0||_.barycenter>=d.barycenter)&&eQ(d,_)},s=d=>_=>{_.in.push(d),--_.indegree===0&&e.push(_)};for(;e!=null&&e.length;){const d=e.pop();a.push(d),(t=d.in.reverse())===null||t===void 0||t.forEach(_=>r(d)(_)),(n=d.out)===null||n===void 0||n.forEach(_=>s(d)(_))}const c=a.filter(d=>!d.merged),p=["vs","i","barycenter","weight"];return c.map(d=>{const _={};return p==null||p.forEach(g=>{d[g]!==void 0&&(_[g]=d[g])}),_})},eQ=(e,t)=>{var n;let a=0,r=0;e.weight&&(a+=e.barycenter*e.weight,r+=e.weight),t.weight&&(a+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=a/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},tQ=(e,t,n,a)=>{const r=dJ(e,S=>{const T=S.hasOwnProperty("fixorder")&&!isNaN(S.fixorder);return a?!T&&S.hasOwnProperty("barycenter"):T||S.hasOwnProperty("barycenter")}),s=r.lhs,c=r.rhs.sort((S,T)=>-S.i- -T.i),p=[];let d=0,_=0,g=0;s==null||s.sort(nQ(!!t,!!n)),g=NA(p,c,g),s==null||s.forEach(S=>{var T;g+=(T=S.vs)===null||T===void 0?void 0:T.length,p.push(S.vs),d+=S.barycenter*S.weight,_+=S.weight,g=NA(p,c,g)});const b={vs:p.flat()};return _&&(b.barycenter=d/_,b.weight=_),b},NA=(e,t,n)=>{let a=n,r;for(;t.length&&(r=t[t.length-1]).i<=a;)t.pop(),e==null||e.push(r.vs),a++;return a},nQ=(e,t)=>(n,a)=>{if(n.fixorder!==void 0&&a.fixorder!==void 0)return n.fixorder-a.fixorder;if(n.barycenter<a.barycenter)return-1;if(n.barycenter>a.barycenter)return 1;if(t&&n.order!==void 0&&a.order!==void 0){if(n.order<a.order)return-1;if(n.order>a.order)return 1}return e?a.i-n.i:n.i-a.i},FN=(e,t,n,a,r,s)=>{var c,p,d,_;let g=e.children(t);const b=e.node(t),S=b?b.borderLeft:void 0,T=b?b.borderRight:void 0,A={};S&&(g=g==null?void 0:g.filter(j=>j!==S&&j!==T));const O=ZJ(e,g||[]);O==null||O.forEach(j=>{var U;if(!((U=e.children(j.v))===null||U===void 0)&&U.length){const L=FN(e,j.v,n,a,s);A[j.v]=L,L.hasOwnProperty("barycenter")&&oQ(j,L)}});const E=JJ(O,n);rQ(E,A),(c=E.filter(j=>j.vs.length>0))===null||c===void 0||c.forEach(j=>{const U=e.node(j.vs[0]);U&&(j.fixorder=U.fixorder,j.order=U.order)});const C=tQ(E,a,r,s);if(S&&(C.vs=[S,C.vs,T].flat(),!((p=e.predecessors(S))===null||p===void 0)&&p.length)){const j=e.node(((d=e.predecessors(S))===null||d===void 0?void 0:d[0])||""),U=e.node(((_=e.predecessors(T))===null||_===void 0?void 0:_[0])||"");C.hasOwnProperty("barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+j.order+U.order)/(C.weight+2),C.weight+=2}return C},rQ=(e,t)=>{e==null||e.forEach(n=>{var a;const r=(a=n.vs)===null||a===void 0?void 0:a.map(s=>t[s]?t[s].vs:s);n.vs=r.flat()})},oQ=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},iQ=(e,t)=>{const n=MN(e),a=[],r=[];for(let g=1;g<n+1;g++)a.push(g);for(let g=n-1;g>-1;g--)r.push(g);const s=PA(e,a,"inEdges"),c=PA(e,r,"outEdges");let p=MA(e);L1(e,p);let d=Number.POSITIVE_INFINITY,_;for(let g=0,b=0;b<4;++g,++b){RA(g%2?s:c,g%4>=2,!1,t),p=Um(e);const S=kA(e,p);S<d&&(b=0,_=Zg(p),d=S)}p=MA(e),L1(e,p);for(let g=0,b=0;b<4;++g,++b){RA(g%2?s:c,g%4>=2,!0,t),p=Um(e);const S=kA(e,p);S<d&&(b=0,_=Zg(p),d=S)}L1(e,_)},PA=(e,t,n)=>t.map(a=>qJ(e,a,n)),RA=(e,t,n,a)=>{const r=new Rf;e==null||e.forEach(s=>{var c;const p=s.graph().root,d=FN(s,p,r,t,n,a);for(let _=0;_<((c=d.vs)===null||c===void 0?void 0:c.length);_++){const g=s.node(d.vs[_]);g&&(g.order=_)}KJ(s,r,d.vs)})},L1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((a,r)=>{e.node(a).order=r})})};class aQ extends Vv{}const lQ=(e,t)=>{const n={},a=(r,s)=>{let c=0,p=0;const d=r.length,_=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((g,b)=>{var S;const T=uQ(e,g),A=T?e.node(T).order:d;(T||g===_)&&((S=s.slice(p,b+1))===null||S===void 0||S.forEach(O=>{var E;(E=e.predecessors(O))===null||E===void 0||E.forEach(C=>{var j;const U=e.node(C),L=U.order;(L<c||A<L)&&!(U.dummy&&(!((j=e.node(O))===null||j===void 0)&&j.dummy))&&BN(n,C,O)})}),p=b+1,c=A)}),s};return t!=null&&t.length&&t.reduce(a),n},sQ=(e,t)=>{const n={};function a(p,d,_,g,b){var S,T;let A;for(let O=d;O<_;O++)A=p[O],!((S=e.node(A))===null||S===void 0)&&S.dummy&&((T=e.predecessors(A))===null||T===void 0||T.forEach(E=>{const C=e.node(E);C.dummy&&(C.order<g||C.order>b)&&BN(n,E,A)}))}function r(p){return JSON.stringify(p.slice(1))}function s(p,d){const _=r(p);d.get(_)||(a(...p),d.set(_,!0))}const c=(p,d)=>{let _=-1,g,b=0;const S=new Map;return d==null||d.forEach((T,A)=>{var O;if(((O=e.node(T))===null||O===void 0?void 0:O.dummy)==="border"){const E=e.predecessors(T)||[];E.length&&(g=e.node(E[0]).order,s([d,b,A,_,g],S),b=A,_=g)}s([d,b,d.length,g,p.length],S)}),d};return t!=null&&t.length&&t.reduce(c),n},uQ=(e,t)=>{var n,a;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(a=e.predecessors(t))===null||a===void 0?void 0:a.find(r=>e.node(r).dummy)},BN=(e,t,n)=>{let a=t,r=n;if(a>r){const c=a;a=r,r=c}let s=e[a];s||(e[a]=s={}),s[r]=!0},cQ=(e,t,n)=>{let a=t,r=n;if(a>r){const s=t;a=r,r=s}return!!e[a]},fQ=(e,t,n,a)=>{const r={},s={},c={};return t==null||t.forEach(p=>{p==null||p.forEach((d,_)=>{r[d]=d,s[d]=d,c[d]=_})}),t==null||t.forEach(p=>{let d=-1;p==null||p.forEach(_=>{let g=a(_);if(g.length){g=g.sort((S,T)=>c[S]-c[T]);const b=(g.length-1)/2;for(let S=Math.floor(b),T=Math.ceil(b);S<=T;++S){const A=g[S];s[_]===_&&d<c[A]&&!cQ(n,_,A)&&(s[A]=_,s[_]=r[_]=r[A],d=c[A])}}})}),{root:r,align:s}},dQ=(e,t,n,a,r)=>{var s;const c={},p=pQ(e,t,n,r),d=r?"borderLeft":"borderRight",_=(S,T)=>{let A=p.nodes(),O=A.pop();const E={};for(;O;)E[O]?S(O):(E[O]=!0,A.push(O),A=A.concat(T(O))),O=A.pop()},g=S=>{c[S]=(p.inEdges(S)||[]).reduce((T,A)=>Math.max(T,(c[A.v]||0)+p.edge(A)),0)},b=S=>{const T=(p.outEdges(S)||[]).reduce((O,E)=>Math.min(O,(c[E.w]||0)-p.edge(E)),Number.POSITIVE_INFINITY),A=e.node(S);T!==Number.POSITIVE_INFINITY&&A.borderType!==d&&(c[S]=Math.max(c[S],T))};return _(g,p.predecessors.bind(p)),_(b,p.successors.bind(p)),(s=Object.values(a))===null||s===void 0||s.forEach(S=>{c[S]=c[n[S]]}),c},pQ=(e,t,n,a)=>{const r=new aQ,s=e.graph(),c=yQ(s.nodesep,s.edgesep,a);return t==null||t.forEach(p=>{let d;p==null||p.forEach(_=>{const g=n[_];if(r.setNode(g),d){const b=n[d],S=r.edgeFromArgs(b,g);r.setEdge(b,g,Math.max(c(e,_,d),S||0))}d=_})}),r},hQ=(e,t)=>BE(Object.values(t),n=>{var a;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(a=Object.keys(n))===null||a===void 0||a.forEach(c=>{const p=n[c],d=gQ(e,c)/2;r=Math.max(p+d,r),s=Math.min(p-d,s)}),r-s});function vQ(e,t){const n=Object.values(t),a=TA(n),r=Lw(n);["u","d"].forEach(s=>{["l","r"].forEach(c=>{const p=s+c,d=e[p];let _;if(d===t)return;const g=Object.values(d);_=c==="l"?a-TA(g):r-Lw(g),_&&(e[p]={},Object.keys(d).forEach(b=>{e[p][b]=d[b]+_}))})})}const mQ=(e,t)=>{const n={};return Object.keys(e.ul).forEach(a=>{if(t)n[a]=e[t.toLowerCase()][a];else{const r=Object.values(e).map(s=>s[a]);n[a]=(r[0]+r[1])/2}}),n},yQ=(e,t,n)=>(a,r,s)=>{const c=a.node(r),p=a.node(s);let d=0,_;if(d+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":_=-c.width/2;break;case"r":_=c.width/2;break}if(_&&(d+=n?_:-_),_=0,d+=(c.dummy?t:e)/2,d+=(p.dummy?t:e)/2,d+=p.width/2,p.labelpos)switch((p.labelpos||"").toLowerCase()){case"l":_=p.width/2;break;case"r":_=-p.width/2;break}return _&&(d+=n?_:-_),_=0,d},gQ=(e,t)=>e.node(t).width||0,_Q=e=>{const t=Um(e),n=e.graph().ranksep;let a=0;t==null||t.forEach(r=>{const s=r.map(p=>e.node(p).height),c=Math.max(...s,0);r==null||r.forEach(p=>{e.node(p).y=a+c/2}),a+=c+n})},bQ=e=>{const t=Um(e),n=Object.assign(lQ(e,t),sQ(e,t)),a={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(p=>{p==="r"&&(r=r.map(b=>Object.values(b).reverse()));const d=(c==="u"?e.predecessors:e.successors).bind(e),_=fQ(e,r,n,d),g=dQ(e,r,_.root,_.align,p==="r");p==="r"&&Object.keys(g).forEach(b=>g[b]=-g[b]),a[c+p]=g})});const s=hQ(e,a);return s&&vQ(a,s),mQ(a,e.graph().align)},wQ=e=>{var t;const n=TN(e);_Q(n);const a=bQ(n);(t=Object.keys(a))===null||t===void 0||t.forEach(r=>{n.node(r).x=a[r]})},EQ=(e,t)=>{const a=e.nodes().filter(c=>{var p;return!(!((p=e.children(c))===null||p===void 0)&&p.length)}).map(c=>e.node(c).rank),r=Math.max(...a),s=[];for(let c=0;c<r+1;c++)s[c]=[];t==null||t.forEach(c=>{const p=e.node(c);!p||p!=null&&p.dummy||isNaN(p.rank)||(p.fixorder=s[p.rank].length,s[p.rank].push(c))})},OQ=(e,t)=>{const n=t&&t.debugTiming?kN:NN;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{xQ(e,t.prevGraph)});const a=n("  buildLayoutGraph",()=>CQ(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{DQ(a)});try{n("  runLayout",()=>{SQ(a,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{AQ(e,a)})})},SQ=(e,t,n)=>{t("    removeSelfEdges",()=>{GQ(e)}),t("    acyclic",()=>{yA.run(e)}),t("    nestingGraph.run",()=>{OA.run(e)}),t("    rank",()=>{PJ(TN(e))}),t("    injectEdgeLabelProxies",()=>{jQ(e)}),t("    removeEmptyRanks",()=>{fJ(e)}),t("    nestingGraph.cleanup",()=>{OA.cleanup(e)}),t("    normalizeRanks",()=>{cJ(e)}),t("    assignRankMinMax",()=>{IQ(e)}),t("    removeEdgeLabelProxies",()=>{LQ(e)}),t("    normalize.run",()=>{bA.run(e)}),t("    parentDummyChains",()=>{IJ(e)}),t("    addBorderSegments",()=>{UJ(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{EQ(e,n.nodeOrder)}),t("    order",()=>{iQ(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{zQ(e)}),t("    adjustCoordinateSystem",()=>{AA.adjust(e)}),t("    position",()=>{wQ(e)}),t("    positionSelfEdges",()=>{WQ(e)}),t("    removeBorderNodes",()=>{VQ(e)}),t("    normalize.undo",()=>{bA.undo(e)}),t("    fixupEdgeLabelCoords",()=>{BQ(e)}),t("    undoCoordinateSystem",()=>{AA.undo(e)}),t("    translateGraph",()=>{$Q(e)}),t("    assignNodeIntersects",()=>{FQ(e)}),t("    reversePoints",()=>{UQ(e)}),t("    acyclic.undo",()=>{yA.undo(e)})},xQ=(e,t)=>{e.nodes().forEach(n=>{const a=e.node(n),r=t.node(n);r!==void 0?(a.fixorder=r._order,delete r._order):delete a.fixorder})},AQ=(e,t)=>{e.nodes().forEach(n=>{var a;const r=e.node(n);if(r){const s=t.node(n);r.x=s.x,r.y=s.y,r._order=s.order,r._rank=s.rank,!((a=t.children(n))===null||a===void 0)&&a.length&&(r.width=s.width,r.height=s.height)}}),e.edges().forEach(n=>{const a=e.edge(n),r=t.edge(n);a.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(a.x=r.x,a.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},TQ=["nodesep","edgesep","ranksep","marginx","marginy"],MQ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},$1=["acyclicer","ranker","rankdir","align"],kQ=["width","height","layer","fixorder"],NQ={width:0,height:0},PQ=["minlen","weight","width","height","labeloffset"],RQ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},F1=["labelpos"],CQ=e=>{const t=new Rf({multigraph:!0,compound:!0}),n=U1(e.graph()),a={};return $1==null||$1.forEach(r=>{n[r]!==void 0&&(a[r]=n[r])}),t.setGraph(Object.assign({},MQ,B1(n,TQ),a)),e.nodes().forEach(r=>{const s=U1(e.node(r)),c=Object.assign(Object.assign({},NQ),s),p=B1(c,kQ);t.setNode(r,p),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const s=U1(e.edge(r)),c={};F1==null||F1.forEach(p=>{s[p]!==void 0&&(c[p]=s[p])}),t.setEdgeObj(r,Object.assign({},RQ,B1(s,PQ),c))}),t},DQ=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const a=e.node(n);isNaN(a.layer)||a.layer||(a.layer=0)}),e.edges().forEach(n=>{var a;const r=e.edge(n);r.minlen*=2,((a=r.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},jQ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const a=e.node(t.v),r=e.node(t.w),s={e:t,rank:(r.rank-a.rank)/2+a.rank};Gv(e,"edge-proxy",s,"_ep")}})},IQ=e=>{let t=0;e.nodes().forEach(n=>{var a,r;const s=e.node(n);s.borderTop&&(s.minRank=(a=e.node(s.borderTop))===null||a===void 0?void 0:a.rank,s.maxRank=(r=e.node(s.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,s.maxRank||-1/0))}),e.graph().maxRank=t},LQ=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},$Q=e=>{let t,n=0,a,r=0;const s=e.graph(),c=s.marginx||0,p=s.marginy||0,d=_=>{if(!_)return;const g=_.x,b=_.y,S=_.width,T=_.height;!isNaN(g)&&!isNaN(S)&&(t===void 0&&(t=g-S/2),t=Math.min(t,g-S/2),n=Math.max(n,g+S/2)),!isNaN(b)&&!isNaN(T)&&(a===void 0&&(a=b-T/2),a=Math.min(a,b-T/2),r=Math.max(r,b+T/2))};e.nodes().forEach(_=>{d(e.node(_))}),e.edges().forEach(_=>{const g=e.edge(_);g!=null&&g.hasOwnProperty("x")&&d(g)}),t-=c,a-=p,e.nodes().forEach(_=>{const g=e.node(_);g&&(g.x-=t,g.y-=a)}),e.edges().forEach(_=>{var g;const b=e.edge(_);(g=b.points)===null||g===void 0||g.forEach(S=>{S.x-=t,S.y-=a}),b.hasOwnProperty("x")&&(b.x-=t),b.hasOwnProperty("y")&&(b.y-=a)}),s.width=n-t+c,s.height=r-a+p},FQ=e=>{e.edges().forEach(t=>{const n=e.edge(t),a=e.node(t.v),r=e.node(t.w);let s,c;n.points?(s=n.points[0],c=n.points[n.points.length-1]):(n.points=[],s=r,c=a),n.points.unshift(gA(a,s)),n.points.push(gA(r,c))})},BQ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},UQ=e=>{e.edges().forEach(t=>{var n;const a=e.edge(t);a.reversed&&((n=a.points)===null||n===void 0||n.reverse())})},VQ=e=>{e.nodes().forEach(t=>{var n,a,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const s=e.node(t),c=e.node(s.borderTop),p=e.node(s.borderBottom),d=e.node(s.borderLeft[((a=s.borderLeft)===null||a===void 0?void 0:a.length)-1]),_=e.node(s.borderRight[((r=s.borderRight)===null||r===void 0?void 0:r.length)-1]);s.width=Math.abs((_==null?void 0:_.x)-(d==null?void 0:d.x))||10,s.height=Math.abs((p==null?void 0:p.y)-(c==null?void 0:c.y))||10,s.x=((d==null?void 0:d.x)||0)+s.width/2,s.y=((c==null?void 0:c.y)||0)+s.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},GQ=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},zQ=e=>{const t=Um(e);t==null||t.forEach(n=>{let a=0;n==null||n.forEach((r,s)=>{var c;const p=e.node(r);p.order=s+a,(c=p.selfEdges)===null||c===void 0||c.forEach(d=>{Gv(e,"selfedge",{width:d.label.width,height:d.label.height,rank:p.rank,order:s+ ++a,e:d.e,label:d.label},"_se")}),delete p.selfEdges})})},WQ=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const a=e.node(n.e.v),r=a.x+a.width/2,s=a.y,c=n.x-r,p=a.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:s-p},{x:r+5*c/6,y:s-p},{y:s,x:r+c},{x:r+5*c/6,y:s+p},{x:r+2*c/3,y:s+p}],n.label.x=n.x,n.label.y=n.y}})},B1=(e,t)=>{const n={};return t==null||t.forEach(a=>{e[a]!==void 0&&(n[a]=+e[a])}),n},U1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},HQ={layout:OQ,util:{time:kN,notime:NN}};class XQ extends fZ{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const a=this,{nodes:r}=a,s=r.find(c=>c.id===n);return s?s.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,a,r;const s=this,{nodes:c,nodeSize:p,rankdir:d,combos:_,begin:g,radial:b,comboEdges:S=[],vedges:T=[]}=s;if(!c)return;const A=s.edges||[],O=new Rf({multigraph:!0,compound:!0});s.nodeMap={};const E={};c.forEach(q=>{s.nodeMap[q.id]=q,q.comboId&&(E[q.comboId]=E[q.comboId]||[],E[q.comboId].push(q.id))});let C=[];const j={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(q=>{j[q]=!0,C.push(s.nodeMap[q])}),c.forEach(q=>{j[q.id]||C.push(q)})):C=c;let U;p?lA(p)?U=()=>p:U=()=>[p,p]:U=q=>q.size?lA(q.size)?q.size:bN(q.size)?[q.size.width||40,q.size.height||40]:[q.size,q.size]:[40,40];const L=sA(s.ranksep,50,s.ranksepFunc),V=sA(s.nodesep,50,s.nodesepFunc);let $=V,H=L;(d==="LR"||d==="RL")&&($=L,H=V),O.setDefaultEdgeLabel(()=>({})),O.setGraph(s);const Y={};this.sortByCombo&&_&&_.forEach(q=>{if(Y[q.id]=q,q.collapsed){const J=U(q),ce=H(q),re=$(q),Pe=J[0]+2*re,ge=J[1]+2*ce;O.setNode(q.id,{width:Pe,height:ge})}q.parentId&&(Y[q.parentId]||O.setNode(q.parentId,{}),O.setParent(q.id,q.parentId))}),C.filter(q=>q.layout!==!1).forEach(q=>{const J=U(q),ce=H(q),re=$(q),Pe=J[0]+2*re,ge=J[1]+2*ce,fe=q.layer;Kg(fe)?O.setNode(q.id,{width:Pe,height:ge,layer:fe}):O.setNode(q.id,{width:Pe,height:ge}),this.sortByCombo&&q.comboId&&(Y[q.comboId]||(Y[q.comboId]={id:q.comboId},O.setNode(q.comboId,{})),O.setParent(q.id,q.comboId))}),A.forEach(q=>{const J=ov(q,"source"),ce=ov(q,"target");this.layoutNode(J)&&this.layoutNode(ce)&&O.setEdge(J,ce,{weight:q.weight||1})}),(n=S==null?void 0:S.concat(T||[]))===null||n===void 0||n.forEach(q=>{var J,ce;const{source:re,target:Pe}=q,ge=!((J=Y[re])===null||J===void 0)&&J.collapsed?[re]:E[re]||[re],fe=!((ce=Y[Pe])===null||ce===void 0)&&ce.collapsed?[Pe]:E[Pe]||[Pe];ge.forEach(Ee=>{fe.forEach(Ne=>{O.setEdge(Ee,Ne,{weight:q.weight||1})})})});let z;!((a=s.preset)===null||a===void 0)&&a.nodes&&(z=new Rf({multigraph:!0,compound:!0}),s.preset.nodes.forEach(q=>{z==null||z.setNode(q.id,q)})),HQ.layout(O,{prevGraph:z,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});const W=[0,0];if(g){let q=1/0,J=1/0;O.nodes().forEach(ce=>{const re=O.node(ce);q>re.x&&(q=re.x),J>re.y&&(J=re.y)}),O.edges().forEach(ce=>{var re;(re=O.edge(ce).points)===null||re===void 0||re.forEach(ge=>{q>ge.x&&(q=ge.x),J>ge.y&&(J=ge.y)})}),W[0]=g[0]-q,W[1]=g[1]-J}const B=d==="LR"||d==="RL";if(b){const{focusNode:q,ranksep:J,getRadialPos:ce}=this,re=dZ(q)?q:q==null?void 0:q.id,Pe=re?(r=O.node(re))===null||r===void 0?void 0:r._rank:0,ge=[],fe=B?"y":"x",Ee=B?"height":"width";let Ne=1/0,rt=-1/0;O.nodes().forEach(Ae=>{const $e=O.node(Ae);if(!s.nodeMap[Ae])return;const vt=V(s.nodeMap[Ae]);if(Pe===0)ge[$e._rank]||(ge[$e._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),ge[$e._rank].nodes.push(Ae),ge[$e._rank].totalWidth+=vt*2+$e[Ee],ge[$e._rank].maxSize<Math.max($e.width,$e.height)&&(ge[$e._rank].maxSize=Math.max($e.width,$e.height));else{const rn=$e._rank-Pe;if(rn===0)ge[rn]||(ge[rn]={nodes:[],totalWidth:0,maxSize:-1/0}),ge[rn].nodes.push(Ae),ge[rn].totalWidth+=vt*2+$e[Ee],ge[rn].maxSize<Math.max($e.width,$e.height)&&(ge[rn].maxSize=Math.max($e.width,$e.height));else{const Kt=Math.abs(rn);ge[Kt]||(ge[Kt]={left:[],right:[],totalWidth:0,maxSize:-1/0}),ge[Kt].totalWidth+=vt*2+$e[Ee],ge[Kt].maxSize<Math.max($e.width,$e.height)&&(ge[Kt].maxSize=Math.max($e.width,$e.height)),rn<0?ge[Kt].left.push(Ae):ge[Kt].right.push(Ae)}}const Ut=$e[fe]-$e[Ee]/2-vt,Et=$e[fe]+$e[Ee]/2+vt;Ut<Ne&&(Ne=Ut),Et>rt&&(rt=Et)});let mt=J||50;const Je={},Xt=(rt-Ne)/.9,en=[(Ne+rt-Xt)*.5,(Ne+rt+Xt)*.5],Bt=(Ae,$e,vt=-1/0,Ut=[0,1])=>{let Et=vt;return Ae.forEach(rn=>{const Kt=O.node(rn);Je[rn]=$e;const{x:Pn,y:yn}=ce(Kt[fe],en,Xt,$e,Ut);if(!s.nodeMap[rn])return;s.nodeMap[rn].x=Pn+W[0],s.nodeMap[rn].y=yn+W[1],s.nodeMap[rn]._order=Kt._order;const dt=L(s.nodeMap[rn]);Et<dt&&(Et=dt)}),Et};let Nn=!0;const Ue=0;ge.forEach(Ae=>{var $e,vt,Ut,Et,rn,Kt,Pn;if(!(!(($e=Ae==null?void 0:Ae.nodes)===null||$e===void 0)&&$e.length)&&!(!((vt=Ae==null?void 0:Ae.left)===null||vt===void 0)&&vt.length)&&!(!((Ut=Ae==null?void 0:Ae.right)===null||Ut===void 0)&&Ut.length))return;if(Nn&&Ae.nodes.length===1){const dt=Ae.nodes[0];if(!s.nodeMap[dt])return;s.nodeMap[dt].x=W[0],s.nodeMap[dt].y=W[1],Je[Ae.nodes[0]]=0,mt=L(s.nodeMap[dt]),Nn=!1;return}mt=Math.max(mt,Ae.totalWidth/(2*Math.PI));let yn=-1/0;if(Pe===0||!((Et=Ae.nodes)===null||Et===void 0)&&Et.length)yn=Bt(Ae.nodes,mt,yn,[0,1]);else{const dt=((rn=Ae.left)===null||rn===void 0?void 0:rn.length)/(((Kt=Ae.left)===null||Kt===void 0?void 0:Kt.length)+((Pn=Ae.right)===null||Pn===void 0?void 0:Pn.length));yn=Bt(Ae.left,mt,yn,[0,dt]),yn=Bt(Ae.right,mt,yn,[dt+.05,1])}mt+=yn,Nn=!1,Ue-Ae.maxSize}),O.edges().forEach(Ae=>{var $e,vt,Ut;const Et=O.edge(Ae),rn=A.findIndex(Kt=>{const Pn=ov(Kt,"source"),yn=ov(Kt,"target");return Pn===Ae.v&&yn===Ae.w});if(!(rn<=-1)&&s.edgeLabelSpace&&s.controlPoints&&A[rn].type!=="loop"){const Kt=fe==="x"?"y":"x",Pn=($e=Et==null?void 0:Et.points)===null||$e===void 0?void 0:$e.slice(1,Et.points.length-1),yn=[],dt=(vt=O.node(Ae.v))===null||vt===void 0?void 0:vt[Kt],An=dt-((Ut=O.node(Ae.w))===null||Ut===void 0?void 0:Ut[Kt]),Ve=Je[Ae.v],bn=Ve-Je[Ae.w];Pn==null||Pn.forEach(lr=>{const le=(lr[Kt]-dt)/An*bn+Ve,sr=ce(lr[fe],en,Xt,le);yn.push({x:sr.x+W[0],y:sr.y+W[1]})}),A[rn].controlPoints=yn}})}else{const q=new Set,ce=d==="BT"||d==="RL"?(fe,Ee)=>Ee-fe:(fe,Ee)=>fe-Ee;O.nodes().forEach(fe=>{const Ee=O.node(fe);if(!Ee)return;let Ne=this.nodeMap[fe];Ne||(Ne=_==null?void 0:_.find(rt=>rt.id===fe)),Ne&&(Ne.x=Ee.x+W[0],Ne.y=Ee.y+W[1],Ne._order=Ee._order,q.add(B?Ne.x:Ne.y))});const re=Array.from(q).sort(ce),Pe=B?(fe,Ee)=>fe.x!==Ee.x:(fe,Ee)=>fe.y!==Ee.y,ge=B?(fe,Ee,Ne)=>{const rt=Math.max(Ee.y,Ne.y),mt=Math.min(Ee.y,Ne.y);return fe.filter(Je=>Je.y<=rt&&Je.y>=mt)}:(fe,Ee,Ne)=>{const rt=Math.max(Ee.x,Ne.x),mt=Math.min(Ee.x,Ne.x);return fe.filter(Je=>Je.x<=rt&&Je.x>=mt)};O.edges().forEach(fe=>{var Ee;const Ne=O.edge(fe),rt=A.findIndex(mt=>{const Je=ov(mt,"source"),Xt=ov(mt,"target");return Je===fe.v&&Xt===fe.w});if(!(rt<=-1)&&s.edgeLabelSpace&&s.controlPoints&&A[rt].type!=="loop"){(Ee=Ne==null?void 0:Ne.points)===null||Ee===void 0||Ee.forEach(Xt=>{Xt.x+=W[0],Xt.y+=W[1]});const mt=s.nodeMap[fe.v],Je=s.nodeMap[fe.w];A[rt].controlPoints=qQ(Ne==null?void 0:Ne.points,mt,Je,re,B,Pe,ge)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:A}}getRadialPos(t,n,a,r,s=[0,1]){let c=(t-n[0])/a;c=c*(s[1]-s[0])+s[0];const p=c*2*Math.PI;return{x:Math.cos(p)*r,y:Math.sin(p)*r}}getType(){return"dagre"}}const qQ=(e,t,n,a,r,s,c)=>{let p=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:d,y:_}=t,{x:g,y:b}=n;if(r&&(d=t.y,_=t.x,g=n.y,b=n.x),b!==_&&d!==g){const S=a.indexOf(_),T=a[S+1];if(T){const E=p[0],C=r?{x:(_+T)/2,y:(E==null?void 0:E.y)||g}:{x:(E==null?void 0:E.x)||g,y:(_+T)/2};(!E||s(E,C))&&p.unshift(C)}const A=a.indexOf(b),O=Math.abs(A-S);if(O===1)p=c(p,t,n),p.length||p.push(r?{x:(_+b)/2,y:d}:{x:d,y:(_+b)/2});else if(O>1){const E=a[A-1];if(E){const C=p[p.length-1],j=r?{x:(b+E)/2,y:(C==null?void 0:C.y)||g}:{x:(C==null?void 0:C.x)||d,y:(b+E)/2};(!C||s(C,j))&&p.push(j)}}}}return p};var CA,DA,jA,IA;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(CA||(CA={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(DA||(DA={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(jA||(jA={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(IA||(IA={}));var fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function UE(e,t){return e(t={exports:{}},t.exports),t.exports}var YQ=function(){this.__data__=[],this.size=0},zv=function(e,t){return e===t||e!=e&&t!=t},k_=function(e,t){for(var n=e.length;n--;)if(zv(e[n][0],t))return n;return-1},KQ=Array.prototype.splice,ZQ=function(e){var t=this.__data__,n=k_(t,e);return!(n<0)&&(n==t.length-1?t.pop():KQ.call(t,n,1),--this.size,!0)},JQ=function(e){var t=this.__data__,n=k_(t,e);return n<0?void 0:t[n][1]},QQ=function(e){return k_(this.__data__,e)>-1},eee=function(e,t){var n=this.__data__,a=k_(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this};function lv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}lv.prototype.clear=YQ,lv.prototype.delete=ZQ,lv.prototype.get=JQ,lv.prototype.has=QQ,lv.prototype.set=eee;var N_=lv,tee=function(){this.__data__=new N_,this.size=0},nee=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ree=function(e){return this.__data__.get(e)},oee=function(e){return this.__data__.has(e)},UN=typeof fg=="object"&&fg&&fg.Object===Object&&fg,iee=typeof self=="object"&&self&&self.Object===Object&&self,Mu=UN||iee||Function("return this")(),$s=Mu.Symbol,VN=Object.prototype,aee=VN.hasOwnProperty,lee=VN.toString,mm=$s?$s.toStringTag:void 0,see=function(e){var t=aee.call(e,mm),n=e[mm];try{e[mm]=void 0;var a=!0}catch{}var r=lee.call(e);return a&&(t?e[mm]=n:delete e[mm]),r},uee=Object.prototype.toString,cee=function(e){return uee.call(e)},LA=$s?$s.toStringTag:void 0,qd=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":LA&&LA in Object(e)?see(e):cee(e)},Dl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},$A,ry=function(e){if(!Dl(e))return!1;var t=qd(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},V1=Mu["__core-js_shared__"],FA=($A=/[^.]+$/.exec(V1&&V1.keys&&V1.keys.IE_PROTO||""))?"Symbol(src)_1."+$A:"",fee=function(e){return!!FA&&FA in e},dee=Function.prototype.toString,lh=function(e){if(e!=null){try{return dee.call(e)}catch{}try{return e+""}catch{}}return""},pee=/^\[object .+?Constructor\]$/,hee=Function.prototype,vee=Object.prototype,mee=hee.toString,yee=vee.hasOwnProperty,gee=RegExp("^"+mee.call(yee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_ee=function(e){return!(!Dl(e)||fee(e))&&(ry(e)?gee:pee).test(lh(e))},bee=function(e,t){return e==null?void 0:e[t]},sh=function(e,t){var n=bee(e,t);return _ee(n)?n:void 0},Vm=sh(Mu,"Map"),Gm=sh(Object,"create"),wee=function(){this.__data__=Gm?Gm(null):{},this.size=0},Eee=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Oee=Object.prototype.hasOwnProperty,See=function(e){var t=this.__data__;if(Gm){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return Oee.call(t,e)?t[e]:void 0},xee=Object.prototype.hasOwnProperty,Aee=function(e){var t=this.__data__;return Gm?t[e]!==void 0:xee.call(t,e)},Tee=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Gm&&t===void 0?"__lodash_hash_undefined__":t,this};function sv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}sv.prototype.clear=wee,sv.prototype.delete=Eee,sv.prototype.get=See,sv.prototype.has=Aee,sv.prototype.set=Tee;var BA=sv,Mee=function(){this.size=0,this.__data__={hash:new BA,map:new(Vm||N_),string:new BA}},kee=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},P_=function(e,t){var n=e.__data__;return kee(t)?n[typeof t=="string"?"string":"hash"]:n.map},Nee=function(e){var t=P_(this,e).delete(e);return this.size-=t?1:0,t},Pee=function(e){return P_(this,e).get(e)},Ree=function(e){return P_(this,e).has(e)},Cee=function(e,t){var n=P_(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};function uv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}uv.prototype.clear=Mee,uv.prototype.delete=Nee,uv.prototype.get=Pee,uv.prototype.has=Ree,uv.prototype.set=Cee;var R_=uv,Dee=function(e,t){var n=this.__data__;if(n instanceof N_){var a=n.__data__;if(!Vm||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new R_(a)}return n.set(e,t),this.size=n.size,this};function cv(e){var t=this.__data__=new N_(e);this.size=t.size}cv.prototype.clear=tee,cv.prototype.delete=nee,cv.prototype.get=ree,cv.prototype.has=oee,cv.prototype.set=Dee;var _v=cv,VE=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a&&t(e[n],n,e)!==!1;);return e},Jg=function(){try{var e=sh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),C_=function(e,t,n){t=="__proto__"&&Jg?Jg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},jee=Object.prototype.hasOwnProperty,D_=function(e,t,n){var a=e[t];jee.call(e,t)&&zv(a,n)&&(n!==void 0||t in e)||C_(e,t,n)},oy=function(e,t,n,a){var r=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var p=t[s],d=void 0;d===void 0&&(d=e[p]),r?C_(n,p,d):D_(n,p,d)}return n},Iee=function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a},Au=function(e){return e!=null&&typeof e=="object"},UA=function(e){return Au(e)&&qd(e)=="[object Arguments]"},GN=Object.prototype,Lee=GN.hasOwnProperty,$ee=GN.propertyIsEnumerable,Nv=UA(function(){return arguments}())?UA:function(e){return Au(e)&&Lee.call(e,"callee")&&!$ee.call(e,"callee")},Di=Array.isArray,Fee=function(){return!1},Yp=UE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?Mu.Buffer:void 0,s=(r?r.isBuffer:void 0)||Fee;e.exports=s}),Bee=/^(?:0|[1-9]\d*)$/,j_=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&Bee.test(e))&&e>-1&&e%1==0&&e<t},GE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},li={};li["[object Float32Array]"]=li["[object Float64Array]"]=li["[object Int8Array]"]=li["[object Int16Array]"]=li["[object Int32Array]"]=li["[object Uint8Array]"]=li["[object Uint8ClampedArray]"]=li["[object Uint16Array]"]=li["[object Uint32Array]"]=!0,li["[object Arguments]"]=li["[object Array]"]=li["[object ArrayBuffer]"]=li["[object Boolean]"]=li["[object DataView]"]=li["[object Date]"]=li["[object Error]"]=li["[object Function]"]=li["[object Map]"]=li["[object Number]"]=li["[object Object]"]=li["[object RegExp]"]=li["[object Set]"]=li["[object String]"]=li["[object WeakMap]"]=!1;var Uee=function(e){return Au(e)&&GE(e.length)&&!!li[qd(e)]},I_=function(e){return function(t){return e(t)}},Pv=UE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n&&UN.process,s=function(){try{var c=a&&a.require&&a.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=s}),VA=Pv&&Pv.isTypedArray,iy=VA?I_(VA):Uee,Vee=Object.prototype.hasOwnProperty,zN=function(e,t){var n=Di(e),a=!n&&Nv(e),r=!n&&!a&&Yp(e),s=!n&&!a&&!r&&iy(e),c=n||a||r||s,p=c?Iee(e.length,String):[],d=p.length;for(var _ in e)!t&&!Vee.call(e,_)||c&&(_=="length"||r&&(_=="offset"||_=="parent")||s&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||j_(_,d))||p.push(_);return p},Gee=Object.prototype,L_=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||Gee)},WN=function(e,t){return function(n){return e(t(n))}},zee=WN(Object.keys,Object),Wee=Object.prototype.hasOwnProperty,zE=function(e){if(!L_(e))return zee(e);var t=[];for(var n in Object(e))Wee.call(e,n)&&n!="constructor"&&t.push(n);return t},jf=function(e){return e!=null&&GE(e.length)&&!ry(e)},Yd=function(e){return jf(e)?zN(e):zE(e)},Hee=function(e,t){return e&&oy(t,Yd(t),e)},Xee=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},qee=Object.prototype.hasOwnProperty,Yee=function(e){if(!Dl(e))return Xee(e);var t=L_(e),n=[];for(var a in e)(a!="constructor"||!t&&qee.call(e,a))&&n.push(a);return n},uh=function(e){return jf(e)?zN(e,!0):Yee(e)},Kee=function(e,t){return e&&oy(t,uh(t),e)},HN=UE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?Mu.Buffer:void 0,s=r?r.allocUnsafe:void 0;e.exports=function(c,p){if(p)return c.slice();var d=c.length,_=s?s(d):new c.constructor(d);return c.copy(_),_}}),XN=function(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t},qN=function(e,t){for(var n=-1,a=e==null?0:e.length,r=0,s=[];++n<a;){var c=e[n];t(c,n,e)&&(s[r++]=c)}return s},YN=function(){return[]},Zee=Object.prototype.propertyIsEnumerable,GA=Object.getOwnPropertySymbols,WE=GA?function(e){return e==null?[]:(e=Object(e),qN(GA(e),function(t){return Zee.call(e,t)}))}:YN,Jee=function(e,t){return oy(e,WE(e),t)},HE=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e},$_=WN(Object.getPrototypeOf,Object),KN=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)HE(t,WE(e)),e=$_(e);return t}:YN,Qee=function(e,t){return oy(e,KN(e),t)},ZN=function(e,t,n){var a=t(e);return Di(e)?a:HE(a,n(e))},$w=function(e){return ZN(e,Yd,WE)},ete=function(e){return ZN(e,uh,KN)},Fw=sh(Mu,"DataView"),Bw=sh(Mu,"Promise"),bv=sh(Mu,"Set"),Uw=sh(Mu,"WeakMap"),tte=lh(Fw),nte=lh(Vm),rte=lh(Bw),ote=lh(bv),ite=lh(Uw),zp=qd;(Fw&&zp(new Fw(new ArrayBuffer(1)))!="[object DataView]"||Vm&&zp(new Vm)!="[object Map]"||Bw&&zp(Bw.resolve())!="[object Promise]"||bv&&zp(new bv)!="[object Set]"||Uw&&zp(new Uw)!="[object WeakMap]")&&(zp=function(e){var t=qd(e),n=t=="[object Object]"?e.constructor:void 0,a=n?lh(n):"";if(a)switch(a){case tte:return"[object DataView]";case nte:return"[object Map]";case rte:return"[object Promise]";case ote:return"[object Set]";case ite:return"[object WeakMap]"}return t});var Kp=zp,ate=Object.prototype.hasOwnProperty,lte=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ate.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Qg=Mu.Uint8Array,XE=function(e){var t=new e.constructor(e.byteLength);return new Qg(t).set(new Qg(e)),t},ste=function(e,t){var n=t?XE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},ute=/\w*$/,cte=function(e){var t=new e.constructor(e.source,ute.exec(e));return t.lastIndex=e.lastIndex,t},zA=$s?$s.prototype:void 0,WA=zA?zA.valueOf:void 0,fte=function(e){return WA?Object(WA.call(e)):{}},JN=function(e,t){var n=t?XE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},dte=function(e,t,n){var a=e.constructor;switch(t){case"[object ArrayBuffer]":return XE(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return ste(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return JN(e,n);case"[object Map]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return cte(e);case"[object Set]":return new a;case"[object Symbol]":return fte(e)}},HA=Object.create,QN=function(){function e(){}return function(t){if(!Dl(t))return{};if(HA)return HA(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),eP=function(e){return typeof e.constructor!="function"||L_(e)?{}:QN($_(e))},pte=function(e){return Au(e)&&Kp(e)=="[object Map]"},XA=Pv&&Pv.isMap,hte=XA?I_(XA):pte,vte=function(e){return Au(e)&&Kp(e)=="[object Set]"},qA=Pv&&Pv.isSet,mte=qA?I_(qA):vte,ti={};ti["[object Arguments]"]=ti["[object Array]"]=ti["[object ArrayBuffer]"]=ti["[object DataView]"]=ti["[object Boolean]"]=ti["[object Date]"]=ti["[object Float32Array]"]=ti["[object Float64Array]"]=ti["[object Int8Array]"]=ti["[object Int16Array]"]=ti["[object Int32Array]"]=ti["[object Map]"]=ti["[object Number]"]=ti["[object Object]"]=ti["[object RegExp]"]=ti["[object Set]"]=ti["[object String]"]=ti["[object Symbol]"]=ti["[object Uint8Array]"]=ti["[object Uint8ClampedArray]"]=ti["[object Uint16Array]"]=ti["[object Uint32Array]"]=!0,ti["[object Error]"]=ti["[object Function]"]=ti["[object WeakMap]"]=!1;var tP=function e(t,n,a,r,s,c){var p,d=1&n,_=2&n,g=4&n;if(p!==void 0)return p;if(!Dl(t))return t;var b=Di(t);if(b){if(p=lte(t),!d)return XN(t,p)}else{var S=Kp(t),T=S=="[object Function]"||S=="[object GeneratorFunction]";if(Yp(t))return HN(t,d);if(S=="[object Object]"||S=="[object Arguments]"||T&&!s){if(p=_||T?{}:eP(t),!d)return _?Qee(t,Kee(p,t)):Jee(t,Hee(p,t))}else{if(!ti[S])return s?t:{};p=dte(t,S,d)}}c||(c=new _v);var A=c.get(t);if(A)return A;c.set(t,p),mte(t)?t.forEach(function(E){p.add(e(E,n,a,E,t,c))}):hte(t)&&t.forEach(function(E,C){p.set(C,e(E,n,a,C,t,c))});var O=b?void 0:(g?_?ete:$w:_?uh:Yd)(t);return VE(O||t,function(E,C){O&&(E=t[C=E]),D_(p,C,e(E,n,a,C,t,c))}),p},yte=function(e){return tP(e,4)},qE=function(e){return function(){return e}},YE=function(e){return function(t,n,a){for(var r=-1,s=Object(t),c=a(t),p=c.length;p--;){var d=c[++r];if(n(s[d],d,s)===!1)break}return t}}(),KE=function(e,t){return e&&YE(e,t,Yd)},F_=function(e,t){return function(n,a){if(n==null)return n;if(!jf(n))return e(n,a);for(var r=n.length,s=-1,c=Object(n);++s<r&&a(c[s],s,c)!==!1;);return n}}(KE),ch=function(e){return e},nP=function(e){return typeof e=="function"?e:ch},rP=function(e,t){return(Di(e)?VE:F_)(e,nP(t))},oP=rP,gte=function(e,t){var n=[];return F_(e,function(a,r,s){t(a,r,s)&&n.push(a)}),n},_te=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},bte=function(e){return this.__data__.has(e)};function Sg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new R_;++t<n;)this.add(e[t])}Sg.prototype.add=Sg.prototype.push=_te,Sg.prototype.has=bte;var iP=Sg,wte=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1},aP=function(e,t){return e.has(t)},lP=function(e,t,n,a,r,s){var c=1&n,p=e.length,d=t.length;if(p!=d&&!(c&&d>p))return!1;var _=s.get(e),g=s.get(t);if(_&&g)return _==t&&g==e;var b=-1,S=!0,T=2&n?new iP:void 0;for(s.set(e,t),s.set(t,e);++b<p;){var A=e[b],O=t[b];if(a)var E=c?a(O,A,b,t,e,s):a(A,O,b,e,t,s);if(E!==void 0){if(E)continue;S=!1;break}if(T){if(!wte(t,function(C,j){if(!aP(T,j)&&(A===C||r(A,C,n,a,s)))return T.push(j)})){S=!1;break}}else if(A!==O&&!r(A,O,n,a,s)){S=!1;break}}return s.delete(e),s.delete(t),S},Ete=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a,r){n[++t]=[r,a]}),n},ZE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n},YA=$s?$s.prototype:void 0,G1=YA?YA.valueOf:void 0,Ote=function(e,t,n,a,r,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Qg(e),new Qg(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return zv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=Ete;case"[object Set]":var d=1&a;if(p||(p=ZE),e.size!=t.size&&!d)return!1;var _=c.get(e);if(_)return _==t;a|=2,c.set(e,t);var g=lP(p(e),p(t),a,r,s,c);return c.delete(e),g;case"[object Symbol]":if(G1)return G1.call(e)==G1.call(t)}return!1},Ste=Object.prototype.hasOwnProperty,xte=function(e,t,n,a,r,s){var c=1&n,p=$w(e),d=p.length;if(d!=$w(t).length&&!c)return!1;for(var _=d;_--;){var g=p[_];if(!(c?g in t:Ste.call(t,g)))return!1}var b=s.get(e),S=s.get(t);if(b&&S)return b==t&&S==e;var T=!0;s.set(e,t),s.set(t,e);for(var A=c;++_<d;){var O=e[g=p[_]],E=t[g];if(a)var C=c?a(E,O,g,t,e,s):a(O,E,g,e,t,s);if(!(C===void 0?O===E||r(O,E,n,a,s):C)){T=!1;break}A||(A=g=="constructor")}if(T&&!A){var j=e.constructor,U=t.constructor;j==U||!("constructor"in e)||!("constructor"in t)||typeof j=="function"&&j instanceof j&&typeof U=="function"&&U instanceof U||(T=!1)}return s.delete(e),s.delete(t),T},KA=Object.prototype.hasOwnProperty,Ate=function(e,t,n,a,r,s){var c=Di(e),p=Di(t),d=c?"[object Array]":Kp(e),_=p?"[object Array]":Kp(t),g=(d=d=="[object Arguments]"?"[object Object]":d)=="[object Object]",b=(_=_=="[object Arguments]"?"[object Object]":_)=="[object Object]",S=d==_;if(S&&Yp(e)){if(!Yp(t))return!1;c=!0,g=!1}if(S&&!g)return s||(s=new _v),c||iy(e)?lP(e,t,n,a,r,s):Ote(e,t,d,n,a,r,s);if(!(1&n)){var T=g&&KA.call(e,"__wrapped__"),A=b&&KA.call(t,"__wrapped__");if(T||A){var O=T?e.value():e,E=A?t.value():t;return s||(s=new _v),r(O,E,n,a,s)}}return!!S&&(s||(s=new _v),xte(e,t,n,a,r,s))},sP=function e(t,n,a,r,s){return t===n||(t==null||n==null||!Au(t)&&!Au(n)?t!=t&&n!=n:Ate(t,n,a,r,e,s))},Tte=function(e,t,n,a){var r=n.length,s=r;if(e==null)return!s;for(e=Object(e);r--;){var c=n[r];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<s;){var p=(c=n[r])[0],d=e[p],_=c[1];if(c[2]){if(d===void 0&&!(p in e))return!1}else{var g=new _v,b;if(!(b===void 0?sP(_,d,3,a,g):b))return!1}}return!0},uP=function(e){return e==e&&!Dl(e)},Mte=function(e){for(var t=Yd(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,uP(r)]}return t},cP=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},kte=function(e){var t=Mte(e);return t.length==1&&t[0][2]?cP(t[0][0],t[0][1]):function(n){return n===e||Tte(n,e,t)}},Zp=function(e){return typeof e=="symbol"||Au(e)&&qd(e)=="[object Symbol]"},Nte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pte=/^\w*$/,JE=function(e,t){if(Di(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!Zp(e))||Pte.test(e)||!Nte.test(e)||t!=null&&e in Object(t)};function QE(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],s=n.cache;if(s.has(r))return s.get(r);var c=e.apply(this,a);return n.cache=s.set(r,c)||s,c};return n.cache=new(QE.Cache||R_),n}QE.Cache=R_;var Rte=QE,Cte=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dte=/\\(\\)?/g,jte=function(e){var t=Rte(e,function(a){return n.size===500&&n.clear(),a}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Cte,function(n,a,r,s){t.push(r?s.replace(Dte,"$1"):a||n)}),t}),wv=function(e,t){for(var n=-1,a=e==null?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r},ZA=$s?$s.prototype:void 0,JA=ZA?ZA.toString:void 0,Ite=function e(t){if(typeof t=="string")return t;if(Di(t))return wv(t,e)+"";if(Zp(t))return JA?JA.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},fP=function(e){return e==null?"":Ite(e)},B_=function(e,t){return Di(e)?e:JE(e,t)?[e]:jte(fP(e))},ay=function(e){if(typeof e=="string"||Zp(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},U_=function(e,t){for(var n=0,a=(t=B_(t,e)).length;e!=null&&n<a;)e=e[ay(t[n++])];return n&&n==a?e:void 0},Lte=function(e,t,n){var a=e==null?void 0:U_(e,t);return a===void 0?n:a},$te=function(e,t){return e!=null&&t in Object(e)},dP=function(e,t,n){for(var a=-1,r=(t=B_(t,e)).length,s=!1;++a<r;){var c=ay(t[a]);if(!(s=e!=null&&n(e,c)))break;e=e[c]}return s||++a!=r?s:!!(r=e==null?0:e.length)&&GE(r)&&j_(c,r)&&(Di(e)||Nv(e))},pP=function(e,t){return e!=null&&dP(e,t,$te)},Fte=function(e,t){return JE(e)&&uP(t)?cP(ay(e),t):function(n){var a=Lte(n,e);return a===void 0&&a===t?pP(n,e):sP(t,a,3)}},hP=function(e){return function(t){return t==null?void 0:t[e]}},Bte=function(e){return function(t){return U_(t,e)}},Ute=function(e){return JE(e)?hP(ay(e)):Bte(e)},If=function(e){return typeof e=="function"?e:e==null?ch:typeof e=="object"?Di(e)?Fte(e[0],e[1]):kte(e):Ute(e)},vP=function(e,t){return(Di(e)?qN:gte)(e,If(t))},Vte=Object.prototype.hasOwnProperty,Gte=function(e,t){return e!=null&&Vte.call(e,t)},mP=function(e,t){return e!=null&&dP(e,t,Gte)},zte=Object.prototype.hasOwnProperty,Wte=function(e){if(e==null)return!0;if(jf(e)&&(Di(e)||typeof e=="string"||typeof e.splice=="function"||Yp(e)||iy(e)||Nv(e)))return!e.length;var t=Kp(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(L_(e))return!zE(e).length;for(var n in e)if(zte.call(e,n))return!1;return!0},yP=function(e){return e===void 0},gP=function(e,t){var n=-1,a=jf(e)?Array(e.length):[];return F_(e,function(r,s,c){a[++n]=t(r,s,c)}),a},_P=function(e,t){return(Di(e)?wv:gP)(e,If(t))},Hte=function(e,t,n,a){var r=-1,s=e==null?0:e.length;for(a&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n},Xte=function(e,t,n,a,r){return r(e,function(s,c,p){n=a?(a=!1,s):t(n,s,c,p)}),n},bP=function(e,t,n){var a=Di(e)?Hte:Xte,r=arguments.length<3;return a(e,If(t),n,r,F_)},qte=function(e){return typeof e=="string"||!Di(e)&&Au(e)&&qd(e)=="[object String]"},Yte=hP("length"),Kte=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Zte=function(e){return Kte.test(e)},Jte="[\\ud800-\\udfff]",Vw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Gw="\\ud83c[\\udffb-\\udfff]",wP="[^\\ud800-\\udfff]",EP="(?:\\ud83c[\\udde6-\\uddff]){2}",OP="[\\ud800-\\udbff][\\udc00-\\udfff]",QA="(?:"+Vw+"|"+Gw+")?",Qte="[\\ufe0e\\ufe0f]?"+QA+("(?:\\u200d(?:"+[wP,EP,OP].join("|")+")[\\ufe0e\\ufe0f]?"+QA+")*"),ene="(?:"+[wP+Vw+"?",Vw,EP,OP,Jte].join("|")+")",eT=RegExp(Gw+"(?="+Gw+")|"+ene+Qte,"g"),tne=function(e){for(var t=eT.lastIndex=0;eT.test(e);)++t;return t},nne=function(e){return Zte(e)?tne(e):Yte(e)},rne=function(e){if(e==null)return 0;if(jf(e))return qte(e)?nne(e):e.length;var t=Kp(e);return t=="[object Map]"||t=="[object Set]"?e.size:zE(e).length},one=function(e,t,n){var a=Di(e),r=a||Yp(e)||iy(e);if(t=If(t),n==null){var s=e&&e.constructor;n=r?a?new s:[]:Dl(e)&&ry(s)?QN($_(e)):{}}return(r?VE:KE)(e,function(c,p,d){return t(n,c,p,d)}),n},tT=$s?$s.isConcatSpreadable:void 0,ine=function(e){return Di(e)||Nv(e)||!!(tT&&e&&e[tT])},e2=function(t,n,a,r,s){var c=-1,p=t.length;for(a||(a=ine),s||(s=[]);++c<p;){var d=t[c];a(d)?HE(s,d):r||(s[s.length]=d)}return s},ane=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},nT=Math.max,SP=function(e,t,n){return t=nT(t===void 0?e.length-1:t,0),function(){for(var a=arguments,r=-1,s=nT(a.length-t,0),c=Array(s);++r<s;)c[r]=a[t+r];r=-1;for(var p=Array(t+1);++r<t;)p[r]=a[r];return p[t]=n(c),ane(e,this,p)}},lne=Jg?function(e,t){return Jg(e,"toString",{configurable:!0,enumerable:!1,value:qE(t),writable:!0})}:ch,sne=Date.now,xP=function(e){var t=0,n=0;return function(){var a=sne(),r=16-(a-n);if(n=a,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(lne),V_=function(e,t){return xP(SP(e,t,ch),e+"")},AP=function(e,t,n,a){for(var r=e.length,s=n+-1;++s<r;)if(t(e[s],s,e))return s;return-1},une=function(e){return e!=e},cne=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1},fne=function(e,t,n){return t==t?cne(e,t,n):AP(e,une,n)},dne=function(e,t){return!!(e!=null&&e.length)&&fne(e,t,0)>-1},pne=function(){},hne=bv&&1/ZE(new bv([,-0]))[1]==1/0?function(e){return new bv(e)}:pne,vne=function(e,t,n){var a=-1,r=dne,s=e.length,c=!0,p=[],d=p;if(s>=200){var _=hne(e);if(_)return ZE(_);c=!1,r=aP,d=new iP}else d=p;e:for(;++a<s;){var g=e[a],b=g;if(g=g!==0?g:0,c&&b==b){for(var S=d.length;S--;)if(d[S]===b)continue e;p.push(g)}else r(d,b,n)||(d!==p&&d.push(b),p.push(g))}return p},TP=function(e){return Au(e)&&jf(e)},mne=V_(function(e){return vne(e2(e,1,TP,!0))}),yne=function(e,t){return wv(t,function(n){return e[n]})},e_,MP=function(e){return e==null?[]:yne(e,Yd(e))};try{e_={clone:yte,constant:qE,each:oP,filter:vP,has:mP,isArray:Di,isEmpty:Wte,isFunction:ry,isUndefined:yP,keys:Yd,map:_P,reduce:bP,size:rne,transform:one,union:mne,values:MP}}catch{}e_||(e_=window._);var xn=e_,t2=Hr;function Hr(e){this._isDirected=!xn.has(e,"directed")||e.directed,this._isMultigraph=!!xn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!xn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=xn.constant(void 0),this._defaultEdgeLabelFn=xn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function rT(e,t){e[t]?e[t]++:e[t]=1}function oT(e,t){--e[t]||delete e[t]}function Om(e,t,n,a){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}return r+""+s+""+(xn.isUndefined(a)?"\0":a)}function gne(e,t,n,a){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}var p={v:r,w:s};return a&&(p.name=a),p}function z1(e,t){return Om(e,t.v,t.w,t.name)}Hr.prototype._nodeCount=0,Hr.prototype._edgeCount=0,Hr.prototype.isDirected=function(){return this._isDirected},Hr.prototype.isMultigraph=function(){return this._isMultigraph},Hr.prototype.isCompound=function(){return this._isCompound},Hr.prototype.setGraph=function(e){return this._label=e,this},Hr.prototype.graph=function(){return this._label},Hr.prototype.setDefaultNodeLabel=function(e){return xn.isFunction(e)||(e=xn.constant(e)),this._defaultNodeLabelFn=e,this},Hr.prototype.nodeCount=function(){return this._nodeCount},Hr.prototype.nodes=function(){return xn.keys(this._nodes)},Hr.prototype.sources=function(){var e=this;return xn.filter(this.nodes(),function(t){return xn.isEmpty(e._in[t])})},Hr.prototype.sinks=function(){var e=this;return xn.filter(this.nodes(),function(t){return xn.isEmpty(e._out[t])})},Hr.prototype.setNodes=function(e,t){var n=arguments,a=this;return xn.each(e,function(r){n.length>1?a.setNode(r,t):a.setNode(r)}),this},Hr.prototype.setNode=function(e,t){return xn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Hr.prototype.node=function(e){return this._nodes[e]},Hr.prototype.hasNode=function(e){return xn.has(this._nodes,e)},Hr.prototype.removeNode=function(e){var t=this;if(xn.has(this._nodes,e)){var n=function(a){t.removeEdge(t._edgeObjs[a])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],xn.each(this.children(e),function(a){t.setParent(a)}),delete this._children[e]),xn.each(xn.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],xn.each(xn.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Hr.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(xn.isUndefined(t))t="\0";else{for(var n=t+="";!xn.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Hr.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Hr.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Hr.prototype.children=function(e){if(xn.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return xn.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Hr.prototype.predecessors=function(e){var t=this._preds[e];if(t)return xn.keys(t)},Hr.prototype.successors=function(e){var t=this._sucs[e];if(t)return xn.keys(t)},Hr.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return xn.union(t,this.successors(e))},Hr.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Hr.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;xn.each(this._nodes,function(s,c){e(c)&&t.setNode(c,s)}),xn.each(this._edgeObjs,function(s){t.hasNode(s.v)&&t.hasNode(s.w)&&t.setEdge(s,n.edge(s))});var a={};function r(s){var c=n.parent(s);return c===void 0||t.hasNode(c)?(a[s]=c,c):c in a?a[c]:r(c)}return this._isCompound&&xn.each(t.nodes(),function(s){t.setParent(s,r(s))}),t},Hr.prototype.setDefaultEdgeLabel=function(e){return xn.isFunction(e)||(e=xn.constant(e)),this._defaultEdgeLabelFn=e,this},Hr.prototype.edgeCount=function(){return this._edgeCount},Hr.prototype.edges=function(){return xn.values(this._edgeObjs)},Hr.prototype.setPath=function(e,t){var n=this,a=arguments;return xn.reduce(e,function(r,s){return a.length>1?n.setEdge(r,s,t):n.setEdge(r,s),s}),this},Hr.prototype.setEdge=function(){var e,t,n,a,r=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(a=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,xn.isUndefined(n)||(n=""+n);var c=Om(this._isDirected,e,t,n);if(xn.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=a),this;if(!xn.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?a:this._defaultEdgeLabelFn(e,t,n);var p=gne(this._isDirected,e,t,n);return e=p.v,t=p.w,Object.freeze(p),this._edgeObjs[c]=p,rT(this._preds[t],e),rT(this._sucs[e],t),this._in[t][c]=p,this._out[e][c]=p,this._edgeCount++,this},Hr.prototype.edge=function(e,t,n){var a=arguments.length===1?z1(this._isDirected,arguments[0]):Om(this._isDirected,e,t,n);return this._edgeLabels[a]},Hr.prototype.hasEdge=function(e,t,n){var a=arguments.length===1?z1(this._isDirected,arguments[0]):Om(this._isDirected,e,t,n);return xn.has(this._edgeLabels,a)},Hr.prototype.removeEdge=function(e,t,n){var a=arguments.length===1?z1(this._isDirected,arguments[0]):Om(this._isDirected,e,t,n),r=this._edgeObjs[a];return r&&(e=r.v,t=r.w,delete this._edgeLabels[a],delete this._edgeObjs[a],oT(this._preds[t],e),oT(this._sucs[e],t),delete this._in[t][a],delete this._out[e][a],this._edgeCount--),this},Hr.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var a=xn.values(n);return t?xn.filter(a,function(r){return r.v===t}):a}},Hr.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var a=xn.values(n);return t?xn.filter(a,function(r){return r.w===t}):a}},Hr.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var iT={Graph:t2,version:"2.1.8"},_ne={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:bne(e),edges:wne(e)};return xn.isUndefined(e.graph())||(t.value=xn.clone(e.graph())),t},read:function(e){var t=new t2(e.options).setGraph(e.value);return xn.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),xn.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function bne(e){return xn.map(e.nodes(),function(t){var n=e.node(t),a=e.parent(t),r={v:t};return xn.isUndefined(n)||(r.value=n),xn.isUndefined(a)||(r.parent=a),r})}function wne(e){return xn.map(e.edges(),function(t){var n=e.edge(t),a={v:t.v,w:t.w};return xn.isUndefined(t.name)||(a.name=t.name),xn.isUndefined(n)||(a.value=n),a})}var Ene=function(e){var t,n={},a=[];function r(s){xn.has(n,s)||(n[s]=!0,t.push(s),xn.each(e.successors(s),r),xn.each(e.predecessors(s),r))}return xn.each(e.nodes(),function(s){t=[],r(s),t.length&&a.push(t)}),a},kP=Rs;function Rs(){this._arr=[],this._keyIndices={}}Rs.prototype.size=function(){return this._arr.length},Rs.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Rs.prototype.has=function(e){return xn.has(this._keyIndices,e)},Rs.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Rs.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Rs.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!xn.has(n,e)){var a=this._arr,r=a.length;return n[e]=r,a.push({key:e,priority:t}),this._decrease(r),!0}return!1},Rs.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Rs.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Rs.prototype._heapify=function(e){var t=this._arr,n=2*e,a=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,a<t.length&&(r=t[a].priority<t[r].priority?a:r),r!==e&&(this._swap(e,r),this._heapify(r)))},Rs.prototype._decrease=function(e){for(var t,n=this._arr,a=n[e].priority;e!==0&&!(n[t=e>>1].priority<a);)this._swap(e,t),e=t},Rs.prototype._swap=function(e,t){var n=this._arr,a=this._keyIndices,r=n[e],s=n[t];n[e]=s,n[t]=r,a[s.key]=e,a[r.key]=t};var NP=function(e,t,n,a){return function(r,s,c,p){var d,_,g={},b=new kP,S=function(T){var A=T.v!==d?T.v:T.w,O=g[A],E=c(T),C=_.distance+E;if(E<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+T+" Weight: "+E);C<O.distance&&(O.distance=C,O.predecessor=d,b.decrease(A,C))};for(r.nodes().forEach(function(T){var A=T===s?0:Number.POSITIVE_INFINITY;g[T]={distance:A},b.add(T,A)});b.size()>0&&(d=b.removeMin(),(_=g[d]).distance!==Number.POSITIVE_INFINITY);)p(d).forEach(S);return g}(e,String(t),n||One,a||function(r){return e.outEdges(r)})},One=xn.constant(1),Sne=function(e,t,n){return xn.transform(e.nodes(),function(a,r){a[r]=NP(e,r,t,n)},{})},PP=function(e){var t=0,n=[],a={},r=[];function s(c){var p=a[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(g){xn.has(a,g)?a[g].onStack&&(p.lowlink=Math.min(p.lowlink,a[g].index)):(s(g),p.lowlink=Math.min(p.lowlink,a[g].lowlink))}),p.lowlink===p.index){var d,_=[];do d=n.pop(),a[d].onStack=!1,_.push(d);while(c!==d);r.push(_)}}return e.nodes().forEach(function(c){xn.has(a,c)||s(c)}),r},xne=function(e){return xn.filter(PP(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},Ane=function(e,t,n){return function(a,r,s){var c={},p=a.nodes();return p.forEach(function(d){c[d]={},c[d][d]={distance:0},p.forEach(function(_){d!==_&&(c[d][_]={distance:Number.POSITIVE_INFINITY})}),s(d).forEach(function(_){var g=_.v===d?_.w:_.v,b=r(_);c[d][g]={distance:b,predecessor:d}})}),p.forEach(function(d){var _=c[d];p.forEach(function(g){var b=c[g];p.forEach(function(S){var T=b[d],A=_[S],O=b[S],E=T.distance+A.distance;E<O.distance&&(O.distance=E,O.predecessor=A.predecessor)})})}),c}(e,t||Tne,n||function(a){return e.outEdges(a)})},Tne=xn.constant(1),W1=RP;function RP(e){var t={},n={},a=[];if(xn.each(e.sinks(),function r(s){if(xn.has(n,s))throw new t_;xn.has(t,s)||(n[s]=!0,t[s]=!0,xn.each(e.predecessors(s),r),delete n[s],a.push(s))}),xn.size(t)!==e.nodeCount())throw new t_;return a}function t_(){}RP.CycleException=t_,t_.prototype=new Error;var aT=function(e,t,n){xn.isArray(t)||(t=[t]);var a=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],s={};return xn.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);CP(e,c,n==="post",s,a,r)}),r};function CP(e,t,n,a,r,s){xn.has(a,t)||(a[t]=!0,n||s.push(t),xn.each(r(t),function(c){CP(e,c,n,a,r,s)}),n&&s.push(t))}var n_,Mne={Graph:iT.Graph,json:_ne,alg:{components:Ene,dijkstra:NP,dijkstraAll:Sne,findCycles:xne,floydWarshall:Ane,isAcyclic:function(e){try{W1(e)}catch(t){if(t instanceof W1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return aT(e,t,"post")},preorder:function(e,t){return aT(e,t,"pre")},prim:function(e,t){var n,a=new t2,r={},s=new kP;function c(d){var _=d.v===n?d.w:d.v,g=s.priority(_);if(g!==void 0){var b=t(d);b<g&&(r[_]=n,s.decrease(_,b))}}if(e.nodeCount()===0)return a;xn.each(e.nodes(),function(d){s.add(d,Number.POSITIVE_INFINITY),a.setNode(d)}),s.decrease(e.nodes()[0],0);for(var p=!1;s.size()>0;){if(n=s.removeMin(),xn.has(r,n))a.setEdge(n,r[n]);else{if(p)throw new Error("Input graph is not connected: "+e);p=!0}e.nodeEdges(n).forEach(c)}return a},tarjan:PP,topsort:W1},version:iT.version};try{n_=Mne}catch{}n_||(n_=window.graphlib);var _c=n_,kne=function(e){return tP(e,5)},zm=function(e,t,n){if(!Dl(n))return!1;var a=typeof t;return!!(a=="number"?jf(n)&&j_(t,n.length):a=="string"&&t in n)&&zv(n[t],e)},DP=Object.prototype,Nne=DP.hasOwnProperty,Pne=V_(function(e,t){e=Object(e);var n=-1,a=t.length,r=a>2?t[2]:void 0;for(r&&zm(t[0],t[1],r)&&(a=1);++n<a;)for(var s=t[n],c=uh(s),p=-1,d=c.length;++p<d;){var _=c[p],g=e[_];(g===void 0||zv(g,DP[_])&&!Nne.call(e,_))&&(e[_]=s[_])}return e}),Rne=function(e){return function(t,n,a){var r=Object(t);if(!jf(t)){var s=If(n);t=Yd(t),n=function(p){return s(r[p],p,r)}}var c=e(t,n,a);return c>-1?r[s?t[c]:c]:void 0}},Cne=/^\s+|\s+$/g,Dne=/^[-+]0x[0-9a-f]+$/i,jne=/^0b[01]+$/i,Ine=/^0o[0-7]+$/i,Lne=parseInt,$ne=function(e){if(typeof e=="number")return e;if(Zp(e))return NaN;if(Dl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Dl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Cne,"");var n=jne.test(e);return n||Ine.test(e)?Lne(e.slice(2),n?2:8):Dne.test(e)?NaN:+e},xg=function(e){return e?(e=$ne(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},Fne=function(e){var t=xg(e),n=t%1;return t==t?n?t-n:t:0},Bne=Math.max,Une=Rne(function(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:Fne(n);return r<0&&(r=Bne(a+r,0)),AP(e,If(t),r)}),jP=function(e){return e!=null&&e.length?e2(e):[]},Vne=function(e,t){return e==null?e:YE(e,nP(t),uh)},Gne=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},zne=function(e,t){var n={};return t=If(t),KE(e,function(a,r,s){C_(n,r,t(a,r,s))}),n},n2=function(e,t,n){for(var a=-1,r=e.length;++a<r;){var s=e[a],c=t(s);if(c!=null&&(p===void 0?c==c&&!Zp(c):n(c,p)))var p=c,d=s}return d},Wne=function(e,t){return e>t},Hne=function(e){return e&&e.length?n2(e,ch,Wne):void 0},zw=function(e,t,n){(n!==void 0&&!zv(e[t],n)||n===void 0&&!(t in e))&&C_(e,t,n)},Xne=Function.prototype,qne=Object.prototype,IP=Xne.toString,Yne=qne.hasOwnProperty,Kne=IP.call(Object),Zne=function(e){if(!Au(e)||qd(e)!="[object Object]")return!1;var t=$_(e);if(t===null)return!0;var n=Yne.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&IP.call(n)==Kne},lT=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},Jne=function(e){return oy(e,uh(e))},Qne=function(e,t,n,a,r,s,c){var p=lT(e,n),d=lT(t,n),_=c.get(d);if(_)zw(e,n,_);else{var g=void 0,b=g===void 0;if(b){var S=Di(d),T=!S&&Yp(d),A=!S&&!T&&iy(d);g=d,S||T||A?Di(p)?g=p:TP(p)?g=XN(p):T?(b=!1,g=HN(d,!0)):A?(b=!1,g=JN(d,!0)):g=[]:Zne(d)||Nv(d)?(g=p,Nv(p)?g=Jne(p):Dl(p)&&!ry(p)||(g=eP(d))):b=!1}b&&(c.set(d,g),r(g,d,a,s,c),c.delete(d)),zw(e,n,g)}},ere=function e(t,n,a,r,s){t!==n&&YE(n,function(c,p){if(s||(s=new _v),Dl(c))Qne(t,n,p,a,e,r,s);else{var d=void 0;d===void 0&&(d=c),zw(t,p,d)}},uh)},tre=function(e){return V_(function(t,n){var a=-1,r=n.length,s=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,c&&zm(n[0],n[1],c)&&(s=r<3?void 0:s,r=1),t=Object(t);++a<r;){var p=n[a];p&&e(t,p,a,s)}return t})}(function(e,t,n){ere(e,t,n)}),LP=function(e,t){return e<t},nre=function(e){return e&&e.length?n2(e,ch,LP):void 0},rre=function(e,t){return e&&e.length?n2(e,If(t),LP):void 0},ore=function(){return Mu.Date.now()},ire=function(e,t,n,a){if(!Dl(e))return e;for(var r=-1,s=(t=B_(t,e)).length,c=s-1,p=e;p!=null&&++r<s;){var d=ay(t[r]),_=n;if(d==="__proto__"||d==="constructor"||d==="prototype")return e;if(r!=c){var g=p[d];(_=void 0)==void 0&&(_=Dl(g)?g:j_(t[r+1])?[]:{})}D_(p,d,_),p=p[d]}return e},are=function(e,t,n){for(var a=-1,r=t.length,s={};++a<r;){var c=t[a],p=U_(e,c);n(p,c)&&ire(s,B_(c,e),p)}return s},lre=function(e,t){return are(e,t,function(n,a){return pP(e,a)})},sre=function(e){return xP(SP(e,void 0,jP),e+"")}(function(e,t){return e==null?{}:lre(e,t)}),ure=Math.ceil,cre=Math.max,fre=function(e,t,n,a){for(var r=-1,s=cre(ure((t-e)/(n||1)),0),c=Array(s);s--;)c[++r]=e,e+=n;return c},dre=function(e){return function(t,n,a){return a&&typeof a!="number"&&zm(t,n,a)&&(n=a=void 0),t=xg(t),n===void 0?(n=t,t=0):n=xg(n),a=a===void 0?t<n?1:-1:xg(a),fre(t,n,a)}}(),pre=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},hre=function(e,t){if(e!==t){var n=e!==void 0,a=e===null,r=e==e,s=Zp(e),c=t!==void 0,p=t===null,d=t==t,_=Zp(t);if(!p&&!_&&!s&&e>t||s&&c&&d&&!p&&!_||a&&c&&d||!n&&d||!r)return 1;if(!a&&!s&&!_&&e<t||_&&n&&r&&!a&&!s||p&&n&&r||!c&&r||!d)return-1}return 0},vre=function(e,t,n){for(var a=-1,r=e.criteria,s=t.criteria,c=r.length,p=n.length;++a<c;){var d=hre(r[a],s[a]);if(d)return a>=p?d:d*(n[a]=="desc"?-1:1)}return e.index-t.index},mre=function(e,t,n){t=t.length?wv(t,function(s){return Di(s)?function(c){return U_(c,s.length===1?s[0]:s)}:s}):[ch];var a=-1;t=wv(t,I_(If));var r=gP(e,function(s,c,p){return{criteria:wv(t,function(d){return d(s)}),index:++a,value:s}});return pre(r,function(s,c){return vre(s,c,n)})},yre=V_(function(e,t){if(e==null)return[];var n=t.length;return n>1&&zm(e,t[0],t[1])?t=[]:n>2&&zm(t[0],t[1],t[2])&&(t=[t[0]]),mre(e,e2(t),[])}),gre=0,_re=function(e){var t=++gre;return fP(e)+t},bre=function(e,t,n){for(var a=-1,r=e.length,s=t.length,c={};++a<r;){var p=a<s?t[a]:void 0;n(c,e[a],p)}return c},r_,wre=function(e,t){return bre(e||[],t||[],D_)};try{r_={cloneDeep:kne,constant:qE,defaults:Pne,each:oP,filter:vP,find:Une,flatten:jP,forEach:rP,forIn:Vne,has:mP,isUndefined:yP,last:Gne,map:_P,mapValues:zne,max:Hne,merge:tre,min:nre,minBy:rre,now:ore,pick:sre,range:dre,reduce:bP,sortBy:yre,uniqueId:_re,values:MP,zipObject:wre}}catch{}r_||(r_=window._);var Ere=r_;_c.Graph;Ere.constant(1);_c.Graph;_c.Graph;_c.alg.preorder;_c.alg.postorder;_c.Graph;_c.Graph;_c.Graph;_c.Graph;_c.Graph;var H1,sT;function Ore(){if(sT)return H1;sT=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return H1=t,H1}var X1,uT;function Sre(){if(uT)return X1;uT=1;var e=eE(),t=Ore(),n=tE(),a="[object Arguments]",r="[object Array]",s="[object Boolean]",c="[object Date]",p="[object Error]",d="[object Function]",_="[object Map]",g="[object Number]",b="[object Object]",S="[object RegExp]",T="[object Set]",A="[object String]",O="[object WeakMap]",E="[object ArrayBuffer]",C="[object DataView]",j="[object Float32Array]",U="[object Float64Array]",L="[object Int8Array]",V="[object Int16Array]",$="[object Int32Array]",H="[object Uint8Array]",Y="[object Uint8ClampedArray]",z="[object Uint16Array]",W="[object Uint32Array]",B={};B[j]=B[U]=B[L]=B[V]=B[$]=B[H]=B[Y]=B[z]=B[W]=!0,B[a]=B[r]=B[E]=B[s]=B[C]=B[c]=B[p]=B[d]=B[_]=B[g]=B[b]=B[S]=B[T]=B[A]=B[O]=!1;function q(J){return n(J)&&t(J.length)&&!!B[e(J)]}return X1=q,X1}var q1,cT;function xre(){if(cT)return q1;cT=1;function e(t){return function(n){return t(n)}}return q1=e,q1}var Sm={exports:{}};Sm.exports;var fT;function Are(){return fT||(fT=1,function(e,t){var n=u8(),a=t&&!t.nodeType&&t,r=a&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===a,c=s&&n.process,p=function(){try{var d=r&&r.require&&r.require("util").types;return d||c&&c.binding&&c.binding("util")}catch{}}();e.exports=p}(Sm,Sm.exports)),Sm.exports}var Y1,dT;function Tre(){if(dT)return Y1;dT=1;var e=Sre(),t=xre(),n=Are(),a=n&&n.isTypedArray,r=a?t(a):e;return Y1=r,Y1}Tre();var K1,pT;function Mre(){if(pT)return K1;pT=1;var e=eE(),t=tE(),n="[object Number]";function a(r){return typeof r=="number"||t(r)&&e(r)==n}return K1=a,K1}Mre();var Z1={exports:{}},J1={exports:{}},hT;function $P(){return hT||(hT=1,function(e){function t(n,a){this.v=n,this.k=a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(J1)),J1.exports}var Q1={exports:{}},ew={exports:{}},vT;function FP(){return vT||(vT=1,function(e){function t(n,a,r,s){var c=Object.defineProperty;try{c({},"",{})}catch{c=0}e.exports=t=function(d,_,g,b){function S(T,A){t(d,T,function(O){return this._invoke(T,A,O)})}_?c?c(d,_,{value:g,enumerable:!b,configurable:!b,writable:!b}):d[_]=g:(S("next",0),S("throw",1),S("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,a,r,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ew)),ew.exports}var mT;function BP(){return mT||(mT=1,function(e){var t=FP();function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var a,r,s=typeof Symbol=="function"?Symbol:{},c=s.iterator||"@@iterator",p=s.toStringTag||"@@toStringTag";function d(E,C,j,U){var L=C&&C.prototype instanceof g?C:g,V=Object.create(L.prototype);return t(V,"_invoke",function($,H,Y){var z,W,B,q=0,J=Y||[],ce=!1,re={p:0,n:0,v:a,a:Pe,f:Pe.bind(a,4),d:function(fe,Ee){return z=fe,W=0,B=a,re.n=Ee,_}};function Pe(ge,fe){for(W=ge,B=fe,r=0;!ce&&q&&!Ee&&r<J.length;r++){var Ee,Ne=J[r],rt=re.p,mt=Ne[2];ge>3?(Ee=mt===fe)&&(B=Ne[(W=Ne[4])?5:(W=3,3)],Ne[4]=Ne[5]=a):Ne[0]<=rt&&((Ee=ge<2&&rt<Ne[1])?(W=0,re.v=fe,re.n=Ne[1]):rt<mt&&(Ee=ge<3||Ne[0]>fe||fe>mt)&&(Ne[4]=ge,Ne[5]=fe,re.n=mt,W=0))}if(Ee||ge>1)return _;throw ce=!0,fe}return function(ge,fe,Ee){if(q>1)throw TypeError("Generator is already running");for(ce&&fe===1&&Pe(fe,Ee),W=fe,B=Ee;(r=W<2?a:B)||!ce;){z||(W?W<3?(W>1&&(re.n=-1),Pe(W,B)):re.n=B:re.v=B);try{if(q=2,z){if(W||(ge="next"),r=z[ge]){if(!(r=r.call(z,B)))throw TypeError("iterator result is not an object");if(!r.done)return r;B=r.value,W<2&&(W=0)}else W===1&&(r=z.return)&&r.call(z),W<2&&(B=TypeError("The iterator does not provide a '"+ge+"' method"),W=1);z=a}else if((r=(ce=re.n<0)?B:$.call(H,re))!==_)break}catch(Ne){z=a,W=1,B=Ne}finally{q=1}}return{value:r,done:ce}}}(E,j,U),!0),V}var _={};function g(){}function b(){}function S(){}r=Object.getPrototypeOf;var T=[][c]?r(r([][c]())):(t(r={},c,function(){return this}),r),A=S.prototype=g.prototype=Object.create(T);function O(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,S):(E.__proto__=S,t(E,p,"GeneratorFunction")),E.prototype=Object.create(A),E}return b.prototype=S,t(A,"constructor",S),t(S,"constructor",b),b.displayName="GeneratorFunction",t(S,p,"GeneratorFunction"),t(A),t(A,p,"Generator"),t(A,c,function(){return this}),t(A,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:d,m:O}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Q1)),Q1.exports}var tw={exports:{}},nw={exports:{}},rw={exports:{}},yT;function UP(){return yT||(yT=1,function(e){var t=$P(),n=FP();function a(r,s){function c(d,_,g,b){try{var S=r[d](_),T=S.value;return T instanceof t?s.resolve(T.v).then(function(A){c("next",A,g,b)},function(A){c("throw",A,g,b)}):s.resolve(T).then(function(A){S.value=A,g(S)},function(A){return c("throw",A,g,b)})}catch(A){b(A)}}var p;this.next||(n(a.prototype),n(a.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(d,_,g){function b(){return new s(function(S,T){c(d,g,S,T)})}return p=p?p.then(b,b):b()},!0)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(rw)),rw.exports}var gT;function VP(){return gT||(gT=1,function(e){var t=BP(),n=UP();function a(r,s,c,p,d){return new n(t().w(r,s,c,p),d||Promise)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(nw)),nw.exports}var _T;function kre(){return _T||(_T=1,function(e){var t=VP();function n(a,r,s,c,p){var d=t(a,r,s,c,p);return d.next().then(function(_){return _.done?_.value:d.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(tw)),tw.exports}var ow={exports:{}},bT;function Nre(){return bT||(bT=1,function(e){function t(n){var a=Object(n),r=[];for(var s in a)r.unshift(s);return function c(){for(;r.length;)if((s=r.pop())in a)return c.value=s,c.done=!1,c;return c.done=!0,c}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ow)),ow.exports}var iw={exports:{}},aw={exports:{}},wT;function Pre(){return wT||(wT=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(aw)),aw.exports}var ET;function Rre(){return ET||(ET=1,function(e){var t=Pre().default;function n(a){if(a!=null){var r=a[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],s=0;if(r)return r.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length))return{next:function(){return a&&s>=a.length&&(a=void 0),{value:a&&a[s++],done:!a}}}}throw new TypeError(t(a)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(iw)),iw.exports}var OT;function Cre(){return OT||(OT=1,function(e){var t=$P(),n=BP(),a=kre(),r=VP(),s=UP(),c=Nre(),p=Rre();function d(){var _=n(),g=_.m(d),b=(Object.getPrototypeOf?Object.getPrototypeOf(g):g.__proto__).constructor;function S(O){var E=typeof O=="function"&&O.constructor;return!!E&&(E===b||(E.displayName||E.name)==="GeneratorFunction")}var T={throw:1,return:2,break:3,continue:3};function A(O){var E,C;return function(j){E||(E={stop:function(){return C(j.a,2)},catch:function(){return j.v},abrupt:function(L,V){return C(j.a,T[L],V)},delegateYield:function(L,V,$){return E.resultName=V,C(j.d,p(L),$)},finish:function(L){return C(j.f,L)}},C=function(L,V,$){j.p=E.prev,j.n=E.next;try{return L(V,$)}finally{E.next=j.n}}),E.resultName&&(E[E.resultName]=j.v,E.resultName=void 0),E.sent=j.v,E.next=j.n;try{return O.call(this,E)}finally{j.p=E.prev,j.n=E.next}}}return(e.exports=d=function(){return{wrap:function(C,j,U,L){return _.w(A(C),j,U,L&&L.reverse())},isGeneratorFunction:S,mark:_.m,awrap:function(C,j){return new t(C,j)},AsyncIterator:s,async:function(C,j,U,L,V){return(S(j)?r:a)(A(C),j,U,L,V)},keys:c,values:p}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports}(Z1)),Z1.exports}var lw,ST;function Dre(){if(ST)return lw;ST=1;var e=Cre()();lw=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return lw}Dre();var ln;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(ln||(ln={}));var xT;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(xT||(xT={}));var AT;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(AT||(AT={}));var TT;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(TT||(TT={}));var MT;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(MT||(MT={}));var Ag={exports:{}},jre=Ag.exports,kT;function Ire(){return kT||(kT=1,function(e,t){(function(n,a){e.exports=a()})(jre,function(){var n=function(G){return G instanceof Uint8Array||G instanceof Uint16Array||G instanceof Uint32Array||G instanceof Int8Array||G instanceof Int16Array||G instanceof Int32Array||G instanceof Float32Array||G instanceof Float64Array||G instanceof Uint8ClampedArray},a=function(G,se){for(var Oe=Object.keys(se),nt=0;nt<Oe.length;++nt)G[Oe[nt]]=se[Oe[nt]];return G},r=`
`;function s(G){return typeof atob<"u"?atob(G):"base64:"+G}function c(G){var se=new Error("(regl) "+G);throw console.error(se),se}function p(G,se){G||c(se)}function d(G){return G?": "+G:""}function _(G,se,Oe){G in se||c("unknown parameter ("+G+")"+d(Oe)+". possible values: "+Object.keys(se).join())}function g(G,se){n(G)||c("invalid parameter type"+d(se)+". must be a typed array")}function b(G,se){switch(se){case"number":return typeof G=="number";case"object":return typeof G=="object";case"string":return typeof G=="string";case"boolean":return typeof G=="boolean";case"function":return typeof G=="function";case"undefined":return typeof G>"u";case"symbol":return typeof G=="symbol"}}function S(G,se,Oe){b(G,se)||c("invalid parameter type"+d(Oe)+". expected "+se+", got "+typeof G)}function T(G,se){G>=0&&(G|0)===G||c("invalid parameter type, ("+G+")"+d(se)+". must be a nonnegative integer")}function A(G,se,Oe){se.indexOf(G)<0&&c("invalid value"+d(Oe)+". must be one of: "+se)}var O=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function E(G){Object.keys(G).forEach(function(se){O.indexOf(se)<0&&c('invalid regl constructor argument "'+se+'". must be one of '+O)})}function C(G,se){for(G=G+"";G.length<se;)G=" "+G;return G}function j(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function U(G,se){this.number=G,this.line=se,this.errors=[]}function L(G,se,Oe){this.file=G,this.line=se,this.message=Oe}function V(){var G=new Error,se=(G.stack||G).toString(),Oe=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(se);if(Oe)return Oe[1];var nt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(se);return nt?nt[1]:"unknown"}function $(){var G=new Error,se=(G.stack||G).toString(),Oe=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(se);if(Oe)return Oe[1];var nt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(se);return nt?nt[1]:"unknown"}function H(G,se){var Oe=G.split(`
`),nt=1,pt=0,Qe={unknown:new j,0:new j};Qe.unknown.name=Qe[0].name=se||V(),Qe.unknown.lines.push(new U(0,""));for(var ft=0;ft<Oe.length;++ft){var kt=Oe[ft],jt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(kt);if(jt)switch(jt[1]){case"line":var Nt=/(\d+)(\s+\d+)?/.exec(jt[2]);Nt&&(nt=Nt[1]|0,Nt[2]&&(pt=Nt[2]|0,pt in Qe||(Qe[pt]=new j)));break;case"define":var ut=/SHADER_NAME(_B64)?\s+(.*)$/.exec(jt[2]);ut&&(Qe[pt].name=ut[1]?s(ut[2]):ut[2]);break}Qe[pt].lines.push(new U(nt++,kt))}return Object.keys(Qe).forEach(function(Wt){var $t=Qe[Wt];$t.lines.forEach(function(Pt){$t.index[Pt.number]=Pt})}),Qe}function Y(G){var se=[];return G.split(`
`).forEach(function(Oe){if(!(Oe.length<5)){var nt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Oe);nt?se.push(new L(nt[1]|0,nt[2]|0,nt[3].trim())):Oe.length>0&&se.push(new L("unknown",0,Oe))}}),se}function z(G,se){se.forEach(function(Oe){var nt=G[Oe.file];if(nt){var pt=nt.index[Oe.line];if(pt){pt.errors.push(Oe),nt.hasErrors=!0;return}}G.unknown.hasErrors=!0,G.unknown.lines[0].errors.push(Oe)})}function W(G,se,Oe,nt,pt){if(!G.getShaderParameter(se,G.COMPILE_STATUS)){var Qe=G.getShaderInfoLog(se),ft=nt===G.FRAGMENT_SHADER?"fragment":"vertex";ge(Oe,"string",ft+" shader source must be a string",pt);var kt=H(Oe,pt),jt=Y(Qe);z(kt,jt),Object.keys(kt).forEach(function(Nt){var ut=kt[Nt];if(!ut.hasErrors)return;var Wt=[""],$t=[""];function Pt(wt,qe){Wt.push(wt),$t.push(qe||"")}Pt("file number "+Nt+": "+ut.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ut.lines.forEach(function(wt){if(wt.errors.length>0){Pt(C(wt.number,4)+"|  ","background-color:yellow; font-weight:bold"),Pt(wt.line+r,"color:red; background-color:yellow; font-weight:bold");var qe=0;wt.errors.forEach(function(st){var Dt=st.message,Qt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Dt);if(Qt){var St=Qt[1];switch(Dt=Qt[2],St){case"assign":St="=";break}qe=Math.max(wt.line.indexOf(St,qe),0)}else qe=0;Pt(C("| ",6)),Pt(C("^^^",qe+3)+r,"font-weight:bold"),Pt(C("| ",6)),Pt(Dt+r,"font-weight:bold")}),Pt(C("| ",6)+r)}else Pt(C(wt.number,4)+"|  "),Pt(wt.line+r,"color:red")}),typeof document<"u"&&!window.chrome?($t[0]=Wt.join("%c"),console.log.apply(console,$t)):console.log(Wt.join(""))}),p.raise("Error compiling "+ft+" shader, "+kt[0].name)}}function B(G,se,Oe,nt,pt){if(!G.getProgramParameter(se,G.LINK_STATUS)){var Qe=G.getProgramInfoLog(se),ft=H(Oe,pt),kt=H(nt,pt),jt='Error linking program with vertex shader, "'+kt[0].name+'", and fragment shader "'+ft[0].name+'"';typeof document<"u"?console.log("%c"+jt+r+"%c"+Qe,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(jt+r+Qe),p.raise(jt)}}function q(G){G._commandRef=V()}function J(G,se,Oe,nt){q(G);function pt(jt){return jt?nt.id(jt):0}G._fragId=pt(G.static.frag),G._vertId=pt(G.static.vert);function Qe(jt,Nt){Object.keys(Nt).forEach(function(ut){jt[nt.id(ut)]=!0})}var ft=G._uniformSet={};Qe(ft,se.static),Qe(ft,se.dynamic);var kt=G._attributeSet={};Qe(kt,Oe.static),Qe(kt,Oe.dynamic),G._hasCount="count"in G.static||"count"in G.dynamic||"elements"in G.static||"elements"in G.dynamic}function ce(G,se){var Oe=$();c(G+" in command "+(se||V())+(Oe==="unknown"?"":" called from "+Oe))}function re(G,se,Oe){G||ce(se,Oe||V())}function Pe(G,se,Oe,nt){G in se||ce("unknown parameter ("+G+")"+d(Oe)+". possible values: "+Object.keys(se).join(),nt||V())}function ge(G,se,Oe,nt){b(G,se)||ce("invalid parameter type"+d(Oe)+". expected "+se+", got "+typeof G,nt||V())}function fe(G){G()}function Ee(G,se,Oe){G.texture?A(G.texture._texture.internalformat,se,"unsupported texture format for attachment"):A(G.renderbuffer._renderbuffer.format,Oe,"unsupported renderbuffer format for attachment")}var Ne=33071,rt=9728,mt=9984,Je=9985,Xt=9986,en=9987,Bt=5120,Nn=5121,Ue=5122,Ae=5123,$e=5124,vt=5125,Ut=5126,Et=32819,rn=32820,Kt=33635,Pn=34042,yn=36193,dt={};dt[Bt]=dt[Nn]=1,dt[Ue]=dt[Ae]=dt[yn]=dt[Kt]=dt[Et]=dt[rn]=2,dt[$e]=dt[vt]=dt[Ut]=dt[Pn]=4;function An(G,se){return G===rn||G===Et||G===Kt?2:G===Pn?4:dt[G]*se}function Ve(G){return!(G&G-1)&&!!G}function bn(G,se,Oe){var nt,pt=se.width,Qe=se.height,ft=se.channels;p(pt>0&&pt<=Oe.maxTextureSize&&Qe>0&&Qe<=Oe.maxTextureSize,"invalid texture shape"),(G.wrapS!==Ne||G.wrapT!==Ne)&&p(Ve(pt)&&Ve(Qe),"incompatible wrap mode for texture, both width and height must be power of 2"),se.mipmask===1?pt!==1&&Qe!==1&&p(G.minFilter!==mt&&G.minFilter!==Xt&&G.minFilter!==Je&&G.minFilter!==en,"min filter requires mipmap"):(p(Ve(pt)&&Ve(Qe),"texture must be a square power of 2 to support mipmapping"),p(se.mipmask===(pt<<1)-1,"missing or incomplete mipmap data")),se.type===Ut&&(Oe.extensions.indexOf("oes_texture_float_linear")<0&&p(G.minFilter===rt&&G.magFilter===rt,"filter not supported, must enable oes_texture_float_linear"),p(!G.genMipmaps,"mipmap generation not supported with float textures"));var kt=se.images;for(nt=0;nt<16;++nt)if(kt[nt]){var jt=pt>>nt,Nt=Qe>>nt;p(se.mipmask&1<<nt,"missing mipmap data");var ut=kt[nt];if(p(ut.width===jt&&ut.height===Nt,"invalid shape for mip images"),p(ut.format===se.format&&ut.internalformat===se.internalformat&&ut.type===se.type,"incompatible type for mip image"),!ut.compressed)if(ut.data){var Wt=Math.ceil(An(ut.type,ft)*jt/ut.unpackAlignment)*ut.unpackAlignment;p(ut.data.byteLength===Wt*Nt,"invalid data for image, buffer size is inconsistent with image format")}else ut.element||ut.copy}else G.genMipmaps||p((se.mipmask&1<<nt)===0,"extra mipmap data");se.compressed&&p(!G.genMipmaps,"mipmap generation for compressed images not supported")}function lr(G,se,Oe,nt){var pt=G.width,Qe=G.height,ft=G.channels;p(pt>0&&pt<=nt.maxTextureSize&&Qe>0&&Qe<=nt.maxTextureSize,"invalid texture shape"),p(pt===Qe,"cube map must be square"),p(se.wrapS===Ne&&se.wrapT===Ne,"wrap mode not supported by cube map");for(var kt=0;kt<Oe.length;++kt){var jt=Oe[kt];p(jt.width===pt&&jt.height===Qe,"inconsistent cube map face shape"),se.genMipmaps&&(p(!jt.compressed,"can not generate mipmap for compressed textures"),p(jt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Nt=jt.images,ut=0;ut<16;++ut){var Wt=Nt[ut];if(Wt){var $t=pt>>ut,Pt=Qe>>ut;p(jt.mipmask&1<<ut,"missing mipmap data"),p(Wt.width===$t&&Wt.height===Pt,"invalid shape for mip images"),p(Wt.format===G.format&&Wt.internalformat===G.internalformat&&Wt.type===G.type,"incompatible type for mip image"),Wt.compressed||(Wt.data?p(Wt.data.byteLength===$t*Pt*Math.max(An(Wt.type,ft),Wt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Wt.element||Wt.copy)}}}}var le=a(p,{optional:fe,raise:c,commandRaise:ce,command:re,parameter:_,commandParameter:Pe,constructor:E,type:S,commandType:ge,isTypedArray:g,nni:T,oneOf:A,shaderError:W,linkError:B,callSite:$,saveCommandRef:q,saveDrawInfo:J,framebufferFormat:Ee,guessCommand:V,texture2D:bn,textureCube:lr}),sr=0,Ir=0,io=5,wo=6;function Yn(G,se){this.id=sr++,this.type=G,this.data=se}function Go(G){return G.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Me(G){if(G.length===0)return[];var se=G.charAt(0),Oe=G.charAt(G.length-1);if(G.length>1&&se===Oe&&(se==='"'||se==="'"))return['"'+Go(G.substr(1,G.length-2))+'"'];var nt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(G);if(nt)return Me(G.substr(0,nt.index)).concat(Me(nt[1])).concat(Me(G.substr(nt.index+nt[0].length)));var pt=G.split(".");if(pt.length===1)return['"'+Go(G)+'"'];for(var Qe=[],ft=0;ft<pt.length;++ft)Qe=Qe.concat(Me(pt[ft]));return Qe}function Ze(G){return"["+Me(G).join("][")+"]"}function Le(G,se){return new Yn(G,Ze(se+""))}function lt(G){return typeof G=="function"&&!G._reglType||G instanceof Yn}function on(G,se){if(typeof G=="function")return new Yn(Ir,G);if(typeof G=="number"||typeof G=="boolean")return new Yn(io,G);if(Array.isArray(G))return new Yn(wo,G.map((Oe,nt)=>on(Oe,se+"["+nt+"]")));if(G instanceof Yn)return G;le(!1,"invalid option type in uniform "+se)}var Jt={DynamicVariable:Yn,define:Le,isDynamic:lt,unbox:on,accessor:Ze},Dn={next:typeof requestAnimationFrame=="function"?function(G){return requestAnimationFrame(G)}:function(G){return setTimeout(G,16)},cancel:typeof cancelAnimationFrame=="function"?function(G){return cancelAnimationFrame(G)}:clearTimeout},Sr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ui(){var G={"":0},se=[""];return{id:function(Oe){var nt=G[Oe];return nt||(nt=G[Oe]=se.length,se.push(Oe),nt)},str:function(Oe){return se[Oe]}}}function Si(G,se,Oe){var nt=document.createElement("canvas");a(nt.style,{border:0,margin:0,padding:0,top:0,left:0}),G.appendChild(nt),G===document.body&&(nt.style.position="absolute",a(G.style,{margin:0,padding:0}));function pt(){var kt=window.innerWidth,jt=window.innerHeight;if(G!==document.body){var Nt=G.getBoundingClientRect();kt=Nt.right-Nt.left,jt=Nt.bottom-Nt.top}nt.width=Oe*kt,nt.height=Oe*jt,a(nt.style,{width:kt+"px",height:jt+"px"})}var Qe;G!==document.body&&typeof ResizeObserver=="function"?(Qe=new ResizeObserver(function(){setTimeout(pt)}),Qe.observe(G)):window.addEventListener("resize",pt,!1);function ft(){Qe?Qe.disconnect():window.removeEventListener("resize",pt),G.removeChild(nt)}return pt(),{canvas:nt,onDestroy:ft}}function Zo(G,se){function Oe(nt){try{return G.getContext(nt,se)}catch{return null}}return Oe("webgl")||Oe("experimental-webgl")||Oe("webgl-experimental")}function ni(G){return typeof G.nodeName=="string"&&typeof G.appendChild=="function"&&typeof G.getBoundingClientRect=="function"}function Tn(G){return typeof G.drawArrays=="function"||typeof G.drawElements=="function"}function Un(G){return typeof G=="string"?G.split():(le(Array.isArray(G),"invalid extension array"),G)}function Kn(G){return typeof G=="string"?(le(typeof document<"u","not supported outside of DOM"),document.querySelector(G)):G}function ur(G){var se=G||{},Oe,nt,pt,Qe,ft={},kt=[],jt=[],Nt=typeof window>"u"?1:window.devicePixelRatio,ut=!1,Wt=function(wt){wt&&le.raise(wt)},$t=function(){};if(typeof se=="string"?(le(typeof document<"u","selector queries only supported in DOM enviroments"),Oe=document.querySelector(se),le(Oe,"invalid query string for element")):typeof se=="object"?ni(se)?Oe=se:Tn(se)?(Qe=se,pt=Qe.canvas):(le.constructor(se),"gl"in se?Qe=se.gl:"canvas"in se?pt=Kn(se.canvas):"container"in se&&(nt=Kn(se.container)),"attributes"in se&&(ft=se.attributes,le.type(ft,"object","invalid context attributes")),"extensions"in se&&(kt=Un(se.extensions)),"optionalExtensions"in se&&(jt=Un(se.optionalExtensions)),"onDone"in se&&(le.type(se.onDone,"function","invalid or missing onDone callback"),Wt=se.onDone),"profile"in se&&(ut=!!se.profile),"pixelRatio"in se&&(Nt=+se.pixelRatio,le(Nt>0,"invalid pixel ratio"))):le.raise("invalid arguments to regl"),Oe&&(Oe.nodeName.toLowerCase()==="canvas"?pt=Oe:nt=Oe),!Qe){if(!pt){le(typeof document<"u","must manually specify webgl context outside of DOM environments");var Pt=Si(nt||document.body,Wt,Nt);if(!Pt)return null;pt=Pt.canvas,$t=Pt.onDestroy}ft.premultipliedAlpha===void 0&&(ft.premultipliedAlpha=!0),Qe=Zo(pt,ft)}return Qe?{gl:Qe,canvas:pt,container:nt,extensions:kt,optionalExtensions:jt,pixelRatio:Nt,profile:ut,onDone:Wt,onDestroy:$t}:($t(),Wt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function to(G,se){var Oe={};function nt(ft){le.type(ft,"string","extension name must be string");var kt=ft.toLowerCase(),jt;try{jt=Oe[kt]=G.getExtension(kt)}catch{}return!!jt}for(var pt=0;pt<se.extensions.length;++pt){var Qe=se.extensions[pt];if(!nt(Qe))return se.onDestroy(),se.onDone('"'+Qe+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return se.optionalExtensions.forEach(nt),{extensions:Oe,restore:function(){Object.keys(Oe).forEach(function(ft){if(Oe[ft]&&!nt(ft))throw new Error("(regl): error restoring extension "+ft)})}}}function Lr(G,se){for(var Oe=Array(G),nt=0;nt<G;++nt)Oe[nt]=se(nt);return Oe}var yl=5120,Ha=5121,gl=5122,as=5123,Kd=5124,bc=5125,ma=5126;function Fs(G){for(var se=16;se<=1<<28;se*=16)if(G<=se)return se;return 0}function Cn(G){var se,Oe;return se=(G>65535)<<4,G>>>=se,Oe=(G>255)<<3,G>>>=Oe,se|=Oe,Oe=(G>15)<<2,G>>>=Oe,se|=Oe,Oe=(G>3)<<1,G>>>=Oe,se|=Oe,se|G>>1}function Lf(){var G=Lr(8,function(){return[]});function se(Qe){var ft=Fs(Qe),kt=G[Cn(ft)>>2];return kt.length>0?kt.pop():new ArrayBuffer(ft)}function Oe(Qe){G[Cn(Qe.byteLength)>>2].push(Qe)}function nt(Qe,ft){var kt=null;switch(Qe){case yl:kt=new Int8Array(se(ft),0,ft);break;case Ha:kt=new Uint8Array(se(ft),0,ft);break;case gl:kt=new Int16Array(se(2*ft),0,ft);break;case as:kt=new Uint16Array(se(2*ft),0,ft);break;case Kd:kt=new Int32Array(se(4*ft),0,ft);break;case bc:kt=new Uint32Array(se(4*ft),0,ft);break;case ma:kt=new Float32Array(se(4*ft),0,ft);break;default:return null}return kt.length!==ft?kt.subarray(0,ft):kt}function pt(Qe){Oe(Qe.buffer)}return{alloc:se,free:Oe,allocType:nt,freeType:pt}}var Eo=Lf();Eo.zero=Lf();var wc=3408,Ji=3410,aa=3411,ku=3412,Ra=3413,ya=3414,Ca=3415,Ec=33901,Oc=33902,$f=3379,Bs=3386,Ff=34921,Sc=36347,Zd=36348,Il=35661,Bf=35660,_l=34930,xc=36349,Nu=34076,Ac=34024,Tc=7936,Jd=7937,Uf=7938,Kr=35724,Xr=34047,Vf=36063,ls=34852,ga=3553,Pu=34067,Gf=34069,zo=33984,Ll=6408,$l=5126,Ru=5121,ss=36160,xi=36053,Mc=36064,zf=16384,kc=function(G,se){var Oe=1;se.ext_texture_filter_anisotropic&&(Oe=G.getParameter(Xr));var nt=1,pt=1;se.webgl_draw_buffers&&(nt=G.getParameter(ls),pt=G.getParameter(Vf));var Qe=!!se.oes_texture_float;if(Qe){var ft=G.createTexture();G.bindTexture(ga,ft),G.texImage2D(ga,0,Ll,1,1,0,Ll,$l,null);var kt=G.createFramebuffer();if(G.bindFramebuffer(ss,kt),G.framebufferTexture2D(ss,Mc,ga,ft,0),G.bindTexture(ga,null),G.checkFramebufferStatus(ss)!==xi)Qe=!1;else{G.viewport(0,0,1,1),G.clearColor(1,0,0,1),G.clear(zf);var jt=Eo.allocType($l,4);G.readPixels(0,0,1,1,Ll,$l,jt),G.getError()?Qe=!1:(G.deleteFramebuffer(kt),G.deleteTexture(ft),Qe=jt[0]===1),Eo.freeType(jt)}}var Nt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ut=!0;if(!Nt){var Wt=G.createTexture(),$t=Eo.allocType(Ru,36);G.activeTexture(zo),G.bindTexture(Pu,Wt),G.texImage2D(Gf,0,Ll,3,3,0,Ll,Ru,$t),Eo.freeType($t),G.bindTexture(Pu,null),G.deleteTexture(Wt),ut=!G.getError()}return{colorBits:[G.getParameter(Ji),G.getParameter(aa),G.getParameter(ku),G.getParameter(Ra)],depthBits:G.getParameter(ya),stencilBits:G.getParameter(Ca),subpixelBits:G.getParameter(wc),extensions:Object.keys(se).filter(function(Pt){return!!se[Pt]}),maxAnisotropic:Oe,maxDrawbuffers:nt,maxColorAttachments:pt,pointSizeDims:G.getParameter(Ec),lineWidthDims:G.getParameter(Oc),maxViewportDims:G.getParameter(Bs),maxCombinedTextureUnits:G.getParameter(Il),maxCubeMapSize:G.getParameter(Nu),maxRenderbufferSize:G.getParameter(Ac),maxTextureUnits:G.getParameter(_l),maxTextureSize:G.getParameter($f),maxAttributes:G.getParameter(Ff),maxVertexUniforms:G.getParameter(Sc),maxVertexTextureUnits:G.getParameter(Bf),maxVaryingVectors:G.getParameter(Zd),maxFragmentUniforms:G.getParameter(xc),glsl:G.getParameter(Kr),renderer:G.getParameter(Jd),vendor:G.getParameter(Tc),version:G.getParameter(Uf),readFloat:Qe,npotTextureCube:ut}};function Fi(G){return!!G&&typeof G=="object"&&Array.isArray(G.shape)&&Array.isArray(G.stride)&&typeof G.offset=="number"&&G.shape.length===G.stride.length&&(Array.isArray(G.data)||n(G.data))}var ci=function(G){return Object.keys(G).map(function(se){return G[se]})},_a={shape:Ui,flatten:Hf};function lo(G,se,Oe){for(var nt=0;nt<se;++nt)Oe[nt]=G[nt]}function Qd(G,se,Oe,nt){for(var pt=0,Qe=0;Qe<se;++Qe)for(var ft=G[Qe],kt=0;kt<Oe;++kt)nt[pt++]=ft[kt]}function Bi(G,se,Oe,nt,pt,Qe){for(var ft=Qe,kt=0;kt<se;++kt)for(var jt=G[kt],Nt=0;Nt<Oe;++Nt)for(var ut=jt[Nt],Wt=0;Wt<nt;++Wt)pt[ft++]=ut[Wt]}function Wf(G,se,Oe,nt,pt){for(var Qe=1,ft=Oe+1;ft<se.length;++ft)Qe*=se[ft];var kt=se[Oe];if(se.length-Oe===4){var jt=se[Oe+1],Nt=se[Oe+2],ut=se[Oe+3];for(ft=0;ft<kt;++ft)Bi(G[ft],jt,Nt,ut,nt,pt),pt+=Qe}else for(ft=0;ft<kt;++ft)Wf(G[ft],se,Oe+1,nt,pt),pt+=Qe}function Hf(G,se,Oe,nt){var pt=1;if(se.length)for(var Qe=0;Qe<se.length;++Qe)pt*=se[Qe];else pt=0;var ft=nt||Eo.allocType(Oe,pt);switch(se.length){case 0:break;case 1:lo(G,se[0],ft);break;case 2:Qd(G,se[0],se[1],ft);break;case 3:Bi(G,se[0],se[1],se[2],ft,0);break;default:Wf(G,se,0,ft,0)}return ft}function Ui(G){for(var se=[],Oe=G;Oe.length;Oe=Oe[0])se.push(Oe.length);return se}var Qi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Nc=5120,Vr=5122,fi=5124,Cu=5121,Xf=5123,Pc=5125,Du=5126,Xa=5126,Vi={int8:Nc,int16:Vr,int32:fi,uint8:Cu,uint16:Xf,uint32:Pc,float:Du,float32:Xa},us=35048,ea=35040,ba={dynamic:us,stream:ea,static:35044},Cr=_a.flatten,Gi=_a.shape,Da=35044,gi=35040,cs=5121,Fl=5126,ja=[];ja[5120]=1,ja[5122]=2,ja[5124]=4,ja[5121]=1,ja[5123]=2,ja[5125]=4,ja[5126]=4;function po(G){return Qi[Object.prototype.toString.call(G)]|0}function Us(G,se){for(var Oe=0;Oe<se.length;++Oe)G[Oe]=se[Oe]}function qa(G,se,Oe,nt,pt,Qe,ft){for(var kt=0,jt=0;jt<Oe;++jt)for(var Nt=0;Nt<nt;++Nt)G[kt++]=se[pt*jt+Qe*Nt+ft]}function wa(G,se,Oe,nt){var pt=0,Qe={};function ft(qe){this.id=pt++,this.buffer=G.createBuffer(),this.type=qe,this.usage=Da,this.byteLength=0,this.dimension=1,this.dtype=cs,this.persistentData=null,Oe.profile&&(this.stats={size:0})}ft.prototype.bind=function(){G.bindBuffer(this.type,this.buffer)},ft.prototype.destroy=function(){$t(this)};var kt=[];function jt(qe,st){var Dt=kt.pop();return Dt||(Dt=new ft(qe)),Dt.bind(),Wt(Dt,st,gi,0,1,!1),Dt}function Nt(qe){kt.push(qe)}function ut(qe,st,Dt){qe.byteLength=st.byteLength,G.bufferData(qe.type,st,Dt)}function Wt(qe,st,Dt,Qt,St,nn){var At;if(qe.usage=Dt,Array.isArray(st)){if(qe.dtype=Qt||Fl,st.length>0){var Gt;if(Array.isArray(st[0])){At=Gi(st);for(var xt=1,Ht=1;Ht<At.length;++Ht)xt*=At[Ht];qe.dimension=xt,Gt=Cr(st,At,qe.dtype),ut(qe,Gt,Dt),nn?qe.persistentData=Gt:Eo.freeType(Gt)}else if(typeof st[0]=="number"){qe.dimension=St;var Rn=Eo.allocType(qe.dtype,st.length);Us(Rn,st),ut(qe,Rn,Dt),nn?qe.persistentData=Rn:Eo.freeType(Rn)}else n(st[0])?(qe.dimension=st[0].length,qe.dtype=Qt||po(st[0])||Fl,Gt=Cr(st,[st.length,st[0].length],qe.dtype),ut(qe,Gt,Dt),nn?qe.persistentData=Gt:Eo.freeType(Gt)):le.raise("invalid buffer data")}}else if(n(st))qe.dtype=Qt||po(st),qe.dimension=St,ut(qe,st,Dt),nn&&(qe.persistentData=new Uint8Array(new Uint8Array(st.buffer)));else if(Fi(st)){At=st.shape;var Wn=st.stride,Rt=st.offset,Tt=0,Ot=0,Ln=0,rr=0;At.length===1?(Tt=At[0],Ot=1,Ln=Wn[0],rr=0):At.length===2?(Tt=At[0],Ot=At[1],Ln=Wn[0],rr=Wn[1]):le.raise("invalid shape"),qe.dtype=Qt||po(st.data)||Fl,qe.dimension=Ot;var pn=Eo.allocType(qe.dtype,Tt*Ot);qa(pn,st.data,Tt,Ot,Ln,rr,Rt),ut(qe,pn,Dt),nn?qe.persistentData=pn:Eo.freeType(pn)}else st instanceof ArrayBuffer?(qe.dtype=cs,qe.dimension=St,ut(qe,st,Dt),nn&&(qe.persistentData=new Uint8Array(new Uint8Array(st)))):le.raise("invalid buffer data")}function $t(qe){se.bufferCount--,nt(qe);var st=qe.buffer;le(st,"buffer must not be deleted already"),G.deleteBuffer(st),qe.buffer=null,delete Qe[qe.id]}function Pt(qe,st,Dt,Qt){se.bufferCount++;var St=new ft(st);Qe[St.id]=St;function nn(xt){var Ht=Da,Rn=null,Wn=0,Rt=0,Tt=1;return Array.isArray(xt)||n(xt)||Fi(xt)||xt instanceof ArrayBuffer?Rn=xt:typeof xt=="number"?Wn=xt|0:xt&&(le.type(xt,"object","buffer arguments must be an object, a number or an array"),"data"in xt&&(le(Rn===null||Array.isArray(Rn)||n(Rn)||Fi(Rn),"invalid data for buffer"),Rn=xt.data),"usage"in xt&&(le.parameter(xt.usage,ba,"invalid buffer usage"),Ht=ba[xt.usage]),"type"in xt&&(le.parameter(xt.type,Vi,"invalid buffer type"),Rt=Vi[xt.type]),"dimension"in xt&&(le.type(xt.dimension,"number","invalid dimension"),Tt=xt.dimension|0),"length"in xt&&(le.nni(Wn,"buffer length must be a nonnegative integer"),Wn=xt.length|0)),St.bind(),Rn?Wt(St,Rn,Ht,Rt,Tt,Qt):(Wn&&G.bufferData(St.type,Wn,Ht),St.dtype=Rt||cs,St.usage=Ht,St.dimension=Tt,St.byteLength=Wn),Oe.profile&&(St.stats.size=St.byteLength*ja[St.dtype]),nn}function At(xt,Ht){le(Ht+xt.byteLength<=St.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+xt.byteLength+" starting from offset "+Ht+" to a buffer of size "+St.byteLength),G.bufferSubData(St.type,Ht,xt)}function Gt(xt,Ht){var Rn=(Ht||0)|0,Wn;if(St.bind(),n(xt)||xt instanceof ArrayBuffer)At(xt,Rn);else if(Array.isArray(xt)){if(xt.length>0)if(typeof xt[0]=="number"){var Rt=Eo.allocType(St.dtype,xt.length);Us(Rt,xt),At(Rt,Rn),Eo.freeType(Rt)}else if(Array.isArray(xt[0])||n(xt[0])){Wn=Gi(xt);var Tt=Cr(xt,Wn,St.dtype);At(Tt,Rn),Eo.freeType(Tt)}else le.raise("invalid buffer data")}else if(Fi(xt)){Wn=xt.shape;var Ot=xt.stride,Ln=0,rr=0,pn=0,cr=0;Wn.length===1?(Ln=Wn[0],rr=1,pn=Ot[0],cr=0):Wn.length===2?(Ln=Wn[0],rr=Wn[1],pn=Ot[0],cr=Ot[1]):le.raise("invalid shape");var Hn=Array.isArray(xt.data)?St.dtype:po(xt.data),ir=Eo.allocType(Hn,Ln*rr);qa(ir,xt.data,Ln,rr,pn,cr,xt.offset),At(ir,Rn),Eo.freeType(ir)}else le.raise("invalid data for buffer subdata");return nn}return Dt||nn(qe),nn._reglType="buffer",nn._buffer=St,nn.subdata=Gt,Oe.profile&&(nn.stats=St.stats),nn.destroy=function(){$t(St)},nn}function wt(){ci(Qe).forEach(function(qe){qe.buffer=G.createBuffer(),G.bindBuffer(qe.type,qe.buffer),G.bufferData(qe.type,qe.persistentData||qe.byteLength,qe.usage)})}return Oe.profile&&(se.getTotalBufferSize=function(){var qe=0;return Object.keys(Qe).forEach(function(st){qe+=Qe[st].stats.size}),qe}),{create:Pt,createStream:jt,destroyStream:Nt,clear:function(){ci(Qe).forEach($t),kt.forEach($t)},getBuffer:function(qe){return qe&&qe._buffer instanceof ft?qe._buffer:null},restore:wt,_initBuffer:Wt}}var Rc=0,ep=0,Cc=1,Jo=1,Vs=4,Ya=4,ri={points:Rc,point:ep,lines:Cc,line:Jo,triangles:Vs,triangle:Ya,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Dc=0,la=1,Ea=4,ju=5120,zi=5121,ta=5122,di=5123,sa=5124,Ii=5125,ct=34963,It=35040,Lt=35044;function vn(G,se,Oe,nt){var pt={},Qe=0,ft={uint8:zi,uint16:di};se.oes_element_index_uint&&(ft.uint32=Ii);function kt(wt){this.id=Qe++,pt[this.id]=this,this.buffer=wt,this.primType=Ea,this.vertCount=0,this.type=0}kt.prototype.bind=function(){this.buffer.bind()};var jt=[];function Nt(wt){var qe=jt.pop();return qe||(qe=new kt(Oe.create(null,ct,!0,!1)._buffer)),Wt(qe,wt,It,-1,-1,0,0),qe}function ut(wt){jt.push(wt)}function Wt(wt,qe,st,Dt,Qt,St,nn){wt.buffer.bind();var At;if(qe){var Gt=nn;!nn&&(!n(qe)||Fi(qe)&&!n(qe.data))&&(Gt=se.oes_element_index_uint?Ii:di),Oe._initBuffer(wt.buffer,qe,st,Gt,3)}else G.bufferData(ct,St,st),wt.buffer.dtype=At||zi,wt.buffer.usage=st,wt.buffer.dimension=3,wt.buffer.byteLength=St;if(At=nn,!nn){switch(wt.buffer.dtype){case zi:case ju:At=zi;break;case di:case ta:At=di;break;case Ii:case sa:At=Ii;break;default:le.raise("unsupported type for element array")}wt.buffer.dtype=At}wt.type=At,le(At!==Ii||!!se.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var xt=Qt;xt<0&&(xt=wt.buffer.byteLength,At===di?xt>>=1:At===Ii&&(xt>>=2)),wt.vertCount=xt;var Ht=Dt;if(Dt<0){Ht=Ea;var Rn=wt.buffer.dimension;Rn===1&&(Ht=Dc),Rn===2&&(Ht=la),Rn===3&&(Ht=Ea)}wt.primType=Ht}function $t(wt){nt.elementsCount--,le(wt.buffer!==null,"must not double destroy elements"),delete pt[wt.id],wt.buffer.destroy(),wt.buffer=null}function Pt(wt,qe){var st=Oe.create(null,ct,!0),Dt=new kt(st._buffer);nt.elementsCount++;function Qt(St){if(!St)st(),Dt.primType=Ea,Dt.vertCount=0,Dt.type=zi;else if(typeof St=="number")st(St),Dt.primType=Ea,Dt.vertCount=St|0,Dt.type=zi;else{var nn=null,At=Lt,Gt=-1,xt=-1,Ht=0,Rn=0;Array.isArray(St)||n(St)||Fi(St)?nn=St:(le.type(St,"object","invalid arguments for elements"),"data"in St&&(nn=St.data,le(Array.isArray(nn)||n(nn)||Fi(nn),"invalid data for element buffer")),"usage"in St&&(le.parameter(St.usage,ba,"invalid element buffer usage"),At=ba[St.usage]),"primitive"in St&&(le.parameter(St.primitive,ri,"invalid element buffer primitive"),Gt=ri[St.primitive]),"count"in St&&(le(typeof St.count=="number"&&St.count>=0,"invalid vertex count for elements"),xt=St.count|0),"type"in St&&(le.parameter(St.type,ft,"invalid buffer type"),Rn=ft[St.type]),"length"in St?Ht=St.length|0:(Ht=xt,Rn===di||Rn===ta?Ht*=2:(Rn===Ii||Rn===sa)&&(Ht*=4))),Wt(Dt,nn,At,Gt,xt,Ht,Rn)}return Qt}return Qt(wt),Qt._reglType="elements",Qt._elements=Dt,Qt.subdata=function(St,nn){return st.subdata(St,nn),Qt},Qt.destroy=function(){$t(Dt)},Qt}return{create:Pt,createStream:Nt,destroyStream:ut,getElements:function(wt){return typeof wt=="function"&&wt._elements instanceof kt?wt._elements:null},clear:function(){ci(pt).forEach($t)}}}var pr=new Float32Array(1),Dr=new Uint32Array(pr.buffer),ho=5123;function N(G){for(var se=Eo.allocType(ho,G.length),Oe=0;Oe<G.length;++Oe)if(isNaN(G[Oe]))se[Oe]=65535;else if(G[Oe]===1/0)se[Oe]=31744;else if(G[Oe]===-1/0)se[Oe]=64512;else{pr[0]=G[Oe];var nt=Dr[0],pt=nt>>>31<<15,Qe=(nt<<1>>>24)-127,ft=nt>>13&1023;if(Qe<-24)se[Oe]=pt;else if(Qe<-14){var kt=-14-Qe;se[Oe]=pt+(ft+1024>>kt)}else Qe>15?se[Oe]=pt+31744:se[Oe]=pt+(Qe+15<<10)+ft}return se}function P(G){return Array.isArray(G)||n(G)}var X=function(G){return!(G&G-1)&&!!G},ie=34467,we=3553,Xe=34067,yt=34069,zt=6408,En=6406,Er=6407,dn=6409,qr=6410,_r=32854,Fr=32855,ua=36194,Mo=32819,na=32820,bl=33635,wl=34042,Bl=6402,fs=34041,Ka=35904,ds=35906,oi=36193,Ul=33776,El=33777,Za=33778,Ja=33779,Gs=35986,fh=35987,dh=34798,tp=35840,jc=35841,zs=35842,qf=35843,ph=36196,Ws=5121,Ic=5123,Yf=5125,Wo=5126,Wi=10242,Kf=10243,Zf=10497,Iu=33071,Wv=33648,Lu=10240,$u=10241,Lc=9728,Hs=9729,ps=9984,Fu=9985,$c=9986,hs=9987,Hv=33170,Fc=4352,Xv=4353,qv=4354,hh=34046,Jf=3317,Li=37440,vh=37441,ae=37443,Xs=37444,Vl=33984,Ia=[ps,$c,Fu,hs],jr=[0,dn,qr,Er,zt],Ai={};Ai[dn]=Ai[En]=Ai[Bl]=1,Ai[fs]=Ai[qr]=2,Ai[Er]=Ai[Ka]=3,Ai[zt]=Ai[ds]=4;function Gr(G){return"[object "+G+"]"}var Qa=Gr("HTMLCanvasElement"),Gl=Gr("OffscreenCanvas"),Oa=Gr("CanvasRenderingContext2D"),Qf=Gr("ImageBitmap"),ed=Gr("HTMLImageElement"),np=Gr("HTMLVideoElement"),mh=Object.keys(Qi).concat([Qa,Gl,Oa,Qf,ed,np]),zl=[];zl[Ws]=1,zl[Wo]=4,zl[oi]=2,zl[Ic]=2,zl[Yf]=4;var Ho=[];Ho[_r]=2,Ho[Fr]=2,Ho[ua]=2,Ho[fs]=4,Ho[Ul]=.5,Ho[El]=.5,Ho[Za]=1,Ho[Ja]=1,Ho[Gs]=.5,Ho[fh]=1,Ho[dh]=1,Ho[tp]=.5,Ho[jc]=.25,Ho[zs]=.5,Ho[qf]=.25,Ho[ph]=.5;function Bu(G){return Array.isArray(G)&&(G.length===0||typeof G[0]=="number")}function rp(G){if(!Array.isArray(G))return!1;var se=G.length;return!(se===0||!P(G[0]))}function Wl(G){return Object.prototype.toString.call(G)}function el(G){return Wl(G)===Qa}function Bc(G){return Wl(G)===Gl}function vs(G){return Wl(G)===Oa}function Sa(G){return Wl(G)===Qf}function op(G){return Wl(G)===ed}function ip(G){return Wl(G)===np}function tl(G){if(!G)return!1;var se=Wl(G);return mh.indexOf(se)>=0?!0:Bu(G)||rp(G)||Fi(G)}function Oo(G){return Qi[Object.prototype.toString.call(G)]|0}function yh(G,se){var Oe=se.length;switch(G.type){case Ws:case Ic:case Yf:case Wo:var nt=Eo.allocType(G.type,Oe);nt.set(se),G.data=nt;break;case oi:G.data=N(se);break;default:le.raise("unsupported texture type, must specify a typed array")}}function ap(G,se){return Eo.allocType(G.type===oi?Wo:G.type,se)}function Xo(G,se){G.type===oi?(G.data=N(se),Eo.freeType(se)):G.data=se}function Zr(G,se,Oe,nt,pt,Qe){for(var ft=G.width,kt=G.height,jt=G.channels,Nt=ft*kt*jt,ut=ap(G,Nt),Wt=0,$t=0;$t<kt;++$t)for(var Pt=0;Pt<ft;++Pt)for(var wt=0;wt<jt;++wt)ut[Wt++]=se[Oe*Pt+nt*$t+pt*wt+Qe];Xo(G,ut)}function ii(G,se,Oe,nt,pt,Qe){var ft;if(typeof Ho[G]<"u"?ft=Ho[G]:ft=Ai[G]*zl[se],Qe&&(ft*=6),pt){for(var kt=0,jt=Oe;jt>=1;)kt+=ft*jt*jt,jt/=2;return kt}else return ft*Oe*nt}function Mr(G,se,Oe,nt,pt,Qe,ft){var kt={"don't care":Fc,"dont care":Fc,nice:qv,fast:Xv},jt={repeat:Zf,clamp:Iu,mirror:Wv},Nt={nearest:Lc,linear:Hs},ut=a({mipmap:hs,"nearest mipmap nearest":ps,"linear mipmap nearest":Fu,"nearest mipmap linear":$c,"linear mipmap linear":hs},Nt),Wt={none:0,browser:Xs},$t={uint8:Ws,rgba4:Mo,rgb565:bl,"rgb5 a1":na},Pt={alpha:En,luminance:dn,"luminance alpha":qr,rgb:Er,rgba:zt,rgba4:_r,"rgb5 a1":Fr,rgb565:ua},wt={};se.ext_srgb&&(Pt.srgb=Ka,Pt.srgba=ds),se.oes_texture_float&&($t.float32=$t.float=Wo),se.oes_texture_half_float&&($t.float16=$t["half float"]=oi),se.webgl_depth_texture&&(a(Pt,{depth:Bl,"depth stencil":fs}),a($t,{uint16:Ic,uint32:Yf,"depth stencil":wl})),se.webgl_compressed_texture_s3tc&&a(wt,{"rgb s3tc dxt1":Ul,"rgba s3tc dxt1":El,"rgba s3tc dxt3":Za,"rgba s3tc dxt5":Ja}),se.webgl_compressed_texture_atc&&a(wt,{"rgb atc":Gs,"rgba atc explicit alpha":fh,"rgba atc interpolated alpha":dh}),se.webgl_compressed_texture_pvrtc&&a(wt,{"rgb pvrtc 4bppv1":tp,"rgb pvrtc 2bppv1":jc,"rgba pvrtc 4bppv1":zs,"rgba pvrtc 2bppv1":qf}),se.webgl_compressed_texture_etc1&&(wt["rgb etc1"]=ph);var qe=Array.prototype.slice.call(G.getParameter(ie));Object.keys(wt).forEach(function(ye){var ot=wt[ye];qe.indexOf(ot)>=0&&(Pt[ye]=ot)});var st=Object.keys(Pt);Oe.textureFormats=st;var Dt=[];Object.keys(Pt).forEach(function(ye){var ot=Pt[ye];Dt[ot]=ye});var Qt=[];Object.keys($t).forEach(function(ye){var ot=$t[ye];Qt[ot]=ye});var St=[];Object.keys(Nt).forEach(function(ye){var ot=Nt[ye];St[ot]=ye});var nn=[];Object.keys(ut).forEach(function(ye){var ot=ut[ye];nn[ot]=ye});var At=[];Object.keys(jt).forEach(function(ye){var ot=jt[ye];At[ot]=ye});var Gt=st.reduce(function(ye,ot){var et=Pt[ot];return et===dn||et===En||et===dn||et===qr||et===Bl||et===fs||se.ext_srgb&&(et===Ka||et===ds)?ye[et]=et:et===Fr||ot.indexOf("rgba")>=0?ye[et]=zt:ye[et]=Er,ye},{});function xt(){this.internalformat=zt,this.format=zt,this.type=Ws,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Xs,this.width=0,this.height=0,this.channels=0}function Ht(ye,ot){ye.internalformat=ot.internalformat,ye.format=ot.format,ye.type=ot.type,ye.compressed=ot.compressed,ye.premultiplyAlpha=ot.premultiplyAlpha,ye.flipY=ot.flipY,ye.unpackAlignment=ot.unpackAlignment,ye.colorSpace=ot.colorSpace,ye.width=ot.width,ye.height=ot.height,ye.channels=ot.channels}function Rn(ye,ot){if(!(typeof ot!="object"||!ot)){if("premultiplyAlpha"in ot&&(le.type(ot.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ye.premultiplyAlpha=ot.premultiplyAlpha),"flipY"in ot&&(le.type(ot.flipY,"boolean","invalid texture flip"),ye.flipY=ot.flipY),"alignment"in ot&&(le.oneOf(ot.alignment,[1,2,4,8],"invalid texture unpack alignment"),ye.unpackAlignment=ot.alignment),"colorSpace"in ot&&(le.parameter(ot.colorSpace,Wt,"invalid colorSpace"),ye.colorSpace=Wt[ot.colorSpace]),"type"in ot){var et=ot.type;le(se.oes_texture_float||!(et==="float"||et==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),le(se.oes_texture_half_float||!(et==="half float"||et==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),le(se.webgl_depth_texture||!(et==="uint16"||et==="uint32"||et==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),le.parameter(et,$t,"invalid texture type"),ye.type=$t[et]}var sn=ye.width,hr=ye.height,he=ye.channels,oe=!1;"shape"in ot?(le(Array.isArray(ot.shape)&&ot.shape.length>=2,"shape must be an array"),sn=ot.shape[0],hr=ot.shape[1],ot.shape.length===3&&(he=ot.shape[2],le(he>0&&he<=4,"invalid number of channels"),oe=!0),le(sn>=0&&sn<=Oe.maxTextureSize,"invalid width"),le(hr>=0&&hr<=Oe.maxTextureSize,"invalid height")):("radius"in ot&&(sn=hr=ot.radius,le(sn>=0&&sn<=Oe.maxTextureSize,"invalid radius")),"width"in ot&&(sn=ot.width,le(sn>=0&&sn<=Oe.maxTextureSize,"invalid width")),"height"in ot&&(hr=ot.height,le(hr>=0&&hr<=Oe.maxTextureSize,"invalid height")),"channels"in ot&&(he=ot.channels,le(he>0&&he<=4,"invalid number of channels"),oe=!0)),ye.width=sn|0,ye.height=hr|0,ye.channels=he|0;var Re=!1;if("format"in ot){var Ge=ot.format;le(se.webgl_depth_texture||!(Ge==="depth"||Ge==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),le.parameter(Ge,Pt,"invalid texture format");var Ye=ye.internalformat=Pt[Ge];ye.format=Gt[Ye],Ge in $t&&("type"in ot||(ye.type=$t[Ge])),Ge in wt&&(ye.compressed=!0),Re=!0}!oe&&Re?ye.channels=Ai[ye.format]:oe&&!Re?ye.channels!==jr[ye.format]&&(ye.format=ye.internalformat=jr[ye.channels]):Re&&oe&&le(ye.channels===Ai[ye.format],"number of channels inconsistent with specified format")}}function Wn(ye){G.pixelStorei(Li,ye.flipY),G.pixelStorei(vh,ye.premultiplyAlpha),G.pixelStorei(ae,ye.colorSpace),G.pixelStorei(Jf,ye.unpackAlignment)}function Rt(){xt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Tt(ye,ot){var et=null;if(tl(ot)?et=ot:ot&&(le.type(ot,"object","invalid pixel data type"),Rn(ye,ot),"x"in ot&&(ye.xOffset=ot.x|0),"y"in ot&&(ye.yOffset=ot.y|0),tl(ot.data)&&(et=ot.data)),le(!ye.compressed||et instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ot.copy){le(!et,"can not specify copy and data field for the same texture");var sn=pt.viewportWidth,hr=pt.viewportHeight;ye.width=ye.width||sn-ye.xOffset,ye.height=ye.height||hr-ye.yOffset,ye.needsCopy=!0,le(ye.xOffset>=0&&ye.xOffset<sn&&ye.yOffset>=0&&ye.yOffset<hr&&ye.width>0&&ye.width<=sn&&ye.height>0&&ye.height<=hr,"copy texture read out of bounds")}else if(!et)ye.width=ye.width||1,ye.height=ye.height||1,ye.channels=ye.channels||4;else if(n(et))ye.channels=ye.channels||4,ye.data=et,!("type"in ot)&&ye.type===Ws&&(ye.type=Oo(et));else if(Bu(et))ye.channels=ye.channels||4,yh(ye,et),ye.alignment=1,ye.needsFree=!0;else if(Fi(et)){var he=et.data;!Array.isArray(he)&&ye.type===Ws&&(ye.type=Oo(he));var oe=et.shape,Re=et.stride,Ge,Ye,De,Ce,Fe,pe;oe.length===3?(De=oe[2],pe=Re[2]):(le(oe.length===2,"invalid ndarray pixel data, must be 2 or 3D"),De=1,pe=1),Ge=oe[0],Ye=oe[1],Ce=Re[0],Fe=Re[1],ye.alignment=1,ye.width=Ge,ye.height=Ye,ye.channels=De,ye.format=ye.internalformat=jr[De],ye.needsFree=!0,Zr(ye,he,Ce,Fe,pe,et.offset)}else if(el(et)||Bc(et)||vs(et))el(et)||Bc(et)?ye.element=et:ye.element=et.canvas,ye.width=ye.element.width,ye.height=ye.element.height,ye.channels=4;else if(Sa(et))ye.element=et,ye.width=et.width,ye.height=et.height,ye.channels=4;else if(op(et))ye.element=et,ye.width=et.naturalWidth,ye.height=et.naturalHeight,ye.channels=4;else if(ip(et))ye.element=et,ye.width=et.videoWidth,ye.height=et.videoHeight,ye.channels=4;else if(rp(et)){var Te=ye.width||et[0].length,de=ye.height||et.length,ze=ye.channels;P(et[0][0])?ze=ze||et[0][0].length:ze=ze||1;for(var We=_a.shape(et),h=1,y=0;y<We.length;++y)h*=We[y];var x=ap(ye,h);_a.flatten(et,We,"",x),Xo(ye,x),ye.alignment=1,ye.width=Te,ye.height=de,ye.channels=ze,ye.format=ye.internalformat=jr[ze],ye.needsFree=!0}ye.type===Wo?le(Oe.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ye.type===oi&&le(Oe.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ot(ye,ot,et){var sn=ye.element,hr=ye.data,he=ye.internalformat,oe=ye.format,Re=ye.type,Ge=ye.width,Ye=ye.height;Wn(ye),sn?G.texImage2D(ot,et,oe,oe,Re,sn):ye.compressed?G.compressedTexImage2D(ot,et,he,Ge,Ye,0,hr):ye.needsCopy?(nt(),G.copyTexImage2D(ot,et,oe,ye.xOffset,ye.yOffset,Ge,Ye,0)):G.texImage2D(ot,et,oe,Ge,Ye,0,oe,Re,hr||null)}function Ln(ye,ot,et,sn,hr){var he=ye.element,oe=ye.data,Re=ye.internalformat,Ge=ye.format,Ye=ye.type,De=ye.width,Ce=ye.height;Wn(ye),he?G.texSubImage2D(ot,hr,et,sn,Ge,Ye,he):ye.compressed?G.compressedTexSubImage2D(ot,hr,et,sn,Re,De,Ce,oe):ye.needsCopy?(nt(),G.copyTexSubImage2D(ot,hr,et,sn,ye.xOffset,ye.yOffset,De,Ce)):G.texSubImage2D(ot,hr,et,sn,De,Ce,Ge,Ye,oe)}var rr=[];function pn(){return rr.pop()||new Rt}function cr(ye){ye.needsFree&&Eo.freeType(ye.data),Rt.call(ye),rr.push(ye)}function Hn(){xt.call(this),this.genMipmaps=!1,this.mipmapHint=Fc,this.mipmask=0,this.images=Array(16)}function ir(ye,ot,et){var sn=ye.images[0]=pn();ye.mipmask=1,sn.width=ye.width=ot,sn.height=ye.height=et,sn.channels=ye.channels=4}function wr(ye,ot){var et=null;if(tl(ot))et=ye.images[0]=pn(),Ht(et,ye),Tt(et,ot),ye.mipmask=1;else if(Rn(ye,ot),Array.isArray(ot.mipmap))for(var sn=ot.mipmap,hr=0;hr<sn.length;++hr)et=ye.images[hr]=pn(),Ht(et,ye),et.width>>=hr,et.height>>=hr,Tt(et,sn[hr]),ye.mipmask|=1<<hr;else et=ye.images[0]=pn(),Ht(et,ye),Tt(et,ot),ye.mipmask=1;Ht(ye,ye.images[0]),ye.compressed&&(ye.internalformat===Ul||ye.internalformat===El||ye.internalformat===Za||ye.internalformat===Ja)&&le(ye.width%4===0&&ye.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function $o(ye,ot){for(var et=ye.images,sn=0;sn<et.length;++sn){if(!et[sn])return;Ot(et[sn],ot,sn)}}var Ro=[];function or(){var ye=Ro.pop()||new Hn;xt.call(ye),ye.mipmask=0;for(var ot=0;ot<16;++ot)ye.images[ot]=null;return ye}function Qo(ye){for(var ot=ye.images,et=0;et<ot.length;++et)ot[et]&&cr(ot[et]),ot[et]=null;Ro.push(ye)}function so(){this.minFilter=Lc,this.magFilter=Lc,this.wrapS=Iu,this.wrapT=Iu,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Fc}function Fo(ye,ot){if("min"in ot){var et=ot.min;le.parameter(et,ut),ye.minFilter=ut[et],Ia.indexOf(ye.minFilter)>=0&&!("faces"in ot)&&(ye.genMipmaps=!0)}if("mag"in ot){var sn=ot.mag;le.parameter(sn,Nt),ye.magFilter=Nt[sn]}var hr=ye.wrapS,he=ye.wrapT;if("wrap"in ot){var oe=ot.wrap;typeof oe=="string"?(le.parameter(oe,jt),hr=he=jt[oe]):Array.isArray(oe)&&(le.parameter(oe[0],jt),le.parameter(oe[1],jt),hr=jt[oe[0]],he=jt[oe[1]])}else{if("wrapS"in ot){var Re=ot.wrapS;le.parameter(Re,jt),hr=jt[Re]}if("wrapT"in ot){var Ge=ot.wrapT;le.parameter(Ge,jt),he=jt[Ge]}}if(ye.wrapS=hr,ye.wrapT=he,"anisotropic"in ot){var Ye=ot.anisotropic;le(typeof Ye=="number"&&Ye>=1&&Ye<=Oe.maxAnisotropic,"aniso samples must be between 1 and "),ye.anisotropic=ot.anisotropic}if("mipmap"in ot){var De=!1;switch(typeof ot.mipmap){case"string":le.parameter(ot.mipmap,kt,"invalid mipmap hint"),ye.mipmapHint=kt[ot.mipmap],ye.genMipmaps=!0,De=!0;break;case"boolean":De=ye.genMipmaps=ot.mipmap;break;case"object":le(Array.isArray(ot.mipmap),"invalid mipmap type"),ye.genMipmaps=!1,De=!0;break;default:le.raise("invalid mipmap type")}De&&!("min"in ot)&&(ye.minFilter=ps)}}function Ko(ye,ot){G.texParameteri(ot,$u,ye.minFilter),G.texParameteri(ot,Lu,ye.magFilter),G.texParameteri(ot,Wi,ye.wrapS),G.texParameteri(ot,Kf,ye.wrapT),se.ext_texture_filter_anisotropic&&G.texParameteri(ot,hh,ye.anisotropic),ye.genMipmaps&&(G.hint(Hv,ye.mipmapHint),G.generateMipmap(ot))}var ai=0,hi={},ei=Oe.maxTextureUnits,vo=Array(ei).map(function(){return null});function Qn(ye){xt.call(this),this.mipmask=0,this.internalformat=zt,this.id=ai++,this.refCount=1,this.target=ye,this.texture=G.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new so,ft.profile&&(this.stats={size:0})}function vi(ye){G.activeTexture(Vl),G.bindTexture(ye.target,ye.texture)}function Nr(){var ye=vo[0];ye?G.bindTexture(ye.target,ye.texture):G.bindTexture(we,null)}function In(ye){var ot=ye.texture;le(ot,"must not double destroy texture");var et=ye.unit,sn=ye.target;et>=0&&(G.activeTexture(Vl+et),G.bindTexture(sn,null),vo[et]=null),G.deleteTexture(ot),ye.texture=null,ye.params=null,ye.pixels=null,ye.refCount=0,delete hi[ye.id],Qe.textureCount--}a(Qn.prototype,{bind:function(){var ye=this;ye.bindCount+=1;var ot=ye.unit;if(ot<0){for(var et=0;et<ei;++et){var sn=vo[et];if(sn){if(sn.bindCount>0)continue;sn.unit=-1}vo[et]=ye,ot=et;break}ot>=ei&&le.raise("insufficient number of texture units"),ft.profile&&Qe.maxTextureUnits<ot+1&&(Qe.maxTextureUnits=ot+1),ye.unit=ot,G.activeTexture(Vl+ot),G.bindTexture(ye.target,ye.texture)}return ot},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&In(this)}});function mr(ye,ot){var et=new Qn(we);hi[et.id]=et,Qe.textureCount++;function sn(oe,Re){var Ge=et.texInfo;so.call(Ge);var Ye=or();return typeof oe=="number"?typeof Re=="number"?ir(Ye,oe|0,Re|0):ir(Ye,oe|0,oe|0):oe?(le.type(oe,"object","invalid arguments to regl.texture"),Fo(Ge,oe),wr(Ye,oe)):ir(Ye,1,1),Ge.genMipmaps&&(Ye.mipmask=(Ye.width<<1)-1),et.mipmask=Ye.mipmask,Ht(et,Ye),le.texture2D(Ge,Ye,Oe),et.internalformat=Ye.internalformat,sn.width=Ye.width,sn.height=Ye.height,vi(et),$o(Ye,we),Ko(Ge,we),Nr(),Qo(Ye),ft.profile&&(et.stats.size=ii(et.internalformat,et.type,Ye.width,Ye.height,Ge.genMipmaps,!1)),sn.format=Dt[et.internalformat],sn.type=Qt[et.type],sn.mag=St[Ge.magFilter],sn.min=nn[Ge.minFilter],sn.wrapS=At[Ge.wrapS],sn.wrapT=At[Ge.wrapT],sn}function hr(oe,Re,Ge,Ye){le(!!oe,"must specify image data");var De=Re|0,Ce=Ge|0,Fe=Ye|0,pe=pn();return Ht(pe,et),pe.width=0,pe.height=0,Tt(pe,oe),pe.width=pe.width||(et.width>>Fe)-De,pe.height=pe.height||(et.height>>Fe)-Ce,le(et.type===pe.type&&et.format===pe.format&&et.internalformat===pe.internalformat,"incompatible format for texture.subimage"),le(De>=0&&Ce>=0&&De+pe.width<=et.width&&Ce+pe.height<=et.height,"texture.subimage write out of bounds"),le(et.mipmask&1<<Fe,"missing mipmap data"),le(pe.data||pe.element||pe.needsCopy,"missing image data"),vi(et),Ln(pe,we,De,Ce,Fe),Nr(),cr(pe),sn}function he(oe,Re){var Ge=oe|0,Ye=Re|0||Ge;if(Ge===et.width&&Ye===et.height)return sn;sn.width=et.width=Ge,sn.height=et.height=Ye,vi(et);for(var De=0;et.mipmask>>De;++De){var Ce=Ge>>De,Fe=Ye>>De;if(!Ce||!Fe)break;G.texImage2D(we,De,et.format,Ce,Fe,0,et.format,et.type,null)}return Nr(),ft.profile&&(et.stats.size=ii(et.internalformat,et.type,Ge,Ye,!1,!1)),sn}return sn(ye,ot),sn.subimage=hr,sn.resize=he,sn._reglType="texture2d",sn._texture=et,ft.profile&&(sn.stats=et.stats),sn.destroy=function(){et.decRef()},sn}function er(ye,ot,et,sn,hr,he){var oe=new Qn(Xe);hi[oe.id]=oe,Qe.cubeCount++;var Re=new Array(6);function Ge(Ce,Fe,pe,Te,de,ze){var We,h=oe.texInfo;for(so.call(h),We=0;We<6;++We)Re[We]=or();if(typeof Ce=="number"||!Ce){var y=Ce|0||1;for(We=0;We<6;++We)ir(Re[We],y,y)}else if(typeof Ce=="object")if(Fe)wr(Re[0],Ce),wr(Re[1],Fe),wr(Re[2],pe),wr(Re[3],Te),wr(Re[4],de),wr(Re[5],ze);else if(Fo(h,Ce),Rn(oe,Ce),"faces"in Ce){var x=Ce.faces;for(le(Array.isArray(x)&&x.length===6,"cube faces must be a length 6 array"),We=0;We<6;++We)le(typeof x[We]=="object"&&!!x[We],"invalid input for cube map face"),Ht(Re[We],oe),wr(Re[We],x[We])}else for(We=0;We<6;++We)wr(Re[We],Ce);else le.raise("invalid arguments to cube map");for(Ht(oe,Re[0]),Oe.npotTextureCube||le(X(oe.width)&&X(oe.height),"your browser does not support non power or two texture dimensions"),h.genMipmaps?oe.mipmask=(Re[0].width<<1)-1:oe.mipmask=Re[0].mipmask,le.textureCube(oe,h,Re,Oe),oe.internalformat=Re[0].internalformat,Ge.width=Re[0].width,Ge.height=Re[0].height,vi(oe),We=0;We<6;++We)$o(Re[We],yt+We);for(Ko(h,Xe),Nr(),ft.profile&&(oe.stats.size=ii(oe.internalformat,oe.type,Ge.width,Ge.height,h.genMipmaps,!0)),Ge.format=Dt[oe.internalformat],Ge.type=Qt[oe.type],Ge.mag=St[h.magFilter],Ge.min=nn[h.minFilter],Ge.wrapS=At[h.wrapS],Ge.wrapT=At[h.wrapT],We=0;We<6;++We)Qo(Re[We]);return Ge}function Ye(Ce,Fe,pe,Te,de){le(!!Fe,"must specify image data"),le(typeof Ce=="number"&&Ce===(Ce|0)&&Ce>=0&&Ce<6,"invalid face");var ze=pe|0,We=Te|0,h=de|0,y=pn();return Ht(y,oe),y.width=0,y.height=0,Tt(y,Fe),y.width=y.width||(oe.width>>h)-ze,y.height=y.height||(oe.height>>h)-We,le(oe.type===y.type&&oe.format===y.format&&oe.internalformat===y.internalformat,"incompatible format for texture.subimage"),le(ze>=0&&We>=0&&ze+y.width<=oe.width&&We+y.height<=oe.height,"texture.subimage write out of bounds"),le(oe.mipmask&1<<h,"missing mipmap data"),le(y.data||y.element||y.needsCopy,"missing image data"),vi(oe),Ln(y,yt+Ce,ze,We,h),Nr(),cr(y),Ge}function De(Ce){var Fe=Ce|0;if(Fe!==oe.width){Ge.width=oe.width=Fe,Ge.height=oe.height=Fe,vi(oe);for(var pe=0;pe<6;++pe)for(var Te=0;oe.mipmask>>Te;++Te)G.texImage2D(yt+pe,Te,oe.format,Fe>>Te,Fe>>Te,0,oe.format,oe.type,null);return Nr(),ft.profile&&(oe.stats.size=ii(oe.internalformat,oe.type,Ge.width,Ge.height,!1,!0)),Ge}}return Ge(ye,ot,et,sn,hr,he),Ge.subimage=Ye,Ge.resize=De,Ge._reglType="textureCube",Ge._texture=oe,ft.profile&&(Ge.stats=oe.stats),Ge.destroy=function(){oe.decRef()},Ge}function mo(){for(var ye=0;ye<ei;++ye)G.activeTexture(Vl+ye),G.bindTexture(we,null),vo[ye]=null;ci(hi).forEach(In),Qe.cubeCount=0,Qe.textureCount=0}ft.profile&&(Qe.getTotalTextureSize=function(){var ye=0;return Object.keys(hi).forEach(function(ot){ye+=hi[ot].stats.size}),ye});function kl(){for(var ye=0;ye<ei;++ye){var ot=vo[ye];ot&&(ot.bindCount=0,ot.unit=-1,vo[ye]=null)}ci(hi).forEach(function(et){et.texture=G.createTexture(),G.bindTexture(et.target,et.texture);for(var sn=0;sn<32;++sn)if((et.mipmask&1<<sn)!==0)if(et.target===we)G.texImage2D(we,sn,et.internalformat,et.width>>sn,et.height>>sn,0,et.internalformat,et.type,null);else for(var hr=0;hr<6;++hr)G.texImage2D(yt+hr,sn,et.internalformat,et.width>>sn,et.height>>sn,0,et.internalformat,et.type,null);Ko(et.texInfo,et.target)})}function xo(){for(var ye=0;ye<ei;++ye){var ot=vo[ye];ot&&(ot.bindCount=0,ot.unit=-1,vo[ye]=null),G.activeTexture(Vl+ye),G.bindTexture(we,null),G.bindTexture(Xe,null)}}return{create2D:mr,createCube:er,clear:mo,getTexture:function(ye){return null},restore:kl,refresh:xo}}var co=36161,jn=32854,fo=32855,Uc=36194,Ol=33189,td=36168,ko=34041,Do=35907,lp=34836,sp=34842,Vc=34843,Hi=[];Hi[jn]=2,Hi[fo]=2,Hi[Uc]=2,Hi[Ol]=2,Hi[td]=1,Hi[ko]=4,Hi[Do]=4,Hi[lp]=16,Hi[sp]=8,Hi[Vc]=6;function nd(G,se,Oe){return Hi[G]*se*Oe}var Uu=function(G,se,Oe,nt,pt){var Qe={rgba4:jn,rgb565:Uc,"rgb5 a1":fo,depth:Ol,stencil:td,"depth stencil":ko};se.ext_srgb&&(Qe.srgba=Do),se.ext_color_buffer_half_float&&(Qe.rgba16f=sp,Qe.rgb16f=Vc),se.webgl_color_buffer_float&&(Qe.rgba32f=lp);var ft=[];Object.keys(Qe).forEach(function(Pt){var wt=Qe[Pt];ft[wt]=Pt});var kt=0,jt={};function Nt(Pt){this.id=kt++,this.refCount=1,this.renderbuffer=Pt,this.format=jn,this.width=0,this.height=0,pt.profile&&(this.stats={size:0})}Nt.prototype.decRef=function(){--this.refCount<=0&&ut(this)};function ut(Pt){var wt=Pt.renderbuffer;le(wt,"must not double destroy renderbuffer"),G.bindRenderbuffer(co,null),G.deleteRenderbuffer(wt),Pt.renderbuffer=null,Pt.refCount=0,delete jt[Pt.id],nt.renderbufferCount--}function Wt(Pt,wt){var qe=new Nt(G.createRenderbuffer());jt[qe.id]=qe,nt.renderbufferCount++;function st(Qt,St){var nn=0,At=0,Gt=jn;if(typeof Qt=="object"&&Qt){var xt=Qt;if("shape"in xt){var Ht=xt.shape;le(Array.isArray(Ht)&&Ht.length>=2,"invalid renderbuffer shape"),nn=Ht[0]|0,At=Ht[1]|0}else"radius"in xt&&(nn=At=xt.radius|0),"width"in xt&&(nn=xt.width|0),"height"in xt&&(At=xt.height|0);"format"in xt&&(le.parameter(xt.format,Qe,"invalid renderbuffer format"),Gt=Qe[xt.format])}else typeof Qt=="number"?(nn=Qt|0,typeof St=="number"?At=St|0:At=nn):Qt?le.raise("invalid arguments to renderbuffer constructor"):nn=At=1;if(le(nn>0&&At>0&&nn<=Oe.maxRenderbufferSize&&At<=Oe.maxRenderbufferSize,"invalid renderbuffer size"),!(nn===qe.width&&At===qe.height&&Gt===qe.format))return st.width=qe.width=nn,st.height=qe.height=At,qe.format=Gt,G.bindRenderbuffer(co,qe.renderbuffer),G.renderbufferStorage(co,Gt,nn,At),le(G.getError()===0,"invalid render buffer format"),pt.profile&&(qe.stats.size=nd(qe.format,qe.width,qe.height)),st.format=ft[qe.format],st}function Dt(Qt,St){var nn=Qt|0,At=St|0||nn;return nn===qe.width&&At===qe.height||(le(nn>0&&At>0&&nn<=Oe.maxRenderbufferSize&&At<=Oe.maxRenderbufferSize,"invalid renderbuffer size"),st.width=qe.width=nn,st.height=qe.height=At,G.bindRenderbuffer(co,qe.renderbuffer),G.renderbufferStorage(co,qe.format,nn,At),le(G.getError()===0,"invalid render buffer format"),pt.profile&&(qe.stats.size=nd(qe.format,qe.width,qe.height))),st}return st(Pt,wt),st.resize=Dt,st._reglType="renderbuffer",st._renderbuffer=qe,pt.profile&&(st.stats=qe.stats),st.destroy=function(){qe.decRef()},st}pt.profile&&(nt.getTotalRenderbufferSize=function(){var Pt=0;return Object.keys(jt).forEach(function(wt){Pt+=jt[wt].stats.size}),Pt});function $t(){ci(jt).forEach(function(Pt){Pt.renderbuffer=G.createRenderbuffer(),G.bindRenderbuffer(co,Pt.renderbuffer),G.renderbufferStorage(co,Pt.format,Pt.width,Pt.height)}),G.bindRenderbuffer(co,null)}return{create:Wt,clear:function(){ci(jt).forEach(ut)},restore:$t}},La=36160,ms=36161,Hl=3553,$a=34069,gh=36064,Sl=36096,xa=36128,up=33306,cp=36053,rd=36054,_h=36055,bh=36057,wh=36061,od=36193,fp=5121,dp=5126,Gc=6407,kr=6408,Yv=6402,pp=[Gc,kr],qs=[];qs[kr]=4,qs[Gc]=3;var zc=[];zc[fp]=1,zc[dp]=4,zc[od]=2;var Kv=32854,Eh=32855,Aa=36194,Zv=33189,Wc=36168,id=34041,hp=35907,Oh=34836,ca=34842,ys=34843,ad=[Kv,Eh,Aa,hp,ca,ys,Oh],Ys={};Ys[cp]="complete",Ys[rd]="incomplete attachment",Ys[bh]="incomplete dimensions",Ys[_h]="incomplete, missing attachment",Ys[wh]="unsupported";function ld(G,se,Oe,nt,pt,Qe){var ft={cur:null,next:null,dirty:!1,setFBO:null},kt=["rgba"],jt=["rgba4","rgb565","rgb5 a1"];se.ext_srgb&&jt.push("srgba"),se.ext_color_buffer_half_float&&jt.push("rgba16f","rgb16f"),se.webgl_color_buffer_float&&jt.push("rgba32f");var Nt=["uint8"];se.oes_texture_half_float&&Nt.push("half float","float16"),se.oes_texture_float&&Nt.push("float","float32");function ut(Rt,Tt,Ot){this.target=Rt,this.texture=Tt,this.renderbuffer=Ot;var Ln=0,rr=0;Tt?(Ln=Tt.width,rr=Tt.height):Ot&&(Ln=Ot.width,rr=Ot.height),this.width=Ln,this.height=rr}function Wt(Rt){Rt&&(Rt.texture&&Rt.texture._texture.decRef(),Rt.renderbuffer&&Rt.renderbuffer._renderbuffer.decRef())}function $t(Rt,Tt,Ot){if(Rt)if(Rt.texture){var Ln=Rt.texture._texture,rr=Math.max(1,Ln.width),pn=Math.max(1,Ln.height);le(rr===Tt&&pn===Ot,"inconsistent width/height for supplied texture"),Ln.refCount+=1}else{var cr=Rt.renderbuffer._renderbuffer;le(cr.width===Tt&&cr.height===Ot,"inconsistent width/height for renderbuffer"),cr.refCount+=1}}function Pt(Rt,Tt){Tt&&(Tt.texture?G.framebufferTexture2D(La,Rt,Tt.target,Tt.texture._texture.texture,0):G.framebufferRenderbuffer(La,Rt,ms,Tt.renderbuffer._renderbuffer.renderbuffer))}function wt(Rt){var Tt=Hl,Ot=null,Ln=null,rr=Rt;typeof Rt=="object"&&(rr=Rt.data,"target"in Rt&&(Tt=Rt.target|0)),le.type(rr,"function","invalid attachment data");var pn=rr._reglType;return pn==="texture2d"?(Ot=rr,le(Tt===Hl)):pn==="textureCube"?(Ot=rr,le(Tt>=$a&&Tt<$a+6,"invalid cube map target")):pn==="renderbuffer"?(Ln=rr,Tt=ms):le.raise("invalid regl object for attachment"),new ut(Tt,Ot,Ln)}function qe(Rt,Tt,Ot,Ln,rr){if(Ot){var pn=nt.create2D({width:Rt,height:Tt,format:Ln,type:rr});return pn._texture.refCount=0,new ut(Hl,pn,null)}else{var cr=pt.create({width:Rt,height:Tt,format:Ln});return cr._renderbuffer.refCount=0,new ut(ms,null,cr)}}function st(Rt){return Rt&&(Rt.texture||Rt.renderbuffer)}function Dt(Rt,Tt,Ot){Rt&&(Rt.texture?Rt.texture.resize(Tt,Ot):Rt.renderbuffer&&Rt.renderbuffer.resize(Tt,Ot),Rt.width=Tt,Rt.height=Ot)}var Qt=0,St={};function nn(){this.id=Qt++,St[this.id]=this,this.framebuffer=G.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function At(Rt){Rt.colorAttachments.forEach(Wt),Wt(Rt.depthAttachment),Wt(Rt.stencilAttachment),Wt(Rt.depthStencilAttachment)}function Gt(Rt){var Tt=Rt.framebuffer;le(Tt,"must not double destroy framebuffer"),G.deleteFramebuffer(Tt),Rt.framebuffer=null,Qe.framebufferCount--,delete St[Rt.id]}function xt(Rt){var Tt;G.bindFramebuffer(La,Rt.framebuffer);var Ot=Rt.colorAttachments;for(Tt=0;Tt<Ot.length;++Tt)Pt(gh+Tt,Ot[Tt]);for(Tt=Ot.length;Tt<Oe.maxColorAttachments;++Tt)G.framebufferTexture2D(La,gh+Tt,Hl,null,0);G.framebufferTexture2D(La,up,Hl,null,0),G.framebufferTexture2D(La,Sl,Hl,null,0),G.framebufferTexture2D(La,xa,Hl,null,0),Pt(Sl,Rt.depthAttachment),Pt(xa,Rt.stencilAttachment),Pt(up,Rt.depthStencilAttachment);var Ln=G.checkFramebufferStatus(La);!G.isContextLost()&&Ln!==cp&&le.raise("framebuffer configuration not supported, status = "+Ys[Ln]),G.bindFramebuffer(La,ft.next?ft.next.framebuffer:null),ft.cur=ft.next,G.getError()}function Ht(Rt,Tt){var Ot=new nn;Qe.framebufferCount++;function Ln(pn,cr){var Hn;le(ft.next!==Ot,"can not update framebuffer which is currently in use");var ir=0,wr=0,$o=!0,Ro=!0,or=null,Qo=!0,so="rgba",Fo="uint8",Ko=1,ai=null,hi=null,ei=null,vo=!1;if(typeof pn=="number")ir=pn|0,wr=cr|0||ir;else if(!pn)ir=wr=1;else{le.type(pn,"object","invalid arguments for framebuffer");var Qn=pn;if("shape"in Qn){var vi=Qn.shape;le(Array.isArray(vi)&&vi.length>=2,"invalid shape for framebuffer"),ir=vi[0],wr=vi[1]}else"radius"in Qn&&(ir=wr=Qn.radius),"width"in Qn&&(ir=Qn.width),"height"in Qn&&(wr=Qn.height);("color"in Qn||"colors"in Qn)&&(or=Qn.color||Qn.colors,Array.isArray(or)&&le(or.length===1||se.webgl_draw_buffers,"multiple render targets not supported")),or||("colorCount"in Qn&&(Ko=Qn.colorCount|0,le(Ko>0,"invalid color buffer count")),"colorTexture"in Qn&&(Qo=!!Qn.colorTexture,so="rgba4"),"colorType"in Qn&&(Fo=Qn.colorType,Qo?(le(se.oes_texture_float||!(Fo==="float"||Fo==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),le(se.oes_texture_half_float||!(Fo==="half float"||Fo==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Fo==="half float"||Fo==="float16"?(le(se.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),so="rgba16f"):(Fo==="float"||Fo==="float32")&&(le(se.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),so="rgba32f"),le.oneOf(Fo,Nt,"invalid color type")),"colorFormat"in Qn&&(so=Qn.colorFormat,kt.indexOf(so)>=0?Qo=!0:jt.indexOf(so)>=0?Qo=!1:Qo?le.oneOf(Qn.colorFormat,kt,"invalid color format for texture"):le.oneOf(Qn.colorFormat,jt,"invalid color format for renderbuffer"))),("depthTexture"in Qn||"depthStencilTexture"in Qn)&&(vo=!!(Qn.depthTexture||Qn.depthStencilTexture),le(!vo||se.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Qn&&(typeof Qn.depth=="boolean"?$o=Qn.depth:(ai=Qn.depth,Ro=!1)),"stencil"in Qn&&(typeof Qn.stencil=="boolean"?Ro=Qn.stencil:(hi=Qn.stencil,$o=!1)),"depthStencil"in Qn&&(typeof Qn.depthStencil=="boolean"?$o=Ro=Qn.depthStencil:(ei=Qn.depthStencil,$o=!1,Ro=!1))}var Nr=null,In=null,mr=null,er=null;if(Array.isArray(or))Nr=or.map(wt);else if(or)Nr=[wt(or)];else for(Nr=new Array(Ko),Hn=0;Hn<Ko;++Hn)Nr[Hn]=qe(ir,wr,Qo,so,Fo);le(se.webgl_draw_buffers||Nr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),le(Nr.length<=Oe.maxColorAttachments,"too many color attachments, not supported"),ir=ir||Nr[0].width,wr=wr||Nr[0].height,ai?In=wt(ai):$o&&!Ro&&(In=qe(ir,wr,vo,"depth","uint32")),hi?mr=wt(hi):Ro&&!$o&&(mr=qe(ir,wr,!1,"stencil","uint8")),ei?er=wt(ei):!ai&&!hi&&Ro&&$o&&(er=qe(ir,wr,vo,"depth stencil","depth stencil")),le(!!ai+!!hi+!!ei<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var mo=null;for(Hn=0;Hn<Nr.length;++Hn)if($t(Nr[Hn],ir,wr),le(!Nr[Hn]||Nr[Hn].texture&&pp.indexOf(Nr[Hn].texture._texture.format)>=0||Nr[Hn].renderbuffer&&ad.indexOf(Nr[Hn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Hn+" is invalid"),Nr[Hn]&&Nr[Hn].texture){var kl=qs[Nr[Hn].texture._texture.format]*zc[Nr[Hn].texture._texture.type];mo===null?mo=kl:le(mo===kl,"all color attachments much have the same number of bits per pixel.")}return $t(In,ir,wr),le(!In||In.texture&&In.texture._texture.format===Yv||In.renderbuffer&&In.renderbuffer._renderbuffer.format===Zv,"invalid depth attachment for framebuffer object"),$t(mr,ir,wr),le(!mr||mr.renderbuffer&&mr.renderbuffer._renderbuffer.format===Wc,"invalid stencil attachment for framebuffer object"),$t(er,ir,wr),le(!er||er.texture&&er.texture._texture.format===id||er.renderbuffer&&er.renderbuffer._renderbuffer.format===id,"invalid depth-stencil attachment for framebuffer object"),At(Ot),Ot.width=ir,Ot.height=wr,Ot.colorAttachments=Nr,Ot.depthAttachment=In,Ot.stencilAttachment=mr,Ot.depthStencilAttachment=er,Ln.color=Nr.map(st),Ln.depth=st(In),Ln.stencil=st(mr),Ln.depthStencil=st(er),Ln.width=Ot.width,Ln.height=Ot.height,xt(Ot),Ln}function rr(pn,cr){le(ft.next!==Ot,"can not resize a framebuffer which is currently in use");var Hn=Math.max(pn|0,1),ir=Math.max(cr|0||Hn,1);if(Hn===Ot.width&&ir===Ot.height)return Ln;for(var wr=Ot.colorAttachments,$o=0;$o<wr.length;++$o)Dt(wr[$o],Hn,ir);return Dt(Ot.depthAttachment,Hn,ir),Dt(Ot.stencilAttachment,Hn,ir),Dt(Ot.depthStencilAttachment,Hn,ir),Ot.width=Ln.width=Hn,Ot.height=Ln.height=ir,xt(Ot),Ln}return Ln(Rt,Tt),a(Ln,{resize:rr,_reglType:"framebuffer",_framebuffer:Ot,destroy:function(){Gt(Ot),At(Ot)},use:function(pn){ft.setFBO({framebuffer:Ln},pn)}})}function Rn(Rt){var Tt=Array(6);function Ot(rr){var pn;le(Tt.indexOf(ft.next)<0,"can not update framebuffer which is currently in use");var cr={color:null},Hn=0,ir=null,wr="rgba",$o="uint8",Ro=1;if(typeof rr=="number")Hn=rr|0;else if(!rr)Hn=1;else{le.type(rr,"object","invalid arguments for framebuffer");var or=rr;if("shape"in or){var Qo=or.shape;le(Array.isArray(Qo)&&Qo.length>=2,"invalid shape for framebuffer"),le(Qo[0]===Qo[1],"cube framebuffer must be square"),Hn=Qo[0]}else"radius"in or&&(Hn=or.radius|0),"width"in or?(Hn=or.width|0,"height"in or&&le(or.height===Hn,"must be square")):"height"in or&&(Hn=or.height|0);("color"in or||"colors"in or)&&(ir=or.color||or.colors,Array.isArray(ir)&&le(ir.length===1||se.webgl_draw_buffers,"multiple render targets not supported")),ir||("colorCount"in or&&(Ro=or.colorCount|0,le(Ro>0,"invalid color buffer count")),"colorType"in or&&(le.oneOf(or.colorType,Nt,"invalid color type"),$o=or.colorType),"colorFormat"in or&&(wr=or.colorFormat,le.oneOf(or.colorFormat,kt,"invalid color format for texture"))),"depth"in or&&(cr.depth=or.depth),"stencil"in or&&(cr.stencil=or.stencil),"depthStencil"in or&&(cr.depthStencil=or.depthStencil)}var so;if(ir)if(Array.isArray(ir))for(so=[],pn=0;pn<ir.length;++pn)so[pn]=ir[pn];else so=[ir];else{so=Array(Ro);var Fo={radius:Hn,format:wr,type:$o};for(pn=0;pn<Ro;++pn)so[pn]=nt.createCube(Fo)}for(cr.color=Array(so.length),pn=0;pn<so.length;++pn){var Ko=so[pn];le(typeof Ko=="function"&&Ko._reglType==="textureCube","invalid cube map"),Hn=Hn||Ko.width,le(Ko.width===Hn&&Ko.height===Hn,"invalid cube map shape"),cr.color[pn]={target:$a,data:so[pn]}}for(pn=0;pn<6;++pn){for(var ai=0;ai<so.length;++ai)cr.color[ai].target=$a+pn;pn>0&&(cr.depth=Tt[0].depth,cr.stencil=Tt[0].stencil,cr.depthStencil=Tt[0].depthStencil),Tt[pn]?Tt[pn](cr):Tt[pn]=Ht(cr)}return a(Ot,{width:Hn,height:Hn,color:so})}function Ln(rr){var pn,cr=rr|0;if(le(cr>0&&cr<=Oe.maxCubeMapSize,"invalid radius for cube fbo"),cr===Ot.width)return Ot;var Hn=Ot.color;for(pn=0;pn<Hn.length;++pn)Hn[pn].resize(cr);for(pn=0;pn<6;++pn)Tt[pn].resize(cr);return Ot.width=Ot.height=cr,Ot}return Ot(Rt),a(Ot,{faces:Tt,resize:Ln,_reglType:"framebufferCube",destroy:function(){Tt.forEach(function(rr){rr.destroy()})}})}function Wn(){ft.cur=null,ft.next=null,ft.dirty=!0,ci(St).forEach(function(Rt){Rt.framebuffer=G.createFramebuffer(),xt(Rt)})}return a(ft,{getFramebuffer:function(Rt){if(typeof Rt=="function"&&Rt._reglType==="framebuffer"){var Tt=Rt._framebuffer;if(Tt instanceof nn)return Tt}return null},create:Ht,createCube:Rn,clear:function(){ci(St).forEach(Gt)},restore:Wn})}var vp=5126,sd=34962;function Hc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=vp,this.offset=0,this.stride=0,this.divisor=0}function ud(G,se,Oe,nt,pt){for(var Qe=Oe.maxAttributes,ft=new Array(Qe),kt=0;kt<Qe;++kt)ft[kt]=new Hc;var jt=0,Nt={},ut={Record:Hc,scope:{},state:ft,currentVAO:null,targetVAO:null,restore:$t()?St:function(){},createVAO:nn,getVAO:wt,destroyBuffer:Wt,setVAO:$t()?qe:st,clear:$t()?Dt:function(){}};function Wt(At){for(var Gt=0;Gt<ft.length;++Gt){var xt=ft[Gt];xt.buffer===At&&(G.disableVertexAttribArray(Gt),xt.buffer=null)}}function $t(){return se.oes_vertex_array_object}function Pt(){return se.angle_instanced_arrays}function wt(At){return typeof At=="function"&&At._vao?At._vao:null}function qe(At){if(At!==ut.currentVAO){var Gt=$t();At?Gt.bindVertexArrayOES(At.vao):Gt.bindVertexArrayOES(null),ut.currentVAO=At}}function st(At){if(At!==ut.currentVAO){if(At)At.bindAttrs();else for(var Gt=Pt(),xt=0;xt<ft.length;++xt){var Ht=ft[xt];Ht.buffer?(G.enableVertexAttribArray(xt),G.vertexAttribPointer(xt,Ht.size,Ht.type,Ht.normalized,Ht.stride,Ht.offfset),Gt&&Ht.divisor&&Gt.vertexAttribDivisorANGLE(xt,Ht.divisor)):(G.disableVertexAttribArray(xt),G.vertexAttrib4f(xt,Ht.x,Ht.y,Ht.z,Ht.w))}ut.currentVAO=At}}function Dt(){ci(Nt).forEach(function(At){At.destroy()})}function Qt(){this.id=++jt,this.attributes=[];var At=$t();At?this.vao=At.createVertexArrayOES():this.vao=null,Nt[this.id]=this,this.buffers=[]}Qt.prototype.bindAttrs=function(){for(var At=Pt(),Gt=this.attributes,xt=0;xt<Gt.length;++xt){var Ht=Gt[xt];Ht.buffer?(G.enableVertexAttribArray(xt),G.bindBuffer(sd,Ht.buffer.buffer),G.vertexAttribPointer(xt,Ht.size,Ht.type,Ht.normalized,Ht.stride,Ht.offset),At&&Ht.divisor&&At.vertexAttribDivisorANGLE(xt,Ht.divisor)):(G.disableVertexAttribArray(xt),G.vertexAttrib4f(xt,Ht.x,Ht.y,Ht.z,Ht.w))}for(var Rn=Gt.length;Rn<Qe;++Rn)G.disableVertexAttribArray(Rn)},Qt.prototype.refresh=function(){var At=$t();At&&(At.bindVertexArrayOES(this.vao),this.bindAttrs(),ut.currentVAO=this)},Qt.prototype.destroy=function(){if(this.vao){var At=$t();this===ut.currentVAO&&(ut.currentVAO=null,At.bindVertexArrayOES(null)),At.deleteVertexArrayOES(this.vao),this.vao=null}Nt[this.id]&&(delete Nt[this.id],nt.vaoCount-=1)};function St(){var At=$t();At&&ci(Nt).forEach(function(Gt){Gt.refresh()})}function nn(At){var Gt=new Qt;nt.vaoCount+=1;function xt(Ht){le(Array.isArray(Ht),"arguments to vertex array constructor must be an array"),le(Ht.length<Qe,"too many attributes"),le(Ht.length>0,"must specify at least one attribute");var Rn={},Wn=Gt.attributes;Wn.length=Ht.length;for(var Rt=0;Rt<Ht.length;++Rt){var Tt=Ht[Rt],Ot=Wn[Rt]=new Hc,Ln=Tt.data||Tt;if(Array.isArray(Ln)||n(Ln)||Fi(Ln)){var rr;Gt.buffers[Rt]&&(rr=Gt.buffers[Rt],n(Ln)&&rr._buffer.byteLength>=Ln.byteLength?rr.subdata(Ln):(rr.destroy(),Gt.buffers[Rt]=null)),Gt.buffers[Rt]||(rr=Gt.buffers[Rt]=pt.create(Tt,sd,!1,!0)),Ot.buffer=pt.getBuffer(rr),Ot.size=Ot.buffer.dimension|0,Ot.normalized=!1,Ot.type=Ot.buffer.dtype,Ot.offset=0,Ot.stride=0,Ot.divisor=0,Ot.state=1,Rn[Rt]=1}else pt.getBuffer(Tt)?(Ot.buffer=pt.getBuffer(Tt),Ot.size=Ot.buffer.dimension|0,Ot.normalized=!1,Ot.type=Ot.buffer.dtype,Ot.offset=0,Ot.stride=0,Ot.divisor=0,Ot.state=1):pt.getBuffer(Tt.buffer)?(Ot.buffer=pt.getBuffer(Tt.buffer),Ot.size=(+Tt.size||Ot.buffer.dimension)|0,Ot.normalized=!!Tt.normalized||!1,"type"in Tt?(le.parameter(Tt.type,Vi,"invalid buffer type"),Ot.type=Vi[Tt.type]):Ot.type=Ot.buffer.dtype,Ot.offset=(Tt.offset||0)|0,Ot.stride=(Tt.stride||0)|0,Ot.divisor=(Tt.divisor||0)|0,Ot.state=1,le(Ot.size>=1&&Ot.size<=4,"size must be between 1 and 4"),le(Ot.offset>=0,"invalid offset"),le(Ot.stride>=0&&Ot.stride<=255,"stride must be between 0 and 255"),le(Ot.divisor>=0,"divisor must be positive"),le(!Ot.divisor||!!se.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Tt?(le(Rt>0,"first attribute must not be a constant"),Ot.x=+Tt.x||0,Ot.y=+Tt.y||0,Ot.z=+Tt.z||0,Ot.w=+Tt.w||0,Ot.state=2):le(!1,"invalid attribute spec for location "+Rt)}for(var pn=0;pn<Gt.buffers.length;++pn)!Rn[pn]&&Gt.buffers[pn]&&(Gt.buffers[pn].destroy(),Gt.buffers[pn]=null);return Gt.refresh(),xt}return xt.destroy=function(){for(var Ht=0;Ht<Gt.buffers.length;++Ht)Gt.buffers[Ht]&&Gt.buffers[Ht].destroy();Gt.buffers.length=0,Gt.destroy()},xt._vao=Gt,xt._reglType="vao",xt(At)}return ut}var cd=35632,Yr=35633,Jv=35718,no=35721;function fd(G,se,Oe,nt){var pt={},Qe={};function ft(qe,st,Dt,Qt){this.name=qe,this.id=st,this.location=Dt,this.info=Qt}function kt(qe,st){for(var Dt=0;Dt<qe.length;++Dt)if(qe[Dt].id===st.id){qe[Dt].location=st.location;return}qe.push(st)}function jt(qe,st,Dt){var Qt=qe===cd?pt:Qe,St=Qt[st];if(!St){var nn=se.str(st);St=G.createShader(qe),G.shaderSource(St,nn),G.compileShader(St),le.shaderError(G,St,nn,qe,Dt),Qt[st]=St}return St}var Nt={},ut=[],Wt=0;function $t(qe,st){this.id=Wt++,this.fragId=qe,this.vertId=st,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,nt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Pt(qe,st,Dt){var Qt,St,nn=jt(cd,qe.fragId),At=jt(Yr,qe.vertId),Gt=qe.program=G.createProgram();if(G.attachShader(Gt,nn),G.attachShader(Gt,At),Dt)for(Qt=0;Qt<Dt.length;++Qt){var xt=Dt[Qt];G.bindAttribLocation(Gt,xt[0],xt[1])}G.linkProgram(Gt),le.linkError(G,Gt,se.str(qe.fragId),se.str(qe.vertId),st);var Ht=G.getProgramParameter(Gt,Jv);nt.profile&&(qe.stats.uniformsCount=Ht);var Rn=qe.uniforms;for(Qt=0;Qt<Ht;++Qt)if(St=G.getActiveUniform(Gt,Qt),St)if(St.size>1)for(var Wn=0;Wn<St.size;++Wn){var Rt=St.name.replace("[0]","["+Wn+"]");kt(Rn,new ft(Rt,se.id(Rt),G.getUniformLocation(Gt,Rt),St))}else kt(Rn,new ft(St.name,se.id(St.name),G.getUniformLocation(Gt,St.name),St));var Tt=G.getProgramParameter(Gt,no);nt.profile&&(qe.stats.attributesCount=Tt);var Ot=qe.attributes;for(Qt=0;Qt<Tt;++Qt)St=G.getActiveAttrib(Gt,Qt),St&&kt(Ot,new ft(St.name,se.id(St.name),G.getAttribLocation(Gt,St.name),St))}nt.profile&&(Oe.getMaxUniformsCount=function(){var qe=0;return ut.forEach(function(st){st.stats.uniformsCount>qe&&(qe=st.stats.uniformsCount)}),qe},Oe.getMaxAttributesCount=function(){var qe=0;return ut.forEach(function(st){st.stats.attributesCount>qe&&(qe=st.stats.attributesCount)}),qe});function wt(){pt={},Qe={};for(var qe=0;qe<ut.length;++qe)Pt(ut[qe],null,ut[qe].attributes.map(function(st){return[st.location,st.name]}))}return{clear:function(){var qe=G.deleteShader.bind(G);ci(pt).forEach(qe),pt={},ci(Qe).forEach(qe),Qe={},ut.forEach(function(st){G.deleteProgram(st.program)}),ut.length=0,Nt={},Oe.shaderCount=0},program:function(qe,st,Dt,Qt){le.command(qe>=0,"missing vertex shader",Dt),le.command(st>=0,"missing fragment shader",Dt);var St=Nt[st];St||(St=Nt[st]={});var nn=St[qe];if(nn&&(nn.refCount++,!Qt))return nn;var At=new $t(st,qe);return Oe.shaderCount++,Pt(At,Dt,Qt),nn||(St[qe]=At),ut.push(At),a(At,{destroy:function(){if(At.refCount--,At.refCount<=0){G.deleteProgram(At.program);var Gt=ut.indexOf(At);ut.splice(Gt,1),Oe.shaderCount--}St[At.vertId].refCount<=0&&(G.deleteShader(Qe[At.vertId]),delete Qe[At.vertId],delete Nt[At.fragId][At.vertId]),Object.keys(Nt[At.fragId]).length||(G.deleteShader(pt[At.fragId]),delete pt[At.fragId],delete Nt[At.fragId])}})},restore:wt,shader:jt,frag:-1,vert:-1}}var Sh=6408,Ks=5121,xh=3333,Vu=5126;function Ah(G,se,Oe,nt,pt,Qe,ft){function kt(ut){var Wt;se.next===null?(le(pt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Wt=Ks):(le(se.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Wt=se.next.colorAttachments[0].texture._texture.type,Qe.oes_texture_float?(le(Wt===Ks||Wt===Vu,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Wt===Vu&&le(ft.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):le(Wt===Ks,"Reading from a framebuffer is only allowed for the type 'uint8'"));var $t=0,Pt=0,wt=nt.framebufferWidth,qe=nt.framebufferHeight,st=null;n(ut)?st=ut:ut&&(le.type(ut,"object","invalid arguments to regl.read()"),$t=ut.x|0,Pt=ut.y|0,le($t>=0&&$t<nt.framebufferWidth,"invalid x offset for regl.read"),le(Pt>=0&&Pt<nt.framebufferHeight,"invalid y offset for regl.read"),wt=(ut.width||nt.framebufferWidth-$t)|0,qe=(ut.height||nt.framebufferHeight-Pt)|0,st=ut.data||null),st&&(Wt===Ks?le(st instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Wt===Vu&&le(st instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),le(wt>0&&wt+$t<=nt.framebufferWidth,"invalid width for read pixels"),le(qe>0&&qe+Pt<=nt.framebufferHeight,"invalid height for read pixels"),Oe();var Dt=wt*qe*4;return st||(Wt===Ks?st=new Uint8Array(Dt):Wt===Vu&&(st=st||new Float32Array(Dt))),le.isTypedArray(st,"data buffer for regl.read() must be a typedarray"),le(st.byteLength>=Dt,"data buffer for regl.read() too small"),G.pixelStorei(xh,4),G.readPixels($t,Pt,wt,qe,Sh,Wt,st),st}function jt(ut){var Wt;return se.setFBO({framebuffer:ut.framebuffer},function(){Wt=kt(ut)}),Wt}function Nt(ut){return!ut||!("framebuffer"in ut)?kt(ut):jt(ut)}return Nt}function Zs(G){return Array.prototype.slice.call(G)}function _i(G){return Zs(G).join("")}function nl(){var G=0,se=[],Oe=[];function nt(Wt){for(var $t=0;$t<Oe.length;++$t)if(Oe[$t]===Wt)return se[$t];var Pt="g"+G++;return se.push(Pt),Oe.push(Wt),Pt}function pt(){var Wt=[];function $t(){Wt.push.apply(Wt,Zs(arguments))}var Pt=[];function wt(){var qe="v"+G++;return Pt.push(qe),arguments.length>0&&(Wt.push(qe,"="),Wt.push.apply(Wt,Zs(arguments)),Wt.push(";")),qe}return a($t,{def:wt,toString:function(){return _i([Pt.length>0?"var "+Pt.join(",")+";":"",_i(Wt)])}})}function Qe(){var Wt=pt(),$t=pt(),Pt=Wt.toString,wt=$t.toString;function qe(st,Dt){$t(st,Dt,"=",Wt.def(st,Dt),";")}return a(function(){Wt.apply(Wt,Zs(arguments))},{def:Wt.def,entry:Wt,exit:$t,save:qe,set:function(st,Dt,Qt){qe(st,Dt),Wt(st,Dt,"=",Qt,";")},toString:function(){return Pt()+wt()}})}function ft(){var Wt=_i(arguments),$t=Qe(),Pt=Qe(),wt=$t.toString,qe=Pt.toString;return a($t,{then:function(){return $t.apply($t,Zs(arguments)),this},else:function(){return Pt.apply(Pt,Zs(arguments)),this},toString:function(){var st=qe();return st&&(st="else{"+st+"}"),_i(["if(",Wt,"){",wt(),"}",st])}})}var kt=pt(),jt={};function Nt(Wt,$t){var Pt=[];function wt(){var St="a"+Pt.length;return Pt.push(St),St}$t=$t||0;for(var qe=0;qe<$t;++qe)wt();var st=Qe(),Dt=st.toString,Qt=jt[Wt]=a(st,{arg:wt,toString:function(){return _i(["function(",Pt.join(),"){",Dt(),"}"])}});return Qt}function ut(){var Wt=['"use strict";',kt,"return {"];Object.keys(jt).forEach(function(wt){Wt.push('"',wt,'":',jt[wt].toString(),",")}),Wt.push("}");var $t=_i(Wt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Pt=Function.apply(null,se.concat($t));return Pt.apply(null,Oe)}return{global:kt,link:nt,block:pt,proc:Nt,scope:Qe,cond:ft,compile:ut}}var Xl="xyzw".split(""),Js=5121,Qs=1,eu=2,dd=0,ql=1,tu=2,pd=3,rl=4,Xc=5,qc=6,Gu="dither",zu="blend.enable",Wu="blend.color",hd="blend.equation",Hu="blend.func",mp="depth.enable",vd="depth.func",Th="depth.range",yp="depth.mask",ol="colorMask",gp="cull.enable",_p="cull.face",bp="frontFace",Xu="lineWidth",xl="polygonOffset.enable",Yc="polygonOffset.offset",md="sample.alpha",yd="sample.enable",gs="sample.coverage",_s="stencil.enable",nr="stencil.mask",qu="stencil.func",Kc="stencil.opFront",il="stencil.opBack",pi="scissor.enable",nu="scissor.box",jo="viewport",bs="profile",ra="framebuffer",Zc="vert",$i="frag",qo="elements",Al="primitive",Tl="count",gd="offset",Mt="instances",ru="vao",Jc="Width",Qc="Height",ws=ra+Jc,ou=ra+Qc,_d=jo+Jc,wp=jo+Qc,iu="drawingBuffer",ef=iu+Jc,bd=iu+Qc,Ep=[Hu,hd,qu,Kc,il,gs,jo,nu,Yc],Ml=34962,Op=34963,al=35632,Es=35633,wd=3553,Mh=34067,kh=2884,Nh=3042,Sp=3024,Ed=2960,tf=2929,Ph=3089,ll=32823,Os=32926,Qv=32928,So=5126,nf=35664,au=35665,rf=35666,Yu=5124,of=35667,af=35668,lf=35669,lu=35670,Yl=35671,bi=35672,Od=35673,sf=35674,su=35675,Ku=35676,Ti=35678,No=35680,uf=4,Xi=1028,Vn=1029,Sd=2304,cf=2305,xd=32775,xp=32776,Rh=519,Ss=7680,Ch=0,uu=1,Dh=32774,Ap=513,ff=36160,jh=36064,Fa={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Kl=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xs={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},zn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Tp={frag:al,vert:Es},Zu={cw:Sd,ccw:cf};function Zl(G){return Array.isArray(G)||n(G)||Fi(G)}function df(G){return G.sort(function(se,Oe){return se===jo?-1:Oe===jo?1:se<Oe?-1:1})}function qi(G,se,Oe,nt){this.thisDep=G,this.contextDep=se,this.propDep=Oe,this.append=nt}function sl(G){return G&&!(G.thisDep||G.contextDep||G.propDep)}function Io(G){return new qi(!1,!1,!1,G)}function fa(G,se){var Oe=G.type;if(Oe===dd){var nt=G.data.length;return new qi(!0,nt>=1,nt>=2,se)}else if(Oe===rl){var pt=G.data;return new qi(pt.thisDep,pt.contextDep,pt.propDep,se)}else{if(Oe===Xc)return new qi(!1,!1,!1,se);if(Oe===qc){for(var Qe=!1,ft=!1,kt=!1,jt=0;jt<G.data.length;++jt){var Nt=G.data[jt];if(Nt.type===ql)kt=!0;else if(Nt.type===tu)ft=!0;else if(Nt.type===pd)Qe=!0;else if(Nt.type===dd){Qe=!0;var ut=Nt.data;ut>=1&&(ft=!0),ut>=2&&(kt=!0)}else Nt.type===rl&&(Qe=Qe||Nt.data.thisDep,ft=ft||Nt.data.contextDep,kt=kt||Nt.data.propDep)}return new qi(Qe,ft,kt,se)}else return new qi(Oe===pd,Oe===tu,Oe===ql,se)}}var Ba=new qi(!1,!1,!1,function(){});function em(G,se,Oe,nt,pt,Qe,ft,kt,jt,Nt,ut,Wt,$t,Pt,wt){var qe=Nt.Record,st={add:32774,subtract:32778,"reverse subtract":32779};Oe.ext_blend_minmax&&(st.min=xd,st.max=xp);var Dt=Oe.angle_instanced_arrays,Qt=Oe.webgl_draw_buffers,St={dirty:!0,profile:wt.profile},nn={},At=[],Gt={},xt={};function Ht(he){return he.replace(".","_")}function Rn(he,oe,Re){var Ge=Ht(he);At.push(he),nn[Ge]=St[Ge]=!!Re,Gt[Ge]=oe}function Wn(he,oe,Re){var Ge=Ht(he);At.push(he),Array.isArray(Re)?(St[Ge]=Re.slice(),nn[Ge]=Re.slice()):St[Ge]=nn[Ge]=Re,xt[Ge]=oe}Rn(Gu,Sp),Rn(zu,Nh),Wn(Wu,"blendColor",[0,0,0,0]),Wn(hd,"blendEquationSeparate",[Dh,Dh]),Wn(Hu,"blendFuncSeparate",[uu,Ch,uu,Ch]),Rn(mp,tf,!0),Wn(vd,"depthFunc",Ap),Wn(Th,"depthRange",[0,1]),Wn(yp,"depthMask",!0),Wn(ol,ol,[!0,!0,!0,!0]),Rn(gp,kh),Wn(_p,"cullFace",Vn),Wn(bp,bp,cf),Wn(Xu,Xu,1),Rn(xl,ll),Wn(Yc,"polygonOffset",[0,0]),Rn(md,Os),Rn(yd,Qv),Wn(gs,"sampleCoverage",[1,!1]),Rn(_s,Ed),Wn(nr,"stencilMask",-1),Wn(qu,"stencilFunc",[Rh,0,-1]),Wn(Kc,"stencilOpSeparate",[Xi,Ss,Ss,Ss]),Wn(il,"stencilOpSeparate",[Vn,Ss,Ss,Ss]),Rn(pi,Ph),Wn(nu,"scissor",[0,0,G.drawingBufferWidth,G.drawingBufferHeight]),Wn(jo,jo,[0,0,G.drawingBufferWidth,G.drawingBufferHeight]);var Rt={gl:G,context:$t,strings:se,next:nn,current:St,draw:Wt,elements:Qe,buffer:pt,shader:ut,attributes:Nt.state,vao:Nt,uniforms:jt,framebuffer:kt,extensions:Oe,timer:Pt,isBufferArgs:Zl},Tt={primTypes:ri,compareFuncs:xs,blendFuncs:Fa,blendEquations:st,stencilOps:zn,glTypes:Vi,orientationType:Zu};le.optional(function(){Rt.isArrayLike=P}),Qt&&(Tt.backBuffer=[Vn],Tt.drawBuffer=Lr(nt.maxDrawbuffers,function(he){return he===0?[0]:Lr(he,function(oe){return jh+oe})}));var Ot=0;function Ln(){var he=nl(),oe=he.link,Re=he.global;he.id=Ot++,he.batchId="0";var Ge=oe(Rt),Ye=he.shared={props:"a0"};Object.keys(Rt).forEach(function(Te){Ye[Te]=Re.def(Ge,".",Te)}),le.optional(function(){he.CHECK=oe(le),he.commandStr=le.guessCommand(),he.command=oe(he.commandStr),he.assert=function(Te,de,ze){Te("if(!(",de,"))",this.CHECK,".commandRaise(",oe(ze),",",this.command,");")},Tt.invalidBlendCombinations=Kl});var De=he.next={},Ce=he.current={};Object.keys(xt).forEach(function(Te){Array.isArray(St[Te])&&(De[Te]=Re.def(Ye.next,".",Te),Ce[Te]=Re.def(Ye.current,".",Te))});var Fe=he.constants={};Object.keys(Tt).forEach(function(Te){Fe[Te]=Re.def(JSON.stringify(Tt[Te]))}),he.invoke=function(Te,de){switch(de.type){case dd:var ze=["this",Ye.context,Ye.props,he.batchId];return Te.def(oe(de.data),".call(",ze.slice(0,Math.max(de.data.length+1,4)),")");case ql:return Te.def(Ye.props,de.data);case tu:return Te.def(Ye.context,de.data);case pd:return Te.def("this",de.data);case rl:return de.data.append(he,Te),de.data.ref;case Xc:return de.data.toString();case qc:return de.data.map(function(We){return he.invoke(Te,We)})}},he.attribCache={};var pe={};return he.scopeAttrib=function(Te){var de=se.id(Te);if(de in pe)return pe[de];var ze=Nt.scope[de];ze||(ze=Nt.scope[de]=new qe);var We=pe[de]=oe(ze);return We},he}function rr(he){var oe=he.static,Re=he.dynamic,Ge;if(bs in oe){var Ye=!!oe[bs];Ge=Io(function(Ce,Fe){return Ye}),Ge.enable=Ye}else if(bs in Re){var De=Re[bs];Ge=fa(De,function(Ce,Fe){return Ce.invoke(Fe,De)})}return Ge}function pn(he,oe){var Re=he.static,Ge=he.dynamic;if(ra in Re){var Ye=Re[ra];return Ye?(Ye=kt.getFramebuffer(Ye),le.command(Ye,"invalid framebuffer object"),Io(function(Ce,Fe){var pe=Ce.link(Ye),Te=Ce.shared;Fe.set(Te.framebuffer,".next",pe);var de=Te.context;return Fe.set(de,"."+ws,pe+".width"),Fe.set(de,"."+ou,pe+".height"),pe})):Io(function(Ce,Fe){var pe=Ce.shared;Fe.set(pe.framebuffer,".next","null");var Te=pe.context;return Fe.set(Te,"."+ws,Te+"."+ef),Fe.set(Te,"."+ou,Te+"."+bd),"null"})}else if(ra in Ge){var De=Ge[ra];return fa(De,function(Ce,Fe){var pe=Ce.invoke(Fe,De),Te=Ce.shared,de=Te.framebuffer,ze=Fe.def(de,".getFramebuffer(",pe,")");le.optional(function(){Ce.assert(Fe,"!"+pe+"||"+ze,"invalid framebuffer object")}),Fe.set(de,".next",ze);var We=Te.context;return Fe.set(We,"."+ws,ze+"?"+ze+".width:"+We+"."+ef),Fe.set(We,"."+ou,ze+"?"+ze+".height:"+We+"."+bd),ze})}else return null}function cr(he,oe,Re){var Ge=he.static,Ye=he.dynamic;function De(pe){if(pe in Ge){var Te=Ge[pe];le.commandType(Te,"object","invalid "+pe,Re.commandStr);var de=!0,ze=Te.x|0,We=Te.y|0,h,y;return"width"in Te?(h=Te.width|0,le.command(h>=0,"invalid "+pe,Re.commandStr)):de=!1,"height"in Te?(y=Te.height|0,le.command(y>=0,"invalid "+pe,Re.commandStr)):de=!1,new qi(!de&&oe&&oe.thisDep,!de&&oe&&oe.contextDep,!de&&oe&&oe.propDep,function(Z,ne){var ve=Z.shared.context,xe=h;"width"in Te||(xe=ne.def(ve,".",ws,"-",ze));var Be=y;return"height"in Te||(Be=ne.def(ve,".",ou,"-",We)),[ze,We,xe,Be]})}else if(pe in Ye){var x=Ye[pe],I=fa(x,function(Z,ne){var ve=Z.invoke(ne,x);le.optional(function(){Z.assert(ne,ve+"&&typeof "+ve+'==="object"',"invalid "+pe)});var xe=Z.shared.context,Be=ne.def(ve,".x|0"),ht=ne.def(ve,".y|0"),bt=ne.def('"width" in ',ve,"?",ve,".width|0:","(",xe,".",ws,"-",Be,")"),Vt=ne.def('"height" in ',ve,"?",ve,".height|0:","(",xe,".",ou,"-",ht,")");return le.optional(function(){Z.assert(ne,bt+">=0&&"+Vt+">=0","invalid "+pe)}),[Be,ht,bt,Vt]});return oe&&(I.thisDep=I.thisDep||oe.thisDep,I.contextDep=I.contextDep||oe.contextDep,I.propDep=I.propDep||oe.propDep),I}else return oe?new qi(oe.thisDep,oe.contextDep,oe.propDep,function(Z,ne){var ve=Z.shared.context;return[0,0,ne.def(ve,".",ws),ne.def(ve,".",ou)]}):null}var Ce=De(jo);if(Ce){var Fe=Ce;Ce=new qi(Ce.thisDep,Ce.contextDep,Ce.propDep,function(pe,Te){var de=Fe.append(pe,Te),ze=pe.shared.context;return Te.set(ze,"."+_d,de[2]),Te.set(ze,"."+wp,de[3]),de})}return{viewport:Ce,scissor_box:De(nu)}}function Hn(he,oe){var Re=he.static,Ge=typeof Re[$i]=="string"&&typeof Re[Zc]=="string";if(Ge){if(Object.keys(oe.dynamic).length>0)return null;var Ye=oe.static,De=Object.keys(Ye);if(De.length>0&&typeof Ye[De[0]]=="number"){for(var Ce=[],Fe=0;Fe<De.length;++Fe)le(typeof Ye[De[Fe]]=="number","must specify all vertex attribute locations when using vaos"),Ce.push([Ye[De[Fe]]|0,De[Fe]]);return Ce}}return null}function ir(he,oe,Re){var Ge=he.static,Ye=he.dynamic;function De(de){if(de in Ge){var ze=se.id(Ge[de]);le.optional(function(){ut.shader(Tp[de],ze,le.guessCommand())});var We=Io(function(){return ze});return We.id=ze,We}else if(de in Ye){var h=Ye[de];return fa(h,function(y,x){var I=y.invoke(x,h),Z=x.def(y.shared.strings,".id(",I,")");return le.optional(function(){x(y.shared.shader,".shader(",Tp[de],",",Z,",",y.command,");")}),Z})}return null}var Ce=De($i),Fe=De(Zc),pe=null,Te;return sl(Ce)&&sl(Fe)?(pe=ut.program(Fe.id,Ce.id,null,Re),Te=Io(function(de,ze){return de.link(pe)})):Te=new qi(Ce&&Ce.thisDep||Fe&&Fe.thisDep,Ce&&Ce.contextDep||Fe&&Fe.contextDep,Ce&&Ce.propDep||Fe&&Fe.propDep,function(de,ze){var We=de.shared.shader,h;Ce?h=Ce.append(de,ze):h=ze.def(We,".",$i);var y;Fe?y=Fe.append(de,ze):y=ze.def(We,".",Zc);var x=We+".program("+y+","+h;return le.optional(function(){x+=","+de.command}),ze.def(x+")")}),{frag:Ce,vert:Fe,progVar:Te,program:pe}}function wr(he,oe){var Re=he.static,Ge=he.dynamic;function Ye(){if(qo in Re){var de=Re[qo];Zl(de)?de=Qe.getElements(Qe.create(de,!0)):de&&(de=Qe.getElements(de),le.command(de,"invalid elements",oe.commandStr));var ze=Io(function(h,y){if(de){var x=h.link(de);return h.ELEMENTS=x,x}return h.ELEMENTS=null,null});return ze.value=de,ze}else if(qo in Ge){var We=Ge[qo];return fa(We,function(h,y){var x=h.shared,I=x.isBufferArgs,Z=x.elements,ne=h.invoke(y,We),ve=y.def("null"),xe=y.def(I,"(",ne,")"),Be=h.cond(xe).then(ve,"=",Z,".createStream(",ne,");").else(ve,"=",Z,".getElements(",ne,");");return le.optional(function(){h.assert(Be.else,"!"+ne+"||"+ve,"invalid elements")}),y.entry(Be),y.exit(h.cond(xe).then(Z,".destroyStream(",ve,");")),h.ELEMENTS=ve,ve})}return null}var De=Ye();function Ce(){if(Al in Re){var de=Re[Al];return le.commandParameter(de,ri,"invalid primitve",oe.commandStr),Io(function(We,h){return ri[de]})}else if(Al in Ge){var ze=Ge[Al];return fa(ze,function(We,h){var y=We.constants.primTypes,x=We.invoke(h,ze);return le.optional(function(){We.assert(h,x+" in "+y,"invalid primitive, must be one of "+Object.keys(ri))}),h.def(y,"[",x,"]")})}else if(De)return sl(De)?De.value?Io(function(We,h){return h.def(We.ELEMENTS,".primType")}):Io(function(){return uf}):new qi(De.thisDep,De.contextDep,De.propDep,function(We,h){var y=We.ELEMENTS;return h.def(y,"?",y,".primType:",uf)});return null}function Fe(de,ze){if(de in Re){var We=Re[de]|0;return le.command(!ze||We>=0,"invalid "+de,oe.commandStr),Io(function(y,x){return ze&&(y.OFFSET=We),We})}else if(de in Ge){var h=Ge[de];return fa(h,function(y,x){var I=y.invoke(x,h);return ze&&(y.OFFSET=I,le.optional(function(){y.assert(x,I+">=0","invalid "+de)})),I})}else if(ze&&De)return Io(function(y,x){return y.OFFSET="0",0});return null}var pe=Fe(gd,!0);function Te(){if(Tl in Re){var de=Re[Tl]|0;return le.command(typeof de=="number"&&de>=0,"invalid vertex count",oe.commandStr),Io(function(){return de})}else if(Tl in Ge){var ze=Ge[Tl];return fa(ze,function(y,x){var I=y.invoke(x,ze);return le.optional(function(){y.assert(x,"typeof "+I+'==="number"&&'+I+">=0&&"+I+"===("+I+"|0)","invalid vertex count")}),I})}else if(De)if(sl(De)){if(De)return pe?new qi(pe.thisDep,pe.contextDep,pe.propDep,function(y,x){var I=x.def(y.ELEMENTS,".vertCount-",y.OFFSET);return le.optional(function(){y.assert(x,I+">=0","invalid vertex offset/element buffer too small")}),I}):Io(function(y,x){return x.def(y.ELEMENTS,".vertCount")});var We=Io(function(){return-1});return le.optional(function(){We.MISSING=!0}),We}else{var h=new qi(De.thisDep||pe.thisDep,De.contextDep||pe.contextDep,De.propDep||pe.propDep,function(y,x){var I=y.ELEMENTS;return y.OFFSET?x.def(I,"?",I,".vertCount-",y.OFFSET,":-1"):x.def(I,"?",I,".vertCount:-1")});return le.optional(function(){h.DYNAMIC=!0}),h}return null}return{elements:De,primitive:Ce(),count:Te(),instances:Fe(Mt,!1),offset:pe}}function $o(he,oe){var Re=he.static,Ge=he.dynamic,Ye={};return At.forEach(function(De){var Ce=Ht(De);function Fe(pe,Te){if(De in Re){var de=pe(Re[De]);Ye[Ce]=Io(function(){return de})}else if(De in Ge){var ze=Ge[De];Ye[Ce]=fa(ze,function(We,h){return Te(We,h,We.invoke(h,ze))})}}switch(De){case gp:case zu:case Gu:case _s:case mp:case pi:case xl:case md:case yd:case yp:return Fe(function(pe){return le.commandType(pe,"boolean",De,oe.commandStr),pe},function(pe,Te,de){return le.optional(function(){pe.assert(Te,"typeof "+de+'==="boolean"',"invalid flag "+De,pe.commandStr)}),de});case vd:return Fe(function(pe){return le.commandParameter(pe,xs,"invalid "+De,oe.commandStr),xs[pe]},function(pe,Te,de){var ze=pe.constants.compareFuncs;return le.optional(function(){pe.assert(Te,de+" in "+ze,"invalid "+De+", must be one of "+Object.keys(xs))}),Te.def(ze,"[",de,"]")});case Th:return Fe(function(pe){return le.command(P(pe)&&pe.length===2&&typeof pe[0]=="number"&&typeof pe[1]=="number"&&pe[0]<=pe[1],"depth range is 2d array",oe.commandStr),pe},function(pe,Te,de){le.optional(function(){pe.assert(Te,pe.shared.isArrayLike+"("+de+")&&"+de+".length===2&&typeof "+de+'[0]==="number"&&typeof '+de+'[1]==="number"&&'+de+"[0]<="+de+"[1]","depth range must be a 2d array")});var ze=Te.def("+",de,"[0]"),We=Te.def("+",de,"[1]");return[ze,We]});case Hu:return Fe(function(pe){le.commandType(pe,"object","blend.func",oe.commandStr);var Te="srcRGB"in pe?pe.srcRGB:pe.src,de="srcAlpha"in pe?pe.srcAlpha:pe.src,ze="dstRGB"in pe?pe.dstRGB:pe.dst,We="dstAlpha"in pe?pe.dstAlpha:pe.dst;return le.commandParameter(Te,Fa,Ce+".srcRGB",oe.commandStr),le.commandParameter(de,Fa,Ce+".srcAlpha",oe.commandStr),le.commandParameter(ze,Fa,Ce+".dstRGB",oe.commandStr),le.commandParameter(We,Fa,Ce+".dstAlpha",oe.commandStr),le.command(Kl.indexOf(Te+", "+ze)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Te+", "+ze+")",oe.commandStr),[Fa[Te],Fa[ze],Fa[de],Fa[We]]},function(pe,Te,de){var ze=pe.constants.blendFuncs;le.optional(function(){pe.assert(Te,de+"&&typeof "+de+'==="object"',"invalid blend func, must be an object")});function We(ve,xe){var Be=Te.def('"',ve,xe,'" in ',de,"?",de,".",ve,xe,":",de,".",ve);return le.optional(function(){pe.assert(Te,Be+" in "+ze,"invalid "+De+"."+ve+xe+", must be one of "+Object.keys(Fa))}),Be}var h=We("src","RGB"),y=We("dst","RGB");le.optional(function(){var ve=pe.constants.invalidBlendCombinations;pe.assert(Te,ve+".indexOf("+h+'+", "+'+y+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var x=Te.def(ze,"[",h,"]"),I=Te.def(ze,"[",We("src","Alpha"),"]"),Z=Te.def(ze,"[",y,"]"),ne=Te.def(ze,"[",We("dst","Alpha"),"]");return[x,Z,I,ne]});case hd:return Fe(function(pe){if(typeof pe=="string")return le.commandParameter(pe,st,"invalid "+De,oe.commandStr),[st[pe],st[pe]];if(typeof pe=="object")return le.commandParameter(pe.rgb,st,De+".rgb",oe.commandStr),le.commandParameter(pe.alpha,st,De+".alpha",oe.commandStr),[st[pe.rgb],st[pe.alpha]];le.commandRaise("invalid blend.equation",oe.commandStr)},function(pe,Te,de){var ze=pe.constants.blendEquations,We=Te.def(),h=Te.def(),y=pe.cond("typeof ",de,'==="string"');return le.optional(function(){function x(I,Z,ne){pe.assert(I,ne+" in "+ze,"invalid "+Z+", must be one of "+Object.keys(st))}x(y.then,De,de),pe.assert(y.else,de+"&&typeof "+de+'==="object"',"invalid "+De),x(y.else,De+".rgb",de+".rgb"),x(y.else,De+".alpha",de+".alpha")}),y.then(We,"=",h,"=",ze,"[",de,"];"),y.else(We,"=",ze,"[",de,".rgb];",h,"=",ze,"[",de,".alpha];"),Te(y),[We,h]});case Wu:return Fe(function(pe){return le.command(P(pe)&&pe.length===4,"blend.color must be a 4d array",oe.commandStr),Lr(4,function(Te){return+pe[Te]})},function(pe,Te,de){return le.optional(function(){pe.assert(Te,pe.shared.isArrayLike+"("+de+")&&"+de+".length===4","blend.color must be a 4d array")}),Lr(4,function(ze){return Te.def("+",de,"[",ze,"]")})});case nr:return Fe(function(pe){return le.commandType(pe,"number",Ce,oe.commandStr),pe|0},function(pe,Te,de){return le.optional(function(){pe.assert(Te,"typeof "+de+'==="number"',"invalid stencil.mask")}),Te.def(de,"|0")});case qu:return Fe(function(pe){le.commandType(pe,"object",Ce,oe.commandStr);var Te=pe.cmp||"keep",de=pe.ref||0,ze="mask"in pe?pe.mask:-1;return le.commandParameter(Te,xs,De+".cmp",oe.commandStr),le.commandType(de,"number",De+".ref",oe.commandStr),le.commandType(ze,"number",De+".mask",oe.commandStr),[xs[Te],de,ze]},function(pe,Te,de){var ze=pe.constants.compareFuncs;le.optional(function(){function x(){pe.assert(Te,Array.prototype.join.call(arguments,""),"invalid stencil.func")}x(de+"&&typeof ",de,'==="object"'),x('!("cmp" in ',de,")||(",de,".cmp in ",ze,")")});var We=Te.def('"cmp" in ',de,"?",ze,"[",de,".cmp]",":",Ss),h=Te.def(de,".ref|0"),y=Te.def('"mask" in ',de,"?",de,".mask|0:-1");return[We,h,y]});case Kc:case il:return Fe(function(pe){le.commandType(pe,"object",Ce,oe.commandStr);var Te=pe.fail||"keep",de=pe.zfail||"keep",ze=pe.zpass||"keep";return le.commandParameter(Te,zn,De+".fail",oe.commandStr),le.commandParameter(de,zn,De+".zfail",oe.commandStr),le.commandParameter(ze,zn,De+".zpass",oe.commandStr),[De===il?Vn:Xi,zn[Te],zn[de],zn[ze]]},function(pe,Te,de){var ze=pe.constants.stencilOps;le.optional(function(){pe.assert(Te,de+"&&typeof "+de+'==="object"',"invalid "+De)});function We(h){return le.optional(function(){pe.assert(Te,'!("'+h+'" in '+de+")||("+de+"."+h+" in "+ze+")","invalid "+De+"."+h+", must be one of "+Object.keys(zn))}),Te.def('"',h,'" in ',de,"?",ze,"[",de,".",h,"]:",Ss)}return[De===il?Vn:Xi,We("fail"),We("zfail"),We("zpass")]});case Yc:return Fe(function(pe){le.commandType(pe,"object",Ce,oe.commandStr);var Te=pe.factor|0,de=pe.units|0;return le.commandType(Te,"number",Ce+".factor",oe.commandStr),le.commandType(de,"number",Ce+".units",oe.commandStr),[Te,de]},function(pe,Te,de){le.optional(function(){pe.assert(Te,de+"&&typeof "+de+'==="object"',"invalid "+De)});var ze=Te.def(de,".factor|0"),We=Te.def(de,".units|0");return[ze,We]});case _p:return Fe(function(pe){var Te=0;return pe==="front"?Te=Xi:pe==="back"&&(Te=Vn),le.command(!!Te,Ce,oe.commandStr),Te},function(pe,Te,de){return le.optional(function(){pe.assert(Te,de+'==="front"||'+de+'==="back"',"invalid cull.face")}),Te.def(de,'==="front"?',Xi,":",Vn)});case Xu:return Fe(function(pe){return le.command(typeof pe=="number"&&pe>=nt.lineWidthDims[0]&&pe<=nt.lineWidthDims[1],"invalid line width, must be a positive number between "+nt.lineWidthDims[0]+" and "+nt.lineWidthDims[1],oe.commandStr),pe},function(pe,Te,de){return le.optional(function(){pe.assert(Te,"typeof "+de+'==="number"&&'+de+">="+nt.lineWidthDims[0]+"&&"+de+"<="+nt.lineWidthDims[1],"invalid line width")}),de});case bp:return Fe(function(pe){return le.commandParameter(pe,Zu,Ce,oe.commandStr),Zu[pe]},function(pe,Te,de){return le.optional(function(){pe.assert(Te,de+'==="cw"||'+de+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Te.def(de+'==="cw"?'+Sd+":"+cf)});case ol:return Fe(function(pe){return le.command(P(pe)&&pe.length===4,"color.mask must be length 4 array",oe.commandStr),pe.map(function(Te){return!!Te})},function(pe,Te,de){return le.optional(function(){pe.assert(Te,pe.shared.isArrayLike+"("+de+")&&"+de+".length===4","invalid color.mask")}),Lr(4,function(ze){return"!!"+de+"["+ze+"]"})});case gs:return Fe(function(pe){le.command(typeof pe=="object"&&pe,Ce,oe.commandStr);var Te="value"in pe?pe.value:1,de=!!pe.invert;return le.command(typeof Te=="number"&&Te>=0&&Te<=1,"sample.coverage.value must be a number between 0 and 1",oe.commandStr),[Te,de]},function(pe,Te,de){le.optional(function(){pe.assert(Te,de+"&&typeof "+de+'==="object"',"invalid sample.coverage")});var ze=Te.def('"value" in ',de,"?+",de,".value:1"),We=Te.def("!!",de,".invert");return[ze,We]})}}),Ye}function Ro(he,oe){var Re=he.static,Ge=he.dynamic,Ye={};return Object.keys(Re).forEach(function(De){var Ce=Re[De],Fe;if(typeof Ce=="number"||typeof Ce=="boolean")Fe=Io(function(){return Ce});else if(typeof Ce=="function"){var pe=Ce._reglType;pe==="texture2d"||pe==="textureCube"?Fe=Io(function(Te){return Te.link(Ce)}):pe==="framebuffer"||pe==="framebufferCube"?(le.command(Ce.color.length>0,'missing color attachment for framebuffer sent to uniform "'+De+'"',oe.commandStr),Fe=Io(function(Te){return Te.link(Ce.color[0])})):le.commandRaise('invalid data for uniform "'+De+'"',oe.commandStr)}else P(Ce)?Fe=Io(function(Te){var de=Te.global.def("[",Lr(Ce.length,function(ze){return le.command(typeof Ce[ze]=="number"||typeof Ce[ze]=="boolean","invalid uniform "+De,Te.commandStr),Ce[ze]}),"]");return de}):le.commandRaise('invalid or missing data for uniform "'+De+'"',oe.commandStr);Fe.value=Ce,Ye[De]=Fe}),Object.keys(Ge).forEach(function(De){var Ce=Ge[De];Ye[De]=fa(Ce,function(Fe,pe){return Fe.invoke(pe,Ce)})}),Ye}function or(he,oe){var Re=he.static,Ge=he.dynamic,Ye={};return Object.keys(Re).forEach(function(De){var Ce=Re[De],Fe=se.id(De),pe=new qe;if(Zl(Ce))pe.state=Qs,pe.buffer=pt.getBuffer(pt.create(Ce,Ml,!1,!0)),pe.type=0;else{var Te=pt.getBuffer(Ce);if(Te)pe.state=Qs,pe.buffer=Te,pe.type=0;else if(le.command(typeof Ce=="object"&&Ce,"invalid data for attribute "+De,oe.commandStr),"constant"in Ce){var de=Ce.constant;pe.buffer="null",pe.state=eu,typeof de=="number"?pe.x=de:(le.command(P(de)&&de.length>0&&de.length<=4,"invalid constant for attribute "+De,oe.commandStr),Xl.forEach(function(Z,ne){ne<de.length&&(pe[Z]=de[ne])}))}else{Zl(Ce.buffer)?Te=pt.getBuffer(pt.create(Ce.buffer,Ml,!1,!0)):Te=pt.getBuffer(Ce.buffer),le.command(!!Te,'missing buffer for attribute "'+De+'"',oe.commandStr);var ze=Ce.offset|0;le.command(ze>=0,'invalid offset for attribute "'+De+'"',oe.commandStr);var We=Ce.stride|0;le.command(We>=0&&We<256,'invalid stride for attribute "'+De+'", must be integer betweeen [0, 255]',oe.commandStr);var h=Ce.size|0;le.command(!("size"in Ce)||h>0&&h<=4,'invalid size for attribute "'+De+'", must be 1,2,3,4',oe.commandStr);var y=!!Ce.normalized,x=0;"type"in Ce&&(le.commandParameter(Ce.type,Vi,"invalid type for attribute "+De,oe.commandStr),x=Vi[Ce.type]);var I=Ce.divisor|0;"divisor"in Ce&&(le.command(I===0||Dt,'cannot specify divisor for attribute "'+De+'", instancing not supported',oe.commandStr),le.command(I>=0,'invalid divisor for attribute "'+De+'"',oe.commandStr)),le.optional(function(){var Z=oe.commandStr,ne=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ce).forEach(function(ve){le.command(ne.indexOf(ve)>=0,'unknown parameter "'+ve+'" for attribute pointer "'+De+'" (valid parameters are '+ne+")",Z)})}),pe.buffer=Te,pe.state=Qs,pe.size=h,pe.normalized=y,pe.type=x||Te.dtype,pe.offset=ze,pe.stride=We,pe.divisor=I}}Ye[De]=Io(function(Z,ne){var ve=Z.attribCache;if(Fe in ve)return ve[Fe];var xe={isStream:!1};return Object.keys(pe).forEach(function(Be){xe[Be]=pe[Be]}),pe.buffer&&(xe.buffer=Z.link(pe.buffer),xe.type=xe.type||xe.buffer+".dtype"),ve[Fe]=xe,xe})}),Object.keys(Ge).forEach(function(De){var Ce=Ge[De];function Fe(pe,Te){var de=pe.invoke(Te,Ce),ze=pe.shared,We=pe.constants,h=ze.isBufferArgs,y=ze.buffer;le.optional(function(){pe.assert(Te,de+"&&(typeof "+de+'==="object"||typeof '+de+'==="function")&&('+h+"("+de+")||"+y+".getBuffer("+de+")||"+y+".getBuffer("+de+".buffer)||"+h+"("+de+'.buffer)||("constant" in '+de+"&&(typeof "+de+'.constant==="number"||'+ze.isArrayLike+"("+de+".constant))))",'invalid dynamic attribute "'+De+'"')});var x={isStream:Te.def(!1)},I=new qe;I.state=Qs,Object.keys(I).forEach(function(xe){x[xe]=Te.def(""+I[xe])});var Z=x.buffer,ne=x.type;Te("if(",h,"(",de,")){",x.isStream,"=true;",Z,"=",y,".createStream(",Ml,",",de,");",ne,"=",Z,".dtype;","}else{",Z,"=",y,".getBuffer(",de,");","if(",Z,"){",ne,"=",Z,".dtype;",'}else if("constant" in ',de,"){",x.state,"=",eu,";","if(typeof "+de+'.constant === "number"){',x[Xl[0]],"=",de,".constant;",Xl.slice(1).map(function(xe){return x[xe]}).join("="),"=0;","}else{",Xl.map(function(xe,Be){return x[xe]+"="+de+".constant.length>"+Be+"?"+de+".constant["+Be+"]:0;"}).join(""),"}}else{","if(",h,"(",de,".buffer)){",Z,"=",y,".createStream(",Ml,",",de,".buffer);","}else{",Z,"=",y,".getBuffer(",de,".buffer);","}",ne,'="type" in ',de,"?",We.glTypes,"[",de,".type]:",Z,".dtype;",x.normalized,"=!!",de,".normalized;");function ve(xe){Te(x[xe],"=",de,".",xe,"|0;")}return ve("size"),ve("offset"),ve("stride"),ve("divisor"),Te("}}"),Te.exit("if(",x.isStream,"){",y,".destroyStream(",Z,");","}"),x}Ye[De]=fa(Ce,Fe)}),Ye}function Qo(he,oe){var Re=he.static,Ge=he.dynamic;if(ru in Re){var Ye=Re[ru];return Ye!==null&&Nt.getVAO(Ye)===null&&(Ye=Nt.createVAO(Ye)),Io(function(Ce){return Ce.link(Nt.getVAO(Ye))})}else if(ru in Ge){var De=Ge[ru];return fa(De,function(Ce,Fe){var pe=Ce.invoke(Fe,De);return Fe.def(Ce.shared.vao+".getVAO("+pe+")")})}return null}function so(he){var oe=he.static,Re=he.dynamic,Ge={};return Object.keys(oe).forEach(function(Ye){var De=oe[Ye];Ge[Ye]=Io(function(Ce,Fe){return typeof De=="number"||typeof De=="boolean"?""+De:Ce.link(De)})}),Object.keys(Re).forEach(function(Ye){var De=Re[Ye];Ge[Ye]=fa(De,function(Ce,Fe){return Ce.invoke(Fe,De)})}),Ge}function Fo(he,oe,Re,Ge,Ye){var De=he.static,Ce=he.dynamic;le.optional(function(){var ve=[ra,Zc,$i,qo,Al,gd,Tl,Mt,bs,ru].concat(At);function xe(Be){Object.keys(Be).forEach(function(ht){le.command(ve.indexOf(ht)>=0,'unknown parameter "'+ht+'"',Ye.commandStr)})}xe(De),xe(Ce)});var Fe=Hn(he,oe),pe=pn(he),Te=cr(he,pe,Ye),de=wr(he,Ye),ze=$o(he,Ye),We=ir(he,Ye,Fe);function h(ve){var xe=Te[ve];xe&&(ze[ve]=xe)}h(jo),h(Ht(nu));var y=Object.keys(ze).length>0,x={framebuffer:pe,draw:de,shader:We,state:ze,dirty:y,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(x.profile=rr(he),x.uniforms=Ro(Re,Ye),x.drawVAO=x.scopeVAO=Qo(he),!x.drawVAO&&We.program&&!Fe&&Oe.angle_instanced_arrays){var I=!0,Z=We.program.attributes.map(function(ve){var xe=oe.static[ve];return I=I&&!!xe,xe});if(I&&Z.length>0){var ne=Nt.getVAO(Nt.createVAO(Z));x.drawVAO=new qi(null,null,null,function(ve,xe){return ve.link(ne)}),x.useVAO=!0}}return Fe?x.useVAO=!0:x.attributes=or(oe,Ye),x.context=so(Ge),x}function Ko(he,oe,Re){var Ge=he.shared,Ye=Ge.context,De=he.scope();Object.keys(Re).forEach(function(Ce){oe.save(Ye,"."+Ce);var Fe=Re[Ce],pe=Fe.append(he,oe);Array.isArray(pe)?De(Ye,".",Ce,"=[",pe.join(),"];"):De(Ye,".",Ce,"=",pe,";")}),oe(De)}function ai(he,oe,Re,Ge){var Ye=he.shared,De=Ye.gl,Ce=Ye.framebuffer,Fe;Qt&&(Fe=oe.def(Ye.extensions,".webgl_draw_buffers"));var pe=he.constants,Te=pe.drawBuffer,de=pe.backBuffer,ze;Re?ze=Re.append(he,oe):ze=oe.def(Ce,".next"),Ge||oe("if(",ze,"!==",Ce,".cur){"),oe("if(",ze,"){",De,".bindFramebuffer(",ff,",",ze,".framebuffer);"),Qt&&oe(Fe,".drawBuffersWEBGL(",Te,"[",ze,".colorAttachments.length]);"),oe("}else{",De,".bindFramebuffer(",ff,",null);"),Qt&&oe(Fe,".drawBuffersWEBGL(",de,");"),oe("}",Ce,".cur=",ze,";"),Ge||oe("}")}function hi(he,oe,Re){var Ge=he.shared,Ye=Ge.gl,De=he.current,Ce=he.next,Fe=Ge.current,pe=Ge.next,Te=he.cond(Fe,".dirty");At.forEach(function(de){var ze=Ht(de);if(!(ze in Re.state)){var We,h;if(ze in Ce){We=Ce[ze],h=De[ze];var y=Lr(St[ze].length,function(I){return Te.def(We,"[",I,"]")});Te(he.cond(y.map(function(I,Z){return I+"!=="+h+"["+Z+"]"}).join("||")).then(Ye,".",xt[ze],"(",y,");",y.map(function(I,Z){return h+"["+Z+"]="+I}).join(";"),";"))}else{We=Te.def(pe,".",ze);var x=he.cond(We,"!==",Fe,".",ze);Te(x),ze in Gt?x(he.cond(We).then(Ye,".enable(",Gt[ze],");").else(Ye,".disable(",Gt[ze],");"),Fe,".",ze,"=",We,";"):x(Ye,".",xt[ze],"(",We,");",Fe,".",ze,"=",We,";")}}}),Object.keys(Re.state).length===0&&Te(Fe,".dirty=false;"),oe(Te)}function ei(he,oe,Re,Ge){var Ye=he.shared,De=he.current,Ce=Ye.current,Fe=Ye.gl;df(Object.keys(Re)).forEach(function(pe){var Te=Re[pe];if(!(Ge&&!Ge(Te))){var de=Te.append(he,oe);if(Gt[pe]){var ze=Gt[pe];sl(Te)?de?oe(Fe,".enable(",ze,");"):oe(Fe,".disable(",ze,");"):oe(he.cond(de).then(Fe,".enable(",ze,");").else(Fe,".disable(",ze,");")),oe(Ce,".",pe,"=",de,";")}else if(P(de)){var We=De[pe];oe(Fe,".",xt[pe],"(",de,");",de.map(function(h,y){return We+"["+y+"]="+h}).join(";"),";")}else oe(Fe,".",xt[pe],"(",de,");",Ce,".",pe,"=",de,";")}})}function vo(he,oe){Dt&&(he.instancing=oe.def(he.shared.extensions,".angle_instanced_arrays"))}function Qn(he,oe,Re,Ge,Ye){var De=he.shared,Ce=he.stats,Fe=De.current,pe=De.timer,Te=Re.profile;function de(){return typeof performance>"u"?"Date.now()":"performance.now()"}var ze,We;function h(ve){ze=oe.def(),ve(ze,"=",de(),";"),typeof Ye=="string"?ve(Ce,".count+=",Ye,";"):ve(Ce,".count++;"),Pt&&(Ge?(We=oe.def(),ve(We,"=",pe,".getNumPendingQueries();")):ve(pe,".beginQuery(",Ce,");"))}function y(ve){ve(Ce,".cpuTime+=",de(),"-",ze,";"),Pt&&(Ge?ve(pe,".pushScopeStats(",We,",",pe,".getNumPendingQueries(),",Ce,");"):ve(pe,".endQuery();"))}function x(ve){var xe=oe.def(Fe,".profile");oe(Fe,".profile=",ve,";"),oe.exit(Fe,".profile=",xe,";")}var I;if(Te){if(sl(Te)){Te.enable?(h(oe),y(oe.exit),x("true")):x("false");return}I=Te.append(he,oe),x(I)}else I=oe.def(Fe,".profile");var Z=he.block();h(Z),oe("if(",I,"){",Z,"}");var ne=he.block();y(ne),oe.exit("if(",I,"){",ne,"}")}function vi(he,oe,Re,Ge,Ye){var De=he.shared;function Ce(pe){switch(pe){case nf:case of:case Yl:return 2;case au:case af:case bi:return 3;case rf:case lf:case Od:return 4;default:return 1}}function Fe(pe,Te,de){var ze=De.gl,We=oe.def(pe,".location"),h=oe.def(De.attributes,"[",We,"]"),y=de.state,x=de.buffer,I=[de.x,de.y,de.z,de.w],Z=["buffer","normalized","offset","stride"];function ne(){oe("if(!",h,".buffer){",ze,".enableVertexAttribArray(",We,");}");var xe=de.type,Be;if(de.size?Be=oe.def(de.size,"||",Te):Be=Te,oe("if(",h,".type!==",xe,"||",h,".size!==",Be,"||",Z.map(function(bt){return h+"."+bt+"!=="+de[bt]}).join("||"),"){",ze,".bindBuffer(",Ml,",",x,".buffer);",ze,".vertexAttribPointer(",[We,Be,xe,de.normalized,de.stride,de.offset],");",h,".type=",xe,";",h,".size=",Be,";",Z.map(function(bt){return h+"."+bt+"="+de[bt]+";"}).join(""),"}"),Dt){var ht=de.divisor;oe("if(",h,".divisor!==",ht,"){",he.instancing,".vertexAttribDivisorANGLE(",[We,ht],");",h,".divisor=",ht,";}")}}function ve(){oe("if(",h,".buffer){",ze,".disableVertexAttribArray(",We,");",h,".buffer=null;","}if(",Xl.map(function(xe,Be){return h+"."+xe+"!=="+I[Be]}).join("||"),"){",ze,".vertexAttrib4f(",We,",",I,");",Xl.map(function(xe,Be){return h+"."+xe+"="+I[Be]+";"}).join(""),"}")}y===Qs?ne():y===eu?ve():(oe("if(",y,"===",Qs,"){"),ne(),oe("}else{"),ve(),oe("}"))}Ge.forEach(function(pe){var Te=pe.name,de=Re.attributes[Te],ze;if(de){if(!Ye(de))return;ze=de.append(he,oe)}else{if(!Ye(Ba))return;var We=he.scopeAttrib(Te);le.optional(function(){he.assert(oe,We+".state","missing attribute "+Te)}),ze={},Object.keys(new qe).forEach(function(h){ze[h]=oe.def(We,".",h)})}Fe(he.link(pe),Ce(pe.info.type),ze)})}function Nr(he,oe,Re,Ge,Ye){for(var De=he.shared,Ce=De.gl,Fe,pe=0;pe<Ge.length;++pe){var Te=Ge[pe],de=Te.name,ze=Te.info.type,We=Re.uniforms[de],h=he.link(Te),y=h+".location",x;if(We){if(!Ye(We))continue;if(sl(We)){var I=We.value;if(le.command(I!==null&&typeof I<"u",'missing uniform "'+de+'"',he.commandStr),ze===Ti||ze===No){le.command(typeof I=="function"&&(ze===Ti&&(I._reglType==="texture2d"||I._reglType==="framebuffer")||ze===No&&(I._reglType==="textureCube"||I._reglType==="framebufferCube")),"invalid texture for uniform "+de,he.commandStr);var Z=he.link(I._texture||I.color[0]._texture);oe(Ce,".uniform1i(",y,",",Z+".bind());"),oe.exit(Z,".unbind();")}else if(ze===sf||ze===su||ze===Ku){le.optional(function(){le.command(P(I),"invalid matrix for uniform "+de,he.commandStr),le.command(ze===sf&&I.length===4||ze===su&&I.length===9||ze===Ku&&I.length===16,"invalid length for matrix uniform "+de,he.commandStr)});var ne=he.global.def("new Float32Array(["+Array.prototype.slice.call(I)+"])"),ve=2;ze===su?ve=3:ze===Ku&&(ve=4),oe(Ce,".uniformMatrix",ve,"fv(",y,",false,",ne,");")}else{switch(ze){case So:le.commandType(I,"number","uniform "+de,he.commandStr),Fe="1f";break;case nf:le.command(P(I)&&I.length===2,"uniform "+de,he.commandStr),Fe="2f";break;case au:le.command(P(I)&&I.length===3,"uniform "+de,he.commandStr),Fe="3f";break;case rf:le.command(P(I)&&I.length===4,"uniform "+de,he.commandStr),Fe="4f";break;case lu:le.commandType(I,"boolean","uniform "+de,he.commandStr),Fe="1i";break;case Yu:le.commandType(I,"number","uniform "+de,he.commandStr),Fe="1i";break;case Yl:le.command(P(I)&&I.length===2,"uniform "+de,he.commandStr),Fe="2i";break;case of:le.command(P(I)&&I.length===2,"uniform "+de,he.commandStr),Fe="2i";break;case bi:le.command(P(I)&&I.length===3,"uniform "+de,he.commandStr),Fe="3i";break;case af:le.command(P(I)&&I.length===3,"uniform "+de,he.commandStr),Fe="3i";break;case Od:le.command(P(I)&&I.length===4,"uniform "+de,he.commandStr),Fe="4i";break;case lf:le.command(P(I)&&I.length===4,"uniform "+de,he.commandStr),Fe="4i";break}oe(Ce,".uniform",Fe,"(",y,",",P(I)?Array.prototype.slice.call(I):I,");")}continue}else x=We.append(he,oe)}else{if(!Ye(Ba))continue;x=oe.def(De.uniforms,"[",se.id(de),"]")}ze===Ti?(le(!Array.isArray(x),"must specify a scalar prop for textures"),oe("if(",x,"&&",x,'._reglType==="framebuffer"){',x,"=",x,".color[0];","}")):ze===No&&(le(!Array.isArray(x),"must specify a scalar prop for cube maps"),oe("if(",x,"&&",x,'._reglType==="framebufferCube"){',x,"=",x,".color[0];","}")),le.optional(function(){function Vt(Ct,tn){he.assert(oe,Ct,'bad data or missing for uniform "'+de+'".  '+tn)}function wn(Ct){le(!Array.isArray(x),"must not specify an array type for uniform"),Vt("typeof "+x+'==="'+Ct+'"',"invalid type, expected "+Ct)}function On(Ct,tn){Array.isArray(x)?le(x.length===Ct,"must have length "+Ct):Vt(De.isArrayLike+"("+x+")&&"+x+".length==="+Ct,"invalid vector, should have length "+Ct,he.commandStr)}function Xn(Ct){le(!Array.isArray(x),"must not specify a value type"),Vt("typeof "+x+'==="function"&&'+x+'._reglType==="texture'+(Ct===wd?"2d":"Cube")+'"',"invalid texture type",he.commandStr)}switch(ze){case Yu:wn("number");break;case of:On(2);break;case af:On(3);break;case lf:On(4);break;case So:wn("number");break;case nf:On(2);break;case au:On(3);break;case rf:On(4);break;case lu:wn("boolean");break;case Yl:On(2);break;case bi:On(3);break;case Od:On(4);break;case sf:On(4);break;case su:On(9);break;case Ku:On(16);break;case Ti:Xn(wd);break;case No:Xn(Mh);break}});var xe=1;switch(ze){case Ti:case No:var Be=oe.def(x,"._texture");oe(Ce,".uniform1i(",y,",",Be,".bind());"),oe.exit(Be,".unbind();");continue;case Yu:case lu:Fe="1i";break;case of:case Yl:Fe="2i",xe=2;break;case af:case bi:Fe="3i",xe=3;break;case lf:case Od:Fe="4i",xe=4;break;case So:Fe="1f";break;case nf:Fe="2f",xe=2;break;case au:Fe="3f",xe=3;break;case rf:Fe="4f",xe=4;break;case sf:Fe="Matrix2fv";break;case su:Fe="Matrix3fv";break;case Ku:Fe="Matrix4fv";break}if(oe(Ce,".uniform",Fe,"(",y,","),Fe.charAt(0)==="M"){var ht=Math.pow(ze-sf+2,2),bt=he.global.def("new Float32Array(",ht,")");Array.isArray(x)?oe("false,(",Lr(ht,function(Vt){return bt+"["+Vt+"]="+x[Vt]}),",",bt,")"):oe("false,(Array.isArray(",x,")||",x," instanceof Float32Array)?",x,":(",Lr(ht,function(Vt){return bt+"["+Vt+"]="+x+"["+Vt+"]"}),",",bt,")")}else xe>1?oe(Lr(xe,function(Vt){return Array.isArray(x)?x[Vt]:x+"["+Vt+"]"})):(le(!Array.isArray(x),"uniform value must not be an array"),oe(x));oe(");")}}function In(he,oe,Re,Ge){var Ye=he.shared,De=Ye.gl,Ce=Ye.draw,Fe=Ge.draw;function pe(){var Be=Fe.elements,ht,bt=oe;return Be?((Be.contextDep&&Ge.contextDynamic||Be.propDep)&&(bt=Re),ht=Be.append(he,bt)):ht=bt.def(Ce,".",qo),ht&&bt("if("+ht+")"+De+".bindBuffer("+Op+","+ht+".buffer.buffer);"),ht}function Te(){var Be=Fe.count,ht,bt=oe;return Be?((Be.contextDep&&Ge.contextDynamic||Be.propDep)&&(bt=Re),ht=Be.append(he,bt),le.optional(function(){Be.MISSING&&he.assert(oe,"false","missing vertex count"),Be.DYNAMIC&&he.assert(bt,ht+">=0","missing vertex count")})):(ht=bt.def(Ce,".",Tl),le.optional(function(){he.assert(bt,ht+">=0","missing vertex count")})),ht}var de=pe();function ze(Be){var ht=Fe[Be];return ht?ht.contextDep&&Ge.contextDynamic||ht.propDep?ht.append(he,Re):ht.append(he,oe):oe.def(Ce,".",Be)}var We=ze(Al),h=ze(gd),y=Te();if(typeof y=="number"){if(y===0)return}else Re("if(",y,"){"),Re.exit("}");var x,I;Dt&&(x=ze(Mt),I=he.instancing);var Z=de+".type",ne=Fe.elements&&sl(Fe.elements);function ve(){function Be(){Re(I,".drawElementsInstancedANGLE(",[We,y,Z,h+"<<(("+Z+"-"+Js+")>>1)",x],");")}function ht(){Re(I,".drawArraysInstancedANGLE(",[We,h,y,x],");")}de?ne?Be():(Re("if(",de,"){"),Be(),Re("}else{"),ht(),Re("}")):ht()}function xe(){function Be(){Re(De+".drawElements("+[We,y,Z,h+"<<(("+Z+"-"+Js+")>>1)"]+");")}function ht(){Re(De+".drawArrays("+[We,h,y]+");")}de?ne?Be():(Re("if(",de,"){"),Be(),Re("}else{"),ht(),Re("}")):ht()}Dt&&(typeof x!="number"||x>=0)?typeof x=="string"?(Re("if(",x,">0){"),ve(),Re("}else if(",x,"<0){"),xe(),Re("}")):ve():xe()}function mr(he,oe,Re,Ge,Ye){var De=Ln(),Ce=De.proc("body",Ye);return le.optional(function(){De.commandStr=oe.commandStr,De.command=De.link(oe.commandStr)}),Dt&&(De.instancing=Ce.def(De.shared.extensions,".angle_instanced_arrays")),he(De,Ce,Re,Ge),De.compile().body}function er(he,oe,Re,Ge){vo(he,oe),Re.useVAO?Re.drawVAO?oe(he.shared.vao,".setVAO(",Re.drawVAO.append(he,oe),");"):oe(he.shared.vao,".setVAO(",he.shared.vao,".targetVAO);"):(oe(he.shared.vao,".setVAO(null);"),vi(he,oe,Re,Ge.attributes,function(){return!0})),Nr(he,oe,Re,Ge.uniforms,function(){return!0}),In(he,oe,oe,Re)}function mo(he,oe){var Re=he.proc("draw",1);vo(he,Re),Ko(he,Re,oe.context),ai(he,Re,oe.framebuffer),hi(he,Re,oe),ei(he,Re,oe.state),Qn(he,Re,oe,!1,!0);var Ge=oe.shader.progVar.append(he,Re);if(Re(he.shared.gl,".useProgram(",Ge,".program);"),oe.shader.program)er(he,Re,oe,oe.shader.program);else{Re(he.shared.vao,".setVAO(null);");var Ye=he.global.def("{}"),De=Re.def(Ge,".id"),Ce=Re.def(Ye,"[",De,"]");Re(he.cond(Ce).then(Ce,".call(this,a0);").else(Ce,"=",Ye,"[",De,"]=",he.link(function(Fe){return mr(er,he,oe,Fe,1)}),"(",Ge,");",Ce,".call(this,a0);"))}Object.keys(oe.state).length>0&&Re(he.shared.current,".dirty=true;")}function kl(he,oe,Re,Ge){he.batchId="a1",vo(he,oe);function Ye(){return!0}vi(he,oe,Re,Ge.attributes,Ye),Nr(he,oe,Re,Ge.uniforms,Ye),In(he,oe,oe,Re)}function xo(he,oe,Re,Ge){vo(he,oe);var Ye=Re.contextDep,De=oe.def(),Ce="a0",Fe="a1",pe=oe.def();he.shared.props=pe,he.batchId=De;var Te=he.scope(),de=he.scope();oe(Te.entry,"for(",De,"=0;",De,"<",Fe,";++",De,"){",pe,"=",Ce,"[",De,"];",de,"}",Te.exit);function ze(Z){return Z.contextDep&&Ye||Z.propDep}function We(Z){return!ze(Z)}if(Re.needsContext&&Ko(he,de,Re.context),Re.needsFramebuffer&&ai(he,de,Re.framebuffer),ei(he,de,Re.state,ze),Re.profile&&ze(Re.profile)&&Qn(he,de,Re,!1,!0),Ge)Re.useVAO?Re.drawVAO?ze(Re.drawVAO)?de(he.shared.vao,".setVAO(",Re.drawVAO.append(he,de),");"):Te(he.shared.vao,".setVAO(",Re.drawVAO.append(he,Te),");"):Te(he.shared.vao,".setVAO(",he.shared.vao,".targetVAO);"):(Te(he.shared.vao,".setVAO(null);"),vi(he,Te,Re,Ge.attributes,We),vi(he,de,Re,Ge.attributes,ze)),Nr(he,Te,Re,Ge.uniforms,We),Nr(he,de,Re,Ge.uniforms,ze),In(he,Te,de,Re);else{var h=he.global.def("{}"),y=Re.shader.progVar.append(he,de),x=de.def(y,".id"),I=de.def(h,"[",x,"]");de(he.shared.gl,".useProgram(",y,".program);","if(!",I,"){",I,"=",h,"[",x,"]=",he.link(function(Z){return mr(kl,he,Re,Z,2)}),"(",y,");}",I,".call(this,a0[",De,"],",De,");")}}function ye(he,oe){var Re=he.proc("batch",2);he.batchId="0",vo(he,Re);var Ge=!1,Ye=!0;Object.keys(oe.context).forEach(function(h){Ge=Ge||oe.context[h].propDep}),Ge||(Ko(he,Re,oe.context),Ye=!1);var De=oe.framebuffer,Ce=!1;De?(De.propDep?Ge=Ce=!0:De.contextDep&&Ge&&(Ce=!0),Ce||ai(he,Re,De)):ai(he,Re,null),oe.state.viewport&&oe.state.viewport.propDep&&(Ge=!0);function Fe(h){return h.contextDep&&Ge||h.propDep}hi(he,Re,oe),ei(he,Re,oe.state,function(h){return!Fe(h)}),(!oe.profile||!Fe(oe.profile))&&Qn(he,Re,oe,!1,"a1"),oe.contextDep=Ge,oe.needsContext=Ye,oe.needsFramebuffer=Ce;var pe=oe.shader.progVar;if(pe.contextDep&&Ge||pe.propDep)xo(he,Re,oe,null);else{var Te=pe.append(he,Re);if(Re(he.shared.gl,".useProgram(",Te,".program);"),oe.shader.program)xo(he,Re,oe,oe.shader.program);else{Re(he.shared.vao,".setVAO(null);");var de=he.global.def("{}"),ze=Re.def(Te,".id"),We=Re.def(de,"[",ze,"]");Re(he.cond(We).then(We,".call(this,a0,a1);").else(We,"=",de,"[",ze,"]=",he.link(function(h){return mr(xo,he,oe,h,2)}),"(",Te,");",We,".call(this,a0,a1);"))}}Object.keys(oe.state).length>0&&Re(he.shared.current,".dirty=true;")}function ot(he,oe){var Re=he.proc("scope",3);he.batchId="a2";var Ge=he.shared,Ye=Ge.current;Ko(he,Re,oe.context),oe.framebuffer&&oe.framebuffer.append(he,Re),df(Object.keys(oe.state)).forEach(function(Ce){var Fe=oe.state[Ce],pe=Fe.append(he,Re);P(pe)?pe.forEach(function(Te,de){Re.set(he.next[Ce],"["+de+"]",Te)}):Re.set(Ge.next,"."+Ce,pe)}),Qn(he,Re,oe,!0,!0),[qo,gd,Tl,Mt,Al].forEach(function(Ce){var Fe=oe.draw[Ce];Fe&&Re.set(Ge.draw,"."+Ce,""+Fe.append(he,Re))}),Object.keys(oe.uniforms).forEach(function(Ce){var Fe=oe.uniforms[Ce].append(he,Re);Array.isArray(Fe)&&(Fe="["+Fe.join()+"]"),Re.set(Ge.uniforms,"["+se.id(Ce)+"]",Fe)}),Object.keys(oe.attributes).forEach(function(Ce){var Fe=oe.attributes[Ce].append(he,Re),pe=he.scopeAttrib(Ce);Object.keys(new qe).forEach(function(Te){Re.set(pe,"."+Te,Fe[Te])})}),oe.scopeVAO&&Re.set(Ge.vao,".targetVAO",oe.scopeVAO.append(he,Re));function De(Ce){var Fe=oe.shader[Ce];Fe&&Re.set(Ge.shader,"."+Ce,Fe.append(he,Re))}De(Zc),De($i),Object.keys(oe.state).length>0&&(Re(Ye,".dirty=true;"),Re.exit(Ye,".dirty=true;")),Re("a1(",he.shared.context,",a0,",he.batchId,");")}function et(he){if(!(typeof he!="object"||P(he))){for(var oe=Object.keys(he),Re=0;Re<oe.length;++Re)if(Jt.isDynamic(he[oe[Re]]))return!0;return!1}}function sn(he,oe,Re){var Ge=oe.static[Re];if(!Ge||!et(Ge))return;var Ye=he.global,De=Object.keys(Ge),Ce=!1,Fe=!1,pe=!1,Te=he.global.def("{}");De.forEach(function(ze){var We=Ge[ze];if(Jt.isDynamic(We)){typeof We=="function"&&(We=Ge[ze]=Jt.unbox(We));var h=fa(We,null);Ce=Ce||h.thisDep,pe=pe||h.propDep,Fe=Fe||h.contextDep}else{switch(Ye(Te,".",ze,"="),typeof We){case"number":Ye(We);break;case"string":Ye('"',We,'"');break;case"object":Array.isArray(We)&&Ye("[",We.join(),"]");break;default:Ye(he.link(We));break}Ye(";")}});function de(ze,We){De.forEach(function(h){var y=Ge[h];if(Jt.isDynamic(y)){var x=ze.invoke(We,y);We(Te,".",h,"=",x,";")}})}oe.dynamic[Re]=new Jt.DynamicVariable(rl,{thisDep:Ce,contextDep:Fe,propDep:pe,ref:Te,append:de}),delete oe.static[Re]}function hr(he,oe,Re,Ge,Ye){var De=Ln();De.stats=De.link(Ye),Object.keys(oe.static).forEach(function(Fe){sn(De,oe,Fe)}),Ep.forEach(function(Fe){sn(De,he,Fe)});var Ce=Fo(he,oe,Re,Ge,De);return mo(De,Ce),ot(De,Ce),ye(De,Ce),a(De.compile(),{destroy:function(){Ce.shader.program.destroy()}})}return{next:nn,current:St,procs:function(){var he=Ln(),oe=he.proc("poll"),Re=he.proc("refresh"),Ge=he.block();oe(Ge),Re(Ge);var Ye=he.shared,De=Ye.gl,Ce=Ye.next,Fe=Ye.current;Ge(Fe,".dirty=false;"),ai(he,oe),ai(he,Re,null,!0);var pe;Dt&&(pe=he.link(Dt)),Oe.oes_vertex_array_object&&Re(he.link(Oe.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Te=0;Te<nt.maxAttributes;++Te){var de=Re.def(Ye.attributes,"[",Te,"]"),ze=he.cond(de,".buffer");ze.then(De,".enableVertexAttribArray(",Te,");",De,".bindBuffer(",Ml,",",de,".buffer.buffer);",De,".vertexAttribPointer(",Te,",",de,".size,",de,".type,",de,".normalized,",de,".stride,",de,".offset);").else(De,".disableVertexAttribArray(",Te,");",De,".vertexAttrib4f(",Te,",",de,".x,",de,".y,",de,".z,",de,".w);",de,".buffer=null;"),Re(ze),Dt&&Re(pe,".vertexAttribDivisorANGLE(",Te,",",de,".divisor);")}return Re(he.shared.vao,".currentVAO=null;",he.shared.vao,".setVAO(",he.shared.vao,".targetVAO);"),Object.keys(Gt).forEach(function(We){var h=Gt[We],y=Ge.def(Ce,".",We),x=he.block();x("if(",y,"){",De,".enable(",h,")}else{",De,".disable(",h,")}",Fe,".",We,"=",y,";"),Re(x),oe("if(",y,"!==",Fe,".",We,"){",x,"}")}),Object.keys(xt).forEach(function(We){var h=xt[We],y=St[We],x,I,Z=he.block();if(Z(De,".",h,"("),P(y)){var ne=y.length;x=he.global.def(Ce,".",We),I=he.global.def(Fe,".",We),Z(Lr(ne,function(ve){return x+"["+ve+"]"}),");",Lr(ne,function(ve){return I+"["+ve+"]="+x+"["+ve+"];"}).join("")),oe("if(",Lr(ne,function(ve){return x+"["+ve+"]!=="+I+"["+ve+"]"}).join("||"),"){",Z,"}")}else x=Ge.def(Ce,".",We),I=Ge.def(Fe,".",We),Z(x,");",Fe,".",We,"=",x,";"),oe("if(",x,"!==",I,"){",Z,"}");Re(Z)}),he.compile()}(),compile:hr}}function pf(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var cu=34918,br=34919,Ih=35007,da=function(G,se){if(!se.ext_disjoint_timer_query)return null;var Oe=[];function nt(){return Oe.pop()||se.ext_disjoint_timer_query.createQueryEXT()}function pt(Dt){Oe.push(Dt)}var Qe=[];function ft(Dt){var Qt=nt();se.ext_disjoint_timer_query.beginQueryEXT(Ih,Qt),Qe.push(Qt),Pt(Qe.length-1,Qe.length,Dt)}function kt(){se.ext_disjoint_timer_query.endQueryEXT(Ih)}function jt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Nt=[];function ut(){return Nt.pop()||new jt}function Wt(Dt){Nt.push(Dt)}var $t=[];function Pt(Dt,Qt,St){var nn=ut();nn.startQueryIndex=Dt,nn.endQueryIndex=Qt,nn.sum=0,nn.stats=St,$t.push(nn)}var wt=[],qe=[];function st(){var Dt,Qt,St=Qe.length;if(St!==0){qe.length=Math.max(qe.length,St+1),wt.length=Math.max(wt.length,St+1),wt[0]=0,qe[0]=0;var nn=0;for(Dt=0,Qt=0;Qt<Qe.length;++Qt){var At=Qe[Qt];se.ext_disjoint_timer_query.getQueryObjectEXT(At,br)?(nn+=se.ext_disjoint_timer_query.getQueryObjectEXT(At,cu),pt(At)):Qe[Dt++]=At,wt[Qt+1]=nn,qe[Qt+1]=Dt}for(Qe.length=Dt,Dt=0,Qt=0;Qt<$t.length;++Qt){var Gt=$t[Qt],xt=Gt.startQueryIndex,Ht=Gt.endQueryIndex;Gt.sum+=wt[Ht]-wt[xt];var Rn=qe[xt],Wn=qe[Ht];Wn===Rn?(Gt.stats.gpuTime+=Gt.sum/1e6,Wt(Gt)):(Gt.startQueryIndex=Rn,Gt.endQueryIndex=Wn,$t[Dt++]=Gt)}$t.length=Dt}}return{beginQuery:ft,endQuery:kt,pushScopeStats:Pt,update:st,getNumPendingQueries:function(){return Qe.length},clear:function(){Oe.push.apply(Oe,Qe);for(var Dt=0;Dt<Oe.length;Dt++)se.ext_disjoint_timer_query.deleteQueryEXT(Oe[Dt]);Qe.length=0,Oe.length=0},restore:function(){Qe.length=0,Oe.length=0}}},Po=16384,oa=256,Mp=1024,Mi=34962,Ta="webglcontextlost",fu="webglcontextrestored",hf=1,Lo=2,Yo=3;function Ad(G,se){for(var Oe=0;Oe<G.length;++Oe)if(G[Oe]===se)return Oe;return-1}function kp(G){var se=ur(G);if(!se)return null;var Oe=se.gl,nt=Oe.getContextAttributes(),pt=Oe.isContextLost(),Qe=to(Oe,se);if(!Qe)return null;var ft=ui(),kt=pf(),jt=Qe.extensions,Nt=da(Oe,jt),ut=Sr(),Wt=Oe.drawingBufferWidth,$t=Oe.drawingBufferHeight,Pt={tick:0,time:0,viewportWidth:Wt,viewportHeight:$t,framebufferWidth:Wt,framebufferHeight:$t,drawingBufferWidth:Wt,drawingBufferHeight:$t,pixelRatio:se.pixelRatio},wt={},qe={elements:null,primitive:4,count:-1,offset:0,instances:-1},st=kc(Oe,jt),Dt=wa(Oe,kt,se,St),Qt=ud(Oe,jt,st,kt,Dt);function St(In){return Qt.destroyBuffer(In)}var nn=vn(Oe,jt,Dt,kt),At=fd(Oe,ft,kt,se),Gt=Mr(Oe,jt,st,function(){Rn.procs.poll()},Pt,kt,se),xt=Uu(Oe,jt,st,kt,se),Ht=ld(Oe,jt,st,Gt,xt,kt),Rn=em(Oe,ft,jt,st,Dt,nn,Gt,Ht,wt,Qt,At,qe,Pt,Nt,se),Wn=Ah(Oe,Ht,Rn.procs.poll,Pt,nt,jt,st),Rt=Rn.next,Tt=Oe.canvas,Ot=[],Ln=[],rr=[],pn=[se.onDestroy],cr=null;function Hn(){if(Ot.length===0){Nt&&Nt.update(),cr=null;return}cr=Dn.next(Hn),ei();for(var In=Ot.length-1;In>=0;--In){var mr=Ot[In];mr&&mr(Pt,null,0)}Oe.flush(),Nt&&Nt.update()}function ir(){!cr&&Ot.length>0&&(cr=Dn.next(Hn))}function wr(){cr&&(Dn.cancel(Hn),cr=null)}function $o(In){In.preventDefault(),pt=!0,wr(),Ln.forEach(function(mr){mr()})}function Ro(In){Oe.getError(),pt=!1,Qe.restore(),At.restore(),Dt.restore(),Gt.restore(),xt.restore(),Ht.restore(),Qt.restore(),Nt&&Nt.restore(),Rn.procs.refresh(),ir(),rr.forEach(function(mr){mr()})}Tt&&(Tt.addEventListener(Ta,$o,!1),Tt.addEventListener(fu,Ro,!1));function or(){Ot.length=0,wr(),Tt&&(Tt.removeEventListener(Ta,$o),Tt.removeEventListener(fu,Ro)),At.clear(),Ht.clear(),xt.clear(),Gt.clear(),nn.clear(),Dt.clear(),Qt.clear(),Nt&&Nt.clear(),pn.forEach(function(In){In()})}function Qo(In){le(!!In,"invalid args to regl({...})"),le.type(In,"object","invalid args to regl({...})");function mr(Ye){var De=a({},Ye);delete De.uniforms,delete De.attributes,delete De.context,delete De.vao,"stencil"in De&&De.stencil.op&&(De.stencil.opBack=De.stencil.opFront=De.stencil.op,delete De.stencil.op);function Ce(Fe){if(Fe in De){var pe=De[Fe];delete De[Fe],Object.keys(pe).forEach(function(Te){De[Fe+"."+Te]=pe[Te]})}}return Ce("blend"),Ce("depth"),Ce("cull"),Ce("stencil"),Ce("polygonOffset"),Ce("scissor"),Ce("sample"),"vao"in Ye&&(De.vao=Ye.vao),De}function er(Ye,De){var Ce={},Fe={};return Object.keys(Ye).forEach(function(pe){var Te=Ye[pe];if(Jt.isDynamic(Te)){Fe[pe]=Jt.unbox(Te,pe);return}else if(De&&Array.isArray(Te)){for(var de=0;de<Te.length;++de)if(Jt.isDynamic(Te[de])){Fe[pe]=Jt.unbox(Te,pe);return}}Ce[pe]=Te}),{dynamic:Fe,static:Ce}}var mo=er(In.context||{},!0),kl=er(In.uniforms||{},!0),xo=er(In.attributes||{},!1),ye=er(mr(In),!1),ot={gpuTime:0,cpuTime:0,count:0},et=Rn.compile(ye,xo,kl,mo,ot),sn=et.draw,hr=et.batch,he=et.scope,oe=[];function Re(Ye){for(;oe.length<Ye;)oe.push(null);return oe}function Ge(Ye,De){var Ce;if(pt&&le.raise("context lost"),typeof Ye=="function")return he.call(this,null,Ye,0);if(typeof De=="function")if(typeof Ye=="number")for(Ce=0;Ce<Ye;++Ce)he.call(this,null,De,Ce);else if(Array.isArray(Ye))for(Ce=0;Ce<Ye.length;++Ce)he.call(this,Ye[Ce],De,Ce);else return he.call(this,Ye,De,0);else if(typeof Ye=="number"){if(Ye>0)return hr.call(this,Re(Ye|0),Ye|0)}else if(Array.isArray(Ye)){if(Ye.length)return hr.call(this,Ye,Ye.length)}else return sn.call(this,Ye)}return a(Ge,{stats:ot,destroy:function(){et.destroy()}})}var so=Ht.setFBO=Qo({framebuffer:Jt.define.call(null,hf,"framebuffer")});function Fo(In,mr){var er=0;Rn.procs.poll();var mo=mr.color;mo&&(Oe.clearColor(+mo[0]||0,+mo[1]||0,+mo[2]||0,+mo[3]||0),er|=Po),"depth"in mr&&(Oe.clearDepth(+mr.depth),er|=oa),"stencil"in mr&&(Oe.clearStencil(mr.stencil|0),er|=Mp),le(!!er,"called regl.clear with no buffer specified"),Oe.clear(er)}function Ko(In){if(le(typeof In=="object"&&In,"regl.clear() takes an object as input"),"framebuffer"in In)if(In.framebuffer&&In.framebuffer_reglType==="framebufferCube")for(var mr=0;mr<6;++mr)so(a({framebuffer:In.framebuffer.faces[mr]},In),Fo);else so(In,Fo);else Fo(null,In)}function ai(In){le.type(In,"function","regl.frame() callback must be a function"),Ot.push(In);function mr(){var er=Ad(Ot,In);le(er>=0,"cannot cancel a frame twice");function mo(){var kl=Ad(Ot,mo);Ot[kl]=Ot[Ot.length-1],Ot.length-=1,Ot.length<=0&&wr()}Ot[er]=mo}return ir(),{cancel:mr}}function hi(){var In=Rt.viewport,mr=Rt.scissor_box;In[0]=In[1]=mr[0]=mr[1]=0,Pt.viewportWidth=Pt.framebufferWidth=Pt.drawingBufferWidth=In[2]=mr[2]=Oe.drawingBufferWidth,Pt.viewportHeight=Pt.framebufferHeight=Pt.drawingBufferHeight=In[3]=mr[3]=Oe.drawingBufferHeight}function ei(){Pt.tick+=1,Pt.time=Qn(),hi(),Rn.procs.poll()}function vo(){Gt.refresh(),hi(),Rn.procs.refresh(),Nt&&Nt.update()}function Qn(){return(Sr()-ut)/1e3}vo();function vi(In,mr){le.type(mr,"function","listener callback must be a function");var er;switch(In){case"frame":return ai(mr);case"lost":er=Ln;break;case"restore":er=rr;break;case"destroy":er=pn;break;default:le.raise("invalid event, must be one of frame,lost,restore,destroy")}return er.push(mr),{cancel:function(){for(var mo=0;mo<er.length;++mo)if(er[mo]===mr){er[mo]=er[er.length-1],er.pop();return}}}}var Nr=a(Qo,{clear:Ko,prop:Jt.define.bind(null,hf),context:Jt.define.bind(null,Lo),this:Jt.define.bind(null,Yo),draw:Qo({}),buffer:function(In){return Dt.create(In,Mi,!1,!1)},elements:function(In){return nn.create(In,!1)},texture:Gt.create2D,cube:Gt.createCube,renderbuffer:xt.create,framebuffer:Ht.create,framebufferCube:Ht.createCube,vao:Qt.createVAO,attributes:nt,frame:ai,on:vi,limits:st,hasExtension:function(In){return st.extensions.indexOf(In.toLowerCase())>=0},read:Wn,destroy:or,_gl:Oe,_refresh:vo,poll:function(){ei(),Nt&&Nt.update()},now:Qn,stats:kt});return se.onDone(null,Nr),Nr}return kp})}(Ag)),Ag.exports}Ire();var Af,ym,Tf,Ps,gm,Id,_m,dg,ac,Vp,ka,lc,sc,pg;Af={},un(Af,ln.POINTS,"points"),un(Af,ln.LINES,"lines"),un(Af,ln.LINE_LOOP,"line loop"),un(Af,ln.LINE_STRIP,"line strip"),un(Af,ln.TRIANGLES,"triangles"),un(Af,ln.TRIANGLE_FAN,"triangle fan"),un(Af,ln.TRIANGLE_STRIP,"triangle strip");ym={},un(ym,ln.STATIC_DRAW,"static"),un(ym,ln.DYNAMIC_DRAW,"dynamic"),un(ym,ln.STREAM_DRAW,"stream");Tf={},un(Tf,ln.BYTE,"int8"),un(Tf,ln.UNSIGNED_INT,"int16"),un(Tf,ln.INT,"int32"),un(Tf,ln.UNSIGNED_BYTE,"uint8"),un(Tf,ln.UNSIGNED_SHORT,"uint16"),un(Tf,ln.UNSIGNED_INT,"uint32"),un(Tf,ln.FLOAT,"float");Ps={},un(Ps,ln.ALPHA,"alpha"),un(Ps,ln.LUMINANCE,"luminance"),un(Ps,ln.LUMINANCE_ALPHA,"luminance alpha"),un(Ps,ln.RGB,"rgb"),un(Ps,ln.RGBA,"rgba"),un(Ps,ln.RGBA4,"rgba4"),un(Ps,ln.RGB5_A1,"rgb5 a1"),un(Ps,ln.RGB565,"rgb565"),un(Ps,ln.DEPTH_COMPONENT,"depth"),un(Ps,ln.DEPTH_STENCIL,"depth stencil");gm={},un(gm,ln.DONT_CARE,"dont care"),un(gm,ln.NICEST,"nice"),un(gm,ln.FASTEST,"fast");Id={},un(Id,ln.NEAREST,"nearest"),un(Id,ln.LINEAR,"linear"),un(Id,ln.LINEAR_MIPMAP_LINEAR,"mipmap"),un(Id,ln.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),un(Id,ln.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),un(Id,ln.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");_m={},un(_m,ln.REPEAT,"repeat"),un(_m,ln.CLAMP_TO_EDGE,"clamp"),un(_m,ln.MIRRORED_REPEAT,"mirror");dg={},un(dg,ln.NONE,"none"),un(dg,ln.BROWSER_DEFAULT_WEBGL,"browser");ac={},un(ac,ln.NEVER,"never"),un(ac,ln.ALWAYS,"always"),un(ac,ln.LESS,"less"),un(ac,ln.LEQUAL,"lequal"),un(ac,ln.GREATER,"greater"),un(ac,ln.GEQUAL,"gequal"),un(ac,ln.EQUAL,"equal"),un(ac,ln.NOTEQUAL,"notequal");Vp={},un(Vp,ln.FUNC_ADD,"add"),un(Vp,ln.MIN_EXT,"min"),un(Vp,ln.MAX_EXT,"max"),un(Vp,ln.FUNC_SUBTRACT,"subtract"),un(Vp,ln.FUNC_REVERSE_SUBTRACT,"reverse subtract");ka={},un(ka,ln.ZERO,"zero"),un(ka,ln.ONE,"one"),un(ka,ln.SRC_COLOR,"src color"),un(ka,ln.ONE_MINUS_SRC_COLOR,"one minus src color"),un(ka,ln.SRC_ALPHA,"src alpha"),un(ka,ln.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),un(ka,ln.DST_COLOR,"dst color"),un(ka,ln.ONE_MINUS_DST_COLOR,"one minus dst color"),un(ka,ln.DST_ALPHA,"dst alpha"),un(ka,ln.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),un(ka,ln.CONSTANT_COLOR,"constant color"),un(ka,ln.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),un(ka,ln.CONSTANT_ALPHA,"constant alpha"),un(ka,ln.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),un(ka,ln.SRC_ALPHA_SATURATE,"src alpha saturate");lc={},un(lc,ln.NEVER,"never"),un(lc,ln.ALWAYS,"always"),un(lc,ln.LESS,"less"),un(lc,ln.LEQUAL,"lequal"),un(lc,ln.GREATER,"greater"),un(lc,ln.GEQUAL,"gequal"),un(lc,ln.EQUAL,"equal"),un(lc,ln.NOTEQUAL,"notequal");sc={},un(sc,ln.ZERO,"zero"),un(sc,ln.KEEP,"keep"),un(sc,ln.REPLACE,"replace"),un(sc,ln.INVERT,"invert"),un(sc,ln.INCR,"increment"),un(sc,ln.DECR,"decrement"),un(sc,ln.INCR_WRAP,"increment wrap"),un(sc,ln.DECR_WRAP,"decrement wrap");pg={},un(pg,ln.FRONT,"front"),un(pg,ln.BACK,"back");var sw,NT;function Lre(){if(NT)return sw;NT=1;function e(t,n){return function(a){return t(n(a))}}return sw=e,sw}var uw,PT;function $re(){if(PT)return uw;PT=1;var e=Lre(),t=e(Object.getPrototypeOf,Object);return uw=t,uw}var cw,RT;function Fre(){if(RT)return cw;RT=1;var e=eE(),t=$re(),n=tE(),a="[object Object]",r=Function.prototype,s=Object.prototype,c=r.toString,p=s.hasOwnProperty,d=c.call(Object);function _(g){if(!n(g)||e(g)!=a)return!1;var b=t(g);if(b===null)return!0;var S=p.call(b,"constructor")&&b.constructor;return typeof S=="function"&&S instanceof S&&c.call(S)==d}return cw=_,cw}Fre();class GP{constructor(){ha(this,"lf");ha(this,"option")}render(t){this.lf=t}layout(t={}){var _;const{nodes:n,edges:a,gridSize:r}=this.lf.graphModel;let s=40,c=40;r>20&&(s=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:c,begin:[120,120],...t},(_=new XQ(this.option).layout({nodes:n.map(g=>({id:g.id,size:{width:g.width,height:g.height},model:g})),edges:a.map(g=>({source:g.sourceNodeId,target:g.targetNodeId,model:g}))}).nodes)==null||_.forEach(g=>{const{model:b}=g;b.set_position({x:g.x,y:g.y})}),this.lf.fitView()}}ha(GP,"pluginName","dagre");const Bre=$n({name:"WorkFlow"}),uoe=$n({...Bre,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":EV,"./nodes/application-node/index.ts":PV,"./nodes/base-node/index.ts":hz,"./nodes/condition-node/index.ts":xz,"./nodes/data-source-local-node/index.ts":Nz,"./nodes/data-source-web-node/index.ts":Iz,"./nodes/document-extract-node/index.ts":Uz,"./nodes/document-split-node/index.ts":cW,"./nodes/form-node/index.ts":NW,"./nodes/http-node/index.ts":GW,"./nodes/image-generate/index.ts":rH,"./nodes/image-understand/index.ts":gH,"./nodes/intent-classify-node/index.ts":TH,"./nodes/knowledge-base-node/index.ts":ZH,"./nodes/knowledge-write-node/index.ts":rX,"./nodes/mcp-node/index.ts":SX,"./nodes/nl2sql-node/index.ts":IX,"./nodes/parameter-extraction-node/index.ts":JX,"./nodes/question-node/index.ts":cq,"./nodes/reply-node/index.ts":_q,"./nodes/reranker-node/index.ts":Dq,"./nodes/search-knowledge-node/index.ts":Hq,"./nodes/speech-to-text-node/index.ts":aY,"./nodes/start-node/index.ts":hY,"./nodes/text-to-speech-node/index.ts":xY,"./nodes/tool-lib-node/index.ts":BY,"./nodes/tool-node/index.ts":oK,"./nodes/user-select-node/index.ts":pK,"./nodes/variable-aggregation-node/index.ts":SK,"./nodes/variable-assign-node/index.ts":RK,"./nodes/variable-splitting/index.ts":QK}),a=Uo("workflowMode")||xr.Application,r=Uo("loopWorkflowMode")||xr.ApplicationLoop,s=_V(),c=je(""),p=je();Ur(()=>{_()}),c8(()=>{gV()});const d=O=>{p.value.render(O)},_=O=>{const E=document.querySelector("#container");E&&(p.value=new mU({plugins:[GP,dV],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:E}),p.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),p.value.on("graph:rendered",()=>{c.value=p.value.graphModel.flowId}),cZ(p.value,p.value.graphModel),p.value.batchRegister([...Object.keys(n).map(C=>n[C].default),iZ,lZ]),p.value.setDefaultEdgeType("app-edge"),p.value.render(O||{}),p.value.graphModel.get_provide=(C,j)=>({getNode:()=>C,getGraph:()=>j,workflowMode:a,loopWorkflowMode:r}),p.value.graphModel.eventCenter.on("delete_edge",C=>{C.forEach(j=>{p.value.deleteEdge(j)})}),p.value.graphModel.eventCenter.on("anchor:drop",C=>{C.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var C;(C=p.value)==null||C.fitView()},500))};return t({onmousedown:O=>{O.type&&p.value.dnd.startDrag({type:O.type,properties:{...O.properties}}),O.callback&&O.callback(p.value)},validate:()=>Promise.all(p.value.graphModel.nodes.map(O=>{var E;return(E=O==null?void 0:O.validate)==null?void 0:E.call(O)})),getGraphData:()=>{const O=p.value.getGraphData();O.nodes.forEach(C=>{C.type==="loop-body-node"&&p.value.getNodeModelById(C.id).set_loop_body()});const E=p.value.getGraphData();return E.nodes=E.nodes.filter(C=>C.type!=="loop-body-node"),E.edges=O.edges.filter(C=>C.type!=="loop-edge"),E},addNode:O=>{p.value.clearSelectElements();const{virtualRectCenterPositionX:E,virtualRectCenterPositionY:C}=p.value.graphModel.getVirtualRectSize(),j=p.value.graphModel.addNode({type:O.type,properties:O.properties,x:E,y:C-p.value.graphModel.height/2});j.isSelected=!0,j.isHovered=!0,p.value.toFront(j.id)},clearGraphData:()=>p.value.clearData(),renderGraphData:_,render:d}),(O,E)=>(_e(),Yt(tr,null,[E[0]||(E[0]=K("div",{className:"workflow-app",id:"container"},null,-1)),p.value?(_e(),Ke(uZ,{key:0,class:"workflow-control",lf:p.value},null,8,["lf"])):cn("",!0),k(Zt(s),{"flow-id":c.value},null,8,["flow-id"])],64))}}),Ure=[kn.AiChat,kn.Reply,kn.ToolLib,kn.ToolLibCustom,kn.ImageUnderstandNode,kn.Application,kn.SpeechToTextNode,kn.TextToSpeechNode,kn.ImageGenerateNode,kn.ImageToVideoGenerateNode,kn.TextToVideoGenerateNode,kn.LoopBodyNode,kn.LoopNode,kn.LoopBreakNode,kn.VideoUnderstandNode,kn.VariableAssignNode,kn.KnowledgeWriteNode],CT=[kn.AiChat,kn.Reply,kn.ToolLib,kn.ToolLibCustom,kn.ImageUnderstandNode,kn.VideoUnderstandNode,kn.Application,kn.SpeechToTextNode,kn.TextToSpeechNode,kn.ImageGenerateNode,kn.ImageToVideoGenerateNode,kn.TextToVideoGenerateNode,kn.LoopBodyNode,kn.LoopNode,kn.LoopBreakNode,kn.VariableAssignNode],Ww={[xr.Application]:Ure,[xr.Knowledge]:[kn.KnowledgeWriteNode],[xr.ApplicationLoop]:CT,[xr.KnowledgeLoop]:[...CT,kn.KnowledgeWriteNode]};class Vre{constructor(t,n){ha(this,"nodes");ha(this,"edges");ha(this,"workFlowNodes");ha(this,"workflowModel");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[],this.workflowModel=n||xr.Application}is_valid_start_node(){const t=this.nodes.filter(n=>[kn.Start,kn.LoopStartNode].includes(n.id));if(t.length==0)throw _t("workflow.validate.startNodeRequired");if(t.length>1)throw _t("workflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===kn.Base);if(t.length==0)throw _t("workflow.validate.baseNodeRequired");if(t.length>1)throw _t("workflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}is_loop_valid(){this.is_valid_start_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>[kn.Start,kn.LoopStartNode].includes(n.id))[0]}get_base_node(){return this.nodes.filter(n=>n.id===kn.Base)[0]}exist_break_node(){return this.nodes.some(t=>t.type===kn.LoopBreakNode)}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const a of n)this._is_valid_work_flow(a)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==kn.Start&&n.id!==kn.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${_t("workflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.nodeName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const a=this.edges.filter(s=>s.sourceNodeId==t.id).map(s=>this.nodes.filter(c=>c.id==s.targetNodeId)).reduce((s,c)=>[...s,...c],[]),r=Ww[this.workflowModel];if(a.length==0&&!r.includes(t.type))throw _t("workflow.validate.noNextNode");return a}is_valid_nodes(){for(const t of this.nodes)if(t.type!==kn.Base&&t.type!==kn.Start&&t.type!==kn.LoopStartNode&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${_t("workflow.validate.notInWorkFlowNode")}:${t.properties.nodeName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.nodeName} ${_t("workflow.validate.nodeUnavailable")}`;if(t.type===kn.Condition){const n=t.properties.nodeData.branch;for(const a of n){const r=`${t.id}_${a.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.nodeName} ${_t("workflow.validate.needConnect1")}${a.type}${_t("workflow.validate.needConnect2")}`}}else{const n=this.edges.filter(r=>r.sourceNodeId==t.id),a=Ww[this.workflowModel];if(n.length==0&&!a.includes(t.type))throw`${t.properties.nodeName} ${_t("workflow.validate.cannotEndNode")}`}if(t.properties.status&&t.properties.status!==200)throw`${t.properties.nodeName} ${_t("workflow.validate.nodeUnavailable")}`}}class zP extends Vre{is_valid_start_node(){if((this.workflowModel==xr.Knowledge?this.nodes.filter(n=>n.properties.kind===uc.DataSource):this.nodes.filter(n=>n.type===kn.LoopStartNode)).length==0)throw _t("workflow.validate.startNodeRequired")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===kn.KnowledgeBase);if(t.length==0)throw _t("workflow.validate.baseNodeRequired");if(t.length>1)throw _t("workflow.validate.baseNodeOnly")}is_valid_work_flow(){this.workFlowNodes=[],this.get_start_nodes().forEach(a=>{this._is_valid_work_flow(a)});const n=this.nodes.filter(a=>a.id!==kn.KnowledgeBase&&a.type!==kn.LoopStartNode&&a.properties.kind!==uc.DataSource).filter(a=>!this.workFlowNodes.includes(a));if(n.length>0)throw console.log("ss"),`${_t("workflow.validate.notInWorkFlowNode")}:${n.map(a=>a.properties.nodeName).join("，")}`;this.workFlowNodes=[]}is_valid_nodes(){for(const t of this.nodes)if(t.type!==kn.KnowledgeBase&&t.type!==kn.LoopStartNode&&t.properties.kind!==uc.DataSource&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${_t("workflow.validate.notInWorkFlowNode")}:${t.properties.nodeName}`}get_start_nodes(){return this.workflowModel==xr.Knowledge?this.nodes.filter(t=>t.properties.kind===uc.DataSource):this.nodes.filter(t=>t.type===kn.LoopStartNode)}get_end_nodes(){return this.get_start_nodes().flatMap(n=>this._get_end_nodes(n,[]))}_get_end_nodes(t,n){const a=this.get_next_nodes(t);return a.length==0?n.push(t):a.forEach(r=>{this._get_end_nodes(r,n)}),n}get_next_nodes(t){return this.edges.filter(a=>a.sourceNodeId==t.id).map(a=>this.nodes.filter(r=>r.id==a.targetNodeId)).reduce((a,r)=>[...a,...r],[])}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.nodeName} ${_t("workflow.validate.nodeUnavailable")}`;if(t.type===kn.Condition){const n=t.properties.nodeData.branch;for(const a of n){const r=`${t.id}_${a.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.nodeName} ${_t("workflow.validate.needConnect1")}${a.type}${_t("workflow.validate.needConnect2")}`}}else{const n=this.edges.filter(r=>r.sourceNodeId==t.id),a=Ww[this.workflowModel];if(this.workflowModel==xr.KnowledgeLoop){if(n.length==0&&!a.includes(t.type))throw`${t.properties.nodeName} ${_t("workflow.validate.cannotEndNode")}`;return}if(n.length==0&&!a.includes(t.type))if(t.type==kn.LoopNode){if(t.properties.nodeData.loop_body&&!new zP(t.properties.nodeData.loop_body,xr.KnowledgeLoop).get_end_nodes().every(s=>a.includes(s.type)))throw`${t.properties.nodeName} ${_t("workflow.validate.cannotEndNode")}`}else throw`${t.properties.nodeName} ${_t("workflow.validate.cannotEndNode")}`}if(t.properties.status&&t.properties.status!==200)throw`${t.properties.nodeName} ${_t("workflow.validate.nodeUnavailable")}`}}export{zP as K,Vre as W,uoe as _,jB as a};
