var $t=Object.defineProperty;var Dt=(K,S,R)=>S in K?$t(K,S,{enumerable:!0,configurable:!0,writable:!0,value:R}):K[S]=R;var Ke=(K,S,R)=>Dt(K,typeof S!="symbol"?S+"":S,R);import{ay as fe,aZ as Ce,a_ as le,aB as T,aP as Mt,aC as v,aQ as qe,aD as h,aE as r,aF as o,aG as t,aH as l,b1 as k,aR as Q,aS as re,aT as Se,b6 as a,aK as d,aJ as s,aI as M,aU as W,b2 as H,b3 as Z,aA as Qe,aV as Oe,bf as Tt,az as Rt,e0 as Nt,dc as It,bU as Ut,b7 as At,dt as Vt,a$ as Bt,b0 as Lt,cp as P,d4 as Gt,e1 as Ft,ci as x,df as Pt,c1 as ze,c3 as ve,c4 as Ht,co as Kt}from"./admin-_EJ4kEIX.js";import{S as Ot}from"./SyncWebDialog-V2ZKwtoC.js";import{_ as zt}from"./index.vue_vue_type_script_setup_true_lang-C56i4H85.js";var he=(K=>(K.optimization="views.document.hitHandlingMethod.optimization",K.directly_return="views.document.hitHandlingMethod.directly_return",K))(he||{});const jt={class:"flex align-center"},qt={class:"mr-4"},Qt={class:"lighter w-full",style:{"margin-top":"-20px"}},Wt={class:"dialog-footer"},Zt=fe({__name:"ImportDocumentDialog",props:{title:String},emits:["refresh"],setup(K,{expose:S,emit:R}){const i=Ce(),{params:{id:$}}=i,j=le(()=>i.path.includes("shared")?"systemShare":i.path.includes("resource-management")?"systemManage":"workspace"),w=R,C=T(),p=T(!1),n=T(!1),f=T({sourceUrl:"",selector:"",hitHandlingMethod:"optimization",directlyReturnSimilarity:.9}),B=T(""),U=T(""),y=T([]),A=Mt({sourceUrl:[{required:!0,message:v("views.document.form.sourceUrl.requiredMessage"),trigger:"blur"}],directlyReturnSimilarity:[{required:!0,message:v("views.document.form.similarity.requiredMessage"),trigger:"blur"}]}),I=T(!1);qe(I,c=>{c||(f.value={sourceUrl:"",selector:"",hitHandlingMethod:"optimization",directlyReturnSimilarity:.9},n.value=!1,U.value="",B.value="",y.value=[])});const Y=(c,E)=>{c?(U.value=c.type,B.value=c.id,f.value={hitHandlingMethod:c.hitHandlingMethod,directlyReturnSimilarity:c.directlyReturnSimilarity,...c.meta,meta:c.meta},n.value=!1):E?y.value=E:(U.value=1,n.value=!0),I.value=!0},se=async c=>{c&&await c.validate(E=>{if(E){if(n.value){const V={sourceUrlList:f.value.sourceUrl.split(`
`),selector:f.value.selector};H({type:"document",systemType:j.value}).postWebDocument($,V,p).then(()=>{Z(v("views.document.tip.importMessage")),w("refresh"),I.value=!1})}else if(B.value){const V={hitHandlingMethod:f.value.hitHandlingMethod,directlyReturnSimilarity:f.value.directlyReturnSimilarity,meta:{...f.value.meta,sourceUrl:f.value.sourceUrl,selector:f.value.selector}};H({type:"document",systemType:j.value}).putDocument($,B.value,V,p).then(()=>{Z(v("common.settingSuccess")),w("refresh"),I.value=!1})}else if(y.value.length>0){const V={hitHandlingMethod:f.value.hitHandlingMethod,directlyReturnSimilarity:f.value.directlyReturnSimilarity,idList:y.value};H({type:"document",systemType:j.value}).putBatchEditHitHandling($,V,p).then(()=>{Z(v("common.settingSuccess")),w("refresh"),I.value=!1})}}})};return S({open:Y}),(c,E)=>{const V=h("el-input"),D=h("el-form-item"),ie=h("AppIcon"),ae=h("el-tooltip"),de=h("el-radio"),L=h("el-radio-group"),ee=h("el-input-number"),q=h("el-form"),ne=h("el-button"),G=h("el-dialog");return o(),r(G,{title:K.title,modelValue:I.value,"onUpdate:modelValue":E[7]||(E[7]=O=>I.value=O),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,width:"550"},{footer:t(()=>[M("span",Wt,[l(ne,{onClick:E[5]||(E[5]=W(O=>I.value=!1,["prevent"]))},{default:t(()=>[d(s(c.$t("common.cancel")),1)]),_:1}),l(ne,{type:"primary",onClick:E[6]||(E[6]=O=>se(C.value)),loading:p.value},{default:t(()=>[d(s(c.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[l(q,{"label-position":"top",ref_key:"webFormRef",ref:C,rules:A,model:f.value,"require-asterisk-position":"right"},{default:t(()=>[n.value?(o(),r(D,{key:0,label:c.$t("views.document.form.sourceUrl.label"),prop:"sourceUrl"},{default:t(()=>[l(V,{modelValue:f.value.sourceUrl,"onUpdate:modelValue":E[0]||(E[0]=O=>f.value.sourceUrl=O),placeholder:c.$t("views.document.form.sourceUrl.placeholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):!n.value&&U.value===1?(o(),r(D,{key:1,label:c.$t("views.document.form.sourceUrl.label"),prop:"sourceUrl"},{default:t(()=>[l(V,{modelValue:f.value.sourceUrl,"onUpdate:modelValue":E[1]||(E[1]=O=>f.value.sourceUrl=O),placeholder:c.$t("views.document.form.sourceUrl.requiredMessage")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):k("",!0),U.value===1?(o(),r(D,{key:2,label:c.$t("views.document.form.selector.label")},{default:t(()=>[l(V,{modelValue:f.value.selector,"onUpdate:modelValue":E[2]||(E[2]=O=>f.value.selector=O),placeholder:c.$t("views.document.form.selector.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):k("",!0),n.value?k("",!0):(o(),r(D,{key:3},{label:t(()=>[M("div",jt,[M("span",qt,s(c.$t("views.document.form.hitHandlingMethod.label")),1),l(ae,{effect:"dark",content:c.$t("views.document.form.hitHandlingMethod.tooltip"),placement:"right"},{default:t(()=>[l(ie,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:t(()=>[l(L,{modelValue:f.value.hitHandlingMethod,"onUpdate:modelValue":E[3]||(E[3]=O=>f.value.hitHandlingMethod=O),class:"radio-block mt-4"},{default:t(()=>[(o(!0),Q(re,null,Se(a(he),(O,ye)=>(o(),r(de,{key:ye,value:ye},{default:t(()=>[d(s(c.$t(O)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})),!n.value&&f.value.hitHandlingMethod==="directly_return"?(o(),r(D,{key:4,prop:"directlyReturnSimilarity"},{default:t(()=>[M("div",Qt,[M("span",null,s(c.$t("views.document.form.similarity.label")),1),l(ee,{modelValue:f.value.directlyReturnSimilarity,"onUpdate:modelValue":E[4]||(E[4]=O=>f.value.directlyReturnSimilarity=O),min:0,max:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",size:"small",class:"ml-4 mr-4"},null,8,["modelValue"]),M("span",null,s(c.$t("views.document.form.similarity.placeholder")),1)])]),_:1})):k("",!0)]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),Yt="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.833496%203.33333C0.833496%202.8731%201.20659%202.5%201.66683%202.5H8.6518C8.96744%202.5%209.256%202.67834%209.39716%202.96066L10.0002%204.16667H18.3335C18.7937%204.16667%2019.1668%204.53976%2019.1668%205V16.6667C19.1668%2017.1269%2018.7937%2017.5%2018.3335%2017.5H1.66683C1.20659%2017.5%200.833496%2017.1269%200.833496%2016.6667V3.33333Z'%20fill='%23FFA53D'/%3e%3cpath%20d='M0.833496%204.99999C0.833496%204.53975%201.20659%204.16666%201.66683%204.16666H18.3335C18.7937%204.16666%2019.1668%204.53975%2019.1668%204.99999V16.6667C19.1668%2017.1269%2018.7937%2017.5%2018.3335%2017.5H1.66683C1.20659%2017.5%200.833496%2017.1269%200.833496%2016.6667V4.99999Z'%20fill='%23FFC60A'/%3e%3c/svg%3e",Jt={class:"flex align-center"},Xt={class:"dialog-footer"},xt=fe({__name:"SelectKnowledgeDialog",props:{workspaceId:{type:String}},emits:["refresh"],setup(K,{expose:S,emit:R}){const i=Ce(),{params:{id:$}}=i,{user:j}=Qe(),w=K,C=le(()=>i.path.includes("shared")?"systemShare":i.path.includes("resource-management")?"systemManage":"workspace"),p=R,n=T(!1),f=T(!1),B=T([]),U=T([]),y=T({selectKnowledge:""}),A={children:"children",label:"name",isLeaf:c=>c.resourceType?c.resourceType!=="folder":c.workspaceId==="None",disabled:(c,E)=>c.id===$||c.resourceType==="folder"&&(E==null?void 0:E.isLeaf)},I=async(c,E)=>{if(c.isLeaf)return E([]);const V=c.level===0?j.getWorkspaceId():c.data.id,D=C.value==="systemManage"?{workspaceId:w.workspaceId,folderId:c.level===0?w.workspaceId:c.data.id}:{folderId:V};await H({type:"knowledge",systemType:C.value}).getKnowledgeList(D,n).then(ie=>{E(ie.data)})};qe(f,c=>{c||(y.value.selectKnowledge="",B.value=[],U.value=[])});const Y=c=>{U.value=c,f.value=!0},se=()=>{H({type:"document",systemType:C.value}).putMigrateMulDocument($,y.value.selectKnowledge,U.value,n).then(()=>{p("refresh"),f.value=!1})};return S({open:Y}),(c,E)=>{const V=h("KnowledgeIcon"),D=h("el-avatar"),ie=h("el-tree-select"),ae=h("el-form-item"),de=h("el-form"),L=h("el-button"),ee=h("el-dialog");return o(),r(ee,{title:`${c.$t("views.document.migrateDocument")}`,modelValue:f.value,"onUpdate:modelValue":E[2]||(E[2]=q=>f.value=q),width:"600",class:"select-knowledge-dialog","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[M("span",Xt,[l(L,{onClick:E[1]||(E[1]=W(q=>f.value=!1,["prevent"]))},{default:t(()=>[d(s(c.$t("common.cancel")),1)]),_:1}),l(L,{type:"primary",onClick:se,disabled:!y.value.selectKnowledge||n.value},{default:t(()=>[d(s(c.$t("common.confirm")),1)]),_:1},8,["disabled"])])]),default:t(()=>[l(de,{ref:"FormRef",model:y.value,"label-position":"top","require-asterisk-position":"right"},{default:t(()=>[l(ae,{label:c.$t("views.chatLog.selectKnowledge"),required:""},{default:t(()=>[l(ie,{modelValue:y.value.selectKnowledge,"onUpdate:modelValue":E[0]||(E[0]=q=>y.value.selectKnowledge=q),props:A,"node-key":"id",lazy:"",load:I,placeholder:c.$t("views.chatLog.selectKnowledgePlaceholder")},{default:t(({data:q})=>[M("div",Jt,[q.resourceType!=="folder"?(o(),r(V,{key:0,class:"mr-12",size:20,type:q.type},null,8,["type"])):(o(),r(D,{key:1,class:"mr-12",shape:"square",size:20,style:{background:"none"}},{default:t(()=>E[3]||(E[3]=[M("img",{src:Yt,style:{width:"100%"},alt:""},null,-1)])),_:1,__:[3]})),d(" "+s(q.name),1)])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),N={EMBEDDING:1,GENERATE_PROBLEM:2,SYNC:3},g={PENDING:"0",STARTED:"1",SUCCESS:"2",FAILURE:"3",REVOKE:"4",REVOKED:"5",IGNORED:"n"};class je{constructor(S){Ke(this,"task_status");S||(S=""),S=S.split("").reverse().join(""),this.task_status={};for(const R in N){const i=N[R],$=i-1;this.task_status[i]=S[$]?S[$]:"n"}}toString(){const S=[];for(const R in N){const i=N[R];S.push(this.task_status[i])}return S.reverse().join("")}}const el=fe({__name:"StatusTable",props:{status:{},statusMeta:{},stateMap:{},taskTypeMap:{}},setup(K){const S=K,R=w=>{const C=new je(w.status);return Object.keys(N).map(p=>{const n=N[p];return{[n]:{[C.task_status[n]]:w.count}}}).reduce((p,n)=>({...p,...n}),{})},i=(w,C)=>w==null&&C?C:C==null&&w?w:typeof w=="object"&&typeof C=="object"?Oe.mergeWith(w,C,i):w+C,$=le(()=>(S.statusMeta.aggs?S.statusMeta.aggs:[]).map(w=>R(w)).reduce((w,C)=>Oe.mergeWith(w,C,i),{})),j=le(()=>Object.keys(N).map(w=>{const C=N[w],p=new je(S.status);return{type:C,state:p.task_status[C],aggs:$.value[C],time:S.statusMeta.state_time[C]}}).filter(w=>w.state!==g.IGNORED));return(w,C)=>{const p=h("SuccessFilled"),n=h("el-icon"),f=h("el-text"),B=h("CircleCloseFilled"),U=h("Loading");return o(!0),Q(re,null,Se(j.value,y=>(o(),Q("div",{key:y.type},[M("span",null,s(w.taskTypeMap[y.type])+"ï¼š",1),M("span",null,[y.state===a(g).SUCCESS||y.state===a(g).REVOKED?(o(),r(f,{key:0},{default:t(()=>[l(n,{class:"color-success"},{default:t(()=>[l(p)]),_:1}),d(" "+s(w.stateMap[y.state](y.type)),1)]),_:2},1024)):y.state===a(g).FAILURE?(o(),r(f,{key:1},{default:t(()=>[l(n,{class:"color-danger"},{default:t(()=>[l(B)]),_:1}),d(" "+s(w.stateMap[y.state](y.type)),1)]),_:2},1024)):y.state===a(g).STARTED?(o(),r(f,{key:2},{default:t(()=>[l(n,{class:"is-loading color-primary"},{default:t(()=>[l(U)]),_:1}),d(" "+s(w.stateMap[y.state](y.type)),1)]),_:2},1024)):y.state===a(g).PENDING?(o(),r(f,{key:3},{default:t(()=>[l(n,{class:"is-loading color-primary"},{default:t(()=>[l(U)]),_:1}),d(" "+s(w.stateMap[y.state](y.type)),1)]),_:2},1024)):y.state===a(g).REVOKE?(o(),r(f,{key:4},{default:t(()=>[l(n,{class:"is-loading color-primary"},{default:t(()=>[l(U)]),_:1}),d(" "+s(w.stateMap[y.state](y.type)),1)]),_:2},1024)):k("",!0)]),M("span",{class:"ml-8 lighter",style:Tt({color:[a(g).FAILURE,a(g).REVOKED].includes(y.state)?"#F54A45":""})},s(w.$t("views.document.fileStatus.finish"))+" "+s(Object.keys(y.aggs?y.aggs:{}).filter(A=>A==a(g).SUCCESS).map(A=>y.aggs[A]).reduce((A,I)=>A+I,0))+"/"+s(Object.values(y.aggs?y.aggs:{}).reduce((A,I)=>A+I,0)),5),l(f,{type:"info",class:"ml-12"},{default:t(()=>{var A;return[d(s(y.time?(A=y.time[y.state==a(g).REVOKED?a(g).REVOKED:a(g).PENDING])==null?void 0:A.substring(0,19):void 0),1)]}),_:2},1024)]))),128)}}}),tl=fe({__name:"Status",props:{status:{},statusMeta:{}},setup(K){const S=K,R=T(!1),i=[g.REVOKE,g.STARTED,g.PENDING,g.FAILURE,g.REVOKED,g.SUCCESS],$=le(()=>{let p={key:0,value:""};for(const n in i){const f=i[n],B=S.status.indexOf(f);if(B>-1){p={key:S.status.length-B,value:f};break}}return p}),j={[N.EMBEDDING]:v("views.document.fileStatus.EMBEDDING"),[N.GENERATE_PROBLEM]:v("views.document.fileStatus.GENERATE"),[N.SYNC]:v("views.document.fileStatus.SYNC")},w={[N.EMBEDDING]:v("views.knowledge.setting.vectorization"),[N.GENERATE_PROBLEM]:v("views.document.generateQuestion.title"),[N.SYNC]:v("views.knowledge.setting.sync")},C={[g.PENDING]:p=>v("views.document.fileStatus.PENDING"),[g.STARTED]:p=>j[p],[g.REVOKE]:p=>v("views.document.fileStatus.REVOKE"),[g.REVOKED]:p=>v("views.document.fileStatus.SUCCESS"),[g.FAILURE]:p=>v("views.document.fileStatus.FAILURE"),[g.SUCCESS]:p=>v("views.document.fileStatus.SUCCESS")};return(p,n)=>{const f=h("SuccessFilled"),B=h("el-icon"),U=h("el-text"),y=h("CircleCloseFilled"),A=h("Loading"),I=h("el-popover");return o(),r(I,{visible:R.value,"onUpdate:visible":n[0]||(n[0]=Y=>R.value=Y),placement:"top",trigger:"hover","popper-style":{width:"auto"}},{default:t(()=>[R.value?(o(),r(el,{key:0,status:p.status,statusMeta:p.statusMeta,taskTypeMap:w,stateMap:C},null,8,["status","statusMeta"])):k("",!0)]),reference:t(()=>{var Y,se,c,E,V,D;return[((Y=$.value)==null?void 0:Y.value)===a(g).SUCCESS||((se=$.value)==null?void 0:se.value)===a(g).REVOKED?(o(),r(U,{key:0},{default:t(()=>[l(B,{class:"color-success"},{default:t(()=>[l(f)]),_:1}),d(" "+s(C[$.value.value]($.value.key)),1)]),_:1})):((c=$.value)==null?void 0:c.value)===a(g).FAILURE?(o(),r(U,{key:1},{default:t(()=>[l(B,{class:"color-danger"},{default:t(()=>[l(y)]),_:1}),d(" "+s(C[$.value.value]($.value.key)),1)]),_:1})):((E=$.value)==null?void 0:E.value)===a(g).STARTED?(o(),r(U,{key:2},{default:t(()=>[l(B,{class:"is-loading color-primary"},{default:t(()=>[l(A)]),_:1}),d(" "+s(C[$.value.value]($.value.key)),1)]),_:1})):((V=$.value)==null?void 0:V.value)===a(g).PENDING?(o(),r(U,{key:3},{default:t(()=>[l(B,{class:"is-loading color-primary"},{default:t(()=>[l(A)]),_:1}),d(" "+s(C[$.value.value]($.value.key)),1)]),_:1})):((D=$.value)==null?void 0:D.value)===a(g).REVOKE?(o(),r(U,{key:4},{default:t(()=>[l(B,{class:"is-loading color-primary"},{default:t(()=>[l(A)]),_:1}),d(" "+s(C[$.value.value]($.value.key)),1)]),_:1})):k("",!0)]}),_:1},8,["visible"])}}}),ll={class:"dialog-footer"},al=fe({__name:"EmbeddingContentDialog",setup(K,{expose:S}){const R=T(!1),i=T("error"),$={all:["0","1","2","3","4","5","n"],error:["0","1","3","4","5","n"]},j=T(),w=()=>{j.value&&j.value($[i.value]),p()},C=n=>{j.value=n,R.value=!0},p=()=>{j.value=void 0,R.value=!1};return S({open:C,close:p}),(n,f)=>{const B=h("el-radio"),U=h("el-radio-group"),y=h("el-button"),A=h("el-dialog");return o(),r(A,{modelValue:R.value,"onUpdate:modelValue":f[1]||(f[1]=I=>R.value=I),title:n.$t("components.selectParagraph.title"),"before-close":p,width:"450"},{footer:t(()=>[M("div",ll,[l(y,{onClick:p},{default:t(()=>[d(s(n.$t("common.cancel")),1)]),_:1}),l(y,{type:"primary",onClick:w},{default:t(()=>[d(s(n.$t("common.submit")),1)]),_:1})])]),default:t(()=>[l(U,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=I=>i.value=I),class:"radio-block"},{default:t(()=>[l(B,{value:"error",size:"large"},{default:t(()=>[d(s(n.$t("components.selectParagraph.error")),1)]),_:1}),l(B,{value:"all",size:"large"},{default:t(()=>[d(s(n.$t("components.selectParagraph.all")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","title"])}}}),nl={class:"document p-16-24"},ol={class:"mb-16"},sl={class:"main-calc-height"},il={class:"p-24"},ul={class:"flex-between"},cl={key:1},rl={key:0,class:"flex align-center"},dl={class:"color-secondary"},ml={key:1,class:"flex align-center"},pl={class:"color-secondary"},vl={class:"mr-4"},fl={key:0,class:"mr-4"},yl={class:"mr-4"},gl={class:"mr-4"},_l={class:"mr-4"},hl={class:"mr-4"},kl={key:0,class:"mul-operation w-full flex"},ce="documents",wl=fe({__name:"index",setup(K){const S=Ce(),R=Rt(),{params:{id:i,folderId:$,type:j}}=S,{common:w}=Qe();Nt(()=>{w.savePage(ce,null),w.saveCondition(ce,null)}),It(e=>{e.name!=="Paragraph"?(w.savePage(ce,null),w.saveCondition(ce,null)):w.saveCondition(ce,{filterText:V.value,filterMethod:D.value})});const C=le(()=>$==="share"),p=le(()=>S.path.includes("shared")?"systemShare":S.path.includes("resource-management")?"systemManage":S.path.includes("share/")?"workspaceShare":"workspace"),n=le(()=>Ut.knowledge[p.value]),f=e=>n.value.doc_edit(e)||(L==null?void 0:L.value.type)===1&&n.value.doc_sync(e)||(L==null?void 0:L.value.type)===2&&n.value.doc_sync(e)||n.value.doc_delete(e),B=e=>n.value.doc_generate(e)||n.value.doc_migrate(e)||n.value.doc_export(e)||n.value.doc_download(e)||n.value.doc_delete(e),U=e=>n.value.doc_edit(e)||n.value.doc_generate(e)||n.value.doc_migrate(e)||n.value.doc_export(e)||n.value.doc_delete(e),y=(e,u)=>{const _=e.split("").reverse();return u-1>_.length+1?"n":_[u-1]},A=le(()=>w.paginationConfig[ce]),I=le(()=>w.search[ce]),Y=T(),se=T(),c=T(!1);let E;const V=T(""),D=T({}),ie=T(""),ae=T([]),de=T(null),L=T({}),ee=T({current_page:1,page_size:10,total:0}),q=T(),ne=T(),G=T([]),O=T(""),ye=T(),We=()=>{L.value.workFlow?R.push({path:`/knowledge/import/workflow/${$}`,query:{id:i}}):ve(v("common.tip"),v("views.document.tip.toImportDocConfirm"),{cancelButtonText:v("common.close"),showConfirmButton:!1,type:"warning"}).then(()=>{}).catch(()=>{})},$e=e=>{H({type:"document",systemType:p.value}).exportDocument(e.name,e.knowledgeId,e.id,c).then(()=>{Z(v("common.exportSuccess"))})},De=e=>{H({type:"document",systemType:p.value}).exportDocumentZip(e.name,e.knowledgeId,e.id,c).then(()=>{Z(v("common.exportSuccess"))})};function Me(e){const u=[];G.value.map(b=>{b&&u.push(b.id)});const _={idList:u,type:e};H({type:"document",systemType:p.value}).putBatchCancelTask(i,_,c).then(()=>{var b;Z(v("views.document.tip.cancelSuccess")),(b=ne.value)==null||b.clearSelection()})}function Ze(){var e;(e=ne.value)==null||e.clearSelection()}function ke(e){const u=[];e?u.push(e.id):G.value.map(_=>{_&&u.push(_.id)}),ye.value.open(u)}function we(e){D.value[e.attr]=e.command,e.attr=="status"&&(D.value.task_type=e.task_type),z()}function J(e,u,_){return{attr:e,command:u,task_type:_}}const ge=(e,u)=>{H({type:"document",systemType:p.value}).putCancelTask(i,e.id,{type:u}).then(()=>{Z(v("views.document.tip.sendMessage"))})};function Ye(){O.value=v("views.document.importDocument"),q.value.open()}function Te(e){O.value=v("common.setting"),q.value.open(e)}const Je=e=>{G.value=e};function Xe(){O.value=v("common.setting");const e=G.value.map(u=>u.id);q.value.open(null,e)}const xe=()=>{E=setInterval(()=>{z(!0)},6e3)},et=()=>{E&&clearInterval(E)};function tt(e){+e.type==1?at(e):lt(e)}function lt(e){ve(v("views.document.sync.confirmTitle"),v("views.document.sync.confirmMessage1"),{confirmButtonText:v("views.document.sync.label"),confirmButtonClass:"danger"}).then(()=>{H({type:"document",systemType:p.value}).putLarkDocumentSync(i,e.id).then(()=>{z()})}).catch(()=>{})}function at(e){var u;(u=e.meta)!=null&&u.sourceUrl?ve(v("views.document.sync.confirmTitle"),v("views.document.sync.confirmMessage1"),{confirmButtonText:v("views.document.sync.label"),confirmButtonClass:"danger"}).then(()=>{H({type:"document",systemType:p.value}).putDocumentSync(e.knowledgeId,e.id).then(()=>{z()})}).catch(()=>{}):ve(v("common.tip"),v("views.document.sync.confirmMessage2"),{confirmButtonText:v("common.confirm"),type:"warning"}).then(()=>{}).catch(()=>{})}function Re(e){var _;const u=b=>H({type:"document",systemType:p.value}).putDocumentRefresh(e.knowledgeId,e.id,b).then(()=>{z()});(_=Y.value)==null||_.open(u)}function nt(e,u){u&&u.type==="selection"||R.push({path:`/paragraph/${i}/${e.id}`,query:{from:p.value,isShared:C.value?"true":"false"}})}function ot(e){alert(1),c.value=!0;const u=[{name:e}];H({type:"document",systemType:p.value}).putMulDocument(i,u).then(()=>{z(),Z(v("common.createSuccess"))}).catch(()=>{c.value=!1})}function st(){const e=[];G.value.map(u=>{u&&e.push(u.id)}),H({type:"document",systemType:p.value}).putMulSyncDocument(i,e,c).then(()=>{Z(v("views.document.sync.successMessage")),z()})}function it(){ve(`${v("views.document.delete.confirmTitle1")} ${G.value.length} ${v("views.document.delete.confirmTitle2")}`,v("views.document.delete.confirmMessage"),{confirmButtonText:v("common.confirm"),confirmButtonClass:"danger"}).then(()=>{const e=[];G.value.map(u=>{u&&e.push(u.id)}),H({type:"document",systemType:p.value}).delMulDocument(i,e,c).then(()=>{var u;Z(v("views.document.delete.successMessage")),(u=ne.value)==null||u.clearSelection(),z()})}).catch(()=>{})}function ut(){var _;const e=G.value.map(b=>b.id),u=b=>{H({type:"document",systemType:p.value}).putBatchRefresh(i,e,b,c).then(()=>{var X;Z(v("views.document.tip.vectorizationSuccess")),(X=ne.value)==null||X.clearSelection()})};(_=Y.value)==null||_.open(u)}function ct(e){H({type:"document",systemType:p.value}).getDownloadSourceFile(i,e.id,e.name).then(()=>{z()})}function Ne(e){ve(`${v("views.document.delete.confirmTitle3")} ${e.name} ?`,`${v("views.document.delete.confirmMessage1")} ${e.paragraphCount} ${v("views.document.delete.confirmMessage2")}`,{confirmButtonText:v("common.confirm"),confirmButtonClass:"danger"}).then(()=>{H({type:"document",systemType:p.value}).delDocument(i,e.id,c).then(()=>{Z(v("common.deleteSuccess")),z()})}).catch(()=>{})}function Ie(e,u,_){H({type:"document",systemType:p.value}).putDocument(i,e,u,c).then(b=>{const X=ae.value.findIndex(ue=>ue.id===e);return ae.value.splice(X,1,b.data),Z(_),!0}).catch(()=>!1)}async function rt(e){const u={isActive:!e.isActive},_=e.isActive?v("common.status.disableSuccess"):v("common.status.enableSuccess");await Ie(e.id,u,_)}function dt(e,u){e?Ie(u,{name:e},v("common.modifySuccess")):Ht(v("views.document.tip.nameMessage"))}function mt(e){de.value=e.id}function pt(){de.value=null}function vt(){ee.value.current_page=1,z()}function ft({prop:e,order:u}){ie.value=u==="ascending"?e:`-${e}`,z()}function z(e){const u={...V.value&&{name:V.value},...D.value,orderBy:ie.value,folderId:$};console.log("getList",u),H({type:"document",isShared:C.value,systemType:p.value}).getDocumentPage(i,ee.value,u,e?void 0:c).then(_=>{ae.value=_.data.records,console.log(ae.value),ee.value.total=_.data.total})}function yt(){H({type:"knowledge",isShared:C.value,systemType:p.value}).getKnowledgeDetail(i,c).then(e=>{L.value=e.data})}function gt(){var e;(e=ne.value)==null||e.clearSelection(),z()}function Ue(){ee.value.current_page=1,z()}const Ae=T();function Ee(e){const u=[];e?u.push(e.id):G.value.map(_=>{_&&u.push(_.id)}),Ae.value.open(u,"document")}return At(()=>{yt(),A.value&&(ee.value=A.value),I.value&&(V.value=I.value.filterText,D.value=I.value.filterMethod),z(),xe()}),Vt(()=>{et()}),(e,u)=>{var Be;const _=h("el-button"),b=h("el-dropdown-item"),X=h("el-dropdown-menu"),ue=h("el-dropdown"),_t=h("el-input"),te=h("el-table-column"),be=h("Filter"),me=h("el-icon"),ht=h("SuccessFilled"),kt=h("el-switch"),wt=h("el-divider"),Ve=h("Close"),pe=h("el-tooltip"),Et=h("Download"),bt=h("el-card"),Ct=h("el-text"),St=Bt("loading");return o(),Q("div",nl,[M("h2",ol,s(e.$t("common.fileUpload.document")),1),l(bt,{style:{"--el-card-padding":"0"}},{default:t(()=>{var _e,Le,Ge,Fe;return[M("div",sl,[M("div",il,[M("div",ul,[M("div",null,[C.value?k("",!0):(o(),Q(re,{key:0},[((_e=L.value)==null?void 0:_e.type)===0&&n.value.doc_create(a(i))?(o(),r(_,{key:0,type:"primary",onClick:u[0]||(u[0]=m=>a(R).push({path:`/knowledge/document/upload/${a($)}/${a(j)}`,query:{id:a(i)}}))},{default:t(()=>[d(s(e.$t("views.document.uploadDocument")),1)]),_:1})):k("",!0),((Le=L.value)==null?void 0:Le.type)===1&&n.value.doc_create(a(i))?(o(),r(_,{key:1,type:"primary",onClick:Ye},{default:t(()=>[d(s(e.$t("views.document.importDocument")),1)]),_:1})):k("",!0),((Ge=L.value)==null?void 0:Ge.type)===2&&n.value.doc_create(a(i))?(o(),r(_,{key:2,type:"primary",onClick:We},{default:t(()=>[d(s(e.$t("views.document.importDocument")),1)]),_:1})):k("",!0),n.value.doc_vector(a(i))?(o(),r(_,{key:3,onClick:ut,disabled:G.value.length===0},{default:t(()=>[d(s(e.$t("views.knowledge.setting.vectorization")),1)]),_:1},8,["disabled"])):k("",!0),n.value.doc_generate(a(i))?(o(),r(_,{key:4,onClick:u[1]||(u[1]=m=>Ee()),disabled:G.value.length===0},{default:t(()=>[d(s(e.$t("views.document.generateQuestion.title")),1)]),_:1},8,["disabled"])):k("",!0),n.value.doc_edit(a(i))?(o(),r(_,{key:5,onClick:Xe,disabled:G.value.length===0},{default:t(()=>[d(s(e.$t("common.setting")),1)]),_:1},8,["disabled"])):k("",!0),f(a(i))?(o(),r(ue,{key:6},{dropdown:t(()=>[l(X,null,{default:t(()=>{var m;return[n.value.doc_migrate(a(i))?(o(),r(b,{key:0,onClick:u[2]||(u[2]=oe=>ke()),disabled:G.value.length===0},{default:t(()=>[d(s(e.$t("views.document.setting.migration")),1)]),_:1},8,["disabled"])):k("",!0),((m=L.value)==null?void 0:m.type)===1&&n.value.doc_sync(a(i))?(o(),r(b,{key:1,divided:"",onClick:st,disabled:G.value.length===0},{default:t(()=>[d(s(e.$t("views.document.syncDocument")),1)]),_:1},8,["disabled"])):k("",!0),n.value.doc_delete(a(i))?(o(),r(b,{key:2,divided:"",onClick:it,disabled:G.value.length===0},{default:t(()=>[d(s(e.$t("common.delete")),1)]),_:1},8,["disabled"])):k("",!0)]}),_:1})]),default:t(()=>[l(_,{class:"ml-12 mr-12"},{default:t(()=>[l(P,{iconName:"app-more"})]),_:1})]),_:1})):k("",!0)],64))]),l(_t,{modelValue:V.value,"onUpdate:modelValue":u[3]||(u[3]=m=>V.value=m),placeholder:e.$t("common.searchBar.placeholder"),"prefix-icon":"Search",class:"w-240",onChange:z,clearable:""},null,8,["modelValue","placeholder"])]),Lt((o(),r(Gt,{ref_key:"multipleTableRef",ref:ne,class:"mt-16",data:ae.value,"pagination-config":ee.value,"quick-create":((Fe=L.value)==null?void 0:Fe.type)===0&&n.value.doc_create(a(i))&&!C.value,onSizeChange:vt,onChangePage:z,onCellMouseEnter:mt,onCellMouseLeave:pt,onCreatQuick:ot,onRowClick:nt,onSelectionChange:Je,onSortChange:ft,"row-key":m=>m.id,storeKey:ce},{default:t(()=>[C.value?k("",!0):(o(),r(te,{key:0,type:"selection",width:"55","reserve-selection":!0})),l(te,{prop:"name",label:e.$t("views.document.table.name"),"min-width":"280"},{default:t(({row:m})=>[C.value?(o(),Q("span",cl,s(m.name),1)):(o(),r(Ft,{key:0,onChange:oe=>dt(oe,m.id),data:m.name,showEditIcon:m.id===de.value},null,8,["onChange","data","showEditIcon"]))]),_:1},8,["label"]),l(te,{prop:"status",label:e.$t("views.document.fileStatus.label"),width:"130"},{header:t(()=>[M("div",null,[M("span",null,s(e.$t("views.document.fileStatus.label")),1),l(ue,{trigger:"click",onCommand:we},{dropdown:t(()=>[l(X,{style:{width:"100px"}},{default:t(()=>[l(b,{class:x([D.value.status?"":"is-active","justify-center"]),command:J("status","")},{default:t(()=>[d(s(e.$t("views.document.table.all")),1)]),_:1},8,["class","command"]),l(b,{class:x([D.value.status===a(g).SUCCESS?"is-active":"","justify-center"]),command:J("status",a(g).SUCCESS)},{default:t(()=>[d(s(e.$t("views.document.fileStatus.SUCCESS")),1)]),_:1},8,["class","command"]),l(b,{class:x([D.value.status===a(g).FAILURE?"is-active":"","justify-center"]),command:J("status",a(g).FAILURE)},{default:t(()=>[d(s(e.$t("views.document.fileStatus.FAILURE")),1)]),_:1},8,["class","command"]),l(b,{class:x([D.value.status===a(g).STARTED&&D.value.task_type==a(N).EMBEDDING?"is-active":"","justify-center"]),command:J("status",a(g).STARTED,a(N).EMBEDDING)},{default:t(()=>[d(s(e.$t("views.document.fileStatus.EMBEDDING")),1)]),_:1},8,["class","command"]),l(b,{class:x([D.value.status===a(g).PENDING?"is-active":"","justify-center"]),command:J("status",a(g).PENDING)},{default:t(()=>[d(s(e.$t("views.document.fileStatus.PENDING")),1)]),_:1},8,["class","command"]),l(b,{class:x([D.value.status===a(g).STARTED&&D.value.task_type===a(N).GENERATE_PROBLEM?"is-active":"","justify-center"]),command:J("status",a(g).STARTED,a(N).GENERATE_PROBLEM)},{default:t(()=>[d(s(e.$t("views.document.fileStatus.GENERATE")),1)]),_:1},8,["class","command"])]),_:1})]),default:t(()=>[l(_,{style:{"margin-top":"1px"},link:"",type:D.value.status?"primary":""},{default:t(()=>[l(me,null,{default:t(()=>[l(be)]),_:1})]),_:1},8,["type"])]),_:1})])]),default:t(({row:m})=>[l(tl,{status:m.status,"status-meta":m.statusMeta},null,8,["status","status-meta"])]),_:1},8,["label"]),l(te,{prop:"charLength",label:e.$t("views.document.table.char_length"),align:"right","min-width":"90",sortable:""},{default:t(({row:m})=>[d(s(a(Pt)(m.charLength)),1)]),_:1},8,["label"]),l(te,{prop:"paragraphCount",label:e.$t("views.document.table.paragraph"),align:"right","min-width":"90",sortable:""},null,8,["label"]),l(te,{width:"130"},{header:t(()=>[M("div",null,[M("span",null,s(e.$t("views.document.enableStatus.label")),1),l(ue,{trigger:"click",onCommand:we},{dropdown:t(()=>[l(X,{style:{width:"100px"}},{default:t(()=>[l(b,{class:x([D.value.isActive===""?"is-active":"","justify-center"]),command:J("isActive","")},{default:t(()=>[d(s(e.$t("views.document.table.all")),1)]),_:1},8,["class","command"]),l(b,{class:x([D.value.isActive===!0?"is-active":"","justify-center"]),command:J("isActive",!0)},{default:t(()=>[d(s(e.$t("views.document.enableStatus.enable")),1)]),_:1},8,["class","command"]),l(b,{class:x([D.value.isActive===!1?"is-active":"","justify-center"]),command:J("isActive",!1)},{default:t(()=>[d(s(e.$t("views.document.enableStatus.close")),1)]),_:1},8,["class","command"])]),_:1})]),default:t(()=>[l(_,{style:{"margin-top":"1px"},link:"",type:D.value.isActive?"primary":""},{default:t(()=>[l(me,null,{default:t(()=>[l(be)]),_:1})]),_:1},8,["type"])]),_:1})])]),default:t(({row:m})=>[m.isActive?(o(),Q("div",rl,[l(me,{class:"color-success mr-8",style:{"font-size":"16px"}},{default:t(()=>[l(ht)]),_:1}),M("span",dl,s(e.$t("common.status.enabled")),1)])):(o(),Q("div",ml,[l(P,{iconName:"app-disabled",class:"color-secondary mr-8"}),M("span",pl,s(e.$t("common.status.disabled")),1)]))]),_:1}),l(te,{width:"170"},{header:t(()=>[M("div",null,[M("span",null,s(e.$t("views.document.form.hitHandlingMethod.label")),1),l(ue,{trigger:"click",onCommand:we},{dropdown:t(()=>[l(X,{style:{width:"150px"}},{default:t(()=>[l(b,{class:x([D.value.hitHandlingMethod?"":"is-active","justify-center"]),command:J("hitHandlingMethod","")},{default:t(()=>[d(s(e.$t("views.document.table.all")),1)]),_:1},8,["class","command"]),(o(!0),Q(re,null,Se(a(he),(m,oe)=>(o(),r(b,{key:oe,class:x([D.value.hitHandlingMethod===oe?"is-active":"","justify-center"]),command:J("hitHandlingMethod",oe)},{default:t(()=>[d(s(e.$t(m)),1)]),_:2},1032,["class","command"]))),128))]),_:1})]),default:t(()=>[l(_,{style:{"margin-top":"1px"},link:"",type:D.value.hitHandlingMethod?"primary":""},{default:t(()=>[l(me,null,{default:t(()=>[l(be)]),_:1})]),_:1},8,["type"])]),_:1})])]),default:t(({row:m})=>[d(s(e.$t(a(he)[m.hitHandlingMethod])),1)]),_:1}),l(te,{prop:"createTime",label:e.$t("common.createTime"),width:"175",sortable:""},{default:t(({row:m})=>[d(s(a(ze)(m.createTime)),1)]),_:1},8,["label"]),l(te,{prop:"updateTime",label:e.$t("views.document.table.updateTime"),width:"175",sortable:""},{default:t(({row:m})=>[d(s(a(ze)(m.updateTime)),1)]),_:1},8,["label"]),C.value?k("",!0):(o(),r(te,{key:1,label:e.$t("common.operation"),align:"left",width:"160",fixed:"right"},{default:t(({row:m})=>{var oe,Pe,He;return[M("span",{onClick:u[4]||(u[4]=W(()=>{},["stop"]))},[n.value.doc_edit(a(i))?(o(),r(kt,{key:0,loading:c.value,size:"small",modelValue:m.isActive,"onUpdate:modelValue":F=>m.isActive=F,"before-change":()=>rt(m)},null,8,["loading","modelValue","onUpdate:modelValue","before-change"])):k("",!0)]),l(wt,{direction:"vertical"}),((oe=L.value)==null?void 0:oe.type)===0||((Pe=L.value)==null?void 0:Pe.type)===2?(o(),Q(re,{key:0},[[a(g).STARTED,a(g).PENDING].includes(y(m.status,a(N).EMBEDDING))?(o(),r(pe,{key:0,effect:"dark",content:e.$t("views.document.setting.cancelVectorization"),placement:"top"},{default:t(()=>[M("span",vl,[n.value.doc_vector(a(i))?(o(),r(_,{key:0,type:"primary",text:"",onClick:W(F=>ge(m,a(N).EMBEDDING),["stop"])},{default:t(()=>[l(me,null,{default:t(()=>[l(Ve)]),_:1})]),_:2},1032,["onClick"])):k("",!0)])]),_:2},1032,["content"])):(o(),r(pe,{key:1,effect:"dark",content:e.$t("views.knowledge.setting.vectorization"),placement:"top"},{default:t(()=>[n.value.doc_vector(a(i))?(o(),Q("span",fl,[l(_,{type:"primary",text:"",onClick:W(F=>Re(m),["stop"])},{default:t(()=>[l(P,{iconName:"app-document-refresh",style:{"font-size":"16px"}})]),_:2},1032,["onClick"])])):k("",!0)]),_:2},1032,["content"])),n.value.doc_edit(a(i))?(o(),r(pe,{key:2,effect:"dark",content:e.$t("common.setting"),placement:"top"},{default:t(()=>[M("span",yl,[l(_,{type:"primary",text:"",onClick:W(F=>Te(m),["stop"])},{default:t(()=>[l(P,{iconName:"app-setting"})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])):k("",!0),M("span",{onClick:u[5]||(u[5]=W(()=>{},["stop"]))},[B(a(i))?(o(),r(ue,{key:0,trigger:"click"},{dropdown:t(()=>[l(X,null,{default:t(()=>[[a(g).STARTED,a(g).PENDING].includes(y(m.status,a(N).GENERATE_PROBLEM))&&n.value.doc_generate(a(i))?(o(),r(b,{key:0,onClick:F=>ge(m,a(N).GENERATE_PROBLEM)},{default:t(()=>[l(P,{iconName:"app-generate-question",class:"color-secondary"}),d(" "+s(e.$t("views.document.setting.cancelGenerateQuestion")),1)]),_:2},1032,["onClick"])):(o(),Q(re,{key:1},[n.value.doc_generate(a(i))?(o(),r(b,{key:0,onClick:F=>Ee(m)},{default:t(()=>[l(P,{iconName:"app-generate-question",class:"color-secondary"}),d(" "+s(e.$t("views.document.generateQuestion.title")),1)]),_:2},1032,["onClick"])):k("",!0)],64)),n.value.doc_migrate(a(i))?(o(),r(b,{key:2,onClick:F=>ke(m)},{default:t(()=>[l(P,{iconName:"app-migrate",class:"color-secondary"}),d(" "+s(e.$t("views.document.setting.migration")),1)]),_:2},1032,["onClick"])):k("",!0),n.value.doc_export(a(i))?(o(),r(b,{key:3,onClick:F=>$e(m)},{default:t(()=>[l(P,{iconName:"app-export",class:"color-secondary"}),d(" "+s(e.$t("views.document.setting.export"))+" Excel ",1)]),_:2},1032,["onClick"])):k("",!0),n.value.doc_export(a(i))?(o(),r(b,{key:4,onClick:F=>De(m)},{default:t(()=>[l(P,{iconName:"app-export",class:"color-secondary"}),d(" "+s(e.$t("views.document.setting.export"))+" Zip ",1)]),_:2},1032,["onClick"])):k("",!0),n.value.doc_download(a(i))?(o(),r(b,{key:5,onClick:W(F=>ct(m),["stop"])},{default:t(()=>[l(me,{class:"color-secondary"},{default:t(()=>[l(Et)]),_:1}),d(" "+s(e.$t("views.document.setting.download")),1)]),_:2},1032,["onClick"])):k("",!0),n.value.doc_delete(a(i))?(o(),r(b,{key:6,onClick:W(F=>Ne(m),["stop"])},{default:t(()=>[l(P,{iconName:"app-delete",class:"color-secondary"}),d(" "+s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),default:t(()=>[l(_,{text:"",type:"primary"},{default:t(()=>[l(P,{iconName:"app-more"})]),_:1})]),_:2},1024)):k("",!0)])],64)):k("",!0),((He=L.value)==null?void 0:He.type)===1?(o(),Q(re,{key:1},[n.value.sync(a(i))?(o(),r(pe,{key:0,effect:"dark",content:e.$t("views.knowledge.setting.sync"),placement:"top"},{default:t(()=>[M("span",gl,[l(_,{type:"primary",text:"",onClick:W(F=>tt(m),["stop"])},{default:t(()=>[l(P,{iconName:"app-sync"})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])):k("",!0),[a(g).STARTED,a(g).PENDING].includes(y(m.status,a(N).EMBEDDING))&&n.value.doc_vector(a(i))?(o(),r(pe,{key:1,effect:"dark",content:e.$t("views.document.setting.cancelVectorization"),placement:"top"},{default:t(()=>[M("span",_l,[l(_,{type:"primary",text:"",onClick:W(F=>ge(m,a(N).EMBEDDING),["stop"])},{default:t(()=>[l(me,null,{default:t(()=>[l(Ve)]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])):k("",!0),n.value.vector(a(i))?(o(),r(pe,{key:2,effect:"dark",content:e.$t("views.knowledge.setting.vectorization"),placement:"top"},{default:t(()=>[M("span",hl,[l(_,{type:"primary",text:"",onClick:W(F=>Re(m),["stop"])},{default:t(()=>[l(P,{iconName:"app-document-refresh",style:{"font-size":"16px"}})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])):k("",!0),M("span",{onClick:u[6]||(u[6]=W(()=>{},["stop"]))},[U(a(i))?(o(),r(ue,{key:0,trigger:"click"},{dropdown:t(()=>[l(X,null,{default:t(()=>[n.value.doc_edit(a(i))?(o(),r(b,{key:0,onClick:F=>Te(m)},{default:t(()=>[l(P,{iconName:"app-setting"}),d(" "+s(e.$t("common.setting")),1)]),_:2},1032,["onClick"])):k("",!0),n.value.doc_generate(a(i))&&[a(g).STARTED,a(g).PENDING].includes(y(m.status,a(N).GENERATE_PROBLEM))?(o(),r(b,{key:1,onClick:F=>ge(m,a(N).GENERATE_PROBLEM)},{default:t(()=>[l(P,{iconName:"app-generate-question"}),d(" "+s(e.$t("views.document.setting.cancelGenerateQuestion")),1)]),_:2},1032,["onClick"])):(o(),Q(re,{key:2},[n.value.doc_generate(a(i))?(o(),r(b,{key:0,onClick:F=>Ee(m)},{default:t(()=>[l(P,{iconName:"app-generate-question"}),d(" "+s(e.$t("views.document.generateQuestion.title")),1)]),_:2},1032,["onClick"])):k("",!0)],64)),n.value.doc_migrate(a(i))?(o(),r(b,{key:3,onClick:F=>ke(m)},{default:t(()=>[l(P,{iconName:"app-migrate"}),d(" "+s(e.$t("views.document.setting.migration"))+"-3 ",1)]),_:2},1032,["onClick"])):k("",!0),n.value.doc_export(a(i))?(o(),r(b,{key:4,onClick:F=>$e(m)},{default:t(()=>[l(P,{iconName:"app-export"}),d(" "+s(e.$t("views.document.setting.export"))+" Excel ",1)]),_:2},1032,["onClick"])):k("",!0),n.value.doc_export(a(i))?(o(),r(b,{key:5,onClick:F=>De(m)},{default:t(()=>[l(P,{iconName:"app-export"}),d(" "+s(e.$t("views.document.setting.export"))+" Zip ",1)]),_:2},1032,["onClick"])):k("",!0),n.value.doc_delete(a(i))?(o(),r(b,{key:6,onClick:W(F=>Ne(m),["stop"])},{default:t(()=>[l(P,{iconName:"app-delete"}),d(" "+s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),default:t(()=>[l(_,{text:"",type:"primary"},{default:t(()=>[l(P,{iconName:"app-more"})]),_:1})]),_:2},1024)):k("",!0)])],64)):k("",!0)]}),_:1},8,["label"]))]),_:1},8,["data","pagination-config","quick-create","row-key"])),[[St,c.value]])])])]}),_:1}),G.value.length!==0?(o(),Q("div",kl,[n.value.doc_vector(a(i))?(o(),r(_,{key:0,disabled:G.value.length===0,onClick:u[7]||(u[7]=_e=>Me(1))},{default:t(()=>[d(s(e.$t("views.document.setting.cancelVectorization")),1)]),_:1},8,["disabled"])):k("",!0),n.value.doc_generate(a(i))?(o(),r(_,{key:1,disabled:G.value.length===0,onClick:u[8]||(u[8]=_e=>Me(2))},{default:t(()=>[d(s(e.$t("views.document.setting.cancelGenerate")),1)]),_:1},8,["disabled"])):k("",!0),l(Ct,{type:"info",class:"secondary ml-24"},{default:t(()=>[d(s(e.$t("common.selected"))+" "+s(G.value.length)+" "+s(e.$t("views.document.items")),1)]),_:1}),l(_,{class:"ml-16",type:"primary",link:"",onClick:Ze},{default:t(()=>[d(s(e.$t("common.clear")),1)]),_:1})])):k("",!0),l(al,{ref_key:"embeddingContentDialogRef",ref:Y},null,512),l(Zt,{ref_key:"ImportDocumentDialogRef",ref:q,title:O.value,onRefresh:Ue},null,8,["title"]),l(Ot,{ref_key:"SyncWebDialogRef",ref:se,onRefresh:Ue},null,512),l(xt,{ref_key:"selectKnowledgeDialogRef",ref:ye,onRefresh:gt,workspaceId:(Be=L.value)==null?void 0:Be.workspaceId},null,8,["workspaceId"]),l(zt,{ref_key:"GenerateRelatedDialogRef",ref:Ae,onRefresh:z,apiType:p.value},null,8,["apiType"])])}}}),$l=Kt(wl,[["__scopeId","data-v-cdfc0b37"]]);export{$l as default};
