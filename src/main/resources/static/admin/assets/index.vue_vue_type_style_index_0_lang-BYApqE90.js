var Dj=Object.defineProperty;var jj=(e,t,n)=>t in e?Dj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ha=(e,t,n)=>jj(e,typeof t!="symbol"?t+"":t,n);import{dV as Sv,fd as Su,dS as lo,fe as FS,dG as nh,ff as Wm,fg as zf,fh as rh,fi as $A,fj as Is,eL as vc,dJ as va,fk as Ij,dH as mc,eG as FA,fl as Lj,fm as Xm,fn as Ls,eC as i_,eE as Xw,dP as oh,au as yc,fo as VA,fp as ih,eM as Dv,fq as qw,dN as co,fr as a_,eb as l_,eK as Nd,eh as Uo,fs as xv,dO as Yf,ft as jv,fu as qm,eg as gc,dM as pl,dL as To,fv as $j,fw as BA,f3 as xu,eJ as Pa,fx as Fj,fy as Vj,fz as Iv,fA as s_,fB as UA,ea as ah,fC as GA,bQ as Yw,dK as Ym,at as Lv,ef as Lm,ed as Jp,eF as Bj,eI as VS,eH as Uj,as as zA,fD as HA,fE as Gj,dR as u_,dI as zj,eO as kg,fF as Hj,fG as WA,fH as XA,fI as qA,fJ as Wj,fK as Xj,dT as qj,fL as Yj,fM as Kj,fN as Zj,fO as Jj,fP as Ng,eR as Qj,fQ as YA,ec as KA,eN as Kw,fR as ZA,fS as Zw,fT as eI,dQ as Km,fU as JA,fV as tI,fW as QA,fX as eT,fY as nI,fZ as rI,f_ as oI,eS as $m,f1 as iI,f$ as aI,g0 as lI,aw as sI,g1 as uI,g2 as cI,g3 as dI,g4 as fI,g5 as pI,g6 as hI,g7 as vI,ai as mI,f4 as yI,g8 as gI,ax as _I,g9 as bI,ga as wI,gb as EI,gc as OI,gd as SI,ge as xI,av as MI,gf as AI,f5 as TI,gg as kI,f2 as NI,gh as PI,gi as RI,gj as CI,gk as DI,ay as Rn,aB as Ae,aR as Kf,aD as Y,aT as Rt,aF as ce,aY as Fn,aH as T,aI as X,aE as Ge,aZ as Tr,aG as N,aU as Qt,b8 as Jt,c2 as Mv,c3 as fl,gl as BS,aJ as fe,c5 as Jw,aK as Je,a_ as Bt,gm as ko,aP as Zi,aA as c_,aQ as jn,b_ as Qw,b9 as kr,b4 as Ca,bg as Zm,cq as Mu,bD as Pd,bE as Hf,b$ as eE,aN as br,c0 as fw,aW as ni,aO as dc,a$ as ye,b3 as Jm,bC as Dl,da as tT,cu as Av,c9 as Ra,aC as yt,c8 as nT,aM as Tn,cn as Dd,aX as jd,ba as Au,co as fr,cp as as,ct as Eu,dw as jI,dx as II,bI as Tv,gn as LI,go as $I,gp as rT,gq as oT,gr as FI,gs as VI,gt as BI,gu as UI,gv as GI,gw as go,dk as d_,dl as iT,cT as zI,bK as Pg,cL as HI,b5 as Qm,gx as dl,cY as WI,gy as US,cs as XI,gz as qI,bF as YI,e8 as KI,gA as ZI,gB as tE,gC as nE,gD as JI,bG as QI,gE as e8,aS as aT}from"./admin-DTQ9awQz.js";import{g as f_,t as kv,a as GS,i as Vs,n as t8,c as rE,l as og,d as n8}from"./data-DYGQ9I67.js";import{_ as lh,G as lT,d as r8,e as o8,f as i8,a as sT,b as a8,c as l8}from"./GeneratePromptDialog-BfXwyUIe.js";import{d as uT,c as sh,v as ey,e as s8,g as cT,f as u8,a as c8,r as d8}from"./reduce-nC6UD2CL.js";import{c as oE,b as p_,i as iE,p as dT,n as aE,a as f8,d as lE,e as p8,f as h8,g as v8,h as m8,u as y8,j as g8,k as _8,l as b8,m as w8,r as E8,o as O8,q as S8,s as x8,t as M8}from"./uniqBy-BZ1gJfyL.js";import{c as A8,a as T8,b as k8,e as N8,f as P8,m as R8,d as C8,h as D8}from"./min-D5m9_fnI.js";import{d as fT,e as j8,g as I8,h as L8,i as $8,z as F8,s as V8,m as B8,a as U8,b as G8,f as z8,c as H8,r as W8,u as X8}from"./zipObject-Ba7BcODb.js";import{l as q8,_ as Y8}from"./vue-draggable-plus-Dl-rvHAj.js";import{_ as K8}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-DrujtMg0.js";import{_ as un}from"./defineProperty-DbXIQDXj.js";const pT=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Yoe}},Symbol.toStringTag,{value:"Module"}));var Z8=NaN;function zS(e){return typeof e=="number"?e:Sv(e)?Z8:+e}function h_(e,t){return function(n,o){var r;if(n===void 0&&o===void 0)return t;if(n!==void 0&&(r=n),o!==void 0){if(r===void 0)return o;typeof n=="string"||typeof o=="string"?(n=Su(n),o=Su(o)):(n=zS(n),o=zS(o)),r=e(n,o)}return r}}var J8=h_(function(e,t){return e+t},0),Q8="Expected a function";function eL(e,t){if(typeof t!="function")throw new TypeError(Q8);return e=lo(e),function(){if(--e<1)return t.apply(this,arguments)}}var Rg=FS&&new FS,hT=Rg?function(e,t){return Rg.set(e,t),e}:nh;function Fm(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Wm(e.prototype),o=e.apply(n,t);return zf(o)?o:n}}var tL=1;function nL(e,t,n){var o=t&tL,r=Fm(e);function s(){var c=this&&this!==rh&&this instanceof s?r:e;return c.apply(o?n:this,arguments)}return s}var rL=Math.max;function vT(e,t,n,o){for(var r=-1,s=e.length,c=n.length,f=-1,d=t.length,_=rL(s-c,0),y=Array(d+_),b=!o;++f<d;)y[f]=t[f];for(;++r<c;)(b||r<s)&&(y[n[r]]=e[r]);for(;_--;)y[f++]=e[r++];return y}var oL=Math.max;function mT(e,t,n,o){for(var r=-1,s=e.length,c=-1,f=n.length,d=-1,_=t.length,y=oL(s-f,0),b=Array(y+_),x=!o;++r<y;)b[r]=e[r];for(var M=r;++d<_;)b[M+d]=t[d];for(;++c<f;)(x||r<s)&&(b[M+n[c]]=e[r++]);return b}function iL(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}function v_(){}var aL=4294967295;function to(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=aL,this.__views__=[]}to.prototype=Wm(v_.prototype);to.prototype.constructor=to;var sE=Rg?function(e){return Rg.get(e)}:$A,mv={},lL=Object.prototype,sL=lL.hasOwnProperty;function mg(e){for(var t=e.name+"",n=mv[t],o=sL.call(mv,t)?n.length:0;o--;){var r=n[o],s=r.func;if(s==null||s==e)return r.name}return t}function $s(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}$s.prototype=Wm(v_.prototype);$s.prototype.constructor=$s;function yT(e){if(e instanceof to)return e.clone();var t=new $s(e.__wrapped__,e.__chain__);return t.__actions__=Is(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var uL=Object.prototype,cL=uL.hasOwnProperty;function de(e){if(vc(e)&&!va(e)&&!(e instanceof to)){if(e instanceof $s)return e;if(cL.call(e,"__wrapped__"))return yT(e)}return new $s(e)}de.prototype=v_.prototype;de.prototype.constructor=de;function pw(e){var t=mg(e),n=de[t];if(typeof n!="function"||!(t in to.prototype))return!1;if(e===n)return!0;var o=sE(n);return!!o&&e===o[0]}var gT=Ij(hT),dL=/\{\n\/\* \[wrapped with (.+)\] \*/,fL=/,? & /;function pL(e){var t=e.match(dL);return t?t[1].split(fL):[]}var hL=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function vL(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(hL,`{
/* [wrapped with `+t+`] */
`)}var mL=1,yL=2,gL=8,_L=16,bL=32,wL=64,EL=128,OL=256,SL=512,xL=[["ary",EL],["bind",mL],["bindKey",yL],["curry",gL],["curryRight",_L],["flip",SL],["partial",bL],["partialRight",wL],["rearg",OL]];function ML(e,t){return mc(xL,function(n){var o="_."+n[0];t&n[1]&&!FA(e,o)&&e.push(o)}),e.sort()}function _T(e,t,n){var o=t+"";return Lj(e,vL(o,ML(pL(o),n)))}var AL=4,TL=8,HS=32,WS=64;function bT(e,t,n,o,r,s,c,f,d,_){var y=t&TL,b=y?c:void 0,x=y?void 0:c,M=y?s:void 0,S=y?void 0:s;t|=y?HS:WS,t&=~(y?WS:HS),t&AL||(t&=-4);var E=[e,t,r,M,b,S,x,f,d,_],w=n.apply(void 0,E);return pw(e)&&gT(w,E),w.placeholder=o,_T(w,e,t)}function $v(e){var t=e;return t.placeholder}var kL=Math.min;function NL(e,t){for(var n=e.length,o=kL(t.length,n),r=Is(e);o--;){var s=t[o];e[o]=Xm(s,n)?r[s]:void 0}return e}var XS="__lodash_placeholder__";function Wf(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n];(c===t||c===XS)&&(e[n]=XS,s[r++]=n)}return s}var PL=1,RL=2,CL=8,DL=16,jL=128,IL=512;function m_(e,t,n,o,r,s,c,f,d,_){var y=t&jL,b=t&PL,x=t&RL,M=t&(CL|DL),S=t&IL,E=x?void 0:Fm(e);function w(){for(var C=arguments.length,j=Array(C),B=C;B--;)j[B]=arguments[B];if(M)var $=$v(w),U=iL(j,$);if(o&&(j=vT(j,o,r,M)),s&&(j=mT(j,s,c,M)),C-=U,M&&C<_){var I=Wf(j,$);return bT(e,t,m_,w.placeholder,n,j,I,f,d,_-C)}var F=b?n:this,Z=x?F[e]:e;return C=j.length,f?j=NL(j,f):S&&C>1&&j.reverse(),y&&d<C&&(j.length=d),this&&this!==rh&&this instanceof w&&(Z=E||Fm(Z)),Z.apply(F,j)}return w}function LL(e,t,n){var o=Fm(e);function r(){for(var s=arguments.length,c=Array(s),f=s,d=$v(r);f--;)c[f]=arguments[f];var _=s<3&&c[0]!==d&&c[s-1]!==d?[]:Wf(c,d);if(s-=_.length,s<n)return bT(e,t,m_,r.placeholder,void 0,c,_,void 0,void 0,n-s);var y=this&&this!==rh&&this instanceof r?o:e;return Ls(y,this,c)}return r}var $L=1;function FL(e,t,n,o){var r=t&$L,s=Fm(e);function c(){for(var f=-1,d=arguments.length,_=-1,y=o.length,b=Array(y+d),x=this&&this!==rh&&this instanceof c?s:e;++_<y;)b[_]=o[_];for(;d--;)b[_++]=arguments[++f];return Ls(x,r?n:this,b)}return c}var qS="__lodash_placeholder__",E1=1,VL=2,BL=4,YS=8,ym=128,KS=256,UL=Math.min;function GL(e,t){var n=e[1],o=t[1],r=n|o,s=r<(E1|VL|ym),c=o==ym&&n==YS||o==ym&&n==KS&&e[7].length<=t[8]||o==(ym|KS)&&t[7].length<=t[8]&&n==YS;if(!(s||c))return e;o&E1&&(e[2]=t[2],r|=n&E1?0:BL);var f=t[3];if(f){var d=e[3];e[3]=d?vT(d,f,t[4]):f,e[4]=d?Wf(e[3],qS):t[4]}return f=t[5],f&&(d=e[5],e[5]=d?mT(d,f,t[6]):f,e[6]=d?Wf(e[5],qS):t[6]),f=t[7],f&&(e[7]=f),o&ym&&(e[8]=e[8]==null?t[8]:UL(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var zL="Expected a function",ZS=1,HL=2,JS=8,QS=16,ex=32,WL=64,tx=Math.max;function Id(e,t,n,o,r,s,c,f){var d=t&HL;if(!d&&typeof e!="function")throw new TypeError(zL);var _=o?o.length:0;if(_||(t&=-97,o=r=void 0),c=c===void 0?c:tx(lo(c),0),f=f===void 0?f:lo(f),_-=r?r.length:0,t&WL){var y=o,b=r;o=r=void 0}var x=d?void 0:sE(e),M=[e,t,n,o,r,y,b,s,c,f];if(x&&GL(M,x),e=M[0],t=M[1],n=M[2],o=M[3],r=M[4],f=M[9]=M[9]===void 0?d?0:e.length:tx(M[9]-_,0),!f&&t&(JS|QS)&&(t&=-25),!t||t==ZS)var S=nL(e,t,n);else t==JS||t==QS?S=LL(e,t,f):(t==ex||t==(ZS|ex))&&!r.length?S=FL(e,t,n,o):S=m_.apply(void 0,M);var E=x?hT:gT;return _T(E(S,M),e,t)}var XL=128;function wT(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,Id(e,XL,void 0,void 0,void 0,void 0,t)}var qL=i_(function(e,t){Xw(t,oh(t),e)}),hw=i_(function(e,t,n,o){Xw(t,oh(t),e,o)}),YL=i_(function(e,t,n,o){Xw(t,yc(t),e,o)});function uE(e,t){for(var n=-1,o=t.length,r=Array(o),s=e==null;++n<o;)r[n]=s?void 0:VA(e,t[n]);return r}var KL=ih(uE),ZL="[object DOMException]",JL="[object Error]";function cE(e){if(!vc(e))return!1;var t=Dv(e);return t==JL||t==ZL||typeof e.message=="string"&&typeof e.name=="string"&&!qw(e)}var ET=co(function(e,t){try{return Ls(e,void 0,t)}catch(n){return cE(n)?n:new Error(n)}}),QL="Expected a function";function OT(e,t){var n;if(typeof t!="function")throw new TypeError(QL);return e=lo(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var e4=1,t4=32,y_=co(function(e,t,n){var o=e4;if(n.length){var r=Wf(n,$v(y_));o|=t4}return Id(e,o,t,n,r)});y_.placeholder={};var n4=ih(function(e,t){return mc(t,function(n){n=a_(n),l_(e,n,y_(e[n],e))}),e}),r4=1,o4=2,i4=32,dE=co(function(e,t,n){var o=r4|o4;if(n.length){var r=Wf(n,$v(dE));o|=i4}return Id(t,o,e,n,r)});dE.placeholder={};function Zf(e,t,n){var o=e.length;return n=n===void 0?o:n,!t&&n>=o?e:Nd(e,t,n)}var a4="\\ud800-\\udfff",l4="\\u0300-\\u036f",s4="\\ufe20-\\ufe2f",u4="\\u20d0-\\u20ff",c4=l4+s4+u4,d4="\\ufe0e\\ufe0f",f4="\\u200d",p4=RegExp("["+f4+a4+c4+d4+"]");function Fv(e){return p4.test(e)}function h4(e){return e.split("")}var ST="\\ud800-\\udfff",v4="\\u0300-\\u036f",m4="\\ufe20-\\ufe2f",y4="\\u20d0-\\u20ff",g4=v4+m4+y4,_4="\\ufe0e\\ufe0f",b4="["+ST+"]",vw="["+g4+"]",mw="\\ud83c[\\udffb-\\udfff]",w4="(?:"+vw+"|"+mw+")",xT="[^"+ST+"]",MT="(?:\\ud83c[\\udde6-\\uddff]){2}",AT="[\\ud800-\\udbff][\\udc00-\\udfff]",E4="\\u200d",TT=w4+"?",kT="["+_4+"]?",O4="(?:"+E4+"(?:"+[xT,MT,AT].join("|")+")"+kT+TT+")*",S4=kT+TT+O4,x4="(?:"+[xT+vw+"?",vw,MT,AT,b4].join("|")+")",M4=RegExp(mw+"(?="+mw+")|"+x4+S4,"g");function A4(e){return e.match(M4)||[]}function Tu(e){return Fv(e)?A4(e):h4(e)}function NT(e){return function(t){t=Uo(t);var n=Fv(t)?Tu(t):void 0,o=n?n[0]:t.charAt(0),r=n?Zf(n,1).join(""):t.slice(1);return o[e]()+r}}var fE=NT("toUpperCase");function PT(e){return fE(Uo(e).toLowerCase())}function pE(e){return function(t){return e==null?void 0:e[t]}}var T4={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},k4=pE(T4),N4=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,P4="\\u0300-\\u036f",R4="\\ufe20-\\ufe2f",C4="\\u20d0-\\u20ff",D4=P4+R4+C4,j4="["+D4+"]",I4=RegExp(j4,"g");function RT(e){return e=Uo(e),e&&e.replace(N4,k4).replace(I4,"")}var L4=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function $4(e){return e.match(L4)||[]}var F4=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function V4(e){return F4.test(e)}var CT="\\ud800-\\udfff",B4="\\u0300-\\u036f",U4="\\ufe20-\\ufe2f",G4="\\u20d0-\\u20ff",z4=B4+U4+G4,DT="\\u2700-\\u27bf",jT="a-z\\xdf-\\xf6\\xf8-\\xff",H4="\\xac\\xb1\\xd7\\xf7",W4="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",X4="\\u2000-\\u206f",q4=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",IT="A-Z\\xc0-\\xd6\\xd8-\\xde",Y4="\\ufe0e\\ufe0f",LT=H4+W4+X4+q4,$T="['’]",nx="["+LT+"]",K4="["+z4+"]",FT="\\d+",Z4="["+DT+"]",VT="["+jT+"]",BT="[^"+CT+LT+FT+DT+jT+IT+"]",J4="\\ud83c[\\udffb-\\udfff]",Q4="(?:"+K4+"|"+J4+")",e6="[^"+CT+"]",UT="(?:\\ud83c[\\udde6-\\uddff]){2}",GT="[\\ud800-\\udbff][\\udc00-\\udfff]",lv="["+IT+"]",t6="\\u200d",rx="(?:"+VT+"|"+BT+")",n6="(?:"+lv+"|"+BT+")",ox="(?:"+$T+"(?:d|ll|m|re|s|t|ve))?",ix="(?:"+$T+"(?:D|LL|M|RE|S|T|VE))?",zT=Q4+"?",HT="["+Y4+"]?",r6="(?:"+t6+"(?:"+[e6,UT,GT].join("|")+")"+HT+zT+")*",o6="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",i6="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",a6=HT+zT+r6,l6="(?:"+[Z4,UT,GT].join("|")+")"+a6,s6=RegExp([lv+"?"+VT+"+"+ox+"(?="+[nx,lv,"$"].join("|")+")",n6+"+"+ix+"(?="+[nx,lv+rx,"$"].join("|")+")",lv+"?"+rx+"+"+ox,lv+"+"+ix,i6,o6,FT,l6].join("|"),"g");function u6(e){return e.match(s6)||[]}function WT(e,t,n){return e=Uo(e),t=n?void 0:t,t===void 0?V4(e)?u6(e):$4(e):e.match(t)||[]}var c6="['’]",d6=RegExp(c6,"g");function Vv(e){return function(t){return uT(WT(RT(t).replace(d6,"")),e,"")}}var f6=Vv(function(e,t,n){return t=t.toLowerCase(),e+(n?PT(t):t)}),p6=rh.isFinite,h6=Math.min;function hE(e){var t=Math[e];return function(n,o){if(n=xv(n),o=o==null?0:h6(lo(o),292),o&&p6(n)){var r=(Uo(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+o));return r=(Uo(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-o))}return t(n)}}var v6=hE("ceil");function XT(e){var t=de(e);return t.__chain__=!0,t}var m6=Math.ceil,y6=Math.max;function g6(e,t,n){(n?Yf(e,t,n):t===void 0)?t=1:t=y6(lo(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var r=0,s=0,c=Array(m6(o/t));r<o;)c[s++]=Nd(e,r,r+=t);return c}var _6=1,b6=4;function w6(e,t){return t=typeof t=="function"?t:void 0,jv(e,_6|b6,t)}var E6=4;function O6(e,t){return t=typeof t=="function"?t:void 0,jv(e,E6,t)}function S6(){return new $s(this.value(),this.__chain__)}function x6(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return qm(va(n)?Is(n):[n],gc(t,1))}var M6="Expected a function";function A6(e){var t=e==null?0:e.length,n=To;return e=t?pl(e,function(o){if(typeof o[1]!="function")throw new TypeError(M6);return[n(o[0]),o[1]]}):[],co(function(o){for(var r=-1;++r<t;){var s=e[r];if(Ls(s[0],this,o))return Ls(s[1],this,o)}})}function qT(e,t,n){var o=n.length;if(e==null)return!o;for(e=Object(e);o--;){var r=n[o],s=t[r],c=e[r];if(c===void 0&&!(r in e)||!s(c))return!1}return!0}function T6(e){var t=yc(e);return function(n){return qT(n,e,t)}}var k6=1;function N6(e){return T6(jv(e,k6))}function P6(e,t){return t==null||qT(e,t,yc(t))}var R6=Object.prototype,C6=R6.hasOwnProperty,D6=oE(function(e,t,n){C6.call(e,n)?++e[n]:l_(e,n,1)});function j6(e,t){var n=Wm(e);return t==null?n:$j(n,t)}var I6=8;function vE(e,t,n){t=n?void 0:t;var o=Id(e,I6,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=vE.placeholder,o}vE.placeholder={};var L6=16;function mE(e,t,n){t=n?void 0:t;var o=Id(e,L6,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=mE.placeholder,o}mE.placeholder={};function $6(e,t){return e==null||e!==e?t:e}function YT(e,t,n,o,r,s){return zf(e)&&zf(t)&&(s.set(t,e),BA(e,t,void 0,YT,s),s.delete(t)),e}var KT=i_(function(e,t,n,o){BA(e,t,n,o)}),F6=co(function(e){return e.push(void 0,YT),Ls(KT,void 0,e)}),V6="Expected a function";function ZT(e,t,n){if(typeof e!="function")throw new TypeError(V6);return setTimeout(function(){e.apply(void 0,n)},t)}var B6=co(function(e,t){return ZT(e,1,t)}),U6=co(function(e,t,n){return ZT(e,xv(t)||0,n)}),G6=co(function(e,t){var n=xu(t);return Pa(n)&&(n=void 0),Pa(e)?p_(e,gc(t,1,Pa,!0),To(n)):[]}),z6=co(function(e,t){var n=xu(t);return Pa(n)&&(n=void 0),Pa(e)?p_(e,gc(t,1,Pa,!0),void 0,n):[]}),H6=h_(function(e,t){return e/t},1);function g_(e,t,n,o){for(var r=e.length,s=o?r:-1;(o?s--:++s<r)&&t(e[s],s,e););return n?Nd(e,o?0:s,o?s+1:r):Nd(e,o?s+1:0,o?r:s)}function W6(e,t){return e&&e.length?g_(e,To(t),!0,!0):[]}function X6(e,t){return e&&e.length?g_(e,To(t),!0):[]}function q6(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var JT=Fj(!0);function yE(e,t){return e&&JT(e,t,yc)}var QT=Vj(yE,!0);function Y6(e,t){var n=va(e)?q6:QT;return n(e,sh(t))}function K6(e,t,n){e=Uo(e),t=Su(t);var o=e.length;n=n===void 0?o:Iv(lo(n),0,o);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function Z6(e,t){return pl(t,function(n){return[n,e[n]]})}function J6(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=[o,o]}),n}var Q6="[object Map]",e5="[object Set]";function ek(e){return function(t){var n=s_(t);return n==Q6?UA(t):n==e5?J6(t):Z6(t,e(t))}}var t5=ek(yc),n5=ek(oh),r5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o5=pE(r5),tk=/[&<>"']/g,i5=RegExp(tk.source);function nk(e){return e=Uo(e),e&&i5.test(e)?e.replace(tk,o5):e}var rk=/[\\^$.*+?()[\]{}|]/g,a5=RegExp(rk.source);function l5(e){return e=Uo(e),e&&a5.test(e)?e.replace(rk,"\\$&"):e}var s5=4294967295;function ok(e){return e?Iv(lo(e),0,s5):0}function u5(e,t,n,o){var r=e.length;for(n=lo(n),n<0&&(n=-n>r?0:r+n),o=o===void 0||o>r?r:lo(o),o<0&&(o+=r),o=n>o?0:ok(o);n<o;)e[n++]=t;return e}function c5(e,t,n,o){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&Yf(e,t,n)&&(n=0,o=r),u5(e,t,n,o)):[]}function ik(e,t,n){var o;return n(e,function(r,s,c){if(t(r,s,c))return o=s,!1}),o}function d5(e,t){return ik(e,To(t),ah)}var f5=A8(GA);function p5(e,t){return ik(e,To(t),yE)}var h5=1/0;function v5(e,t){return gc(Yw(e,t),h5)}function m5(e,t,n){return n=n===void 0?1:lo(n),gc(Yw(e,t),n)}function y5(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:lo(t),gc(e,t)):[]}var g5=512;function _5(e){return Id(e,g5)}var b5=hE("floor"),w5="Expected a function",E5=8,O5=32,S5=128,x5=256;function ak(e){return ih(function(t){var n=t.length,o=n,r=$s.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if(typeof s!="function")throw new TypeError(w5);if(r&&!c&&mg(s)=="wrapper")var c=new $s([],!0)}for(o=c?o:n;++o<n;){s=t[o];var f=mg(s),d=f=="wrapper"?sE(s):void 0;d&&pw(d[0])&&d[1]==(S5|E5|O5|x5)&&!d[4].length&&d[9]==1?c=c[mg(d[0])].apply(c,d[3]):c=s.length==1&&pw(s)?c[f]():c.thru(s)}return function(){var _=arguments,y=_[0];if(c&&_.length==1&&va(y))return c.plant(y).value();for(var b=0,x=n?t[b].apply(this,_):y;++b<n;)x=t[b].call(this,x);return x}})}var M5=ak(),A5=ak(!0);function T5(e,t){return e==null?e:JT(e,sh(t),oh)}function k5(e,t){return e&&yE(e,sh(t))}function __(e,t){return Ym(t,function(n){return Lv(e[n])})}function N5(e){return e==null?[]:__(e,yc(e))}function P5(e){return e==null?[]:__(e,oh(e))}function b_(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=xv(t),n=xv(n)),e(t,n)}}var R5=b_(fT),C5=b_(function(e,t){return e>=t}),D5=Math.max,j5=Math.min;function I5(e,t,n){return e>=j5(t,n)&&e<D5(t,n)}function L5(e,t,n){return t=Lm(t),n===void 0?(n=t,t=0):n=Lm(n),e=xv(e),I5(e,t,n)}function $5(e){var t=e==null?0:e.length;return t?Nd(e,0,-1):[]}var F5=Math.min;function gE(e,t,n){for(var o=n?Uj:FA,r=e[0].length,s=e.length,c=s,f=Array(s),d=1/0,_=[];c--;){var y=e[c];c&&t&&(y=pl(y,Jp(t))),d=F5(y.length,d),f[c]=!n&&(t||r>=120&&y.length>=120)?new Bj(c&&y):void 0}y=e[0];var b=-1,x=f[0];e:for(;++b<r&&_.length<d;){var M=y[b],S=t?t(M):M;if(M=n||M!==0?M:0,!(x?VS(x,S):o(_,S,n))){for(c=s;--c;){var E=f[c];if(!(E?VS(E,S):o(e[c],S,n)))continue e}x&&x.push(S),_.push(M)}}return _}function _E(e){return Pa(e)?e:[]}var V5=co(function(e){var t=pl(e,_E);return t.length&&t[0]===e[0]?gE(t):[]}),B5=co(function(e){var t=xu(e),n=pl(e,_E);return t===xu(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?gE(n,To(t)):[]}),U5=co(function(e){var t=xu(e),n=pl(e,_E);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?gE(n,void 0,t):[]});function G5(e,t,n,o){return ah(e,function(r,s,c){t(o,n(r),s,c)}),o}function lk(e,t){return function(n,o){return G5(n,e,t(o),{})}}var z5=Object.prototype,H5=z5.toString,W5=lk(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=H5.call(t)),e[t]=n},zA(nh)),sk=Object.prototype,X5=sk.hasOwnProperty,q5=sk.toString,Y5=lk(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=q5.call(t)),X5.call(e,t)?e[t].push(n):e[t]=[n]},To);function ty(e,t,n){t=HA(t,e),e=Gj(e,t);var o=e==null?e:e[a_(xu(t))];return o==null?void 0:Ls(o,e,n)}var K5=co(ty),Z5=co(function(e,t,n){var o=-1,r=typeof t=="function",s=u_(e)?Array(e.length):[];return zj(e,function(c){s[++o]=r?Ls(t,c,n):ty(c,t,n)}),s}),J5="[object ArrayBuffer]";function Q5(e){return vc(e)&&Dv(e)==J5}var ax=kg&&kg.isArrayBuffer,e$=ax?Jp(ax):Q5,t$="[object Boolean]";function n$(e){return e===!0||e===!1||vc(e)&&Dv(e)==t$}var r$="[object Date]";function o$(e){return vc(e)&&Dv(e)==r$}var lx=kg&&kg.isDate,i$=lx?Jp(lx):o$;function a$(e){return vc(e)&&e.nodeType===1&&!qw(e)}function l$(e,t,n){n=typeof n=="function"?n:void 0;var o=n?n(e,t):void 0;return o===void 0?Hj(e,t,void 0,n):!!o}var s$=rh.isFinite;function u$(e){return typeof e=="number"&&s$(e)}function uk(e){return typeof e=="number"&&e==lo(e)}function c$(e,t){return e===t||WA(e,t,XA(t))}function d$(e,t,n){return n=typeof n=="function"?n:void 0,WA(e,t,XA(t),n)}var f$="[object Number]";function ck(e){return typeof e=="number"||vc(e)&&Dv(e)==f$}function p$(e){return ck(e)&&e!=+e}var h$=Wj?Lv:qA,v$="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function m$(e){if(h$(e))throw new Error(v$);return Xj(e)}var sx=9007199254740991;function y$(e){return uk(e)&&e>=-sx&&e<=sx}var g$="[object WeakMap]";function _$(e){return vc(e)&&s_(e)==g$}var b$="[object WeakSet]";function w$(e){return vc(e)&&Dv(e)==b$}var E$=1;function O$(e){return To(typeof e=="function"?e:jv(e,E$))}var S$=Array.prototype,x$=S$.join;function M$(e,t){return e==null?"":x$.call(e,t)}var A$=Vv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),T$=oE(function(e,t,n){l_(e,n,t)});function k$(e,t,n){for(var o=n+1;o--;)if(e[o]===t)return o;return o}var N$=Math.max,P$=Math.min;function R$(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=o;return n!==void 0&&(r=lo(n),r=r<0?N$(o+r,0):P$(r,o-1)),t===t?k$(e,t,r):qj(e,Yj,r,!0)}var C$=Vv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),D$=NT("toLowerCase"),j$=b_(T8),I$=b_(function(e,t){return e<=t});function L$(e,t){var n={};return t=To(t),ah(e,function(o,r,s){l_(n,t(o,r,s),o)}),n}var $$=1;function F$(e){return Kj(jv(e,$$))}var V$=1;function B$(e,t){return Zj(e,jv(t,V$))}function U$(e,t){return e&&e.length?k8(e,To(t),fT):void 0}function bE(e,t){for(var n,o=-1,r=e.length;++o<r;){var s=t(e[o]);s!==void 0&&(n=n===void 0?s:n+s)}return n}var G$=NaN;function dk(e,t){var n=e==null?0:e.length;return n?bE(e,t)/n:G$}function z$(e){return dk(e,nh)}function H$(e,t){return dk(e,To(t))}var W$=co(function(e,t){return function(n){return ty(n,e,t)}}),X$=co(function(e,t){return function(n){return ty(e,n,t)}});function q$(e,t,n){var o=yc(t),r=__(t,o),s=!(zf(n)&&"chain"in n)||!!n.chain,c=Lv(e);return mc(r,function(f){var d=t[f];e[f]=d,c&&(e.prototype[f]=function(){var _=this.__chain__;if(s||_){var y=e(this.__wrapped__),b=y.__actions__=Is(this.__actions__);return b.push({func:d,args:arguments,thisArg:e}),y.__chain__=_,y}return d.apply(e,qm([this.value()],arguments))})}),e}var Y$=h_(function(e,t){return e*t},1);function K$(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var Z$="[object Map]",J$="[object Set]",O1=Ng?Ng.iterator:void 0;function fk(e){if(!e)return[];if(u_(e))return iE(e)?Tu(e):Is(e);if(O1&&e[O1])return K$(e[O1]());var t=s_(e),n=t==Z$?UA:t==J$?Jj:ey;return n(e)}function Q$(){this.__values__===void 0&&(this.__values__=fk(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function pk(e,t){var n=e.length;if(n)return t+=t<0?n:0,Xm(t,n)?e[t]:void 0}function eF(e,t){return e&&e.length?pk(e,lo(t)):void 0}function tF(e){return e=lo(e),co(function(t){return pk(t,e)})}function nF(e,t){return dT(e,aE(To(t)))}function rF(e){return OT(2,e)}function oF(e,t,n,o){return e==null?[]:(va(t)||(t=t==null?[]:[t]),n=o?void 0:n,va(n)||(n=n==null?[]:[n]),j8(e,t,n))}function wE(e){return ih(function(t){return t=pl(t,Jp(To)),co(function(n){var o=this;return e(t,function(r){return Ls(r,o,n)})})})}var iF=wE(pl),aF=co,lF=Math.min,sF=aF(function(e,t){t=t.length==1&&va(t[0])?pl(t[0],Jp(To)):pl(gc(t,1),Jp(To));var n=t.length;return co(function(o){for(var r=-1,s=lF(o.length,n);++r<s;)o[r]=t[r].call(this,o[r]);return Ls(e,this,o)})}),uF=wE(f8),cF=wE(Qj),dF=9007199254740991,fF=Math.floor;function yw(e,t){var n="";if(!e||t<1||t>dF)return n;do t%2&&(n+=e),t=fF(t/2),t&&(e+=e);while(t);return n}var pF=YA("length"),hk="\\ud800-\\udfff",hF="\\u0300-\\u036f",vF="\\ufe20-\\ufe2f",mF="\\u20d0-\\u20ff",yF=hF+vF+mF,gF="\\ufe0e\\ufe0f",_F="["+hk+"]",gw="["+yF+"]",_w="\\ud83c[\\udffb-\\udfff]",bF="(?:"+gw+"|"+_w+")",vk="[^"+hk+"]",mk="(?:\\ud83c[\\udde6-\\uddff]){2}",yk="[\\ud800-\\udbff][\\udc00-\\udfff]",wF="\\u200d",gk=bF+"?",_k="["+gF+"]?",EF="(?:"+wF+"(?:"+[vk,mk,yk].join("|")+")"+_k+gk+")*",OF=_k+gk+EF,SF="(?:"+[vk+gw+"?",gw,mk,yk,_F].join("|")+")",ux=RegExp(_w+"(?="+_w+")|"+SF+OF,"g");function xF(e){for(var t=ux.lastIndex=0;ux.test(e);)++t;return t}function Bv(e){return Fv(e)?xF(e):pF(e)}var MF=Math.ceil;function Cg(e,t){t=t===void 0?" ":Su(t);var n=t.length;if(n<2)return n?yw(t,e):t;var o=yw(t,MF(e/Bv(t)));return Fv(t)?Zf(Tu(o),0,e).join(""):o.slice(0,e)}var AF=Math.ceil,TF=Math.floor;function kF(e,t,n){e=Uo(e),t=lo(t);var o=t?Bv(e):0;if(!t||o>=t)return e;var r=(t-o)/2;return Cg(TF(r),n)+e+Cg(AF(r),n)}function NF(e,t,n){e=Uo(e),t=lo(t);var o=t?Bv(e):0;return t&&o<t?e+Cg(t-o,n):e}function PF(e,t,n){e=Uo(e),t=lo(t);var o=t?Bv(e):0;return t&&o<t?Cg(t-o,n)+e:e}var RF=/^\s+/,CF=rh.parseInt;function DF(e,t,n){return n||t==null?t=0:t&&(t=+t),CF(Uo(e).replace(RF,""),t||0)}var jF=32,w_=co(function(e,t){var n=Wf(t,$v(w_));return Id(e,jF,void 0,t,n)});w_.placeholder={};var IF=64,EE=co(function(e,t){var n=Wf(t,$v(EE));return Id(e,IF,void 0,t,n)});EE.placeholder={};var LF=oE(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function $F(e){for(var t,n=this;n instanceof v_;){var o=yT(n);o.__index__=0,o.__values__=void 0,t?r.__wrapped__=o:t=o;var r=o;n=n.__wrapped__}return r.__wrapped__=e,t}function FF(e){return function(t){return e==null?void 0:KA(e,t)}}function VF(e,t,n,o){for(var r=n-1,s=e.length;++r<s;)if(o(e[r],t))return r;return-1}var BF=Array.prototype,cx=BF.splice;function OE(e,t,n,o){var r=o?VF:Kw,s=-1,c=t.length,f=e;for(e===t&&(t=Is(t)),n&&(f=pl(e,Jp(n)));++s<c;)for(var d=0,_=t[s],y=n?n(_):_;(d=r(f,y,d,o))>-1;)f!==e&&cx.call(f,d,1),cx.call(e,d,1);return e}function bk(e,t){return e&&e.length&&t&&t.length?OE(e,t):e}var UF=co(bk);function GF(e,t,n){return e&&e.length&&t&&t.length?OE(e,t,To(n)):e}function zF(e,t,n){return e&&e.length&&t&&t.length?OE(e,t,void 0,n):e}var HF=Array.prototype,WF=HF.splice;function wk(e,t){for(var n=e?t.length:0,o=n-1;n--;){var r=t[n];if(n==o||r!==s){var s=r;Xm(r)?WF.call(e,r,1):ZA(e,r)}}return e}var XF=ih(function(e,t){var n=e==null?0:e.length,o=uE(e,t);return wk(e,pl(t,function(r){return Xm(r,n)?+r:r}).sort(I8)),o}),qF=Math.floor,YF=Math.random;function SE(e,t){return e+qF(YF()*(t-e+1))}var KF=parseFloat,ZF=Math.min,JF=Math.random;function QF(e,t,n){if(n&&typeof n!="boolean"&&Yf(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Lm(e),t===void 0?(t=e,e=0):t=Lm(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var r=JF();return ZF(e+r*(t-e+KF("1e-"+((r+"").length-1))),t)}return SE(e,t)}var e9=L8(!0),t9=256,n9=ih(function(e,t){return Id(e,t9,void 0,void 0,void 0,t)});function r9(e,t,n,o){var r=e==null?0:e.length;for(o&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function o9(e,t,n){var o=va(e)?r9:s8,r=arguments.length<3;return o(e,To(t),n,r,QT)}function i9(e,t){var n=[];if(!(e&&e.length))return n;var o=-1,r=[],s=e.length;for(t=To(t);++o<s;){var c=e[o];t(c,o,e)&&(n.push(c),r.push(o))}return wk(e,r),n}function a9(e,t,n){return(n?Yf(e,t,n):t===void 0)?t=1:t=lo(t),yw(Uo(e),t)}function l9(){var e=arguments,t=Uo(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var s9="Expected a function";function u9(e,t){if(typeof e!="function")throw new TypeError(s9);return t=t===void 0?t:lo(t),co(e,t)}function c9(e,t,n){t=HA(t,e);var o=-1,r=t.length;for(r||(r=1,e=void 0);++o<r;){var s=e==null?void 0:e[a_(t[o])];s===void 0&&(o=r,s=n),e=Lv(s)?s.call(e):s}return e}var d9=Array.prototype,f9=d9.reverse;function bw(e){return e==null?e:f9.call(e)}var p9=hE("round");function Ek(e){var t=e.length;return t?e[SE(0,t-1)]:void 0}function h9(e){return Ek(ey(e))}function v9(e){var t=va(e)?Ek:h9;return t(e)}function E_(e,t){var n=-1,o=e.length,r=o-1;for(t=t===void 0?o:t;++n<t;){var s=SE(n,r),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}function m9(e,t){return E_(Is(e),Iv(t,0,e.length))}function y9(e,t){var n=ey(e);return E_(n,Iv(t,0,n.length))}function g9(e,t,n){(n?Yf(e,t,n):t===void 0)?t=1:t=lo(t);var o=va(e)?m9:y9;return o(e,t)}function _9(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:Zw(e,t,n,o)}function b9(e){return E_(Is(e))}function w9(e){return E_(ey(e))}function E9(e){var t=va(e)?b9:w9;return t(e)}var O9="[object Map]",S9="[object Set]";function x9(e){if(e==null)return 0;if(u_(e))return iE(e)?Bv(e):e.length;var t=s_(e);return t==O9||t==S9?e.size:eI(e).length}function M9(e,t,n){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&Yf(e,t,n)?(t=0,n=o):(t=t==null?0:lo(t),n=n===void 0?o:lo(n)),Nd(e,t,n)):[]}var A9=Vv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),T9=4294967295,k9=T9-1,N9=Math.floor,P9=Math.min;function xE(e,t,n,o){var r=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var c=t!==t,f=t===null,d=Sv(t),_=t===void 0;r<s;){var y=N9((r+s)/2),b=n(e[y]),x=b!==void 0,M=b===null,S=b===b,E=Sv(b);if(c)var w=o||S;else _?w=S&&(o||x):f?w=S&&x&&(o||!M):d?w=S&&x&&!M&&(o||!E):M||E?w=!1:w=o?b<=t:b<t;w?r=y+1:s=y}return P9(s,k9)}var R9=4294967295,C9=R9>>>1;function O_(e,t,n){var o=0,r=e==null?o:e.length;if(typeof t=="number"&&t===t&&r<=C9){for(;o<r;){var s=o+r>>>1,c=e[s];c!==null&&!Sv(c)&&(n?c<=t:c<t)?o=s+1:r=s}return r}return xE(e,t,nh,n)}function D9(e,t){return O_(e,t)}function j9(e,t,n){return xE(e,t,To(n))}function I9(e,t){var n=e==null?0:e.length;if(n){var o=O_(e,t);if(o<n&&Km(e[o],t))return o}return-1}function L9(e,t){return O_(e,t,!0)}function $9(e,t,n){return xE(e,t,To(n),!0)}function F9(e,t){var n=e==null?0:e.length;if(n){var o=O_(e,t,!0)-1;if(Km(e[o],t))return o}return-1}function Ok(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n],f=t?t(c):c;if(!n||!Km(f,d)){var d=f;s[r++]=c===0?0:c}}return s}function V9(e){return e&&e.length?Ok(e):[]}function B9(e,t){return e&&e.length?Ok(e,To(t)):[]}var U9=4294967295;function G9(e,t,n){return n&&typeof n!="number"&&Yf(e,t,n)&&(t=n=void 0),n=n===void 0?U9:n>>>0,n?(e=Uo(e),e&&(typeof t=="string"||t!=null&&!lE(t))&&(t=Su(t),!t&&Fv(e))?Zf(Tu(e),0,n):e.split(t,n)):[]}var z9="Expected a function",H9=Math.max;function W9(e,t){if(typeof e!="function")throw new TypeError(z9);return t=t==null?0:H9(lo(t),0),co(function(n){var o=n[t],r=Zf(n,0,t);return o&&qm(r,o),Ls(e,this,r)})}var X9=Vv(function(e,t,n){return e+(n?" ":"")+fE(t)});function q9(e,t,n){return e=Uo(e),n=n==null?0:Iv(lo(n),0,e.length),t=Su(t),e.slice(n,n+t.length)==t}function Y9(){return{}}function K9(){return""}function Z9(){return!0}var J9=h_(function(e,t){return e-t},0);function Q9(e){return e&&e.length?bE(e,nh):0}function e7(e,t){return e&&e.length?bE(e,To(t)):0}function t7(e){var t=e==null?0:e.length;return t?Nd(e,1,t):[]}function n7(e,t,n){return e&&e.length?(t=n||t===void 0?1:lo(t),Nd(e,0,t<0?0:t)):[]}function r7(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:lo(t),t=o-t,Nd(e,t<0?0:t,o)):[]}function o7(e,t){return e&&e.length?g_(e,To(t),!1,!0):[]}function i7(e,t){return e&&e.length?g_(e,To(t)):[]}function a7(e,t){return t(e),e}var Sk=Object.prototype,l7=Sk.hasOwnProperty;function dx(e,t,n,o){return e===void 0||Km(e,Sk[n])&&!l7.call(o,n)?t:e}var s7={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function u7(e){return"\\"+s7[e]}var xk=/<%=([\s\S]+?)%>/g,c7=/<%-([\s\S]+?)%>/g,d7=/<%([\s\S]+?)%>/g,ww={escape:c7,evaluate:d7,interpolate:xk,variable:"",imports:{_:{escape:nk}}},f7="Invalid `variable` option passed into `_.template`",p7=/\b__p \+= '';/g,h7=/\b(__p \+=) '' \+/g,v7=/(__e\(.*?\)|\b__t\)) \+\n'';/g,m7=/[()=,{}\[\]\/\s]/,y7=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ig=/($^)/,g7=/['\n\r\u2028\u2029\\]/g,_7=Object.prototype,fx=_7.hasOwnProperty;function b7(e,t,n){var o=ww.imports._.templateSettings||ww;n&&Yf(e,t,n)&&(t=void 0),e=Uo(e),t=hw({},t,o,dx);var r=hw({},t.imports,o.imports,dx),s=yc(r),c=cT(r,s),f,d,_=0,y=t.interpolate||ig,b="__p += '",x=RegExp((t.escape||ig).source+"|"+y.source+"|"+(y===xk?y7:ig).source+"|"+(t.evaluate||ig).source+"|$","g"),M=fx.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(x,function(w,C,j,B,$,U){return j||(j=B),b+=e.slice(_,U).replace(g7,u7),C&&(f=!0,b+=`' +
__e(`+C+`) +
'`),$&&(d=!0,b+=`';
`+$+`;
__p += '`),j&&(b+=`' +
((__t = (`+j+`)) == null ? '' : __t) +
'`),_=U+w.length,w}),b+=`';
`;var S=fx.call(t,"variable")&&t.variable;if(!S)b=`with (obj) {
`+b+`
}
`;else if(m7.test(S))throw new Error(f7);b=(d?b.replace(p7,""):b).replace(h7,"$1").replace(v7,"$1;"),b="function("+(S||"obj")+`) {
`+(S?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(f?", __e = _.escape":"")+(d?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var E=ET(function(){return Function(s,M+"return "+b).apply(void 0,c)});if(E.source=b,cE(E))throw E;return E}function S_(e,t){return t(e)}var w7=9007199254740991,S1=4294967295,E7=Math.min;function O7(e,t){if(e=lo(e),e<1||e>w7)return[];var n=S1,o=E7(e,S1);t=sh(t),e-=S1;for(var r=JA(o,t);++n<e;)t(n);return r}function S7(){return this}function Mk(e,t){var n=e;return n instanceof to&&(n=n.value()),uT(t,function(o,r){return r.func.apply(r.thisArg,qm([o],r.args))},n)}function x7(){return Mk(this.__wrapped__,this.__actions__)}function M7(e){return Uo(e).toLowerCase()}function A7(e){return va(e)?pl(e,a_):Sv(e)?[e]:Is(tI(Uo(e)))}var px=9007199254740991;function T7(e){return e?Iv(lo(e),-px,px):e===0?e:0}function k7(e){return Uo(e).toUpperCase()}function N7(e,t,n){var o=va(e),r=o||QA(e)||eT(e);if(t=To(t),n==null){var s=e&&e.constructor;r?n=o?new s:[]:zf(e)?n=Lv(s)?Wm(nI(e)):{}:n={}}return(r?mc:ah)(e,function(c,f,d){return t(n,c,f,d)}),n}function Ak(e,t){for(var n=e.length;n--&&Kw(t,e[n],0)>-1;);return n}function Tk(e,t){for(var n=-1,o=e.length;++n<o&&Kw(t,e[n],0)>-1;);return n}function P7(e,t,n){if(e=Uo(e),e&&(n||t===void 0))return rI(e);if(!e||!(t=Su(t)))return e;var o=Tu(e),r=Tu(t),s=Tk(o,r),c=Ak(o,r)+1;return Zf(o,s,c).join("")}function R7(e,t,n){if(e=Uo(e),e&&(n||t===void 0))return e.slice(0,oI(e)+1);if(!e||!(t=Su(t)))return e;var o=Tu(e),r=Ak(o,Tu(t))+1;return Zf(o,0,r).join("")}var C7=/^\s+/;function D7(e,t,n){if(e=Uo(e),e&&(n||t===void 0))return e.replace(C7,"");if(!e||!(t=Su(t)))return e;var o=Tu(e),r=Tk(o,Tu(t));return Zf(o,r).join("")}var j7=30,I7="...",L7=/\w*$/;function $7(e,t){var n=j7,o=I7;if(zf(t)){var r="separator"in t?t.separator:r;n="length"in t?lo(t.length):n,o="omission"in t?Su(t.omission):o}e=Uo(e);var s=e.length;if(Fv(e)){var c=Tu(e);s=c.length}if(n>=s)return e;var f=n-Bv(o);if(f<1)return o;var d=c?Zf(c,0,f).join(""):e.slice(0,f);if(r===void 0)return d+o;if(c&&(f+=d.length-f),lE(r)){if(e.slice(f).search(r)){var _,y=d;for(r.global||(r=RegExp(r.source,Uo(L7.exec(r))+"g")),r.lastIndex=0;_=r.exec(y);)var b=_.index;d=d.slice(0,b===void 0?f:b)}}else if(e.indexOf(Su(r),f)!=f){var x=d.lastIndexOf(r);x>-1&&(d=d.slice(0,x))}return d+o}function F7(e){return wT(e,1)}var V7={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},B7=pE(V7),kk=/&(?:amp|lt|gt|quot|#39);/g,U7=RegExp(kk.source);function G7(e){return e=Uo(e),e&&U7.test(e)?e.replace(kk,B7):e}var z7=co(function(e){var t=xu(e);return Pa(t)&&(t=void 0),$m(gc(e,1,Pa,!0),To(t))}),H7=co(function(e){var t=xu(e);return t=typeof t=="function"?t:void 0,$m(gc(e,1,Pa,!0),void 0,t)});function W7(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?$m(e,void 0,t):[]}function X7(e,t){return e==null?!0:ZA(e,t)}var q7=Math.max;function ME(e){if(!(e&&e.length))return[];var t=0;return e=Ym(e,function(n){if(Pa(n))return t=q7(n.length,t),!0}),JA(t,function(n){return pl(e,YA(n))})}function Nk(e,t){if(!(e&&e.length))return[];var n=ME(e);return t==null?n:pl(n,function(o){return Ls(t,void 0,o)})}function Pk(e,t,n,o){return Zw(e,t,n(KA(e,t)),o)}function Y7(e,t,n){return e==null?e:Pk(e,t,sh(n))}function K7(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:Pk(e,t,sh(n),o)}var Z7=Vv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});function J7(e){return e==null?[]:cT(e,oh(e))}var Q7=co(function(e,t){return Pa(e)?p_(e,t):[]});function eV(e,t){return w_(sh(t),e)}var tV=ih(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,r=function(s){return uE(s,e)};return t>1||this.__actions__.length||!(o instanceof to)||!Xm(n)?this.thru(r):(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:S_,args:[r],thisArg:void 0}),new $s(o,this.__chain__).thru(function(s){return t&&!s.length&&s.push(void 0),s}))});function nV(){return XT(this)}function rV(){var e=this.__wrapped__;if(e instanceof to){var t=e;return this.__actions__.length&&(t=new to(this)),t=t.reverse(),t.__actions__.push({func:S_,args:[bw],thisArg:void 0}),new $s(t,this.__chain__)}return this.thru(bw)}function AE(e,t,n){var o=e.length;if(o<2)return o?$m(e[0]):[];for(var r=-1,s=Array(o);++r<o;)for(var c=e[r],f=-1;++f<o;)f!=r&&(s[r]=p_(s[r]||c,e[f],t,n));return $m(gc(s,1),t,n)}var oV=co(function(e){return AE(Ym(e,Pa))}),iV=co(function(e){var t=xu(e);return Pa(t)&&(t=void 0),AE(Ym(e,Pa),To(t))}),aV=co(function(e){var t=xu(e);return t=typeof t=="function"?t:void 0,AE(Ym(e,Pa),void 0,t)}),lV=co(ME);function sV(e,t){return $8(e||[],t||[],Zw)}var uV=co(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,Nk(e,n)});const Gn={chunk:g6,compact:p8,concat:x6,difference:h8,differenceBy:G6,differenceWith:z6,drop:v8,dropRight:m8,dropRightWhile:W6,dropWhile:X6,fill:c5,findIndex:N8,findLastIndex:GA,flatten:iI,flattenDeep:aI,flattenDepth:y5,fromPairs:lI,head:_8,indexOf:b8,initial:$5,intersection:V5,intersectionBy:B5,intersectionWith:U5,join:M$,lastIndexOf:R$,nth:eF,pull:UF,pullAll:bk,pullAllBy:GF,pullAllWith:zF,pullAt:XF,remove:i9,reverse:bw,slice:M9,sortedIndex:D9,sortedIndexBy:j9,sortedIndexOf:I9,sortedLastIndex:L9,sortedLastIndexBy:$9,sortedLastIndexOf:F9,sortedUniq:V9,sortedUniqBy:B9,tail:t7,take:n7,takeRight:r7,takeRightWhile:o7,takeWhile:i7,union:sI,unionBy:z7,unionWith:H7,uniq:y8,uniqBy:g8,uniqWith:W7,unzip:ME,unzipWith:Nk,without:Q7,xor:oV,xorBy:iV,xorWith:aV,zip:lV,zipObject:F8,zipObjectDeep:sV,zipWith:uV},Go={countBy:D6,every:O8,filter:u8,find:P8,findLast:f5,flatMap:uI,flatMapDeep:v5,flatMapDepth:m5,forEach:c8,forEachRight:Y6,groupBy:w8,includes:S8,invokeMap:Z5,keyBy:T$,map:Yw,orderBy:oF,partition:LF,reduce:d8,reduceRight:o9,reject:E8,sample:v9,sampleSize:g9,shuffle:E9,size:x9,some:x8,sortBy:V8},cV={now:cI},ji={after:eL,ary:wT,before:OT,bind:y_,bindKey:dE,curry:vE,curryRight:mE,debounce:dI,defer:B6,delay:U6,flip:_5,memoize:fI,once:rF,overArgs:sF,partial:w_,partialRight:EE,rearg:n9,rest:u9,spread:W9,throttle:pI,unary:F7,wrap:eV},pr={castArray:hI,clone:mI,cloneDeep:yI,cloneDeepWith:w6,cloneWith:O6,conformsTo:P6,eq:Km,gt:R5,gte:C5,isArguments:gI,isArrayBuffer:e$,isArrayLike:u_,isArrayLikeObject:Pa,isBoolean:n$,isBuffer:QA,isDate:i$,isElement:a$,isEmpty:_I,isEqual:bI,isEqualWith:l$,isError:cE,isFinite:u$,isFunction:Lv,isInteger:uk,isLength:wI,isMap:EI,isMatch:c$,isMatchWith:d$,isNaN:p$,isNative:m$,isNil:OI,isNull:SI,isNumber:ck,isObjectLike:vc,isPlainObject:qw,isRegExp:lE,isSafeInteger:y$,isSet:xI,isString:iE,isSymbol:Sv,isTypedArray:eT,isUndefined:MI,isWeakMap:_$,isWeakSet:w$,lt:j$,lte:I$,toArray:fk,toFinite:Lm,toLength:ok,toNumber:xv,toPlainObject:vI,toSafeInteger:T7,toString:Uo},vl={add:J8,ceil:v6,divide:H6,floor:b5,max:B8,maxBy:U$,mean:z$,meanBy:H$,min:R8,minBy:U8,multiply:Y$,round:p9,subtract:J9,sum:Q9,sumBy:e7},TE={clamp:AI,inRange:L5,random:QF},Nr={assign:M8,assignIn:qL,assignInWith:hw,assignWith:YL,at:KL,create:j6,defaults:C8,defaultsDeep:F6,findKey:d5,findLastKey:p5,forIn:z8,forInRight:T5,forOwn:H8,forOwnRight:k5,functions:N5,functionsIn:P5,get:VA,has:D8,hasIn:RI,invert:W5,invertBy:Y5,invoke:K5,keysIn:oh,mapKeys:L$,mapValues:G8,merge:TI,mergeWith:KT,omit:kI,omitBy:nF,pick:NI,pickBy:dT,result:c9,set:PI,setWith:_9,toPairs:t5,toPairsIn:n5,transform:N7,unset:X7,update:Y7,updateWith:K7,values:ey,valuesIn:J7},_c={at:tV,chain:XT,commit:S6,next:Q$,plant:$F,reverse:rV,tap:a7,toIterator:S7,value:x7,wrapperChain:nV},Oo={camelCase:f6,capitalize:PT,deburr:RT,endsWith:K6,escape:nk,escapeRegExp:l5,kebabCase:A$,lowerCase:C$,lowerFirst:D$,pad:kF,padEnd:NF,padStart:PF,parseInt:DF,repeat:a9,replace:l9,snakeCase:A9,split:G9,startCase:X9,startsWith:q9,template:b7,templateSettings:ww,toLower:M7,toUpper:k7,trim:P7,trimEnd:R7,trimStart:D7,truncate:$7,unescape:G7,upperCase:Z7,upperFirst:fE,words:WT},No={attempt:ET,bindAll:n4,cond:A6,conforms:N6,constant:zA,defaultTo:$6,flow:M5,flowRight:A5,iteratee:O$,matches:F$,matchesProperty:B$,method:W$,methodOf:X$,noop:$A,nthArg:tF,over:iF,overEvery:uF,overSome:cF,property:CI,propertyOf:FF,range:W8,rangeRight:e9,stubArray:DI,stubFalse:qA,stubObject:Y9,stubString:K9,stubTrue:Z9,times:O7,toPath:A7,uniqueId:X8};function dV(){var e=new to(this.__wrapped__);return e.__actions__=Is(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Is(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Is(this.__views__),e}function fV(){if(this.__filtered__){var e=new to(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var pV=Math.max,hV=Math.min;function vV(e,t,n){for(var o=-1,r=n.length;++o<r;){var s=n[o],c=s.size;switch(s.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=hV(t,e+c);break;case"takeRight":e=pV(e,t-c);break}}return{start:e,end:t}}var mV=1,yV=2,gV=Math.min;function _V(){var e=this.__wrapped__.value(),t=this.__dir__,n=va(e),o=t<0,r=n?e.length:0,s=vV(0,r,this.__views__),c=s.start,f=s.end,d=f-c,_=o?f:c-1,y=this.__iteratees__,b=y.length,x=0,M=gV(d,this.__takeCount__);if(!n||!o&&r==d&&M==d)return Mk(e,this.__actions__);var S=[];e:for(;d--&&x<M;){_+=t;for(var E=-1,w=e[_];++E<b;){var C=y[E],j=C.iteratee,B=C.type,$=j(w);if(B==yV)w=$;else if(!$){if(B==mV)continue e;break e}}S[x++]=w}return S}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var bV="4.17.21",wV=2,EV=1,OV=3,Rk=4294967295,SV=Array.prototype,xV=Object.prototype,Ck=xV.hasOwnProperty,hx=Ng?Ng.iterator:void 0,MV=Math.max,vx=Math.min,kE=function(e){return function(t,n,o){if(o==null){var r=zf(n),s=r&&yc(n),c=s&&s.length&&__(n,s);(c?c.length:r)||(o=n,n=t,t=this)}return e(t,n,o)}}(q$);de.after=ji.after;de.ary=ji.ary;de.assign=Nr.assign;de.assignIn=Nr.assignIn;de.assignInWith=Nr.assignInWith;de.assignWith=Nr.assignWith;de.at=Nr.at;de.before=ji.before;de.bind=ji.bind;de.bindAll=No.bindAll;de.bindKey=ji.bindKey;de.castArray=pr.castArray;de.chain=_c.chain;de.chunk=Gn.chunk;de.compact=Gn.compact;de.concat=Gn.concat;de.cond=No.cond;de.conforms=No.conforms;de.constant=No.constant;de.countBy=Go.countBy;de.create=Nr.create;de.curry=ji.curry;de.curryRight=ji.curryRight;de.debounce=ji.debounce;de.defaults=Nr.defaults;de.defaultsDeep=Nr.defaultsDeep;de.defer=ji.defer;de.delay=ji.delay;de.difference=Gn.difference;de.differenceBy=Gn.differenceBy;de.differenceWith=Gn.differenceWith;de.drop=Gn.drop;de.dropRight=Gn.dropRight;de.dropRightWhile=Gn.dropRightWhile;de.dropWhile=Gn.dropWhile;de.fill=Gn.fill;de.filter=Go.filter;de.flatMap=Go.flatMap;de.flatMapDeep=Go.flatMapDeep;de.flatMapDepth=Go.flatMapDepth;de.flatten=Gn.flatten;de.flattenDeep=Gn.flattenDeep;de.flattenDepth=Gn.flattenDepth;de.flip=ji.flip;de.flow=No.flow;de.flowRight=No.flowRight;de.fromPairs=Gn.fromPairs;de.functions=Nr.functions;de.functionsIn=Nr.functionsIn;de.groupBy=Go.groupBy;de.initial=Gn.initial;de.intersection=Gn.intersection;de.intersectionBy=Gn.intersectionBy;de.intersectionWith=Gn.intersectionWith;de.invert=Nr.invert;de.invertBy=Nr.invertBy;de.invokeMap=Go.invokeMap;de.iteratee=No.iteratee;de.keyBy=Go.keyBy;de.keys=yc;de.keysIn=Nr.keysIn;de.map=Go.map;de.mapKeys=Nr.mapKeys;de.mapValues=Nr.mapValues;de.matches=No.matches;de.matchesProperty=No.matchesProperty;de.memoize=ji.memoize;de.merge=Nr.merge;de.mergeWith=Nr.mergeWith;de.method=No.method;de.methodOf=No.methodOf;de.mixin=kE;de.negate=aE;de.nthArg=No.nthArg;de.omit=Nr.omit;de.omitBy=Nr.omitBy;de.once=ji.once;de.orderBy=Go.orderBy;de.over=No.over;de.overArgs=ji.overArgs;de.overEvery=No.overEvery;de.overSome=No.overSome;de.partial=ji.partial;de.partialRight=ji.partialRight;de.partition=Go.partition;de.pick=Nr.pick;de.pickBy=Nr.pickBy;de.property=No.property;de.propertyOf=No.propertyOf;de.pull=Gn.pull;de.pullAll=Gn.pullAll;de.pullAllBy=Gn.pullAllBy;de.pullAllWith=Gn.pullAllWith;de.pullAt=Gn.pullAt;de.range=No.range;de.rangeRight=No.rangeRight;de.rearg=ji.rearg;de.reject=Go.reject;de.remove=Gn.remove;de.rest=ji.rest;de.reverse=Gn.reverse;de.sampleSize=Go.sampleSize;de.set=Nr.set;de.setWith=Nr.setWith;de.shuffle=Go.shuffle;de.slice=Gn.slice;de.sortBy=Go.sortBy;de.sortedUniq=Gn.sortedUniq;de.sortedUniqBy=Gn.sortedUniqBy;de.split=Oo.split;de.spread=ji.spread;de.tail=Gn.tail;de.take=Gn.take;de.takeRight=Gn.takeRight;de.takeRightWhile=Gn.takeRightWhile;de.takeWhile=Gn.takeWhile;de.tap=_c.tap;de.throttle=ji.throttle;de.thru=S_;de.toArray=pr.toArray;de.toPairs=Nr.toPairs;de.toPairsIn=Nr.toPairsIn;de.toPath=No.toPath;de.toPlainObject=pr.toPlainObject;de.transform=Nr.transform;de.unary=ji.unary;de.union=Gn.union;de.unionBy=Gn.unionBy;de.unionWith=Gn.unionWith;de.uniq=Gn.uniq;de.uniqBy=Gn.uniqBy;de.uniqWith=Gn.uniqWith;de.unset=Nr.unset;de.unzip=Gn.unzip;de.unzipWith=Gn.unzipWith;de.update=Nr.update;de.updateWith=Nr.updateWith;de.values=Nr.values;de.valuesIn=Nr.valuesIn;de.without=Gn.without;de.words=Oo.words;de.wrap=ji.wrap;de.xor=Gn.xor;de.xorBy=Gn.xorBy;de.xorWith=Gn.xorWith;de.zip=Gn.zip;de.zipObject=Gn.zipObject;de.zipObjectDeep=Gn.zipObjectDeep;de.zipWith=Gn.zipWith;de.entries=Nr.toPairs;de.entriesIn=Nr.toPairsIn;de.extend=Nr.assignIn;de.extendWith=Nr.assignInWith;kE(de,de);de.add=vl.add;de.attempt=No.attempt;de.camelCase=Oo.camelCase;de.capitalize=Oo.capitalize;de.ceil=vl.ceil;de.clamp=TE.clamp;de.clone=pr.clone;de.cloneDeep=pr.cloneDeep;de.cloneDeepWith=pr.cloneDeepWith;de.cloneWith=pr.cloneWith;de.conformsTo=pr.conformsTo;de.deburr=Oo.deburr;de.defaultTo=No.defaultTo;de.divide=vl.divide;de.endsWith=Oo.endsWith;de.eq=pr.eq;de.escape=Oo.escape;de.escapeRegExp=Oo.escapeRegExp;de.every=Go.every;de.find=Go.find;de.findIndex=Gn.findIndex;de.findKey=Nr.findKey;de.findLast=Go.findLast;de.findLastIndex=Gn.findLastIndex;de.findLastKey=Nr.findLastKey;de.floor=vl.floor;de.forEach=Go.forEach;de.forEachRight=Go.forEachRight;de.forIn=Nr.forIn;de.forInRight=Nr.forInRight;de.forOwn=Nr.forOwn;de.forOwnRight=Nr.forOwnRight;de.get=Nr.get;de.gt=pr.gt;de.gte=pr.gte;de.has=Nr.has;de.hasIn=Nr.hasIn;de.head=Gn.head;de.identity=nh;de.includes=Go.includes;de.indexOf=Gn.indexOf;de.inRange=TE.inRange;de.invoke=Nr.invoke;de.isArguments=pr.isArguments;de.isArray=va;de.isArrayBuffer=pr.isArrayBuffer;de.isArrayLike=pr.isArrayLike;de.isArrayLikeObject=pr.isArrayLikeObject;de.isBoolean=pr.isBoolean;de.isBuffer=pr.isBuffer;de.isDate=pr.isDate;de.isElement=pr.isElement;de.isEmpty=pr.isEmpty;de.isEqual=pr.isEqual;de.isEqualWith=pr.isEqualWith;de.isError=pr.isError;de.isFinite=pr.isFinite;de.isFunction=pr.isFunction;de.isInteger=pr.isInteger;de.isLength=pr.isLength;de.isMap=pr.isMap;de.isMatch=pr.isMatch;de.isMatchWith=pr.isMatchWith;de.isNaN=pr.isNaN;de.isNative=pr.isNative;de.isNil=pr.isNil;de.isNull=pr.isNull;de.isNumber=pr.isNumber;de.isObject=zf;de.isObjectLike=pr.isObjectLike;de.isPlainObject=pr.isPlainObject;de.isRegExp=pr.isRegExp;de.isSafeInteger=pr.isSafeInteger;de.isSet=pr.isSet;de.isString=pr.isString;de.isSymbol=pr.isSymbol;de.isTypedArray=pr.isTypedArray;de.isUndefined=pr.isUndefined;de.isWeakMap=pr.isWeakMap;de.isWeakSet=pr.isWeakSet;de.join=Gn.join;de.kebabCase=Oo.kebabCase;de.last=xu;de.lastIndexOf=Gn.lastIndexOf;de.lowerCase=Oo.lowerCase;de.lowerFirst=Oo.lowerFirst;de.lt=pr.lt;de.lte=pr.lte;de.max=vl.max;de.maxBy=vl.maxBy;de.mean=vl.mean;de.meanBy=vl.meanBy;de.min=vl.min;de.minBy=vl.minBy;de.stubArray=No.stubArray;de.stubFalse=No.stubFalse;de.stubObject=No.stubObject;de.stubString=No.stubString;de.stubTrue=No.stubTrue;de.multiply=vl.multiply;de.nth=Gn.nth;de.noop=No.noop;de.now=cV.now;de.pad=Oo.pad;de.padEnd=Oo.padEnd;de.padStart=Oo.padStart;de.parseInt=Oo.parseInt;de.random=TE.random;de.reduce=Go.reduce;de.reduceRight=Go.reduceRight;de.repeat=Oo.repeat;de.replace=Oo.replace;de.result=Nr.result;de.round=vl.round;de.sample=Go.sample;de.size=Go.size;de.snakeCase=Oo.snakeCase;de.some=Go.some;de.sortedIndex=Gn.sortedIndex;de.sortedIndexBy=Gn.sortedIndexBy;de.sortedIndexOf=Gn.sortedIndexOf;de.sortedLastIndex=Gn.sortedLastIndex;de.sortedLastIndexBy=Gn.sortedLastIndexBy;de.sortedLastIndexOf=Gn.sortedLastIndexOf;de.startCase=Oo.startCase;de.startsWith=Oo.startsWith;de.subtract=vl.subtract;de.sum=vl.sum;de.sumBy=vl.sumBy;de.template=Oo.template;de.times=No.times;de.toFinite=pr.toFinite;de.toInteger=lo;de.toLength=pr.toLength;de.toLower=Oo.toLower;de.toNumber=pr.toNumber;de.toSafeInteger=pr.toSafeInteger;de.toString=pr.toString;de.toUpper=Oo.toUpper;de.trim=Oo.trim;de.trimEnd=Oo.trimEnd;de.trimStart=Oo.trimStart;de.truncate=Oo.truncate;de.unescape=Oo.unescape;de.uniqueId=No.uniqueId;de.upperCase=Oo.upperCase;de.upperFirst=Oo.upperFirst;de.each=Go.forEach;de.eachRight=Go.forEachRight;de.first=Gn.head;kE(de,function(){var e={};return ah(de,function(t,n){Ck.call(de.prototype,n)||(e[n]=t)}),e}(),{chain:!1});de.VERSION=bV;(de.templateSettings=Oo.templateSettings).imports._=de;mc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){de[e].placeholder=de});mc(["drop","take"],function(e,t){to.prototype[e]=function(n){n=n===void 0?1:MV(lo(n),0);var o=this.__filtered__&&!t?new to(this):this.clone();return o.__filtered__?o.__takeCount__=vx(n,o.__takeCount__):o.__views__.push({size:vx(n,Rk),type:e+(o.__dir__<0?"Right":"")}),o},to.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});mc(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==EV||n==OV;to.prototype[e]=function(r){var s=this.clone();return s.__iteratees__.push({iteratee:To(r),type:n}),s.__filtered__=s.__filtered__||o,s}});mc(["head","last"],function(e,t){var n="take"+(t?"Right":"");to.prototype[e]=function(){return this[n](1).value()[0]}});mc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");to.prototype[e]=function(){return this.__filtered__?new to(this):this[n](1)}});to.prototype.compact=function(){return this.filter(nh)};to.prototype.find=function(e){return this.filter(e).head()};to.prototype.findLast=function(e){return this.reverse().find(e)};to.prototype.invokeMap=co(function(e,t){return typeof e=="function"?new to(this):this.map(function(n){return ty(n,e,t)})});to.prototype.reject=function(e){return this.filter(aE(To(e)))};to.prototype.slice=function(e,t){e=lo(e);var n=this;return n.__filtered__&&(e>0||t<0)?new to(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=lo(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};to.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};to.prototype.toArray=function(){return this.take(Rk)};ah(to.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),r=de[o?"take"+(t=="last"?"Right":""):t],s=o||/^find/.test(t);r&&(de.prototype[t]=function(){var c=this.__wrapped__,f=o?[1]:arguments,d=c instanceof to,_=f[0],y=d||va(c),b=function(C){var j=r.apply(de,qm([C],f));return o&&x?j[0]:j};y&&n&&typeof _=="function"&&_.length!=1&&(d=y=!1);var x=this.__chain__,M=!!this.__actions__.length,S=s&&!x,E=d&&!M;if(!s&&y){c=E?c:new to(this);var w=e.apply(c,f);return w.__actions__.push({func:S_,args:[b],thisArg:void 0}),new $s(w,x)}return S&&E?e.apply(this,f):(w=this.thru(b),S?o?w.value()[0]:w.value():w)})});mc(["pop","push","shift","sort","splice","unshift"],function(e){var t=SV[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);de.prototype[e]=function(){var r=arguments;if(o&&!this.__chain__){var s=this.value();return t.apply(va(s)?s:[],r)}return this[n](function(c){return t.apply(va(c)?c:[],r)})}});ah(to.prototype,function(e,t){var n=de[t];if(n){var o=n.name+"";Ck.call(mv,o)||(mv[o]=[]),mv[o].push({name:t,func:n})}});mv[m_(void 0,wV).name]=[{name:"wrapper",func:void 0}];to.prototype.clone=dV;to.prototype.reverse=fV;to.prototype.value=_V;de.prototype.at=_c.at;de.prototype.chain=_c.wrapperChain;de.prototype.commit=_c.commit;de.prototype.next=_c.next;de.prototype.plant=_c.plant;de.prototype.reverse=_c.reverse;de.prototype.toJSON=de.prototype.valueOf=de.prototype.value=_c.value;de.prototype.first=de.prototype.head;hx&&(de.prototype[hx]=_c.toIterator);const AV="data:image/svg+xml,%3csvg%20width='27'%20height='20'%20viewBox='0%200%2027%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.6667%203.33329H3.66667V16.6666H23.6667V3.33329ZM3.66667%201.66663C2.74619%201.66663%202%202.41282%202%203.33329V16.6666C2%2017.5871%202.74619%2018.3333%203.66667%2018.3333H23.6667C24.5871%2018.3333%2025.3333%2017.5871%2025.3333%2016.6666V3.33329C25.3333%202.41282%2024.5871%201.66663%2023.6667%201.66663H3.66667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.2196%206.91331H18.2767L19.4%209.89549L20.4758%206.91331L22.5375%206.83044L19.4%2014.8138L17.3565%2014.8966L18.437%2012.3756L16.2196%206.91331Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.1034%207.06327C13.1302%207.04839%2013.1574%207.03404%2013.1848%207.02023C13.5166%206.84295%2013.8759%206.77344%2014.2468%206.77344C14.9611%206.77344%2015.5729%206.97047%2015.9992%207.43635C16.419%207.89521%2016.5934%208.54454%2016.5934%209.3101V12.9168H14.7001V9.4001C14.7001%209.01738%2014.6103%208.80651%2014.5052%208.69229C14.4059%208.58445%2014.2319%208.49677%2013.9067%208.49677C13.7078%208.49677%2013.5468%208.55932%2013.4114%208.69473C13.2534%208.85274%2013.1382%209.08146%2013.1034%209.41091V12.9168H11.2101V6.91344H13.1034V7.06327Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.01665%2012.6833V12.9168H10.83V9.2001C10.83%208.50266%2010.6523%207.90623%2010.247%207.47482L10.2458%207.47354C9.77726%206.97898%209.08554%206.77344%208.26332%206.77344C7.58671%206.77344%206.97894%206.88784%206.50606%207.18452C5.95355%207.51308%205.61381%208.04132%205.48446%208.69979L5.39493%209.15558L6.60828%209.25958C6.45695%209.32645%206.3157%209.40545%206.18578%209.49774C5.6067%209.89006%205.31665%2010.4724%205.31665%2011.1801C5.31665%2011.727%205.52656%2012.1949%205.95194%2012.5464C6.34831%2012.8992%206.87585%2013.0568%207.48332%2013.0568C7.99851%2013.0568%208.45994%2012.9557%208.86073%2012.7671L8.86966%2012.7628C8.91982%2012.7377%208.96882%2012.7112%209.01665%2012.6833ZM7.33362%209.04021C7.60234%208.98907%207.88998%208.96154%208.19236%208.95358L8.93243%208.93444C8.90662%208.77431%208.84911%208.68249%208.7882%208.62627C8.69958%208.54447%208.527%208.46677%208.19332%208.46677C7.90772%208.46677%207.72064%208.51963%207.60769%208.58739L7.60328%208.59004C7.46993%208.66783%207.38847%208.77506%207.35134%208.95452L7.33362%209.04021ZM8.93782%2010.5386L8.28478%2010.5566L8.28191%2010.5567C7.83203%2010.566%207.5658%2010.6502%207.4222%2010.7499C7.3054%2010.831%207.23998%2010.9409%207.23998%2011.1401C7.23998%2011.2037%207.25413%2011.2438%207.32642%2011.2991L7.3313%2011.3029L7.33606%2011.3067C7.40443%2011.3623%207.52395%2011.4134%207.72332%2011.4134C8.07815%2011.4134%208.36218%2011.3062%208.60462%2011.1017C8.80129%2010.9357%208.90794%2010.7499%208.93782%2010.5386Z'%20fill='%23646A73'/%3e%3c/svg%3e",TV="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.6667%203.33329H3.33335V16.6666H16.6667V3.33329ZM3.33335%201.66663C2.41288%201.66663%201.66669%202.41282%201.66669%203.33329V16.6666C1.66669%2017.5871%202.41288%2018.3333%203.33335%2018.3333H16.6667C17.5872%2018.3333%2018.3334%2017.5871%2018.3334%2016.6666V3.33329C18.3334%202.41282%2017.5872%201.66663%2016.6667%201.66663H3.33335Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.33%205.83667H15.2233V13.95H13.33V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.83%205.83667H12.7233V13.95H10.83V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.51665%2013.7165V13.95H10.33V10.2333C10.33%209.53587%2010.1523%208.93943%209.747%208.50803L9.7458%208.50675C9.27726%208.01218%208.58554%207.80664%207.76332%207.80664C7.08671%207.80664%206.47894%207.92104%206.00606%208.21772C5.45355%208.54628%205.11381%209.07452%204.98446%209.733L4.89493%2010.1888L6.10828%2010.2928C5.95695%2010.3597%205.8157%2010.4386%205.68578%2010.5309C5.1067%2010.9233%204.81665%2011.5057%204.81665%2012.2133C4.81665%2012.7602%205.02656%2013.2281%205.45194%2013.5796C5.84831%2013.9324%206.37585%2014.09%206.98332%2014.09C7.49851%2014.09%207.95994%2013.9889%208.36073%2013.8003L8.36966%2013.796C8.41982%2013.7709%208.46882%2013.7444%208.51665%2013.7165ZM6.83361%2010.0734C7.10234%2010.0223%207.38998%209.99474%207.69236%209.98678L8.43243%209.96764C8.40662%209.80751%208.3491%209.71569%208.2882%209.65948C8.19958%209.57767%208.027%209.49997%207.69332%209.49997C7.40772%209.49997%207.22064%209.55283%207.10769%209.6206L7.10328%209.62324C6.96993%209.70103%206.88847%209.80826%206.85134%209.98773L6.83361%2010.0734ZM8.43782%2011.5718L7.78478%2011.5898L7.78191%2011.5899C7.33203%2011.5992%207.0658%2011.6834%206.9222%2011.7831C6.8054%2011.8642%206.73998%2011.9741%206.73998%2012.1733C6.73998%2012.2369%206.75413%2012.277%206.82642%2012.3323L6.8313%2012.3361L6.83606%2012.3399C6.90443%2012.3955%207.02395%2012.4466%207.22332%2012.4466C7.57815%2012.4466%207.86218%2012.3394%208.10462%2012.1349C8.30129%2011.9689%208.40794%2011.7831%208.43782%2011.5718Z'%20fill='%23646A73'/%3e%3c/svg%3e",kV={class:"list flex-wrap"},NV=["onClick","onMousedown"],PV=["src"],RV=["title"],CV={class:"flex-between"},DV={class:"flex align-center"},jV=["src"],IV=["title"],LV={key:0,class:"status-tag",style:{"margin-left":"auto"}},mx=Rn({__name:"NodeContent",props:{list:{}},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=e,o=t,r=Ae(""),s=Ae([]);function c(f,d){return d.length?f.filter(_=>_.name.toLowerCase().includes(d.toLowerCase())):f}return Kf([()=>r.value,()=>n.list],()=>{s.value=c(n.list,r.value)}),(f,d)=>{const _=Y("el-input"),y=Y("el-avatar"),b=Y("el-tag"),x=Y("el-text"),M=Y("el-popover"),S=Y("el-empty");return ce(),Rt(Fn,null,[T(_,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=E=>r.value=E),modelModifiers:{trim:!0},placeholder:f.$t("common.search"),"prefix-icon":"Search",clearable:"",style:{padding:"12px 12px 0 12px"}},null,8,["modelValue","placeholder"]),X("div",kV,[s.value.length?(ce(!0),Rt(Fn,{key:0},Tr(s.value,E=>(ce(),Ge(M,{key:E.id,placement:"right",width:280,"show-after":500},{reference:N(()=>[X("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:Bt(w=>o("clickNodes",E),["stop"]),onMousedown:Bt(w=>o("onmousedown",E),["stop"])},[Jt(Mv)(E==null?void 0:E.icon)?(ce(),Ge(y,{key:0,shape:"square",size:20,style:{background:"none"}},{default:N(()=>[X("img",{src:Jt(fl)(E==null?void 0:E.icon,Jt(fl)("./favicon.ico")),alt:""},null,8,PV)]),_:2},1024)):(ce(),Ge(y,{key:1,class:"avatar-green",shape:"square",size:20},{default:N(()=>d[1]||(d[1]=[X("img",{src:BS,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[1]})),X("span",{class:"ml-8 ellipsis",title:E.name},fe(E.name),9,RV)],40,NV)]),default:N(()=>[X("div",CV,[X("div",DV,[Jt(Mv)(E==null?void 0:E.icon)?(ce(),Ge(y,{key:0,shape:"square",size:20,style:{background:"none"}},{default:N(()=>[X("img",{src:Jt(fl)(E==null?void 0:E.icon,Jt(fl)("./favicon.ico")),alt:""},null,8,jV)]),_:2},1024)):(ce(),Ge(y,{key:1,class:"avatar-green",shape:"square",size:20},{default:N(()=>d[2]||(d[2]=[X("img",{src:BS,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[2]})),X("span",{class:"font-medium ml-8 break-all",title:E.name},fe(E.name),9,IV)]),E.type?(ce(),Rt("div",LV,[Jt(Jw)(E.type)?(ce(),Ge(b,{key:0,class:"warning-tag"},{default:N(()=>[Je(fe(f.$t("views.application.workflow")),1)]),_:1})):(ce(),Ge(b,{key:1,class:"blue-tag"},{default:N(()=>[Je(fe(f.$t("views.application.simple")),1)]),_:1}))])):Qt("",!0)]),T(x,{type:"info",size:"small",class:"mt-4"},{default:N(()=>[Je(fe(E.desc),1)]),_:2},1024)]),_:2},1024))),128)):(ce(),Ge(S,{key:1,description:f.$t("common.noData")},null,8,["description"]))])],64)}}}),$V={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-12 mt-12"},FV={key:0},VV={class:"flex-wrap",style:{gap:"12px",padding:"12px"}},BV=["onClick","onMousedown"],UV={class:"lighter"},GV={class:"flex align-center mb-8"},zV={class:"lighter color-text-primary"},HV={key:1,class:"ml-16 mt-8"},yx=Rn({__name:"index",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=ko("workflowMode"),o=Zi(),{user:r,folder:s}=c_(),c=f_(n||br.Application),f=Ae(""),d=e,_=t,y=jn(()=>o.path.includes("shared")?"systemShare":o.path.includes("resource-management")?"systemManage":"workspace");jn(()=>Qw.tool[y.value]);const b=Ae(!1),x=Ae("base"),M=jn(()=>{if(!f.value)return c||[];const G=f.value.toLowerCase();return(c||[]).reduce((W,K)=>{const J=K.list.filter(q=>q.label.toLowerCase().includes(G));return J.length&&W.push({...K,list:J}),W},[])});function S(G,W,K){var J;W&&(G.properties.nodeName=W.name,K=="tool"&&(G.properties.nodeData={...W,toolLibId:W.id,inputFieldList:W.inputFieldList.map(q=>({...q,value:q.source=="reference"?[]:""}))}),K=="application"&&(G.properties.nodeData={name:W.name,icon:W.icon,applicationId:W.id})),(J=d.workflowRef)==null||J.addNode(G),_("clickNodes",G)}function E(G,W,K){var J;W&&(G.properties.nodeName=W.name,K=="tool"&&(G.properties.nodeData={...W,toolLibId:W.id,inputFieldList:W.inputFieldList.map(q=>({...q,value:q.source=="reference"?[]:""}))}),K=="application"&&(Jw(W.type)?(W.workFlow.nodes[0].properties.nodeData.file_upload_setting,G.properties.nodeData={name:W.name,icon:W.icon,applicationId:W.id}):G.properties.nodeData={name:W.name,icon:W.icon,applicationId:W.id})),(J=d.workflowRef)==null||J.onmousedown(G),_("onmousedown",G)}const w=Ae([]),C=Ae([]);async function j(){var W;const G=await s.asyncGetFolder(fw.TOOL,{source_id:d.id},y.value,b);w.value=G.data,s.setCurrentFolder(((W=G.data)==null?void 0:W[0])||{})}async function B(){var W,K,J,q;const G=await ni({type:"tool",isShared:((W=s.currentFolder)==null?void 0:W.id)==="share",systemType:y.value}).getToolList({folderId:((K=s.currentFolder)==null?void 0:K.id)||r.getWorkspaceId(),toolType:"CUSTOM"});C.value=((J=G.data)==null?void 0:J.tools)||G.data||[],C.value=(q=C.value)==null?void 0:q.filter(ne=>ne.isActive)}const $=Ae([]),U=Ae([]);function I(){s.asyncGetFolder(fw.APPLICATION,{source_id:d.id},y.value,b).then(G=>{var W;$.value=G.data,s.setCurrentFolder(((W=G.data)==null?void 0:W[0])||{})})}async function F(){var W;const G=await ni({type:"application",systemType:y.value}).getAllApplication({folderId:((W=s.currentFolder)==null?void 0:W.id)||r.getWorkspaceId()});U.value=G.data.filter(K=>K.id!==d.id&&K.isPublish)}async function Z(G){G==="tool"?(await j(),B()):G==="application"&&(I(),F())}return kr(()=>{}),(G,W)=>{const K=Y("search"),J=Y("el-icon"),q=Y("el-input"),ne=Y("el-text"),oe=Y("el-popover"),Me=Y("el-scrollbar"),Pe=Y("el-tab-pane"),Ee=Y("el-tabs");return Ca((ce(),Rt("div",{class:"workflow-dropdown-menu border border-r-6 white-bg",style:Zm({width:(x.value==="base","400px")})},[T(Ee,{modelValue:x.value,"onUpdate:modelValue":W[5]||(W[5]=we=>x.value=we),class:"workflow-dropdown-tabs",onTabChange:Z},{default:N(()=>[Ca(X("div",$V,[T(q,{modelValue:f.value,"onUpdate:modelValue":W[0]||(W[0]=we=>f.value=we),class:"mr-12 ml-12",placeholder:G.$t("common.searchBar.placeholder")},{suffix:N(()=>[T(J,{class:"el-input__icon"},{default:N(()=>[T(K)]),_:1})]),_:1},8,["modelValue","placeholder"])],512),[[Mu,x.value==="base"]]),T(Pe,{label:G.$t("workflow.baseComponent"),name:"base"},{default:N(()=>[T(Me,{height:"400"},{default:N(()=>[M.value.length>0?(ce(),Rt("div",FV,[(ce(!0),Rt(Fn,null,Tr(M.value,(we,Be)=>(ce(),Rt(Fn,{key:Be},[T(ne,{type:"info",size:"small",class:"color-secondary ml-12"},{default:N(()=>[Je(fe(we.label),1)]),_:2},1024),X("div",VV,[(ce(!0),Rt(Fn,null,Tr(we.list,(nt,Ot)=>(ce(),Ge(oe,{key:Ot,placement:"right",width:280,"show-after":500},{reference:N(()=>[X("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:Bt(Qe=>S(nt),["stop"]),onMousedown:Bt(Qe=>E(nt),["stop"])},[(ce(),Ge(Pd(Jt(Hf)(`${nt.type}-icon`)),{class:"mr-8",size:20})),X("div",UV,fe(nt.label),1)],40,BV)]),default:N(()=>[X("div",GV,[(ce(),Ge(Pd(Jt(Hf)(`${nt.type}-icon`)),{class:"mr-8",size:32})),X("div",zV,fe(nt.label),1)]),T(ne,{type:"info",size:"small",class:"color-secondary lighter"},{default:N(()=>[Je(fe(nt.text),1)]),_:2},1024)]),_:2},1024))),128))])],64))),128))])):(ce(),Rt("div",HV,[T(ne,{type:"info"},{default:N(()=>[Je(fe(G.$t("workflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),T(Pe,{label:G.$t("views.tool.title"),name:"tool"},{default:N(()=>[T(Me,{height:"450"},{default:N(()=>[T(mx,{list:C.value,onClickNodes:W[1]||(W[1]=we=>S(Jt(kv),we,"tool")),onOnmousedown:W[2]||(W[2]=we=>E(Jt(kv),we,"tool"))},null,8,["list"])]),_:1})]),_:1},8,["label"]),T(Pe,{label:G.$t("views.application.title"),name:"application"},{default:N(()=>[T(eE),T(Me,{height:"450"},{default:N(()=>[T(mx,{list:U.value,onClickNodes:W[3]||(W[3]=we=>S(Jt(GS),we,"application")),onOnmousedown:W[4]||(W[4]=we=>E(Jt(GS),we,"application"))},null,8,["list"])]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],4)),[[Mu,e.show]])}}}),WV={class:"list flex-wrap"},XV=["onClick","onMousedown"],qV=["src"],YV=["title"],KV={class:"flex-between"},ZV={class:"flex align-center"},JV=["src"],QV=["title"],eB=Rn({__name:"NodeContent",props:{list:{}},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=e,o=t,r=Ae(""),s=Ae([]);function c(f,d){return d.length?f.filter(_=>_.name.toLowerCase().includes(d.toLowerCase())):f}return Kf([()=>r.value,()=>n.list],()=>{s.value=c(n.list,r.value)}),(f,d)=>{const _=Y("el-input"),y=Y("el-avatar"),b=Y("ToolIcon"),x=Y("el-text"),M=Y("el-popover"),S=Y("el-empty");return ce(),Rt(Fn,null,[T(_,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=E=>r.value=E),modelModifiers:{trim:!0},placeholder:f.$t("common.search"),"prefix-icon":"Search",clearable:"",style:{padding:"12px 12px 0 12px"}},null,8,["modelValue","placeholder"]),X("div",WV,[s.value.length?(ce(!0),Rt(Fn,{key:0},Tr(s.value,E=>(ce(),Ge(M,{key:E.id,placement:"right",width:280,"show-after":500},{reference:N(()=>[X("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:Bt(w=>o("clickNodes",E),["stop"]),onMousedown:Bt(w=>o("onmousedown",E),["stop"])},[Jt(Mv)(E==null?void 0:E.icon)?(ce(),Ge(y,{key:0,shape:"square",size:20,style:{background:"none"}},{default:N(()=>[X("img",{src:Jt(fl)(E==null?void 0:E.icon,Jt(fl)("./favicon.ico")),alt:""},null,8,qV)]),_:2},1024)):(ce(),Ge(b,{key:1,size:20,type:E==null?void 0:E.toolType},null,8,["type"])),X("span",{class:"ml-8 ellipsis",title:E.name},fe(E.name),9,YV)],40,XV)]),default:N(()=>[X("div",KV,[X("div",ZV,[Jt(Mv)(E==null?void 0:E.icon)?(ce(),Ge(y,{key:0,shape:"square",size:20,style:{background:"none"}},{default:N(()=>[X("img",{src:Jt(fl)(E==null?void 0:E.icon,Jt(fl)("./favicon.ico")),alt:""},null,8,JV)]),_:2},1024)):(ce(),Ge(b,{key:1,size:20,type:E==null?void 0:E.toolType},null,8,["type"])),X("span",{class:"font-medium ml-8 break-all",title:E.name},fe(E.name),9,QV)])]),T(x,{type:"info",size:"small",class:"mt-4"},{default:N(()=>[Je(fe(E.desc),1)]),_:2},1024)]),_:2},1024))),128)):(ce(),Ge(S,{key:1,description:f.$t("common.noData")},null,8,["description"]))])],64)}}}),tB={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-12 mt-12"},nB={key:0},rB={class:"flex-wrap",style:{gap:"12px",padding:"12px"}},oB=["onClick","onMousedown"],iB={class:"lighter"},aB={class:"flex align-center mb-8"},lB={class:"lighter color-text-primary"},sB={key:1,class:"ml-16 mt-8"},gx=Rn({__name:"index",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=ko("workflowMode"),o=Zi(),{user:r,folder:s}=c_(),c=f_(n||br.Application),f=Ae(""),d=e,_=t,y=jn(()=>o.path.includes("shared")?"systemShare":o.path.includes("resource-management")?"systemManage":"workspace");jn(()=>Qw.tool[y.value]),Ae(!1);const b=Ae("base"),x=jn(()=>{if(!f.value)return c||[];const j=f.value.toLowerCase();return(c||[]).reduce((B,$)=>{const U=$.list.filter(I=>I.label.toLowerCase().includes(j));return U.length&&B.push({...$,list:U}),B},[])});function M(j,B){var $;B&&(j.properties.nodeName=B.name,B.toolType=="DATA_SOURCE"&&(j.properties.kind=dc.DataSource),j.properties.nodeData={...B,toolLibId:B.id,inputFieldList:B.inputFieldList.map(U=>({...U,value:U.source=="reference"?[]:""}))}),j.properties.condition="OR",($=d.workflowRef)==null||$.addNode(j),_("clickNodes",j)}function S(j,B){var $;B&&(j.properties.nodeName=B.name,B.toolType=="DATA_SOURCE"&&(j.properties.kind=dc.DataSource),j.properties.nodeData={...B,toolLibId:B.id,inputFieldList:B.inputFieldList.map(U=>({...U,value:U.source=="reference"?[]:""}))}),j.properties.condition="OR",($=d.workflowRef)==null||$.onmousedown(j),_("onmousedown",j)}Ae([]);const E=Ae([]);async function w(){var B,$,U,I;const j=await ni({type:"tool",isShared:((B=s.currentFolder)==null?void 0:B.id)==="share",systemType:y.value}).getToolList({folderId:(($=s.currentFolder)==null?void 0:$.id)||r.getWorkspaceId(),toolType:b.value=="DATA_SOURCE_TOOL"?"DATA_SOURCE":"CUSTOM"});E.value=((U=j.data)==null?void 0:U.tools)||j.data||[],E.value=(I=E.value)==null?void 0:I.filter(F=>F.isActive)}async function C(j){["DATA_SOURCE_TOOL","CUSTOM_TOOL"].includes(j)&&await w()}return kr(()=>{}),(j,B)=>{const $=Y("search"),U=Y("el-icon"),I=Y("el-input"),F=Y("el-text"),Z=Y("el-popover"),G=Y("el-scrollbar"),W=Y("el-tab-pane"),K=Y("el-tabs");return Ca((ce(),Rt("div",{class:"workflow-dropdown-menu border border-r-6 white-bg",style:Zm({width:(b.value==="base","400px")})},[T(K,{modelValue:b.value,"onUpdate:modelValue":B[3]||(B[3]=J=>b.value=J),class:"workflow-dropdown-tabs",onTabChange:C},{default:N(()=>[Ca(X("div",tB,[T(I,{modelValue:f.value,"onUpdate:modelValue":B[0]||(B[0]=J=>f.value=J),class:"mr-12 ml-12",placeholder:j.$t("common.searchBar.placeholder")},{suffix:N(()=>[T(U,{class:"el-input__icon"},{default:N(()=>[T($)]),_:1})]),_:1},8,["modelValue","placeholder"])],512),[[Mu,b.value==="base"]]),T(W,{label:j.$t("workflow.baseComponent"),name:"base"},{default:N(()=>[T(G,{height:"400"},{default:N(()=>[x.value.length>0?(ce(),Rt("div",nB,[(ce(!0),Rt(Fn,null,Tr(x.value,(J,q)=>(ce(),Rt(Fn,{key:q},[T(F,{type:"info",size:"small",class:"color-secondary ml-12"},{default:N(()=>[Je(fe(J.label),1)]),_:2},1024),X("div",rB,[(ce(!0),Rt(Fn,null,Tr(J.list,(ne,oe)=>(ce(),Ge(Z,{key:oe,placement:"right",width:280,"show-after":500},{reference:N(()=>[X("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:Bt(Me=>M(ne),["stop"]),onMousedown:Bt(Me=>S(ne),["stop"])},[(ce(),Ge(Pd(Jt(Hf)(`${ne.type}-icon`)),{class:"mr-8",size:20})),X("div",iB,fe(ne.label),1)],40,oB)]),default:N(()=>[X("div",aB,[(ce(),Ge(Pd(Jt(Hf)(`${ne.type}-icon`)),{class:"mr-8",size:32})),X("div",lB,fe(ne.label),1)]),T(F,{type:"info",size:"small",class:"color-secondary lighter"},{default:N(()=>[Je(fe(ne.text),1)]),_:2},1024)]),_:2},1024))),128))])],64))),128))])):(ce(),Rt("div",sB,[T(F,{type:"info"},{default:N(()=>[Je(fe(j.$t("workflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),T(W,{label:j.$t("views.tool.title"),name:"CUSTOM_TOOL"},{default:N(()=>[T(eE,{"show-collapse":""},{default:N(()=>[T(G,{height:"450"},{default:N(()=>[T(eB,{list:E.value,onClickNodes:B[1]||(B[1]=J=>M(Jt(kv),J)),onOnmousedown:B[2]||(B[2]=J=>S(Jt(kv),J))},null,8,["list"])]),_:1})]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],4)),[[Mu,e.show]])}}}),uB={class:"list flex-wrap"},cB=["onClick","onMousedown"],dB=["src"],fB=["title"],pB={class:"flex-between"},hB={class:"flex align-center"},vB=["src"],mB=["title"],yB=Rn({__name:"NodeContent",props:{list:{}},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=e,o=t,r=Ae(""),s=Ae([]);function c(f,d){return d.length?f.filter(_=>_.name.toLowerCase().includes(d.toLowerCase())):f}return Kf([()=>r.value,()=>n.list],()=>{s.value=c(n.list,r.value)}),(f,d)=>{const _=Y("el-input"),y=Y("el-avatar"),b=Y("ToolIcon"),x=Y("el-text"),M=Y("el-popover"),S=Y("el-empty");return ce(),Rt(Fn,null,[T(_,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=E=>r.value=E),modelModifiers:{trim:!0},placeholder:f.$t("common.search"),"prefix-icon":"Search",clearable:"",style:{padding:"12px 12px 0 12px"}},null,8,["modelValue","placeholder"]),X("div",uB,[s.value.length?(ce(!0),Rt(Fn,{key:0},Tr(s.value,E=>(ce(),Ge(M,{key:E.id,placement:"right",width:280,"show-after":500},{reference:N(()=>[X("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:Bt(w=>o("clickNodes",E),["stop"]),onMousedown:Bt(w=>o("onmousedown",E),["stop"])},[Jt(Mv)(E==null?void 0:E.icon)?(ce(),Ge(y,{key:0,shape:"square",size:20,style:{background:"none"}},{default:N(()=>[X("img",{src:Jt(fl)(E==null?void 0:E.icon,Jt(fl)("./favicon.ico")),alt:""},null,8,dB)]),_:2},1024)):(ce(),Ge(b,{key:1,size:20,type:E==null?void 0:E.toolType},null,8,["type"])),X("span",{class:"ml-8 ellipsis",title:E.name},fe(E.name),9,fB)],40,cB)]),default:N(()=>[X("div",pB,[X("div",hB,[Jt(Mv)(E==null?void 0:E.icon)?(ce(),Ge(y,{key:0,shape:"square",size:20,style:{background:"none"}},{default:N(()=>[X("img",{src:Jt(fl)(E==null?void 0:E.icon,Jt(fl)("./favicon.ico")),alt:""},null,8,vB)]),_:2},1024)):(ce(),Ge(b,{key:1,size:20,type:E==null?void 0:E.toolType},null,8,["type"])),X("span",{class:"font-medium ml-8 break-all",title:E.name},fe(E.name),9,mB)])]),T(x,{type:"info",size:"small",class:"mt-4"},{default:N(()=>[Je(fe(E.desc),1)]),_:2},1024)]),_:2},1024))),128)):(ce(),Ge(S,{key:1,description:f.$t("common.noData")},null,8,["description"]))])],64)}}}),gB={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-12 mt-12"},_B={key:0},bB={class:"flex-wrap",style:{gap:"12px",padding:"12px"}},wB=["onClick","onMousedown"],EB={class:"lighter"},OB={class:"flex align-center mb-8"},SB={class:"lighter color-text-primary"},xB={key:1,class:"ml-16 mt-8"},_x=Rn({__name:"index",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=ko("workflowMode"),o=Zi(),{user:r,folder:s}=c_(),c=f_(n||br.Application),f=Ae(""),d=e,_=t,y=jn(()=>o.path.includes("shared")?"systemShare":o.path.includes("resource-management")?"systemManage":"workspace");jn(()=>Qw.tool[y.value]);const b=Ae(!1),x=Ae("base"),M=jn(()=>{if(!f.value)return c||[];const U=f.value.toLowerCase();return(c||[]).reduce((I,F)=>{const Z=F.list.filter(G=>G.label.toLowerCase().includes(U));return Z.length&&I.push({...F,list:Z}),I},[])});function S(U,I){var F;I&&(U.properties.nodeName=I.name,I.toolType=="DATA_SOURCE"&&(U.properties.kind=dc.DataSource),U.properties.nodeData={...I,toolLibId:I.id,inputFieldList:I.inputFieldList.map(Z=>({...Z,value:Z.source=="reference"?[]:""}))}),U.properties.condition="OR",(F=d.workflowRef)==null||F.addNode(U),_("clickNodes",U)}function E(U,I){var F;I&&(U.properties.nodeName=I.name,I.toolType=="DATA_SOURCE"&&(U.properties.kind=dc.DataSource),U.properties.nodeData={...I,toolLibId:I.id,inputFieldList:I.inputFieldList.map(Z=>({...Z,value:Z.source=="reference"?[]:""}))}),U.properties.condition="OR",(F=d.workflowRef)==null||F.onmousedown(U),_("onmousedown",U)}const w=Ae([]),C=Ae([]);async function j(){var I;const U=await s.asyncGetFolder(fw.TOOL,{source_id:d.id},y.value,b);w.value=U.data,s.setCurrentFolder(((I=U.data)==null?void 0:I[0])||{})}async function B(){var I,F,Z,G;const U=await ni({type:"tool",isShared:((I=s.currentFolder)==null?void 0:I.id)==="share",systemType:y.value}).getToolList({folderId:((F=s.currentFolder)==null?void 0:F.id)||r.getWorkspaceId(),toolType:x.value=="DATA_SOURCE_TOOL"?"DATA_SOURCE":"CUSTOM"});C.value=((Z=U.data)==null?void 0:Z.tools)||U.data||[],C.value=(G=C.value)==null?void 0:G.filter(W=>W.isActive)}async function $(U){["DATA_SOURCE_TOOL","CUSTOM_TOOL"].includes(U)&&(o.path.includes("shared")||await j(),B())}return kr(()=>{}),(U,I)=>{const F=Y("search"),Z=Y("el-icon"),G=Y("el-input"),W=Y("el-text"),K=Y("el-popover"),J=Y("el-scrollbar"),q=Y("el-tab-pane"),ne=Y("el-tabs");return Ca((ce(),Rt("div",{class:"workflow-dropdown-menu border border-r-6 white-bg",style:Zm({width:(x.value==="base"||Jt(o).path.includes("shared"),"400px")})},[T(ne,{modelValue:x.value,"onUpdate:modelValue":I[3]||(I[3]=oe=>x.value=oe),class:"workflow-dropdown-tabs",onTabChange:$},{default:N(()=>[Ca(X("div",gB,[T(G,{modelValue:f.value,"onUpdate:modelValue":I[0]||(I[0]=oe=>f.value=oe),class:"mr-12 ml-12",placeholder:U.$t("common.searchBar.placeholder")},{suffix:N(()=>[T(Z,{class:"el-input__icon"},{default:N(()=>[T(F)]),_:1})]),_:1},8,["modelValue","placeholder"])],512),[[Mu,x.value==="base"]]),T(q,{label:U.$t("workflow.baseComponent"),name:"base"},{default:N(()=>[T(J,{height:"400"},{default:N(()=>[M.value.length>0?(ce(),Rt("div",_B,[(ce(!0),Rt(Fn,null,Tr(M.value,(oe,Me)=>(ce(),Rt(Fn,{key:Me},[T(W,{type:"info",size:"small",class:"color-secondary ml-12"},{default:N(()=>[Je(fe(oe.label),1)]),_:2},1024),X("div",bB,[(ce(!0),Rt(Fn,null,Tr(oe.list,(Pe,Ee)=>(ce(),Ge(K,{key:Ee,placement:"right",width:280,"show-after":500},{reference:N(()=>[X("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:Bt(we=>S(Pe),["stop"]),onMousedown:Bt(we=>E(Pe),["stop"])},[(ce(),Ge(Pd(Jt(Hf)(`${Pe.type}-icon`)),{class:"mr-8",size:20})),X("div",EB,fe(Pe.label),1)],40,wB)]),default:N(()=>[X("div",OB,[(ce(),Ge(Pd(Jt(Hf)(`${Pe.type}-icon`)),{class:"mr-8",size:32})),X("div",SB,fe(Pe.label),1)]),T(W,{type:"info",size:"small",class:"color-secondary lighter"},{default:N(()=>[Je(fe(Pe.text),1)]),_:2},1024)]),_:2},1024))),128))])],64))),128))])):(ce(),Rt("div",xB,[T(W,{type:"info"},{default:N(()=>[Je(fe(U.$t("workflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),T(q,{label:U.$t("views.tool.title"),name:"CUSTOM_TOOL"},{default:N(()=>[T(eE,{showLeft:!Jt(o).path.includes("shared"),"show-collapse":""},{default:N(()=>[T(J,{height:"450"},{default:N(()=>[T(yB,{list:C.value,onClickNodes:I[1]||(I[1]=oe=>S(Jt(kv),oe)),onOnmousedown:I[2]||(I[2]=oe=>E(Jt(kv),oe))},null,8,["list"])]),_:1})]),_:1},8,["showLeft"])]),_:1},8,["label"])]),_:1},8,["modelValue"])],4)),[[Mu,e.show]])}}}),MB=Rn({__name:"index",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object,inner:{type:Boolean,default:!1}},setup(e){const t=ko("workflowMode")||br.Application,n=e,o={[br.Application]:yx,[br.ApplicationLoop]:yx,[br.Knowledge]:n.inner?_x:gx,[br.KnowledgeLoop]:n.inner?_x:gx};return(r,s)=>(ce(),Ge(Pd(o[Jt(t)]),{show:e.show,id:e.id,"workflow-ref":e.workflowRef},null,8,["show","id","workflow-ref"]))}}),AB={class:"flex-between"},TB={class:"ellipsis-1 break-all"},kB={key:0,src:AV,alt:""},NB={key:1,src:TV,alt:""},PB={style:{width:"280px"},class:"p-12-16"},RB={class:"mt-8 lighter"},CB={class:"flex-between"},DB={class:"title-decoration-1 mb-8 mt-8"},jB={key:0,class:"text-right"},IB={class:"mt-8 mr-8 lighter"},LB=["onMouseenter"],$B={class:"break-all"},FB={class:"dialog-footer"},VB=Rn({__name:"NodeContainer",props:{nodeModel:{},exceptionNodeList:{default:()=>["ai-chat-node","video-understand-node","image-generate-node","image-understand-node"]}},setup(e){const t=Zi(),{params:{id:n}}=t,o=Ae({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),r=Ae(!1),s=Ae(),c=jn(()=>({top:s.value?s.value.y-F.nodeModel.y+F.nodeModel.height/2+"px":"0px"})),f=Ae(),d=Ae(!1),_=Ae({title:""}),y=jn({set:q=>{ye.set(F.nodeModel.properties,"condition",q)},get:()=>F.nodeModel.properties.condition?F.nodeModel.properties.condition:(ye.set(F.nodeModel.properties,"condition","AND"),!0)}),b=jn({set:q=>{ye.set(F.nodeModel.properties,"showNode",q)},get:()=>F.nodeModel.properties.showNode!==void 0?F.nodeModel.properties.showNode:(ye.set(F.nodeModel.properties,"showNode",!0),!0)}),x=q=>{q.ctrlKey||q.metaKey||q.stopPropagation()},M=jn(()=>F.nodeModel.properties.status?F.nodeModel.properties.status:200);function S(){_.value.title=F.nodeModel.properties.nodeName,d.value=!0}const E=async q=>{q&&await q.validate(ne=>{var oe;ne&&((oe=F.nodeModel.graphModel.nodes.filter(Me=>Me.id!==F.nodeModel.id))!=null&&oe.some(Me=>Me.properties.nodeName===_.value.title)?Ra(yt("workflow.tip.repeatedNodeError")):(ye.set(F.nodeModel.properties,"nodeName",_.value.title),F.nodeModel.clear_next_node_field(!0),d.value=!1,q.resetFields()))})},w=q=>{q!=null&&q.shiftKey||F.nodeModel.graphModel.clearSelectElements(),ye.set(F.nodeModel,"isSelected",!F.nodeModel.isSelected),ye.set(F.nodeModel,"isHovered",!F.nodeModel.isSelected),F.nodeModel.graphModel.toFront(F.nodeModel.id)},C=Ae(null),j=()=>{F.nodeModel.graphModel.clearSelectElements();const q=F.nodeModel.graphModel.cloneNode(F.nodeModel.id);ye.set(q,"isSelected",!0),ye.set(q,"isHovered",!0),F.nodeModel.graphModel.toFront(q.id)},B=()=>{nT(yt("common.tip"),yt("workflow.delete.confirmTitle"),{confirmButtonText:yt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{F.nodeModel.type===Tn.LoopNode&&F.nodeModel.graphModel.getNodeOutgoingNode(F.nodeModel.id).forEach(ne=>{ne.type==="loop-body-node"&&F.nodeModel.graphModel.deleteNode(ne.id)}),F.nodeModel.graphModel.deleteNode(F.nodeModel.id)}),F.nodeModel.graphModel.eventCenter.emit("delete_node")},$=q=>{q.height&&(F.nodeModel.virtual||(o.value.stepContainerHeight=q.height,F.nodeModel.setHeight(o.value.stepContainerHeight)))};function U(q){var Me,Pe,Ee;const ne=q.properties.width?q.properties.width:214,oe=F.nodeModel.graphModel.addNode({type:q.type,properties:q.properties,x:((Me=s.value)==null?void 0:Me.x)+ne/2+200,y:((Pe=s.value)==null?void 0:Pe.y)-q.height});F.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:F.nodeModel.id,sourceAnchorId:(Ee=s.value)==null?void 0:Ee.id,targetNodeId:oe.id,targetAnchorId:oe.id+"_left"}),J()}const I=jn({set:q=>{ye.set(F.nodeModel.properties,"enableException",q)},get:()=>F.nodeModel.properties.enableException!==void 0?F.nodeModel.properties.enableException:(ye.set(F.nodeModel.properties,"enableException",!1),!1)}),F=e,Z=jn(()=>{var q;if(F.nodeModel.properties.config.fields){const ne=(q=F.nodeModel.properties.config.fields)==null?void 0:q.map(oe=>({label:oe.label,value:oe.value,globeLabel:`{{${F.nodeModel.properties.nodeName}.${oe.value}}}`,globeValue:`{{context['${F.nodeModel.id}'].${oe.value}}}`}));return I.value?[...ne,{label:"异常信息",value:"exceptionMessage",globeLabel:`{{${F.nodeModel.properties.nodeName}.exceptionMessage}}`,globeValue:`{{context['${F.nodeModel.id}'].exceptionMessage}}`}]:ne}return[]});Kf(I,()=>{F.nodeModel.graphModel.eventCenter.emit("delete_edge",F.nodeModel.outgoing.edges.filter(q=>[`${F.nodeModel.id}_exception_right`].includes(q.sourceAnchorId)).map(q=>q.id))});function G(q){return![Tn.Start,Tn.Base,Tn.KnowledgeBase,Tn.LoopStartNode.toString()].includes(q)}function W(q){return![Tn.Start,Tn.Base,Tn.KnowledgeBase,Tn.LoopStartNode.toString(),Tn.DataSourceLocalNode,Tn.DataSourceWebNode].includes(q)&&F.nodeModel.properties.kind!=dc.DataSource}const K=q=>{r.value=!0,s.value=q},J=()=>{r.value=!1,s.value=void 0};return kr(()=>{ye.set(F.nodeModel,"openNodeMenu",q=>{r.value?J():K(q)})}),(q,ne)=>{var St;const oe=Y("ArrowDownBold"),Me=Y("el-icon"),Pe=Y("el-button"),Ee=Y("el-option"),we=Y("el-select"),Be=Y("el-dropdown"),nt=Y("AppIcon"),Ot=Y("el-dropdown-item"),Qe=Y("el-dropdown-menu"),lt=Y("el-alert"),dt=Y("el-switch"),Tt=Y("el-tooltip"),bn=Y("el-collapse-transition"),Ue=Y("el-input"),Te=Y("el-form-item"),$e=Y("el-form"),wt=Y("el-dialog"),Wt=Jm("resize");return ce(),Rt("div",{onMousedown:w,class:"workflow-node-container p-16",style:{overflow:"visible"}},[X("div",{class:Dl(["step-container app-card p-16",{isSelected:F.nodeModel.isSelected,error:M.value!==200}]),style:{overflow:"visible"}},[Ca((ce(),Rt("div",null,[X("div",AB,[X("div",{class:"flex align-center",onDragstart:ne[0]||(ne[0]=Bt(()=>{},["prevent"])),onDrag:ne[1]||(ne[1]=Bt(()=>{},["prevent"])),onDragover:ne[2]||(ne[2]=Bt(()=>{},["prevent"])),onDragend:ne[3]||(ne[3]=Bt(()=>{},["prevent"])),style:{width:"69%"}},[(ce(),Ge(Pd(Jt(Hf)(`${q.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(St=q.nodeModel)==null?void 0:St.properties.nodeData},null,8,["item"])),X("h4",TB,fe(q.nodeModel.properties.nodeName),1)],32),X("div",{onMousemove:ne[6]||(ne[6]=Bt(()=>{},["stop"])),onMousedown:ne[7]||(ne[7]=Bt(()=>{},["stop"])),onKeydown:ne[8]||(ne[8]=Bt(()=>{},["stop"])),onClick:ne[9]||(ne[9]=Bt(()=>{},["stop"]))},[T(Pe,{text:"",onClick:ne[4]||(ne[4]=Zt=>b.value=!b.value)},{default:N(()=>[T(Me,{class:Dl(["arrow-icon color-secondary",b.value?"rotate-180":""])},{default:N(()=>[T(oe)]),_:1},8,["class"])]),_:1}),W(q.nodeModel.type)?(ce(),Ge(Be,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:N(()=>[X("div",PB,[X("h5",null,fe(q.$t("workflow.condition.title")),1),X("p",RB,[X("span",null,fe(q.$t("workflow.condition.front")),1),T(we,{modelValue:y.value,"onUpdate:modelValue":ne[5]||(ne[5]=Zt=>y.value=Zt),size:"small",style:{width:"60px",margin:"0 8px"}},{default:N(()=>[T(Ee,{label:q.$t("workflow.condition.AND"),value:"AND"},null,8,["label"]),T(Ee,{label:q.$t("workflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),X("span",null,fe(q.$t("workflow.condition.text")),1)])])]),default:N(()=>[T(Pe,{text:""},{default:N(()=>[y.value==="OR"?(ce(),Rt("img",kB)):Qt("",!0),y.value==="AND"?(ce(),Rt("img",NB)):Qt("",!0)]),_:1})]),_:1})):Qt("",!0),G(q.nodeModel.type)?(ce(),Ge(Be,{key:1,teleported:!1,trigger:"click"},{dropdown:N(()=>[T(Qe,{style:{"min-width":"80px"}},{default:N(()=>[T(Ot,{onClick:S,class:"p-8"},{default:N(()=>[Je(fe(q.$t("common.rename")),1)]),_:1}),T(Ot,{onClick:j,class:"p-8"},{default:N(()=>[Je(fe(q.$t("common.copy")),1)]),_:1}),T(Ot,{onClick:B,class:"border-t p-8"},{default:N(()=>[Je(fe(q.$t("common.delete")),1)]),_:1})]),_:1})]),default:N(()=>[T(Pe,{text:""},{default:N(()=>[T(nt,{iconName:"app-more",class:"color-secondary"})]),_:1})]),_:1})):Qt("",!0)],32)]),T(bn,null,{default:N(()=>[Ca(X("div",{onMousedown:ne[12]||(ne[12]=Bt(()=>{},["stop"])),onKeydown:ne[13]||(ne[13]=Bt(()=>{},["stop"])),onClick:ne[14]||(ne[14]=Bt(()=>{},["stop"])),class:"mt-16"},[M.value!=200?(ce(),Ge(lt,{key:0,class:"mb-16",title:F.nodeModel.type==="application-node"?q.$t("workflow.tip.applicationNodeError"):q.$t("workflow.tip.toolNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):Qt("",!0),tT(q.$slots,"default",{},void 0,!0),Z.value.length>0?(ce(),Rt(Fn,{key:1},[X("div",CB,[X("h5",DB,fe(q.$t("common.param.outputParam")),1),q.exceptionNodeList.includes(q.nodeModel.type)?(ce(),Rt("div",jB,[X("span",IB,fe(q.$t("common.param.exception")),1),T(dt,{modelValue:I.value,"onUpdate:modelValue":ne[10]||(ne[10]=Zt=>I.value=Zt),size:"small"},null,8,["modelValue"])])):Qt("",!0)]),(ce(!0),Rt(Fn,null,Tr(Z.value,(Zt,pn)=>(ce(),Rt("div",{key:pn,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:An=>C.value=pn,onMouseleave:ne[11]||(ne[11]=An=>C.value=null)},[X("span",$B,fe(Zt.label)+" "+fe("{"+Zt.value+"}"),1),C.value===pn?(ce(),Ge(Tt,{key:0,effect:"dark",content:q.$t("workflow.setting.copyParam"),placement:"top"},{default:N(()=>[T(Pe,{link:"",onClick:An=>Jt(Av)(Zt.globeLabel),style:{padding:"0"}},{default:N(()=>[T(nt,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Qt("",!0)],40,LB))),128))],64)):Qt("",!0)],544),[[Mu,b.value]])]),_:3})])),[[Wt,$]])],2),T(bn,null,{default:N(()=>[r.value?(ce(),Ge(MB,{key:0,onMousemove:ne[15]||(ne[15]=Bt(()=>{},["stop"])),onMousedown:ne[16]||(ne[16]=Bt(()=>{},["stop"])),onClick:ne[17]||(ne[17]=Bt(()=>{},["stop"])),onWheel:x,show:r.value,inner:!0,id:Jt(n),style:Zm([{left:"100%",transform:"translate(0, -50%)"},c.value]),onClickNodes:U},null,8,["show","id","style"])):Qt("",!0)]),_:1}),T(wt,{title:q.$t("workflow.nodeName"),modelValue:d.value,"onUpdate:modelValue":ne[22]||(ne[22]=Zt=>d.value=Zt),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:ne[23]||(ne[23]=Bt(()=>{},["prevent"]))},{footer:N(()=>[X("span",FB,[T(Pe,{onClick:ne[20]||(ne[20]=Bt(Zt=>d.value=!1,["prevent"]))},{default:N(()=>[Je(fe(q.$t("common.cancel")),1)]),_:1}),T(Pe,{type:"primary",onClick:ne[21]||(ne[21]=Zt=>E(f.value))},{default:N(()=>[Je(fe(q.$t("common.save")),1)]),_:1})])]),default:N(()=>[T($e,{"label-position":"top",ref_key:"titleFormRef",ref:f,model:_.value},{default:N(()=>[T(Te,{prop:"title",rules:[{required:!0,message:q.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:N(()=>[T(Ue,{modelValue:_.value.title,"onUpdate:modelValue":ne[18]||(ne[18]=Zt=>_.value.title=Zt),onBlur:ne[19]||(ne[19]=Zt=>_.value.title=_.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}}),so=Dd(VB,[["__scopeId","data-v-0fb32e22"]]),BB={class:"title-decoration-1 mb-8"},UB={class:"flex-between w-full"},GB={class:"flex-between"},zB={class:"flex align-center"},HB={class:"flex align-center"},WB={class:"mr-4"},XB={class:"flex-between"},qB={class:"mb-8 mt-12 flex-between"},YB={class:"mr-4 lighter"},KB={class:"flex"},ZB={class:"flex align-center lighter cursor"},JB={key:0,class:"ml-4"},QB={class:"flex"},eU={key:0,class:"w-full mb-16"},tU={class:"flex align-center",style:{"line-height":"20px"}},nU=["src"],rU=["title"],oU={key:0},iU={class:"flex align-center lighter cursor"},aU={key:0,class:"ml-4"},lU={class:"flex"},sU={key:0,class:"w-full mt-8"},uU={class:"flex align-center",style:{"line-height":"20px"}},cU=["src"],dU=["title"],fU={class:"flex-between"},pU={class:"flex-between"},hU={class:"flex align-center"},vU={class:"mr-4"},mU={class:"flex"},yU=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("workflowMode")||br.Application,n=ko("getResourceDetail"),o=Zi(),{params:{id:r}}=o,s=jn(()=>o.path.includes("resource-management")?"systemManage":o.path.includes("shared")?"systemShare":"workspace"),c=lt=>lt.ctrlKey===!0?(lt.preventDefault(),!0):(lt.stopPropagation(),!0);function f(lt){ye.set(S.nodeModel.properties.nodeData,"system",lt)}function d(lt){ye.set(S.nodeModel.properties.nodeData,"prompt",lt)}const _=lt=>{var dt;lt?(dt=C.value)==null||dt.reset_default(lt,r):W({})},y=`${yt("workflow.nodes.aiChatNode.defaultPrompt")}：
{{${yt("workflow.nodes.searchKnowledgeNode.label")}.data}}
${yt("views.problem.title")}：
{{${yt("workflow.nodes.startNode.label")}.question}}`,b=jd({MCP:!0,tool:!0,agent:!0}),x={modelId:"",system:"",prompt:y,dialogueNumber:1,isResult:!0,temperature:null,maxTokens:null,dialogueType:"WORK_FLOW",toolId:[],modelSetting:{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}},M=jn({get:()=>S.nodeModel.properties.nodeData?(S.nodeModel.properties.nodeData.modelSetting||ye.set(S.nodeModel.properties.nodeData,"modelSetting",{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}),S.nodeModel.properties.nodeData):(ye.set(S.nodeModel.properties,"nodeData",x),S.nodeModel.properties.nodeData),set:lt=>{ye.set(S.nodeModel.properties,"nodeData",lt)}}),S=e,E=Ae(),w=Ae(null),C=Ae(),j=Ae(),B=()=>{var lt;return(lt=E.value)==null?void 0:lt.validate().catch(dt=>Promise.reject({node:S.nodeModel,errMessage:dt}))},$=n();function U(){var dt;const lt=s.value==="systemManage"?{modelType:"LLM",workspaceId:(dt=$.value)==null?void 0:dt.workspaceId}:{modelType:"LLM"};ni({type:"model",systemType:s.value}).getSelectModelList(lt).then(Tt=>{w.value=ye.groupBy(Tt==null?void 0:Tt.data,"provider")})}const I=lt=>{var dt;lt&&((dt=C.value)==null||dt.open(lt,r,M.value.modelParamsSetting))},F=Ae(),Z=lt=>{var dt;lt&&((dt=F.value)==null||dt.open(lt,r))},G=lt=>{ye.set(S.nodeModel.properties.nodeData,"system",lt)};function W(lt){ye.set(S.nodeModel.properties.nodeData,"modelParamsSetting",lt)}function K(lt){let dt=ye.cloneDeep(S.nodeModel.properties.nodeData.modelSetting);dt={...dt,...lt},ye.set(S.nodeModel.properties.nodeData,"modelSetting",dt)}const J=Ae();function q(){J.value.open(M.value.toolIds)}function ne(lt){ye.set(S.nodeModel.properties.nodeData,"toolIds",lt.toolIds)}function oe(lt){const dt=S.nodeModel.properties.nodeData.toolIds.filter(Tt=>Tt!==lt);ye.set(S.nodeModel.properties.nodeData,"toolIds",dt)}const Me=Ae([]);function Pe(){var dt;const lt=s.value==="systemManage"?{scope:"WORKSPACE",workspaceId:(dt=$.value)==null?void 0:dt.workspaceId}:{scope:"WORKSPACE"};ni({type:"tool",systemType:s.value}).getAllToolList(lt).then(Tt=>{Me.value=[...Tt.data.shared_tools,...Tt.data.tools].filter(bn=>bn.isActive)})}const Ee=Ae([]);function we(){(s.value==="systemShare"?Promise.resolve({data:[]}):ni({type:"application",systemType:s.value}).getAllApplication({folderId:"default"})).then(lt=>{Ee.value=lt.data.filter(dt=>dt.isPublish)})}const Be=Ae();function nt(){Be.value.open(S.nodeModel.properties.nodeData.applicationIds)}function Ot(lt){ye.set(S.nodeModel.properties.nodeData,"applicationIds",lt.applicationIds),b.agent=!0}function Qe(lt){M.value.applicationIds&&(M.value.applicationIds=M.value.applicationIds.filter(dt=>dt!==lt))}return kr(()=>{var lt,dt;U(),typeof((lt=S.nodeModel.properties.nodeData)==null?void 0:lt.isResult)>"u"&&Vs(S.nodeModel)&&ye.set(S.nodeModel.properties.nodeData,"isResult",!0),ye.set(S.nodeModel,"validate",B),M.value.dialogueType||(M.value.dialogueType="WORK_FLOW"),((dt=S.nodeModel.properties.nodeData)==null?void 0:dt.toolOutputEnable)===void 0&&ye.set(S.nodeModel.properties.nodeData,"toolOutputEnable",!0),Pe(),we()}),(lt,dt)=>{const Tt=Y("el-button"),bn=Y("el-form-item"),Ue=Y("el-tooltip"),Te=Y("el-option"),$e=Y("el-select"),wt=Y("el-input-number"),Wt=Y("el-checkbox"),St=Y("CaretRight"),Zt=Y("el-icon"),pn=Y("el-avatar"),An=Y("Close"),yn=Y("el-card"),ht=Y("el-switch"),kn=Y("el-form");return ce(),Ge(so,{nodeModel:lt.nodeModel},{default:N(()=>[X("h5",BB,fe(lt.$t("workflow.nodeSetting")),1),T(yn,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(kn,{onSubmit:dt[14]||(dt[14]=Bt(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:E,"hide-required-asterisk":""},{default:N(()=>[T(bn,{label:lt.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:lt.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:N(()=>[X("div",UB,[X("div",null,[X("span",null,[Je(fe(lt.$t("views.application.form.aiModel.label")),1),dt[15]||(dt[15]=X("span",{class:"color-danger"},"*",-1))])]),T(Tt,{disabled:!M.value.modelId,type:"primary",link:"",onClick:dt[0]||(dt[0]=Ie=>I(M.value.modelId)),onRefreshForm:W},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[T(Au,{onChange:_,onWheel:c,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":dt[1]||(dt[1]=Ie=>M.value.modelId=Ie),placeholder:lt.$t("views.application.form.aiModel.placeholder"),options:w.value,onSubmitModel:U,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),T(bn,null,{label:N(()=>[X("div",GB,[X("div",zB,[X("span",null,fe(lt.$t("views.application.form.roleSettings.label")),1),T(Ue,{effect:"dark",content:lt.$t("views.application.form.roleSettings.tooltip"),placement:"right"},{default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])]),T(Tt,{type:"primary",link:"",onClick:dt[2]||(dt[2]=Ie=>Z(M.value.modelId)),disabled:!M.value.modelId},{default:N(()=>[T(fr,{iconName:"app-generate-star"})]),_:1},8,["disabled"])])]),default:N(()=>[T(as,{title:lt.$t("views.application.form.roleSettings.label"),modelValue:M.value.system,"onUpdate:modelValue":dt[3]||(dt[3]=Ie=>M.value.system=Ie),style:{height:"100px"},onSubmitDialog:f,placeholder:`${Jt(yt)("workflow.SystemPromptPlaceholder")} {{${Jt(yt)("workflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1}),T(bn,{label:lt.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:lt.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:N(()=>[X("div",HB,[X("div",WB,[X("span",null,[Je(fe(lt.$t("views.application.form.prompt.label")),1),dt[16]||(dt[16]=X("span",{class:"color-danger"},"*",-1))])]),T(Ue,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(lt.$t("views.application.form.prompt.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[T(as,{onWheel:c,title:lt.$t("views.application.form.prompt.label"),modelValue:M.value.prompt,"onUpdate:modelValue":dt[4]||(dt[4]=Ie=>M.value.prompt=Ie),style:{height:"150px"},onSubmitDialog:d,placeholder:`${Jt(yt)("workflow.UserPromptPlaceholder")}{{${Jt(yt)("workflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),T(bn,{label:lt.$t("views.application.form.historyRecord.label")},{label:N(()=>[X("div",XB,[X("div",null,fe(lt.$t("views.application.form.historyRecord.label")),1),T($e,{modelValue:M.value.dialogueType,"onUpdate:modelValue":dt[5]||(dt[5]=Ie=>M.value.dialogueType=Ie),type:"small",style:{width:"100px"}},{default:N(()=>[T(Te,{label:lt.$t("workflow.node"),value:"NODE"},null,8,["label"]),T(Te,{label:lt.$t("workflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[T(wt,{modelValue:M.value.dialogueNumber,"onUpdate:modelValue":dt[6]||(dt[6]=Ie=>M.value.dialogueNumber=Ie),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),X("div",qB,[X("span",YB,fe(lt.$t("views.application.skill")),1),X("div",KB,[T(Wt,{modelValue:M.value.toolOutputEnable,"onUpdate:modelValue":dt[7]||(dt[7]=Ie=>M.value.toolOutputEnable=Ie),label:lt.$t("views.application.form.toolOutputEnable")},null,8,["modelValue","label"])])]),T(yn,{shadow:"never",style:{"--el-card-padding":"12px"},class:"mb-12"},{default:N(()=>{var Ie,wn,nr,le,rr,Rr;return[X("div",null,[X("div",{class:"flex-between mb-8",onClick:dt[8]||(dt[8]=Sr=>b.tool=!b.tool)},[X("div",ZB,[T(Zt,{class:Dl(["mr-8 arrow-icon",b.tool?"rotate-90":""])},{default:N(()=>[T(St)]),_:1},8,["class"]),Je(" "+fe(lt.$t("views.tool.title"))+" ",1),(Ie=M.value.toolIds)!=null&&Ie.length?(ce(),Rt("span",JB," ("+fe((wn=M.value.toolIds)==null?void 0:wn.length)+")",1)):Qt("",!0)]),X("div",QB,[T(Tt,{type:"primary",link:"",onClick:q,onRefreshForm:W},{default:N(()=>[T(fr,{iconName:"app-add-outlined",class:"mr-4"})]),_:1})])]),((nr=M.value.toolIds)==null?void 0:nr.length)>0&&b.tool?(ce(),Rt("div",eU,[(ce(!0),Rt(Fn,null,Tr(M.value.toolIds,(Sr,uo)=>{var Vn,fo,xe;return ce(),Rt("div",{key:uo,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[X("div",tU,[(Vn=Jt(Eu)(Me.value,Sr,"id"))!=null&&Vn.icon?(ce(),Ge(pn,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:N(()=>{var Ye;return[X("img",{src:Jt(fl)((Ye=Jt(Eu)(Me.value,Sr,"id"))==null?void 0:Ye.icon),alt:""},null,8,nU)]}),_:2},1024)):(ce(),Ge(jI,{key:1,class:"mr-8",size:20})),X("div",{class:"ellipsis",title:(fo=Jt(Eu)(Me.value,Sr,"id"))==null?void 0:fo.name},fe((xe=Jt(Eu)(Me.value,Sr,"id"))==null?void 0:xe.name),9,rU)]),T(Tt,{text:"",onClick:Ye=>oe(Sr)},{default:N(()=>[T(Zt,null,{default:N(()=>[T(An)]),_:1})]),_:2},1032,["onClick"])])}),128))])):Qt("",!0)]),s.value!=="systemShare"?(ce(),Rt("div",oU,[X("div",{class:"flex-between",onClick:dt[9]||(dt[9]=Sr=>b.agent=!b.agent)},[X("div",iU,[T(Zt,{class:Dl(["mr-8 arrow-icon",b.agent?"rotate-90":""])},{default:N(()=>[T(St)]),_:1},8,["class"]),Je(" "+fe(lt.$t("views.application.title"))+" ",1),(le=M.value.applicationIds)!=null&&le.length?(ce(),Rt("span",aU," ("+fe((rr=M.value.applicationIds)==null?void 0:rr.length)+")",1)):Qt("",!0)]),X("div",lU,[T(Tt,{type:"primary",link:"",onClick:nt,onRefreshForm:W},{default:N(()=>[T(fr,{iconName:"app-add-outlined",class:"mr-4"})]),_:1})])]),(Rr=M.value.applicationIds)!=null&&Rr.length&&b.agent?(ce(),Rt("div",sU,[(ce(!0),Rt(Fn,null,Tr(M.value.applicationIds,(Sr,uo)=>{var Vn,fo,xe;return ce(),Rt("div",{key:uo,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[X("div",uU,[(Vn=Jt(Eu)(Ee.value,Sr,"id"))!=null&&Vn.icon?(ce(),Ge(pn,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:N(()=>{var Ye;return[X("img",{src:Jt(fl)((Ye=Jt(Eu)(Ee.value,Sr,"id"))==null?void 0:Ye.icon),alt:""},null,8,cU)]}),_:2},1024)):(ce(),Ge(fr,{key:1,class:"mr-8",size:20})),X("div",{class:"ellipsis",title:(fo=Jt(Eu)(Ee.value,Sr,"id"))==null?void 0:fo.name},fe((xe=Jt(Eu)(Ee.value,Sr,"id"))==null?void 0:xe.name),9,dU)]),T(Tt,{text:"",onClick:Ye=>Qe(Sr)},{default:N(()=>[T(Zt,null,{default:N(()=>[T(An)]),_:1})]),_:2},1032,["onClick"])])}),128))])):Qt("",!0)])):Qt("",!0)]}),_:1}),T(bn,{onClick:dt[11]||(dt[11]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",fU,[X("div",null,[X("span",null,fe(lt.$t("views.application.form.reasoningContent.label")),1)]),X("div",null,[T(ht,{size:"small",modelValue:M.value.modelSetting.reasoningContentEnable,"onUpdate:modelValue":dt[10]||(dt[10]=Ie=>M.value.modelSetting.reasoningContentEnable=Ie)},null,8,["modelValue"])])])]),_:1}),[Jt(br).Application,Jt(br).ApplicationLoop].includes(Jt(t))?(ce(),Ge(bn,{key:0,onClick:dt[13]||(dt[13]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",pU,[X("div",hU,[X("div",vU,[X("span",null,fe(lt.$t("workflow.nodes.aiChatNode.returnContent.label")),1)]),T(Ue,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(lt.$t("workflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),X("div",mU,[T(ht,{size:"small",modelValue:M.value.isResult,"onUpdate:modelValue":dt[12]||(dt[12]=Ie=>M.value.isResult=Ie)},null,8,["modelValue"])])])]),_:1})):Qt("",!0)]),_:1},8,["model"])]),_:1}),T(lh,{ref_key:"AIModeParamSettingDialogRef",ref:C,onRefresh:W},null,512),T(lT,{onReplace:G,ref_key:"GeneratePromptDialogRef",ref:F},null,512),T(r8,{ref_key:"ReasoningParamSettingDialogRef",ref:j,onRefresh:K},null,512),T(o8,{ref_key:"toolDialogRef",ref:J,onRefresh:ne},null,512),T(i8,{ref_key:"applicationDialogRef",ref:Be,onRefresh:Ot},null,512)]),_:1},8,["nodeModel"])}}});var ag={exports:{}},bx;function gU(){return bx||(bx=1,function(e,t){(function(n,o){e.exports=o()})(window,function(){return function(n){var o={};function r(s){if(o[s])return o[s].exports;var c=o[s]={i:s,l:!1,exports:{}};return n[s].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=o,r.d=function(s,c,f){r.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:f})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,c){if(1&c&&(s=r(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var f=Object.create(null);if(r.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var d in s)r.d(f,d,(function(_){return s[_]}).bind(null,d));return f},r.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(c,"a",c),c},r.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},r.p="",r(r.s=222)}([function(n,o,r){r.d(o,"a",function(){return U}),r.d(o,"b",function(){return $}),r.d(o,"c",function(){return Tt}),r.d(o,"d",function(){return bn}),r.d(o,"e",function(){return C}),r.d(o,"f",function(){return B}),r.d(o,"g",function(){return C}),r.d(o,"h",function(){return dt}),r.d(o,"i",function(){return c}),r.d(o,"j",function(){return lt}),r.d(o,"k",function(){return J});var s,c,f,d,_,y,b,x={},M=[],S=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function E(Ue,Te){for(var $e in Te)Ue[$e]=Te[$e];return Ue}function w(Ue){var Te=Ue.parentNode;Te&&Te.removeChild(Ue)}function C(Ue,Te,$e){var wt,Wt,St,Zt={};for(St in Te)St=="key"?wt=Te[St]:St=="ref"?Wt=Te[St]:Zt[St]=Te[St];if(arguments.length>2&&(Zt.children=arguments.length>3?s.call(arguments,2):$e),typeof Ue=="function"&&Ue.defaultProps!=null)for(St in Ue.defaultProps)Zt[St]===void 0&&(Zt[St]=Ue.defaultProps[St]);return j(Ue,Zt,wt,Wt,null)}function j(Ue,Te,$e,wt,Wt){var St={type:Ue,props:Te,key:$e,ref:wt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Wt??++f};return Wt==null&&c.vnode!=null&&c.vnode(St),St}function B(){return{current:null}}function $(Ue){return Ue.children}function U(Ue,Te){this.props=Ue,this.context=Te}function I(Ue,Te){if(Te==null)return Ue.__?I(Ue.__,Ue.__.__k.indexOf(Ue)+1):null;for(var $e;Te<Ue.__k.length;Te++)if(($e=Ue.__k[Te])!=null&&$e.__e!=null)return $e.__e;return typeof Ue.type=="function"?I(Ue):null}function F(Ue){var Te,$e;if((Ue=Ue.__)!=null&&Ue.__c!=null){for(Ue.__e=Ue.__c.base=null,Te=0;Te<Ue.__k.length;Te++)if(($e=Ue.__k[Te])!=null&&$e.__e!=null){Ue.__e=Ue.__c.base=$e.__e;break}return F(Ue)}}function Z(Ue){(!Ue.__d&&(Ue.__d=!0)&&d.push(Ue)&&!G.__r++||y!==c.debounceRendering)&&((y=c.debounceRendering)||_)(G)}function G(){for(var Ue;G.__r=d.length;)Ue=d.sort(function(Te,$e){return Te.__v.__b-$e.__v.__b}),d=[],Ue.some(function(Te){var $e,wt,Wt,St,Zt,pn;Te.__d&&(Zt=(St=($e=Te).__v).__e,(pn=$e.__P)&&(wt=[],(Wt=E({},St)).__v=St.__v+1,Ee(pn,St,Wt,$e.__n,pn.ownerSVGElement!==void 0,St.__h!=null?[Zt]:null,wt,Zt??I(St),St.__h),we(wt,St),St.__e!=Zt&&F(St)))})}function W(Ue,Te,$e,wt,Wt,St,Zt,pn,An,yn){var ht,kn,Ie,wn,nr,le,rr,Rr=wt&&wt.__k||M,Sr=Rr.length;for($e.__k=[],ht=0;ht<Te.length;ht++)if((wn=$e.__k[ht]=(wn=Te[ht])==null||typeof wn=="boolean"?null:typeof wn=="string"||typeof wn=="number"||typeof wn=="bigint"?j(null,wn,null,null,wn):Array.isArray(wn)?j($,{children:wn},null,null,null):wn.__b>0?j(wn.type,wn.props,wn.key,null,wn.__v):wn)!=null){if(wn.__=$e,wn.__b=$e.__b+1,(Ie=Rr[ht])===null||Ie&&wn.key==Ie.key&&wn.type===Ie.type)Rr[ht]=void 0;else for(kn=0;kn<Sr;kn++){if((Ie=Rr[kn])&&wn.key==Ie.key&&wn.type===Ie.type){Rr[kn]=void 0;break}Ie=null}Ee(Ue,wn,Ie=Ie||x,Wt,St,Zt,pn,An,yn),nr=wn.__e,(kn=wn.ref)&&Ie.ref!=kn&&(rr||(rr=[]),Ie.ref&&rr.push(Ie.ref,null,wn),rr.push(kn,wn.__c||nr,wn)),nr!=null?(le==null&&(le=nr),typeof wn.type=="function"&&wn.__k===Ie.__k?wn.__d=An=K(wn,An,Ue):An=q(Ue,wn,Ie,Rr,nr,An),typeof $e.type=="function"&&($e.__d=An)):An&&Ie.__e==An&&An.parentNode!=Ue&&(An=I(Ie))}for($e.__e=le,ht=Sr;ht--;)Rr[ht]!=null&&(typeof $e.type=="function"&&Rr[ht].__e!=null&&Rr[ht].__e==$e.__d&&($e.__d=I(wt,ht+1)),Ot(Rr[ht],Rr[ht]));if(rr)for(ht=0;ht<rr.length;ht++)nt(rr[ht],rr[++ht],rr[++ht])}function K(Ue,Te,$e){for(var wt,Wt=Ue.__k,St=0;Wt&&St<Wt.length;St++)(wt=Wt[St])&&(wt.__=Ue,Te=typeof wt.type=="function"?K(wt,Te,$e):q($e,wt,wt,Wt,wt.__e,Te));return Te}function J(Ue,Te){return Te=Te||[],Ue==null||typeof Ue=="boolean"||(Array.isArray(Ue)?Ue.some(function($e){J($e,Te)}):Te.push(Ue)),Te}function q(Ue,Te,$e,wt,Wt,St){var Zt,pn,An;if(Te.__d!==void 0)Zt=Te.__d,Te.__d=void 0;else if($e==null||Wt!=St||Wt.parentNode==null)e:if(St==null||St.parentNode!==Ue)Ue.appendChild(Wt),Zt=null;else{for(pn=St,An=0;(pn=pn.nextSibling)&&An<wt.length;An+=2)if(pn==Wt)break e;Ue.insertBefore(Wt,St),Zt=St}return Zt!==void 0?Zt:Wt.nextSibling}function ne(Ue,Te,$e){Te[0]==="-"?Ue.setProperty(Te,$e):Ue[Te]=$e==null?"":typeof $e!="number"||S.test(Te)?$e:$e+"px"}function oe(Ue,Te,$e,wt,Wt){var St;e:if(Te==="style")if(typeof $e=="string")Ue.style.cssText=$e;else{if(typeof wt=="string"&&(Ue.style.cssText=wt=""),wt)for(Te in wt)$e&&Te in $e||ne(Ue.style,Te,"");if($e)for(Te in $e)wt&&$e[Te]===wt[Te]||ne(Ue.style,Te,$e[Te])}else if(Te[0]==="o"&&Te[1]==="n")St=Te!==(Te=Te.replace(/Capture$/,"")),Te=Te.toLowerCase()in Ue?Te.toLowerCase().slice(2):Te.slice(2),Ue.l||(Ue.l={}),Ue.l[Te+St]=$e,$e?wt||Ue.addEventListener(Te,St?Pe:Me,St):Ue.removeEventListener(Te,St?Pe:Me,St);else if(Te!=="dangerouslySetInnerHTML"){if(Wt)Te=Te.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(Te!=="href"&&Te!=="list"&&Te!=="form"&&Te!=="tabIndex"&&Te!=="download"&&Te in Ue)try{Ue[Te]=$e??"";break e}catch{}typeof $e=="function"||($e!=null&&($e!==!1||Te[0]==="a"&&Te[1]==="r")?Ue.setAttribute(Te,$e):Ue.removeAttribute(Te))}}function Me(Ue){this.l[Ue.type+!1](c.event?c.event(Ue):Ue)}function Pe(Ue){this.l[Ue.type+!0](c.event?c.event(Ue):Ue)}function Ee(Ue,Te,$e,wt,Wt,St,Zt,pn,An){var yn,ht,kn,Ie,wn,nr,le,rr,Rr,Sr,uo,Vn=Te.type;if(Te.constructor!==void 0)return null;$e.__h!=null&&(An=$e.__h,pn=Te.__e=$e.__e,Te.__h=null,St=[pn]),(yn=c.__b)&&yn(Te);try{e:if(typeof Vn=="function"){if(rr=Te.props,Rr=(yn=Vn.contextType)&&wt[yn.__c],Sr=yn?Rr?Rr.props.value:yn.__:wt,$e.__c?le=(ht=Te.__c=$e.__c).__=ht.__E:("prototype"in Vn&&Vn.prototype.render?Te.__c=ht=new Vn(rr,Sr):(Te.__c=ht=new U(rr,Sr),ht.constructor=Vn,ht.render=Qe),Rr&&Rr.sub(ht),ht.props=rr,ht.state||(ht.state={}),ht.context=Sr,ht.__n=wt,kn=ht.__d=!0,ht.__h=[]),ht.__s==null&&(ht.__s=ht.state),Vn.getDerivedStateFromProps!=null&&(ht.__s==ht.state&&(ht.__s=E({},ht.__s)),E(ht.__s,Vn.getDerivedStateFromProps(rr,ht.__s))),Ie=ht.props,wn=ht.state,kn)Vn.getDerivedStateFromProps==null&&ht.componentWillMount!=null&&ht.componentWillMount(),ht.componentDidMount!=null&&ht.__h.push(ht.componentDidMount);else{if(Vn.getDerivedStateFromProps==null&&rr!==Ie&&ht.componentWillReceiveProps!=null&&ht.componentWillReceiveProps(rr,Sr),!ht.__e&&ht.shouldComponentUpdate!=null&&ht.shouldComponentUpdate(rr,ht.__s,Sr)===!1||Te.__v===$e.__v){ht.props=rr,ht.state=ht.__s,Te.__v!==$e.__v&&(ht.__d=!1),ht.__v=Te,Te.__e=$e.__e,Te.__k=$e.__k,Te.__k.forEach(function(fo){fo&&(fo.__=Te)}),ht.__h.length&&Zt.push(ht);break e}ht.componentWillUpdate!=null&&ht.componentWillUpdate(rr,ht.__s,Sr),ht.componentDidUpdate!=null&&ht.__h.push(function(){ht.componentDidUpdate(Ie,wn,nr)})}ht.context=Sr,ht.props=rr,ht.state=ht.__s,(yn=c.__r)&&yn(Te),ht.__d=!1,ht.__v=Te,ht.__P=Ue,yn=ht.render(ht.props,ht.state,ht.context),ht.state=ht.__s,ht.getChildContext!=null&&(wt=E(E({},wt),ht.getChildContext())),kn||ht.getSnapshotBeforeUpdate==null||(nr=ht.getSnapshotBeforeUpdate(Ie,wn)),uo=yn!=null&&yn.type===$&&yn.key==null?yn.props.children:yn,W(Ue,Array.isArray(uo)?uo:[uo],Te,$e,wt,Wt,St,Zt,pn,An),ht.base=Te.__e,Te.__h=null,ht.__h.length&&Zt.push(ht),le&&(ht.__E=ht.__=null),ht.__e=!1}else St==null&&Te.__v===$e.__v?(Te.__k=$e.__k,Te.__e=$e.__e):Te.__e=Be($e.__e,Te,$e,wt,Wt,St,Zt,An);(yn=c.diffed)&&yn(Te)}catch(fo){Te.__v=null,(An||St!=null)&&(Te.__e=pn,Te.__h=!!An,St[St.indexOf(pn)]=null),c.__e(fo,Te,$e)}}function we(Ue,Te){c.__c&&c.__c(Te,Ue),Ue.some(function($e){try{Ue=$e.__h,$e.__h=[],Ue.some(function(wt){wt.call($e)})}catch(wt){c.__e(wt,$e.__v)}})}function Be(Ue,Te,$e,wt,Wt,St,Zt,pn){var An,yn,ht,kn=$e.props,Ie=Te.props,wn=Te.type,nr=0;if(wn==="svg"&&(Wt=!0),St!=null){for(;nr<St.length;nr++)if((An=St[nr])&&"setAttribute"in An==!!wn&&(wn?An.localName===wn:An.nodeType===3)){Ue=An,St[nr]=null;break}}if(Ue==null){if(wn===null)return document.createTextNode(Ie);Ue=Wt?document.createElementNS("http://www.w3.org/2000/svg",wn):document.createElement(wn,Ie.is&&Ie),St=null,pn=!1}if(wn===null)kn===Ie||pn&&Ue.data===Ie||(Ue.data=Ie);else{if(St=St&&s.call(Ue.childNodes),yn=(kn=$e.props||x).dangerouslySetInnerHTML,ht=Ie.dangerouslySetInnerHTML,!pn){if(St!=null)for(kn={},nr=0;nr<Ue.attributes.length;nr++)kn[Ue.attributes[nr].name]=Ue.attributes[nr].value;(ht||yn)&&(ht&&(yn&&ht.__html==yn.__html||ht.__html===Ue.innerHTML)||(Ue.innerHTML=ht&&ht.__html||""))}if(function(le,rr,Rr,Sr,uo){var Vn;for(Vn in Rr)Vn==="children"||Vn==="key"||Vn in rr||oe(le,Vn,null,Rr[Vn],Sr);for(Vn in rr)uo&&typeof rr[Vn]!="function"||Vn==="children"||Vn==="key"||Vn==="value"||Vn==="checked"||Rr[Vn]===rr[Vn]||oe(le,Vn,rr[Vn],Rr[Vn],Sr)}(Ue,Ie,kn,Wt,pn),ht)Te.__k=[];else if(nr=Te.props.children,W(Ue,Array.isArray(nr)?nr:[nr],Te,$e,wt,Wt&&wn!=="foreignObject",St,Zt,St?St[0]:$e.__k&&I($e,0),pn),St!=null)for(nr=St.length;nr--;)St[nr]!=null&&w(St[nr]);pn||("value"in Ie&&(nr=Ie.value)!==void 0&&(nr!==kn.value||nr!==Ue.value||wn==="progress"&&!nr)&&oe(Ue,"value",nr,kn.value,!1),"checked"in Ie&&(nr=Ie.checked)!==void 0&&nr!==Ue.checked&&oe(Ue,"checked",nr,kn.checked,!1))}return Ue}function nt(Ue,Te,$e){try{typeof Ue=="function"?Ue(Te):Ue.current=Te}catch(wt){c.__e(wt,$e)}}function Ot(Ue,Te,$e){var wt,Wt;if(c.unmount&&c.unmount(Ue),(wt=Ue.ref)&&(wt.current&&wt.current!==Ue.__e||nt(wt,null,Te)),(wt=Ue.__c)!=null){if(wt.componentWillUnmount)try{wt.componentWillUnmount()}catch(St){c.__e(St,Te)}wt.base=wt.__P=null}if(wt=Ue.__k)for(Wt=0;Wt<wt.length;Wt++)wt[Wt]&&Ot(wt[Wt],Te,typeof Ue.type!="function");$e||Ue.__e==null||w(Ue.__e),Ue.__e=Ue.__d=void 0}function Qe(Ue,Te,$e){return this.constructor(Ue,$e)}function lt(Ue,Te,$e){var wt,Wt,St;c.__&&c.__(Ue,Te),Wt=(wt=typeof $e=="function")?null:$e&&$e.__k||Te.__k,St=[],Ee(Te,Ue=(!wt&&$e||Te).__k=C($,null,[Ue]),Wt||x,x,Te.ownerSVGElement!==void 0,!wt&&$e?[$e]:Wt?null:Te.firstChild?s.call(Te.childNodes):null,St,!wt&&$e?$e:Wt?Wt.__e:Te.firstChild,wt),we(St,Ue)}function dt(Ue,Te){lt(Ue,Te,dt)}function Tt(Ue,Te,$e){var wt,Wt,St,Zt=E({},Ue.props);for(St in Te)St=="key"?wt=Te[St]:St=="ref"?Wt=Te[St]:Zt[St]=Te[St];return arguments.length>2&&(Zt.children=arguments.length>3?s.call(arguments,2):$e),j(Ue.type,Zt,wt||Ue.key,Wt||Ue.ref,null)}function bn(Ue,Te){var $e={__c:Te="__cC"+b++,__:Ue,Consumer:function(wt,Wt){return wt.children(Wt)},Provider:function(wt){var Wt,St;return this.getChildContext||(Wt=[],(St={})[Te]=this,this.getChildContext=function(){return St},this.shouldComponentUpdate=function(Zt){this.props.value!==Zt.value&&Wt.some(Z)},this.sub=function(Zt){Wt.push(Zt);var pn=Zt.componentWillUnmount;Zt.componentWillUnmount=function(){Wt.splice(Wt.indexOf(Zt),1),pn&&pn.call(Zt)}}),wt.children}};return $e.Provider.__=$e.Consumer.contextType=$e}s=M.slice,c={__e:function(Ue,Te){for(var $e,wt,Wt;Te=Te.__;)if(($e=Te.__c)&&!$e.__)try{if((wt=$e.constructor)&&wt.getDerivedStateFromError!=null&&($e.setState(wt.getDerivedStateFromError(Ue)),Wt=$e.__d),$e.componentDidCatch!=null&&($e.componentDidCatch(Ue),Wt=$e.__d),Wt)return $e.__E=$e}catch(St){Ue=St}throw Ue}},f=0,U.prototype.setState=function(Ue,Te){var $e;$e=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof Ue=="function"&&(Ue=Ue(E({},$e),this.props)),Ue&&E($e,Ue),Ue!=null&&this.__v&&(Te&&this.__h.push(Te),Z(this))},U.prototype.forceUpdate=function(Ue){this.__v&&(this.__e=!0,Ue&&this.__h.push(Ue),Z(this))},U.prototype.render=$,d=[],_=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,G.__r=0,b=0},function(n,o,r){(function(s,c){r.d(o,"a",function(){return Z}),r.d(o,"b",function(){return Dc}),r.d(o,"c",function(){return ja}),r.d(o,"d",function(){return Zn}),r.d(o,"e",function(){return en}),r.d(o,"f",function(){return on}),r.d(o,"g",function(){return zn}),r.d(o,"h",function(){return Ii}),r.d(o,"i",function(){return uo}),r.d(o,"j",function(){return Nn}),r.d(o,"k",function(){return bl}),r.d(o,"l",function(){return Tc}),r.d(o,"m",function(){return le}),r.d(o,"n",function(){return ss}),r.d(o,"o",function(){return K}),r.d(o,"p",function(){return op}),r.d(o,"q",function(){return ga}),r.d(o,"r",function(){return us}),r.d(o,"s",function(){return sa}),r.d(o,"t",function(){return zo}),r.d(o,"u",function(){return Ru}),r.d(o,"v",function(){return Xd}),r.d(o,"w",function(){return Nc}),r.d(o,"x",function(){return ci}),r.d(o,"y",function(){return wa}),r.d(o,"z",function(){return Jo}),r.d(o,"A",function(){return fi}),r.d(o,"B",function(){return _a}),r.d(o,"C",function(){return yn}),r.d(o,"D",function(){return qd}),r.d(o,"E",function(){return qr}),r.d(o,"F",function(){return Zr}),r.d(o,"G",function(){return Mc}),r.d(o,"H",function(){return xc}),r.d(o,"I",function(){return Pc}),r.d(o,"J",function(){return di}),r.d(o,"K",function(){return Ye}),r.d(o,"L",function(){return po}),r.d(o,"M",function(){return ju});var f=[];Object.freeze(f);var d={};function _(){return++Dn.mobxGuid}function y(P){throw b(!1,P),"X"}function b(P,R){if(!P)throw new Error("[mobx] "+(R||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(d);function x(P){var R=!1;return function(){if(!R)return R=!0,P.apply(this,arguments)}}var M=function(){};function S(P){return P!==null&&typeof P=="object"}function E(P){if(P===null||typeof P!="object")return!1;var R=Object.getPrototypeOf(P);return R===Object.prototype||R===null}function w(P,R,H){Object.defineProperty(P,R,{enumerable:!1,writable:!0,configurable:!0,value:H})}function C(P,R){var H="isMobX"+P;return R.prototype[H]=!0,function(ae){return S(ae)&&ae[H]===!0}}function j(P){return P instanceof Map}function B(P){return P instanceof Set}function $(P){var R=new Set;for(var H in P)R.add(H);return Object.getOwnPropertySymbols(P).forEach(function(ae){Object.getOwnPropertyDescriptor(P,ae).enumerable&&R.add(ae)}),Array.from(R)}function U(P){return P&&P.toString?P.toString():new String(P).toString()}function I(P){return P===null?null:typeof P=="object"?""+P:P}var F=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:Object.getOwnPropertyNames,Z=Symbol("mobx administration"),G=function(){function P(R){R===void 0&&(R="Atom@"+_()),this.name=R,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=kn.NOT_TRACKING}return P.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(R){return R()})},P.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(R){return R()})},P.prototype.reportObserved=function(){return Pu(this)},P.prototype.reportChanged=function(){Ji(),function(R){R.lowestObserverState!==kn.STALE&&(R.lowestObserverState=kn.STALE,R.observers.forEach(function(H){H.dependenciesState===kn.UP_TO_DATE&&(H.isTracing!==Ie.NONE&&Da(H,R),H.onBecomeStale()),H.dependenciesState=kn.STALE}))}(this),aa()},P.prototype.toString=function(){return this.name},P}(),W=C("Atom",G);function K(P,R,H){R===void 0&&(R=M),H===void 0&&(H=M);var ae,be=new G(P);return R!==M&&Hd("onBecomeObserved",be,R,ae),H!==M&&qr(be,H),be}var J={structural:function(P,R){return Vt(P,R)},default:function(P,R){return Object.is(P,R)}},q=function(P,R){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,ae){H.__proto__=ae}||function(H,ae){for(var be in ae)ae.hasOwnProperty(be)&&(H[be]=ae[be])},q(P,R)};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation. All rights reserved.
		Licensed under the Apache License, Version 2.0 (the "License"); you may not use
		this file except in compliance with the License. You may obtain a copy of the
		License at http://www.apache.org/licenses/LICENSE-2.0

		THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
		KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
		WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
		MERCHANTABLITY OR NON-INFRINGEMENT.

		See the Apache Version 2.0 License for specific language governing permissions
		and limitations under the License.
		***************************************************************************** */var ne=function(){return ne=Object.assign||function(P){for(var R,H=1,ae=arguments.length;H<ae;H++)for(var be in R=arguments[H])Object.prototype.hasOwnProperty.call(R,be)&&(P[be]=R[be]);return P},ne.apply(this,arguments)};function oe(P){var R=typeof Symbol=="function"&&P[Symbol.iterator],H=0;return R?R.call(P):{next:function(){return P&&H>=P.length&&(P=void 0),{value:P&&P[H++],done:!P}}}}function Me(P,R){var H=typeof Symbol=="function"&&P[Symbol.iterator];if(!H)return P;var ae,be,qe=H.call(P),gt=[];try{for(;(R===void 0||R-- >0)&&!(ae=qe.next()).done;)gt.push(ae.value)}catch(qt){be={error:qt}}finally{try{ae&&!ae.done&&(H=qe.return)&&H.call(qe)}finally{if(be)throw be.error}}return gt}function Pe(){for(var P=[],R=0;R<arguments.length;R++)P=P.concat(Me(arguments[R]));return P}var Ee=Symbol("mobx did run lazy initializers"),we=Symbol("mobx pending decorators"),Be={},nt={};function Ot(P,R){var H=R?Be:nt;return H[P]||(H[P]={configurable:!0,enumerable:R,get:function(){return Qe(this),this[P]},set:function(ae){Qe(this),this[P]=ae}})}function Qe(P){var R,H;if(P[Ee]!==!0){var ae=P[we];if(ae){w(P,Ee,!0);var be=Pe(Object.getOwnPropertySymbols(ae),Object.keys(ae));try{for(var qe=oe(be),gt=qe.next();!gt.done;gt=qe.next()){var qt=ae[gt.value];qt.propertyCreator(P,qt.prop,qt.descriptor,qt.decoratorTarget,qt.decoratorArguments)}}catch(On){R={error:On}}finally{try{gt&&!gt.done&&(H=qe.return)&&H.call(qe)}finally{if(R)throw R.error}}}}}function lt(P,R){return function(){var H,ae=function(be,qe,gt,qt){if(qt===!0)return R(be,qe,gt,be,H),null;if(!Object.prototype.hasOwnProperty.call(be,we)){var On=be[we];w(be,we,ne({},On))}return be[we][qe]={prop:qe,propertyCreator:R,descriptor:gt,decoratorTarget:be,decoratorArguments:H},Ot(qe,P)};return dt(arguments)?(H=f,ae.apply(null,arguments)):(H=Array.prototype.slice.call(arguments),ae)}}function dt(P){return(P.length===2||P.length===3)&&(typeof P[1]=="string"||typeof P[1]=="symbol")||P.length===4&&P[3]===!0}function Tt(P,R,H){return ci(P)?P:Array.isArray(P)?yn.array(P,{name:H}):E(P)?yn.object(P,void 0,{name:H}):j(P)?yn.map(P,{name:H}):B(P)?yn.set(P,{name:H}):P}function bn(P){return P}function Ue(P){b(P);var R=lt(!0,function(ae,be,qe,gt,qt){var On=qe?qe.initializer?qe.initializer.call(ae):qe.value:void 0;la(ae).addObservableProp(be,On,P)}),H=(s!==void 0&&s.env,R);return H.enhancer=P,H}var Te={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function $e(P){return P==null?Te:typeof P=="string"?{name:P,deep:!0,proxy:!0}:P}Object.freeze(Te);var wt=Ue(Tt),Wt=Ue(function(P,R,H){return P==null||fi(P)||wa(P)||Jo(P)||oi(P)?P:Array.isArray(P)?yn.array(P,{name:H,deep:!1}):E(P)?yn.object(P,void 0,{name:H,deep:!1}):j(P)?yn.map(P,{name:H,deep:!1}):B(P)?yn.set(P,{name:H,deep:!1}):y(!1)}),St=Ue(bn),Zt=Ue(function(P,R,H){return Vt(P,R)?R:P});function pn(P){return P.defaultDecorator?P.defaultDecorator.enhancer:P.deep===!1?bn:Tt}var An={box:function(P,R){arguments.length>2&&ht("box");var H=$e(R);return new Vr(P,pn(H),H.name,!0,H.equals)},array:function(P,R){arguments.length>2&&ht("array");var H=$e(R);return Vl(P,pn(H),H.name)},map:function(P,R){arguments.length>2&&ht("map");var H=$e(R);return new Dc(P,pn(H),H.name)},set:function(P,R){arguments.length>2&&ht("set");var H=$e(R);return new Ya(P,pn(H),H.name)},object:function(P,R,H){typeof arguments[1]=="string"&&ht("object");var ae=$e(H);if(ae.proxy===!1)return ga({},P,R,ae);var be=Cu(ae),qe=ga({},void 0,void 0,ae),gt=cs(qe);return Wd(gt,P,R,be),gt},ref:St,shallow:Wt,deep:wt,struct:Zt},yn=function(P,R,H){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return wt.apply(null,arguments);if(ci(P))return P;var ae=E(P)?yn.object(P,R,H):Array.isArray(P)?yn.array(P,R):j(P)?yn.map(P,R):B(P)?yn.set(P,R):P;if(ae!==P)return ae;y(!1)};function ht(P){y("Expected one or two arguments to observable."+P+". Did you accidentally try to use observable."+P+" as decorator?")}Object.keys(An).forEach(function(P){return yn[P]=An[P]});var kn,Ie,wn=lt(!1,function(P,R,H,ae,be){var qe=H.get,gt=H.set,qt=be[0]||{};la(P).addComputedProp(P,R,ne({get:qe,set:gt,context:P},qt))}),nr=wn({equals:J.structural}),le=function(P,R,H){if(typeof R=="string"||P!==null&&typeof P=="object"&&arguments.length===1)return wn.apply(null,arguments);var ae=typeof R=="object"?R:{};return ae.get=P,ae.set=typeof R=="function"?R:ae.set,ae.name=ae.name||P.name||"",new Wa(ae)};le.struct=nr,function(P){P[P.NOT_TRACKING=-1]="NOT_TRACKING",P[P.UP_TO_DATE=0]="UP_TO_DATE",P[P.POSSIBLY_STALE=1]="POSSIBLY_STALE",P[P.STALE=2]="STALE"}(kn||(kn={})),function(P){P[P.NONE=0]="NONE",P[P.LOG=1]="LOG",P[P.BREAK=2]="BREAK"}(Ie||(Ie={}));var rr=function(P){this.cause=P};function Rr(P){return P instanceof rr}function Sr(P){switch(P.dependenciesState){case kn.UP_TO_DATE:return!1;case kn.NOT_TRACKING:case kn.STALE:return!0;case kn.POSSIBLY_STALE:for(var R=on(!0),H=Le(),ae=P.observing,be=ae.length,qe=0;qe<be;qe++){var gt=ae[qe];if(_l(gt)){if(Dn.disableErrorBoundaries)gt.get();else try{gt.get()}catch{return st(H),en(R),!0}if(P.dependenciesState===kn.STALE)return st(H),en(R),!0}}return In(P),st(H),en(R),!1}}function uo(){return Dn.trackingDerivation!==null}function Vn(P){var R=P.observers.size>0;Dn.computationDepth>0&&R&&y(!1),Dn.allowStateChanges||!R&&Dn.enforceActions!=="strict"||y(!1)}function fo(P,R,H){var ae=on(!0);In(P),P.newObserving=new Array(P.observing.length+100),P.unboundDepsCount=0,P.runId=++Dn.runId;var be,qe=Dn.trackingDerivation;if(Dn.trackingDerivation=P,Dn.disableErrorBoundaries===!0)be=R.call(H);else try{be=R.call(H)}catch(gt){be=new rr(gt)}return Dn.trackingDerivation=qe,function(gt){for(var qt=gt.observing,On=gt.observing=gt.newObserving,xr=kn.UP_TO_DATE,dn=0,Yr=gt.unboundDepsCount,wr=0;wr<Yr;wr++)(Ur=On[wr]).diffValue===0&&(Ur.diffValue=1,dn!==wr&&(On[dn]=Ur),dn++),Ur.dependenciesState>xr&&(xr=Ur.dependenciesState);for(On.length=dn,gt.newObserving=null,Yr=qt.length;Yr--;)(Ur=qt[Yr]).diffValue===0&&So(Ur,gt),Ur.diffValue=0;for(;dn--;){var Ur;(Ur=On[dn]).diffValue===1&&(Ur.diffValue=0,Vd(Ur,gt))}xr!==kn.UP_TO_DATE&&(gt.dependenciesState=xr,gt.onBecomeStale())}(P),en(ae),be}function xe(P){var R=P.observing;P.observing=[];for(var H=R.length;H--;)So(R[H],P);P.dependenciesState=kn.NOT_TRACKING}function Ye(P){var R=Le();try{return P()}finally{st(R)}}function Le(){var P=Dn.trackingDerivation;return Dn.trackingDerivation=null,P}function st(P){Dn.trackingDerivation=P}function on(P){var R=Dn.allowStateReads;return Dn.allowStateReads=P,R}function en(P){Dn.allowStateReads=P}function In(P){if(P.dependenciesState!==kn.UP_TO_DATE){P.dependenciesState=kn.UP_TO_DATE;for(var R=P.observing,H=R.length;H--;)R[H].lowestObserverState=kn.UP_TO_DATE}}var Ar=0,ui=1,Si=Object.getOwnPropertyDescriptor(function(){},"name");Si&&Si.configurable;function Zo(P,R,H){var ae=function(){return ri(P,R,H||this,arguments)};return ae.isMobxAction=!0,ae}function ri(P,R,H,ae){var be=Nn();try{return R.apply(H,ae)}catch(qe){throw be.error=qe,qe}finally{zn(be)}}function Nn(P,R,H){var ae=0,be=Le();Ji();var qe={prevDerivation:be,prevAllowStateChanges:ur(!0),prevAllowStateReads:on(!0),notifySpy:!1,startTime:ae,actionId:ui++,parentActionId:Ar};return Ar=qe.actionId,qe}function zn(P){Ar!==P.actionId&&y("invalid action stack. did you forget to finish an action?"),Ar=P.parentActionId,P.error!==void 0&&(Dn.suppressReactionErrors=!0),oo(P.prevAllowStateChanges),en(P.prevAllowStateReads),aa(),st(P.prevDerivation),P.notifySpy,Dn.suppressReactionErrors=!1}function Zn(P,R){var H,ae=ur(P);try{H=R()}finally{oo(ae)}return H}function ur(P){var R=Dn.allowStateChanges;return Dn.allowStateChanges=P,R}function oo(P){Dn.allowStateChanges=P}var Vr=function(P){function R(H,ae,be,qe,gt){be===void 0&&(be="ObservableValue@"+_()),gt===void 0&&(gt=J.default);var qt=P.call(this,be)||this;return qt.enhancer=ae,qt.name=be,qt.equals=gt,qt.hasUnreportedChange=!1,qt.value=ae(H,void 0,be),qt}return function(H,ae){function be(){this.constructor=H}q(H,ae),H.prototype=ae===null?Object.create(ae):(be.prototype=ae.prototype,new be)}(R,P),R.prototype.dehanceValue=function(H){return this.dehancer!==void 0?this.dehancer(H):H},R.prototype.set=function(H){this.value,(H=this.prepareNewValue(H))!==Dn.UNCHANGED&&this.setNewValue(H)},R.prototype.prepareNewValue=function(H){if(Vn(this),ea(this)){var ae=Lr(this,{object:this,type:"update",newValue:H});if(!ae)return Dn.UNCHANGED;H=ae.newValue}return H=this.enhancer(H,this.value,this.name),this.equals(this.value,H)?Dn.UNCHANGED:H},R.prototype.setNewValue=function(H){var ae=this.value;this.value=H,this.reportChanged(),Gi(this)&&gi(this,{type:"update",object:this,newValue:H,oldValue:ae})},R.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},R.prototype.intercept=function(H){return ba(this,H)},R.prototype.observe=function(H,ae){return ae&&H({object:this,type:"update",newValue:this.value,oldValue:void 0}),Ia(this,H)},R.prototype.toJSON=function(){return this.get()},R.prototype.toString=function(){return this.name+"["+this.value+"]"},R.prototype.valueOf=function(){return I(this.get())},R.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},R}(G),gl=C("ObservableValue",Vr),Wa=function(){function P(R){this.dependenciesState=kn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=kn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+_(),this.value=new rr(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Ie.NONE,b(R.get,"missing option for computed: get"),this.derivation=R.get,this.name=R.name||"ComputedValue@"+_(),R.set&&(this.setter=Zo(this.name+"-setter",R.set)),this.equals=R.equals||(R.compareStructural||R.struct?J.structural:J.default),this.scope=R.context,this.requiresReaction=!!R.requiresReaction,this.keepAlive=!!R.keepAlive}return P.prototype.onBecomeStale=function(){(function(R){R.lowestObserverState===kn.UP_TO_DATE&&(R.lowestObserverState=kn.POSSIBLY_STALE,R.observers.forEach(function(H){H.dependenciesState===kn.UP_TO_DATE&&(H.dependenciesState=kn.POSSIBLY_STALE,H.isTracing!==Ie.NONE&&Da(H,R),H.onBecomeStale())}))})(this)},P.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(R){return R()})},P.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(R){return R()})},P.prototype.get=function(){this.isComputing&&y("Cycle detected in computation "+this.name+": "+this.derivation),Dn.inBatch!==0||this.observers.size!==0||this.keepAlive?(Pu(this),Sr(this)&&this.trackAndCompute()&&function(H){H.lowestObserverState!==kn.STALE&&(H.lowestObserverState=kn.STALE,H.observers.forEach(function(ae){ae.dependenciesState===kn.POSSIBLY_STALE?ae.dependenciesState=kn.STALE:ae.dependenciesState===kn.UP_TO_DATE&&(H.lowestObserverState=kn.UP_TO_DATE)}))}(this)):Sr(this)&&(this.warnAboutUntrackedRead(),Ji(),this.value=this.computeValue(!1),aa());var R=this.value;if(Rr(R))throw R.cause;return R},P.prototype.peek=function(){var R=this.computeValue(!1);if(Rr(R))throw R.cause;return R},P.prototype.set=function(R){if(this.setter){b(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,R)}finally{this.isRunningSetter=!1}}else b(!1,!1)},P.prototype.trackAndCompute=function(){var R=this.value,H=this.dependenciesState===kn.NOT_TRACKING,ae=this.computeValue(!0),be=H||Rr(R)||Rr(ae)||!this.equals(R,ae);return be&&(this.value=ae),be},P.prototype.computeValue=function(R){var H;if(this.isComputing=!0,Dn.computationDepth++,R)H=fo(this,this.derivation,this.scope);else if(Dn.disableErrorBoundaries===!0)H=this.derivation.call(this.scope);else try{H=this.derivation.call(this.scope)}catch(ae){H=new rr(ae)}return Dn.computationDepth--,this.isComputing=!1,H},P.prototype.suspend=function(){this.keepAlive||(xe(this),this.value=void 0)},P.prototype.observe=function(R,H){var ae=this,be=!0,qe=void 0;return Tc(function(){var gt=ae.get();if(!be||H){var qt=Le();R({type:"update",object:ae,newValue:gt,oldValue:qe}),st(qt)}be=!1,qe=gt})},P.prototype.warnAboutUntrackedRead=function(){},P.prototype.toJSON=function(){return this.get()},P.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},P.prototype.valueOf=function(){return I(this.get())},P.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},P}(),_l=C("ComputedValue",Wa),ls=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},tp={};function wc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:tp}var ma=!0,Bs=!1,Dn=function(){var P=wc();return P.__mobxInstanceCount>0&&!P.__mobxGlobals&&(ma=!1),P.__mobxGlobals&&P.__mobxGlobals.version!==new ls().version&&(ma=!1),ma?P.__mobxGlobals?(P.__mobxInstanceCount+=1,P.__mobxGlobals.UNCHANGED||(P.__mobxGlobals.UNCHANGED={}),P.__mobxGlobals):(P.__mobxInstanceCount=1,P.__mobxGlobals=new ls):(setTimeout(function(){Bs||y("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new ls)}();function Vd(P,R){P.observers.add(R),P.lowestObserverState>R.dependenciesState&&(P.lowestObserverState=R.dependenciesState)}function So(P,R){P.observers.delete(R),P.observers.size===0&&Ec(P)}function Ec(P){P.isPendingUnobservation===!1&&(P.isPendingUnobservation=!0,Dn.pendingUnobservations.push(P))}function Ji(){Dn.inBatch++}function aa(){if(--Dn.inBatch==0){Sc();for(var P=Dn.pendingUnobservations,R=0;R<P.length;R++){var H=P[R];H.isPendingUnobservation=!1,H.observers.size===0&&(H.isBeingObserved&&(H.isBeingObserved=!1,H.onBecomeUnobserved()),H instanceof Wa&&H.suspend())}Dn.pendingUnobservations=[]}}function Pu(P){var R=Dn.trackingDerivation;return R!==null?(R.runId!==P.lastAccessedBy&&(P.lastAccessedBy=R.runId,R.newObserving[R.unboundDepsCount++]=P,P.isBeingObserved||(P.isBeingObserved=!0,P.onBecomeObserved())),!0):(P.observers.size===0&&Dn.inBatch>0&&Ec(P),!1)}function Da(P,R){if(P.isTracing===Ie.BREAK){var H=[];ya(zo(P),H,1),new Function(`debugger;
/*
Tracing '`+P.name+`'

You are entering this break point because derivation '`+P.name+"' is being traced and '"+R.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(P instanceof Wa?P.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+H.join(`
`)+`
*/
    `)()}}function ya(P,R,H){R.length>=1e3?R.push("(and many more)"):(R.push(""+new Array(H).join("	")+P.name),P.dependencies&&P.dependencies.forEach(function(ae){return ya(ae,R,H+1)}))}var ja=function(){function P(R,H,ae,be){R===void 0&&(R="Reaction@"+_()),be===void 0&&(be=!1),this.name=R,this.onInvalidate=H,this.errorHandler=ae,this.requiresObservable=be,this.observing=[],this.newObserving=[],this.dependenciesState=kn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+_(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Ie.NONE}return P.prototype.onBecomeStale=function(){this.schedule()},P.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Dn.pendingReactions.push(this),Sc())},P.prototype.isScheduled=function(){return this._isScheduled},P.prototype.runReaction=function(){if(!this.isDisposed){if(Ji(),this._isScheduled=!1,Sr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(R){this.reportExceptionInDerivation(R)}}aa()}},P.prototype.track=function(R){if(!this.isDisposed){Ji(),this._isRunning=!0;var H=fo(this,R,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&xe(this),Rr(H)&&this.reportExceptionInDerivation(H.cause),aa()}},P.prototype.reportExceptionInDerivation=function(R){var H=this;if(this.errorHandler)this.errorHandler(R,this);else{if(Dn.disableErrorBoundaries)throw R;Dn.suppressReactionErrors,Dn.globalReactionErrorHandlers.forEach(function(ae){return ae(R,H)})}},P.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ji(),xe(this),aa()))},P.prototype.getDisposer=function(){var R=this.dispose.bind(this);return R[Z]=this,R},P.prototype.toString=function(){return"Reaction["+this.name+"]"},P.prototype.trace=function(R){R===void 0&&(R=!1),function(){for(var H=[],ae=0;ae<arguments.length;ae++)H[ae]=arguments[ae];var be=!1;typeof H[H.length-1]=="boolean"&&(be=H.pop());var qe=zr(H);if(!qe)return y(!1);qe.isTracing,Ie.NONE,qe.isTracing=be?Ie.BREAK:Ie.LOG}(this,R)},P}(),Oc=function(P){return P()};function Sc(){Dn.inBatch>0||Dn.isRunningReactions||Oc(Bd)}function Bd(){Dn.isRunningReactions=!0;for(var P=Dn.pendingReactions,R=0;P.length>0;){++R==100&&P.splice(0);for(var H=P.splice(0),ae=0,be=H.length;ae<be;ae++)H[ae].runReaction()}Dn.isRunningReactions=!1}var Us=C("Reaction",ja);function Ud(P){var R=Oc;Oc=function(H){return P(function(){return R(H)})}}function xc(P){return function(){}}function np(){y(!1)}function Ll(P){return function(R,H,ae){if(ae){if(ae.value)return{value:Zo(P,ae.value),enumerable:!1,configurable:!0,writable:!0};var be=ae.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Zo(P,be.call(this))}}}return Gd(P).apply(this,arguments)}}function Gd(P){return function(R,H,ae){Object.defineProperty(R,H,{configurable:!0,enumerable:!1,get:function(){},set:function(be){w(this,H,bl(P,be))}})}}var bl=function(P,R,H,ae){return arguments.length===1&&typeof P=="function"?Zo(P.name||"<unnamed action>",P):arguments.length===2&&typeof R=="function"?Zo(P,R):arguments.length===1&&typeof P=="string"?Ll(P):ae!==!0?Ll(R).apply(null,arguments):void w(P,R,Zo(P.name||R,H.value,this))};function Mc(P,R){return ri(typeof P=="string"?P:P.name||"<unnamed action>",typeof P=="function"?P:R,this,void 0)}function Ru(P){return typeof P=="function"&&P.isMobxAction===!0}function Ac(P,R,H){w(P,R,Zo(R,H.bind(P)))}function Tc(P,R){R===void 0&&(R=d);var H,ae=R&&R.name||P.name||"Autorun@"+_();if(!R.scheduler&&!R.delay)H=new ja(ae,function(){this.track(gt)},R.onError,R.requiresObservable);else{var be=zd(R),qe=!1;H=new ja(ae,function(){qe||(qe=!0,be(function(){qe=!1,H.isDisposed||H.track(gt)}))},R.onError,R.requiresObservable)}function gt(){P(H)}return H.schedule(),H.getDisposer()}bl.bound=function(P,R,H,ae){return ae===!0?(Ac(P,R,H.value),null):H?{configurable:!0,enumerable:!1,get:function(){return Ac(this,R,H.value||H.initializer.call(this)),this[R]},set:np}:{enumerable:!1,configurable:!0,set:function(be){Ac(this,R,be)},get:function(){}}};var rp=function(P){return P()};function zd(P){return P.scheduler?P.scheduler:P.delay?function(R){return setTimeout(R,P.delay)}:rp}function Zr(P,R,H){H===void 0&&(H=d);var ae,be,qe,gt=H.name||"Reaction@"+_(),qt=bl(gt,H.onError?(ae=H.onError,be=R,function(){try{return be.apply(this,arguments)}catch(Po){ae.call(this,Po)}}):R),On=!H.scheduler&&!H.delay,xr=zd(H),dn=!0,Yr=!1,wr=H.compareStructural?J.structural:H.equals||J.default,Ur=new ja(gt,function(){dn||On?ua():Yr||(Yr=!0,xr(ua))},H.onError,H.requiresObservable);function ua(){if(Yr=!1,!Ur.isDisposed){var Po=!1;Ur.track(function(){var na=P(Ur);Po=dn||!wr(qe,na),qe=na}),dn&&H.fireImmediately&&qt(qe,Ur),dn||Po!==!0||qt(qe,Ur),dn&&(dn=!1)}}return Ur.schedule(),Ur.getDisposer()}function qr(P,R,H){return Hd("onBecomeUnobserved",P,R,H)}function Hd(P,R,H,ae){var be=typeof ae=="function"?sa(R,H):sa(R),qe=typeof ae=="function"?ae:H,gt=P+"Listeners";return be[gt]?be[gt].add(qe):be[gt]=new Set([qe]),typeof be[P]!="function"?y(!1):function(){var qt=be[gt];qt&&(qt.delete(qe),qt.size===0&&delete be[gt])}}function ss(P){var R=P.enforceActions,H=P.computedRequiresReaction,ae=P.computedConfigurable,be=P.disableErrorBoundaries,qe=P.reactionScheduler,gt=P.reactionRequiresObservable,qt=P.observableRequiresReaction;if(P.isolateGlobalState===!0&&((Dn.pendingReactions.length||Dn.inBatch||Dn.isRunningReactions)&&y("isolateGlobalState should be called before MobX is running any reactions"),Bs=!0,ma&&(--wc().__mobxInstanceCount==0&&(wc().__mobxGlobals=void 0),Dn=new ls)),R!==void 0){var On=void 0;switch(R){case!0:case"observed":On=!0;break;case!1:case"never":On=!1;break;case"strict":case"always":On="strict";break;default:y("Invalid value for 'enforceActions': '"+R+"', expected 'never', 'always' or 'observed'")}Dn.enforceActions=On,Dn.allowStateChanges=On!==!0&&On!=="strict"}H!==void 0&&(Dn.computedRequiresReaction=!!H),gt!==void 0&&(Dn.reactionRequiresObservable=!!gt),qt!==void 0&&(Dn.observableRequiresReaction=!!qt,Dn.allowStateReads=!Dn.observableRequiresReaction),ae!==void 0&&(Dn.computedConfigurable=!!ae),be!==void 0&&(Dn.disableErrorBoundaries=!!be),qe&&Ud(qe)}function ga(P,R,H,ae){var be=Cu(ae=$e(ae));return Qe(P),la(P,ae.name,be.enhancer),R&&Wd(P,R,H,be),P}function Cu(P){return P.defaultDecorator||(P.deep===!1?St:wt)}function Wd(P,R,H,ae){var be,qe;Ji();try{var gt=F(R);try{for(var qt=oe(gt),On=qt.next();!On.done;On=qt.next()){var xr=On.value,dn=Object.getOwnPropertyDescriptor(R,xr),Yr=(H&&xr in H?H[xr]:dn.get?wn:ae)(P,xr,dn,!0);Yr&&Object.defineProperty(P,xr,Yr)}}catch(wr){be={error:wr}}finally{try{On&&!On.done&&(qe=qt.return)&&qe.call(qt)}finally{if(be)throw be.error}}}finally{aa()}}function zo(P,R){return $l(sa(P,R))}function $l(P){var R,H,ae={name:P.name};return P.observing&&P.observing.length>0&&(ae.dependencies=(R=P.observing,H=[],R.forEach(function(be){H.indexOf(be)===-1&&H.push(be)}),H).map($l)),ae}var Fl=0;function Du(){this.message="FLOW_CANCELLED"}function us(P){arguments.length!==1&&y("Flow expects 1 argument and cannot be used as decorator");var R=P.name||"<unnamed flow>";return function(){var H,ae=this,be=arguments,qe=++Fl,gt=bl(R+" - runid: "+qe+" - init",P).apply(ae,be),qt=void 0,On=new Promise(function(xr,dn){var Yr=0;function wr(Po){var na;qt=void 0;try{na=bl(R+" - runid: "+qe+" - yield "+Yr++,gt.next).call(gt,Po)}catch(wl){return dn(wl)}ua(na)}function Ur(Po){var na;qt=void 0;try{na=bl(R+" - runid: "+qe+" - yield "+Yr++,gt.throw).call(gt,Po)}catch(wl){return dn(wl)}ua(na)}function ua(Po){if(!Po||typeof Po.then!="function")return Po.done?xr(Po.value):(qt=Promise.resolve(Po.value)).then(wr,Ur);Po.then(ua,dn)}H=dn,wr(void 0)});return On.cancel=bl(R+" - runid: "+qe+" - cancel",function(){try{qt&&xi(qt);var xr=gt.return(void 0),dn=Promise.resolve(xr.value);dn.then(M,M),xi(dn),H(new Du)}catch(Yr){H(Yr)}}),On}}function xi(P){typeof P.cancel=="function"&&P.cancel()}function kc(P,R){if(P==null)return!1;if(R!==void 0){if(fi(P)===!1||!P[Z].values.has(R))return!1;var H=sa(P,R);return _l(H)}return _l(P)}function Xd(P){return arguments.length>1?y(!1):kc(P)}function Nc(P,R){return typeof R!="string"?y(!1):kc(P,R)}function Fi(P,R){return P!=null&&(R!==void 0?!!fi(P)&&P[Z].values.has(R):fi(P)||!!P[Z]||W(P)||Us(P)||_l(P))}function ci(P){return arguments.length!==1&&y(!1),Fi(P)}function _a(P){return fi(P)?P[Z].getKeys():Jo(P)||oi(P)?Array.from(P.keys()):wa(P)?P.map(function(R,H){return H}):y(!1)}function po(P){return fi(P)?_a(P).map(function(R){return P[R]}):Jo(P)?_a(P).map(function(R){return P.get(R)}):oi(P)?Array.from(P.values()):wa(P)?P.slice():y(!1)}function op(P){return fi(P)?_a(P).map(function(R){return[R,P[R]]}):Jo(P)?_a(P).map(function(R){return[R,P.get(R)]}):oi(P)?Array.from(P.entries()):wa(P)?P.map(function(R,H){return[H,R]}):y(!1)}function Vi(P,R,H){if(arguments.length!==2||oi(P))if(fi(P)){var ae=P[Z],be=ae.values.get(R);be?ae.write(R,H):ae.addObservableProp(R,H,ae.defaultEnhancer)}else if(Jo(P))P.set(R,H);else if(oi(P))P.add(R);else{if(!wa(P))return y(!1);typeof R!="number"&&(R=parseInt(R,10)),b(R>=0,"Not a valid index: '"+R+"'"),Ji(),R>=P.length&&(P.length=R+1),P[R]=H,aa()}else{Ji();var qe=R;try{for(var gt in qe)Vi(P,gt,qe[gt])}finally{aa()}}}function qd(P,R,H,ae){return typeof H=="function"?function(be,qe,gt,qt){return Ii(be,qe).observe(gt,qt)}(P,R,H,ae):function(be,qe,gt){return Ii(be).observe(qe,gt)}(P,R,H)}Du.prototype=Object.create(Error.prototype);var Yd={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Bi(P,R,H,ae){return ae.detectCycles&&P.set(R,H),H}function Qi(P,R,H){if(!R.recurseEverything&&!ci(P)||typeof P!="object")return P;if(P===null)return null;if(P instanceof Date)return P;if(gl(P))return Qi(P.get(),R,H);if(ci(P)&&_a(P),R.detectCycles===!0&&P!==null&&H.has(P))return H.get(P);if(wa(P)||Array.isArray(P)){var ae=Bi(H,P,[],R),be=P.map(function(wr){return Qi(wr,R,H)});ae.length=be.length;for(var qe=0,gt=be.length;qe<gt;qe++)ae[qe]=be[qe];return ae}if(oi(P)||Object.getPrototypeOf(P)===Set.prototype){if(R.exportMapsAsObjects===!1){var qt=Bi(H,P,new Set,R);return P.forEach(function(wr){qt.add(Qi(wr,R,H))}),qt}var On=Bi(H,P,[],R);return P.forEach(function(wr){On.push(Qi(wr,R,H))}),On}if(Jo(P)||Object.getPrototypeOf(P)===Map.prototype){if(R.exportMapsAsObjects===!1){var xr=Bi(H,P,new Map,R);return P.forEach(function(wr,Ur){xr.set(Ur,Qi(wr,R,H))}),xr}var dn=Bi(H,P,{},R);return P.forEach(function(wr,Ur){dn[Ur]=Qi(wr,R,H)}),dn}var Yr=Bi(H,P,{},R);return $(P).forEach(function(wr){Yr[wr]=Qi(P[wr],R,H)}),Yr}function Pc(P,R){var H;return typeof R=="boolean"&&(R={detectCycles:R}),R||(R=Yd),R.detectCycles=R.detectCycles===void 0?R.recurseEverything===!0:R.detectCycles===!0,R.detectCycles&&(H=new Map),Qi(P,R,H)}function zr(P){switch(P.length){case 0:return Dn.trackingDerivation;case 1:return sa(P[0]);case 2:return sa(P[0],P[1])}}function di(P,R){R===void 0&&(R=void 0),Ji();try{return P.apply(R)}finally{aa()}}function ju(P,R,H){return arguments.length===1||R&&typeof R=="object"?Rc(P,R):Kd(P,R,H||{})}function Kd(P,R,H){var ae;typeof H.timeout=="number"&&(ae=setTimeout(function(){if(!qe[Z].isDisposed){qe();var gt=new Error("WHEN_TIMEOUT");if(!H.onError)throw gt;H.onError(gt)}},H.timeout)),H.name=H.name||"When@"+_();var be=Zo(H.name+"-effect",R),qe=Tc(function(gt){P()&&(gt.dispose(),ae&&clearTimeout(ae),be())},H);return qe}function Rc(P,R){var H,ae=new Promise(function(be,qe){var gt=Kd(P,be,ne(ne({},R),{onError:qe}));H=function(){gt(),qe("WHEN_CANCELLED")}});return ae.cancel=H,ae}function Iu(P){return P[Z]}function Xa(P){return typeof P=="string"||typeof P=="number"||typeof P=="symbol"}var Ui={has:function(P,R){if(R===Z||R==="constructor"||R===Ee)return!0;var H=Iu(P);return Xa(R)?H.has(R):R in P},get:function(P,R){if(R===Z||R==="constructor"||R===Ee)return P[R];var H=Iu(P),ae=H.values.get(R);if(ae instanceof G){var be=ae.get();return be===void 0&&H.has(R),be}return Xa(R)&&H.has(R),P[R]},set:function(P,R,H){return!!Xa(R)&&(Vi(P,R,H),!0)},deleteProperty:function(P,R){return!!Xa(R)&&(Iu(P).remove(R),!0)},ownKeys:function(P){return Iu(P).keysAtom.reportObserved(),Reflect.ownKeys(P)},preventExtensions:function(P){return y("Dynamic observable objects cannot be frozen"),!1}};function cs(P){var R=new Proxy(P,Ui);return P[Z].proxy=R,R}function ea(P){return P.interceptors!==void 0&&P.interceptors.length>0}function ba(P,R){var H=P.interceptors||(P.interceptors=[]);return H.push(R),x(function(){var ae=H.indexOf(R);ae!==-1&&H.splice(ae,1)})}function Lr(P,R){var H=Le();try{for(var ae=Pe(P.interceptors||[]),be=0,qe=ae.length;be<qe&&(b(!(R=ae[be](R))||R.type,"Intercept handlers should return nothing or a change object"),R);be++);return R}finally{st(H)}}function Gi(P){return P.changeListeners!==void 0&&P.changeListeners.length>0}function Ia(P,R){var H=P.changeListeners||(P.changeListeners=[]);return H.push(R),x(function(){var ae=H.indexOf(R);ae!==-1&&H.splice(ae,1)})}function gi(P,R){var H=Le(),ae=P.changeListeners;if(ae){for(var be=0,qe=(ae=ae.slice()).length;be<qe;be++)ae[be](R);st(H)}}var ds={get:function(P,R){return R===Z?P[Z]:R==="length"?P[Z].getArrayLength():typeof R=="number"?_o.get.call(P,R):typeof R!="string"||isNaN(R)?_o.hasOwnProperty(R)?_o[R]:P[R]:_o.get.call(P,parseInt(R))},set:function(P,R,H){return R==="length"&&P[Z].setArrayLength(H),typeof R=="number"&&_o.set.call(P,R,H),typeof R=="symbol"||isNaN(R)?P[R]=H:_o.set.call(P,parseInt(R),H),!0},preventExtensions:function(P){return y("Observable arrays cannot be frozen"),!1}};function Vl(P,R,H,ae){H===void 0&&(H="ObservableArray@"+_()),ae===void 0&&(ae=!1);var be,qe,gt,qt=new La(H,R,ae);be=qt.values,qe=Z,gt=qt,Object.defineProperty(be,qe,{enumerable:!1,writable:!1,configurable:!0,value:gt});var On=new Proxy(qt.values,ds);if(qt.proxy=On,P&&P.length){var xr=ur(!0);qt.spliceWithArray(0,0,P),oo(xr)}return On}var La=function(){function P(R,H,ae){this.owned=ae,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new G(R||"ObservableArray@"+_()),this.enhancer=function(be,qe){return H(be,qe,R+"[..]")}}return P.prototype.dehanceValue=function(R){return this.dehancer!==void 0?this.dehancer(R):R},P.prototype.dehanceValues=function(R){return this.dehancer!==void 0&&R.length>0?R.map(this.dehancer):R},P.prototype.intercept=function(R){return ba(this,R)},P.prototype.observe=function(R,H){return H===void 0&&(H=!1),H&&R({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Ia(this,R)},P.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},P.prototype.setArrayLength=function(R){if(typeof R!="number"||R<0)throw new Error("[mobx.array] Out of range: "+R);var H=this.values.length;if(R!==H)if(R>H){for(var ae=new Array(R-H),be=0;be<R-H;be++)ae[be]=void 0;this.spliceWithArray(H,0,ae)}else this.spliceWithArray(R,H-R)},P.prototype.updateArrayLength=function(R,H){if(R!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=H},P.prototype.spliceWithArray=function(R,H,ae){var be=this;Vn(this.atom);var qe=this.values.length;if(R===void 0?R=0:R>qe?R=qe:R<0&&(R=Math.max(0,qe+R)),H=arguments.length===1?qe-R:H==null?0:Math.max(0,Math.min(H,qe-R)),ae===void 0&&(ae=f),ea(this)){var gt=Lr(this,{object:this.proxy,type:"splice",index:R,removedCount:H,added:ae});if(!gt)return f;H=gt.removedCount,ae=gt.added}ae=ae.length===0?ae:ae.map(function(On){return be.enhancer(On,void 0)});var qt=this.spliceItemsIntoValues(R,H,ae);return H===0&&ae.length===0||this.notifyArraySplice(R,ae,qt),this.dehanceValues(qt)},P.prototype.spliceItemsIntoValues=function(R,H,ae){var be;if(ae.length<1e4)return(be=this.values).splice.apply(be,Pe([R,H],ae));var qe=this.values.slice(R,R+H);return this.values=this.values.slice(0,R).concat(ae,this.values.slice(R+H)),qe},P.prototype.notifyArrayChildUpdate=function(R,H,ae){var be=!this.owned&&!1,qe=Gi(this),gt=qe||be?{object:this.proxy,type:"update",index:R,newValue:H,oldValue:ae}:null;this.atom.reportChanged(),qe&&gi(this,gt)},P.prototype.notifyArraySplice=function(R,H,ae){var be=!this.owned&&!1,qe=Gi(this),gt=qe||be?{object:this.proxy,type:"splice",index:R,removed:ae,added:H,removedCount:ae.length,addedCount:H.length}:null;this.atom.reportChanged(),qe&&gi(this,gt)},P}(),_o={intercept:function(P){return this[Z].intercept(P)},observe:function(P,R){return R===void 0&&(R=!1),this[Z].observe(P,R)},clear:function(){return this.splice(0)},replace:function(P){var R=this[Z];return R.spliceWithArray(0,R.values.length,P)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(P,R){for(var H=[],ae=2;ae<arguments.length;ae++)H[ae-2]=arguments[ae];var be=this[Z];switch(arguments.length){case 0:return[];case 1:return be.spliceWithArray(P);case 2:return be.spliceWithArray(P,R)}return be.spliceWithArray(P,R,H)},spliceWithArray:function(P,R,H){return this[Z].spliceWithArray(P,R,H)},push:function(){for(var P=[],R=0;R<arguments.length;R++)P[R]=arguments[R];var H=this[Z];return H.spliceWithArray(H.values.length,0,P),H.values.length},pop:function(){return this.splice(Math.max(this[Z].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var P=[],R=0;R<arguments.length;R++)P[R]=arguments[R];var H=this[Z];return H.spliceWithArray(0,0,P),H.values.length},reverse:function(){var P=this.slice();return P.reverse.apply(P,arguments)},sort:function(P){var R=this.slice();return R.sort.apply(R,arguments)},remove:function(P){var R=this[Z],H=R.dehanceValues(R.values).indexOf(P);return H>-1&&(this.splice(H,1),!0)},get:function(P){var R=this[Z];if(R&&P<R.values.length)return R.atom.reportObserved(),R.dehanceValue(R.values[P])},set:function(P,R){var H=this[Z],ae=H.values;if(P<ae.length){Vn(H.atom);var be=ae[P];if(ea(H)){var qe=Lr(H,{type:"update",object:H.proxy,index:P,newValue:R});if(!qe)return;R=qe.newValue}(R=H.enhancer(R,be))!==be&&(ae[P]=R,H.notifyArrayChildUpdate(P,R,be))}else{if(P!==ae.length)throw new Error("[mobx.array] Index out of bounds, "+P+" is larger than "+ae.length);H.spliceWithArray(P,0,[R])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(P){typeof Array.prototype[P]=="function"&&(_o[P]=function(){var R=this[Z];R.atom.reportObserved();var H=R.dehanceValues(R.values);return H[P].apply(H,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(P){typeof Array.prototype[P]=="function"&&(_o[P]=function(R,H){var ae=this,be=this[Z];return be.atom.reportObserved(),be.dehanceValues(be.values)[P](function(qe,gt){return R.call(H,qe,gt,ae)},H)})}),["reduce","reduceRight"].forEach(function(P){_o[P]=function(){var R=this,H=this[Z];H.atom.reportObserved();var ae=arguments[0];return arguments[0]=function(be,qe,gt){return qe=H.dehanceValue(qe),ae(be,qe,gt,R)},H.values[P].apply(H.values,arguments)}});var Gs,qa=C("ObservableArrayAdministration",La);function wa(P){return S(P)&&qa(P[Z])}var Cc,ip={},Dc=function(){function P(R,H,ae){if(H===void 0&&(H=Tt),ae===void 0&&(ae="ObservableMap@"+_()),this.enhancer=H,this.name=ae,this[Gs]=ip,this._keysAtom=K(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(R)}return P.prototype._has=function(R){return this._data.has(R)},P.prototype.has=function(R){var H=this;if(!Dn.trackingDerivation)return this._has(R);var ae=this._hasMap.get(R);if(!ae){var be=ae=new Vr(this._has(R),bn,this.name+"."+U(R)+"?",!1);this._hasMap.set(R,be),qr(be,function(){return H._hasMap.delete(R)})}return ae.get()},P.prototype.set=function(R,H){var ae=this._has(R);if(ea(this)){var be=Lr(this,{type:ae?"update":"add",object:this,newValue:H,name:R});if(!be)return this;H=be.newValue}return ae?this._updateValue(R,H):this._addValue(R,H),this},P.prototype.delete=function(R){var H=this;if(Vn(this._keysAtom),ea(this)&&!(be=Lr(this,{type:"delete",object:this,name:R})))return!1;if(this._has(R)){var ae=Gi(this),be=ae?{type:"delete",object:this,oldValue:this._data.get(R).value,name:R}:null;return di(function(){H._keysAtom.reportChanged(),H._updateHasMapEntry(R,!1),H._data.get(R).setNewValue(void 0),H._data.delete(R)}),ae&&gi(this,be),!0}return!1},P.prototype._updateHasMapEntry=function(R,H){var ae=this._hasMap.get(R);ae&&ae.setNewValue(H)},P.prototype._updateValue=function(R,H){var ae=this._data.get(R);if((H=ae.prepareNewValue(H))!==Dn.UNCHANGED){var be=Gi(this),qe=be?{type:"update",object:this,oldValue:ae.value,name:R,newValue:H}:null;ae.setNewValue(H),be&&gi(this,qe)}},P.prototype._addValue=function(R,H){var ae=this;Vn(this._keysAtom),di(function(){var gt=new Vr(H,ae.enhancer,ae.name+"."+U(R),!1);ae._data.set(R,gt),H=gt.value,ae._updateHasMapEntry(R,!0),ae._keysAtom.reportChanged()});var be=Gi(this),qe=be?{type:"add",object:this,name:R,newValue:H}:null;be&&gi(this,qe)},P.prototype.get=function(R){return this.has(R)?this.dehanceValue(this._data.get(R).get()):this.dehanceValue(void 0)},P.prototype.dehanceValue=function(R){return this.dehancer!==void 0?this.dehancer(R):R},P.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},P.prototype.values=function(){var R=this,H=this.keys();return $r({next:function(){var ae=H.next(),be=ae.done,qe=ae.value;return{done:be,value:be?void 0:R.get(qe)}}})},P.prototype.entries=function(){var R=this,H=this.keys();return $r({next:function(){var ae=H.next(),be=ae.done,qe=ae.value;return{done:be,value:be?void 0:[qe,R.get(qe)]}}})},P.prototype[Gs=Z,Symbol.iterator]=function(){return this.entries()},P.prototype.forEach=function(R,H){var ae,be;try{for(var qe=oe(this),gt=qe.next();!gt.done;gt=qe.next()){var qt=Me(gt.value,2),On=qt[0],xr=qt[1];R.call(H,xr,On,this)}}catch(dn){ae={error:dn}}finally{try{gt&&!gt.done&&(be=qe.return)&&be.call(qe)}finally{if(ae)throw ae.error}}},P.prototype.merge=function(R){var H=this;return Jo(R)&&(R=R.toJS()),di(function(){var ae=ur(!0);try{E(R)?$(R).forEach(function(be){return H.set(be,R[be])}):Array.isArray(R)?R.forEach(function(be){var qe=Me(be,2),gt=qe[0],qt=qe[1];return H.set(gt,qt)}):j(R)?(R.constructor!==Map&&y("Cannot initialize from classes that inherit from Map: "+R.constructor.name),R.forEach(function(be,qe){return H.set(qe,be)})):R!=null&&y("Cannot initialize map from "+R)}finally{oo(ae)}}),this},P.prototype.clear=function(){var R=this;di(function(){Ye(function(){var H,ae;try{for(var be=oe(R.keys()),qe=be.next();!qe.done;qe=be.next()){var gt=qe.value;R.delete(gt)}}catch(qt){H={error:qt}}finally{try{qe&&!qe.done&&(ae=be.return)&&ae.call(be)}finally{if(H)throw H.error}}})})},P.prototype.replace=function(R){var H=this;return di(function(){var ae,be,qe,gt,qt=function(ii){if(j(ii)||Jo(ii))return ii;if(Array.isArray(ii))return new Map(ii);if(E(ii)){var Ul=new Map;for(var Ol in ii)Ul.set(Ol,ii[Ol]);return Ul}return y("Cannot convert to map from '"+ii+"'")}(R),On=new Map,xr=!1;try{for(var dn=oe(H._data.keys()),Yr=dn.next();!Yr.done;Yr=dn.next()){var wr=Yr.value;if(!qt.has(wr))if(H.delete(wr))xr=!0;else{var Ur=H._data.get(wr);On.set(wr,Ur)}}}catch(ii){ae={error:ii}}finally{try{Yr&&!Yr.done&&(be=dn.return)&&be.call(dn)}finally{if(ae)throw ae.error}}try{for(var ua=oe(qt.entries()),Po=ua.next();!Po.done;Po=ua.next()){var na=Me(Po.value,2),wl=(wr=na[0],Ur=na[1],H._data.has(wr));if(H.set(wr,Ur),H._data.has(wr)){var El=H._data.get(wr);On.set(wr,El),wl||(xr=!0)}}}catch(ii){qe={error:ii}}finally{try{Po&&!Po.done&&(gt=ua.return)&&gt.call(ua)}finally{if(qe)throw qe.error}}if(!xr)if(H._data.size!==On.size)H._keysAtom.reportChanged();else for(var Bl=H._data.keys(),fs=On.keys(),Ka=Bl.next(),ps=fs.next();!Ka.done;){if(Ka.value!==ps.value){H._keysAtom.reportChanged();break}Ka=Bl.next(),ps=fs.next()}H._data=On}),this},Object.defineProperty(P.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),P.prototype.toPOJO=function(){var R,H,ae={};try{for(var be=oe(this),qe=be.next();!qe.done;qe=be.next()){var gt=Me(qe.value,2),qt=gt[0],On=gt[1];ae[typeof qt=="symbol"?qt:U(qt)]=On}}catch(xr){R={error:xr}}finally{try{qe&&!qe.done&&(H=be.return)&&H.call(be)}finally{if(R)throw R.error}}return ae},P.prototype.toJS=function(){return new Map(this)},P.prototype.toJSON=function(){return this.toPOJO()},P.prototype.toString=function(){var R=this;return this.name+"[{ "+Array.from(this.keys()).map(function(H){return U(H)+": "+R.get(H)}).join(", ")+" }]"},P.prototype.observe=function(R,H){return Ia(this,R)},P.prototype.intercept=function(R){return ba(this,R)},P}(),Jo=C("ObservableMap",Dc),zs={},Ya=function(){function P(R,H,ae){if(H===void 0&&(H=Tt),ae===void 0&&(ae="ObservableSet@"+_()),this.name=ae,this[Cc]=zs,this._data=new Set,this._atom=K(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(be,qe){return H(be,qe,ae)},R&&this.replace(R)}return P.prototype.dehanceValue=function(R){return this.dehancer!==void 0?this.dehancer(R):R},P.prototype.clear=function(){var R=this;di(function(){Ye(function(){var H,ae;try{for(var be=oe(R._data.values()),qe=be.next();!qe.done;qe=be.next()){var gt=qe.value;R.delete(gt)}}catch(qt){H={error:qt}}finally{try{qe&&!qe.done&&(ae=be.return)&&ae.call(be)}finally{if(H)throw H.error}}})})},P.prototype.forEach=function(R,H){var ae,be;try{for(var qe=oe(this),gt=qe.next();!gt.done;gt=qe.next()){var qt=gt.value;R.call(H,qt,qt,this)}}catch(On){ae={error:On}}finally{try{gt&&!gt.done&&(be=qe.return)&&be.call(qe)}finally{if(ae)throw ae.error}}},Object.defineProperty(P.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),P.prototype.add=function(R){var H=this;if(Vn(this._atom),ea(this)&&!(be=Lr(this,{type:"add",object:this,newValue:R})))return this;if(!this.has(R)){di(function(){H._data.add(H.enhancer(R,void 0)),H._atom.reportChanged()});var ae=Gi(this),be=ae?{type:"add",object:this,newValue:R}:null;ae&&gi(this,be)}return this},P.prototype.delete=function(R){var H=this;if(ea(this)&&!(be=Lr(this,{type:"delete",object:this,oldValue:R})))return!1;if(this.has(R)){var ae=Gi(this),be=ae?{type:"delete",object:this,oldValue:R}:null;return di(function(){H._atom.reportChanged(),H._data.delete(R)}),ae&&gi(this,be),!0}return!1},P.prototype.has=function(R){return this._atom.reportObserved(),this._data.has(this.dehanceValue(R))},P.prototype.entries=function(){var R=0,H=Array.from(this.keys()),ae=Array.from(this.values());return $r({next:function(){var be=R;return R+=1,be<ae.length?{value:[H[be],ae[be]],done:!1}:{done:!0}}})},P.prototype.keys=function(){return this.values()},P.prototype.values=function(){this._atom.reportObserved();var R=this,H=0,ae=Array.from(this._data.values());return $r({next:function(){return H<ae.length?{value:R.dehanceValue(ae[H++]),done:!1}:{done:!0}}})},P.prototype.replace=function(R){var H=this;return oi(R)&&(R=R.toJS()),di(function(){var ae=ur(!0);try{Array.isArray(R)||B(R)?(H.clear(),R.forEach(function(be){return H.add(be)})):R!=null&&y("Cannot initialize set from "+R)}finally{oo(ae)}}),this},P.prototype.observe=function(R,H){return Ia(this,R)},P.prototype.intercept=function(R){return ba(this,R)},P.prototype.toJS=function(){return new Set(this)},P.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},P.prototype[Cc=Z,Symbol.iterator]=function(){return this.values()},P}(),oi=C("ObservableSet",Ya),jc=function(){function P(R,H,ae,be){H===void 0&&(H=new Map),this.target=R,this.values=H,this.name=ae,this.defaultEnhancer=be,this.keysAtom=new G(ae+".keys")}return P.prototype.read=function(R){return this.values.get(R).get()},P.prototype.write=function(R,H){var ae=this.target,be=this.values.get(R);if(be instanceof Wa)be.set(H);else{if(ea(this)){if(!(gt=Lr(this,{type:"update",object:this.proxy||ae,name:R,newValue:H})))return;H=gt.newValue}if((H=be.prepareNewValue(H))!==Dn.UNCHANGED){var qe=Gi(this),gt=qe?{type:"update",object:this.proxy||ae,oldValue:be.value,name:R,newValue:H}:null;be.setNewValue(H),qe&&gi(this,gt)}}},P.prototype.has=function(R){var H=this.pendingKeys||(this.pendingKeys=new Map),ae=H.get(R);if(ae)return ae.get();var be=!!this.values.get(R);return ae=new Vr(be,bn,this.name+"."+U(R)+"?",!1),H.set(R,ae),ae.get()},P.prototype.addObservableProp=function(R,H,ae){ae===void 0&&(ae=this.defaultEnhancer);var be=this.target;if(ea(this)){var qe=Lr(this,{object:this.proxy||be,name:R,type:"add",newValue:H});if(!qe)return;H=qe.newValue}var gt=new Vr(H,ae,this.name+"."+U(R),!1);this.values.set(R,gt),H=gt.value,Object.defineProperty(be,R,function(qt){return Ea[qt]||(Ea[qt]={configurable:!0,enumerable:!0,get:function(){return this[Z].read(qt)},set:function(On){this[Z].write(qt,On)}})}(R)),this.notifyPropertyAddition(R,H)},P.prototype.addComputedProp=function(R,H,ae){var be,qe,gt,qt=this.target;ae.name=ae.name||this.name+"."+U(H),this.values.set(H,new Wa(ae)),(R===qt||(be=R,qe=H,!(gt=Object.getOwnPropertyDescriptor(be,qe))||gt.configurable!==!1&&gt.writable!==!1))&&Object.defineProperty(R,H,function(On){return Lu[On]||(Lu[On]={configurable:Dn.computedConfigurable,enumerable:!1,get:function(){return zi(this).read(On)},set:function(xr){zi(this).write(On,xr)}})}(H))},P.prototype.remove=function(R){if(this.values.has(R)){var H=this.target;if(ea(this)&&!(On=Lr(this,{object:this.proxy||H,name:R,type:"remove"})))return;try{Ji();var ae=Gi(this),be=!1,qe=this.values.get(R),gt=qe&&qe.get();if(qe&&qe.set(void 0),this.keysAtom.reportChanged(),this.values.delete(R),this.pendingKeys){var qt=this.pendingKeys.get(R);qt&&qt.set(!1)}delete this.target[R];var On=ae?{type:"remove",object:this.proxy||H,oldValue:gt,name:R}:null;ae&&gi(this,On)}finally{aa()}}},P.prototype.illegalAccess=function(R,H){},P.prototype.observe=function(R,H){return Ia(this,R)},P.prototype.intercept=function(R){return ba(this,R)},P.prototype.notifyPropertyAddition=function(R,H){var ae=Gi(this),be=ae?{type:"add",object:this.proxy||this.target,name:R,newValue:H}:null;if(ae&&gi(this,be),this.pendingKeys){var qe=this.pendingKeys.get(R);qe&&qe.set(!0)}this.keysAtom.reportChanged()},P.prototype.getKeys=function(){var R,H;this.keysAtom.reportObserved();var ae=[];try{for(var be=oe(this.values),qe=be.next();!qe.done;qe=be.next()){var gt=Me(qe.value,2),qt=gt[0];gt[1]instanceof Vr&&ae.push(qt)}}catch(On){R={error:On}}finally{try{qe&&!qe.done&&(H=be.return)&&H.call(be)}finally{if(R)throw R.error}}return ae},P}();function la(P,R,H){if(R===void 0&&(R=""),H===void 0&&(H=Tt),Object.prototype.hasOwnProperty.call(P,Z))return P[Z];E(P)||(R=(P.constructor.name||"ObservableObject")+"@"+_()),R||(R="ObservableObject@"+_());var ae=new jc(P,new Map,U(R),H);return w(P,Z,ae),ae}var Ea=Object.create(null),Lu=Object.create(null);function zi(P){var R=P[Z];return R||(Qe(P),P[Z])}var ta=C("ObservableObjectAdministration",jc);function fi(P){return!!S(P)&&(Qe(P),ta(P[Z]))}function sa(P,R){if(typeof P=="object"&&P!==null){if(wa(P))return R!==void 0&&y(!1),P[Z].atom;if(oi(P))return P[Z];if(Jo(P)){var H=P;return R===void 0?H._keysAtom:((ae=H._data.get(R)||H._hasMap.get(R))||y(!1),ae)}var ae;if(Qe(P),R&&!P[Z]&&P[R],fi(P))return R?((ae=P[Z].values.get(R))||y(!1),ae):y(!1);if(W(P)||_l(P)||Us(P))return P}else if(typeof P=="function"&&Us(P[Z]))return P[Z];return y(!1)}function Ii(P,R){return P||y("Expecting some object"),R!==void 0?Ii(sa(P,R)):W(P)||_l(P)||Us(P)||Jo(P)||oi(P)?P:(Qe(P),P[Z]?P[Z]:void y(!1))}var ft=Object.prototype.toString;function Vt(P,R,H){return H===void 0&&(H=-1),Ut(P,R,H)}function Ut(P,R,H,ae,be){if(P===R)return P!==0||1/P==1/R;if(P==null||R==null)return!1;if(P!=P)return R!=R;var qe=typeof P;if(qe!=="function"&&qe!=="object"&&typeof R!="object")return!1;var gt=ft.call(P);if(gt!==ft.call(R))return!1;switch(gt){case"[object RegExp]":case"[object String]":return""+P==""+R;case"[object Number]":return+P!=+P?+R!=+R:+P==0?1/+P==1/R:+P==+R;case"[object Date]":case"[object Boolean]":return+P==+R;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(P)===Symbol.valueOf.call(R);case"[object Map]":case"[object Set]":H>=0&&H++}P=vn(P),R=vn(R);var qt=gt==="[object Array]";if(!qt){if(typeof P!="object"||typeof R!="object")return!1;var On=P.constructor,xr=R.constructor;if(On!==xr&&!(typeof On=="function"&&On instanceof On&&typeof xr=="function"&&xr instanceof xr)&&"constructor"in P&&"constructor"in R)return!1}if(H===0)return!1;H<0&&(H=-1),be=be||[];for(var dn=(ae=ae||[]).length;dn--;)if(ae[dn]===P)return be[dn]===R;if(ae.push(P),be.push(R),qt){if((dn=P.length)!==R.length)return!1;for(;dn--;)if(!Ut(P[dn],R[dn],H-1,ae,be))return!1}else{var Yr=Object.keys(P),wr=void 0;if(dn=Yr.length,Object.keys(R).length!==dn)return!1;for(;dn--;)if(!hr(R,wr=Yr[dn])||!Ut(P[wr],R[wr],H-1,ae,be))return!1}return ae.pop(),be.pop(),!0}function vn(P){return wa(P)?P.slice():j(P)||Jo(P)||B(P)||oi(P)?Array.from(P.entries()):P}function hr(P,R){return Object.prototype.hasOwnProperty.call(P,R)}function $r(P){return P[Symbol.iterator]=bo,P}function bo(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:xc,extras:{getDebugName:function(P,R){return(R!==void 0?sa(P,R):fi(P)||Jo(P)||oi(P)?Ii(P):sa(P)).name}},$mobx:Z})}).call(this,r(163),r(68))},function(n,o,r){var s=r(113),c=r(42),f=r(179);s||c(Object.prototype,"toString",f,{unsafe:!0})},function(n,o,r){var s=r(41),c=r(100),f=r(80),d=r(58),_=r(116),y="Array Iterator",b=d.set,x=d.getterFor(y);n.exports=_(Array,"Array",function(M,S){b(this,{type:y,target:s(M),index:0,kind:S})},function(){var M=x(this),S=M.target,E=M.kind,w=M.index++;return!S||w>=S.length?(M.target=void 0,{value:void 0,done:!0}):E=="keys"?{value:w,done:!1}:E=="values"?{value:S[w],done:!1}:{value:[w,S[w]],done:!1}},"values"),f.Arguments=f.Array,c("keys"),c("values"),c("entries")},function(n,o,r){var s=r(16),c=r(7),f=r(46),d=r(76),_=r(34),y=r(15),b=r(71),x=r(36),M=r(108),S=r(18),E=r(35),w=r(96),C=r(30),j=r(33),B=r(54),$=r(87),U=r(32),I=r(40),F=r(41),Z=r(86),G=r(39),W=r(69),K=r(60),J=r(77),q=r(74),ne=r(139),oe=r(112),Me=r(50),Pe=r(38),Ee=r(84),we=r(98),Be=r(42),nt=r(89),Ot=r(93),Qe=r(72),lt=r(90),dt=r(28),Tt=r(140),bn=r(141),Ue=r(78),Te=r(58),$e=r(79).forEach,wt=Ot("hidden"),Wt="Symbol",St=dt("toPrimitive"),Zt=Te.set,pn=Te.getterFor(Wt),An=Object.prototype,yn=c.Symbol,ht=yn&&yn.prototype,kn=c.TypeError,Ie=c.QObject,wn=f("JSON","stringify"),nr=Me.f,le=Pe.f,rr=ne.f,Rr=Ee.f,Sr=y([].push),uo=nt("symbols"),Vn=nt("op-symbols"),fo=nt("string-to-symbol-registry"),xe=nt("symbol-to-string-registry"),Ye=nt("wks"),Le=!Ie||!Ie.prototype||!Ie.prototype.findChild,st=x&&S(function(){return K(le({},"a",{get:function(){return le(this,"a",{value:7}).a}})).a!=7})?function(Nn,zn,Zn){var ur=nr(An,zn);ur&&delete An[zn],le(Nn,zn,Zn),ur&&Nn!==An&&le(An,zn,ur)}:le,on=function(Nn,zn){var Zn=uo[Nn]=K(ht);return Zt(Zn,{type:Wt,tag:Nn,description:zn}),x||(Zn.description=zn),Zn},en=function(Nn,zn,Zn){Nn===An&&en(Vn,zn,Zn),U(Nn);var ur=Z(zn);return U(Zn),E(uo,ur)?(Zn.enumerable?(E(Nn,wt)&&Nn[wt][ur]&&(Nn[wt][ur]=!1),Zn=K(Zn,{enumerable:W(0,!1)})):(E(Nn,wt)||le(Nn,wt,W(1,{})),Nn[wt][ur]=!0),st(Nn,ur,Zn)):le(Nn,ur,Zn)},In=function(Nn,zn){U(Nn);var Zn=F(zn),ur=J(Zn).concat(Zo(Zn));return $e(ur,function(oo){x&&!_(Ar,Zn,oo)||en(Nn,oo,Zn[oo])}),Nn},Ar=function(Nn){var zn=Z(Nn),Zn=_(Rr,this,zn);return!(this===An&&E(uo,zn)&&!E(Vn,zn))&&(!(Zn||!E(this,zn)||!E(uo,zn)||E(this,wt)&&this[wt][zn])||Zn)},ui=function(Nn,zn){var Zn=F(Nn),ur=Z(zn);if(Zn!==An||!E(uo,ur)||E(Vn,ur)){var oo=nr(Zn,ur);return!oo||!E(uo,ur)||E(Zn,wt)&&Zn[wt][ur]||(oo.enumerable=!0),oo}},Si=function(Nn){var zn=rr(F(Nn)),Zn=[];return $e(zn,function(ur){E(uo,ur)||E(Qe,ur)||Sr(Zn,ur)}),Zn},Zo=function(Nn){var zn=Nn===An,Zn=rr(zn?Vn:F(Nn)),ur=[];return $e(Zn,function(oo){!E(uo,oo)||zn&&!E(An,oo)||Sr(ur,uo[oo])}),ur};if(M||(yn=function(){if(B(ht,this))throw kn("Symbol is not a constructor");var Nn=arguments.length&&arguments[0]!==void 0?G(arguments[0]):void 0,zn=lt(Nn),Zn=function(ur){this===An&&_(Zn,Vn,ur),E(this,wt)&&E(this[wt],zn)&&(this[wt][zn]=!1),st(this,zn,W(1,ur))};return x&&Le&&st(An,zn,{configurable:!0,set:Zn}),on(zn,Nn)},Be(ht=yn.prototype,"toString",function(){return pn(this).tag}),Be(yn,"withoutSetter",function(Nn){return on(lt(Nn),Nn)}),Ee.f=Ar,Pe.f=en,Me.f=ui,q.f=ne.f=Si,oe.f=Zo,Tt.f=function(Nn){return on(dt(Nn),Nn)},x&&(le(ht,"description",{configurable:!0,get:function(){return pn(this).description}}),b||Be(An,"propertyIsEnumerable",Ar,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!M,sham:!M},{Symbol:yn}),$e(J(Ye),function(Nn){bn(Nn)}),s({target:Wt,stat:!0,forced:!M},{for:function(Nn){var zn=G(Nn);if(E(fo,zn))return fo[zn];var Zn=yn(zn);return fo[zn]=Zn,xe[Zn]=zn,Zn},keyFor:function(Nn){if(!$(Nn))throw kn(Nn+" is not a symbol");if(E(xe,Nn))return xe[Nn]},useSetter:function(){Le=!0},useSimple:function(){Le=!1}}),s({target:"Object",stat:!0,forced:!M,sham:!x},{create:function(Nn,zn){return zn===void 0?K(Nn):In(K(Nn),zn)},defineProperty:en,defineProperties:In,getOwnPropertyDescriptor:ui}),s({target:"Object",stat:!0,forced:!M},{getOwnPropertyNames:Si,getOwnPropertySymbols:Zo}),s({target:"Object",stat:!0,forced:S(function(){oe.f(1)})},{getOwnPropertySymbols:function(Nn){return oe.f(I(Nn))}}),wn&&s({target:"JSON",stat:!0,forced:!M||S(function(){var Nn=yn();return wn([Nn])!="[null]"||wn({a:Nn})!="{}"||wn(Object(Nn))!="{}"})},{stringify:function(Nn,zn,Zn){var ur=we(arguments),oo=zn;if((j(zn)||Nn!==void 0)&&!$(Nn))return w(zn)||(zn=function(Vr,gl){if(C(oo)&&(gl=_(oo,this,Vr,gl)),!$(gl))return gl}),ur[1]=zn,d(wn,null,ur)}}),!ht[St]){var ri=ht.valueOf;Be(ht,St,function(Nn){return _(ri,this)})}Ue(yn,Wt),Qe[wt]=!0},function(n,o,r){var s=r(7),c=r(152),f=r(153),d=r(3),_=r(57),y=r(28),b=y("iterator"),x=y("toStringTag"),M=d.values,S=function(w,C){if(w){if(w[b]!==M)try{_(w,b,M)}catch{w[b]=M}if(w[x]||_(w,x,C),c[C]){for(var j in d)if(w[j]!==d[j])try{_(w,j,d[j])}catch{w[j]=d[j]}}}};for(var E in c)S(s[E]&&s[E].prototype,E);S(f,"DOMTokenList")},function(n,o,r){var s=r(151).charAt,c=r(39),f=r(58),d=r(116),_="String Iterator",y=f.set,b=f.getterFor(_);d(String,"String",function(x){y(this,{type:_,string:c(x),index:0})},function(){var x,M=b(this),S=M.string,E=M.index;return E>=S.length?{value:void 0,done:!0}:(x=s(S,E),M.index+=x.length,{value:x,done:!1})})},function(n,o,r){(function(s){var c=function(f){return f&&f.Math==Math&&f};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,o,r){var s=r(16),c=r(36),f=r(7),d=r(15),_=r(35),y=r(30),b=r(54),x=r(39),M=r(38).f,S=r(134),E=f.Symbol,w=E&&E.prototype;if(c&&y(E)&&(!("description"in w)||E().description!==void 0)){var C={},j=function(){var G=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),W=b(w,this)?new E(G):G===void 0?E():E(G);return G===""&&(C[W]=!0),W};S(j,E),j.prototype=w,w.constructor=j;var B=String(E("test"))=="Symbol(test)",$=d(w.toString),U=d(w.valueOf),I=/^Symbol\((.*)\)[^)]+$/,F=d("".replace),Z=d("".slice);M(w,"description",{configurable:!0,get:function(){var G=U(this),W=$(G);if(_(C,G))return"";var K=B?Z(W,7,-1):F(W,I,"$1");return K===""?void 0:K}}),s({global:!0,forced:!0},{Symbol:j})}},function(n,o,r){r(141)("iterator")},function(n,o,r){r.d(o,"a",function(){return d.a}),r.d(o,"c",function(){return d.e}),r.d(o,"h",function(){return I}),r.d(o,"i",function(){return B}),r.d(o,"j",function(){return C}),r.d(o,"b",function(){return Me}),r.d(o,"e",function(){return Be}),r.d(o,"f",function(){return Pe}),r.d(o,"g",function(){return uo});var s,c,f,d=r(0),_=0,y=[],b=d.i.__b,x=d.i.__r,M=d.i.diffed,S=d.i.__c,E=d.i.unmount;function w(xe,Ye){d.i.__h&&d.i.__h(c,xe,_||Ye),_=0;var Le=c.__H||(c.__H={__:[],__h:[]});return xe>=Le.__.length&&Le.__.push({}),Le.__[xe]}function C(xe){return _=1,j(q,xe)}function j(xe,Ye,Le){var st=w(s++,2);return st.t=xe,st.__c||(st.__=[Le?Le(Ye):q(void 0,Ye),function(on){var en=st.t(st.__[0],on);st.__[0]!==en&&(st.__=[en,st.__[1]],st.__c.setState({}))}],st.__c=c),st.__}function B(xe,Ye){var Le=w(s++,3);!d.i.__s&&J(Le.__H,Ye)&&(Le.__=xe,Le.__H=Ye,c.__H.__h.push(Le))}function $(xe,Ye){var Le=w(s++,4);!d.i.__s&&J(Le.__H,Ye)&&(Le.__=xe,Le.__H=Ye,c.__h.push(Le))}function U(xe,Ye){var Le=w(s++,7);return J(Le.__H,Ye)&&(Le.__=xe(),Le.__H=Ye,Le.__h=xe),Le.__}function I(xe,Ye){return _=8,U(function(){return xe},Ye)}function F(){var xe;for(y.sort(function(Ye,Le){return Ye.__v.__b-Le.__v.__b});xe=y.pop();)if(xe.__P)try{xe.__H.__h.forEach(W),xe.__H.__h.forEach(K),xe.__H.__h=[]}catch(Ye){xe.__H.__h=[],d.i.__e(Ye,xe.__v)}}d.i.__b=function(xe){c=null,b&&b(xe)},d.i.__r=function(xe){x&&x(xe),s=0;var Ye=(c=xe.__c).__H;Ye&&(Ye.__h.forEach(W),Ye.__h.forEach(K),Ye.__h=[])},d.i.diffed=function(xe){M&&M(xe);var Ye=xe.__c;Ye&&Ye.__H&&Ye.__H.__h.length&&(y.push(Ye)!==1&&f===d.i.requestAnimationFrame||((f=d.i.requestAnimationFrame)||G)(F)),c=null},d.i.__c=function(xe,Ye){Ye.some(function(Le){try{Le.__h.forEach(W),Le.__h=Le.__h.filter(function(st){return!st.__||K(st)})}catch(st){Ye.some(function(on){on.__h&&(on.__h=[])}),Ye=[],d.i.__e(st,Le.__v)}}),S&&S(xe,Ye)},d.i.unmount=function(xe){E&&E(xe);var Ye,Le=xe.__c;Le&&Le.__H&&(Le.__H.__.forEach(function(st){try{W(st)}catch(on){Ye=on}}),Ye&&d.i.__e(Ye,Le.__v))};var Z=typeof requestAnimationFrame=="function";function G(xe){var Ye,Le=function(){clearTimeout(st),Z&&cancelAnimationFrame(Ye),setTimeout(xe)},st=setTimeout(Le,100);Z&&(Ye=requestAnimationFrame(Le))}function W(xe){var Ye=c,Le=xe.__c;typeof Le=="function"&&(xe.__c=void 0,Le()),c=Ye}function K(xe){var Ye=c;xe.__c=xe.__(),c=Ye}function J(xe,Ye){return!xe||xe.length!==Ye.length||Ye.some(function(Le,st){return Le!==xe[st]})}function q(xe,Ye){return typeof Ye=="function"?Ye(xe):Ye}function ne(xe,Ye){for(var Le in Ye)xe[Le]=Ye[Le];return xe}function oe(xe,Ye){for(var Le in xe)if(Le!=="__source"&&!(Le in Ye))return!0;for(var st in Ye)if(st!=="__source"&&xe[st]!==Ye[st])return!0;return!1}function Me(xe){this.props=xe}function Pe(xe,Ye){function Le(on){var en=this.props.ref,In=en==on.ref;return!In&&en&&(en.call?en(null):en.current=null),Ye?!Ye(this.props,on)||!In:oe(this.props,on)}function st(on){return this.shouldComponentUpdate=Le,Object(d.e)(xe,on)}return st.displayName="Memo("+(xe.displayName||xe.name)+")",st.prototype.isReactComponent=!0,st.__f=!0,st}(Me.prototype=new d.a).isPureReactComponent=!0,Me.prototype.shouldComponentUpdate=function(xe,Ye){return oe(this.props,xe)||oe(this.state,Ye)};var Ee=d.i.__b;d.i.__b=function(xe){xe.type&&xe.type.__f&&xe.ref&&(xe.props.ref=xe.ref,xe.ref=null),Ee&&Ee(xe)};var we=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Be(xe){function Ye(Le,st){var on=ne({},Le);return delete on.ref,xe(on,!(st=Le.ref||st)||typeof st=="object"&&!("current"in st)?null:st)}return Ye.$$typeof=we,Ye.render=Ye,Ye.prototype.isReactComponent=Ye.__f=!0,Ye.displayName="ForwardRef("+(xe.displayName||xe.name)+")",Ye}var nt=function(xe,Ye){return xe==null?null:Object(d.k)(Object(d.k)(xe).map(Ye))},Ot={map:nt,forEach:nt,count:function(xe){return xe?Object(d.k)(xe).length:0},only:function(xe){var Ye=Object(d.k)(xe);if(Ye.length!==1)throw"Children.only";return Ye[0]},toArray:d.k},Qe=d.i.__e;d.i.__e=function(xe,Ye,Le){if(xe.then){for(var st,on=Ye;on=on.__;)if((st=on.__c)&&st.__c)return Ye.__e==null&&(Ye.__e=Le.__e,Ye.__k=Le.__k),st.__c(xe,Ye)}Qe(xe,Ye,Le)};var lt=d.i.unmount;function dt(xe,Ye,Le){return xe&&(xe.__c&&xe.__c.__H&&(xe.__c.__H.__.forEach(function(st){typeof st.__c=="function"&&st.__c()}),xe.__c.__H=null),(xe=ne({},xe)).__c!=null&&(xe.__c.__P===Le&&(xe.__c.__P=Ye),xe.__c=null),xe.__k=xe.__k&&xe.__k.map(function(st){return dt(st,Ye,Le)})),xe}function Tt(xe,Ye,Le){return xe&&(xe.__v=null,xe.__k=xe.__k&&xe.__k.map(function(st){return Tt(st,Ye,Le)}),xe.__c&&xe.__c.__P===Ye&&(xe.__e&&Le.insertBefore(xe.__e,xe.__d),xe.__c.__e=!0,xe.__c.__P=Le)),xe}function bn(){this.__u=0,this.t=null,this.__b=null}function Ue(xe){var Ye=xe.__.__c;return Ye&&Ye.__e&&Ye.__e(xe)}function Te(){this.u=null,this.o=null}d.i.unmount=function(xe){var Ye=xe.__c;Ye&&Ye.__R&&Ye.__R(),Ye&&xe.__h===!0&&(xe.type=null),lt&&lt(xe)},(bn.prototype=new d.a).__c=function(xe,Ye){var Le=Ye.__c,st=this;st.t==null&&(st.t=[]),st.t.push(Le);var on=Ue(st.__v),en=!1,In=function(){en||(en=!0,Le.__R=null,on?on(Ar):Ar())};Le.__R=In;var Ar=function(){if(!--st.__u){if(st.state.__e){var Si=st.state.__e;st.__v.__k[0]=Tt(Si,Si.__c.__P,Si.__c.__O)}var Zo;for(st.setState({__e:st.__b=null});Zo=st.t.pop();)Zo.forceUpdate()}},ui=Ye.__h===!0;st.__u++||ui||st.setState({__e:st.__b=st.__v.__k[0]}),xe.then(In,In)},bn.prototype.componentWillUnmount=function(){this.t=[]},bn.prototype.render=function(xe,Ye){if(this.__b){if(this.__v.__k){var Le=document.createElement("div"),st=this.__v.__k[0].__c;this.__v.__k[0]=dt(this.__b,Le,st.__O=st.__P)}this.__b=null}var on=Ye.__e&&Object(d.e)(d.b,null,xe.fallback);return on&&(on.__h=null),[Object(d.e)(d.b,null,Ye.__e?null:xe.children),on]};var $e=function(xe,Ye,Le){if(++Le[1]===Le[0]&&xe.o.delete(Ye),xe.props.revealOrder&&(xe.props.revealOrder[0]!=="t"||!xe.o.size))for(Le=xe.u;Le;){for(;Le.length>3;)Le.pop()();if(Le[1]<Le[0])break;xe.u=Le=Le[2]}};function wt(xe){return this.getChildContext=function(){return xe.context},xe.children}function Wt(xe){var Ye=this,Le=xe.i;Ye.componentWillUnmount=function(){Object(d.j)(null,Ye.l),Ye.l=null,Ye.i=null},Ye.i&&Ye.i!==Le&&Ye.componentWillUnmount(),xe.__v?(Ye.l||(Ye.i=Le,Ye.l={nodeType:1,parentNode:Le,childNodes:[],appendChild:function(st){this.childNodes.push(st),Ye.i.appendChild(st)},insertBefore:function(st,on){this.childNodes.push(st),Ye.i.appendChild(st)},removeChild:function(st){this.childNodes.splice(this.childNodes.indexOf(st)>>>1,1),Ye.i.removeChild(st)}}),Object(d.j)(Object(d.e)(wt,{context:Ye.context},xe.__v),Ye.l)):Ye.l&&Ye.componentWillUnmount()}(Te.prototype=new d.a).__e=function(xe){var Ye=this,Le=Ue(Ye.__v),st=Ye.o.get(xe);return st[0]++,function(on){var en=function(){Ye.props.revealOrder?(st.push(on),$e(Ye,xe,st)):on()};Le?Le(en):en()}},Te.prototype.render=function(xe){this.u=null,this.o=new Map;var Ye=Object(d.k)(xe.children);xe.revealOrder&&xe.revealOrder[0]==="b"&&Ye.reverse();for(var Le=Ye.length;Le--;)this.o.set(Ye[Le],this.u=[1,0,this.u]);return xe.children},Te.prototype.componentDidUpdate=Te.prototype.componentDidMount=function(){var xe=this;this.o.forEach(function(Ye,Le){$e(xe,Le,Ye)})};var St=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Zt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,pn=typeof document<"u",An=function(xe){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(xe)};d.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(xe){Object.defineProperty(d.a.prototype,xe,{configurable:!0,get:function(){return this["UNSAFE_"+xe]},set:function(Ye){Object.defineProperty(this,xe,{configurable:!0,writable:!0,value:Ye})}})});var yn=d.i.event;function ht(){}function kn(){return this.cancelBubble}function Ie(){return this.defaultPrevented}d.i.event=function(xe){return yn&&(xe=yn(xe)),xe.persist=ht,xe.isPropagationStopped=kn,xe.isDefaultPrevented=Ie,xe.nativeEvent=xe};var wn,nr={configurable:!0,get:function(){return this.class}},le=d.i.vnode;d.i.vnode=function(xe){var Ye=xe.type,Le=xe.props,st=Le;if(typeof Ye=="string"){var on=Ye.indexOf("-")===-1;for(var en in st={},Le){var In=Le[en];pn&&en==="children"&&Ye==="noscript"||en==="value"&&"defaultValue"in Le&&In==null||(en==="defaultValue"&&"value"in Le&&Le.value==null?en="value":en==="download"&&In===!0?In="":/ondoubleclick/i.test(en)?en="ondblclick":/^onchange(textarea|input)/i.test(en+Ye)&&!An(Le.type)?en="oninput":/^onfocus$/i.test(en)?en="onfocusin":/^onblur$/i.test(en)?en="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(en)?en=en.toLowerCase():on&&Zt.test(en)?en=en.replace(/[A-Z0-9]/,"-$&").toLowerCase():In===null&&(In=void 0),st[en]=In)}Ye=="select"&&st.multiple&&Array.isArray(st.value)&&(st.value=Object(d.k)(Le.children).forEach(function(Ar){Ar.props.selected=st.value.indexOf(Ar.props.value)!=-1})),Ye=="select"&&st.defaultValue!=null&&(st.value=Object(d.k)(Le.children).forEach(function(Ar){Ar.props.selected=st.multiple?st.defaultValue.indexOf(Ar.props.value)!=-1:st.defaultValue==Ar.props.value})),xe.props=st,Le.class!=Le.className&&(nr.enumerable="className"in Le,Le.className!=null&&(st.class=Le.className),Object.defineProperty(st,"className",nr))}xe.$$typeof=St,le&&le(xe)};var rr=d.i.__r;d.i.__r=function(xe){rr&&rr(xe),wn=xe.__c};var Rr={ReactCurrentDispatcher:{current:{readContext:function(xe){return wn.__n[xe.__c].props.value}}}};function Sr(xe){return!!xe&&xe.$$typeof===St}var uo=function(xe,Ye){return xe(Ye)},Vn=d.b,fo={useState:C,useReducer:j,useEffect:B,useLayoutEffect:$,useRef:function(xe){return _=5,U(function(){return{current:xe}},[])},useImperativeHandle:function(xe,Ye,Le){_=6,$(function(){typeof xe=="function"?xe(Ye()):xe&&(xe.current=Ye())},Le==null?Le:Le.concat(xe))},useMemo:U,useCallback:I,useContext:function(xe){var Ye=c.context[xe.__c],Le=w(s++,9);return Le.c=xe,Ye?(Le.__==null&&(Le.__=!0,Ye.sub(c)),Ye.props.value):xe.__},useDebugValue:function(xe,Ye){d.i.useDebugValue&&d.i.useDebugValue(Ye?Ye(xe):xe)},version:"17.0.2",Children:Ot,render:function(xe,Ye,Le){return Ye.__k==null&&(Ye.textContent=""),Object(d.j)(xe,Ye),typeof Le=="function"&&Le(),xe?xe.__c:null},hydrate:function(xe,Ye,Le){return Object(d.h)(xe,Ye),typeof Le=="function"&&Le(),xe?xe.__c:null},unmountComponentAtNode:function(xe){return!!xe.__k&&(Object(d.j)(null,xe),!0)},createPortal:function(xe,Ye){return Object(d.e)(Wt,{__v:xe,i:Ye})},createElement:d.e,createContext:d.d,createFactory:function(xe){return d.e.bind(null,xe)},cloneElement:function(xe){return Sr(xe)?d.c.apply(null,arguments):xe},createRef:d.f,Fragment:d.b,isValidElement:Sr,findDOMNode:function(xe){return xe&&(xe.base||xe.nodeType===1&&xe)||null},Component:d.a,PureComponent:Me,memo:Pe,forwardRef:Be,flushSync:function(xe,Ye){return xe(Ye)},unstable_batchedUpdates:uo,StrictMode:Vn,Suspense:bn,SuspenseList:Te,lazy:function(xe){var Ye,Le,st;function on(en){if(Ye||(Ye=xe()).then(function(In){Le=In.default||In},function(In){st=In}),st)throw st;if(!Le)throw Ye;return Object(d.e)(Le,en)}return on.displayName="Lazy",on.__f=!0,on},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Rr};o.d=fo},function(n,o,r){var s=r(7),c=r(152),f=r(153),d=r(187),_=r(57),y=function(x){if(x&&x.forEach!==d)try{_(x,"forEach",d)}catch{x.forEach=d}};for(var b in c)c[b]&&y(s[b]&&s[b].prototype);y(f)},function(n,o,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,o,r){var s=r(16),c=r(18),f=r(40),d=r(101),_=r(143);s({target:"Object",stat:!0,forced:c(function(){d(1)}),sham:!_},{getPrototypeOf:function(y){return d(f(y))}})},function(n,o,r){var s=r(16),c=r(46),f=r(76),d=r(203),_=r(165),y=r(32),b=r(33),x=r(60),M=r(18),S=c("Reflect","construct"),E=Object.prototype,w=[].push,C=M(function(){function $(){}return!(S(function(){},[],$)instanceof $)}),j=!M(function(){S(function(){})}),B=C||j;s({target:"Reflect",stat:!0,forced:B,sham:B},{construct:function($,U){_($),y(U);var I=arguments.length<3?$:_(arguments[2]);if(j&&!C)return S($,U,I);if($==I){switch(U.length){case 0:return new $;case 1:return new $(U[0]);case 2:return new $(U[0],U[1]);case 3:return new $(U[0],U[1],U[2]);case 4:return new $(U[0],U[1],U[2],U[3])}var F=[null];return f(w,F,U),new(f(d,$,F))}var Z=I.prototype,G=x(b(Z)?Z:E),W=f($,G,U);return b(W)?W:G}})},function(n,o){var r=Function.prototype,s=r.bind,c=r.call,f=s&&s.bind(c);n.exports=s?function(d){return d&&f(c,d)}:function(d){return d&&function(){return c.apply(d,arguments)}}},function(n,o,r){var s=r(7),c=r(50).f,f=r(57),d=r(42),_=r(110),y=r(134),b=r(95);n.exports=function(x,M){var S,E,w,C,j,B=x.target,$=x.global,U=x.stat;if(S=$?s:U?s[B]||_(B,{}):(s[B]||{}).prototype)for(E in M){if(C=M[E],w=x.noTargetGet?(j=c(S,E))&&j.value:S[E],!b($?E:B+(U?".":"#")+E,x.forced)&&w!==void 0){if(typeof C==typeof w)continue;y(C,w)}(x.sham||w&&w.sham)&&f(C,"sham",!0),d(S,E,C,x)}}},function(n,o,r){var s=r(16),c=r(7),f=r(96),d=r(99),_=r(33),y=r(75),b=r(45),x=r(41),M=r(63),S=r(28),E=r(81),w=r(98),C=E("slice"),j=S("species"),B=c.Array,$=Math.max;s({target:"Array",proto:!0,forced:!C},{slice:function(U,I){var F,Z,G,W=x(this),K=b(W),J=y(U,K),q=y(I===void 0?K:I,K);if(f(W)&&(F=W.constructor,(d(F)&&(F===B||f(F.prototype))||_(F)&&(F=F[j])===null)&&(F=void 0),F===B||F===void 0))return w(W,J,q);for(Z=new(F===void 0?B:F)($(q-J,0)),G=0;J<q;J++,G++)J in W&&M(Z,G,W[J]);return Z.length=G,Z}})},function(n,o){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,o,r){var s=r(16),c=r(103);s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,o,r){var s=r(16),c=r(40),f=r(77);s({target:"Object",stat:!0,forced:r(18)(function(){f(1)})},{keys:function(d){return f(c(d))}})},function(n,o,r){var s=r(36),c=r(73).EXISTS,f=r(15),d=r(38).f,_=Function.prototype,y=f(_.toString),b=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=f(b.exec);s&&!c&&d(_,"name",{configurable:!0,get:function(){try{return x(b,y(this))[1]}catch{return""}}})},function(n,o,r){var s=r(16),c=r(18),f=r(41),d=r(50).f,_=r(36),y=c(function(){d(1)});s({target:"Object",stat:!0,forced:!_||y,sham:!_},{getOwnPropertyDescriptor:function(b,x){return d(f(b),x)}})},function(n,o,r){var s=r(16),c=r(188);s({target:"Array",stat:!0,forced:!r(120)(function(f){Array.from(f)})},{from:c})},function(n,o,r){var s=r(16),c=r(79).filter;s({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(f){return c(this,f,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(16),c=r(36),f=r(135),d=r(41),_=r(50),y=r(63);s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(b){for(var x,M,S=d(b),E=_.f,w=f(S),C={},j=0;w.length>j;)(M=E(S,x=w[j++]))!==void 0&&y(C,x,M);return C}})},,function(n,o,r){var s=r(16),c=r(7),f=r(18),d=r(96),_=r(33),y=r(40),b=r(45),x=r(63),M=r(115),S=r(81),E=r(28),w=r(70),C=E("isConcatSpreadable"),j=9007199254740991,B="Maximum allowed index exceeded",$=c.TypeError,U=w>=51||!f(function(){var Z=[];return Z[C]=!1,Z.concat()[0]!==Z}),I=S("concat"),F=function(Z){if(!_(Z))return!1;var G=Z[C];return G!==void 0?!!G:d(Z)};s({target:"Array",proto:!0,forced:!U||!I},{concat:function(Z){var G,W,K,J,q,ne=y(this),oe=M(ne,0),Me=0;for(G=-1,K=arguments.length;G<K;G++)if(F(q=G===-1?ne:arguments[G])){if(Me+(J=b(q))>j)throw $(B);for(W=0;W<J;W++,Me++)W in q&&x(oe,Me,q[W])}else{if(Me>=j)throw $(B);x(oe,Me++,q)}return oe.length=Me,oe}})},function(n,o,r){var s=r(7),c=r(89),f=r(35),d=r(90),_=r(108),y=r(132),b=c("wks"),x=s.Symbol,M=x&&x.for,S=y?x:x&&x.withoutSetter||d;n.exports=function(E){if(!f(b,E)||!_&&typeof b[E]!="string"){var w="Symbol."+E;_&&f(x,E)?b[E]=x[E]:b[E]=y&&M?M(w):S(w)}return b[E]}},function(n,o,r){var s=r(16),c=r(202);s({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,o){n.exports=function(r){return typeof r=="function"}},function(n,o,r){var s=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,f=s.a||c||Function("return this")();o.a=f},function(n,o,r){var s=r(7),c=r(33),f=s.String,d=s.TypeError;n.exports=function(_){if(c(_))return _;throw d(f(_)+" is not an object")}},function(n,o,r){var s=r(30);n.exports=function(c){return typeof c=="object"?c!==null:s(c)}},function(n,o){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,o,r){var s=r(15),c=r(40),f=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(d,_){return f(c(d),_)}},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,o,r){var s=r(16),c=r(79).map;s({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(f){return c(this,f,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(7),c=r(36),f=r(133),d=r(32),_=r(86),y=s.TypeError,b=Object.defineProperty;o.f=c?b:function(x,M,S){if(d(x),M=_(M),d(S),f)try{return b(x,M,S)}catch{}if("get"in S||"set"in S)throw y("Accessors not supported");return"value"in S&&(x[M]=S.value),x}},function(n,o,r){var s=r(7),c=r(97),f=s.String;n.exports=function(d){if(c(d)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return f(d)}},function(n,o,r){var s=r(7),c=r(44),f=s.Object;n.exports=function(d){return f(c(d))}},function(n,o,r){var s=r(85),c=r(44);n.exports=function(f){return s(c(f))}},function(n,o,r){var s=r(7),c=r(30),f=r(35),d=r(57),_=r(110),y=r(92),b=r(58),x=r(73).CONFIGURABLE,M=b.get,S=b.enforce,E=String(String).split("String");(n.exports=function(w,C,j,B){var $,U=!!B&&!!B.unsafe,I=!!B&&!!B.enumerable,F=!!B&&!!B.noTargetGet,Z=B&&B.name!==void 0?B.name:C;c(j)&&(String(Z).slice(0,7)==="Symbol("&&(Z="["+String(Z).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!f(j,"name")||x&&j.name!==Z)&&d(j,"name",Z),($=S(j)).source||($.source=E.join(typeof Z=="string"?Z:""))),w!==s?(U?!F&&w[C]&&(I=!0):delete w[C],I?w[C]=j:d(w,C,j)):I?w[C]=j:_(C,j)})(Function.prototype,"toString",function(){return c(this)&&M(this).source||y(this)})},function(n,o,r){(function(s){r.d(o,"d",function(){return d}),r.d(o,"c",function(){return _}),r.d(o,"b",function(){return y}),r.d(o,"a",function(){return x});var c=r(10),f=function(M,S){var E=typeof Symbol=="function"&&M[Symbol.iterator];if(!E)return M;var w,C,j=E.call(M),B=[];try{for(;(S===void 0||S-- >0)&&!(w=j.next()).done;)B.push(w.value)}catch($){C={error:$}}finally{try{w&&!w.done&&(E=j.return)&&E.call(j)}finally{if(C)throw C.error}}return B};function d(){var M=f(Object(c.j)(0),2)[1];return Object(c.h)(function(){M(function(S){return S+1})},[])}function _(M){if(!M||typeof M!="object")return!1;var S=Object.getPrototypeOf(M);return!S||S===Object.prototype}function y(M){return typeof Symbol=="function"?Symbol.for(M):"__$mobx-react "+M+"__"}var b={};function x(){return typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:b}}).call(this,r(68))},function(n,o,r){var s=r(7).TypeError;n.exports=function(c){if(c==null)throw s("Can't call method on "+c);return c}},function(n,o,r){var s=r(94);n.exports=function(c){return s(c.length)}},function(n,o,r){var s=r(7),c=r(30),f=function(d){return c(d)?d:void 0};n.exports=function(d,_){return arguments.length<2?f(s[d]):s[d]&&s[d][_]}},function(n,o,r){var s=r(16),c=r(34),f=r(33),d=r(32),_=r(204),y=r(50),b=r(101);s({target:"Reflect",stat:!0},{get:function x(M,S){var E,w,C=arguments.length<3?M:arguments[2];return d(M)===C?M[S]:(E=y.f(M,S))?_(E)?E.value:E.get===void 0?void 0:c(E.get,C):f(w=b(M))?x(w,S,C):void 0}})},function(n,o,r){(function(s){var c=r(31),f=r(171),d=t&&!t.nodeType&&t,_=d&&typeof s=="object"&&s&&!s.nodeType&&s,y=_&&_.exports===d?c.a.Buffer:void 0,b=(y?y.isBuffer:void 0)||f.a;o.a=b}).call(this,r(122)(n))},function(n,o,r){(function(s){var c=r(106),f=t&&!t.nodeType&&t,d=f&&typeof s=="object"&&s&&!s.nodeType&&s,_=d&&d.exports===f&&c.a.process,y=function(){try{var b=d&&d.require&&d.require("util").types;return b||_&&_.binding&&_.binding("util")}catch{}}();o.a=y}).call(this,r(122)(n))},function(n,o,r){var s=r(36),c=r(34),f=r(84),d=r(69),_=r(41),y=r(86),b=r(35),x=r(133),M=Object.getOwnPropertyDescriptor;o.f=s?M:function(S,E){if(S=_(S),E=y(E),x)try{return M(S,E)}catch{}if(b(S,E))return d(!c(f.f,S,E),S[E])}},function(n,o,r){var s=r(15),c=s({}.toString),f=s("".slice);n.exports=function(d){return f(c(d),8,-1)}},function(n,o,r){r(182)("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,o,r){var s=r(16),c=r(220).entries;s({target:"Object",stat:!0},{entries:function(f){return c(f)}})},function(n,o,r){var s=r(15);n.exports=s({}.isPrototypeOf)},function(n,o,r){var s=r(46);n.exports=s("navigator","userAgent")||""},function(n,o,r){var s=r(7),c=r(30),f=r(88),d=s.TypeError;n.exports=function(_){if(c(_))return _;throw d(f(_)+" is not a function")}},function(n,o,r){var s=r(36),c=r(38),f=r(69);n.exports=s?function(d,_,y){return c.f(d,_,f(1,y))}:function(d,_,y){return d[_]=y,d}},function(n,o,r){var s,c,f,d=r(175),_=r(7),y=r(15),b=r(33),x=r(57),M=r(35),S=r(109),E=r(93),w=r(72),C="Object already initialized",j=_.TypeError,B=_.WeakMap;if(d||S.state){var $=S.state||(S.state=new B),U=y($.get),I=y($.has),F=y($.set);s=function(G,W){if(I($,G))throw new j(C);return W.facade=G,F($,G,W),W},c=function(G){return U($,G)||{}},f=function(G){return I($,G)}}else{var Z=E("state");w[Z]=!0,s=function(G,W){if(M(G,Z))throw new j(C);return W.facade=G,x(G,Z,W),W},c=function(G){return M(G,Z)?G[Z]:{}},f=function(G){return M(G,Z)}}n.exports={set:s,get:c,has:f,enforce:function(G){return f(G)?c(G):s(G,{})},getterFor:function(G){return function(W){var K;if(!b(W)||(K=c(W)).type!==G)throw j("Incompatible receiver, "+G+" required");return K}}}},function(n,o){var r=Math.ceil,s=Math.floor;n.exports=function(c){var f=+c;return f!=f||f===0?0:(f>0?s:r)(f)}},function(n,o,r){var s,c=r(32),f=r(176),d=r(111),_=r(72),y=r(138),b=r(91),x=r(93),M=x("IE_PROTO"),S=function(){},E=function(j){return"<script>"+j+"<\/script>"},w=function(j){j.write(E("")),j.close();var B=j.parentWindow.Object;return j=null,B},C=function(){try{s=new ActiveXObject("htmlfile")}catch{}var j,B;C=typeof document<"u"?document.domain&&s?w(s):((B=b("iframe")).style.display="none",y.appendChild(B),B.src="javascript:",(j=B.contentWindow.document).open(),j.write(E("document.F=Object")),j.close(),j.F):w(s);for(var $=d.length;$--;)delete C.prototype[d[$]];return C()};_[M]=!0,n.exports=Object.create||function(j,B){var $;return j!==null?(S.prototype=c(j),$=new S,S.prototype=null,$[M]=j):$=C(),B===void 0?$:f($,B)}},function(n,o,r){var s=r(36),c=r(7),f=r(15),d=r(95),_=r(42),y=r(35),b=r(148),x=r(54),M=r(87),S=r(131),E=r(18),w=r(74).f,C=r(50).f,j=r(38).f,B=r(160),$=r(161).trim,U="Number",I=c.Number,F=I.prototype,Z=c.TypeError,G=f("".slice),W=f("".charCodeAt),K=function(Pe){var Ee=S(Pe,"number");return typeof Ee=="bigint"?Ee:J(Ee)},J=function(Pe){var Ee,we,Be,nt,Ot,Qe,lt,dt,Tt=S(Pe,"number");if(M(Tt))throw Z("Cannot convert a Symbol value to a number");if(typeof Tt=="string"&&Tt.length>2){if(Tt=$(Tt),(Ee=W(Tt,0))===43||Ee===45){if((we=W(Tt,2))===88||we===120)return NaN}else if(Ee===48){switch(W(Tt,1)){case 66:case 98:Be=2,nt=49;break;case 79:case 111:Be=8,nt=55;break;default:return+Tt}for(Qe=(Ot=G(Tt,2)).length,lt=0;lt<Qe;lt++)if((dt=W(Ot,lt))<48||dt>nt)return NaN;return parseInt(Ot,Be)}}return+Tt};if(d(U,!I(" 0o1")||!I("0b1")||I("+0x1"))){for(var q,ne=function(Pe){var Ee=arguments.length<1?0:I(K(Pe)),we=this;return x(F,we)&&E(function(){B(we)})?b(Object(Ee),we,ne):Ee},oe=s?w(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Me=0;oe.length>Me;Me++)y(I,q=oe[Me])&&!y(ne,q)&&j(ne,q,C(I,q));ne.prototype=F,F.constructor=ne,_(c,U,ne)}},function(n,o,r){var s=r(56);n.exports=function(c,f){var d=c[f];return d==null?void 0:s(d)}},function(n,o,r){var s=r(86),c=r(38),f=r(69);n.exports=function(d,_,y){var b=s(_);b in d?c.f(d,b,f(0,y)):d[b]=y}},function(n,o,r){var s=r(15),c=r(56),f=s(s.bind);n.exports=function(d,_){return c(d),_===void 0?d:f?f(d,_):function(){return d.apply(_,arguments)}}},function(n,o,r){var s=r(16),c=r(15),f=r(85),d=r(41),_=r(121),y=c([].join),b=f!=Object,x=_("join",",");s({target:"Array",proto:!0,forced:b||!x},{join:function(M){return y(d(this),M===void 0?",":M)}})},function(n,o,r){var s=r(15),c=r(73).PROPER,f=r(42),d=r(32),_=r(54),y=r(39),b=r(18),x=r(154),M="toString",S=RegExp.prototype,E=S.toString,w=s(x),C=b(function(){return E.call({source:"a",flags:"b"})!="/a/b"}),j=c&&E.name!=M;(C||j)&&f(RegExp.prototype,M,function(){var B=d(this),$=y(B.source),U=B.flags;return"/"+$+"/"+y(U===void 0&&_(S,B)&&!("flags"in S)?w(B):U)},{unsafe:!0})},function(n,o,r){var s=r(16),c=r(217),f=r(100);s({target:"Array",proto:!0},{fill:c}),f("fill")},function(n,o){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,o){n.exports=function(r,s){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:s}}},function(n,o,r){var s,c,f=r(7),d=r(55),_=f.process,y=f.Deno,b=_&&_.versions||y&&y.version,x=b&&b.v8;x&&(c=(s=x.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&d&&(!(s=d.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=d.match(/Chrome\/(\d+)/))&&(c=+s[1]),n.exports=c},function(n,o){n.exports=!1},function(n,o){n.exports={}},function(n,o,r){var s=r(36),c=r(35),f=Function.prototype,d=s&&Object.getOwnPropertyDescriptor,_=c(f,"name"),y=_&&(function(){}).name==="something",b=_&&(!s||s&&d(f,"name").configurable);n.exports={EXISTS:_,PROPER:y,CONFIGURABLE:b}},function(n,o,r){var s=r(136),c=r(111).concat("length","prototype");o.f=Object.getOwnPropertyNames||function(f){return s(f,c)}},function(n,o,r){var s=r(59),c=Math.max,f=Math.min;n.exports=function(d,_){var y=s(d);return y<0?c(y+_,0):f(y,_)}},function(n,o){var r=Function.prototype,s=r.apply,c=r.bind,f=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?f.bind(s):function(){return f.apply(s,arguments)})},function(n,o,r){var s=r(136),c=r(111);n.exports=Object.keys||function(f){return s(f,c)}},function(n,o,r){var s=r(38).f,c=r(35),f=r(28)("toStringTag");n.exports=function(d,_,y){d&&!c(d=y?d:d.prototype,f)&&s(d,f,{configurable:!0,value:_})}},function(n,o,r){var s=r(64),c=r(15),f=r(85),d=r(40),_=r(45),y=r(115),b=c([].push),x=function(M){var S=M==1,E=M==2,w=M==3,C=M==4,j=M==6,B=M==7,$=M==5||j;return function(U,I,F,Z){for(var G,W,K=d(U),J=f(K),q=s(I,F),ne=_(J),oe=0,Me=Z||y,Pe=S?Me(U,ne):E||B?Me(U,0):void 0;ne>oe;oe++)if(($||oe in J)&&(W=q(G=J[oe],oe,K),M))if(S)Pe[oe]=W;else if(W)switch(M){case 3:return!0;case 5:return G;case 6:return oe;case 2:b(Pe,G)}else switch(M){case 4:return!1;case 7:b(Pe,G)}return j?-1:w||C?C:Pe}};n.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},function(n,o){n.exports={}},function(n,o,r){var s=r(18),c=r(28),f=r(70),d=c("species");n.exports=function(_){return f>=51||!s(function(){var y=[];return(y.constructor={})[d]=function(){return{foo:1}},y[_](Boolean).foo!==1})}},function(n,o,r){var s=r(76),c=r(34),f=r(15),d=r(123),_=r(159),y=r(32),b=r(44),x=r(164),M=r(124),S=r(94),E=r(39),w=r(62),C=r(114),j=r(125),B=r(103),$=r(155),U=r(18),I=$.UNSUPPORTED_Y,F=4294967295,Z=Math.min,G=[].push,W=f(/./.exec),K=f(G),J=f("".slice),q=!U(function(){var ne=/(?:)/,oe=ne.exec;ne.exec=function(){return oe.apply(this,arguments)};var Me="ab".split(ne);return Me.length!==2||Me[0]!=="a"||Me[1]!=="b"});d("split",function(ne,oe,Me){var Pe;return Pe="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(Ee,we){var Be=E(b(this)),nt=we===void 0?F:we>>>0;if(nt===0)return[];if(Ee===void 0)return[Be];if(!_(Ee))return c(oe,Be,Ee,nt);for(var Ot,Qe,lt,dt=[],Tt=(Ee.ignoreCase?"i":"")+(Ee.multiline?"m":"")+(Ee.unicode?"u":"")+(Ee.sticky?"y":""),bn=0,Ue=new RegExp(Ee.source,Tt+"g");(Ot=c(B,Ue,Be))&&!((Qe=Ue.lastIndex)>bn&&(K(dt,J(Be,bn,Ot.index)),Ot.length>1&&Ot.index<Be.length&&s(G,dt,C(Ot,1)),lt=Ot[0].length,bn=Qe,dt.length>=nt));)Ue.lastIndex===Ot.index&&Ue.lastIndex++;return bn===Be.length?!lt&&W(Ue,"")||K(dt,""):K(dt,J(Be,bn)),dt.length>nt?C(dt,0,nt):dt}:"0".split(void 0,0).length?function(Ee,we){return Ee===void 0&&we===0?[]:c(oe,this,Ee,we)}:oe,[function(Ee,we){var Be=b(this),nt=Ee==null?void 0:w(Ee,ne);return nt?c(nt,Ee,Be,we):c(Pe,E(Be),Ee,we)},function(Ee,we){var Be=y(this),nt=E(Ee),Ot=Me(Pe,Be,nt,we,Pe!==oe);if(Ot.done)return Ot.value;var Qe=x(Be,RegExp),lt=Be.unicode,dt=(Be.ignoreCase?"i":"")+(Be.multiline?"m":"")+(Be.unicode?"u":"")+(I?"g":"y"),Tt=new Qe(I?"^(?:"+Be.source+")":Be,dt),bn=we===void 0?F:we>>>0;if(bn===0)return[];if(nt.length===0)return j(Tt,nt)===null?[nt]:[];for(var Ue=0,Te=0,$e=[];Te<nt.length;){Tt.lastIndex=I?0:Te;var wt,Wt=j(Tt,I?J(nt,Te):nt);if(Wt===null||(wt=Z(S(Tt.lastIndex+(I?Te:0)),nt.length))===Ue)Te=M(nt,Te,lt);else{if(K($e,J(nt,Ue,Te)),$e.length===bn)return $e;for(var St=1;St<=Wt.length-1;St++)if(K($e,Wt[St]),$e.length===bn)return $e;Te=Ue=wt}}return K($e,J(nt,Ue)),$e}]},!q,I)},function(n,o,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,o,r){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,f=c&&!s.call({1:2},1);o.f=f?function(d){var _=c(this,d);return!!_&&_.enumerable}:s},function(n,o,r){var s=r(7),c=r(15),f=r(18),d=r(51),_=s.Object,y=c("".split);n.exports=f(function(){return!_("z").propertyIsEnumerable(0)})?function(b){return d(b)=="String"?y(b,""):_(b)}:_},function(n,o,r){var s=r(131),c=r(87);n.exports=function(f){var d=s(f,"string");return c(d)?d:d+""}},function(n,o,r){var s=r(7),c=r(46),f=r(30),d=r(54),_=r(132),y=s.Object;n.exports=_?function(b){return typeof b=="symbol"}:function(b){var x=c("Symbol");return f(x)&&d(x.prototype,y(b))}},function(n,o,r){var s=r(7).String;n.exports=function(c){try{return s(c)}catch{return"Object"}}},function(n,o,r){var s=r(71),c=r(109);(n.exports=function(f,d){return c[f]||(c[f]=d!==void 0?d:{})})("versions",[]).push({version:"3.19.3",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,o,r){var s=r(15),c=0,f=Math.random(),d=s(1 .toString);n.exports=function(_){return"Symbol("+(_===void 0?"":_)+")_"+d(++c+f,36)}},function(n,o,r){var s=r(7),c=r(33),f=s.document,d=c(f)&&c(f.createElement);n.exports=function(_){return d?f.createElement(_):{}}},function(n,o,r){var s=r(15),c=r(30),f=r(109),d=s(Function.toString);c(f.inspectSource)||(f.inspectSource=function(_){return d(_)}),n.exports=f.inspectSource},function(n,o,r){var s=r(89),c=r(90),f=s("keys");n.exports=function(d){return f[d]||(f[d]=c(d))}},function(n,o,r){var s=r(59),c=Math.min;n.exports=function(f){return f>0?c(s(f),9007199254740991):0}},function(n,o,r){var s=r(18),c=r(30),f=/#|\.prototype\./,d=function(M,S){var E=y[_(M)];return E==x||E!=b&&(c(S)?s(S):!!S)},_=d.normalize=function(M){return String(M).replace(f,".").toLowerCase()},y=d.data={},b=d.NATIVE="N",x=d.POLYFILL="P";n.exports=d},function(n,o,r){var s=r(51);n.exports=Array.isArray||function(c){return s(c)=="Array"}},function(n,o,r){var s=r(7),c=r(113),f=r(30),d=r(51),_=r(28)("toStringTag"),y=s.Object,b=d(function(){return arguments}())=="Arguments";n.exports=c?d:function(x){var M,S,E;return x===void 0?"Undefined":x===null?"Null":typeof(S=function(w,C){try{return w[C]}catch{}}(M=y(x),_))=="string"?S:b?d(M):(E=d(M))=="Object"&&f(M.callee)?"Arguments":E}},function(n,o,r){var s=r(15);n.exports=s([].slice)},function(n,o,r){var s=r(15),c=r(18),f=r(30),d=r(97),_=r(46),y=r(92),b=function(){},x=[],M=_("Reflect","construct"),S=/^\s*(?:class|function)\b/,E=s(S.exec),w=!S.exec(b),C=function(j){if(!f(j))return!1;try{return M(b,x,j),!0}catch{return!1}};n.exports=!M||c(function(){var j;return C(C.call)||!C(Object)||!C(function(){j=!0})||j})?function(j){if(!f(j))return!1;switch(d(j)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return w||!!E(S,y(j))}:C},function(n,o,r){var s=r(28),c=r(60),f=r(38),d=s("unscopables"),_=Array.prototype;_[d]==null&&f.f(_,d,{configurable:!0,value:c(null)}),n.exports=function(y){_[d][y]=!0}},function(n,o,r){var s=r(7),c=r(35),f=r(30),d=r(40),_=r(93),y=r(143),b=_("IE_PROTO"),x=s.Object,M=x.prototype;n.exports=y?x.getPrototypeOf:function(S){var E=d(S);if(c(E,b))return E[b];var w=E.constructor;return f(w)&&E instanceof w?w.prototype:E instanceof x?M:null}},function(n,o,r){var s=r(15),c=r(32),f=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d,_=!1,y={};try{(d=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(y,[]),_=y instanceof Array}catch{}return function(b,x){return c(b),f(x),_?d(b,x):b.__proto__=x,b}}():void 0)},function(n,o,r){var s,c,f=r(34),d=r(15),_=r(39),y=r(154),b=r(155),x=r(89),M=r(60),S=r(58).get,E=r(190),w=r(191),C=x("native-string-replace",String.prototype.replace),j=RegExp.prototype.exec,B=j,$=d("".charAt),U=d("".indexOf),I=d("".replace),F=d("".slice),Z=(c=/b*/g,f(j,s=/a/,"a"),f(j,c,"a"),s.lastIndex!==0||c.lastIndex!==0),G=b.BROKEN_CARET,W=/()??/.exec("")[1]!==void 0;(Z||W||G||E||w)&&(B=function(K){var J,q,ne,oe,Me,Pe,Ee,we=this,Be=S(we),nt=_(K),Ot=Be.raw;if(Ot)return Ot.lastIndex=we.lastIndex,J=f(B,Ot,nt),we.lastIndex=Ot.lastIndex,J;var Qe=Be.groups,lt=G&&we.sticky,dt=f(y,we),Tt=we.source,bn=0,Ue=nt;if(lt&&(dt=I(dt,"y",""),U(dt,"g")===-1&&(dt+="g"),Ue=F(nt,we.lastIndex),we.lastIndex>0&&(!we.multiline||we.multiline&&$(nt,we.lastIndex-1)!==`
`)&&(Tt="(?: "+Tt+")",Ue=" "+Ue,bn++),q=new RegExp("^(?:"+Tt+")",dt)),W&&(q=new RegExp("^"+Tt+"$(?!\\s)",dt)),Z&&(ne=we.lastIndex),oe=f(j,lt?q:we,Ue),lt?oe?(oe.input=F(oe.input,bn),oe[0]=F(oe[0],bn),oe.index=we.lastIndex,we.lastIndex+=oe[0].length):we.lastIndex=0:Z&&oe&&(we.lastIndex=we.global?oe.index+oe[0].length:ne),W&&oe&&oe.length>1&&f(C,oe[0],q,function(){for(Me=1;Me<arguments.length-2;Me++)arguments[Me]===void 0&&(oe[Me]=void 0)}),oe&&Qe)for(oe.groups=Pe=M(null),Me=0;Me<Qe.length;Me++)Pe[(Ee=Qe[Me])[0]]=oe[Ee[1]];return oe}),n.exports=B},function(n,o,r){var s=r(16),c=r(7),f=r(75),d=r(59),_=r(45),y=r(40),b=r(115),x=r(63),M=r(81)("splice"),S=c.TypeError,E=Math.max,w=Math.min,C=9007199254740991,j="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!M},{splice:function(B,$){var U,I,F,Z,G,W,K=y(this),J=_(K),q=f(B,J),ne=arguments.length;if(ne===0?U=I=0:ne===1?(U=0,I=J-q):(U=ne-2,I=w(E(d($),0),J-q)),J+U-I>C)throw S(j);for(F=b(K,I),Z=0;Z<I;Z++)(G=q+Z)in K&&x(F,Z,K[G]);if(F.length=I,U<I){for(Z=q;Z<J-I;Z++)W=Z+U,(G=Z+I)in K?K[W]=K[G]:delete K[W];for(Z=J;Z>J-I+U;Z--)delete K[Z-1]}else if(U>I)for(Z=J-I;Z>q;Z--)W=Z+U-1,(G=Z+I-1)in K?K[W]=K[G]:delete K[W];for(Z=0;Z<U;Z++)K[Z+q]=arguments[Z+2];return K.length=J-I+U,F}})},function(n,o,r){var s=r(16),c=r(205);s({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(f){return c(this,"a","name",f)}})},function(n,o,r){(function(s){var c=typeof s=="object"&&s&&s.Object===Object&&s;o.a=c}).call(this,r(68))},function(n,o,r){(function(s){var c=r(31),f=t&&!t.nodeType&&t,d=f&&typeof s=="object"&&s&&!s.nodeType&&s,_=d&&d.exports===f?c.a.Buffer:void 0,y=_?_.allocUnsafe:void 0;o.a=function(b,x){if(x)return b.slice();var M=b.length,S=y?y(M):new b.constructor(M);return b.copy(S),S}}).call(this,r(122)(n))},function(n,o,r){var s=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var f=Symbol();return!String(f)||!(Object(f)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(n,o,r){var s=r(7),c=r(110),f="__core-js_shared__",d=s[f]||c(f,{});n.exports=d},function(n,o,r){var s=r(7),c=Object.defineProperty;n.exports=function(f,d){try{c(s,f,{value:d,configurable:!0,writable:!0})}catch{s[f]=d}return d}},function(n,o){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,o){o.f=Object.getOwnPropertySymbols},function(n,o,r){var s={};s[r(28)("toStringTag")]="z",n.exports=String(s)==="[object z]"},function(n,o,r){var s=r(7),c=r(75),f=r(45),d=r(63),_=s.Array,y=Math.max;n.exports=function(b,x,M){for(var S=f(b),E=c(x,S),w=c(M===void 0?S:M,S),C=_(y(w-E,0)),j=0;E<w;E++,j++)d(C,j,b[E]);return C.length=j,C}},function(n,o,r){var s=r(178);n.exports=function(c,f){return new(s(c))(f===0?0:f)}},function(n,o,r){var s=r(16),c=r(34),f=r(71),d=r(73),_=r(30),y=r(180),b=r(101),x=r(102),M=r(78),S=r(57),E=r(42),w=r(28),C=r(80),j=r(142),B=d.PROPER,$=d.CONFIGURABLE,U=j.IteratorPrototype,I=j.BUGGY_SAFARI_ITERATORS,F=w("iterator"),Z="keys",G="values",W="entries",K=function(){return this};n.exports=function(J,q,ne,oe,Me,Pe,Ee){y(ne,q,oe);var we,Be,nt,Ot=function(Te){if(Te===Me&&bn)return bn;if(!I&&Te in dt)return dt[Te];switch(Te){case Z:case G:case W:return function(){return new ne(this,Te)}}return function(){return new ne(this)}},Qe=q+" Iterator",lt=!1,dt=J.prototype,Tt=dt[F]||dt["@@iterator"]||Me&&dt[Me],bn=!I&&Tt||Ot(Me),Ue=q=="Array"&&dt.entries||Tt;if(Ue&&(we=b(Ue.call(new J)))!==Object.prototype&&we.next&&(f||b(we)===U||(x?x(we,U):_(we[F])||E(we,F,K)),M(we,Qe,!0,!0),f&&(C[Qe]=K)),B&&Me==G&&Tt&&Tt.name!==G&&(!f&&$?S(dt,"name",G):(lt=!0,bn=function(){return c(Tt,this)})),Me)if(Be={values:Ot(G),keys:Pe?bn:Ot(Z),entries:Ot(W)},Ee)for(nt in Be)(I||lt||!(nt in dt))&&E(dt,nt,Be[nt]);else s({target:q,proto:!0,forced:I||lt},Be);return f&&!Ee||dt[F]===bn||E(dt,F,bn,{name:Me}),C[q]=bn,Be}},function(n,o,r){var s=r(7),c=r(64),f=r(34),d=r(32),_=r(88),y=r(145),b=r(45),x=r(54),M=r(146),S=r(118),E=r(147),w=s.TypeError,C=function(B,$){this.stopped=B,this.result=$},j=C.prototype;n.exports=function(B,$,U){var I,F,Z,G,W,K,J,q=U&&U.that,ne=!(!U||!U.AS_ENTRIES),oe=!(!U||!U.IS_ITERATOR),Me=!(!U||!U.INTERRUPTED),Pe=c($,q),Ee=function(Be){return I&&E(I,"normal",Be),new C(!0,Be)},we=function(Be){return ne?(d(Be),Me?Pe(Be[0],Be[1],Ee):Pe(Be[0],Be[1])):Me?Pe(Be,Ee):Pe(Be)};if(oe)I=B;else{if(!(F=S(B)))throw w(_(B)+" is not iterable");if(y(F)){for(Z=0,G=b(B);G>Z;Z++)if((W=we(B[Z]))&&x(j,W))return W;return new C(!1)}I=M(B,F)}for(K=I.next;!(J=f(K,I)).done;){try{W=we(J.value)}catch(Be){E(I,"throw",Be)}if(typeof W=="object"&&W&&x(j,W))return W}return new C(!1)}},function(n,o,r){var s=r(97),c=r(62),f=r(80),d=r(28)("iterator");n.exports=function(_){if(_!=null)return c(_,d)||c(_,"@@iterator")||f[s(_)]}},function(n,o,r){var s=r(7),c=r(54),f=s.TypeError;n.exports=function(d,_){if(c(_,d))return d;throw f("Incorrect invocation")}},function(n,o,r){var s=r(28)("iterator"),c=!1;try{var f=0,d={next:function(){return{done:!!f++}},return:function(){c=!0}};d[s]=function(){return this},Array.from(d,function(){throw 2})}catch{}n.exports=function(_,y){if(!y&&!c)return!1;var b=!1;try{var x={};x[s]=function(){return{next:function(){return{done:b=!0}}}},_(x)}catch{}return b}},function(n,o,r){var s=r(18);n.exports=function(c,f){var d=[][c];return!!d&&s(function(){d.call(null,f||function(){throw 1},1)})}},function(n,o){n.exports=function(r){if(!r.webpackPolyfill){var s=Object.create(r);s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),Object.defineProperty(s,"exports",{enumerable:!0}),s.webpackPolyfill=1}return s}},function(n,o,r){r(19);var s=r(15),c=r(42),f=r(103),d=r(18),_=r(28),y=r(57),b=_("species"),x=RegExp.prototype;n.exports=function(M,S,E,w){var C=_(M),j=!d(function(){var I={};return I[C]=function(){return 7},""[M](I)!=7}),B=j&&!d(function(){var I=!1,F=/a/;return M==="split"&&((F={}).constructor={},F.constructor[b]=function(){return F},F.flags="",F[C]=/./[C]),F.exec=function(){return I=!0,null},F[C](""),!I});if(!j||!B||E){var $=s(/./[C]),U=S(C,""[M],function(I,F,Z,G,W){var K=s(I),J=F.exec;return J===f||J===x.exec?j&&!W?{done:!0,value:$(F,Z,G)}:{done:!0,value:K(Z,F,G)}:{done:!1}});c(String.prototype,M,U[0]),c(x,C,U[1])}w&&y(x[C],"sham",!0)}},function(n,o,r){var s=r(151).charAt;n.exports=function(c,f,d){return f+(d?s(c,f).length:1)}},function(n,o,r){var s=r(7),c=r(34),f=r(32),d=r(30),_=r(51),y=r(103),b=s.TypeError;n.exports=function(x,M){var S=x.exec;if(d(S)){var E=c(S,x,M);return E!==null&&f(E),E}if(_(x)==="RegExp")return c(y,x,M);throw b("RegExp#exec called on incompatible receiver")}},function(n,o,r){var s=r(76),c=r(34),f=r(15),d=r(123),_=r(18),y=r(32),b=r(30),x=r(59),M=r(94),S=r(39),E=r(44),w=r(124),C=r(62),j=r(201),B=r(125),$=r(28)("replace"),U=Math.max,I=Math.min,F=f([].concat),Z=f([].push),G=f("".indexOf),W=f("".slice),K="a".replace(/./,"$0")==="$0",J=!!/./[$]&&/./[$]("a","$0")==="";d("replace",function(q,ne,oe){var Me=J?"$":"$0";return[function(Pe,Ee){var we=E(this),Be=Pe==null?void 0:C(Pe,$);return Be?c(Be,Pe,we,Ee):c(ne,S(we),Pe,Ee)},function(Pe,Ee){var we=y(this),Be=S(Pe);if(typeof Ee=="string"&&G(Ee,Me)===-1&&G(Ee,"$<")===-1){var nt=oe(ne,we,Be,Ee);if(nt.done)return nt.value}var Ot=b(Ee);Ot||(Ee=S(Ee));var Qe=we.global;if(Qe){var lt=we.unicode;we.lastIndex=0}for(var dt=[];;){var Tt=B(we,Be);if(Tt===null||(Z(dt,Tt),!Qe))break;S(Tt[0])===""&&(we.lastIndex=w(Be,M(we.lastIndex),lt))}for(var bn,Ue="",Te=0,$e=0;$e<dt.length;$e++){for(var wt=S((Tt=dt[$e])[0]),Wt=U(I(x(Tt.index),Be.length),0),St=[],Zt=1;Zt<Tt.length;Zt++)Z(St,(bn=Tt[Zt])===void 0?bn:String(bn));var pn=Tt.groups;if(Ot){var An=F([wt],St,Wt,Be);pn!==void 0&&Z(An,pn);var yn=S(s(Ee,void 0,An))}else yn=j(wt,Be,Wt,St,pn,Ee);Wt>=Te&&(Ue+=W(Be,Te,Wt)+yn,Te=Wt+wt.length)}return Ue+W(Be,Te)}]},!!_(function(){var q=/./;return q.exec=function(){var ne=[];return ne.groups={a:"7"},ne},"".replace(q,"$<a>")!=="7"})||!K||J)},function(n,o,r){var s=r(16),c=Math.hypot,f=Math.abs,d=Math.sqrt;s({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(_,y){for(var b,x,M=0,S=0,E=arguments.length,w=0;S<E;)w<(b=f(arguments[S++]))?(M=M*(x=w/b)*x+1,w=b):M+=b>0?(x=b/w)*x:b;return w===1/0?1/0:w*d(M)}})},function(n,o,r){var s=r(51),c=r(7);n.exports=s(c.process)=="process"},function(n,o,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,o,r){(function(s,c){var f;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var d,_="Expected a function",y="__lodash_hash_undefined__",b="__lodash_placeholder__",x=16,M=32,S=64,E=128,w=256,C=1/0,j=9007199254740991,B=NaN,$=4294967295,U=[["ary",E],["bind",1],["bindKey",2],["curry",8],["curryRight",x],["flip",512],["partial",M],["partialRight",S],["rearg",w]],I="[object Arguments]",F="[object Array]",Z="[object Boolean]",G="[object Date]",W="[object Error]",K="[object Function]",J="[object GeneratorFunction]",q="[object Map]",ne="[object Number]",oe="[object Object]",Me="[object Promise]",Pe="[object RegExp]",Ee="[object Set]",we="[object String]",Be="[object Symbol]",nt="[object WeakMap]",Ot="[object ArrayBuffer]",Qe="[object DataView]",lt="[object Float32Array]",dt="[object Float64Array]",Tt="[object Int8Array]",bn="[object Int16Array]",Ue="[object Int32Array]",Te="[object Uint8Array]",$e="[object Uint8ClampedArray]",wt="[object Uint16Array]",Wt="[object Uint32Array]",St=/\b__p \+= '';/g,Zt=/\b(__p \+=) '' \+/g,pn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,An=/&(?:amp|lt|gt|quot|#39);/g,yn=/[&<>"']/g,ht=RegExp(An.source),kn=RegExp(yn.source),Ie=/<%-([\s\S]+?)%>/g,wn=/<%([\s\S]+?)%>/g,nr=/<%=([\s\S]+?)%>/g,le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rr=/^\w*$/,Rr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sr=/[\\^$.*+?()[\]{}|]/g,uo=RegExp(Sr.source),Vn=/^\s+/,fo=/\s/,xe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,Le=/,? & /,st=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,on=/[()=,{}\[\]\/\s]/,en=/\\(\\)?/g,In=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ar=/\w*$/,ui=/^[-+]0x[0-9a-f]+$/i,Si=/^0b[01]+$/i,Zo=/^\[object .+?Constructor\]$/,ri=/^0o[0-7]+$/i,Nn=/^(?:0|[1-9]\d*)$/,zn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zn=/($^)/,ur=/['\n\r\u2028\u2029\\]/g,oo="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Vr="\\u2700-\\u27bf",gl="a-z\\xdf-\\xf6\\xf8-\\xff",Wa="A-Z\\xc0-\\xd6\\xd8-\\xde",_l="\\ufe0e\\ufe0f",ls="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tp="['’]",wc="[\\ud800-\\udfff]",ma="["+ls+"]",Bs="["+oo+"]",Dn="\\d+",Vd="[\\u2700-\\u27bf]",So="["+gl+"]",Ec="[^\\ud800-\\udfff"+ls+Dn+Vr+gl+Wa+"]",Ji="\\ud83c[\\udffb-\\udfff]",aa="[^\\ud800-\\udfff]",Pu="(?:\\ud83c[\\udde6-\\uddff]){2}",Da="[\\ud800-\\udbff][\\udc00-\\udfff]",ya="["+Wa+"]",ja="(?:"+So+"|"+Ec+")",Oc="(?:"+ya+"|"+Ec+")",Sc="(?:['’](?:d|ll|m|re|s|t|ve))?",Bd="(?:['’](?:D|LL|M|RE|S|T|VE))?",Us="(?:"+Bs+"|"+Ji+")?",Ud="[\\ufe0e\\ufe0f]?",xc=Ud+Us+("(?:\\u200d(?:"+[aa,Pu,Da].join("|")+")"+Ud+Us+")*"),np="(?:"+[Vd,Pu,Da].join("|")+")"+xc,Ll="(?:"+[aa+Bs+"?",Bs,Pu,Da,wc].join("|")+")",Gd=RegExp(tp,"g"),bl=RegExp(Bs,"g"),Mc=RegExp(Ji+"(?="+Ji+")|"+Ll+xc,"g"),Ru=RegExp([ya+"?"+So+"+"+Sc+"(?="+[ma,ya,"$"].join("|")+")",Oc+"+"+Bd+"(?="+[ma,ya+ja,"$"].join("|")+")",ya+"?"+ja+"+"+Sc,ya+"+"+Bd,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dn,np].join("|"),"g"),Ac=RegExp("[\\u200d\\ud800-\\udfff"+oo+_l+"]"),Tc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zd=-1,Zr={};Zr[lt]=Zr[dt]=Zr[Tt]=Zr[bn]=Zr[Ue]=Zr[Te]=Zr[$e]=Zr[wt]=Zr[Wt]=!0,Zr[I]=Zr[F]=Zr[Ot]=Zr[Z]=Zr[Qe]=Zr[G]=Zr[W]=Zr[K]=Zr[q]=Zr[ne]=Zr[oe]=Zr[Pe]=Zr[Ee]=Zr[we]=Zr[nt]=!1;var qr={};qr[I]=qr[F]=qr[Ot]=qr[Qe]=qr[Z]=qr[G]=qr[lt]=qr[dt]=qr[Tt]=qr[bn]=qr[Ue]=qr[q]=qr[ne]=qr[oe]=qr[Pe]=qr[Ee]=qr[we]=qr[Be]=qr[Te]=qr[$e]=qr[wt]=qr[Wt]=!0,qr[W]=qr[K]=qr[nt]=!1;var Hd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ss=parseFloat,ga=parseInt,Cu=typeof s=="object"&&s&&s.Object===Object&&s,Wd=typeof self=="object"&&self&&self.Object===Object&&self,zo=Cu||Wd||Function("return this")(),$l=o&&!o.nodeType&&o,Fl=$l&&typeof c=="object"&&c&&!c.nodeType&&c,Du=Fl&&Fl.exports===$l,us=Du&&Cu.process,xi=function(){try{var ft=Fl&&Fl.require&&Fl.require("util").types;return ft||us&&us.binding&&us.binding("util")}catch{}}(),kc=xi&&xi.isArrayBuffer,Xd=xi&&xi.isDate,Nc=xi&&xi.isMap,Fi=xi&&xi.isRegExp,ci=xi&&xi.isSet,_a=xi&&xi.isTypedArray;function po(ft,Vt,Ut){switch(Ut.length){case 0:return ft.call(Vt);case 1:return ft.call(Vt,Ut[0]);case 2:return ft.call(Vt,Ut[0],Ut[1]);case 3:return ft.call(Vt,Ut[0],Ut[1],Ut[2])}return ft.apply(Vt,Ut)}function op(ft,Vt,Ut,vn){for(var hr=-1,$r=ft==null?0:ft.length;++hr<$r;){var bo=ft[hr];Vt(vn,bo,Ut(bo),ft)}return vn}function Vi(ft,Vt){for(var Ut=-1,vn=ft==null?0:ft.length;++Ut<vn&&Vt(ft[Ut],Ut,ft)!==!1;);return ft}function qd(ft,Vt){for(var Ut=ft==null?0:ft.length;Ut--&&Vt(ft[Ut],Ut,ft)!==!1;);return ft}function Yd(ft,Vt){for(var Ut=-1,vn=ft==null?0:ft.length;++Ut<vn;)if(!Vt(ft[Ut],Ut,ft))return!1;return!0}function Bi(ft,Vt){for(var Ut=-1,vn=ft==null?0:ft.length,hr=0,$r=[];++Ut<vn;){var bo=ft[Ut];Vt(bo,Ut,ft)&&($r[hr++]=bo)}return $r}function Qi(ft,Vt){return!!(ft!=null&&ft.length)&&cs(ft,Vt,0)>-1}function Pc(ft,Vt,Ut){for(var vn=-1,hr=ft==null?0:ft.length;++vn<hr;)if(Ut(Vt,ft[vn]))return!0;return!1}function zr(ft,Vt){for(var Ut=-1,vn=ft==null?0:ft.length,hr=Array(vn);++Ut<vn;)hr[Ut]=Vt(ft[Ut],Ut,ft);return hr}function di(ft,Vt){for(var Ut=-1,vn=Vt.length,hr=ft.length;++Ut<vn;)ft[hr+Ut]=Vt[Ut];return ft}function ju(ft,Vt,Ut,vn){var hr=-1,$r=ft==null?0:ft.length;for(vn&&$r&&(Ut=ft[++hr]);++hr<$r;)Ut=Vt(Ut,ft[hr],hr,ft);return Ut}function Kd(ft,Vt,Ut,vn){var hr=ft==null?0:ft.length;for(vn&&hr&&(Ut=ft[--hr]);hr--;)Ut=Vt(Ut,ft[hr],hr,ft);return Ut}function Rc(ft,Vt){for(var Ut=-1,vn=ft==null?0:ft.length;++Ut<vn;)if(Vt(ft[Ut],Ut,ft))return!0;return!1}var Iu=Gi("length");function Xa(ft,Vt,Ut){var vn;return Ut(ft,function(hr,$r,bo){if(Vt(hr,$r,bo))return vn=$r,!1}),vn}function Ui(ft,Vt,Ut,vn){for(var hr=ft.length,$r=Ut+(vn?1:-1);vn?$r--:++$r<hr;)if(Vt(ft[$r],$r,ft))return $r;return-1}function cs(ft,Vt,Ut){return Vt==Vt?function(vn,hr,$r){for(var bo=$r-1,P=vn.length;++bo<P;)if(vn[bo]===hr)return bo;return-1}(ft,Vt,Ut):Ui(ft,ba,Ut)}function ea(ft,Vt,Ut,vn){for(var hr=Ut-1,$r=ft.length;++hr<$r;)if(vn(ft[hr],Vt))return hr;return-1}function ba(ft){return ft!=ft}function Lr(ft,Vt){var Ut=ft==null?0:ft.length;return Ut?ds(ft,Vt)/Ut:B}function Gi(ft){return function(Vt){return Vt==null?d:Vt[ft]}}function Ia(ft){return function(Vt){return ft==null?d:ft[Vt]}}function gi(ft,Vt,Ut,vn,hr){return hr(ft,function($r,bo,P){Ut=vn?(vn=!1,$r):Vt(Ut,$r,bo,P)}),Ut}function ds(ft,Vt){for(var Ut,vn=-1,hr=ft.length;++vn<hr;){var $r=Vt(ft[vn]);$r!==d&&(Ut=Ut===d?$r:Ut+$r)}return Ut}function Vl(ft,Vt){for(var Ut=-1,vn=Array(ft);++Ut<ft;)vn[Ut]=Vt(Ut);return vn}function La(ft){return ft&&ft.slice(0,fi(ft)+1).replace(Vn,"")}function _o(ft){return function(Vt){return ft(Vt)}}function Gs(ft,Vt){return zr(Vt,function(Ut){return ft[Ut]})}function qa(ft,Vt){return ft.has(Vt)}function wa(ft,Vt){for(var Ut=-1,vn=ft.length;++Ut<vn&&cs(Vt,ft[Ut],0)>-1;);return Ut}function Cc(ft,Vt){for(var Ut=ft.length;Ut--&&cs(Vt,ft[Ut],0)>-1;);return Ut}function ip(ft,Vt){for(var Ut=ft.length,vn=0;Ut--;)ft[Ut]===Vt&&++vn;return vn}var Dc=Ia({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Jo=Ia({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function zs(ft){return"\\"+Hd[ft]}function Ya(ft){return Ac.test(ft)}function oi(ft){var Vt=-1,Ut=Array(ft.size);return ft.forEach(function(vn,hr){Ut[++Vt]=[hr,vn]}),Ut}function jc(ft,Vt){return function(Ut){return ft(Vt(Ut))}}function la(ft,Vt){for(var Ut=-1,vn=ft.length,hr=0,$r=[];++Ut<vn;){var bo=ft[Ut];bo!==Vt&&bo!==b||(ft[Ut]=b,$r[hr++]=Ut)}return $r}function Ea(ft){var Vt=-1,Ut=Array(ft.size);return ft.forEach(function(vn){Ut[++Vt]=vn}),Ut}function Lu(ft){var Vt=-1,Ut=Array(ft.size);return ft.forEach(function(vn){Ut[++Vt]=[vn,vn]}),Ut}function zi(ft){return Ya(ft)?function(Vt){for(var Ut=Mc.lastIndex=0;Mc.test(Vt);)++Ut;return Ut}(ft):Iu(ft)}function ta(ft){return Ya(ft)?function(Vt){return Vt.match(Mc)||[]}(ft):function(Vt){return Vt.split("")}(ft)}function fi(ft){for(var Vt=ft.length;Vt--&&fo.test(ft.charAt(Vt)););return Vt}var sa=Ia({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ii=function ft(Vt){var Ut,vn=(Vt=Vt==null?zo:Ii.defaults(zo.Object(),Vt,Ii.pick(zo,rp))).Array,hr=Vt.Date,$r=Vt.Error,bo=Vt.Function,P=Vt.Math,R=Vt.Object,H=Vt.RegExp,ae=Vt.String,be=Vt.TypeError,qe=vn.prototype,gt=bo.prototype,qt=R.prototype,On=Vt["__core-js_shared__"],xr=gt.toString,dn=qt.hasOwnProperty,Yr=0,wr=(Ut=/[^.]+$/.exec(On&&On.keys&&On.keys.IE_PROTO||""))?"Symbol(src)_1."+Ut:"",Ur=qt.toString,ua=xr.call(R),Po=zo._,na=H("^"+xr.call(dn).replace(Sr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wl=Du?Vt.Buffer:d,El=Vt.Symbol,Bl=Vt.Uint8Array,fs=wl?wl.allocUnsafe:d,Ka=jc(R.getPrototypeOf,R),ps=R.create,ii=qt.propertyIsEnumerable,Ul=qe.splice,Ol=El?El.isConcatSpreadable:d,Za=El?El.iterator:d,Ja=El?El.toStringTag:d,Hs=function(){try{var h=il(R,"defineProperty");return h({},"",{}),h}catch{}}(),ph=Vt.clearTimeout!==zo.clearTimeout&&Vt.clearTimeout,hh=hr&&hr.now!==zo.Date.now&&hr.now,ap=Vt.setTimeout!==zo.setTimeout&&Vt.setTimeout,Ic=P.ceil,Ws=P.floor,Zd=R.getOwnPropertySymbols,vh=wl?wl.isBuffer:d,Xs=Vt.isFinite,Lc=qe.join,Jd=jc(R.keys,R),Ho=P.max,Hi=P.min,Qd=hr.now,ef=Vt.parseInt,$u=P.random,Xv=qe.reverse,Fu=il(Vt,"DataView"),Vu=il(Vt,"Map"),$c=il(Vt,"Promise"),qs=il(Vt,"Set"),hs=il(Vt,"WeakMap"),Bu=il(R,"create"),Fc=hs&&new hs,vs={},qv=Os(Fu),Vc=Os(Vu),Yv=Os($c),Kv=Os(qs),mh=Os(hs),tf=El?El.prototype:d,Li=tf?tf.valueOf:d,yh=tf?tf.toString:d;function se(h){if(Yo(h)&&!Er(h)&&!(h instanceof Fr)){if(h instanceof $a)return h;if(dn.call(h,"__wrapped__"))return xf(h)}return new $a(h)}var Ys=function(){function h(){}return function(g){if(!Fo(g))return{};if(ps)return ps(g);h.prototype=g;var A=new h;return h.prototype=d,A}}();function Gl(){}function $a(h,g){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=d}function Fr(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$,this.__views__=[]}function Mi(h){var g=-1,A=h==null?0:h.length;for(this.clear();++g<A;){var L=h[g];this.set(L[0],L[1])}}function Hr(h){var g=-1,A=h==null?0:h.length;for(this.clear();++g<A;){var L=h[g];this.set(L[0],L[1])}}function Qa(h){var g=-1,A=h==null?0:h.length;for(this.clear();++g<A;){var L=h[g];this.set(L[0],L[1])}}function zl(h){var g=-1,A=h==null?0:h.length;for(this.__data__=new Qa;++g<A;)this.add(h[g])}function Oa(h){var g=this.__data__=new Hr(h);this.size=g.size}function nf(h,g){var A=Er(h),L=!A&&fu(h),Q=!A&&!L&&oa(h),re=!A&&!L&&!Q&&et(h),me=A||L||Q||re,Se=me?Vl(h.length,ae):[],Ve=Se.length;for(var mt in h)!g&&!dn.call(h,mt)||me&&(mt=="length"||Q&&(mt=="offset"||mt=="parent")||re&&(mt=="buffer"||mt=="byteLength"||mt=="byteOffset")||$i(mt,Ve))||Se.push(mt);return Se}function rf(h){var g=h.length;return g?h[yp(0,g-1)]:d}function lp(h,g){return kl(_i(h),ms(g,0,h.length))}function gh(h){return kl(_i(h))}function Hl(h,g,A){(A!==d&&!Ua(h[g],A)||A===d&&!(g in h))&&el(h,g,A)}function Wo(h,g,A){var L=h[g];dn.call(h,g)&&Ua(L,A)&&(A!==d||g in h)||el(h,g,A)}function Uu(h,g){for(var A=h.length;A--;)if(Ua(h[A][0],g))return A;return-1}function sp(h,g,A,L){return xo(h,function(Q,re,me){g(L,Q,A(Q),me)}),L}function Wl(h,g){return h&&nl(g,It(g),h)}function el(h,g,A){g=="__proto__"&&Hs?Hs(h,g,{configurable:!0,enumerable:!0,value:A,writable:!0}):h[g]=A}function Bc(h,g){for(var A=-1,L=g.length,Q=vn(L),re=h==null;++A<L;)Q[A]=re?d:Xt(h,g[A]);return Q}function ms(h,g,A){return h==h&&(A!==d&&(h=h<=A?h:A),g!==d&&(h=h>=g?h:g)),h}function Sa(h,g,A,L,Q,re){var me,Se=1&g,Ve=2&g,mt=4&g;if(A&&(me=Q?A(h,L,Q,re):A(h)),me!==d)return me;if(!Fo(h))return h;var bt=Er(h);if(bt){if(me=function(Lt){var nn=Lt.length,sr=new Lt.constructor(nn);return nn&&typeof Lt[0]=="string"&&dn.call(Lt,"index")&&(sr.index=Lt.index,sr.input=Lt.input),sr}(h),!Se)return _i(h,me)}else{var Ht=Lo(h),En=Ht==K||Ht==J;if(oa(h))return Mh(h,Se);if(Ht==oe||Ht==I||En&&!Q){if(me=Ve||En?{}:ra(h),!Se)return Ve?function(Lt,nn){return nl(Lt,ou(Lt),nn)}(h,function(Lt,nn){return Lt&&nl(nn,Nt(nn),Lt)}(me,h)):function(Lt,nn){return nl(Lt,pi(Lt),nn)}(h,Wl(me,h))}else{if(!qr[Ht])return Q?h:{};me=function(Lt,nn,sr){var Pn=Lt.constructor;switch(nn){case Ot:return Js(Lt);case Z:case G:return new Pn(+Lt);case Qe:return function(gr,Gr){var Jn=Gr?Js(gr.buffer):gr.buffer;return new gr.constructor(Jn,gr.byteOffset,gr.byteLength)}(Lt,sr);case lt:case dt:case Tt:case bn:case Ue:case Te:case $e:case wt:case Wt:return Ah(Lt,sr);case q:return new Pn;case ne:case we:return new Pn(Lt);case Pe:return function(gr){var Gr=new gr.constructor(gr.source,Ar.exec(gr));return Gr.lastIndex=gr.lastIndex,Gr}(Lt);case Ee:return new Pn;case Be:return Xe=Lt,Li?R(Li.call(Xe)):{}}var Xe}(h,Ht,Se)}}re||(re=new Oa);var Sn=re.get(h);if(Sn)return Sn;re.set(h,me),Oe(h)?h.forEach(function(Lt){me.add(Sa(Lt,g,A,Lt,h,re))}):Nf(h)&&h.forEach(function(Lt,nn){me.set(nn,Sa(Lt,g,A,nn,h,re))});var Yn=bt?d:(mt?Ve?bf:Kc:Ve?Nt:It)(h);return Vi(Yn||h,function(Lt,nn){Yn&&(Lt=h[nn=Lt]),Wo(me,nn,Sa(Lt,g,A,nn,h,re))}),me}function up(h,g,A){var L=A.length;if(h==null)return!L;for(h=R(h);L--;){var Q=A[L],re=g[Q],me=h[Q];if(me===d&&!(Q in h)||!re(me))return!1}return!0}function cp(h,g,A){if(typeof h!="function")throw new be(_);return lu(function(){h.apply(d,A)},g)}function tl(h,g,A,L){var Q=-1,re=Qi,me=!0,Se=h.length,Ve=[],mt=g.length;if(!Se)return Ve;A&&(g=zr(g,_o(A))),L?(re=Pc,me=!1):g.length>=200&&(re=qa,me=!1,g=new zl(g));e:for(;++Q<Se;){var bt=h[Q],Ht=A==null?bt:A(bt);if(bt=L||bt!==0?bt:0,me&&Ht==Ht){for(var En=mt;En--;)if(g[En]===Ht)continue e;Ve.push(bt)}else re(g,Ht,L)||Ve.push(bt)}return Ve}se.templateSettings={escape:Ie,evaluate:wn,interpolate:nr,variable:"",imports:{_:se}},se.prototype=Gl.prototype,se.prototype.constructor=se,$a.prototype=Ys(Gl.prototype),$a.prototype.constructor=$a,Fr.prototype=Ys(Gl.prototype),Fr.prototype.constructor=Fr,Mi.prototype.clear=function(){this.__data__=Bu?Bu(null):{},this.size=0},Mi.prototype.delete=function(h){var g=this.has(h)&&delete this.__data__[h];return this.size-=g?1:0,g},Mi.prototype.get=function(h){var g=this.__data__;if(Bu){var A=g[h];return A===y?d:A}return dn.call(g,h)?g[h]:d},Mi.prototype.has=function(h){var g=this.__data__;return Bu?g[h]!==d:dn.call(g,h)},Mi.prototype.set=function(h,g){var A=this.__data__;return this.size+=this.has(h)?0:1,A[h]=Bu&&g===d?y:g,this},Hr.prototype.clear=function(){this.__data__=[],this.size=0},Hr.prototype.delete=function(h){var g=this.__data__,A=Uu(g,h);return!(A<0)&&(A==g.length-1?g.pop():Ul.call(g,A,1),--this.size,!0)},Hr.prototype.get=function(h){var g=this.__data__,A=Uu(g,h);return A<0?d:g[A][1]},Hr.prototype.has=function(h){return Uu(this.__data__,h)>-1},Hr.prototype.set=function(h,g){var A=this.__data__,L=Uu(A,h);return L<0?(++this.size,A.push([h,g])):A[L][1]=g,this},Qa.prototype.clear=function(){this.size=0,this.__data__={hash:new Mi,map:new(Vu||Hr),string:new Mi}},Qa.prototype.delete=function(h){var g=Ku(this,h).delete(h);return this.size-=g?1:0,g},Qa.prototype.get=function(h){return Ku(this,h).get(h)},Qa.prototype.has=function(h){return Ku(this,h).has(h)},Qa.prototype.set=function(h,g){var A=Ku(this,h),L=A.size;return A.set(h,g),this.size+=A.size==L?0:1,this},zl.prototype.add=zl.prototype.push=function(h){return this.__data__.set(h,y),this},zl.prototype.has=function(h){return this.__data__.has(h)},Oa.prototype.clear=function(){this.__data__=new Hr,this.size=0},Oa.prototype.delete=function(h){var g=this.__data__,A=g.delete(h);return this.size=g.size,A},Oa.prototype.get=function(h){return this.__data__.get(h)},Oa.prototype.has=function(h){return this.__data__.has(h)},Oa.prototype.set=function(h,g){var A=this.__data__;if(A instanceof Hr){var L=A.__data__;if(!Vu||L.length<199)return L.push([h,g]),this.size=++A.size,this;A=this.__data__=new Qa(L)}return A.set(h,g),this.size=A.size,this};var xo=tu(Ln),_h=tu(yo,!0);function dp(h,g){var A=!0;return xo(h,function(L,Q,re){return A=!!g(L,Q,re)}),A}function Xo(h,g,A){for(var L=-1,Q=h.length;++L<Q;){var re=h[L],me=g(re);if(me!=null&&(Se===d?me==me&&!vt(me):A(me,Se)))var Se=me,Ve=re}return Ve}function Jr(h,g){var A=[];return xo(h,function(L,Q,re){g(L,Q,re)&&A.push(L)}),A}function ai(h,g,A,L,Q){var re=-1,me=h.length;for(A||(A=Jc),Q||(Q=[]);++re<me;){var Se=h[re];g>0&&A(Se)?g>1?ai(Se,g-1,A,L,Q):di(Q,Se):L||(Q[Q.length]=Se)}return Q}var Pr=nu(),mo=nu(!0);function Ln(h,g){return h&&Pr(h,g,It)}function yo(h,g){return h&&mo(h,g,It)}function Uc(h,g){return Bi(g,function(A){return Aa(h[A])})}function Sl(h,g){for(var A=0,L=(g=Kr(g,h)).length;h!=null&&A<L;)h=h[al(g[A++])];return A&&A==L?h:d}function of(h,g,A){var L=g(h);return Er(h)?L:di(L,A(h))}function Ro(h){return h==null?h===d?"[object Undefined]":"[object Null]":Ja&&Ja in R(h)?function(g){var A=dn.call(g,Ja),L=g[Ja];try{g[Ja]=d;var Q=!0}catch{}var re=Ur.call(g);return Q&&(A?g[Ja]=L:delete g[Ja]),re}(h):function(g){return Ur.call(g)}(h)}function Io(h,g){return h>g}function fp(h,g){return h!=null&&dn.call(h,g)}function pp(h,g){return h!=null&&g in R(h)}function Gc(h,g,A){for(var L=A?Pc:Qi,Q=h[0].length,re=h.length,me=re,Se=vn(re),Ve=1/0,mt=[];me--;){var bt=h[me];me&&g&&(bt=zr(bt,_o(g))),Ve=Hi(bt.length,Ve),Se[me]=!A&&(g||Q>=120&&bt.length>=120)?new zl(me&&bt):d}bt=h[0];var Ht=-1,En=Se[0];e:for(;++Ht<Q&&mt.length<Ve;){var Sn=bt[Ht],Yn=g?g(Sn):Sn;if(Sn=A||Sn!==0?Sn:0,!(En?qa(En,Yn):L(mt,Yn,A))){for(me=re;--me;){var Lt=Se[me];if(!(Lt?qa(Lt,Yn):L(h[me],Yn,A)))continue e}En&&En.push(Yn),mt.push(Sn)}}return mt}function Wi(h,g,A){var L=(h=Es(h,g=Kr(g,h)))==null?h:h[al(Mo(g))];return L==null?d:po(L,h,A)}function af(h){return Yo(h)&&Ro(h)==I}function Gu(h,g,A,L,Q){return h===g||(h==null||g==null||!Yo(h)&&!Yo(g)?h!=h&&g!=g:function(re,me,Se,Ve,mt,bt){var Ht=Er(re),En=Er(me),Sn=Ht?F:Lo(re),Yn=En?F:Lo(me),Lt=(Sn=Sn==I?oe:Sn)==oe,nn=(Yn=Yn==I?oe:Yn)==oe,sr=Sn==Yn;if(sr&&oa(re)){if(!oa(me))return!1;Ht=!0,Lt=!1}if(sr&&!Lt)return bt||(bt=new Oa),Ht||et(re)?Yu(re,me,Se,Ve,mt,bt):function(Jn,dr,ki,Ga,Ql,Ni,As){switch(ki){case Qe:if(Jn.byteLength!=dr.byteLength||Jn.byteOffset!=dr.byteOffset)return!1;Jn=Jn.buffer,dr=dr.buffer;case Ot:return!(Jn.byteLength!=dr.byteLength||!Ni(new Bl(Jn),new Bl(dr)));case Z:case G:case ne:return Ua(+Jn,+dr);case W:return Jn.name==dr.name&&Jn.message==dr.message;case Pe:case we:return Jn==dr+"";case q:var hu=oi;case Ee:var Pf=1&Ga;if(hu||(hu=Ea),Jn.size!=dr.size&&!Pf)return!1;var jp=As.get(Jn);if(jp)return jp==dr;Ga|=2,As.set(Jn,dr);var Ts=Yu(hu(Jn),hu(dr),Ga,Ql,Ni,As);return As.delete(Jn),Ts;case Be:if(Li)return Li.call(Jn)==Li.call(dr)}return!1}(re,me,Sn,Se,Ve,mt,bt);if(!(1&Se)){var Pn=Lt&&dn.call(re,"__wrapped__"),Xe=nn&&dn.call(me,"__wrapped__");if(Pn||Xe){var gr=Pn?re.value():re,Gr=Xe?me.value():me;return bt||(bt=new Oa),mt(gr,Gr,Se,Ve,bt)}}return sr?(bt||(bt=new Oa),function(Jn,dr,ki,Ga,Ql,Ni){var As=1&ki,hu=Kc(Jn),Pf=hu.length,jp=Kc(dr).length;if(Pf!=jp&&!As)return!1;for(var Ts=Pf;Ts--;){var ec=hu[Ts];if(!(As?ec in dr:dn.call(dr,ec)))return!1}var rm=Ni.get(Jn),Rf=Ni.get(dr);if(rm&&Rf)return rm==dr&&Rf==Jn;var Ip=!0;Ni.set(Jn,dr),Ni.set(dr,Jn);for(var om=As;++Ts<Pf;){var Lp=Jn[ec=hu[Ts]],vd=dr[ec];if(Ga)var md=As?Ga(vd,Lp,ec,dr,Jn,Ni):Ga(Lp,vd,ec,Jn,dr,Ni);if(!(md===d?Lp===vd||Ql(Lp,vd,ki,Ga,Ni):md)){Ip=!1;break}om||(om=ec=="constructor")}if(Ip&&!om){var vu=Jn.constructor,$p=dr.constructor;vu==$p||!("constructor"in Jn)||!("constructor"in dr)||typeof vu=="function"&&vu instanceof vu&&typeof $p=="function"&&$p instanceof $p||(Ip=!1)}return Ni.delete(Jn),Ni.delete(dr),Ip}(re,me,Se,Ve,mt,bt)):!1}(h,g,A,L,Gu,Q))}function Fa(h,g,A,L){var Q=A.length,re=Q,me=!L;if(h==null)return!re;for(h=R(h);Q--;){var Se=A[Q];if(me&&Se[2]?Se[1]!==h[Se[0]]:!(Se[0]in h))return!1}for(;++Q<re;){var Ve=(Se=A[Q])[0],mt=h[Ve],bt=Se[1];if(me&&Se[2]){if(mt===d&&!(Ve in h))return!1}else{var Ht=new Oa;if(L)var En=L(mt,bt,Ve,h,g,Ht);if(!(En===d?Gu(bt,mt,3,L,Ht):En))return!1}}return!0}function ys(h){return!(!Fo(h)||(g=h,wr&&wr in g))&&(Aa(h)?na:Zo).test(Os(h));var g}function Xl(h){return typeof h=="function"?h:h==null?tr:typeof h=="object"?Er(h)?vp(h[0],h[1]):hp(h):ve(h)}function Va(h){if(!Pt(h))return Jd(h);var g=[];for(var A in R(h))dn.call(h,A)&&A!="constructor"&&g.push(A);return g}function bh(h){if(!Fo(h))return function(Q){var re=[];if(Q!=null)for(var me in R(Q))re.push(me);return re}(h);var g=Pt(h),A=[];for(var L in h)(L!="constructor"||!g&&dn.call(h,L))&&A.push(L);return A}function xl(h,g){return h<g}function xa(h,g){var A=-1,L=fa(h)?vn(h.length):[];return xo(h,function(Q,re,me){L[++A]=g(Q,re,me)}),L}function hp(h){var g=Zc(h);return g.length==1&&g[0][2]?Qc(g[0][0],g[0][1]):function(A){return A===h||Fa(A,h,g)}}function vp(h,g){return Al(h)&&iu(g)?Qc(al(h),g):function(A){var L=Xt(A,h);return L===d&&L===g?At(A,h):Gu(g,L,3)}}function lf(h,g,A,L,Q){h!==g&&Pr(g,function(re,me){if(Q||(Q=new Oa),Fo(re))(function(Ve,mt,bt,Ht,En,Sn,Yn){var Lt=Of(Ve,bt),nn=Of(mt,bt),sr=Yn.get(nn);if(sr)return void Hl(Ve,bt,sr);var Pn=Sn?Sn(Lt,nn,bt+"",Ve,mt,Yn):d,Xe=Pn===d;if(Xe){var gr=Er(nn),Gr=!gr&&oa(nn),Jn=!gr&&!Gr&&et(nn);Pn=nn,gr||Gr||Jn?Er(Lt)?Pn=Lt:Do(Lt)?Pn=_i(Lt):Gr?(Xe=!1,Pn=Mh(nn,!0)):Jn?(Xe=!1,Pn=Ah(nn,!0)):Pn=[]:z(nn)||fu(nn)?(Pn=Lt,fu(Lt)?Pn=jt(Lt):Fo(Lt)&&!Aa(Lt)||(Pn=ra(nn))):Xe=!1}Xe&&(Yn.set(nn,Pn),En(Pn,nn,Ht,Sn,Yn),Yn.delete(nn)),Hl(Ve,bt,Pn)})(h,g,me,A,lf,L,Q);else{var Se=L?L(Of(h,me),re,me+"",h,g,Q):d;Se===d&&(Se=re),Hl(h,me,Se)}},Nt)}function wh(h,g){var A=h.length;if(A)return $i(g+=g<0?A:0,A)?h[g]:d}function Eh(h,g,A){g=g.length?zr(g,function(re){return Er(re)?function(me){return Sl(me,re.length===1?re[0]:re)}:re}):[tr];var L=-1;g=zr(g,_o(or()));var Q=xa(h,function(re,me,Se){var Ve=zr(g,function(mt){return mt(re)});return{criteria:Ve,index:++L,value:re}});return function(re,me){var Se=re.length;for(re.sort(me);Se--;)re[Se]=re[Se].value;return re}(Q,function(re,me){return function(Se,Ve,mt){for(var bt=-1,Ht=Se.criteria,En=Ve.criteria,Sn=Ht.length,Yn=mt.length;++bt<Sn;){var Lt=zu(Ht[bt],En[bt]);if(Lt)return bt>=Yn?Lt:Lt*(mt[bt]=="desc"?-1:1)}return Se.index-Ve.index}(re,me,A)})}function Oh(h,g,A){for(var L=-1,Q=g.length,re={};++L<Q;){var me=g[L],Se=Sl(h,me);A(Se,me)&&Ks(re,Kr(me,h),Se)}return re}function sf(h,g,A,L){var Q=L?ea:cs,re=-1,me=g.length,Se=h;for(h===g&&(g=_i(g)),A&&(Se=zr(h,_o(A)));++re<me;)for(var Ve=0,mt=g[re],bt=A?A(mt):mt;(Ve=Q(Se,bt,Ve,L))>-1;)Se!==h&&Ul.call(Se,Ve,1),Ul.call(h,Ve,1);return h}function mp(h,g){for(var A=h?g.length:0,L=A-1;A--;){var Q=g[A];if(A==L||Q!==re){var re=Q;$i(Q)?Ul.call(h,Q,1):cf(h,Q)}}return h}function yp(h,g){return h+Ws($u()*(g-h+1))}function zc(h,g){var A="";if(!h||g<1||g>j)return A;do g%2&&(A+=h),(g=Ws(g/2))&&(h+=h);while(g);return A}function Cr(h,g){return td(ed(h,g,tr),h+"")}function Zv(h){return rf(Or(h))}function gp(h,g){var A=Or(h);return kl(A,ms(g,0,A.length))}function Ks(h,g,A,L){if(!Fo(h))return h;for(var Q=-1,re=(g=Kr(g,h)).length,me=re-1,Se=h;Se!=null&&++Q<re;){var Ve=al(g[Q]),mt=A;if(Ve==="__proto__"||Ve==="constructor"||Ve==="prototype")return h;if(Q!=me){var bt=Se[Ve];(mt=L?L(bt,Ve,Se):d)===d&&(mt=Fo(bt)?bt:$i(g[Q+1])?[]:{})}Wo(Se,Ve,mt),Se=Se[Ve]}return h}var Hc=Fc?function(h,g){return Fc.set(h,g),h}:tr,Jv=Hs?function(h,g){return Hs(h,"toString",{configurable:!0,enumerable:!1,value:Dr(g),writable:!0})}:tr;function Sh(h){return kl(Or(h))}function Ma(h,g,A){var L=-1,Q=h.length;g<0&&(g=-g>Q?0:Q+g),(A=A>Q?Q:A)<0&&(A+=Q),Q=g>A?0:A-g>>>0,g>>>=0;for(var re=vn(Q);++L<Q;)re[L]=h[L+g];return re}function Qv(h,g){var A;return xo(h,function(L,Q,re){return!(A=g(L,Q,re))}),!!A}function Wc(h,g,A){var L=0,Q=h==null?L:h.length;if(typeof g=="number"&&g==g&&Q<=2147483647){for(;L<Q;){var re=L+Q>>>1,me=h[re];me!==null&&!vt(me)&&(A?me<=g:me<g)?L=re+1:Q=re}return Q}return uf(h,g,tr,A)}function uf(h,g,A,L){var Q=0,re=h==null?0:h.length;if(re===0)return 0;for(var me=(g=A(g))!=g,Se=g===null,Ve=vt(g),mt=g===d;Q<re;){var bt=Ws((Q+re)/2),Ht=A(h[bt]),En=Ht!==d,Sn=Ht===null,Yn=Ht==Ht,Lt=vt(Ht);if(me)var nn=L||Yn;else nn=mt?Yn&&(L||En):Se?Yn&&En&&(L||!Sn):Ve?Yn&&En&&!Sn&&(L||!Lt):!Sn&&!Lt&&(L?Ht<=g:Ht<g);nn?Q=bt+1:re=bt}return Hi(re,4294967294)}function _p(h,g){for(var A=-1,L=h.length,Q=0,re=[];++A<L;){var me=h[A],Se=g?g(me):me;if(!A||!Ua(Se,Ve)){var Ve=Se;re[Q++]=me===0?0:me}}return re}function xh(h){return typeof h=="number"?h:vt(h)?B:+h}function ca(h){if(typeof h=="string")return h;if(Er(h))return zr(h,ca)+"";if(vt(h))return yh?yh.call(h):"";var g=h+"";return g=="0"&&1/h==-1/0?"-0":g}function gs(h,g,A){var L=-1,Q=Qi,re=h.length,me=!0,Se=[],Ve=Se;if(A)me=!1,Q=Pc;else if(re>=200){var mt=g?null:kh(h);if(mt)return Ea(mt);me=!1,Q=qa,Ve=new zl}else Ve=g?[]:Se;e:for(;++L<re;){var bt=h[L],Ht=g?g(bt):bt;if(bt=A||bt!==0?bt:0,me&&Ht==Ht){for(var En=Ve.length;En--;)if(Ve[En]===Ht)continue e;g&&Ve.push(Ht),Se.push(bt)}else Q(Ve,Ht,A)||(Ve!==Se&&Ve.push(Ht),Se.push(bt))}return Se}function cf(h,g){return(h=Es(h,g=Kr(g,h)))==null||delete h[al(Mo(g))]}function Zs(h,g,A,L){return Ks(h,g,A(Sl(h,g)),L)}function df(h,g,A,L){for(var Q=h.length,re=L?Q:-1;(L?re--:++re<Q)&&g(h[re],re,h););return A?Ma(h,L?0:re,L?re+1:Q):Ma(h,L?re+1:0,L?Q:re)}function bp(h,g){var A=h;return A instanceof Fr&&(A=A.value()),ju(g,function(L,Q){return Q.func.apply(Q.thisArg,di([L],Q.args))},A)}function ff(h,g,A){var L=h.length;if(L<2)return L?gs(h[0]):[];for(var Q=-1,re=vn(L);++Q<L;)for(var me=h[Q],Se=-1;++Se<L;)Se!=Q&&(re[Q]=tl(re[Q]||me,h[Se],g,A));return gs(ai(re,1),g,A)}function Xc(h,g,A){for(var L=-1,Q=h.length,re=g.length,me={};++L<Q;){var Se=L<re?g[L]:d;A(me,h[L],Se)}return me}function pf(h){return Do(h)?h:[]}function hf(h){return typeof h=="function"?h:tr}function Kr(h,g){return Er(h)?h:Al(h,g)?[h]:Tp(Et(h))}var em=Cr;function io(h,g,A){var L=h.length;return A=A===d?L:A,!g&&A>=L?h:Ma(h,g,A)}var vf=ph||function(h){return zo.clearTimeout(h)};function Mh(h,g){if(g)return h.slice();var A=h.length,L=fs?fs(A):new h.constructor(A);return h.copy(L),L}function Js(h){var g=new h.constructor(h.byteLength);return new Bl(g).set(new Bl(h)),g}function Ah(h,g){var A=g?Js(h.buffer):h.buffer;return new h.constructor(A,h.byteOffset,h.length)}function zu(h,g){if(h!==g){var A=h!==d,L=h===null,Q=h==h,re=vt(h),me=g!==d,Se=g===null,Ve=g==g,mt=vt(g);if(!Se&&!mt&&!re&&h>g||re&&me&&Ve&&!Se&&!mt||L&&me&&Ve||!A&&Ve||!Q)return 1;if(!L&&!re&&!mt&&h<g||mt&&A&&Q&&!L&&!re||Se&&A&&Q||!me&&Q||!Ve)return-1}return 0}function Th(h,g,A,L){for(var Q=-1,re=h.length,me=A.length,Se=-1,Ve=g.length,mt=Ho(re-me,0),bt=vn(Ve+mt),Ht=!L;++Se<Ve;)bt[Se]=g[Se];for(;++Q<me;)(Ht||Q<re)&&(bt[A[Q]]=h[Q]);for(;mt--;)bt[Se++]=h[Q++];return bt}function Qs(h,g,A,L){for(var Q=-1,re=h.length,me=-1,Se=A.length,Ve=-1,mt=g.length,bt=Ho(re-Se,0),Ht=vn(bt+mt),En=!L;++Q<bt;)Ht[Q]=h[Q];for(var Sn=Q;++Ve<mt;)Ht[Sn+Ve]=g[Ve];for(;++me<Se;)(En||Q<re)&&(Ht[Sn+A[me]]=h[Q++]);return Ht}function _i(h,g){var A=-1,L=h.length;for(g||(g=vn(L));++A<L;)g[A]=h[A];return g}function nl(h,g,A,L){var Q=!A;A||(A={});for(var re=-1,me=g.length;++re<me;){var Se=g[re],Ve=L?L(A[Se],h[Se],Se,A,h):d;Ve===d&&(Ve=h[Se]),Q?el(A,Se,Ve):Wo(A,Se,Ve)}return A}function ql(h,g){return function(A,L){var Q=Er(A)?op:sp,re=g?g():{};return Q(A,h,or(L,2),re)}}function eu(h){return Cr(function(g,A){var L=-1,Q=A.length,re=Q>1?A[Q-1]:d,me=Q>2?A[2]:d;for(re=h.length>3&&typeof re=="function"?(Q--,re):d,me&&qo(A[0],A[1],me)&&(re=Q<3?d:re,Q=1),g=R(g);++L<Q;){var Se=A[L];Se&&h(g,Se,L,re)}return g})}function tu(h,g){return function(A,L){if(A==null)return A;if(!fa(A))return h(A,L);for(var Q=A.length,re=g?Q:-1,me=R(A);(g?re--:++re<Q)&&L(me[re],re,me)!==!1;);return A}}function nu(h){return function(g,A,L){for(var Q=-1,re=R(g),me=L(g),Se=me.length;Se--;){var Ve=me[h?Se:++Q];if(A(re[Ve],Ve,re)===!1)break}return g}}function mf(h){return function(g){var A=Ya(g=Et(g))?ta(g):d,L=A?A[0]:g.charAt(0),Q=A?io(A,1).join(""):g.slice(1);return L[h]()+Q}}function Yl(h){return function(g){return ju(wo(ar(g).replace(Gd,"")),h,"")}}function ru(h){return function(){var g=arguments;switch(g.length){case 0:return new h;case 1:return new h(g[0]);case 2:return new h(g[0],g[1]);case 3:return new h(g[0],g[1],g[2]);case 4:return new h(g[0],g[1],g[2],g[3]);case 5:return new h(g[0],g[1],g[2],g[3],g[4]);case 6:return new h(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new h(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var A=Ys(h.prototype),L=h.apply(A,g);return Fo(L)?L:A}}function yf(h){return function(g,A,L){var Q=R(g);if(!fa(g)){var re=or(A,3);g=It(g),A=function(Se){return re(Q[Se],Se,Q)}}var me=h(g,A,L);return me>-1?Q[re?g[me]:me]:d}}function rl(h){return Ml(function(g){var A=g.length,L=A,Q=$a.prototype.thru;for(h&&g.reverse();L--;){var re=g[L];if(typeof re!="function")throw new be(_);if(Q&&!me&&_s(re)=="wrapper")var me=new $a([],!0)}for(L=me?L:A;++L<A;){var Se=_s(re=g[L]),Ve=Se=="wrapper"?wf(re):d;me=Ve&&Tl(Ve[0])&&Ve[1]==424&&!Ve[4].length&&Ve[9]==1?me[_s(Ve[0])].apply(me,Ve[3]):re.length==1&&Tl(re)?me[Se]():me.thru(re)}return function(){var mt=arguments,bt=mt[0];if(me&&mt.length==1&&Er(bt))return me.plant(bt).value();for(var Ht=0,En=A?g[Ht].apply(this,mt):bt;++Ht<A;)En=g[Ht].call(this,En);return En}})}function qc(h,g,A,L,Q,re,me,Se,Ve,mt){var bt=g&E,Ht=1&g,En=2&g,Sn=24&g,Yn=512&g,Lt=En?d:ru(h);return function nn(){for(var sr=arguments.length,Pn=vn(sr),Xe=sr;Xe--;)Pn[Xe]=arguments[Xe];if(Sn)var gr=bs(nn),Gr=ip(Pn,gr);if(L&&(Pn=Th(Pn,L,Q,Sn)),re&&(Pn=Qs(Pn,re,me,Sn)),sr-=Gr,Sn&&sr<mt){var Jn=la(Pn,gr);return wp(h,g,qc,nn.placeholder,A,Pn,Jn,Se,Ve,mt-sr)}var dr=Ht?A:this,ki=En?dr[h]:h;return sr=Pn.length,Se?Pn=au(Pn,Se):Yn&&sr>1&&Pn.reverse(),bt&&Ve<sr&&(Pn.length=Ve),this&&this!==zo&&this instanceof nn&&(ki=Lt||ru(ki)),ki.apply(dr,Pn)}}function Yc(h,g){return function(A,L){return function(Q,re,me,Se){return Ln(Q,function(Ve,mt,bt){re(Se,me(Ve),mt,bt)}),Se}(A,h,g(L),{})}}function Hu(h,g){return function(A,L){var Q;if(A===d&&L===d)return g;if(A!==d&&(Q=A),L!==d){if(Q===d)return L;typeof A=="string"||typeof L=="string"?(A=ca(A),L=ca(L)):(A=xh(A),L=xh(L)),Q=h(A,L)}return Q}}function Wu(h){return Ml(function(g){return g=zr(g,_o(or())),Cr(function(A){var L=this;return h(g,function(Q){return po(Q,L,A)})})})}function Xu(h,g){var A=(g=g===d?" ":ca(g)).length;if(A<2)return A?zc(g,h):g;var L=zc(g,Ic(h/zi(g)));return Ya(g)?io(ta(L),0,h).join(""):L.slice(0,h)}function gf(h){return function(g,A,L){return L&&typeof L!="number"&&qo(g,A,L)&&(A=L=d),g=Dt(g),A===d?(A=g,g=0):A=Dt(A),function(Q,re,me,Se){for(var Ve=-1,mt=Ho(Ic((re-Q)/(me||1)),0),bt=vn(mt);mt--;)bt[Se?mt:++Ve]=Q,Q+=me;return bt}(g,A,L=L===d?g<A?1:-1:Dt(L),h)}}function qu(h){return function(g,A){return typeof g=="string"&&typeof A=="string"||(g=Gt(g),A=Gt(A)),h(g,A)}}function wp(h,g,A,L,Q,re,me,Se,Ve,mt){var bt=8&g;g|=bt?M:S,4&(g&=~(bt?S:M))||(g&=-4);var Ht=[h,g,Q,bt?re:d,bt?me:d,bt?d:re,bt?d:me,Se,Ve,mt],En=A.apply(d,Ht);return Tl(h)&&Mp(En,Ht),En.placeholder=L,Sf(En,h,g)}function _f(h){var g=P[h];return function(A,L){if(A=Gt(A),(L=L==null?0:Hi(ct(L),292))&&Xs(A)){var Q=(Et(A)+"e").split("e");return+((Q=(Et(g(Q[0]+"e"+(+Q[1]+L)))+"e").split("e"))[0]+"e"+(+Q[1]-L))}return g(A)}}var kh=qs&&1/Ea(new qs([,-0]))[1]==C?function(h){return new qs(h)}:ot;function Ep(h){return function(g){var A=Lo(g);return A==q?oi(g):A==Ee?Lu(g):function(L,Q){return zr(Q,function(re){return[re,L[re]]})}(g,h(g))}}function ol(h,g,A,L,Q,re,me,Se){var Ve=2&g;if(!Ve&&typeof h!="function")throw new be(_);var mt=L?L.length:0;if(mt||(g&=-97,L=Q=d),me=me===d?me:Ho(ct(me),0),Se=Se===d?Se:ct(Se),mt-=Q?Q.length:0,g&S){var bt=L,Ht=Q;L=Q=d}var En=Ve?d:wf(h),Sn=[h,g,A,L,Q,bt,Ht,re,me,Se];if(En&&function(Lt,nn){var sr=Lt[1],Pn=nn[1],Xe=sr|Pn,gr=Xe<131,Gr=Pn==E&&sr==8||Pn==E&&sr==w&&Lt[7].length<=nn[8]||Pn==384&&nn[7].length<=nn[8]&&sr==8;if(!gr&&!Gr)return Lt;1&Pn&&(Lt[2]=nn[2],Xe|=1&sr?0:4);var Jn=nn[3];if(Jn){var dr=Lt[3];Lt[3]=dr?Th(dr,Jn,nn[4]):Jn,Lt[4]=dr?la(Lt[3],b):nn[4]}(Jn=nn[5])&&(dr=Lt[5],Lt[5]=dr?Qs(dr,Jn,nn[6]):Jn,Lt[6]=dr?la(Lt[5],b):nn[6]),(Jn=nn[7])&&(Lt[7]=Jn),Pn&E&&(Lt[8]=Lt[8]==null?nn[8]:Hi(Lt[8],nn[8])),Lt[9]==null&&(Lt[9]=nn[9]),Lt[0]=nn[0],Lt[1]=Xe}(Sn,En),h=Sn[0],g=Sn[1],A=Sn[2],L=Sn[3],Q=Sn[4],!(Se=Sn[9]=Sn[9]===d?Ve?0:h.length:Ho(Sn[9]-mt,0))&&24&g&&(g&=-25),g&&g!=1)Yn=g==8||g==x?function(Lt,nn,sr){var Pn=ru(Lt);return function Xe(){for(var gr=arguments.length,Gr=vn(gr),Jn=gr,dr=bs(Xe);Jn--;)Gr[Jn]=arguments[Jn];var ki=gr<3&&Gr[0]!==dr&&Gr[gr-1]!==dr?[]:la(Gr,dr);return(gr-=ki.length)<sr?wp(Lt,nn,qc,Xe.placeholder,d,Gr,ki,d,d,sr-gr):po(this&&this!==zo&&this instanceof Xe?Pn:Lt,this,Gr)}}(h,g,Se):g!=M&&g!=33||Q.length?qc.apply(d,Sn):function(Lt,nn,sr,Pn){var Xe=1&nn,gr=ru(Lt);return function Gr(){for(var Jn=-1,dr=arguments.length,ki=-1,Ga=Pn.length,Ql=vn(Ga+dr),Ni=this&&this!==zo&&this instanceof Gr?gr:Lt;++ki<Ga;)Ql[ki]=Pn[ki];for(;dr--;)Ql[ki++]=arguments[++Jn];return po(Ni,Xe?sr:this,Ql)}}(h,g,A,L);else var Yn=function(Lt,nn,sr){var Pn=1&nn,Xe=ru(Lt);return function gr(){return(this&&this!==zo&&this instanceof gr?Xe:Lt).apply(Pn?sr:this,arguments)}}(h,g,A);return Sf((En?Hc:Mp)(Yn,Sn),h,g)}function Op(h,g,A,L){return h===d||Ua(h,qt[A])&&!dn.call(L,A)?g:h}function Sp(h,g,A,L,Q,re){return Fo(h)&&Fo(g)&&(re.set(g,h),lf(h,g,d,Sp,re),re.delete(g)),h}function xp(h){return z(h)?d:h}function Yu(h,g,A,L,Q,re){var me=1&A,Se=h.length,Ve=g.length;if(Se!=Ve&&!(me&&Ve>Se))return!1;var mt=re.get(h),bt=re.get(g);if(mt&&bt)return mt==g&&bt==h;var Ht=-1,En=!0,Sn=2&A?new zl:d;for(re.set(h,g),re.set(g,h);++Ht<Se;){var Yn=h[Ht],Lt=g[Ht];if(L)var nn=me?L(Lt,Yn,Ht,g,h,re):L(Yn,Lt,Ht,h,g,re);if(nn!==d){if(nn)continue;En=!1;break}if(Sn){if(!Rc(g,function(sr,Pn){if(!qa(Sn,Pn)&&(Yn===sr||Q(Yn,sr,A,L,re)))return Sn.push(Pn)})){En=!1;break}}else if(Yn!==Lt&&!Q(Yn,Lt,A,L,re)){En=!1;break}}return re.delete(h),re.delete(g),En}function Ml(h){return td(ed(h,d,nd),h+"")}function Kc(h){return of(h,It,pi)}function bf(h){return of(h,Nt,ou)}var wf=Fc?function(h){return Fc.get(h)}:ot;function _s(h){for(var g=h.name+"",A=vs[g],L=dn.call(vs,g)?A.length:0;L--;){var Q=A[L],re=Q.func;if(re==null||re==h)return Q.name}return g}function bs(h){return(dn.call(se,"placeholder")?se:h).placeholder}function or(){var h=se.iteratee||Eo;return h=h===Eo?Xl:h,arguments.length?h(arguments[0],arguments[1]):h}function Ku(h,g){var A,L,Q=h.__data__;return((L=typeof(A=g))=="string"||L=="number"||L=="symbol"||L=="boolean"?A!=="__proto__":A===null)?Q[typeof g=="string"?"string":"hash"]:Q.map}function Zc(h){for(var g=It(h),A=g.length;A--;){var L=g[A],Q=h[L];g[A]=[L,Q,iu(Q)]}return g}function il(h,g){var A=function(L,Q){return L==null?d:L[Q]}(h,g);return ys(A)?A:d}var pi=Zd?function(h){return h==null?[]:(h=R(h),Bi(Zd(h),function(g){return ii.call(h,g)}))}:ze,ou=Zd?function(h){for(var g=[];h;)di(g,pi(h)),h=Ka(h);return g}:ze,Lo=Ro;function ws(h,g,A){for(var L=-1,Q=(g=Kr(g,h)).length,re=!1;++L<Q;){var me=al(g[L]);if(!(re=h!=null&&A(h,me)))break;h=h[me]}return re||++L!=Q?re:!!(Q=h==null?0:h.length)&&hd(Q)&&$i(me,Q)&&(Er(h)||fu(h))}function ra(h){return typeof h.constructor!="function"||Pt(h)?{}:Ys(Ka(h))}function Jc(h){return Er(h)||fu(h)||!!(Ol&&h&&h[Ol])}function $i(h,g){var A=typeof h;return!!(g=g??j)&&(A=="number"||A!="symbol"&&Nn.test(h))&&h>-1&&h%1==0&&h<g}function qo(h,g,A){if(!Fo(A))return!1;var L=typeof g;return!!(L=="number"?fa(A)&&$i(g,A.length):L=="string"&&g in A)&&Ua(A[g],h)}function Al(h,g){if(Er(h))return!1;var A=typeof h;return!(A!="number"&&A!="symbol"&&A!="boolean"&&h!=null&&!vt(h))||rr.test(h)||!le.test(h)||g!=null&&h in R(g)}function Tl(h){var g=_s(h),A=se[g];if(typeof A!="function"||!(g in Fr.prototype))return!1;if(h===A)return!0;var L=wf(A);return!!L&&h===L[0]}(Fu&&Lo(new Fu(new ArrayBuffer(1)))!=Qe||Vu&&Lo(new Vu)!=q||$c&&Lo($c.resolve())!=Me||qs&&Lo(new qs)!=Ee||hs&&Lo(new hs)!=nt)&&(Lo=function(h){var g=Ro(h),A=g==oe?h.constructor:d,L=A?Os(A):"";if(L)switch(L){case qv:return Qe;case Vc:return q;case Yv:return Me;case Kv:return Ee;case mh:return nt}return g});var Ef=On?Aa:Ze;function Pt(h){var g=h&&h.constructor;return h===(typeof g=="function"&&g.prototype||qt)}function iu(h){return h==h&&!Fo(h)}function Qc(h,g){return function(A){return A!=null&&A[h]===g&&(g!==d||h in R(A))}}function ed(h,g,A){return g=Ho(g===d?h.length-1:g,0),function(){for(var L=arguments,Q=-1,re=Ho(L.length-g,0),me=vn(re);++Q<re;)me[Q]=L[g+Q];Q=-1;for(var Se=vn(g+1);++Q<g;)Se[Q]=L[Q];return Se[g]=A(me),po(h,this,Se)}}function Es(h,g){return g.length<2?h:Sl(h,Ma(g,0,-1))}function au(h,g){for(var A=h.length,L=Hi(g.length,A),Q=_i(h);L--;){var re=g[L];h[L]=$i(re,A)?Q[re]:d}return h}function Of(h,g){if((g!=="constructor"||typeof h[g]!="function")&&g!="__proto__")return h[g]}var Mp=Ap(Hc),lu=ap||function(h,g){return zo.setTimeout(h,g)},td=Ap(Jv);function Sf(h,g,A){var L=g+"";return td(h,function(Q,re){var me=re.length;if(!me)return Q;var Se=me-1;return re[Se]=(me>1?"& ":"")+re[Se],re=re.join(me>2?", ":" "),Q.replace(xe,`{
/* [wrapped with `+re+`] */
`)}(L,function(Q,re){return Vi(U,function(me){var Se="_."+me[0];re&me[1]&&!Qi(Q,Se)&&Q.push(Se)}),Q.sort()}(function(Q){var re=Q.match(Ye);return re?re[1].split(Le):[]}(L),A)))}function Ap(h){var g=0,A=0;return function(){var L=Qd(),Q=16-(L-A);if(A=L,Q>0){if(++g>=800)return arguments[0]}else g=0;return h.apply(d,arguments)}}function kl(h,g){var A=-1,L=h.length,Q=L-1;for(g=g===d?L:g;++A<g;){var re=yp(A,Q),me=h[re];h[re]=h[A],h[A]=me}return h.length=g,h}var Tp=function(h){var g=Jl(h,function(L){return A.size===500&&A.clear(),L}),A=g.cache;return g}(function(h){var g=[];return h.charCodeAt(0)===46&&g.push(""),h.replace(Rr,function(A,L,Q,re){g.push(Q?re.replace(en,"$1"):L||A)}),g});function al(h){if(typeof h=="string"||vt(h))return h;var g=h+"";return g=="0"&&1/h==-1/0?"-0":g}function Os(h){if(h!=null){try{return xr.call(h)}catch{}try{return h+""}catch{}}return""}function xf(h){if(h instanceof Fr)return h.clone();var g=new $a(h.__wrapped__,h.__chain__);return g.__actions__=_i(h.__actions__),g.__index__=h.__index__,g.__values__=h.__values__,g}var Nh=Cr(function(h,g){return Do(h)?tl(h,ai(g,1,Do,!0)):[]}),Ph=Cr(function(h,g){var A=Mo(g);return Do(A)&&(A=d),Do(h)?tl(h,ai(g,1,Do,!0),or(A,2)):[]}),Rh=Cr(function(h,g){var A=Mo(g);return Do(A)&&(A=d),Do(h)?tl(h,ai(g,1,Do,!0),d,A):[]});function kp(h,g,A){var L=h==null?0:h.length;if(!L)return-1;var Q=A==null?0:ct(A);return Q<0&&(Q=Ho(L+Q,0)),Ui(h,or(g,3),Q)}function Mf(h,g,A){var L=h==null?0:h.length;if(!L)return-1;var Q=L-1;return A!==d&&(Q=ct(A),Q=A<0?Ho(L+Q,0):Hi(Q,L-1)),Ui(h,or(g,3),Q,!0)}function nd(h){return h!=null&&h.length?ai(h,1):[]}function Ch(h){return h&&h.length?h[0]:d}var ll=Cr(function(h){var g=zr(h,pf);return g.length&&g[0]===h[0]?Gc(g):[]}),Ss=Cr(function(h){var g=Mo(h),A=zr(h,pf);return g===Mo(A)?g=d:A.pop(),A.length&&A[0]===h[0]?Gc(A,or(g,2)):[]}),tm=Cr(function(h){var g=Mo(h),A=zr(h,pf);return(g=typeof g=="function"?g:d)&&A.pop(),A.length&&A[0]===h[0]?Gc(A,d,g):[]});function Mo(h){var g=h==null?0:h.length;return g?h[g-1]:d}var rd=Cr(su);function su(h,g){return h&&h.length&&g&&g.length?sf(h,g):h}var od=Ml(function(h,g){var A=h==null?0:h.length,L=Bc(h,g);return mp(h,zr(g,function(Q){return $i(Q,A)?+Q:Q}).sort(zu)),L});function Zu(h){return h==null?h:Xv.call(h)}var id=Cr(function(h){return gs(ai(h,1,Do,!0))}),ad=Cr(function(h){var g=Mo(h);return Do(g)&&(g=d),gs(ai(h,1,Do,!0),or(g,2))}),ld=Cr(function(h){var g=Mo(h);return g=typeof g=="function"?g:d,gs(ai(h,1,Do,!0),d,g)});function uu(h){if(!h||!h.length)return[];var g=0;return h=Bi(h,function(A){if(Do(A))return g=Ho(A.length,g),!0}),Vl(g,function(A){return zr(h,Gi(A))})}function Kl(h,g){if(!h||!h.length)return[];var A=uu(h);return g==null?A:zr(A,function(L){return po(g,d,L)})}var bi=Cr(function(h,g){return Do(h)?tl(h,g):[]}),Af=Cr(function(h){return ff(Bi(h,Do))}),sd=Cr(function(h){var g=Mo(h);return Do(g)&&(g=d),ff(Bi(h,Do),or(g,2))}),cu=Cr(function(h){var g=Mo(h);return g=typeof g=="function"?g:d,ff(Bi(h,Do),d,g)}),Ju=Cr(uu),Ai=Cr(function(h){var g=h.length,A=g>1?h[g-1]:d;return A=typeof A=="function"?(h.pop(),A):d,Kl(h,A)});function Co(h){var g=se(h);return g.__chain__=!0,g}function ud(h,g){return g(h)}var Xi=Ml(function(h){var g=h.length,A=g?h[0]:0,L=this.__wrapped__,Q=function(re){return Bc(re,h)};return!(g>1||this.__actions__.length)&&L instanceof Fr&&$i(A)?((L=L.slice(A,+A+(g?1:0))).__actions__.push({func:ud,args:[Q],thisArg:d}),new $a(L,this.__chain__).thru(function(re){return g&&!re.length&&re.push(d),re})):this.thru(Q)}),Hn=ql(function(h,g,A){dn.call(h,A)?++h[A]:el(h,A,1)}),Tf=yf(kp),cd=yf(Mf);function kf(h,g){return(Er(h)?Vi:xo)(h,or(g,3))}function Np(h,g){return(Er(h)?qd:_h)(h,or(g,3))}var Dh=ql(function(h,g,A){dn.call(h,A)?h[A].push(g):el(h,A,[g])}),xs=Cr(function(h,g,A){var L=-1,Q=typeof g=="function",re=fa(h)?vn(h.length):[];return xo(h,function(me){re[++L]=Q?po(g,me,A):Wi(me,g,A)}),re}),jh=ql(function(h,g,A){el(h,A,g)});function du(h,g){return(Er(h)?zr:xa)(h,or(g,3))}var Ih=ql(function(h,g,A){h[A?0:1].push(g)},function(){return[[],[]]}),Pp=Cr(function(h,g){if(h==null)return[];var A=g.length;return A>1&&qo(h,g[0],g[1])?g=[]:A>2&&qo(g[0],g[1],g[2])&&(g=[g[0]]),Eh(h,ai(g,1),[])}),dd=hh||function(){return zo.Date.now()};function Lh(h,g,A){return g=A?d:g,g=h&&g==null?h.length:g,ol(h,E,d,d,d,d,g)}function Ba(h,g){var A;if(typeof g!="function")throw new be(_);return h=ct(h),function(){return--h>0&&(A=g.apply(this,arguments)),h<=1&&(g=d),A}}var Zl=Cr(function(h,g,A){var L=1;if(A.length){var Q=la(A,bs(Zl));L|=M}return ol(h,L,g,A,Q)}),Ms=Cr(function(h,g,A){var L=3;if(A.length){var Q=la(A,bs(Ms));L|=M}return ol(g,L,h,A,Q)});function Wn(h,g,A){var L,Q,re,me,Se,Ve,mt=0,bt=!1,Ht=!1,En=!0;if(typeof h!="function")throw new be(_);function Sn(Xe){var gr=L,Gr=Q;return L=Q=d,mt=Xe,me=h.apply(Gr,gr)}function Yn(Xe){return mt=Xe,Se=lu(nn,g),bt?Sn(Xe):me}function Lt(Xe){var gr=Xe-Ve;return Ve===d||gr>=g||gr<0||Ht&&Xe-mt>=re}function nn(){var Xe=dd();if(Lt(Xe))return sr(Xe);Se=lu(nn,function(gr){var Gr=g-(gr-Ve);return Ht?Hi(Gr,re-(gr-mt)):Gr}(Xe))}function sr(Xe){return Se=d,En&&L?Sn(Xe):(L=Q=d,me)}function Pn(){var Xe=dd(),gr=Lt(Xe);if(L=arguments,Q=this,Ve=Xe,gr){if(Se===d)return Yn(Ve);if(Ht)return vf(Se),Se=lu(nn,g),Sn(Ve)}return Se===d&&(Se=lu(nn,g)),me}return g=Gt(g)||0,Fo(A)&&(bt=!!A.leading,re=(Ht="maxWait"in A)?Ho(Gt(A.maxWait)||0,g):re,En="trailing"in A?!!A.trailing:En),Pn.cancel=function(){Se!==d&&vf(Se),mt=0,L=Ve=Q=Se=d},Pn.flush=function(){return Se===d?me:sr(dd())},Pn}var Rp=Cr(function(h,g){return cp(h,1,g)}),Qu=Cr(function(h,g,A){return cp(h,Gt(g)||0,A)});function Jl(h,g){if(typeof h!="function"||g!=null&&typeof g!="function")throw new be(_);var A=function(){var L=arguments,Q=g?g.apply(this,L):L[0],re=A.cache;if(re.has(Q))return re.get(Q);var me=h.apply(this,L);return A.cache=re.set(Q,me)||re,me};return A.cache=new(Jl.Cache||Qa),A}function fd(h){if(typeof h!="function")throw new be(_);return function(){var g=arguments;switch(g.length){case 0:return!h.call(this);case 1:return!h.call(this,g[0]);case 2:return!h.call(this,g[0],g[1]);case 3:return!h.call(this,g[0],g[1],g[2])}return!h.apply(this,g)}}Jl.Cache=Qa;var qi=em(function(h,g){var A=(g=g.length==1&&Er(g[0])?zr(g[0],_o(or())):zr(ai(g,1),_o(or()))).length;return Cr(function(L){for(var Q=-1,re=Hi(L.length,A);++Q<re;)L[Q]=g[Q].call(this,L[Q]);return po(h,this,L)})}),sl=Cr(function(h,g){var A=la(g,bs(sl));return ol(h,M,d,g,A)}),$o=Cr(function(h,g){var A=la(g,bs($o));return ol(h,S,d,g,A)}),da=Ml(function(h,g){return ol(h,w,d,d,d,g)});function Ua(h,g){return h===g||h!=h&&g!=g}var nm=qu(Io),pd=qu(function(h,g){return h>=g}),fu=af(function(){return arguments}())?af:function(h){return Yo(h)&&dn.call(h,"callee")&&!ii.call(h,"callee")},Er=vn.isArray,$h=kc?_o(kc):function(h){return Yo(h)&&Ro(h)==Ot};function fa(h){return h!=null&&hd(h.length)&&!Aa(h)}function Do(h){return Yo(h)&&fa(h)}var oa=vh||Ze,Cp=Xd?_o(Xd):function(h){return Yo(h)&&Ro(h)==G};function Ti(h){if(!Yo(h))return!1;var g=Ro(h);return g==W||g=="[object DOMException]"||typeof h.message=="string"&&typeof h.name=="string"&&!z(h)}function Aa(h){if(!Fo(h))return!1;var g=Ro(h);return g==K||g==J||g=="[object AsyncFunction]"||g=="[object Proxy]"}function pu(h){return typeof h=="number"&&h==ct(h)}function hd(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=j}function Fo(h){var g=typeof h;return h!=null&&(g=="object"||g=="function")}function Yo(h){return h!=null&&typeof h=="object"}var Nf=Nc?_o(Nc):function(h){return Yo(h)&&Lo(h)==q};function Dp(h){return typeof h=="number"||Yo(h)&&Ro(h)==ne}function z(h){if(!Yo(h)||Ro(h)!=oe)return!1;var g=Ka(h);if(g===null)return!0;var A=dn.call(g,"constructor")&&g.constructor;return typeof A=="function"&&A instanceof A&&xr.call(A)==ua}var ue=Fi?_o(Fi):function(h){return Yo(h)&&Ro(h)==Pe},Oe=ci?_o(ci):function(h){return Yo(h)&&Lo(h)==Ee};function rt(h){return typeof h=="string"||!Er(h)&&Yo(h)&&Ro(h)==we}function vt(h){return typeof h=="symbol"||Yo(h)&&Ro(h)==Be}var et=_a?_o(_a):function(h){return Yo(h)&&hd(h.length)&&!!Zr[Ro(h)]},pt=qu(xl),Ct=qu(function(h,g){return h<=g});function Ft(h){if(!h)return[];if(fa(h))return rt(h)?ta(h):_i(h);if(Za&&h[Za])return function(A){for(var L,Q=[];!(L=A.next()).done;)Q.push(L.value);return Q}(h[Za]());var g=Lo(h);return(g==q?oi:g==Ee?Ea:Or)(h)}function Dt(h){return h?(h=Gt(h))===C||h===-1/0?17976931348623157e292*(h<0?-1:1):h==h?h:0:h===0?h:0}function ct(h){var g=Dt(h),A=g%1;return g==g?A?g-A:g:0}function Yt(h){return h?ms(ct(h),0,$):0}function Gt(h){if(typeof h=="number")return h;if(vt(h))return B;if(Fo(h)){var g=typeof h.valueOf=="function"?h.valueOf():h;h=Fo(g)?g+"":g}if(typeof h!="string")return h===0?h:+h;h=La(h);var A=Si.test(h);return A||ri.test(h)?ga(h.slice(2),A?2:8):ui.test(h)?B:+h}function jt(h){return nl(h,Nt(h))}function Et(h){return h==null?"":ca(h)}var Ke=eu(function(h,g){if(Pt(g)||fa(g))nl(g,It(g),h);else for(var A in g)dn.call(g,A)&&Wo(h,A,g[A])}),ut=eu(function(h,g){nl(g,Nt(g),h)}),$t=eu(function(h,g,A,L){nl(g,Nt(g),h,L)}),tn=eu(function(h,g,A,L){nl(g,It(g),h,L)}),Mt=Ml(Bc),rn=Cr(function(h,g){h=R(h);var A=-1,L=g.length,Q=L>2?g[2]:d;for(Q&&qo(g[0],g[1],Q)&&(L=1);++A<L;)for(var re=g[A],me=Nt(re),Se=-1,Ve=me.length;++Se<Ve;){var mt=me[Se],bt=h[mt];(bt===d||Ua(bt,qt[mt])&&!dn.call(h,mt))&&(h[mt]=re[mt])}return h}),kt=Cr(function(h){return h.push(d,Sp),po(Bn,d,h)});function Xt(h,g,A){var L=h==null?d:Sl(h,g);return L===d?A:L}function At(h,g){return h!=null&&ws(h,g,pp)}var Kt=Yc(function(h,g,A){g!=null&&typeof g.toString!="function"&&(g=Ur.call(g)),h[g]=A},Dr(tr)),Cn=Yc(function(h,g,A){g!=null&&typeof g.toString!="function"&&(g=Ur.call(g)),dn.call(h,g)?h[g].push(A):h[g]=[A]},or),Xn=Cr(Wi);function It(h){return fa(h)?nf(h):Va(h)}function Nt(h){return fa(h)?nf(h,!0):bh(h)}var xt=eu(function(h,g,A){lf(h,g,A)}),Bn=eu(function(h,g,A,L){lf(h,g,A,L)}),ir=Ml(function(h,g){var A={};if(h==null)return A;var L=!1;g=zr(g,function(re){return re=Kr(re,h),L||(L=re.length>1),re}),nl(h,bf(h),A),L&&(A=Sa(A,7,xp));for(var Q=g.length;Q--;)cf(A,g[Q]);return A}),fn=Ml(function(h,g){return h==null?{}:function(A,L){return Oh(A,L,function(Q,re){return At(A,re)})}(h,g)});function cr(h,g){if(h==null)return{};var A=zr(bf(h),function(L){return[L]});return g=or(g),Oh(h,A,function(L,Q){return g(L,Q[0])})}var qn=Ep(It),lr=Ep(Nt);function Or(h){return h==null?[]:Gs(h,It(h))}var Vo=Yl(function(h,g,A){return g=g.toLowerCase(),h+(A?jo(g):g)});function jo(h){return ei(Et(h).toLowerCase())}function ar(h){return(h=Et(h))&&h.replace(zn,Dc).replace(bl,"")}var Qo=Yl(function(h,g,A){return h+(A?"-":"")+g.toLowerCase()}),ho=Yl(function(h,g,A){return h+(A?" ":"")+g.toLowerCase()}),Bo=mf("toLowerCase"),Ko=Yl(function(h,g,A){return h+(A?"_":"")+g.toLowerCase()}),li=Yl(function(h,g,A){return h+(A?" ":"")+ei(g)}),hi=Yl(function(h,g,A){return h+(A?" ":"")+g.toUpperCase()}),ei=mf("toUpperCase");function wo(h,g,A){return h=Et(h),(g=A?d:g)===d?function(L){return Tc.test(L)}(h)?function(L){return L.match(Ru)||[]}(h):function(L){return L.match(st)||[]}(h):h.match(g)||[]}var er=Cr(function(h,g){try{return po(h,d,g)}catch(A){return Ti(A)?A:new $r(A)}}),vi=Ml(function(h,g){return Vi(g,function(A){A=al(A),el(h,A,Zl(h[A],h))}),h});function Dr(h){return function(){return h}}var $n=rl(),yr=rl(!0);function tr(h){return h}function Eo(h){return Xl(typeof h=="function"?h:Sa(h,1))}var Nl=Cr(function(h,g){return function(A){return Wi(A,h,g)}}),Ao=Cr(function(h,g){return function(A){return Wi(h,A,g)}});function ge(h,g,A){var L=It(g),Q=Uc(g,L);A!=null||Fo(g)&&(Q.length||!L.length)||(A=g,g=h,h=this,Q=Uc(g,It(g)));var re=!(Fo(A)&&"chain"in A&&!A.chain),me=Aa(h);return Vi(Q,function(Se){var Ve=g[Se];h[Se]=Ve,me&&(h.prototype[Se]=function(){var mt=this.__chain__;if(re||mt){var bt=h(this.__wrapped__),Ht=bt.__actions__=_i(this.__actions__);return Ht.push({func:Ve,args:arguments,thisArg:h}),bt.__chain__=mt,bt}return Ve.apply(h,di([this.value()],arguments))})}),h}function ot(){}var tt=Wu(zr),sn=Wu(Yd),vr=Wu(Rc);function ve(h){return Al(h)?Gi(al(h)):function(g){return function(A){return Sl(A,g)}}(h)}var ie=gf(),Re=gf(!0);function ze(){return[]}function Ze(){return!1}var De=Hu(function(h,g){return h+g},0),Ce=_f("ceil"),Fe=Hu(function(h,g){return h/g},1),he=_f("floor"),ke,pe=Hu(function(h,g){return h*g},1),He=_f("round"),We=Hu(function(h,g){return h-g},0);return se.after=function(h,g){if(typeof g!="function")throw new be(_);return h=ct(h),function(){if(--h<1)return g.apply(this,arguments)}},se.ary=Lh,se.assign=Ke,se.assignIn=ut,se.assignInWith=$t,se.assignWith=tn,se.at=Mt,se.before=Ba,se.bind=Zl,se.bindAll=vi,se.bindKey=Ms,se.castArray=function(){if(!arguments.length)return[];var h=arguments[0];return Er(h)?h:[h]},se.chain=Co,se.chunk=function(h,g,A){g=(A?qo(h,g,A):g===d)?1:Ho(ct(g),0);var L=h==null?0:h.length;if(!L||g<1)return[];for(var Q=0,re=0,me=vn(Ic(L/g));Q<L;)me[re++]=Ma(h,Q,Q+=g);return me},se.compact=function(h){for(var g=-1,A=h==null?0:h.length,L=0,Q=[];++g<A;){var re=h[g];re&&(Q[L++]=re)}return Q},se.concat=function(){var h=arguments.length;if(!h)return[];for(var g=vn(h-1),A=arguments[0],L=h;L--;)g[L-1]=arguments[L];return di(Er(A)?_i(A):[A],ai(g,1))},se.cond=function(h){var g=h==null?0:h.length,A=or();return h=g?zr(h,function(L){if(typeof L[1]!="function")throw new be(_);return[A(L[0]),L[1]]}):[],Cr(function(L){for(var Q=-1;++Q<g;){var re=h[Q];if(po(re[0],this,L))return po(re[1],this,L)}})},se.conforms=function(h){return function(g){var A=It(g);return function(L){return up(L,g,A)}}(Sa(h,1))},se.constant=Dr,se.countBy=Hn,se.create=function(h,g){var A=Ys(h);return g==null?A:Wl(A,g)},se.curry=function h(g,A,L){var Q=ol(g,8,d,d,d,d,d,A=L?d:A);return Q.placeholder=h.placeholder,Q},se.curryRight=function h(g,A,L){var Q=ol(g,x,d,d,d,d,d,A=L?d:A);return Q.placeholder=h.placeholder,Q},se.debounce=Wn,se.defaults=rn,se.defaultsDeep=kt,se.defer=Rp,se.delay=Qu,se.difference=Nh,se.differenceBy=Ph,se.differenceWith=Rh,se.drop=function(h,g,A){var L=h==null?0:h.length;return L?Ma(h,(g=A||g===d?1:ct(g))<0?0:g,L):[]},se.dropRight=function(h,g,A){var L=h==null?0:h.length;return L?Ma(h,0,(g=L-(g=A||g===d?1:ct(g)))<0?0:g):[]},se.dropRightWhile=function(h,g){return h&&h.length?df(h,or(g,3),!0,!0):[]},se.dropWhile=function(h,g){return h&&h.length?df(h,or(g,3),!0):[]},se.fill=function(h,g,A,L){var Q=h==null?0:h.length;return Q?(A&&typeof A!="number"&&qo(h,g,A)&&(A=0,L=Q),function(re,me,Se,Ve){var mt=re.length;for((Se=ct(Se))<0&&(Se=-Se>mt?0:mt+Se),(Ve=Ve===d||Ve>mt?mt:ct(Ve))<0&&(Ve+=mt),Ve=Se>Ve?0:Yt(Ve);Se<Ve;)re[Se++]=me;return re}(h,g,A,L)):[]},se.filter=function(h,g){return(Er(h)?Bi:Jr)(h,or(g,3))},se.flatMap=function(h,g){return ai(du(h,g),1)},se.flatMapDeep=function(h,g){return ai(du(h,g),C)},se.flatMapDepth=function(h,g,A){return A=A===d?1:ct(A),ai(du(h,g),A)},se.flatten=nd,se.flattenDeep=function(h){return h!=null&&h.length?ai(h,C):[]},se.flattenDepth=function(h,g){return h!=null&&h.length?ai(h,g=g===d?1:ct(g)):[]},se.flip=function(h){return ol(h,512)},se.flow=$n,se.flowRight=yr,se.fromPairs=function(h){for(var g=-1,A=h==null?0:h.length,L={};++g<A;){var Q=h[g];L[Q[0]]=Q[1]}return L},se.functions=function(h){return h==null?[]:Uc(h,It(h))},se.functionsIn=function(h){return h==null?[]:Uc(h,Nt(h))},se.groupBy=Dh,se.initial=function(h){return h!=null&&h.length?Ma(h,0,-1):[]},se.intersection=ll,se.intersectionBy=Ss,se.intersectionWith=tm,se.invert=Kt,se.invertBy=Cn,se.invokeMap=xs,se.iteratee=Eo,se.keyBy=jh,se.keys=It,se.keysIn=Nt,se.map=du,se.mapKeys=function(h,g){var A={};return g=or(g,3),Ln(h,function(L,Q,re){el(A,g(L,Q,re),L)}),A},se.mapValues=function(h,g){var A={};return g=or(g,3),Ln(h,function(L,Q,re){el(A,Q,g(L,Q,re))}),A},se.matches=function(h){return hp(Sa(h,1))},se.matchesProperty=function(h,g){return vp(h,Sa(g,1))},se.memoize=Jl,se.merge=xt,se.mergeWith=Bn,se.method=Nl,se.methodOf=Ao,se.mixin=ge,se.negate=fd,se.nthArg=function(h){return h=ct(h),Cr(function(g){return wh(g,h)})},se.omit=ir,se.omitBy=function(h,g){return cr(h,fd(or(g)))},se.once=function(h){return Ba(2,h)},se.orderBy=function(h,g,A,L){return h==null?[]:(Er(g)||(g=g==null?[]:[g]),Er(A=L?d:A)||(A=A==null?[]:[A]),Eh(h,g,A))},se.over=tt,se.overArgs=qi,se.overEvery=sn,se.overSome=vr,se.partial=sl,se.partialRight=$o,se.partition=Ih,se.pick=fn,se.pickBy=cr,se.property=ve,se.propertyOf=function(h){return function(g){return h==null?d:Sl(h,g)}},se.pull=rd,se.pullAll=su,se.pullAllBy=function(h,g,A){return h&&h.length&&g&&g.length?sf(h,g,or(A,2)):h},se.pullAllWith=function(h,g,A){return h&&h.length&&g&&g.length?sf(h,g,d,A):h},se.pullAt=od,se.range=ie,se.rangeRight=Re,se.rearg=da,se.reject=function(h,g){return(Er(h)?Bi:Jr)(h,fd(or(g,3)))},se.remove=function(h,g){var A=[];if(!h||!h.length)return A;var L=-1,Q=[],re=h.length;for(g=or(g,3);++L<re;){var me=h[L];g(me,L,h)&&(A.push(me),Q.push(L))}return mp(h,Q),A},se.rest=function(h,g){if(typeof h!="function")throw new be(_);return Cr(h,g=g===d?g:ct(g))},se.reverse=Zu,se.sampleSize=function(h,g,A){return g=(A?qo(h,g,A):g===d)?1:ct(g),(Er(h)?lp:gp)(h,g)},se.set=function(h,g,A){return h==null?h:Ks(h,g,A)},se.setWith=function(h,g,A,L){return L=typeof L=="function"?L:d,h==null?h:Ks(h,g,A,L)},se.shuffle=function(h){return(Er(h)?gh:Sh)(h)},se.slice=function(h,g,A){var L=h==null?0:h.length;return L?(A&&typeof A!="number"&&qo(h,g,A)?(g=0,A=L):(g=g==null?0:ct(g),A=A===d?L:ct(A)),Ma(h,g,A)):[]},se.sortBy=Pp,se.sortedUniq=function(h){return h&&h.length?_p(h):[]},se.sortedUniqBy=function(h,g){return h&&h.length?_p(h,or(g,2)):[]},se.split=function(h,g,A){return A&&typeof A!="number"&&qo(h,g,A)&&(g=A=d),(A=A===d?$:A>>>0)?(h=Et(h))&&(typeof g=="string"||g!=null&&!ue(g))&&!(g=ca(g))&&Ya(h)?io(ta(h),0,A):h.split(g,A):[]},se.spread=function(h,g){if(typeof h!="function")throw new be(_);return g=g==null?0:Ho(ct(g),0),Cr(function(A){var L=A[g],Q=io(A,0,g);return L&&di(Q,L),po(h,this,Q)})},se.tail=function(h){var g=h==null?0:h.length;return g?Ma(h,1,g):[]},se.take=function(h,g,A){return h&&h.length?Ma(h,0,(g=A||g===d?1:ct(g))<0?0:g):[]},se.takeRight=function(h,g,A){var L=h==null?0:h.length;return L?Ma(h,(g=L-(g=A||g===d?1:ct(g)))<0?0:g,L):[]},se.takeRightWhile=function(h,g){return h&&h.length?df(h,or(g,3),!1,!0):[]},se.takeWhile=function(h,g){return h&&h.length?df(h,or(g,3)):[]},se.tap=function(h,g){return g(h),h},se.throttle=function(h,g,A){var L=!0,Q=!0;if(typeof h!="function")throw new be(_);return Fo(A)&&(L="leading"in A?!!A.leading:L,Q="trailing"in A?!!A.trailing:Q),Wn(h,g,{leading:L,maxWait:g,trailing:Q})},se.thru=ud,se.toArray=Ft,se.toPairs=qn,se.toPairsIn=lr,se.toPath=function(h){return Er(h)?zr(h,al):vt(h)?[h]:_i(Tp(Et(h)))},se.toPlainObject=jt,se.transform=function(h,g,A){var L=Er(h),Q=L||oa(h)||et(h);if(g=or(g,4),A==null){var re=h&&h.constructor;A=Q?L?new re:[]:Fo(h)&&Aa(re)?Ys(Ka(h)):{}}return(Q?Vi:Ln)(h,function(me,Se,Ve){return g(A,me,Se,Ve)}),A},se.unary=function(h){return Lh(h,1)},se.union=id,se.unionBy=ad,se.unionWith=ld,se.uniq=function(h){return h&&h.length?gs(h):[]},se.uniqBy=function(h,g){return h&&h.length?gs(h,or(g,2)):[]},se.uniqWith=function(h,g){return g=typeof g=="function"?g:d,h&&h.length?gs(h,d,g):[]},se.unset=function(h,g){return h==null||cf(h,g)},se.unzip=uu,se.unzipWith=Kl,se.update=function(h,g,A){return h==null?h:Zs(h,g,hf(A))},se.updateWith=function(h,g,A,L){return L=typeof L=="function"?L:d,h==null?h:Zs(h,g,hf(A),L)},se.values=Or,se.valuesIn=function(h){return h==null?[]:Gs(h,Nt(h))},se.without=bi,se.words=wo,se.wrap=function(h,g){return sl(hf(g),h)},se.xor=Af,se.xorBy=sd,se.xorWith=cu,se.zip=Ju,se.zipObject=function(h,g){return Xc(h||[],g||[],Wo)},se.zipObjectDeep=function(h,g){return Xc(h||[],g||[],Ks)},se.zipWith=Ai,se.entries=qn,se.entriesIn=lr,se.extend=ut,se.extendWith=$t,ge(se,se),se.add=De,se.attempt=er,se.camelCase=Vo,se.capitalize=jo,se.ceil=Ce,se.clamp=function(h,g,A){return A===d&&(A=g,g=d),A!==d&&(A=(A=Gt(A))==A?A:0),g!==d&&(g=(g=Gt(g))==g?g:0),ms(Gt(h),g,A)},se.clone=function(h){return Sa(h,4)},se.cloneDeep=function(h){return Sa(h,5)},se.cloneDeepWith=function(h,g){return Sa(h,5,g=typeof g=="function"?g:d)},se.cloneWith=function(h,g){return Sa(h,4,g=typeof g=="function"?g:d)},se.conformsTo=function(h,g){return g==null||up(h,g,It(g))},se.deburr=ar,se.defaultTo=function(h,g){return h==null||h!=h?g:h},se.divide=Fe,se.endsWith=function(h,g,A){h=Et(h),g=ca(g);var L=h.length,Q=A=A===d?L:ms(ct(A),0,L);return(A-=g.length)>=0&&h.slice(A,Q)==g},se.eq=Ua,se.escape=function(h){return(h=Et(h))&&kn.test(h)?h.replace(yn,Jo):h},se.escapeRegExp=function(h){return(h=Et(h))&&uo.test(h)?h.replace(Sr,"\\$&"):h},se.every=function(h,g,A){var L=Er(h)?Yd:dp;return A&&qo(h,g,A)&&(g=d),L(h,or(g,3))},se.find=Tf,se.findIndex=kp,se.findKey=function(h,g){return Xa(h,or(g,3),Ln)},se.findLast=cd,se.findLastIndex=Mf,se.findLastKey=function(h,g){return Xa(h,or(g,3),yo)},se.floor=he,se.forEach=kf,se.forEachRight=Np,se.forIn=function(h,g){return h==null?h:Pr(h,or(g,3),Nt)},se.forInRight=function(h,g){return h==null?h:mo(h,or(g,3),Nt)},se.forOwn=function(h,g){return h&&Ln(h,or(g,3))},se.forOwnRight=function(h,g){return h&&yo(h,or(g,3))},se.get=Xt,se.gt=nm,se.gte=pd,se.has=function(h,g){return h!=null&&ws(h,g,fp)},se.hasIn=At,se.head=Ch,se.identity=tr,se.includes=function(h,g,A,L){h=fa(h)?h:Or(h),A=A&&!L?ct(A):0;var Q=h.length;return A<0&&(A=Ho(Q+A,0)),rt(h)?A<=Q&&h.indexOf(g,A)>-1:!!Q&&cs(h,g,A)>-1},se.indexOf=function(h,g,A){var L=h==null?0:h.length;if(!L)return-1;var Q=A==null?0:ct(A);return Q<0&&(Q=Ho(L+Q,0)),cs(h,g,Q)},se.inRange=function(h,g,A){return g=Dt(g),A===d?(A=g,g=0):A=Dt(A),function(L,Q,re){return L>=Hi(Q,re)&&L<Ho(Q,re)}(h=Gt(h),g,A)},se.invoke=Xn,se.isArguments=fu,se.isArray=Er,se.isArrayBuffer=$h,se.isArrayLike=fa,se.isArrayLikeObject=Do,se.isBoolean=function(h){return h===!0||h===!1||Yo(h)&&Ro(h)==Z},se.isBuffer=oa,se.isDate=Cp,se.isElement=function(h){return Yo(h)&&h.nodeType===1&&!z(h)},se.isEmpty=function(h){if(h==null)return!0;if(fa(h)&&(Er(h)||typeof h=="string"||typeof h.splice=="function"||oa(h)||et(h)||fu(h)))return!h.length;var g=Lo(h);if(g==q||g==Ee)return!h.size;if(Pt(h))return!Va(h).length;for(var A in h)if(dn.call(h,A))return!1;return!0},se.isEqual=function(h,g){return Gu(h,g)},se.isEqualWith=function(h,g,A){var L=(A=typeof A=="function"?A:d)?A(h,g):d;return L===d?Gu(h,g,d,A):!!L},se.isError=Ti,se.isFinite=function(h){return typeof h=="number"&&Xs(h)},se.isFunction=Aa,se.isInteger=pu,se.isLength=hd,se.isMap=Nf,se.isMatch=function(h,g){return h===g||Fa(h,g,Zc(g))},se.isMatchWith=function(h,g,A){return A=typeof A=="function"?A:d,Fa(h,g,Zc(g),A)},se.isNaN=function(h){return Dp(h)&&h!=+h},se.isNative=function(h){if(Ef(h))throw new $r("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ys(h)},se.isNil=function(h){return h==null},se.isNull=function(h){return h===null},se.isNumber=Dp,se.isObject=Fo,se.isObjectLike=Yo,se.isPlainObject=z,se.isRegExp=ue,se.isSafeInteger=function(h){return pu(h)&&h>=-9007199254740991&&h<=j},se.isSet=Oe,se.isString=rt,se.isSymbol=vt,se.isTypedArray=et,se.isUndefined=function(h){return h===d},se.isWeakMap=function(h){return Yo(h)&&Lo(h)==nt},se.isWeakSet=function(h){return Yo(h)&&Ro(h)=="[object WeakSet]"},se.join=function(h,g){return h==null?"":Lc.call(h,g)},se.kebabCase=Qo,se.last=Mo,se.lastIndexOf=function(h,g,A){var L=h==null?0:h.length;if(!L)return-1;var Q=L;return A!==d&&(Q=(Q=ct(A))<0?Ho(L+Q,0):Hi(Q,L-1)),g==g?function(re,me,Se){for(var Ve=Se+1;Ve--;)if(re[Ve]===me)return Ve;return Ve}(h,g,Q):Ui(h,ba,Q,!0)},se.lowerCase=ho,se.lowerFirst=Bo,se.lt=pt,se.lte=Ct,se.max=function(h){return h&&h.length?Xo(h,tr,Io):d},se.maxBy=function(h,g){return h&&h.length?Xo(h,or(g,2),Io):d},se.mean=function(h){return Lr(h,tr)},se.meanBy=function(h,g){return Lr(h,or(g,2))},se.min=function(h){return h&&h.length?Xo(h,tr,xl):d},se.minBy=function(h,g){return h&&h.length?Xo(h,or(g,2),xl):d},se.stubArray=ze,se.stubFalse=Ze,se.stubObject=function(){return{}},se.stubString=function(){return""},se.stubTrue=function(){return!0},se.multiply=pe,se.nth=function(h,g){return h&&h.length?wh(h,ct(g)):d},se.noConflict=function(){return zo._===this&&(zo._=Po),this},se.noop=ot,se.now=dd,se.pad=function(h,g,A){h=Et(h);var L=(g=ct(g))?zi(h):0;if(!g||L>=g)return h;var Q=(g-L)/2;return Xu(Ws(Q),A)+h+Xu(Ic(Q),A)},se.padEnd=function(h,g,A){h=Et(h);var L=(g=ct(g))?zi(h):0;return g&&L<g?h+Xu(g-L,A):h},se.padStart=function(h,g,A){h=Et(h);var L=(g=ct(g))?zi(h):0;return g&&L<g?Xu(g-L,A)+h:h},se.parseInt=function(h,g,A){return A||g==null?g=0:g&&(g=+g),ef(Et(h).replace(Vn,""),g||0)},se.random=function(h,g,A){if(A&&typeof A!="boolean"&&qo(h,g,A)&&(g=A=d),A===d&&(typeof g=="boolean"?(A=g,g=d):typeof h=="boolean"&&(A=h,h=d)),h===d&&g===d?(h=0,g=1):(h=Dt(h),g===d?(g=h,h=0):g=Dt(g)),h>g){var L=h;h=g,g=L}if(A||h%1||g%1){var Q=$u();return Hi(h+Q*(g-h+ss("1e-"+((Q+"").length-1))),g)}return yp(h,g)},se.reduce=function(h,g,A){var L=Er(h)?ju:gi,Q=arguments.length<3;return L(h,or(g,4),A,Q,xo)},se.reduceRight=function(h,g,A){var L=Er(h)?Kd:gi,Q=arguments.length<3;return L(h,or(g,4),A,Q,_h)},se.repeat=function(h,g,A){return g=(A?qo(h,g,A):g===d)?1:ct(g),zc(Et(h),g)},se.replace=function(){var h=arguments,g=Et(h[0]);return h.length<3?g:g.replace(h[1],h[2])},se.result=function(h,g,A){var L=-1,Q=(g=Kr(g,h)).length;for(Q||(Q=1,h=d);++L<Q;){var re=h==null?d:h[al(g[L])];re===d&&(L=Q,re=A),h=Aa(re)?re.call(h):re}return h},se.round=He,se.runInContext=ft,se.sample=function(h){return(Er(h)?rf:Zv)(h)},se.size=function(h){if(h==null)return 0;if(fa(h))return rt(h)?zi(h):h.length;var g=Lo(h);return g==q||g==Ee?h.size:Va(h).length},se.snakeCase=Ko,se.some=function(h,g,A){var L=Er(h)?Rc:Qv;return A&&qo(h,g,A)&&(g=d),L(h,or(g,3))},se.sortedIndex=function(h,g){return Wc(h,g)},se.sortedIndexBy=function(h,g,A){return uf(h,g,or(A,2))},se.sortedIndexOf=function(h,g){var A=h==null?0:h.length;if(A){var L=Wc(h,g);if(L<A&&Ua(h[L],g))return L}return-1},se.sortedLastIndex=function(h,g){return Wc(h,g,!0)},se.sortedLastIndexBy=function(h,g,A){return uf(h,g,or(A,2),!0)},se.sortedLastIndexOf=function(h,g){if(h!=null&&h.length){var A=Wc(h,g,!0)-1;if(Ua(h[A],g))return A}return-1},se.startCase=li,se.startsWith=function(h,g,A){return h=Et(h),A=A==null?0:ms(ct(A),0,h.length),g=ca(g),h.slice(A,A+g.length)==g},se.subtract=We,se.sum=function(h){return h&&h.length?ds(h,tr):0},se.sumBy=function(h,g){return h&&h.length?ds(h,or(g,2)):0},se.template=function(h,g,A){var L=se.templateSettings;A&&qo(h,g,A)&&(g=d),h=Et(h),g=$t({},g,L,Op);var Q,re,me=$t({},g.imports,L.imports,Op),Se=It(me),Ve=Gs(me,Se),mt=0,bt=g.interpolate||Zn,Ht="__p += '",En=H((g.escape||Zn).source+"|"+bt.source+"|"+(bt===nr?In:Zn).source+"|"+(g.evaluate||Zn).source+"|$","g"),Sn="//# sourceURL="+(dn.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zd+"]")+`
`;h.replace(En,function(nn,sr,Pn,Xe,gr,Gr){return Pn||(Pn=Xe),Ht+=h.slice(mt,Gr).replace(ur,zs),sr&&(Q=!0,Ht+=`' +
__e(`+sr+`) +
'`),gr&&(re=!0,Ht+=`';
`+gr+`;
__p += '`),Pn&&(Ht+=`' +
((__t = (`+Pn+`)) == null ? '' : __t) +
'`),mt=Gr+nn.length,nn}),Ht+=`';
`;var Yn=dn.call(g,"variable")&&g.variable;if(Yn){if(on.test(Yn))throw new $r("Invalid `variable` option passed into `_.template`")}else Ht=`with (obj) {
`+Ht+`
}
`;Ht=(re?Ht.replace(St,""):Ht).replace(Zt,"$1").replace(pn,"$1;"),Ht="function("+(Yn||"obj")+`) {
`+(Yn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Q?", __e = _.escape":"")+(re?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ht+`return __p
}`;var Lt=er(function(){return bo(Se,Sn+"return "+Ht).apply(d,Ve)});if(Lt.source=Ht,Ti(Lt))throw Lt;return Lt},se.times=function(h,g){if((h=ct(h))<1||h>j)return[];var A=$,L=Hi(h,$);g=or(g),h-=$;for(var Q=Vl(L,g);++A<h;)g(A);return Q},se.toFinite=Dt,se.toInteger=ct,se.toLength=Yt,se.toLower=function(h){return Et(h).toLowerCase()},se.toNumber=Gt,se.toSafeInteger=function(h){return h?ms(ct(h),-9007199254740991,j):h===0?h:0},se.toString=Et,se.toUpper=function(h){return Et(h).toUpperCase()},se.trim=function(h,g,A){if((h=Et(h))&&(A||g===d))return La(h);if(!h||!(g=ca(g)))return h;var L=ta(h),Q=ta(g);return io(L,wa(L,Q),Cc(L,Q)+1).join("")},se.trimEnd=function(h,g,A){if((h=Et(h))&&(A||g===d))return h.slice(0,fi(h)+1);if(!h||!(g=ca(g)))return h;var L=ta(h);return io(L,0,Cc(L,ta(g))+1).join("")},se.trimStart=function(h,g,A){if((h=Et(h))&&(A||g===d))return h.replace(Vn,"");if(!h||!(g=ca(g)))return h;var L=ta(h);return io(L,wa(L,ta(g))).join("")},se.truncate=function(h,g){var A=30,L="...";if(Fo(g)){var Q="separator"in g?g.separator:Q;A="length"in g?ct(g.length):A,L="omission"in g?ca(g.omission):L}var re=(h=Et(h)).length;if(Ya(h)){var me=ta(h);re=me.length}if(A>=re)return h;var Se=A-zi(L);if(Se<1)return L;var Ve=me?io(me,0,Se).join(""):h.slice(0,Se);if(Q===d)return Ve+L;if(me&&(Se+=Ve.length-Se),ue(Q)){if(h.slice(Se).search(Q)){var mt,bt=Ve;for(Q.global||(Q=H(Q.source,Et(Ar.exec(Q))+"g")),Q.lastIndex=0;mt=Q.exec(bt);)var Ht=mt.index;Ve=Ve.slice(0,Ht===d?Se:Ht)}}else if(h.indexOf(ca(Q),Se)!=Se){var En=Ve.lastIndexOf(Q);En>-1&&(Ve=Ve.slice(0,En))}return Ve+L},se.unescape=function(h){return(h=Et(h))&&ht.test(h)?h.replace(An,sa):h},se.uniqueId=function(h){var g=++Yr;return Et(h)+g},se.upperCase=hi,se.upperFirst=ei,se.each=kf,se.eachRight=Np,se.first=Ch,ge(se,(ke={},Ln(se,function(h,g){dn.call(se.prototype,g)||(ke[g]=h)}),ke),{chain:!1}),se.VERSION="4.17.21",Vi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){se[h].placeholder=se}),Vi(["drop","take"],function(h,g){Fr.prototype[h]=function(A){A=A===d?1:Ho(ct(A),0);var L=this.__filtered__&&!g?new Fr(this):this.clone();return L.__filtered__?L.__takeCount__=Hi(A,L.__takeCount__):L.__views__.push({size:Hi(A,$),type:h+(L.__dir__<0?"Right":"")}),L},Fr.prototype[h+"Right"]=function(A){return this.reverse()[h](A).reverse()}}),Vi(["filter","map","takeWhile"],function(h,g){var A=g+1,L=A==1||A==3;Fr.prototype[h]=function(Q){var re=this.clone();return re.__iteratees__.push({iteratee:or(Q,3),type:A}),re.__filtered__=re.__filtered__||L,re}}),Vi(["head","last"],function(h,g){var A="take"+(g?"Right":"");Fr.prototype[h]=function(){return this[A](1).value()[0]}}),Vi(["initial","tail"],function(h,g){var A="drop"+(g?"":"Right");Fr.prototype[h]=function(){return this.__filtered__?new Fr(this):this[A](1)}}),Fr.prototype.compact=function(){return this.filter(tr)},Fr.prototype.find=function(h){return this.filter(h).head()},Fr.prototype.findLast=function(h){return this.reverse().find(h)},Fr.prototype.invokeMap=Cr(function(h,g){return typeof h=="function"?new Fr(this):this.map(function(A){return Wi(A,h,g)})}),Fr.prototype.reject=function(h){return this.filter(fd(or(h)))},Fr.prototype.slice=function(h,g){h=ct(h);var A=this;return A.__filtered__&&(h>0||g<0)?new Fr(A):(h<0?A=A.takeRight(-h):h&&(A=A.drop(h)),g!==d&&(A=(g=ct(g))<0?A.dropRight(-g):A.take(g-h)),A)},Fr.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},Fr.prototype.toArray=function(){return this.take($)},Ln(Fr.prototype,function(h,g){var A=/^(?:filter|find|map|reject)|While$/.test(g),L=/^(?:head|last)$/.test(g),Q=se[L?"take"+(g=="last"?"Right":""):g],re=L||/^find/.test(g);Q&&(se.prototype[g]=function(){var me=this.__wrapped__,Se=L?[1]:arguments,Ve=me instanceof Fr,mt=Se[0],bt=Ve||Er(me),Ht=function(sr){var Pn=Q.apply(se,di([sr],Se));return L&&En?Pn[0]:Pn};bt&&A&&typeof mt=="function"&&mt.length!=1&&(Ve=bt=!1);var En=this.__chain__,Sn=!!this.__actions__.length,Yn=re&&!En,Lt=Ve&&!Sn;if(!re&&bt){me=Lt?me:new Fr(this);var nn=h.apply(me,Se);return nn.__actions__.push({func:ud,args:[Ht],thisArg:d}),new $a(nn,En)}return Yn&&Lt?h.apply(this,Se):(nn=this.thru(Ht),Yn?L?nn.value()[0]:nn.value():nn)})}),Vi(["pop","push","shift","sort","splice","unshift"],function(h){var g=qe[h],A=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",L=/^(?:pop|shift)$/.test(h);se.prototype[h]=function(){var Q=arguments;if(L&&!this.__chain__){var re=this.value();return g.apply(Er(re)?re:[],Q)}return this[A](function(me){return g.apply(Er(me)?me:[],Q)})}}),Ln(Fr.prototype,function(h,g){var A=se[g];if(A){var L=A.name+"";dn.call(vs,L)||(vs[L]=[]),vs[L].push({name:g,func:A})}}),vs[qc(d,2).name]=[{name:"wrapper",func:d}],Fr.prototype.clone=function(){var h=new Fr(this.__wrapped__);return h.__actions__=_i(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=_i(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=_i(this.__views__),h},Fr.prototype.reverse=function(){if(this.__filtered__){var h=new Fr(this);h.__dir__=-1,h.__filtered__=!0}else(h=this.clone()).__dir__*=-1;return h},Fr.prototype.value=function(){var h=this.__wrapped__.value(),g=this.__dir__,A=Er(h),L=g<0,Q=A?h.length:0,re=function(Gr,Jn,dr){for(var ki=-1,Ga=dr.length;++ki<Ga;){var Ql=dr[ki],Ni=Ql.size;switch(Ql.type){case"drop":Gr+=Ni;break;case"dropRight":Jn-=Ni;break;case"take":Jn=Hi(Jn,Gr+Ni);break;case"takeRight":Gr=Ho(Gr,Jn-Ni)}}return{start:Gr,end:Jn}}(0,Q,this.__views__),me=re.start,Se=re.end,Ve=Se-me,mt=L?Se:me-1,bt=this.__iteratees__,Ht=bt.length,En=0,Sn=Hi(Ve,this.__takeCount__);if(!A||!L&&Q==Ve&&Sn==Ve)return bp(h,this.__actions__);var Yn=[];e:for(;Ve--&&En<Sn;){for(var Lt=-1,nn=h[mt+=g];++Lt<Ht;){var sr=bt[Lt],Pn=sr.iteratee,Xe=sr.type,gr=Pn(nn);if(Xe==2)nn=gr;else if(!gr){if(Xe==1)continue e;break e}}Yn[En++]=nn}return Yn},se.prototype.at=Xi,se.prototype.chain=function(){return Co(this)},se.prototype.commit=function(){return new $a(this.value(),this.__chain__)},se.prototype.next=function(){this.__values__===d&&(this.__values__=Ft(this.value()));var h=this.__index__>=this.__values__.length;return{done:h,value:h?d:this.__values__[this.__index__++]}},se.prototype.plant=function(h){for(var g,A=this;A instanceof Gl;){var L=xf(A);L.__index__=0,L.__values__=d,g?Q.__wrapped__=L:g=L;var Q=L;A=A.__wrapped__}return Q.__wrapped__=h,g},se.prototype.reverse=function(){var h=this.__wrapped__;if(h instanceof Fr){var g=h;return this.__actions__.length&&(g=new Fr(this)),(g=g.reverse()).__actions__.push({func:ud,args:[Zu],thisArg:d}),new $a(g,this.__chain__)}return this.thru(Zu)},se.prototype.toJSON=se.prototype.valueOf=se.prototype.value=function(){return bp(this.__wrapped__,this.__actions__)},se.prototype.first=se.prototype.head,Za&&(se.prototype[Za]=function(){return this}),se}();zo._=Ii,(f=(function(){return Ii}).call(o,r,o,c))===d||(c.exports=f)}).call(this)}).call(this,r(68),r(221)(n))},function(n,o,r){var s=r(7),c=r(34),f=r(33),d=r(87),_=r(62),y=r(174),b=r(28),x=s.TypeError,M=b("toPrimitive");n.exports=function(S,E){if(!f(S)||d(S))return S;var w,C=_(S,M);if(C){if(E===void 0&&(E="default"),w=c(C,S,E),!f(w)||d(w))return w;throw x("Can't convert object to primitive value")}return E===void 0&&(E="number"),y(S,E)}},function(n,o,r){var s=r(108);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,o,r){var s=r(36),c=r(18),f=r(91);n.exports=!s&&!c(function(){return Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a!=7})},function(n,o,r){var s=r(35),c=r(135),f=r(50),d=r(38);n.exports=function(_,y){for(var b=c(y),x=d.f,M=f.f,S=0;S<b.length;S++){var E=b[S];s(_,E)||x(_,E,M(y,E))}}},function(n,o,r){var s=r(46),c=r(15),f=r(74),d=r(112),_=r(32),y=c([].concat);n.exports=s("Reflect","ownKeys")||function(b){var x=f.f(_(b)),M=d.f;return M?y(x,M(b)):x}},function(n,o,r){var s=r(15),c=r(35),f=r(41),d=r(137).indexOf,_=r(72),y=s([].push);n.exports=function(b,x){var M,S=f(b),E=0,w=[];for(M in S)!c(_,M)&&c(S,M)&&y(w,M);for(;x.length>E;)c(S,M=x[E++])&&(~d(w,M)||y(w,M));return w}},function(n,o,r){var s=r(41),c=r(75),f=r(45),d=function(_){return function(y,b,x){var M,S=s(y),E=f(S),w=c(x,E);if(_&&b!=b){for(;E>w;)if((M=S[w++])!=M)return!0}else for(;E>w;w++)if((_||w in S)&&S[w]===b)return _||w||0;return!_&&-1}};n.exports={includes:d(!0),indexOf:d(!1)}},function(n,o,r){var s=r(46);n.exports=s("document","documentElement")},function(n,o,r){var s=r(51),c=r(41),f=r(74).f,d=r(114),_=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(y){return _&&s(y)=="Window"?function(b){try{return f(b)}catch{return d(_)}}(y):f(c(y))}},function(n,o,r){var s=r(28);o.f=s},function(n,o,r){var s=r(177),c=r(35),f=r(140),d=r(38).f;n.exports=function(_){var y=s.Symbol||(s.Symbol={});c(y,_)||d(y,_,{value:f.f(_)})}},function(n,o,r){var s,c,f,d=r(18),_=r(30),y=r(60),b=r(101),x=r(42),M=r(28),S=r(71),E=M("iterator"),w=!1;[].keys&&("next"in(f=[].keys())?(c=b(b(f)))!==Object.prototype&&(s=c):w=!0),s==null||d(function(){var C={};return s[E].call(C)!==C})?s={}:S&&(s=y(s)),_(s[E])||x(s,E,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:w}},function(n,o,r){var s=r(18);n.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,o,r){var s=r(16),c=r(15),f=r(72),d=r(33),_=r(35),y=r(38).f,b=r(74),x=r(139),M=r(183),S=r(90),E=r(185),w=!1,C=S("meta"),j=0,B=function(U){y(U,C,{value:{objectID:"O"+j++,weakData:{}}})},$=n.exports={enable:function(){$.enable=function(){},w=!0;var U=b.f,I=c([].splice),F={};F[C]=1,U(F).length&&(b.f=function(Z){for(var G=U(Z),W=0,K=G.length;W<K;W++)if(G[W]===C){I(G,W,1);break}return G},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},fastKey:function(U,I){if(!d(U))return typeof U=="symbol"?U:(typeof U=="string"?"S":"P")+U;if(!_(U,C)){if(!M(U))return"F";if(!I)return"E";B(U)}return U[C].objectID},getWeakData:function(U,I){if(!_(U,C)){if(!M(U))return!0;if(!I)return!1;B(U)}return U[C].weakData},onFreeze:function(U){return E&&w&&M(U)&&!_(U,C)&&B(U),U}};f[C]=!0},function(n,o,r){var s=r(28),c=r(80),f=s("iterator"),d=Array.prototype;n.exports=function(_){return _!==void 0&&(c.Array===_||d[f]===_)}},function(n,o,r){var s=r(7),c=r(34),f=r(56),d=r(32),_=r(88),y=r(118),b=s.TypeError;n.exports=function(x,M){var S=arguments.length<2?y(x):M;if(f(S))return d(c(S,x));throw b(_(x)+" is not iterable")}},function(n,o,r){var s=r(34),c=r(32),f=r(62);n.exports=function(d,_,y){var b,x;c(d);try{if(!(b=f(d,"return"))){if(_==="throw")throw y;return y}b=s(b,d)}catch(M){x=!0,b=M}if(_==="throw")throw y;if(x)throw b;return c(b),y}},function(n,o,r){var s=r(30),c=r(33),f=r(102);n.exports=function(d,_,y){var b,x;return f&&s(b=_.constructor)&&b!==y&&c(x=b.prototype)&&x!==y.prototype&&f(d,x),d}},function(n,o,r){var s=r(42);n.exports=function(c,f,d){for(var _ in f)s(c,_,f[_],d);return c}},function(n,o,r){var s=r(46),c=r(38),f=r(28),d=r(36),_=f("species");n.exports=function(y){var b=s(y),x=c.f;d&&b&&!b[_]&&x(b,_,{configurable:!0,get:function(){return this}})}},function(n,o,r){var s=r(15),c=r(59),f=r(39),d=r(44),_=s("".charAt),y=s("".charCodeAt),b=s("".slice),x=function(M){return function(S,E){var w,C,j=f(d(S)),B=c(E),$=j.length;return B<0||B>=$?M?"":void 0:(w=y(j,B))<55296||w>56319||B+1===$||(C=y(j,B+1))<56320||C>57343?M?_(j,B):w:M?b(j,B,B+2):C-56320+(w-55296<<10)+65536}};n.exports={codeAt:x(!1),charAt:x(!0)}},function(n,o){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,o,r){var s=r(91)("span").classList,c=s&&s.constructor&&s.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,o,r){var s=r(32);n.exports=function(){var c=s(this),f="";return c.global&&(f+="g"),c.ignoreCase&&(f+="i"),c.multiline&&(f+="m"),c.dotAll&&(f+="s"),c.unicode&&(f+="u"),c.sticky&&(f+="y"),f}},function(n,o,r){var s=r(18),c=r(7).RegExp,f=s(function(){var y=c("a","y");return y.lastIndex=2,y.exec("abcd")!=null}),d=f||s(function(){return!c("a","y").sticky}),_=f||s(function(){var y=c("^r","gy");return y.lastIndex=2,y.exec("str")!=null});n.exports={BROKEN_CARET:_,MISSED_STICKY:d,UNSUPPORTED_Y:f}},function(n,o,r){var s=r(16),c=r(79).find,f=r(100),d="find",_=!0;d in[]&&Array(1).find(function(){_=!1}),s({target:"Array",proto:!0,forced:_},{find:function(y){return c(this,y,arguments.length>1?arguments[1]:void 0)}}),f(d)},function(n,o,r){var s=r(16),c=r(137).includes,f=r(100);s({target:"Array",proto:!0},{includes:function(d){return c(this,d,arguments.length>1?arguments[1]:void 0)}}),f("includes")},function(n,o,r){var s=r(16),c=r(15),f=r(197),d=r(44),_=r(39),y=r(198),b=c("".indexOf);s({target:"String",proto:!0,forced:!y("includes")},{includes:function(x){return!!~b(_(d(this)),_(f(x)),arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(33),c=r(51),f=r(28)("match");n.exports=function(d){var _;return s(d)&&((_=d[f])!==void 0?!!_:c(d)=="RegExp")}},function(n,o,r){var s=r(15);n.exports=s(1 .valueOf)},function(n,o,r){var s=r(15),c=r(44),f=r(39),d=r(162),_=s("".replace),y="["+d+"]",b=RegExp("^"+y+y+"*"),x=RegExp(y+y+"*$"),M=function(S){return function(E){var w=f(c(E));return 1&S&&(w=_(w,b,"")),2&S&&(w=_(w,x,"")),w}};n.exports={start:M(1),end:M(2),trim:M(3)}},function(n,o){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,o){var r,s,c=n.exports={};function f(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function _(j){if(r===setTimeout)return setTimeout(j,0);if((r===f||!r)&&setTimeout)return r=setTimeout,setTimeout(j,0);try{return r(j,0)}catch{try{return r.call(null,j,0)}catch{return r.call(this,j,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:f}catch{r=f}try{s=typeof clearTimeout=="function"?clearTimeout:d}catch{s=d}})();var y,b=[],x=!1,M=-1;function S(){x&&y&&(x=!1,y.length?b=y.concat(b):M=-1,b.length&&E())}function E(){if(!x){var j=_(S);x=!0;for(var B=b.length;B;){for(y=b,b=[];++M<B;)y&&y[M].run();M=-1,B=b.length}y=null,x=!1,function($){if(s===clearTimeout)return clearTimeout($);if((s===d||!s)&&clearTimeout)return s=clearTimeout,clearTimeout($);try{s($)}catch{try{return s.call(null,$)}catch{return s.call(this,$)}}}(j)}}function w(j,B){this.fun=j,this.array=B}function C(){}c.nextTick=function(j){var B=new Array(arguments.length-1);if(arguments.length>1)for(var $=1;$<arguments.length;$++)B[$-1]=arguments[$];b.push(new w(j,B)),b.length!==1||x||_(E)},w.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=C,c.addListener=C,c.once=C,c.off=C,c.removeListener=C,c.removeAllListeners=C,c.emit=C,c.prependListener=C,c.prependOnceListener=C,c.listeners=function(j){return[]},c.binding=function(j){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(j){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,o,r){var s=r(32),c=r(165),f=r(28)("species");n.exports=function(d,_){var y,b=s(d).constructor;return b===void 0||(y=s(b)[f])==null?_:c(y)}},function(n,o,r){var s=r(7),c=r(99),f=r(88),d=s.TypeError;n.exports=function(_){if(c(_))return _;throw d(f(_)+" is not a constructor")}},function(n,o,r){var s=r(16),c=r(161).trim;s({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,o,r){var s=r(34),c=r(123),f=r(32),d=r(94),_=r(39),y=r(44),b=r(62),x=r(124),M=r(125);c("match",function(S,E,w){return[function(C){var j=y(this),B=C==null?void 0:b(C,S);return B?s(B,C,j):new RegExp(C)[S](_(j))},function(C){var j=f(this),B=_(C),$=w(E,j,B);if($.done)return $.value;if(!j.global)return M(j,B);var U=j.unicode;j.lastIndex=0;for(var I,F=[],Z=0;(I=M(j,B))!==null;){var G=_(I[0]);F[Z]=G,G===""&&(j.lastIndex=x(B,d(j.lastIndex),U)),Z++}return Z===0?null:F}]})},function(n,o,r){var s,c,f,d,_=r(7),y=r(76),b=r(64),x=r(30),M=r(35),S=r(18),E=r(138),w=r(98),C=r(91),j=r(169),B=r(128),$=_.setImmediate,U=_.clearImmediate,I=_.process,F=_.Dispatch,Z=_.Function,G=_.MessageChannel,W=_.String,K=0,J={},q="onreadystatechange";try{s=_.location}catch{}var ne=function(Ee){if(M(J,Ee)){var we=J[Ee];delete J[Ee],we()}},oe=function(Ee){return function(){ne(Ee)}},Me=function(Ee){ne(Ee.data)},Pe=function(Ee){_.postMessage(W(Ee),s.protocol+"//"+s.host)};$&&U||($=function(Ee){var we=w(arguments,1);return J[++K]=function(){y(x(Ee)?Ee:Z(Ee),void 0,we)},c(K),K},U=function(Ee){delete J[Ee]},B?c=function(Ee){I.nextTick(oe(Ee))}:F&&F.now?c=function(Ee){F.now(oe(Ee))}:G&&!j?(d=(f=new G).port2,f.port1.onmessage=Me,c=b(d.postMessage,d)):_.addEventListener&&x(_.postMessage)&&!_.importScripts&&s&&s.protocol!=="file:"&&!S(Pe)?(c=Pe,_.addEventListener("message",Me,!1)):c=q in C("script")?function(Ee){E.appendChild(C("script")).onreadystatechange=function(){E.removeChild(this),ne(Ee)}}:function(Ee){setTimeout(oe(Ee),0)}),n.exports={set:$,clear:U}},function(n,o,r){var s=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(n,o,r){var s=r(56),c=function(f){var d,_;this.promise=new f(function(y,b){if(d!==void 0||_!==void 0)throw TypeError("Bad Promise constructor");d=y,_=b}),this.resolve=s(d),this.reject=s(_)};n.exports.f=function(f){return new c(f)}},function(n,o,r){o.a=function(){return!1}},function(n,o,r){(function(s){r.d(o,"a",function(){return I});var c=r(1);function f(G){throw new Error("[mobx-utils] "+G)}function d(G,W){W===void 0&&(W="Illegal state"),G||f(W)}var _=function(G){return G&&G!==Object.prototype&&Object.getOwnPropertyNames(G).concat(_(Object.getPrototypeOf(G))||[])},y=function(G){return function(W){var K=_(W);return K.filter(function(J,q){return K.indexOf(J)===q})}(G).filter(function(W){return W!=="constructor"&&!~W.indexOf("__")})},b="pending",x="fulfilled",M="rejected";function S(G){switch(this.state){case b:return G.pending&&G.pending(this.value);case M:return G.rejected&&G.rejected(this.value);case x:return G.fulfilled?G.fulfilled(this.value):this.value}}function E(G,W){if(d(arguments.length<=2,"fromPromise expects up to two arguments"),d(typeof G=="function"||typeof G=="object"&&G&&typeof G.then=="function","Please pass a promise or function to fromPromise"),G.isPromiseBasedObservable===!0)return G;typeof G=="function"&&(G=new Promise(G));var K=G;G.then(Object(c.k)("observableFromPromise-resolve",function(q){K.value=q,K.state=x}),Object(c.k)("observableFromPromise-reject",function(q){K.value=q,K.state=M})),K.isPromiseBasedObservable=!0,K.case=S;var J=W&&W.state===x?W.value:void 0;return Object(c.q)(K,{value:J,state:b},{},{deep:!1}),K}(function(G){G.reject=Object(c.k)("fromPromise.reject",function(W){var K=G(Promise.reject(W));return K.state=M,K.value=W,K}),G.resolve=Object(c.k)("fromPromise.resolve",function(W){W===void 0&&(W=void 0);var K=G(Promise.resolve(W));return K.state=x,K.value=W,K})})(E||(E={}));var w=function(G,W,K,J){var q,ne=arguments.length,oe=ne<3?W:J===null?J=Object.getOwnPropertyDescriptor(W,K):J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")oe=Reflect.decorate(G,W,K,J);else for(var Me=G.length-1;Me>=0;Me--)(q=G[Me])&&(oe=(ne<3?q(oe):ne>3?q(W,K,oe):q(W,K))||oe);return ne>3&&oe&&Object.defineProperty(W,K,oe),oe};(function(){function G(W,K){var J=this;Object(c.G)(function(){J.current=K,J.subscription=W.subscribe(J)})}G.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},G.prototype.next=function(W){this.current=W},G.prototype.complete=function(){this.dispose()},G.prototype.error=function(W){this.current=W,this.dispose()},w([c.C.ref],G.prototype,"current",void 0),w([c.k.bound],G.prototype,"next",null),w([c.k.bound],G.prototype,"complete",null),w([c.k.bound],G.prototype,"error",null)})();var C=function(){return C=Object.assign||function(G){for(var W,K=1,J=arguments.length;K<J;K++)for(var q in W=arguments[K])Object.prototype.hasOwnProperty.call(W,q)&&(G[q]=W[q]);return G},C.apply(this,arguments)},j=function(G,W,K,J){var q,ne=arguments.length,oe=ne<3?W:J===null?J=Object.getOwnPropertyDescriptor(W,K):J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")oe=Reflect.decorate(G,W,K,J);else for(var Me=G.length-1;Me>=0;Me--)(q=G[Me])&&(oe=(ne<3?q(oe):ne>3?q(W,K,oe):q(W,K))||oe);return ne>3&&oe&&Object.defineProperty(W,K,oe),oe},B=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function G(W){var K=this;this.model=W,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(J){return K.localValues.has(J)},d(Object(c.A)(W),"createViewModel expects an observable object"),y(W).forEach(function(J){if(J!==c.a&&J!=="__mobxDidRunLazyInitializers"){if(d(B.indexOf(J)===-1,"The propertyname "+J+" is reserved and cannot be used with viewModels"),Object(c.w)(W,J)){var q=Object(c.h)(W,J).derivation;K.localComputedValues.set(J,Object(c.m)(q.bind(K)))}var ne=Object.getOwnPropertyDescriptor(W,J),oe=ne?{enumerable:ne.enumerable}:{};Object.defineProperty(K,J,C(C({},oe),{configurable:!0,get:function(){return Object(c.w)(W,J)?K.localComputedValues.get(J).get():K.isPropertyDirty(J)?K.localValues.get(J):K.model[J]},set:Object(c.k)(function(Me){Me!==K.model[J]?K.localValues.set(J,Me):K.localValues.delete(J)})}))}})}Object.defineProperty(G.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),G.prototype.submit=function(){var W=this;Object(c.B)(this.localValues).forEach(function(K){var J=W.localValues.get(K),q=W.model[K];Object(c.y)(q)?q.replace(J):Object(c.z)(q)?(q.clear(),q.merge(J)):Object(c.v)(J)||(W.model[K]=J)}),this.localValues.clear()},G.prototype.reset=function(){this.localValues.clear()},G.prototype.resetProperty=function(W){this.localValues.delete(W)},j([c.m],G.prototype,"isDirty",null),j([c.m],G.prototype,"changedValues",null),j([c.k.bound],G.prototype,"submit",null),j([c.k.bound],G.prototype,"reset",null),j([c.k.bound],G.prototype,"resetProperty",null)})();function $(G){if(!G)return"ROOT";for(var W=[];G.parent;)W.push(G.path),G=G.parent;return W.reverse().join("/")}function U(G){return Object(c.A)(G)||Object(c.y)(G)||Object(c.z)(G)}function I(G,W){var K=new WeakMap;function J(oe){var Me=K.get(oe.object);(function(Pe,Ee){switch(Pe.type){case"add":q(Pe.newValue,Ee,Pe.name);break;case"update":ne(Pe.oldValue),q(Pe.newValue,Ee,Pe.name||""+Pe.index);break;case"remove":case"delete":ne(Pe.oldValue);break;case"splice":Pe.removed.map(ne),Pe.added.forEach(function(nt,Ot){return q(nt,Ee,""+(Pe.index+Ot))});for(var we=Pe.index+Pe.addedCount;we<Pe.object.length;we++)if(U(Pe.object[we])){var Be=K.get(Pe.object[we]);Be&&(Be.path=""+we)}}})(oe,Me),W(oe,$(Me),G)}function q(oe,Me,Pe){if(U(oe)){var Ee=K.get(oe);if(Ee){if(Ee.parent!==Me||Ee.path!==Pe)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+$(Me)+"/"+Pe+"', but it already exists at '"+$(Ee.parent)+"/"+Ee.path+"'")}else{var we={parent:Me,path:Pe,dispose:Object(c.D)(oe,J)};K.set(oe,we),Object(c.p)(oe).forEach(function(Be){var nt=Be[0];return q(Be[1],we,nt)})}}}function ne(oe){if(U(oe)){var Me=K.get(oe);if(!Me)return;K.delete(oe),Me.dispose(),Object(c.L)(oe).forEach(ne)}}return q(G,void 0,""),function(){ne(G)}}var F,Z=(F=function(G,W){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,J){K.__proto__=J}||function(K,J){for(var q in J)J.hasOwnProperty(q)&&(K[q]=J[q])},F(G,W)},function(G,W){function K(){this.constructor=G}F(G,W),G.prototype=W===null?Object.create(W):(K.prototype=W.prototype,new K)});(function(G){function W(K,J,q){var ne=q===void 0?{}:q,oe=ne.name,Me=oe===void 0?"ogm"+(1e3*Math.random()|0):oe,Pe=ne.keyToName,Ee=Pe===void 0?function(nt){return""+nt}:Pe,we=G.call(this)||this;we._keyToName=Ee,we._groupBy=J,we._ogmInfoKey=Symbol("ogmInfo"+Me),we._base=K;for(var Be=0;Be<K.length;Be++)we._addItem(K[Be]);return we._disposeBaseObserver=Object(c.D)(we._base,function(nt){if(nt.type==="splice")Object(c.J)(function(){for(var Ot=0,Qe=nt.removed;Ot<Qe.length;Ot++){var lt=Qe[Ot];we._removeItem(lt)}for(var dt=0,Tt=nt.added;dt<Tt.length;dt++){var bn=Tt[dt];we._addItem(bn)}});else{if(nt.type!=="update")throw new Error("illegal state");Object(c.J)(function(){we._removeItem(nt.oldValue),we._addItem(nt.newValue)})}}),we}Z(W,G),W.prototype.clear=function(){throw new Error("not supported")},W.prototype.delete=function(K){throw new Error("not supported")},W.prototype.set=function(K,J){throw new Error("not supported")},W.prototype.dispose=function(){this._disposeBaseObserver();for(var K=0;K<this._base.length;K++){var J=this._base[K];J[this._ogmInfoKey].reaction(),delete J[this._ogmInfoKey]}},W.prototype._getGroupArr=function(K){var J=G.prototype.get.call(this,K);return J===void 0&&(J=Object(c.C)([],{name:"GroupArray["+this._keyToName(K)+"]",deep:!1}),G.prototype.set.call(this,K,J)),J},W.prototype._removeFromGroupArr=function(K,J){var q=G.prototype.get.call(this,K);q.length===1?G.prototype.delete.call(this,K):(J===q.length-1||(q[J]=q[q.length-1],q[J][this._ogmInfoKey].groupArrIndex=J),q.length--)},W.prototype._addItem=function(K){var J=this,q=this._groupBy(K),ne=this._getGroupArr(q),oe={groupByValue:q,groupArrIndex:ne.length,reaction:Object(c.F)(function(){return J._groupBy(K)},function(Me,Pe){var Ee=K[J._ogmInfoKey];J._removeFromGroupArr(Ee.groupByValue,Ee.groupArrIndex);var we=J._getGroupArr(Me),Be=we.length;we.push(K),Ee.groupByValue=Me,Ee.groupArrIndex=Be})};Object.defineProperty(K,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:oe}),ne.push(K)},W.prototype._removeItem=function(K){var J=K[this._ogmInfoKey];this._removeFromGroupArr(J.groupByValue,J.groupArrIndex),J.reaction(),delete K[this._ogmInfoKey]}})(c.b),function(){function G(W,K){this.base=W,this.args=K,this.closestIdx=0,this.isDisposed=!1;for(var J=this.closest=this.root=W,q=0;q<this.args.length-1&&(J=J.get(K[q]));q++)this.closest=J;this.closestIdx=q}return G.prototype.exists=function(){this.assertNotDisposed();var W=this.args.length;return this.closestIdx>=W-1&&this.closest.has(this.args[W-1])},G.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},G.prototype.set=function(W){this.assertNotDisposed();for(var K=this.args.length,J=this.closest,q=this.closestIdx;q<K-1;q++){var ne=new Map;J.set(this.args[q],ne),J=ne}this.closestIdx=K-1,this.closest=J,J.set(this.args[K-1],W)},G.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var W=this.args.length;this.closest.delete(this.args[W-1]);for(var K=this.root,J=[K],q=0;q<W-1;q++)K=K.get(this.args[q]),J.push(K);for(q=J.length-1;q>0;q--)J[q].size===0&&J[q-1].delete(this.args[q-1]);this.isDisposed=!0},G.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},G}(),Promise.resolve(),typeof queueMicrotask<"u"||s!==void 0&&s.nextTick}).call(this,r(163))},function(n,o,r){var s;(function(c,f,d){if(c){for(var _,y={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},b={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},M={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},S=1;S<20;++S)y[111+S]="f"+S;for(S=0;S<=9;++S)y[S+96]=S.toString();U.prototype.bind=function(I,F,Z){var G=this;return I=I instanceof Array?I:[I],G._bindMultiple.call(G,I,F,Z),G},U.prototype.unbind=function(I,F){return this.bind.call(this,I,function(){},F)},U.prototype.trigger=function(I,F){var Z=this;return Z._directMap[I+":"+F]&&Z._directMap[I+":"+F]({},I),Z},U.prototype.reset=function(){var I=this;return I._callbacks={},I._directMap={},I},U.prototype.stopCallback=function(I,F){if((" "+F.className+" ").indexOf(" mousetrap ")>-1||$(F,this.target))return!1;if("composedPath"in I&&typeof I.composedPath=="function"){var Z=I.composedPath()[0];Z!==I.target&&(F=Z)}return F.tagName=="INPUT"||F.tagName=="SELECT"||F.tagName=="TEXTAREA"||F.isContentEditable},U.prototype.handleKey=function(){var I=this;return I._handleKey.apply(I,arguments)},U.addKeycodes=function(I){for(var F in I)I.hasOwnProperty(F)&&(y[F]=I[F]);_=null},U.init=function(){var I=U(f);for(var F in I)F.charAt(0)!=="_"&&(U[F]=function(Z){return function(){return I[Z].apply(I,arguments)}}(F))},U.init(),c.Mousetrap=U,n.exports&&(n.exports=U),(s=(function(){return U}).call(o,r,o,n))===void 0||(n.exports=s)}function E(I,F,Z){I.addEventListener?I.addEventListener(F,Z,!1):I.attachEvent("on"+F,Z)}function w(I){if(I.type=="keypress"){var F=String.fromCharCode(I.which);return I.shiftKey||(F=F.toLowerCase()),F}return y[I.which]?y[I.which]:b[I.which]?b[I.which]:String.fromCharCode(I.which).toLowerCase()}function C(I){return I=="shift"||I=="ctrl"||I=="alt"||I=="meta"}function j(I,F,Z){return Z||(Z=function(){if(!_)for(var G in _={},y)G>95&&G<112||y.hasOwnProperty(G)&&(_[y[G]]=G);return _}()[I]?"keydown":"keypress"),Z=="keypress"&&F.length&&(Z="keydown"),Z}function B(I,F){var Z,G,W,K=[];for(Z=function(J){return J==="+"?["+"]:(J=J.replace(/\+{2}/g,"+plus")).split("+")}(I),W=0;W<Z.length;++W)G=Z[W],M[G]&&(G=M[G]),F&&F!="keypress"&&x[G]&&(G=x[G],K.push("shift")),C(G)&&K.push(G);return{key:G,modifiers:K,action:F=j(G,K,F)}}function $(I,F){return I!==null&&I!==f&&(I===F||$(I.parentNode,F))}function U(I){var F=this;if(I=I||f,!(F instanceof U))return new U(I);F.target=I,F._callbacks={},F._directMap={};var Z,G={},W=!1,K=!1,J=!1;function q(we){we=we||{};var Be,nt=!1;for(Be in G)we[Be]?nt=!0:G[Be]=0;nt||(J=!1)}function ne(we,Be,nt,Ot,Qe,lt){var dt,Tt,bn,Ue,Te=[],$e=nt.type;if(!F._callbacks[we])return[];for($e=="keyup"&&C(we)&&(Be=[we]),dt=0;dt<F._callbacks[we].length;++dt)if(Tt=F._callbacks[we][dt],(Ot||!Tt.seq||G[Tt.seq]==Tt.level)&&$e==Tt.action&&($e=="keypress"&&!nt.metaKey&&!nt.ctrlKey||(bn=Be,Ue=Tt.modifiers,bn.sort().join(",")===Ue.sort().join(",")))){var wt=!Ot&&Tt.combo==Qe,Wt=Ot&&Tt.seq==Ot&&Tt.level==lt;(wt||Wt)&&F._callbacks[we].splice(dt,1),Te.push(Tt)}return Te}function oe(we,Be,nt,Ot){F.stopCallback(Be,Be.target||Be.srcElement,nt,Ot)||we(Be,nt)===!1&&(function(Qe){Qe.preventDefault?Qe.preventDefault():Qe.returnValue=!1}(Be),function(Qe){Qe.stopPropagation?Qe.stopPropagation():Qe.cancelBubble=!0}(Be))}function Me(we){typeof we.which!="number"&&(we.which=we.keyCode);var Be=w(we);Be&&(we.type!="keyup"||W!==Be?F.handleKey(Be,function(nt){var Ot=[];return nt.shiftKey&&Ot.push("shift"),nt.altKey&&Ot.push("alt"),nt.ctrlKey&&Ot.push("ctrl"),nt.metaKey&&Ot.push("meta"),Ot}(we),we):W=!1)}function Pe(we,Be,nt,Ot){function Qe(bn){return function(){J=bn,++G[we],clearTimeout(Z),Z=setTimeout(q,1e3)}}function lt(bn){oe(nt,bn,we),Ot!=="keyup"&&(W=w(bn)),setTimeout(q,10)}G[we]=0;for(var dt=0;dt<Be.length;++dt){var Tt=dt+1===Be.length?lt:Qe(Ot||B(Be[dt+1]).action);Ee(Be[dt],Tt,Ot,we,dt)}}function Ee(we,Be,nt,Ot,Qe){F._directMap[we+":"+nt]=Be;var lt,dt=(we=we.replace(/\s+/g," ")).split(" ");dt.length>1?Pe(we,dt,Be,nt):(lt=B(we,nt),F._callbacks[lt.key]=F._callbacks[lt.key]||[],ne(lt.key,lt.modifiers,{type:lt.action},Ot,we,Qe),F._callbacks[lt.key][Ot?"unshift":"push"]({callback:Be,modifiers:lt.modifiers,action:lt.action,seq:Ot,level:Qe,combo:we}))}F._handleKey=function(we,Be,nt){var Ot,Qe=ne(we,Be,nt),lt={},dt=0,Tt=!1;for(Ot=0;Ot<Qe.length;++Ot)Qe[Ot].seq&&(dt=Math.max(dt,Qe[Ot].level));for(Ot=0;Ot<Qe.length;++Ot)if(Qe[Ot].seq){if(Qe[Ot].level!=dt)continue;Tt=!0,lt[Qe[Ot].seq]=1,oe(Qe[Ot].callback,nt,Qe[Ot].combo,Qe[Ot].seq)}else Tt||oe(Qe[Ot].callback,nt,Qe[Ot].combo);var bn=nt.type=="keypress"&&K;nt.type!=J||C(we)||bn||q(lt),K=Tt&&nt.type=="keydown"},F._bindMultiple=function(we,Be,nt){for(var Ot=0;Ot<we.length;++Ot)Ee(we[Ot],Be,nt)},E(I,"keypress",Me),E(I,"keydown",Me),E(I,"keyup",Me)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,o,r){var s=r(7),c=r(34),f=r(30),d=r(33),_=s.TypeError;n.exports=function(y,b){var x,M;if(b==="string"&&f(x=y.toString)&&!d(M=c(x,y))||f(x=y.valueOf)&&!d(M=c(x,y))||b!=="string"&&f(x=y.toString)&&!d(M=c(x,y)))return M;throw _("Can't convert object to primitive value")}},function(n,o,r){var s=r(7),c=r(30),f=r(92),d=s.WeakMap;n.exports=c(d)&&/native code/.test(f(d))},function(n,o,r){var s=r(36),c=r(38),f=r(32),d=r(41),_=r(77);n.exports=s?Object.defineProperties:function(y,b){f(y);for(var x,M=d(b),S=_(b),E=S.length,w=0;E>w;)c.f(y,x=S[w++],M[x]);return y}},function(n,o,r){var s=r(7);n.exports=s},function(n,o,r){var s=r(7),c=r(96),f=r(99),d=r(33),_=r(28)("species"),y=s.Array;n.exports=function(b){var x;return c(b)&&(x=b.constructor,(f(x)&&(x===y||c(x.prototype))||d(x)&&(x=x[_])===null)&&(x=void 0)),x===void 0?y:x}},function(n,o,r){var s=r(113),c=r(97);n.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,o,r){var s=r(142).IteratorPrototype,c=r(60),f=r(69),d=r(78),_=r(80),y=function(){return this};n.exports=function(b,x,M,S){var E=x+" Iterator";return b.prototype=c(s,{next:f(+!S,M)}),d(b,E,!1,!0),_[E]=y,b}},function(n,o,r){var s=r(7),c=r(30),f=s.String,d=s.TypeError;n.exports=function(_){if(typeof _=="object"||c(_))return _;throw d("Can't set "+f(_)+" as a prototype")}},function(n,o,r){var s=r(16),c=r(7),f=r(15),d=r(95),_=r(42),y=r(144),b=r(117),x=r(119),M=r(30),S=r(33),E=r(18),w=r(120),C=r(78),j=r(148);n.exports=function(B,$,U){var I=B.indexOf("Map")!==-1,F=B.indexOf("Weak")!==-1,Z=I?"set":"add",G=c[B],W=G&&G.prototype,K=G,J={},q=function(we){var Be=f(W[we]);_(W,we,we=="add"?function(nt){return Be(this,nt===0?0:nt),this}:we=="delete"?function(nt){return!(F&&!S(nt))&&Be(this,nt===0?0:nt)}:we=="get"?function(nt){return F&&!S(nt)?void 0:Be(this,nt===0?0:nt)}:we=="has"?function(nt){return!(F&&!S(nt))&&Be(this,nt===0?0:nt)}:function(nt,Ot){return Be(this,nt===0?0:nt,Ot),this})};if(d(B,!M(G)||!(F||W.forEach&&!E(function(){new G().entries().next()}))))K=U.getConstructor($,B,I,Z),y.enable();else if(d(B,!0)){var ne=new K,oe=ne[Z](F?{}:-0,1)!=ne,Me=E(function(){ne.has(1)}),Pe=w(function(we){new G(we)}),Ee=!F&&E(function(){for(var we=new G,Be=5;Be--;)we[Z](Be,Be);return!we.has(-0)});Pe||((K=$(function(we,Be){x(we,W);var nt=j(new G,we,K);return Be!=null&&b(Be,nt[Z],{that:nt,AS_ENTRIES:I}),nt})).prototype=W,W.constructor=K),(Me||Ee)&&(q("delete"),q("has"),I&&q("get")),(Ee||oe)&&q(Z),F&&W.clear&&delete W.clear}return J[B]=K,s({global:!0,forced:K!=G},J),C(K,B),F||U.setStrong(K,B,I),K}},function(n,o,r){var s=r(18),c=r(33),f=r(51),d=r(184),_=Object.isExtensible,y=s(function(){});n.exports=y||d?function(b){return!!c(b)&&(!d||f(b)!="ArrayBuffer")&&(!_||_(b))}:_},function(n,o,r){var s=r(18);n.exports=s(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,o,r){var s=r(38).f,c=r(60),f=r(149),d=r(64),_=r(119),y=r(117),b=r(116),x=r(150),M=r(36),S=r(144).fastKey,E=r(58),w=E.set,C=E.getterFor;n.exports={getConstructor:function(j,B,$,U){var I=j(function(K,J){_(K,F),w(K,{type:B,index:c(null),first:void 0,last:void 0,size:0}),M||(K.size=0),J!=null&&y(J,K[U],{that:K,AS_ENTRIES:$})}),F=I.prototype,Z=C(B),G=function(K,J,q){var ne,oe,Me=Z(K),Pe=W(K,J);return Pe?Pe.value=q:(Me.last=Pe={index:oe=S(J,!0),key:J,value:q,previous:ne=Me.last,next:void 0,removed:!1},Me.first||(Me.first=Pe),ne&&(ne.next=Pe),M?Me.size++:K.size++,oe!=="F"&&(Me.index[oe]=Pe)),K},W=function(K,J){var q,ne=Z(K),oe=S(J);if(oe!=="F")return ne.index[oe];for(q=ne.first;q;q=q.next)if(q.key==J)return q};return f(F,{clear:function(){for(var K=Z(this),J=K.index,q=K.first;q;)q.removed=!0,q.previous&&(q.previous=q.previous.next=void 0),delete J[q.index],q=q.next;K.first=K.last=void 0,M?K.size=0:this.size=0},delete:function(K){var J=this,q=Z(J),ne=W(J,K);if(ne){var oe=ne.next,Me=ne.previous;delete q.index[ne.index],ne.removed=!0,Me&&(Me.next=oe),oe&&(oe.previous=Me),q.first==ne&&(q.first=oe),q.last==ne&&(q.last=Me),M?q.size--:J.size--}return!!ne},forEach:function(K){for(var J,q=Z(this),ne=d(K,arguments.length>1?arguments[1]:void 0);J=J?J.next:q.first;)for(ne(J.value,J.key,this);J&&J.removed;)J=J.previous},has:function(K){return!!W(this,K)}}),f(F,$?{get:function(K){var J=W(this,K);return J&&J.value},set:function(K,J){return G(this,K===0?0:K,J)}}:{add:function(K){return G(this,K=K===0?0:K,K)}}),M&&s(F,"size",{get:function(){return Z(this).size}}),I},setStrong:function(j,B,$){var U=B+" Iterator",I=C(B),F=C(U);b(j,B,function(Z,G){w(this,{type:U,target:Z,state:I(Z),kind:G,last:void 0})},function(){for(var Z=F(this),G=Z.kind,W=Z.last;W&&W.removed;)W=W.previous;return Z.target&&(Z.last=W=W?W.next:Z.state.first)?G=="keys"?{value:W.key,done:!1}:G=="values"?{value:W.value,done:!1}:{value:[W.key,W.value],done:!1}:(Z.target=void 0,{value:void 0,done:!0})},$?"entries":"values",!$,!0),x(B)}}},function(n,o,r){var s=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(f){return s(this,f,arguments.length>1?arguments[1]:void 0)}},function(n,o,r){var s=r(7),c=r(64),f=r(34),d=r(40),_=r(189),y=r(145),b=r(99),x=r(45),M=r(63),S=r(146),E=r(118),w=s.Array;n.exports=function(C){var j=d(C),B=b(this),$=arguments.length,U=$>1?arguments[1]:void 0,I=U!==void 0;I&&(U=c(U,$>2?arguments[2]:void 0));var F,Z,G,W,K,J,q=E(j),ne=0;if(!q||this==w&&y(q))for(F=x(j),Z=B?new this(F):w(F);F>ne;ne++)J=I?U(j[ne],ne):j[ne],M(Z,ne,J);else for(K=(W=S(j,q)).next,Z=B?new this:[];!(G=f(K,W)).done;ne++)J=I?_(W,U,[G.value,ne],!0):G.value,M(Z,ne,J);return Z.length=ne,Z}},function(n,o,r){var s=r(32),c=r(147);n.exports=function(f,d,_,y){try{return y?d(s(_)[0],_[1]):d(_)}catch(b){c(f,"throw",b)}}},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var f=c(".","s");return!(f.dotAll&&f.exec(`
`)&&f.flags==="s")})},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var f=c("(?<a>b)","g");return f.exec("b").groups.a!=="b"||"b".replace(f,"$<a>c")!=="bc"})},function(n,o,r){var s=r(16),c=r(15),f=r(56),d=r(40),_=r(45),y=r(39),b=r(18),x=r(193),M=r(121),S=r(194),E=r(195),w=r(70),C=r(196),j=[],B=c(j.sort),$=c(j.push),U=b(function(){j.sort(void 0)}),I=b(function(){j.sort(null)}),F=M("sort"),Z=!b(function(){if(w)return w<70;if(!(S&&S>3)){if(E)return!0;if(C)return C<603;var G,W,K,J,q="";for(G=65;G<76;G++){switch(W=String.fromCharCode(G),G){case 66:case 69:case 70:case 72:K=3;break;case 68:case 71:K=4;break;default:K=2}for(J=0;J<47;J++)j.push({k:W+J,v:K})}for(j.sort(function(ne,oe){return oe.v-ne.v}),J=0;J<j.length;J++)W=j[J].k.charAt(0),q.charAt(q.length-1)!==W&&(q+=W);return q!=="DGBEFHACIJK"}});s({target:"Array",proto:!0,forced:U||!I||!F||!Z},{sort:function(G){G!==void 0&&f(G);var W=d(this);if(Z)return G===void 0?B(W):B(W,G);var K,J,q=[],ne=_(W);for(J=0;J<ne;J++)J in W&&$(q,W[J]);for(x(q,function(oe){return function(Me,Pe){return Pe===void 0?-1:Me===void 0?1:oe!==void 0?+oe(Me,Pe)||0:y(Me)>y(Pe)?1:-1}}(G)),K=q.length,J=0;J<K;)W[J]=q[J++];for(;J<ne;)delete W[J++];return W}})},function(n,o,r){var s=r(114),c=Math.floor,f=function(y,b){var x=y.length,M=c(x/2);return x<8?d(y,b):_(y,f(s(y,0,M),b),f(s(y,M),b),b)},d=function(y,b){for(var x,M,S=y.length,E=1;E<S;){for(M=E,x=y[E];M&&b(y[M-1],x)>0;)y[M]=y[--M];M!==E++&&(y[M]=x)}return y},_=function(y,b,x,M){for(var S=b.length,E=x.length,w=0,C=0;w<S||C<E;)y[w+C]=w<S&&C<E?M(b[w],x[C])<=0?b[w++]:x[C++]:w<S?b[w++]:x[C++];return y};n.exports=f},function(n,o,r){var s=r(55).match(/firefox\/(\d+)/i);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(55);n.exports=/MSIE|Trident/.test(s)},function(n,o,r){var s=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(7),c=r(159),f=s.TypeError;n.exports=function(d){if(c(d))throw f("The method doesn't accept regular expressions");return d}},function(n,o,r){var s=r(28)("match");n.exports=function(c){var f=/./;try{"/./"[c](f)}catch{try{return f[s]=!1,"/./"[c](f)}catch{}}return!1}},function(n,o,r){r(16)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},function(n,o,r){var s=r(73).PROPER,c=r(18),f=r(162);n.exports=function(d){return c(function(){return!!f[d]()||"​᠎"[d]()!=="​᠎"||s&&f[d].name!==d})}},function(n,o,r){var s=r(15),c=r(40),f=Math.floor,d=s("".charAt),_=s("".replace),y=s("".slice),b=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x=/\$([$&'`]|\d{1,2})/g;n.exports=function(M,S,E,w,C,j){var B=E+M.length,$=w.length,U=x;return C!==void 0&&(C=c(C),U=b),_(j,U,function(I,F){var Z;switch(d(F,0)){case"$":return"$";case"&":return M;case"`":return y(S,0,E);case"'":return y(S,B);case"<":Z=C[y(F,1,-1)];break;default:var G=+F;if(G===0)return I;if(G>$){var W=f(G/10);return W===0?I:W<=$?w[W-1]===void 0?d(F,1):w[W-1]+d(F,1):I}Z=w[G-1]}return Z===void 0?"":Z})}},function(n,o,r){var s=r(36),c=r(15),f=r(34),d=r(18),_=r(77),y=r(112),b=r(84),x=r(40),M=r(85),S=Object.assign,E=Object.defineProperty,w=c([].concat);n.exports=!S||d(function(){if(s&&S({b:1},S(E({},"a",{enumerable:!0,get:function(){E(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var C={},j={},B=Symbol(),$="abcdefghijklmnopqrst";return C[B]=7,$.split("").forEach(function(U){j[U]=U}),S({},C)[B]!=7||_(S({},j)).join("")!=$})?function(C,j){for(var B=x(C),$=arguments.length,U=1,I=y.f,F=b.f;$>U;)for(var Z,G=M(arguments[U++]),W=I?w(_(G),I(G)):_(G),K=W.length,J=0;K>J;)Z=W[J++],s&&!f(F,G,Z)||(B[Z]=G[Z]);return B}:S},function(n,o,r){var s=r(7),c=r(15),f=r(56),d=r(33),_=r(35),y=r(98),b=s.Function,x=c([].concat),M=c([].join),S={},E=function(w,C,j){if(!_(S,C)){for(var B=[],$=0;$<C;$++)B[$]="a["+$+"]";S[C]=b("C,a","return new C("+M(B,",")+")")}return S[C](w,j)};n.exports=b.bind||function(w){var C=f(this),j=C.prototype,B=y(arguments,1),$=function(){var U=x(B,y(arguments));return this instanceof $?E(C,U.length,U):C.apply(w,U)};return d(j)&&($.prototype=j),$}},function(n,o,r){var s=r(35);n.exports=function(c){return c!==void 0&&(s(c,"value")||s(c,"writable"))}},function(n,o,r){var s=r(15),c=r(44),f=r(39),d=/"/g,_=s("".replace);n.exports=function(y,b,x,M){var S=f(c(y)),E="<"+b;return x!==""&&(E+=" "+x+'="'+_(f(M),d,"&quot;")+'"'),E+">"+S+"</"+b+">"}},function(n,o,r){var s=r(18);n.exports=function(c){return s(function(){var f=""[c]('"');return f!==f.toLowerCase()||f.split('"').length>3})}},function(n,o,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,o,r){var s,c,f,d,_=r(16),y=r(71),b=r(7),x=r(46),M=r(34),S=r(209),E=r(42),w=r(149),C=r(102),j=r(78),B=r(150),$=r(56),U=r(30),I=r(33),F=r(119),Z=r(92),G=r(117),W=r(120),K=r(164),J=r(168).set,q=r(210),ne=r(213),oe=r(214),Me=r(170),Pe=r(215),Ee=r(58),we=r(95),Be=r(28),nt=r(216),Ot=r(128),Qe=r(70),lt=Be("species"),dt="Promise",Tt=Ee.getterFor(dt),bn=Ee.set,Ue=Ee.getterFor(dt),Te=S&&S.prototype,$e=S,wt=Te,Wt=b.TypeError,St=b.document,Zt=b.process,pn=Me.f,An=pn,yn=!!(St&&St.createEvent&&b.dispatchEvent),ht=U(b.PromiseRejectionEvent),kn="unhandledrejection",Ie=!1,wn=we(dt,function(){var Le=Z($e),st=Le!==String($e);if(!st&&Qe===66||y&&!wt.finally)return!0;if(Qe>=51&&/native code/.test(Le))return!1;var on=new $e(function(In){In(1)}),en=function(In){In(function(){},function(){})};return(on.constructor={})[lt]=en,!(Ie=on.then(function(){})instanceof en)||!st&&nt&&!ht}),nr=wn||!W(function(Le){$e.all(Le).catch(function(){})}),le=function(Le){var st;return!(!I(Le)||!U(st=Le.then))&&st},rr=function(Le,st){if(!Le.notified){Le.notified=!0;var on=Le.reactions;q(function(){for(var en=Le.value,In=Le.state==1,Ar=0;on.length>Ar;){var ui,Si,Zo,ri=on[Ar++],Nn=In?ri.ok:ri.fail,zn=ri.resolve,Zn=ri.reject,ur=ri.domain;try{Nn?(In||(Le.rejection===2&&Vn(Le),Le.rejection=1),Nn===!0?ui=en:(ur&&ur.enter(),ui=Nn(en),ur&&(ur.exit(),Zo=!0)),ui===ri.promise?Zn(Wt("Promise-chain cycle")):(Si=le(ui))?M(Si,ui,zn,Zn):zn(ui)):Zn(en)}catch(oo){ur&&!Zo&&ur.exit(),Zn(oo)}}Le.reactions=[],Le.notified=!1,st&&!Le.rejection&&Sr(Le)})}},Rr=function(Le,st,on){var en,In;yn?((en=St.createEvent("Event")).promise=st,en.reason=on,en.initEvent(Le,!1,!0),b.dispatchEvent(en)):en={promise:st,reason:on},!ht&&(In=b["on"+Le])?In(en):Le===kn&&oe("Unhandled promise rejection",on)},Sr=function(Le){M(J,b,function(){var st,on=Le.facade,en=Le.value;if(uo(Le)&&(st=Pe(function(){Ot?Zt.emit("unhandledRejection",en,on):Rr(kn,on,en)}),Le.rejection=Ot||uo(Le)?2:1,st.error))throw st.value})},uo=function(Le){return Le.rejection!==1&&!Le.parent},Vn=function(Le){M(J,b,function(){var st=Le.facade;Ot?Zt.emit("rejectionHandled",st):Rr("rejectionhandled",st,Le.value)})},fo=function(Le,st,on){return function(en){Le(st,en,on)}},xe=function(Le,st,on){Le.done||(Le.done=!0,on&&(Le=on),Le.value=st,Le.state=2,rr(Le,!0))},Ye=function(Le,st,on){if(!Le.done){Le.done=!0,on&&(Le=on);try{if(Le.facade===st)throw Wt("Promise can't be resolved itself");var en=le(st);en?q(function(){var In={done:!1};try{M(en,st,fo(Ye,In,Le),fo(xe,In,Le))}catch(Ar){xe(In,Ar,Le)}}):(Le.value=st,Le.state=1,rr(Le,!1))}catch(In){xe({done:!1},In,Le)}}};if(wn&&(wt=($e=function(Le){F(this,wt),$(Le),M(s,this);var st=Tt(this);try{Le(fo(Ye,st),fo(xe,st))}catch(on){xe(st,on)}}).prototype,(s=function(Le){bn(this,{type:dt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=w(wt,{then:function(Le,st){var on=Ue(this),en=on.reactions,In=pn(K(this,$e));return In.ok=!U(Le)||Le,In.fail=U(st)&&st,In.domain=Ot?Zt.domain:void 0,on.parent=!0,en[en.length]=In,on.state!=0&&rr(on,!1),In.promise},catch:function(Le){return this.then(void 0,Le)}}),c=function(){var Le=new s,st=Tt(Le);this.promise=Le,this.resolve=fo(Ye,st),this.reject=fo(xe,st)},Me.f=pn=function(Le){return Le===$e||Le===f?new c(Le):An(Le)},!y&&U(S)&&Te!==Object.prototype)){d=Te.then,Ie||(E(Te,"then",function(Le,st){var on=this;return new $e(function(en,In){M(d,on,en,In)}).then(Le,st)},{unsafe:!0}),E(Te,"catch",wt.catch,{unsafe:!0}));try{delete Te.constructor}catch{}C&&C(Te,wt)}_({global:!0,wrap:!0,forced:wn},{Promise:$e}),j($e,dt,!1,!0),B(dt),f=x(dt),_({target:dt,stat:!0,forced:wn},{reject:function(Le){var st=pn(this);return M(st.reject,void 0,Le),st.promise}}),_({target:dt,stat:!0,forced:y||wn},{resolve:function(Le){return ne(y&&this===f?$e:this,Le)}}),_({target:dt,stat:!0,forced:nr},{all:function(Le){var st=this,on=pn(st),en=on.resolve,In=on.reject,Ar=Pe(function(){var ui=$(st.resolve),Si=[],Zo=0,ri=1;G(Le,function(Nn){var zn=Zo++,Zn=!1;ri++,M(ui,st,Nn).then(function(ur){Zn||(Zn=!0,Si[zn]=ur,--ri||en(Si))},In)}),--ri||en(Si)});return Ar.error&&In(Ar.value),on.promise},race:function(Le){var st=this,on=pn(st),en=on.reject,In=Pe(function(){var Ar=$(st.resolve);G(Le,function(ui){M(Ar,st,ui).then(on.resolve,en)})});return In.error&&en(In.value),on.promise}})},function(n,o,r){var s=r(7);n.exports=s.Promise},function(n,o,r){var s,c,f,d,_,y,b,x,M=r(7),S=r(64),E=r(50).f,w=r(168).set,C=r(169),j=r(211),B=r(212),$=r(128),U=M.MutationObserver||M.WebKitMutationObserver,I=M.document,F=M.process,Z=M.Promise,G=E(M,"queueMicrotask"),W=G&&G.value;W||(s=function(){var K,J;for($&&(K=F.domain)&&K.exit();c;){J=c.fn,c=c.next;try{J()}catch(q){throw c?d():f=void 0,q}}f=void 0,K&&K.enter()},C||$||B||!U||!I?!j&&Z&&Z.resolve?((b=Z.resolve(void 0)).constructor=Z,x=S(b.then,b),d=function(){x(s)}):$?d=function(){F.nextTick(s)}:(w=S(w,M),d=function(){w(s)}):(_=!0,y=I.createTextNode(""),new U(s).observe(y,{characterData:!0}),d=function(){y.data=_=!_})),n.exports=W||function(K){var J={fn:K,next:void 0};f&&(f.next=J),c||(c=J,d()),f=J}},function(n,o,r){var s=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(s)&&c.Pebble!==void 0},function(n,o,r){var s=r(55);n.exports=/web0s(?!.*chrome)/i.test(s)},function(n,o,r){var s=r(32),c=r(33),f=r(170);n.exports=function(d,_){if(s(d),c(_)&&_.constructor===d)return _;var y=f.f(d);return(0,y.resolve)(_),y.promise}},function(n,o,r){var s=r(7);n.exports=function(c,f){var d=s.console;d&&d.error&&(arguments.length==1?d.error(c):d.error(c,f))}},function(n,o){n.exports=function(r){try{return{error:!1,value:r()}}catch(s){return{error:!0,value:s}}}},function(n,o){n.exports=typeof window=="object"},function(n,o,r){var s=r(40),c=r(75),f=r(45);n.exports=function(d){for(var _=s(this),y=f(_),b=arguments.length,x=c(b>1?arguments[1]:void 0,y),M=b>2?arguments[2]:void 0,S=M===void 0?y:c(M,y);S>x;)_[x++]=d;return _}},function(n,o,r){var s=r(16),c=r(7),f=r(15),d=r(59),_=r(160),y=r(219),b=r(18),x=c.RangeError,M=c.String,S=Math.floor,E=f(y),w=f("".slice),C=f(1 .toFixed),j=function(I,F,Z){return F===0?Z:F%2==1?j(I,F-1,Z*I):j(I*I,F/2,Z)},B=function(I,F,Z){for(var G=-1,W=Z;++G<6;)W+=F*I[G],I[G]=W%1e7,W=S(W/1e7)},$=function(I,F){for(var Z=6,G=0;--Z>=0;)G+=I[Z],I[Z]=S(G/F),G=G%F*1e7},U=function(I){for(var F=6,Z="";--F>=0;)if(Z!==""||F===0||I[F]!==0){var G=M(I[F]);Z=Z===""?G:Z+E("0",7-G.length)+G}return Z};s({target:"Number",proto:!0,forced:b(function(){return C(8e-5,3)!=="0.000"||C(.9,0)!=="1"||C(1.255,2)!=="1.25"||C(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!b(function(){C({})})},{toFixed:function(I){var F,Z,G,W,K=_(this),J=d(I),q=[0,0,0,0,0,0],ne="",oe="0";if(J<0||J>20)throw x("Incorrect fraction digits");if(K!=K)return"NaN";if(K<=-1e21||K>=1e21)return M(K);if(K<0&&(ne="-",K=-K),K>1e-21)if(Z=(F=function(Me){for(var Pe=0,Ee=Me;Ee>=4096;)Pe+=12,Ee/=4096;for(;Ee>=2;)Pe+=1,Ee/=2;return Pe}(K*j(2,69,1))-69)<0?K*j(2,-F,1):K/j(2,F,1),Z*=4503599627370496,(F=52-F)>0){for(B(q,0,Z),G=J;G>=7;)B(q,1e7,0),G-=7;for(B(q,j(10,G,1),0),G=F-1;G>=23;)$(q,1<<23),G-=23;$(q,1<<G),B(q,1,1),$(q,2),oe=U(q)}else B(q,0,Z),B(q,1<<-F,0),oe=U(q)+E("0",J);return oe=J>0?ne+((W=oe.length)<=J?"0."+E("0",J-W)+oe:w(oe,0,W-J)+"."+w(oe,W-J)):ne+oe}})},function(n,o,r){var s=r(7),c=r(59),f=r(39),d=r(44),_=s.RangeError;n.exports=function(y){var b=f(d(this)),x="",M=c(y);if(M<0||M==1/0)throw _("Wrong number of repetitions");for(;M>0;(M>>>=1)&&(b+=b))1&M&&(x+=b);return x}},function(n,o,r){var s=r(36),c=r(15),f=r(77),d=r(41),_=c(r(84).f),y=c([].push),b=function(x){return function(M){for(var S,E=d(M),w=f(E),C=w.length,j=0,B=[];C>j;)S=w[j++],s&&!_(E,S)||y(B,x?[S,E[S]]:E[S]);return B}};n.exports={entries:b(!0),values:b(!1)}},function(n,o){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,o,r){r.r(o),r.d(o,"observer",function(){return bu}),r.d(o,"LogicFlow",function(){return w1}),r.d(o,"h",function(){return Ie.g}),r.d(o,"LogicFlowUtil",function(){return s}),r.d(o,"BaseNode",function(){return wd}),r.d(o,"RectNode",function(){return f0}),r.d(o,"CircleNode",function(){return m0}),r.d(o,"PolygonNode",function(){return w0}),r.d(o,"DiamondNode",function(){return x0}),r.d(o,"EllipseNode",function(){return N0}),r.d(o,"TextNode",function(){return C0}),r.d(o,"HtmlNode",function(){return L0}),r.d(o,"BaseEdge",function(){return hm}),r.d(o,"LineEdge",function(){return Z0}),r.d(o,"PolylineEdge",function(){return n1}),r.d(o,"BezierEdge",function(){return a1}),r.d(o,"Arrow",function(){return uj}),r.d(o,"BaseEdgeModel",function(){return Tf}),r.d(o,"BezierEdgeModel",function(){return gb}),r.d(o,"LineEdgeModel",function(){return Qu}),r.d(o,"PolylineEdgeModel",function(){return Aa}),r.d(o,"BaseNodeModel",function(){return bd}),r.d(o,"CircleNodeModel",function(){return Sb}),r.d(o,"DiamondNodeModel",function(){return kb}),r.d(o,"EllipseNodeModel",function(){return Cb}),r.d(o,"PolygonNodeModel",function(){return Fb}),r.d(o,"RectNodeModel",function(){return Gb}),r.d(o,"TextNodeModel",function(){return Xb}),r.d(o,"HtmlNodeModel",function(){return Kb}),r.d(o,"EditConfigModel",function(){return of}),r.d(o,"GraphModel",function(){return u2}),r.d(o,"SnaplineModel",function(){return WO}),r.d(o,"Keyboard",function(){return RS}),r.d(o,"get",function(){return R2}),r.d(o,"defaults",function(){return D2}),r.d(o,"ElementState",function(){return Jr}),r.d(o,"ModelType",function(){return Pr}),r.d(o,"ElementType",function(){return mo}),r.d(o,"EventType",function(){return Ln}),r.d(o,"formateAnchorConnectValidateData",function(){return Kl});var s={};r.r(s),r.d(s,"createUuid",function(){return ra}),r.d(s,"refreshGraphId",function(){return Jc}),r.d(s,"StepDrag",function(){return ge}),r.d(s,"setupEdgeModel",function(){return Ft}),r.d(s,"isBboxOverLapping",function(){return Dt}),r.d(s,"filterRepeatPoints",function(){return ct}),r.d(s,"getSimplePolyline",function(){return Yt}),r.d(s,"getExpandedBBox",function(){return Gt}),r.d(s,"pointDirection",function(){return jt}),r.d(s,"getExpandedBBoxPoint",function(){return Et}),r.d(s,"mergeBBox",function(){return Ke}),r.d(s,"getBBoxOfPoints",function(){return ut}),r.d(s,"getPointsFromBBox",function(){return $t}),r.d(s,"isPointOutsideBBox",function(){return tn}),r.d(s,"getBBoxXCrossPoints",function(){return Mt}),r.d(s,"getBBoxYCrossPoints",function(){return rn}),r.d(s,"getBBoxCrossPointsByPoint",function(){return kt}),r.d(s,"estimateDistance",function(){return Xt}),r.d(s,"costByPoints",function(){return At}),r.d(s,"heuristicCostEstimate",function(){return Kt}),r.d(s,"rebuildPath",function(){return Cn}),r.d(s,"removeClosePointFromOpenList",function(){return Xn}),r.d(s,"isSegmentsIntersected",function(){return It}),r.d(s,"isSegmentCrossingBBox",function(){return Nt}),r.d(s,"getNextNeighborPoints",function(){return xt}),r.d(s,"pathFinder",function(){return Bn}),r.d(s,"getBoxByOriginNode",function(){return ir}),r.d(s,"pointFilter",function(){return fn}),r.d(s,"getPolylinePoints",function(){return cr}),r.d(s,"getLongestEdge",function(){return qn}),r.d(s,"isSegmentsInNode",function(){return lr}),r.d(s,"isSegmentsCrossNode",function(){return Or}),r.d(s,"getCrossPointInRect",function(){return Vo}),r.d(s,"segmentDirection",function(){return jo}),r.d(s,"points2PointsList",function(){return ar}),r.d(s,"getSimplePoints",function(){return Qo}),r.d(s,"getBytesLength",function(){return Bo}),r.d(s,"getTextWidth",function(){return li}),r.d(s,"getAppendAttributes",function(){return hi}),r.d(s,"getBezierControlPoints",function(){return ei}),r.d(s,"getBezierPoints",function(){return wo}),r.d(s,"getEndTangent",function(){return vi}),r.d(s,"getClosestPointOfPolyline",function(){return Dr}),r.d(s,"pickEdgeConfig",function(){return $n}),r.d(s,"twoPointDistance",function(){return yr}),r.d(s,"createEdgeGenerator",function(){return tr}),r.d(s,"snapToGrid",function(){return rl}),r.d(s,"getGridOffset",function(){return qc}),r.d(s,"sampleCubic",function(){return Fo}),r.d(s,"getThetaOfVector",function(){return Nf}),r.d(s,"degrees",function(){return Dp}),r.d(s,"Vector",function(){return We}),r.d(s,"Point",function(){return h}),r.d(s,"Matrix",function(){return Ts}),r.d(s,"RotateMatrix",function(){return ec}),r.d(s,"ScaleMatrix",function(){return rm}),r.d(s,"TranslateMatrix",function(){return Rf});var c=r(1),f=r(10);if(!f.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var d=r(43),_=Object(d.b)("observerBatching");function y(a){a()}var b=!1;function x(){return b}function M(a){return Object(c.t)(a)}var S,E=1e4,w=new Set;function C(){S===void 0&&(S=setTimeout(j,1e4))}function j(){S=void 0;var a=Date.now();w.forEach(function(i){var l=i.current;l&&a>=l.cleanAt&&(l.reaction.dispose(),i.current=null,w.delete(i))}),w.size>0&&C()}var B=!1,$=[],U={};function I(a){return"observer"+a}function F(a,i,l){i===void 0&&(i="observed"),l===void 0&&(l=U),x();var u,v=function(D){return function(){B?$.push(D):D()}}((l.useForceUpdate||d.d)()),p=f.d.useRef(null);if(!p.current){var m=new c.c(I(i),function(){O.mounted?v():(m.dispose(),p.current=null)}),O=function(D){return{cleanAt:Date.now()+E,reaction:D}}(m);p.current=O,u=p,w.add(u),C()}var k=p.current.reaction;return f.d.useDebugValue(k,M),f.d.useEffect(function(){var D;return D=p,w.delete(D),p.current?p.current.mounted=!0:(p.current={reaction:new c.c(I(i),function(){v()}),cleanAt:1/0},v()),function(){p.current.reaction.dispose(),p.current=null}},[]),function(D){B=!0,$=[];try{var V=D();B=!1;var ee=$.length>0?$:void 0;return f.d.useLayoutEffect(function(){ee&&ee.forEach(function(te){return te()})},[ee]),V}finally{B=!1}}(function(){var D,V;if(k.track(function(){try{D=a()}catch(ee){V=ee}}),V)throw V;return D})}var Z=function(){return Z=Object.assign||function(a){for(var i,l=1,u=arguments.length;l<u;l++)for(var v in i=arguments[l])Object.prototype.hasOwnProperty.call(i,v)&&(a[v]=i[v]);return a},Z.apply(this,arguments)};function G(a,i){var l,u,v,p=Z({forwardRef:!1},i),m=a.displayName||a.name,O=function(k,D){return F(function(){return a(k,D)},m)};return O.displayName=m,l=p.forwardRef?Object(f.f)(Object(f.e)(O)):Object(f.f)(O),u=a,v=l,Object.keys(u).forEach(function(k){W[k]||Object.defineProperty(v,k,Object.getOwnPropertyDescriptor(u,k))}),l.displayName=m,l}var W={$$typeof:!0,render:!0,compare:!0,type:!0};function K(a){var i=a.children,l=a.render,u=i||l;return typeof u!="function"?null:F(u)}function J(a,i,l,u,v){var p=i==="children"?"render":"children",m=typeof a[i]=="function",O=typeof a[p]=="function";return m&&O?new Error("MobX Observer: Do not use children and render in the same time in`"+l):m||O?null:new Error("Invalid prop `"+v+"` of type `"+typeof a[i]+"` supplied to `"+l+"`, expected `function`.")}K.propTypes={children:J,render:J},K.displayName="Observer";var q;(q=f.g)||(q=y),Object(c.n)({reactionScheduler:q}),Object(d.a)()[_]=!0;var ne=0,oe={};function Me(a){return oe[a]||(oe[a]=function(i){if(typeof Symbol=="function")return Symbol(i);var l="__$mobx-react "+i+" ("+ne+")";return ne++,l}(a)),oe[a]}function Pe(a,i){if(Ee(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var l=Object.keys(a),u=Object.keys(i);if(l.length!==u.length)return!1;for(var v=0;v<l.length;v++)if(!Object.hasOwnProperty.call(i,l[v])||!Ee(a[l[v]],i[l[v]]))return!1;return!0}function Ee(a,i){return a===i?a!==0||1/a==1/i:a!=a&&i!=i}function we(a,i,l){Object.hasOwnProperty.call(a,i)?a[i]=l:Object.defineProperty(a,i,{enumerable:!1,configurable:!0,writable:!0,value:l})}var Be=Me("patchMixins"),nt=Me("patchedDefinition");function Ot(a,i){for(var l=this,u=arguments.length,v=new Array(u>2?u-2:0),p=2;p<u;p++)v[p-2]=arguments[p];i.locks++;try{var m;return a!=null&&(m=a.apply(this,v)),m}finally{i.locks--,i.locks===0&&i.methods.forEach(function(O){O.apply(l,v)})}}function Qe(a,i){return function(){for(var l=arguments.length,u=new Array(l),v=0;v<l;v++)u[v]=arguments[v];Ot.call.apply(Ot,[this,a,i].concat(u))}}function lt(a,i,l){var u=function(O,k){var D=O[Be]=O[Be]||{},V=D[k]=D[k]||{};return V.locks=V.locks||0,V.methods=V.methods||[],V}(a,i);u.methods.indexOf(l)<0&&u.methods.push(l);var v=Object.getOwnPropertyDescriptor(a,i);if(!v||!v[nt]){var p=a[i],m=dt(a,i,v?v.enumerable:void 0,u,p);Object.defineProperty(a,i,m)}}function dt(a,i,l,u,v){var p,m=Qe(v,u);return(p={})[nt]=!0,p.get=function(){return m},p.set=function(O){if(this===a)m=Qe(O,u);else{var k=dt(this,i,l,u,O);Object.defineProperty(this,i,k)}},p.configurable=!0,p.enumerable=l,p}var Tt=c.a||"$mobx",bn=Me("isMobXReactObserver"),Ue=Me("isUnmounted"),Te=Me("skipRender"),$e=Me("isForcingUpdate");function wt(a){var i=a.prototype;if(a[bn]?Wt(i):a[bn]=!0,i.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(a.__proto__!==f.b)if(i.shouldComponentUpdate){if(i.shouldComponentUpdate!==Zt)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else i.shouldComponentUpdate=Zt;pn(i,"props"),pn(i,"state");var l=i.render;return i.render=function(){return St.call(this,l)},lt(i,"componentWillUnmount",function(){var u;(u=this.render[Tt])===null||u===void 0||u.dispose(),this[Ue]=!0,!this.render[Tt]&&Wt(this)}),a}function Wt(a){return a.displayName||a.name||a.constructor&&(a.constructor.displayName||a.constructor.name)||"<component>"}function St(a){var i=this;we(this,Te,!1),we(this,$e,!1);var l=Wt(this),u=a.bind(this),v=!1,p=new c.c(l+".render()",function(){if(!v&&(v=!0,i[Ue]!==!0)){var O=!0;try{we(i,$e,!0),i[Te]||f.a.prototype.forceUpdate.call(i),O=!1}finally{we(i,$e,!1),O&&p.dispose()}}});function m(){v=!1;var O=void 0,k=void 0;if(p.track(function(){try{k=Object(c.d)(!1,u)}catch(D){O=D}}),O)throw O;return k}return p.reactComponent=this,m[Tt]=p,this.render=m,m.call(this)}function Zt(a,i){return this.state!==i||!Pe(this.props,a)}function pn(a,i){var l=Me("reactProp_"+i+"_valueHolder"),u=Me("reactProp_"+i+"_atomHolder");function v(){return this[u]||we(this,u,Object(c.o)("reactive "+i)),this[u]}Object.defineProperty(a,i,{configurable:!0,enumerable:!0,get:function(){var p=!1;return c.f&&c.e&&(p=Object(c.f)(!0)),v.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(p),this[l]},set:function(p){this[$e]||Pe(this[l],p)?we(this,l,p):(we(this,l,p),we(this,Te,!0),v.call(this).reportChanged(),we(this,Te,!1))}})}var An=typeof Symbol=="function"&&Symbol.for,yn=An?Symbol.for("react.forward_ref"):typeof f.e=="function"&&Object(f.e)(function(a){return null}).$$typeof,ht=An?Symbol.for("react.memo"):typeof f.f=="function"&&Object(f.f)(function(a){return null}).$$typeof;function kn(a){if(a.isMobxInjector,ht&&a.$$typeof===ht)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(yn&&a.$$typeof===yn){var i=a.render;if(typeof i!="function")throw new Error("render property of ForwardRef was not a function");return Object(f.e)(function(){var l=arguments;return Object(f.c)(K,null,function(){return i.apply(void 0,l)})})}return typeof a!="function"||a.prototype&&a.prototype.render||a.isReactClass||Object.prototype.isPrototypeOf.call(f.a,a)?wt(a):G(a)}if(!f.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Ie=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var wn=function(a,i){for(var l=-1,u=a==null?0:a.length,v=Array(u);++l<u;)v[l]=i(a[l],l,a);return v},nr=function(){this.__data__=[],this.size=0},le=function(a,i){return a===i||a!=a&&i!=i},rr=function(a,i){for(var l=a.length;l--;)if(le(a[l][0],i))return l;return-1},Rr=Array.prototype.splice,Sr=function(a){var i=this.__data__,l=rr(i,a);return!(l<0)&&(l==i.length-1?i.pop():Rr.call(i,l,1),--this.size,!0)},uo=function(a){var i=this.__data__,l=rr(i,a);return l<0?void 0:i[l][1]},Vn=function(a){return rr(this.__data__,a)>-1},fo=function(a,i){var l=this.__data__,u=rr(l,a);return u<0?(++this.size,l.push([a,i])):l[u][1]=i,this};function xe(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}xe.prototype.clear=nr,xe.prototype.delete=Sr,xe.prototype.get=uo,xe.prototype.has=Vn,xe.prototype.set=fo;var Ye=xe,Le=function(){this.__data__=new Ye,this.size=0},st=function(a){var i=this.__data__,l=i.delete(a);return this.size=i.size,l},on=function(a){return this.__data__.get(a)},en=function(a){return this.__data__.has(a)},In=r(31),Ar=In.a.Symbol,ui=Object.prototype,Si=ui.hasOwnProperty,Zo=ui.toString,ri=Ar?Ar.toStringTag:void 0,Nn=function(a){var i=Si.call(a,ri),l=a[ri];try{a[ri]=void 0;var u=!0}catch{}var v=Zo.call(a);return u&&(i?a[ri]=l:delete a[ri]),v},zn=Object.prototype.toString,Zn=function(a){return zn.call(a)},ur=Ar?Ar.toStringTag:void 0,oo=function(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":ur&&ur in Object(a)?Nn(a):Zn(a)},Vr=function(a){var i=typeof a;return a!=null&&(i=="object"||i=="function")},gl,Wa=function(a){if(!Vr(a))return!1;var i=oo(a);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},_l=In.a["__core-js_shared__"],ls=(gl=/[^.]+$/.exec(_l&&_l.keys&&_l.keys.IE_PROTO||""))?"Symbol(src)_1."+gl:"",tp=function(a){return!!ls&&ls in a},wc=Function.prototype.toString,ma=function(a){if(a!=null){try{return wc.call(a)}catch{}try{return a+""}catch{}}return""},Bs=/^\[object .+?Constructor\]$/,Dn=Function.prototype,Vd=Object.prototype,So=Dn.toString,Ec=Vd.hasOwnProperty,Ji=RegExp("^"+So.call(Ec).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=function(a){return!(!Vr(a)||tp(a))&&(Wa(a)?Ji:Bs).test(ma(a))},Pu=function(a,i){return a==null?void 0:a[i]},Da=function(a,i){var l=Pu(a,i);return aa(l)?l:void 0},ya=Da(In.a,"Map"),ja=Da(Object,"create"),Oc=function(){this.__data__=ja?ja(null):{},this.size=0},Sc=function(a){var i=this.has(a)&&delete this.__data__[a];return this.size-=i?1:0,i},Bd=Object.prototype.hasOwnProperty,Us=function(a){var i=this.__data__;if(ja){var l=i[a];return l==="__lodash_hash_undefined__"?void 0:l}return Bd.call(i,a)?i[a]:void 0},Ud=Object.prototype.hasOwnProperty,xc=function(a){var i=this.__data__;return ja?i[a]!==void 0:Ud.call(i,a)},np=function(a,i){var l=this.__data__;return this.size+=this.has(a)?0:1,l[a]=ja&&i===void 0?"__lodash_hash_undefined__":i,this};function Ll(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Ll.prototype.clear=Oc,Ll.prototype.delete=Sc,Ll.prototype.get=Us,Ll.prototype.has=xc,Ll.prototype.set=np;var Gd=Ll,bl=function(){this.size=0,this.__data__={hash:new Gd,map:new(ya||Ye),string:new Gd}},Mc=function(a){var i=typeof a;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?a!=="__proto__":a===null},Ru=function(a,i){var l=a.__data__;return Mc(i)?l[typeof i=="string"?"string":"hash"]:l.map},Ac=function(a){var i=Ru(this,a).delete(a);return this.size-=i?1:0,i},Tc=function(a){return Ru(this,a).get(a)},rp=function(a){return Ru(this,a).has(a)},zd=function(a,i){var l=Ru(this,a),u=l.size;return l.set(a,i),this.size+=l.size==u?0:1,this};function Zr(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Zr.prototype.clear=bl,Zr.prototype.delete=Ac,Zr.prototype.get=Tc,Zr.prototype.has=rp,Zr.prototype.set=zd;var qr=Zr,Hd=function(a,i){var l=this.__data__;if(l instanceof Ye){var u=l.__data__;if(!ya||u.length<199)return u.push([a,i]),this.size=++l.size,this;l=this.__data__=new qr(u)}return l.set(a,i),this.size=l.size,this};function ss(a){var i=this.__data__=new Ye(a);this.size=i.size}ss.prototype.clear=Le,ss.prototype.delete=st,ss.prototype.get=on,ss.prototype.has=en,ss.prototype.set=Hd;var ga=ss,Cu=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},Wd=function(a){return this.__data__.has(a)};function zo(a){var i=-1,l=a==null?0:a.length;for(this.__data__=new qr;++i<l;)this.add(a[i])}zo.prototype.add=zo.prototype.push=Cu,zo.prototype.has=Wd;var $l=zo,Fl=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u;)if(i(a[l],l,a))return!0;return!1},Du=function(a,i){return a.has(i)},us=function(a,i,l,u,v,p){var m=1&l,O=a.length,k=i.length;if(O!=k&&!(m&&k>O))return!1;var D=p.get(a),V=p.get(i);if(D&&V)return D==i&&V==a;var ee=-1,te=!0,_e=2&l?new $l:void 0;for(p.set(a,i),p.set(i,a);++ee<O;){var Ne=a[ee],je=i[ee];if(u)var at=m?u(je,Ne,ee,i,a,p):u(Ne,je,ee,a,i,p);if(at!==void 0){if(at)continue;te=!1;break}if(_e){if(!Fl(i,function(it,_t){if(!Du(_e,_t)&&(Ne===it||v(Ne,it,l,u,p)))return _e.push(_t)})){te=!1;break}}else if(Ne!==je&&!v(Ne,je,l,u,p)){te=!1;break}}return p.delete(a),p.delete(i),te},xi=In.a.Uint8Array,kc=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u,v){l[++i]=[v,u]}),l},Xd=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u){l[++i]=u}),l},Nc=Ar?Ar.prototype:void 0,Fi=Nc?Nc.valueOf:void 0,ci=function(a,i,l,u,v,p,m){switch(l){case"[object DataView]":if(a.byteLength!=i.byteLength||a.byteOffset!=i.byteOffset)return!1;a=a.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(a.byteLength!=i.byteLength||!p(new xi(a),new xi(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return le(+a,+i);case"[object Error]":return a.name==i.name&&a.message==i.message;case"[object RegExp]":case"[object String]":return a==i+"";case"[object Map]":var O=kc;case"[object Set]":var k=1&u;if(O||(O=Xd),a.size!=i.size&&!k)return!1;var D=m.get(a);if(D)return D==i;u|=2,m.set(a,i);var V=us(O(a),O(i),u,v,p,m);return m.delete(a),V;case"[object Symbol]":if(Fi)return Fi.call(a)==Fi.call(i)}return!1},_a=function(a,i){for(var l=-1,u=i.length,v=a.length;++l<u;)a[v+l]=i[l];return a},po=Array.isArray,op=function(a,i,l){var u=i(a);return po(a)?u:_a(u,l(a))},Vi=function(a,i){for(var l=-1,u=a==null?0:a.length,v=0,p=[];++l<u;){var m=a[l];i(m,l,a)&&(p[v++]=m)}return p},qd=function(){return[]},Yd=Object.prototype.propertyIsEnumerable,Bi=Object.getOwnPropertySymbols,Qi=Bi?function(a){return a==null?[]:(a=Object(a),Vi(Bi(a),function(i){return Yd.call(a,i)}))}:qd,Pc=function(a,i){for(var l=-1,u=Array(a);++l<a;)u[l]=i(l);return u},zr=function(a){return a!=null&&typeof a=="object"},di=function(a){return zr(a)&&oo(a)=="[object Arguments]"},ju=Object.prototype,Kd=ju.hasOwnProperty,Rc=ju.propertyIsEnumerable,Iu=di(function(){return arguments}())?di:function(a){return zr(a)&&Kd.call(a,"callee")&&!Rc.call(a,"callee")},Xa=Iu,Ui=r(48),cs=/^(?:0|[1-9]\d*)$/,ea=function(a,i){var l=typeof a;return!!(i=i??9007199254740991)&&(l=="number"||l!="symbol"&&cs.test(a))&&a>-1&&a%1==0&&a<i},ba=function(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=9007199254740991},Lr={};Lr["[object Float32Array]"]=Lr["[object Float64Array]"]=Lr["[object Int8Array]"]=Lr["[object Int16Array]"]=Lr["[object Int32Array]"]=Lr["[object Uint8Array]"]=Lr["[object Uint8ClampedArray]"]=Lr["[object Uint16Array]"]=Lr["[object Uint32Array]"]=!0,Lr["[object Arguments]"]=Lr["[object Array]"]=Lr["[object ArrayBuffer]"]=Lr["[object Boolean]"]=Lr["[object DataView]"]=Lr["[object Date]"]=Lr["[object Error]"]=Lr["[object Function]"]=Lr["[object Map]"]=Lr["[object Number]"]=Lr["[object Object]"]=Lr["[object RegExp]"]=Lr["[object Set]"]=Lr["[object String]"]=Lr["[object WeakMap]"]=!1;var Gi=function(a){return zr(a)&&ba(a.length)&&!!Lr[oo(a)]},Ia=function(a){return function(i){return a(i)}},gi=r(49),ds=gi.a&&gi.a.isTypedArray,Vl=ds?Ia(ds):Gi,La=Object.prototype.hasOwnProperty,_o=function(a,i){var l=po(a),u=!l&&Xa(a),v=!l&&!u&&Object(Ui.a)(a),p=!l&&!u&&!v&&Vl(a),m=l||u||v||p,O=m?Pc(a.length,String):[],k=O.length;for(var D in a)!i&&!La.call(a,D)||m&&(D=="length"||v&&(D=="offset"||D=="parent")||p&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||ea(D,k))||O.push(D);return O},Gs=Object.prototype,qa=function(a){var i=a&&a.constructor;return a===(typeof i=="function"&&i.prototype||Gs)},wa=function(a,i){return function(l){return a(i(l))}},Cc=wa(Object.keys,Object),ip=Object.prototype.hasOwnProperty,Dc=function(a){if(!qa(a))return Cc(a);var i=[];for(var l in Object(a))ip.call(a,l)&&l!="constructor"&&i.push(l);return i},Jo=function(a){return a!=null&&ba(a.length)&&!Wa(a)},zs=function(a){return Jo(a)?_o(a):Dc(a)},Ya=function(a){return op(a,zs,Qi)},oi=Object.prototype.hasOwnProperty,jc=function(a,i,l,u,v,p){var m=1&l,O=Ya(a),k=O.length;if(k!=Ya(i).length&&!m)return!1;for(var D=k;D--;){var V=O[D];if(!(m?V in i:oi.call(i,V)))return!1}var ee=p.get(a),te=p.get(i);if(ee&&te)return ee==i&&te==a;var _e=!0;p.set(a,i),p.set(i,a);for(var Ne=m;++D<k;){var je=a[V=O[D]],at=i[V];if(u)var it=m?u(at,je,V,i,a,p):u(je,at,V,a,i,p);if(!(it===void 0?je===at||v(je,at,l,u,p):it)){_e=!1;break}Ne||(Ne=V=="constructor")}if(_e&&!Ne){var _t=a.constructor,zt=i.constructor;_t==zt||!("constructor"in a)||!("constructor"in i)||typeof _t=="function"&&_t instanceof _t&&typeof zt=="function"&&zt instanceof zt||(_e=!1)}return p.delete(a),p.delete(i),_e},la=Da(In.a,"DataView"),Ea=Da(In.a,"Promise"),Lu=Da(In.a,"Set"),zi=Da(In.a,"WeakMap"),ta="[object Map]",fi="[object Promise]",sa="[object Set]",Ii="[object WeakMap]",ft="[object DataView]",Vt=ma(la),Ut=ma(ya),vn=ma(Ea),hr=ma(Lu),$r=ma(zi),bo=oo;(la&&bo(new la(new ArrayBuffer(1)))!=ft||ya&&bo(new ya)!=ta||Ea&&bo(Ea.resolve())!=fi||Lu&&bo(new Lu)!=sa||zi&&bo(new zi)!=Ii)&&(bo=function(a){var i=oo(a),l=i=="[object Object]"?a.constructor:void 0,u=l?ma(l):"";if(u)switch(u){case Vt:return ft;case Ut:return ta;case vn:return fi;case hr:return sa;case $r:return Ii}return i});var P=bo,R="[object Arguments]",H="[object Array]",ae="[object Object]",be=Object.prototype.hasOwnProperty,qe=function(a,i,l,u,v,p){var m=po(a),O=po(i),k=m?H:P(a),D=O?H:P(i),V=(k=k==R?ae:k)==ae,ee=(D=D==R?ae:D)==ae,te=k==D;if(te&&Object(Ui.a)(a)){if(!Object(Ui.a)(i))return!1;m=!0,V=!1}if(te&&!V)return p||(p=new ga),m||Vl(a)?us(a,i,l,u,v,p):ci(a,i,k,l,u,v,p);if(!(1&l)){var _e=V&&be.call(a,"__wrapped__"),Ne=ee&&be.call(i,"__wrapped__");if(_e||Ne){var je=_e?a.value():a,at=Ne?i.value():i;return p||(p=new ga),v(je,at,l,u,p)}}return!!te&&(p||(p=new ga),jc(a,i,l,u,v,p))},gt=function a(i,l,u,v,p){return i===l||(i==null||l==null||!zr(i)&&!zr(l)?i!=i&&l!=l:qe(i,l,u,v,a,p))},qt=function(a,i,l,u){var v=l.length,p=v;if(a==null)return!p;for(a=Object(a);v--;){var m=l[v];if(m[2]?m[1]!==a[m[0]]:!(m[0]in a))return!1}for(;++v<p;){var O=(m=l[v])[0],k=a[O],D=m[1];if(m[2]){if(k===void 0&&!(O in a))return!1}else{var V=new ga,ee;if(!(ee===void 0?gt(D,k,3,u,V):ee))return!1}}return!0},On=function(a){return a==a&&!Vr(a)},xr=function(a){for(var i=zs(a),l=i.length;l--;){var u=i[l],v=a[u];i[l]=[u,v,On(v)]}return i},dn=function(a,i){return function(l){return l!=null&&l[a]===i&&(i!==void 0||a in Object(l))}},Yr=function(a){var i=xr(a);return i.length==1&&i[0][2]?dn(i[0][0],i[0][1]):function(l){return l===a||qt(l,a,i)}},wr=function(a){return typeof a=="symbol"||zr(a)&&oo(a)=="[object Symbol]"},Ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ua=/^\w*$/,Po=function(a,i){if(po(a))return!1;var l=typeof a;return!(l!="number"&&l!="symbol"&&l!="boolean"&&a!=null&&!wr(a))||ua.test(a)||!Ur.test(a)||i!=null&&a in Object(i)};function na(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var l=function(){var u=arguments,v=i?i.apply(this,u):u[0],p=l.cache;if(p.has(v))return p.get(v);var m=a.apply(this,u);return l.cache=p.set(v,m)||p,m};return l.cache=new(na.Cache||qr),l}na.Cache=qr;var wl=na,El=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bl=/\\(\\)?/g,fs=function(a){var i=wl(a,function(u){return l.size===500&&l.clear(),u}),l=i.cache;return i}(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(El,function(l,u,v,p){i.push(v?p.replace(Bl,"$1"):u||l)}),i}),Ka=Ar?Ar.prototype:void 0,ps=Ka?Ka.toString:void 0,ii=function a(i){if(typeof i=="string")return i;if(po(i))return wn(i,a)+"";if(wr(i))return ps?ps.call(i):"";var l=i+"";return l=="0"&&1/i==-1/0?"-0":l},Ul=function(a){return a==null?"":ii(a)},Ol=function(a,i){return po(a)?a:Po(a,i)?[a]:fs(Ul(a))},Za=function(a){if(typeof a=="string"||wr(a))return a;var i=a+"";return i=="0"&&1/a==-1/0?"-0":i},Ja=function(a,i){for(var l=0,u=(i=Ol(i,a)).length;a!=null&&l<u;)a=a[Za(i[l++])];return l&&l==u?a:void 0},Hs=function(a,i,l){var u=a==null?void 0:Ja(a,i);return u===void 0?l:u},ph=function(a,i){return a!=null&&i in Object(a)},hh=function(a,i,l){for(var u=-1,v=(i=Ol(i,a)).length,p=!1;++u<v;){var m=Za(i[u]);if(!(p=a!=null&&l(a,m)))break;a=a[m]}return p||++u!=v?p:!!(v=a==null?0:a.length)&&ba(v)&&ea(m,v)&&(po(a)||Xa(a))},ap=function(a,i){return a!=null&&hh(a,i,ph)},Ic=function(a,i){return Po(a)&&On(i)?dn(Za(a),i):function(l){var u=Hs(l,a);return u===void 0&&u===i?ap(l,a):gt(i,u,3)}},Ws=function(a){return a},Zd=function(a){return function(i){return i==null?void 0:i[a]}},vh=function(a){return function(i){return Ja(i,a)}},Xs=function(a){return Po(a)?Zd(Za(a)):vh(a)},Lc=function(a){return typeof a=="function"?a:a==null?Ws:typeof a=="object"?po(a)?Ic(a[0],a[1]):Yr(a):Xs(a)},Jd=function(a){return function(i,l,u){for(var v=-1,p=Object(i),m=u(i),O=m.length;O--;){var k=m[++v];if(l(p[k],k,p)===!1)break}return i}}(),Ho=function(a,i){return function(l,u){if(l==null)return l;if(!Jo(l))return a(l,u);for(var v=l.length,p=-1,m=Object(l);++p<v&&u(m[p],p,m)!==!1;);return l}}(function(a,i){return a&&Jd(a,i,zs)}),Hi=function(a,i){var l=-1,u=Jo(a)?Array(a.length):[];return Ho(a,function(v,p,m){u[++l]=i(v,p,m)}),u},Qd=function(a,i){return(po(a)?wn:Hi)(a,Lc(i))};Object(c.n)({isolateGlobalState:!0});var ef=function(){try{var a=Da(Object,"defineProperty");return a({},"",{}),a}catch{}}(),$u=function(a,i,l){i=="__proto__"&&ef?ef(a,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):a[i]=l},Xv=Object.prototype.hasOwnProperty,Fu=function(a,i,l){var u=a[i];Xv.call(a,i)&&le(u,l)&&(l!==void 0||i in a)||$u(a,i,l)},Vu=function(a,i,l,u){var v=!l;l||(l={});for(var p=-1,m=i.length;++p<m;){var O=i[p],k=void 0;k===void 0&&(k=a[O]),v?$u(l,O,k):Fu(l,O,k)}return l},$c=function(a,i,l){switch(l.length){case 0:return a.call(i);case 1:return a.call(i,l[0]);case 2:return a.call(i,l[0],l[1]);case 3:return a.call(i,l[0],l[1],l[2])}return a.apply(i,l)},qs=Math.max,hs=function(a,i,l){return i=qs(i===void 0?a.length-1:i,0),function(){for(var u=arguments,v=-1,p=qs(u.length-i,0),m=Array(p);++v<p;)m[v]=u[i+v];v=-1;for(var O=Array(i+1);++v<i;)O[v]=u[v];return O[i]=l(m),$c(a,this,O)}},Bu=function(a){return function(){return a}},Fc=ef?function(a,i){return ef(a,"toString",{configurable:!0,enumerable:!1,value:Bu(i),writable:!0})}:Ws,vs=Date.now,qv=function(a){var i=0,l=0;return function(){var u=vs(),v=16-(u-l);if(l=u,v>0){if(++i>=800)return arguments[0]}else i=0;return a.apply(void 0,arguments)}},Vc=qv(Fc),Yv=function(a,i){return Vc(hs(a,i,Ws),a+"")},Kv=function(a,i,l){if(!Vr(l))return!1;var u=typeof i;return!!(u=="number"?Jo(l)&&ea(i,l.length):u=="string"&&i in l)&&le(l[i],a)},mh=function(a){return Yv(function(i,l){var u=-1,v=l.length,p=v>1?l[v-1]:void 0,m=v>2?l[2]:void 0;for(p=a.length>3&&typeof p=="function"?(v--,p):void 0,m&&Kv(l[0],l[1],m)&&(p=v<3?void 0:p,v=1),i=Object(i);++u<v;){var O=l[u];O&&a(i,O,u,p)}return i})},tf=Object.prototype.hasOwnProperty,Li=mh(function(a,i){if(qa(i)||Jo(i))Vu(i,zs(i),a);else for(var l in i)tf.call(i,l)&&Fu(a,l,i[l])}),yh=function(a,i,l,u){if(!Vr(a))return a;for(var v=-1,p=(i=Ol(i,a)).length,m=p-1,O=a;O!=null&&++v<p;){var k=Za(i[v]),D=l;if(k==="__proto__"||k==="constructor"||k==="prototype")return a;if(v!=m){var V=O[k];(D=void 0)==void 0&&(D=Vr(V)?V:ea(i[v+1])?[]:{})}Fu(O,k,D),O=O[k]}return a},se=function(a,i,l){for(var u=-1,v=i.length,p={};++u<v;){var m=i[u],O=Ja(a,m);l(O,m)&&yh(p,Ol(m,a),O)}return p},Ys=function(a,i){return se(a,i,function(l,u){return ap(a,u)})},Gl=Ar?Ar.isConcatSpreadable:void 0,$a=function(a){return po(a)||Xa(a)||!!(Gl&&a&&a[Gl])},Fr=function(i,l,u,v,p){var m=-1,O=i.length;for(u||(u=$a),p||(p=[]);++m<O;){var k=i[m];u(k)?_a(p,k):p[p.length]=k}return p},Mi=function(a){return a!=null&&a.length?Fr(a):[]},Hr,Qa,zl,Oa,nf,rf,lp,gh,Hl,Wo,Uu,sp,Wl,el,Bc,ms,Sa,up,cp,tl=function(a){return Vc(hs(a,void 0,Mi),a+"")}(function(a,i){return a==null?{}:Ys(a,i)});function xo(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function _h(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function dp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Xo(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var Jr,ai,Pr,mo,Ln,yo,Uc={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Sl=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],of=(Qa=Xo((Hr=function(){function a(u){(function(v,p){if(!(v instanceof p))throw new TypeError("Cannot call a class as a function")})(this,a),xo(this,"isSilentMode",Qa,this),xo(this,"stopZoomGraph",zl,this),xo(this,"stopScrollGraph",Oa,this),xo(this,"stopMoveGraph",nf,this),xo(this,"adjustEdge",rf,this),xo(this,"adjustEdgeMiddle",lp,this),xo(this,"adjustEdgeStartAndEnd",gh,this),xo(this,"adjustNodePosition",Hl,this),xo(this,"hideAnchors",Wo,this),xo(this,"allowRotation",Uu,this),xo(this,"hoverOutline",sp,this),xo(this,"nodeSelectedOutline",Wl,this),xo(this,"edgeSelectedOutline",el,this),xo(this,"nodeTextEdit",Bc,this),xo(this,"edgeTextEdit",ms,this),xo(this,"nodeTextDraggable",Sa,this),xo(this,"edgeTextDraggable",up,this),xo(this,"autoExpand",cp,this),dp(this,"multipleSelectKey",""),dp(this,"defaultConfig",{}),Li(this,this.getConfigDetail(u))}var i,l;return i=a,(l=[{key:"updateEditConfig",value:function(u){var v=this.getConfigDetail(u);Li(this,v)}},{key:"getConfigDetail",value:function(u){var v=u.isSilentMode,p=u.textEdit,m={};if(v===!1&&Li(m,this.defaultConfig),v===!0&&v!==this.isSilentMode){var O=tl(Uc,Sl);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Li(m,O)}p===!1&&Li(m,{nodeTextEdit:!1,edgeTextEdit:!1});var k=tl(u,Sl);return Li(m,k)}},{key:"getConfig",value:function(){return tl(this,Sl)}}])&&_h(i.prototype,l),a}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zl=Xo(Hr.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oa=Xo(Hr.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nf=Xo(Hr.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rf=Xo(Hr.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lp=Xo(Hr.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gh=Xo(Hr.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hl=Xo(Hr.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wo=Xo(Hr.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Uu=Xo(Hr.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sp=Xo(Hr.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wl=Xo(Hr.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),el=Xo(Hr.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bc=Xo(Hr.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ms=Xo(Hr.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Sa=Xo(Hr.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),up=Xo(Hr.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),cp=Xo(Hr.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xo(Hr.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateEditConfig"),Hr.prototype),Hr);r(65),r(66),function(a){a[a.DEFAULT=1]="DEFAULT",a[a.TEXT_EDIT=2]="TEXT_EDIT",a[a.SHOW_MENU=3]="SHOW_MENU",a[a.ALLOW_CONNECT=4]="ALLOW_CONNECT",a[a.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Jr||(Jr={})),function(a){a.KEY="logic-flow",a.NODE_NAME="lf-node",a.EDGE_NAME="lf-edge"}(ai||(ai={})),function(a){a.NODE="node",a.CIRCLE_NODE="circle-node",a.POLYGON_NODE="polygon-node",a.RECT_NODE="rect-node",a.TEXT_NODE="text-node",a.ELLIPSE_NODE="ellipse-node",a.DIAMOND_NODE="diamond-node",a.HTML_NODE="html-node",a.EDGE="edge",a.LINE_EDGE="line-edge",a.POLYLINE_EDGE="polyline-edge",a.BEZIER_EDGE="bezier-edge",a.GRAPH="graph"}(Pr||(Pr={})),function(a){a.NODE="node",a.EDGE="edge",a.GRAPH="graph"}(mo||(mo={})),function(a){a.ELEMENT_CLICK="element:click",a.NODE_CLICK="node:click",a.NODE_DBCLICK="node:dbclick",a.NODE_DELETE="node:delete",a.NODE_ADD="node:add",a.NODE_GROUP_COPY="node:group-copy-add",a.NODE_DND_ADD="node:dnd-add",a.NODE_DND_DRAG="node:dnd-drag",a.NODE_MOUSEDOWN="node:mousedown",a.NODE_DRAGSTART="node:dragstart",a.NODE_DRAG="node:drag",a.NODE_DROP="node:drop",a.NODE_MOUSEUP="node:mouseup",a.NODE_MOUSEMOVE="node:mousemove",a.NODE_MOUSEENTER="node:mouseenter",a.NODE_MOUSELEAVE="node:mouseleave",a.NODE_CONTEXTMENU="node:contextmenu",a.NODE_ROTATE="node:rotate",a.EDGE_DELETE="edge:delete",a.EDGE_ADD="edge:add",a.EDGE_CLICK="edge:click",a.EDGE_DBCLICK="edge:dbclick",a.EDGE_MOUSEENTER="edge:mouseenter",a.EDGE_MOUSELEAVE="edge:mouseleave",a.EDGE_CONTEXTMENU="edge:contextmenu",a.EDGE_ADJUST="edge:adjust",a.EDGE_EXCHANGE_NODE="edge:exchange-node",a.ANCHOR_DRAGSTART="anchor:dragstart",a.ANCHOR_DRAG="anchor:drag",a.ANCHOR_DROP="anchor:drop",a.ANCHOR_DRAGEND="anchor:dragend",a.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",a.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",a.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",a.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",a.ADJUST_POINT_DRAG="adjustPoint:drag",a.ADJUST_POINT_DROP="adjustPoint:drop",a.ADJUST_POINT_DRAGEND="adjustPoint:dragend",a.BLANK_MOUSEDOWN="blank:mousedown",a.BLANK_DRAGSTART="blank:dragstart",a.BLANK_DRAG="blank:drag",a.BLANK_DROP="blank:drop",a.BLANK_MOUSEMOVE="blank:mousemove",a.BLANK_MOUSEUP="blank:mouseup",a.BLANK_CLICK="blank:click",a.BLANK_CONTEXTMENU="blank:contextmenu",a.SELECTION_MOUSEDOWN="selection:mousedown",a.SELECTION_DRAGSTART="selection:dragstart",a.SELECTION_DRAG="selection:drag",a.SELECTION_DROP="selection:drop",a.SELECTION_MOUSEMOVE="selection:mousemove",a.SELECTION_MOUSEUP="selection:mouseup",a.SELECTION_CONTEXTMENU="selection:contextmenu",a.CONNECTION_NOT_ALLOWED="connection:not-allowed",a.HISTORY_CHANGE="history:change",a.TEXT_UPDATE="text:update",a.GRAPH_TRANSFORM="graph:transform",a.GRAPH_RENDERED="graph:rendered"}(Ln||(Ln={})),function(a){a.HORIZONTAL="horizontal",a.VERTICAL="vertical"}(yo||(yo={}));var Ro,Io,fp,pp,Gc,Wi,af,Gu,Fa;function ys(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Xl(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return Xl(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xl(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Va(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function bh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function xl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function xa(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}(function(a){a[a.DEFAULT=0]="DEFAULT",a[a.INCREASE=1]="INCREASE"})(Ro||(Ro={}));var hp={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},vp=(Io=function(){function a(u,v){(function(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")})(this,a),xl(this,"MINI_SCALE_SIZE",.2),xl(this,"MAX_SCALE_SIZE",16),Va(this,"SCALE_X",fp,this),Va(this,"SKEW_Y",pp,this),Va(this,"SKEW_X",Gc,this),Va(this,"SCALE_Y",Wi,this),Va(this,"TRANSLATE_X",af,this),Va(this,"TRANSLATE_Y",Gu,this),Va(this,"ZOOM_SIZE",Fa,this),xl(this,"eventCenter",void 0),xl(this,"translateLimitMinX",void 0),xl(this,"translateLimitMinY",void 0),xl(this,"translateLimitMaxX",void 0),xl(this,"translateLimitMaxY",void 0),this.eventCenter=u;var p=v.stopMoveGraph,m=p!==void 0&&p;this.updateTranslateLimits(m)}var i,l;return i=a,l=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var v=ys(u,2),p=v[0],m=v[1];return[(p-this.TRANSLATE_X)/this.SCALE_X,(m-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var v=ys(u,2),p=v[0],m=v[1];return[p*this.SCALE_X+this.TRANSLATE_X,m*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,v,p){var m=ys(u,2),O=m[0],k=m[1];return[O+v/this.SCALE_X,k+p/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,v){return[u/this.SCALE_X,v/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],v=arguments.length>1?arguments[1]:void 0,p=this.SCALE_X,m=this.SCALE_Y;return u===!0?(p+=this.ZOOM_SIZE,m+=this.ZOOM_SIZE):u===!1?(p-=this.ZOOM_SIZE,m-=this.ZOOM_SIZE):typeof u=="number"&&(p=u,m=u),p<this.MINI_SCALE_SIZE||p>this.MAX_SCALE_SIZE||(v&&(this.TRANSLATE_X-=(p-this.SCALE_X)*v[0],this.TRANSLATE_Y-=(m-this.SCALE_Y)*v[1]),this.SCALE_X=p,this.SCALE_Y=m,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(Ln.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,v){this.TRANSLATE_X+u<=this.translateLimitMaxX&&this.TRANSLATE_X+u>=this.translateLimitMinX&&(this.TRANSLATE_X+=u),this.TRANSLATE_Y+v<=this.translateLimitMaxY&&this.TRANSLATE_Y+v>=this.translateLimitMinY&&(this.TRANSLATE_Y+=v),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,v,p,m){var O=ys(this.CanvasPointToHtmlPoint([u,v]),2),k=p/2-O[0],D=m/2-O[1];this.TRANSLATE_X+=k,this.TRANSLATE_Y+=D,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(u){var v=ys(Array.isArray(u)&&u.length===4?u:hp[u.toString()],4);this.translateLimitMinX=v[0],this.translateLimitMinY=v[1],this.translateLimitMaxX=v[2],this.translateLimitMaxY=v[3]}}],l&&bh(i.prototype,l),a}(),fp=xa(Io.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),pp=xa(Io.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gc=xa(Io.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wi=xa(Io.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),af=xa(Io.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gu=xa(Io.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fa=xa(Io.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),xa(Io.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(Io.prototype,"zoom"),Io.prototype),xa(Io.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(Io.prototype,"resetZoom"),Io.prototype),xa(Io.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(Io.prototype,"translate"),Io.prototype),xa(Io.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(Io.prototype,"focusOn"),Io.prototype),Io),lf=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u&&i(a[l],l,a)!==!1;);return a},wh=function(a){var i=[];if(a!=null)for(var l in Object(a))i.push(l);return i},Eh=Object.prototype.hasOwnProperty,Oh=function(a){if(!Vr(a))return wh(a);var i=qa(a),l=[];for(var u in a)(u!="constructor"||!i&&Eh.call(a,u))&&l.push(u);return l},sf=function(a){return Jo(a)?_o(a,!0):Oh(a)},mp=r(107),yp=function(a,i){var l=-1,u=a.length;for(i||(i=Array(u));++l<u;)i[l]=a[l];return i},zc=wa(Object.getPrototypeOf,Object),Cr=Object.prototype.hasOwnProperty,Zv=function(a){var i=a.length,l=new a.constructor(i);return i&&typeof a[0]=="string"&&Cr.call(a,"index")&&(l.index=a.index,l.input=a.input),l},gp=function(a){var i=new a.constructor(a.byteLength);return new xi(i).set(new xi(a)),i},Ks=function(a,i){var l=gp(a.buffer);return new a.constructor(l,a.byteOffset,a.byteLength)},Hc=/\w*$/,Jv=function(a){var i=new a.constructor(a.source,Hc.exec(a));return i.lastIndex=a.lastIndex,i},Sh=Ar?Ar.prototype:void 0,Ma=Sh?Sh.valueOf:void 0,Qv=function(a){return Ma?Object(Ma.call(a)):{}},Wc=function(a,i){var l=i?gp(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.length)},uf=function(a,i,l){var u=a.constructor;switch(i){case"[object ArrayBuffer]":return gp(a);case"[object Boolean]":case"[object Date]":return new u(+a);case"[object DataView]":return Ks(a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Wc(a,l);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(a);case"[object RegExp]":return Jv(a);case"[object Symbol]":return Qv(a)}},_p=Object.create,xh=function(){function a(){}return function(i){if(!Vr(i))return{};if(_p)return _p(i);a.prototype=i;var l=new a;return a.prototype=void 0,l}}(),ca=function(a){return typeof a.constructor!="function"||qa(a)?{}:xh(zc(a))},gs=function(a){return zr(a)&&P(a)=="[object Map]"},cf=gi.a&&gi.a.isMap,Zs=cf?Ia(cf):gs,df=function(a){return zr(a)&&P(a)=="[object Set]"},bp=gi.a&&gi.a.isSet,ff=bp?Ia(bp):df,Xc="[object Arguments]",pf="[object Function]",hf="[object Object]",Kr={};Kr[Xc]=Kr["[object Array]"]=Kr["[object ArrayBuffer]"]=Kr["[object DataView]"]=Kr["[object Boolean]"]=Kr["[object Date]"]=Kr["[object Float32Array]"]=Kr["[object Float64Array]"]=Kr["[object Int8Array]"]=Kr["[object Int16Array]"]=Kr["[object Int32Array]"]=Kr["[object Map]"]=Kr["[object Number]"]=Kr["[object Object]"]=Kr["[object RegExp]"]=Kr["[object Set]"]=Kr["[object String]"]=Kr["[object Symbol]"]=Kr["[object Uint8Array]"]=Kr["[object Uint8ClampedArray]"]=Kr["[object Uint16Array]"]=Kr["[object Uint32Array]"]=!0,Kr["[object Error]"]=Kr[pf]=Kr["[object WeakMap]"]=!1;var em=function a(i,l,u,v,p,m){var O,k=1&l;if(O!==void 0)return O;if(!Vr(i))return i;var D=po(i);if(D)O=Zv(i);else{var V=P(i),ee=V==pf||V=="[object GeneratorFunction]";if(Object(Ui.a)(i))return Object(mp.a)(i,k);if(V==hf||V==Xc||ee&&!p)O=ee?{}:ca(i);else{if(!Kr[V])return p?i:{};O=uf(i,V,k)}}m||(m=new ga);var te=m.get(i);if(te)return te;m.set(i,O),ff(i)?i.forEach(function(Ne){O.add(a(Ne,l,u,Ne,i,m))}):Zs(i)&&i.forEach(function(Ne,je){O.set(je,a(Ne,l,u,je,i,m))});var _e=D?void 0:Ya(i);return lf(_e||i,function(Ne,je){_e&&(Ne=i[je=Ne]),Fu(O,je,a(Ne,l,u,je,i,m))}),O},io=function(a){return em(a,5)},vf=function(a,i,l){(l!==void 0&&!le(a[i],l)||l===void 0&&!(i in a))&&$u(a,i,l)},Mh=function(a){return zr(a)&&Jo(a)},Js=Function.prototype,Ah=Object.prototype,zu=Js.toString,Th=Ah.hasOwnProperty,Qs=zu.call(Object),_i=function(a){if(!zr(a)||oo(a)!="[object Object]")return!1;var i=zc(a);if(i===null)return!0;var l=Th.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&zu.call(l)==Qs},nl=function(a,i){if((i!=="constructor"||typeof a[i]!="function")&&i!="__proto__")return a[i]},ql=function(a){return Vu(a,sf(a))},eu=function(a,i,l,u,v,p,m){var O=nl(a,l),k=nl(i,l),D=m.get(k);if(D)vf(a,l,D);else{var V=void 0,ee=V===void 0;if(ee){var te=po(k),_e=!te&&Object(Ui.a)(k),Ne=!te&&!_e&&Vl(k);V=k,te||_e||Ne?po(O)?V=O:Mh(O)?V=yp(O):_e?(ee=!1,V=Object(mp.a)(k,!0)):Ne?(ee=!1,V=Wc(k,!0)):V=[]:_i(k)||Xa(k)?(V=O,Xa(O)?V=ql(O):Vr(O)&&!Wa(O)||(V=ca(k))):ee=!1}ee&&(m.set(k,V),v(V,k,u,p,m),m.delete(k)),vf(a,l,V)}},tu=function a(i,l,u,v,p){i!==l&&Jd(l,function(m,O){if(p||(p=new ga),Vr(m))eu(i,l,O,u,a,v,p);else{var k=void 0;k===void 0&&(k=m),vf(i,O,k)}},sf)},nu=mh(function(a,i,l){tu(a,i,l)}),mf={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},Yl=function(a){var i=io(mf);return a&&(i=nu(i,a)),i};r(82),r(166);function ru(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}var yf=function(){function a(){var u,v,p;(function(m,O){if(!(m instanceof O))throw new TypeError("Cannot call a class as a function")})(this,a),p={},(v="_events")in(u=this)?Object.defineProperty(u,v,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[v]=p}var i,l;return i=a,(l=[{key:"on",value:function(u,v,p){var m=this;return u==null||u.split(",").forEach(function(O){O=O.trim(),m._events[O]||(m._events[O]=[]),m._events[O].push({callback:v,once:!!p})}),this}},{key:"once",value:function(u,v){var p=this;u==null||u.split(",").forEach(function(m){return m=m.trim(),p.on(m,v,!0)})}},{key:"emit",value:function(u,v){var p=this;u==null||u.split(",").forEach(function(m){var O=p._events[m]||[],k=p._events["*"]||[],D=function(V){for(var ee=V.length,te=0;te<ee;te++)if(V[te]){var _e=V[te],Ne=_e.callback;_e.once&&(V.splice(te,1),V.length===0&&delete p._events[m],ee--,te--),Ne.apply(p,[v])}};D(O),D(k)})}},{key:"off",value:function(u,v){var p=this;return u||(this._events={}),u.split(",").forEach(function(m){if(v){for(var O=p._events[m]||[],k=O.length,D=0;D<k;D++)O[D].callback===v&&(O.splice(D,1),k--,D--);O.length===0&&delete p._events[m]}else delete p._events[m]}),this}},{key:"getEvents",value:function(){return this._events}}])&&ru(i.prototype,l),a}();function rl(a,i){return i*Math.round(a/i)||a}function qc(a,i){return a%i}function Yc(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Hu(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return Hu(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hu(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var Wu=function(a,i,l){var u=Yc(a,2),v=u[0],p=u[1],m=Yc(i,2),O=m[0],k=m[1],D=Yc(l,2),V=D[0],ee=D[1];return v>O&&v<V&&p>k&&p<ee},Xu=function(a,i){var l=!1;switch(i.multipleSelectKey){case"meta":l=a.metaKey;break;case"alt":l=a.altKey;break;case"shift":l=a.shiftKey;break;case"ctrl":l=a.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var gf=function(a){return function(i,l,u){var v=Object(i);if(!Jo(i)){var p=Lc(l);i=zs(i),l=function(O){return p(v[O],O,v)}}var m=a(i,l,u);return m>-1?v[p?i[m]:m]:void 0}},qu=function(a,i,l,u){for(var v=a.length,p=l+-1;++p<v;)if(i(a[p],p,a))return p;return-1},wp=/\s/,_f=function(a){for(var i=a.length;i--&&wp.test(a.charAt(i)););return i},kh=/^\s+/,Ep=function(a){return a&&a.slice(0,_f(a)+1).replace(kh,"")},ol=/^[-+]0x[0-9a-f]+$/i,Op=/^0b[01]+$/i,Sp=/^0o[0-7]+$/i,xp=parseInt,Yu=function(a){if(typeof a=="number")return a;if(wr(a))return NaN;if(Vr(a)){var i=typeof a.valueOf=="function"?a.valueOf():a;a=Vr(i)?i+"":i}if(typeof a!="string")return a===0?a:+a;a=Ep(a);var l=Op.test(a);return l||Sp.test(a)?xp(a.slice(2),l?2:8):ol.test(a)?NaN:+a},Ml=1/0,Kc=function(a){return a?(a=Yu(a))===Ml||a===-1/0?17976931348623157e292*(a<0?-1:1):a==a?a:0:a===0?a:0},bf=function(a){var i=Kc(a),l=i%1;return i==i?l?i-l:i:0},wf=Math.max,_s,bs=gf(function(a,i,l){var u=a==null?0:a.length;if(!u)return-1;var v=l==null?0:bf(l);return v<0&&(v=wf(u+v,0)),qu(a,Lc(i),v)}),or=new Uint8Array(16);function Ku(){if(!_s&&!(_s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _s(or)}for(var Zc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,il=function(a){return typeof a=="string"&&Zc.test(a)},pi=[],ou=0;ou<256;++ou)pi.push((ou+256).toString(16).substr(1));var Lo=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(pi[a[i+0]]+pi[a[i+1]]+pi[a[i+2]]+pi[a[i+3]]+"-"+pi[a[i+4]]+pi[a[i+5]]+"-"+pi[a[i+6]]+pi[a[i+7]]+"-"+pi[a[i+8]]+pi[a[i+9]]+"-"+pi[a[i+10]]+pi[a[i+11]]+pi[a[i+12]]+pi[a[i+13]]+pi[a[i+14]]+pi[a[i+15]]).toLowerCase();if(!il(l))throw TypeError("Stringified UUID is invalid");return l},ws=function(a,i,l){var u=(a=a||{}).random||(a.rng||Ku)();return u[6]=15&u[6]|64,u[8]=63&u[8]|128,Lo(u)},ra=function(){return ws()},Jc=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=a.nodes.reduce(function(u,v){return u[v.id]=i+ws(),v.id=u[v.id],u},{});return a.edges.forEach(function(u){u.id=i+ws(),u.sourceNodeId=l[u.sourceNodeId],u.targetNodeId=l[u.targetNodeId]}),a},$i=(r(105),r(127),r(207),function(a,i,l){var u=a.x,v=a.y,p=i.x,m=i.y,O=l.x,k=l.y,D=(k-m)/(O-p),V=m-D*p;return u>=p&&u<=O&&v>=m&&v<=k&&Math.abs(v-D*u+V)<Number.EPSILON});function qo(a){return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},qo(a)}function Al(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function Tl(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Al(Object(l),!0).forEach(function(u){Ef(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Al(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ef(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Pt,iu,Qc,ed,Es,au,Of,Mp,lu,td,Sf,Ap,kl,Tp,al,Os,xf,Nh,Ph,Rh,kp,Mf=function(a){return a.anchors},nd=function(a,i){for(var l,u=i.nodes,v=u.length-1;v>=0;v--){var p=u[v];if(tm(a,p)){var m=p.getTargetAnchor(a);if(m){var O={node:p,anchorIndex:m.index,anchor:m.anchor};l&&!Ch(p,l.node,i)||(l=O)}}}return l},Ch=function(a,i,l){return a.zIndex>i.zIndex||l.nodesMap[a.id].index>l.nodesMap[i.id].index},ll=function(a,i,l,u){return Math.hypot(a-l,i-u)},Ss=function(a,i){var l=!1,u=Mo(i);return a.x>=u.minX-0&&a.x<=u.maxX+0&&a.y>=u.minY-0&&a.y<=u.maxY+0&&(l=!0),l},tm=function(a,i){var l=!1,u=Mo(i);return a.x>=u.minX-5&&a.x<=u.maxX+5&&a.y>=u.minY-5&&a.y<=u.maxY+5&&(l=!0),l},Mo=function(a){var i=a.x,l=a.y,u=a.width,v=a.height;return{minX:i-u/2,minY:l-v/2,maxX:i+u/2,maxY:l+v/2,x:i,y:l,width:u,height:v,centerX:i,centerY:l}},rd=function(a,i,l){var u,v=function(m){var O=m,k=O.x,D=O.y,V=O.width,ee=O.height,te=O.radius;return[{x:k-V/2+te,y:D-ee/2+te,r:te},{x:k+V/2-te,y:D-ee/2+te,r:te},{x:k-V/2+te,y:D+ee/2-te,r:te},{x:k+V/2-te,y:D+ee/2-te,r:te}]}(l),p=Number.MAX_SAFE_INTEGER;return v.forEach(function(m){var O=ll(a.x,a.y,m.x,m.y);O<p&&(p=O,u=m)}),su(a,i,u)},su=function(a,i,l){var u,v=l,p=v.x,m=v.y,O=v.r;if(i===yo.HORIZONTAL){var k=p-Math.sqrt(O*O-(a.y-m)*(a.y-m)),D=p+Math.sqrt(O*O-(a.y-m)*(a.y-m));u={x:Math.abs(k-a.x)<Math.abs(D-a.x)?k:D,y:a.y}}else if(i===yo.VERTICAL){var V=m-Math.sqrt(O*O-(a.x-p)*(a.x-p)),ee=m+Math.sqrt(O*O-(a.x-p)*(a.x-p)),te=Math.abs(V-a.y)<Math.abs(ee-a.y)?V:ee;u={x:a.x,y:te}}return u},od=function(a,i){var l=i,u=!1,v=l.x-l.width/2+l.radius,p=l.x+l.width/2-l.radius,m=l.y-l.height/2+l.radius,O=l.y+l.height/2-l.radius,k=l.x,D=l.y,V=l.width,ee=l.height;return a.y===D+ee/2||a.y===D-ee/2?u=a.x>v&&a.x<p:a.x!==k+V/2&&a.x!==k-V/2||(u=a.y>m&&a.y<O),u},Zu=function(a,i,l){var u,v=l,p=v.x,m=v.y,O=v.rx,k=v.ry;if(i===yo.HORIZONTAL){var D=p-Math.sqrt(O*O-(a.y-m)*(a.y-m)*O*O/(k*k)),V=p+Math.sqrt(O*O-(a.y-m)*(a.y-m)*O*O/(k*k));u={x:Math.abs(D-a.x)<Math.abs(V-a.x)?D:V,y:a.y}}else if(i===yo.VERTICAL){var ee=m-Math.sqrt(k*k-(a.x-p)*(a.x-p)*k*k/(O*O)),te=m+Math.sqrt(k*k-(a.x-p)*(a.x-p)*k*k/(O*O)),_e=Math.abs(ee-a.y)<Math.abs(te-a.y)?ee:te;u={x:a.x,y:_e}}return u},id=function(a,i,l){for(var u,v=l.pointsPosition,p=Number.MAX_SAFE_INTEGER,m=[],O=0;O<v.length;O++)m.push({start:v[O],end:v[(O+1)%v.length]});return m.forEach(function(k){var D=k.start,V=k.end,ee=D,te=V;D.x>V.x&&(ee=V,te=D);var _e={x:a.x,y:a.y};if(ee.x===te.x&&i===yo.HORIZONTAL&&(_e={x:ee.x,y:a.y}),ee.y===te.y&&i===yo.VERTICAL&&(_e={x:a.x,y:ee.y}),ee.x!==te.x&&ee.y!==te.y){var Ne=(te.y-ee.y)/(te.x-ee.x),je=(ee.x*te.y-te.x*ee.y)/(ee.x-te.x);i===yo.HORIZONTAL?_e={x:(a.y-je)/Ne,y:a.y}:i===yo.VERTICAL&&(_e={x:a.x,y:Ne*a.x+je})}if($i(_e,D,V)){var at=ll(_e.x,_e.y,a.x,a.y);at<p&&(p=at,u=_e)}}),u},ad=function(a,i,l,u){var v=a.x,p=a.y;return i.x>a.x?v=a.x+l/2:i.x<a.x&&(v=a.x-l/2),i.y>a.y?p=a.y+u/2:i.y<a.y&&(p=a.y-u/2),{x:v,y:p}},ld=function(a){var i=a.rows,l=a.style,u=a.rowsLength,v=a.className,p=document.createElement("div");p.style.fontSize=l.fontSize,p.style.width=l.width,p.className=v,p.style.lineHeight=l.lineHeight,p.style.padding=l.padding,l.fontFamily&&(p.style.fontFamily=l.fontFamily),u>1?i.forEach(function(O){var k=document.createElement("div");k.textContent=O,p.appendChild(k)}):p.textContent=i,document.body.appendChild(p);var m=p.clientHeight;return document.body.removeChild(p),m},uu=function(a){var i=a.rows,l=a.rowsLength,u=a.fontSize,v=0;return i&&i.forEach(function(p){var m=Bo(p);v=m>v?m:v}),{width:Math.ceil(v/2)*u+u/4,height:l*(u+2)+u/4}},Kl=function(a){return qo(a)!=="object"?{isAllPass:!!a,msg:a?"":"不允许连接"}:a},bi=function(a){try{return JSON.parse(JSON.stringify(a))}catch{return a}},Af=1e3,sd=999,cu=function(){return++Af};function Ju(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function Ai(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Ju(Object(l),!0).forEach(function(u){Xi(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Ju(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Co(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function ud(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Xi(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Hn(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var Tf=(Pt=function(){function a(u,v){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,a),Xi(this,"id",""),Co(this,"type",iu,this),Co(this,"sourceNodeId",Qc,this),Co(this,"targetNodeId",ed,this),Co(this,"startPoint",Es,this),Co(this,"endPoint",au,this),Co(this,"text",Of,this),Co(this,"properties",Mp,this),Co(this,"points",lu,this),Co(this,"pointsList",td,this),Co(this,"isSelected",Sf,this),Co(this,"isHovered",Ap,this),Co(this,"isHitable",kl,this),Co(this,"draggable",Tp,this),Co(this,"visible",al,this),Xi(this,"virtual",!1),Co(this,"isAnimation",Os,this),Co(this,"isShowAdjustPoint",xf,this),Xi(this,"graphModel",void 0),Co(this,"zIndex",Nh,this),Xi(this,"BaseType",mo.EDGE),Xi(this,"modelType",Pr.EDGE),Co(this,"state",Ph,this),Xi(this,"additionStateData",void 0),Xi(this,"sourceAnchorId",""),Xi(this,"targetAnchorId",""),Xi(this,"menu",void 0),Xi(this,"customTextPosition",!1),Co(this,"style",Rh,this),Co(this,"arrowConfig",kp,this),this.graphModel=v,this.initEdgeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var v=this.graphModel.idGenerator,p=v&&v(u.type),m=this.createId();u.id=m||p||ra()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var O=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=O,Li(this,$n(u)),this.graphModel.overlapMode===Ro.INCREASE&&(this.zIndex=u.zIndex||cu()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Ai(Ai({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Ai({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return io(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return io(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),v=this.getEdgeAnimationStyle(),p=this.graphModel.theme.arrow,m=this.isAnimation?v.stroke:u.stroke;return Ai(Ai({},u),{},{fill:m,stroke:m},p)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return io(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,v;return(u=this.graphModel)===null||u===void 0||(v=u.nodesMap[this.sourceNodeId])===null||v===void 0?void 0:v.model}},{key:"targetNode",get:function(){var u,v;return(u=this.graphModel)===null||u===void 0||(v=u.nodesMap[this.targetNodeId])===null||v===void 0?void 0:v.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,v,p){var m,O,k=Mf(u);return p&&(m=bs(k,function(D){return D.id===p}))||k.forEach(function(D){var V=yr(D,v);(O===void 0||V<O)&&(O=V,m=D)}),m}},{key:"getEndAnchor",value:function(u,v){var p,m,O=this,k=Mf(u);return v&&(p=bs(k,function(D){return D.id===v}))||k.forEach(function(D){var V=yr(D,O.startPoint);(m===void 0||V<m)&&(m=V,p=D)}),p}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,v=u.x,p=u.y,m=u.value,O={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return m&&(O.text={x:v,y:p,value:m}),this.graphModel.overlapMode===Ro.INCREASE&&(O.zIndex=this.zIndex),O}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,v){this.properties[u]=bi(v),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Ai(Ai({},Object(c.I)(this.properties)),bi(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var v=this.arrowConfig,p=v.markerEnd,m=v.markerStart;m&&m==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),p&&p==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,v){this.style=Ai(Ai({},this.style),{},Xi({},u,bi(v)))}},{key:"setStyles",value:function(u){this.style=Ai(Ai({},this.style),bi(u))}},{key:"updateStyles",value:function(u){this.style=Ai({},bi(u))}},{key:"formatText",value:function(u){var v=this.textPosition,p=v.x,m=v.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||p,y:u.text.y||m,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:p,y:m,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,v=u.x,p=u.y;this.text.x=v,this.text.y=p}},{key:"moveText",value:function(u,v){if(this.text){var p=this.text,m=p.x,O=p.y,k=p.value,D=p.draggable,V=p.editable;this.text={value:k,draggable:D,x:m+u,y:O+v,editable:V}}}},{key:"setText",value:function(u){u&&Li(this.text,u)}},{key:"updateText",value:function(u){this.text=Ai(Ai({},Object(c.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!u)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var v=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!v)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:v.x,y:v.y}),this.targetAnchorId||(this.targetAnchorId=v.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,v){this.state=u,this.additionStateData=v}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,v){this.startPoint.x+=u,this.startPoint.y+=v}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,v){this.endPoint.x+=u,this.endPoint.y+=v}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Li(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var v=u.startPoint,p=u.endPoint;this.updateStartPoint({x:v.x,y:v.y}),this.updateEndPoint({x:p.x,y:p.y})}}],l&&ud(i.prototype,l),a}(),iu=Hn(Pt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qc=Hn(Pt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ed=Hn(Pt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Es=Hn(Pt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),au=Hn(Pt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Of=Hn(Pt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Mp=Hn(Pt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),lu=Hn(Pt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),td=Hn(Pt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Sf=Hn(Pt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ap=Hn(Pt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kl=Hn(Pt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Tp=Hn(Pt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),al=Hn(Pt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Os=Hn(Pt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xf=Hn(Pt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nh=Hn(Pt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ph=Hn(Pt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Rh=Hn(Pt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),kp=Hn(Pt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Hn(Pt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"sourceNode"),Pt.prototype),Hn(Pt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"targetNode"),Pt.prototype),Hn(Pt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"textPosition"),Pt.prototype),Hn(Pt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setProperty"),Pt.prototype),Hn(Pt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"deleteProperty"),Pt.prototype),Hn(Pt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setProperties"),Pt.prototype),Hn(Pt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"changeEdgeId"),Pt.prototype),Hn(Pt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setStyle"),Pt.prototype),Hn(Pt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setStyles"),Pt.prototype),Hn(Pt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateStyles"),Pt.prototype),Hn(Pt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"formatText"),Pt.prototype),Hn(Pt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"resetTextPosition"),Pt.prototype),Hn(Pt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveText"),Pt.prototype),Hn(Pt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setText"),Pt.prototype),Hn(Pt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateText"),Pt.prototype),Hn(Pt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setAnchors"),Pt.prototype),Hn(Pt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setSelected"),Pt.prototype),Hn(Pt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setHovered"),Pt.prototype),Hn(Pt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setHitable"),Pt.prototype),Hn(Pt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"openEdgeAnimation"),Pt.prototype),Hn(Pt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"closeEdgeAnimation"),Pt.prototype),Hn(Pt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setElementState"),Pt.prototype),Hn(Pt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateStartPoint"),Pt.prototype),Hn(Pt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveStartPoint"),Pt.prototype),Hn(Pt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateEndPoint"),Pt.prototype),Hn(Pt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveEndPoint"),Pt.prototype),Hn(Pt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setZIndex"),Pt.prototype),Hn(Pt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"initPoints"),Pt.prototype),Hn(Pt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateAttributes"),Pt.prototype),Hn(Pt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"getAdjustStart"),Pt.prototype),Hn(Pt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"getAdjustEnd"),Pt.prototype),Hn(Pt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateAfterAdjustStartAndEnd"),Pt.prototype),Pt),cd=Tf;function kf(a){return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},kf(a)}function Np(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function Dh(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Np(Object(l),!0).forEach(function(u){Ms(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Np(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function xs(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function jh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function du(){return du=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Ih(a,i);if(u){var v=Object.getOwnPropertyDescriptor(u,i);return v.get?v.get.call(arguments.length<3?a:l):v.value}},du.apply(this,arguments)}function Ih(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Zl(a))!==null;);return a}function Pp(a,i){return Pp=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Pp(a,i)}function dd(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Zl(a);if(i){var v=Zl(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return Lh(this,l)}}function Lh(a,i){if(i&&(kf(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ba(a)}function Ba(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Zl(a){return Zl=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Zl(a)}function Ms(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Wn,Rp,Qu=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Pp(p,m)})(v,a);var i,l,u=dd(v);function v(){var p;xs(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return Ms(Ba(p=u.call.apply(u,[this].concat(O))),"modelType",Pr.LINE_EDGE),p}return i=v,(l=[{key:"getEdgeStyle",value:function(){var p=this.graphModel.theme.line;return Dh(Dh({},du(Zl(v.prototype),"getEdgeStyle",this).call(this)),io(p))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&jh(i.prototype,l),v}(cd);function Jl(a){return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Jl(a)}function fd(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qi(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return qi(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qi(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function sl(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function $o(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?sl(Object(l),!0).forEach(function(u){Cp(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):sl(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function da(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Ua(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nm(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function pd(){return pd=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=fu(a,i);if(u){var v=Object.getOwnPropertyDescriptor(u,i);return v.get?v.get.call(arguments.length<3?a:l):v.value}},pd.apply(this,arguments)}function fu(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=oa(a))!==null;);return a}function Er(a,i){return Er=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Er(a,i)}function $h(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=oa(a);if(i){var v=oa(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return fa(this,l)}}function fa(a,i){if(i&&(Jl(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Do(a)}function Do(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function oa(a){return oa=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},oa(a)}function Cp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ti(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var Aa=(Wn=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Er(p,m)})(v,a);var i,l,u=$h(v);function v(){var p;Ua(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return Cp(Do(p=u.call.apply(u,[this].concat(O))),"modelType",Pr.POLYLINE_EDGE),Cp(Do(p),"draggingPointList",void 0),da(Do(p),"dbClickPosition",Rp,Do(p)),p}return i=v,(l=[{key:"initEdgeData",value:function(p){this.offset=30,pd(oa(v.prototype),"initEdgeData",this).call(this,p)}},{key:"getEdgeStyle",value:function(){var p=this.graphModel.theme.polyline;return $o($o({},pd(oa(v.prototype),"getEdgeStyle",this).call(this)),io(p))}},{key:"getTextPosition",value:function(){var p,m=(p=this.text)===null||p===void 0?void 0:p.value;if(this.dbClickPosition&&!m){var O=this.dbClickPosition;return{x:O.x,y:O.y}}var k=ar(this.points),D=fd(qn(k),2),V=D[0],ee=D[1];return{x:(V.x+ee.x)/2,y:(V.y+ee.y)/2}}},{key:"getAfterAnchor",value:function(p,m,O){var k,D;return O.forEach(function(V){var ee;p===yo.HORIZONTAL?ee=Math.abs(m.y-V.y):p===yo.VERTICAL&&(ee=Math.abs(m.x-V.x)),(!D||D>ee)&&(D=ee,k=V)}),k}},{key:"getCrossPoint",value:function(p,m,O){var k;return p===yo.HORIZONTAL?k={x:O.x,y:m.y}:p===yo.VERTICAL&&(k={x:m.x,y:O.y}),k}},{key:"removeCrossPoints",value:function(p,m,O){var k=O.map(function(it){return it});if(p===1){var D=k[p],V=k[m],ee=k[p-1];if(lr(ee,D,this.sourceNode)){if(Or(D,V,this.sourceNode)){var te=Vo(D,V,this.sourceNode);te&&(k[p]=te,k.splice(p-1,1),p--,m--)}}else this.sourceNode.anchors.forEach(function(it){(it.x===ee.x&&it.x===D.x||it.y===ee.y&&it.y===D.y)&&ll(it.x,it.y,D.x,D.y)<ll(ee.x,ee.y,D.x,D.y)&&(k[p-1]=it)})}if(m===O.length-2){var _e=k[p],Ne=k[m],je=k[m+1];if(lr(Ne,je,this.targetNode)){if(Or(_e,Ne,this.targetNode)){var at=Vo(_e,Ne,this.targetNode);at&&(k[m]=at,k.splice(m+1,1))}}else this.targetNode.anchors.forEach(function(it){(it.x===je.x&&it.x===Ne.x||it.y===je.y&&it.y===Ne.y)&&ll(it.x,it.y,Ne.x,Ne.y)<ll(je.x,je.y,Ne.x,Ne.y)&&(k[m+1]=it)})}return k}},{key:"getDraggingPoints",value:function(p,m,O,k,D){var V=D.map(function(_e){return _e}),ee=this.getAfterAnchor(p,O,k),te=this.getCrossPoint(p,O,ee);return m==="start"?(V.unshift(te),V.unshift(ee)):(V.push(te),V.push(ee)),V}},{key:"updateCrossPoints",value:function(p){var m=p.map(function(zt){return zt}),O=p[0],k=p[1],D=p[m.length-2],V=p[m.length-1],ee=this.sourceNode,te=this.targetNode,_e=ee.modelType,Ne=te.modelType,je=jo(O,k),at=m[0];switch(_e){case Pr.RECT_NODE:ee.radius!==0&&(od(O,ee)||(at=rd(O,je,ee)));break;case Pr.CIRCLE_NODE:at=su(O,je,ee);break;case Pr.ELLIPSE_NODE:at=Zu(O,je,ee);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:at=id(O,je,ee)}at&&(m[0]=at);var it=jo(D,V),_t=m[m.length-1];switch(Ne){case Pr.RECT_NODE:te.radius!==0&&(od(V,te)||(_t=rd(V,it,te)));break;case Pr.CIRCLE_NODE:_t=su(V,it,te);break;case Pr.ELLIPSE_NODE:_t=Zu(V,it,te);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:_t=id(V,it,te)}return _t&&(m[m.length-1]=_t),m}},{key:"getData",value:function(){var p=pd(oa(v.prototype),"getData",this).call(this),m=this.pointsList.map(function(O){return{x:O.x,y:O.y}});return Object.assign({},p,{pointsList:m})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(p){return"".concat(p.x,",").concat(p.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var p=cr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=p,this.points=p.map(function(m){return"".concat(m.x,",").concat(m.y)}).join(" ")}},{key:"updateStartPoint",value:function(p){this.startPoint=Object.assign({},p),this.updatePoints()}},{key:"moveStartPoint",value:function(p,m){this.startPoint.x+=p,this.startPoint.y+=m,this.updatePoints()}},{key:"updateEndPoint",value:function(p){this.endPoint=Object.assign({},p),this.updatePoints()}},{key:"moveEndPoint",value:function(p,m){this.endPoint.x+=p,this.endPoint.y+=m,this.updatePoints()}},{key:"updatePointsList",value:function(p,m){this.pointsList.forEach(function(D){D.x+=p,D.y+=m});var O=this.pointsList[0];this.startPoint=Object.assign({},O);var k=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},k),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(p){return p})}},{key:"dragAppendSimple",value:function(p,m){this.isDragging=!0;var O=p.start,k=p.end,D=p.startIndex,V=p.endIndex,ee=p.direction,te=this.pointsList,_e=te;return ee===yo.HORIZONTAL?(te[D]={x:O.x,y:O.y+m.y},te[V]={x:k.x,y:k.y+m.y},_e=this.pointsList.map(function(Ne){return Ne})):ee===yo.VERTICAL&&(te[D]={x:O.x+m.x,y:O.y},te[V]={x:k.x+m.x,y:k.y},_e=this.pointsList.map(function(Ne){return Ne})),this.updatePointsAfterDrag(_e),this.draggingPointList=_e,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[D]),end:Object.assign({},te[V]),startIndex:D,endIndex:V,direction:ee}}},{key:"dragAppend",value:function(p,m){this.isDragging=!0;var O=p.start,k=p.end,D=p.startIndex,V=p.endIndex,ee=p.direction,te=this.pointsList;if(ee===yo.HORIZONTAL){te[D]={x:O.x,y:O.y+m.y},te[V]={x:k.x,y:k.y+m.y};var _e=this.pointsList.map(function(hn){return hn});if(D!==0&&V!==this.pointsList.length-1&&(_e=this.removeCrossPoints(D,V,_e)),D===0){var Ne={x:O.x,y:O.y+m.y};if(!Ss(Ne,this.sourceNode)){var je=this.sourceNode.anchors;_e=this.getDraggingPoints(ee,"start",Ne,je,_e)}}if(V===this.pointsList.length-1){var at={x:k.x,y:k.y+m.y};if(!Ss(at,this.targetNode)){var it=this.targetNode.anchors;_e=this.getDraggingPoints(ee,"end",at,it,_e)}}this.updatePointsAfterDrag(_e),this.draggingPointList=_e}else if(ee===yo.VERTICAL){te[D]={x:O.x+m.x,y:O.y},te[V]={x:k.x+m.x,y:k.y};var _t=this.pointsList.map(function(hn){return hn});if(D!==0&&V!==this.pointsList.length-1&&(_t=this.removeCrossPoints(D,V,_t)),D===0){var zt={x:O.x+m.x,y:O.y};if(!Ss(zt,this.sourceNode)){var gn=this.sourceNode.anchors;_t=this.getDraggingPoints(ee,"start",zt,gn,_t)}}if(V===this.pointsList.length-1){var mn={x:k.x+m.x,y:k.y};if(!Ss(mn,this.targetNode)){var Kn=this.targetNode.anchors;_t=this.getDraggingPoints(ee,"end",mn,Kn,_t)}}this.updatePointsAfterDrag(_t),this.draggingPointList=_t}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[D]),end:Object.assign({},te[V]),startIndex:D,endIndex:V,direction:ee}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var p=fn(ar(this.points));this.pointsList=p.map(function(k){return k}),this.draggingPointList=[];var m=p[0];this.startPoint=Object.assign({},m);var O=p[p.length-1];this.endPoint=Object.assign({},O)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(p){var m=this.updateCrossPoints(p);this.points=m.map(function(O){return"".concat(O.x,",").concat(O.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var p=this.pointsList;return p[p.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(p){var m=p.startPoint,O=p.endPoint,k=p.sourceNode,D=p.targetNode,V=cr({x:m.x,y:m.y},{x:O.x,y:O.y},k,D,this.offset||0);this.pointsList=V,this.initPoints()}}])&&nm(i.prototype,l),v}(cd),Rp=Ti(Wn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ti(Wn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"initPoints"),Wn.prototype),Ti(Wn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"updatePoints"),Wn.prototype),Ti(Wn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"updateStartPoint"),Wn.prototype),Ti(Wn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"moveStartPoint"),Wn.prototype),Ti(Wn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"updateEndPoint"),Wn.prototype),Ti(Wn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"moveEndPoint"),Wn.prototype),Ti(Wn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"updatePointsList"),Wn.prototype),Ti(Wn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"dragAppendStart"),Wn.prototype),Ti(Wn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"dragAppendSimple"),Wn.prototype),Ti(Wn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"dragAppend"),Wn.prototype),Ti(Wn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"dragAppendEnd"),Wn.prototype),Ti(Wn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"updatePointsAfterDrag"),Wn.prototype),Ti(Wn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"getAdjustStart"),Wn.prototype),Ti(Wn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"getAdjustEnd"),Wn.prototype),Ti(Wn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Wn.prototype,"updateAfterAdjustStartAndEnd"),Wn.prototype),Wn),pu=function(a){var i=a.start,l=a.end,u=a.offset,v=a.verticalLength,p=a.type,m={leftX:0,leftY:0,rightX:0,rightY:0},O=Math.atan((l.y-i.y)/(l.x-i.x)),k=Math.atan(u/v),D=Math.sqrt(v*v+u*u);return p==="start"?l.x>=i.x?(m.leftX=i.x+D*Math.sin(O+k),m.leftY=i.y-D*Math.cos(O+k),m.rightX=i.x-D*Math.sin(O-k),m.rightY=i.y+D*Math.cos(O-k)):(m.leftX=i.x-D*Math.sin(O+k),m.leftY=i.y+D*Math.cos(O+k),m.rightX=i.x+D*Math.sin(O-k),m.rightY=i.y-D*Math.cos(O-k)):p==="end"&&(l.x>=i.x?(m.leftX=l.x+D*Math.sin(O-k),m.leftY=l.y-D*Math.cos(O-k),m.rightX=l.x-D*Math.sin(O+k),m.rightY=l.y+D*Math.cos(O+k)):(m.leftX=l.x-D*Math.sin(O-k),m.leftY=l.y+D*Math.cos(O-k),m.rightX=l.x+D*Math.sin(O+k),m.rightY=l.y-D*Math.cos(O+k))),m},hd={x:1,y:0,z:0};function Fo(a,i,l,u,v){for(var p=function(Ne){if(Ne<0||Ne>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-Ne,3)+3*i.x*Ne*Math.pow(1-Ne,2)+3*l.x*Math.pow(Ne,2)*(1-Ne)+u.x*Math.pow(Ne,3),y:a.y*Math.pow(1-Ne,3)+3*i.y*Ne*Math.pow(1-Ne,2)+3*l.y*Math.pow(Ne,2)*(1-Ne)+u.y*Math.pow(Ne,3)}},m=0,O=2,k=u.x,D=u.y,V=u;m<v&&O<50;){var ee=V=p(1-O/100),te=ee.x,_e=ee.y;m=ll(k,D,te,_e),O++}return V}function Yo(a){var i=Math.hypot(a.x,a.y);return{x:a.x/i,y:a.y/i,z:0}}function Nf(a){return u=function(p,m){return p.x*m.y-p.y*m.x}(i=hd,l=a),v=Math.acos(function(p,m){var O=[p.x,p.y,p.z];return[m.x,m.y,m.z].reduce(function(k,D,V){return k+D*O[V]})}(Yo(i),Yo(l))),u>=0?v:-v;var i,l,u,v}function Dp(a){return a*(180/Math.PI)}function z(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function ue(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?z(Object(l),!0).forEach(function(u){Oe(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):z(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Oe(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function rt(a){return function(i){if(Array.isArray(i))return Ct(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||pt(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vt(a){return vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},vt(a)}function et(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||pt(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pt(a,i){if(a){if(typeof a=="string")return Ct(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Ct(a,i):void 0}}function Ct(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var Ft=function(a,i){var l;switch(a.type){case"line":default:l=new Qu(a,i);break;case"polyline":l=new Aa(a,i)}return l},Dt=function(a,i){return 2*Math.abs(a.centerX-i.centerX)<a.width+i.width&&2*Math.abs(a.centerY-i.centerY)<a.height+i.height},ct=function(a){var i=[],l={};return a.forEach(function(u){var v="".concat(u.x,"-").concat(u.y);u.id=v,l[v]=u}),Object.keys(l).forEach(function(u){i.push(l[u])}),i},Yt=function(a,i){var l=[a,{x:a.x,y:i.y},i];return ct(l)},Gt=function(a,i){return a.width===0&&a.height===0?a:{centerX:a.centerX,centerY:a.centerY,minX:a.minX-i,minY:a.minY-i,maxX:a.maxX+i,maxY:a.maxY+i,height:a.height+2*i,width:a.width+2*i}},jt=function(a,i){var l=Math.abs(a.x-i.centerX),u=Math.abs(a.y-i.centerY);return l/i.width>u/i.height?yo.HORIZONTAL:yo.VERTICAL},Et=function(a,i,l){return jt(l,i)===yo.HORIZONTAL?{x:l.x>a.centerX?a.maxX:a.minX,y:l.y}:{x:l.x,y:l.y>a.centerY?a.maxY:a.minY}},Ke=function(a,i){var l=Math.min(a.minX,i.minX),u=Math.min(a.minY,i.minY),v=Math.max(a.maxX,i.maxX),p=Math.max(a.maxY,i.maxY);return{centerX:(l+v)/2,centerY:(u+p)/2,minX:l,minY:u,maxX:v,maxY:p,height:p-u,width:v-l}},ut=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,l=[],u=[];a.forEach(function(V){l.push(V.x),u.push(V.y)});var v=Math.min.apply(Math,l),p=Math.max.apply(Math,l),m=Math.min.apply(Math,u),O=Math.max.apply(Math,u),k=p-v,D=O-m;return i&&(k+=i,D+=i),{centerX:(v+p)/2,centerY:(m+O)/2,maxX:p,maxY:O,minX:v,minY:m,x:(v+p)/2,y:(m+O)/2,height:D,width:k}},$t=function(a){var i=a.minX,l=a.minY,u=a.maxX,v=a.maxY;return[{x:i,y:l},{x:u,y:l},{x:u,y:v},{x:i,y:v}]},tn=function(a,i){var l=a.x,u=a.y;return l<i.minX||l>i.maxX||u<i.minY||u>i.maxY},Mt=function(a,i){return i<a.minX||i>a.maxX?[]:[{x:i,y:a.minY},{x:i,y:a.maxY}]},rn=function(a,i){return i<a.minY||i>a.maxY?[]:[{x:a.minX,y:i},{x:a.maxX,y:i}]},kt=function(a,i){return Mt(a,i.x).concat(rn(a,i.y))},Xt=function(a,i){return Math.abs(a.x-i.x)+Math.abs(a.y-i.y)},At=function(a,i){var l=0;return i.forEach(function(u){u&&(a.x===u.x&&(l+=-2),a.y===u.y&&(l+=-2))}),l},Kt=function(a,i,l,u,v){return Xt(a,i)+Xt(a,l)+At(a,[i,l,u,v])},Cn=function a(i,l,u,v,p){p||(p=0),i.unshift(l[v]),u[v]&&u[v]!==v&&p<=100&&a(i,l,u,u[v],p+1)},Xn=function(a,i){var l=a.indexOf(i);l>-1&&a.splice(l,1)},It=function(a,i,l,u){var v=i.x-a.x,p=i.y-a.y,m=u.x-l.x,O=u.y-l.y,k=(-p*(a.x-l.x)+v*(a.y-l.y))/(-m*p+v*O),D=(m*(a.y-l.y)-O*(a.x-l.x))/(-m*p+v*O);return k>=0&&k<=1&&D>=0&&D<=1},Nt=function(a,i,l){if(l.width===0&&l.height===0)return!1;var u=et($t(l),4),v=u[0],p=u[1],m=u[2],O=u[3];return It(a,i,v,p)||It(a,i,v,O)||It(a,i,p,m)||It(a,i,m,O)},xt=function(a,i,l,u){var v=[];return a.forEach(function(p){p!==i&&(p.x!==i.x&&p.y!==i.y||Nt(p,i,l)||Nt(p,i,u)||v.push(p))}),ct(v)},Bn=function(a,i,l,u,v,p,m){var O=[],k=[i],D={},V={},ee={};V[i.id]=0,ee[i.id]=Kt(i,l,i);var te={};a.forEach(function(je){te[je.id]=je});for(var _e=function(){var je=void 0,at=1/0;if(k.forEach(function(_t){ee[_t.id]<at&&(at=ee[_t.id],je=_t)}),je===l){var it=[];return Cn(it,te,D,l.id),{v:it}}Xn(k,je),O.push(je),xt(a,je,u,v).forEach(function(_t){if(O.indexOf(_t)===-1){k.indexOf(_t)===-1&&k.push(_t);var zt=ee[je.id]+Xt(je,_t);V[_t.id]&&zt>=V[_t.id]||(D[_t.id]=je.id,V[_t.id]=zt,ee[_t.id]=V[_t.id]+Kt(_t,l,i,p,m))}})};k.length;){var Ne=_e();if(vt(Ne)==="object")return Ne.v}return[i,l]},ir=function(a){return Mo(a)},fn=function(a){for(var i=1;i<a.length-1;){var l=a[i-1],u=a[i],v=a[i+1];l.x===u.x&&u.x===v.x||l.y===u.y&&u.y===v.y?a.splice(i,1):i++}return a},cr=function(a,i,l,u,v){var p=ir(l),m=ir(u),O=Gt(p,v),k=Gt(m,v),D=Et(O,p,a),V=Et(k,m,i);if(Dt(O,k)){var ee=Qo(a,i,D,V);return[a,D].concat(rt(ee),[V,i])}var te=ut([D,V]),_e=Ke(O,te),Ne=Ke(k,te),je=[];je=(je=je.concat($t(_e))).concat($t(Ne));var at={x:(a.x+i.x)/2,y:(a.y+i.y)/2};[te,_e,Ne].forEach(function(_t){je=je.concat(kt(_t,at).filter(function(zt){return tn(zt,O)&&tn(zt,k)}))}),[{x:D.x,y:V.y},{x:V.x,y:D.y}].forEach(function(_t){tn(_t,O)&&tn(_t,k)&&je.push(_t)}),je.unshift(D),je.push(V),je=ct(je);var it=Bn(je,D,V,p,m,a,i);return it.unshift(a),it.push(i),it.length>2&&(it=fn(it)),ct(it)},qn=function(a){var i;if(a.length===1)i=[a[0],a[0]];else if(a.length>=2){for(var l=a[0],u=a[1],v=ll(l.x,l.y,u.x,u.y),p=1;p<a.length-1;p++){var m=a[p],O=a[p+1],k=ll(m.x,m.y,O.x,O.y);k>v&&(v=k,l=m,u=O)}i=[l,u]}return i},lr=function(a,i,l){var u=Ss(a,l),v=Ss(i,l);return u&&v},Or=function(a,i,l){var u=Ss(a,l),v=Ss(i,l);return!(u&&v)&&(u||v)},Vo=function(a,i,l){for(var u,v,p=Mo(l),m=$t(p),O=0;O<m.length;O++)It(a,i,m[O],m[(O+1)%m.length])&&(v=[m[O],m[(O+1)%m.length]]);return v&&(u=function(k,D,V,ee){var te=(D.y-k.y)*(ee.x-V.x)-(k.x-D.x)*(V.y-ee.y);if(te===0)return!1;var _e=((D.x-k.x)*(ee.x-V.x)*(V.y-k.y)+(D.y-k.y)*(ee.x-V.x)*k.x-(ee.y-V.y)*(D.x-k.x)*V.x)/te,Ne=-((D.y-k.y)*(ee.y-V.y)*(V.x-k.x)+(D.x-k.x)*(ee.y-V.y)*k.y-(ee.x-V.x)*(D.y-k.y)*V.y)/te;return(_e-k.x)*(_e-D.x)<=0&&(Ne-k.y)*(Ne-D.y)<=0&&(_e-V.x)*(_e-ee.x)<=0&&(Ne-V.y)*(Ne-ee.y)<=0&&{x:_e,y:Ne}}(a,i,v[0],v[1])),u},jo=function(a,i){var l;return a.x===i.x?l=yo.VERTICAL:a.y===i.y&&(l=yo.HORIZONTAL),l},ar=function(a){var i=a.split(" "),l=[];return i&&i.forEach(function(u){var v=et(u.split(","),2),p=v[0],m=v[1];l.push({x:Number(p),y:Number(m)})}),l},Qo=function(a,i,l,u){var v=[];if(jo(a,l)===jo(i,u))a.y===l.y?(v.push({x:l.x,y:(l.y+u.y)/2}),v.push({x:u.x,y:(l.y+u.y)/2})):(v.push({x:(l.x+u.x)/2,y:l.y}),v.push({x:(l.x+u.x)/2,y:u.y}));else{var p={x:l.x,y:u.y},m=$i(p,a,l),O=$i(p,i,u);if(m||O)p={x:u.x,y:l.y};else{var k=ho(p,a,l),D=ho(p,i,u);k&&D&&(p={x:u.x,y:l.y})}v.push(p)}return v},ho=function(a,i,l){return a.x===i.x&&a.x===l.x||a.y===i.y&&a.y===l.y},Bo=function(a){if(!a)return 0;for(var i=0,l=0;l<a.length;l++){var u=a.charCodeAt(l);a.match(/[A-Z]/)?i+=1.5:i+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return i},Ko=null,li=function(a,i){Ko||(Ko=document.createElement("canvas"));var l=Ko.getContext("2d");return l.font=i,l.measureText(a).width},hi=function(a){var i,l=a.start,u=a.end;if(l.x===u.x&&l.y===u.y)i="";else{var v={start:l,end:u,offset:10,verticalLength:5},p=pu(ue(ue({},v),{},{type:"start"})),m=pu(ue(ue({},v),{},{type:"end"}));i="M".concat(p.leftX," ").concat(p.leftY,` 
    L`).concat(p.rightX," ").concat(p.rightY,` 
    L`).concat(m.rightX," ").concat(m.rightY,`
    L`).concat(m.leftX," ").concat(m.leftY," z")}return{d:i,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},ei=function(a){var i=a.start,l=a.end,u=a.sourceNode,v=a.targetNode,p=a.offset,m=Mo(u),O=Mo(v),k=Gt(m,p),D=Gt(O,p);return{sNext:Et(k,m,i),ePre:Et(D,O,l)}},wo=function(a){var i=a.replace(/M/g,"").replace(/C/g,",").split(",");return[er(i[0]),er(i[1]),er(i[2]),er(i[3])]},er=function(a){var i=et(a.replace(/(^\s*)/g,"").split(" "),2);return{x:+i[0],y:+i[1]}},vi=function(a,i){var l=et(a,4);return[Fo(l[0],l[1],l[2],l[3],i),a[3]]},Dr=function(a,i){for(var l,u=a.x,v=a.y,p=ar(i),m=Number.MAX_SAFE_INTEGER,O=[],k=0;k<p.length;k++)O.push({start:p[k],end:p[(k+1)%p.length]});if(O.forEach(function(te){var _e=te.start,Ne=te.end;if(_e.x===Ne.x){var je={x:_e.x,y:v};if($i(je,_e,Ne)){var at=Math.abs(_e.x-u);at<m&&(m=at,l=je)}}else if(_e.y===Ne.y){var it={x:u,y:_e.y};if($i(it,_e,Ne)){var _t=Math.abs(_e.y-v);_t<m&&(m=_t,l=it)}}}),!l){var D=O[0],V=D.start,ee=D.end;l={x:V.x+(ee.x-V.x)/2,y:V.y+(ee.y-V.y)/2}}return l},$n=function(a){return tl(a,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},yr=function(a,i){return Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))};function tr(a,i){return typeof i!="function"?function(l,u,v){return Object.assign({type:a.edgeType},v)}:function(l,u,v){var p=i(l,u,v);return p?typeof p=="string"?Object.assign({},v,{type:p}):Object.assign({type:p},v):{type:a.edgeType}}}r(208);var Eo=function(){};function Nl(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ao(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var ge=function(){function a(u){var v=this,p=u.onDragStart,m=p===void 0?Eo:p,O=u.onDragging,k=O===void 0?Eo:O,D=u.onDragEnd,V=D===void 0?Eo:D,ee=u.eventType,te=ee===void 0?"":ee,_e=u.eventCenter,Ne=_e===void 0?null:_e,je=u.step,at=je===void 0?1:je,it=u.isStopPropagation,_t=it===void 0||it,zt=u.model,gn=zt===void 0?null:zt,mn=u.data,Kn=mn===void 0?null:mn;(function(hn,Un){if(!(hn instanceof Un))throw new TypeError("Cannot call a class as a function")})(this,a),Ao(this,"onDragStart",void 0),Ao(this,"onDragging",void 0),Ao(this,"onDragEnd",void 0),Ao(this,"step",void 0),Ao(this,"isStopPropagation",void 0),Ao(this,"isDragging",!1),Ao(this,"isStartDragging",!1),Ao(this,"startX",0),Ao(this,"startY",0),Ao(this,"sumDeltaX",0),Ao(this,"sumDeltaY",0),Ao(this,"eventType",void 0),Ao(this,"eventCenter",void 0),Ao(this,"model",void 0),Ao(this,"data",void 0),Ao(this,"startTime",void 0),Ao(this,"handleMouseDown",function(hn){var Un,xn,Br,Wr=(Un=window)===null||Un===void 0?void 0:Un.document;if(hn.button===0){v.isStopPropagation&&hn.stopPropagation(),v.isStartDragging=!0,v.startX=hn.clientX,v.startY=hn.clientY,Wr.addEventListener("mousemove",v.handleMouseMove,!1),Wr.addEventListener("mouseup",v.handleMouseUp,!1);var mr=(xn=v.model)===null||xn===void 0?void 0:xn.getData();(Br=v.eventCenter)===null||Br===void 0||Br.emit(Ln["".concat(v.eventType,"_MOUSEDOWN")],{e:hn,data:v.data||mr}),v.startTime=new Date().getTime()}}),Ao(this,"handleMouseMove",function(hn){if(v.isStopPropagation&&hn.stopPropagation(),v.isStartDragging&&(v.sumDeltaX+=hn.clientX-v.startX,v.sumDeltaY+=hn.clientY-v.startY,v.startX=hn.clientX,v.startY=hn.clientY,v.step<=1||Math.abs(v.sumDeltaX)>v.step||Math.abs(v.sumDeltaY)>v.step)){var Un,xn=v.sumDeltaX%v.step,Br=v.sumDeltaY%v.step,Wr=v.sumDeltaX-xn,mr=v.sumDeltaY-Br;v.sumDeltaX=xn,v.sumDeltaY=Br;var Qr,wi=(Un=v.model)===null||Un===void 0?void 0:Un.getData();v.isDragging||((Qr=v.eventCenter)===null||Qr===void 0||Qr.emit(Ln["".concat(v.eventType,"_DRAGSTART")],{e:hn,data:v.data||wi}),v.onDragStart({event:hn})),v.isDragging=!0,Promise.resolve().then(function(){var Ei,Ta;v.onDragging({deltaX:Wr,deltaY:mr,event:hn}),(Ei=v.eventCenter)===null||Ei===void 0||Ei.emit(Ln["".concat(v.eventType,"_MOUSEMOVE")],{e:hn,data:v.data||wi}),(Ta=v.eventCenter)===null||Ta===void 0||Ta.emit(Ln["".concat(v.eventType,"_DRAG")],{e:hn,data:v.data||wi})})}}),Ao(this,"handleMouseUp",function(hn){var Un=window.document;v.isStartDragging=!1,v.isStopPropagation&&hn.stopPropagation(),Promise.resolve().then(function(){var xn,Br,Wr;Un.removeEventListener("mousemove",v.handleMouseMove,!1),Un.removeEventListener("mouseup",v.handleMouseUp,!1);var mr=(xn=v.model)===null||xn===void 0?void 0:xn.getData();(Br=v.eventCenter)===null||Br===void 0||Br.emit(Ln["".concat(v.eventType,"_MOUSEUP")],{e:hn,data:v.data||mr}),v.isDragging&&(v.isDragging=!1,v.onDragEnd({event:hn}),(Wr=v.eventCenter)===null||Wr===void 0||Wr.emit(Ln["".concat(v.eventType,"_DROP")],{e:hn,data:v.data||mr}))})}),Ao(this,"cancelDrag",function(){var hn,Un=(hn=window)===null||hn===void 0?void 0:hn.document;Un.removeEventListener("mousemove",v.handleMouseMove,!1),Un.removeEventListener("mouseup",v.handleMouseUp,!1),v.onDragEnd({event:null}),v.isDragging=!1}),this.onDragStart=m,this.onDragging=k,this.onDragEnd=V,this.step=at,this.isStopPropagation=_t,this.eventType=te,this.eventCenter=Ne,this.model=gn,this.data=Kn}var i,l;return i=a,(l=[{key:"setStep",value:function(u){this.step=u}},{key:"setModel",value:function(u){this.model=u}}])&&Nl(i.prototype,l),a}();function ot(a){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ot(a)}function tt(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sn(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function vr(a,i,l){return i&&sn(a.prototype,i),a}function ve(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&Fe(a,i)}function ie(a){var i=Ce();return function(){var l,u=he(a);if(i){var v=he(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return Re(this,l)}}function Re(a,i){if(i&&(ot(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ze(a)}function ze(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ze(a){var i=typeof Map=="function"?new Map:void 0;return Ze=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,v)}function v(){return De(l,arguments,he(this).constructor)}return v.prototype=Object.create(l.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),Fe(v,l)},Ze(a)}function De(a,i,l){return De=Ce()?Reflect.construct:function(u,v,p){var m=[null];m.push.apply(m,v);var O=new(Function.bind.apply(u,m));return p&&Fe(O,p.prototype),O},De.apply(null,arguments)}function Ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fe(a,i){return Fe=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Fe(a,i)}function he(a){return he=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},he(a)}function ke(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function pe(a,i){return a instanceof We&&i instanceof We}var He=function(a){ve(l,a);var i=ie(l);function l(u,v,p){var m;return tt(this,l),ke(ze(m=i.call(this,3)),"x",void 0),ke(ze(m),"y",void 0),ke(ze(m),"z",void 0),m[0]=u,m[1]=v,m[2]=p,m.x=u,m.y=v,m.z=p,Object.setPrototypeOf(ze(m),l.prototype),m}return vr(l,[{key:"add",value:function(u){if(pe(this,u))return new We(this.x+u.x,this.y+u.y);var v=this.z+u.z;return new h((this.x+u.x)/v,(this.y+u.y)/v)}},{key:"subtract",value:function(u){if(pe(this,u))return new We(this.x-u.x,this.y-u.y);var v=this.z-u.z;return v===0?new We(this.x-u.x,this.y-u.y):new h((this.x-u.x)/v,(this.y-u.y)/v)}}]),l}(Ze(Array)),We=function(a){ve(l,a);var i=ie(l);function l(u,v,p){var m;return tt(this,l),m=i.call(this,u,v,p??0),Object.setPrototypeOf(ze(m),l.prototype),m}return vr(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(u){var v=this;return u.reduce(function(p,m,O){return p+m*v[O]})}},{key:"cross",value:function(u){return new l(this.y*u.z-this.z*u.y,this.z*u.x-this.x*u.z,this.x*u.y-this.y*u.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var u=this.getLength();return new l(this.x/u,this.y/u)}},{key:"crossZ",value:function(u){return this.x*u.y-this.y*u.x}},{key:"angle",value:function(u){var v=this.crossZ(u),p=Math.acos(this.normalize().dot(u.normalize()));return v>=0?p:-p}}]),l}(He),h=function(a){ve(l,a);var i=ie(l);function l(u,v){var p;return tt(this,l),p=i.call(this,u,v,1),Object.setPrototypeOf(ze(p),l.prototype),p}return vr(l,[{key:"toString",value:function(){return"Point"}}]),l}(He);r(67),r(218);function g(a){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},g(a)}function A(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||Q(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L(a){return function(i){if(Array.isArray(i))return re(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||Q(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Q(a,i){if(a){if(typeof a=="string")return re(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?re(a,i):void 0}}function re(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function me(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Se(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ve(a,i,l){return i&&Se(a.prototype,i),a}function mt(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&nn(a,i)}function bt(a){var i=Lt();return function(){var l,u=sr(a);if(i){var v=sr(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return Ht(this,l)}}function Ht(a,i){if(i&&(g(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return En(a)}function En(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Sn(a){var i=typeof Map=="function"?new Map:void 0;return Sn=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,v)}function v(){return Yn(l,arguments,sr(this).constructor)}return v.prototype=Object.create(l.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),nn(v,l)},Sn(a)}function Yn(a,i,l){return Yn=Lt()?Reflect.construct:function(u,v,p){var m=[null];m.push.apply(m,v);var O=new(Function.bind.apply(u,m));return p&&nn(O,p.prototype),O},Yn.apply(null,arguments)}function Lt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nn(a,i){return nn=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},nn(a,i)}function sr(a){return sr=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},sr(a)}function Pn(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Xe,gr,Gr,Jn,dr,ki,Ga,Ql,Ni,As,hu,Pf,jp,Ts=function(a){mt(l,a);var i=bt(l);function l(){var u;me(this,l);for(var v=arguments.length,p=new Array(v),m=0;m<v;m++)p[m]=arguments[m];return Pn(En(u=i.call(this,p.length)),"rows",void 0),Pn(En(u),"columns",void 0),u.fill(new Array(3)),p.forEach(function(O,k){u[k]=O}),u.columns=p[0].length,u.rows=p.length,Object.setPrototypeOf(En(u),l.prototype),u}return Ve(l,[{key:"getRow",value:function(u){return this[u]}},{key:"getColumn",value:function(u){return L(this.map(function(v){return v[u]}))}},{key:"transpose",value:function(){for(var u=[],v=0;v<this.columns;v++)u.push(this.getColumn(v));return Yn(l,u)}},{key:"cross",value:function(u){var v=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===u.rows)for(var p=0;p<this.rows;p++)for(var m=this.getRow(p),O=function(D){var V=u.getColumn(D);v[p][D]=m.reduce(function(ee,te,_e){return ee+te*V[_e]},0)},k=0;k<u.columns;k++)O(k);return Yn(l,L(v))}},{key:"to2D",value:function(){return this.map(function(u){return[u[0],u[1]]})}},{key:"toPoints",value:function(){return this.map(function(u){return new h(u[0],u[1])})}},{key:"toString",value:function(){var u=A(this[0],2),v=u[0],p=u[1],m=A(this[1],2),O=m[0],k=m[1],D=A(this[2],2),V=D[0],ee=D[1];return"matrix(".concat(v," ").concat(p," ").concat(O," ").concat(k," ").concat(V," ").concat(ee,")")}},{key:"translate",value:function(u,v){return this.cross(new Rf(u,v))}},{key:"rotate",value:function(u){return this.cross(new ec(u))}},{key:"scale",value:function(u,v){return this.cross(new rm(u,v))}}]),l}(Sn(Array)),ec=function(a){mt(l,a);var i=bt(l);function l(u){var v;return me(this,l),v=i.call(this,new We(+Math.cos(u).toFixed(2),+Math.sin(u).toFixed(2),0),new We(-Math.sin(u).toFixed(2),+Math.cos(u).toFixed(2),0),new We(0,0,1)),Object.setPrototypeOf(En(v),l.prototype),v}return Ve(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Ts),rm=function(a){mt(l,a);var i=bt(l);function l(u,v){var p;return me(this,l),Pn(En(p=i.call(this,new We(u,0,0),new We(0,v,0),new We(0,0,1))),"sx",void 0),Pn(En(p),"sy",void 0),p.sx=u,p.sy=v,Object.setPrototypeOf(En(p),l.prototype),p}return Ve(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Ts),Rf=function(a){mt(l,a);var i=bt(l);function l(u,v){var p;return me(this,l),Pn(En(p=i.call(this,new We(1,0,0),new We(0,1,0),new We(u,v,1))),"tx",void 0),Pn(En(p),"ty",void 0),p.tx=u,p.ty=v,Object.setPrototypeOf(En(p),l.prototype),p}return Ve(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Ts),Ip={node:!1,edge:!1},om={node:!0,edge:!0};function Lp(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function vd(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Lp(Object(l),!0).forEach(function(u){mu(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Lp(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function md(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||$p(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vu(a){return function(i){if(Array.isArray(i))return z_(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||$p(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $p(a,i){if(a){if(typeof a=="string")return z_(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?z_(a,i):void 0}}function z_(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function sy(a){return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},sy(a)}function ks(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function jR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function mu(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Qn(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var l2,s2=200,u2=(Xe=function(){function a(u){(function(_e,Ne){if(!(_e instanceof Ne))throw new TypeError("Cannot call a class as a function")})(this,a),mu(this,"rootEl",void 0),ks(this,"width",gr,this),ks(this,"height",Gr,this),mu(this,"theme",void 0),mu(this,"eventCenter",void 0),mu(this,"modelMap",new Map),mu(this,"topElement",void 0),mu(this,"animation",void 0),mu(this,"idGenerator",void 0),mu(this,"edgeGenerator",void 0),mu(this,"nodeMoveRules",[]),mu(this,"customTrajectory",void 0),ks(this,"edgeType",Jn,this),ks(this,"nodes",dr,this),ks(this,"edges",ki,this),ks(this,"overlapMode",Ga,this),ks(this,"background",Ql,this),ks(this,"transformModel",Ni,this),ks(this,"editConfigModel",As,this),ks(this,"gridSize",hu,this),ks(this,"partial",Pf,this),ks(this,"fakerNode",jp,this);var v,p=u.container,m=u.background,O=m===void 0?{}:m,k=u.grid,D=u.idGenerator,V=u.edgeGenerator,ee=u.animation,te=u.customTrajectory;this.background=O,sy(k)==="object"&&(this.gridSize=k.size),this.rootEl=p,this.editConfigModel=new of(u),this.eventCenter=new yf,this.transformModel=new vp(this.eventCenter,u),this.theme=Yl(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(v=ee)&&typeof v!="boolean"?nu(io(Ip),v):io(v===!0?om:Ip),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=D,this.customTrajectory=te,this.edgeGenerator=tr(this,V),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=ra()}var i,l;return i=a,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,v,p){return u[v.id]={index:p,model:v},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,v,p){return u[v.id]={index:p,model:v},u},{})}},{key:"modelsMap",get:function(){return[].concat(vu(this.nodes),vu(this.edges)).reduce(function(u,v){return u[v.id]=v,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(D){return u.push(D)}),this.edges.forEach(function(D){return u.push(D)}),u=u.sort(function(D,V){return D.zIndex-V.zIndex});for(var v=[],p=[-200,-200],m=[this.width+s2,this.height+s2],O=0;O<u.length;O++){var k=u[O];k.visible&&(!this.partial||k.isSelected||this.isElementInArea(k,p,m,!1,!1))&&v.push(k)}return v}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(p){return p.state===Jr.TEXT_EDIT}),v=this.edges.find(function(p){return p.state===Jr.TEXT_EDIT});return u||v}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(v){v.isSelected&&u.set(v.id,v)}),this.edges.forEach(function(v){v.isSelected&&u.set(v.id,v)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(v){v.isSelected&&u.push(v)}),u}},{key:"getAreaElement",value:function(u,v){var p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],O=arguments.length>4&&arguments[4]!==void 0&&arguments[4],k=[],D=[];this.nodes.forEach(function(te){return D.push(te)}),this.edges.forEach(function(te){return D.push(te)});for(var V=0;V<D.length;V++){var ee=D[V];O&&!ee.visible||!this.isElementInArea(ee,u,v,p,m)||k.push(ee)}return k}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var v;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(v=this.nodesMap[u])===null||v===void 0?void 0:v.model}},{key:"getPointByClient",value:function(u){var v=u.x,p=u.y,m=this.rootEl.getBoundingClientRect(),O={x:v-m.left,y:p-m.top},k=md(this.transformModel.HtmlPointToCanvasPoint([O.x,O.y]),2);return{domOverlayPosition:O,canvasOverlayPosition:{x:k[0],y:k[1]}}}},{key:"isElementInArea",value:function(u,v,p){var m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],O=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===mo.NODE){for(var k=Mo(u=u),D=k.minX,V=k.minY,ee=k.maxX,te=k.maxY,_e=[{x:D,y:V},{x:ee,y:V},{x:ee,y:te},{x:D,y:te}],Ne=O,je=0;je<_e.length;je++){var at=_e[je],it=at.x,_t=at.y,zt=this.transformModel.CanvasPointToHtmlPoint([it,_t]),gn=md(zt,2);if(it=gn[0],_t=gn[1],Wu([it,_t],v,p)!==O){Ne=!O;break}}return Ne}if(u.BaseType===mo.EDGE){var mn=u=u,Kn=mn.startPoint,hn=mn.endPoint,Un=this.transformModel.CanvasPointToHtmlPoint([Kn.x,Kn.y]),xn=this.transformModel.CanvasPointToHtmlPoint([hn.x,hn.y]),Br=Wu(Un,v,p),Wr=Wu(xn,v,p);return m?Br&&Wr:Br||Wr}return!1}},{key:"graphDataToModel",value:function(u){var v=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=Qd(u.nodes,function(p){return v.getModelAfterSnapToGrid(p)}):this.nodes=[],u.edges?this.edges=Qd(u.edges,function(p){var m=v.getModel(p.type);if(!m)throw new Error("找不到".concat(p.type,"对应的边。"));return new m(p,v)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(p){var m=p.getData();m&&!p.virtual&&u.push(m)});var v=[];return this.nodes.forEach(function(p){var m=p.getData();m&&!p.virtual&&v.push(m)}),{nodes:v,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,v=[],p=0;p<this.nodes.length;p++){var m=this.nodes[p];if(m.isDragging){u=!0;break}v.push(m.getHistoryData())}if(u)return!1;for(var O=!1,k=[],D=0;D<this.edges.length;D++){var V=this.edges[D];if(V.isDragging){O=!0;break}k.push(V.getHistoryData())}return!O&&{nodes:v,edges:k}}},{key:"getEdgeModelById",value:function(u){var v;return(v=this.edgesMap[u])===null||v===void 0?void 0:v.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var v=[],p=0;p<this.edges.length;p++){var m=this.edges[p],O=this.edges[p].sourceNodeId===u,k=this.edges[p].targetNodeId===u;(O||k)&&v.push(m)}return v}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],v=this.selectElements,p={nodes:[],edges:[]};return v.forEach(function(m){if(m.BaseType===mo.NODE&&p.nodes.push(m.getData()),m.BaseType===mo.EDGE){var O=m.getData(),k=v.get(O.sourceNodeId)&&v.get(O.targetNodeId);(u||k)&&p.edges.push(O)}}),p}},{key:"updateAttributes",value:function(u,v){this.getElement(u).updateAttributes(v)}},{key:"changeNodeId",value:function(u,v){return v||(v=ra()),this.nodesMap[v]?"":this.nodesMap[u]?(this.edges.forEach(function(p){p.sourceNodeId===u&&(p.sourceNodeId=v),p.targetNodeId===u&&(p.targetNodeId=v)}),this.nodesMap[u].model.id=v,this.nodesMap[v]=this.nodesMap[u],v):""}},{key:"changeEdgeId",value:function(u,v){return v||(v=ra()),this.edgesMap[v]?"":this.edgesMap[u]?(this.edges.forEach(function(p){p.id===u&&p.changeEdgeId(v)}),v):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,v){return this.modelMap.set(u,v)}},{key:"toFront",value:function(u){var v,p,m,O=((v=this.nodesMap[u])===null||v===void 0?void 0:v.model)||((p=this.edgesMap[u])===null||p===void 0?void 0:p.model);O&&(this.overlapMode===Ro.DEFAULT&&((m=this.topElement)===null||m===void 0||m.setZIndex(),O.setZIndex(9999),this.topElement=O),this.overlapMode===Ro.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,v){var p,m,O,k=((p=this.nodesMap[u])===null||p===void 0?void 0:p.model)||((m=this.edgesMap[u])===null||m===void 0?void 0:m.model);k&&(typeof v=="number"&&(O=v),v==="top"&&(O=cu()),v==="bottom"&&(O=--sd),k.setZIndex(O))}},{key:"deleteNode",value:function(u){var v=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(Ln.NODE_DELETE,{data:v})}},{key:"addNode",value:function(u){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ln.NODE_ADD,p=arguments.length>2?arguments[2]:void 0,m=bi(u);m.id&&this.nodesMap[u.id]&&delete m.id;var O=this.getModelAfterSnapToGrid(m);this.nodes.push(O);var k=O.getData(),D={data:k};return p&&(D.e=p),this.eventCenter.emit(v,D),O}},{key:"getModelAfterSnapToGrid",value:function(u){var v=this.getModel(u.type);if(!v)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));var p=u.x,m=u.y;return p&&m&&(u.x=rl(p,this.gridSize),u.y=rl(m,this.gridSize),sy(u.text)==="object"&&(u.text.x+=u.x-p,u.text.y+=u.y-m)),new v(u,this)}},{key:"cloneNode",value:function(u){var v=this.getNodeModelById(u),p=v.getData();p.x+=30,p.y+=30,delete p.id,p.text&&(p.text.x+=30,p.text.y+=30);var m=this.addNode(p);return m.setSelected(!0),v.setSelected(!1),m.getData()}},{key:"moveNode",value:function(u,v,p){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],O=this.nodesMap[u];if(O){var k=O.model,D=k.getMoveDistance(v,p,m),V=md(D,2);v=V[0],p=V[1],this.moveEdge(u,v,p)}}},{key:"moveNode2Coordinate",value:function(u,v,p){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],O=this.nodesMap[u];if(O){var k=O.model,D=k.x,V=k.y,ee=v-D,te=p-V;this.moveNode(u,ee,te,m)}}},{key:"editText",value:function(u){this.setElementStateById(u,Jr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var v=bi(u),p=v.type;p||(p=this.edgeType),v.id&&this.edgesMap[v.id]&&delete v.id;var m=this.getModel(p);if(!m)throw new Error("找不到".concat(p,"对应的边，请确认是否已注册此类型边。"));var O=new m(vd(vd({},v),{},{type:p}),this),k=O.getData();return this.edges.push(O),this.eventCenter.emit(Ln.EDGE_ADD,{data:k}),O}},{key:"moveEdge",value:function(u,v,p){for(var m=0;m<this.edges.length;m++){var O=this.edges[m],k=O.textPosition,D=k.x,V=k.y,ee=this.edges[m].sourceNodeId===u,te=this.edges[m].targetNodeId===u;ee&&O.moveStartPoint(v,p),te&&O.moveEndPoint(v,p),(ee||te)&&this.handleEdgeTextMove(O,D,V)}}},{key:"handleEdgeTextMove",value:function(u,v,p){var m;if(u.customTextPosition===!0)u.resetTextPosition();else if(u.modelType===Pr.POLYLINE_EDGE&&(m=u.text)!==null&&m!==void 0&&m.value){var O=u.text,k=Dr(O,u.points);u.moveText(k.x-O.x,k.y-O.y)}else{var D=u.textPosition,V=D.x,ee=D.y;u.moveText(V-v,ee-p)}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,v){for(var p=0;p<this.edges.length;p++)if(this.edges[p].sourceNodeId===u&&this.edges[p].targetNodeId===v){var m=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Ln.EDGE_DELETE,{data:m})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var v=this.edgesMap[u].index,p=this.edgesMap[u].model.getData();this.edges.splice(v,1),this.eventCenter.emit(Ln.EDGE_DELETE,{data:p})}}},{key:"deleteEdgeBySource",value:function(u){for(var v=0;v<this.edges.length;v++)if(this.edges[v].sourceNodeId===u){var p=this.edges[v].getData();this.edges.splice(v,1),v--,this.eventCenter.emit(Ln.EDGE_DELETE,{data:p})}}},{key:"deleteEdgeByTarget",value:function(u){for(var v=0;v<this.edges.length;v++)if(this.edges[v].targetNodeId===u){var p=this.edges[v].getData();this.edges.splice(v,1),v--,this.eventCenter.emit(Ln.EDGE_DELETE,{data:p})}}},{key:"setElementStateById",value:function(u,v,p){this.nodes.forEach(function(m){m.id===u?m.setElementState(v,p):m.setElementState(Jr.DEFAULT)}),this.edges.forEach(function(m){m.id===u?m.setElementState(v,p):m.setElementState(Jr.DEFAULT)})}},{key:"updateText",value:function(u,v){this.nodes.forEach(function(p){p.id===u&&p.updateText(v)}),this.edges.forEach(function(p){p.id===u&&p.updateText(v)})}},{key:"selectNodeById",value:function(u){var v,p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];p||this.clearSelectElements();var m=(v=this.nodesMap[u])===null||v===void 0?void 0:v.model;m==null||m.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var v,p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];p||this.clearSelectElements();var m=(v=this.edgesMap[u])===null||v===void 0?void 0:v.model;m==null||m.setSelected(!0)}},{key:"selectElementById",value:function(u){var v=arguments.length>1&&arguments[1]!==void 0&&arguments[1];v||this.clearSelectElements();var p=this.getElement(u);p==null||p.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(v){v==null||v.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===Ro.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,v,p){for(var m=this,O=arguments.length>3&&arguments[3]!==void 0&&arguments[3],k=u.reduce(function(mn,Kn){var hn=m.nodesMap[Kn].model.getMoveDistance(v,p,O);return mn[Kn]=hn,mn},{}),D=0;D<this.edges.length;D++){var V=this.edges[D],ee=V.textPosition,te=ee.x,_e=ee.y,Ne=k[V.sourceNodeId],je=k[V.targetNodeId],at=void 0,it=void 0;if(Ne&&je&&V.modelType===Pr.POLYLINE_EDGE){var _t=md(Ne,2);at=_t[0],it=_t[1],V.updatePointsList(at,it)}else{if(Ne){var zt=md(Ne,2);at=zt[0],it=zt[1],V.moveStartPoint(at,it)}if(je){var gn=md(je,2);at=gn[0],it=gn[1],V.moveEndPoint(at,it)}}(Ne||je)&&this.handleEdgeTextMove(V,te,_e)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,v){var p=this.getNodeModelById(u);if(p){var m=p.getData();m.type=v;var O=this.getModel(v);if(!O)throw new Error("找不到".concat(v,"对应的节点，请确认是否已注册此类型节点。"));var k=new O(m,this);this.nodes.splice(this.nodesMap[u].index,1,k),this.getNodeEdges(u).forEach(function(D){if(D.sourceNodeId===u){var V=ad(k,D.startPoint,k.width,k.height);D.updateStartPoint(V)}if(D.targetNodeId===u){var ee=ad(k,D.endPoint,k.width,k.height);D.updateEndPoint(ee)}})}}},{key:"changeEdgeType",value:function(u,v){var p=this.getEdgeModelById(u);if(p&&p.type!==v){var m=p.getData();m.type=v;var O=this.getModel(v);if(!O)throw new Error("找不到".concat(v,"对应的节点，请确认是否已注册此类型节点。"));delete m.pointsList;var k=new O(m,this);this.edges.splice(this.edgesMap[u].index,1,k)}}},{key:"getNodeIncomingEdge",value:function(u){var v=[];return this.edges.forEach(function(p){p.targetNodeId===u&&v.push(p)}),v}},{key:"getNodeOutgoingEdge",value:function(u){var v=[];return this.edges.forEach(function(p){p.sourceNodeId===u&&v.push(p)}),v}},{key:"getAnchorIncomingEdge",value:function(u){var v=[];return this.edges.forEach(function(p){p.targetAnchorId===u&&v.push(p)}),v}},{key:"getAnchorOutcomingEdge",value:function(u){var v=[];return this.edges.forEach(function(p){p.sourceAnchorId===u&&v.push(p)}),v}},{key:"getNodeIncomingNode",value:function(u){var v=this,p=[];return this.edges.forEach(function(m){m.targetNodeId===u&&p.push(v.nodesMap[m.sourceNodeId].model)}),p}},{key:"getNodeOutgoingNode",value:function(u){var v=this,p=[];return this.edges.forEach(function(m){m.sourceNodeId===u&&p.push(v.nodesMap[m.targetNodeId].model)}),p}},{key:"setTheme",value:function(u){this.theme=Yl(vd(vd({},this.theme),u))}},{key:"resize",value:function(u,v){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=v||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,v=[],p=[];u.forEach(function(ee){var te=ee.x,_e=ee.y,Ne=ee.width,je=ee.height,at=ee.getNodeStyle().strokeWidth,it=at===void 0?0:at,_t=te+Ne/2+it,zt=te-Ne/2-it,gn=_e+je/2+it,mn=_e-je/2-it;v=v.concat([_t,zt].filter(function(Kn){return!Number.isNaN(Kn)})),p=p.concat([gn,mn].filter(function(Kn){return!Number.isNaN(Kn)}))});var m=Math.min.apply(Math,vu(v)),O=Math.max.apply(Math,vu(v)),k=Math.min.apply(Math,vu(p)),D=O-m||0,V=Math.max.apply(Math,vu(p))-k||0;return{virtualRectWidth:D,virtualRectHeight:V,virtualRectCenterPositionX:m+D/2,virtualRectCenterPositionY:k+V/2}}},{key:"translateCenter",value:function(){var u=this.nodes,v=this.width,p=this.height,m=this.rootEl,O=this.transformModel;if(u.length){var k=v||m.clientWidth,D=p||m.clientHeight,V=this.getVirtualRectSize(),ee=V.virtualRectCenterPositionX,te=V.virtualRectCenterPositionY;O.focusOn(ee,te,k,D)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,p=this.nodes,m=this.width,O=this.height,k=this.rootEl,D=this.transformModel;if(p.length){var V=m||k.clientWidth,ee=O||k.clientHeight,te=this.getVirtualRectSize(),_e=te.virtualRectWidth,Ne=te.virtualRectHeight,je=te.virtualRectCenterPositionX,at=te.virtualRectCenterPositionY,it=(_e+v)/V,_t=(Ne+u)/ee,zt=0;zt=1/Math.max(it,_t);var gn=[V/2,ee/2];D.zoom(zt,gn),D.focusOn(je,at,V,ee)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],l&&jR(i.prototype,l),a}(),gr=Qn(Xe.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gr=Qn(Xe.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jn=Qn(Xe.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dr=Qn(Xe.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ki=Qn(Xe.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ga=Qn(Xe.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ro.DEFAULT}}),Ql=Qn(Xe.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ni=Qn(Xe.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),As=Qn(Xe.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hu=Qn(Xe.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Pf=Qn(Xe.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jp=Qn(Xe.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qn(Xe.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"nodesMap"),Xe.prototype),Qn(Xe.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"edgesMap"),Xe.prototype),Qn(Xe.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"modelsMap"),Xe.prototype),Qn(Xe.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"sortElements"),Xe.prototype),Qn(Xe.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"textEditElement"),Xe.prototype),Qn(Xe.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"selectElements"),Xe.prototype),Qn(Xe.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"selectNodes"),Xe.prototype),Qn(Xe.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setFakerNode"),Xe.prototype),Qn(Xe.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"removeFakerNode"),Xe.prototype),Qn(Xe.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setModel"),Xe.prototype),Qn(Xe.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"toFront"),Xe.prototype),Qn(Xe.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setElementZIndex"),Xe.prototype),Qn(Xe.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"deleteNode"),Xe.prototype),Qn(Xe.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"addNode"),Xe.prototype),Qn(Xe.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"cloneNode"),Xe.prototype),Qn(Xe.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"moveNode"),Xe.prototype),Qn(Xe.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"moveNode2Coordinate"),Xe.prototype),Qn(Xe.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"editText"),Xe.prototype),Qn(Xe.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"addEdge"),Xe.prototype),Qn(Xe.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"moveEdge"),Xe.prototype),Qn(Xe.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"deleteEdgeBySourceAndTarget"),Xe.prototype),Qn(Xe.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"deleteEdgeById"),Xe.prototype),Qn(Xe.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"deleteEdgeBySource"),Xe.prototype),Qn(Xe.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"deleteEdgeByTarget"),Xe.prototype),Qn(Xe.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setElementStateById"),Xe.prototype),Qn(Xe.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"updateText"),Xe.prototype),Qn(Xe.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"selectNodeById"),Xe.prototype),Qn(Xe.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"selectEdgeById"),Xe.prototype),Qn(Xe.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"selectElementById"),Xe.prototype),Qn(Xe.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"clearSelectElements"),Xe.prototype),Qn(Xe.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"moveNodes"),Xe.prototype),Qn(Xe.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setDefaultEdgeType"),Xe.prototype),Qn(Xe.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"changeNodeType"),Xe.prototype),Qn(Xe.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"changeEdgeType"),Xe.prototype),Qn(Xe.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getNodeIncomingEdge"),Xe.prototype),Qn(Xe.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getNodeOutgoingEdge"),Xe.prototype),Qn(Xe.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getAnchorIncomingEdge"),Xe.prototype),Qn(Xe.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getAnchorOutcomingEdge"),Xe.prototype),Qn(Xe.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getNodeIncomingNode"),Xe.prototype),Qn(Xe.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getNodeOutgoingNode"),Xe.prototype),Qn(Xe.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setTheme"),Xe.prototype),Qn(Xe.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"resize"),Xe.prototype),Qn(Xe.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"clearData"),Xe.prototype),Qn(Xe.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"translateCenter"),Xe.prototype),Qn(Xe.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"fitView"),Xe.prototype),Qn(Xe.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"openEdgeAnimation"),Xe.prototype),Qn(Xe.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"closeEdgeAnimation"),Xe.prototype),Xe),IR=u2;function H_(a){return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H_(a)}function W_(){return W_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},W_.apply(this,arguments)}function LR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function X_(a,i){return X_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},X_(a,i)}function $R(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=uy(a);if(i){var v=uy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return FR(this,l)}}function FR(a,i){if(i&&(H_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tc(a)}function tc(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function uy(a){return uy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},uy(a)}function yd(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var c2,VR=bu(l2=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&X_(p,m)})(v,a);var i,l,u=$R(v);function v(p){var m;(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,v),yd(tc(m=u.call(this)),"stepDrag",void 0),yd(tc(m),"stepScrollX",0),yd(tc(m),"stepScrollY",0),yd(tc(m),"onDragging",function(V){var ee=V.deltaX,te=V.deltaY;m.setState({isDragging:!0});var _e=m.props.graphModel,Ne=_e.transformModel;_e.editConfigModel.stopMoveGraph!==!0&&Ne.translate(ee,te)}),yd(tc(m),"onDragEnd",function(){m.setState({isDragging:!1})}),yd(tc(m),"zoomHandler",function(V){var ee=m.props,te=ee.graphModel,_e=te.editConfigModel,Ne=te.transformModel,je=te.gridSize,at=ee.graphModel,it=V.deltaX,_t=V.deltaY;if(_e.stopScrollGraph||V.ctrlKey===!0){if(!_e.stopZoomGraph){V.preventDefault();var zt=at.getPointByClient({x:V.clientX,y:V.clientY}).canvasOverlayPosition,gn=zt.x,mn=zt.y;Ne.zoom(V.deltaY<0,[gn,mn])}}else{if(V.preventDefault(),m.stepScrollX+=it,m.stepScrollY+=_t,Math.abs(m.stepScrollX)>=je){var Kn=m.stepScrollX%je,hn=m.stepScrollX-Kn;Ne.translate(-hn*Ne.SCALE_X,0),m.stepScrollX=Kn}if(Math.abs(m.stepScrollY)>=je){var Un=m.stepScrollY%je,xn=m.stepScrollY-Un;Ne.translate(0,-xn*Ne.SCALE_Y),m.stepScrollY=Un}}}),yd(tc(m),"clickHandler",function(V){if(V.target.getAttribute("name")==="canvas-overlay"){var ee=m.props.graphModel;ee.selectElements.size>0&&ee.clearSelectElements(),ee.eventCenter.emit(Ln.BLANK_CLICK,{e:V})}}),yd(tc(m),"handleContextMenu",function(V){if(V.target.getAttribute("name")==="canvas-overlay"){V.preventDefault();var ee=m.props.graphModel,te=ee.getPointByClient({x:V.clientX,y:V.clientY});ee.eventCenter.emit(Ln.BLANK_CONTEXTMENU,{e:V,position:te})}}),yd(tc(m),"mouseDownHandler",function(V){var ee=m.props.graphModel,te=ee.eventCenter,_e=ee.editConfigModel,Ne=ee.transformModel.SCALE_X,je=ee.gridSize,at=V.target,it=!_e.adjustEdge&&!_e.adjustNodePosition;(at.getAttribute("name")==="canvas-overlay"||it)&&(_e.stopMoveGraph!==!0?(m.stepDrag.setStep(je*Ne),m.stepDrag.handleMouseDown(V)):te.emit(Ln.BLANK_MOUSEDOWN,{e:V}),m.clickHandler(V))});var O=p.graphModel,k=O.gridSize,D=O.eventCenter;return m.stepDrag=new ge({onDragging:m.onDragging,onDragEnd:m.onDragEnd,step:k,eventType:"BLANK",isStopPropagation:!1,eventCenter:D,model:null}),m.state={isDragging:!1},m}return i=v,(l=[{key:"render",value:function(){var p=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props,O=m.children,k=m.dnd,D=this.state.isDragging;return Object(Ie.g)("svg",W_({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:D?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},k.eventMap()),Object(Ie.g)("g",{transform:p},O))}}])&&LR(i.prototype,l),v}(Ie.a))||l2;function q_(a){return q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},q_(a)}function BR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function UR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Y_(a,i){return Y_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Y_(a,i)}function GR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=cy(a);if(i){var v=cy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return zR(this,l)}}function zR(a,i){if(i&&(q_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function cy(a){return cy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},cy(a)}var HR=bu(c2=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Y_(p,m)})(v,a);var i,l,u=GR(v);function v(){return BR(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var p=this.props,m=p.tool,O=p.graphModel,k=m.getTools().map(function(D){return Object(Ie.g)(D,{graphModel:O,logicFlow:m.instance})});return m.components=k,k}},{key:"triggerToolRender",value:function(){var p=this.props,m=p.tool,O=p.graphModel,k=document.querySelector("#ToolOverlay_".concat(O.flowId)),D=m.getInstance();D.components.forEach(function(V){return V(D,k)}),D.components=[]}},{key:"render",value:function(){var p=this.props.graphModel;return Object(Ie.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(p.flowId)},this.getTools())}}])&&UR(i.prototype,l),v}(Ie.a))||c2;function K_(a){return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},K_(a)}function WR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function XR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Z_(a,i){return Z_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Z_(a,i)}function qR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=dy(a);if(i){var v=dy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return YR(this,l)}}function YR(a,i){if(i&&(K_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function dy(a){return dy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},dy(a)}var d2,KR=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Z_(p,m)})(v,a);var i,l,u=qR(v);function v(){return WR(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"render",value:function(){var p=this.props.background;return Object(Ie.g)("div",{className:"lf-background"},Object(Ie.g)("div",{style:p,className:"lf-background-area"}))}}])&&XR(i.prototype,l),v}(Ie.a);function J_(a){return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},J_(a)}function ZR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function JR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Q_(a,i){return Q_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Q_(a,i)}function QR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=fy(a);if(i){var v=fy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return eC(this,l)}}function eC(a,i){if(i&&(J_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f2(a)}function f2(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function fy(a){return fy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},fy(a)}function tC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var p2=bu(d2=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Q_(p,m)})(v,a);var i,l,u=QR(v);function v(){var p;ZR(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return tC(f2(p=u.call.apply(u,[this].concat(O))),"id",ra()),p}return i=v,(l=[{key:"renderDot",value:function(){var p=this.props,m=p.config,O=m.color,k=m.thickness,D=k===void 0?2:k,V=p.size,ee=p.visible,te=Math.min(Math.max(2,D),V/2),_e=1;return ee||(_e=0),Object(Ie.g)("rect",{width:te,height:te,rx:te/2,ry:te/2,fill:O,opacity:_e})}},{key:"renderMesh",value:function(){var p=this.props,m=p.config,O=m.color,k=m.thickness,D=k===void 0?1:k,V=p.size,ee=p.visible,te=Math.min(Math.max(1,D),V/2),_e="M ".concat(V," 0 H0 M0 0 V0 ").concat(V),Ne=1;return ee||(Ne=0),Object(Ie.g)("path",{d:_e,stroke:O,strokeWidth:te,opacity:Ne})}},{key:"render",value:function(){var p=this.props,m=p.type,O=p.size,k=p.graphModel.transformModel,D=[k.SCALE_X,k.SKEW_Y,k.SKEW_X,k.SCALE_Y,k.TRANSLATE_X,k.TRANSLATE_Y].join(","),V="matrix(".concat(D,")");return Object(Ie.g)("div",{className:"lf-grid"},Object(Ie.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Ie.g)("defs",null,Object(Ie.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:V,x:"0",y:"0",width:O,height:O},m==="dot"&&this.renderDot(),m==="mesh"&&this.renderMesh())),Object(Ie.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&JR(i.prototype,l),v}(Ie.a))||d2;p2.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function eb(a){return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},eb(a)}function nC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return h2(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return h2(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function h2(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var v2,Fh=function(a){var i={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(a).forEach(function(l){var u=nC(l,2),v=u[0],p=u[1];(v==="style"||eb(p)!=="object")&&(i[v]=p)}),Object(Ie.g)("line",i)};function tb(a){return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},tb(a)}function m2(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function py(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?m2(Object(l),!0).forEach(function(u){rC(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):m2(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function rC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function oC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function iC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function nb(a,i){return nb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},nb(a,i)}function aC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=hy(a);if(i){var v=hy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return lC(this,l)}}function lC(a,i){if(i&&(tb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function hy(a){return hy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},hy(a)}var y2,sC=bu(v2=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&nb(p,m)})(v,a);var i,l,u=aC(v);function v(){return oC(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"render",value:function(){var p=this.props.snaplineModel,m=p.position,O=p.isShowHorizontal,k=p.isShowVertical,D=p.getStyle(),V=m.x,ee=V===void 0?0:V,te=m.y,_e=te===void 0?0:te,Ne=py(py({x1:-1e5,y1:_e,x2:1e5,y2:_e},D),{},{stroke:O?D.stroke:"none"}),je=py(py({x1:ee,y1:-1e5,x2:ee,y2:1e5},D),{},{stroke:k?D.stroke:"none"});return Object(Ie.g)("g",{className:"lf-snapline"},Object(Ie.g)(Fh,Ne),Object(Ie.g)(Fh,je))}}])&&iC(i.prototype,l),v}(Ie.a))||v2;function rb(a){return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},rb(a)}function uC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return g2(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return g2(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g2(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Cf(a){var i=a.x,l=a.y,u=a.width,v=a.height,p=a.className,m=a.radius,O=i-u/2,k=l-v/2,D={};return Object.entries(a).forEach(function(V){var ee=uC(V,2),te=ee[0],_e=ee[1];rb(_e)!=="object"&&(D[te]=_e)}),D.className=p?"lf-basic-shape ".concat(p):"lf-basic-shape",m&&(D.rx=m,D.ry=m),D.x=O,D.y=k,Object(Ie.g)("rect",D)}function ob(a){return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ob(a)}function Vh(){return Vh=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Vh.apply(this,arguments)}function _2(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function b2(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?_2(Object(l),!0).forEach(function(u){cC(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):_2(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function cC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function dC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function fC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ib(a,i){return ib=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},ib(a,i)}function pC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=vy(a);if(i){var v=vy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return hC(this,l)}}function hC(a,i){if(i&&(ob(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function vy(a){return vy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},vy(a)}Cf.defaultProps={className:"",radius:""};var w2,vC=bu(y2=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&ib(p,m)})(v,a);var i,l,u=pC(v);function v(){return dC(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"getNodesOutline",value:function(){var p=this.props.graphModel,m=p.nodes,O=p.editConfigModel,k=O.hoverOutline,D=O.nodeSelectedOutline,V=[];return m.forEach(function(ee){if(ee.isHovered||ee.isSelected){var te=ee.isHovered,_e=ee.isSelected,Ne=ee.x,je=ee.y,at=ee.width,it=ee.height;if(D&&_e||k&&te){var _t=ee.getOutlineStyle(),zt={};if(Object.keys(_t).forEach(function(mn){mn!=="hover"&&(zt[mn]=_t[mn])}),te){var gn=_t.hover;zt=b2(b2({},zt),gn)}V.push(Object(Ie.g)(Cf,Vh({transform:ee.transform,className:"lf-outline-node",x:Ne,y:je,width:at+10,height:it+10},zt)))}}}),V}},{key:"getEdgeOutline",value:function(){for(var p=this.props.graphModel,m=p.edges,O=p.editConfigModel,k=O.edgeSelectedOutline,D=O.hoverOutline,V=[],ee=0;ee<m.length;ee++){var te=m[ee];(k&&te.isSelected||D&&te.isHovered)&&(te.modelType===Pr.LINE_EDGE?V.push(this.getLineOutline(te)):te.modelType===Pr.POLYLINE_EDGE?V.push(this.getPolylineOutline(te)):te.modelType===Pr.BEZIER_EDGE&&V.push(this.getBezierOutline(te)))}return V}},{key:"getLineOutline",value:function(p){var m=p.startPoint,O=p.endPoint,k=(m.x+O.x)/2,D=(m.y+O.y)/2,V=Math.abs(m.x-O.x)+10,ee=Math.abs(m.y-O.y)+10,te=p.getOutlineStyle();return Object(Ie.g)(Cf,Vh({className:"lf-outline-edge",x:k,y:D,width:V,height:ee},te))}},{key:"getPolylineOutline",value:function(p){var m=p.points,O=ar(m),k=ut(O,8),D=k.x,V=k.y,ee=k.width,te=k.height,_e=p.getOutlineStyle();return Object(Ie.g)(Cf,Vh({className:"lf-outline",x:D,y:V,width:ee,height:te},_e))}},{key:"getBezierOutline",value:function(p){var m=p.path,O=wo(m),k=ut(O,8),D=k.x,V=k.y,ee=k.width,te=k.height,_e=p.getOutlineStyle();return Object(Ie.g)(Cf,Vh({className:"lf-outline",x:D,y:V,width:ee,height:te},_e))}},{key:"render",value:function(){return Object(Ie.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&fC(i.prototype,l),v}(Ie.a))||y2;function ab(a){return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ab(a)}function mC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return E2(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return E2(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function E2(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Bh(a){var i=a.x,l=i===void 0?0:i,u=a.y,v=u===void 0?0:u,p=a.r,m=p===void 0?4:p,O=a.className,k={cx:l,cy:v,r:m,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(D){var V=mC(D,2),ee=V[0],te=V[1];ab(te)!=="object"&&(k[ee]=te)}),k.className=O?"lf-basic-shape ".concat(O):"lf-basic-shape",Object(Ie.g)("circle",k)}function lb(a){return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},lb(a)}function yC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return O2(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return O2(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function O2(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function im(){return im=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},im.apply(this,arguments)}function S2(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function gC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function x2(a,i,l){return i&&gC(a.prototype,i),a}function M2(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&sb(a,i)}function sb(a,i){return sb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},sb(a,i)}function A2(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=yy(a);if(i){var v=yy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return _C(this,l)}}function _C(a,i){if(i&&(lb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return my(a)}function my(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function yy(a){return yy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},yy(a)}function ub(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var T2,k2=function(a){M2(l,a);var i=A2(l);function l(){var u;return S2(this,l),ub(my(u=i.call(this)),"dragHandler",void 0),ub(my(u),"onDragging",function(v){var p=v.event,m=u.props,O=m.graphModel,k=m.bezierModel,D=m.type,V=O.getPointByClient({x:p.clientX,y:p.clientY}).canvasOverlayPosition,ee=V.x,te=V.y;k.updateAdjustAnchor({x:ee,y:te},D),O.eventCenter.emit(Ln.EDGE_ADJUST,{data:k.getData()})}),ub(my(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new ge({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return x2(l,[{key:"render",value:function(){var u=this,v=this.props.position,p=v.x,m=v.y,O=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(Ie.g)(Bh,im({className:"lf-bezier-adjust-anchor",x:p,y:m},O,{onMouseDown:function(k){u.dragHandler.handleMouseDown(k)}}))}}]),l}(Ie.a),bC=bu(w2=function(a){M2(l,a);var i=A2(l);function l(){return S2(this,l),i.apply(this,arguments)}return x2(l,[{key:"getBezierAdjust",value:function(u,v){var p=u.path,m=u.id,O=yC(wo(p),4),k=O[0],D=O[1],V=O[2],ee=O[3],te=u.getEdgeStyle().adjustLine,_e=[];return _e.push(Object(Ie.g)(Fh,im({x1:k.x,y1:k.y,x2:D.x,y2:D.y},te))),_e.push(Object(Ie.g)(k2,{position:D,bezierModel:u,graphModel:v,key:"".concat(m,"_ePre"),type:"sNext"})),_e.push(Object(Ie.g)(Fh,im({x1:ee.x,y1:ee.y,x2:V.x,y2:V.y},te))),_e.push(Object(Ie.g)(k2,{position:V,bezierModel:u,graphModel:v,key:"".concat(m,"_sNext"),type:"ePre"})),_e}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,v=u.edges,p=[],m=0;m<v.length;m++){var O=v[m];O.isSelected&&O.modelType===Pr.BEZIER_EDGE&&O.draggable&&p.push(this.getBezierAdjust(O,u))}return p}},{key:"render",value:function(){return Object(Ie.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}(Ie.a))||w2;function cb(a){return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},cb(a)}function wC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function EC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function db(a,i){return db=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},db(a,i)}function OC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=gy(a);if(i){var v=gy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return SC(this,l)}}function SC(a,i){if(i&&(cb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function gy(a){return gy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},gy(a)}var N2,xC=bu(T2=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&db(p,m)})(v,a);var i,l,u=OC(v);function v(){return wC(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"render",value:function(){var p=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props.children;return Object(Ie.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Ie.g)("g",{transform:p},m))}}])&&EC(i.prototype,l),v}(Ie.a))||T2;function fb(a){return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},fb(a)}function pb(){return pb=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},pb.apply(this,arguments)}function MC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function AC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function hb(a,i){return hb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},hb(a,i)}function TC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=_y(a);if(i){var v=_y(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return kC(this,l)}}function kC(a,i){if(i&&(fb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function _y(a){return _y=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},_y(a)}var NC=bu(N2=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&hb(p,m)})(v,a);var i,l,u=TC(v);function v(){return MC(this,v),u.apply(this,arguments)}return i=v,l=[{key:"getComponent",value:function(p,m){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",k=this.props.getView,D=k(p.type);return Object(Ie.g)(D,{key:p.id,model:p,graphModel:m,overlay:O})}},{key:"render",value:function(){var p=this,m=this.props,O=m.graphModel,k=m.tool,D=m.options,V=m.dnd,ee=m.snaplineModel,te={};D.width&&(te.width="".concat(O.width,"px")),D.height&&(te.height="".concat(O.height,"px"));var _e=D.grid,Ne=O.fakerNode,je=O.editConfigModel.adjustEdge;return Object(Ie.g)("div",{className:"lf-graph","flow-id":O.flowId,style:te},Object(Ie.g)(VR,{graphModel:O,dnd:V},Object(Ie.g)("g",{className:"lf-base"},Qd(O.sortElements,function(at){return p.getComponent(at,O)})),Ne?this.getComponent(Ne,O):""),Object(Ie.g)(xC,{graphModel:O},Object(Ie.g)(vC,{graphModel:O}),je?Object(Ie.g)(bC,{graphModel:O}):"",D.snapline!==!1?Object(Ie.g)(sC,{snaplineModel:ee}):""),Object(Ie.g)(HR,{graphModel:O,tool:k}),D.background&&Object(Ie.g)(KR,{background:D.background}),D.grid&&Object(Ie.g)(p2,pb({},_e,{graphModel:O})))}}],l&&AC(i.prototype,l),v}(Ie.a))||N2,PC=NC;function P2(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function by(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?P2(Object(l),!0).forEach(function(u){gd(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):P2(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function RC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function gd(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var CC=function(){function a(u){var v=this;(function(m,O){if(!(m instanceof O))throw new TypeError("Cannot call a class as a function")})(this,a),gd(this,"nodeConfig",void 0),gd(this,"lf",void 0),gd(this,"fakerNode",void 0),gd(this,"stopDrag",function(){v.nodeConfig=null,window.document.removeEventListener("mouseup",v.stopDrag)}),gd(this,"dragEnter",function(m){v.nodeConfig&&!v.fakerNode&&(v.fakerNode=v.lf.createFakerNode(by(by({},v.nodeConfig),v.clientToLocalPoint({x:m.clientX,y:m.clientY}))))}),gd(this,"onDragOver",function(m){if(m.preventDefault(),v.fakerNode){var O=v.clientToLocalPoint({x:m.clientX,y:m.clientY}),k=O.x,D=O.y;v.fakerNode.moveTo(k,D);var V=v.fakerNode.getData();v.lf.setNodeSnapLine(V),v.lf.graphModel.eventCenter.emit(Ln.NODE_DND_DRAG,{data:V})}return!1}),gd(this,"onDragLeave",function(){v.fakerNode&&(v.lf.removeNodeSnapLine(),v.lf.graphModel.removeFakerNode(),v.fakerNode=null)}),gd(this,"onDrop",function(m){v.lf.graphModel&&m&&v.nodeConfig&&(v.lf.addNode(by(by({},v.nodeConfig),v.clientToLocalPoint({x:m.clientX,y:m.clientY})),Ln.NODE_DND_ADD,m),m.preventDefault(),m.stopPropagation(),v.nodeConfig=null,v.lf.removeNodeSnapLine(),v.lf.graphModel.removeFakerNode(),v.fakerNode=null)});var p=u.lf;this.lf=p}var i,l;return i=a,(l=[{key:"clientToLocalPoint",value:function(u){var v=u.x,p=u.y,m=Hs(this.lf.options,["grid","size"]),O=this.lf.graphModel.getPointByClient({x:v,y:p}).canvasOverlayPosition,k=O.x,D=O.y;return{x:rl(k,m),y:rl(D,m)}}},{key:"startDrag",value:function(u){var v=this.lf.graphModel.editConfigModel;v!=null&&v.isSilentMode||(this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&RC(i.prototype,l),a}();function R2(a){var i=a.container,l=a.grid,u=a.width,v=a.height;if(!i)throw new Error("请检查 container 参数是否有效");if(typeof u=="string"||typeof v=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(a.grid=nu({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),nu({},D2,a)}var vo,C2,D2={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function vb(a){return vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},vb(a)}function mb(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return j2(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return j2(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function j2(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function I2(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function wy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?I2(Object(l),!0).forEach(function(u){L2(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):I2(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function DC(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function jC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function IC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function am(){return am=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=LC(a,i);if(u){var v=Object.getOwnPropertyDescriptor(u,i);return v.get?v.get.call(arguments.length<3?a:l):v.value}},am.apply(this,arguments)}function LC(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Df(a))!==null;);return a}function yb(a,i){return yb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},yb(a,i)}function $C(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Df(a);if(i){var v=Df(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return FC(this,l)}}function FC(a,i){if(i&&(vb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ey(a)}function Ey(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Df(a){return Df=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Df(a)}function L2(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function yu(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var gb=(vo=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&yb(p,m)})(v,a);var i,l,u=$C(v);function v(){var p;jC(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return L2(Ey(p=u.call.apply(u,[this].concat(O))),"modelType",Pr.BEZIER_EDGE),DC(Ey(p),"path",C2,Ey(p)),p}return i=v,(l=[{key:"initEdgeData",value:function(p){this.offset=100,am(Df(v.prototype),"initEdgeData",this).call(this,p)}},{key:"getEdgeStyle",value:function(){var p=this.graphModel.theme.bezier;return wy(wy({},am(Df(v.prototype),"getEdgeStyle",this).call(this)),io(p))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var p=0,m=0;return this.pointsList.forEach(function(O){var k=O.x,D=O.y;p+=k,m+=D}),{x:p/this.pointsList.length,y:m/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var p=am(Df(v.prototype),"getData",this).call(this),m=this.pointsList.map(function(O){return{x:O.x,y:O.y}});return wy(wy({},p),{},{pointsList:m})}},{key:"getControls",value:function(){var p=this.startPoint,m=this.endPoint;return ei({start:p,end:m,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(p){var m=mb(p,4),O=m[0],k=m[1],D=m[2],V=m[3];return"M ".concat(O.x," ").concat(O.y,`
    C `).concat(k.x," ").concat(k.y,`,
    `).concat(D.x," ").concat(D.y,`,
    `).concat(V.x," ").concat(V.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var p=this.getControls(),m=p.sNext,O=p.ePre;this.updatePath(m,O)}},{key:"updatePath",value:function(p,m){p=io(p),m=io(m);var O={x:this.startPoint.x,y:this.startPoint.y},k={x:this.endPoint.x,y:this.endPoint.y};if(!p||!m){var D=this.getControls();p=D.sNext,m=D.ePre}this.pointsList=[O,p,m,k],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(p){this.startPoint=Object.assign({},p),this.updatePoints()}},{key:"updateEndPoint",value:function(p){this.endPoint=Object.assign({},p),this.updatePoints()}},{key:"moveStartPoint",value:function(p,m){this.startPoint.x+=p,this.startPoint.y+=m;var O=mb(this.pointsList,3),k=O[1],D=O[2];k.x+=p,k.y+=m,this.updatePath(k,D)}},{key:"moveEndPoint",value:function(p,m){this.endPoint.x+=p,this.endPoint.y+=m;var O=mb(this.pointsList,3),k=O[1],D=O[2];D.x+=p,D.y+=m,this.updatePath(k,D)}},{key:"updateAdjustAnchor",value:function(p,m){m==="sNext"?this.pointsList[1]=p:m==="ePre"&&(this.pointsList[2]=p),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var p=this.pointsList;return p[p.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(p){var m=p.startPoint,O=p.endPoint,k=p.sourceNode,D=p.targetNode,V=ei({start:m,end:O,sourceNode:k,targetNode:D,offset:this.offset}),ee=V.sNext,te=V.ePre;this.pointsList=[m,ee,te,O],this.initPoints()}}])&&IC(i.prototype,l),v}(cd),C2=yu(vo.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),yu(vo.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(vo.prototype,"initPoints"),vo.prototype),yu(vo.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(vo.prototype,"updatePoints"),vo.prototype),yu(vo.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(vo.prototype,"updateStartPoint"),vo.prototype),yu(vo.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(vo.prototype,"updateEndPoint"),vo.prototype),yu(vo.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(vo.prototype,"moveStartPoint"),vo.prototype),yu(vo.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(vo.prototype,"moveEndPoint"),vo.prototype),yu(vo.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(vo.prototype,"updateAdjustAnchor"),vo.prototype),yu(vo.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(vo.prototype,"getAdjustStart"),vo.prototype),yu(vo.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(vo.prototype,"getAdjustEnd"),vo.prototype),yu(vo.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(vo.prototype,"updateAfterAdjustStartAndEnd"),vo.prototype),vo),an,$2,F2,V2,B2,U2,G2,z2,H2,W2,X2,q2,Y2,K2,Z2,J2,Q2,eO,tO,nO,rO,oO,iO,VC=function(a){return a==null};function BC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||aO(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _b(a){return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_b(a)}function aO(a,i){if(a){if(typeof a=="string")return lO(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?lO(a,i):void 0}}function lO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function sO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function ul(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?sO(Object(l),!0).forEach(function(u){Pl(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):sO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Pi(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function UC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Pl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function jr(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var _d,uO,bd=(an=function(){function a(u,v){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,a),Pl(this,"id",""),Pi(this,"type",$2,this),Pi(this,"x",F2,this),Pi(this,"y",V2,this),Pi(this,"text",B2,this),Pi(this,"properties",U2,this),Pi(this,"_width",G2,this),Pi(this,"_height",z2,this),Pi(this,"anchorsOffset",H2,this),Pi(this,"isSelected",W2,this),Pi(this,"isHovered",X2,this),Pi(this,"isShowAnchor",q2,this),Pi(this,"isDragging",Y2,this),Pi(this,"isHitable",K2,this),Pi(this,"draggable",Z2,this),Pi(this,"visible",J2,this),Pi(this,"enableRotate",Q2,this),Pl(this,"virtual",!1),Pl(this,"graphModel",void 0),Pi(this,"zIndex",eO,this),Pi(this,"state",tO,this),Pi(this,"autoToFront",nO,this),Pi(this,"style",rO,this),Pi(this,"transform",oO,this),Pi(this,"_rotate",iO,this),Pl(this,"BaseType",mo.NODE),Pl(this,"modelType",Pr.NODE),Pl(this,"additionStateData",void 0),Pl(this,"targetRules",[]),Pl(this,"sourceRules",[]),Pl(this,"moveRules",[]),Pl(this,"hasSetTargetRules",!1),Pl(this,"hasSetSourceRules",!1),this.graphModel=v,this.initNodeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"rotate",get:function(){return this._rotate},set:function(u){this._rotate=u;var v=this.x,p=v===void 0?0:v,m=this.y,O=m===void 0?0:m;this.transform=new Rf(-p,-O).rotate(u).translate(p,O).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var v=this.graphModel.idGenerator,p=v&&v(u.type),m=this.createId();u.id=m||p||ra()}this.formatText(u),Li(this,function(O){return tl(O,["id","type","x","y","text","properties","virtual","rotate"])}(u)),this.graphModel.overlapMode===Ro.INCREASE&&(this.zIndex=u.zIndex||cu())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,v=u.x,p=u.y,m=u.value,O=this.properties;Object(c.x)(O)&&(O=Object(c.I)(O));var k={id:this.id,type:this.type,x:this.x,y:this.y,properties:O};return this.rotate&&(k.rotate=this.rotate),this.graphModel.overlapMode===Ro.INCREASE&&(k.zIndex=this.zIndex),m&&(k.text={x:v,y:p,value:m}),k}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return ul(ul({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return io(u)}},{key:"getRotateControlStyle",value:function(){var u=this.graphModel.theme.rotateControl;return io(u)}},{key:"getAnchorStyle",value:function(u){var v=this.graphModel.theme.anchor;return io(v)}},{key:"getAnchorLineStyle",value:function(u){var v=this.graphModel.theme.anchorLine;return io(v)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return io(u)}},{key:"isAllowConnectedAsSource",value:function(u,v,p,m){var O=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var k,D=!0,V=0;V<O.length;V++){var ee=O[V];if(!ee.validate.call(this,this,u,v,p,m)){D=!1,k=ee.message;break}}return{isAllPass:D,msg:k}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,v,p,m){var O=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var k,D=!0,V=0;V<O.length;V++){var ee=O[V];if(!ee.validate.call(this,u,this,v,p,m)){D=!1,k=ee.message;break}}return{isAllPass:D,msg:k}}},{key:"isAllowMoveNode",value:function(u,v){var p,m=!0,O=!0,k=function(ee,te){var _e=typeof Symbol<"u"&&ee[Symbol.iterator]||ee["@@iterator"];if(!_e){if(Array.isArray(ee)||(_e=aO(ee))||te){_e&&(ee=_e);var Ne=0,je=function(){};return{s:je,n:function(){return Ne>=ee.length?{done:!0}:{done:!1,value:ee[Ne++]}},e:function(zt){throw zt},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var at,it=!0,_t=!1;return{s:function(){_e=_e.call(ee)},n:function(){var zt=_e.next();return it=zt.done,zt},e:function(zt){_t=!0,at=zt},f:function(){try{it||_e.return==null||_e.return()}finally{if(_t)throw at}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(k.s();!(p=k.n()).done;){var D=(0,p.value)(this,u,v);if(!D)return!1;if(_b(D)==="object"){var V=D;if(V.x===!1&&V.y===!1)return!1;m=m&&V.x,O=O&&V.y}}}catch(ee){k.e(ee)}finally{k.f()}return{x:m,y:O}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,v=this.id,p=this.x,m=this.y;return u&&u.length>0?u.map(function(O,k){return O.length?(O=O,{id:"".concat(v,"_").concat(k),x:p+O[0],y:m+O[1]}):ul(ul({},O=O),{},{x:p+O.x,y:m+O.y,id:O.id||"".concat(v,"_").concat(k)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(v,p){for(var m,O=Mf(p),k=Number.MAX_SAFE_INTEGER,D=0;D<O.length;D++){var V=ll(v.x,v.y,O[D].x,O[D].y);V<k&&(k=V,m={index:D,anchor:Tl(Tl({},O[D]),{},{x:O[D].x,y:O[D].y,id:O[D].id})})}return m}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var u=this.getAnchorsByOffset(),v=this.x,p=this.y,m=this.rotate;return u.forEach(function(O){var k=O.x,D=O.y,V=BC(new Ts([k,D,1]).translate(-v,-p).rotate(m).translate(v,p)[0],2),ee=V[0],te=V[1];O.x=ee,O.y=te}),u}},{key:"getAnchorInfo",value:function(u){if(!VC(u))for(var v=0;v<this.anchors.length;v++){var p=this.anchors[v];if(p.id===u)return p}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,v){var p=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,O=!1;if(p)m=!0,O=!0;else{var k=this.isAllowMoveNode(u,v);typeof k=="boolean"?(m=k,O=k):(m=k.x,O=k.y)}if(m){var D=this.x+u;this.x=D,this.text&&this.moveText(u,0)}if(O){var V=this.y+v;this.y=V,this.text&&this.moveText(0,v)}return m||O}},{key:"getMoveDistance",value:function(u,v){var p=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,O=!1,k=0,D=0;if(p)m=!0,O=!0;else{var V=this.isAllowMoveNode(u,v);typeof V=="boolean"?(m=V,O=V):(m=V.x,O=V.y)}if(m&&u){var ee=this.x+u;this.x=ee,this.text&&this.moveText(u,0),k=u}if(O&&v){var te=this.y+v;this.y=te,this.text&&this.moveText(0,v),D=v}return[k,D]}},{key:"moveTo",value:function(u,v){var p=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=u-this.x,O=v-this.y;return!(!p&&!this.isAllowMoveNode(m,O)||(this.text&&this.text&&this.moveText(m,O),this.x=u,this.y=v,0))}},{key:"moveText",value:function(u,v){var p=this.text,m=p.x,O=p.y,k=p.value,D=p.draggable,V=p.editable;this.text={value:k,editable:V,draggable:D,x:m+u,y:O+v}}},{key:"updateText",value:function(u){this.text=ul(ul({},Object(c.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setEnableRotate",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,v){this.state=u,this.additionStateData=v}},{key:"setProperty",value:function(u,v){this.properties=ul(ul({},Object(c.I)(this.properties)),{},Pl({},u,bi(v))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=ul(ul({},Object(c.I)(this.properties)),bi(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,v){this.style=ul(ul({},this.style),{},Pl({},u,bi(v)))}},{key:"setStyles",value:function(u){this.style=ul(ul({},this.style),bi(u))}},{key:"updateStyles",value:function(u){this.style=ul({},bi(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Li(this,u)}}],l&&UC(i.prototype,l),a}(),$2=jr(an.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),F2=jr(an.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V2=jr(an.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B2=jr(an.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),U2=jr(an.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),G2=jr(an.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),z2=jr(an.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),H2=jr(an.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W2=jr(an.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X2=jr(an.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q2=jr(an.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y2=jr(an.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K2=jr(an.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Z2=jr(an.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),J2=jr(an.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q2=jr(an.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),eO=jr(an.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),tO=jr(an.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),nO=jr(an.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),rO=jr(an.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),oO=jr(an.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iO=jr(an.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),jr(an.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(an.prototype,"incoming"),an.prototype),jr(an.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(an.prototype,"outgoing"),an.prototype),jr(an.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"addNodeMoveRules"),an.prototype),jr(an.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"move"),an.prototype),jr(an.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"getMoveDistance"),an.prototype),jr(an.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"moveTo"),an.prototype),jr(an.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"moveText"),an.prototype),jr(an.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"updateText"),an.prototype),jr(an.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setSelected"),an.prototype),jr(an.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setHovered"),an.prototype),jr(an.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setIsShowAnchor"),an.prototype),jr(an.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setEnableRotate"),an.prototype),jr(an.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setHitable"),an.prototype),jr(an.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setElementState"),an.prototype),jr(an.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setProperty"),an.prototype),jr(an.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setProperties"),an.prototype),jr(an.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"deleteProperty"),an.prototype),jr(an.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setStyle"),an.prototype),jr(an.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setStyles"),an.prototype),jr(an.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"updateStyles"),an.prototype),jr(an.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setZIndex"),an.prototype),jr(an.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"updateAttributes"),an.prototype),an);function bb(a){return bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},bb(a)}function cO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function dO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?cO(Object(l),!0).forEach(function(u){fO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):cO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function GC(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function zC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function HC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function wb(){return wb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=WC(a,i);if(u){var v=Object.getOwnPropertyDescriptor(u,i);return v.get?v.get.call(arguments.length<3?a:l):v.value}},wb.apply(this,arguments)}function WC(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Uh(a))!==null;);return a}function Eb(a,i){return Eb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Eb(a,i)}function XC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Uh(a);if(i){var v=Uh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return qC(this,l)}}function qC(a,i){if(i&&(bb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oy(a)}function Oy(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Uh(a){return Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Uh(a)}function fO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ob(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var za,pO,hO,Sb=(_d=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Eb(p,m)})(v,a);var i,l,u=XC(v);function v(){var p;zC(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return fO(Oy(p=u.call.apply(u,[this].concat(O))),"modelType",Pr.CIRCLE_NODE),GC(Oy(p),"r",uO,Oy(p)),p}return i=v,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var p=wb(Uh(v.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.circle;return dO(dO({},p),io(m))}},{key:"getDefaultAnchor",value:function(){var p=this.x,m=this.y,O=this.r;return[{x:p,y:m-O,id:"".concat(this.id,"_0")},{x:p+O,y:m,id:"".concat(this.id,"_1")},{x:p,y:m+O,id:"".concat(this.id,"_2")},{x:p-O,y:m,id:"".concat(this.id,"_3")}]}}])&&HC(i.prototype,l),v}(bd),uO=Ob(_d.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Ob(_d.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(_d.prototype,"width"),_d.prototype),Ob(_d.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(_d.prototype,"height"),_d.prototype),_d);r(129);function xb(a){return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},xb(a)}function Mb(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return vO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return vO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function mO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function yO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?mO(Object(l),!0).forEach(function(u){_O(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):mO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function gO(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function YC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function KC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ab(){return Ab=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=ZC(a,i);if(u){var v=Object.getOwnPropertyDescriptor(u,i);return v.get?v.get.call(arguments.length<3?a:l):v.value}},Ab.apply(this,arguments)}function ZC(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=zh(a))!==null;);return a}function Tb(a,i){return Tb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Tb(a,i)}function JC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=zh(a);if(i){var v=zh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return QC(this,l)}}function QC(a,i){if(i&&(xb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gh(a)}function Gh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zh(a){return zh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},zh(a)}function _O(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Hh(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var nc,bO,wO,kb=(za=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Tb(p,m)})(v,a);var i,l,u=JC(v);function v(){var p;YC(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return _O(Gh(p=u.call.apply(u,[this].concat(O))),"modelType",Pr.DIAMOND_NODE),gO(Gh(p),"rx",pO,Gh(p)),gO(Gh(p),"ry",hO,Gh(p)),p}return i=v,(l=[{key:"getNodeStyle",value:function(){var p=Ab(zh(v.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.diamond;return yO(yO({},p),io(m))}},{key:"points",get:function(){var p=this.x,m=this.y,O=this.rx,k=this.ry;return[[p,m-k],[p+O,m],[p,m+k],[p-O,m]]}},{key:"pointsPosition",get:function(){return this.points.map(function(p){return{x:p[0],y:p[1]}})}},{key:"width",get:function(){var p=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(O){var k=Mb(O,1)[0];k<p&&(p=k),k>m&&(m=k)}),m-p}},{key:"height",get:function(){var p=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(O){var k=Mb(O,2)[1];k<p&&(p=k),k>m&&(m=k)}),m-p}},{key:"getDefaultAnchor",value:function(){var p=this;return this.points.map(function(m,O){var k=Mb(m,2);return{x:k[0],y:k[1],id:"".concat(p.id,"_").concat(O)}})}}])&&KC(i.prototype,l),v}(bd),pO=Hh(za.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),hO=Hh(za.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Hh(za.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(za.prototype,"points"),za.prototype),Hh(za.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(za.prototype,"pointsPosition"),za.prototype),Hh(za.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(za.prototype,"width"),za.prototype),Hh(za.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(za.prototype,"height"),za.prototype),za);function Nb(a){return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Nb(a)}function EO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function OO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?EO(Object(l),!0).forEach(function(u){xO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):EO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function SO(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function e3(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function t3(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Pb(){return Pb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=n3(a,i);if(u){var v=Object.getOwnPropertyDescriptor(u,i);return v.get?v.get.call(arguments.length<3?a:l):v.value}},Pb.apply(this,arguments)}function n3(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Xh(a))!==null;);return a}function Rb(a,i){return Rb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Rb(a,i)}function r3(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Xh(a);if(i){var v=Xh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return o3(this,l)}}function o3(a,i){if(i&&(Nb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wh(a)}function Wh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Xh(a){return Xh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Xh(a)}function xO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Sy(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var Ns,MO,Cb=(nc=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Rb(p,m)})(v,a);var i,l,u=r3(v);function v(){var p;e3(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return xO(Wh(p=u.call.apply(u,[this].concat(O))),"modelType",Pr.ELLIPSE_NODE),SO(Wh(p),"rx",bO,Wh(p)),SO(Wh(p),"ry",wO,Wh(p)),p}return i=v,(l=[{key:"getNodeStyle",value:function(){var p=Pb(Xh(v.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.ellipse;return OO(OO({},p),io(m))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var p=this.x,m=this.y,O=this.rx,k=this.ry;return[{x:p,y:m-k,id:"".concat(this.id,"_0")},{x:p+O,y:m,id:"".concat(this.id,"_1")},{x:p,y:m+k,id:"".concat(this.id,"_2")},{x:p-O,y:m,id:"".concat(this.id,"_3")}]}}])&&t3(i.prototype,l),v}(bd),bO=Sy(nc.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),wO=Sy(nc.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Sy(nc.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(nc.prototype,"width"),nc.prototype),Sy(nc.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(nc.prototype,"height"),nc.prototype),nc);function Db(a){return Db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Db(a)}function jb(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return AO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return AO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function AO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function TO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function kO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?TO(Object(l),!0).forEach(function(u){NO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):TO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function i3(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function a3(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function l3(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ib(){return Ib=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=s3(a,i);if(u){var v=Object.getOwnPropertyDescriptor(u,i);return v.get?v.get.call(arguments.length<3?a:l):v.value}},Ib.apply(this,arguments)}function s3(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=qh(a))!==null;);return a}function Lb(a,i){return Lb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Lb(a,i)}function u3(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=qh(a);if(i){var v=qh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return c3(this,l)}}function c3(a,i){if(i&&(Db(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xy(a)}function xy(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function qh(a){return qh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},qh(a)}function NO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function My(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var $b,PO,Fb=(Ns=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Lb(p,m)})(v,a);var i,l,u=u3(v);function v(){var p;a3(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return NO(xy(p=u.call.apply(u,[this].concat(O))),"modelType",Pr.POLYGON_NODE),i3(xy(p),"points",MO,xy(p)),p}return i=v,(l=[{key:"getNodeStyle",value:function(){var p=Ib(qh(v.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.polygon;return kO(kO({},p),io(m))}},{key:"pointsPosition",get:function(){var p=this.x,m=this.y,O=this.width,k=this.height;return this.points.map(function(D){return{x:D[0]+p-O/2,y:D[1]+m-k/2}})}},{key:"width",get:function(){var p=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(O){var k=jb(O,1)[0];k<p&&(p=k),k>m&&(m=k)}),m-p}},{key:"height",get:function(){var p=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(O){var k=jb(O,2)[1];k<p&&(p=k),k>m&&(m=k)}),m-p}},{key:"getDefaultAnchor",value:function(){var p=this,m=this.x,O=this.y,k=this.width,D=this.height;return this.points.map(function(V,ee){var te=jb(V,2),_e=te[0],Ne=te[1];return{x:m+_e-k/2,y:O+Ne-D/2,id:"".concat(p.id,"_").concat(ee)}})}}])&&l3(i.prototype,l),v}(bd),MO=My(Ns.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),My(Ns.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Ns.prototype,"pointsPosition"),Ns.prototype),My(Ns.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ns.prototype,"width"),Ns.prototype),My(Ns.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ns.prototype,"height"),Ns.prototype),Ns);function Vb(a){return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Vb(a)}function RO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function CO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?RO(Object(l),!0).forEach(function(u){DO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):RO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function d3(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function f3(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function p3(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Bb(){return Bb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=h3(a,i);if(u){var v=Object.getOwnPropertyDescriptor(u,i);return v.get?v.get.call(arguments.length<3?a:l):v.value}},Bb.apply(this,arguments)}function h3(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Yh(a))!==null;);return a}function Ub(a,i){return Ub=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Ub(a,i)}function v3(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Yh(a);if(i){var v=Yh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return m3(this,l)}}function m3(a,i){if(i&&(Vb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ay(a)}function Ay(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Yh(a){return Yh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Yh(a)}function DO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var jf,Gb=($b=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Ub(p,m)})(v,a);var i,l,u=v3(v);function v(){var p;f3(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return DO(Ay(p=u.call.apply(u,[this].concat(O))),"modelType",Pr.RECT_NODE),d3(Ay(p),"radius",PO,Ay(p)),p}return i=v,(l=[{key:"getDefaultAnchor",value:function(){var p=this.x,m=this.y,O=this.width,k=this.height;return[{x:p,y:m-k/2,id:"".concat(this.id,"_0")},{x:p+O/2,y:m,id:"".concat(this.id,"_1")},{x:p,y:m+k/2,id:"".concat(this.id,"_2")},{x:p-O/2,y:m,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var p=Bb(Yh(v.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.rect;return CO(CO({},p),io(m))}}])&&p3(i.prototype,l),v}(bd),PO=function(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}($b.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$b);function zb(a){return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},zb(a)}function jO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function IO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?jO(Object(l),!0).forEach(function(u){$O(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):jO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function y3(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function g3(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Hb(){return Hb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=_3(a,i);if(u){var v=Object.getOwnPropertyDescriptor(u,i);return v.get?v.get.call(arguments.length<3?a:l):v.value}},Hb.apply(this,arguments)}function _3(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Kh(a))!==null;);return a}function Wb(a,i){return Wb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Wb(a,i)}function b3(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Kh(a);if(i){var v=Kh(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return w3(this,l)}}function w3(a,i){if(i&&(zb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LO(a)}function LO(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Kh(a){return Kh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Kh(a)}function $O(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function FO(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var Xb=(jf=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Wb(p,m)})(v,a);var i,l,u=b3(v);function v(){var p;y3(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return $O(LO(p=u.call.apply(u,[this].concat(O))),"modelType",Pr.TEXT_NODE),p}return i=v,(l=[{key:"getTextStyle",value:function(){var p=Hb(Kh(v.prototype),"getTextStyle",this).call(this),m=this.graphModel.theme.text;return IO(IO({},p),io(m))}},{key:"width",get:function(){var p=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return uu({rows:p,fontSize:m,rowsLength:p.length}).width}},{key:"height",get:function(){var p=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return uu({rows:p,fontSize:m,rowsLength:p.length}).height}}])&&g3(i.prototype,l),v}(bd),FO(jf.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(jf.prototype,"width"),jf.prototype),FO(jf.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(jf.prototype,"height"),jf.prototype),jf);function qb(a){return qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},qb(a)}function E3(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function O3(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Yb(a,i){return Yb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Yb(a,i)}function S3(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ty(a);if(i){var v=Ty(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return x3(this,l)}}function x3(a,i){if(i&&(qb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VO(a)}function VO(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ty(a){return Ty=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ty(a)}function M3(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var gu,BO,UO,GO,Kb=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Yb(p,m)})(v,a);var i,l,u=S3(v);function v(){var p;E3(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return M3(VO(p=u.call.apply(u,[this].concat(O))),"modelType",Pr.HTML_NODE),p}return i=v,(l=[{key:"getDefaultAnchor",value:function(){var p=this.x,m=this.y,O=this.width,k=this.height;return[{x:p,y:m-k/2,id:"".concat(this.id,"_0")},{x:p+O/2,y:m,id:"".concat(this.id,"_1")},{x:p,y:m+k/2,id:"".concat(this.id,"_2")},{x:p-O/2,y:m,id:"".concat(this.id,"_3")}]}}])&&O3(i.prototype,l),v}(bd);function zO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function Zb(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function A3(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function HO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function lm(a,i,l,u,v){var p={};return Object.keys(u).forEach(function(m){p[m]=u[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(m,O){return O(a,i,m)||m},p),v&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(v):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(a,i,p),p=null),p}var WO=(gu=function(){function a(u){(function(v,p){if(!(v instanceof p))throw new TypeError("Cannot call a class as a function")})(this,a),HO(this,"graphModel",void 0),Zb(this,"isShowHorizontal",BO,this),Zb(this,"isShowVertical",UO,this),Zb(this,"position",GO,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var i,l;return i=a,l=[{key:"getStyle",value:function(){return function(u){for(var v=1;v<arguments.length;v++){var p=arguments[v]!=null?arguments[v]:{};v%2?zO(Object(p),!0).forEach(function(m){HO(u,m,p[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(p)):zO(Object(p)).forEach(function(m){Object.defineProperty(u,m,Object.getOwnPropertyDescriptor(p,m))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,v){for(var p=u.x,m=u.y,O=!1,k=!1,D=0;D<v.length;D++){var V=v[D];if(V.id!==u.id&&(p===V.x&&(O=!0),m===V.y&&(k=!0),O&&k))break}return{isShowVertical:O,isShowHorizontal:k,position:{x:p,y:m}}}},{key:"getHorizontalSnapline",value:function(u,v){var p,m,O=!1,k=u.id;if(k){var D=this.graphModel.fakerNode;if(D&&D.id===k)m=Mo(D);else{var V=this.graphModel.getNodeModelById(k);m=Mo(V)}}for(var ee=0;ee<v.length;ee++){var te=v[ee];if(te.id!==u.id){var _e=Mo(te);if(_e.minY===m.minY||_e.maxY===m.minY){O=!0,p=m.minY;break}if(_e.minY===m.maxY||_e.maxY===m.maxY){O=!0,p=m.maxY;break}}}return Li({isShowHorizontal:O,position:{y:p}})}},{key:"getVerticalSnapline",value:function(u,v){var p,m,O=!1,k=u.id;if(k){var D=this.graphModel.fakerNode;if(D&&D.id===k)m=Mo(D);else{var V=this.graphModel.getNodeModelById(k);m=Mo(V)}}for(var ee=0;ee<v.length;ee++){var te=v[ee];if(te.id!==u.id){var _e=Mo(te);if(_e.minX===m.minX||_e.maxX===m.minX){O=!0,p=m.minX;break}if(_e.minX===m.maxX||_e.maxX===m.maxX){O=!0,p=m.maxX;break}}}return Li({isShowVertical:O,position:{x:p}})}},{key:"getSnapLinePosition",value:function(u,v){var p=this.getCenterSnapLine(u,v),m=p.isShowHorizontal,O=p.isShowVertical;if(!m){var k=this.getHorizontalSnapline(u,v);k.isShowHorizontal&&(p.isShowHorizontal=k.isShowHorizontal,p.position.y=k.position.y)}if(!O){var D=this.getVerticalSnapline(u,v);D.isShowVertical&&(p.isShowVertical=D.isShowVertical,p.position.x=D.position.x)}return p}},{key:"setSnaplineInfo",value:function(u){var v=u.isShowHorizontal,p=u.isShowVertical,m=u.position;this.position=m,this.isShowHorizontal=v,this.isShowVertical=p}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var v=this.graphModel.nodes,p=this.getSnapLinePosition(u,v);this.setSnaplineInfo(p)}}],l&&A3(i.prototype,l),a}(),BO=lm(gu.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UO=lm(gu.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GO=lm(gu.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lm(gu.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(gu.prototype,"clearSnapline"),gu.prototype),lm(gu.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(gu.prototype,"setNodeSnapLine"),gu.prototype),gu),sm=new Map,XO=function(a){var i=ra(),l=window.requestAnimationFrame(function u(){if(a(),sm.get(i)){var v=window.requestAnimationFrame(u);sm.set(i,v)}});return sm.set(i,l),i},ky=function(a){var i=sm.get(a);i&&(window.cancelAnimationFrame(i),sm.delete(a))};function Jb(a){return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Jb(a)}function um(){return um=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},um.apply(this,arguments)}function qO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function cm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?qO(Object(l),!0).forEach(function(u){oc(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):qO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function T3(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return YO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return YO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function YO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function k3(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Qb(a,i){return Qb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Qb(a,i)}function N3(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ny(a);if(i){var v=Ny(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return P3(this,l)}}function P3(a,i){if(i&&(Jb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rc(a)}function rc(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ny(a){return Ny=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ny(a)}function oc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var R3=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&Qb(p,m)})(v,a);var i,l,u=N3(v);function v(){var p;return function(m,O){if(!(m instanceof O))throw new TypeError("Cannot call a class as a function")}(this,v),oc(rc(p=u.call(this)),"preTargetNode",void 0),oc(rc(p),"sourceRuleResults",void 0),oc(rc(p),"targetRuleResults",void 0),oc(rc(p),"dragHandler",void 0),oc(rc(p),"t",void 0),oc(rc(p),"onDragStart",function(m){var O=m.event,k=p.props,D=k.anchorData,V=k.nodeModel,ee=k.graphModel;ee.overlapMode,ee.selectNodeById(V.id),V.autoToFront&&ee.toFront(V.id),ee.eventCenter.emit(Ln.ANCHOR_DRAGSTART,{data:D,e:O,nodeModel:V}),p.setState({startX:D.x,startY:D.y,endX:D.x,endY:D.y})}),oc(rc(p),"onDragging",function(m){var O=m.event,k=p.props,D=k.graphModel,V=k.nodeModel,ee=k.anchorData,te=D.transformModel,_e=D.eventCenter,Ne=D.width,je=D.height,at=D.editConfigModel,it=at.autoExpand,_t=at.stopMoveGraph,zt=O.clientX,gn=O.clientY,mn=D.getPointByClient({x:zt,y:gn}),Kn=mn.domOverlayPosition,hn=Kn.x,Un=Kn.y,xn=mn.canvasOverlayPosition,Br=xn.x,Wr=xn.y;p.t&&ky(p.t);var mr=[];hn<10?mr=[10,0]:hn+10>Ne?mr=[-10,0]:Un<10?mr=[0,10]:Un+10>je&&(mr=[0,-10]),p.setState({endX:Br,endY:Wr,dragging:!0}),p.moveAnchorEnd(Br,Wr),mr.length>0&&!_t&&it&&(p.t=XO(function(){var Qr=T3(mr,2),wi=Qr[0],Ei=Qr[1];te.translate(wi,Ei);var Ta=p.state,ns=Ta.endX,rs=Ta.endY;p.setState({endX:ns-wi,endY:rs-Ei}),p.moveAnchorEnd(ns-wi,rs-Ei)})),_e.emit(Ln.ANCHOR_DRAG,{data:ee,e:O,nodeModel:V})}),oc(rc(p),"onDragEnd",function(m){var O=m.event;p.t&&ky(p.t);var k=p.checkEnd(O);p.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),p.sourceRuleResults.clear(),p.targetRuleResults.clear();var D=p.props,V=D.graphModel,ee=D.nodeModel,te=D.anchorData;V.eventCenter.emit(Ln.ANCHOR_DRAGEND,{data:te,e:O,nodeModel:ee,edgeModel:k})}),oc(rc(p),"checkEnd",function(m){var O=p.props,k=O.graphModel,D=O.nodeModel,V=O.anchorData,ee=V.x,te=V.y,_e=V.id,Ne=(k.edgeType,p.state),je=Ne.endX,at=Ne.endY,it=Ne.dragging,_t=nd({x:je,y:at},k);if(p.preTargetNode&&p.preTargetNode.state!==Jr.DEFAULT&&p.preTargetNode.setElementState(Jr.DEFAULT),it&&_t&&_t.node){var zt=_t.node,gn=_t.anchor.id,mn="".concat(D.id,"_").concat(zt.id,"_").concat(gn,"_").concat(_e),Kn=p.sourceRuleResults.get(mn)||{},hn=Kn.isAllPass,Un=Kn.msg,xn=p.targetRuleResults.get(mn)||{},Br=xn.isAllPass,Wr=xn.msg;if(hn&&Br){zt.setElementState(Jr.DEFAULT);var mr=k.edgeGenerator(D.getData(),k.getNodeModelById(_t.node.id).getData()),Qr=k.addEdge(cm(cm({},mr),{},{sourceNodeId:D.id,sourceAnchorId:_e,startPoint:{x:ee,y:te},targetNodeId:_t.node.id,targetAnchorId:_t.anchor.id,endPoint:{x:_t.anchor.x,y:_t.anchor.y}})),wi=p.props.anchorData;return k.eventCenter.emit(Ln.ANCHOR_DROP,{data:wi,e:m,nodeModel:D,edgeModel:Qr}),Qr}var Ei=zt.getData();return k.eventCenter.emit(Ln.CONNECTION_NOT_ALLOWED,{data:Ei,msg:Wr||Un||"不允许添加连线"}),null}}),p.sourceRuleResults=new Map,p.targetRuleResults=new Map,p.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},p.dragHandler=new ge({onDragStart:p.onDragStart,onDragging:p.onDragging,onDragEnd:p.onDragEnd}),p}return i=v,(l=[{key:"getAnchorShape",value:function(){var p=this.props,m=p.anchorData,O=p.style,k=p.node.getAnchorShape(m);if(k)return k;var D=m.x,V=m.y,ee=cm(cm({},O),O.hover);return Object(Ie.g)("g",null,Object(Ie.g)(Bh,um({className:"lf-node-anchor-hover"},ee,{x:D,y:V})),Object(Ie.g)(Bh,um({className:"lf-node-anchor"},O,{x:D,y:V})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var p=this.props,m=p.graphModel,O=m.getAnchorIncomingEdge,k=m.getAnchorOutcomingEdge,D=p.anchorData.id;return{incomingEdgeList:O(D),outcomingEdgeList:k(D)}}},{key:"moveAnchorEnd",value:function(p,m){var O=this.props,k=O.graphModel,D=O.nodeModel,V=O.anchorData,ee=nd({x:p,y:m},k);if(ee){var te=ee.node,_e=ee.anchor.id;if(this.preTargetNode&&this.preTargetNode!==ee.node&&this.preTargetNode.setElementState(Jr.DEFAULT),V.id===_e)return;this.preTargetNode=te;var Ne="".concat(D.id,"_").concat(te.id,"_").concat(_e,"_").concat(V.id);if(!this.targetRuleResults.has(Ne)){var je=ee.anchor,at=D.isAllowConnectedAsSource(te,V,je),it=te.isAllowConnectedAsTarget(D,V,je);this.sourceRuleResults.set(Ne,Kl(at)),this.targetRuleResults.set(Ne,Kl(it))}var _t=this.sourceRuleResults.get(Ne).isAllPass,zt=this.targetRuleResults.get(Ne).isAllPass;_t&&zt?te.setElementState(Jr.ALLOW_CONNECT):te.setElementState(Jr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Jr.DEFAULT&&this.preTargetNode.setElementState(Jr.DEFAULT)}},{key:"isShowLine",value:function(){var p=this.state,m=p.startX,O=p.startY,k=p.endX,D=p.endY;return ll(m,O,k,D)>10}},{key:"render",value:function(){var p=this,m=this.state,O=m.startX,k=m.startY,D=m.endX,V=m.endY,ee=this.props,te=ee.anchorData.edgeAddable,_e=ee.edgeStyle;return Object(Ie.g)("g",{className:"lf-anchor"},Object(Ie.g)("g",{onMouseDown:function(Ne){te!==!1&&p.dragHandler.handleMouseDown(Ne)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(cm({sourcePoint:{x:O,y:k},targetPoint:{x:D,y:V}},_e)):Object(Ie.g)(Fh,um({x1:O,y1:k,x2:D,y2:V},_e,{"pointer-events":"none"}))))}}])&&k3(i.prototype,l),v}(Ie.a);function KO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function C3(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?KO(Object(l),!0).forEach(function(u){D3(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):KO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function D3(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function e0(a){return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e0(a)}function j3(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return ZO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return ZO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ZO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function JO(a){var i=a.x,l=i===void 0?0:i,u=a.y,v=u===void 0?0:u,p=a.value,m=a.fontSize,O=a.fill,k=O===void 0?"currentColor":O,D=a.overflowMode,V=D===void 0?"default":D,ee=a.textWidth,te=ee===void 0?"":ee,_e=a.model,Ne={textAnchor:"middle","dominant-baseline":"middle",x:l,y:v,fill:k};if(Object.entries(a).forEach(function(gn){var mn=j3(gn,2),Kn=mn[0],hn=mn[1];e0(hn)!=="object"&&(Ne[Kn]=hn)}),p){var je=String(p).split(/[\r\n]/g),at=je.length;if(V!=="default"){var it=_e.BaseType,_t=_e.modelType;if(it===mo.NODE&&_t!==Pr.TEXT_NODE||it===mo.EDGE&&te)return function(gn){var mn=gn.value,Kn=gn.fontSize,hn=gn.model,Un=gn.fontFamily,xn=Un===void 0?"":Un,Br=gn.lineHeight,Wr=gn.wrapPadding,mr=Wr===void 0?"0, 0":Wr,Qr=gn.overflowMode,wi=gn.x,Ei=gn.y,Ta=hn.width,ns=hn.textHeight,rs=gn.textWidth||Ta,lc=String(mn).split(/[\r\n]/g),Gp=lc.length,tg=ld({rows:lc,style:{fontSize:"".concat(Kn,"px"),width:"".concat(rs,"px"),fontFamily:xn,lineHeight:Br,padding:mr},rowsLength:Gp,className:"lf-get-text-height"}),zp=hn.height>tg?hn.height:tg;ns&&(zp=ns);var $f=Qr==="ellipsis";return $f&&(zp=Kn+2),Object(Ie.g)("g",null,Object(Ie.g)("foreignObject",{width:rs,height:zp,x:wi-rs/2,y:Ei-zp/2},Object(Ie.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:zp,width:rs,padding:mr}},Object(Ie.g)("div",{className:$f?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:$f?lc.join(""):"",style:C3({},gn)},lc.map(function(Ff){return Object(Ie.g)("div",{className:"lf-node-text--auto-wrap-inner"},Ff)})))))}(a)}if(at>1){var zt=je.map(function(gn,mn){var Kn=(mn-(at-1)/2)*(m+2);return Object(Ie.g)("tspan",{className:"lf-text-tspan",x:l,y:v+Kn},gn)});return Object(Ie.g)("text",Ne,zt)}return Object(Ie.g)("text",Ne,p)}}function t0(a){return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t0(a)}function n0(){return n0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},n0.apply(this,arguments)}function I3(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return QO(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return QO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function QO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function L3(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r0(a,i){return r0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r0(a,i)}function $3(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Py(a);if(i){var v=Py(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return F3(this,l)}}function F3(a,i){if(i&&(t0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return If(a)}function If(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Py(a){return Py=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Py(a)}function Fp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var eS=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&r0(p,m)})(v,a);var i,l,u=$3(v);function v(p){var m;(function(k,D){if(!(k instanceof D))throw new TypeError("Cannot call a class as a function")})(this,v),Fp(If(m=u.call(this)),"dragHandler",void 0),Fp(If(m),"sumDeltaX",0),Fp(If(m),"sumDeltaY",0),Fp(If(m),"stepDrag",void 0),Fp(If(m),"onDragging",function(k){var D=k.deltaX,V=k.deltaY,ee=m.props,te=ee.model,_e=I3(ee.graphModel.transformModel.fixDeltaXY(D,V),2),Ne=_e[0],je=_e[1];te.moveText(Ne,je)}),Fp(If(m),"dblClickHandler",function(){m.props.editable&&m.props.model.setElementState(Jr.TEXT_EDIT)}),Fp(If(m),"mouseDownHandle",function(k){var D=m.props,V=D.draggable,ee=D.model,te=D.graphModel.editConfigModel.nodeTextDraggable;(V||te)&&(m.stepDrag.model=ee,m.stepDrag.handleMouseDown(k))}),p.model;var O=p.draggable;return m.stepDrag=new ge({onDragging:m.onDragging,step:1,isStopPropagation:O}),m}return i=v,(l=[{key:"getShape",value:function(){var p=this.props,m=p.model,O=p.graphModel,k=m.text,D=O.editConfigModel,V=k.value,ee=k.x,te=k.y,_e=k.editable,Ne=k.draggable,je={x:ee,y:te,className:"",value:V};_e?je.className="lf-element-text":Ne||D.nodeTextDraggable?je.className="lf-text-draggable":je.className="lf-text-disabled";var at=m.getTextStyle();return Object(Ie.g)(JO,n0({},je,at,{model:m}))}},{key:"render",value:function(){if(this.props.model.text)return Object(Ie.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&L3(i.prototype,l),v}(Ie.a),V3=Hs(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,tS=r(130);function o0(a){return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o0(a)}function i0(){return i0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},i0.apply(this,arguments)}function B3(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function a0(a,i){return a0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},a0(a,i)}function U3(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ry(a);if(i){var v=Ry(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return G3(this,l)}}function G3(a,i){if(i&&(o0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zh(a)}function Zh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ry(a){return Ry=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ry(a)}function dm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var z3=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&a0(p,m)})(v,a);var i,l,u=U3(v);function v(p){var m;return function(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}(this,v),dm(Zh(m=u.call(this,p)),"style",{}),dm(Zh(m),"defaultAngle",void 0),dm(Zh(m),"normal",void 0),dm(Zh(m),"stepperDrag",void 0),dm(Zh(m),"onDragging",function(O){var k,D=O.event,V=m.props,ee=V.graphModel,te=V.nodeModel,_e=V.eventCenter,Ne=ee.selectNodes,je=te.x,at=te.y,it=D.clientX,_t=D.clientY,zt=ee.getPointByClient({x:it,y:_t}).canvasOverlayPosition,gn=zt.x,mn=zt.y,Kn=new We(gn-je,mn-at),hn=((k=m.normal)===null||k===void 0?void 0:k.angle(Kn))-m.defaultAngle,Un=new Rf(-je,-at).rotate(hn).translate(je,at).toString();te.transform=Un,te.rotate=hn;var xn=Object(tS.map)(Ne,function(Wr){return Wr.id});xn.indexOf(te.id)===-1&&(xn=[te.id]);var Br=Object(tS.reduce)(xn,function(Wr,mr){var Qr=ee.getNodeModelById(mr);return Wr[mr]=Qr==null?void 0:Qr.getMoveDistance(0,0,!1),Wr},{});xn.forEach(function(Wr){ee.getNodeEdges(Wr).forEach(function(mr){if(Br[mr.sourceNodeId]){var Qr=ee.getNodeModelById(mr.sourceNodeId).anchors.find(function(Ei){return Ei.id===mr.sourceAnchorId});mr.updateStartPoint(Qr)}if(Br[mr.targetNodeId]){var wi=ee.getNodeModelById(mr.targetNodeId).anchors.find(function(Ei){return Ei.id===mr.targetAnchorId});mr.updateEndPoint(wi)}})}),_e.emit(Ln.NODE_ROTATE,{e:D,nodeModel:te})}),m.style=p.style,m.stepperDrag=new ge({onDragging:m.onDragging}),m}return i=v,(l=[{key:"render",value:function(){var p=this,m=this.props.nodeModel,O=m.x,k=m.y,D=O+m.width/2+20,V=k-m.height/2-20;return this.normal=new We(1,0),this.defaultAngle=this.normal.angle(new We(D-O,V-k)),m.defaultAngle=this.defaultAngle,Object(Ie.g)("g",{className:"lf-rotate-control"},Object(Ie.g)("g",{onMouseDown:function(ee){p.stepperDrag.handleMouseDown(ee)}},Object(Ie.g)(Bh,i0({},this.style,{cx:D,cy:V}))))}}])&&B3(i.prototype,l),v}(Ie.a);function l0(a){return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},l0(a)}var H3=["className"];function Cy(){return Cy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Cy.apply(this,arguments)}function W3(a,i){if(a==null)return{};var l,u,v=function(m,O){if(m==null)return{};var k,D,V={},ee=Object.keys(m);for(D=0;D<ee.length;D++)k=ee[D],O.indexOf(k)>=0||(V[k]=m[k]);return V}(a,i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(a);for(u=0;u<p.length;u++)l=p[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(v[l]=a[l])}return v}function Dy(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return nS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return nS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function rS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function s0(a,i){return s0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},s0(a,i)}function X3(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=jy(a);if(i){var v=jy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return q3(this,l)}}function q3(a,i){if(i&&(l0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ia(a)}function ia(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function jy(a){return jy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},jy(a)}function pa(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var wd=function(a){(function(m,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(O&&O.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),O&&s0(m,O)})(p,a);var i,l,u,v=X3(p);function p(m){var O;(function(te,_e){if(!(te instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,p),pa(ia(O=v.call(this)),"t",void 0),pa(ia(O),"moveOffset",void 0),pa(ia(O),"stepDrag",void 0),pa(ia(O),"contextMenuTime",void 0),pa(ia(O),"mouseUpDrag",void 0),pa(ia(O),"startTime",void 0),pa(ia(O),"clickTimer",void 0),pa(ia(O),"modelDisposer",void 0),pa(ia(O),"onDragStart",function(te){var _e=te.event,Ne=_e.clientX,je=_e.clientY,at=O.props,it=at.model,_t=at.graphModel.getPointByClient({x:Ne,y:je}).canvasOverlayPosition,zt=_t.x,gn=_t.y;O.moveOffset={x:it.x-zt,y:it.y-gn}}),pa(ia(O),"onDragging",function(te){var _e=te.event,Ne=O.props,je=Ne.model,at=Ne.graphModel,it=at.editConfigModel,_t=it.stopMoveGraph,zt=it.autoExpand,gn=at.transformModel,mn=at.selectNodes,Kn=at.width,hn=at.height,Un=at.gridSize;je.isDragging=!0;var xn=_e.clientX,Br=_e.clientY,Wr=at.getPointByClient({x:xn,y:Br}).canvasOverlayPosition,mr=Wr.x,Qr=Wr.y,wi=Dy(gn.CanvasPointToHtmlPoint([mr,Qr]),2),Ei=wi[0],Ta=wi[1];if(mr+=O.moveOffset.x,Qr+=O.moveOffset.y,mr=rl(mr,Un),Qr=rl(Qr,Un),Kn&&hn){if(!zt||_t||!(Ei<0||Ta<0||Ei>Kn||Ta>hn)){var ns=Dy(gn.CanvasPointToHtmlPoint([mr-je.width/2,Qr-je.height/2]),2),rs=ns[0],lc=ns[1],Gp=Dy(gn.CanvasPointToHtmlPoint([mr+je.width/2,Qr+je.height/2]),2),tg=Gp[0],zp=Gp[1],$f=Math.max(Un,20),Ff=[];rs<0?Ff=[$f,0]:tg>at.width?Ff=[-$f,0]:lc<0?Ff=[0,$f]:zp>at.height&&(Ff=[0,-$f]),O.t&&ky(O.t);var Pj=new Rf(-mr,-Qr).rotate(je.rotate).translate(mr,Qr).toString();je.transform=Pj;var ng=mn.map(function(rg){return rg.id});ng.indexOf(je.id)===-1&&(ng=[je.id]),Ff.length>0&&!_t&&zt?O.t=XO(function(){var rg=Dy(Ff,2),LS=rg[0],$S=rg[1];gn.translate(LS,$S);var Rj=-LS/gn.SCALE_X,Cj=-$S/gn.SCALE_X;at.moveNodes(ng,Rj,Cj)}):at.moveNodes(ng,mr-je.x,Qr-je.y)}}else at.moveNode2Coordinate(je.id,mr,Qr)}),pa(ia(O),"onDragEnd",function(){O.t&&ky(O.t),O.props.model.isDragging=!1}),pa(ia(O),"handleMouseUp",function(){var te=O.props.model;O.mouseUpDrag=te.isDragging}),pa(ia(O),"handleClick",function(te){var _e=O.mouseUpDrag===!1;if(O.startTime){var Ne=O.props,je=Ne.model,at=Ne.graphModel;if(_e){var it={data:je.getData(),e:te,position:at.getPointByClient({x:te.clientX,y:te.clientY}),isSelected:!1,isMultiple:!1},_t=te.button===2,zt=te.detail===2;if(!_t){var gn=at.editConfigModel,mn=Xu(te,gn);it.isMultiple=mn,je.isSelected&&!zt&&mn?(it.isSelected=!1,je.setSelected(!1)):(at.selectNodeById(je.id,mn),it.isSelected=!0,O.toFront()),zt?(gn.nodeTextEdit&&je.text.editable&&(je.setSelected(!1),at.setElementStateById(je.id,Jr.TEXT_EDIT)),at.eventCenter.emit(Ln.NODE_DBCLICK,it)):(at.eventCenter.emit(Ln.ELEMENT_CLICK,it),at.eventCenter.emit(Ln.NODE_CLICK,it))}}}}),pa(ia(O),"handleContextMenu",function(te){te.preventDefault();var _e=O.props,Ne=_e.model,je=_e.graphModel,at=Ne.getData(),it=je.getPointByClient({x:te.clientX,y:te.clientY});je.setElementStateById(Ne.id,Jr.SHOW_MENU,it.domOverlayPosition),Ne.isSelected||je.selectNodeById(Ne.id),je.eventCenter.emit(Ln.NODE_CONTEXTMENU,{data:at,e:te,position:it}),O.toFront()}),pa(ia(O),"handleMouseDown",function(te){var _e=O.props,Ne=_e.model,je=_e.graphModel;O.startTime=new Date().getTime(),je.editConfigModel.adjustNodePosition&&Ne.draggable&&O.stepDrag&&O.stepDrag.handleMouseDown(te)}),pa(ia(O),"setHoverON",function(te){var _e=O.props,Ne=_e.model,je=_e.graphModel;if(!Ne.isHovered){var at=Ne.getData();Ne.setHovered(!0),je.eventCenter.emit(Ln.NODE_MOUSEENTER,{data:at,e:te})}}),pa(ia(O),"setHoverOFF",function(te){var _e=O.props,Ne=_e.model,je=_e.graphModel,at=Ne.getData();Ne.isHovered&&(Ne.setHovered(!1),je.eventCenter.emit(Ln.NODE_MOUSELEAVE,{data:at,e:te}))}),pa(ia(O),"onMouseOut",function(te){V3&&O.setHoverOFF(te)});var k=m.graphModel,D=k.gridSize,V=k.eventCenter,ee=m.model;return O.stepDrag=new ge({onDragStart:O.onDragStart,onDragging:O.onDragging,onDragEnd:O.onDragEnd,step:D,eventType:"NODE",isStopPropagation:!1,eventCenter:V,model:ee}),O.modelDisposer=Object(c.F)(function(){return O.props},function(te){te&&te.model&&O.stepDrag.setModel(te.model)}),O}return i=p,u=[{key:"getModel",value:function(m){return m}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(m){return null}},{key:"getAnchors",value:function(){var m=this,O=this.props,k=O.model,D=O.graphModel,V=k.isSelected,ee=k.isHitable,te=k.isDragging,_e=k.isShowAnchor;return ee&&(V||_e)&&!te?Qd(k.anchors,function(Ne,je){var at=k.getAnchorLineStyle(Ne),it=k.getAnchorStyle(Ne);return Object(Ie.g)(R3,{anchorData:Ne,node:m,style:it,edgeStyle:at,anchorIndex:je,nodeModel:k,graphModel:D,setHoverOFF:m.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var m=this.props,O=m.model,k=m.graphModel,D=O.isSelected,V=O.isHitable,ee=O.enableRotate,te=O.isHovered,_e=O.getRotateControlStyle().style;if(V&&(D||te)&&ee)return Object(Ie.g)(z3,{graphModel:k,nodeModel:O,eventCenter:k.eventCenter,style:_e})}},{key:"getText",value:function(){var m=this.props,O=m.model,k=m.graphModel;if(O.state===Jr.TEXT_EDIT)return"";if(O.text){var D=k.editConfigModel,V=!1;return(O.text.draggable||D.nodeTextDraggable)&&(V=!0),Object(Ie.g)(eS,{editable:D.nodeTextEdit&&O.text.editable,model:O,graphModel:k,draggable:V})}}},{key:"getStateClassName",value:function(){var m=this.props.model,O=m.state,k=m.isDragging,D=m.isSelected,V="lf-node";switch(O){case Jr.ALLOW_CONNECT:V+=" lf-node-allow";break;case Jr.NOT_ALLOW_CONNECT:V+=" lf-node-not-allow";break;default:V+=" lf-node-default"}return k&&(V+=" lf-isDragging"),D&&(V+=" lf-node-selected"),V}},{key:"toFront",value:function(){var m=this.props,O=m.model,k=m.graphModel;O.autoToFront&&k.toFront(O.id)}},{key:"render",value:function(){var m,O=this.props,k=O.model,D=O.graphModel,V=D.editConfigModel,ee=V.hideAnchors,te=V.adjustNodePosition,_e=V.allowRotation,Ne=D.gridSize,je=D.transformModel.SCALE_X,at=k.isHitable,it=k.draggable,_t=k.transform,zt=k.getOuterGAttributes(),gn=zt.className,mn=gn===void 0?"":gn,Kn=W3(zt,H3),hn=Object(Ie.g)("g",{className:"lf-node-content"},Object(Ie.g)("g",{transform:_t},this.getShape(),this.getText(),_e&&this.getRotateControl()),!ee&&this.getAnchors());return at?(te&&it&&this.stepDrag.setStep(Ne*je),m=Object(Ie.g)("g",Cy({className:"".concat(this.getStateClassName()," ").concat(mn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Kn),hn)):m=Object(Ie.g)("g",Cy({className:"".concat(this.getStateClassName()," ").concat(mn)},Kn),hn),m}}])&&rS(i.prototype,l),u&&rS(i,u),p}(Ie.a);function u0(a){return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},u0(a)}function c0(){return c0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},c0.apply(this,arguments)}function Y3(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function K3(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function d0(a,i){return d0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d0(a,i)}function Z3(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Iy(a);if(i){var v=Iy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return J3(this,l)}}function J3(a,i){if(i&&(u0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Iy(a){return Iy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Iy(a)}var f0=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&d0(p,m)})(v,a);var i,l,u=Z3(v);function v(){return Y3(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"getShape",value:function(){var p=this.props.model,m=p.getNodeStyle();return Object(Ie.g)(Cf,c0({},m,{x:p.x,y:p.y,width:p.width,height:p.height,radius:p.radius}))}}])&&K3(i.prototype,l),v}(wd);function p0(a){return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},p0(a)}function h0(){return h0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},h0.apply(this,arguments)}function Q3(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function eD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function v0(a,i){return v0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},v0(a,i)}function tD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ly(a);if(i){var v=Ly(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return nD(this,l)}}function nD(a,i){if(i&&(p0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Ly(a){return Ly=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ly(a)}var m0=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&v0(p,m)})(v,a);var i,l,u=tD(v);function v(){return Q3(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"getShape",value:function(){var p=this.props.model,m=p.x,O=p.y,k=p.r,D=p.getNodeStyle();return Object(Ie.g)(Bh,h0({},D,{x:m,y:O,r:k}))}}])&&eD(i.prototype,l),v}(wd);function y0(a){return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},y0(a)}function rD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return oS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return oS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function iS(a){var i=a.points,l=a.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(a).forEach(function(v){var p=rD(v,2),m=p[0],O=p[1];y0(O)!=="object"&&(u[m]=O)}),u.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",u.points=i.map(function(v){return v.join(",")}).join(" "),Object(Ie.g)("polygon",u)}function g0(a){return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},g0(a)}function _0(){return _0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},_0.apply(this,arguments)}function oD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function iD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function b0(a,i){return b0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},b0(a,i)}function aD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$y(a);if(i){var v=$y(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return lD(this,l)}}function lD(a,i){if(i&&(g0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function $y(a){return $y=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$y(a)}var w0=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&b0(p,m)})(v,a);var i,l,u=aD(v);function v(){return oD(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"getShape",value:function(){var p=this.props.model,m=p.x,O=p.y,k=p.width,D=p.height,V=p.points,ee=p.getNodeStyle(),te={transform:"matrix(1 0 0 1 ".concat(m-k/2," ").concat(O-D/2,")")};return Object(Ie.g)("g",te,Object(Ie.g)(iS,_0({},ee,{points:V,x:m,y:O})))}}])&&iD(i.prototype,l),v}(wd);function E0(a){return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E0(a)}function O0(){return O0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},O0.apply(this,arguments)}function sD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function uD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function S0(a,i){return S0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},S0(a,i)}function cD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fy(a);if(i){var v=Fy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return dD(this,l)}}function dD(a,i){if(i&&(E0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Fy(a){return Fy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fy(a)}var x0=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&S0(p,m)})(v,a);var i,l,u=cD(v);function v(){return sD(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"getShape",value:function(){var p=this.props.model,m=p.getNodeStyle();return Object(Ie.g)("g",null,Object(Ie.g)(iS,O0({},m,{points:p.points,x:p.x,y:p.y})))}}])&&uD(i.prototype,l),v}(wd);function M0(a){return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},M0(a)}function fD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return aS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return aS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function aS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function pD(a){var i=a.x,l=i===void 0?0:i,u=a.y,v=u===void 0?0:u,p=a.rx,m=p===void 0?4:p,O=a.ry,k=O===void 0?4:O,D=a.className,V={cx:l,cy:v,rx:m,ry:k,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(ee){var te=fD(ee,2),_e=te[0],Ne=te[1];M0(Ne)!=="object"&&(V[_e]=Ne)}),V.className=D?"lf-basic-shape ".concat(D):"lf-basic-shape",Object(Ie.g)("ellipse",V)}function A0(a){return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},A0(a)}function T0(){return T0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},T0.apply(this,arguments)}function hD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function vD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function k0(a,i){return k0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},k0(a,i)}function mD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Vy(a);if(i){var v=Vy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return yD(this,l)}}function yD(a,i){if(i&&(A0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Vy(a){return Vy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Vy(a)}var N0=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&k0(p,m)})(v,a);var i,l,u=mD(v);function v(){return hD(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"getShape",value:function(){var p=this.props.model,m=p.getNodeStyle();return Object(Ie.g)(pD,T0({},m,{x:p.x,y:p.y,rx:p.rx,ry:p.ry}))}}])&&vD(i.prototype,l),v}(wd);function P0(a){return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},P0(a)}function lS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function sS(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?lS(Object(l),!0).forEach(function(u){gD(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):lS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function gD(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function _D(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function bD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function R0(a,i){return R0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},R0(a,i)}function wD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=By(a);if(i){var v=By(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return ED(this,l)}}function ED(a,i){if(i&&(P0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function By(a){return By=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},By(a)}var C0=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&R0(p,m)})(v,a);var i,l,u=wD(v);function v(){return _D(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"getBackground",value:function(){var p=this.props.model,m=p.getTextStyle(),O=p.width,k=p.height,D=p.x,V=p.y,ee=sS(sS({},m.background),{},{x:D,y:V-1,width:O,height:k});return Object(Ie.g)(Cf,ee)}},{key:"getShape",value:function(){return Object(Ie.g)("g",null,this.getBackground())}}])&&bD(i.prototype,l),v}(wd);function D0(a){return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},D0(a)}function j0(){return j0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},j0.apply(this,arguments)}function OD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function SD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function I0(a,i){return I0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},I0(a,i)}function xD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Uy(a);if(i){var v=Uy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return MD(this,l)}}function MD(a,i){if(i&&(D0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fm(a)}function fm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Uy(a){return Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Uy(a)}function Gy(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var L0=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&I0(p,m)})(v,a);var i,l,u=xD(v);function v(){var p;OD(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return Gy(fm(p=u.call.apply(u,[this].concat(O))),"ref",void 0),Gy(fm(p),"currentProperties",void 0),Gy(fm(p),"preProperties",void 0),Gy(fm(p),"setRef",function(D){p.ref=D}),p}return i=v,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(p){p.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var p=this.props.model,m=p.x,O=p.y,k=p.height,D=p.width,V=p.getNodeStyle();return this.currentProperties=JSON.stringify(p.properties),Object(Ie.g)("foreignObject",j0({},V,{x:m-D/2,y:O-k/2,width:D,height:k,ref:this.setRef}))}}])&&SD(i.prototype,l),v}(wd);function $0(a){return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},$0(a)}function F0(){return F0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},F0.apply(this,arguments)}function uS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function Vp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?uS(Object(l),!0).forEach(function(u){U0(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):uS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function AD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function V0(a,i){return V0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},V0(a,i)}function TD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=zy(a);if(i){var v=zy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return kD(this,l)}}function kD(a,i){if(i&&($0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B0(a)}function B0(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zy(a){return zy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},zy(a)}function U0(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var ND=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&V0(p,m)})(v,a);var i,l,u=TD(v);function v(p){var m;return function(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}(this,v),U0(B0(m=u.call(this,p)),"setHoverON",function(){m.setState({isHovered:!0})}),U0(B0(m),"setHoverOFF",function(){m.setState({isHovered:!1})}),m.state={isHovered:!1},m}return i=v,(l=[{key:"getBackground",value:function(){var p=this.props.model,m=p.getTextStyle(),O=p.text,k=p.width,D=m.background||{};if(this.state.isHovered&&m.hover&&m.hover.background&&(D=Vp(Vp({},D),m.hover.background)),O&&O.value&&D.fill!=="transparent"){var V,ee=m.fontSize,te=m.overflowMode,_e=m.lineHeight,Ne=m.wrapPadding,je=m.textWidth,at=O.value,it=O.x,_t=O.y,zt=String(at).split(/[\r\n]/g),gn=zt.length;if(te==="autoWrap"&&je){var mn=ld({rows:zt,style:{fontSize:"".concat(ee,"px"),width:"".concat(je,"px"),lineHeight:_e,padding:Ne},rowsLength:gn,className:"lf-get-text-height"});V=Vp(Vp({},D),{},{x:it-1,y:_t-1,width:je,height:mn})}else{zt&&zt.forEach(function(Br){Bo(Br)});var Kn=uu({rows:zt,fontSize:ee,rowsLength:gn}),hn=Kn.width,Un=Kn.height;if(te==="ellipsis"&&(hn=je||k,Un=ee+2),typeof D.wrapPadding=="string"){var xn=D.wrapPadding.split(",").filter(function(Br){return Br.trim()}).map(function(Br){return parseFloat(Br.trim())});xn.length>0&&xn.length<=4&&(xn.length===1?xn=[xn[0],xn[0],xn[0],xn[0]]:xn.length===2?xn=[xn[0],xn[1],xn[0],xn[1]]:xn.length===3&&(xn=[xn[0],xn[1],xn[2],xn[1]]),hn+=xn[1]+xn[3],Un+=xn[0]+xn[2],it+=(xn[1]-xn[3])/2,_t+=(xn[2]-xn[0])/2)}V=Vp(Vp({},D),{},{x:it-1,y:_t-1,width:hn,height:Un})}return Object(Ie.g)(Cf,V)}}},{key:"getShape",value:function(){var p=this.props.model,m=p.text,O=m.value,k=m.x,D=m.y;if(O){var V=Vp({x:k,y:D,className:"lf-element-text",value:O},p.getTextStyle());return Object(Ie.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Ie.g)(JO,F0({},V,{model:p})))}}}])&&AD(i.prototype,l),v}(eS);function G0(a){return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},G0(a)}var ic,PD=["text","sourceAnchorId","targetAnchorId"];function cS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function Ed(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?cS(Object(l),!0).forEach(function(u){ts(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):cS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function RD(a,i){if(a==null)return{};var l,u,v=function(m,O){if(m==null)return{};var k,D,V={},ee=Object.keys(m);for(D=0;D<ee.length;D++)k=ee[D],O.indexOf(k)>=0||(V[k]=m[k]);return V}(a,i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(a);for(u=0;u<p.length;u++)l=p[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(v[l]=a[l])}return v}function CD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return dS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return dS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function DD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function z0(a,i){return z0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},z0(a,i)}function jD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hy(a);if(i){var v=Hy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return ID(this,l)}}function ID(a,i){if(i&&(G0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return es(a)}function es(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Hy(a){return Hy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Hy(a)}function ts(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}(function(a){a.SOURCE="SOURCE",a.TARGET="TARGET"})(ic||(ic={}));var fS=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&z0(p,m)})(v,a);var i,l,u=jD(v);function v(p){var m;(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,v),ts(es(m=u.call(this)),"stepDragData",void 0),ts(es(m),"stepDrag",void 0),ts(es(m),"oldEdge",void 0),ts(es(m),"preTargetNode",void 0),ts(es(m),"targetRuleResults",void 0),ts(es(m),"sourceRuleResults",void 0),ts(es(m),"handleMouseDown",function(V){m.stepDrag&&m.stepDrag.handleMouseDown(V)}),ts(es(m),"onDragStart",function(){var V=m.props,ee=V.x,te=V.y,_e=V.edgeModel,Ne=_e.startPoint,je=_e.endPoint,at=_e.pointsList;m.oldEdge={startPoint:Ne,endPoint:je,pointsList:at},m.setState({endX:ee,endY:te,dragging:!0})}),ts(es(m),"onDragging",function(V){var ee=V.deltaX,te=V.deltaY,_e=m.state,Ne=_e.endX,je=_e.endY,at=m.props,it=at.graphModel,_t=at.type,zt=it.transformModel,gn=it.editConfigModel,mn=CD(zt.moveCanvasPointByHtml([Ne,je],ee,te),2),Kn=mn[0],hn=mn[1];m.setState({endX:Kn,endY:hn,dragging:!0});var Un=m.props.edgeModel,xn=nd({x:Ne,y:je},it);if(xn&&xn.node&&m.isAllowAdjust(xn).pass){var Br,Wr=Un.startPoint,mr=Un.endPoint,Qr=Un.sourceNode,wi=Un.targetNode;_t===ic.SOURCE?Br={startPoint:{x:xn.anchor.x,y:xn.anchor.y},endPoint:{x:mr.x,y:mr.y},sourceNode:xn.node,targetNode:wi}:_t===ic.TARGET&&(Br={startPoint:{x:Wr.x,y:Wr.y},endPoint:{x:xn.anchor.x,y:xn.anchor.y},sourceNode:Qr,targetNode:xn.node}),Un.updateAfterAdjustStartAndEnd(Br)}else _t===ic.SOURCE?Un.updateStartPoint({x:Kn,y:hn}):_t===ic.TARGET&&Un.updateEndPoint({x:Kn,y:hn});Un.text.value&&gn.adjustEdge&&Un.setText(Object.assign({},Un.text,Un.textPosition))}),ts(es(m),"onDragEnd",function(V){var ee=V.event;try{var te;m.setState({dragging:!1});var _e=m.props,Ne=_e.graphModel,je=_e.edgeModel,at=_e.type,it=m.state,_t=it.endX,zt=it.endY,gn=it.dragging,mn=nd({x:_t,y:zt},Ne);if(!gn)return;var Kn,hn=!1;if(mn&&mn.node){var Un=m.isAllowAdjust(mn),xn=Un.pass,Br=Un.msg,Wr=Un.newTargetNode;if(xn){var mr=je.getData(),Qr=mr.text,wi=mr.sourceAnchorId,Ei=wi===void 0?"":wi,Ta=mr.targetAnchorId;Kn=Ed(Ed({sourceAnchorId:Ei,targetAnchorId:Ta===void 0?"":Ta},RD(mr,PD)),{},{text:(Qr==null?void 0:Qr.value)||""}),at===ic.SOURCE?(Kn=Ed(Ed({},Ne.edgeGenerator(Ne.getNodeModelById(mn.node.id).getData(),Ne.getNodeModelById(je.targetNodeId).getData(),Kn)),{},{sourceNodeId:mn.node.id,sourceAnchorId:mn.anchor.id,startPoint:{x:mn.anchor.x,y:mn.anchor.y},targetNodeId:je.targetNodeId,endPoint:Ed({},je.endPoint)}),je.sourceNodeId===mn.node.id&&je.sourceAnchorId===mn.anchor.id&&(hn=!0)):at===ic.TARGET&&(Kn=Ed(Ed({},Ne.edgeGenerator(Ne.getNodeModelById(je.sourceNodeId).getData(),Ne.getNodeModelById(mn.node.id).getData(),Kn)),{},{sourceNodeId:je.sourceNodeId,startPoint:Ed({},je.startPoint),targetNodeId:mn.node.id,targetAnchorId:mn.anchor.id,endPoint:{x:mn.anchor.x,y:mn.anchor.y}}),je.targetNodeId===mn.node.id&&je.targetAnchorId===mn.anchor.id&&(hn=!0))}else{hn=!0;var ns=Wr.getData();Ne.eventCenter.emit(Ln.CONNECTION_NOT_ALLOWED,{data:ns,msg:Br})}}else hn=!0;if(hn)m.recoveryEdge();else{var rs=je.getData();Ne.deleteEdgeById(je.id);var lc=Ne.addEdge(Ed({},Kn));Ne.eventCenter.emit(Ln.EDGE_EXCHANGE_NODE,{data:{newEdge:lc.getData(),oldEdge:rs}})}(te=m.preTargetNode)===null||te===void 0||te.setElementState(Jr.DEFAULT)}finally{m.props.graphModel.eventCenter.emit(Ln.ADJUST_POINT_DRAGEND,{e:ee,data:m.stepDragData})}}),ts(es(m),"recoveryEdge",function(){var V=m.props.edgeModel,ee=m.oldEdge,te=ee.startPoint,_e=ee.endPoint,Ne=ee.pointsList;V.updateStartPoint(te),V.updateEndPoint(_e),V.modelType!==Pr.LINE_EDGE&&(V.pointsList=Ne,V.initPoints())}),ts(es(m),"getAdjustPointStyle",function(){var V=m.props,ee=V.graphModel.theme;return V.edgeModel,ee.edgeAdjust}),m.state={dragging:!1,endX:0,endY:0},m.targetRuleResults=new Map,m.sourceRuleResults=new Map;var O=p.type,k=p.edgeModel,D=p.graphModel.eventCenter;return m.stepDragData={type:O,edgeData:k.getData()},m.stepDrag=new ge({onDragStart:m.onDragStart,onDragging:m.onDragging,onDragEnd:m.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:D,data:m.stepDragData}),m}return i=v,(l=[{key:"isAllowAdjust",value:function(p){var m=this.props,O=m.edgeModel,k=O.id,D=O.sourceNode,V=O.targetNode,ee=O.sourceAnchorId,te=O.targetAnchorId,_e=m.type,Ne=null,je=null,at=null,it=null;if(_e===ic.SOURCE?(Ne=p.node,je=V,at=p.anchor,it=V.getAnchorInfo(te)):(Ne=D,je=p.node,it=p.anchor,at=D.getAnchorInfo(ee)),this.preTargetNode&&this.preTargetNode!==p.node&&this.preTargetNode.setElementState(Jr.DEFAULT),this.preTargetNode=p.node,it.id===at.id)return{pass:!1,msg:"",newTargetNode:je};var _t="".concat(Ne.id,"_").concat(je.id,"_").concat(at.id,"_").concat(it.id);if(!this.targetRuleResults.has(_t)){var zt=Ne.isAllowConnectedAsSource(je,at,it,k),gn=je.isAllowConnectedAsTarget(Ne,at,it,k);this.sourceRuleResults.set(_t,Kl(zt)),this.targetRuleResults.set(_t,Kl(gn))}var mn=this.sourceRuleResults.get(_t),Kn=mn.isAllPass,hn=mn.msg,Un=this.targetRuleResults.get(_t),xn=Un.isAllPass,Br=Un.msg,Wr=Kn&&xn?Jr.ALLOW_CONNECT:Jr.NOT_ALLOW_CONNECT;return _e===ic.SOURCE?Ne.setElementState(Wr):je.setElementState(Wr),{pass:Kn&&xn,msg:Br||hn,newTargetNode:je}}},{key:"render",value:function(){var p=this.props,m=p.x,O=p.y,k=p.getAdjustPointShape,D=p.edgeModel,V=this.state.dragging;return Object(Ie.g)("g",{pointerEvents:V?"none":"",onMouseDown:this.handleMouseDown},V?"":k(m,O,D))}}])&&DD(i.prototype,l),v}(Ie.a);function H0(a){return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H0(a)}function pm(){return pm=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},pm.apply(this,arguments)}function LD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return pS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return pS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function $D(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function FD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function W0(a,i){return W0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},W0(a,i)}function VD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wy(a);if(i){var v=Wy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return BD(this,l)}}function BD(a,i){if(i&&(H0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _u(a)}function _u(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wy(a){return Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wy(a)}function ac(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var hm=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&W0(p,m)})(v,a);var i,l,u=VD(v);function v(){var p;$D(this,v);for(var m=arguments.length,O=new Array(m),k=0;k<m;k++)O[k]=arguments[k];return ac(_u(p=u.call.apply(u,[this].concat(O))),"startTime",void 0),ac(_u(p),"contextMenuTime",void 0),ac(_u(p),"clickTimer",void 0),ac(_u(p),"textRef",Object(Ie.f)()),ac(_u(p),"handleHover",function(D,V){var ee=p.props,te=ee.model,_e=ee.graphModel.eventCenter;te.setHovered(D);var Ne=D?Ln.EDGE_MOUSEENTER:Ln.EDGE_MOUSELEAVE,je=te.getData();_e.emit(Ne,{data:je,e:V})}),ac(_u(p),"setHoverON",function(D){p.props.model.isHovered||(p.textRef&&p.textRef.current&&p.textRef.current.setHoverON(),p.handleHover(!0,D))}),ac(_u(p),"setHoverOFF",function(D){p.props.model.isHovered&&(p.textRef&&p.textRef.current&&p.textRef.current.setHoverOFF(),p.handleHover(!1,D))}),ac(_u(p),"handleContextMenu",function(D){D.preventDefault(),p.contextMenuTime=new Date().getTime(),p.clickTimer&&clearTimeout(p.clickTimer);var V=p.props,ee=V.model,te=V.graphModel,_e=te.getPointByClient({x:D.clientX,y:D.clientY});te.setElementStateById(ee.id,Jr.SHOW_MENU,_e.domOverlayPosition),p.toFront(),ee.isSelected||te.selectEdgeById(ee.id);var Ne=ee==null?void 0:ee.getData();te.eventCenter.emit(Ln.EDGE_CONTEXTMENU,{data:Ne,e:D,position:_e})}),ac(_u(p),"handleMouseDown",function(D){D.stopPropagation(),p.startTime=new Date().getTime()}),ac(_u(p),"handleMouseUp",function(D){if(p.startTime&&!(new Date().getTime()-p.startTime>200||D.button===2)){var V=D.detail===2,ee=p.props,te=ee.model,_e=ee.graphModel,Ne=te==null?void 0:te.getData(),je=_e.getPointByClient({x:D.clientX,y:D.clientY});if(V){var at=_e.editConfigModel,it=_e.textEditElement;if(it&&it.id===te.id&&_e.setElementStateById(te.id,Jr.DEFAULT),at.edgeTextEdit&&te.text.editable&&_e.setElementStateById(te.id,Jr.TEXT_EDIT),te.modelType===Pr.POLYLINE_EDGE){var _t=te,zt=_e.getPointByClient({x:D.x,y:D.y}).canvasOverlayPosition,gn=zt.x,mn=zt.y,Kn=Dr({x:gn,y:mn},_t.points);_t.dbClickPosition=Kn}_e.eventCenter.emit(Ln.EDGE_DBCLICK,{data:Ne,e:D,position:je})}else _e.eventCenter.emit(Ln.ELEMENT_CLICK,{data:Ne,e:D,position:je}),_e.eventCenter.emit(Ln.EDGE_CLICK,{data:Ne,e:D,position:je});var hn=_e.editConfigModel;_e.selectEdgeById(te.id,Xu(D,hn)),p.toFront()}}),p}return i=v,(l=[{key:"getShape",value:function(){return Object(Ie.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var p=this.props,m=p.model,O=p.graphModel;if(m.state===Jr.TEXT_EDIT)return null;var k=!1,D=O.editConfigModel;return(m.text.draggable||D.edgeTextDraggable)&&(k=!0),Object(Ie.g)(ND,{ref:this.textRef,editable:D.edgeTextEdit&&m.text.editable,model:m,graphModel:O,draggable:k})}},{key:"getArrowInfo",value:function(){var p=this.props.model,m=p.startPoint,O=p.endPoint,k=p.isSelected;return{start:m,end:O,hover:this.state.hover,isSelected:k}}},{key:"getLastTwoPoints",value:function(){var p=this.props.model;return[p.startPoint,p.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var p=this.props.model,m=p.id,O=p.getArrowStyle(),k=O.refY,D=k===void 0?0:k,V=O.refX,ee=V===void 0?2:V,te=LD(this.getLastTwoPoints(),2),_e=te[0],Ne=te[1],je="auto";return _e!==null&&Ne!==null&&(je=Dp(Nf({x:Ne.x-_e.x,y:Ne.y-_e.y,z:0}))),Object(Ie.g)("g",null,Object(Ie.g)("defs",null,Object(Ie.g)("marker",{id:"marker-start-".concat(m),refX:-ee,refY:D,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Ie.g)("marker",{id:"marker-end-".concat(m),refX:ee,refY:D,overflow:"visible",orient:je,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var p=this.props.model.getArrowStyle();return p.stroke,p.strokeWidth,p.offset,p.verticalLength,Object(Ie.g)("path",null)}},{key:"getEndArrow",value:function(){var p=this.props.model.getArrowStyle(),m=p.stroke,O=p.strokeWidth,k=p.offset,D=p.verticalLength;return Object(Ie.g)("path",{stroke:m,fill:m,strokeWidth:O,transform:"rotate(180)",d:"M 0 0 L ".concat(k," -").concat(D," L ").concat(k," ").concat(D," Z")})}},{key:"getAdjustPointShape",value:function(p,m,O){var k=O.getAdjustPointStyle();return Object(Ie.g)(Bh,pm({className:"lf-edge-adjust-point"},k,{x:p,y:m}))}},{key:"getAdjustPoints",value:function(){var p=this.props,m=p.model,O=p.graphModel,k=m.getAdjustStart(),D=m.getAdjustEnd();return Object(Ie.g)("g",null,Object(Ie.g)(fS,pm({type:"SOURCE"},k,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:O})),Object(Ie.g)(fS,pm({type:"TARGET"},D,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:O})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(Ie.g)("g",null)}},{key:"getAppend",value:function(){return Object(Ie.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var p=this.props,m=p.graphModel,O=p.model;m.toFront(O.id)}},{key:"render",value:function(){var p=this.props,m=p.model,O=m.isSelected,k=m.isHitable,D=m.isShowAdjustPoint;return p.graphModel.animation,Object(Ie.g)("g",null,Object(Ie.g)("g",{className:["lf-edge",!k&&"pointer-none",O&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),D&&O?this.getAdjustPoints():"")}}])&&FD(i.prototype,l),v}(Ie.a);function X0(a){return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},X0(a)}function UD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return hS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return hS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var vm=function(a){var i={d:""};return Object.entries(a).forEach(function(l){var u=UD(l,2),v=u[0],p=u[1],m=X0(p);v!=="style"&&m==="object"||(i[v]=p)}),Object(Ie.g)("path",i)};function q0(a){return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},q0(a)}function Y0(){return Y0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Y0.apply(this,arguments)}function GD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function zD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function K0(a,i){return K0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},K0(a,i)}function HD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Xy(a);if(i){var v=Xy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return WD(this,l)}}function WD(a,i){if(i&&(q0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Xy(a){return Xy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Xy(a)}var Z0=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&K0(p,m)})(v,a);var i,l,u=HD(v);function v(){return GD(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"getEdge",value:function(){var p=this.props.model,m=p.startPoint,O=p.endPoint,k=p.isAnimation,D=p.arrowConfig,V=p.getEdgeStyle(),ee=p.getEdgeAnimationStyle(),te=ee.strokeDasharray,_e=ee.stroke,Ne=ee.strokeDashoffset,je=ee.animationName,at=ee.animationDuration,it=ee.animationIterationCount,_t=ee.animationTimingFunction,zt=ee.animationDirection;return Object(Ie.g)(Fh,Y0({},V,{x1:m.x,y1:m.y,x2:O.x,y2:O.y},D,k?{strokeDasharray:te,stroke:_e,style:{strokeDashoffset:Ne,animationName:je,animationDuration:at,animationIterationCount:it,animationTimingFunction:_t,animationDirection:zt}}:{}))}},{key:"getAppendWidth",value:function(){var p=this.props.model,m=p.startPoint,O=p.endPoint,k=hi({start:m,end:O}),D=k.d,V=k.strokeWidth,ee=k.fill,te=k.strokeDasharray,_e=k.stroke;return Object(Ie.g)(vm,{d:D,fill:ee,strokeWidth:V,stroke:_e,strokeDasharray:te})}}])&&zD(i.prototype,l),v}(hm);function J0(a){return J0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},J0(a)}function XD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return vS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return vS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var qD=function(a){var i={points:"",fill:"none"};return Object.entries(a).forEach(function(l){var u=XD(l,2),v=u[0],p=u[1];(v==="style"||J0(p)!=="object")&&(i[v]=p)}),Object(Ie.g)("polyline",i)};function Q0(a){return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q0(a)}function mS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function qy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?mS(Object(l),!0).forEach(function(u){Sd(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):mS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function e1(){return e1=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},e1.apply(this,arguments)}function YD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return yS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return yS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function yS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function KD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function t1(a,i){return t1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},t1(a,i)}function ZD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Yy(a);if(i){var v=Yy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return JD(this,l)}}function JD(a,i){if(i&&(Q0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Od(a)}function Od(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Yy(a){return Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Yy(a)}function Sd(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var n1=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&t1(p,m)})(v,a);var i,l,u=ZD(v);function v(){var p;return function(m,O){if(!(m instanceof O))throw new TypeError("Cannot call a class as a function")}(this,v),Sd(Od(p=u.call(this)),"drag",void 0),Sd(Od(p),"isDragging",void 0),Sd(Od(p),"isShowAdjustPointTemp",void 0),Sd(Od(p),"appendInfo",void 0),Sd(Od(p),"onDragStart",function(){var m=p.props.model;m.dragAppendStart(),p.isShowAdjustPointTemp=m.isShowAdjustPoint,m.isShowAdjustPoint=!1}),Sd(Od(p),"onDragging",function(m){var O=m.deltaX,k=m.deltaY,D=p.props,V=D.model,ee=D.graphModel;p.isDragging=!0;var te=ee.transformModel,_e=ee.editConfigModel,Ne=YD(te.fixDeltaXY(O,k),2),je=Ne[0],at=Ne[1],it=V,_t=_e.adjustEdgeMiddle;p.appendInfo=_t?it.dragAppendSimple(p.appendInfo,{x:je,y:at}):it.dragAppend(p.appendInfo,{x:je,y:at})}),Sd(Od(p),"onDragEnd",function(){var m=p.props,O=m.model,k=m.graphModel.eventCenter,D=O;D.dragAppendEnd(),p.isDragging=!1,D.isShowAdjustPoint=p.isShowAdjustPointTemp,p.appendInfo=void 0,k.emit(Ln.EDGE_ADJUST,{data:D.getData()})}),Sd(Od(p),"beforeDragStart",function(m,O){O.dragAble&&p.drag.handleMouseDown(m),p.appendInfo=O}),p.drag=new ge({onDragStart:p.onDragStart,onDragging:p.onDragging,onDragEnd:p.onDragEnd,isStopPropagation:!1}),p}return i=v,(l=[{key:"getEdge",value:function(){var p=this.props.model,m=p.points,O=p.isAnimation,k=p.arrowConfig,D=p.getEdgeStyle(),V=p.getEdgeAnimationStyle(),ee=V.strokeDasharray,te=V.stroke,_e=V.strokeDashoffset,Ne=V.animationName,je=V.animationDuration,at=V.animationIterationCount,it=V.animationTimingFunction,_t=V.animationDirection;return Object(Ie.g)(qD,e1({points:m},D,k,O?{strokeDasharray:ee,stroke:te,style:{strokeDashoffset:_e,animationName:Ne,animationDuration:je,animationIterationCount:at,animationTimingFunction:it,animationDirection:_t}}:{}))}},{key:"getArrowInfo",value:function(){var p=this.props.model,m=p.points,O=p.isSelected,k={start:null,end:null,hover:this.state.hover,isSelected:O},D=ar(m);return D.length>=2&&(k.start=D[D.length-2],k.end=D[D.length-1]),k}},{key:"getLastTwoPoints",value:function(){var p=this.props.model.points,m=ar(p);return m.length>=2?[m[m.length-2],m[m.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(p){var m,O=p.start,k=p.end;if(O.x===k.x&&O.y===k.y)m="";else{var D={start:O,end:k,offset:10,verticalLength:5},V=pu(qy(qy({},D),{},{type:"start"})),ee=pu(qy(qy({},D),{},{type:"end"}));m="M".concat(V.leftX," ").concat(V.leftY,` 
      L`).concat(V.rightX," ").concat(V.rightY,` 
      L`).concat(ee.rightX," ").concat(ee.rightY,`
      L`).concat(ee.leftX," ").concat(ee.leftY," z")}return{d:m,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(p){var m=this.getAppendAttributes(p),O=m.d,k=m.strokeWidth,D=m.fill,V=m.strokeDasharray,ee=m.stroke;return Object(Ie.g)(vm,{d:O,fill:D,strokeWidth:k,stroke:ee,strokeDasharray:V})}},{key:"getAppendWidth",value:function(){for(var p=this,m=this.props,O=m.model,k=m.graphModel,D=O.pointsList,V=O.draggable,ee=[],te=D.length,_e=function(je){var at="lf-polyline-append",it={start:{x:D[je].x,y:D[je].y},end:{x:D[je+1].x,y:D[je+1].y},startIndex:je,endIndex:je+1,direction:"",dragAble:!0},_t=Object(Ie.g)("g",{className:at},p.getAppendShape(it)),zt=k.editConfigModel,gn=zt.adjustEdge,mn=zt.adjustEdgeMiddle;if(gn&&V){var Kn=it.startIndex,hn=it.endIndex,Un=mn&&(Kn===0||hn===te-1);it.dragAble=!Un,it.start.x===it.end.x?(it.dragAble&&(at+="-ew-resize"),it.direction=yo.VERTICAL):it.start.y===it.end.y&&(it.dragAble&&(at+="-ns-resize"),it.direction=yo.HORIZONTAL),_t=Object(Ie.g)("g",{className:p.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(xn){return p.beforeDragStart(xn,it)}},Object(Ie.g)("g",{className:at},p.getAppendShape(it)))}ee.push(_t)},Ne=0;Ne<te-1;Ne++)_e(Ne);return Object(Ie.g)("g",null,ee)}}])&&KD(i.prototype,l),v}(hm);function r1(a){return r1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},r1(a)}function QD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return gS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return gS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function o1(){return o1=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},o1.apply(this,arguments)}function ej(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function tj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function i1(a,i){return i1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},i1(a,i)}function nj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ky(a);if(i){var v=Ky(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return rj(this,l)}}function rj(a,i){if(i&&(r1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Ky(a){return Ky=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ky(a)}var a1=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&i1(p,m)})(v,a);var i,l,u=nj(v);function v(){return ej(this,v),u.apply(this,arguments)}return i=v,(l=[{key:"getEdge",value:function(){var p=this.props.model,m=p.getEdgeStyle(),O=p.path,k=p.isAnimation,D=p.arrowConfig,V=p.getEdgeAnimationStyle(),ee=V.strokeDasharray,te=V.stroke,_e=V.strokeDashoffset,Ne=V.animationName,je=V.animationDuration,at=V.animationIterationCount,it=V.animationTimingFunction,_t=V.animationDirection;return Object(Ie.g)(vm,o1({d:O},m,D,k?{strokeDasharray:ee,stroke:te,style:{strokeDashoffset:_e,animationName:Ne,animationDuration:je,animationIterationCount:at,animationTimingFunction:it,animationDirection:_t}}:{}))}},{key:"getAppendWidth",value:function(){var p=this.props.model.path;return Object(Ie.g)(vm,{d:p,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var p=this.props.model,m=this.state.hover,O=p.isSelected,k=p.getArrowStyle().offset,D=p.pointsList.map(function(ee){return{x:ee.x,y:ee.y}}),V=QD(vi(D,k),2);return{start:V[0],end:V[1],hover:m,isSelected:O}}},{key:"getLastTwoPoints",value:function(){var p=this.props.model,m=p.getArrowStyle().offset,O=p.pointsList.map(function(k){return{x:k.x,y:k.y}});return vi(O,m)}}])&&tj(i.prototype,l),v}(hm);function l1(a){return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},l1(a)}function _S(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function oj(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function ij(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function aj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function s1(a,i){return s1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},s1(a,i)}function lj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Zy(a);if(i){var v=Zy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return sj(this,l)}}function sj(a,i){if(i&&(l1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Zy(a){return Zy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Zy(a)}var uj=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&s1(p,m)})(v,a);var i,l,u=lj(v);function v(){return ij(this,v),u.apply(this,arguments)}return i=v,l=[{key:"getArrowAttributes",value:function(){var p=this.props,m=p.arrowInfo,O=p.style,k=m.start,D=m.end,V={start:k,end:D,offset:O.offset,verticalLength:O.verticalLength,type:"end"},ee=pu(V),te=ee.leftX,_e=ee.leftY,Ne=ee.rightX,je=ee.rightY;return function(at){for(var it=1;it<arguments.length;it++){var _t=arguments[it]!=null?arguments[it]:{};it%2?_S(Object(_t),!0).forEach(function(zt){oj(at,zt,_t[zt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(_t)):_S(Object(_t)).forEach(function(zt){Object.defineProperty(at,zt,Object.getOwnPropertyDescriptor(_t,zt))})}return at}({d:"M".concat(te," ").concat(_e," L").concat(D.x," ").concat(D.y," L").concat(Ne," ").concat(je," z")},O)}},{key:"getShape",value:function(){var p=this.getArrowAttributes(),m=p.d,O=p.strokeWidth,k=p.stroke,D=p.fill;return Object(Ie.g)(vm,{d:m,fill:D,strokeWidth:O,stroke:k})}},{key:"render",value:function(){return Object(Ie.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&aj(i.prototype,l),v}(Ie.a),bS=function(a,i){return gt(a,i)},cj=function(a){var i=a==null?0:a.length;return i?a[i-1]:void 0},u1=function(){return In.a.Date.now()},dj=Math.max,fj=Math.min,pj=function(a,i,l){var u,v,p,m,O,k,D=0,V=!1,ee=!1,te=!0;if(typeof a!="function")throw new TypeError("Expected a function");function _e(zt){var gn=u,mn=v;return u=v=void 0,D=zt,m=a.apply(mn,gn)}function Ne(zt){return D=zt,O=setTimeout(at,i),V?_e(zt):m}function je(zt){var gn=zt-k;return k===void 0||gn>=i||gn<0||ee&&zt-D>=p}function at(){var zt=u1();if(je(zt))return it(zt);O=setTimeout(at,function(gn){var mn=i-(gn-k);return ee?fj(mn,p-(gn-D)):mn}(zt))}function it(zt){return O=void 0,te&&u?_e(zt):(u=v=void 0,m)}function _t(){var zt=u1(),gn=je(zt);if(u=arguments,v=this,k=zt,gn){if(O===void 0)return Ne(k);if(ee)return clearTimeout(O),O=setTimeout(at,i),_e(k)}return O===void 0&&(O=setTimeout(at,i)),m}return i=Yu(i)||0,Vr(l)&&(V=!!l.leading,p=(ee="maxWait"in l)?dj(Yu(l.maxWait)||0,i):p,te="trailing"in l?!!l.trailing:te),_t.cancel=function(){O!==void 0&&clearTimeout(O),D=0,u=k=v=O=void 0},_t.flush=function(){return O===void 0?m:it(u1())},_t},hj=r(172);function vj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Lf(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var wS,ES,OS,mj=function(){function a(u){(function(v,p){if(!(v instanceof p))throw new TypeError("Cannot call a class as a function")})(this,a),Lf(this,"undos",[]),Lf(this,"redos",[]),Lf(this,"callbacks",[]),Lf(this,"stopWatch",null),Lf(this,"curData",null),Lf(this,"maxSize",50),Lf(this,"waitTime",100),Lf(this,"eventCenter",void 0),this.eventCenter=u}var i,l;return i=a,(l=[{key:"add",value:function(u){bS(cj(this.undos),u)||(this.undos.push(u),bS(this.curData,u)||(this.redos=[]),this.eventCenter.emit(Ln.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var v=this.undos.pop();return this.curData=io(v),v}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=io(u),u}}},{key:"watch",value:function(u){var v=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(hj.a)(u,pj(function(){var p=u.modelToHistoryData();p&&v.add(p)},this.waitTime))}}])&&vj(i.prototype,l),a}();function c1(a){return c1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},c1(a)}function yj(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||function(l,u){if(l){if(typeof l=="string")return SS(l,u);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return SS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function SS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function xS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function Bp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?xS(Object(l),!0).forEach(function(u){Up(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):xS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function MS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function d1(a,i){return d1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d1(a,i)}function gj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jy(a);if(i){var v=Jy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return _j(this,l)}}function _j(a,i){if(i&&(c1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jh(a)}function Jh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Jy(a){return Jy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Jy(a)}function Up(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var AS,TS,kS,f1=bu((OS=ES=function(a){(function(m,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(O&&O.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),O&&d1(m,O)})(p,a);var i,l,u,v=gj(p);function p(){var m;return function(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}(this,p),Up(Jh(m=v.call(this)),"ref",Object(Ie.f)()),Up(Jh(m),"__prevText",{type:"",text:"",id:""}),Up(Jh(m),"keyupHandler",function(O){var k=m.props.graphModel.textEditElement;O.key==="Enter"&&O.altKey&&k.setElementState(0)}),Up(Jh(m),"inputHandler",function(O){var k=O.target.innerText,D=m.props.graphModel.textEditElement;m.__prevText={type:D.type,text:k.replace(/(\r\n)+$|(\n)+$/,""),id:D.id}}),Up(Jh(m),"keydownHandler",function(O){O.stopPropagation()}),m.state={style:{left:0,top:0}},m}return i=p,u=[{key:"getDerivedStateFromProps",value:function(m){var O,k=m.graphModel,D=k.transformModel,V=k.theme,ee=V.inputText,te=k.textEditElement;if(te){var _e;if((_e=te.text)===null||_e===void 0||!_e.value)if(te.BaseType===mo.EDGE){var Ne=(te=te).text,je=te.textPosition,at=je.x,it=je.y;Ne.x=at,Ne.y=it,te.setText(Ne)}else te=te;var _t={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(te.BaseType===mo.EDGE){var zt=V.edgeText,gn=zt.overflowMode,mn=zt.lineHeight,Kn=zt.wrapPadding,hn=zt.textWidth;hn&&gn==="autoWrap"&&(O=Bp(Bp({},_t),{},{width:hn,minWidth:hn,lineHeight:mn,padding:Kn}))}else if(te.BaseType===mo.NODE){var Un=V.nodeText,xn=Un.overflowMode,Br=Un.lineHeight,Wr=Un.wrapPadding,mr=Un.textWidth,Qr=te,wi=Qr.width,Ei=Qr.modelType,Ta=Qr.textWidth||mr||wi;(Ei!==Pr.TEXT_NODE&&xn==="autoWrap"||Ei===Pr.TEXT_NODE&&mr)&&(O=Bp(Bp({},_t),{},{width:Ta,minWidth:Ta,lineHeight:Br,padding:Wr}))}var ns=te.text,rs=ns.x,lc=ns.y,Gp=yj(D.CanvasPointToHtmlPoint([rs,lc]),2);return{style:Bp(Bp({left:Gp[0],top:Gp[1]},O),ee)}}}}],(l=[{key:"componentDidUpdate",value:function(){var m=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var O=this.__prevText,k=O.text,D=O.id;m.updateText(D,k),m.eventCenter.emit(Ln.TEXT_UPDATE,Bp({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(m){if(window.getSelection!==void 0&&document.createRange!==void 0){var O=document.createRange();O.selectNodeContents(m),O.collapse(!1);var k=window.getSelection();k.removeAllRanges(),k.addRange(O)}}},{key:"render",value:function(){var m,O=this.props.graphModel.textEditElement,k=this.state.style;return O?Object(Ie.g)("div",{contentEditable:!0,className:"lf-text-input",style:k,ref:this.ref,key:O.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(m=O.text)===null||m===void 0?void 0:m.value):null}}])&&MS(i.prototype,l),u&&MS(i,u),p}(Ie.a),Up(ES,"toolName","textEdit"),wS=OS))||wS,bj=function(a){return a.modelType===Pr.LINE_EDGE?function(i){var l=i.startPoint,u=i.endPoint,v=(l.x+u.x)/2,p=(l.y+u.y)/2,m=Math.abs(l.x-u.x)+10,O=Math.abs(l.y-u.y)+10;return{x:v-m/2,y:p-O/2,x1:v+m/2,y1:p+O/2}}(a):a.modelType===Pr.POLYLINE_EDGE?function(i){var l=i.points,u=ar(l),v=ut(u,8),p=v.x,m=v.y,O=v.width,k=v.height;return{x:p-O/2,y:m-k/2,x1:p+O/2,y1:m+k/2}}(a):a.modelType===Pr.BEZIER_EDGE?function(i){var l=i.path,u=wo(l),v=ut(u,8),p=v.x,m=v.y,O=v.width,k=v.height;return{x:p-O/2,y:m-k/2,x1:p+O/2,y1:m+k/2}}(a):void 0};function p1(a){return p1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},p1(a)}function NS(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var v=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(v!=null){var p,m,O=[],k=!0,D=!1;try{for(v=v.call(l);!(k=(p=v.next()).done)&&(O.push(p.value),!u||O.length!==u);k=!0);}catch(V){D=!0,m=V}finally{try{k||v.return==null||v.return()}finally{if(D)throw m}}return O}}(a,i)||PS(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wj(a){return function(i){if(Array.isArray(i))return h1(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||PS(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function PS(a,i){if(a){if(typeof a=="string")return h1(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?h1(a,i):void 0}}function h1(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ej(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function v1(a,i){return v1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},v1(a,i)}function Oj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Qy(a);if(i){var v=Qy(this).constructor;l=Reflect.construct(u,arguments,v)}else l=u.apply(this,arguments);return Sj(this,l)}}function Sj(a,i){if(i&&(p1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qh(a)}function Qh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Qy(a){return Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Qy(a)}function ev(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var m1=bu((kS=TS=function(a){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&v1(p,m)})(v,a);var i,l,u=Oj(v);function v(p){var m;(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,v),ev(Qh(m=u.call(this)),"stepDrag",void 0),ev(Qh(m),"handleMouseDown",function(V){m.stepDrag.handleMouseDown(V)}),ev(Qh(m),"handleWheelEvent",function(V){var ee,te;V.preventDefault();var _e=V.deltaX,Ne=V.deltaY,je=V.clientX,at=V.clientY,it=V.ctrlKey,_t=new WheelEvent("wheel",{deltaX:_e,deltaY:Ne,clientX:je,clientY:at,ctrlKey:it});(ee=m.props.logicFlow.container)===null||ee===void 0||(te=ee.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||te===void 0||te.dispatchEvent(_t)}),ev(Qh(m),"onDragging",function(V){var ee=V.deltaX,te=V.deltaY,_e=m.props.graphModel,Ne=_e.getSelectElements(!0);_e.moveNodes(Ne.nodes.map(function(je){return je.id}),ee,te)}),ev(Qh(m),"handleContextMenu",function(V){V.preventDefault();var ee=m.props,te=ee.graphModel,_e=ee.graphModel,Ne=_e.eventCenter,je=_e.selectElements,at=te.getPointByClient({x:V.clientX,y:V.clientY}),it={nodes:[],edges:[]};wj(je.values()).forEach(function(_t){_t.BaseType===mo.NODE&&it.nodes.push(_t.getData()),_t.BaseType===mo.EDGE&&it.edges.push(_t.getData())}),Ne.emit(Ln.SELECTION_CONTEXTMENU,{data:it,e:V,position:at})});var O=p.graphModel,k=O.gridSize,D=O.eventCenter;return m.stepDrag=new ge({onDragging:m.onDragging,step:k,eventType:"SELECTION",eventCenter:D}),m}return i=v,(l=[{key:"render",value:function(){var p=this.props.graphModel,m=p.selectElements,O=p.transformModel;if(!(m.size<=1)){var k=Number.MAX_SAFE_INTEGER,D=Number.MAX_SAFE_INTEGER,V=Number.MIN_SAFE_INTEGER,ee=Number.MIN_SAFE_INTEGER;m.forEach(function(je){var at={x:0,y:0,x1:0,y1:0};je.BaseType===mo.NODE&&(at=function(it){var _t=it.x,zt=it.y,gn=it.width,mn=it.height;return{x:_t-gn/2,y:zt-mn/2,x1:_t+gn/2,y1:zt+mn/2}}(je)),je.BaseType===mo.EDGE&&(at=bj(je)),k=Math.min(k,at.x),D=Math.min(D,at.y),V=Math.max(V,at.x1),ee=Math.max(ee,at.y1)});var te=NS(O.CanvasPointToHtmlPoint([k,D]),2);k=te[0],D=te[1];var _e=NS(O.CanvasPointToHtmlPoint([V,ee]),2);V=_e[0],ee=_e[1];var Ne={left:"".concat(k-10,"px"),top:"".concat(D-10,"px"),width:"".concat(V-k+20,"px"),height:"".concat(ee-D+20,"px")};return Object(Ie.g)("div",{className:"lf-multiple-select",style:Ne,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&Ej(i.prototype,l),v}(Ie.a),ev(TS,"toolName","multipleSelect"),AS=kS))||AS;function xj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function eg(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Mj=function(){function a(u){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,a),eg(this,"tools",void 0),eg(this,"components",void 0),eg(this,"toolMap",new Map),eg(this,"instance",void 0),this.instance=u,this.isDisabledTool(f1.toolName)||this.registerTool(f1.toolName,f1),this.isDisabledTool(m1.toolName)||this.registerTool(m1.toolName,m1);var v=u.graphModel;v.eventCenter.on("".concat(Ln.GRAPH_TRANSFORM,",").concat(Ln.NODE_CLICK,",").concat(Ln.BLANK_CLICK," "),function(){var p=v.textEditElement,m=v.editConfigModel,O=m.edgeTextEdit,k=m.nodeTextEdit;(O||k)&&p&&v.textEditElement.setElementState(Jr.DEFAULT)})}var i,l;return i=a,(l=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,v){this.toolMap.set(u,v)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&xj(i.prototype,l),a}(),Aj=r(173),Tj=r.n(Aj);function kj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function y1(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var RS=function(){function a(u){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,a),y1(this,"mousetrap",void 0),y1(this,"options",void 0),y1(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var v=u.lf;this.target=v.container,this.mousetrap=new Tj.a(this.target),u.keyboard.enabled&&!v.options.isSilentMode&&this.enable(!0)}var i,l;return i=a,(l=[{key:"initShortcuts",value:function(){var u=this,v=this.options.keyboard.shortcuts;if(v)if(po(v))v.forEach(function(k){var D=k.keys,V=k.callback,ee=k.action;return u.on(D,V,ee)});else{var p=v.keys,m=v.callback,O=v.action;this.on(p,m,O)}}},{key:"on",value:function(u,v,p){this.mousetrap.bind(this.getKeys(u),v,p)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,v){this.mousetrap.unbind(this.getKeys(u),v)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var v=this;return(Array.isArray(u)?u:[u]).map(function(p){return v.formatKey(p)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&kj(i.prototype,l),a}(),Nj=RS,xd=null;function CS(a,i){return a.x+=i,a.y+=i,a.text&&(a.text.x+=i,a.text.y+=i),a}function DS(a,i){return a.startPoint&&(a.startPoint.x+=i,a.startPoint.y+=i),a.endPoint&&(a.endPoint.x+=i,a.endPoint.y+=i),a.pointsList&&a.pointsList.length>0&&a.pointsList.forEach(function(l){l.x+=i,l.y+=i}),a.text&&(a.text.x+=i,a.text.y+=i),a}var tv=40,g1=40;function _1(a){return _1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_1(a)}function jS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),l.push.apply(l,u)}return l}function mm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?jS(Object(l),!0).forEach(function(u){mi(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):jS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function IS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function mi(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var b1=Symbol("plugin register by Logicflow.use"),w1=function(){function a(v){var p,m,O=this;(function(k,D){if(!(k instanceof D))throw new TypeError("Cannot call a class as a function")})(this,a),mi(this,"container",void 0),mi(this,"width",void 0),mi(this,"height",void 0),mi(this,"graphModel",void 0),mi(this,"history",void 0),mi(this,"viewMap",new Map),mi(this,"tool",void 0),mi(this,"keyboard",void 0),mi(this,"dnd",void 0),mi(this,"options",void 0),mi(this,"snaplineModel",void 0),mi(this,"components",[]),mi(this,"plugins",void 0),mi(this,"extension",{}),mi(this,"adapterIn",void 0),mi(this,"adapterOut",void 0),mi(this,"getView",function(k){return O.viewMap.get(k)}),v=R2(v),this.options=v,this.container=this.initContainer(v.container),this.plugins=v.plugins,this.graphModel=new IR(mm({},v)),this.tool=new Mj(this),this.history=new mj(this.graphModel.eventCenter),this.dnd=new CC({lf:this}),this.keyboard=new Nj({lf:this,keyboard:v.keyboard}),v.snapline!==!1&&(this.snaplineModel=new WO(this.graphModel),p=this.graphModel.eventCenter,m=this.snaplineModel,p.on("node:mousemove",function(k){var D=k.data;m.setNodeSnapLine(D)}),p.on("node:mouseup",function(){m.clearSnapline()})),function(k,D){var V=k.keyboard,ee=V.options.keyboard;V.on(["cmd + c","ctrl + c"],function(){if(g1=tv,!ee.enabled||D.textEditElement)return!0;var te=k.options.guards,_e=D.getSelectElements(!1);return te&&te.beforeClone&&!te.beforeClone(_e)||_e.nodes.length===0&&_e.edges.length===0?(xd=null,!0):((xd=_e).nodes.forEach(function(Ne){return CS(Ne,tv)}),xd.edges.forEach(function(Ne){return DS(Ne,tv)}),!1)}),V.on(["cmd + v","ctrl + v"],function(){if(!ee.enabled||D.textEditElement)return!0;if(xd&&(xd.nodes||xd.edges)){k.clearSelectElements();var te=k.addElements(xd,g1);if(!te)return!0;te.nodes.forEach(function(_e){return k.selectElementById(_e.id,!0)}),te.edges.forEach(function(_e){return k.selectElementById(_e.id,!0)}),xd.nodes.forEach(function(_e){return CS(_e,tv)}),xd.edges.forEach(function(_e){return DS(_e,tv)}),g1+=tv}return!1}),V.on(["cmd + z","ctrl + z"],function(){return!ee.enabled||!!D.textEditElement||(k.undo(),!1)}),V.on(["cmd + y","ctrl + y"],function(){return!ee.enabled||!!D.textEditElement||(k.redo(),!1)}),V.on(["backspace"],function(){if(!ee.enabled||D.textEditElement)return!0;var te=D.getSelectElements(!0);return k.clearSelectElements(),te.edges.forEach(function(_e){return k.deleteEdge(_e.id)}),te.nodes.forEach(function(_e){return k.deleteNode(_e.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(v.disabledPlugins)}var i,l,u;return i=a,l=[{key:"register",value:function(v,p){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof v=="string"){var O={BaseEdge:hm,BaseEdgeModel:Tf,BaseNode:wd,BaseNodeModel:bd,RectNode:f0,RectNodeModel:Gb,CircleNode:m0,CircleNodeModel:Sb,PolygonNode:w0,PolygonNodeModel:Fb,TextNode:C0,TextNodeModel:Xb,LineEdge:Z0,LineEdgeModel:Qu,DiamondNode:x0,DiamondNodeModel:kb,PolylineEdge:n1,PolylineEdgeModel:Aa,BezierEdge:a1,BezierEdgeModel:gb,EllipseNode:N0,EllipseNodeModel:Cb,HtmlNode:L0,HtmlNodeModel:Kb,h:Ie.g,type:v};this.viewMap.forEach(function(te){var _e=te.extendKey;_e&&(O[_e]=te)}),this.graphModel.modelMap.forEach(function(te){var _e=te.extendKey;_e&&(O[_e]=te)});var k=p(O),D=k.view,V=k.model,ee=D;m&&!ee.isObervered&&(ee.isObervered=!0,ee=kn(ee)),this.setView(v,ee),this.graphModel.setModel(v,V)}else this.registerElement(v)}},{key:"registerElement",value:function(v){var p=v.view;v.isObserverView===!1||p.isObervered||(p.isObervered=!0,p=kn(p)),this.setView(v.type,p),this.graphModel.setModel(v.type,v.model)}},{key:"batchRegister",value:function(){var v=this,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];p.forEach(function(m){v.registerElement(m)})}},{key:"defaultRegister",value:function(){this.registerElement({view:f0,model:Gb,type:"rect"}),this.registerElement({type:"circle",view:m0,model:Sb}),this.registerElement({type:"polygon",view:w0,model:Fb}),this.registerElement({type:"line",view:Z0,model:Qu}),this.registerElement({type:"polyline",view:n1,model:Aa}),this.registerElement({type:"bezier",view:a1,model:gb}),this.registerElement({type:"text",view:C0,model:Xb}),this.registerElement({type:"ellipse",view:N0,model:Cb}),this.registerElement({type:"diamond",view:x0,model:kb}),this.registerElement({type:"html",view:L0,model:Kb})}},{key:"selectElementById",value:function(v){var p=arguments.length>1&&arguments[1]!==void 0&&arguments[1],m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(v,p),!p&&m&&this.graphModel.toFront(v)}},{key:"focusOn",value:function(v){var p=this.graphModel.transformModel,m=v.coordinate,O=v.id;if(!m){var k=this.getNodeModelById(O);k&&(m=k.getData());var D=this.getEdgeModelById(O);D&&(m=D.textPosition)}var V=m,ee=V.x,te=V.y;p.focusOn(ee,te,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(v){this.graphModel.setTheme(v)}},{key:"resize",value:function(v,p){this.graphModel.resize(v,p),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(v){this.graphModel.setDefaultEdgeType(v)}},{key:"updateText",value:function(v,p){this.graphModel.updateText(v,p)}},{key:"deleteElement",value:function(v){var p,m,O,k=this.getModelById(v);return!!k&&(m=(O=(mi(p={},mo.NODE,this.deleteNode),mi(p,mo.EDGE,this.deleteEdge),p)[k.BaseType])===null||O===void 0?void 0:O.call(this,v))!==null&&m!==void 0&&m}},{key:"getModelById",value:function(v){return this.graphModel.getElement(v)}},{key:"getDataById",value:function(v){var p;return(p=this.graphModel.getElement(v))===null||p===void 0?void 0:p.getData()}},{key:"changeNodeType",value:function(v,p){this.graphModel.changeNodeType(v,p)}},{key:"changeEdgeType",value:function(v,p){this.graphModel.changeEdgeType(v,p)}},{key:"getNodeEdges",value:function(v){return this.graphModel.getNodeEdges(v)}},{key:"addNode",value:function(v){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ln.NODE_ADD,m=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(v,p,m)}},{key:"deleteNode",value:function(v){var p=this.graphModel.getNodeModelById(v);if(!p)return!1;var m=p.getData(),O=this.options.guards,k=!O||!O.beforeDelete||O.beforeDelete(m);return k&&this.graphModel.deleteNode(v),k}},{key:"cloneNode",value:function(v){var p=this.graphModel.getNodeModelById(v).getData(),m=this.options.guards;if(!m||!m.beforeClone||m.beforeClone(p))return this.graphModel.cloneNode(v)}},{key:"changeNodeId",value:function(v,p){return this.graphModel.changeNodeId(v,p)}},{key:"getNodeModelById",value:function(v){return this.graphModel.getNodeModelById(v)}},{key:"getNodeDataById",value:function(v){var p;return(p=this.graphModel.getNodeModelById(v))===null||p===void 0?void 0:p.getData()}},{key:"addEdge",value:function(v){return this.graphModel.addEdge(v)}},{key:"deleteEdge",value:function(v){var p=this.options.guards,m=this.graphModel.edgesMap[v];if(!m)return!1;var O=m.model.getData(),k=!p||!p.beforeDelete||p.beforeDelete(O);return k&&this.graphModel.deleteEdgeById(v),k}},{key:"deleteEdgeByNodeId",value:function(v){var p=v.sourceNodeId,m=v.targetNodeId;p&&m?this.graphModel.deleteEdgeBySourceAndTarget(p,m):p?this.graphModel.deleteEdgeBySource(p):m&&this.graphModel.deleteEdgeByTarget(m)}},{key:"changeEdgeId",value:function(v,p){return this.graphModel.changeEdgeId(v,p)}},{key:"getEdgeModelById",value:function(v){var p;return(p=this.graphModel.edgesMap[v])===null||p===void 0?void 0:p.model}},{key:"getEdgeModels",value:function(v){var p=this.graphModel.edges,m=v.sourceNodeId,O=v.targetNodeId;if(m&&O){var k=[];return p.forEach(function(ee){ee.sourceNodeId===m&&ee.targetNodeId===O&&k.push(ee)}),k}if(m){var D=[];return p.forEach(function(ee){ee.sourceNodeId===m&&D.push(ee)}),D}if(O){var V=[];return p.forEach(function(ee){ee.targetNodeId===O&&V.push(ee)}),V}return[]}},{key:"getEdgeDataById",value:function(v){var p;return(p=this.getEdgeModelById(v))===null||p===void 0?void 0:p.getData()}},{key:"getNodeIncomingEdge",value:function(v){return this.graphModel.getNodeIncomingEdge(v)}},{key:"getNodeOutgoingEdge",value:function(v){return this.graphModel.getNodeOutgoingEdge(v)}},{key:"getNodeIncomingNode",value:function(v){return this.graphModel.getNodeIncomingNode(v)}},{key:"getNodeOutgoingNode",value:function(v){return this.graphModel.getNodeOutgoingNode(v)}},{key:"editText",value:function(v){this.graphModel.editText(v)}},{key:"setProperties",value:function(v,p){var m;(m=this.graphModel.getElement(v))===null||m===void 0||m.setProperties(bi(p))}},{key:"deleteProperty",value:function(v,p){var m;(m=this.graphModel.getElement(v))===null||m===void 0||m.deleteProperty(p)}},{key:"getProperties",value:function(v){var p;return(p=this.graphModel.getElement(v))===null||p===void 0?void 0:p.getProperties()}},{key:"toFront",value:function(v){this.graphModel.toFront(v)}},{key:"setElementZIndex",value:function(v,p){return this.graphModel.setElementZIndex(v,p)}},{key:"addElements",value:function(v){for(var p=this,m=v.nodes,O=v.edges,k={},D={nodes:[],edges:[]},V=0;V<m.length;V++){var ee=m[V],te=ee.id,_e=this.addNode(ee);if(!_e)return;te&&(k[te]=_e.id),D.nodes.push(_e)}return O.forEach(function(Ne){var je=Ne.sourceNodeId,at=Ne.targetNodeId;k[je]&&(je=k[je]),k[at]&&(at=k[at]);var it=p.graphModel.addEdge(mm(mm({},Ne),{},{sourceNodeId:je,targetNodeId:at}));D.edges.push(it)}),D}},{key:"getAreaElement",value:function(v,p){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],O=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],k=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(v,p,m,O,k).map(function(D){return D.getData()})}},{key:"getSelectElements",value:function(){var v=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(v)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var v=this.graphModel.modelToGraphData();if(this.adapterOut){for(var p=arguments.length,m=new Array(p),O=0;O<p;O++)m[O]=arguments[O];return this.adapterOut.apply(this,[v].concat(m))}return v}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(v){var p=this.graphModel,m=p.editConfigModel,O=p.transformModel;m.updateEditConfig(v),(v==null?void 0:v.stopMoveGraph)!==void 0&&O.updateTranslateLimits(v.stopMoveGraph),v!=null&&v.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(v,p){return this.graphModel.getPointByClient({x:v,y:p})}},{key:"undo",value:function(){if(this.history.undoAble()){var v=bi(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(v)}}},{key:"redo",value:function(){if(this.history.redoAble()){var v=bi(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(v)}}},{key:"zoom",value:function(v,p){return this.graphModel.transformModel.zoom(v,p)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(v){this.graphModel.transformModel.setZoomMiniSize(v)}},{key:"setZoomMaxSize",value:function(v){this.graphModel.transformModel.setZoomMaxSize(v)}},{key:"getTransform",value:function(){var v=this.graphModel.transformModel;return{SCALE_X:v.SCALE_X,SCALE_Y:v.SCALE_Y,TRANSLATE_X:v.TRANSLATE_X,TRANSLATE_Y:v.TRANSLATE_Y}}},{key:"translate",value:function(v,p){this.graphModel.transformModel.translate(v,p)}},{key:"resetTranslate",value:function(){var v=this.graphModel.transformModel,p=v.TRANSLATE_X,m=v.TRANSLATE_Y;this.translate(-p,-m)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(v,p){p===void 0&&(p=v),this.graphModel.fitView(v,p)}},{key:"openEdgeAnimation",value:function(v){this.graphModel.openEdgeAnimation(v)}},{key:"closeEdgeAnimation",value:function(v){this.graphModel.closeEdgeAnimation(v)}},{key:"on",value:function(v,p){this.graphModel.eventCenter.on(v,p)}},{key:"off",value:function(v,p){this.graphModel.eventCenter.off(v,p)}},{key:"once",value:function(v,p){this.graphModel.eventCenter.once(v,p)}},{key:"emit",value:function(v,p){this.graphModel.eventCenter.emit(v,p)}},{key:"initContainer",value:function(v){var p=document.createElement("div");return p.style.position="relative",p.style.width="100%",p.style.height="100%",v.innerHTML="",v.appendChild(p),p}},{key:"installPlugins",value:function(){var v,p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=(v=this.plugins)!==null&&v!==void 0?v:a.extensions;O.forEach(function(k){var D=null,V=null;k[b1]?(D=k.extension,V=k.props):D=k;var ee=D.pluginName||D.name;m.indexOf(ee)===-1&&p.installPlugin(D,V)})}},{key:"installPlugin",value:function(v,p){if(_1(v)==="object"){var m=v.install,O=v.render;return m&&m.call(v,this,a),O&&this.components.push(O.bind(v)),void(this.extension[v.pluginName]=v)}var k=v,D=new k({lf:this,LogicFlow:a,options:this.options.pluginsOptions,props:p});D.render&&this.components.push(D.render.bind(D)),this.extension[k.pluginName]=D}},{key:"updateAttributes",value:function(v,p){this.graphModel.updateAttributes(v,p)}},{key:"createFakerNode",value:function(v){var p=this.graphModel.modelMap.get(v.type);if(p){var m=new p(mm(mm({},v),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(m),m}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(v){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(v)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(v,p){this.viewMap.set(v,p)}},{key:"renderRawData",value:function(v){this.graphModel.graphDataToModel(bi(v)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Ie.j)(Object(Ie.g)(PC,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Ln.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(v=this.adapterIn(v)),this.renderRawData(v)}}],u=[{key:"use",value:function(v,p){var m,O,k=v.pluginName;k||(k=v.name);var D=(m=this.extensions.get(k))===null||m===void 0?void 0:m.extension;D&&D.destroy&&D.destroy(),this.extensions.set(k,(mi(O={},b1,b1),mi(O,"extension",v),mi(O,"props",p),O))}}],l&&IS(i.prototype,l),u&&IS(i,u),a}();function bu(a){return kn(a)}mi(w1,"extensions",new Map),o.default=w1}])})}(ag,ag.exports)),ag.exports}var cn=gU();const Dk=II(cn);var _U=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),bU=(globalThis==null?void 0:globalThis._ids)||new _U;function Uv(){return bU.next()}var jk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){jk(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Uv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),o={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(o),n},t.extendKey="StartEventModel",t})(cn.CircleNodeModel);(function(e){jk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(cn.CircleNode);var Ik=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dg=function(){return Dg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dg.apply(this,arguments)};(function(e){Ik(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Uv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),o={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(o),n},t.extendKey="EndEventModel",t})(cn.CircleNodeModel);(function(e){Ik(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,o=n.getNodeStyle(),r=n.x,s=n.y,c=n.r,f=e.prototype.getShape.call(this);return cn.h("g",{},f,cn.h("circle",Dg(Dg({},o),{cx:r,cy:s,r:c-5})))},t.extendKey="EndEventView",t})(cn.CircleNode);var Lk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Am=function(){return Am=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Am.apply(this,arguments)};(function(e){Lk(t,e);function t(n,o){var r=this;return n.id||(n.id="Gateway_"+Uv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(cn.PolygonNodeModel);(function(e){Lk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,f=n.points,d=n.getNodeStyle();return cn.h("g",{transform:"matrix(1 0 0 1 "+(o-s/2)+" "+(r-c/2)+")"},cn.h("polygon",Am(Am({},d),{x:o,y:r,points:f})),cn.h("path",Am({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},d)))},t.extendKey="ExclusiveGatewayNode",t})(cn.PolygonNode);var $k=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),jg=function(){return jg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jg.apply(this,arguments)};(function(e){$k(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Uv()),r=e.call(this,n,o)||this,r}return t.extendKey="UserTaskModel",t})(cn.RectNodeModel);(function(e){$k(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,f=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},cn.h("path",{fill:f.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,f=n.radius,d=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",jg(jg({},d),{x:o-s/2,y:r-c/2,rx:f,ry:f,width:s,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(cn.RectNode);var Fk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ew=function(){return Ew=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ew.apply(this,arguments)};(function(e){Fk(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Uv()),r=e.call(this,n,o)||this,r}return t.extendKey="ServiceTaskModel",t})(cn.RectNodeModel);(function(e){Fk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,f=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},cn.h("path",{fill:f.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,f=n.radius,d=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",Ew({x:o-s/2,y:r-c/2,rx:f,ry:f,width:s,height:c},d)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(cn.RectNode);var Vk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){Vk(t,e);function t(n,o){var r=this;return n.id||(n.id="Flow_"+Uv()),r=e.call(this,n,o)||this,r}return t.extendKey="SequenceFlowModel",t})(cn.PolylineEdgeModel);(function(e){Vk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(cn.PolylineEdge);var wx={width:40,height:40},Ex={width:40,height:40},Ox={width:40,height:40},Sx={width:100,height:80},xx={width:100,height:80},wU=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),EU=(globalThis==null?void 0:globalThis._ids)||new wU;function Mx(){return EU.next()}function Bk(e){return Object.prototype.toString.call(e)}function OU(e){return"  ".repeat(e)}function Ig(e){var t=e;return Bk(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var o=n;n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Ig(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,o){t[o]=Ig(n)})),t}function SU(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Ig(e)).replace(/"/g,"'")}return t}var nv=`	
`;function yg(e,t,n){var o=OU(n),r="";if(t==="#text")return nv+o+e;if(t==="#cdata-section")return nv+o+"<![CDATA["+e+"]]>";if(t==="#comment")return nv+o+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+SU(e)+'"';if(Array.isArray(e))e.forEach(function(d){r+=yg(d,t,n+1)});else if(Bk(e)==="[object Object]"){var s=Object.keys(e),c="",f="";r+=(n===0?"":nv+o)+"<"+t,s.forEach(function(d){d.charAt(0)==="-"?c+=yg(e[d],d,n+1):f+=yg(e[d],d,n+1)}),r+=c+(f!==""?">"+f+(nv+o)+"</"+t+">":" />")}else r+=nv+o+("<"+t+">"+e.toString()+"</"+t+">");return r}function xU(e){var t="";for(var n in e)t+=yg(e[n],n,0);return t}var ml=function(){};ml.ObjTree=function(){return this};ml.ObjTree.VERSION="0.23";ml.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;ml.ObjTree.prototype.attr_prefix="-";ml.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};ml.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,f=o.onComplete;o.onComplete=function(y){var b;y&&y.responseXML&&y.responseXML.documentElement&&(b=s.parseDOM(y.responseXML.documentElement)),c(b,y),f&&f(y)}}else o.asynchronous=!1;var d;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var _=new HTTP.Request(o);_&&(d=_.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var _=new Ajax.Request(e,o);_&&(d=_.transport)}if(n)return d;if(d&&d.responseXML&&d.responseXML.documentElement)return this.parseDOM(d.responseXML.documentElement)};ml.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var o={};o[e.nodeName]=n,n=o}return n}};ml.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var f=!0;n&&(f=!1);for(var r=0;r<e.childNodes.length&&f;r++){var d=e.childNodes[r].nodeType;d==3||d==4||d==8||(f=!1)}if(f){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};ml.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=o):n==1?e[t]=o:n==2?e[t]=[e[t],o]:e[t][e[t].length]=o};ml.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};ml.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!=this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),f=n.join("");return typeof e>"u"||e==null||(n.length>0?f.match(/\n/)?f="<"+e+c+`>
`+f+"</"+e+`>
`:f="<"+e+c+">"+f+"</"+e+`>
`:f="<"+e+c+` />
`),f};ml.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};ml.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};ml.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var MU=function(e){return new ml.ObjTree().parseXML(e)},AU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ow=function(){return Ow=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ow.apply(this,arguments)},x_=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(f){c={error:f}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},pc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(pc||(pc={}));var Uk=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Ax=["properties","startPoint","endPoint","pointsList"];function Tx(e){var t=e?Ax.concat(e):Ax;return function(n){function o(r){var s={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return o(c)}):(Object.entries(r).forEach(function(c){var f=x_(c,2),d=f[0],_=f[1];typeof _!="object"?d.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(d)?s[d]=_:s["-"+d]=_:t.includes(d)?s["-"+d]=o(_):s[d]=o(_)}),s)}return o(n)}}function Lg(e){var t={};return Object.entries(e).forEach(function(n){var o=x_(n,2),r=o[0],s=o[1];r.indexOf("-")===0?t[r.substring(1)]=Ig(s):typeof s=="string"?t[r]=s:Object.prototype.toString.call(s)==="[object Object]"?t[r]=Lg(s):Array.isArray(s)?t[r]=s.map(function(c){return Lg(c)}):t[r]=s}),t}function TU(e,t,n){var o=new Map;t.nodes.forEach(function(s){var c,f={"-id":s.id};if(!((c=s.text)===null||c===void 0)&&c.value&&(f["-name"]=s.text.value),s.properties){var d=Tx(n)(s.properties);Object.assign(f,d)}o.set(s.id,f),e[s.type]?Array.isArray(e[s.type])?e[s.type].push(f):e[s.type]=[e[s.type],f]:e[s.type]=f});var r=t.edges.map(function(s){var c,f,d=o.get(s.targetNodeId);d["bpmn:incoming"]?Array.isArray(d["bpmn:incoming"])?d["bpmn:incoming"].push(s.id):d["bpmn:incoming"]=[d["bpmn:incoming"],s.id]:d["bpmn:incoming"]=s.id;var _={"-id":s.id,"-sourceRef":s.sourceNodeId,"-targetRef":s.targetNodeId};if(!((c=s.text)===null||c===void 0)&&c.value&&(_["-name"]=(f=s.text)===null||f===void 0?void 0:f.value),s.properties){var y=Tx(n)(s.properties);Object.assign(_,y)}return _});t.edges.forEach(function(s){var c=o.get(s.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(s.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],s.id]:c["bpmn:outgoing"]=s.id}),e[pc.FLOW]=r}function kU(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(f){var d=f.x,_=f.y;return{"-x":d,"-y":_}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,f=n.x,d=n.y,_=Jf.shapeConfigMap.get(n.type);_&&(s=_.width,c=_.height),f-=s/2,d-=c/2;var y={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":f,"-y":d,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(y["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),y})}function NU(e){var t=[],n=[],o=e["bpmn:definitions"];if(o){var r=o["bpmn:process"];Object.keys(r).forEach(function(s){if(s.indexOf("bpmn:")===0){var c=r[s];if(s===pc.FLOW){var f=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=RU(c,f)}else{var d=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(PU(c,d,s))}}})}return{nodes:t,edges:n}}function PU(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var f;Array.isArray(t)?f=t.find(function(_){return _["-bpmnElement"]===c["-id"]}):f=t;var d=kx(f,n,c);o.push(d)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=kx(r,n,e);o.push(s)}return o}function kx(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-name"],c=Jf.shapeConfigMap.get(t);c&&(o+=c.width/2,r+=c.height/2);var f;Object.entries(n).forEach(function(b){var x=x_(b,2),M=x[0],S=x[1];Uk.indexOf(M)===-1&&(f||(f={}),f[M]=S)}),f&&(f=Lg(f));var d;if(s&&(d={x:o,y:r,value:s},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var _=e["bpmndi:BPMNLabel"]["dc:Bounds"];d.x=Number(_["-x"])+Number(_["-width"])/2,d.y=Number(_["-y"])+Number(_["-height"])/2}var y={id:e["-bpmnElement"],type:t,x:o,y:r,properties:f};return d&&(y.text=d),y}function RU(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(Nx(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(Nx(o,e))}return n}function Nx(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(d){s<d.length&&(s=d.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(d){var _=x_(d,2),y=_[0],b=_[1];Uk.indexOf(y)===-1&&(c||(c={}),c[y]=b)}),c&&(c=Lg(c));var f={id:t["-id"],type:pc.FLOW,pointsList:e["di:waypoint"].map(function(d){return{x:Number(d["-x"]),y:Number(d["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(f.text=n),f}var Jf=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c=Ow({},n.processAttributes);TU(c,r,s);var f={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};kU(f,r);var d=n.definitionAttributes;d["bpmn:process"]=c,d["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":f};var _={"bpmn:definitions":d};return _},this.adapterIn=function(r){if(r)return NU(r)},o.adapterIn=function(r){return n.adapterIn(r)},o.adapterOut=function(r,s){return n.adapterOut(r,s)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Mx()},this.definitionAttributes={"-id":"Definitions_"+Mx(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Jf.shapeConfigMap.set(pc.START,{width:wx.width,height:wx.height});Jf.shapeConfigMap.set(pc.END,{width:Ex.width,height:Ex.height});Jf.shapeConfigMap.set(pc.GATEWAY,{width:Ox.width,height:Ox.height});Jf.shapeConfigMap.set(pc.SYSTEM,{width:Sx.width,height:Sx.height});Jf.shapeConfigMap.set(pc.USER,{width:xx.width,height:xx.height});(function(e){AU(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(s){var c=MU(s);return o.adapterIn(c)},o.adapterXmlOut=function(s,c){var f=o.adapterOut(s,c);return xU(f)};var r=n.lf;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o}return t.pluginName="bpmnXmlAdapter",t})(Jf);var CU=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),DU=(globalThis==null?void 0:globalThis._ids)||new CU;function jU(){return DU.next()}cn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),cn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});cn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});cn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var NE,Ci,Gk,Kp,Px,zk,Hk,Wk,PE,Sw,xw,Mw={},Xk=[],IU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,M_=Array.isArray;function Td(e,t){for(var n in t)e[n]=t[n];return e}function RE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Tm(e,t,n){var o,r,s,c={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?NE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return gg(e,c,o,r,null)}function gg(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Gk,__i:-1,__u:0};return r==null&&Ci.vnode!=null&&Ci.vnode(s),s}function CE(e){return e.children}function yv(e,t){this.props=e,this.context=t}function Nv(e,t){if(t==null)return e.__?Nv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Nv(e):null}function qk(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return qk(e)}}function Rx(e){(!e.__d&&(e.__d=!0)&&Kp.push(e)&&!$g.__r++||Px!=Ci.debounceRendering)&&((Px=Ci.debounceRendering)||zk)($g)}function $g(){for(var e,t,n,o,r,s,c,f=1;Kp.length;)Kp.length>f&&Kp.sort(Hk),e=Kp.shift(),f=Kp.length,e.__d&&(n=void 0,r=(o=(t=e).__v).__e,s=[],c=[],t.__P&&((n=Td({},o)).__v=o.__v+1,Ci.vnode&&Ci.vnode(n),Zk(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,s,r??Nv(o),!!(32&o.__u),c),n.__v=o.__v,n.__.__k[n.__i]=n,FU(s,n,c),n.__e!=r&&qk(n)));$g.__r=0}function Yk(e,t,n,o,r,s,c,f,d,_,y){var b,x,M,S,E,w,C=o&&o.__k||Xk,j=t.length;for(d=LU(n,t,C,d,j),b=0;b<j;b++)(M=n.__k[b])!=null&&(x=M.__i==-1?Mw:C[M.__i]||Mw,M.__i=b,w=Zk(e,M,x,r,s,c,f,d,_,y),S=M.__e,M.ref&&x.ref!=M.ref&&(x.ref&&DE(x.ref,null,M),y.push(M.ref,M.__c||S,M)),E==null&&S!=null&&(E=S),4&M.__u||x.__k===M.__k?d=Kk(M,d,e):typeof M.type=="function"&&w!==void 0?d=w:S&&(d=S.nextSibling),M.__u&=-7);return n.__e=E,d}function LU(e,t,n,o,r){var s,c,f,d,_,y=n.length,b=y,x=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(d=s+x,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?gg(null,c,null,null,null):M_(c)?gg(CE,{children:c},null,null,null):c.constructor==null&&c.__b>0?gg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,f=null,(_=c.__i=$U(c,n,d,b))!=-1&&(b--,(f=n[_])&&(f.__u|=2)),f==null||f.__v==null?(_==-1&&(r>y?x--:r<y&&x++),typeof c.type!="function"&&(c.__u|=4)):_!=d&&(_==d-1?x--:_==d+1?x++:(_>d?x--:x++,c.__u|=4))):e.__k[s]=null;if(b)for(s=0;s<y;s++)(f=n[s])!=null&&(2&f.__u)==0&&(f.__e==o&&(o=Nv(f)),Qk(f,f));return o}function Kk(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=Kk(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Nv(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function $U(e,t,n,o){var r,s,c=e.key,f=e.type,d=t[n];if(d===null&&e.key==null||d&&c==d.key&&f==d.type&&(2&d.__u)==0)return n;if(o>(d!=null&&(2&d.__u)==0?1:0))for(r=n-1,s=n+1;r>=0||s<t.length;){if(r>=0){if((d=t[r])&&(2&d.__u)==0&&c==d.key&&f==d.type)return r;r--}if(s<t.length){if((d=t[s])&&(2&d.__u)==0&&c==d.key&&f==d.type)return s;s++}}return-1}function Cx(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||IU.test(t)?n:n+"px"}function lg(e,t,n,o,r){var s,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Cx(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||Cx(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(Wk,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=PE,e.addEventListener(t,s?xw:Sw,s)):e.removeEventListener(t,s?xw:Sw,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Dx(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=PE++;else if(t.t<n.u)return;return n(Ci.event?Ci.event(t):t)}}}function Zk(e,t,n,o,r,s,c,f,d,_){var y,b,x,M,S,E,w,C,j,B,$,U,I,F,Z,G,W,K=t.type;if(t.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),s=[f=t.__e=n.__e]),(y=Ci.__b)&&y(t);e:if(typeof K=="function")try{if(C=t.props,j="prototype"in K&&K.prototype.render,B=(y=K.contextType)&&o[y.__c],$=y?B?B.props.value:y.__:o,n.__c?w=(b=t.__c=n.__c).__=b.__E:(j?t.__c=b=new K(C,$):(t.__c=b=new yv(C,$),b.constructor=K,b.render=BU),B&&B.sub(b),b.props=C,b.state||(b.state={}),b.context=$,b.__n=o,x=b.__d=!0,b.__h=[],b._sb=[]),j&&b.__s==null&&(b.__s=b.state),j&&K.getDerivedStateFromProps!=null&&(b.__s==b.state&&(b.__s=Td({},b.__s)),Td(b.__s,K.getDerivedStateFromProps(C,b.__s))),M=b.props,S=b.state,b.__v=t,x)j&&K.getDerivedStateFromProps==null&&b.componentWillMount!=null&&b.componentWillMount(),j&&b.componentDidMount!=null&&b.__h.push(b.componentDidMount);else{if(j&&K.getDerivedStateFromProps==null&&C!==M&&b.componentWillReceiveProps!=null&&b.componentWillReceiveProps(C,$),!b.__e&&b.shouldComponentUpdate!=null&&b.shouldComponentUpdate(C,b.__s,$)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(b.props=C,b.state=b.__s,b.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(J){J&&(J.__=t)}),U=0;U<b._sb.length;U++)b.__h.push(b._sb[U]);b._sb=[],b.__h.length&&c.push(b);break e}b.componentWillUpdate!=null&&b.componentWillUpdate(C,b.__s,$),j&&b.componentDidUpdate!=null&&b.__h.push(function(){b.componentDidUpdate(M,S,E)})}if(b.context=$,b.props=C,b.__P=e,b.__e=!1,I=Ci.__r,F=0,j){for(b.state=b.__s,b.__d=!1,I&&I(t),y=b.render(b.props,b.state,b.context),Z=0;Z<b._sb.length;Z++)b.__h.push(b._sb[Z]);b._sb=[]}else do b.__d=!1,I&&I(t),y=b.render(b.props,b.state,b.context),b.state=b.__s;while(b.__d&&++F<25);b.state=b.__s,b.getChildContext!=null&&(o=Td(Td({},o),b.getChildContext())),j&&!x&&b.getSnapshotBeforeUpdate!=null&&(E=b.getSnapshotBeforeUpdate(M,S)),G=y,y!=null&&y.type===CE&&y.key==null&&(G=Jk(y.props.children)),f=Yk(e,M_(G)?G:[G],t,n,o,r,s,c,f,d,_),b.base=t.__e,t.__u&=-161,b.__h.length&&c.push(b),w&&(b.__E=b.__=null)}catch(J){if(t.__v=null,d||s!=null)if(J.then){for(t.__u|=d?160:128;f&&f.nodeType==8&&f.nextSibling;)f=f.nextSibling;s[s.indexOf(f)]=null,t.__e=f}else for(W=s.length;W--;)RE(s[W]);else t.__e=n.__e,t.__k=n.__k;Ci.__e(J,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):f=t.__e=VU(n.__e,t,n,o,r,s,c,d,_);return(y=Ci.diffed)&&y(t),128&t.__u?void 0:f}function FU(e,t,n){for(var o=0;o<n.length;o++)DE(n[o],n[++o],n[++o]);Ci.__c&&Ci.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){Ci.__e(s,r.__v)}})}function Jk(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:M_(e)?e.map(Jk):Td({},e)}function VU(e,t,n,o,r,s,c,f,d){var _,y,b,x,M,S,E,w=n.props,C=t.props,j=t.type;if(j=="svg"?r="http://www.w3.org/2000/svg":j=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(_=0;_<s.length;_++)if((M=s[_])&&"setAttribute"in M==!!j&&(j?M.localName==j:M.nodeType==3)){e=M,s[_]=null;break}}if(e==null){if(j==null)return document.createTextNode(C);e=document.createElementNS(r,j,C.is&&C),f&&(Ci.__m&&Ci.__m(t,s),f=!1),s=null}if(j==null)w===C||f&&e.data==C||(e.data=C);else{if(s=s&&NE.call(e.childNodes),w=n.props||Mw,!f&&s!=null)for(w={},_=0;_<e.attributes.length;_++)w[(M=e.attributes[_]).name]=M.value;for(_ in w)if(M=w[_],_!="children"){if(_=="dangerouslySetInnerHTML")b=M;else if(!(_ in C)){if(_=="value"&&"defaultValue"in C||_=="checked"&&"defaultChecked"in C)continue;lg(e,_,null,M,r)}}for(_ in C)M=C[_],_=="children"?x=M:_=="dangerouslySetInnerHTML"?y=M:_=="value"?S=M:_=="checked"?E=M:f&&typeof M!="function"||w[_]===M||lg(e,_,M,w[_],r);if(y)f||b&&(y.__html==b.__html||y.__html==e.innerHTML)||(e.innerHTML=y.__html),t.__k=[];else if(b&&(e.innerHTML=""),Yk(t.type=="template"?e.content:e,M_(x)?x:[x],t,n,o,j=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&Nv(n,0),f,d),s!=null)for(_=s.length;_--;)RE(s[_]);f||(_="value",j=="progress"&&S==null?e.removeAttribute("value"):S!=null&&(S!==e[_]||j=="progress"&&!S||j=="option"&&S!=w[_])&&lg(e,_,S,w[_],r),_="checked",E!=null&&E!=e[_]&&lg(e,_,E,w[_],r))}return e}function DE(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Ci.__e(r,n)}}function Qk(e,t,n){var o,r;if(Ci.unmount&&Ci.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||DE(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){Ci.__e(s,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Qk(o[r],t,n||typeof e.type!="function");n||RE(e.__e),e.__c=e.__=e.__e=void 0}function BU(e,t,n){return this.constructor(e,n)}NE=Xk.slice,Ci={__e:function(e,t,n,o){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),c=r.__d),c)return r.__E=r}catch(f){e=f}throw e}},Gk=0,yv.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Td({},this.state),typeof e=="function"&&(e=e(Td({},n),this.props)),e&&Td(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Rx(this))},yv.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Rx(this))},yv.prototype.render=CE,Kp=[],zk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Hk=function(e,t){return e.__v.__b-t.__v.__b},$g.__r=0,Wk=/(PointerCapture)$|Capture$/i,PE=0,Sw=Dx(!1),xw=Dx(!0);var km=function(){return km=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},km.apply(this,arguments)};function jE(e){var t=e.x,n=e.y,o=e.width,r=e.height,s=e.radius,c=e.className,f=t-o/2,d=n-r/2,_=km(km({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:f,y:d});return cn.h("rect",km({},_))}jE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var pv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(pv||(pv={}));var UU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zp=function(){return Zp=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Zp.apply(this,arguments)},GU=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(f){c={error:f}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},zU=cn.LogicFlowUtil.StepDrag,HU=function(e){UU(t,e);function t(n){var o=e.call(this)||this;return o.updatePosition=function(r){var s=r.deltaX,c=r.deltaY,f=o.nodeModel,d=f.x,_=f.y;o.nodeModel.x=d+s/2,o.nodeModel.y=_+c/2,o.nodeModel.moveText(s/2,c/2)},o.getResize=function(r){var s=r.index,c=r.deltaX,f=r.deltaY,d=r.width,_=r.height,y=r.PCTResizeInfo,b=r.pct,x=b===void 0?1:b,M=r.freezeWidth,S=M===void 0?!1:M,E=r.freezeHeight,w=E===void 0?!1:E,C={width:d,height:_,deltaX:c,deltaY:f};if(y){var j=4,B=0,$=0;switch(s){case 0:$=(c*-1-f)/j;break;case 1:$=(c-f)/j;break;case 2:$=(c+f)/j;break;case 3:$=(c*-1+f)/j;break}$!==0&&(B=Math.round($/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+B,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.hightPCT=Math.max(Math.min(y.ResizePCT.hightPCT+B,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var U=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),I=Math.round(y.ResizePCT.hightPCT*y.ResizeBasis.basisHeight/100);switch(s){case 0:c=d-U,f=_-I;break;case 1:c=U-d,f=_-I;break;case 2:c=U-d,f=I-_;break;case 3:c=d-U,f=I-_;break}return C.width=U,C.height=I,C.deltaX=c/x,C.deltaY=f/x,C}switch(s){case 0:C.width=S?d:d-c*x,C.height=w?_:_-f*x;break;case 1:C.width=S?d:d+c*x,C.height=w?_:_-f*x;break;case 2:C.width=S?d:d+c*x,C.height=w?_:_+f*x;break;case 3:C.width=S?d:d-c*x,C.height=w?_:_+f*x;break}return C},o.updateEdgePointByAnchors=function(){var r=o.nodeModel,s=r.id,c=r.anchors,f=o.getNodeEdges(s);f.sourceEdges.forEach(function(d){var _=c.find(function(y){return y.id===d.sourceAnchorId});d.updateStartPoint({x:_.x,y:_.y})}),f.targetEdges.forEach(function(d){var _=c.find(function(y){return y.id===d.targetAnchorId});d.updateEndPoint({x:_.x,y:_.y})})},o.updateRect=function(r){var s=r.deltaX,c=r.deltaY,f=o.nodeModel,d=f.id,_=f.x,y=f.y,b=f.width,x=f.height,M=f.radius,S=f.PCTResizeInfo,E=o.nodeModel,w=E.minWidth,C=E.minHeight,j=E.maxWidth,B=E.maxHeight,$=o.index,U=w===j,I=C===B,F=o.getResize({index:$,deltaX:s,deltaY:c,width:b,height:x,PCTResizeInfo:S,pct:1,freezeWidth:U,freezeHeight:I});if(F.width<w||F.width>j||F.height<C||F.height>B){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:U?0:F.deltaX,deltaY:I?0:F.deltaY}),o.nodeModel.width=F.width,o.nodeModel.height=F.height,o.nodeModel.setProperties({nodeSize:{width:F.width,height:F.height}}),o.getNodeEdges(d);var Z={x:_,y,width:b,height:x,radius:M},G={x:o.nodeModel.x,y:o.nodeModel.y,width:o.nodeModel.width,height:o.nodeModel.height,radius:M};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:Z,afterNode:G})},o.updateEllipse=function(r){var s=r.deltaX,c=r.deltaY,f=o.nodeModel,d=f.id,_=f.rx,y=f.ry,b=f.x,x=f.y,M=f.PCTResizeInfo,S=o.index,E=o.nodeModel,w=E.minWidth,C=E.minHeight,j=E.maxWidth,B=E.maxHeight,$=w===j,U=C===B,I=_,F=y,Z=o.getResize({index:S,deltaX:s,deltaY:c,width:I,height:F,PCTResizeInfo:M,pct:1/2,freezeWidth:$,freezeHeight:U});if(Z.width<w/2||Z.width>j/2||Z.height<C/2||Z.height>B/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:$?0:Z.deltaX,deltaY:U?0:Z.deltaY}),o.nodeModel.rx=Z.width,o.nodeModel.ry=Z.height,o.nodeModel.setProperties({nodeSize:{rx:Z.width,ry:Z.height}}),o.getNodeEdges(d);var G={x:b,y:x},W={rx:Z.width,ry:Z.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:Zp(Zp({},G),{rx:_,ry:y}),afterNode:W})},o.updateDiamond=function(r){var s=r.deltaX,c=r.deltaY,f=o.nodeModel;f.id;var d=f.rx,_=f.ry,y=f.x,b=f.y,x=f.PCTResizeInfo,M=o.index,S=o.nodeModel,E=S.minWidth,w=S.minHeight,C=S.maxWidth,j=S.maxHeight,B=E===C,$=w===j,U=d,I=_,F=o.getResize({index:M,deltaX:s,deltaY:c,width:U,height:I,PCTResizeInfo:x,pct:1/2,freezeWidth:B,freezeHeight:$});if(F.width<E/2||F.width>C/2||F.height<w/2||F.height>j/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:B?0:F.deltaX,deltaY:$?0:F.deltaY}),o.nodeModel.rx=F.width,o.nodeModel.ry=F.height,o.nodeModel.setProperties({nodeSize:{rx:F.width,ry:F.height}});var Z={x:y,y:b,rx:d,ry:_},G={rx:F.width,ry:F.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:Z,afterNode:G})},o.eventEmit=function(r){var s=r.beforeNode,c=r.afterNode,f=o.nodeModel,d=f.id,_=f.modelType,y=f.type,b=Zp({id:d,modelType:_,type:y},s),x=Zp({id:d,modelType:_,type:y},c);o.graphModel.eventCenter.emit("node:resize",{oldNodeSize:b,newNodeSize:x})},o.onDragging=function(r){var s,c=r.deltaX,f=r.deltaY,d=o.graphModel.transformModel,_=o.nodeModel.modelType;s=GU(d.fixDeltaXY(c,f),2),c=s[0],f=s[1],_===pv.RECT_NODE||_===pv.HTML_NODE?o.updateRect({deltaX:c,deltaY:f}):_===pv.ELLIPSE_NODE?o.updateEllipse({deltaX:c,deltaY:f}):_===pv.DIAMOND_NODE&&o.updateDiamond({deltaX:c,deltaY:f})},o.onDragEnd=function(){var r=o.graphModel.gridSize,s=r===void 0?1:r,c=s*Math.round(o.nodeModel.x/s),f=s*Math.round(o.nodeModel.y/s);o.nodeModel.moveTo(c,f),o.updateEdgePointByAnchors()},o.index=n.index,o.nodeModel=n.model,o.graphModel=n.graphModel,o.state={},o.dragHandler=new zU({onDragging:o.onDragging,onDragEnd:o.onDragEnd,step:1}),o}return t.prototype.getNodeEdges=function(n){for(var o=this.graphModel,r=o.edges,s=[],c=[],f=0;f<r.length;f++){var d=r[f];d.sourceNodeId===n?s.push(d):r[f].targetNodeId===n&&c.push(d)}return{sourceEdges:s,targetEdges:c}},t.prototype.render=function(){var n=this.props,o=n.x,r=n.y,s=n.index,c=n.model,f=c.getControlPointStyle();return Tm("g",{className:"lf-resize-control-"+s},Tm(jE,Zp({className:"lf-node-control"},{x:o,y:r},f,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(yv),WU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fg=function(){return Fg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fg.apply(this,arguments)},A_=function(e){WU(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,o=n.model,r=n.graphModel,s=o.x,c=o.y,f=o.width,d=o.height,_={minX:s-f/2,minY:c-d/2,maxX:s+f/2,maxY:c+d/2},y=_.minX,b=_.minY,x=_.maxX,M=_.maxY,S=[{x:y,y:b},{x,y:b},{x,y:M},{x:y,y:M}];return S.map(function(E,w){return Tm(HU,Fg({index:w},E,{model:o,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,f=n.getResizeOutlineStyle();return Tm(jE,Fg({fill:"none"},f,{x:o,y:r,width:s,height:c}))},t.prototype.render=function(){return Tm("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(yv),eN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),XU=function(e){eN(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,o){console.log(n,o)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.RectNodeModel),qU=function(e){eN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(A_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.RectNode),tN={view:qU,model:XU},nN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){nN(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.EllipseNodeModel);(function(e){nN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(A_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o.isSelected&&!r?this.getControlGroup():"")},t})(cn.EllipseNode);var Aw=function(){return Aw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Aw.apply(this,arguments)};function YU(e){var t=e.fillOpacity,n=t===void 0?1:t,o=e.strokeWidth,r=o===void 0?1:o,s=e.strokeOpacity,c=s===void 0?1:s,f=e.fill,d=f===void 0?"transparent":f,_=e.stroke,y=_===void 0?"#000":_,b=e.points,x=e.className,M=x===void 0?"lf-basic-shape":x,S={fill:d,fillOpacity:n,strokeWidth:r,stroke:y,strokeOpacity:c,points:"",className:M};return S.points=b.map(function(E){return E.join(",")}).join(" "),cn.h("polygon",Aw({},S))}var rN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tw=function(){return Tw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Tw.apply(this,arguments)};(function(e){rN(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.DiamondNodeModel);(function(e){rN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(A_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,o=n.points,r=n.getNodeStyle();return cn.h("g",null,cn.h(YU,Tw({},r,{points:o})))},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t})(cn.DiamondNode);var oN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),KU=function(e){oN(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.HtmlNodeModel),ZU=function(e){oN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(A_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.HtmlNode),iN={view:ZU,model:KU},aN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vg=function(){return Vg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Vg.apply(this,arguments)},JU=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(f){c={error:f}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},QU=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(JU(arguments[t]));return e},jx=500,Ix=300,eG=-1e4;(function(e){aN(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=jx,n.unfoldedHight=Ix,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var o=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=jx,this.height=Ix,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=eG,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){o.isFolded&&o.foldGroup(o.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var o=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(s){var c=o.graphModel.getElement(s),f=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var d=o.childrenLastFoldStatus[s];d!==void 0&&d!==c.isFolded&&c.foldGroup(d)}o.childrenLastFoldStatus[s]=f,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var o=e.prototype.getAnchorStyle.call(this,n);return o.stroke="transparent",o.fill="transparent",o.hover.fill="transparent",o.hover.stroke="transparent",o},t.prototype.foldEdge=function(n,o){var r=this;o.forEach(function(s,c){var f=s.id,d=s.sourceNodeId,_=s.targetNodeId,y=s.startPoint,b=s.endPoint,x=s.type,M=s.text,S=s.getProperties(),E={id:f+"__"+c,sourceNodeId:d,targetNodeId:_,startPoint:y,endPoint:b,type:x,properties:S,text:M==null?void 0:M.value};s.virtual&&r.graphModel.deleteEdgeById(s.id);var w=r.graphModel.group.getNodeGroup(_);w||(w=r.graphModel.getNodeModelById(_));var C=r.graphModel.group.getNodeGroup(d);C||(C=r.graphModel.getNodeModelById(d)),n&&s.visible!==!1&&(r.children.has(d)||r.id===d?(E.startPoint=void 0,E.sourceNodeId=r.id):(E.endPoint=void 0,E.targetNodeId=r.id),(w.id!==r.id||C.id!==r.id)&&r.createVirtualEdge(E),s.visible=!1),!n&&s.visible===!1&&(w&&w.isGroup&&w.isFolded?(E.targetNodeId=w.id,E.endPoint=void 0,r.createVirtualEdge(E)):C&&C.isGroup&&C.isFolded?(E.sourceNodeId=C.id,E.startPoint=void 0,r.createVirtualEdge(E)):s.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var o=this.graphModel.addEdge(n);o.virtual=!0,o.text.editable=!1,o.isFoldedEdge=!0},t.prototype.isInRange=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return o>=this.x-this.width/2&&s<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return{x:o>=this.x-this.width/2&&s<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,o=e.prototype.getData.call(this);o.children=[],this.children.forEach(function(s){var c=n.graphModel.getNodeModelById(s);c&&!c.virtual&&o.children.push(s)});var r=o.properties;return delete r.groupAddable,delete r.isFolded,o},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=QU(this.children),n.isGroup=!0;var o=n.properties;return delete o.groupAddable,o.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(tN.model);(function(e){aN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,o=n.resizable,r=n.properties;return o&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,o=n.width,r=n.height,s=n.x,c=n.y,f=n.radius,d=n.properties;if(!d.groupAddable)return null;var _=this.props.model.getNodeStyle().strokeWidth,y=this.props.model.getAddableOutlineStyle(),b=o+_+8,x=r+_+8;return cn.h("rect",Vg(Vg({},y),{width:b,height:x,x:s-b/2,y:c-x/2,rx:f,ry:f}))},t.prototype.getFoldIcon=function(){var n=this.props.model,o=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var s=cn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" M"+(o+7)+","+(r+2)+" "+(o+7)+","+(r+10):"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" "});return cn.h("g",{},[cn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),s])},t.prototype.getResizeShape=function(){return cn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(tN.view);var Lx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Nm=function(){return Nm=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Nm.apply(this,arguments)};function tG(e){var t=function(o){Lx(r,o);function r(s,c){var f=this;s.id||(s.id="Flow_"+jU());var d=Nm(Nm(Nm({},{}),s.properties),{isDefaultFlow:!1});return s.properties=d,f=o.call(this,s,c)||this,f}return r.extendKey="SequenceFlowModel",r}(cn.PolylineEdgeModel),n=function(o){Lx(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var s=this.props.model,c=s.properties.isDefaultFlow;return c?cn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):cn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(cn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}tG();var $x={width:40,height:40},Fx={width:40,height:40},Vx={width:100,height:80},Bg={width:100,height:80},Bx={width:100,height:80},Ux={width:100,height:80},Gx={width:100,height:80},zx={width:100,height:80},Hx={width:100,height:80},Wx={width:100,height:80},yl=function(){};yl.ObjTree=function(){return this};yl.ObjTree.VERSION="0.23";yl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;yl.ObjTree.prototype.attr_prefix="-";yl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};yl.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,f=o.onComplete;o.onComplete=function(y){var b;y&&y.responseXML&&y.responseXML.documentElement&&(b=s.parseDOM(y.responseXML.documentElement)),c(b,y),f&&f(y)}}else o.asynchronous=!1;var d;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var _=new HTTP.Request(o);_&&(d=_.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var _=new Ajax.Request(e,o);_&&(d=_.transport)}if(n)return d;if(d&&d.responseXML&&d.responseXML.documentElement)return this.parseDOM(d.responseXML.documentElement)};yl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var o={};o[e.nodeName]=n,n=o}return n}};yl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var f=!0;n&&(f=!1);for(var r=0;r<e.childNodes.length&&f;r++){var d=e.childNodes[r].nodeType;d===3||d===4||d===8||(f=!1)}if(f){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};yl.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=o):n===1?e[t]=o:n===2?e[t]=[e[t],o]:e[t][e[t].length]=o};yl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};yl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!==this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor===Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),f=n.join("");return typeof e>"u"||e==null||(n.length>0?f.match(/\n/)?f="<"+e+c+`>
`+f+"</"+e+`>
`:f="<"+e+c+">"+f+"</"+e+`>
`:f="<"+e+c+` />
`),f};yl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};yl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};yl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var nG=function(e){return new yl.ObjTree().parseXML(e)};function lN(e){return Object.prototype.toString.call(e)}function Xx(e){return"  ".repeat(e)}function Ug(e){return lN(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var o=n;return n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Ug(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Ug(t)}):e}function rG(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Ug(e)).replace(/"/g,"'")}return t}var qx=`	
`;function _g(e,t,n){var o=Xx(n),r="",s=qx+o;if(t==="-json")return"";if(t==="#text")return s+e;if(t==="#cdata-section")return s+"<![CDATA["+e+"]]>";if(t==="#comment")return s+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+rG(e)+'"';if(Array.isArray(e))r+=e.map(function(_){return _g(_,t,n+1)}).join("");else if(lN(e)==="[object Object]"){var c=Object.keys(e),f="",d=e["-json"]?qx+Xx(n+1)+e["-json"]:"";r+=(n===0?"":s)+"<"+t,c.forEach(function(_){_.charAt(0)==="-"?f+=_g(e[_],_,n+1):d+=_g(e[_],_,n+1)}),r+=f+(d!==""?">"+d+s+"</"+t+">":" />")}else r+=s+"<"+t+">"+e.toString()+"</"+t+">";return r}function oG(e){var t="";for(var n in e)t+=_g(e[n],n,0);return t}var iG=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),kw=function(){return kw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},kw.apply(this,arguments)},Yx=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},IE=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gv=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(f){c={error:f}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},gv=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Gv(arguments[t]));return e},hl;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(hl||(hl={}));var sN=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],aG=["properties","startPoint","endPoint","pointsList"],Gg={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},uN=function(e,t){var n=Object.keys(t||{});return n.forEach(function(o){if(e[o]){var r=t[o],s=r.in,c=r.out;s&&(e[o].in=s),c&&(e[o].out=c)}else e[o]=t[o]}),e},js={"bpmn:startEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=js[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=js[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=js[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=js[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,o=t.condition;return o?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+o+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+o+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,o=t.timerValue,r=t.definitionId,s=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+o+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&o?">"+s()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,o,r,s,c=e,f=t["-id"],d="",_="";try{for(var y=IE(Object.keys(t)),b=y.next();!b.done;b=y.next()){var x=b.value;x.includes("bpmn:")&&(r=Gv(x.split(":"),2),d=r[1],_=(s=t[x])===null||s===void 0?void 0:s["#text"])}}catch(M){n={error:M}}finally{try{b&&!b.done&&(o=y.return)&&o.call(y)}finally{if(n)throw n.error}}return{"-definitionId":f,"-definitionType":c,"-timerType":d,"-timerValue":_}}},"bpmn:conditionExpression":{in:function(e,t){var n,o="",r="";return t["#cdata-section"]?(r="cdata",o=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",o=t["#text"]),{"-condition":o,"-expressionType":r}}}};function lG(e){var t=e??{},n=t.retainedAttrsFields,o=t.excludeFields,r=t.transformer,s=new Set(gv(aG,n||[])),c={in:new Set(gv(Gg.in,(o==null?void 0:o.in)||[])),out:new Set(gv(Gg.out,(o==null?void 0:o.out)||[]))};return js=uN(js,r),function(f){var d=f.nodes,_=f.edges;function y(b,x){var M,S,E;if((b==null?void 0:b.flag)!==1){var w;if((w=js[b.type])&&w.out){var C=w.out(b),j=Object.keys(C);j.length>0&&j.forEach(function(W){b[W]=C[W]})}b!=null&&b.children&&(b.children=b.children.map(function(W){var K=d.find(function(J){return J.id===W})||_.find(function(J){return J.id===W});return K||{}}));var B={};if(typeof b=="string")return b;if(Array.isArray(b))return b.map(function(W){return y(W,"")}).filter(function(W){return W!=null});try{for(var $=IE(Object.entries(b)),U=$.next();!U.done;U=$.next()){var I=Gv(U.value,2),F=I[0],Z=I[1];if(((E=Z)===null||E===void 0?void 0:E.flag)===1)return;var G=[x,F].filter(function(W){return W}).join(".");c.out.has(G)||(typeof Z!="object"?F.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(F)?B[F]=Z:B["-"+F]=Z:s.has(G)?B["-"+F]=y(Z,G):B[F]=y(Z,G))}}catch(W){M={error:W}}finally{try{U&&!U.done&&(S=$.return)&&S.call($)}finally{if(M)throw M.error}}return B}}return y(f,"")}}function zg(e){var t,n,o={};try{for(var r=IE(Object.entries(e)),s=r.next();!s.done;s=r.next()){var c=Gv(s.value,2),f=c[0],d=c[1];f.indexOf("-")===0?o[f.substring(1)]=Ug(d):typeof d=="string"?o[f]=d:Object.prototype.toString.call(d)==="[object Object]"?o[f]=zg(d):Array.isArray(d)?o[f]=d.map(function(_){return zg(_)}):o[f]=d}}catch(_){t={error:_}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o}function sG(e,t,n){var o,r=new Map,s=lG(n)(t);s.nodes.forEach(function(f){var d=f["-id"],_=f["-type"],y=f.text,b=f.children,x=Yx(f,["-id","-type","text","children"]),M={"-id":d};y!=null&&y["-value"]&&(M["-name"]=y["-value"]),x["-json"]&&(M["-json"]=x["-json"]),x["-properties"]&&Object.assign(M,x["-properties"]),b&&(M.children=b),e[_]||(e[_]=[]),e[_].push(M),r.set(d,M)});var c=s.edges.map(function(f){var d=f["-id"];f["-type"];var _=f["-sourceNodeId"],y=f["-targetNodeId"],b=f.text,x=Yx(f,["-id","-type","-sourceNodeId","-targetNodeId","text"]),M=r.get(y);M["bpmn:incoming"]||(M["bpmn:incoming"]=[]),M["bpmn:incoming"].push(d);var S={"-id":d,"-sourceRef":_,"-targetRef":y};return b!=null&&b["-value"]&&(S["-name"]=b["-value"]),x["-json"]&&(S["-json"]=x["-json"]),x["-properties"]&&Object.assign(S,x["-properties"]),S});return t.edges.forEach(function(f){var d=f.sourceNodeId,_=f.id,y=r.get(d);y["bpmn:outgoing"]||(y["bpmn:outgoing"]=[]),y["bpmn:outgoing"].push(_)}),(o=e["bpmn:subProcess"])===null||o===void 0||o.forEach(function(f){var d={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},_=[];f.children.forEach(function(E){var w,C=r.get(E["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(B){C[B]&&C[B].forEach(function($){d[B].add($)})});var j=(w=e[E["-type"]])===null||w===void 0?void 0:w.findIndex(function(B){return B["-id"]===E["-id"]});j>=0&&e[E["-type"]].splice(j,1),r.delete(E["-id"]),f[E["-type"]]||(f[E["-type"]]=[]),f[E["-type"]].push(C)});var y=d["bpmn:incoming"],b=d["bpmn:outgoing"];b.forEach(function(E){y.has(E)&&_.push(E)});for(var x=function(E){var w=c.findIndex(function(C){return C["-id"]===_[E]});w>=0?(f["bpmn:sequenceFlow"]||(f["bpmn:sequenceFlow"]=[]),f["bpmn:sequenceFlow"].push(c[w]),c.splice(w,1)):E++,M=E},M,S=0;S<_.length;)x(S),S=M;delete f.children}),e[hl.FLOW]=c,e}function uG(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(f){var d=f.x,_=f.y;return{"-x":d,"-y":_}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,f=n.x,d=n.y,_=Il.shapeConfigMap.get(n.type);_&&(s=_.width,c=_.height),f-=s/2,d-=c/2;var y={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":f,"-y":d,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(y["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),y})}var cG=["bpmn:incoming","bpmn:outgoing"];function dG(e,t){var n=[],o=[],r=new Map,s=t??{},c=s.transformer,f=s.excludeFields,d={in:new Set(gv(Gg.in,(f==null?void 0:f.in)||[])),out:new Set(gv(Gg.out,(f==null?void 0:f.out)||[]))};js=uN(js,c);var _=e["bpmn:definitions"];if(_){var y=_["bpmn:process"];(function(x,M){M.forEach(function(S){try{Object.keys(x).forEach(function(E){try{S(E)}catch(w){console.error(w)}})}catch(E){console.error(E)}})})(y,[function(x){function M(E){E["-children"]||(E["-children"]=[]),Object.keys(E).forEach(function(w){var C;w.indexOf("bpmn:")===0&&!cG.includes(w)&&(y[w]||(y[w]=[]),!Array.isArray(y[w])&&(y[w]=[y[w]]),Array.isArray(E[w])?(C=y[w]).push.apply(C,gv(E[w])):y[w].push(E[w]),Array.isArray(E[w])?E[w].forEach(function(j){!w.includes("Flow")&&E["-children"].push(j["-id"])}):!w.includes("Flow")&&E["-children"].push(E[w]["-id"]),delete E[w])})}if(x==="bpmn:subProcess"){var S=y[x];Array.isArray(S)?S.forEach(function(E){x==="bpmn:subProcess"&&M(E)}):M(S)}},function(x){var M=function(E){Object.keys(E).forEach(function(w){var C,j;if(w.includes("bpmn:")){var B={};js[w]&&js[w].in?(B=(j=(C=js[w]).in)===null||j===void 0?void 0:j.call(C,w,de.cloneDeep(E[w])),delete E[w]):S(E[w]);var $=void 0;($=Reflect.ownKeys(B)).length>0&&$.forEach(function(U){Reflect.set(E,U,B[U])})}})};function S(E){r.set(E["-id"],E),Array.isArray(E)?E.forEach(function(w){S(w)}):typeof E=="object"&&M(E)}S(y[x])},function(x){if(x.indexOf("bpmn:")===0){var M=y[x];if(x==="bpmn:sequenceFlow"){var S=_["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=pG(M,S)}else{var E=_["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(x==="bpmn:boundaryEvent"){var w=y[x],C=function(j){var B=j["-attachedToRef"],$=r.get(B);$["-boundaryEvents"]||($["-boundaryEvents"]=[]),$["-boundaryEvents"].push(j["-id"])};Array.isArray(w)?w.forEach(function(j){C(j)}):C(w)}n=n.concat(fG(M,E,x))}}}])}var b=function(x,M,S){Object.keys(x).forEach(function(E){var w=S?S+"."+E:E;M.has(w)?delete x[E]:typeof x[E]=="object"&&b(x[E],M,w)})};return n.forEach(function(x){var M,S;if(!((M=t==null?void 0:t.mapping)===null||M===void 0)&&M.in){var E=(S=t==null?void 0:t.mapping)===null||S===void 0?void 0:S.in,w=x.type;E[w]&&(x.type=E[w])}b(x,d.in,"")}),o.forEach(function(x){var M,S;if(!((M=t==null?void 0:t.mapping)===null||M===void 0)&&M.in){var E=(S=t==null?void 0:t.mapping)===null||S===void 0?void 0:S.in,w=x.type;E[w]&&(x.type=E[w])}b(x,d.in,"")}),{nodes:n,edges:o}}function fG(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var f;Array.isArray(t)?f=t.find(function(_){return _["-bpmnElement"]===c["-id"]}):f=t;var d=Kx(f,n,c);o.push(d)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=Kx(r,n,e);o.push(s)}return o}function Kx(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-children"],c=n["-name"],f=Il.shapeConfigMap.get(t);f&&(o+=f.width/2,r+=f.height/2);var d={};Object.entries(n).forEach(function(x){var M=Gv(x,2),S=M[0],E=M[1];sN.includes(S)||(d[S]=E)}),d=zg(d);var _;if(c&&(_={x:o,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var y=e["bpmndi:BPMNLabel"]["dc:Bounds"];_.x=Number(y["-x"])+Number(y["-width"])/2,_.y=Number(y["-y"])+Number(y["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:o,y:r,properties:d};return s&&(b.children=s),_&&(b.text=_),b}function pG(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(Zx(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(Zx(o,e))}return n}function Zx(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(_){s<_.length&&(s=_.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(_){var y=Gv(_,2),b=y[0],x=y[1];sN.includes(b)||(c[b]=x)}),c=zg(c);var f=e["di:waypoint"].map(function(_){return{x:Number(_["-x"]),y:Number(_["-y"])}}),d={id:t["-id"],type:hl.FLOW,pointsList:f,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(d.text=n),d}var Il=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c,f,d=kw({},n.processAttributes);sG(d,r,s);var _={"-id":"BPMNPlane_1","-bpmnElement":d["-id"]};uG(_,r);var y=n.definitionAttributes;y["bpmn:process"]=d,y["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":_};var b={"bpmn:definitions":y};if(!((c=s==null?void 0:s.mapping)===null||c===void 0)&&c.out){var x=(f=s==null?void 0:s.mapping)===null||f===void 0?void 0:f.out,M=function(S){Array.isArray(S)&&S.forEach(function(E){return M(E)}),typeof S=="object"&&Object.keys(S).forEach(function(E){var w;(w=x[E])?(S[w]=de.cloneDeep(S[E]),delete S[E],M(S[w])):M(S[E])})};M(b)}return b},this.adapterIn=function(r,s){if(r)return dG(r,s)},o.adapterIn=this.adapterIn,o.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Il.shapeConfigMap.set(hl.START,{width:$x.width,height:$x.height});Il.shapeConfigMap.set(hl.END,{width:Fx.width,height:Fx.height});Il.shapeConfigMap.set(hl.INTERMEDIATE_CATCH,{width:Bg.width,height:Bg.height});Il.shapeConfigMap.set(hl.INTERMEDIATE_THROW,{width:Bg.width,height:Bg.height});Il.shapeConfigMap.set(hl.BOUNDARY,{width:Vx.width,height:Vx.height});Il.shapeConfigMap.set(hl.PARALLEL_GATEWAY,{width:Bx.width,height:Bx.height});Il.shapeConfigMap.set(hl.INCLUSIVE_GATEWAY,{width:Ux.width,height:Ux.height});Il.shapeConfigMap.set(hl.EXCLUSIVE_GATEWAY,{width:Gx.width,height:Gx.height});Il.shapeConfigMap.set(hl.SYSTEM,{width:zx.width,height:zx.height});Il.shapeConfigMap.set(hl.USER,{width:Hx.width,height:Hx.height});Il.shapeConfigMap.set(hl.SUBPROCESS,{width:Wx.width,height:Wx.height});(function(e){iG(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(c){var f=nG(c);return o.adapterIn(f,o.props)},o.adapterXmlOut=function(c){var f=o.adapterOut(c,o.props);return oG(f)};var r=n.lf,s=n.props;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o.props=s,o}return t.pluginName="BPMNAdapter",t})(Il);var Jx;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Jx||(Jx={}));var hG=function(){function e(t){var n=this,o=t.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(s){var c=n.lf.getPointByClient(s.clientX,s.clientY).domOverlayPosition,f=c.x,d=c.y;n.endPoint={x:f,y:d};var _=n.startPoint,y=_.x,b=_.y,x=n.wrapper.style,M=y,S=b,E=f-y,w=d-b;f<y&&(M=f,E=y-f),d<b&&(S=d,w=b-d),x.left=M+"px",x.top=S+"px",x.width=E+"px",x.height=w+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",n.__draw),document.removeEventListener("mouseup",n.__drawOff),n.wrapper.oncontextmenu=null,n.__domContainer.removeChild(n.wrapper);var s=n.startPoint,c=s.x,f=s.y,d=n.endPoint,_=d.x,y=d.y;if(!(Math.abs(_-c)<10&&Math.abs(y-f)<10)){var b=[Math.min(c,_),Math.min(f,y)],x=[Math.max(c,_),Math.max(f,y)],M=n.lf.graphModel.getAreaElement(b,x,n.isWholeEdge,n.isWholeNode,!0),S=n.lf.graphModel.group;M.forEach(function(E){(!S||!S.getNodeGroup(E.id))&&n.lf.selectElementById(E.id,!0)}),n.lf.emit("selection:selected",M)}},this.lf=o;var r=o.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=r,o.openSelectionSelect=function(){n.openSelectionSelect()},o.closeSelectionSelect=function(){n.closeSelectionSelect()}}return e.prototype.render=function(t,n){var o=this;this.__domContainer=n,t.on("blank:mousedown",function(r){var s=r.e,c=t.getEditConfig();if(!(!c.stopMoveGraph||o.__disabled)){var f=s.button===2;if(!f){var d=t.getPointByClient(s.clientX,s.clientY).domOverlayPosition,_=d.x,y=d.y;o.startPoint={x:_,y},o.endPoint={x:_,y};var b=document.createElement("div");b.className="lf-selection-select",b.oncontextmenu=function(M){M.preventDefault()},b.style.top=o.startPoint.y+"px",b.style.left=o.startPoint.x+"px",n.appendChild(b),o.wrapper=b,document.addEventListener("mousemove",o.__draw),document.addEventListener("mouseup",o.__drawOff)}}})},e.prototype.setSelectionSense=function(t,n){t===void 0&&(t=!0),n===void 0&&(n=!0),this.isWholeEdge=t,this.isWholeNode=n},e.prototype.openSelectionSelect=function(){var t=this.lf.getEditConfig().stopMoveGraph;t||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},e.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},e.prototype.open=function(){this.__disabled=!1},e.prototype.close=function(){this.__disabled=!0},e.pluginName="selectionSelect",e}(),cN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),hv=function(){return hv=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},hv.apply(this,arguments)},Pm=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(f){c={error:f}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},vG={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function mG(e){for(var t=e,n=1;n<t.length-1;){var o=Pm(t[n-1],2),r=o[0],s=o[1],c=Pm(t[n],2),f=c[0],d=c[1],_=Pm(t[n+1],2),y=_[0],b=_[1];r===f&&f===y||s===d&&d===b?t.splice(n,1):n++}return t}function yG(e,t,n,o){var r=[e[0],e[1]],s=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=o,s[0]+=o):t==="lb"&&(r[0]+=o,s[1]+=o),[r,s];case"tr":return t==="tl"?(r[1]+=o,s[0]-=o):t==="rb"&&(r[0]-=o,s[1]+=o),[r,s];case"bl":return t==="br"?(r[1]-=o,s[0]+=o):t==="lt"&&(r[0]+=o,s[1]-=o),[r,s];case"br":return t==="bl"?(r[1]-=o,s[0]-=o):t==="rt"&&(r[0]-=o,s[1]-=o),[r,s];default:return[]}}function gG(e,t,n,o){var r,s="",c="";e[0]===t[0]?s=e[1]>t[1]?"t":"b":e[1]===t[1]&&(s=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var f=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,o)||1/5*o,d=""+s+c,_=vG[d]||"-",y="L "+e[0]+" "+e[1];if(_==="-")y+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var b=Pm(yG(t,d,_,f),2),x=b[0],M=b[1];x&&M&&(y+="L "+x[0]+" "+x[1]+" Q "+t[0]+" "+t[1]+" "+M[0]+" "+M[1],r=Pm(M,2),t[0]=r[0],t[1]=r[1])}return y}function _G(e,t){var n=0,o="";if(e.length===2)o+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(o+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],s=e[n],c=e[n+++1];o+=gG(r,s,c,t)}o+="L "+e[n][0]+" "+e[n][1]}return o}(function(e){cN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,o=n.points,r=n.isAnimation,s=n.arrowConfig,c=n.radius,f=c===void 0?5:c,d=n.getEdgeStyle(),_=n.getEdgeAnimationStyle(),y=mG(o.split(" ").map(function(M){return M.split(",").map(function(S){return+S})})),b=_G(y,f),x=hv(hv(hv({style:r?_:{}},d),s),{fill:"none"});return cn.h("path",hv({d:b},x))},t})(cn.PolylineEdge);(function(e){cN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(cn.PolylineEdgeModel);let T_=!1;const Xf=jd({});function dN(e,t,n,o,r,s,c){s||(s=(f,d)=>({nodeModel:f,graph:d})),c||(c=(f,d)=>({getNode:()=>f,getGraph:()=>d})),T_&&(Xf[e]=LI(Rn({render:()=>Tv($I,{to:n},[Tv(t,s(o,r))]),provide:()=>c(o,r)})))}function fN(e){T_&&delete Xf[e]}function bG(e){Object.keys(Xf).forEach(t=>{t.startsWith(e)&&delete Xf[t]})}function wG(){Object.keys(Xf).forEach(e=>{delete Xf[e]})}function Hg(){return T_}function EG(){return T_=!0,Rn({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Xf).forEach(n=>{t.push(Xf[n])}),Tv(Fn,{},t.map(n=>Tv(n)))}}})}class no extends iN.view{constructor(n,o){super(n);ha(this,"isMounted");ha(this,"r");ha(this,"component");ha(this,"app");ha(this,"root");ha(this,"VueNode");ha(this,"up_node_field_dict");this.component=o,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender?delete n.model.properties.noRender:n.model.properties.nodeName=this.getNodeName(n.graphModel.nodes.filter(r=>r.id!==n.model.id),n.model.properties.nodeName),n.model.properties.config=this.getConfig(n),n.model.properties.height&&(n.model.height=n.model.properties.height)}getConfig(n){return t8[n.model.type].properties.config}getNodeName(n,o){let r=0,s=o;for(;;){if(r>0&&(s=o+r),!n.some(c=>c.properties.nodeName===s.trim()))return s;r++}}get_node_field_list(){var s,c,f,d,_,y,b;const n=[];if(this.props.model.type==="start-node"&&(n.push({value:"global",label:yt("workflow.variable.global"),type:"global",children:((c=(s=this.props.model.properties)==null?void 0:s.config)==null?void 0:c.globalFields)||[]}),n.push({value:"chat",label:yt("workflow.variable.chat"),type:"chat",children:((d=(f=this.props.model.properties)==null?void 0:f.config)==null?void 0:d.chatFields)||[]})),this.props.model.type==="knowledge-base-node"){let x=[];this.props.model.properties.user_input_field_list&&(x=this.props.model.properties.user_input_field_list.map(M=>({label:typeof M.label=="string"?M.label:M.label.label,value:M.field}))),n.push({value:"global",label:yt("workflow.variable.global"),type:"global",children:x})}const o=[...((y=(_=this.props.model.properties)==null?void 0:_.config)==null?void 0:y.fields)||[]];this.props.model.properties.enableException&&o.push({label:"异常信息",value:"exceptionMessage",globeLabel:`{{${this.props.model.properties.nodeName}.exceptionMessage}}`,globeValue:`{{context['${this.props.model.id}'].exceptionMessage}}`});const r={value:this.props.model.id,icon:(b=this.props.model.properties.nodeData)==null?void 0:b.icon,label:this.props.model.properties.nodeName,type:this.props.model.type,children:o};return this.props.model.properties.kind&&(r.kind=this.props.model.properties.kind),n.push(r),n}get_up_node_field_dict(n,o){if(!this.up_node_field_dict||!o){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(s=>s.id!="start-node"&&s.id!="loop-start-node").map(s=>s.get_up_node_field_dict(!0,o)).reduce((s,c)=>({...s,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,o){var f;const r=Object.values(this.get_up_node_field_dict(n,o)).reduce((d,_)=>[...d,..._],[]),s=((f=this.props.graphModel.getNodeModelById("start-node")||this.props.graphModel.getNodeModelById("loop-start-node"))==null?void 0:f.get_node_field_list())||[],c=this.props.graphModel.getNodeModelById("knowledge-base-node");return c?[...c.get_node_field_list(),...s,...r]:[...s,...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:o,y:r,type:s}=n;let c=!1;return s=="left"?c=this.props.graphModel.edges.some(f=>f.targetAnchorId==n.id):c=this.props.graphModel.edges.some(f=>f.sourceAnchorId==n.id),cn.h("foreignObject",{...n,x:o-10,y:r-12,width:30,height:30},[cn.h("div",{style:{zindex:0},onClick:()=>{s=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="${n.id.endsWith("_exception_right")?"#FF8800":"#3370FF"}"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="${n.id.endsWith("_exception_right")?"#FF8800":"#3370FF"}"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const o=document.createElement("div");n.appendChild(o),this.renderVueComponent(o)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var s;this.unmountVueComponent(),this.root=n;const{model:o,graphModel:r}=this.props;if(n)if(Hg())dN(this.targetId(),this.component,n,o,r,void 0,this.props.graphModel.get_provide);else{this.r=Tv(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=oT({render(){return this.r},provide(){return{getNode:()=>o,getGraph:()=>r,workflowMode:br.Application}}}),this.app.use(FI,{locale:VI}),this.app.use(BI),this.app.use(UI),this.app.use(rT);for(const[c,f]of Object.entries(GI))this.app.component(c,f);(s=this.app)==null||s.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){Hg()&&fN(this.targetId()),this.unmountVueComponent()}}class ro extends iN.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:o}=t;n&&(this.x=n),o&&(this.y=o),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,o=t+100;this.height=o,this.properties.height=o,this.move(0,(o-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=rT.global;this.width=this.get_width();const n=(r,s)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const f in c){const d=c[f];if(d.id===s)return!0;if(n(d.id,s))return!0}return!1},o={message:t("workflow.tip.onlyRight"),validate:(r,s,c)=>c.type==="right"};this.sourceRules.push({message:t("workflow.tip.notRecyclable"),validate:(r,s,c,f)=>s.id==r.id?!1:!this.graphModel.getNodeIncomingEdge(s.id).find(y=>y.targetAnchorId==f.id&&y.sourceAnchorId==c.id)&&!n(r.id,s.id)}),this.sourceRules.push(o),this.targetRules.push({message:t("workflow.tip.onlyLeft"),validate:(r,s,c,f)=>f.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r}=this,s=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return[Tn.Base,Tn.KnowledgeBase].includes(this.type)||(![Tn.Start,Tn.LoopStartNode.toString()].includes(this.type)&&this.properties.kind!=dc.DataSource&&c.push({x:n-r/2+10,y:s?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),this.properties.enableException&&c.push({x:n+r/2-10,y:o+this.height/2-80,id:`${t}_exception_right`,type:"right"}),c.push({x:n+r/2-10,y:s?o:o-15,id:`${t}_right`,type:"right"})),c}}let OG=class extends no{constructor(t){super(t,yU)}};const SG={type:"ai-chat-node",model:ro,view:OG},pN=Object.freeze(Object.defineProperty({__proto__:null,default:SG},Symbol.toStringTag,{value:"Module"})),xG={class:"title-decoration-1 mb-8"},MG={class:"flex-between w-full"},AG={class:"flex align-center"},TG={class:"mr-4"},kG={class:"flex"},NG=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=Zi(),n=jn(()=>t.path.includes("resource-management")?"systemManage":"workspace"),o={questionReferenceAddress:["start-node","question"],apiInputFieldList:[],userInputFieldList:[],documentList:["start-node","document"],imageList:["start-node","image"],audioList:["start-node","audio"]},r=Ae(),s=jn({get:()=>(d.nodeModel.properties.nodeData||ye.set(d.nodeModel.properties,"nodeData",o),d.nodeModel.properties.nodeData),set:y=>{ye.set(d.nodeModel.properties,"nodeData",y)}});function c(y,b){const x=`${y}List`;b?(console.log("listKey",x),d.nodeModel.properties.nodeData[x]||ye.set(d.nodeModel.properties.nodeData,x,[])):delete d.nodeModel.properties.nodeData[x]}const f=()=>{if(!d.nodeModel.properties.nodeData.applicationId){ye.set(d.nodeModel.properties,"status",500);return}ni({type:"application",systemType:n.value}).getApplicationDetail(d.nodeModel.properties.nodeData.applicationId).then(y=>{const b=ye.cloneDeep(d.nodeModel.properties.nodeData.apiInputFieldList),x=ye.cloneDeep(d.nodeModel.properties.nodeData.userInputFieldList);if(Jw(y.data.type)){const M=y.data.workFlow.nodes[0].properties.nodeData,S=ye.cloneDeep(y.data.workFlow.nodes[0].properties.apiInputFieldList),E=ye.cloneDeep(y.data.workFlow.nodes[0].properties.userInputFieldList),w=(S||[]).map($=>{const U=b==null?void 0:b.find(I=>I.variable==$.variable);return U?{...$,value:U.value,label:typeof $.label=="object"&&$.label!=null?$.label.label:$.label}:$});ye.set(d.nodeModel.properties.nodeData,"apiInputFieldList",w);const C=(E||[]).map($=>{const U=x==null?void 0:x.find(I=>I.field==$.field);return U?{...$,value:U.value,label:typeof $.label=="object"&&$.label!=null?$.label.label:$.label}:$});ye.set(d.nodeModel.properties.nodeData,"userInputFieldList",C),console.log("nodeData",M);const j=M.fileUploadEnable,B=M.fileUploadSetting;j?(c("document",B.document),c("image",B.image),c("audio",B.audio)):["documentList","imageList","audioList"].forEach($=>{delete d.nodeModel.properties.nodeData[$]}),ye.set(d.nodeModel.properties,"status",y.data.id?200:500)}}).catch(y=>{console.log(y),ye.set(d.nodeModel.properties,"status",500)})},d=e,_=()=>{var y;return(y=r.value)==null?void 0:y.validate().catch(b=>Promise.reject({node:d.nodeModel,errMessage:b}))};return kr(()=>{f(),ye.set(d.nodeModel,"validate",_)}),(y,b)=>{const x=Y("el-form-item"),M=Y("el-tooltip"),S=Y("el-switch"),E=Y("el-form"),w=Y("el-card");return ce(),Ge(so,{nodeModel:y.nodeModel},{default:N(()=>[X("h5",xG,fe(y.$t("workflow.nodeSetting")),1),T(w,{shadow:"never",class:"card-never"},{default:N(()=>[T(E,{onSubmit:b[6]||(b[6]=Bt(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:r},{default:N(()=>[T(x,{label:y.$t("workflow.nodes.startNode.question"),prop:"questionReferenceAddress",rules:{message:y.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[T(go,{ref_key:"applicationNodeFormRef",ref:r,nodeModel:y.nodeModel,class:"w-full",placeholder:y.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.questionReferenceAddress,"onUpdate:modelValue":b[0]||(b[0]=C=>s.value.questionReferenceAddress=C)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),s.value.hasOwnProperty("documentList")||"documentList"in s.value?(ce(),Ge(x,{key:0,label:y.$t("views.problem.relateParagraph.selectDocument"),prop:"documentList",rules:{message:y.$t("views.chatLog.documentPlaceholder"),trigger:"blur",required:!1}},{default:N(()=>[T(go,{ref:"nodeCascaderRef",nodeModel:y.nodeModel,class:"w-full",placeholder:y.$t("views.chatLog.documentPlaceholder"),modelValue:s.value.documentList,"onUpdate:modelValue":b[1]||(b[1]=C=>s.value.documentList=C)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):Qt("",!0),s.value.hasOwnProperty("imageList")||"imageList"in s.value?(ce(),Ge(x,{key:1,label:y.$t("workflow.nodes.imageUnderstandNode.image.label"),prop:"imageList",rules:{message:y.$t("workflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:N(()=>[T(go,{ref:"nodeCascaderRef",nodeModel:y.nodeModel,class:"w-full",placeholder:y.$t("workflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:s.value.imageList,"onUpdate:modelValue":b[2]||(b[2]=C=>s.value.imageList=C)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):Qt("",!0),s.value.hasOwnProperty("audioList")||"audioList"in s.value?(ce(),Ge(x,{key:2,label:y.$t("workflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:y.$t("workflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:N(()=>[T(go,{ref:"nodeCascaderRef",nodeModel:y.nodeModel,class:"w-full",placeholder:y.$t("workflow.nodes.speechToTextNode.audio.placeholder"),modelValue:s.value.audioList,"onUpdate:modelValue":b[3]||(b[3]=C=>s.value.audioList=C)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):Qt("",!0),(ce(!0),Rt(Fn,null,Tr(s.value.apiInputFieldList,(C,j)=>(ce(),Rt("div",{key:"api-input-"+j},[T(x,{label:C.variable,prop:"apiInputFieldList."+j+".value",rules:[{required:C.isRequired,message:`${y.$t("common.inputPlaceholder")}${C.variable}`,trigger:"blur"}]},{default:N(()=>[T(go,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:y.nodeModel,class:"w-full",placeholder:y.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.apiInputFieldList[j].value,"onUpdate:modelValue":B=>s.value.apiInputFieldList[j].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(ce(!0),Rt(Fn,null,Tr(s.value.userInputFieldList,(C,j)=>(ce(),Rt("div",{key:"user-input-"+j},[T(x,{label:C.label,prop:"userInputFieldList."+j+".value",rules:[{required:C.required,message:`${y.$t("common.inputPlaceholder")}${C.label}`,trigger:"blur"}]},{default:N(()=>[T(go,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:y.nodeModel,class:"w-full",placeholder:y.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.userInputFieldList[j].value,"onUpdate:modelValue":B=>s.value.userInputFieldList[j].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),T(x,{label:y.$t("workflow.nodes.aiChatNode.returnContent.label"),onClick:b[5]||(b[5]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",MG,[X("div",AG,[X("div",TG,[X("span",null,fe(y.$t("workflow.nodes.aiChatNode.returnContent.label")),1)]),T(M,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(y.$t("workflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),X("div",kG,[T(S,{size:"small",modelValue:s.value.isResult,"onUpdate:modelValue":b[4]||(b[4]=C=>s.value.isResult=C)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class PG extends no{constructor(t){super(t,NG)}}const RG={type:"application-node",model:ro,view:PG},hN=Object.freeze(Object.defineProperty({__proto__:null,default:RG},Symbol.toStringTag,{value:"Module"}));/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Qx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function hc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qx(Object(n),!0).forEach(function(o){CG(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qx(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function bg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bg=function(t){return typeof t}:bg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function CG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rd(){return Rd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Rd.apply(this,arguments)}function DG(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function jG(e,t){if(e==null)return{};var n=DG(e,t),o,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var IG="1.15.6";function kd(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Ld=kd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ny=kd(/Edge/i),eM=kd(/firefox/i),Rm=kd(/safari/i)&&!kd(/chrome/i)&&!kd(/android/i),LE=kd(/iP(ad|od|hone)/i),vN=kd(/chrome/i)&&kd(/android/i),mN={capture:!1,passive:!1};function ao(e,t,n){e.addEventListener(t,n,!Ld&&mN)}function eo(e,t,n){e.removeEventListener(t,n,!Ld&&mN)}function Wg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function yN(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ou(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Wg(e,t):Wg(e,t))||o&&e===n)return e;if(e===n)break}while(e=yN(e))}return null}var tM=/\s+/g;function os(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(tM," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(tM," ")}}function Mr(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function _v(e,t){var n="";if(typeof e=="string")n=e;else do{var o=Mr(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function gN(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,s=o.length;if(n)for(;r<s;r++)n(o[r],r);return o}return[]}function fc(){var e=document.scrollingElement;return e||document.documentElement}function Ki(e,t,n,o,r){if(!(!e.getBoundingClientRect&&e!==window)){var s,c,f,d,_,y,b;if(e!==window&&e.parentNode&&e!==fc()?(s=e.getBoundingClientRect(),c=s.top,f=s.left,d=s.bottom,_=s.right,y=s.height,b=s.width):(c=0,f=0,d=window.innerHeight,_=window.innerWidth,y=window.innerHeight,b=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!Ld))do if(r&&r.getBoundingClientRect&&(Mr(r,"transform")!=="none"||n&&Mr(r,"position")!=="static")){var x=r.getBoundingClientRect();c-=x.top+parseInt(Mr(r,"border-top-width")),f-=x.left+parseInt(Mr(r,"border-left-width")),d=c+s.height,_=f+s.width;break}while(r=r.parentNode);if(o&&e!==window){var M=_v(r||e),S=M&&M.a,E=M&&M.d;M&&(c/=E,f/=S,b/=S,y/=E,d=c+y,_=f+b)}return{top:c,left:f,bottom:d,right:_,width:b,height:y}}}function nM(e,t,n){for(var o=Gf(e,!0),r=Ki(e)[t];o;){var s=Ki(o)[n],c=void 0;if(c=r>=s,!c)return o;if(o===fc())break;o=Gf(o,!1)}return!1}function Pv(e,t,n,o){for(var r=0,s=0,c=e.children;s<c.length;){if(c[s].style.display!=="none"&&c[s]!==_r.ghost&&(o||c[s]!==_r.dragged)&&Ou(c[s],n.draggable,e,!1)){if(r===t)return c[s];r++}s++}return null}function $E(e,t){for(var n=e.lastElementChild;n&&(n===_r.ghost||Mr(n,"display")==="none"||t&&!Wg(n,t));)n=n.previousElementSibling;return n||null}function Ds(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==_r.clone&&(!t||Wg(e,t))&&n++;return n}function rM(e){var t=0,n=0,o=fc();if(e)do{var r=_v(e),s=r.a,c=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*c}while(e!==o&&(e=e.parentNode));return[t,n]}function LG(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function Gf(e,t){if(!e||!e.getBoundingClientRect)return fc();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Mr(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return fc();if(o||t)return n;o=!0}}while(n=n.parentNode);return fc()}function $G(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function x1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Cm;function _N(e,t){return function(){if(!Cm){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),Cm=setTimeout(function(){Cm=void 0},t)}}}function FG(){clearTimeout(Cm),Cm=void 0}function bN(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function wN(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function EN(e,t,n){var o={};return Array.from(e.children).forEach(function(r){var s,c,f,d;if(!(!Ou(r,t.draggable,e,!1)||r.animated||r===n)){var _=Ki(r);o.left=Math.min((s=o.left)!==null&&s!==void 0?s:1/0,_.left),o.top=Math.min((c=o.top)!==null&&c!==void 0?c:1/0,_.top),o.right=Math.max((f=o.right)!==null&&f!==void 0?f:-1/0,_.right),o.bottom=Math.max((d=o.bottom)!==null&&d!==void 0?d:-1/0,_.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var Cl="Sortable"+new Date().getTime();function VG(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(Mr(r,"display")==="none"||r===_r.ghost)){e.push({target:r,rect:Ki(r)});var s=hc({},e[e.length-1].rect);if(r.thisAnimationDuration){var c=_v(r,!0);c&&(s.top-=c.f,s.left-=c.e)}r.fromRect=s}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(LG(e,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var s=!1,c=0;e.forEach(function(f){var d=0,_=f.target,y=_.fromRect,b=Ki(_),x=_.prevFromRect,M=_.prevToRect,S=f.rect,E=_v(_,!0);E&&(b.top-=E.f,b.left-=E.e),_.toRect=b,_.thisAnimationDuration&&x1(x,b)&&!x1(y,b)&&(S.top-b.top)/(S.left-b.left)===(y.top-b.top)/(y.left-b.left)&&(d=UG(S,x,M,r.options)),x1(b,y)||(_.prevFromRect=y,_.prevToRect=b,d||(d=r.options.animation),r.animate(_,S,b,d)),d&&(s=!0,c=Math.max(c,d),clearTimeout(_.animationResetTimer),_.animationResetTimer=setTimeout(function(){_.animationTime=0,_.prevFromRect=null,_.fromRect=null,_.prevToRect=null,_.thisAnimationDuration=null},d),_.thisAnimationDuration=d)}),clearTimeout(t),s?t=setTimeout(function(){typeof o=="function"&&o()},c):typeof o=="function"&&o(),e=[]},animate:function(o,r,s,c){if(c){Mr(o,"transition",""),Mr(o,"transform","");var f=_v(this.el),d=f&&f.a,_=f&&f.d,y=(r.left-s.left)/(d||1),b=(r.top-s.top)/(_||1);o.animatingX=!!y,o.animatingY=!!b,Mr(o,"transform","translate3d("+y+"px,"+b+"px,0)"),this.forRepaintDummy=BG(o),Mr(o,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),Mr(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){Mr(o,"transition",""),Mr(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},c)}}}}function BG(e){return e.offsetWidth}function UG(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var rv=[],M1={initializeByDefault:!0},ry={mount:function(t){for(var n in M1)M1.hasOwnProperty(n)&&!(n in t)&&(t[n]=M1[n]);rv.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),rv.push(t)},pluginEvent:function(t,n,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var s=t+"Global";rv.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][s]&&n[c.pluginName][s](hc({sortable:n},o)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](hc({sortable:n},o)))})},initializePlugins:function(t,n,o,r){rv.forEach(function(f){var d=f.pluginName;if(!(!t.options[d]&&!f.initializeByDefault)){var _=new f(t,n,t.options);_.sortable=t,_.options=t.options,t[d]=_,Rd(o,_.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var c=this.modifyOption(t,s,t.options[s]);typeof c<"u"&&(t.options[s]=c)}},getEventProperties:function(t,n){var o={};return rv.forEach(function(r){typeof r.eventProperties=="function"&&Rd(o,r.eventProperties.call(n[r.pluginName],t))}),o},modifyOption:function(t,n,o){var r;return rv.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(r=s.optionListeners[n].call(t[s.pluginName],o))}),r}};function GG(e){var t=e.sortable,n=e.rootEl,o=e.name,r=e.targetEl,s=e.cloneEl,c=e.toEl,f=e.fromEl,d=e.oldIndex,_=e.newIndex,y=e.oldDraggableIndex,b=e.newDraggableIndex,x=e.originalEvent,M=e.putSortable,S=e.extraEventProperties;if(t=t||n&&n[Cl],!!t){var E,w=t.options,C="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Ld&&!ny?E=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(o,!0,!0)),E.to=c||n,E.from=f||n,E.item=r||n,E.clone=s,E.oldIndex=d,E.newIndex=_,E.oldDraggableIndex=y,E.newDraggableIndex=b,E.originalEvent=x,E.pullMode=M?M.lastPutMode:void 0;var j=hc(hc({},S),ry.getEventProperties(o,t));for(var B in j)E[B]=j[B];n&&n.dispatchEvent(E),w[C]&&w[C].call(t,E)}}var zG=["evt"],Rl=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,s=jG(o,zG);ry.pluginEvent.bind(_r)(t,n,hc({dragEl:_n,parentEl:Ri,ghostEl:Ir,rootEl:yi,nextEl:qp,lastDownEl:wg,cloneEl:Oi,cloneHidden:Uf,dragStarted:Em,putSortable:Na,activeSortable:_r.active,originalEvent:r,oldIndex:vv,oldDraggableIndex:Dm,newIndex:is,newDraggableIndex:Bf,hideGhostForTarget:MN,unhideGhostForTarget:AN,cloneNowHidden:function(){Uf=!0},cloneNowShown:function(){Uf=!1},dispatchSortableEvent:function(f){cl({sortable:n,name:f,originalEvent:r})}},s))};function cl(e){GG(hc({putSortable:Na,cloneEl:Oi,targetEl:_n,rootEl:yi,oldIndex:vv,oldDraggableIndex:Dm,newIndex:is,newDraggableIndex:Bf},e))}var _n,Ri,Ir,yi,qp,wg,Oi,Uf,vv,is,Dm,Bf,sg,Na,sv=!1,Xg=!1,qg=[],Hp,wu,A1,T1,oM,iM,Em,ov,jm,Im=!1,ug=!1,Eg,Ha,k1=[],Nw=!1,Yg=[],k_=typeof document<"u",cg=LE,aM=ny||Ld?"cssFloat":"float",HG=k_&&!vN&&!LE&&"draggable"in document.createElement("div"),ON=function(){if(k_){if(Ld)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),SN=function(t,n){var o=Mr(t),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=Pv(t,0,n),c=Pv(t,1,n),f=s&&Mr(s),d=c&&Mr(c),_=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Ki(s).width,y=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+Ki(c).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&f.float&&f.float!=="none"){var b=f.float==="left"?"left":"right";return c&&(d.clear==="both"||d.clear===b)?"vertical":"horizontal"}return s&&(f.display==="block"||f.display==="flex"||f.display==="table"||f.display==="grid"||_>=r&&o[aM]==="none"||c&&o[aM]==="none"&&_+y>r)?"vertical":"horizontal"},WG=function(t,n,o){var r=o?t.left:t.top,s=o?t.right:t.bottom,c=o?t.width:t.height,f=o?n.left:n.top,d=o?n.right:n.bottom,_=o?n.width:n.height;return r===f||s===d||r+c/2===f+_/2},XG=function(t,n){var o;return qg.some(function(r){var s=r[Cl].options.emptyInsertThreshold;if(!(!s||$E(r))){var c=Ki(r),f=t>=c.left-s&&t<=c.right+s,d=n>=c.top-s&&n<=c.bottom+s;if(f&&d)return o=r}}),o},xN=function(t){function n(s,c){return function(f,d,_,y){var b=f.options.group.name&&d.options.group.name&&f.options.group.name===d.options.group.name;if(s==null&&(c||b))return!0;if(s==null||s===!1)return!1;if(c&&s==="clone")return s;if(typeof s=="function")return n(s(f,d,_,y),c)(f,d,_,y);var x=(c?f:d).options.group.name;return s===!0||typeof s=="string"&&s===x||s.join&&s.indexOf(x)>-1}}var o={},r=t.group;(!r||bg(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=n(r.pull,!0),o.checkPut=n(r.put),o.revertClone=r.revertClone,t.group=o},MN=function(){!ON&&Ir&&Mr(Ir,"display","none")},AN=function(){!ON&&Ir&&Mr(Ir,"display","")};k_&&!vN&&document.addEventListener("click",function(e){if(Xg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Xg=!1,!1},!0);var Wp=function(t){if(_n){t=t.touches?t.touches[0]:t;var n=XG(t.clientX,t.clientY);if(n){var o={};for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[Cl]._onDragOver(o)}}},qG=function(t){_n&&_n.parentNode[Cl]._isOutsideThisEl(t.target)};function _r(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Rd({},t),e[Cl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return SN(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,f){c.setData("Text",f.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_r.supportPointer!==!1&&"PointerEvent"in window&&(!Rm||LE),emptyInsertThreshold:5};ry.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);xN(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:HG,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ao(e,"pointerdown",this._onTapStart):(ao(e,"mousedown",this._onTapStart),ao(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ao(e,"dragover",this),ao(e,"dragenter",this)),qg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Rd(this,VG())}_r.prototype={constructor:_r,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(ov=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,_n):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,r=this.options,s=r.preventOnFilter,c=t.type,f=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,d=(f||t).target,_=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||d,y=r.filter;if(nz(o),!_n&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||r.disabled)&&!_.isContentEditable&&!(!this.nativeDraggable&&Rm&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=Ou(d,r.draggable,o,!1),!(d&&d.animated)&&wg!==d)){if(vv=Ds(d),Dm=Ds(d,r.draggable),typeof y=="function"){if(y.call(this,t,d,this)){cl({sortable:n,rootEl:_,name:"filter",targetEl:d,toEl:o,fromEl:o}),Rl("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(y&&(y=y.split(",").some(function(b){if(b=Ou(_,b.trim(),o,!1),b)return cl({sortable:n,rootEl:b,name:"filter",targetEl:d,fromEl:o,toEl:o}),Rl("filter",n,{evt:t}),!0}),y)){s&&t.preventDefault();return}r.handle&&!Ou(_,r.handle,o,!1)||this._prepareDragStart(t,f,d)}}},_prepareDragStart:function(t,n,o){var r=this,s=r.el,c=r.options,f=s.ownerDocument,d;if(o&&!_n&&o.parentNode===s){var _=Ki(o);if(yi=s,_n=o,Ri=_n.parentNode,qp=_n.nextSibling,wg=o,sg=c.group,_r.dragged=_n,Hp={target:_n,clientX:(n||t).clientX,clientY:(n||t).clientY},oM=Hp.clientX-_.left,iM=Hp.clientY-_.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,_n.style["will-change"]="all",d=function(){if(Rl("delayEnded",r,{evt:t}),_r.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!eM&&r.nativeDraggable&&(_n.draggable=!0),r._triggerDragStart(t,n),cl({sortable:r,name:"choose",originalEvent:t}),os(_n,c.chosenClass,!0)},c.ignore.split(",").forEach(function(y){gN(_n,y.trim(),N1)}),ao(f,"dragover",Wp),ao(f,"mousemove",Wp),ao(f,"touchmove",Wp),c.supportPointer?(ao(f,"pointerup",r._onDrop),!this.nativeDraggable&&ao(f,"pointercancel",r._onDrop)):(ao(f,"mouseup",r._onDrop),ao(f,"touchend",r._onDrop),ao(f,"touchcancel",r._onDrop)),eM&&this.nativeDraggable&&(this.options.touchStartThreshold=4,_n.draggable=!0),Rl("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ny||Ld))){if(_r.eventCanceled){this._onDrop();return}c.supportPointer?(ao(f,"pointerup",r._disableDelayedDrag),ao(f,"pointercancel",r._disableDelayedDrag)):(ao(f,"mouseup",r._disableDelayedDrag),ao(f,"touchend",r._disableDelayedDrag),ao(f,"touchcancel",r._disableDelayedDrag)),ao(f,"mousemove",r._delayedDragTouchMoveHandler),ao(f,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&ao(f,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(d,c.delay)}else d()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){_n&&N1(_n),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;eo(t,"mouseup",this._disableDelayedDrag),eo(t,"touchend",this._disableDelayedDrag),eo(t,"touchcancel",this._disableDelayedDrag),eo(t,"pointerup",this._disableDelayedDrag),eo(t,"pointercancel",this._disableDelayedDrag),eo(t,"mousemove",this._delayedDragTouchMoveHandler),eo(t,"touchmove",this._delayedDragTouchMoveHandler),eo(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?ao(document,"pointermove",this._onTouchMove):n?ao(document,"touchmove",this._onTouchMove):ao(document,"mousemove",this._onTouchMove):(ao(_n,"dragend",this),ao(yi,"dragstart",this._onDragStart));try{document.selection?Og(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(sv=!1,yi&&_n){Rl("dragStarted",this,{evt:n}),this.nativeDraggable&&ao(document,"dragover",qG);var o=this.options;!t&&os(_n,o.dragClass,!1),os(_n,o.ghostClass,!0),_r.active=this,t&&this._appendGhost(),cl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(wu){this._lastX=wu.clientX,this._lastY=wu.clientY,MN();for(var t=document.elementFromPoint(wu.clientX,wu.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(wu.clientX,wu.clientY),t!==n);)n=t;if(_n.parentNode[Cl]._isOutsideThisEl(t),n)do{if(n[Cl]){var o=void 0;if(o=n[Cl]._onDragOver({clientX:wu.clientX,clientY:wu.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=yN(n));AN()}},_onTouchMove:function(t){if(Hp){var n=this.options,o=n.fallbackTolerance,r=n.fallbackOffset,s=t.touches?t.touches[0]:t,c=Ir&&_v(Ir,!0),f=Ir&&c&&c.a,d=Ir&&c&&c.d,_=cg&&Ha&&rM(Ha),y=(s.clientX-Hp.clientX+r.x)/(f||1)+(_?_[0]-k1[0]:0)/(f||1),b=(s.clientY-Hp.clientY+r.y)/(d||1)+(_?_[1]-k1[1]:0)/(d||1);if(!_r.active&&!sv){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(Ir){c?(c.e+=y-(A1||0),c.f+=b-(T1||0)):c={a:1,b:0,c:0,d:1,e:y,f:b};var x="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");Mr(Ir,"webkitTransform",x),Mr(Ir,"mozTransform",x),Mr(Ir,"msTransform",x),Mr(Ir,"transform",x),A1=y,T1=b,wu=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ir){var t=this.options.fallbackOnBody?document.body:yi,n=Ki(_n,!0,cg,!0,t),o=this.options;if(cg){for(Ha=t;Mr(Ha,"position")==="static"&&Mr(Ha,"transform")==="none"&&Ha!==document;)Ha=Ha.parentNode;Ha!==document.body&&Ha!==document.documentElement?(Ha===document&&(Ha=fc()),n.top+=Ha.scrollTop,n.left+=Ha.scrollLeft):Ha=fc(),k1=rM(Ha)}Ir=_n.cloneNode(!0),os(Ir,o.ghostClass,!1),os(Ir,o.fallbackClass,!0),os(Ir,o.dragClass,!0),Mr(Ir,"transition",""),Mr(Ir,"transform",""),Mr(Ir,"box-sizing","border-box"),Mr(Ir,"margin",0),Mr(Ir,"top",n.top),Mr(Ir,"left",n.left),Mr(Ir,"width",n.width),Mr(Ir,"height",n.height),Mr(Ir,"opacity","0.8"),Mr(Ir,"position",cg?"absolute":"fixed"),Mr(Ir,"zIndex","100000"),Mr(Ir,"pointerEvents","none"),_r.ghost=Ir,t.appendChild(Ir),Mr(Ir,"transform-origin",oM/parseInt(Ir.style.width)*100+"% "+iM/parseInt(Ir.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,r=t.dataTransfer,s=o.options;if(Rl("dragStart",this,{evt:t}),_r.eventCanceled){this._onDrop();return}Rl("setupClone",this),_r.eventCanceled||(Oi=wN(_n),Oi.removeAttribute("id"),Oi.draggable=!1,Oi.style["will-change"]="",this._hideClone(),os(Oi,this.options.chosenClass,!1),_r.clone=Oi),o.cloneId=Og(function(){Rl("clone",o),!_r.eventCanceled&&(o.options.removeCloneOnHide||yi.insertBefore(Oi,_n),o._hideClone(),cl({sortable:o,name:"clone"}))}),!n&&os(_n,s.dragClass,!0),n?(Xg=!0,o._loopId=setInterval(o._emulateDragOver,50)):(eo(document,"mouseup",o._onDrop),eo(document,"touchend",o._onDrop),eo(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(o,r,_n)),ao(document,"drop",o),Mr(_n,"transform","translateZ(0)")),sv=!0,o._dragStartId=Og(o._dragStarted.bind(o,n,t)),ao(document,"selectstart",o),Em=!0,window.getSelection().removeAllRanges(),Rm&&Mr(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,r,s,c,f=this.options,d=f.group,_=_r.active,y=sg===d,b=f.sort,x=Na||_,M,S=this,E=!1;if(Nw)return;function w(Ee,we){Rl(Ee,S,hc({evt:t,isOwner:y,axis:M?"vertical":"horizontal",revert:c,dragRect:r,targetRect:s,canSort:b,fromSortable:x,target:o,completed:j,onMove:function(nt,Ot){return dg(yi,n,_n,r,nt,Ki(nt),t,Ot)},changed:B},we))}function C(){w("dragOverAnimationCapture"),S.captureAnimationState(),S!==x&&x.captureAnimationState()}function j(Ee){return w("dragOverCompleted",{insertion:Ee}),Ee&&(y?_._hideClone():_._showClone(S),S!==x&&(os(_n,Na?Na.options.ghostClass:_.options.ghostClass,!1),os(_n,f.ghostClass,!0)),Na!==S&&S!==_r.active?Na=S:S===_r.active&&Na&&(Na=null),x===S&&(S._ignoreWhileAnimating=o),S.animateAll(function(){w("dragOverAnimationComplete"),S._ignoreWhileAnimating=null}),S!==x&&(x.animateAll(),x._ignoreWhileAnimating=null)),(o===_n&&!_n.animated||o===n&&!o.animated)&&(ov=null),!f.dragoverBubble&&!t.rootEl&&o!==document&&(_n.parentNode[Cl]._isOutsideThisEl(t.target),!Ee&&Wp(t)),!f.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),E=!0}function B(){is=Ds(_n),Bf=Ds(_n,f.draggable),cl({sortable:S,name:"change",toEl:n,newIndex:is,newDraggableIndex:Bf,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=Ou(o,f.draggable,n,!0),w("dragOver"),_r.eventCanceled)return E;if(_n.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||S._ignoreWhileAnimating===o)return j(!1);if(Xg=!1,_&&!f.disabled&&(y?b||(c=Ri!==yi):Na===this||(this.lastPutMode=sg.checkPull(this,_,_n,t))&&d.checkPut(this,_,_n,t))){if(M=this._getDirection(t,o)==="vertical",r=Ki(_n),w("dragOverValid"),_r.eventCanceled)return E;if(c)return Ri=yi,C(),this._hideClone(),w("revert"),_r.eventCanceled||(qp?yi.insertBefore(_n,qp):yi.appendChild(_n)),j(!0);var $=$E(n,f.draggable);if(!$||JG(t,M,this)&&!$.animated){if($===_n)return j(!1);if($&&n===t.target&&(o=$),o&&(s=Ki(o)),dg(yi,n,_n,r,o,s,t,!!o)!==!1)return C(),$&&$.nextSibling?n.insertBefore(_n,$.nextSibling):n.appendChild(_n),Ri=n,B(),j(!0)}else if($&&ZG(t,M,this)){var U=Pv(n,0,f,!0);if(U===_n)return j(!1);if(o=U,s=Ki(o),dg(yi,n,_n,r,o,s,t,!1)!==!1)return C(),n.insertBefore(_n,U),Ri=n,B(),j(!0)}else if(o.parentNode===n){s=Ki(o);var I=0,F,Z=_n.parentNode!==n,G=!WG(_n.animated&&_n.toRect||r,o.animated&&o.toRect||s,M),W=M?"top":"left",K=nM(o,"top","top")||nM(_n,"top","top"),J=K?K.scrollTop:void 0;ov!==o&&(F=s[W],Im=!1,ug=!G&&f.invertSwap||Z),I=QG(t,o,s,M,G?1:f.swapThreshold,f.invertedSwapThreshold==null?f.swapThreshold:f.invertedSwapThreshold,ug,ov===o);var q;if(I!==0){var ne=Ds(_n);do ne-=I,q=Ri.children[ne];while(q&&(Mr(q,"display")==="none"||q===Ir))}if(I===0||q===o)return j(!1);ov=o,jm=I;var oe=o.nextElementSibling,Me=!1;Me=I===1;var Pe=dg(yi,n,_n,r,o,s,t,Me);if(Pe!==!1)return(Pe===1||Pe===-1)&&(Me=Pe===1),Nw=!0,setTimeout(KG,30),C(),Me&&!oe?n.appendChild(_n):o.parentNode.insertBefore(_n,Me?oe:o),K&&bN(K,0,J-K.scrollTop),Ri=_n.parentNode,F!==void 0&&!ug&&(Eg=Math.abs(F-Ki(o)[W])),B(),j(!0)}if(n.contains(_n))return j(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){eo(document,"mousemove",this._onTouchMove),eo(document,"touchmove",this._onTouchMove),eo(document,"pointermove",this._onTouchMove),eo(document,"dragover",Wp),eo(document,"mousemove",Wp),eo(document,"touchmove",Wp)},_offUpEvents:function(){var t=this.el.ownerDocument;eo(t,"mouseup",this._onDrop),eo(t,"touchend",this._onDrop),eo(t,"pointerup",this._onDrop),eo(t,"pointercancel",this._onDrop),eo(t,"touchcancel",this._onDrop),eo(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(is=Ds(_n),Bf=Ds(_n,o.draggable),Rl("drop",this,{evt:t}),Ri=_n&&_n.parentNode,is=Ds(_n),Bf=Ds(_n,o.draggable),_r.eventCanceled){this._nulling();return}sv=!1,ug=!1,Im=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Pw(this.cloneId),Pw(this._dragStartId),this.nativeDraggable&&(eo(document,"drop",this),eo(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Rm&&Mr(document.body,"user-select",""),Mr(_n,"transform",""),t&&(Em&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),Ir&&Ir.parentNode&&Ir.parentNode.removeChild(Ir),(yi===Ri||Na&&Na.lastPutMode!=="clone")&&Oi&&Oi.parentNode&&Oi.parentNode.removeChild(Oi),_n&&(this.nativeDraggable&&eo(_n,"dragend",this),N1(_n),_n.style["will-change"]="",Em&&!sv&&os(_n,Na?Na.options.ghostClass:this.options.ghostClass,!1),os(_n,this.options.chosenClass,!1),cl({sortable:this,name:"unchoose",toEl:Ri,newIndex:null,newDraggableIndex:null,originalEvent:t}),yi!==Ri?(is>=0&&(cl({rootEl:Ri,name:"add",toEl:Ri,fromEl:yi,originalEvent:t}),cl({sortable:this,name:"remove",toEl:Ri,originalEvent:t}),cl({rootEl:Ri,name:"sort",toEl:Ri,fromEl:yi,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ri,originalEvent:t})),Na&&Na.save()):is!==vv&&is>=0&&(cl({sortable:this,name:"update",toEl:Ri,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ri,originalEvent:t})),_r.active&&((is==null||is===-1)&&(is=vv,Bf=Dm),cl({sortable:this,name:"end",toEl:Ri,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Rl("nulling",this),yi=_n=Ri=Ir=qp=Oi=wg=Uf=Hp=wu=Em=is=Bf=vv=Dm=ov=jm=Na=sg=_r.dragged=_r.ghost=_r.clone=_r.active=null,Yg.forEach(function(t){t.checked=!0}),Yg.length=A1=T1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":_n&&(this._onDragOver(t),YG(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,r=0,s=o.length,c=this.options;r<s;r++)n=o[r],Ou(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||tz(n));return t},sort:function(t,n){var o={},r=this.el;this.toArray().forEach(function(s,c){var f=r.children[c];Ou(f,this.options.draggable,r,!1)&&(o[s]=f)},this),n&&this.captureAnimationState(),t.forEach(function(s){o[s]&&(r.removeChild(o[s]),r.appendChild(o[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Ou(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var r=ry.modifyOption(this,t,n);typeof r<"u"?o[t]=r:o[t]=n,t==="group"&&xN(o)},destroy:function(){Rl("destroy",this);var t=this.el;t[Cl]=null,eo(t,"mousedown",this._onTapStart),eo(t,"touchstart",this._onTapStart),eo(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(eo(t,"dragover",this),eo(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),qg.splice(qg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Uf){if(Rl("hideClone",this),_r.eventCanceled)return;Mr(Oi,"display","none"),this.options.removeCloneOnHide&&Oi.parentNode&&Oi.parentNode.removeChild(Oi),Uf=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Uf){if(Rl("showClone",this),_r.eventCanceled)return;_n.parentNode==yi&&!this.options.group.revertClone?yi.insertBefore(Oi,_n):qp?yi.insertBefore(Oi,qp):yi.appendChild(Oi),this.options.group.revertClone&&this.animate(_n,Oi),Mr(Oi,"display",""),Uf=!1}}};function YG(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function dg(e,t,n,o,r,s,c,f){var d,_=e[Cl],y=_.options.onMove,b;return window.CustomEvent&&!Ld&&!ny?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=t,d.from=e,d.dragged=n,d.draggedRect=o,d.related=r||t,d.relatedRect=s||Ki(t),d.willInsertAfter=f,d.originalEvent=c,e.dispatchEvent(d),y&&(b=y.call(_,d,c)),b}function N1(e){e.draggable=!1}function KG(){Nw=!1}function ZG(e,t,n){var o=Ki(Pv(n.el,0,n.options,!0)),r=EN(n.el,n.options,Ir),s=10;return t?e.clientX<r.left-s||e.clientY<o.top&&e.clientX<o.right:e.clientY<r.top-s||e.clientY<o.bottom&&e.clientX<o.left}function JG(e,t,n){var o=Ki($E(n.el,n.options.draggable)),r=EN(n.el,n.options,Ir),s=10;return t?e.clientX>r.right+s||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>r.bottom+s||e.clientX>o.right&&e.clientY>o.top}function QG(e,t,n,o,r,s,c,f){var d=o?e.clientY:e.clientX,_=o?n.height:n.width,y=o?n.top:n.left,b=o?n.bottom:n.right,x=!1;if(!c){if(f&&Eg<_*r){if(!Im&&(jm===1?d>y+_*s/2:d<b-_*s/2)&&(Im=!0),Im)x=!0;else if(jm===1?d<y+Eg:d>b-Eg)return-jm}else if(d>y+_*(1-r)/2&&d<b-_*(1-r)/2)return ez(t)}return x=x||c,x&&(d<y+_*s/2||d>b-_*s/2)?d>y+_/2?1:-1:0}function ez(e){return Ds(_n)<Ds(e)?1:-1}function tz(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function nz(e){Yg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&Yg.push(o)}}function Og(e){return setTimeout(e,0)}function Pw(e){return clearTimeout(e)}k_&&ao(document,"touchmove",function(e){(_r.active||sv)&&e.cancelable&&e.preventDefault()});_r.utils={on:ao,off:eo,css:Mr,find:gN,is:function(t,n){return!!Ou(t,n,t,!1)},extend:$G,throttle:_N,closest:Ou,toggleClass:os,clone:wN,index:Ds,nextTick:Og,cancelNextTick:Pw,detectDirection:SN,getChild:Pv,expando:Cl};_r.get=function(e){return e[Cl]};_r.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(_r.utils=hc(hc({},_r.utils),o.utils)),ry.mount(o)})};_r.create=function(e,t){return new _r(e,t)};_r.version=IG;var Yi=[],Om,Rw,Cw=!1,P1,R1,Kg,Sm;function rz(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?ao(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ao(document,"pointermove",this._handleFallbackAutoScroll):o.touches?ao(document,"touchmove",this._handleFallbackAutoScroll):ao(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?eo(document,"dragover",this._handleAutoScroll):(eo(document,"pointermove",this._handleFallbackAutoScroll),eo(document,"touchmove",this._handleFallbackAutoScroll),eo(document,"mousemove",this._handleFallbackAutoScroll)),lM(),Sg(),FG()},nulling:function(){Kg=Rw=Om=Cw=Sm=P1=R1=null,Yi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var r=this,s=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,f=document.elementFromPoint(s,c);if(Kg=n,o||this.options.forceAutoScrollFallback||ny||Ld||Rm){C1(n,this.options,f,o);var d=Gf(f,!0);Cw&&(!Sm||s!==P1||c!==R1)&&(Sm&&lM(),Sm=setInterval(function(){var _=Gf(document.elementFromPoint(s,c),!0);_!==d&&(d=_,Sg()),C1(n,r.options,_,o)},10),P1=s,R1=c)}else{if(!this.options.bubbleScroll||Gf(f,!0)===fc()){Sg();return}C1(n,this.options,Gf(f,!1),!1)}}},Rd(e,{pluginName:"scroll",initializeByDefault:!0})}function Sg(){Yi.forEach(function(e){clearInterval(e.pid)}),Yi=[]}function lM(){clearInterval(Sm)}var C1=_N(function(e,t,n,o){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,f=t.scrollSpeed,d=fc(),_=!1,y;Rw!==n&&(Rw=n,Sg(),Om=t.scroll,y=t.scrollFn,Om===!0&&(Om=Gf(n,!0)));var b=0,x=Om;do{var M=x,S=Ki(M),E=S.top,w=S.bottom,C=S.left,j=S.right,B=S.width,$=S.height,U=void 0,I=void 0,F=M.scrollWidth,Z=M.scrollHeight,G=Mr(M),W=M.scrollLeft,K=M.scrollTop;M===d?(U=B<F&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),I=$<Z&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):(U=B<F&&(G.overflowX==="auto"||G.overflowX==="scroll"),I=$<Z&&(G.overflowY==="auto"||G.overflowY==="scroll"));var J=U&&(Math.abs(j-r)<=c&&W+B<F)-(Math.abs(C-r)<=c&&!!W),q=I&&(Math.abs(w-s)<=c&&K+$<Z)-(Math.abs(E-s)<=c&&!!K);if(!Yi[b])for(var ne=0;ne<=b;ne++)Yi[ne]||(Yi[ne]={});(Yi[b].vx!=J||Yi[b].vy!=q||Yi[b].el!==M)&&(Yi[b].el=M,Yi[b].vx=J,Yi[b].vy=q,clearInterval(Yi[b].pid),(J!=0||q!=0)&&(_=!0,Yi[b].pid=setInterval((function(){o&&this.layer===0&&_r.active._onTouchMove(Kg);var oe=Yi[this.layer].vy?Yi[this.layer].vy*f:0,Me=Yi[this.layer].vx?Yi[this.layer].vx*f:0;typeof y=="function"&&y.call(_r.dragged.parentNode[Cl],Me,oe,e,Kg,Yi[this.layer].el)!=="continue"||bN(Yi[this.layer].el,Me,oe)}).bind({layer:b}),24))),b++}while(t.bubbleScroll&&x!==d&&(x=Gf(x,!1)));Cw=_}},30),TN=function(t){var n=t.originalEvent,o=t.putSortable,r=t.dragEl,s=t.activeSortable,c=t.dispatchSortableEvent,f=t.hideGhostForTarget,d=t.unhideGhostForTarget;if(n){var _=o||s;f();var y=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,b=document.elementFromPoint(y.clientX,y.clientY);d(),_&&!_.el.contains(b)&&(c("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function FE(){}FE.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=Pv(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:TN};Rd(FE,{pluginName:"revertOnSpill"});function VE(){}VE.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,r=o||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:TN};Rd(VE,{pluginName:"removeOnSpill"});_r.mount(new rz);_r.mount(VE,FE);const oz={class:"dialog-footer"},iz=Rn({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Ae(),s=Ae(!1),c=Ae(!1),f=Ae({name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],defaultValue:""}),d=jd({name:[{required:!0,message:yt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:yt("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:yt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),_=Ae(!1);Kf(_,M=>{M||(f.value={name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],defaultValue:""},c.value=!1)});const y=M=>{M&&(f.value=ye.cloneDeep(M),c.value=!0),_.value=!0},b=()=>{_.value=!1,c.value=!1},x=async M=>{M&&await M.validate(S=>{S&&o("refresh",f.value)})};return t({open:y,close:b}),(M,S)=>{const E=Y("el-input"),w=Y("el-form-item"),C=Y("el-switch"),j=Y("el-form"),B=Y("el-button"),$=Y("el-dialog");return ce(),Ge($,{title:c.value?M.$t("common.param.editParam"):M.$t("common.param.addParam"),modelValue:_.value,"onUpdate:modelValue":S[8]||(S[8]=U=>_.value=U),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:N(()=>[X("span",oz,[T(B,{onClick:S[6]||(S[6]=Bt(U=>_.value=!1,["prevent"]))},{default:N(()=>[Je(fe(M.$t("common.cancel")),1)]),_:1}),T(B,{type:"primary",onClick:S[7]||(S[7]=U=>x(r.value)),loading:s.value},{default:N(()=>[Je(fe(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:d,model:f.value,"require-asterisk-position":"right"},{default:N(()=>[T(w,{label:M.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:N(()=>[T(E,{modelValue:f.value.variable,"onUpdate:modelValue":S[0]||(S[0]=U=>f.value.variable=U),placeholder:M.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:S[1]||(S[1]=U=>f.value.variable=f.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),T(w,{label:M.$t("dynamicsForm.paramForm.required.label"),onClick:S[3]||(S[3]=Bt(()=>{},["prevent"]))},{default:N(()=>[T(C,{size:"small",modelValue:f.value.isRequired,"onUpdate:modelValue":S[2]||(S[2]=U=>f.value.isRequired=U)},null,8,["modelValue"])]),_:1},8,["label"]),T(w,{label:M.$t("dynamicsForm.default.label"),prop:"defaultValue",rules:{required:f.value.isRequired,message:M.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:N(()=>[T(E,{modelValue:f.value.defaultValue,"onUpdate:modelValue":S[4]||(S[4]=U=>f.value.defaultValue=U),placeholder:M.$t("dynamicsForm.default.placeholder"),onBlur:S[5]||(S[5]=U=>f.value.name=f.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),az={class:"flex-between mb-16"},lz={class:"lighter"},sz=["title"],uz=["title"],cz={class:"mr-4"},dz=Rn({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=Ae(null),r=Ae(),s=Ae([]);function c(y,b){typeof b<"u"&&(o.value=b),r.value.open(y)}function f(y){s.value.splice(y,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),_()}function d(y){for(let x=0;x<s.value.length;x++)if(s.value[x].variable===y.variable&&o.value!==x){Ra(yt("workflow.tip.paramErrorMessage")+y.variable);return}const b=t.nodeModel.properties.userInputFieldList;for(let x=0;x<b.length;x++)if(b[x].field===y.variable){Ra(yt("workflow.tip.paramErrorMessage")+y.variable);return}o.value!==null?s.value.splice(o.value,1,y):s.value.push(y),o.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),_()}function _(){if(!n.value)return;const b=n.value.$el.querySelector(".el-table__body-wrapper tbody");b&&_r.create(b,{animation:150,ghostClass:"ghost-row",onEnd:x=>{if(x.oldIndex===void 0||x.newIndex===void 0)return;const M=[...s.value],[S]=M.splice(x.oldIndex,1);M.splice(x.newIndex,0,S),s.value=M,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return kr(()=>{t.nodeModel.properties.apiInputFieldList?s.value.push(...t.nodeModel.properties.apiInputFieldList):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(y=>y.assignment_method==="api_input").forEach(y=>{s.value.push(y)}),ye.set(t.nodeModel.properties,"apiInputFieldList",s)}),(y,b)=>{var $;const x=Y("Plus"),M=Y("el-icon"),S=Y("el-button"),E=Y("el-table-column"),w=Y("el-switch"),C=Y("AppIcon"),j=Y("el-tooltip"),B=Y("el-table");return ce(),Rt(Fn,null,[X("div",az,[X("h5",lz,fe(y.$t("views.model.modelForm.title.apiParamPassing")),1),T(S,{link:"",type:"primary",onClick:b[0]||(b[0]=U=>c())},{default:N(()=>[T(M,{class:"mr-4"},{default:N(()=>[T(x)]),_:1}),Je(" "+fe(y.$t("common.add")),1)]),_:1})]),(($=t.nodeModel.properties.apiInputFieldList)==null?void 0:$.length)>0?(ce(),Ge(B,{key:0,data:t.nodeModel.properties.apiInputFieldList,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:N(()=>[T(E,{prop:"variable",label:y.$t("dynamicsForm.paramForm.field.label")},{default:N(({row:U})=>[X("span",{class:"ellipsis-1",title:U.variable},fe(U.variable),9,sz)]),_:1},8,["label"]),T(E,{prop:"defaultValue",label:y.$t("dynamicsForm.default.label")},{default:N(({row:U})=>[X("span",{class:"ellipsis-1",title:U.defaultValue},fe(U.defaultValue),9,uz)]),_:1},8,["label"]),T(E,{label:y.$t("common.required")},{default:N(({row:U})=>[X("div",{onClick:b[1]||(b[1]=Bt(()=>{},["stop"]))},[T(w,{disabled:"",size:"small",modelValue:U.isRequired,"onUpdate:modelValue":I=>U.isRequired=I},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),T(E,{label:y.$t("common.operation"),align:"left",width:"90"},{default:N(({row:U,$index:I})=>[X("span",cz,[T(j,{effect:"dark",content:y.$t("common.modify"),placement:"top"},{default:N(()=>[T(S,{type:"primary",text:"",onClick:Bt(F=>c(U,I),["stop"])},{default:N(()=>[T(C,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),T(j,{effect:"dark",content:y.$t("common.delete"),placement:"top"},{default:N(()=>[T(S,{type:"primary",text:"",onClick:F=>f(I)},{default:N(()=>[T(C,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Qt("",!0),T(iz,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:d},null,512)],64)}}}),fz={class:"dialog-footer"},pz=Rn({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Ae(),s=Ae(!1),c=Ae(!1),f=Ae(),d=(w,C)=>w.every(j=>iT.get(C,j,void 0)!==void 0),_=jn(()=>{if(f.value){const w=f.value;switch(w.type){case"input":return d(["field","input_type","label","required","attrs"],f.value)?f.value:{attrs:w.attrs||{maxlength:200,minlength:0},field:w.field||w.variable,input_type:"TextInput",label:w.label||w.name,defaultValue:w.defaultValue,required:w.required!=null?w.required:w.isRequired};case"select":return d(["field","input_type","label","required","option_list"],f.value)?f.value:{attrs:w.attrs||{},field:w.field||w.variable,input_type:"SingleSelect",label:w.label||w.name,defaultValue:w.defaultValue,required:w.required!=null?w.required:w.isRequired,option_list:w.option_list?w.option_list:w.optionList.map(C=>({key:C,value:C}))};case"date":return d(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],f.value)?f.value:{field:w.field||w.variable,input_type:"DatePicker",label:w.label||w.name,defaultValue:w.defaultValue,required:w.required!=null?w.required:w.isRequired,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return f.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:200,minlength:0},show_default_value:!0}}),y=Ae(null),b=Ae([{label:yt("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:yt("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:yt("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:yt("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:yt("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:yt("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:yt("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),x=Ae(!1),M=(w,C)=>{x.value=!0,w?(c.value=!0,f.value=ye.cloneDeep(w),y.value=C):f.value=null},S=()=>{x.value=!1,c.value=!1,y.value=null,f.value=null},E=async()=>{const w=r.value;w&&await w.validate().then(()=>{o("refresh",w==null?void 0:w.getData(),y.value),c.value=!1,f.value=null,y.value=null})};return t({open:M,close:S}),(w,C)=>{const j=Y("el-button"),B=Y("el-dialog");return ce(),Ge(B,{title:c.value?w.$t("common.param.editParam"):w.$t("common.param.addParam"),modelValue:x.value,"onUpdate:modelValue":C[2]||(C[2]=$=>x.value=$),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":S,"append-to-body":""},{footer:N(()=>[X("span",fz,[T(j,{onClick:Bt(S,["prevent"])},{default:N(()=>[Je(fe(w.$t("common.cancel")),1)]),_:1}),T(j,{type:"primary",onClick:C[1]||(C[1]=$=>E()),loading:s.value},{default:N(()=>[Je(fe(c.value?w.$t("common.save"):w.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(d_,{modelValue:_.value,"onUpdate:modelValue":C[0]||(C[0]=$=>_.value=$),"label-position":"top","require-asterisk-position":"right",input_type_list:b.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),hz={class:"dialog-footer"},kN=Rn({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Ae(),s=Ae(!1),c=Ae({title:yt("chat.userInput")}),f=jd({title:[{required:!0,message:yt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),d=Ae(!1),_=x=>{x&&(c.value=ye.cloneDeep(x)),d.value=!0},y=()=>{d.value=!1},b=async x=>{x&&await x.validate(M=>{M&&o("refresh",c.value)})};return t({open:_,close:y}),(x,M)=>{const S=Y("el-input"),E=Y("el-form-item"),w=Y("el-form"),C=Y("el-button"),j=Y("el-dialog");return ce(),Ge(j,{title:x.$t("common.setting"),modelValue:d.value,"onUpdate:modelValue":M[4]||(M[4]=B=>d.value=B),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":y,"append-to-body":""},{footer:N(()=>[X("span",hz,[T(C,{onClick:M[2]||(M[2]=Bt(B=>d.value=!1,["prevent"]))},{default:N(()=>[Je(fe(x.$t("common.cancel")),1)]),_:1}),T(C,{type:"primary",onClick:M[3]||(M[3]=B=>b(r.value)),loading:s.value},{default:N(()=>[Je(fe(x.$t("common.save")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(w,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:f,model:c.value,"require-asterisk-position":"right"},{default:N(()=>[T(E,{label:x.$t("common.title"),prop:"title"},{default:N(()=>[T(S,{modelValue:c.value.title,"onUpdate:modelValue":M[0]||(M[0]=B=>c.value.title=B),maxlength:"64","show-word-limit":"",onBlur:M[1]||(M[1]=B=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),vz={class:"flex-between mb-16"},mz=["title"],yz={class:"ml-4"},gz=["title"],_z={key:0},bz=["title"],wz={key:1},Ez=["title"],Oz=["title"],Sz={class:"mr-4"},xz=Rn({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=Ae(),r=Ae(),s=Ae([]),c=Ae({title:yt("chat.userInput")});function f(S,E){o.value.open(S,E)}function d(){r.value.open(c.value)}function _(S){s.value.splice(S,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),M()}function y(S,E){for(let C=0;C<s.value.length;C++)if(s.value[C].field===S.field&&E!==C){Ra(yt("workflow.tip.paramErrorMessage")+S.field);return}const w=t.nodeModel.properties.apiInputFieldList;for(let C=0;C<w.length;C++)if(w[C].variable===S.field){Ra(yt("workflow.tip.paramErrorMessage")+S.field);return}E!==null?s.value.splice(E,1,S):s.value.push(S),o.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),M()}function b(S){c.value=S,r.value.close()}const x=S=>{var E;if(S.input_type==="PasswordInput")return"******";if(S.defaultValue){const w=(E=S.option_list)==null?void 0:E.filter(C=>S.defaultValue.indexOf(C.value)>-1).map(C=>C.label).join(",");return w||S.defaultValue}if(S.defaultValue!==void 0)return S.defaultValue};function M(){if(!n.value)return;const E=n.value.$el.querySelector(".el-table__body-wrapper tbody");E&&_r.create(E,{animation:150,ghostClass:"ghost-row",onEnd:w=>{if(w.oldIndex===void 0||w.newIndex===void 0)return;const C=[...s.value],[j]=C.splice(w.oldIndex,1);C.splice(w.newIndex,0,j),s.value=C,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return kr(()=>{t.nodeModel.properties.userInputFieldList?s.value.push(...t.nodeModel.properties.userInputFieldList):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(S=>S.assignment_method==="user_input").forEach(S=>{s.value.push(S)}),s.value.forEach((S,E)=>{switch(S.label=S.label||S.name,S.field=S.field||S.variable,S.required=S.required||S.isRequired,S.type){case"input":S.input_type="TextInput";break;case"select":S.input_type="SingleSelect";break;case"date":S.input_type="DatePicker";break}}),ye.set(t.nodeModel.properties,"userInputFieldList",s),t.nodeModel.properties.userInputConfig&&(c.value=t.nodeModel.properties.userInputConfig),ye.set(t.nodeModel.properties,"userInputConfig",c),M()}),(S,E)=>{var Z;const w=Y("el-button"),C=Y("Plus"),j=Y("el-icon"),B=Y("el-table-column"),$=Y("el-tag"),U=Y("el-switch"),I=Y("el-tooltip"),F=Y("el-table");return ce(),Rt(Fn,null,[X("div",vz,[X("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},fe(c.value.title),9,mz),X("div",null,[T(w,{type:"primary",link:"",onClick:d},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1}),X("span",yz,[T(w,{link:"",type:"primary",onClick:E[0]||(E[0]=G=>f())},{default:N(()=>[T(j,{class:"mr-4"},{default:N(()=>[T(C)]),_:1}),Je(" "+fe(S.$t("common.add")),1)]),_:1})])])]),((Z=t.nodeModel.properties.userInputFieldList)==null?void 0:Z.length)>0?(ce(),Ge(F,{key:0,data:t.nodeModel.properties.userInputFieldList,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:N(()=>[T(B,{prop:"field",label:S.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:N(({row:G})=>[X("span",{title:G.field,class:"ellipsis-1"},fe(G.field),9,gz)]),_:1},8,["label"]),T(B,{prop:"label",label:S.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:G})=>[G.label&&G.label.input_type==="TooltipLabel"?(ce(),Rt("span",_z,[X("span",{title:G.label.label,class:"ellipsis-1"},fe(G.label.label),9,bz)])):(ce(),Rt("span",wz,[X("span",{title:G.label,class:"ellipsis-1"},fe(G.label),9,Ez)]))]),_:1},8,["label"]),T(B,{label:S.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:N(({row:G})=>[G.input_type==="TextInput"?(ce(),Ge($,{key:0,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):Qt("",!0),G.input_type==="PasswordInput"?(ce(),Ge($,{key:1,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):Qt("",!0),G.input_type==="Slider"?(ce(),Ge($,{key:2,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):Qt("",!0),G.input_type==="SwitchInput"?(ce(),Ge($,{key:3,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):Qt("",!0),G.input_type==="SingleSelect"?(ce(),Ge($,{key:4,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):Qt("",!0),G.input_type==="MultiSelect"?(ce(),Ge($,{key:5,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):Qt("",!0),G.input_type==="RadioCard"?(ce(),Ge($,{key:6,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):Qt("",!0),G.input_type==="DatePicker"?(ce(),Ge($,{key:7,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):Qt("",!0)]),_:1},8,["label"]),T(B,{prop:"defaultValue",label:S.$t("dynamicsForm.default.label")},{default:N(({row:G})=>[X("span",{title:G.defaultValue,class:"ellipsis-1"},fe(x(G)),9,Oz)]),_:1},8,["label"]),T(B,{label:S.$t("common.required")},{default:N(({row:G})=>[X("div",{onClick:E[1]||(E[1]=Bt(()=>{},["stop"]))},[T(U,{disabled:"",size:"small",modelValue:G.required,"onUpdate:modelValue":W=>G.required=W},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),T(B,{label:S.$t("common.operation"),align:"left",width:"90"},{default:N(({row:G,$index:W})=>[X("span",Sz,[T(I,{effect:"dark",content:S.$t("common.modify"),placement:"top"},{default:N(()=>[T(w,{type:"primary",text:"",onClick:Bt(K=>f(G,W),["stop"])},{default:N(()=>[T(fr,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),T(I,{effect:"dark",content:S.$t("common.delete"),placement:"top"},{default:N(()=>[T(w,{type:"primary",text:"",onClick:K=>_(W)},{default:N(()=>[T(fr,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Qt("",!0),T(pz,{ref_key:"UserFieldFormDialogRef",ref:o,onRefresh:y},null,512),T(kN,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:b},null,512)],64)}}}),Mz="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.8146C19.9934%202%2020.1647%202.07183%2020.29%202.19934L26.4756%208.49255C26.5982%208.61722%2026.6668%208.78505%2026.6668%208.95987V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.02637C20.1089%202.05793%2020.2089%202.11704%2020.2899%202.19936L26.4755%208.49256C26.5261%208.54408%2026.5675%208.60297%2026.5987%208.66668H21.5135C20.6776%208.66668%2020%207.98906%2020%207.15317V2.02637Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M10.7636%2013.5757H20.8727C20.9932%2013.5757%2021.0909%2013.6734%2021.0909%2013.7939V14.8121C21.0909%2014.9326%2020.9932%2015.0303%2020.8727%2015.0303H10.7636C10.6431%2015.0303%2010.5454%2014.9326%2010.5454%2014.8121V13.7939C10.5454%2013.6734%2010.6431%2013.5757%2010.7636%2013.5757ZM10.7636%2017.9394H20.8727C20.9932%2017.9394%2021.0909%2018.0371%2021.0909%2018.1576V19.1757C21.0909%2019.2962%2020.9932%2019.3939%2020.8727%2019.3939H10.7636C10.6431%2019.3939%2010.5454%2019.2962%2010.5454%2019.1757V18.1576C10.5454%2018.0371%2010.6431%2017.9394%2010.7636%2017.9394ZM10.7636%2022.303H16.1454C16.2659%2022.303%2016.3636%2022.4007%2016.3636%2022.5212V23.5394C16.3636%2023.6599%2016.2659%2023.7576%2016.1454%2023.7576H10.7636C10.6431%2023.7576%2010.5454%2023.6599%2010.5454%2023.5394V22.5212C10.5454%2022.4007%2010.6431%2022.303%2010.7636%2022.303Z'%20fill='white'/%3e%3c/svg%3e",Az="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%2314C0FF'/%3e%3cpath%20d='M20%202.05988C20.072%202.09264%2020.1383%202.13825%2020.1953%202.19526L26.4714%208.4714C26.5284%208.52841%2026.574%208.59467%2026.6068%208.66666H21.3333C20.597%208.66666%2020%208.06971%2020%207.33333V2.05988Z'%20fill='%2311A3D9'/%3e%3cpath%20d='M11.3335%2016C12.4381%2016%2013.3335%2015.1046%2013.3335%2014C13.3335%2012.8954%2012.4381%2012%2011.3335%2012C10.2289%2012%209.3335%2012.8954%209.3335%2014C9.3335%2015.1046%2010.2289%2016%2011.3335%2016Z'%20fill='white'/%3e%3cpath%20d='M22.2785%2014.9317C22.4218%2014.7884%2022.6668%2014.8899%2022.6668%2015.0925V24.0645C22.6668%2024.1901%2022.565%2024.2919%2022.4394%2024.2919H13.4674L13.4587%2024.2918H9.56142C9.35877%2024.2918%209.25728%2024.0468%209.40058%2023.9035L14.366%2018.938C14.4549%2018.8492%2014.5989%2018.8492%2014.6877%2018.938L16.48%2020.7302L22.2785%2014.9317Z'%20fill='white'/%3e%3c/svg%3e",Tz="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.05994C20.072%202.0927%2020.1383%202.13831%2020.1953%202.19532L26.4714%208.47146C26.5284%208.52847%2026.574%208.59473%2026.6068%208.66672H21.3333C20.597%208.66672%2020%208.06977%2020%207.33339V2.05994Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M19.976%2012.8794C20.254%2012.9447%2020.4595%2013.1796%2020.4872%2013.4638L20.6106%2014.7297C20.6546%2015.1805%2020.2459%2015.5429%2019.8037%2015.4455L16.7344%2014.7691C16.5577%2014.7302%2016.3944%2014.8747%2016.4116%2015.0548L17.1297%2022.5884C17.1297%2022.7046%2017.1151%2022.7812%2017.0891%2022.8249C17.0254%2024.3752%2015.7484%2025.6124%2014.1825%2025.6124C12.5759%2025.6124%2011.2734%2024.31%2011.2734%2022.7033C11.2734%2021.0967%2012.5759%2019.7942%2014.1825%2019.7942C14.8467%2019.7942%2015.4589%2020.0168%2015.9485%2020.3914L15.274%2012.6749C15.2345%2012.2228%2015.6485%2011.8642%2016.0904%2011.9678L19.976%2012.8794Z'%20fill='white'/%3e%3c/svg%3e",kz="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%202.5C4%201.94772%204.44772%201.5%205%201.5H14.7929C14.9255%201.5%2015.0527%201.55268%2015.1464%201.64645L19.8536%206.35355C19.9473%206.44732%2020%206.5745%2020%206.70711V21.5C20%2022.0523%2019.5523%2022.5%2019%2022.5H5C4.44772%2022.5%204%2022.0523%204%2021.5V2.5Z'%20fill='%238F959E'/%3e%3cpath%20d='M15%201.54492C15.054%201.56949%2015.1037%201.6037%2015.1464%201.64646L19.8536%206.35357C19.8963%206.39632%2019.9305%206.44602%2019.9551%206.50001H16C15.4477%206.50001%2015%206.0523%2015%205.50001V1.54492Z'%20fill='%23646A73'/%3e%3cpath%20d='M14.288%209.86441C13.7422%209.34739%2013.026%209.09082%2012.1353%209.09082C11.1347%209.09082%2010.3505%209.41162%209.78235%2010.065C9.30108%2010.6265%209.04179%2011.1646%209.00471%2012.013C9.00384%2012.033%209.00309%2012.0697%209.00247%2012.1122C9.00043%2012.2508%209.11287%2012.3635%209.25147%2012.3635H9.84253C9.98%2012.3635%2010.0914%2012.2525%2010.0936%2012.1151C10.0943%2012.0737%2010.0951%2012.038%2010.0961%2012.0189C10.1251%2011.4328%2010.278%2011.1262%2010.5508%2010.7851C10.8953%2010.3259%2011.4006%2010.0999%2012.0943%2010.0999C12.7134%2010.0999%2013.1776%2010.2578%2013.4979%2010.5782C13.8033%2010.8963%2013.9625%2011.3294%2013.9625%2011.8726C13.9625%2012.2435%2013.8281%2012.5967%2013.5549%2012.948C13.4678%2013.0568%2013.3425%2013.1862%2012.9388%2013.5899C12.3012%2014.1474%2011.9073%2014.601%2011.6993%2015.0468C11.5282%2015.3888%2011.441%2015.7775%2011.441%2016.1954V16.4772C11.441%2016.6153%2011.5529%2016.7272%2011.691%2016.7272H12.2956C12.4336%2016.7272%2012.5456%2016.6153%2012.5456%2016.4772V16.1954C12.5456%2015.8413%2012.6327%2015.5237%2012.8133%2015.2141C12.9486%2014.9841%2013.1223%2014.8038%2013.4251%2014.5389C14.0321%2013.9897%2014.3689%2013.6625%2014.5198%2013.4705C14.8821%2012.9923%2015.0671%2012.4446%2015.0671%2011.8454C15.0671%2011.0185%2014.8075%2010.355%2014.288%209.86441ZM11.7046%2017.8181C11.5666%2017.8181%2011.4546%2017.93%2011.4546%2018.0681V18.659C11.4546%2018.7971%2011.5666%2018.909%2011.7046%2018.909H12.2956C12.4336%2018.909%2012.5456%2018.7971%2012.5456%2018.659V18.0681C12.5456%2017.93%2012.4336%2017.8181%2012.2956%2017.8181H11.7046Z'%20fill='white'/%3e%3c/svg%3e",Nz={class:"flex-between"},Pz={class:"flex align-center"},Rz={class:"line-height-22 mt-4"},Cz={class:"flex-between"},Dz={class:"flex align-center"},jz={class:"line-height-22 mt-4"},Iz={class:"flex-between"},Lz={class:"flex align-center"},$z={class:"line-height-22 mt-4"},Fz={class:"flex-between"},Vz={class:"flex align-center"},Bz={class:"line-height-22 mt-4"},Uz={class:"dialog-footer"},Gz=Rn({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=e,s=Ae(!1),c=Ae(!1),f=Ae(""),d=Ae(!1),_=Ae(),y=Ae(),b=["TXT","MD","DOCX","HTML","CSV","XLSX","XLS","PDF"],x=["JPG","JPEG","PNG","GIF"],M=["MP3","WAV","OGG","ACC","M4A"],S=Ae({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["PPT","DOC"]});function E(U){s.value=!0,Pg(()=>{S.value={...S.value,...U}})}function w(){s.value=!1}const C=U=>{S.value.otherExtensions=S.value.otherExtensions.filter(I=>I!==U)},j=()=>{c.value=!0,Pg(()=>{y.value.input.focus()})},B=()=>{if(f.value){if(f.value=f.value.toUpperCase(),S.value.otherExtensions.includes(f.value)||b.includes(f.value)||x.includes(f.value)||M.includes(f.value)){c.value=!1,f.value="",HI(yt("common.fileUpload.existingExtensionsTip"));return}S.value.otherExtensions.push(f.value)}c.value=!1,f.value=""};async function $(){const U=_.value;U&&await U.validate().then(()=>{const I=ye.cloneDeep(S.value);o("refresh",I),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),s.value=!1})}return t({open:E}),(U,I)=>{const F=Y("el-slider"),Z=Y("el-form-item"),G=Y("el-text"),W=Y("el-checkbox"),K=Y("el-card"),J=Y("el-tag"),q=Y("el-input"),ne=Y("el-button"),oe=Y("el-space"),Me=Y("el-form"),Pe=Y("el-dialog");return ce(),Ge(Pe,{title:U.$t("workflow.nodes.baseNode.FileUploadSetting.title"),modelValue:s.value,"onUpdate:modelValue":I[16]||(I[16]=Ee=>s.value=Ee),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":w,"append-to-body":"",width:"800"},{footer:N(()=>[X("span",Uz,[T(ne,{onClick:Bt(w,["prevent"])},{default:N(()=>[Je(fe(U.$t("common.cancel")),1)]),_:1}),T(ne,{type:"primary",onClick:I[15]||(I[15]=Ee=>$()),loading:d.value},{default:N(()=>[Je(fe(U.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(Me,{"label-position":"top",ref_key:"fieldFormRef",ref:_,model:S.value,"require-asterisk-position":"right"},{default:N(()=>[T(Z,{label:U.$t("workflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:N(()=>[T(F,{modelValue:S.value.maxFiles,"onUpdate:modelValue":I[0]||(I[0]=Ee=>S.value.maxFiles=Ee),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),T(Z,{label:U.$t("workflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:N(()=>[T(F,{modelValue:S.value.fileLimit,"onUpdate:modelValue":I[1]||(I[1]=Ee=>S.value.fileLimit=Ee),"show-input":"","show-input-controls":!1,min:1,max:1e3},null,8,["modelValue"])]),_:1},8,["label"]),T(Z,{label:U.$t("workflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:N(()=>[T(K,{shadow:"hover",class:Dl(["card-checkbox cursor w-full mb-8",S.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:I[4]||(I[4]=Bt(Ee=>S.value.document=!S.value.document,["stop"]))},{default:N(()=>[X("div",Nz,[X("div",Pz,[I[17]||(I[17]=X("img",{class:"mr-12",src:Mz,alt:""},null,-1)),X("div",null,[X("p",Rz,[Je(fe(U.$t("common.fileUpload.document"))+" ",1),T(G,{class:"color-secondary"},{default:N(()=>[Je(fe(U.$t("workflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})]),X("p",null,fe(b.join("、")),1)])]),T(W,{modelValue:S.value.document,"onUpdate:modelValue":I[2]||(I[2]=Ee=>S.value.document=Ee),onChange:I[3]||(I[3]=Ee=>S.value.document=!S.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),T(K,{shadow:"hover",class:Dl(["card-checkbox cursor w-full mb-8",S.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:I[7]||(I[7]=Bt(Ee=>S.value.image=!S.value.image,["stop"]))},{default:N(()=>[X("div",Cz,[X("div",Dz,[I[18]||(I[18]=X("img",{class:"mr-12",src:Az,alt:""},null,-1)),X("div",null,[X("p",jz,[Je(fe(U.$t("common.fileUpload.image"))+" ",1),T(G,{class:"color-secondary"},{default:N(()=>[Je(fe(U.$t("workflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})]),X("p",null,fe(x.join("、")),1)])]),T(W,{modelValue:S.value.image,"onUpdate:modelValue":I[5]||(I[5]=Ee=>S.value.image=Ee),onChange:I[6]||(I[6]=Ee=>S.value.image=!S.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),T(K,{shadow:"hover",class:Dl(["card-checkbox cursor w-full mb-8",S.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:I[10]||(I[10]=Bt(Ee=>S.value.audio=!S.value.audio,["stop"]))},{default:N(()=>[X("div",Iz,[X("div",Lz,[I[19]||(I[19]=X("img",{class:"mr-12",src:Tz,alt:""},null,-1)),X("div",null,[X("p",$z,[Je(fe(U.$t("common.fileUpload.audio"))+" ",1),T(G,{class:"color-secondary"},{default:N(()=>[Je(fe(U.$t("workflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})]),X("p",null,fe(M.join("、")),1)])]),T(W,{modelValue:S.value.audio,"onUpdate:modelValue":I[8]||(I[8]=Ee=>S.value.audio=Ee),onChange:I[9]||(I[9]=Ee=>S.value.audio=!S.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"]),T(K,{shadow:"hover",class:Dl(["card-checkbox cursor w-full mb-8",S.value.other?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:I[14]||(I[14]=Bt(Ee=>S.value.other=!S.value.other,["stop"]))},{default:N(()=>[X("div",Fz,[X("div",Vz,[I[20]||(I[20]=X("img",{class:"mr-12",width:32,src:kz,alt:""},null,-1)),X("div",null,[X("p",Bz,[Je(fe(U.$t("common.fileUpload.other"))+" ",1),T(G,{class:"color-secondary"},{default:N(()=>[Je(fe(U.$t("workflow.nodes.baseNode.FileUploadSetting.fileUploadType.otherText")),1)]),_:1})]),T(oe,{wrap:"",size:2,class:"mt-4"},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(S.value.otherExtensions,Ee=>(ce(),Ge(J,{key:Ee,closable:"","disable-transitions":!1,onClose:we=>C(Ee),type:"info",class:"mr-4",effect:"plain",style:{"--el-tag-border-radius":"4px","--el-tag-border-color":"var(--el-border-color)"}},{default:N(()=>[Je(fe(Ee),1)]),_:2},1032,["onClose"]))),128)),c.value?(ce(),Ge(q,{key:0,ref_key:"InputRef",ref:y,modelValue:f.value,"onUpdate:modelValue":I[11]||(I[11]=Ee=>f.value=Ee),size:"small",onKeyup:zI(B,["enter"]),onBlur:B},null,8,["modelValue"])):(ce(),Ge(ne,{key:1,class:"button-new-tag",size:"small",onClick:Bt(j,["stop"])},{default:N(()=>[Je(" + "+fe(U.$t("common.fileUpload.addExtensions")),1)]),_:1}))]),_:1})])]),T(W,{modelValue:S.value.other,"onUpdate:modelValue":I[12]||(I[12]=Ee=>S.value.other=Ee),onChange:I[13]||(I[13]=Ee=>S.value.other=!S.value.other)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),zz={class:"dialog-footer"},Hz=Rn({__name:"ChatFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Ae(),s=Ae(!1),c=Ae(!1),f=Ae(null),d=Ae({field:"",label:""}),_=jd({label:[{required:!0,message:yt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:yt("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:yt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),y=Ae(!1),b=(S,E)=>{S&&(d.value=ye.cloneDeep(S),c.value=!0,f.value=E),y.value=!0},x=()=>{y.value=!1,c.value=!1,f.value=null,d.value={field:"",label:""}},M=async S=>{S&&await S.validate(E=>{E&&o("refresh",d.value,f.value)})};return t({open:b,close:x}),(S,E)=>{const w=Y("el-input"),C=Y("el-form-item"),j=Y("el-form"),B=Y("el-button"),$=Y("el-dialog");return ce(),Ge($,{title:c.value?S.$t("common.param.editParam"):S.$t("common.param.addParam"),modelValue:y.value,"onUpdate:modelValue":E[3]||(E[3]=U=>y.value=U),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:N(()=>[X("span",zz,[T(B,{onClick:Bt(x,["prevent"])},{default:N(()=>[Je(fe(S.$t("common.cancel")),1)]),_:1}),T(B,{type:"primary",onClick:E[2]||(E[2]=U=>M(r.value)),loading:s.value},{default:N(()=>[Je(fe(c.value?S.$t("common.save"):S.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:_,model:d.value,"require-asterisk-position":"right"},{default:N(()=>[T(C,{label:S.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:_.field},{default:N(()=>[T(w,{modelValue:d.value.field,"onUpdate:modelValue":E[0]||(E[0]=U=>d.value.field=U),maxlength:64,placeholder:S.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),T(C,{label:S.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:_.label},{default:N(()=>[T(w,{modelValue:d.value.label,"onUpdate:modelValue":E[1]||(E[1]=U=>d.value.label=U),maxlength:64,"show-word-limit":"",placeholder:S.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),Wz={class:"flex-between mb-16"},Xz={class:"break-all ellipsis lighter",style:{"max-width":"80%"}},qz={class:"ml-4"},Yz=["title"],Kz=["title"],Zz={class:"mr-4"},Jz=Rn({__name:"ChatFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=Ae(),r=Ae([]);function s(d,_){o.value.open(d,_)}function c(d){r.value.splice(d,1),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}function f(d,_){for(let y=0;y<r.value.length;y++)if(r.value[y].field===d.field&&_!==y){Ra(yt("workflow.tip.paramErrorMessage")+d.field);return}[void 0,null].includes(_)?r.value.push(d):r.value.splice(_,1,d),o.value.close(),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}return kr(()=>{t.nodeModel.properties.chatInputFieldList&&(r.value=ye.cloneDeep(t.nodeModel.properties.chatInputFieldList)),ye.set(t.nodeModel.properties,"chatInputFieldList",r)}),(d,_)=>{var E;const y=Y("AppIcon"),b=Y("el-button"),x=Y("el-table-column"),M=Y("el-tooltip"),S=Y("el-table");return ce(),Rt(Fn,null,[X("div",Wz,[X("h5",Xz,fe(d.$t("workflow.variable.chat")),1),X("div",null,[X("span",qz,[T(b,{link:"",type:"primary",onClick:_[0]||(_[0]=w=>s())},{default:N(()=>[T(y,{iconName:"app-add-outlined",class:"mr-4"}),Je(" "+fe(d.$t("common.add")),1)]),_:1})])])]),((E=t.nodeModel.properties.chatInputFieldList)==null?void 0:E.length)>0?(ce(),Ge(S,{key:0,data:t.nodeModel.properties.chatInputFieldList,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:N(()=>[T(x,{prop:"field",label:d.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:N(({row:w})=>[X("span",{title:w.field,class:"ellipsis-1"},fe(w.field),9,Yz)]),_:1},8,["label"]),T(x,{prop:"label",label:d.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:w})=>[X("span",null,[X("span",{title:w.label,class:"ellipsis-1"},fe(w.label),9,Kz)])]),_:1},8,["label"]),T(x,{label:d.$t("common.operation"),align:"left",width:"90"},{default:N(({row:w,$index:C})=>[X("span",Zz,[T(M,{effect:"dark",content:d.$t("common.modify"),placement:"top"},{default:N(()=>[T(b,{type:"primary",text:"",onClick:Bt(j=>s(w,C),["stop"])},{default:N(()=>[T(y,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),T(M,{effect:"dark",content:d.$t("common.delete"),placement:"top"},{default:N(()=>[T(b,{type:"primary",text:"",onClick:j=>c(C)},{default:N(()=>[T(y,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Qt("",!0),T(Hz,{ref_key:"ChatFieldDialogRef",ref:o,onRefresh:f},null,512)],64)}}}),Qz={class:"flex-between"},eH={class:"flex align-center"},tH={class:"mr-4"},nH={class:"flex-between"},rH={class:"mr-4"},oH={class:"flex"},iH={class:"flex-between"},aH={class:"mr-4"},lH={class:"flex"},sH={class:"w-full"},uH={class:"flex-between w-full"},cH=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("getResourceDetail"),n=Zi(),{params:{id:o}}=n,r=jn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=e,c=Ae(null),f=Ae(null),d=Ae(),_=Ae(),y=Ae(),b=Ae(),x={name:"",desc:"",prologue:yt("views.application.form.defaultPrologue")},M=q=>q.ctrlKey===!0?(q.preventDefault(),!0):(q.stopPropagation(),!0);function S(q){ye.set(s.nodeModel.properties.nodeData,"prologue",q)}const E=jn({get:()=>(s.nodeModel.properties.nodeData||ye.set(s.nodeModel.properties,"nodeData",x),s.nodeModel.properties.nodeData),set:q=>{ye.set(s.nodeModel.properties,"nodeData",q)}}),w=Ae(),C=()=>{var q;return E.value.ttsModelEnable&&!E.value.ttsModelId&&E.value.ttsType==="TTS"?Promise.reject({node:s.nodeModel,errMessage:yt("views.application.form.voicePlay.requiredMessage")}):E.value.sttModelEnable&&!E.value.sttModelId?Promise.reject({node:s.nodeModel,errMessage:yt("views.application.form.voiceInput.requiredMessage")}):(q=w.value)==null?void 0:q.validate().catch(ne=>Promise.reject({node:s.nodeModel,errMessage:ne}))},j=t();function B(){var ne;const q=r.value==="systemManage"?{modelType:"STT",workspaceId:(ne=j.value)==null?void 0:ne.workspaceId}:{modelType:"STT"};ni({type:"model",systemType:r.value}).getSelectModelList(q).then(oe=>{c.value=ye.groupBy(oe==null?void 0:oe.data,"provider")})}function $(){var ne;const q=r.value==="systemManage"?{modelType:"TTS",workspaceId:(ne=j.value)==null?void 0:ne.workspaceId}:{modelType:"TTS"};ni({type:"model",systemType:r.value}).getSelectModelList(q).then(oe=>{f.value=ye.groupBy(oe==null?void 0:oe.data,"provider")})}function U(){Pg(()=>{var q;E.value.ttsModelId?(q=d.value)==null||q.reset_default(E.value.ttsModelId,o):G({})})}function I(){E.value.ttsModelEnable||(E.value.ttsModelId="",E.value.ttsType="BROWSER")}function F(){E.value.sttModelEnable||(E.value.sttModelId="")}const Z=()=>{var ne;const q=E.value.ttsModelId;if(!q){Qm(yt("views.application.form.voicePlay.requiredMessage"));return}(ne=d.value)==null||ne.open(q,o,E.value.ttsModelParamsSetting)},G=q=>{E.value.ttsModelParamsSetting=q},W=()=>{const q={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["ppt","doc"]};E.value.fileUploadEnable&&(E.value.fileUploadSetting=E.value.fileUploadSetting||q),s.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},K=()=>{var q;(q=b.value)==null||q.open(E.value.fileUploadSetting)},J=q=>{E.value.fileUploadSetting=q};return kr(()=>{ye.set(s.nodeModel,"validate",C),s.nodeModel.properties.nodeData.ttsType||ye.set(s.nodeModel.properties.nodeData,"ttsType","BROWSER"),$(),B()}),(q,ne)=>{const oe=Y("el-input"),Me=Y("el-form-item"),Pe=Y("el-tooltip"),Ee=Y("el-button"),we=Y("el-switch"),Be=Y("el-checkbox"),nt=Y("el-radio"),Ot=Y("el-radio-group"),Qe=Y("Operation"),lt=Y("el-icon"),dt=Y("el-form");return ce(),Ge(so,{nodeModel:q.nodeModel},{default:N(()=>[T(dt,{onSubmit:ne[13]||(ne[13]=Bt(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:w},{default:N(()=>[T(Me,{label:q.$t("workflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:Jt(yt)("views.application.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[T(oe,{modelValue:E.value.name,"onUpdate:modelValue":ne[0]||(ne[0]=Tt=>E.value.name=Tt),maxlength:"64",placeholder:Jt(yt)("views.application.form.appName.placeholder"),"show-word-limit":"",onBlur:ne[1]||(ne[1]=Tt=>{var bn;return E.value.name=(bn=E.value.name)==null?void 0:bn.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),T(Me,{label:q.$t("workflow.nodes.baseNode.appDescription.label")},{default:N(()=>[T(oe,{modelValue:E.value.desc,"onUpdate:modelValue":ne[2]||(ne[2]=Tt=>E.value.desc=Tt),placeholder:q.$t("views.application.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),T(Me,{label:q.$t("views.application.form.prologue")},{default:N(()=>[T(as,{onWheel:M,title:q.$t("views.application.form.prologue"),modelValue:E.value.prologue,"onUpdate:modelValue":ne[3]||(ne[3]=Tt=>E.value.prologue=Tt),style:{height:"150px"},onSubmitDialog:S},null,8,["title","modelValue"])]),_:1},8,["label"]),T(Me,null,{label:N(()=>[X("div",Qz,[X("div",eH,[X("span",tH,fe(q.$t("workflow.nodes.baseNode.fileUpload.label")),1),T(Pe,{effect:"dark",content:q.$t("workflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),X("div",null,[E.value.fileUploadEnable?(ce(),Ge(Ee,{key:0,type:"primary",link:"",onClick:K,class:"mr-4"},{default:N(()=>[T(fr,{iconName:"app-setting",class:"mr-4"})]),_:1})):Qt("",!0),T(we,{size:"small",modelValue:E.value.fileUploadEnable,"onUpdate:modelValue":ne[4]||(ne[4]=Tt=>E.value.fileUploadEnable=Tt),onChange:W},null,8,["modelValue"])])])]),_:1}),T(xz,{ref_key:"UserInputFieldTableFef",ref:_,"node-model":q.nodeModel},null,8,["node-model"]),T(dz,{ref_key:"ApiInputFieldTableFef",ref:y,"node-model":q.nodeModel},null,8,["node-model"]),T(Jz,{ref:"ChatFieldTeble","node-model":q.nodeModel},null,8,["node-model"]),T(Me,null,{label:N(()=>[X("div",nH,[X("span",rH,fe(q.$t("views.application.form.voiceInput.label")),1),X("div",oH,[E.value.sttModelEnable?(ce(),Ge(Be,{key:0,modelValue:E.value.sttAutoSend,"onUpdate:modelValue":ne[5]||(ne[5]=Tt=>E.value.sttAutoSend=Tt)},{default:N(()=>[Je(fe(q.$t("views.application.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):Qt("",!0),T(we,{class:"ml-8",size:"small",modelValue:E.value.sttModelEnable,"onUpdate:modelValue":ne[6]||(ne[6]=Tt=>E.value.sttModelEnable=Tt),onChange:F},null,8,["modelValue"])])])]),default:N(()=>[Ca(T(Au,{onWheel:M,modelValue:E.value.sttModelId,"onUpdate:modelValue":ne[7]||(ne[7]=Tt=>E.value.sttModelId=Tt),placeholder:q.$t("views.application.form.voiceInput.placeholder"),options:c.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"]),[[Mu,E.value.sttModelEnable]])]),_:1}),T(Me,null,{label:N(()=>[X("div",iH,[X("span",aH,fe(q.$t("views.application.form.voicePlay.label")),1),X("div",lH,[E.value.ttsModelEnable?(ce(),Ge(Be,{key:0,modelValue:E.value.ttsAutoplay,"onUpdate:modelValue":ne[8]||(ne[8]=Tt=>E.value.ttsAutoplay=Tt)},{default:N(()=>[Je(fe(q.$t("views.application.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):Qt("",!0),T(we,{class:"ml-8",size:"small",modelValue:E.value.ttsModelEnable,"onUpdate:modelValue":ne[9]||(ne[9]=Tt=>E.value.ttsModelEnable=Tt),onChange:I},null,8,["modelValue"])])])]),default:N(()=>[X("div",sH,[Ca(T(Ot,{modelValue:E.value.ttsType,"onUpdate:modelValue":ne[10]||(ne[10]=Tt=>E.value.ttsType=Tt)},{default:N(()=>[T(nt,{label:q.$t("views.application.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),T(nt,{label:q.$t("views.application.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[Mu,E.value.ttsModelEnable]])]),X("div",uH,[E.value.ttsType==="TTS"&&E.value.ttsModelEnable?(ce(),Ge(Au,{key:0,onWheel:M,modelValue:E.value.ttsModelId,"onUpdate:modelValue":ne[11]||(ne[11]=Tt=>E.value.ttsModelId=Tt),placeholder:q.$t("views.application.form.voicePlay.placeholder"),options:f.value,onChange:ne[12]||(ne[12]=Tt=>U()),showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])):Qt("",!0),E.value.ttsType==="TTS"&&E.value.ttsModelEnable?(ce(),Ge(Ee,{key:1,onClick:Z,disabled:!E.value.ttsModelId,class:"ml-8"},{default:N(()=>[T(lt,null,{default:N(()=>[T(lt,null,{default:N(()=>[T(Qe)]),_:1})]),_:1})]),_:1},8,["disabled"])):Qt("",!0)])]),_:1})]),_:1},8,["model"]),T(sT,{ref_key:"TTSModeParamSettingDialogRef",ref:d,onRefresh:G},null,512),T(Gz,{ref_key:"FileUploadSettingDialogRef",ref:b,"node-model":q.nodeModel,onRefresh:J},null,8,["node-model"])]),_:1},8,["nodeModel"])}}}),dH=Dd(cH,[["__scopeId","data-v-868a08db"]]);let fH=class extends no{constructor(t){super(t,dH)}},pH=class extends ro{constructor(t,n){super(t,n)}get_width(){return 600}};const hH={type:"base-node",model:pH,view:fH},NN=Object.freeze(Object.defineProperty({__proto__:null,default:hH},Symbol.toStringTag,{value:"Module"})),vH={class:"handle flex-between lighter"},mH={class:"flex align-center"},yH={key:0,class:"info"},gH={key:0,class:"mt-8"},_H=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:dl(),type:"IF",condition:"and"},{conditions:[],id:dl(),type:"ELSE",condition:"and"}]},o=E=>E.ctrlKey===!0?(E.preventDefault(),!0):(E.stopPropagation(),!0),r=(E,w,C)=>{const B=ye.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]).map($=>$.id===w.id?{...$,height:E.height,index:C}:$);ye.set(t.nodeModel.properties,"branch_condition_list",B),b(t.nodeModel.properties.nodeData.branch,!0)},s=jn({get:()=>(t.nodeModel.properties.nodeData||(ye.set(t.nodeModel.properties,"nodeData",n),b(n.branch,!0)),t.nodeModel.properties.nodeData),set:E=>{ye.set(t.nodeModel.properties,"nodeData",E)}}),c=Ae(),f=Ae(),d=()=>{var w;const E=[(w=c.value)==null?void 0:w.validate(),...f.value.map(C=>C.validate())];return Promise.all(E).catch(C=>Promise.reject({node:t.nodeModel,errMessage:C}))};function _(E){const{oldIndex:w,newIndex:C}=E;if(w===void 0||C===void 0)return;const j=ye.cloneDeep(t.nodeModel.properties.nodeData.branch);if(w===j.length-1||C===j.length-1)return;const B={...j[w],type:j[C].type,id:j[C].id},$={...j[C],type:j[w].type,id:j[w].id};j[C]=B,j[w]=$,ye.set(t.nodeModel.properties.nodeData,"branch",j)}function y(){const E=ye.cloneDeep(t.nodeModel.properties.nodeData.branch),w={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(E.length-1),id:dl(),condition:"and"};E.splice(E.length-1,0,w),b(E,!0),ye.set(t.nodeModel.properties.nodeData,"branch",E)}function b(E,w){const C=ye.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]),j=E.map((B,$)=>{const U=C.find(I=>I.id===B.id);if(U)return{index:$,height:U.height,id:B.id};if(w)return{index:$,height:12,id:B.id}}).filter(B=>B);ye.set(t.nodeModel.properties,"branch_condition_list",j),t.nodeModel.refreshBranch()}function x(E){const w=ye.cloneDeep(t.nodeModel.properties.nodeData.branch);w[E].conditions.push({field:[],compare:"",value:""}),ye.set(t.nodeModel.properties.nodeData,"branch",w)}function M(E,w){const C=ye.cloneDeep(t.nodeModel.properties.nodeData.branch);if(C[E].conditions.splice(w,1),C[E].conditions.length===0){const B=C.splice(E,1).map($=>t.nodeModel.id+"_"+$.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter($=>B.includes($.sourceAnchorId)).map($=>$.id)),b(C,!1),C.forEach(($,U)=>{$.type==="ELSE IF "+(U+1)&&($.type="ELSE IF "+U)})}ye.set(t.nodeModel.properties.nodeData,"branch",C)}function S(E,w,C){if(["is_null","is_not_null","is_true","is_not_true"].includes(E)){const j=ye.cloneDeep(t.nodeModel.properties.nodeData.branch);j[w].conditions[C].value=1,ye.set(t.nodeModel.properties.nodeData,"branch",j)}}return kr(()=>{ye.set(t.nodeModel,"validate",d)}),(E,w)=>{const C=Y("el-option"),j=Y("el-select"),B=Y("el-form-item"),$=Y("el-col"),U=Y("el-input"),I=Y("AppIcon"),F=Y("el-button"),Z=Y("el-row"),G=Y("Plus"),W=Y("el-icon"),K=Y("el-card"),J=Y("el-form"),q=Jm("resize");return ce(),Ge(so,{nodeModel:E.nodeModel},{default:N(()=>[T(J,{model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:w[0]||(w[0]=Bt(()=>{},["prevent"]))},{default:N(()=>[T(Jt(q8),{ref:"el",modelValue:s.value.branch,disabled:s.value.branch===2,handle:".handle",animation:150,ghostClass:"ghost",onEnd:_},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(s.value.branch,(ne,oe)=>Ca((ce(),Ge(K,{key:ne.id,shadow:"never",class:Dl(["drag-card card-never mb-8",{"no-drag":oe===s.value.branch.length-1||s.value.branch.length===2}]),style:{"--el-card-padding":"12px"}},{default:N(()=>[X("div",vH,[X("span",mH,[w[1]||(w[1]=X("img",{src:Y8,alt:"",height:"15",class:"handle-img mr-4"},null,-1)),Je(" "+fe(ne.type),1)]),ne.conditions.length>1?(ce(),Rt("div",yH,[X("span",null,fe(E.$t("workflow.nodes.conditionNode.conditions.info")),1),T(j,{teleported:!1,modelValue:ne.condition,"onUpdate:modelValue":Me=>ne.condition=Me,size:"small",style:{width:"60px",margin:"0 8px"}},{default:N(()=>[T(C,{label:E.$t("workflow.condition.AND"),value:"and"},null,8,["label"]),T(C,{label:E.$t("workflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),X("span",null,fe(E.$t("workflow.nodes.conditionNode.conditions.label")),1)])):Qt("",!0)]),oe!==s.value.branch.length-1?(ce(),Rt("div",gH,[(ce(!0),Rt(Fn,null,Tr(ne.conditions,(Me,Pe)=>(ce(),Ge(Z,{key:Pe,gutter:8},{default:N(()=>[T($,{span:11},{default:N(()=>[T(B,{prop:"branch."+oe+".conditions."+Pe+".field",rules:{type:"array",required:!0,message:E.$t("workflow.variable.placeholder"),trigger:"change"}},{default:N(()=>[T(go,{ref_for:!0,ref_key:"nodeCascaderRef",ref:f,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("workflow.variable.placeholder"),modelValue:Me.field,"onUpdate:modelValue":Ee=>Me.field=Ee},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),T($,{span:6},{default:N(()=>[T(B,{prop:"branch."+oe+".conditions."+Pe+".compare",rules:{required:!0,message:E.$t("workflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:N(()=>[T(j,{onWheel:o,teleported:!1,modelValue:Me.compare,"onUpdate:modelValue":Ee=>Me.compare=Ee,placeholder:E.$t("workflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:Ee=>S(Ee,oe,Pe)},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(Jt(rE),(Ee,we)=>(ce(),Ge(C,{key:we,label:Ee.label,value:Ee.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),T($,{span:6},{default:N(()=>[["is_null","is_not_null","is_true","is_not_true"].includes(Me.compare)?Qt("",!0):(ce(),Ge(B,{key:0,prop:"branch."+oe+".conditions."+Pe+".value",rules:{required:!0,message:E.$t("workflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:N(()=>[T(U,{modelValue:Me.value,"onUpdate:modelValue":Ee=>Me.value=Ee,placeholder:E.$t("workflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"]))]),_:2},1024),T($,{span:1},{default:N(()=>[T(F,{disabled:oe===0&&Pe===0,link:"",type:"info",class:"mt-4",onClick:Ee=>M(oe,Pe)},{default:N(()=>[T(I,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):Qt("",!0),oe!==s.value.branch.length-1?(ce(),Ge(F,{key:1,link:"",type:"primary",onClick:Me=>x(oe)},{default:N(()=>[T(W,{class:"mr-4"},{default:N(()=>[T(G)]),_:1}),Je(" "+fe(E.$t("workflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):Qt("",!0)]),_:2},1032,["class"])),[[q,Me=>r(Me,ne,oe)]])),128))]),_:1},8,["modelValue","disabled"]),T(F,{link:"",type:"primary",onClick:y},{default:N(()=>[T(W,{class:"mr-4"},{default:N(()=>[T(G)]),_:1}),Je(" "+fe(E.$t("workflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}}),bH=Dd(_H,[["__scopeId","data-v-72e5d798"]]);class wH extends no{constructor(t){super(t,bH)}}const EH=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class OH extends ro{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const f=this.properties.showNode===void 0?!0:this.properties.showNode,d=[];if(d.push({x:n-r/2+10,y:f?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let _=0;_<c.length;_++){const y=c[_],b=EH(c,_);d.push({x:n+r/2-10,y:f?o-s/2+75+b+y.height/2:o-15,id:`${t}_${y.id}_right`,type:"right"})}return d}}const SH={type:"condition-node",model:OH,view:wH},PN=Object.freeze(Object.defineProperty({__proto__:null,default:SH},Symbol.toStringTag,{value:"Module"})),xH={class:"title-decoration-1 mb-8"},MH=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=Ae(),n=e,o=["TXT","DOCX","PDF","HTML","XLS","XLSX","ZIP","CSV","MD"],r={fileTypeList:["TXT","DOCX","PDF","HTML","XLS","XLSX","ZIP","CSV","MD"],fileSizeLimit:100,fileCountLimit:50},s=jn({get:()=>(n.nodeModel.properties.nodeData||ye.set(n.nodeModel.properties,"nodeData",r),n.nodeModel.properties.nodeData),set:f=>{ye.set(n.nodeModel.properties,"nodeData",f)}}),c=()=>t.value.validate();return kr(()=>{ye.set(n.nodeModel,"validate",c)}),(f,d)=>{const _=Y("el-option"),y=Y("el-select"),b=Y("el-form-item"),x=Y("el-input-number"),M=Y("el-form"),S=Y("el-card");return ce(),Ge(so,{nodeModel:f.nodeModel},{default:N(()=>[X("h5",xH,fe(f.$t("workflow.nodeSetting")),1),T(S,{shadow:"never",class:"card-never"},{default:N(()=>[T(M,{onSubmit:d[3]||(d[3]=Bt(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"NodeFormRef",ref:t},{default:N(()=>[T(b,{label:f.$t("workflow.nodes.dataSourceLocalNode.fileFormat.label"),rules:{type:"array",required:!0,message:f.$t("workflow.nodes.dataSourceLocalNode.fileFormat.requiredMessage"),trigger:"change"},prop:"fileTypeList"},{default:N(()=>[T(y,{modelValue:s.value.fileTypeList,"onUpdate:modelValue":d[0]||(d[0]=E=>s.value.fileTypeList=E),placeholder:f.$t("workflow.nodes.dataSourceLocalNode.fileFormat.requiredMessage"),class:"w-240",clearable:"",multiple:"","allow-create":"",filterable:"","default-first-option":""},{label:N(({label:E,value:w})=>[X("span",null,fe(E),1)]),default:N(()=>[(ce(),Rt(Fn,null,Tr(o,E=>T(_,{key:E,label:E,value:E},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),T(b,{label:f.$t("workflow.nodes.dataSourceLocalNode.maxFileNumber.label"),rules:{required:!0,message:f.$t("common.inputPlaceholder"),trigger:"change"},prop:"fileCountLimit"},{default:N(()=>[T(x,{modelValue:s.value.fileCountLimit,"onUpdate:modelValue":d[1]||(d[1]=E=>s.value.fileCountLimit=E),min:1,max:1e3,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label","rules"]),T(b,{label:f.$t("workflow.nodes.dataSourceLocalNode.maxFileCountNumber.label"),rules:{required:!0,message:f.$t("common.inputPlaceholder"),trigger:"change"},prop:"fileSizeLimit"},{default:N(()=>[T(x,{modelValue:s.value.fileSizeLimit,"onUpdate:modelValue":d[2]||(d[2]=E=>s.value.fileSizeLimit=E),min:1,max:1e3,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let AH=class extends no{constructor(t){super(t,MH)}};const TH={type:"data-source-local-node",model:ro,view:AH},RN=Object.freeze(Object.defineProperty({__proto__:null,default:TH},Symbol.toStringTag,{value:"Module"})),kH={class:"title-decoration-1 mb-8"},NH={class:"lighter"},PH=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]};return jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:o=>{ye.set(t.nodeModel.properties,"nodeData",o)}}),(o,r)=>{const s=Y("el-card");return ce(),Ge(so,{nodeModel:o.nodeModel},{default:N(()=>[X("h5",kH,fe(o.$t("workflow.nodeSetting")),1),T(s,{shadow:"never",class:"card-never"},{default:N(()=>[X("span",NH,fe(o.$t("common.noData")),1)]),_:1})]),_:1},8,["nodeModel"])}}});class RH extends no{constructor(t){super(t,PH)}}const CH={type:"data-source-web-node",model:ro,view:RH},CN=Object.freeze(Object.defineProperty({__proto__:null,default:CH},Symbol.toStringTag,{value:"Module"})),DH={class:"title-decoration-1 mb-8"},jH=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]},o=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:r=>{ye.set(t.nodeModel.properties,"nodeData",r)}});return(r,s)=>{const c=Y("el-form-item"),f=Y("el-form"),d=Y("el-card");return ce(),Ge(so,{nodeModel:r.nodeModel},{default:N(()=>[X("h5",DH,fe(r.$t("workflow.nodeSetting")),1),T(d,{shadow:"never",class:"card-never"},{default:N(()=>[T(f,{onSubmit:s[1]||(s[1]=Bt(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto"},{default:N(()=>[T(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.chatLog.documentPlaceholder"),trigger:"change"}},{default:N(()=>[T(go,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.chatLog.documentPlaceholder"),modelValue:o.value.documentList,"onUpdate:modelValue":s[0]||(s[0]=_=>o.value.documentList=_)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let IH=class extends no{constructor(t){super(t,jH)}};const LH={type:"document-extract-node",model:ro,view:IH},DN=Object.freeze(Object.defineProperty({__proto__:null,default:LH},Symbol.toStringTag,{value:"Module"})),$H={class:"title-decoration-1 mb-8"},FH={class:"flex-between"},VH={class:"flex align-center"},BH={class:"flex-between"},UH={class:"flex align-center mb-8"},GH={class:"mr-4"},zH={class:"flex-between"},HH={class:"flex align-center mb-8"},WH={class:"mr-4"},XH={class:"mr-4"},qH={class:"flex"},YH={class:"flex-between"},KH={class:"flex align-center"},ZH={class:"mr-4"},JH={class:"flex"},QH={class:"flex-between"},eW={class:"flex align-center"},tW={class:"mr-4"},nW={class:"flex"},rW=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=Zi(),{query:{id:n}}=t,o=jn(()=>t.path.includes("shared")?"systemShare":t.path.includes("resource-management")?"systemManage":"workspace"),r=e,s=Ae([]),c={documentList:[],splitStrategy:"auto",paragraph_title_relate_problem_type:"custom",paragraphTitleRelateProblem:!1,paragraph_title_relate_problem_reference:[],document_name_relate_problem_type:"custom",documentNameRelateProblem:!1,document_name_relate_problem_reference:[],limit:4096,limit_type:"custom",limit_reference:[],chunkSize:256,chunk_size_type:"custom",chunk_size_reference:[],patterns:[],patterns_type:"custom",patterns_reference:[],withFilter:!1,with_filter_type:"custom",with_filter_reference:[]},f=jn({get:()=>(r.nodeModel.properties.nodeData||ye.set(r.nodeModel.properties,"nodeData",c),r.nodeModel.properties.nodeData),set:B=>{ye.set(r.nodeModel.properties,"nodeData",B)}}),d=Ae(),_=Ae(),y=Ae(),b=Ae(),x=Ae(),M=Ae(),S=Ae(),E=Ae(),w=()=>{var B;return Promise.all([_.value?_.value.validate():Promise.resolve(""),y.value?y.value.validate():Promise.resolve(""),b.value?b.value.validate():Promise.resolve(""),x.value?x.value.validate():Promise.resolve(""),M.value?M.value.validate():Promise.resolve(""),S.value?S.value.validate():Promise.resolve(""),E.value?E.value.validate():Promise.resolve(""),(B=d.value)==null?void 0:B.validate()]).catch($=>Promise.reject({node:r.nodeModel,errMessage:$}))},C=Ae(!1),j=()=>{ni({type:"document",systemType:o.value}).listSplitPattern(n,C).then(B=>{s.value=B.data})};return kr(()=>{j(),ye.set(r.nodeModel,"validate",w)}),(B,$)=>{const U=Y("el-form-item"),I=Y("el-option"),F=Y("el-select"),Z=Y("el-tooltip"),G=Y("el-input-number"),W=Y("el-switch"),K=Y("el-form"),J=Y("el-card");return ce(),Ge(so,{nodeModel:B.nodeModel},{default:N(()=>[X("h5",$H,fe(B.$t("workflow.nodeSetting")),1),T(J,{shadow:"never",class:"card-never"},{default:N(()=>[T(K,{ref_key:"aiChatNodeFormRef",ref:d,onSubmit:$[8]||($[8]=Bt(()=>{},["prevent"])),model:f.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto"},{default:N(()=>[T(U,{label:B.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:B.$t("views.chatLog.documentPlaceholder"),trigger:"change"}},{default:N(()=>[T(go,{ref_key:"nodeCascaderRef",ref:_,nodeModel:B.nodeModel,class:"w-full",placeholder:B.$t("views.chatLog.documentPlaceholder"),modelValue:f.value.documentList,"onUpdate:modelValue":$[0]||($[0]=q=>f.value.documentList=q)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),T(U,{label:B.$t("workflow.nodes.documentSplitNode.splitStrategy.label"),rules:{required:!0,message:B.$t("workflow.nodes.documentSplitNode.splitStrategy.requiredMessage"),trigger:"change"}},{default:N(()=>[T(F,{modelValue:f.value.splitStrategy,"onUpdate:modelValue":$[1]||($[1]=q=>f.value.splitStrategy=q),placeholder:B.$t("workflow.nodes.documentSplitNode.splitStrategy.placeholder"),teleported:!1},{default:N(()=>[T(I,{label:B.$t("views.document.setRules.intelligent.label"),value:"auto"},null,8,["label"]),T(I,{label:B.$t("views.document.setRules.advanced.label"),value:"custom"},null,8,["label"]),T(I,{label:B.$t("views.document.fileType.QA.label"),value:"qa"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),T(U,null,{label:N(()=>[X("div",FH,[X("span",VH,[X("span",null,fe(B.$t("workflow.nodes.documentSplitNode.chunk_length.label")),1),T(Z,{effect:"dark",placement:"right"},{content:N(()=>[Je(fe(B.$t("workflow.nodes.documentSplitNode.chunk_length.tooltip1")),1),$[9]||($[9]=X("br",null,null,-1)),Je(" "+fe(B.$t("workflow.nodes.documentSplitNode.chunk_length.tooltip2")),1),$[10]||($[10]=X("br",null,null,-1)),Je(" "+fe(B.$t("workflow.nodes.documentSplitNode.chunk_length.tooltip3")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])])]),default:N(()=>[f.value.chunk_size_type==="custom"?(ce(),Ge(G,{key:0,modelValue:f.value.chunkSize,"onUpdate:modelValue":$[2]||($[2]=q=>f.value.chunkSize=q),min:50,max:1e5,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])):(ce(),Ge(go,{key:1,ref_key:"nodeCascaderRef4",ref:x,nodeModel:B.nodeModel,class:"w-full",placeholder:B.$t("views.chatLog.documentPlaceholder"),modelValue:f.value.chunk_size_reference,"onUpdate:modelValue":$[3]||($[3]=q=>f.value.chunk_size_reference=q)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1}),f.value.splitStrategy==="custom"?(ce(),Ge(U,{key:0},{label:N(()=>[X("div",BH,[X("div",UH,[X("span",GH,fe(B.$t("views.document.setRules.patterns.label")),1),T(Z,{effect:"dark",content:B.$t("views.document.setRules.patterns.tooltip"),placement:"right"},{default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])])]),default:N(()=>[f.value.patterns_type==="custom"?(ce(),Ge(F,{key:0,teleported:!1,modelValue:f.value.patterns,"onUpdate:modelValue":$[4]||($[4]=q=>f.value.patterns=q),multiple:"","reserve-keyword":!1,"allow-create":"","default-first-option":"",filterable:"",placeholder:B.$t("views.document.setRules.patterns.placeholder")},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(s.value,(q,ne)=>(ce(),Ge(I,{key:ne,label:q.key,value:q.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])):Qt("",!0)]),_:1})):Qt("",!0),f.value.splitStrategy==="custom"?(ce(),Ge(U,{key:1},{label:N(()=>[X("div",zH,[X("div",HH,[X("div",WH,[X("span",XH,fe(B.$t("views.document.setRules.withFilter.label")),1),T(Z,{effect:"dark",content:B.$t("views.document.setRules.withFilter.text"),placement:"right"},{default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),X("div",qH,[T(W,{size:"small",modelValue:f.value.withFilter,"onUpdate:modelValue":$[5]||($[5]=q=>f.value.withFilter=q)},null,8,["modelValue"])])])]),_:1})):Qt("",!0),f.value.splitStrategy!=="qa"?(ce(),Ge(U,{key:2},{label:N(()=>[X("div",YH,[X("div",KH,[X("div",ZH,[X("span",null,fe(B.$t("workflow.nodes.documentSplitNode.title1")),1)])]),X("div",JH,[T(W,{size:"small",modelValue:f.value.paragraphTitleRelateProblem,"onUpdate:modelValue":$[6]||($[6]=q=>f.value.paragraphTitleRelateProblem=q)},null,8,["modelValue"])])])]),_:1})):Qt("",!0),T(U,null,{label:N(()=>[X("div",QH,[X("div",eW,[X("div",tW,[X("span",null,fe(B.$t("workflow.nodes.documentSplitNode.title2")),1)])]),X("div",nW,[T(W,{size:"small",modelValue:f.value.documentNameRelateProblem,"onUpdate:modelValue":$[7]||($[7]=q=>f.value.documentNameRelateProblem=q)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class oW extends no{constructor(t){super(t,rW)}}const iW={type:"document-split-node",model:ro,view:oW},jN=Object.freeze(Object.defineProperty({__proto__:null,default:iW},Symbol.toStringTag,{value:"Module"})),aW={class:"dialog-footer"},lW=Rn({__name:"AddFormCollect",props:{title:{default:yt("common.param.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=Ae(!1),s=Ae(),c=Ae({}),f=Ae(!1),d=()=>{r.value=!0},_=()=>{r.value=!1,c.value={}},y=()=>{var b;(b=s.value)==null||b.validate().then(()=>{var x;o.addFormField((x=s.value)==null?void 0:x.getData()),_()})};return t({close:_,open:d}),(b,x)=>{const M=Y("el-button"),S=Y("el-dialog");return ce(),Ge(S,{title:b.title,modelValue:r.value,"onUpdate:modelValue":x[3]||(x[3]=E=>r.value=E),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:N(()=>[X("span",aW,[T(M,{onClick:x[1]||(x[1]=Bt(E=>r.value=!1,["prevent"]))},{default:N(()=>[Je(fe(b.$t("common.cancel")),1)]),_:1}),T(M,{type:"primary",onClick:x[2]||(x[2]=E=>y()),loading:f.value},{default:N(()=>[Je(fe(b.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(d_,{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=E=>c.value=E),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),sW={class:"dialog-footer"},uW=Rn({__name:"EditFormCollect",props:{title:{default:yt("common.param.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=Ae(!1),s=Ae(),c=Ae({}),f=Ae(0),d=Ae(!1),_=(x,M)=>{r.value=!0,c.value=x,f.value=M},y=()=>{r.value=!1,c.value={}},b=()=>{var x;(x=s.value)==null||x.validate().then(()=>{var M;o.editFormField((M=s.value)==null?void 0:M.getData(),f.value),y()})};return t({close:y,open:_}),(x,M)=>{const S=Y("el-button"),E=Y("el-dialog");return ce(),Ge(E,{title:x.title,modelValue:r.value,"onUpdate:modelValue":M[3]||(M[3]=w=>r.value=w),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":y,"append-to-body":""},{footer:N(()=>[X("span",sW,[T(S,{onClick:M[1]||(M[1]=Bt(w=>r.value=!1,["prevent"]))},{default:N(()=>[Je(fe(x.$t("common.cancel")),1)]),_:1}),T(S,{type:"primary",onClick:M[2]||(M[2]=w=>b()),loading:d.value},{default:N(()=>[Je(fe(x.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(d_,{modelValue:c.value,"onUpdate:modelValue":M[0]||(M[0]=w=>c.value=w),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),cW={class:"title-decoration-1 mb-8"},dW={class:"flex align-center"},fW={class:"mr-4"},pW={class:"flex-between"},hW={class:"lighter"},vW=["title"],mW={key:0},yW=["title"],gW={key:1},_W=["title"],bW=["title"],wW={class:"mr-4"},EW=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=Ae(),r=(j,B)=>{const $=M.value.form_field_list.map((U,I)=>B===I?ye.cloneDeep(j):ye.cloneDeep(U));M.value.form_field_list=$,c()},s=j=>{if(M.value.form_field_list.some(B=>B.field===j.field)){Ra(yt("workflow.tip.paramErrorMessage")+j.field);return}M.value.form_field_list=ye.cloneDeep([...M.value.form_field_list,j]),c()},c=()=>{const j=[{label:yt("workflow.nodes.formNode.formAllContent"),value:"form_data"},...M.value.form_field_list.map(B=>({value:B.field,label:typeof B.label=="string"?B.label:B.label.label}))];ye.set(t.nodeModel.properties.config,"fields",j),t.nodeModel.clear_next_node_field(!1),C()},f=Ae(),d=Ae(),_=()=>{var j;(j=f.value)==null||j.open()},y=(j,B)=>{var $;($=d.value)==null||$.open(ye.cloneDeep(j),B)},b=j=>{M.value.form_field_list=M.value.form_field_list.filter(B=>B.field!==j.field),c()},x=Ae({isResult:!0,form_content_format:`${yt("workflow.nodes.formNode.form_content_format1")}
{{form}}
${yt("workflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),M=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",x.value),t.nodeModel.properties.nodeData),set:j=>{ye.set(t.nodeModel.properties,"nodeData",j)}}),S=j=>{var B;if(j.defaultValue){const $=(B=j.option_list)==null?void 0:B.filter(U=>j.defaultValue.indexOf(U.value)>-1).map(U=>U.label).join(",");return $||j.defaultValue}if(j.defaultValue!==void 0)return j.defaultValue},E=()=>{var j;return(j=n.value)==null?void 0:j.validate()};function w(j){ye.set(t.nodeModel.properties.nodeData,"form_content_format",j)}function C(){if(!o.value)return;const B=o.value.$el.querySelector(".el-table__body-wrapper tbody");B&&_r.create(B,{animation:150,ghostClass:"ghost-row",onEnd:$=>{if($.oldIndex===void 0||$.newIndex===void 0)return;const U=[...M.value.form_field_list],[I]=U.splice($.oldIndex,1);U.splice($.newIndex,0,I),M.value.form_field_list=U,c()}})}return kr(()=>{ye.set(t.nodeModel,"validate",E),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(j,B)=>{const $=Y("AppIcon"),U=Y("el-tooltip"),I=Y("MdEditorMagnify"),F=Y("el-form-item"),Z=Y("Plus"),G=Y("el-icon"),W=Y("el-button"),K=Y("el-table-column"),J=Y("el-tag"),q=Y("el-switch"),ne=Y("el-table"),oe=Y("el-form"),Me=Y("el-card");return ce(),Ge(so,{nodeModel:j.nodeModel},{default:N(()=>[X("h5",cW,fe(j.$t("workflow.nodeSetting")),1),T(Me,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(oe,{onSubmit:B[4]||(B[4]=Bt(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:N(()=>[T(F,{label:j.$t("workflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:j.$t("workflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:N(()=>[X("div",dW,[X("div",fW,[X("span",null,[Je(fe(j.$t("workflow.nodes.formNode.formContent.label")),1),B[5]||(B[5]=X("span",{class:"color-danger"},"*",-1))])]),T(U,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(j.$t("workflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:N(()=>[T($,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[T(I,{title:j.$t("workflow.nodes.formNode.formContent.label"),modelValue:M.value.form_content_format,"onUpdate:modelValue":B[0]||(B[0]=Pe=>M.value.form_content_format=Pe),style:{height:"150px"},onSubmitDialog:w},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),T(F,{label:j.$t("workflow.nodes.formNode.formSetting"),onClick:B[3]||(B[3]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",pW,[X("h5",hW,fe(j.$t("workflow.nodes.formNode.formSetting")),1),T(W,{link:"",type:"primary",onClick:B[1]||(B[1]=Pe=>_())},{default:N(()=>[T(G,{class:"mr-4"},{default:N(()=>[T(Z)]),_:1}),Je(" "+fe(j.$t("common.add")),1)]),_:1})])]),default:N(()=>[M.value.form_field_list.length>0?(ce(),Ge(ne,{key:0,class:"border",data:M.value.form_field_list,ref_key:"tableRef",ref:o,"row-key":"field"},{default:N(()=>[T(K,{prop:"field",label:j.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:N(({row:Pe})=>[X("span",{title:Pe.field,class:"ellipsis-1"},fe(Pe.field),9,vW)]),_:1},8,["label"]),T(K,{prop:"label",label:j.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:Pe})=>[Pe.label&&Pe.label.input_type==="TooltipLabel"?(ce(),Rt("span",mW,[X("span",{title:Pe.label.label,class:"ellipsis-1"},fe(Pe.label.label),9,yW)])):(ce(),Rt("span",gW,[X("span",{title:Pe.label,class:"ellipsis-1"},fe(Pe.label),9,_W)]))]),_:1},8,["label"]),T(K,{label:j.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:N(({row:Pe})=>[T(J,{type:"info",class:"info-tag"},{default:N(()=>{var Ee;return[Je(fe((Ee=Jt(WI).find(we=>we.value===Pe.input_type))==null?void 0:Ee.label),1)]}),_:2},1024)]),_:1},8,["label"]),T(K,{prop:"defaultValue",label:j.$t("dynamicsForm.default.label")},{default:N(({row:Pe})=>[X("span",{title:Pe.defaultValue,class:"ellipsis-1"},fe(S(Pe)),9,bW)]),_:1},8,["label"]),T(K,{label:j.$t("common.required"),width:"85"},{default:N(({row:Pe})=>[X("div",{onClick:B[2]||(B[2]=Bt(()=>{},["stop"]))},[T(q,{disabled:"",size:"small",modelValue:Pe.required,"onUpdate:modelValue":Ee=>Pe.required=Ee},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),T(K,{label:j.$t("common.operation"),align:"left",width:"90"},{default:N(({row:Pe,$index:Ee})=>[X("span",wW,[T(U,{effect:"dark",content:j.$t("common.modify"),placement:"top"},{default:N(()=>[T(W,{type:"primary",text:"",onClick:Bt(we=>y(Pe,Ee),["stop"])},{default:N(()=>[T($,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),T(U,{effect:"dark",content:j.$t("common.delete"),placement:"top"},{default:N(()=>[T(W,{type:"primary",text:"",onClick:we=>b(Pe)},{default:N(()=>[T($,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Qt("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),T(lW,{ref_key:"addFormCollectRef",ref:f,addFormField:s},null,512),T(uW,{ref_key:"editFormCollectRef",ref:d,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class OW extends no{constructor(t){super(t,EW)}}const SW={type:"form-node",model:ro,view:OW},IN=Object.freeze(Object.defineProperty({__proto__:null,default:SW},Symbol.toStringTag,{value:"Module"})),xW={class:"title-decoration-1 mb-8"},MW={class:"flex-between mb-8"},AW={class:"lighter"},TW={class:"flex w-full"},kW={class:"flex-between mb-8"},NW={class:"lighter"},PW={class:"flex-between mb-8"},RW={class:"lighter"},CW=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=["GET","POST","PUT","DELETE","PATCH"],r=["none","form-data","x-www-form-urlencoded","json","xml","raw-text"],s=x=>x.ctrlKey===!0?(x.preventDefault(),!0):(x.stopPropagation(),!0),c=Ae({activeTab:"params",method:"GET",url:"",timeout:30,headers:[{}],params:[{}],contentType:"json",authType:"none",token:"",username:"",password:"",body:""}),f=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",c.value),t.nodeModel.properties.nodeData),set:x=>{ye.set(t.nodeModel.properties,"nodeData",x)}}),d=()=>{var x;return(x=n.value)==null?void 0:x.validate()},_=()=>{const x=f.value.activeTab,M=f.value.contentType,S={...f.value};x==="params"?S.params[f.value.params.length-1].name.trim()!==""&&(S.params=[...S.params||[],{name:"",value:""}]):x==="headers"?S.headers[f.value.headers.length-1].name.trim()!==""&&(S.headers=[...S.headers||[],{name:"",value:""}]):x==="body"&&["form-data","x-www-form-urlencoded"].includes(M)&&S.params[f.value.params.length-1].name.trim()!==""&&(S.params=[...S.params||[],{name:"",value:""}]),f.value=S};function y(x){const M=f.value.activeTab,S=f.value.contentType,E={...f.value};M==="params"?E.params=(E.params||[]).filter((w,C)=>C!==x):M==="headers"?E.headers=(E.headers||[]).filter((w,C)=>C!==x):M==="body"&&["form-data","x-www-form-urlencoded"].includes(S)&&(E.params=(E.params||[]).filter((w,C)=>C!==x)),f.value=E}function b(x){ye.set(t.nodeModel.properties.nodeData,"body",x)}return kr(()=>{ye.set(t.nodeModel,"validate",d),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(x,M)=>{const S=Y("el-option"),E=Y("el-select"),w=Y("el-input"),C=Y("el-form-item"),j=Y("el-input-number"),B=Y("el-table-column"),$=Y("Delete"),U=Y("el-icon"),I=Y("el-button"),F=Y("el-tooltip"),Z=Y("el-table"),G=Y("el-tab-pane"),W=Y("el-radio"),K=Y("el-radio-group"),J=Y("el-tabs"),q=Y("el-form"),ne=Y("el-card");return ce(),Ge(so,{nodeModel:x.nodeModel},{default:N(()=>[X("h5",xW,fe(x.$t("workflow.nodeSetting")),1),T(ne,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(q,{onSubmit:M[11]||(M[11]=Bt(()=>{},["prevent"])),model:f.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:N(()=>[X("div",MW,[X("span",AW,[Je(fe(x.$t("workflow.nodes.httpNode.configuration")),1),M[12]||(M[12]=X("span",{class:"color-danger"},"*",-1))])]),X("div",TW,[T(E,{modelValue:c.value.method,"onUpdate:modelValue":M[0]||(M[0]=oe=>c.value.method=oe),style:{"max-width":"85px"},class:"mr-8",onChange:M[1]||(M[1]=oe=>c.value.method=null)},{default:N(()=>[(ce(),Rt(Fn,null,Tr(o,oe=>T(S,{key:oe,label:oe,value:oe},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),T(C,{prop:"url",rules:{message:Jt(yt)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:N(()=>[T(w,{modelValue:f.value.url,"onUpdate:modelValue":M[2]||(M[2]=oe=>f.value.url=oe),placeholder:x.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:s,style:{"min-width":"400px"}},null,8,["modelValue","placeholder"])]),_:1},8,["rules"])]),X("div",kW,[X("span",NW,[Je(fe(x.$t("workflow.nodes.httpNode.timeout")),1),M[13]||(M[13]=X("span",{class:"color-danger"},"*",-1))]),T(j,{modelValue:c.value.timeout,"onUpdate:modelValue":M[3]||(M[3]=oe=>c.value.timeout=oe)},null,8,["modelValue"])]),X("div",PW,[X("span",RW,[Je(fe(x.$t("workflow.nodes.httpNode.params")),1),M[14]||(M[14]=X("span",{class:"color-danger"},"*",-1))])]),T(J,{modelValue:f.value.activeTab,"onUpdate:modelValue":M[10]||(M[10]=oe=>f.value.activeTab=oe),class:"w-full"},{default:N(()=>[T(G,{name:"params",label:"Params"},{default:N(()=>[T(Z,{data:f.value.params,border:"",style:{width:"100%"}},{default:N(()=>[T(B,{prop:"name",label:"Name"},{default:N(oe=>[T(w,{modelValue:oe.row.name,"onUpdate:modelValue":Me=>oe.row.name=Me,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),T(B,{prop:"value",label:"Value"},{default:N(oe=>[T(w,{modelValue:oe.row.value,"onUpdate:modelValue":Me=>oe.row.value=Me,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),T(B,{label:"",width:"50"},{default:N(oe=>[oe.$index!==f.value.params.length-1?(ce(),Ge(F,{key:0,effect:"dark",content:x.$t("common.delete"),placement:"top"},{default:N(()=>[T(I,{type:"primary",text:"",onClick:Me=>y(oe.$index)},{default:N(()=>[T(U,null,{default:N(()=>[T($)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Qt("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),T(G,{name:"authorization",label:"Authorization"},{default:N(()=>[T(K,{modelValue:f.value.authType,"onUpdate:modelValue":M[7]||(M[7]=oe=>f.value.authType=oe)},{default:N(()=>[T(W,{label:"No Auth",value:"none"}),T(W,{label:"Bearer Token",value:"bearer"}),T(W,{label:"Basic Auth",value:"basic"}),f.value.authType==="bearer"?(ce(),Ge(w,{key:0,placeholder:x.$t("workflow.nodes.httpNode.authToken"),"show-word-limit":"",modelValue:f.value.token,"onUpdate:modelValue":M[4]||(M[4]=oe=>f.value.token=oe),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):Qt("",!0),f.value.authType==="basic"?(ce(),Ge(w,{key:1,placeholder:x.$t("workflow.nodes.httpNode.authUsername"),"show-word-limit":"",modelValue:f.value.username,"onUpdate:modelValue":M[5]||(M[5]=oe=>f.value.username=oe),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):Qt("",!0),f.value.authType==="basic"?(ce(),Ge(w,{key:2,placeholder:x.$t("workflow.nodes.httpNode.authPassword"),"show-word-limit":"",modelValue:f.value.password,"onUpdate:modelValue":M[6]||(M[6]=oe=>f.value.password=oe),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):Qt("",!0)]),_:1},8,["modelValue"])]),_:1}),T(G,{name:"headers",label:"Headers"},{default:N(()=>[T(Z,{data:f.value.headers,border:"",style:{width:"100%"}},{default:N(()=>[T(B,{prop:"name",label:"Name"},{default:N(oe=>[T(w,{modelValue:oe.row.name,"onUpdate:modelValue":Me=>oe.row.name=Me,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),T(B,{prop:"value",label:"Value"},{default:N(oe=>[T(w,{modelValue:oe.row.value,"onUpdate:modelValue":Me=>oe.row.value=Me,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),T(B,{label:"",width:"50"},{default:N(oe=>[oe.$index!==f.value.headers.length-1?(ce(),Ge(F,{key:0,effect:"dark",content:x.$t("common.delete"),placement:"top"},{default:N(()=>[T(I,{type:"primary",text:"",onClick:Me=>y(oe.$index)},{default:N(()=>[T(U,null,{default:N(()=>[T($)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Qt("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),T(G,{name:"body",label:"Body"},{default:N(()=>[T(K,{modelValue:f.value.contentType,"onUpdate:modelValue":M[9]||(M[9]=oe=>f.value.contentType=oe)},{default:N(()=>[(ce(),Rt(Fn,null,Tr(r,oe=>T(W,{key:oe,label:oe,value:oe},null,8,["label","value"])),64)),["form-data","x-www-form-urlencoded"].includes(f.value.contentType)?(ce(),Ge(Z,{key:0,data:f.value.params,border:"",style:{width:"100%"}},{default:N(()=>[T(B,{prop:"name",label:"Name"},{default:N(oe=>[T(w,{modelValue:oe.row.name,"onUpdate:modelValue":Me=>oe.row.name=Me,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),T(B,{prop:"value",label:"Value"},{default:N(oe=>[T(w,{modelValue:oe.row.value,"onUpdate:modelValue":Me=>oe.row.value=Me,placeholder:"输入/可选择变量",onClick:_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),T(B,{label:"",width:"50"},{default:N(oe=>[oe.$index!==0?(ce(),Ge(F,{key:0,effect:"dark",content:x.$t("common.delete"),placement:"top"},{default:N(()=>[T(I,{type:"primary",text:"",onClick:Me=>y(oe.$index)},{default:N(()=>[T(U,null,{default:N(()=>[T($)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Qt("",!0)]),_:1})]),_:1},8,["data"])):Qt("",!0),["json","xml","raw-text"].includes(f.value.contentType)?(ce(),Ge(as,{key:1,title:x.$t("workflow.nodes.httpNode.body"),modelValue:f.value.body,"onUpdate:modelValue":M[8]||(M[8]=oe=>f.value.body=oe),style:{height:"150px"},onSubmitDialog:b},null,8,["title","modelValue"])):Qt("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}}),DW=Dd(CW,[["__scopeId","data-v-71a5c318"]]);class jW extends no{constructor(t){super(t,DW)}}const IW={type:"http-node",model:ro,view:jW},LN=Object.freeze(Object.defineProperty({__proto__:null,default:IW},Symbol.toStringTag,{value:"Module"})),LW={class:"title-decoration-1 mb-8"},$W={class:"flex-between w-full"},FW={class:"flex align-center"},VW={class:"mr-4"},BW={class:"flex align-center"},UW={class:"mr-4"},GW={class:"flex-between w-full"},zW={class:"flex align-center"},HW={class:"mr-4"},WW={class:"flex"},XW=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("workflowMode")||br.Application,n=ko("getResourceDetail"),o=Zi(),{params:{id:r}}=o,s=jn(()=>o.path.includes("resource-management")?"systemManage":"workspace"),c=e,f=Ae(null),d=Ae(),_=Ae(),y=()=>{var I;return(I=_.value)==null?void 0:I.validate().catch(F=>Promise.reject({node:c.nodeModel,errMessage:F}))},b=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),M={modelId:"",system:"",prompt:`{{${yt("workflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null},S=jn({get:()=>(c.nodeModel.properties.nodeData||ye.set(c.nodeModel.properties,"nodeData",M),c.nodeModel.properties.nodeData),set:I=>{ye.set(c.nodeModel.properties,"nodeData",I)}}),E=n();function w(){var F;const I=s.value==="systemManage"?{modelType:"TTI",workspaceId:(F=E.value)==null?void 0:F.workspaceId}:{modelType:"TTI"};ni({type:"model",systemType:s.value}).getSelectModelList(I).then(Z=>{f.value=ye.groupBy(Z==null?void 0:Z.data,"provider")})}const C=()=>{Pg(()=>{var I;S.value.modelId?(I=d.value)==null||I.reset_default(S.value.modelId,r):B({})})},j=I=>{var F;I&&((F=d.value)==null||F.open(I,r,S.value.modelParamsSetting))};function B(I){ye.set(c.nodeModel.properties.nodeData,"modelParamsSetting",I)}function $(I){ye.set(c.nodeModel.properties.nodeData,"prompt",I)}function U(I){ye.set(c.nodeModel.properties.nodeData,"negative_prompt",I)}return kr(()=>{w(),ye.set(c.nodeModel,"validate",y)}),(I,F)=>{const Z=Y("AppIcon"),G=Y("el-button"),W=Y("ModelSelect"),K=Y("el-form-item"),J=Y("el-tooltip"),q=Y("el-switch"),ne=Y("el-form"),oe=Y("el-card");return ce(),Ge(so,{"node-model":I.nodeModel},{default:N(()=>[X("h5",LW,fe(I.$t("workflow.nodeSetting")),1),T(oe,{shadow:"never",class:"card-never"},{default:N(()=>[T(ne,{onSubmit:F[6]||(F[6]=Bt(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:_,"hide-required-asterisk":""},{default:N(()=>[T(K,{label:I.$t("workflow.nodes.imageGenerateNode.model.label"),prop:"modelId",rules:{required:!0,message:I.$t("workflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:N(()=>[X("div",$W,[X("div",null,[X("span",null,[Je(fe(I.$t("workflow.nodes.imageGenerateNode.model.label")),1),F[7]||(F[7]=X("span",{class:"color-danger"},"*",-1))])]),T(G,{disabled:!S.value.modelId,type:"primary",link:"",onClick:F[0]||(F[0]=Me=>j(S.value.modelId)),onRefreshForm:B},{default:N(()=>[T(Z,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[T(W,{onChange:C,onWheel:b,teleported:!1,modelValue:S.value.modelId,"onUpdate:modelValue":F[1]||(F[1]=Me=>S.value.modelId=Me),placeholder:I.$t("workflow.nodes.imageGenerateNode.model.requiredMessage"),options:f.value,showFooter:"","model-type":"TTI"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),T(K,{label:I.$t("workflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:I.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:N(()=>[X("div",FW,[X("div",VW,[X("span",null,[Je(fe(I.$t("workflow.nodes.imageGenerateNode.prompt.label")),1),F[8]||(F[8]=X("span",{class:"color-danger"},"*",-1))])]),T(J,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(I.$t("workflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:N(()=>[T(Z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[T(as,{onWheel:b,title:I.$t("workflow.nodes.imageGenerateNode.prompt.label"),modelValue:S.value.prompt,"onUpdate:modelValue":F[2]||(F[2]=Me=>S.value.prompt=Me),style:{height:"150px"},onSubmitDialog:$},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),T(K,{label:I.$t("workflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:I.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:N(()=>[X("div",BW,[X("div",UW,[X("span",null,fe(I.$t("workflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),T(J,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(I.$t("workflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:N(()=>[T(Z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[T(as,{onWheel:b,title:I.$t("workflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:S.value.negative_prompt,"onUpdate:modelValue":F[3]||(F[3]=Me=>S.value.negative_prompt=Me),placeholder:I.$t("workflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:U},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),[Jt(br).Application,Jt(br).ApplicationLoop].includes(Jt(t))?(ce(),Ge(K,{key:0,label:I.$t("workflow.nodes.aiChatNode.returnContent.label"),onClick:F[5]||(F[5]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",GW,[X("div",zW,[X("div",HW,[X("span",null,fe(I.$t("workflow.nodes.aiChatNode.returnContent.label")),1)]),T(J,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(I.$t("workflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[T(Z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),X("div",WW,[T(q,{size:"small",modelValue:S.value.isResult,"onUpdate:modelValue":F[4]||(F[4]=Me=>S.value.isResult=Me)},null,8,["modelValue"])])])]),_:1},8,["label"])):Qt("",!0)]),_:1},8,["model"])]),_:1}),T(lh,{ref_key:"AIModeParamSettingDialogRef",ref:d,onRefresh:B},null,512)]),_:1},8,["node-model"])}}});let qW=class extends no{constructor(t){super(t,XW)}};const YW={type:"image-generate-node",model:ro,view:qW},$N=Object.freeze(Object.defineProperty({__proto__:null,default:YW},Symbol.toStringTag,{value:"Module"})),KW={class:"title-decoration-1 mb-8"},ZW={class:"flex-between w-full"},JW={class:"flex-between"},QW={class:"flex align-center"},eX={class:"flex align-center"},tX={class:"mr-4"},nX={class:"flex-between"},rX={class:"flex-between w-full"},oX={class:"flex align-center"},iX={class:"mr-4"},aX={class:"flex"},lX=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("workflowMode")||br.Application,n=ko("getResourceDetail"),o=Zi(),{params:{id:r}}=o,s=jn(()=>o.path.includes("resource-management")?"systemManage":"workspace"),c=e,f=Ae(null),d=Ae(),_=Ae(),y=Ae(),b=()=>{var G;return Promise.all([y.value?y.value.validate():Promise.resolve(""),(G=_.value)==null?void 0:G.validate()]).catch(W=>Promise.reject({node:c.nodeModel,errMessage:W}))},x=G=>G.ctrlKey===!0?(G.preventDefault(),!0):(G.stopPropagation(),!0),S={modelId:"",system:"",prompt:`{{${yt("workflow.nodes.startNode.label")}.question}}`,dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null,imageList:["start-node","image"]},E=jn({get:()=>(c.nodeModel.properties.nodeData||ye.set(c.nodeModel.properties,"nodeData",S),c.nodeModel.properties.nodeData),set:G=>{ye.set(c.nodeModel.properties,"nodeData",G)}}),w=n();function C(){var W;const G=s.value==="systemManage"?{modelType:"VISION",workspaceId:(W=w.value)==null?void 0:W.workspaceId}:{modelType:"VISION"};ni({type:"model",systemType:s.value}).getSelectModelList(G).then(K=>{f.value=ye.groupBy(K==null?void 0:K.data,"provider")})}function j(G){ye.set(c.nodeModel.properties.nodeData,"system",G)}function B(G){ye.set(c.nodeModel.properties.nodeData,"prompt",G)}const $=G=>{var W;G&&((W=d.value)==null||W.open(G,r,E.value.modelParamsSetting))},U=Ae(),I=G=>{var W;G&&((W=U.value)==null||W.open(G,r))},F=G=>{ye.set(c.nodeModel.properties.nodeData,"system",G)};function Z(G){ye.set(c.nodeModel.properties.nodeData,"modelParamsSetting",G)}return kr(()=>{C(),ye.set(c.nodeModel,"validate",b)}),(G,W)=>{const K=Y("el-button"),J=Y("el-form-item"),q=Y("el-tooltip"),ne=Y("el-option"),oe=Y("el-select"),Me=Y("el-input-number"),Pe=Y("el-switch"),Ee=Y("el-form"),we=Y("el-card");return ce(),Ge(so,{"node-model":G.nodeModel},{default:N(()=>[X("h5",KW,fe(G.$t("workflow.nodeSetting")),1),T(we,{shadow:"never",class:"card-never"},{default:N(()=>[T(Ee,{onSubmit:W[10]||(W[10]=Bt(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:_,"hide-required-asterisk":""},{default:N(()=>[T(J,{label:G.$t("workflow.nodes.imageUnderstandNode.model.label"),prop:"modelId",rules:{required:!0,message:G.$t("workflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:N(()=>[X("div",ZW,[X("div",null,[X("span",null,[Je(fe(Jt(yt)("workflow.nodes.imageUnderstandNode.model.label")),1),W[11]||(W[11]=X("span",{class:"color-danger"},"*",-1))])]),T(K,{disabled:!E.value.modelId,type:"primary",link:"",onClick:W[0]||(W[0]=Be=>$(E.value.modelId)),onRefreshForm:Z},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[T(Au,{onWheel:x,teleported:!1,modelValue:E.value.modelId,"onUpdate:modelValue":W[1]||(W[1]=Be=>E.value.modelId=Be),placeholder:G.$t("workflow.nodes.imageUnderstandNode.model.requiredMessage"),options:f.value,showFooter:"","model-type":"VISION"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),T(J,{label:G.$t("views.application.form.roleSettings.label")},{label:N(()=>[X("div",JW,[X("div",QW,[X("span",null,fe(G.$t("views.application.form.roleSettings.label")),1),T(q,{effect:"dark",content:G.$t("views.application.form.roleSettings.tooltip"),placement:"right"},{default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])]),T(K,{type:"primary",link:"",onClick:W[2]||(W[2]=Be=>I(E.value.modelId)),disabled:!E.value.modelId},{default:N(()=>[T(fr,{iconName:"app-generate-star"})]),_:1},8,["disabled"])])]),default:N(()=>[T(as,{title:G.$t("views.application.form.roleSettings.label"),modelValue:E.value.system,"onUpdate:modelValue":W[3]||(W[3]=Be=>E.value.system=Be),style:{height:"100px"},onSubmitDialog:j,placeholder:`${Jt(yt)("workflow.SystemPromptPlaceholder")} {{${Jt(yt)("workflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),T(J,{label:G.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:G.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:N(()=>[X("div",eX,[X("div",tX,[X("span",null,[Je(fe(G.$t("views.application.form.prompt.label")),1),W[12]||(W[12]=X("span",{class:"color-danger"},"*",-1))])]),T(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(G.$t("views.application.form.prompt.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[T(as,{onWheel:x,title:G.$t("views.application.form.prompt.label"),modelValue:E.value.prompt,"onUpdate:modelValue":W[4]||(W[4]=Be=>E.value.prompt=Be),style:{height:"150px"},onSubmitDialog:B},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),T(J,null,{label:N(()=>[X("div",nX,[X("div",null,fe(G.$t("views.application.form.historyRecord.label")),1),T(oe,{modelValue:E.value.dialogue_type,"onUpdate:modelValue":W[5]||(W[5]=Be=>E.value.dialogue_type=Be),type:"small",style:{width:"100px"}},{default:N(()=>[T(ne,{label:G.$t("workflow.node"),value:"NODE"},null,8,["label"]),T(ne,{label:G.$t("workflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[T(Me,{modelValue:E.value.dialogueNumber,"onUpdate:modelValue":W[6]||(W[6]=Be=>E.value.dialogueNumber=Be),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),T(J,{label:G.$t("workflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:G.$t("workflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:N(()=>[Je(fe(G.$t("workflow.nodes.imageUnderstandNode.image.label")),1),W[13]||(W[13]=X("span",{class:"color-danger"},"*",-1))]),default:N(()=>[T(go,{ref_key:"nodeCascaderRef",ref:y,nodeModel:G.nodeModel,class:"w-full",placeholder:G.$t("workflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:E.value.imageList,"onUpdate:modelValue":W[7]||(W[7]=Be=>E.value.imageList=Be)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),[Jt(br).Application,Jt(br).ApplicationLoop].includes(Jt(t))?(ce(),Ge(J,{key:0,label:G.$t("workflow.nodes.aiChatNode.returnContent.label"),onClick:W[9]||(W[9]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",rX,[X("div",oX,[X("div",iX,[X("span",null,fe(G.$t("workflow.nodes.aiChatNode.returnContent.label")),1)]),T(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(G.$t("workflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),X("div",aX,[T(Pe,{size:"small",modelValue:E.value.isResult,"onUpdate:modelValue":W[8]||(W[8]=Be=>E.value.isResult=Be)},null,8,["modelValue"])])])]),_:1},8,["label"])):Qt("",!0)]),_:1},8,["model"])]),_:1}),T(lh,{ref_key:"AIModeParamSettingDialogRef",ref:d,onRefresh:Z},null,512),T(lT,{onReplace:F,ref_key:"GeneratePromptDialogRef",ref:U},null,512)]),_:1},8,["node-model"])}}});let sX=class extends no{constructor(t){super(t,lX)}};const uX={type:"image-understand-node",model:ro,view:sX},FN=Object.freeze(Object.defineProperty({__proto__:null,default:uX},Symbol.toStringTag,{value:"Module"})),cX={class:"title-decoration-1 mb-8"},dX={class:"flex-between"},fX={class:"flex-between"},pX={class:"flex-between"},hX=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("getResourceDetail"),n=Zi(),{params:{id:o}}=n,r=jn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=Ae(),c=Ae();function f(){const I=ye.cloneDeep(w.nodeModel.properties.nodeData.branch),F={id:dl(),content:"",isOther:!1};I.splice(I.length-1,0,F),_(I,!0),ye.set(w.nodeModel.properties.nodeData,"branch",I),w.nodeModel.refreshBranch()}function d(I){var q;const F=ye.cloneDeep(w.nodeModel.properties.nodeData.branch),Z=F.find(ne=>ne.id===I);if(!Z||Z.isOther||F.filter(ne=>!ne.isOther).length<=1)return;const W=`${w.nodeModel.id}_${I}_right`,K=(((q=w.nodeModel.outgoing)==null?void 0:q.edges)||[]).filter(ne=>ne.sourceAnchorId===W).map(ne=>ne.id);K.length>0&&w.nodeModel.graphModel.eventCenter.emit("delete_edge",K);const J=F.filter(ne=>ne.id!==I);ye.set(w.nodeModel.properties.nodeData,"branch",J),_(J,!1)}function _(I,F){const Z=ye.cloneDeep(w.nodeModel.properties.branch_condition_list?w.nodeModel.properties.branch_condition_list:[]),G=I.map((W,K)=>{const J=Z.find(q=>q.id===W.id);if(J)return{index:K,height:J.height,id:W.id};if(F)return{index:K,height:12,id:W.id}}).filter(W=>W);ye.set(w.nodeModel.properties,"branch_condition_list",G),w.nodeModel.refreshBranch()}const y=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),b=I=>{var F;I?(F=c.value)==null||F.reset_default(I,o):M({})},x={modelId:"",branch:[{id:dl(),content:"",isOther:!1},{id:dl(),content:yt("workflow.nodes.intentNode.other"),isOther:!0}],dialogueNumber:1,contentList:[]};function M(I){ye.set(w.nodeModel.properties.nodeData,"modelParamsSetting",I)}const S=I=>{var F;I&&((F=c.value)==null||F.open(I,o,E.value.modelParamsSetting))},E=jn({get:()=>(w.nodeModel.properties.nodeData||(ye.set(w.nodeModel.properties,"nodeData",x),_(x.branch,!0)),w.nodeModel.properties.nodeData),set:I=>{ye.set(w.nodeModel.properties,"nodeData",I)}}),w=e,C=Ae(),j=Ae(null),B=()=>{var I;return Promise.all([s.value?s.value.validate():Promise.resolve(""),(I=C.value)==null?void 0:I.validate()]).then(()=>{if(E.value.branch.length!=new Set(E.value.branch.map(F=>F.content)).size)throw yt("workflow.nodes.intentNode.error2")}).catch(F=>Promise.reject({node:w.nodeModel,errMessage:F}))},$=t();function U(){var F;const I=r.value==="systemManage"?{modelType:"LLM",workspaceId:(F=$.value)==null?void 0:F.workspaceId}:{modelType:"LLM"};ni({type:"model",systemType:r.value}).getSelectModelList(I).then(Z=>{j.value=ye.groupBy(Z==null?void 0:Z.data,"provider")})}return kr(()=>{var I;U(),typeof((I=w.nodeModel.properties.nodeData)==null?void 0:I.isResult)>"u"&&Vs(w.nodeModel)&&ye.set(w.nodeModel.properties.nodeData,"isResult",!0),ye.set(w.nodeModel,"validate",B)}),(I,F)=>{const Z=Y("el-button"),G=Y("el-form-item"),W=Y("el-input-number"),K=Y("Plus"),J=Y("el-icon"),q=Y("el-input"),ne=Y("el-col"),oe=Y("Delete"),Me=Y("el-row"),Pe=Y("el-form"),Ee=Y("el-card");return ce(),Ge(so,{nodeModel:I.nodeModel},{default:N(()=>[X("h5",cX,fe(I.$t("workflow.nodeSetting")),1),T(Ee,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(Pe,{onSubmit:F[4]||(F[4]=Bt(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"IntentClassifyNodeFormRef",ref:C,"hide-required-asterisk":""},{default:N(()=>[T(G,{label:I.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:I.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:N(()=>[X("div",dX,[X("div",null,[X("span",null,[Je(fe(I.$t("views.application.form.aiModel.label")),1),F[5]||(F[5]=X("span",{class:"color-danger"},"*",-1))])]),T(Z,{type:"primary",link:"",disabled:!E.value.modelId,onClick:F[0]||(F[0]=we=>S(E.value.modelId)),onRefreshForm:M},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[T(Au,{onChange:b,onWheel:y,teleported:!1,modelValue:E.value.modelId,"onUpdate:modelValue":F[1]||(F[1]=we=>E.value.modelId=we),placeholder:I.$t("views.application.form.aiModel.placeholder"),options:j.value,onSubmitModel:U,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),T(G,{prop:"contentList",label:I.$t("workflow.nodes.intentNode.input.label"),rules:{message:I.$t("workflow.nodes.textToSpeechNode.content.label"),trigger:"change",required:!0}},{label:N(()=>[X("div",fX,[X("div",null,[X("span",null,[Je(fe(I.$t("workflow.nodes.intentNode.input.label")),1),F[6]||(F[6]=X("span",{class:"color-danger"},"*",-1))])])])]),default:N(()=>[T(go,{ref_key:"nodeCascaderRef",ref:s,nodeModel:I.nodeModel,class:"w-full",placeholder:I.$t("workflow.nodes.textToSpeechNode.content.label"),modelValue:E.value.contentList,"onUpdate:modelValue":F[2]||(F[2]=we=>E.value.contentList=we)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),T(G,{label:I.$t("views.application.form.historyRecord.label")},{default:N(()=>[T(W,{modelValue:E.value.dialogueNumber,"onUpdate:modelValue":F[3]||(F[3]=we=>E.value.dialogueNumber=we),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),T(G,null,{label:N(()=>[X("div",pX,[X("div",null,[X("span",null,[Je(fe(I.$t("workflow.nodes.intentNode.classify.label")),1),F[7]||(F[7]=X("span",{class:"color-danger"},"*",-1))])]),T(Z,{onClick:f,type:"primary",size:"large",link:""},{default:N(()=>[T(J,null,{default:N(()=>[T(K)]),_:1})]),_:1})])]),default:N(()=>[X("div",null,[(ce(!0),Rt(Fn,null,Tr(E.value.branch,(we,Be)=>(ce(),Rt("div",{key:we.id,class:"mb-8"},[T(G,{prop:`branch.${Be}.content`,rules:{message:I.$t("common.inputPlaceholder"),trigger:"change",required:!0}},{default:N(()=>[T(Me,{gutter:12,align:"middle"},{default:N(()=>[T(ne,{span:21},{default:N(()=>[T(q,{modelValue:we.content,"onUpdate:modelValue":nt=>we.content=nt,style:{width:"210px"},disabled:we.isOther,placeholder:I.$t("common.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])]),_:2},1024),T(ne,{span:3},{default:N(()=>[we.isOther?Qt("",!0):(ce(),Ge(Z,{key:0,link:"",size:"large",disabled:E.value.branch.filter(nt=>!nt.isOther).length<=1,onClick:nt=>d(we.id)},{default:N(()=>[T(J,null,{default:N(()=>[T(oe)]),_:1})]),_:2},1032,["disabled","onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["prop","rules"])]))),128))])]),_:1})]),_:1},8,["model"])]),_:1}),T(lh,{ref_key:"AIModeParamSettingDialogRef",ref:c,onRefresh:M},null,512)]),_:1},8,["nodeModel"])}}});class vX extends no{constructor(t){super(t,hX)}}class mX extends ro{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const f=this.properties.showNode===void 0?!0:this.properties.showNode,d=[];if(d.push({x:n-r/2+10,y:f?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let y=0;y<c.length;y++){const b=c[y];d.push({x:n+r/2-10,y:f?o-s/2+397+y*41.36:o-15,id:`${t}_${b.id}_right`,type:"right"}),console.log(o-s/2+397+100/2)}return d}}const yX={type:"intent-node",model:mX,view:vX},VN=Object.freeze(Object.defineProperty({__proto__:null,default:yX},Symbol.toStringTag,{value:"Module"})),gX={class:"dialog-footer"},_X=Rn({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Ae(),s=Ae(!1),c=Ae(!1),f=Ae(),d=(w,C)=>w.every(j=>iT.get(C,j,void 0)!==void 0),_=jn(()=>{if(f.value){const w=f.value;switch(w.type){case"input":return d(["field","input_type","label","required","attrs"],f.value)?f.value:{attrs:w.attrs||{maxlength:200,minlength:0},field:w.field||w.variable,input_type:"TextInput",label:w.label||w.name,defaultValue:w.defaultValue,required:w.required!=null?w.required:w.isRequired};case"select":return d(["field","input_type","label","required","option_list"],f.value)?f.value:{attrs:w.attrs||{},field:w.field||w.variable,input_type:"SingleSelect",label:w.label||w.name,defaultValue:w.defaultValue,required:w.required!=null?w.required:w.isRequired,option_list:w.option_list?w.option_list:w.optionList.map(C=>({key:C,value:C}))};case"date":return d(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],f.value)?f.value:{field:w.field||w.variable,input_type:"DatePicker",label:w.label||w.name,defaultValue:w.defaultValue,required:w.required!=null?w.required:w.isRequired,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return f.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:200,minlength:0},show_default_value:!0}}),y=Ae(null),b=Ae([{label:yt("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:yt("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:yt("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:yt("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:yt("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:yt("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:yt("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),x=Ae(!1),M=(w,C)=>{x.value=!0,w?(c.value=!0,f.value=ye.cloneDeep(w),y.value=C):f.value=null},S=()=>{x.value=!1,c.value=!1,y.value=null,f.value=null},E=async()=>{const w=r.value;w&&await w.validate().then(()=>{o("refresh",w==null?void 0:w.getData(),y.value),c.value=!1,f.value=null,y.value=null})};return t({open:M,close:S}),(w,C)=>{const j=Y("el-button"),B=Y("el-dialog");return ce(),Ge(B,{title:c.value?w.$t("common.param.editParam"):w.$t("common.param.addParam"),modelValue:x.value,"onUpdate:modelValue":C[2]||(C[2]=$=>x.value=$),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":S,"append-to-body":""},{footer:N(()=>[X("span",gX,[T(j,{onClick:Bt(S,["prevent"])},{default:N(()=>[Je(fe(w.$t("common.cancel")),1)]),_:1}),T(j,{type:"primary",onClick:C[1]||(C[1]=$=>E()),loading:s.value},{default:N(()=>[Je(fe(c.value?w.$t("common.save"):w.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(d_,{modelValue:_.value,"onUpdate:modelValue":C[0]||(C[0]=$=>_.value=$),"label-position":"top","require-asterisk-position":"right",input_type_list:b.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),bX={class:"flex-between mb-16"},wX=["title"],EX={class:"ml-4"},OX=["title"],SX={key:0},xX=["title"],MX={key:1},AX=["title"],TX=["title"],kX={class:"mr-4"},NX=Rn({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=Ae(),r=Ae(),s=Ae([]),c=Ae({title:yt("workflow.nodes.KnowledgeBaseNode.DocumentSetting")});function f(S,E){o.value.open(S,E)}function d(){r.value.open(c.value)}function _(S){s.value.splice(S,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList");const E=s.value.map(w=>({label:w.label.label,value:w.field}));ye.set(t.nodeModel.properties,"userInputFieldList",ye.cloneDeep(s.value)),ye.set(t.nodeModel.properties.config,"fields",E),M()}function y(S,E){for(let w=0;w<s.value.length;w++)if(s.value[w].field===S.field&&E!==w){Ra(yt("workflow.tip.paramErrorMessage")+S.field);return}E!==null?s.value.splice(E,1,S):s.value.push(S),o.value.close(),ye.set(t.nodeModel.properties,"userInputFieldList",ye.cloneDeep(s.value)),M()}function b(S){c.value=S,r.value.close()}const x=S=>{var E;if(S.input_type==="PasswordInput")return"******";if(S.defaultValue){const w=(E=S.option_list)==null?void 0:E.filter(C=>S.defaultValue.indexOf(C.value)>-1).map(C=>C.label).join(",");return w||S.defaultValue}if(S.defaultValue!==void 0)return S.defaultValue};function M(){if(!n.value)return;const E=n.value.$el.querySelector(".el-table__body-wrapper tbody");E&&_r.create(E,{animation:150,ghostClass:"ghost-row",onEnd:w=>{if(w.oldIndex===void 0||w.newIndex===void 0)return;const C=ye.cloneDeep([...s.value]),[j]=C.splice(w.oldIndex,1);C.splice(w.newIndex,0,j),s.value=C}})}return kr(()=>{s.value=[],t.nodeModel.properties.userInputFieldList&&(s.value=ye.cloneDeep(t.nodeModel.properties.userInputFieldList)),t.nodeModel.properties.userInputConfig&&(c.value=t.nodeModel.properties.userInputConfig),ye.set(t.nodeModel.properties,"userInputConfig",c),M()}),(S,E)=>{const w=Y("AppIcon"),C=Y("el-button"),j=Y("el-table-column"),B=Y("el-tag"),$=Y("el-switch"),U=Y("el-tooltip"),I=Y("el-table");return ce(),Rt(Fn,null,[X("div",bX,[X("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},fe(c.value.title),9,wX),X("div",null,[T(C,{type:"primary",link:"",onClick:d},{default:N(()=>[T(w,{iconName:"app-setting"})]),_:1}),X("span",EX,[T(C,{link:"",type:"primary",onClick:E[0]||(E[0]=F=>f())},{default:N(()=>[T(w,{iconName:"app-add-outlined",class:"mr-4"}),Je(" "+fe(S.$t("common.add")),1)]),_:1})])])]),T(I,{data:t.nodeModel.properties.userInputFieldList,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:N(()=>[T(j,{prop:"field",label:S.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:N(({row:F})=>[X("span",{title:F.field,class:"ellipsis-1"},fe(F.field),9,OX)]),_:1},8,["label"]),T(j,{prop:"label",label:S.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:F})=>[F.label&&F.label.input_type==="TooltipLabel"?(ce(),Rt("span",SX,[X("span",{title:F.label.label,class:"ellipsis-1"},fe(F.label.label),9,xX)])):(ce(),Rt("span",MX,[X("span",{title:F.label,class:"ellipsis-1"},fe(F.label),9,AX)]))]),_:1},8,["label"]),T(j,{label:S.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:N(({row:F})=>[F.input_type==="TextInput"?(ce(),Ge(B,{key:0,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):Qt("",!0),F.input_type==="PasswordInput"?(ce(),Ge(B,{key:1,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):Qt("",!0),F.input_type==="Slider"?(ce(),Ge(B,{key:2,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):Qt("",!0),F.input_type==="SwitchInput"?(ce(),Ge(B,{key:3,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):Qt("",!0),F.input_type==="SingleSelect"?(ce(),Ge(B,{key:4,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):Qt("",!0),F.input_type==="MultiSelect"?(ce(),Ge(B,{key:5,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):Qt("",!0),F.input_type==="RadioCard"?(ce(),Ge(B,{key:6,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):Qt("",!0),F.input_type==="DatePicker"?(ce(),Ge(B,{key:7,type:"info",class:"info-tag"},{default:N(()=>[Je(fe(S.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):Qt("",!0)]),_:1},8,["label"]),T(j,{prop:"defaultValue",label:S.$t("dynamicsForm.default.label")},{default:N(({row:F})=>[X("span",{title:F.defaultValue,class:"ellipsis-1"},fe(x(F)),9,TX)]),_:1},8,["label"]),T(j,{label:S.$t("common.required")},{default:N(({row:F})=>[X("div",{onClick:E[1]||(E[1]=Bt(()=>{},["stop"]))},[T($,{disabled:"",size:"small",modelValue:F.required,"onUpdate:modelValue":Z=>F.required=Z},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),T(j,{label:S.$t("common.operation"),align:"left",width:"90"},{default:N(({row:F,$index:Z})=>[X("span",kX,[T(U,{effect:"dark",content:S.$t("common.modify"),placement:"top"},{default:N(()=>[T(C,{type:"primary",text:"",onClick:Bt(G=>f(F,Z),["stop"])},{default:N(()=>[T(w,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),T(U,{effect:"dark",content:S.$t("common.delete"),placement:"top"},{default:N(()=>[T(C,{type:"primary",text:"",onClick:G=>_(Z)},{default:N(()=>[T(w,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"]),T(_X,{ref_key:"UserFieldFormDialogRef",ref:o,onRefresh:y},null,512),T(kN,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:b},null,512)],64)}}}),PX={class:"title-decoration-1 mb-8"},RX={class:"title-decoration-1 mb-8 mt-8"},CX=["onMouseenter"],DX={class:"break-all"},jX={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},IX=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=Ae(null),n=ko("getResourceDetail"),o=e,r=Ae(),s=jn(()=>{if(o.nodeModel.properties.userInputFieldList){const c=o.nodeModel.properties.userInputFieldList.map(f=>({label:typeof f.label=="string"?f.label:f.label.label,value:f.field,globeLabel:`{{global.${f.field}}}`,globeValue:`{{context['global'].${f.field}}}`}));return ye.set(o.nodeModel.properties.config,"globalFields",c),c}return o.nodeModel.properties.config&&ye.set(o.nodeModel.properties.config,"globalFields",[]),[]});return n(),kr(()=>{}),(c,f)=>{const d=Y("AppIcon"),_=Y("el-button"),y=Y("el-tooltip");return ce(),Ge(so,{nodeModel:c.nodeModel},{default:N(()=>[X("h5",PX,fe(c.$t("workflow.nodeSetting")),1),T(NX,{ref_key:"UserInputFieldTableFef",ref:r,"node-model":c.nodeModel},null,8,["node-model"]),X("h5",RX,fe(c.$t("common.param.outputParam")),1),s.value.length>0?(ce(!0),Rt(Fn,{key:0},Tr(s.value,(b,x)=>(ce(),Rt("div",{key:x,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:M=>t.value=x,onMouseleave:f[0]||(f[0]=M=>t.value=null)},[X("span",DX,fe(b.label)+" "+fe("{"+b.value+"}"),1),t.value===x?(ce(),Ge(y,{key:0,effect:"dark",content:c.$t("workflow.setting.copyParam"),placement:"top"},{default:N(()=>[T(_,{link:"",onClick:M=>Jt(Av)(b.globeLabel),style:{padding:"0"}},{default:N(()=>[T(d,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Qt("",!0)],40,CX))),128)):(ce(),Rt("div",jX,fe(c.$t("common.noData")),1))]),_:1},8,["nodeModel"])}}}),LX=Dd(IX,[["__scopeId","data-v-2f772a14"]]);class $X extends no{constructor(t){super(t,LX)}}class FX extends ro{constructor(t,n){super(t,n)}get_width(){return 600}}const VX={type:"knowledge-base-node",model:FX,view:$X},BN=Object.freeze(Object.defineProperty({__proto__:null,default:VX},Symbol.toStringTag,{value:"Module"})),BX={class:"title-decoration-1 mb-8"},UX={class:"flex-between"},GX=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=Ae(),r={documentList:[]},s=async()=>{var d;let f=[(d=n.value)==null?void 0:d.validate(),o.value?o.value.validate():Promise.resolve("")];return Promise.all(f).catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))},c=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:f=>{ye.set(t.nodeModel.properties,"nodeData",f)}});return kr(()=>{var f;typeof((f=t.nodeModel.properties.nodeData)==null?void 0:f.is_result)>"u"&&Vs(t.nodeModel)&&ye.set(t.nodeModel.properties.nodeData,"is_result",!0),ye.set(t.nodeModel,"validate",s)}),(f,d)=>{const _=Y("el-form-item"),y=Y("el-form"),b=Y("el-card");return ce(),Ge(so,{nodeModel:f.nodeModel},{default:N(()=>[X("h5",BX,fe(f.$t("workflow.nodeSetting")),1),T(b,{shadow:"never",class:"card-never"},{default:N(()=>[T(y,{onSubmit:d[1]||(d[1]=Bt(()=>{},["prevent"])),model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"KnowledgeWriteRef",ref:n,"hide-required-asterisk":""},{default:N(()=>[T(_,{prop:"documentList",label:f.$t("common.inputContent"),rules:{message:f.$t("workflow.nodes.textToSpeechNode.content.label"),trigger:"change",required:!0}},{label:N(()=>[X("div",UX,[X("div",null,[X("span",null,[Je(fe(f.$t("common.inputContent")),1),d[2]||(d[2]=X("span",{class:"color-danger"},"*",-1))])])])]),default:N(()=>[T(go,{ref_key:"nodeCascaderRef",ref:o,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("workflow.nodes.textToSpeechNode.content.label"),modelValue:c.value.documentList,"onUpdate:modelValue":d[0]||(d[0]=x=>c.value.documentList=x)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class zX extends no{constructor(t){super(t,GX)}}const HX={type:"knowledge-write-node",model:ro,view:zX},UN=Object.freeze(Object.defineProperty({__proto__:null,default:HX},Symbol.toStringTag,{value:"Module"})),WX={class:"handle flex-between lighter mb-8"},XX={key:0,class:"info"},qX=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={conditionList:[],condition:"and"},o=_=>_.ctrlKey===!0?(_.preventDefault(),!0):(_.stopPropagation(),!0),r=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:_=>{ye.set(t.nodeModel.properties,"nodeData",_)}}),s=()=>{var y;const _=ye.cloneDeep(((y=r.value)==null?void 0:y.conditionList)||[]);_.push({field:[],compare:"",value:""}),ye.set(t.nodeModel.properties.nodeData,"conditionList",_)},c=_=>{var b;const y=ye.cloneDeep(((b=r.value)==null?void 0:b.conditionList)||[]);y.splice(_,1),ye.set(t.nodeModel.properties.nodeData,"conditionList",y)},f=Ae(),d=()=>{var y;const _=[(y=f.value)==null?void 0:y.validate()];return Promise.all(_).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return kr(()=>{ye.set(t.nodeModel,"validate",d)}),(_,y)=>{const b=Y("el-option"),x=Y("el-select"),M=Y("el-form-item"),S=Y("el-col"),E=Y("el-input"),w=Y("AppIcon"),C=Y("el-button"),j=Y("el-row"),B=Y("el-form"),$=Y("el-card");return ce(),Ge(so,{nodeModel:_.nodeModel},{default:N(()=>[T($,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(B,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ContinueFromRef",ref:f,onSubmit:y[1]||(y[1]=Bt(()=>{},["prevent"]))},{default:N(()=>[X("div",WX,[r.value.conditionList.length>1?(ce(),Rt("div",XX,[X("span",null,fe(_.$t("workflow.nodes.conditionNode.conditions.info")),1),T(x,{teleported:!1,modelValue:r.value.condition,"onUpdate:modelValue":y[0]||(y[0]=U=>r.value.condition=U),size:"small",style:{width:"60px",margin:"0 8px"}},{default:N(()=>[T(b,{label:_.$t("workflow.condition.AND"),value:"and"},null,8,["label"]),T(b,{label:_.$t("workflow.condition.OR"),value:"or"},null,8,["label"])]),_:1},8,["modelValue"]),X("span",null,fe(_.$t("workflow.nodes.conditionNode.conditions.label")),1)])):Qt("",!0)]),(ce(!0),Rt(Fn,null,Tr(r.value.conditionList,(U,I)=>(ce(),Ge(j,{key:I,gutter:8},{default:N(()=>[T(S,{span:11},{default:N(()=>[T(M,{prop:"conditionList."+I+".field",rules:{type:"array",required:!0,message:_.$t("workflow.variable.placeholder"),trigger:"change"}},{default:N(()=>[T(go,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("workflow.variable.placeholder"),modelValue:U.field,"onUpdate:modelValue":F=>U.field=F},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),T(S,{span:6},{default:N(()=>[T(M,{prop:"conditionList."+I+".compare",rules:{required:!0,message:_.$t("workflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:N(()=>[T(x,{onWheel:o,teleported:!1,modelValue:U.compare,"onUpdate:modelValue":F=>U.compare=F,placeholder:_.$t("workflow.nodes.conditionNode.conditions.requiredMessage"),clearable:""},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(Jt(rE),(F,Z)=>(ce(),Ge(b,{key:Z,label:F.label,value:F.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),T(S,{span:6},{default:N(()=>[["is_null","is_not_null","is_true","is_not_true"].includes(U.compare)?Qt("",!0):(ce(),Ge(M,{key:0,prop:"conditionList."+I+".value",rules:{required:!0,message:_.$t("workflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:N(()=>[T(E,{modelValue:U.value,"onUpdate:modelValue":F=>U.value=F,placeholder:_.$t("workflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"]))]),_:2},1024),T(S,{span:1},{default:N(()=>[T(C,{link:"",type:"info",class:"mt-4",onClick:F=>c(I)},{default:N(()=>[T(w,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["model"]),T(C,{link:"",type:"primary",onClick:y[2]||(y[2]=U=>s())},{default:N(()=>[T(w,{iconName:"app-add-outlined",class:"mr-4"}),Je(" "+fe(_.$t("workflow.nodes.conditionNode.addCondition")),1)]),_:1})]),_:1})]),_:1},8,["nodeModel"])}}});class YX extends no{constructor(t){super(t,qX)}}const KX={type:"loop-break-node",model:ro,view:YX},GN=Object.freeze(Object.defineProperty({__proto__:null,default:KX},Symbol.toStringTag,{value:"Module"})),ZX={class:"handle flex-between lighter mb-8"},JX={key:0,class:"info"},QX=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={conditionList:[],condition:"and"},o=_=>_.ctrlKey===!0?(_.preventDefault(),!0):(_.stopPropagation(),!0),r=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:_=>{ye.set(t.nodeModel.properties,"nodeData",_)}}),s=()=>{var y;const _=ye.cloneDeep(((y=r.value)==null?void 0:y.conditionList)||[]);_.push({field:[],compare:"",value:""}),ye.set(t.nodeModel.properties.nodeData,"conditionList",_)},c=_=>{var b;const y=ye.cloneDeep(((b=r.value)==null?void 0:b.conditionList)||[]);y.splice(_,1),ye.set(t.nodeModel.properties.nodeData,"conditionList",y)},f=Ae(),d=()=>{var y;const _=[(y=f.value)==null?void 0:y.validate()];return Promise.all(_).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return kr(()=>{ye.set(t.nodeModel,"validate",d)}),(_,y)=>{const b=Y("el-option"),x=Y("el-select"),M=Y("el-form-item"),S=Y("el-col"),E=Y("el-input"),w=Y("AppIcon"),C=Y("el-button"),j=Y("el-row"),B=Y("el-form"),$=Y("el-card");return ce(),Ge(so,{nodeModel:_.nodeModel},{default:N(()=>[T($,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(B,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ContinueFromRef",ref:f,onSubmit:y[1]||(y[1]=Bt(()=>{},["prevent"]))},{default:N(()=>[X("div",ZX,[r.value.conditionList.length>1?(ce(),Rt("div",JX,[X("span",null,fe(_.$t("workflow.nodes.conditionNode.conditions.info")),1),T(x,{teleported:!1,modelValue:r.value.condition,"onUpdate:modelValue":y[0]||(y[0]=U=>r.value.condition=U),size:"small",style:{width:"60px",margin:"0 8px"}},{default:N(()=>[T(b,{label:_.$t("workflow.condition.AND"),value:"and"},null,8,["label"]),T(b,{label:_.$t("workflow.condition.OR"),value:"or"},null,8,["label"])]),_:1},8,["modelValue"]),X("span",null,fe(_.$t("workflow.nodes.conditionNode.conditions.label")),1)])):Qt("",!0)]),(ce(!0),Rt(Fn,null,Tr(r.value.conditionList,(U,I)=>(ce(),Ge(j,{key:I,gutter:8},{default:N(()=>[T(S,{span:11},{default:N(()=>[T(M,{prop:"conditionList."+I+".field",rules:{type:"array",required:!0,message:_.$t("workflow.variable.placeholder"),trigger:"change"}},{default:N(()=>[T(go,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("workflow.variable.placeholder"),modelValue:U.field,"onUpdate:modelValue":F=>U.field=F},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),T(S,{span:6},{default:N(()=>[T(M,{prop:"conditionList."+I+".compare",rules:{required:!0,message:_.$t("workflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:N(()=>[T(x,{onWheel:o,teleported:!1,modelValue:U.compare,"onUpdate:modelValue":F=>U.compare=F,placeholder:_.$t("workflow.nodes.conditionNode.conditions.requiredMessage"),clearable:""},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(Jt(rE),(F,Z)=>(ce(),Ge(b,{key:Z,label:F.label,value:F.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),T(S,{span:6},{default:N(()=>[["is_null","is_not_null","is_true","is_not_true"].includes(U.compare)?Qt("",!0):(ce(),Ge(M,{key:0,prop:"conditionList."+I+".value",rules:{required:!0,message:_.$t("workflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:N(()=>[T(E,{modelValue:U.value,"onUpdate:modelValue":F=>U.value=F,placeholder:_.$t("workflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"]))]),_:2},1024),T(S,{span:1},{default:N(()=>[T(C,{link:"",type:"info",class:"mt-4",onClick:F=>c(I)},{default:N(()=>[T(w,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["model"]),T(C,{link:"",type:"primary",onClick:y[2]||(y[2]=U=>s())},{default:N(()=>[T(w,{iconName:"app-add-outlined",class:"mr-4"}),Je(" "+fe(_.$t("workflow.nodes.conditionNode.addCondition")),1)]),_:1})]),_:1})]),_:1},8,["nodeModel"])}}});class eq extends no{constructor(t){super(t,QX)}}const tq={type:"loop-continue-node",model:ro,view:eq},zN=Object.freeze(Object.defineProperty({__proto__:null,default:tq},Symbol.toStringTag,{value:"Module"})),nq=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={loopType:"ARRAY",array:[],number:1},o=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:y=>{ye.set(t.nodeModel.properties,"nodeData",y)}}),r=jn(()=>t.nodeModel.properties.showNode!==void 0?t.nodeModel.properties.showNode:(ye.set(t.nodeModel.properties,"showNode",!0),!0));Kf(r,()=>{r.value?ye.throttle(_,1e3)():ye.throttle(d,1e3)()});const s=Ae(),c=Ae(),f=()=>{var y;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(y=s.value)==null?void 0:y.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))},d=()=>{const b=t.nodeModel.graphModel.getNodeOutgoingNode(t.nodeModel.id).find(x=>x.type==og.type);b&&(b.set_loop_body(),t.nodeModel.graphModel.deleteNode(b.id))},_=()=>{if(!t.nodeModel.graphModel.getNodeOutgoingNode(t.nodeModel.id).some(b=>b.type==og.type)){let b={nodes:[n8],edges:[]},x=t.nodeModel.x,M=t.nodeModel.y+350;t.nodeModel.properties.nodeData.loopBody&&(b=t.nodeModel.properties.nodeData.loopBody),t.nodeModel.properties.nodeData.loop&&(x=t.nodeModel.properties.nodeData.loop.x,M=t.nodeModel.properties.nodeData.loop.y);const S=t.nodeModel.graphModel.addNode({type:og.type,properties:{...og.properties,workflow:b,loop_node_id:t.nodeModel.id},x,y:M});t.nodeModel.graphModel.addEdge({type:"loop-edge",sourceNodeId:t.nodeModel.id,sourceAnchorId:t.nodeModel.id+"_children",targetNodeId:S.id,virtual:!0})}};return kr(()=>{var y;typeof((y=t.nodeModel.properties.nodeData)==null?void 0:y.is_result)>"u"&&Vs(t.nodeModel)&&ye.set(t.nodeModel.properties.nodeData,"is_result",!0),ye.set(t.nodeModel,"validate",f),t.nodeModel.virtual||_()}),(y,b)=>{const x=Y("el-option"),M=Y("el-select"),S=Y("el-form-item"),E=Y("el-input-number"),w=Y("el-form"),C=Y("el-card");return ce(),Ge(so,{nodeModel:y.nodeModel},{default:N(()=>[T(C,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(w,{onSubmit:b[6]||(b[6]=Bt(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:s},{default:N(()=>[T(S,{label:y.$t("workflow.nodes.loopNode.loopType.label"),onClick:b[1]||(b[1]=Bt(()=>{},["prevent"])),prop:"loopType",rules:{message:y.$t("workflow.nodes.loopNode.loopType.requiredMessage"),trigger:"change",required:!0}},{default:N(()=>[T(M,{modelValue:o.value.loopType,"onUpdate:modelValue":b[0]||(b[0]=j=>o.value.loopType=j),type:"small",teleported:!1},{default:N(()=>[T(x,{label:y.$t("workflow.nodes.loopNode.loopType.arrayLoop"),value:"ARRAY"},null,8,["label"]),T(x,{label:y.$t("workflow.nodes.loopNode.loopType.numberLoop"),value:"NUMBER"},null,8,["label"]),T(x,{label:y.$t("workflow.nodes.loopNode.loopType.infiniteLoop"),value:"LOOP"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),o.value.loopType=="ARRAY"?(ce(),Ge(S,{key:0,label:y.$t("workflow.nodes.loopNode.loopArray.label"),onClick:b[3]||(b[3]=Bt(()=>{},["prevent"])),prop:"array",rules:{message:y.$t("workflow.nodes.loopNode.loopArray.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[T(go,{ref_key:"nodeCascaderRef",ref:c,nodeModel:y.nodeModel,class:"w-full",placeholder:y.$t("workflow.nodes.loopNode.loopArray.placeholder"),modelValue:o.value.array,"onUpdate:modelValue":b[2]||(b[2]=j=>o.value.array=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):o.value.loopType=="NUMBER"?(ce(),Ge(S,{key:1,label:y.$t("workflow.nodes.loopNode.loopNumber.label"),onClick:b[5]||(b[5]=Bt(()=>{},["prevent"])),prop:"number",rules:{message:y.$t("workflow.nodes.loopNode.loopNumber.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[T(E,{modelValue:o.value.number,"onUpdate:modelValue":b[4]||(b[4]=j=>o.value.number=j),min:1},null,8,["modelValue"])]),_:1},8,["label","rules"])):Qt("",!0)]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class rq extends no{constructor(t){const n=t.model.properties.config;super(t,nq),t.model.properties.config=n}}class oq extends ro{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s}=this,c=this.properties.showNode===void 0?!0:this.properties.showNode,f=[];return this.type!==Tn.Base&&(this.type!==Tn.Start&&f.push({x:n-r/2+10,y:c?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),f.push({x:n+r/2-10,y:c?o:o-15,id:`${t}_right`,type:"right"})),f.push({x:n,y:o+s/2-25,id:`${t}_children`,type:"children"}),f}}const iq={type:"loop-node",model:oq,view:rq},HN=Object.freeze(Object.defineProperty({__proto__:null,default:iq},Symbol.toStringTag,{value:"Module"})),aq={class:"dialog-footer"},lq=Rn({__name:"LoopFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Ae(),s=Ae(!1),c=Ae(!1),f=Ae(null),d=Ae({field:"",label:""}),_=jd({label:[{required:!0,message:yt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:yt("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:yt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),y=Ae(!1),b=(S,E)=>{S&&(d.value=ye.cloneDeep(S),c.value=!0,f.value=E),y.value=!0},x=()=>{y.value=!1,c.value=!1,f.value=null,d.value={field:"",label:""}},M=async S=>{S&&await S.validate(E=>{E&&o("refresh",d.value,f.value)})};return t({open:b,close:x}),(S,E)=>{const w=Y("el-input"),C=Y("el-form-item"),j=Y("el-form"),B=Y("el-button"),$=Y("el-dialog");return ce(),Ge($,{title:c.value?S.$t("common.param.editParam"):S.$t("common.param.addParam"),modelValue:y.value,"onUpdate:modelValue":E[3]||(E[3]=U=>y.value=U),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:N(()=>[X("span",aq,[T(B,{onClick:Bt(x,["prevent"])},{default:N(()=>[Je(fe(S.$t("common.cancel")),1)]),_:1}),T(B,{type:"primary",onClick:E[2]||(E[2]=U=>M(r.value)),loading:s.value},{default:N(()=>[Je(fe(c.value?S.$t("common.save"):S.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:_,model:d.value,"require-asterisk-position":"right"},{default:N(()=>[T(C,{label:S.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:_.field},{default:N(()=>[T(w,{modelValue:d.value.field,"onUpdate:modelValue":E[0]||(E[0]=U=>d.value.field=U),maxlength:64,placeholder:S.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),T(C,{label:S.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:_.label},{default:N(()=>[T(w,{modelValue:d.value.label,"onUpdate:modelValue":E[1]||(E[1]=U=>d.value.label=U),maxlength:64,"show-word-limit":"",placeholder:S.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),sq={class:"flex-between mb-16"},uq={class:"break-all ellipsis lighter",style:{"max-width":"80%"}},cq={class:"ml-4"},dq=["title"],fq=["title"],pq={class:"mr-4"},hq=Rn({__name:"LoopFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=Ae(),r=Ae([]);function s(d,_){o.value.open(d,_)}function c(d){r.value.splice(d,1)}function f(d,_){for(let y=0;y<r.value.length;y++)if(r.value[y].field===d.field&&_!==y){Ra(yt("workflow.tip.paramErrorMessage")+d.field);return}[void 0,null].includes(_)?r.value.push(d):r.value.splice(_,1,d),o.value.close()}return kr(()=>{t.nodeModel.properties.loopInputFieldList&&(r.value=ye.cloneDeep(t.nodeModel.properties.loopInputFieldList)),ye.set(t.nodeModel.properties,"loopInputFieldList",r)}),(d,_)=>{var E;const y=Y("AppIcon"),b=Y("el-button"),x=Y("el-table-column"),M=Y("el-tooltip"),S=Y("el-table");return ce(),Rt(Fn,null,[X("div",sq,[X("h5",uq,fe(d.$t("workflow.variable.loop")),1),X("div",null,[X("span",cq,[T(b,{link:"",type:"primary",onClick:_[0]||(_[0]=w=>s())},{default:N(()=>[T(y,{iconName:"app-add-outlined",class:"mr-4"}),Je(" "+fe(d.$t("common.add")),1)]),_:1})])])]),((E=t.nodeModel.properties.loopInputFieldList)==null?void 0:E.length)>0?(ce(),Ge(S,{key:0,data:t.nodeModel.properties.loopInputFieldList,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:N(()=>[T(x,{prop:"field",label:d.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:N(({row:w})=>[X("span",{title:w.field,class:"ellipsis-1"},fe(w.field),9,dq)]),_:1},8,["label"]),T(x,{prop:"label",label:d.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:w})=>[X("span",null,[X("span",{title:w.label,class:"ellipsis-1"},fe(w.label),9,fq)])]),_:1},8,["label"]),T(x,{label:d.$t("common.operation"),align:"left",width:"90"},{default:N(({row:w,$index:C})=>[X("span",pq,[T(M,{effect:"dark",content:d.$t("common.modify"),placement:"top"},{default:N(()=>[T(b,{type:"primary",text:"",onClick:Bt(j=>s(w,C),["stop"])},{default:N(()=>[T(y,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),T(M,{effect:"dark",content:d.$t("common.delete"),placement:"top"},{default:N(()=>[T(b,{type:"primary",text:"",onClick:j=>c(C)},{default:N(()=>[T(y,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Qt("",!0),T(lq,{ref_key:"ChatFieldDialogRef",ref:o,onRefresh:f},null,512)],64)}}}),vq={class:"title-decoration-1 mb-8"},mq={class:"title-decoration-1 mb-8"},yq={class:"break-all"},gq=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=jn(()=>(t.nodeModel.properties.loopInputFieldList?t.nodeModel.properties.loopInputFieldList:[]).map(r=>r.label&&r.label.input_type==="TooltipLabel"?{label:r.label.label,value:r.field||r.variable}:{label:r.label||r.name,value:r.field||r.variable}));Kf(n,()=>{t.nodeModel.graphModel.refresh_loop_fields(ye.cloneDeep(n.value))});const o=Ae(!1);return kr(()=>{t.nodeModel.graphModel.refresh_loop_fields(ye.cloneDeep(n.value))}),(r,s)=>{const c=Y("AppIcon"),f=Y("el-button"),d=Y("el-tooltip");return ce(),Ge(so,{nodeModel:r.nodeModel},{default:N(()=>{var _;return[X("h5",vq,fe(r.$t("workflow.nodeSetting")),1),T(hq,{nodeModel:r.nodeModel},null,8,["nodeModel"]),(_=n.value)!=null&&_.length?(ce(),Rt(Fn,{key:0},[X("h5",mq,fe(r.$t("workflow.variable.loop")),1),(ce(!0),Rt(Fn,null,Tr(n.value||[],(y,b)=>(ce(),Rt("div",{key:b,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:s[0]||(s[0]=x=>o.value=!0),onMouseleave:s[1]||(s[1]=x=>o.value=!1)},[X("span",yq,fe(y.label)+" "+fe("{"+y.value+"}"),1),o.value===!0?(ce(),Ge(d,{key:0,effect:"dark",content:r.$t("workflow.setting.copyParam"),placement:"top"},{default:N(()=>[T(f,{link:"",onClick:x=>Jt(Av)(`{{loop.${y.value}}}`),style:{padding:"0"}},{default:N(()=>[T(c,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Qt("",!0)],32))),128))],64)):Qt("",!0)]}),_:1},8,["nodeModel"])}}});class _q extends no{constructor(t){super(t,gq)}get_node_field_list(){var n,o;const t=[];return this.props.model.type==="loop-start-node"&&t.push({value:"loop",label:yt("workflow.variable.loop"),type:"loop",children:(this.props.model.properties.loopInputFieldList?this.props.model.properties.loopInputFieldList:[]).map(r=>r.label&&r.label.input_type==="TooltipLabel"?{label:r.label.label,value:r.field||r.variable}:{label:r.label||r.name,value:r.field||r.variable})||[]}),t.push({value:this.props.model.id,label:this.props.model.properties.nodeName,type:this.props.model.type,children:((o=(n=this.props.model.properties)==null?void 0:n.config)==null?void 0:o.fields)||[]}),t}}const bq={type:"loop-start-node",model:ro,view:_q},WN=Object.freeze(Object.defineProperty({__proto__:null,default:bq},Symbol.toStringTag,{value:"Module"})),wq={class:"title-decoration-1 mb-8"},Eq={class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},Oq={class:"flex-between"},Sq={class:"flex align-center"},xq=["src"],Mq={class:"flex-between"},Aq={class:"ml-4"},Tq={class:"title-decoration-1 mb-8"},kq={key:0,class:"p-8-12"},Nq={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},Pq={class:"flex-between"},Rq={key:0,class:"color-danger"},Cq={key:0,class:"p-8-12"},Dq={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},jq={class:"flex-between"},Iq={key:0,class:"color-danger"},Lq=`{
  "math": {
    "url": "your_server",
    "type": "sse"
  }
}`,$q=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e;c_();const n=Zi(),{params:{id:o}}=n,s=ko("getResourceDetail")(),c=jn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),f=Ae(),d=Ae(!1),_=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),y={mcpTool:"",mcpTools:[],mcpServers:"",mcpServer:"",mcpSource:"referencing",mcpToolId:"",toolParams:{},tool_form_field:[],params_nested:""},b=Ae([]);function x($){ye.set(t.nodeModel.properties.nodeData,"mcpServers",$)}async function M(){const $=await ni({type:"tool",systemType:c.value}).getToolById(w.value.mcpToolId,d);w.value.mcpServers=$.data.code}function S(){if(w.value.mcpSource==="referencing"&&!w.value.mcpToolId){Ra(yt("workflow.nodes.mcpNode.mcpToolTip"));return}if(w.value.mcpSource==="custom"&&!w.value.mcpServers){Ra(yt("workflow.nodes.mcpNode.mcpServerTip"));return}try{JSON.parse(w.value.mcpServers)}catch{Ra(yt("workflow.nodes.mcpNode.mcpServerTip"));return}ni({type:"application",systemType:c.value}).getMcpTools(o,w.value.mcpServers,d).then($=>{var U;w.value.mcpTools=$.data,Qm(yt("workflow.nodes.mcpNode.getToolsSuccess")),w.value.mcpServer=(U=w.value.mcpTools.find(I=>I.name===w.value.mcpTool))==null?void 0:U.server})}function E(){var U,I,F,Z,G,W;w.value.mcpServer=(U=w.value.mcpTools.find(K=>K.name===w.value.mcpTool))==null?void 0:U.server;const $=(I=w.value.mcpTools.find(K=>K.name===w.value.mcpTool))==null?void 0:I.args_schema;w.value.tool_form_field=[];for(const K in $==null?void 0:$.properties){const J=$==null?void 0:$.properties[K].properties;if(J){w.value.params_nested=K;for(const q in J){let ne="TextInput";J[q].type==="string"?ne="TextInput":J[q].type==="number"?ne="NumberInput":J[q].type==="boolean"?ne="SwitchInput":(J[q].type==="array"||J[q].type==="object")&&(ne="JsonInput"),w.value.tool_form_field.push({field:q,label:{input_type:"TooltipLabel",label:q,attrs:{tooltip:J[q].description},props_info:{}},input_type:ne,source:"referencing",required:((F=$.properties[K].required)==null?void 0:F.indexOf(q))!==-1,props_info:{rules:[{required:((Z=$.properties[K].required)==null?void 0:Z.indexOf(q))!==-1,message:yt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{w.value.params_nested="";let q="TextInput";$.properties[K].type==="string"?q="TextInput":$.properties[K].type==="number"?q="NumberInput":$.properties[K].type==="boolean"?q="SwitchInput":($.properties[K].type==="array"||$.properties[K].type==="object")&&(q="JsonInput"),w.value.tool_form_field.push({field:K,label:{input_type:"TooltipLabel",label:K,attrs:{tooltip:$.properties[K].description},props_info:{}},input_type:q,source:"referencing",required:((G=$.required)==null?void 0:G.indexOf(K))!==-1,props_info:{rules:[{required:((W=$.required)==null?void 0:W.indexOf(K))!==-1,message:yt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}w.value.params_nested?w.value.toolParams={[w.value.params_nested]:{}}:w.value.toolParams={}}const w=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",y),t.nodeModel.properties.nodeData),set:$=>{ye.set(t.nodeModel.properties,"nodeData",$)}}),C=Ae(),j=async()=>{if(f.value){const $=w.value.tool_form_field.filter(U=>U.required).map(U=>U.label.label);if($.length>0){for(const U of $)if(w.value.params_nested){if(!w.value.toolParams[w.value.params_nested][U])return Promise.reject({node:t.nodeModel,errMessage:U+yt("dynamicsForm.tip.requiredMessage")})}else if(!w.value.toolParams[U])return Promise.reject({node:t.nodeModel,errMessage:U+yt("dynamicsForm.tip.requiredMessage")})}}if(C.value){const $=ye.cloneDeep(w.value);if(!$.mcpServers)return Promise.reject({node:t.nodeModel,errMessage:yt("workflow.nodes.mcpNode.mcpServerTip")});if(!$.mcpTool)return Promise.reject({node:t.nodeModel,errMessage:yt("workflow.nodes.mcpNode.mcpToolTip")})}};function B(){var U;const $=c.value==="systemManage"?{scope:"WORKSPACE",toolType:"MCP",workspaceId:(U=s.value)==null?void 0:U.workspaceId}:{scope:"WORKSPACE",toolType:"MCP"};ni({type:"tool",systemType:c.value}).getAllToolList($,d).then(I=>{b.value=[...I.data.shared_tools,...I.data.tools].filter(F=>F.isActive)})}return kr(()=>{var $;typeof(($=t.nodeModel.properties.nodeData)==null?void 0:$.isResult)>"u"&&Vs(t.nodeModel)&&ye.set(t.nodeModel.properties.nodeData,"isResult",!0),B(),ye.set(t.nodeModel,"validate",j)}),($,U)=>{const I=Y("el-option"),F=Y("el-select"),Z=Y("el-avatar"),G=Y("ToolIcon"),W=Y("el-tag"),K=Y("el-form-item"),J=Y("Plus"),q=Y("el-icon"),ne=Y("el-button"),oe=Y("AppIcon"),Me=Y("el-tooltip"),Pe=Y("el-form"),Ee=Y("el-text"),we=Y("el-input"),Be=Y("el-input-number"),nt=Y("el-switch"),Ot=Jm("loading");return ce(),Ge(so,{nodeModel:$.nodeModel},{default:N(()=>[X("h5",wq,fe($.$t("workflow.nodeSetting")),1),X("div",Eq,[T(Pe,{onSubmit:U[5]||(U[5]=Bt(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:C,"hide-required-asterisk":""},{default:N(()=>[T(K,{label:"MCP Server Config"},{label:N(()=>[X("div",Oq,[U[9]||(U[9]=X("div",null,[Je(" MCP Server Config "),X("span",{class:"color-danger"},"*")],-1)),T(F,{teleported:!1,modelValue:w.value.mcpSource,"onUpdate:modelValue":U[0]||(U[0]=Qe=>w.value.mcpSource=Qe),size:"small",style:{width:"85px"}},{default:N(()=>[T(I,{label:$.$t("workflow.nodes.mcpNode.reference"),value:"referencing"},null,8,["label"]),T(I,{label:$.$t("common.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[w.value.mcpSource==="custom"?(ce(),Ge(as,{key:0,onWheel:_,title:"MCP Server Config",modelValue:w.value.mcpServers,"onUpdate:modelValue":U[1]||(U[1]=Qe=>w.value.mcpServers=Qe),style:{height:"150px"},onSubmitDialog:x,placeholder:Lq},null,8,["modelValue"])):(ce(),Ge(F,{key:1,modelValue:w.value.mcpToolId,"onUpdate:modelValue":U[2]||(U[2]=Qe=>w.value.mcpToolId=Qe),filterable:"",onChange:M},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(b.value,Qe=>(ce(),Ge(I,{key:Qe.id,label:Qe.name,value:Qe.id},{default:N(()=>[X("div",Sq,[Qe!=null&&Qe.icon?(ce(),Ge(Z,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:N(()=>[X("img",{src:Jt(fl)(Qe==null?void 0:Qe.icon),alt:""},null,8,xq)]),_:2},1024)):(ce(),Ge(G,{key:1,size:20,type:Qe==null?void 0:Qe.toolType,class:"mr-8"},null,8,["type"])),X("span",null,fe(Qe.name),1),Qe.scope==="SHARED"?(ce(),Ge(W,{key:2,type:"info",class:"info-tag ml-8"},{default:N(()=>[Je(fe(Jt(yt)("views.shared.title")),1)]),_:1})):Qt("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1}),T(K,null,{label:N(()=>[X("div",Mq,[X("span",null,fe($.$t("workflow.nodes.mcpNode.getTool")),1),T(ne,{type:"primary",link:"",onClick:U[3]||(U[3]=Qe=>S())},{default:N(()=>[T(q,{class:"mr-4"},{default:N(()=>[T(J)]),_:1}),Je(" "+fe($.$t("workflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:N(()=>[T(F,{modelValue:w.value.mcpTool,"onUpdate:modelValue":U[4]||(U[4]=Qe=>w.value.mcpTool=Qe),onChange:E,filterable:""},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(w.value.mcpTools,Qe=>(ce(),Ge(I,{key:Qe.value,label:Qe.name,value:Qe.name,class:"flex align-center"},{default:N(()=>[T(Me,{effect:"dark",content:Qe.description,placement:"top-start","popper-class":"max-w-350"},{default:N(()=>[T(oe,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),X("span",Aq,fe(Qe.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),X("h5",Tq,fe($.$t("workflow.nodes.mcpNode.toolParam")),1),w.value.toolParams[w.value.params_nested]?(ce(),Rt(Fn,{key:0},[w.value.mcpTool?(ce(),Rt("div",Nq,[w.value.mcpTool?Ca((ce(),Ge(Pe,{key:0,ref_key:"dynamicsFormRef",ref:f,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:U[7]||(U[7]=Bt(()=>{},["prevent"]))},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(w.value.tool_form_field,Qe=>(ce(),Ge(K,{key:Qe.field,required:Qe.required},{label:N(()=>[X("div",Pq,[X("div",null,[T(US,{label:Qe.label.label,tooltip:Qe.label.attrs.tooltip},null,8,["label","tooltip"]),Qe.required?(ce(),Rt("span",Rq,"*")):Qt("",!0)]),T(F,{teleported:!1,modelValue:Qe.source,"onUpdate:modelValue":lt=>Qe.source=lt,size:"small",style:{width:"85px"},onChange:U[6]||(U[6]=lt=>w.value.toolParams[w.value.params_nested]={})},{default:N(()=>[T(I,{label:$.$t("workflow.variable.Referencing"),value:"referencing"},null,8,["label"]),T(I,{label:$.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:N(()=>[Qe.source==="custom"&&Qe.input_type==="TextInput"?(ce(),Ge(we,{key:0,modelValue:w.value.toolParams[w.value.params_nested][Qe.label.label],"onUpdate:modelValue":lt=>w.value.toolParams[w.value.params_nested][Qe.label.label]=lt},null,8,["modelValue","onUpdate:modelValue"])):Qe.source==="custom"&&Qe.input_type==="NumberInput"?(ce(),Ge(Be,{key:1,modelValue:w.value.toolParams[w.value.params_nested][Qe.label.label],"onUpdate:modelValue":lt=>w.value.toolParams[w.value.params_nested][Qe.label.label]=lt},null,8,["modelValue","onUpdate:modelValue"])):Qe.source==="custom"&&Qe.input_type==="SwitchInput"?(ce(),Ge(nt,{key:2,modelValue:w.value.toolParams[w.value.params_nested][Qe.label.label],"onUpdate:modelValue":lt=>w.value.toolParams[w.value.params_nested][Qe.label.label]=lt},null,8,["modelValue","onUpdate:modelValue"])):Qe.source==="custom"&&Qe.input_type==="JsonInput"?(ce(),Ge(we,{key:3,modelValue:w.value.toolParams[w.value.params_nested][Qe.label.label],"onUpdate:modelValue":lt=>w.value.toolParams[w.value.params_nested][Qe.label.label]=lt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):Qt("",!0),Qe.source==="referencing"?(ce(),Ge(go,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("workflow.variable.placeholder"),modelValue:w.value.toolParams[w.value.params_nested][Qe.label.label],"onUpdate:modelValue":lt=>w.value.toolParams[w.value.params_nested][Qe.label.label]=lt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):Qt("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[Ot,d.value]]):Qt("",!0)])):(ce(),Rt("div",kq,[T(Ee,{type:"info"},{default:N(()=>[Je(fe($.$t("common.noData")),1)]),_:1})]))],64)):(ce(),Rt(Fn,{key:1},[w.value.mcpTool?(ce(),Rt("div",Dq,[w.value.mcpTool?Ca((ce(),Ge(Pe,{key:0,ref_key:"dynamicsFormRef",ref:f,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:U[8]||(U[8]=Bt(()=>{},["prevent"]))},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(w.value.tool_form_field,Qe=>(ce(),Ge(K,{key:Qe.field,required:Qe.required},{label:N(()=>[X("div",jq,[X("div",null,[T(US,{label:Qe.label.label,tooltip:Qe.label.attrs.tooltip},null,8,["label","tooltip"]),Qe.required?(ce(),Rt("span",Iq,"*")):Qt("",!0)]),T(F,{teleported:!1,modelValue:Qe.source,"onUpdate:modelValue":lt=>Qe.source=lt,size:"small",style:{width:"85px"}},{default:N(()=>[T(I,{label:$.$t("workflow.variable.Referencing"),value:"referencing"},null,8,["label"]),T(I,{label:$.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:N(()=>[Qe.source==="custom"&&Qe.input_type==="TextInput"?(ce(),Ge(we,{key:0,modelValue:w.value.toolParams[Qe.label.label],"onUpdate:modelValue":lt=>w.value.toolParams[Qe.label.label]=lt},null,8,["modelValue","onUpdate:modelValue"])):Qe.source==="custom"&&Qe.input_type==="NumberInput"?(ce(),Ge(Be,{key:1,modelValue:w.value.toolParams[Qe.label.label],"onUpdate:modelValue":lt=>w.value.toolParams[Qe.label.label]=lt},null,8,["modelValue","onUpdate:modelValue"])):Qe.source==="custom"&&Qe.input_type==="SwitchInput"?(ce(),Ge(nt,{key:2,modelValue:w.value.toolParams[Qe.label.label],"onUpdate:modelValue":lt=>w.value.toolParams[Qe.label.label]=lt},null,8,["modelValue","onUpdate:modelValue"])):Qe.source==="custom"&&Qe.input_type==="JsonInput"?(ce(),Ge(we,{key:3,modelValue:w.value.toolParams[Qe.label.label],"onUpdate:modelValue":lt=>w.value.toolParams[Qe.label.label]=lt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):Qt("",!0),Qe.source==="referencing"?(ce(),Ge(go,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("workflow.variable.placeholder"),modelValue:w.value.toolParams[Qe.label.label],"onUpdate:modelValue":lt=>w.value.toolParams[Qe.label.label]=lt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):Qt("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[Ot,d.value]]):Qt("",!0)])):(ce(),Rt("div",Cq,[T(Ee,{type:"info"},{default:N(()=>[Je(fe($.$t("common.noData")),1)]),_:1})]))],64))]),_:1},8,["nodeModel"])}}});class Fq extends no{constructor(t){super(t,$q)}}const Vq={type:"mcp-node",model:ro,view:Fq},XN=Object.freeze(Object.defineProperty({__proto__:null,default:Vq},Symbol.toStringTag,{value:"Module"})),Bq={class:"p-8"},Uq={class:"dialog-footer"},Gq=Rn({__name:"DatabaseSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Ae(),s=Ae({databaseSetting:{type:"mysql",host:"127.0.0.1",port:3306,username:"",password:"",database:"mysql"}}),c=Ae(!1),f=Ae(!1),d=b=>{s.value={databaseSetting:ye.cloneDeep(b.databaseSetting)},c.value=!0},_=async()=>{o("refresh",s.value),c.value=!1};function y(b){b==="mysql"?(s.value.databaseSetting.port=3306,s.value.databaseSetting.database="mysql"):b==="postgresql"&&(s.value.databaseSetting.port=5432,s.value.databaseSetting.database="postgres")}return t({open:d}),(b,x)=>{const M=Y("el-radio"),S=Y("el-card"),E=Y("el-radio-group"),w=Y("el-form-item"),C=Y("el-input"),j=Y("el-col"),B=Y("el-input-number"),$=Y("el-row"),U=Y("el-form"),I=Y("el-scrollbar"),F=Y("el-button"),Z=Y("el-dialog"),G=Jm("loading");return ce(),Ge(Z,{class:"scrollbar-dialog","align-center":"",title:b.$t("common.paramSetting"),modelValue:c.value,"onUpdate:modelValue":x[8]||(x[8]=W=>c.value=W),width:"550px","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:N(()=>[X("span",Uq,[T(F,{onClick:x[6]||(x[6]=Bt(W=>c.value=!1,["prevent"]))},{default:N(()=>[Je(fe(b.$t("common.cancel")),1)]),_:1}),T(F,{type:"primary",onClick:x[7]||(x[7]=W=>_()),loading:f.value},{default:N(()=>[Je(fe(b.$t("common.save")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(I,{"max-height":"550"},{default:N(()=>[X("div",Bq,[Ca((ce(),Ge(U,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:N(()=>[T(w,{label:"数据库类型"},{default:N(()=>[T(E,{modelValue:s.value.databaseSetting.type,"onUpdate:modelValue":x[0]||(x[0]=W=>s.value.databaseSetting.type=W),class:"card__radio",onChange:y},{default:N(()=>[T(S,{shadow:"never",class:Dl(["mb-16",s.value.type==="mysql"?"active":""])},{default:N(()=>[T(M,{value:"mysql",size:"small"},{default:N(()=>x[9]||(x[9]=[X("p",{class:"mb-4"}," MYSQL ",-1)])),_:1,__:[9]})]),_:1},8,["class"]),T(S,{shadow:"never",class:Dl(["mb-16",s.value.databaseSetting.type==="postgresql"?"active":""])},{default:N(()=>[T(M,{value:"postgresql",size:"small"},{default:N(()=>x[10]||(x[10]=[X("p",{class:"mb-4"}," POSTGRESQL ",-1)])),_:1,__:[10]})]),_:1},8,["class"])]),_:1},8,["modelValue"])]),_:1}),T($,{gutter:10},{default:N(()=>[T(j,{span:12},{default:N(()=>[T(w,null,{label:N(()=>x[11]||(x[11]=[X("div",{class:"flex align-center"},[X("span",{class:"mr-4"},"host")],-1)])),default:N(()=>[T(C,{modelValue:s.value.databaseSetting.host,"onUpdate:modelValue":x[1]||(x[1]=W=>s.value.databaseSetting.host=W),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),T(j,{span:12},{default:N(()=>[T(w,{label:"port"},{default:N(()=>[T(B,{modelValue:s.value.databaseSetting.port,"onUpdate:modelValue":x[2]||(x[2]=W=>s.value.databaseSetting.port=W),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),T($,{gutter:10},{default:N(()=>[T(j,{span:12},{default:N(()=>[T(w,null,{label:N(()=>x[12]||(x[12]=[X("div",{class:"flex align-center"},[X("span",{class:"mr-4"},"username")],-1)])),default:N(()=>[T(C,{modelValue:s.value.databaseSetting.username,"onUpdate:modelValue":x[3]||(x[3]=W=>s.value.databaseSetting.username=W),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),T(j,{span:12},{default:N(()=>[T(w,{label:"password"},{default:N(()=>[T(C,{modelValue:s.value.databaseSetting.password,"onUpdate:modelValue":x[4]||(x[4]=W=>s.value.databaseSetting.password=W),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),T(w,{label:"database"},{default:N(()=>[T(C,{modelValue:s.value.databaseSetting.database,"onUpdate:modelValue":x[5]||(x[5]=W=>s.value.databaseSetting.database=W),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[G,f.value]])])]),_:1})]),_:1},8,["title","modelValue"])}}}),zq={class:"title-decoration-1 mb-8"},Hq={class:"flex-between w-full"},Wq={class:"flex-between"},Xq={class:"flex-between"},qq={class:"w-full"},Yq=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("getResourceDetail"),n=Zi(),{params:{id:o}}=n,r=jn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=Ae(),c=()=>{var I;(I=s.value)==null||I.open(y.value)},f=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),d=I=>{var F;I?(F=S.value)==null||F.reset_default(I,o):B({})},_={dialogueNumber:1,dialogueType:"WORK_FLOW",databaseSetting:{type:"mysql",host:"127.0.0.1",port:3306,database:"mysql",username:"root",password:"123456"},questionReferenceAddress:[]},y=jn({get:()=>(b.nodeModel.properties.nodeData||ye.set(b.nodeModel.properties,"nodeData",_),b.nodeModel.properties.nodeData),set:I=>{ye.set(b.nodeModel.properties,"nodeData",I)}}),b=e,x=Ae(),M=Ae(null),S=Ae(),E=()=>{var I;return(I=x.value)==null?void 0:I.validate().catch(F=>Promise.reject({node:b.nodeModel,errMessage:F}))},w=t();function C(){var F;const I=r.value==="systemManage"?{modelType:"LLM",workspaceId:(F=w.value)==null?void 0:F.workspaceId}:{modelType:"LLM"};ni({type:"model",systemType:r.value}).getSelectModelList(I).then(Z=>{M.value=ye.groupBy(Z==null?void 0:Z.data,"provider")})}const j=I=>{var F;I&&((F=S.value)==null||F.open(I,o,y.value.modelParamsSetting))};function B(I){ye.set(b.nodeModel.properties.nodeData,"modelParamsSetting",I)}function $(I){ye.set(b.nodeModel.properties.nodeData,"databaseSetting",I.databaseSetting)}const U=Ae();return kr(()=>{var I;C(),typeof((I=b.nodeModel.properties.nodeData)==null?void 0:I.isResult)>"u"&&Vs(b.nodeModel)&&ye.set(b.nodeModel.properties.nodeData,"isResult",!0),ye.set(b.nodeModel,"validate",E),y.value.type||(y.value.type="mysql")}),(I,F)=>{const Z=Y("el-button"),G=Y("el-form-item"),W=Y("el-option"),K=Y("el-select"),J=Y("el-input-number"),q=Y("el-col"),ne=Y("el-row"),oe=Y("el-form"),Me=Y("el-card");return ce(),Ge(so,{nodeModel:I.nodeModel},{default:N(()=>[X("h5",zq,fe(I.$t("workflow.nodeSetting")),1),T(Me,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(oe,{onSubmit:F[5]||(F[5]=Bt(()=>{},["prevent"])),model:y.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:x,"hide-required-asterisk":""},{default:N(()=>[T(G,{label:I.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:I.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:N(()=>[X("div",Hq,[X("div",null,[X("span",null,[Je(fe(I.$t("views.application.form.aiModel.label")),1),F[6]||(F[6]=X("span",{class:"color-danger"},"*",-1))])]),T(Z,{disabled:!y.value.modelId,type:"primary",link:"",onClick:F[0]||(F[0]=Pe=>j(y.value.modelId)),onRefreshForm:B},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[T(Au,{onChange:d,onWheel:f,teleported:!1,modelValue:y.value.modelId,"onUpdate:modelValue":F[1]||(F[1]=Pe=>y.value.modelId=Pe),placeholder:I.$t("views.application.form.aiModel.placeholder"),options:M.value,onSubmitModel:C,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),T(G,{label:I.$t("views.application.form.historyRecord.label")},{label:N(()=>[X("div",Wq,[X("div",null,fe(I.$t("views.application.form.historyRecord.label")),1),T(K,{modelValue:y.value.dialogueType,"onUpdate:modelValue":F[2]||(F[2]=Pe=>y.value.dialogueType=Pe),type:"small",style:{width:"100px"}},{default:N(()=>[T(W,{label:I.$t("workflow.node"),value:"NODE"},null,8,["label"]),T(W,{label:I.$t("workflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[T(J,{modelValue:y.value.dialogueNumber,"onUpdate:modelValue":F[3]||(F[3]=Pe=>y.value.dialogueNumber=Pe),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),T(G,{label:I.$t("workflow.nodes.searchKnowledgeNode.searchParam")},{label:N(()=>[X("div",Xq,[F[7]||(F[7]=X("span",null,"数据库配置",-1)),T(Z,{type:"primary",link:"",onClick:c},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1})])]),default:N(()=>[X("div",qq,[T(ne,null,{default:N(()=>[T(q,{span:12,class:"color-secondary lighter"},{default:N(()=>F[8]||(F[8]=[Je("数据库类型",-1)])),_:1,__:[8]}),T(q,{span:12,class:"lighter"},{default:N(()=>[Je(fe(y.value.databaseSetting.type),1)]),_:1}),T(q,{span:12,class:"color-secondary lighter"},{default:N(()=>F[9]||(F[9]=[Je("host",-1)])),_:1,__:[9]}),T(q,{span:12,class:"lighter"},{default:N(()=>[Je(fe(y.value.databaseSetting.host),1)]),_:1}),T(q,{span:12,class:"color-secondary lighter"},{default:N(()=>F[10]||(F[10]=[Je("port",-1)])),_:1,__:[10]}),T(q,{span:12,class:"lighter"},{default:N(()=>[Je(fe(y.value.databaseSetting.port),1)]),_:1}),T(q,{span:12,class:"color-secondary lighter"},{default:N(()=>F[11]||(F[11]=[Je("database",-1)])),_:1,__:[11]}),T(q,{span:12,class:"lighter"},{default:N(()=>[Je(fe(y.value.databaseSetting.database),1)]),_:1})]),_:1})])]),_:1},8,["label"]),T(G,{label:I.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:I.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[T(go,{ref_key:"nodeCascaderRef",ref:U,nodeModel:I.nodeModel,class:"w-full",placeholder:I.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:y.value.questionReferenceAddress,"onUpdate:modelValue":F[4]||(F[4]=Pe=>y.value.questionReferenceAddress=Pe)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),T(lh,{ref_key:"AIModeParamSettingDialogRef",ref:S,onRefresh:B},null,512),T(Gq,{ref_key:"ParamSettingDialogRef",ref:s,onRefresh:$},null,512)]),_:1},8,["nodeModel"])}}});class Kq extends no{constructor(t){super(t,Yq)}}const Zq={type:"nl2sql-node",model:ro,view:Kq},qN=Object.freeze(Object.defineProperty({__proto__:null,default:Zq},Symbol.toStringTag,{value:"Module"})),Jq={class:"dialog-footer"},Qq=Rn({__name:"ParametersFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"boolean",label:"Boolean"},{value:"array",label:"Array"}],s=Ae(),c=Ae(!1),f=Ae(!1),d=Ae(null),_=Ae({field:"",label:"",parameterType:"",desc:""}),y=jd({label:[{required:!0,message:yt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:yt("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:yt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),b=Ae(!1),x=(E,w)=>{E&&(_.value=ye.cloneDeep(E),f.value=!0,d.value=w),b.value=!0},M=()=>{b.value=!1,f.value=!1,d.value=null,_.value={field:"",label:""}},S=async E=>{E&&await E.validate(w=>{w&&o("refresh",_.value,d.value)})};return t({open:x,close:M}),(E,w)=>{const C=Y("el-input"),j=Y("el-form-item"),B=Y("el-option"),$=Y("el-select"),U=Y("el-form"),I=Y("el-button"),F=Y("el-dialog");return ce(),Ge(F,{title:f.value?E.$t("common.param.editParam"):E.$t("common.param.addParam"),modelValue:b.value,"onUpdate:modelValue":w[5]||(w[5]=Z=>b.value=Z),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":M,"append-to-body":""},{footer:N(()=>[X("span",Jq,[T(I,{onClick:Bt(M,["prevent"])},{default:N(()=>[Je(fe(E.$t("common.cancel")),1)]),_:1}),T(I,{type:"primary",onClick:w[4]||(w[4]=Z=>S(s.value)),loading:c.value},{default:N(()=>[Je(fe(E.$t("common.save")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(U,{"label-position":"top",ref_key:"fieldFormRef",ref:s,rules:y,model:_.value,"require-asterisk-position":"right"},{default:N(()=>[T(j,{label:E.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:y.field},{default:N(()=>[T(C,{modelValue:_.value.field,"onUpdate:modelValue":w[0]||(w[0]=Z=>_.value.field=Z),maxlength:64,placeholder:E.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),T(j,{label:E.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:y.label},{default:N(()=>[T(C,{modelValue:_.value.label,"onUpdate:modelValue":w[1]||(w[1]=Z=>_.value.label=Z),maxlength:64,"show-word-limit":"",placeholder:E.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),T(j,{label:E.$t("workflow.nodes.parameterExtractionNode.extractParameters.parameterType"),required:!0,prop:"parameterType",rules:y.label},{default:N(()=>[T($,{modelValue:_.value.parameterType,"onUpdate:modelValue":w[2]||(w[2]=Z=>_.value.parameterType=Z),placeholder:E.$t("common.selectPlaceholder")+E.$t("workflow.nodes.parameterExtractionNode.extractParameters.parameterType"),style:{width:"100%"}},{default:N(()=>[(ce(),Rt(Fn,null,Tr(r,Z=>T(B,{key:Z.value,label:Z.label,value:Z.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),T(j,{label:E.$t("common.desc"),prop:"desc"},{default:N(()=>[T(C,{modelValue:_.value.desc,"onUpdate:modelValue":w[3]||(w[3]=Z=>_.value.desc=Z),style:{width:"100%"},rows:2,type:"textarea",placeholder:E.$t("common.descPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),eY={class:"flex-between w-full"},tY={class:"break-all lighter"},nY={class:"ml-4",style:{"margin-top":"-4px"}},rY=["title"],oY=["title"],iY={class:"mr-4"},aY=Rn({__name:"ParametersFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=Ae(),r=Ae([]);function s(d,_){o.value.open(d,_)}function c(d){r.value.splice(d,1);const _=[{label:yt("common.result"),value:"result"},...r.value.map(y=>({label:y.label,value:y.field}))];ye.set(t.nodeModel.properties.config,"fields",_)}function f(d,_){for(let b=0;b<r.value.length;b++)if(r.value[b].field===d.field&&_!==b){Ra(yt("workflow.tip.paramErrorMessage")+d.field);return}[void 0,null].includes(_)?r.value.push(d):r.value.splice(_,1,d),o.value.close();const y=[{label:yt("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];ye.set(t.nodeModel.properties.config,"fields",y)}return kr(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=ye.cloneDeep(t.nodeModel.properties.nodeData.variableList)),ye.set(t.nodeModel.properties.nodeData,"variableList",r);const d=[{label:yt("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];ye.set(t.nodeModel.properties.config,"fields",d)}),(d,_)=>{var E;const y=Y("el-button"),b=Y("el-table-column"),x=Y("el-tag"),M=Y("el-tooltip"),S=Y("el-table");return ce(),Rt(Fn,null,[X("div",eY,[X("h5",tY,[Je(fe(d.$t("workflow.nodes.parameterExtractionNode.extractParameters.label"))+" ",1),_[1]||(_[1]=X("span",{class:"color-danger"},"*",-1))]),X("span",nY,[T(y,{link:"",type:"primary",onClick:_[0]||(_[0]=w=>s())},{default:N(()=>[T(fr,{iconName:"app-add-outlined",class:"mr-4"})]),_:1})])]),((E=t.nodeModel.properties.nodeData.variableList)==null?void 0:E.length)>0?(ce(),Ge(S,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:N(()=>[T(b,{prop:"field",label:d.$t("dynamicsForm.paramForm.field.label"),width:"90"},{default:N(({row:w})=>[X("span",{title:w.field,class:"ellipsis-1"},fe(w.field),9,rY)]),_:1},8,["label"]),T(b,{prop:"label",label:d.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:w})=>[X("span",null,[X("span",{title:w.label,class:"ellipsis-1"},fe(w.label),9,oY)])]),_:1},8,["label"]),T(b,{prop:"label",label:d.$t("workflow.nodes.parameterExtractionNode.extractParameters.parameterType")},{default:N(({row:w})=>[T(x,{type:"info",class:"info-tag"},{default:N(()=>[Je(fe(w.parameterType),1)]),_:2},1024)]),_:1},8,["label"]),T(b,{label:d.$t("common.operation"),align:"left",width:"80"},{default:N(({row:w,$index:C})=>[X("span",iY,[T(M,{effect:"dark",content:d.$t("common.modify"),placement:"top"},{default:N(()=>[T(y,{type:"primary",text:"",onClick:Bt(j=>s(w,C),["stop"])},{default:N(()=>[T(fr,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),T(M,{effect:"dark",content:d.$t("common.delete"),placement:"top"},{default:N(()=>[T(y,{type:"primary",text:"",onClick:j=>c(C)},{default:N(()=>[T(fr,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Qt("",!0),T(Qq,{ref_key:"ParametersFieldDialogRef",ref:o,onRefresh:f},null,512)],64)}}}),lY={class:"title-decoration-1 mb-8"},sY={class:"flex-between w-full"},uY={class:"flex-between"},cY=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("getResourceDetail"),n=e,o=Ae(),r=Zi(),{params:{id:s}}=r,c=j=>{var B;j&&((B=o.value)==null||B.open(j,s,S.value.modelParamsSetting))};function f(j){ye.set(n.nodeModel.properties.nodeData,"modelParamsSetting",j)}const d=t(),_=Ae(null),y=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),b=jn(()=>r.path.includes("resource-management")?"systemManage":"workspace");function x(){var B;const j=b.value==="systemManage"?{modelType:"LLM",workspace_id:(B=d.value)==null?void 0:B.workspaceId}:{modelType:"LLM"};ni({type:"model",systemType:b.value}).getSelectModelList(j).then($=>{_.value=ye.groupBy($==null?void 0:$.data,"provider")})}const M={inputVariable:[],modelParamsSetting:{},modelId:"",variableList:[]},S=jn({get:()=>(n.nodeModel.properties.nodeData||ye.set(n.nodeModel.properties,"nodeData",M),n.nodeModel.properties.nodeData),set:j=>{ye.set(n.nodeModel.properties,"nodeData",j)}}),E=j=>{var B;j?(B=o.value)==null||B.reset_default(j,s):f({})},w=Ae(),C=async()=>w.value.validate();return kr(()=>{x(),ye.set(n.nodeModel,"validate",C)}),(j,B)=>{const $=Y("el-button"),U=Y("el-form-item"),I=Y("el-form"),F=Y("el-card");return ce(),Ge(so,{nodeModel:j.nodeModel},{default:N(()=>[X("h5",lY,fe(j.$t("workflow.nodeSetting")),1),T(F,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(I,{onSubmit:B[3]||(B[3]=Bt(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:w,"hide-required-asterisk":""},{default:N(()=>[T(U,{label:j.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:j.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:N(()=>[X("div",sY,[X("div",null,[X("span",null,[Je(fe(j.$t("views.application.form.aiModel.label")),1),B[4]||(B[4]=X("span",{class:"color-danger ml-4"},"*",-1))])]),T($,{disabled:!S.value.modelId,type:"primary",link:"",onClick:B[0]||(B[0]=Z=>c(S.value.modelId)),onRefreshForm:f},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[T(Au,{onChange:E,onWheel:y,teleported:!1,modelValue:S.value.modelId,"onUpdate:modelValue":B[1]||(B[1]=Z=>S.value.modelId=Z),placeholder:j.$t("views.application.form.aiModel.placeholder"),options:_.value,onSubmitModel:x,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),T(U,{prop:"inputVariable",rules:{message:j.$t("workflow.variable.placeholder"),trigger:"blur",required:!0}},{label:N(()=>[X("div",uY,[X("div",null,[Je(fe(j.$t("workflow.nodes.variableSplittingNode.inputVariables"))+" ",1),B[5]||(B[5]=X("span",{class:"color-danger"},"*",-1))])])]),default:N(()=>[T(go,{ref:"nodeCascaderRef",nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("workflow.variable.placeholder"),modelValue:S.value.inputVariable,"onUpdate:modelValue":B[2]||(B[2]=Z=>S.value.inputVariable=Z)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),T(U,{prop:"variableList",rules:{message:j.$t("workflow.nodes.parameterExtractionNode.extractParameters.label"),trigger:"blur",required:!0}},{default:N(()=>[T(aY,{ref:"ParametersFieldTableRef","node-model":j.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),T(lh,{ref_key:"AIModeParamSettingDialogRef",ref:o,onRefresh:f},null,512)]),_:1},8,["nodeModel"])}}});class dY extends no{constructor(t){super(t,cY)}}const fY={type:"parameter-extraction-node",model:ro,view:dY},YN=Object.freeze(Object.defineProperty({__proto__:null,default:fY},Symbol.toStringTag,{value:"Module"})),pY={class:"title-decoration-1 mb-8"},hY={class:"flex-between"},vY={class:"flex align-center"},mY={class:"mr-4"},yY={class:"flex-between w-full"},gY={class:"flex align-center"},_Y={class:"mr-4"},bY={class:"flex"},wY=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("workflowMode")||br.Application,n=ko("getResourceDetail"),o=Zi(),{params:{id:r}}=o,s=jn(()=>o.path.includes("resource-management")?"systemManage":"workspace"),c=Ae(),f=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),d=I=>{var F;I?(F=c.value)==null||F.reset_default(I,r):M({})};function _(I){ye.set(w.nodeModel.properties.nodeData,"prompt",I)}function y(I){ye.set(w.nodeModel.properties.nodeData,"system",I)}const b=`${yt("workflow.nodes.questionNode.defaultPrompt1")}{{${yt("workflow.nodes.startNode.label")}.question}}
${yt("workflow.nodes.questionNode.defaultPrompt2")}`,x={modelId:"",system:yt("workflow.nodes.questionNode.systemDefault"),prompt:b,dialogueNumber:1,isResult:!1};function M(I){ye.set(w.nodeModel.properties.nodeData,"modelParamsSetting",I)}const S=I=>{var F;I&&((F=c.value)==null||F.open(I,r,E.value.modelParamsSetting))},E=jn({get:()=>(w.nodeModel.properties.nodeData||ye.set(w.nodeModel.properties,"nodeData",x),w.nodeModel.properties.nodeData),set:I=>{ye.set(w.nodeModel.properties,"nodeData",I)}}),w=e,C=Ae(),j=Ae(null),B=()=>{var I;return(I=C.value)==null?void 0:I.validate().catch(F=>Promise.reject({node:w.nodeModel,errMessage:F}))},$=n();function U(){var F;const I=s.value==="systemManage"?{modelType:"LLM",workspaceId:(F=$.value)==null?void 0:F.workspaceId}:{modelType:"LLM"};ni({type:"model",systemType:s.value}).getSelectModelList(I).then(Z=>{j.value=ye.groupBy(Z==null?void 0:Z.data,"provider")})}return kr(()=>{var I;U(),typeof((I=w.nodeModel.properties.nodeData)==null?void 0:I.isResult)>"u"&&Vs(w.nodeModel)&&ye.set(w.nodeModel.properties.nodeData,"isResult",!0),ye.set(w.nodeModel,"validate",B)}),(I,F)=>{const Z=Y("el-button"),G=Y("el-form-item"),W=Y("el-tooltip"),K=Y("el-input-number"),J=Y("el-switch"),q=Y("el-form"),ne=Y("el-card");return ce(),Ge(so,{nodeModel:I.nodeModel},{default:N(()=>[X("h5",pY,fe(I.$t("workflow.nodeSetting")),1),T(ne,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(q,{onSubmit:F[7]||(F[7]=Bt(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"questionNodeFormRef",ref:C,"hide-required-asterisk":""},{default:N(()=>[T(G,{label:I.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:I.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:N(()=>[X("div",hY,[X("div",null,[X("span",null,[Je(fe(I.$t("views.application.form.aiModel.label")),1),F[8]||(F[8]=X("span",{class:"color-danger"},"*",-1))])]),T(Z,{type:"primary",link:"",disabled:!E.value.modelId,onClick:F[0]||(F[0]=oe=>S(E.value.modelId)),onRefreshForm:M},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[T(Au,{onChange:d,onWheel:f,teleported:!1,modelValue:E.value.modelId,"onUpdate:modelValue":F[1]||(F[1]=oe=>E.value.modelId=oe),placeholder:I.$t("views.application.form.aiModel.placeholder"),options:j.value,onSubmitModel:U,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),T(G,{label:I.$t("views.application.form.roleSettings.label")},{default:N(()=>[T(as,{title:I.$t("views.application.form.roleSettings.label"),modelValue:E.value.system,"onUpdate:modelValue":F[2]||(F[2]=oe=>E.value.system=oe),style:{height:"100px"},onSubmitDialog:y,placeholder:I.$t("views.application.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),T(G,{label:I.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:I.$t("views.application.form.prompt.tooltip"),trigger:"blur"}},{label:N(()=>[X("div",vY,[X("div",mY,[X("span",null,[Je(fe(I.$t("views.application.form.prompt.label")),1),F[9]||(F[9]=X("span",{class:"color-danger"},"*",-1))])]),T(W,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(I.$t("views.application.form.prompt.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[T(as,{onWheel:f,title:I.$t("views.application.form.prompt.label"),modelValue:E.value.prompt,"onUpdate:modelValue":F[3]||(F[3]=oe=>E.value.prompt=oe),style:{height:"150px"},onSubmitDialog:_},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),T(G,{label:I.$t("views.application.form.historyRecord.label")},{default:N(()=>[T(K,{modelValue:E.value.dialogueNumber,"onUpdate:modelValue":F[4]||(F[4]=oe=>E.value.dialogueNumber=oe),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),[Jt(br).Application,Jt(br).ApplicationLoop].includes(Jt(t))?(ce(),Ge(G,{key:0,label:I.$t("workflow.nodes.aiChatNode.returnContent.label"),onClick:F[6]||(F[6]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",yY,[X("div",gY,[X("div",_Y,[X("span",null,fe(I.$t("workflow.nodes.aiChatNode.returnContent.label")),1)]),T(W,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(I.$t("workflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),X("div",bY,[T(J,{size:"small",modelValue:E.value.isResult,"onUpdate:modelValue":F[5]||(F[5]=oe=>E.value.isResult=oe)},null,8,["modelValue"])])])]),_:1},8,["label"])):Qt("",!0)]),_:1},8,["model"])]),_:1}),T(lh,{ref_key:"AIModeParamSettingDialogRef",ref:c,onRefresh:M},null,512)]),_:1},8,["nodeModel"])}}});class EY extends no{constructor(t){super(t,wY)}}const OY={type:"question-node",model:ro,view:EY},KN=Object.freeze(Object.defineProperty({__proto__:null,default:OY},Symbol.toStringTag,{value:"Module"})),SY={class:"flex-between"},xY={class:"flex-between w-full"},MY={class:"flex align-center"},AY={class:"mr-4"},TY={class:"flex"},kY=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("workflowMode")||br.Application,n=e,o=y=>y.ctrlKey===!0?(y.preventDefault(),!0):(y.stopPropagation(),!0),r={replyType:"content",content:"",fields:[],isResult:!0},s=jn({get:()=>(n.nodeModel.properties.nodeData||ye.set(n.nodeModel.properties,"nodeData",r),n.nodeModel.properties.nodeData),set:y=>{ye.set(n.nodeModel.properties,"nodeData",y)}});function c(y){ye.set(n.nodeModel.properties.nodeData,"content",y)}const f=Ae(),d=Ae(),_=()=>{var y;return Promise.all([d.value?d.value.validate():Promise.resolve(""),(y=f.value)==null?void 0:y.validate()]).catch(b=>Promise.reject({node:n.nodeModel,errMessage:b}))};return kr(()=>{var y;typeof((y=n.nodeModel.properties.nodeData)==null?void 0:y.isResult)>"u"&&Vs(n.nodeModel)&&ye.set(n.nodeModel.properties.nodeData,"isResult",!0),ye.set(n.nodeModel,"validate",_)}),(y,b)=>{const x=Y("el-option"),M=Y("el-select"),S=Y("el-form-item"),E=Y("el-tooltip"),w=Y("el-switch"),C=Y("el-form"),j=Y("el-card");return ce(),Ge(so,{nodeModel:y.nodeModel},{default:N(()=>[T(j,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(C,{onSubmit:b[5]||(b[5]=Bt(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:f},{default:N(()=>[T(S,{label:y.$t("workflow.nodes.replyNode.label")},{label:N(()=>[X("div",SY,[X("span",null,fe(y.$t("workflow.nodes.replyNode.label")),1),T(M,{teleported:!1,modelValue:s.value.replyType,"onUpdate:modelValue":b[0]||(b[0]=B=>s.value.replyType=B),size:"small",style:{width:"85px"}},{default:N(()=>[T(x,{label:y.$t("workflow.variable.Referencing"),value:"referencing"},null,8,["label"]),T(x,{label:y.$t("common.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[s.value.replyType==="content"?(ce(),Ge(as,{key:0,onWheel:o,title:y.$t("workflow.nodes.replyNode.label"),modelValue:s.value.content,"onUpdate:modelValue":b[1]||(b[1]=B=>s.value.content=B),style:{height:"150px"},onSubmitDialog:c},null,8,["title","modelValue"])):(ce(),Ge(go,{key:1,ref_key:"nodeCascaderRef",ref:d,nodeModel:y.nodeModel,class:"w-full",placeholder:y.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.fields,"onUpdate:modelValue":b[2]||(b[2]=B=>s.value.fields=B)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),[Jt(br).Application,Jt(br).ApplicationLoop].includes(Jt(t))?(ce(),Ge(S,{key:0,label:y.$t("workflow.nodes.aiChatNode.returnContent.label"),onClick:b[4]||(b[4]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",xY,[X("div",MY,[X("div",AY,[X("span",null,fe(y.$t("workflow.nodes.aiChatNode.returnContent.label")),1)]),T(E,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(y.$t("workflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),X("div",TY,[T(w,{size:"small",modelValue:s.value.isResult,"onUpdate:modelValue":b[3]||(b[3]=B=>s.value.isResult=B)},null,8,["modelValue"])])])]),_:1},8,["label"])):Qt("",!0)]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class NY extends no{constructor(t){super(t,kY)}}const PY={type:"reply-node",model:ro,view:NY},ZN=Object.freeze(Object.defineProperty({__proto__:null,default:PY},Symbol.toStringTag,{value:"Module"})),RY={class:"flex align-center"},CY={class:"mr-4"},DY={class:"dialog-footer"},jY=Rn({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Ae(),s=Ae({topN:3,similarity:0,maxParagraphCharNumber:5e3}),c=Ae(!1),f=Ae(!1);Kf(c,y=>{y||(s.value={topN:3,similarity:0,maxParagraphCharNumber:5e3})});const d=y=>{s.value={...s.value,...ye.cloneDeep(y)},c.value=!0},_=()=>{var y;(y=r==null?void 0:r.value)==null||y.validate((b,x)=>{b&&(o("refresh",ye.cloneDeep(s.value)),c.value=!1)})};return t({open:d}),(y,b)=>{const x=Y("AppIcon"),M=Y("el-tooltip"),S=Y("el-input-number"),E=Y("el-form-item"),w=Y("el-col"),C=Y("el-row"),j=Y("el-slider"),B=Y("el-form"),$=Y("el-button"),U=Y("el-dialog");return ce(),Ge(U,{"align-center":"",title:y.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":b[5]||(b[5]=I=>c.value=I),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:N(()=>[X("span",DY,[T($,{onClick:b[3]||(b[3]=Bt(I=>c.value=!1,["prevent"]))},{default:N(()=>[Je(fe(y.$t("common.cancel")),1)]),_:1}),T($,{type:"primary",onClick:b[4]||(b[4]=I=>_()),loading:f.value},{default:N(()=>[Je(fe(y.$t("common.save")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(B,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:N(()=>[T(C,{gutter:12},{default:N(()=>[T(w,{span:12},{default:N(()=>[T(E,null,{label:N(()=>[X("div",RY,[X("span",CY,"Score "+fe(y.$t("workflow.nodes.rerankerNode.higher")),1),T(M,{effect:"dark",content:y.$t("workflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:N(()=>[T(x,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:N(()=>[T(S,{modelValue:s.value.similarity,"onUpdate:modelValue":b[0]||(b[0]=I=>s.value.similarity=I),min:0,max:s.value.searchMode==="hybrid"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),T(w,{span:12},{default:N(()=>[T(E,{label:y.$t("views.application.dialog.topReferences")},{default:N(()=>[T(S,{modelValue:s.value.topN,"onUpdate:modelValue":b[1]||(b[1]=I=>s.value.topN=I),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),T(E,{label:y.$t("views.application.dialog.maxCharacters")},{default:N(()=>[T(j,{modelValue:s.value.maxParagraphCharNumber,"onUpdate:modelValue":b[2]||(b[2]=I=>s.value.maxParagraphCharNumber=I),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),IY={class:"flex-between"},LY={class:"flex-between"},$Y={class:"w-full"},FY={class:"flex-between"},VY={class:"flex-between"},BY={class:"flex-between"},UY=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("getResourceDetail"),n=Zi(),{params:{id:o}}=n,r=jn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=e,c=Ae(),f={reranker_reference_list:[[]],reranker_model_id:"",questionReferenceAddress:[],reranker_setting:{topN:3,similarity:0,maxParagraphCharNumber:5e3},show_knowledge:!1},d=Ae(null),_=()=>{var $;($=c.value)==null||$.open(x.value.reranker_setting)},y=$=>{const U=ye.cloneDeep(s.nodeModel.properties.nodeData.reranker_reference_list);U.splice($,1),ye.set(s.nodeModel.properties.nodeData,"reranker_reference_list",U)},b=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),x=jn({get:()=>(s.nodeModel.properties.nodeData||ye.set(s.nodeModel.properties,"nodeData",f),s.nodeModel.properties.nodeData),set:$=>{ye.set(s.nodeModel.properties,"nodeData",$)}});function M($){ye.set(s.nodeModel.properties.nodeData,"reranker_setting",$)}const S=t();function E(){var U;const $=r.value==="systemManage"?{modelType:"RERANKER",workspaceId:(U=S.value)==null?void 0:U.workspaceId}:{modelType:"RERANKER"};ni({type:"model",systemType:r.value}).getSelectModelList($).then(I=>{d.value=ye.groupBy(I==null?void 0:I.data,"provider")})}const w=()=>{const $=ye.cloneDeep(s.nodeModel.properties.nodeData.reranker_reference_list);$.push([]),ye.set(s.nodeModel.properties.nodeData,"reranker_reference_list",$)},C=Ae(),j=Ae(),B=()=>{var $;return Promise.all([j.value?j.value.validate():Promise.resolve(""),($=C.value)==null?void 0:$.validate()]).catch(U=>Promise.reject({node:s.nodeModel,errMessage:U}))};return kr(()=>{E(),ye.set(s.nodeModel,"validate",B)}),($,U)=>{const I=Y("Plus"),F=Y("el-icon"),Z=Y("el-button"),G=Y("el-form-item"),W=Y("el-col"),K=Y("AppIcon"),J=Y("el-row"),q=Y("el-switch"),ne=Y("el-form"),oe=Y("el-card");return ce(),Ge(so,{nodeModel:$.nodeModel},{default:N(()=>[T(oe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(ne,{onSubmit:U[4]||(U[4]=Bt(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:C,"hide-required-asterisk":""},{default:N(()=>[T(G,{label:$.$t("workflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:$.$t("workflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:N(()=>[X("div",IY,[X("span",null,[Je(fe($.$t("workflow.nodes.rerankerNode.rerankerContent.label")),1),U[5]||(U[5]=X("span",{class:"color-danger"},"*",-1))]),T(Z,{onClick:w,link:"",type:"primary"},{default:N(()=>[T(F,{class:"mr-4"},{default:N(()=>[T(I)]),_:1})]),_:1})])]),default:N(()=>[(ce(!0),Rt(Fn,null,Tr(x.value.reranker_reference_list,(Me,Pe)=>(ce(),Ge(J,{gutter:8,style:{"margin-bottom":"8px"},key:Pe,class:"w-full"},{default:N(()=>[T(W,{span:22},{default:N(()=>[T(G,{prop:"reranker_reference_list."+Pe,rules:{type:"array",required:!0,message:$.$t("workflow.variable.placeholder"),trigger:"change"}},{default:N(()=>[(ce(),Ge(go,{key:Pe,nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("workflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:x.value.reranker_reference_list[Pe],"onUpdate:modelValue":Ee=>x.value.reranker_reference_list[Pe]=Ee},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),T(W,{span:2},{default:N(()=>[T(Z,{link:"",type:"info",onClick:Ee=>y(Pe)},{default:N(()=>[T(K,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),T(G,{label:$.$t("workflow.nodes.searchKnowledgeNode.searchParam")},{label:N(()=>[X("div",LY,[X("span",null,fe($.$t("workflow.nodes.searchKnowledgeNode.searchParam")),1),T(Z,{type:"primary",link:"",onClick:_},{default:N(()=>[T(K,{iconName:"app-setting"})]),_:1})])]),default:N(()=>[X("div",$Y,[T(J,null,{default:N(()=>[T(W,{span:12,class:"color-secondary lighter"},{default:N(()=>[Je(" Score "+fe($.$t("workflow.nodes.rerankerNode.higher")),1)]),_:1}),T(W,{span:12,class:"lighter"},{default:N(()=>{var Me;return[Je(fe((Me=x.value.reranker_setting.similarity)==null?void 0:Me.toFixed(3)),1)]}),_:1}),T(W,{span:12,class:"color-secondary lighter"},{default:N(()=>[Je(fe($.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),T(W,{span:12,class:"lighter"},{default:N(()=>[Je(fe(x.value.reranker_setting.topN),1)]),_:1}),T(W,{span:12,class:"color-secondary lighter"},{default:N(()=>[Je(fe($.$t("workflow.nodes.rerankerNode.maxParagraphCharNumber")),1)]),_:1}),T(W,{span:12,class:"lighter"},{default:N(()=>[Je(fe(x.value.reranker_setting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),T(G,{label:$.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:$.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:N(()=>[X("div",FY,[X("span",null,[Je(fe($.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.label")),1),U[6]||(U[6]=X("span",{class:"color-danger"},"*",-1))])])]),default:N(()=>[T(go,{ref_key:"nodeCascaderRef",ref:j,nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.label"),modelValue:x.value.questionReferenceAddress,"onUpdate:modelValue":U[0]||(U[0]=Me=>x.value.questionReferenceAddress=Me)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),T(G,{label:$.$t("workflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:$.$t("workflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:N(()=>[X("div",VY,[X("span",null,[Je(fe($.$t("workflow.nodes.rerankerNode.reranker_model.label")),1),U[7]||(U[7]=X("span",{class:"color-danger"},"*",-1))])])]),default:N(()=>[T(Au,{onWheel:b,teleported:!1,modelValue:x.value.reranker_model_id,"onUpdate:modelValue":U[1]||(U[1]=Me=>x.value.reranker_model_id=Me),placeholder:$.$t("workflow.nodes.rerankerNode.reranker_model.placeholder"),options:d.value,onSubmitModel:E,showFooter:"","model-type":"RERANKER"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),T(G,{onClick:U[3]||(U[3]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",BY,[X("div",null,[X("span",null,fe($.$t("workflow.nodes.searchKnowledgeNode.showKnowledge.label")),1)]),X("div",null,[T(q,{size:"small",modelValue:x.value.showKnowledge,"onUpdate:modelValue":U[2]||(U[2]=Me=>x.value.showKnowledge=Me)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1}),T(jY,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:M},null,512)]),_:1},8,["nodeModel"])}}}),GY=Dd(UY,[["__scopeId","data-v-0f497289"]]);class zY extends no{constructor(t){super(t,GY)}}const HY={type:"reranker-node",model:ro,view:zY},JN=Object.freeze(Object.defineProperty({__proto__:null,default:HY},Symbol.toStringTag,{value:"Module"})),WY={class:"title-decoration-1 mb-8"},XY={class:"flex-between"},qY={class:"w-full"},YY={class:"flex align-center",style:{"line-height":"20px"}},KY=["title"],ZY={class:"flex-between"},JY={class:"w-full"},QY={class:"flex-between"},eK=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o={knowledgeIds:[],knowledgeSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding"},questionReferenceAddress:[],showKnowledge:!1},r=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",o),t.nodeModel.properties.nodeData),set:w=>{ye.set(t.nodeModel.properties,"nodeData",w)}}),s=Ae(),c=Ae(),f=Ae(),d=Ae([]),_=Ae(!1);function y(w){ye.set(t.nodeModel.properties.nodeData,"knowledgeSetting",w.knowledgeSetting)}const b=()=>{var w;(w=c.value)==null||w.open(r.value,"WORK_FLOW")};function x(w){const C=t.nodeModel.properties.nodeData.knowledgeIds.filter(j=>j!==w);ye.set(t.nodeModel.properties.nodeData,"knowledgeIds",C)}function M(w){ye.set(t.nodeModel.properties.nodeData,"knowledgeIds",w.map(C=>C.id)),d.value=w}function S(){if(f.value){const w=r.value.knowledgeIds||[];f.value.open(w)}}const E=()=>{var w;return Promise.all([n.value.validate(),(w=s.value)==null?void 0:w.validate()]).catch(C=>Promise.reject({node:t.nodeModel,errMessage:C}))};return kr(()=>{d.value=t.nodeModel.properties.nodeData.knowledgeList,ye.set(t.nodeModel,"validate",E)}),(w,C)=>{const j=Y("Plus"),B=Y("el-icon"),$=Y("el-button"),U=Y("el-text"),I=Y("Close"),F=Y("el-form-item"),Z=Y("el-col"),G=Y("el-row"),W=Y("el-switch"),K=Y("el-form"),J=Y("el-card");return ce(),Ge(so,{nodeModel:w.nodeModel},{default:N(()=>[X("h5",WY,fe(w.$t("workflow.nodeSetting")),1),T(J,{shadow:"never",class:"card-never"},{default:N(()=>[T(K,{onSubmit:C[3]||(C[3]=Bt(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"knowledgeNodeFormRef",ref:s},{default:N(()=>[T(F,{label:w.$t("views.chatLog.selectKnowledge")},{label:N(()=>[X("div",XY,[X("span",null,fe(w.$t("views.chatLog.selectKnowledge")),1),T($,{type:"primary",link:"",onClick:S},{default:N(()=>[T(B,null,{default:N(()=>[T(j)]),_:1})]),_:1})])]),default:N(()=>{var q;return[X("div",qY,[((q=r.value.knowledgeIds)==null?void 0:q.length)===0?(ce(),Ge(U,{key:0,type:"info"},{default:N(()=>[Je(fe(w.$t("views.application.form.relatedKnowledge.placeholder")),1)]),_:1})):(ce(!0),Rt(Fn,{key:1},Tr(r.value.knowledgeIds,(ne,oe)=>{var Me,Pe,Ee;return ce(),Rt("div",{key:oe,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[X("div",YY,[T(XI,{type:(Me=Jt(Eu)(d.value,ne,"id"))==null?void 0:Me.type,class:"mr-8",size:20},null,8,["type"]),X("div",{class:"ellipsis",title:(Pe=Jt(Eu)(d.value,ne,"id"))==null?void 0:Pe.name},fe((Ee=Jt(Eu)(d.value,ne,"id"))==null?void 0:Ee.name),9,KY)]),T($,{text:"",onClick:we=>x(ne)},{default:N(()=>[T(B,null,{default:N(()=>[T(I)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),T(F,{label:w.$t("workflow.nodes.searchKnowledgeNode.searchParam")},{label:N(()=>[X("div",ZY,[X("span",null,fe(w.$t("workflow.nodes.searchKnowledgeNode.searchParam")),1),T($,{type:"primary",link:"",onClick:b},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1})])]),default:N(()=>[X("div",JY,[T(G,null,{default:N(()=>[T(Z,{span:12,class:"color-secondary lighter"},{default:N(()=>[Je(fe(w.$t("views.application.dialog.selectSearchMode")),1)]),_:1}),T(Z,{span:12,class:"lighter"},{default:N(()=>[Je(fe(w.$t(Jt(qI)[r.value.knowledgeSetting.searchMode])),1)]),_:1}),T(Z,{span:12,class:"color-secondary lighter"},{default:N(()=>[Je(fe(w.$t("views.application.dialog.similarityThreshold")),1)]),_:1}),T(Z,{span:12,class:"lighter"},{default:N(()=>{var q;return[Je(fe((q=r.value.knowledgeSetting.similarity)==null?void 0:q.toFixed(3)),1)]}),_:1}),T(Z,{span:12,class:"color-secondary lighter"},{default:N(()=>[Je(fe(w.$t("views.application.dialog.topReferences")),1)]),_:1}),T(Z,{span:12,class:"lighter"},{default:N(()=>[Je(fe(r.value.knowledgeSetting.topN),1)]),_:1}),T(Z,{span:12,class:"color-secondary lighter"},{default:N(()=>[Je(fe(w.$t("views.application.dialog.maxCharacters")),1)]),_:1}),T(Z,{span:12,class:"lighter"},{default:N(()=>[Je(fe(r.value.knowledgeSetting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),T(F,{label:w.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:w.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[T(go,{ref_key:"nodeCascaderRef",ref:n,nodeModel:w.nodeModel,class:"w-full",placeholder:w.$t("workflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:r.value.questionReferenceAddress,"onUpdate:modelValue":C[0]||(C[0]=q=>r.value.questionReferenceAddress=q)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),T(F,{onClick:C[2]||(C[2]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",QY,[X("div",null,[X("span",null,fe(w.$t("workflow.nodes.searchKnowledgeNode.showKnowledge.label")),1)]),X("div",null,[T(W,{size:"small",modelValue:r.value.showKnowledge,"onUpdate:modelValue":C[1]||(C[1]=q=>r.value.showKnowledge=q)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1}),T(a8,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:y},null,512),T(l8,{ref_key:"AddKnowledgeDialogRef",ref:f,onAddData:M,data:d.value,loading:_.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class tK extends no{constructor(t){super(t,eK)}}const nK={type:"search-knowledge-node",model:ro,view:tK},QN=Object.freeze(Object.defineProperty({__proto__:null,default:nK},Symbol.toStringTag,{value:"Module"})),rK={class:"flex-between"},oK={class:"dialog-footer"},iK=Rn({__name:"STTModelParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=Zi(),{params:{id:r}}=o,s=jn(()=>o.path.includes("resource-management")?"systemManage":"workspace"),c=Ae(!1),f=Ae({}),d=Ae(),_=Ae(""),y=Ae(!1),b=Ae([]),x=n,M=(w,C,j)=>{f.value={},_.value=w,ni({type:"model",systemType:s.value}).getModelParamsForm(w,y).then(B=>{var U;b.value=B.data;const $=B.data.map(I=>({[I.field]:I.show_default_value!==!1?I.defaultValue:void 0})).reduce((I,F)=>({...I,...F}),{});j&&Object.keys(j).forEach(I=>{I in $||delete j[I]}),j={...$,...j},(U=d.value)==null||U.render(b.value,j)}),c.value=!0},S=async()=>{var w;(w=d.value)==null||w.validate().then(()=>{x("refresh",f.value),c.value=!1})};return t({open:M,reset_default:(w,C)=>{ni({type:"model",systemType:s.value}).getModelParamsForm(w,y).then(j=>{b.value=j.data;const B=j.data.map($=>({[$.field]:$.show_default_value!==!1?$.defaultValue:void 0})).reduce(($,U)=>({...$,...U}),{});x("refresh",B)})}}),(w,C)=>{const j=Y("el-button"),B=Y("el-dialog");return ce(),Ge(B,{"align-center":"",title:w.$t("common.paramSetting"),modelValue:c.value,"onUpdate:modelValue":C[2]||(C[2]=$=>c.value=$),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:N(()=>[X("div",rK,[X("span",oK,[T(j,{onClick:C[1]||(C[1]=Bt($=>c.value=!1,["prevent"]))},{default:N(()=>[Je(fe(w.$t("common.cancel")),1)]),_:1}),T(j,{type:"primary",onClick:S,loading:y.value},{default:N(()=>[Je(fe(w.$t("common.confirm")),1)]),_:1},8,["loading"])])])]),default:N(()=>[T(YI,{modelValue:f.value,"onUpdate:modelValue":C[0]||(C[0]=$=>f.value=$),model:f.value,"label-position":"top","require-asterisk-position":"right",render_data:b.value,ref_key:"dynamicsFormRef",ref:d},null,8,["modelValue","model","render_data"])]),_:1},8,["title","modelValue"])}}}),aK={class:"title-decoration-1 mb-8"},lK={class:"flex-between w-full"},sK={class:"flex-between w-full"},uK={class:"flex-between w-full"},cK={class:"flex align-center"},dK={class:"mr-4"},fK={class:"flex"},pK=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("workflowMode")||br.Application,n=ko("getResourceDetail"),o=Zi(),{params:{id:r}}=o,s=jn(()=>o.path.includes("resource-management")?"systemManage":"workspace"),c=e,f=Ae(null),d=Ae(),_=Ae(),y=Ae(),b=()=>{var $;return Promise.all([y.value?y.value.validate():Promise.resolve(""),($=_.value)==null?void 0:$.validate()]).catch(U=>Promise.reject({node:c.nodeModel,errMessage:U}))},x=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),M={stt_model_id:"",isResult:!0,audioList:[],modelParamsSetting:{}},S=jn({get:()=>(c.nodeModel.properties.nodeData||ye.set(c.nodeModel.properties,"nodeData",M),c.nodeModel.properties.nodeData),set:$=>{ye.set(c.nodeModel.properties,"nodeData",$)}}),E=()=>{var U;const $=S.value.stt_model_id;if(!$){Qm(yt("views.application.form.voiceInput.requiredMessage"));return}(U=d.value)==null||U.open($,r,S.value.modelParamsSetting)},w=$=>{ye.set(c.nodeModel.properties.nodeData,"modelParamsSetting",$)};function C($){var U;$?(U=d.value)==null||U.reset_default($,r):w({})}const j=n();function B(){var U;const $=s.value==="systemManage"?{modelType:"STT",workspace_id:(U=j.value)==null?void 0:U.workspace_id}:{modelType:"STT"};ni({type:"model",systemType:s.value}).getSelectModelList($).then(I=>{f.value=ye.groupBy(I==null?void 0:I.data,"provider")})}return kr(()=>{B(),ye.set(c.nodeModel,"validate",b)}),($,U)=>{const I=Y("el-button"),F=Y("el-form-item"),Z=Y("el-tooltip"),G=Y("el-switch"),W=Y("el-form"),K=Y("el-card");return ce(),Ge(so,{"node-model":$.nodeModel},{default:N(()=>[X("h5",aK,fe($.$t("workflow.nodeSetting")),1),T(K,{shadow:"never",class:"card-never"},{default:N(()=>[T(W,{onSubmit:U[4]||(U[4]=Bt(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:_,"hide-required-asterisk":""},{default:N(()=>[T(F,{label:$.$t("workflow.nodes.speechToTextNode.stt_model.label"),prop:"stt_model_id",rules:{required:!0,message:$.$t("views.application.form.voiceInput.placeholder"),trigger:"change"}},{label:N(()=>[X("div",lK,[X("div",null,[X("span",null,[Je(fe($.$t("workflow.nodes.speechToTextNode.stt_model.label")),1),U[5]||(U[5]=X("span",{class:"color-danger"},"*",-1))])]),T(I,{type:"primary",link:"",onClick:E,disabled:!S.value.stt_model_id,class:"mr-4"},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[T(Au,{onWheel:x,teleported:!1,onChange:C,modelValue:S.value.stt_model_id,"onUpdate:modelValue":U[0]||(U[0]=J=>S.value.stt_model_id=J),placeholder:$.$t("views.application.form.voiceInput.placeholder"),options:f.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),T(F,{label:$.$t("workflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:$.$t("workflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:N(()=>[X("div",sK,[X("div",null,[X("span",null,[Je(fe($.$t("workflow.nodes.speechToTextNode.audio.label")),1),U[6]||(U[6]=X("span",{class:"color-danger"},"*",-1))])])])]),default:N(()=>[T(go,{ref_key:"nodeCascaderRef",ref:y,nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("workflow.nodes.speechToTextNode.audio.placeholder"),modelValue:S.value.audioList,"onUpdate:modelValue":U[1]||(U[1]=J=>S.value.audioList=J)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),[Jt(br).Application,Jt(br).ApplicationLoop].includes(Jt(t))?(ce(),Ge(F,{key:0,label:$.$t("workflow.nodes.aiChatNode.returnContent.label"),onClick:U[3]||(U[3]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",uK,[X("div",cK,[X("div",dK,[X("span",null,fe($.$t("workflow.nodes.aiChatNode.returnContent.label")),1)]),T(Z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe($.$t("workflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),X("div",fK,[T(G,{size:"small",modelValue:S.value.isResult,"onUpdate:modelValue":U[2]||(U[2]=J=>S.value.isResult=J)},null,8,["modelValue"])])])]),_:1},8,["label"])):Qt("",!0)]),_:1},8,["model"])]),_:1}),T(iK,{ref_key:"STTModeParamSettingDialogRef",ref:d,onRefresh:w},null,512)]),_:1},8,["node-model"])}}});class hK extends no{constructor(t){super(t,pK)}}const vK={type:"speech-to-text-node",model:ro,view:hK},eP=Object.freeze(Object.defineProperty({__proto__:null,default:vK},Symbol.toStringTag,{value:"Module"})),mK={class:"title-decoration-1 mb-8"},yK={class:"break-all"},gK={class:"title-decoration-1 mb-8"},_K={class:"break-all"},bK=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ae(!1),o=[{label:yt("workflow.nodes.startNode.currentTime"),value:"time"},{label:yt("views.application.form.historyRecord.label"),value:"historyContext"},{label:yt("chat.chatId"),value:"chatId"},{label:yt("chat.chatUserId"),value:"chatUserId"},{label:yt("chat.chatUserType"),value:"chatUserType"},{label:yt("chat.chatUser"),value:"chatUser"}],r=()=>{const d=t.nodeModel.graphModel.nodes.filter(y=>y.id==="base-node").map(y=>ye.cloneDeep(y.properties.userInputFieldList)).reduce((y,b)=>[...y,...b],[]).map(y=>y.label&&y.label.input_type==="TooltipLabel"?{label:y.label.label,value:y.field||y.variable}:{label:y.label||y.name,value:y.field||y.variable}),_=t.nodeModel.graphModel.nodes.filter(y=>y.id==="base-node").map(y=>ye.cloneDeep(y.properties.apiInputFieldList)).reduce((y,b)=>[...y,...b],[]).map(y=>({label:y.name||y.variable,value:y.variable}));return[...d,..._]},s=()=>{const d=r();ye.set(t.nodeModel.properties.config,"globalFields",[...o,...d])},c=()=>{const d=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").map(_=>ye.cloneDeep(_.properties.chatInputFieldList)).reduce((_,y)=>[..._,...y],[]).map(_=>({label:_.label,value:_.field}));ye.set(t.nodeModel.properties.config,"chatFields",d)};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",s),t.nodeModel.graphModel.eventCenter.on("chatFieldList",c);const f=()=>{let d=ye.cloneDeep(t.nodeModel.properties.config.fields);const _=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").filter(b=>b.properties.nodeData.fileUploadEnable).map(b=>ye.cloneDeep(b.properties.nodeData.fileUploadSetting)).filter(b=>b);if(d=d.filter(b=>b.value!=="image"&&b.value!=="document"&&b.value!=="audio"&&b.value!=="video"&&b.value!=="other"),_.length===0){ye.set(t.nodeModel.properties.config,"fields",d);return}const y=[];_[0].document&&y.push({label:yt("common.fileUpload.document"),value:"document"}),_[0].image&&y.push({label:yt("common.fileUpload.image"),value:"image"}),_[0].audio&&y.push({label:yt("common.fileUpload.audio"),value:"audio"}),_[0].video&&y.push({label:yt("common.fileUpload.video"),value:"video"}),_[0].other&&y.push({label:yt("common.fileUpload.other"),value:"other"}),ye.set(t.nodeModel.properties.config,"fields",[...d,...y])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",f),kr(()=>{c(),s(),f()}),(d,_)=>{const y=Y("el-button"),b=Y("el-tooltip");return ce(),Ge(so,{nodeModel:d.nodeModel},{default:N(()=>[X("h5",mK,fe(d.$t("workflow.variable.global")),1),(ce(!0),Rt(Fn,null,Tr(d.nodeModel.properties.config.globalFields,(x,M)=>(ce(),Rt("div",{key:M,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:_[0]||(_[0]=S=>n.value=!0),onMouseleave:_[1]||(_[1]=S=>n.value=!1)},[X("span",yK,fe(x.label)+" "+fe("{"+x.value+"}"),1),n.value===!0?(ce(),Ge(b,{key:0,effect:"dark",content:d.$t("workflow.setting.copyParam"),placement:"top"},{default:N(()=>[T(y,{link:"",onClick:S=>Jt(Av)(`{{global.${x.value}}}`),style:{padding:"0"}},{default:N(()=>[T(fr,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Qt("",!0)],32))),128)),d.nodeModel.properties.config.chatFields?(ce(),Rt(Fn,{key:0},[X("h5",gK,fe(d.$t("workflow.variable.chat")),1),(ce(!0),Rt(Fn,null,Tr(d.nodeModel.properties.config.chatFields?d.nodeModel.properties.config.chatFields:[],(x,M)=>(ce(),Rt("div",{key:M,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:_[2]||(_[2]=S=>n.value=!0),onMouseleave:_[3]||(_[3]=S=>n.value=!1)},[X("span",_K,fe(x.label)+" "+fe("{"+x.value+"}"),1),n.value===!0?(ce(),Ge(b,{key:0,effect:"dark",content:d.$t("workflow.setting.copyParam"),placement:"top"},{default:N(()=>[T(y,{link:"",onClick:S=>Jt(Av)(`{{chat.${x.value}}}`),style:{padding:"0"}},{default:N(()=>[T(fr,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Qt("",!0)],32))),128))],64)):Qt("",!0)]),_:1},8,["nodeModel"])}}});class wK extends no{constructor(t){super(t,bK)}}const EK={type:"start-node",model:ro,view:wK},tP=Object.freeze(Object.defineProperty({__proto__:null,default:EK},Symbol.toStringTag,{value:"Module"})),OK={class:"title-decoration-1 mb-8"},SK={class:"flex-between w-full"},xK={class:"flex-between w-full"},MK={class:"flex-between w-full"},AK={class:"flex align-center"},TK={class:"mr-4"},kK={class:"flex"},NK=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("workflowMode")||br.Application,n=ko("getResourceDetail"),o=Zi(),{params:{id:r}}=o,s=jn(()=>o.path.includes("resource-management")?"systemManage":"workspace"),c=e,f=Ae(),d=Ae(null),_=Ae(),y=Ae(),b=()=>{var B;return Promise.all([y.value?y.value.validate():Promise.resolve(""),(B=_.value)==null?void 0:B.validate()]).catch($=>Promise.reject({node:c.nodeModel,errMessage:$}))},x=B=>B.ctrlKey===!0?(B.preventDefault(),!0):(B.stopPropagation(),!0),M={ttsModelId:"",isResult:!0,content_list:[],modelParamsSetting:{}},S=jn({get:()=>(c.nodeModel.properties.nodeData||ye.set(c.nodeModel.properties,"nodeData",M),c.nodeModel.properties.nodeData),set:B=>{ye.set(c.nodeModel.properties,"nodeData",B)}}),E=n();function w(){var $;const B=s.value==="systemManage"?{modelType:"TTS",workspaceId:($=E.value)==null?void 0:$.workspaceId}:{modelType:"TTS"};ni({type:"model",systemType:s.value}).getSelectModelList(B).then(U=>{d.value=ye.groupBy(U==null?void 0:U.data,"provider")})}const C=()=>{var $;const B=S.value.ttsModelId;if(!B){Qm(yt("views.application.form.voicePlay.requiredMessage"));return}($=f.value)==null||$.open(B,r,S.value.modelParamsSetting)},j=B=>{S.value.modelParamsSetting=B};return kr(()=>{w(),ye.set(c.nodeModel,"validate",b)}),(B,$)=>{const U=Y("el-button"),I=Y("el-form-item"),F=Y("el-tooltip"),Z=Y("el-switch"),G=Y("el-form"),W=Y("el-card");return ce(),Ge(so,{"node-model":B.nodeModel},{default:N(()=>[X("h5",OK,fe(B.$t("workflow.nodeSetting")),1),T(W,{shadow:"never",class:"card-never"},{default:N(()=>[T(G,{onSubmit:$[4]||($[4]=Bt(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:_,"hide-required-asterisk":""},{default:N(()=>[T(I,{label:B.$t("workflow.nodes.textToSpeechNode.tts_model.label"),prop:"ttsModelId",rules:{required:!0,message:B.$t("views.application.form.voicePlay.placeholder"),trigger:"change"}},{label:N(()=>[X("div",SK,[X("div",null,[X("span",null,[Je(fe(B.$t("workflow.nodes.textToSpeechNode.tts_model.label")),1),$[5]||($[5]=X("span",{class:"color-danger"},"*",-1))])]),T(U,{type:"primary",link:"",onClick:C,disabled:!S.value.ttsModelId,class:"mr-4"},{default:N(()=>[T(fr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[T(Au,{onWheel:x,teleported:!1,modelValue:S.value.ttsModelId,"onUpdate:modelValue":$[0]||($[0]=K=>S.value.ttsModelId=K),placeholder:B.$t("views.application.form.voicePlay.placeholder"),options:d.value,showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),T(I,{prop:"content_list",label:B.$t("workflow.nodes.textToSpeechNode.content.label"),rules:{message:B.$t("workflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:N(()=>[X("div",xK,[X("div",null,[X("span",null,[Je(fe(B.$t("workflow.nodes.textToSpeechNode.content.label")),1),$[6]||($[6]=X("span",{class:"color-danger"},"*",-1))])])])]),default:N(()=>[T(go,{ref_key:"nodeCascaderRef",ref:y,nodeModel:B.nodeModel,class:"w-full",placeholder:B.$t("workflow.nodes.textToSpeechNode.content.label"),modelValue:S.value.content_list,"onUpdate:modelValue":$[1]||($[1]=K=>S.value.content_list=K)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),[Jt(br).Application,Jt(br).ApplicationLoop].includes(Jt(t))?(ce(),Ge(I,{key:0,label:B.$t("workflow.nodes.aiChatNode.returnContent.label"),onClick:$[3]||($[3]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",MK,[X("div",AK,[X("div",TK,[X("span",null,fe(B.$t("workflow.nodes.aiChatNode.returnContent.label")),1)]),T(F,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(B.$t("workflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),X("div",kK,[T(Z,{size:"small",modelValue:S.value.isResult,"onUpdate:modelValue":$[2]||($[2]=K=>S.value.isResult=K)},null,8,["modelValue"])])])]),_:1},8,["label"])):Qt("",!0)]),_:1},8,["model"])]),_:1}),T(sT,{ref_key:"TTSModeParamSettingDialogRef",ref:f,onRefresh:j},null,512)]),_:1},8,["node-model"])}}});class PK extends no{constructor(t){super(t,NK)}}const RK={type:"text-to-speech-node",model:ro,view:PK},nP=Object.freeze(Object.defineProperty({__proto__:null,default:RK},Symbol.toStringTag,{value:"Module"})),CK={class:"title-decoration-1 mb-16"},DK={class:"lighter mb-8"},jK={key:0},IK={class:"flex-between"},LK={class:"flex"},$K={class:"flex"},FK={key:0,class:"color-danger"},VK={class:"flex-between w-full"},BK={class:"flex align-center"},UK={class:"mr-4"},GK={class:"flex"},zK=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("workflowMode")||br.Application,n=e,o=Zi(),r=jn(()=>o.path.includes("resource-management")?"systemManage":"workspace"),s=Ae(),c={inputFieldList:[],isResult:!1},f=jn({get:()=>(n.nodeModel.properties.nodeData||ye.set(n.nodeModel.properties,"nodeData",c),n.nodeModel.properties.nodeData),set:b=>{ye.set(n.nodeModel.properties,"nodeData",b)}}),d=Ae(),_=()=>{var b;return(b=d.value)==null?void 0:b.validate().catch(x=>Promise.reject({node:n.nodeModel,errMessage:x}))},y=()=>{if(!n.nodeModel.properties.nodeData.toolLibId){ye.set(n.nodeModel.properties,"status",500);return}ni({type:"tool",systemType:r.value}).getToolById(n.nodeModel.properties.nodeData.toolLibId).then(b=>{const x=n.nodeModel.properties.nodeData.inputFieldList,M=b.data.inputFieldList.map(S=>{const E=x.find(w=>w.name==S.name);return E&&E.source==S.source?{...S,value:JSON.parse(JSON.stringify(E.value))}:{...S,value:S.source=="reference"?[]:""}});ye.set(n.nodeModel.properties.nodeData,"inputFieldList",M),ye.set(n.nodeModel.properties,"status",b.data.isActive?200:500)}).catch(()=>{ye.set(n.nodeModel.properties,"status",500)})};return kr(()=>{var b;typeof((b=n.nodeModel.properties.nodeData)==null?void 0:b.isResult)>"u"&&Vs(n.nodeModel)&&ye.set(n.nodeModel.properties.nodeData,"isResult",!0),y(),ye.set(n.nodeModel,"validate",_)}),(b,x)=>{const M=Y("el-tag"),S=Y("el-option"),E=Y("el-select"),w=Y("el-input"),C=Y("el-form-item"),j=Y("el-text"),B=Y("el-card"),$=Y("el-tooltip"),U=Y("el-switch"),I=Y("el-form");return ce(),Ge(so,{nodeModel:b.nodeModel},{default:N(()=>[X("h5",CK,fe(b.$t("workflow.nodeSetting")),1),X("h5",DK,fe(b.$t("common.param.inputParam")),1),T(I,{onSubmit:x[2]||(x[2]=Bt(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:d,model:f.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:N(()=>[T(B,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:N(()=>{var F;return[((F=f.value.inputFieldList)==null?void 0:F.length)>0?(ce(),Rt("div",jK,[(ce(!0),Rt(Fn,null,Tr(f.value.inputFieldList,(Z,G)=>(ce(),Ge(C,{key:Z.name,label:Z.name,prop:"inputFieldList."+G+".value",rules:{required:Z.isRequired,message:Z.source==="reference"?b.$t("views.tool.form.param.selectPlaceholder"):b.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:N(()=>[X("div",IK,[X("div",LK,[X("span",$K,[T(KI,{content:Z.name,style:{"max-width":"130px"}},{default:N(()=>[Je(fe(Z.name),1)]),_:2},1032,["content"]),Z.isRequired?(ce(),Rt("span",FK,"*")):Qt("",!0)]),T(M,{type:"info",class:"info-tag ml-4"},{default:N(()=>[Je(fe(Z.type),1)]),_:2},1024)]),T(E,{teleported:!1,modelValue:Z.source,"onUpdate:modelValue":W=>Z.source=W,size:"small",style:{width:"85px"}},{default:N(()=>[T(S,{label:b.$t("common.reference"),value:"reference"},null,8,["label"]),T(S,{label:b.$t("common.custom"),value:"content"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:N(()=>[Z.source==="reference"?(ce(),Ge(go,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:s,nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.tool.form.param.selectPlaceholder"),modelValue:Z.value,"onUpdate:modelValue":W=>Z.value=W},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(ce(),Ge(w,{key:1,modelValue:Z.value,"onUpdate:modelValue":W=>Z.value=W,placeholder:b.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(ce(),Ge(j,{key:1,type:"info"},{default:N(()=>[Je(fe(b.$t("common.noData")),1)]),_:1}))]}),_:1}),[Jt(br).Application,Jt(br).ApplicationLoop].includes(Jt(t))?(ce(),Ge(C,{key:0,label:b.$t("workflow.nodes.aiChatNode.returnContent.label"),onClick:x[1]||(x[1]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",VK,[X("div",BK,[X("div",UK,[X("span",null,fe(b.$t("workflow.nodes.aiChatNode.returnContent.label")),1)]),T($,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(b.$t("workflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),X("div",GK,[T(U,{size:"small",modelValue:f.value.isResult,"onUpdate:modelValue":x[0]||(x[0]=F=>f.value.isResult=F)},null,8,["modelValue"])])])]),_:1},8,["label"])):Qt("",!0)]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class HK extends no{constructor(t){super(t,zK)}}const WK={type:"tool-lib-node",model:ro,view:HK},rP=Object.freeze(Object.defineProperty({__proto__:null,default:WK},Symbol.toStringTag,{value:"Module"})),XK={class:"title-decoration-1 mb-16"},qK={class:"flex-between"},YK={class:"lighter mb-8"},KK={key:0},ZK={class:"flex-between"},JK={class:"flex"},QK={class:"flex"},eZ={key:0,class:"color-danger"},tZ={class:"lighter mb-8"},nZ={key:0,class:"mb-8"},rZ={class:"flex-between w-full"},oZ={class:"flex align-center"},iZ={class:"mr-4"},aZ={class:"flex"},lZ=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("workflowMode")||br.Application,n=e,o=w=>w.ctrlKey===!0?(w.preventDefault(),!0):(w.stopPropagation(),!0),r=Ae(),s=Ae(),c={code:"",inputFieldList:[],isResult:!1},f=Ae(null),d=Ae(!1),_=jn({get:()=>(n.nodeModel.properties.nodeData||ye.set(n.nodeModel.properties,"nodeData",c),n.nodeModel.properties.nodeData),set:w=>{ye.set(n.nodeModel.properties,"nodeData",w)}}),y=Ae(),b=()=>{var w;return(w=y.value)==null?void 0:w.validate().catch(C=>Promise.reject({node:n.nodeModel,errMessage:C}))};function x(w){ye.set(n.nodeModel.properties.nodeData,"code",w)}function M(w,C){typeof C<"u"&&(f.value=C),r.value.open(w)}function S(w){const C=ye.cloneDeep(n.nodeModel.properties.nodeData.inputFieldList);C.splice(w,1),ye.set(n.nodeModel.properties.nodeData,"inputFieldList",C)}function E(w){const C=ye.cloneDeep(n.nodeModel.properties.nodeData.inputFieldList),j={...w,value:w.source==="reference"?[]:""};f.value!==null?C.splice(f.value,1,j):C.push(j),ye.set(n.nodeModel.properties.nodeData,"inputFieldList",C),f.value=null}return kr(()=>{var w;typeof((w=n.nodeModel.properties.nodeData)==null?void 0:w.isResult)>"u"&&Vs(n.nodeModel)&&ye.set(n.nodeModel.properties.nodeData,"isResult",!0),ye.set(n.nodeModel,"validate",b),setTimeout(()=>{d.value=!0},100)}),(w,C)=>{const j=Y("Plus"),B=Y("el-icon"),$=Y("el-button"),U=Y("auto-tooltip"),I=Y("el-tag"),F=Y("el-input"),Z=Y("el-form-item"),G=Y("el-text"),W=Y("el-card"),K=Y("el-tooltip"),J=Y("el-switch"),q=Y("el-form");return ce(),Ge(so,{nodeModel:w.nodeModel},{default:N(()=>[X("h5",XK,fe(w.$t("workflow.nodeSetting")),1),X("div",qK,[X("h5",YK,fe(w.$t("common.param.inputParam")),1),T($,{link:"",type:"primary",onClick:C[0]||(C[0]=ne=>M())},{default:N(()=>[T(B,{class:"mr-4"},{default:N(()=>[T(j)]),_:1}),Je(" "+fe(w.$t("common.add")),1)]),_:1})]),T(q,{onSubmit:C[4]||(C[4]=Bt(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:y,model:_.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:N(()=>[T(W,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:N(()=>{var ne;return[((ne=_.value.inputFieldList)==null?void 0:ne.length)>0?(ce(),Rt("div",KK,[(ce(!0),Rt(Fn,null,Tr(_.value.inputFieldList,(oe,Me)=>(ce(),Ge(Z,{key:Me,label:oe.name,prop:"inputFieldList."+Me+".value",rules:{required:oe.isRequired,message:oe.source==="reference"?w.$t("views.tool.form.param.selectPlaceholder"):w.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:N(()=>[X("div",ZK,[X("div",JK,[X("span",QK,[T(U,{content:oe.name,style:{"max-width":"130px"}},{default:N(()=>[Je(fe(oe.name),1)]),_:2},1032,["content"]),oe.isRequired?(ce(),Rt("span",eZ,"*")):Qt("",!0)]),T(I,{type:"info",class:"info-tag ml-4"},{default:N(()=>[Je(fe(oe.type),1)]),_:2},1024)]),X("div",null,[T($,{text:"",onClick:Bt(Pe=>M(oe,Me),["stop"])},{default:N(()=>[T(fr,{iconName:"app-edit"})]),_:2},1032,["onClick"]),T($,{text:"",onClick:Pe=>S(Me),style:{"margin-left":"4px !important"}},{default:N(()=>[T(fr,{iconName:"app-delete"})]),_:2},1032,["onClick"])])])]),default:N(()=>[oe.source==="reference"?(ce(),Ge(go,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:s,nodeModel:w.nodeModel,class:"w-full",placeholder:w.$t("views.tool.form.param.selectPlaceholder"),modelValue:oe.value,"onUpdate:modelValue":Pe=>oe.value=Pe,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(ce(),Ge(F,{key:1,modelValue:oe.value,"onUpdate:modelValue":Pe=>oe.value=Pe,placeholder:w.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(ce(),Ge(G,{key:1,type:"info"},{default:N(()=>[Je(fe(w.$t("common.noData")),1)]),_:1}))]}),_:1}),X("h5",tZ,fe(w.$t("views.tool.form.param.code")),1),d.value?(ce(),Rt("div",nZ,[T(ZI,{title:w.$t("views.tool.form.param.code"),modelValue:_.value.code,"onUpdate:modelValue":C[1]||(C[1]=ne=>_.value.code=ne),onWheel:o,style:{height:"130px !important"},onSubmitDialog:x},null,8,["title","modelValue"])])):Qt("",!0),[Jt(br).Application,Jt(br).ApplicationLoop].includes(Jt(t))?(ce(),Ge(Z,{key:1,label:w.$t("workflow.nodes.aiChatNode.returnContent.label"),onClick:C[3]||(C[3]=Bt(()=>{},["prevent"]))},{label:N(()=>[X("div",rZ,[X("div",oZ,[X("div",iZ,[X("span",null,fe(w.$t("workflow.nodes.aiChatNode.returnContent.label")),1)]),T(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[Je(fe(w.$t("workflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[T(fr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),X("div",aZ,[T(J,{size:"small",modelValue:_.value.isResult,"onUpdate:modelValue":C[2]||(C[2]=ne=>_.value.isResult=ne)},null,8,["modelValue"])])])]),_:1},8,["label"])):Qt("",!0)]),_:1},8,["model"]),T(K8,{ref_key:"FieldFormDialogRef",ref:r,onRefresh:E},null,512)]),_:1},8,["nodeModel"])}}});class sZ extends no{constructor(t){super(t,lZ)}}const uZ={type:"tool-node",model:ro,view:sZ},oP=Object.freeze(Object.defineProperty({__proto__:null,default:uZ},Symbol.toStringTag,{value:"Module"})),cZ={class:"title-decoration-1 mb-8"},dZ={class:"flex-between lighter"},fZ={key:0,class:"mt-8"},pZ=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={isResult:!0,labelName:"",branch:[{id:dl(),type:"选项 1",option:""}]},o=(y,b,x)=>{const S=ye.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(E=>E.id===b.id?{...E,height:y.height,index:x}:E);ye.set(t.nodeModel.properties,"branchConditionList",S),d(t.nodeModel.properties.nodeData.branch,!0)},r=jn({get:()=>(t.nodeModel.properties.nodeData||(ye.set(t.nodeModel.properties,"nodeData",n),d(n.branch,!0)),t.nodeModel.properties.nodeData),set:y=>{ye.set(t.nodeModel.properties,"nodeData",y)}}),s=Ae();Ae();const c=()=>{var b;const y=[(b=s.value)==null?void 0:b.validate()];return Promise.all(y).catch(x=>Promise.reject({node:t.nodeModel,errMessage:x}))};function f(){const y=ye.cloneDeep(t.nodeModel.properties.nodeData.branch),b={type:"选项 "+(y.length+1),id:dl(),option:"选项 "+(y.length+1)};y.splice(y.length,0,b),d(y,!0),ye.set(t.nodeModel.properties.nodeData,"branch",y)}function d(y,b){const x=ye.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),M=y.map((S,E)=>{const w=x.find(C=>C.id===S.id);if(w)return{index:E,height:w.height,id:S.id};if(b)return{index:E,height:100,id:S.id}}).filter(S=>S);ye.set(t.nodeModel.properties,"branchConditionList",M),t.nodeModel.refreshBranch()}function _(y){const b=ye.cloneDeep(t.nodeModel.properties.nodeData.branch);if(b[y].conditions.length===0){const M=b.splice(y,1).map(S=>t.nodeModel.id+"_"+S.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(S=>M.includes(S.sourceAnchorId)).map(S=>S.id)),d(b,!1),b.forEach((S,E)=>{S.type="选项 "+(E+1)})}ye.set(t.nodeModel.properties.nodeData,"branch",b)}return kr(()=>{ye.set(t.nodeModel,"validate",c)}),(y,b)=>{const x=Y("el-form-item"),M=Y("el-input"),S=Y("el-col"),E=Y("Delete"),w=Y("el-icon"),C=Y("el-button"),j=Y("el-row"),B=Y("el-card"),$=Y("Plus"),U=Y("el-form"),I=Jm("resize");return ce(),Ge(so,{nodeModel:y.nodeModel},{default:N(()=>[X("h5",cZ,fe(y.$t("workflow.nodeSetting")),1),T(B,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(U,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"UserSelectNodeFormRef",ref:s,onSubmit:b[1]||(b[1]=Bt(()=>{},["prevent"]))},{default:N(()=>[T(x,{label:y.$t("workflow.nodes.userSelectNode.caption")},{default:N(()=>[T(as,{title:y.$t("workflow.nodes.userSelectNode.caption"),modelValue:r.value.labelName,"onUpdate:modelValue":b[0]||(b[0]=F=>r.value.labelName=F),style:{height:"100px"},placeholder:y.$t("workflow.nodes.userSelectNode.caption")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),(ce(!0),Rt(Fn,null,Tr(r.value.branch,(F,Z)=>Ca((ce(),Ge(B,{key:F.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:N(()=>[X("div",dZ,fe(F.type),1),Z!==r.value.branch.length?(ce(),Rt("div",fZ,[T(j,{gutter:8},{default:N(()=>[T(S,{span:23},{default:N(()=>[T(x,{prop:"branch."+Z+".option",rules:{required:!0,message:y.$t("workflow.nodes.userSelectNode.valueMessage"),trigger:"blur"}},{default:N(()=>[T(M,{modelValue:F.option,"onUpdate:modelValue":G=>F.option=G,placeholder:y.$t("workflow.nodes.userSelectNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),T(S,{span:1},{default:N(()=>[T(C,{disabled:Z===0,link:"",type:"info",class:"mt-4",onClick:G=>_(Z)},{default:N(()=>[T(w,null,{default:N(()=>[T(E)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):Qt("",!0)]),_:2},1024)),[[I,G=>o(G,F,Z)]])),128)),T(C,{link:"",type:"primary",onClick:f},{default:N(()=>[T(w,{class:"mr-4"},{default:N(()=>[T($)]),_:1}),Je(" "+fe(y.$t("workflow.nodes.userSelectNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class hZ extends no{constructor(t){super(t,pZ)}}const vZ=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class mZ extends ro{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const f=this.properties.showNode===void 0?!0:this.properties.showNode,d=[];if(d.push({x:n-r/2+10,y:f?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let _=0;_<c.length;_++){const y=c[_],b=vZ(c,_);d.push({x:n+r/2-10,y:f?o-s/2+275+b+y.height/2:o-15,id:`${t}_${y.id}_right`,type:"right"})}return d}}const yZ={type:"user-select-node",model:mZ,view:hZ},iP=Object.freeze(Object.defineProperty({__proto__:null,default:yZ},Symbol.toStringTag,{value:"Module"})),gZ={class:"dialog-footer"},_Z=Rn({__name:"GroupFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Ae(),s=Ae(!1),c=Ae(!1),f=Ae(null),d=Ae({field:"",label:""}),_=jd({label:[{required:!0,message:yt("workflow.variable.inputPlaceholder"),trigger:"blur"}],field:[{required:!0,message:yt("workflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:yt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),y=Ae(!1),b=(S,E)=>{S&&(d.value=ye.cloneDeep(S),c.value=!0,f.value=E),y.value=!0},x=()=>{y.value=!1,c.value=!1,f.value=null,d.value={field:"",label:""}},M=async S=>{S&&await S.validate(E=>{E&&o("refresh",d.value,f.value)})};return t({open:b,close:x}),(S,E)=>{const w=Y("el-input"),C=Y("el-form-item"),j=Y("el-form"),B=Y("el-button"),$=Y("el-dialog");return ce(),Ge($,{title:c.value?S.$t("workflow.nodes.variableAggregationNode.editGroup"):S.$t("workflow.nodes.variableAggregationNode.addGroup"),modelValue:y.value,"onUpdate:modelValue":E[3]||(E[3]=U=>y.value=U),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:N(()=>[X("span",gZ,[T(B,{onClick:Bt(x,["prevent"])},{default:N(()=>[Je(fe(S.$t("common.cancel")),1)]),_:1}),T(B,{type:"primary",onClick:E[2]||(E[2]=U=>M(r.value)),loading:s.value},{default:N(()=>[Je(fe(c.value?S.$t("common.save"):S.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[T(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:_,model:d.value,"require-asterisk-position":"right"},{default:N(()=>[T(C,{label:S.$t("common.variable"),required:!0,prop:"field",rules:_.field},{default:N(()=>[T(w,{modelValue:d.value.field,"onUpdate:modelValue":E[0]||(E[0]=U=>d.value.field=U),maxlength:64,placeholder:S.$t("workflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),T(C,{label:S.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:_.label},{default:N(()=>[T(w,{modelValue:d.value.label,"onUpdate:modelValue":E[1]||(E[1]=U=>d.value.label=U),maxlength:64,"show-word-limit":"",placeholder:S.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),bZ={class:"title-decoration-1 mb-8"},wZ={class:"flex-between"},EZ={class:"flex-between mb-12"},OZ={class:"font-bold"},SZ={class:"flex align-center",style:{"margin-right":"-3px"}},xZ=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=Ae(),r=Ae(),s={strategy:"first_non_null",groupList:[{id:dl(),label:"Group1",field:"Group1",variableList:[{v_id:dl(),variable:[]}]}]},c=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",s),t.nodeModel.properties.nodeData),set:w=>{ye.set(t.nodeModel.properties,"nodeData",w)}}),f=Ae([]);function d(w,C){let j=null;w&&C!==void 0&&(j={field:w.field,label:w.label}),r.value.open(j,C)}function _(w,C){for(let B=0;B<f.value.length;B++)if(f.value[B].field===w.field&&C!==B){Ra(yt("workflow.tip.paramErrorMessage")+w.field);return}[void 0,null].includes(C)?(f.value.push(w),S(w)):(f.value.splice(C,1,w),y(w,C)),r.value.close();const j=[...f.value.map(B=>({label:B.label,value:B.field}))];ye.set(t.nodeModel.properties.config,"fields",j)}const y=(w,C)=>{const j=ye.cloneDeep(c.value.groupList);j[C].field=w.field,j[C].label=w.label,c.value.groupList=j},b=w=>{const C=ye.cloneDeep(c.value.groupList);C.splice(w,1),c.value.groupList=C,f.value.splice(w,1);const j=C.map(B=>({label:B.label,value:B.field}));ye.set(t.nodeModel.properties.config,"fields",j)},x=w=>{const C=ye.cloneDeep(c.value.groupList);C[w].variableList.push({v_id:dl(),variable:[]}),c.value.groupList=C},M=(w,C)=>{const j=ye.cloneDeep(c.value.groupList);j[w].variableList.splice(C,1),c.value.groupList=j},S=w=>{const C=ye.cloneDeep(c.value.groupList);C.push({id:dl(),field:w.field,label:w.label,variableList:[{v_id:dl(),variable:[]}]}),c.value.groupList=C},E=async()=>{var C;const w=[...o.value.map(j=>j.validate()),(C=n.value)==null?void 0:C.validate()];return Promise.all(w).catch(j=>Promise.reject({node:t.nodeModel,errMessage:j}))};return kr(()=>{var C;typeof((C=t.nodeModel.properties.nodeData)==null?void 0:C.isResult)>"u"&&Vs(t.nodeModel)&&ye.set(t.nodeModel.properties.nodeData,"isResult",!0),ye.set(t.nodeModel,"validate",E),t.nodeModel.properties.nodeData.groupList&&(f.value=c.value.groupList.map(j=>({label:j.label,field:j.field})));const w=c.value.groupList.map(j=>({label:j.label,value:j.field}));ye.set(t.nodeModel.properties.config,"fields",w)}),(w,C)=>{const j=Y("el-option"),B=Y("el-select"),$=Y("el-form-item"),U=Y("EditPen"),I=Y("el-icon"),F=Y("el-button"),Z=Y("el-col"),G=Y("el-row"),W=Y("el-card"),K=Y("el-form");return ce(),Ge(so,{nodeModel:w.nodeModel},{default:N(()=>[X("h5",bZ,fe(w.$t("workflow.nodeSetting")),1),T(K,{onSubmit:C[2]||(C[2]=Bt(()=>{},["prevent"])),model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableAggregationRef",ref:n,"hide-required-asterisk":""},{default:N(()=>[T($,{label:w.$t("workflow.nodes.variableAggregationNode.Strategy"),rules:{required:!0,trigger:"change"}},{label:N(()=>[X("div",wZ,[X("div",null,[X("span",null,[Je(fe(w.$t("workflow.nodes.variableAggregationNode.Strategy"))+" ",1),C[3]||(C[3]=X("span",{class:"color-danger"},"*",-1))])])])]),default:N(()=>[T(B,{modelValue:c.value.strategy,"onUpdate:modelValue":C[0]||(C[0]=J=>c.value.strategy=J),teleported:!1},{default:N(()=>[T(j,{label:Jt(yt)("workflow.nodes.variableAggregationNode.placeholder"),value:"first_non_null"},null,8,["label"]),T(j,{label:Jt(yt)("workflow.nodes.variableAggregationNode.placeholder1"),value:"variable_to_json"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),(ce(!0),Rt(Fn,null,Tr(c.value.groupList,(J,q)=>(ce(),Rt("div",{key:J.id,class:"mb-8"},[T(W,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[X("div",EZ,[X("span",OZ,fe(J.label),1),X("div",SZ,[T(F,{onClick:ne=>d(J,q),link:""},{default:N(()=>[T(I,null,{default:N(()=>[T(U)]),_:1})]),_:2},1032,["onClick"]),T(F,{onClick:ne=>b(q),link:"",disabled:c.value.groupList.length<=1},{default:N(()=>[T(fr,{iconName:"app-delete"})]),_:2},1032,["onClick","disabled"])])]),(ce(!0),Rt(Fn,null,Tr(J.variableList,(ne,oe)=>(ce(),Rt("div",{key:ne.v_id},[T(G,null,{default:N(()=>[T(Z,{span:22},{default:N(()=>[T($,{prop:`groupList.${q}.variableList.${oe}.variable`,rules:{type:"array",required:!0,message:w.$t("workflow.variable.placeholder"),trigger:"change"}},{default:N(()=>[T(go,{ref_for:!0,ref_key:"nodeCascaderRef",ref:o,nodeModel:w.nodeModel,class:"w-full",placeholder:w.$t("workflow.variable.placeholder"),modelValue:ne.variable,"onUpdate:modelValue":Me=>ne.variable=Me},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),T(Z,{span:2},{default:N(()=>[T(F,{link:"",class:"mt-4 ml-4",disabled:J.variableList.length<=1,onClick:Me=>M(q,oe)},{default:N(()=>[T(fr,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]))),128)),T(F,{onClick:ne=>x(q),type:"primary",size:"large",link:""},{default:N(()=>[T(fr,{iconName:"app-add-outlined",class:"mr-4"}),Je(" "+fe(w.$t("common.add")),1)]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),T(F,{onClick:C[1]||(C[1]=J=>d()),type:"primary",size:"large",link:""},{default:N(()=>[T(fr,{iconName:"app-add-outlined",class:"mr-4"}),Je(" "+fe(w.$t("workflow.nodes.variableAggregationNode.addGroup")),1)]),_:1})]),_:1},8,["model"]),T(_Z,{ref_key:"GroupFieldDialogRef",ref:r,onRefresh:_},null,512)]),_:1},8,["nodeModel"])}}});class MZ extends no{constructor(t){super(t,xZ)}getConfig(t){return t.model.properties.config}}const AZ={type:"variable-aggregation-node",model:ro,view:MZ},aP=Object.freeze(Object.defineProperty({__proto__:null,default:AZ},Symbol.toStringTag,{value:"Module"})),TZ={class:"flex-between"},kZ={class:"flex-between mb-8"},NZ={class:"lighter"},PZ={key:0,class:"flex w-full"},RZ=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],o=M=>M.ctrlKey===!0?(M.preventDefault(),!0):(M.stopPropagation(),!0),r={variableList:[{id:dl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},s=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:M=>{ye.set(t.nodeModel.properties,"nodeData",M)}}),c=Ae(),f=Ae(),d=Ae(),_=async()=>{var S;let M=[(S=c.value)==null?void 0:S.validate(),...f.value.map(E=>E.validate())];return d.value&&(M=[...M,...f.value.map(E=>E.validate())]),Promise.all(M).catch(E=>Promise.reject({node:t.nodeModel,errMessage:E}))};function y(){const M=ye.cloneDeep(t.nodeModel.properties.nodeData.variableList),S={id:dl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};M.push(S),ye.set(t.nodeModel.properties.nodeData,"variableList",M)}function b(M){const S=ye.cloneDeep(t.nodeModel.properties.nodeData.variableList);S.splice(M,1),ye.set(t.nodeModel.properties.nodeData,"variableList",S)}function x(M){t.nodeModel.graphModel.nodes.map(S=>{S.id==="start-node"&&(S.properties.config.globalFields.forEach(E=>{E.value===M.fields[1]&&(M.name=E.label)}),S.properties.config.chatFields.forEach(E=>{E.value===M.fields[1]&&(M.name=E.label)}))})}return kr(()=>{var M;typeof((M=t.nodeModel.properties.nodeData)==null?void 0:M.isResult)>"u"&&Vs(t.nodeModel)&&ye.set(t.nodeModel.properties.nodeData,"isResult",!0),ye.set(t.nodeModel,"validate",_)}),(M,S)=>{const E=Y("AppIcon"),w=Y("el-button"),C=Y("el-form-item"),j=Y("el-option"),B=Y("el-select"),$=Y("el-input"),U=Y("el-input-number"),I=Y("CodemirrorEditor"),F=Y("el-card"),Z=Y("Plus"),G=Y("el-icon"),W=Y("el-form");return ce(),Ge(so,{nodeModel:M.nodeModel},{default:N(()=>[T(W,{onSubmit:S[0]||(S[0]=Bt(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:N(()=>[(ce(!0),Rt(Fn,null,Tr(s.value.variableList,(K,J)=>(ce(),Ge(F,{key:K.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(C,{label:M.$t("common.variable")},{label:N(()=>[X("div",TZ,[X("div",null,[Je(fe(M.$t("common.variable"))+" ",1),S[1]||(S[1]=X("span",{class:"color-danger"},"*",-1))]),s.value.variableList.length>1?(ce(),Ge(w,{key:0,text:"",onClick:q=>b(J)},{default:N(()=>[T(E,{iconName:"app-delete"})]),_:2},1032,["onClick"])):Qt("",!0)])]),default:N(()=>[T(go,{ref_for:!0,ref_key:"nodeCascaderRef",ref:f,nodeModel:M.nodeModel,class:"w-full",placeholder:M.$t("workflow.variable.placeholder"),modelValue:K.fields,"onUpdate:modelValue":q=>K.fields=q,global:!0,onChange:q=>x(K)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),X("div",kZ,[X("span",NZ,[Je(fe(M.$t("workflow.nodes.variableAssignNode.assign")),1),S[2]||(S[2]=X("span",{class:"color-danger"},"*",-1))]),T(B,{teleported:!1,modelValue:K.source,"onUpdate:modelValue":q=>K.source=q,size:"small",style:{width:"85px"}},{default:N(()=>[T(j,{label:M.$t("workflow.variable.Referencing"),value:"referencing"},null,8,["label"]),T(j,{label:M.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),K.source==="custom"?(ce(),Rt("div",PZ,[T(B,{modelValue:K.type,"onUpdate:modelValue":q=>K.type=q,style:{"max-width":"85px"},class:"mr-8",onChange:q=>s.value.variableList[J].value=null},{default:N(()=>[(ce(),Rt(Fn,null,Tr(n,q=>T(j,{key:q,label:q,value:q},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),K.type==="string"?(ce(),Ge(C,{key:0,prop:"variableList."+J+".value",rules:{message:Jt(yt)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:N(()=>[T($,{modelValue:K.value,"onUpdate:modelValue":q=>K.value=q,placeholder:M.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:o},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):K.type==="num"?(ce(),Ge(C,{key:1,prop:"variableList."+J+".value",rules:{message:M.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:N(()=>[T(U,{modelValue:K.value,"onUpdate:modelValue":q=>K.value=q},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):K.type==="json"?(ce(),Ge(C,{key:2,class:"w-full",prop:"variableList."+J+".value",rules:[{message:M.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(q,ne,oe)=>{try{JSON.parse(ne),oe()}catch{oe(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:N(()=>[T(I,{title:"JSON",modelValue:K.value,"onUpdate:modelValue":q=>K.value=q,style:{height:"100px",width:"155px"},onSubmitDialog:q=>s.value.variableList[J].value=q},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):Qt("",!0)])):(ce(),Ge(C,{key:1},{default:N(()=>[T(go,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:d,nodeModel:M.nodeModel,class:"w-full",placeholder:M.$t("workflow.variable.placeholder"),modelValue:K.reference,"onUpdate:modelValue":q=>K.reference=q},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),T(w,{link:"",type:"primary",onClick:y},{default:N(()=>[T(G,{class:"mr-4"},{default:N(()=>[T(Z)]),_:1}),Je(" "+fe(M.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class CZ extends no{constructor(t){super(t,RZ)}}const DZ={type:"variable-assign-node",model:ro,view:CZ},lP=Object.freeze(Object.defineProperty({__proto__:null,default:DZ},Symbol.toStringTag,{value:"Module"})),jZ={class:"flex align-center"},IZ={class:"mr-4"},LZ={class:"flex align-center"},$Z={class:"mr-4"},FZ={class:"flex align-center"},VZ={class:"mr-4"},BZ={class:"dialog-footer"},UZ=Rn({__name:"VariableFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Ae(),s=Ae(!1),c=Ae(!1),f=Ae(null),d=Ae({field:"",label:"",expression:""}),_=jd({label:[{required:!0,message:yt("dynamicsForm.paramForm.name.placeholder"),trigger:"blur"}],field:[{required:!0,message:yt("workflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:yt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}],expression:[{required:!0,message:yt("workflow.nodes.variableSplittingNode.expression.placeholder"),trigger:"blur"}]}),y=Ae(!1),b=(S,E)=>{S&&(d.value=ye.cloneDeep(S),c.value=!0,f.value=E),y.value=!0},x=()=>{y.value=!1,c.value=!1,f.value=null,d.value={field:"",label:""}},M=async S=>{S&&await S.validate(E=>{E&&o("refresh",d.value,f.value)})};return t({open:b,close:x}),(S,E)=>{const w=Y("el-input"),C=Y("el-form-item"),j=Y("AppIcon"),B=Y("el-tooltip"),$=Y("el-form"),U=Y("el-button"),I=Y("el-dialog");return ce(),Ge(I,{title:c.value?S.$t("workflow.nodes.variableSplittingNode.editVariables"):S.$t("workflow.nodes.variableSplittingNode.addVariables"),modelValue:y.value,"onUpdate:modelValue":E[4]||(E[4]=F=>y.value=F),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:N(()=>[X("span",BZ,[T(U,{onClick:Bt(x,["prevent"])},{default:N(()=>[Je(fe(S.$t("common.cancel")),1)]),_:1}),T(U,{type:"primary",onClick:E[3]||(E[3]=F=>M(r.value)),loading:s.value},{default:N(()=>[Je(fe(S.$t("common.save")),1)]),_:1},8,["loading"])])]),default:N(()=>[T($,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:_,model:d.value,"require-asterisk-position":"right","hide-required-asterisk":""},{default:N(()=>[T(C,{prop:"field"},{label:N(()=>[X("div",jZ,[X("span",IZ,fe(S.$t("common.variable")),1),E[5]||(E[5]=X("span",{class:"color-danger"},"*",-1))])]),default:N(()=>[T(w,{modelValue:d.value.field,"onUpdate:modelValue":E[0]||(E[0]=F=>d.value.field=F),maxlength:64,placeholder:S.$t("workflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1}),T(C,{prop:"label"},{label:N(()=>[X("div",LZ,[X("span",$Z,fe(S.$t("dynamicsForm.paramForm.name.label")),1),E[6]||(E[6]=X("span",{class:"color-danger"},"*",-1))])]),default:N(()=>[T(w,{modelValue:d.value.label,"onUpdate:modelValue":E[1]||(E[1]=F=>d.value.label=F),maxlength:64,"show-word-limit":"",placeholder:S.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),T(C,{prop:"expression"},{label:N(()=>[X("div",FZ,[X("span",VZ,[Je(fe(S.$t("workflow.nodes.variableSplittingNode.expression.label"))+" ",1),E[7]||(E[7]=X("span",{class:"color-danger"},"*",-1))]),T(B,{effect:"dark",content:S.$t("workflow.nodes.variableSplittingNode.expression.tooltip"),placement:"right"},{default:N(()=>[T(j,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:N(()=>[T(w,{modelValue:d.value.expression,"onUpdate:modelValue":E[2]||(E[2]=F=>d.value.expression=F),maxlength:64,"show-word-limit":"",placeholder:S.$t("workflow.nodes.variableSplittingNode.expression.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),GZ={class:"flex-between w-full"},zZ={class:"break-all lighter"},HZ={class:"ml-4",style:{"margin-top":"-4px"}},WZ=["title"],XZ=["title"],qZ={class:"mr-4"},YZ=Rn({__name:"VariableFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ae(),o=Ae(),r=Ae([]);function s(d,_){o.value.open(d,_)}function c(d){r.value.splice(d,1);const _=[{label:yt("common.result"),value:"result"},...r.value.map(y=>({label:y.label,value:y.field}))];ye.set(t.nodeModel.properties.config,"fields",_)}function f(d,_){for(let b=0;b<r.value.length;b++)if(r.value[b].field===d.field&&_!==b){Ra(yt("workflow.tip.paramErrorMessage")+d.field);return}[void 0,null].includes(_)?r.value.push(d):r.value.splice(_,1,d),o.value.close();const y=[{label:yt("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];ye.set(t.nodeModel.properties.config,"fields",y)}return kr(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=ye.cloneDeep(t.nodeModel.properties.nodeData.variableList)),ye.set(t.nodeModel.properties.nodeData,"variableList",r);const d=[{label:yt("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];ye.set(t.nodeModel.properties.config,"fields",d)}),(d,_)=>{var E;const y=Y("AppIcon"),b=Y("el-button"),x=Y("el-table-column"),M=Y("el-tooltip"),S=Y("el-table");return ce(),Rt(Fn,null,[X("div",GZ,[X("h5",zZ,[Je(fe(d.$t("workflow.nodes.variableSplittingNode.splitVariables"))+" ",1),_[1]||(_[1]=X("span",{class:"color-danger"},"*",-1))]),X("span",HZ,[T(b,{link:"",type:"primary",onClick:_[0]||(_[0]=w=>s())},{default:N(()=>[T(y,{iconName:"app-add-outlined"})]),_:1})])]),((E=t.nodeModel.properties.nodeData.variableList)==null?void 0:E.length)>0?(ce(),Ge(S,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:N(()=>[T(x,{prop:"field",label:d.$t("common.variable"),width:"95"},{default:N(({row:w})=>[X("span",{title:w.field,class:"ellipsis-1"},fe(w.field),9,WZ)]),_:1},8,["label"]),T(x,{prop:"label",label:d.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:w})=>[X("span",{title:w.label,class:"ellipsis-1"},fe(w.label),9,XZ)]),_:1},8,["label"]),T(x,{label:d.$t("common.operation"),align:"left",width:"90"},{default:N(({row:w,$index:C})=>[X("span",qZ,[T(M,{effect:"dark",content:d.$t("common.modify"),placement:"top"},{default:N(()=>[T(b,{type:"primary",text:"",onClick:Bt(j=>s(w,C),["stop"])},{default:N(()=>[T(y,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),T(M,{effect:"dark",content:d.$t("common.delete"),placement:"top"},{default:N(()=>[T(b,{type:"primary",text:"",onClick:j=>c(C)},{default:N(()=>[T(y,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Qt("",!0),T(UZ,{ref_key:"VariableFieldDialogRef",ref:o,onRefresh:f},null,512)],64)}}}),KZ={class:"title-decoration-1 mb-8"},ZZ={class:"flex-between"},JZ=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={inputVariable:[],variableList:[]},o=jn({get:()=>(t.nodeModel.properties.nodeData||ye.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:c=>{ye.set(t.nodeModel.properties,"nodeData",c)}}),r=Ae(),s=async()=>r.value.validate();return kr(()=>{ye.set(t.nodeModel,"validate",s)}),(c,f)=>{const d=Y("el-form-item"),_=Y("el-form"),y=Y("el-card");return ce(),Ge(so,{nodeModel:c.nodeModel},{default:N(()=>[X("h5",KZ,fe(c.$t("workflow.nodeSetting")),1),T(y,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[T(_,{onSubmit:f[1]||(f[1]=Bt(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:r,"hide-required-asterisk":""},{default:N(()=>[T(d,{prop:"inputVariable",rules:{message:c.$t("workflow.variable.placeholder"),trigger:"blur",required:!0}},{label:N(()=>[X("div",ZZ,[X("div",null,[Je(fe(c.$t("workflow.nodes.variableSplittingNode.inputVariables"))+" ",1),f[2]||(f[2]=X("span",{class:"color-danger"},"*",-1))])])]),default:N(()=>[T(go,{ref:"nodeCascaderRef",nodeModel:c.nodeModel,class:"w-full",placeholder:c.$t("workflow.variable.placeholder"),modelValue:o.value.inputVariable,"onUpdate:modelValue":f[0]||(f[0]=b=>o.value.inputVariable=b)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),T(d,{prop:"variableList",rules:{message:c.$t("workflow.variable.placeholder"),trigger:"blur",required:!0}},{default:N(()=>[T(YZ,{ref:"VariableFieldTableRef","node-model":c.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class QZ extends no{constructor(t){super(t,JZ)}}const eJ={type:"variable-splitting-node",model:ro,view:QZ},sP=Object.freeze(Object.defineProperty({__proto__:null,default:eJ},Symbol.toStringTag,{value:"Module"})),sM=Rn({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(o,r)=>Ca((ce(),Rt("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=Bt(()=>{},["stop"])),onClick:r[1]||(r[1]=Bt(()=>{},["stop"]))},[(ce(),Rt("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[X("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),X("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[Mu,t.model.isHovered]])}});function tJ(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const nJ=32,rJ=32;class oJ extends cn.BezierEdge{constructor(){super();ha(this,"isMounted");ha(this,"customLineApp");ha(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const o=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");tJ(o,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:o}=this.props;n&&(Hg()?dN(this.targetId(),sM,n,this.props.model,o,(s,c)=>({model:s,graph:c})):(this.customLineApp=oT({render:()=>Tv(sM,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),Hg()&&fN(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,o=n.id,{customWidth:r=nJ,customHeight:s=rJ}=n.getProperties(),{startPoint:c,endPoint:f,path:d,isAnimation:_,arrowConfig:y}=n,b=n.getEdgeAnimationStyle(),{strokeDasharray:x,stroke:M,strokeDashoffset:S,animationName:E,animationDuration:w,animationIterationCount:C,animationTimingFunction:j,animationDirection:B}=b,$={x:(c.x+f.x-r)/2,y:(c.y+f.y-s)/2,width:r,height:s},U=n.getEdgeStyle(),I={width:r,height:s};return setTimeout(()=>{const F=document.getElementById(o);F&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(F))},0),delete U.stroke,cn.h("g",{},[cn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),cn.h("path",{d,...U,...y,..._?{strokeDasharray:x,stroke:M,style:{strokeDashoffset:S,animationName:E,animationDuration:w,animationIterationCount:C,animationTimingFunction:j,animationDirection:B}}:{}}),cn.h("foreignObject",{...$,y:$.y+5,x:$.x+5,style:{}},[cn.h("div",{id:o,style:{...I},className:"lf-custom-edge-wrapper"})])])}}let iJ=class extends cn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y};this.updateStartPoint(s);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}};const uP={type:"app-edge",view:oJ,model:iJ};class aJ{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const lJ=e=>typeof e=="string",uM=Array.isArray,Zg=e=>typeof e=="number",cP=e=>e!==null&&typeof e=="object",Jg=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Jg(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Jg(t[n])}),t}return e},iv=(e,t)=>{const n=e[t];return cP(n)?n.cell:n},cM=(e,t,n)=>{let o;return n?o=n:Zg(e)?o=()=>e:o=()=>t,o},sJ=(e,t)=>{if(e!=="next"&&e!=="prev")return t},dM=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let uJ=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return dM(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&dM(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let o=n.prev;for(;o!==n;)t.push(JSON.stringify(o,sJ)),o=o==null?void 0:o.prev;return`[${t.join(", ")}]`}};var bv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(bv||(bv={}));function fM(e,t){var n=e.get(t)||0;e.set(t,n+1)}function pM(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function dP(e,t,n,o){var r=String(t),s=String(n);if(!e&&r>s){var c=r;r=s,s=c}return r+bv.EDGE_KEY_DELIM+s+bv.EDGE_KEY_DELIM+(o===void 0?bv.DEFAULT_EDGE_NAME:o)}function hM(e,t,n,o){var r=String(t),s=String(n),c={v:t,w:n};if(!e&&r>s){var f=c.v;c.v=c.w,c.w=f}return o!==void 0&&(c.name=o),c}function D1(e,t){return dP(e,t.v,t.w,t.name)}function vM(e){return typeof e=="function"}var cJ=function(t){return t.nodes().map(function(n){var o=t.node(n),r=t.parent(n),s={id:n,value:o,parent:r};return s.value===void 0&&delete s.value,s.parent===void 0&&delete s.parent,s})},dJ=function(t){return t.edges().map(function(n){var o=t.edge(n),r={v:n.v,w:n.w,value:o,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},fJ=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:cJ(t),edges:dJ(t),value:t.graph()};return n.value===void 0&&delete n.value,n},pJ=function(t){var n=new zv(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(o){n.setNode(o.id,o.value),o.parent&&n.setParent(o.id,o.parent)}),t.edges.forEach(function(o){n.setEdge(o.v,o.w,o.value,o.name)}),n};function mM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function yM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mM(Object(n),!0).forEach(function(o){hJ(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function hJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mJ(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function yJ(e,t,n){return t&&mJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var gJ={compound:!1,multigraph:!1,directed:!0},zv=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};vJ(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=bv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return vM(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.inEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.sinks=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.outEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.setNodes=function(r,s){return r.map(function(c){return t.setNode(c,s)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var s,c=(s=t.parentMap)===null||s===void 0?void 0:s.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var s=t.parentMap.get(r);t.childrenMap.get(s).delete(r)},this.setParent=function(r,s){var c,f;t.checkCompound();for(var d=s===void 0?t.GRAPH_NODE:s,_=t.parent(d);_;){if(r===_)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");_=t.parent(_)}s&&t.setNode(s),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,d);var y=t.childrenMap.get(d);return y.set(r,!0),(f=t.childrenMap)===null||f===void 0||f.set(d,y),t},this.children=function(r){var s=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,f=(c=t.childrenMap)===null||c===void 0?void 0:c.get(s);return f?Array.from(f.keys()):void 0}if(s===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var s=t.predecessorsMap.get(r);return s?Array.from(s.keys()):void 0},this.successors=function(r){var s=t.successorsMap.get(r);return s?Array.from(s.keys()):void 0},this.neighbors=function(r){var s;if(t.hasNode(r))return Array.from(new Set((s=t.predecessors(r))===null||s===void 0?void 0:s.concat(t.successors(r))))},this.isLeaf=function(r){var s;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((s=t.neighbors(r))===null||s===void 0)&&s.length)},this.filterNodes=function(r){var s=t.directed,c=t.multigraph,f=t.compound,d=new e({directed:s,multigraph:c,compound:f});if(d.setGraph(t.graph()),t.nodes().forEach(function(y){r(y)&&d.setNode(y,t.node(y))}),t.edges().forEach(function(y){d.hasNode(y.v)&&d.hasNode(y.w)&&d.setEdgeObj(y,t.edge(y))}),f){var _=function(b){for(var x=t.parent(b);x!==void 0&&!d.hasNode(x);)x=t.parent(x);return x};d.nodes().forEach(function(y){d.setParent(y,_(y))})}return d},this.setDefaultEdgeLabel=function(r){return vM(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,s){return t.setEdge(r.v,r.w,s,r.name)},this.setPath=function(r,s){return r.reduce(function(c,f){return t.setEdge(c,f,s),f}),t},this.edgeFromArgs=function(r,s,c){return t.edge({v:r,w:s,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(D1(t.isDirected(),r))},this.hasEdge=function(r,s,c){return t.edgesLabelsMap.has(D1(t.isDirected(),{v:r,w:s,name:c}))},this.removeEdgeObj=function(r){var s=r.v,c=r.w,f=r.name;return t.removeEdge(s,c,f)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,s){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(f){return!s||f.v===s})},this.outEdges=function(r,s){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(f){return!s||f.w===s})},this.nodeEdges=function(r,s){var c;if(t.hasNode(r))return(c=t.inEdges(r,s))===null||c===void 0?void 0:c.concat(t.outEdges(r,s))},this.toJSON=function(){return fJ(t)},this.nodeInDegree=function(r){var s=t.inEdgesMap.get(r);return s?s.size:0},this.nodeOutDegree=function(r){var s=t.outEdgesMap.get(r);return s?s.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var o=yM(yM({},gJ),n);this.compound=o.compound,this.directed=o.directed,this.multigraph=o.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return yJ(e,[{key:"setNode",value:function(n,o){var r=this.nodesLabelMap,s=this.defaultNodeLabelFn,c=this.isCompound,f=this.parentMap,d=this.childrenMap,_=this.inEdgesMap,y=this.outEdgesMap,b=this.predecessorsMap,x=this.successorsMap;if(r.has(n))return o!==void 0&&r.set(n,o),this;if(r.set(n,o||s(n)),c()){var M;f==null||f.set(n,this.GRAPH_NODE),d==null||d.set(n,new Map),d!=null&&d.has(this.GRAPH_NODE)||d==null||d.set(this.GRAPH_NODE,new Map),d==null||(M=d.get(this.GRAPH_NODE))===null||M===void 0||M.set(n,!0)}return[_,y,b,x].forEach(function(S){return S.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var o=this;if(this.hasNode(n)){var r=function(w){o.removeEdge(w.v,w.w,w.name)},s=this.inEdgesMap,c=this.outEdgesMap,f=this.predecessorsMap,d=this.successorsMap,_=this.nodesLabelMap;if(this.isCompound()){var y,b,x;this.removeFromParentsChildList(n),(y=this.parentMap)===null||y===void 0||y.delete(n),(b=this.children(n))===null||b===void 0||b.forEach(function(E){return o.setParent(E)}),(x=this.childrenMap)===null||x===void 0||x.delete(n)}var M=s.get(n),S=c.get(n);Array.from(M.values()).forEach(function(E){return r(E)}),Array.from(S.values()).forEach(function(E){return r(E)}),_.delete(n),s.delete(n),c.delete(n),f.delete(n),d.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,o,r,s){var c,f,d=hM(this.isDirected(),n,o,s),_=D1(this.isDirected(),d),y=d.v,b=d.w;if(this.edgesLabelsMap.has(_))return this.edgesLabelsMap.set(_,r),this;if(s!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(y),this.setNode(b),this.edgesLabelsMap.set(_,r||this.defaultEdgeLabelFn(y,b,s)),Object.freeze(d),this.edgesMap.set(_,d);var x=this.predecessorsMap.get(b),M=this.successorsMap.get(y);return fM(x,y),fM(M,b),(c=this.inEdgesMap.get(b))===null||c===void 0||c.set(_,d),(f=this.outEdgesMap.get(y))===null||f===void 0||f.set(_,d),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,o,r){var s=dP(this.isDirected(),n,o,r),c=this.edgesMap.get(s);if(c){var f=hM(this.isDirected(),n,o,r),d=f.v,_=f.w;this.edgesLabelsMap.delete(s),this.edgesMap.delete(s);var y=this.predecessorsMap.get(_),b=this.successorsMap.get(d);pM(y,d),pM(b,_),this.inEdgesMap.get(_).delete(s),this.outEdgesMap.get(d).delete(s),this.edgeCountNum-=1}return this}}]),e}();zv.fromJSON=pJ;function _J(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function bJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var fP=_J(function e(){var t=this;bJ(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var o=t.keyIndice.get(n);if(o!==void 0)return t.arr[o].priority},this.swap=function(n,o){var r=t.arr,s=t.keyIndice,c=[r[n],r[o]],f=c[0],d=c[1];r[n]=d,r[o]=f,s.set(f.key,o),s.set(d.key,n)},this.innerDecrease=function(n){for(var o=t.arr,r=o[n].priority,s,c=n;c!==0;){var f;if(s=c>>1,((f=o[s])===null||f===void 0?void 0:f.priority)<r)break;t.swap(c,s),c=s}},this.heapify=function(n){var o=t.arr,r=n<<1,s=r+1,c=n;r<o.length&&(c=o[r].priority<o[c].priority?r:c,s<o.length&&(c=o[s].priority<o[c].priority?s:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,o){var r=t.keyIndice,s=t.arr;if(!r.has(n)){var c=s.length;return r.set(n,c),s.push({key:n,priority:o}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,o){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(o>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(o));t.arr[r].priority=o,t.innerDecrease(r)}}),wJ=function(t,n){var o=new zv,r=new Map,s=new fP,c;function f(y){var b=y.v===c?y.w:y.v,x=s.priority(b);if(x!==void 0){var M=n(y);M<x&&(r.set(b,c),s.decrease(b,M))}}if(t.nodeCount()===0)return o;t.nodes().forEach(function(y){s.add(y,Number.POSITIVE_INFINITY),o.setNode(y)}),s.decrease(t.nodes()[0],0);for(var d=!1;s.size()>0;){var _;if(c=s.removeMin(),r.has(c))o.setEdge(c,r.get(c));else{if(d)throw new Error("Input graph is not connected: "+t.graph());d=!0}(_=t.nodeEdges(c))===null||_===void 0||_.forEach(f)}return o},EJ=function(t){var n=new Set,o=[],r=t.nodes();return r.forEach(function(s){for(var c=[],f=[s];f.length>0;){var d=f.pop();if(!n.has(d)){var _,y;n.add(d),c.push(d),(_=t.successors(d))===null||_===void 0||_.forEach(function(b){return f.push(b)}),(y=t.predecessors(d))===null||y===void 0||y.forEach(function(b){return f.push(b)})}}c.length&&o.push(c)}),o},OJ=function e(t,n,o,r,s,c){r.includes(n)||(r.push(n),o||c.push(n),s(n).forEach(function(f){return e(t,f,o,r,s,c)}),o&&c.push(n))},BE=function(t,n,o){var r=Array.isArray(n)?n:[n],s=function(_){return t.isDirected()?t.successors(_):t.neighbors(_)},c=[],f=[];return r.forEach(function(d){if(t.hasNode(d))OJ(t,d,o==="post",f,s,c);else throw new Error("Graph does not have node: "+d)}),c};function SJ(e,t){return TJ(e)||AJ(e,t)||MJ(e,t)||xJ()}function xJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MJ(e,t){if(e){if(typeof e=="string")return gM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gM(e,t)}}function gM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function AJ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,s=!1,c,f;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(o.push(c.value),!(t&&o.length===t));r=!0);}catch(d){s=!0,f=d}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw f}}return o}}function TJ(e){if(Array.isArray(e))return e}var kJ=function(){return 1},pP=function(t,n,o,r){return NJ(t,n,o||kJ,r||function(s){return t.outEdges(s)})},NJ=function(t,n,o,r){var s=new Map,c=new fP,f,d,_=function(x){var M=x.v!==f?x.v:x.w,S=s.get(M),E=o(x),w=d.distance+E;if(E<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+E);w<S.distance&&(S.distance=w,S.predecessor=f,c.decrease(M,w))};for(t.nodes().forEach(function(b){var x=b===n?0:Number.POSITIVE_INFINITY;s.set(b,{distance:x}),c.add(b,x)});c.size()>0&&(f=c.removeMin(),d=s.get(f),!(d&&d.distance===Number.POSITIVE_INFINITY));)r(f).forEach(_);var y={};return Array.from(s.entries()).forEach(function(b){var x=SJ(b,2),M=x[0],S=x[1];return y[String(M)]=S,y}),y},PJ=function(t,n,o){var r={};return t.nodes().forEach(function(s){return r[String(s)]=pP(t,s,n,o),r}),r},hP=function(t){var n=0,o=[],r=new Map,s=[];function c(f){var d,_={onStack:!0,lowlink:n,index:n};if(r.set(f,_),n+=1,o.push(f),(d=t.successors(f))===null||d===void 0||d.forEach(function(M){var S;if(r.has(M)){if(!((S=r.get(M))===null||S===void 0)&&S.onStack){var w=r.get(M);_.lowlink=Math.min(_.lowlink,w.index)}}else{c(M);var E=r.get(M);_.lowlink=Math.min(_.lowlink,E.lowlink)}}),_.lowlink===_.index){var y=[],b;do{b=o.pop();var x=r.get(b);x.onStack=!1,y.push(b)}while(f!==b);s.push(y)}}return t.nodes().forEach(function(f){r.has(f)||c(f)}),s},RJ=function(t){return hP(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function Dw(e){"@babel/helpers - typeof";return Dw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dw(e)}function CJ(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function DJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vm(e,t)}function IJ(e){var t=vP();return function(){var o=Bm(e),r;if(t){var s=Bm(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return LJ(this,r)}}function LJ(e,t){if(t&&(Dw(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $J(e)}function $J(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jw(e){var t=typeof Map=="function"?new Map:void 0;return jw=function(o){if(o===null||!FJ(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(o))return t.get(o);t.set(o,r)}function r(){return xg(o,arguments,Bm(this).constructor)}return r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Vm(r,o)},jw(e)}function xg(e,t,n){return vP()?xg=Reflect.construct:xg=function(r,s,c){var f=[null];f.push.apply(f,s);var d=Function.bind.apply(r,f),_=new d;return c&&Vm(_,c.prototype),_},xg.apply(null,arguments)}function vP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function FJ(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Vm(e,t){return Vm=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o},Vm(e,t)}function Bm(e){return Bm=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Bm(e)}var Iw=function(e){jJ(n,e);var t=IJ(n);function n(){return DJ(this,n),t.apply(this,arguments)}return CJ(n)}(jw(Error));function mP(e){var t=new Set,n=new Set,o=[];function r(s){if(n.has(s))throw new Iw;if(!t.has(s)){var c;n.add(s),t.add(s),(c=e.predecessors(s))===null||c===void 0||c.forEach(r),n.delete(s),o.push(s)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new Iw;return o}var VJ=function(t){try{mP(t)}catch(n){if(n instanceof Iw)return!1;throw n}return!0},BJ=function(t,n){return BE(t,n,"post")},UJ=function(t,n){return BE(t,n,"pre")},GJ=function(){return 1};function zJ(e,t,n){return HJ(e,t||GJ,n||function(o){return e.outEdges(o)})}function HJ(e,t,n){var o={},r=e.nodes();return r.forEach(function(s){var c=String(s);o[c]={},o[c][c]={distance:0},r.forEach(function(f){s!==f&&(o[c][String(f)]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(f){var d=f.v===s?f.w:f.v,_=t(f);o[c][String(d)]={distance:_,predecessor:s}})}),r.forEach(function(s){var c=String(s),f=o[c];r.forEach(function(d){var _=String(d),y=o[_];r.forEach(function(b){var x=String(b),M=y[c],S=f[x],E=y[x],w=M.distance+S.distance;w<E.distance&&(E.distance=w,E.predecessor=S.predecessor)})})}),o}const WJ=Object.freeze(Object.defineProperty({__proto__:null,components:EJ,dfs:BE,dijkstra:pP,dijkstraAll:PJ,findCycles:RJ,floydWarshall:zJ,isAcyclic:VJ,postorder:BJ,preorder:UJ,prim:wJ,tarjan:hP,topsort:mP},Symbol.toStringTag,{value:"Module"}));class XJ extends uJ{}class qJ extends zv{}const YJ=()=>1,KJ=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const o=JJ(e,t||YJ);return(n=ZJ(o.graph,o.buckets,o.zeroIdx).map(s=>e.outEdges(s.v,s.w)))===null||n===void 0?void 0:n.flat()},ZJ=(e,t,n)=>{let o=[];const r=t[t.length-1],s=t[0];let c;for(;e.nodeCount();){for(;c=s.dequeue();)j1(e,t,n,c);for(;c=r.dequeue();)j1(e,t,n,c);if(e.nodeCount()){for(let f=t.length-2;f>0;--f)if(c=t[f].dequeue(),c){o=o.concat(j1(e,t,n,c,!0));break}}}return o},j1=(e,t,n,o,r)=>{var s,c;const f=[];return(s=e.inEdges(o.v))===null||s===void 0||s.forEach(d=>{const _=e.edge(d),y=e.node(d.v);r&&f.push({v:d.v,w:d.w,in:0,out:0}),y.out===void 0&&(y.out=0),y.out-=_,Lw(t,n,y)}),(c=e.outEdges(o.v))===null||c===void 0||c.forEach(d=>{const _=e.edge(d),y=d.w,b=e.node(y);b.in===void 0&&(b.in=0),b.in-=_,Lw(t,n,b)}),e.removeNode(o.v),r?f:void 0},JJ=(e,t)=>{const n=new qJ;let o=0,r=0;e.nodes().forEach(d=>{n.setNode(d,{v:d,in:0,out:0})}),e.edges().forEach(d=>{const _=n.edge(d)||0,y=(t==null?void 0:t(d))||1,b=_+y;n.setEdge(d.v,d.w,b),r=Math.max(r,n.node(d.v).out+=y),o=Math.max(o,n.node(d.w).in+=y)});const s=[],c=r+o+3;for(let d=0;d<c;d++)s.push(new XJ);const f=o+1;return n.nodes().forEach(d=>{Lw(s,f,n.node(d))}),{buckets:s,zeroIdx:f,graph:n}},Lw=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},QJ=e=>{const t=o=>r=>{var s;return((s=o.edge(r))===null||s===void 0?void 0:s.weight)||1},n=e.graph().acyclicer==="greedy"?KJ(e,t(e)):eQ(e);n==null||n.forEach(o=>{const r=e.edge(o);e.removeEdgeObj(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,`rev-${Math.random()}`)})},eQ=e=>{const t=[],n={},o={},r=s=>{var c;o[s]||(o[s]=!0,n[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.forEach(f=>{n[f.w]?t.push(f):r(f.w)}),delete n[s])};return e.nodes().forEach(r),t},tQ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})},_M={run:QJ,undo:tQ};class Cd extends zv{}const nQ=(e,t)=>Number(e)-Number(t),Hv=(e,t,n,o)=>{let r;do r=`${o}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},rQ=e=>{const t=new Cd().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const o=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t},yP=e=>{const t=new Cd({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var o;!((o=e.children(n))===null||o===void 0)&&o.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},oQ=(e,t)=>e==null?void 0:e.reduce((n,o,r)=>(n[o]=t[r],n),{}),bM=(e,t)=>{const n=Number(e.x),o=Number(e.y),r=Number(t.x)-n,s=Number(t.y)-o;let c=Number(e.width)/2,f=Number(e.height)/2;if(!r&&!s)return{x:0,y:0};let d,_;return Math.abs(s)*c>Math.abs(r)*f?(s<0&&(f=-f),d=f*r/s,_=f):(r<0&&(c=-c),d=c,_=c*s/r),{x:n+d,y:o+_}},Um=e=>{const t=[],n=gP(e)+1;for(let o=0;o<n;o++)t.push([]);e.nodes().forEach(o=>{const r=e.node(o);if(!r)return;const s=r.rank;s!==void 0&&t[s]&&t[s].push(o)});for(let o=0;o<n;o++)t[o]=t[o].sort((r,s)=>{var c,f;return nQ((c=e.node(r))===null||c===void 0?void 0:c.order,(f=e.node(s))===null||f===void 0?void 0:f.order)});return t},iQ=e=>{const t=e.nodes().filter(o=>{var r;return((r=e.node(o))===null||r===void 0?void 0:r.rank)!==void 0}).map(o=>e.node(o).rank),n=Math.min(...t);e.nodes().forEach(o=>{const r=e.node(o);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},aQ=e=>{const t=e.nodes(),n=t.filter(f=>{var d;return((d=e.node(f))===null||d===void 0?void 0:d.rank)!==void 0}).map(f=>e.node(f).rank),o=Math.min(...n),r=[];t.forEach(f=>{var d;const _=(((d=e.node(f))===null||d===void 0?void 0:d.rank)||0)-o;r[_]||(r[_]=[]),r[_].push(f)});let s=0;const c=e.graph().nodeRankFactor||0;for(let f=0;f<r.length;f++){const d=r[f];d===void 0?f%c!==0&&(s-=1):s&&(d==null||d.forEach(_=>{const y=e.node(_);y&&(y.rank=y.rank||0,y.rank+=s)}))}},wM=(e,t,n,o)=>{const r={width:0,height:0};return Zg(n)&&Zg(o)&&(r.rank=n,r.order=o),Hv(e,"border",r,t)},gP=e=>{let t;return e.nodes().forEach(n=>{var o;const r=(o=e.node(n))===null||o===void 0?void 0:o.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},lQ=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n},_P=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},bP=(e,t)=>t(),UE=(e,t)=>e.reduce((n,o)=>{const r=t(n),s=t(o);return r>s?o:n}),sQ=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>uQ(e,t))},uQ=(e,t)=>{let n=t.v,o=e.node(n).rank;const r=t.w,s=e.node(r).rank,c=t.name,f=e.edge(t),d=f.labelRank;if(s===o+1)return;e.removeEdgeObj(t);const _=e.graph();let y,b,x;for(x=0,++o;o<s;++x,++o)f.points=[],b={edgeLabel:f,width:0,height:0,edgeObj:t,rank:o},y=Hv(e,"edge",b,"_d"),o===d&&(b.width=f.width,b.height=f.height,b.dummy="edge-label",b.labelpos=f.labelpos),e.setEdge(n,y,{weight:f.weight},c),x===0&&(_.dummyChains||(_.dummyChains=[]),_.dummyChains.push(y)),n=y;e.setEdge(n,r,{weight:f.weight},c)},cQ=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let o=e.node(n);const r=o.edgeLabel;let s;o.edgeObj&&e.setEdgeObj(o.edgeObj,r);let c=n;for(;o.dummy;)s=e.successors(c)[0],e.removeNode(c),r.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height),c=s,o=e.node(c)})},EM={run:sQ,undo:cQ},wP=e=>{var t;const n={},o=r=>{var s;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let f;return(s=e.outEdges(r))===null||s===void 0||s.forEach(d=>{const _=o(d.w),y=e.edge(d).minlen,b=_-y;b&&(f===void 0||b<f)&&(f=b)}),f||(f=0),c.rank=f,f};(t=e.sources())===null||t===void 0||t.forEach(r=>o(r))},dQ=e=>{var t;const n={};let o;const r=f=>{var d;const _=e.node(f);if(!_)return 0;if(n[f])return _.rank;n[f]=!0;let y;return(d=e.outEdges(f))===null||d===void 0||d.forEach(b=>{const x=r(b.w),M=e.edge(b).minlen,S=x-M;S&&(y===void 0||S<y)&&(y=S)}),y||(y=0),(o===void 0||y<o)&&(o=y),_.rank=y,y};(t=e.sources())===null||t===void 0||t.forEach(f=>{e.node(f)&&r(f)}),o===void 0&&(o=0);const s={},c=(f,d)=>{var _;const y=e.node(f),b=isNaN(y.layer)?d:y.layer;(y.rank===void 0||y.rank<b)&&(y.rank=b),!s[f]&&(s[f]=!0,(_=e.outEdges(f))===null||_===void 0||_.map(x=>{c(x.w,b+e.edge(x).minlen)}))};e.nodes().forEach(f=>{const d=e.node(f);d&&(isNaN(d.layer)?d.rank-=o:c(f,d.layer))})},qf=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,fQ=e=>{const t=new Cd({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});let r,s;for(;pQ(t,e)<o;)r=EP(t,e),s=t.hasNode(r.v)?qf(e,r):-qf(e,r),OP(t,e,s);return t},pQ=(e,t)=>{const n=o=>{t.nodeEdges(o).forEach(r=>{const s=r.v,c=o===s?r.w:s;!e.hasNode(c)&&!qf(t,r)&&(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},hQ=e=>{const t=new Cd({directed:!1}),n=e.nodes()[0],o=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,s;for(;vQ(t,e)<o;)r=EP(t,e),s=t.hasNode(r.v)?qf(e,r):-qf(e,r),OP(t,e,s);return t},vQ=(e,t)=>{const n=o=>{var r;(r=t.nodeEdges(o))===null||r===void 0||r.forEach(s=>{const c=s.v,f=o===c?s.w:c;!e.hasNode(f)&&(t.node(f).layer!==void 0||!qf(t,s))&&(e.setNode(f,{}),e.setEdge(o,f,{}),n(f))})};return e.nodes().forEach(n),e.nodeCount()},EP=(e,t)=>UE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?qf(t,n):1/0),OP=(e,t,n)=>{e.nodes().forEach(o=>{t.node(o).rank||(t.node(o).rank=0),t.node(o).rank+=n})},{preorder:mQ,postorder:yQ}=WJ,gQ=e=>{const t=rQ(e);wP(t);const n=fQ(t);xP(n),SP(n,t);let o,r;for(;o=wQ(n);)r=EQ(n,t,o),OQ(n,t,o,r)},SP=(e,t)=>{let n=yQ(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(o=>{_Q(e,t,o)})},_Q=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=bQ(e,t,n)},bQ=(e,t,n)=>{var o;const s=e.node(n).parent;let c=!0,f=t.edgeFromArgs(n,s),d=0;return f||(c=!1,f=t.edgeFromArgs(s,n)),d=f.weight,(o=t.nodeEdges(n))===null||o===void 0||o.forEach(_=>{const y=_.v===n,b=y?_.w:_.v;if(b!==s){const x=y===c,M=t.edge(_).weight;if(d+=x?M:-M,xQ(e,n,b)){const S=e.edgeFromArgs(n,b).cutvalue;d+=x?-S:S}}}),d},xP=(e,t=e.nodes()[0])=>{MP(e,{},1,t)},MP=(e,t,n,o,r)=>{var s;const c=n;let f=n;const d=e.node(o);return t[o]=!0,(s=e.neighbors(o))===null||s===void 0||s.forEach(_=>{t[_]||(f=MP(e,t,f,_,o))}),d.low=c,d.lim=f++,r?d.parent=r:delete d.parent,f},wQ=e=>e.edges().find(t=>e.edge(t).cutvalue<0),EQ=(e,t,n)=>{let o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);const s=e.node(o),c=e.node(r);let f=s,d=!1;s.lim>c.lim&&(f=c,d=!0);const _=t.edges().filter(y=>d===OM(e,e.node(y.v),f)&&d!==OM(e,e.node(y.w),f));return UE(_,y=>qf(t,y))},OQ=(e,t,n,o)=>{const r=n.v,s=n.w;e.removeEdge(r,s),e.setEdge(o.v,o.w,{}),xP(e),SP(e,t),SQ(e,t)},SQ=(e,t)=>{const n=e.nodes().find(r=>{var s;return!(!((s=t.node(r))===null||s===void 0)&&s.parent)});let o=mQ(e,n);o=o==null?void 0:o.slice(1),o==null||o.forEach(r=>{const s=e.node(r).parent;let c=t.edgeFromArgs(r,s),f=!1;c||(c=t.edgeFromArgs(s,r),f=!0),t.node(r).rank=t.node(s).rank+(f?c.minlen:-c.minlen)})},xQ=(e,t,n)=>e.hasEdge(t,n),OM=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,MQ=e=>{switch(e.graph().ranker){case"network-simplex":TQ(e);break;case"tight-tree":SM(e);break;case"longest-path":AQ(e);break;default:SM(e)}},AQ=wP,SM=e=>{dQ(e),hQ(e)},TQ=e=>{gQ(e)},kQ=e=>{var t;const n={};let o=0;const r=s=>{var c;const f=o;(c=e.children(s))===null||c===void 0||c.forEach(r),n[s]={low:f,lim:o++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},NQ=(e,t,n,o)=>{const r=[],s=[],c=Math.min(t[n].low,t[o].low),f=Math.max(t[n].lim,t[o].lim);let d,_;d=n;do d=e.parent(d),r.push(d);while(d&&(t[d].low>c||f>t[d].lim));for(_=d,d=o;d&&d!==_;)s.push(d),d=e.parent(d);return{lca:_,path:r.concat(s.reverse())}},PQ=e=>{var t;const n=kQ(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(o=>{var r,s;let c=o,f=e.node(c);const d=f.edgeObj;if(!d)return;const _=NQ(e,n,d.v,d.w),y=_.path,b=_.lca;let x=0,M=y[x],S=!0;for(;c!==d.w;){if(f=e.node(c),S){for(;M!==b&&((r=e.node(M))===null||r===void 0?void 0:r.maxRank)<f.rank;)x++,M=y[x];M===b&&(S=!1)}if(!S){for(;x<y.length-1&&((s=e.node(y[x+1]))===null||s===void 0?void 0:s.minRank)<=f.rank;)x++;M=y[x]}e.setParent(c,M),c=e.successors(c)[0]}})},RQ=e=>{var t;const n=Hv(e,"root",{},"_root"),o=CQ(e);let r=Math.max(...Object.values(o));Math.abs(r)===1/0&&(r=1);const s=r-1,c=2*s+1;e.graph().nestingRoot=n,e.edges().forEach(d=>{e.edge(d).minlen*=c});const f=DQ(e)+1;(t=e.children())===null||t===void 0||t.forEach(d=>{AP(e,n,c,f,s,o,d)}),e.graph().nodeRankFactor=c},AP=(e,t,n,o,r,s,c)=>{const f=e.children(c);if(!(f!=null&&f.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const d=wM(e,"_bt"),_=wM(e,"_bb"),y=e.node(c);e.setParent(d,c),y.borderTop=d,e.setParent(_,c),y.borderBottom=_,f==null||f.forEach(b=>{AP(e,t,n,o,r,s,b);const x=e.node(b),M=x.borderTop?x.borderTop:b,S=x.borderBottom?x.borderBottom:b,E=x.borderTop?o:2*o,w=M!==S?1:r-s[c]+1;e.setEdge(d,M,{minlen:w,weight:E,nestingEdge:!0}),e.setEdge(S,_,{minlen:w,weight:E,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,d,{weight:0,minlen:r+s[c]})},CQ=e=>{var t;const n={},o=(r,s)=>{const c=e.children(r);c==null||c.forEach(f=>o(f,s+1)),n[r]=s};return(t=e.children())===null||t===void 0||t.forEach(r=>o(r,1)),n},DQ=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},jQ=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},xM={run:RQ,cleanup:jQ},IQ=e=>{var t;const n=o=>{const r=e.children(o),s=e.node(o);if(r!=null&&r.length&&r.forEach(c=>n(c)),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let c=s.minRank,f=s.maxRank+1;c<f;c+=1)MM(e,"borderLeft","_bl",o,s,c),MM(e,"borderRight","_br",o,s,c)}};(t=e.children())===null||t===void 0||t.forEach(o=>n(o))},MM=(e,t,n,o,r,s)=>{const c={rank:s,borderType:t,width:0,height:0},f=r[t][s-1],d=Hv(e,"border",c,n);r[t][s]=d,e.setParent(d,o),f&&e.setEdge(f,d,{weight:1})},LQ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&TP(e)},$Q=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&FQ(e),(n==="lr"||n==="rl")&&(VQ(e),TP(e))},TP=e=>{e.nodes().forEach(t=>{AM(e.node(t))}),e.edges().forEach(t=>{AM(e.edge(t))})},AM=e=>{const t=e.width;e.width=e.height,e.height=t},FQ=e=>{e.nodes().forEach(t=>{I1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>I1(r)),o.hasOwnProperty("y")&&I1(o)})},I1=e=>{e!=null&&e.y&&(e.y=-e.y)},VQ=e=>{e.nodes().forEach(t=>{L1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>L1(r)),o.hasOwnProperty("x")&&L1(o)})},L1=e=>{const t=e.x;e.x=e.y,e.y=t},TM={adjust:LQ,undo:$Q};function BQ(e){return Array.isArray(e)}function $w(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],o=1;o<t;o++)n=Math.max(n,e[o]);return n}const kM=function(e){if(BQ(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},NM=e=>{const t={},n=e.nodes().filter(y=>{var b;return!(!((b=e.children(y))===null||b===void 0)&&b.length)}),o=n.map(y=>e.node(y).rank),r=$w(o),s=[];for(let y=0;y<r+1;y++)s.push([]);const c=y=>{var b;if(t.hasOwnProperty(y))return;t[y]=!0;const x=e.node(y);isNaN(x.rank)||s[x.rank].push(y),(b=e.successors(y))===null||b===void 0||b.forEach(M=>c(M))},f=n.sort((y,b)=>e.node(y).rank-e.node(b).rank),_=f.filter(y=>e.node(y).fixorder!==void 0).sort((y,b)=>e.node(y).fixorder-e.node(b).fixorder);return _==null||_.forEach(y=>{isNaN(e.node(y).rank)||s[e.node(y).rank].push(y),t[y]=!0}),f==null||f.forEach(c),s},UQ=(e,t,n)=>{const o=oQ(n,n.map((y,b)=>b)),s=t.map(y=>{var b;const x=(b=e.outEdges(y))===null||b===void 0?void 0:b.map(M=>({pos:o[M.w]||0,weight:e.edge(M).weight}));return x==null?void 0:x.sort((M,S)=>M.pos-S.pos)}).flat().filter(y=>y!==void 0);let c=1;for(;c<n.length;)c<<=1;const f=2*c-1;c-=1;const d=Array(f).fill(0,0,f);let _=0;return s==null||s.forEach(y=>{if(y){let b=y.pos+c;d[b]+=y.weight;let x=0;for(;b>0;)b%2&&(x+=d[b+1]),b=b-1>>1,d[b]+=y.weight;_+=y.weight*x}}),_},PM=(e,t)=>{let n=0;for(let o=1;o<(t==null?void 0:t.length);o+=1)n+=UQ(e,t[o-1],t[o]);return n},GQ=(e,t,n)=>{const o=zQ(e),r=new Cd({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{var c;const f=e.node(s),d=e.parent(s);(f.rank===t||f.minRank<=t&&t<=f.maxRank)&&(r.setNode(s),r.setParent(s,d||o),(c=e[n](s))===null||c===void 0||c.forEach(_=>{const y=_.v===s?_.w:_.v,b=r.edgeFromArgs(y,s),x=b!==void 0?b.weight:0;r.setEdge(y,s,{weight:e.edge(_).weight+x})}),f.hasOwnProperty("minRank")&&r.setNode(s,{borderLeft:f.borderLeft[t],borderRight:f.borderRight[t]}))}),r},zQ=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},HQ=(e,t,n)=>{const o={};let r;n==null||n.forEach(s=>{let c=e.parent(s),f,d;for(;c;){if(f=e.parent(c),f?(d=o[f],o[f]=c):(d=r,r=c),d&&d!==c){t.setEdge(d,c);return}c=f}})},WQ=(e,t)=>t.map(n=>{const o=e.inEdges(n);if(!(o!=null&&o.length))return{v:n};{const r={sum:0,weight:0};return o==null||o.forEach(s=>{const c=e.edge(s),f=e.node(s.v);r.sum+=c.weight*f.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),XQ=(e,t)=>{var n,o,r;const s={};e==null||e.forEach((f,d)=>{s[f.v]={i:d,indegree:0,in:[],out:[],vs:[f.v]};const _=s[f.v];f.barycenter!==void 0&&(_.barycenter=f.barycenter,_.weight=f.weight)}),(n=t.edges())===null||n===void 0||n.forEach(f=>{const d=s[f.v],_=s[f.w];d!==void 0&&_!==void 0&&(_.indegree++,d.out.push(s[f.w]))});const c=(r=(o=Object.values(s)).filter)===null||r===void 0?void 0:r.call(o,f=>!f.indegree);return qQ(c)},qQ=e=>{var t,n;const o=[],r=d=>_=>{_.merged||(_.barycenter===void 0||d.barycenter===void 0||_.barycenter>=d.barycenter)&&YQ(d,_)},s=d=>_=>{_.in.push(d),--_.indegree===0&&e.push(_)};for(;e!=null&&e.length;){const d=e.pop();o.push(d),(t=d.in.reverse())===null||t===void 0||t.forEach(_=>r(d)(_)),(n=d.out)===null||n===void 0||n.forEach(_=>s(d)(_))}const c=o.filter(d=>!d.merged),f=["vs","i","barycenter","weight"];return c.map(d=>{const _={};return f==null||f.forEach(y=>{d[y]!==void 0&&(_[y]=d[y])}),_})},YQ=(e,t)=>{var n;let o=0,r=0;e.weight&&(o+=e.barycenter*e.weight,r+=e.weight),t.weight&&(o+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=o/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},KQ=(e,t,n,o)=>{const r=lQ(e,x=>{const M=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return o?!M&&x.hasOwnProperty("barycenter"):M||x.hasOwnProperty("barycenter")}),s=r.lhs,c=r.rhs.sort((x,M)=>-x.i- -M.i),f=[];let d=0,_=0,y=0;s==null||s.sort(ZQ(!!t,!!n)),y=RM(f,c,y),s==null||s.forEach(x=>{var M;y+=(M=x.vs)===null||M===void 0?void 0:M.length,f.push(x.vs),d+=x.barycenter*x.weight,_+=x.weight,y=RM(f,c,y)});const b={vs:f.flat()};return _&&(b.barycenter=d/_,b.weight=_),b},RM=(e,t,n)=>{let o=n,r;for(;t.length&&(r=t[t.length-1]).i<=o;)t.pop(),e==null||e.push(r.vs),o++;return o},ZQ=(e,t)=>(n,o)=>{if(n.fixorder!==void 0&&o.fixorder!==void 0)return n.fixorder-o.fixorder;if(n.barycenter<o.barycenter)return-1;if(n.barycenter>o.barycenter)return 1;if(t&&n.order!==void 0&&o.order!==void 0){if(n.order<o.order)return-1;if(n.order>o.order)return 1}return e?o.i-n.i:n.i-o.i},kP=(e,t,n,o,r,s)=>{var c,f,d,_;let y=e.children(t);const b=e.node(t),x=b?b.borderLeft:void 0,M=b?b.borderRight:void 0,S={};x&&(y=y==null?void 0:y.filter(j=>j!==x&&j!==M));const E=WQ(e,y||[]);E==null||E.forEach(j=>{var B;if(!((B=e.children(j.v))===null||B===void 0)&&B.length){const $=kP(e,j.v,n,o,s);S[j.v]=$,$.hasOwnProperty("barycenter")&&QQ(j,$)}});const w=XQ(E,n);JQ(w,S),(c=w.filter(j=>j.vs.length>0))===null||c===void 0||c.forEach(j=>{const B=e.node(j.vs[0]);B&&(j.fixorder=B.fixorder,j.order=B.order)});const C=KQ(w,o,r,s);if(x&&(C.vs=[x,C.vs,M].flat(),!((f=e.predecessors(x))===null||f===void 0)&&f.length)){const j=e.node(((d=e.predecessors(x))===null||d===void 0?void 0:d[0])||""),B=e.node(((_=e.predecessors(M))===null||_===void 0?void 0:_[0])||"");C.hasOwnProperty("barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+j.order+B.order)/(C.weight+2),C.weight+=2}return C},JQ=(e,t)=>{e==null||e.forEach(n=>{var o;const r=(o=n.vs)===null||o===void 0?void 0:o.map(s=>t[s]?t[s].vs:s);n.vs=r.flat()})},QQ=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},eee=(e,t)=>{const n=gP(e),o=[],r=[];for(let y=1;y<n+1;y++)o.push(y);for(let y=n-1;y>-1;y--)r.push(y);const s=CM(e,o,"inEdges"),c=CM(e,r,"outEdges");let f=NM(e);$1(e,f);let d=Number.POSITIVE_INFINITY,_;for(let y=0,b=0;b<4;++y,++b){DM(y%2?s:c,y%4>=2,!1,t),f=Um(e);const x=PM(e,f);x<d&&(b=0,_=Jg(f),d=x)}f=NM(e),$1(e,f);for(let y=0,b=0;b<4;++y,++b){DM(y%2?s:c,y%4>=2,!0,t),f=Um(e);const x=PM(e,f);x<d&&(b=0,_=Jg(f),d=x)}$1(e,_)},CM=(e,t,n)=>t.map(o=>GQ(e,o,n)),DM=(e,t,n,o)=>{const r=new Cd;e==null||e.forEach(s=>{var c;const f=s.graph().root,d=kP(s,f,r,t,n,o);for(let _=0;_<((c=d.vs)===null||c===void 0?void 0:c.length);_++){const y=s.node(d.vs[_]);y&&(y.order=_)}HQ(s,r,d.vs)})},$1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((o,r)=>{e.node(o).order=r})})};class tee extends zv{}const nee=(e,t)=>{const n={},o=(r,s)=>{let c=0,f=0;const d=r.length,_=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((y,b)=>{var x;const M=oee(e,y),S=M?e.node(M).order:d;(M||y===_)&&((x=s.slice(f,b+1))===null||x===void 0||x.forEach(E=>{var w;(w=e.predecessors(E))===null||w===void 0||w.forEach(C=>{var j;const B=e.node(C),$=B.order;($<c||S<$)&&!(B.dummy&&(!((j=e.node(E))===null||j===void 0)&&j.dummy))&&NP(n,C,E)})}),f=b+1,c=S)}),s};return t!=null&&t.length&&t.reduce(o),n},ree=(e,t)=>{const n={};function o(f,d,_,y,b){var x,M;let S;for(let E=d;E<_;E++)S=f[E],!((x=e.node(S))===null||x===void 0)&&x.dummy&&((M=e.predecessors(S))===null||M===void 0||M.forEach(w=>{const C=e.node(w);C.dummy&&(C.order<y||C.order>b)&&NP(n,w,S)}))}function r(f){return JSON.stringify(f.slice(1))}function s(f,d){const _=r(f);d.get(_)||(o(...f),d.set(_,!0))}const c=(f,d)=>{let _=-1,y,b=0;const x=new Map;return d==null||d.forEach((M,S)=>{var E;if(((E=e.node(M))===null||E===void 0?void 0:E.dummy)==="border"){const w=e.predecessors(M)||[];w.length&&(y=e.node(w[0]).order,s([d,b,S,_,y],x),b=S,_=y)}s([d,b,d.length,y,f.length],x)}),d};return t!=null&&t.length&&t.reduce(c),n},oee=(e,t)=>{var n,o;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(o=e.predecessors(t))===null||o===void 0?void 0:o.find(r=>e.node(r).dummy)},NP=(e,t,n)=>{let o=t,r=n;if(o>r){const c=o;o=r,r=c}let s=e[o];s||(e[o]=s={}),s[r]=!0},iee=(e,t,n)=>{let o=t,r=n;if(o>r){const s=t;o=r,r=s}return!!e[o]},aee=(e,t,n,o)=>{const r={},s={},c={};return t==null||t.forEach(f=>{f==null||f.forEach((d,_)=>{r[d]=d,s[d]=d,c[d]=_})}),t==null||t.forEach(f=>{let d=-1;f==null||f.forEach(_=>{let y=o(_);if(y.length){y=y.sort((x,M)=>c[x]-c[M]);const b=(y.length-1)/2;for(let x=Math.floor(b),M=Math.ceil(b);x<=M;++x){const S=y[x];s[_]===_&&d<c[S]&&!iee(n,_,S)&&(s[S]=_,s[_]=r[_]=r[S],d=c[S])}}})}),{root:r,align:s}},lee=(e,t,n,o,r)=>{var s;const c={},f=see(e,t,n,r),d=r?"borderLeft":"borderRight",_=(x,M)=>{let S=f.nodes(),E=S.pop();const w={};for(;E;)w[E]?x(E):(w[E]=!0,S.push(E),S=S.concat(M(E))),E=S.pop()},y=x=>{c[x]=(f.inEdges(x)||[]).reduce((M,S)=>Math.max(M,(c[S.v]||0)+f.edge(S)),0)},b=x=>{const M=(f.outEdges(x)||[]).reduce((E,w)=>Math.min(E,(c[w.w]||0)-f.edge(w)),Number.POSITIVE_INFINITY),S=e.node(x);M!==Number.POSITIVE_INFINITY&&S.borderType!==d&&(c[x]=Math.max(c[x],M))};return _(y,f.predecessors.bind(f)),_(b,f.successors.bind(f)),(s=Object.values(o))===null||s===void 0||s.forEach(x=>{c[x]=c[n[x]]}),c},see=(e,t,n,o)=>{const r=new tee,s=e.graph(),c=fee(s.nodesep,s.edgesep,o);return t==null||t.forEach(f=>{let d;f==null||f.forEach(_=>{const y=n[_];if(r.setNode(y),d){const b=n[d],x=r.edgeFromArgs(b,y);r.setEdge(b,y,Math.max(c(e,_,d),x||0))}d=_})}),r},uee=(e,t)=>UE(Object.values(t),n=>{var o;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(o=Object.keys(n))===null||o===void 0||o.forEach(c=>{const f=n[c],d=pee(e,c)/2;r=Math.max(f+d,r),s=Math.min(f-d,s)}),r-s});function cee(e,t){const n=Object.values(t),o=kM(n),r=$w(n);["u","d"].forEach(s=>{["l","r"].forEach(c=>{const f=s+c,d=e[f];let _;if(d===t)return;const y=Object.values(d);_=c==="l"?o-kM(y):r-$w(y),_&&(e[f]={},Object.keys(d).forEach(b=>{e[f][b]=d[b]+_}))})})}const dee=(e,t)=>{const n={};return Object.keys(e.ul).forEach(o=>{if(t)n[o]=e[t.toLowerCase()][o];else{const r=Object.values(e).map(s=>s[o]);n[o]=(r[0]+r[1])/2}}),n},fee=(e,t,n)=>(o,r,s)=>{const c=o.node(r),f=o.node(s);let d=0,_;if(d+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":_=-c.width/2;break;case"r":_=c.width/2;break}if(_&&(d+=n?_:-_),_=0,d+=(c.dummy?t:e)/2,d+=(f.dummy?t:e)/2,d+=f.width/2,f.labelpos)switch((f.labelpos||"").toLowerCase()){case"l":_=f.width/2;break;case"r":_=-f.width/2;break}return _&&(d+=n?_:-_),_=0,d},pee=(e,t)=>e.node(t).width||0,hee=e=>{const t=Um(e),n=e.graph().ranksep;let o=0;t==null||t.forEach(r=>{const s=r.map(f=>e.node(f).height),c=Math.max(...s,0);r==null||r.forEach(f=>{e.node(f).y=o+c/2}),o+=c+n})},vee=e=>{const t=Um(e),n=Object.assign(nee(e,t),ree(e,t)),o={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(f=>{f==="r"&&(r=r.map(b=>Object.values(b).reverse()));const d=(c==="u"?e.predecessors:e.successors).bind(e),_=aee(e,r,n,d),y=lee(e,r,_.root,_.align,f==="r");f==="r"&&Object.keys(y).forEach(b=>y[b]=-y[b]),o[c+f]=y})});const s=uee(e,o);return s&&cee(o,s),dee(o,e.graph().align)},mee=e=>{var t;const n=yP(e);hee(n);const o=vee(n);(t=Object.keys(o))===null||t===void 0||t.forEach(r=>{n.node(r).x=o[r]})},yee=(e,t)=>{const o=e.nodes().filter(c=>{var f;return!(!((f=e.children(c))===null||f===void 0)&&f.length)}).map(c=>e.node(c).rank),r=Math.max(...o),s=[];for(let c=0;c<r+1;c++)s[c]=[];t==null||t.forEach(c=>{const f=e.node(c);!f||f!=null&&f.dummy||isNaN(f.rank)||(f.fixorder=s[f.rank].length,s[f.rank].push(c))})},gee=(e,t)=>{const n=t&&t.debugTiming?_P:bP;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{bee(e,t.prevGraph)});const o=n("  buildLayoutGraph",()=>Tee(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{kee(o)});try{n("  runLayout",()=>{_ee(o,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{wee(e,o)})})},_ee=(e,t,n)=>{t("    removeSelfEdges",()=>{$ee(e)}),t("    acyclic",()=>{_M.run(e)}),t("    nestingGraph.run",()=>{xM.run(e)}),t("    rank",()=>{MQ(yP(e))}),t("    injectEdgeLabelProxies",()=>{Nee(e)}),t("    removeEmptyRanks",()=>{aQ(e)}),t("    nestingGraph.cleanup",()=>{xM.cleanup(e)}),t("    normalizeRanks",()=>{iQ(e)}),t("    assignRankMinMax",()=>{Pee(e)}),t("    removeEdgeLabelProxies",()=>{Ree(e)}),t("    normalize.run",()=>{EM.run(e)}),t("    parentDummyChains",()=>{PQ(e)}),t("    addBorderSegments",()=>{IQ(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{yee(e,n.nodeOrder)}),t("    order",()=>{eee(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{Fee(e)}),t("    adjustCoordinateSystem",()=>{TM.adjust(e)}),t("    position",()=>{mee(e)}),t("    positionSelfEdges",()=>{Vee(e)}),t("    removeBorderNodes",()=>{Lee(e)}),t("    normalize.undo",()=>{EM.undo(e)}),t("    fixupEdgeLabelCoords",()=>{jee(e)}),t("    undoCoordinateSystem",()=>{TM.undo(e)}),t("    translateGraph",()=>{Cee(e)}),t("    assignNodeIntersects",()=>{Dee(e)}),t("    reversePoints",()=>{Iee(e)}),t("    acyclic.undo",()=>{_M.undo(e)})},bee=(e,t)=>{e.nodes().forEach(n=>{const o=e.node(n),r=t.node(n);r!==void 0?(o.fixorder=r._order,delete r._order):delete o.fixorder})},wee=(e,t)=>{e.nodes().forEach(n=>{var o;const r=e.node(n);if(r){const s=t.node(n);r.x=s.x,r.y=s.y,r._order=s.order,r._rank=s.rank,!((o=t.children(n))===null||o===void 0)&&o.length&&(r.width=s.width,r.height=s.height)}}),e.edges().forEach(n=>{const o=e.edge(n),r=t.edge(n);o.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},Eee=["nodesep","edgesep","ranksep","marginx","marginy"],Oee={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},F1=["acyclicer","ranker","rankdir","align"],See=["width","height","layer","fixorder"],xee={width:0,height:0},Mee=["minlen","weight","width","height","labeloffset"],Aee={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},V1=["labelpos"],Tee=e=>{const t=new Cd({multigraph:!0,compound:!0}),n=U1(e.graph()),o={};return F1==null||F1.forEach(r=>{n[r]!==void 0&&(o[r]=n[r])}),t.setGraph(Object.assign({},Oee,B1(n,Eee),o)),e.nodes().forEach(r=>{const s=U1(e.node(r)),c=Object.assign(Object.assign({},xee),s),f=B1(c,See);t.setNode(r,f),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const s=U1(e.edge(r)),c={};V1==null||V1.forEach(f=>{s[f]!==void 0&&(c[f]=s[f])}),t.setEdgeObj(r,Object.assign({},Aee,B1(s,Mee),c))}),t},kee=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const o=e.node(n);isNaN(o.layer)||o.layer||(o.layer=0)}),e.edges().forEach(n=>{var o;const r=e.edge(n);r.minlen*=2,((o=r.labelpos)===null||o===void 0?void 0:o.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},Nee=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const o=e.node(t.v),r=e.node(t.w),s={e:t,rank:(r.rank-o.rank)/2+o.rank};Hv(e,"edge-proxy",s,"_ep")}})},Pee=e=>{let t=0;e.nodes().forEach(n=>{var o,r;const s=e.node(n);s.borderTop&&(s.minRank=(o=e.node(s.borderTop))===null||o===void 0?void 0:o.rank,s.maxRank=(r=e.node(s.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,s.maxRank||-1/0))}),e.graph().maxRank=t},Ree=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},Cee=e=>{let t,n=0,o,r=0;const s=e.graph(),c=s.marginx||0,f=s.marginy||0,d=_=>{if(!_)return;const y=_.x,b=_.y,x=_.width,M=_.height;!isNaN(y)&&!isNaN(x)&&(t===void 0&&(t=y-x/2),t=Math.min(t,y-x/2),n=Math.max(n,y+x/2)),!isNaN(b)&&!isNaN(M)&&(o===void 0&&(o=b-M/2),o=Math.min(o,b-M/2),r=Math.max(r,b+M/2))};e.nodes().forEach(_=>{d(e.node(_))}),e.edges().forEach(_=>{const y=e.edge(_);y!=null&&y.hasOwnProperty("x")&&d(y)}),t-=c,o-=f,e.nodes().forEach(_=>{const y=e.node(_);y&&(y.x-=t,y.y-=o)}),e.edges().forEach(_=>{var y;const b=e.edge(_);(y=b.points)===null||y===void 0||y.forEach(x=>{x.x-=t,x.y-=o}),b.hasOwnProperty("x")&&(b.x-=t),b.hasOwnProperty("y")&&(b.y-=o)}),s.width=n-t+c,s.height=r-o+f},Dee=e=>{e.edges().forEach(t=>{const n=e.edge(t),o=e.node(t.v),r=e.node(t.w);let s,c;n.points?(s=n.points[0],c=n.points[n.points.length-1]):(n.points=[],s=r,c=o),n.points.unshift(bM(o,s)),n.points.push(bM(r,c))})},jee=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},Iee=e=>{e.edges().forEach(t=>{var n;const o=e.edge(t);o.reversed&&((n=o.points)===null||n===void 0||n.reverse())})},Lee=e=>{e.nodes().forEach(t=>{var n,o,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const s=e.node(t),c=e.node(s.borderTop),f=e.node(s.borderBottom),d=e.node(s.borderLeft[((o=s.borderLeft)===null||o===void 0?void 0:o.length)-1]),_=e.node(s.borderRight[((r=s.borderRight)===null||r===void 0?void 0:r.length)-1]);s.width=Math.abs((_==null?void 0:_.x)-(d==null?void 0:d.x))||10,s.height=Math.abs((f==null?void 0:f.y)-(c==null?void 0:c.y))||10,s.x=((d==null?void 0:d.x)||0)+s.width/2,s.y=((c==null?void 0:c.y)||0)+s.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},$ee=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},Fee=e=>{const t=Um(e);t==null||t.forEach(n=>{let o=0;n==null||n.forEach((r,s)=>{var c;const f=e.node(r);f.order=s+o,(c=f.selfEdges)===null||c===void 0||c.forEach(d=>{Hv(e,"selfedge",{width:d.label.width,height:d.label.height,rank:f.rank,order:s+ ++o,e:d.e,label:d.label},"_se")}),delete f.selfEdges})})},Vee=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const o=e.node(n.e.v),r=o.x+o.width/2,s=o.y,c=n.x-r,f=o.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:s-f},{x:r+5*c/6,y:s-f},{y:s,x:r+c},{x:r+5*c/6,y:s+f},{x:r+2*c/3,y:s+f}],n.label.x=n.x,n.label.y=n.y}})},B1=(e,t)=>{const n={};return t==null||t.forEach(o=>{e[o]!==void 0&&(n[o]=+e[o])}),n},U1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},Bee={layout:gee,util:{time:_P,notime:bP}};class Uee extends aJ{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const o=this,{nodes:r}=o,s=r.find(c=>c.id===n);return s?s.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,o,r;const s=this,{nodes:c,nodeSize:f,rankdir:d,combos:_,begin:y,radial:b,comboEdges:x=[],vedges:M=[]}=s;if(!c)return;const S=s.edges||[],E=new Cd({multigraph:!0,compound:!0});s.nodeMap={};const w={};c.forEach(J=>{s.nodeMap[J.id]=J,J.comboId&&(w[J.comboId]=w[J.comboId]||[],w[J.comboId].push(J.id))});let C=[];const j={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(J=>{j[J]=!0,C.push(s.nodeMap[J])}),c.forEach(J=>{j[J.id]||C.push(J)})):C=c;let B;f?uM(f)?B=()=>f:B=()=>[f,f]:B=J=>J.size?uM(J.size)?J.size:cP(J.size)?[J.size.width||40,J.size.height||40]:[J.size,J.size]:[40,40];const $=cM(s.ranksep,50,s.ranksepFunc),U=cM(s.nodesep,50,s.nodesepFunc);let I=U,F=$;(d==="LR"||d==="RL")&&(I=$,F=U),E.setDefaultEdgeLabel(()=>({})),E.setGraph(s);const Z={};this.sortByCombo&&_&&_.forEach(J=>{if(Z[J.id]=J,J.collapsed){const q=B(J),ne=F(J),oe=I(J),Me=q[0]+2*oe,Pe=q[1]+2*ne;E.setNode(J.id,{width:Me,height:Pe})}J.parentId&&(Z[J.parentId]||E.setNode(J.parentId,{}),E.setParent(J.id,J.parentId))}),C.filter(J=>J.layout!==!1).forEach(J=>{const q=B(J),ne=F(J),oe=I(J),Me=q[0]+2*oe,Pe=q[1]+2*ne,Ee=J.layer;Zg(Ee)?E.setNode(J.id,{width:Me,height:Pe,layer:Ee}):E.setNode(J.id,{width:Me,height:Pe}),this.sortByCombo&&J.comboId&&(Z[J.comboId]||(Z[J.comboId]={id:J.comboId},E.setNode(J.comboId,{})),E.setParent(J.id,J.comboId))}),S.forEach(J=>{const q=iv(J,"source"),ne=iv(J,"target");this.layoutNode(q)&&this.layoutNode(ne)&&E.setEdge(q,ne,{weight:J.weight||1})}),(n=x==null?void 0:x.concat(M||[]))===null||n===void 0||n.forEach(J=>{var q,ne;const{source:oe,target:Me}=J,Pe=!((q=Z[oe])===null||q===void 0)&&q.collapsed?[oe]:w[oe]||[oe],Ee=!((ne=Z[Me])===null||ne===void 0)&&ne.collapsed?[Me]:w[Me]||[Me];Pe.forEach(we=>{Ee.forEach(Be=>{E.setEdge(we,Be,{weight:J.weight||1})})})});let G;!((o=s.preset)===null||o===void 0)&&o.nodes&&(G=new Cd({multigraph:!0,compound:!0}),s.preset.nodes.forEach(J=>{G==null||G.setNode(J.id,J)})),Bee.layout(E,{prevGraph:G,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});const W=[0,0];if(y){let J=1/0,q=1/0;E.nodes().forEach(ne=>{const oe=E.node(ne);J>oe.x&&(J=oe.x),q>oe.y&&(q=oe.y)}),E.edges().forEach(ne=>{var oe;(oe=E.edge(ne).points)===null||oe===void 0||oe.forEach(Pe=>{J>Pe.x&&(J=Pe.x),q>Pe.y&&(q=Pe.y)})}),W[0]=y[0]-J,W[1]=y[1]-q}const K=d==="LR"||d==="RL";if(b){const{focusNode:J,ranksep:q,getRadialPos:ne}=this,oe=lJ(J)?J:J==null?void 0:J.id,Me=oe?(r=E.node(oe))===null||r===void 0?void 0:r._rank:0,Pe=[],Ee=K?"y":"x",we=K?"height":"width";let Be=1/0,nt=-1/0;E.nodes().forEach(Te=>{const $e=E.node(Te);if(!s.nodeMap[Te])return;const wt=U(s.nodeMap[Te]);if(Me===0)Pe[$e._rank]||(Pe[$e._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Pe[$e._rank].nodes.push(Te),Pe[$e._rank].totalWidth+=wt*2+$e[we],Pe[$e._rank].maxSize<Math.max($e.width,$e.height)&&(Pe[$e._rank].maxSize=Math.max($e.width,$e.height));else{const Zt=$e._rank-Me;if(Zt===0)Pe[Zt]||(Pe[Zt]={nodes:[],totalWidth:0,maxSize:-1/0}),Pe[Zt].nodes.push(Te),Pe[Zt].totalWidth+=wt*2+$e[we],Pe[Zt].maxSize<Math.max($e.width,$e.height)&&(Pe[Zt].maxSize=Math.max($e.width,$e.height));else{const pn=Math.abs(Zt);Pe[pn]||(Pe[pn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Pe[pn].totalWidth+=wt*2+$e[we],Pe[pn].maxSize<Math.max($e.width,$e.height)&&(Pe[pn].maxSize=Math.max($e.width,$e.height)),Zt<0?Pe[pn].left.push(Te):Pe[pn].right.push(Te)}}const Wt=$e[Ee]-$e[we]/2-wt,St=$e[Ee]+$e[we]/2+wt;Wt<Be&&(Be=Wt),St>nt&&(nt=St)});let Ot=q||50;const Qe={},lt=(nt-Be)/.9,dt=[(Be+nt-lt)*.5,(Be+nt+lt)*.5],Tt=(Te,$e,wt=-1/0,Wt=[0,1])=>{let St=wt;return Te.forEach(Zt=>{const pn=E.node(Zt);Qe[Zt]=$e;const{x:An,y:yn}=ne(pn[Ee],dt,lt,$e,Wt);if(!s.nodeMap[Zt])return;s.nodeMap[Zt].x=An+W[0],s.nodeMap[Zt].y=yn+W[1],s.nodeMap[Zt]._order=pn._order;const ht=$(s.nodeMap[Zt]);St<ht&&(St=ht)}),St};let bn=!0;const Ue=0;Pe.forEach(Te=>{var $e,wt,Wt,St,Zt,pn,An;if(!(!(($e=Te==null?void 0:Te.nodes)===null||$e===void 0)&&$e.length)&&!(!((wt=Te==null?void 0:Te.left)===null||wt===void 0)&&wt.length)&&!(!((Wt=Te==null?void 0:Te.right)===null||Wt===void 0)&&Wt.length))return;if(bn&&Te.nodes.length===1){const ht=Te.nodes[0];if(!s.nodeMap[ht])return;s.nodeMap[ht].x=W[0],s.nodeMap[ht].y=W[1],Qe[Te.nodes[0]]=0,Ot=$(s.nodeMap[ht]),bn=!1;return}Ot=Math.max(Ot,Te.totalWidth/(2*Math.PI));let yn=-1/0;if(Me===0||!((St=Te.nodes)===null||St===void 0)&&St.length)yn=Tt(Te.nodes,Ot,yn,[0,1]);else{const ht=((Zt=Te.left)===null||Zt===void 0?void 0:Zt.length)/(((pn=Te.left)===null||pn===void 0?void 0:pn.length)+((An=Te.right)===null||An===void 0?void 0:An.length));yn=Tt(Te.left,Ot,yn,[0,ht]),yn=Tt(Te.right,Ot,yn,[ht+.05,1])}Ot+=yn,bn=!1,Ue-Te.maxSize}),E.edges().forEach(Te=>{var $e,wt,Wt;const St=E.edge(Te),Zt=S.findIndex(pn=>{const An=iv(pn,"source"),yn=iv(pn,"target");return An===Te.v&&yn===Te.w});if(!(Zt<=-1)&&s.edgeLabelSpace&&s.controlPoints&&S[Zt].type!=="loop"){const pn=Ee==="x"?"y":"x",An=($e=St==null?void 0:St.points)===null||$e===void 0?void 0:$e.slice(1,St.points.length-1),yn=[],ht=(wt=E.node(Te.v))===null||wt===void 0?void 0:wt[pn],kn=ht-((Wt=E.node(Te.w))===null||Wt===void 0?void 0:Wt[pn]),Ie=Qe[Te.v],wn=Ie-Qe[Te.w];An==null||An.forEach(nr=>{const le=(nr[pn]-ht)/kn*wn+Ie,rr=ne(nr[Ee],dt,lt,le);yn.push({x:rr.x+W[0],y:rr.y+W[1]})}),S[Zt].controlPoints=yn}})}else{const J=new Set,ne=d==="BT"||d==="RL"?(Ee,we)=>we-Ee:(Ee,we)=>Ee-we;E.nodes().forEach(Ee=>{const we=E.node(Ee);if(!we)return;let Be=this.nodeMap[Ee];Be||(Be=_==null?void 0:_.find(nt=>nt.id===Ee)),Be&&(Be.x=we.x+W[0],Be.y=we.y+W[1],Be._order=we._order,J.add(K?Be.x:Be.y))});const oe=Array.from(J).sort(ne),Me=K?(Ee,we)=>Ee.x!==we.x:(Ee,we)=>Ee.y!==we.y,Pe=K?(Ee,we,Be)=>{const nt=Math.max(we.y,Be.y),Ot=Math.min(we.y,Be.y);return Ee.filter(Qe=>Qe.y<=nt&&Qe.y>=Ot)}:(Ee,we,Be)=>{const nt=Math.max(we.x,Be.x),Ot=Math.min(we.x,Be.x);return Ee.filter(Qe=>Qe.x<=nt&&Qe.x>=Ot)};E.edges().forEach(Ee=>{var we;const Be=E.edge(Ee),nt=S.findIndex(Ot=>{const Qe=iv(Ot,"source"),lt=iv(Ot,"target");return Qe===Ee.v&&lt===Ee.w});if(!(nt<=-1)&&s.edgeLabelSpace&&s.controlPoints&&S[nt].type!=="loop"){(we=Be==null?void 0:Be.points)===null||we===void 0||we.forEach(lt=>{lt.x+=W[0],lt.y+=W[1]});const Ot=s.nodeMap[Ee.v],Qe=s.nodeMap[Ee.w];S[nt].controlPoints=Gee(Be==null?void 0:Be.points,Ot,Qe,oe,K,Me,Pe)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:S}}getRadialPos(t,n,o,r,s=[0,1]){let c=(t-n[0])/o;c=c*(s[1]-s[0])+s[0];const f=c*2*Math.PI;return{x:Math.cos(f)*r,y:Math.sin(f)*r}}getType(){return"dagre"}}const Gee=(e,t,n,o,r,s,c)=>{let f=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:d,y:_}=t,{x:y,y:b}=n;if(r&&(d=t.y,_=t.x,y=n.y,b=n.x),b!==_&&d!==y){const x=o.indexOf(_),M=o[x+1];if(M){const w=f[0],C=r?{x:(_+M)/2,y:(w==null?void 0:w.y)||y}:{x:(w==null?void 0:w.x)||y,y:(_+M)/2};(!w||s(w,C))&&f.unshift(C)}const S=o.indexOf(b),E=Math.abs(S-x);if(E===1)f=c(f,t,n),f.length||f.push(r?{x:(_+b)/2,y:d}:{x:d,y:(_+b)/2});else if(E>1){const w=o[S-1];if(w){const C=f[f.length-1],j=r?{x:(b+w)/2,y:(C==null?void 0:C.y)||y}:{x:(C==null?void 0:C.x)||d,y:(b+w)/2};(!C||s(C,j))&&f.push(j)}}}}return f};var jM,IM,LM,$M;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(jM||(jM={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(IM||(IM={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(LM||(LM={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}($M||($M={}));var fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GE(e,t){return e(t={exports:{}},t.exports),t.exports}var zee=function(){this.__data__=[],this.size=0},Wv=function(e,t){return e===t||e!=e&&t!=t},N_=function(e,t){for(var n=e.length;n--;)if(Wv(e[n][0],t))return n;return-1},Hee=Array.prototype.splice,Wee=function(e){var t=this.__data__,n=N_(t,e);return!(n<0)&&(n==t.length-1?t.pop():Hee.call(t,n,1),--this.size,!0)},Xee=function(e){var t=this.__data__,n=N_(t,e);return n<0?void 0:t[n][1]},qee=function(e){return N_(this.__data__,e)>-1},Yee=function(e,t){var n=this.__data__,o=N_(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};function uv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}uv.prototype.clear=zee,uv.prototype.delete=Wee,uv.prototype.get=Xee,uv.prototype.has=qee,uv.prototype.set=Yee;var P_=uv,Kee=function(){this.__data__=new P_,this.size=0},Zee=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Jee=function(e){return this.__data__.get(e)},Qee=function(e){return this.__data__.has(e)},PP=typeof fg=="object"&&fg&&fg.Object===Object&&fg,ete=typeof self=="object"&&self&&self.Object===Object&&self,Nu=PP||ete||Function("return this")(),Fs=Nu.Symbol,RP=Object.prototype,tte=RP.hasOwnProperty,nte=RP.toString,gm=Fs?Fs.toStringTag:void 0,rte=function(e){var t=tte.call(e,gm),n=e[gm];try{e[gm]=void 0;var o=!0}catch{}var r=nte.call(e);return o&&(t?e[gm]=n:delete e[gm]),r},ote=Object.prototype.toString,ite=function(e){return ote.call(e)},FM=Fs?Fs.toStringTag:void 0,Qf=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":FM&&FM in Object(e)?rte(e):ite(e)},jl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},VM,oy=function(e){if(!jl(e))return!1;var t=Qf(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},G1=Nu["__core-js_shared__"],BM=(VM=/[^.]+$/.exec(G1&&G1.keys&&G1.keys.IE_PROTO||""))?"Symbol(src)_1."+VM:"",ate=function(e){return!!BM&&BM in e},lte=Function.prototype.toString,uh=function(e){if(e!=null){try{return lte.call(e)}catch{}try{return e+""}catch{}}return""},ste=/^\[object .+?Constructor\]$/,ute=Function.prototype,cte=Object.prototype,dte=ute.toString,fte=cte.hasOwnProperty,pte=RegExp("^"+dte.call(fte).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hte=function(e){return!(!jl(e)||ate(e))&&(oy(e)?pte:ste).test(uh(e))},vte=function(e,t){return e==null?void 0:e[t]},ch=function(e,t){var n=vte(e,t);return hte(n)?n:void 0},Gm=ch(Nu,"Map"),zm=ch(Object,"create"),mte=function(){this.__data__=zm?zm(null):{},this.size=0},yte=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},gte=Object.prototype.hasOwnProperty,_te=function(e){var t=this.__data__;if(zm){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return gte.call(t,e)?t[e]:void 0},bte=Object.prototype.hasOwnProperty,wte=function(e){var t=this.__data__;return zm?t[e]!==void 0:bte.call(t,e)},Ete=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zm&&t===void 0?"__lodash_hash_undefined__":t,this};function cv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}cv.prototype.clear=mte,cv.prototype.delete=yte,cv.prototype.get=_te,cv.prototype.has=wte,cv.prototype.set=Ete;var UM=cv,Ote=function(){this.size=0,this.__data__={hash:new UM,map:new(Gm||P_),string:new UM}},Ste=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},R_=function(e,t){var n=e.__data__;return Ste(t)?n[typeof t=="string"?"string":"hash"]:n.map},xte=function(e){var t=R_(this,e).delete(e);return this.size-=t?1:0,t},Mte=function(e){return R_(this,e).get(e)},Ate=function(e){return R_(this,e).has(e)},Tte=function(e,t){var n=R_(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};function dv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}dv.prototype.clear=Ote,dv.prototype.delete=xte,dv.prototype.get=Mte,dv.prototype.has=Ate,dv.prototype.set=Tte;var C_=dv,kte=function(e,t){var n=this.__data__;if(n instanceof P_){var o=n.__data__;if(!Gm||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new C_(o)}return n.set(e,t),this.size=n.size,this};function fv(e){var t=this.__data__=new P_(e);this.size=t.size}fv.prototype.clear=Kee,fv.prototype.delete=Zee,fv.prototype.get=Jee,fv.prototype.has=Qee,fv.prototype.set=kte;var wv=fv,zE=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e},Qg=function(){try{var e=ch(Object,"defineProperty");return e({},"",{}),e}catch{}}(),D_=function(e,t,n){t=="__proto__"&&Qg?Qg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Nte=Object.prototype.hasOwnProperty,j_=function(e,t,n){var o=e[t];Nte.call(e,t)&&Wv(o,n)&&(n!==void 0||t in e)||D_(e,t,n)},iy=function(e,t,n,o){var r=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var f=t[s],d=void 0;d===void 0&&(d=e[f]),r?D_(n,f,d):j_(n,f,d)}return n},Pte=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o},ku=function(e){return e!=null&&typeof e=="object"},GM=function(e){return ku(e)&&Qf(e)=="[object Arguments]"},CP=Object.prototype,Rte=CP.hasOwnProperty,Cte=CP.propertyIsEnumerable,Rv=GM(function(){return arguments}())?GM:function(e){return ku(e)&&Rte.call(e,"callee")&&!Cte.call(e,"callee")},Di=Array.isArray,Dte=function(){return!1},Qp=GE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?Nu.Buffer:void 0,s=(r?r.isBuffer:void 0)||Dte;e.exports=s}),jte=/^(?:0|[1-9]\d*)$/,I_=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&jte.test(e))&&e>-1&&e%1==0&&e<t},HE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},si={};si["[object Float32Array]"]=si["[object Float64Array]"]=si["[object Int8Array]"]=si["[object Int16Array]"]=si["[object Int32Array]"]=si["[object Uint8Array]"]=si["[object Uint8ClampedArray]"]=si["[object Uint16Array]"]=si["[object Uint32Array]"]=!0,si["[object Arguments]"]=si["[object Array]"]=si["[object ArrayBuffer]"]=si["[object Boolean]"]=si["[object DataView]"]=si["[object Date]"]=si["[object Error]"]=si["[object Function]"]=si["[object Map]"]=si["[object Number]"]=si["[object Object]"]=si["[object RegExp]"]=si["[object Set]"]=si["[object String]"]=si["[object WeakMap]"]=!1;var Ite=function(e){return ku(e)&&HE(e.length)&&!!si[Qf(e)]},L_=function(e){return function(t){return e(t)}},Cv=GE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n&&PP.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=s}),zM=Cv&&Cv.isTypedArray,ay=zM?L_(zM):Ite,Lte=Object.prototype.hasOwnProperty,DP=function(e,t){var n=Di(e),o=!n&&Rv(e),r=!n&&!o&&Qp(e),s=!n&&!o&&!r&&ay(e),c=n||o||r||s,f=c?Pte(e.length,String):[],d=f.length;for(var _ in e)!t&&!Lte.call(e,_)||c&&(_=="length"||r&&(_=="offset"||_=="parent")||s&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||I_(_,d))||f.push(_);return f},$te=Object.prototype,$_=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||$te)},jP=function(e,t){return function(n){return e(t(n))}},Fte=jP(Object.keys,Object),Vte=Object.prototype.hasOwnProperty,WE=function(e){if(!$_(e))return Fte(e);var t=[];for(var n in Object(e))Vte.call(e,n)&&n!="constructor"&&t.push(n);return t},$d=function(e){return e!=null&&HE(e.length)&&!oy(e)},ep=function(e){return $d(e)?DP(e):WE(e)},Bte=function(e,t){return e&&iy(t,ep(t),e)},Ute=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},Gte=Object.prototype.hasOwnProperty,zte=function(e){if(!jl(e))return Ute(e);var t=$_(e),n=[];for(var o in e)(o!="constructor"||!t&&Gte.call(e,o))&&n.push(o);return n},dh=function(e){return $d(e)?DP(e,!0):zte(e)},Hte=function(e,t){return e&&iy(t,dh(t),e)},IP=GE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?Nu.Buffer:void 0,s=r?r.allocUnsafe:void 0;e.exports=function(c,f){if(f)return c.slice();var d=c.length,_=s?s(d):new c.constructor(d);return c.copy(_),_}}),LP=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t},$P=function(e,t){for(var n=-1,o=e==null?0:e.length,r=0,s=[];++n<o;){var c=e[n];t(c,n,e)&&(s[r++]=c)}return s},FP=function(){return[]},Wte=Object.prototype.propertyIsEnumerable,HM=Object.getOwnPropertySymbols,XE=HM?function(e){return e==null?[]:(e=Object(e),$P(HM(e),function(t){return Wte.call(e,t)}))}:FP,Xte=function(e,t){return iy(e,XE(e),t)},qE=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e},F_=jP(Object.getPrototypeOf,Object),VP=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)qE(t,XE(e)),e=F_(e);return t}:FP,qte=function(e,t){return iy(e,VP(e),t)},BP=function(e,t,n){var o=t(e);return Di(e)?o:qE(o,n(e))},Fw=function(e){return BP(e,ep,XE)},Yte=function(e){return BP(e,dh,VP)},Vw=ch(Nu,"DataView"),Bw=ch(Nu,"Promise"),Ev=ch(Nu,"Set"),Uw=ch(Nu,"WeakMap"),Kte=uh(Vw),Zte=uh(Gm),Jte=uh(Bw),Qte=uh(Ev),ene=uh(Uw),Yp=Qf;(Vw&&Yp(new Vw(new ArrayBuffer(1)))!="[object DataView]"||Gm&&Yp(new Gm)!="[object Map]"||Bw&&Yp(Bw.resolve())!="[object Promise]"||Ev&&Yp(new Ev)!="[object Set]"||Uw&&Yp(new Uw)!="[object WeakMap]")&&(Yp=function(e){var t=Qf(e),n=t=="[object Object]"?e.constructor:void 0,o=n?uh(n):"";if(o)switch(o){case Kte:return"[object DataView]";case Zte:return"[object Map]";case Jte:return"[object Promise]";case Qte:return"[object Set]";case ene:return"[object WeakMap]"}return t});var eh=Yp,tne=Object.prototype.hasOwnProperty,nne=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&tne.call(e,"index")&&(n.index=e.index,n.input=e.input),n},e_=Nu.Uint8Array,YE=function(e){var t=new e.constructor(e.byteLength);return new e_(t).set(new e_(e)),t},rne=function(e,t){var n=t?YE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},one=/\w*$/,ine=function(e){var t=new e.constructor(e.source,one.exec(e));return t.lastIndex=e.lastIndex,t},WM=Fs?Fs.prototype:void 0,XM=WM?WM.valueOf:void 0,ane=function(e){return XM?Object(XM.call(e)):{}},UP=function(e,t){var n=t?YE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},lne=function(e,t,n){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return YE(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return rne(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return UP(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return ine(e);case"[object Set]":return new o;case"[object Symbol]":return ane(e)}},qM=Object.create,GP=function(){function e(){}return function(t){if(!jl(t))return{};if(qM)return qM(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),zP=function(e){return typeof e.constructor!="function"||$_(e)?{}:GP(F_(e))},sne=function(e){return ku(e)&&eh(e)=="[object Map]"},YM=Cv&&Cv.isMap,une=YM?L_(YM):sne,cne=function(e){return ku(e)&&eh(e)=="[object Set]"},KM=Cv&&Cv.isSet,dne=KM?L_(KM):cne,ti={};ti["[object Arguments]"]=ti["[object Array]"]=ti["[object ArrayBuffer]"]=ti["[object DataView]"]=ti["[object Boolean]"]=ti["[object Date]"]=ti["[object Float32Array]"]=ti["[object Float64Array]"]=ti["[object Int8Array]"]=ti["[object Int16Array]"]=ti["[object Int32Array]"]=ti["[object Map]"]=ti["[object Number]"]=ti["[object Object]"]=ti["[object RegExp]"]=ti["[object Set]"]=ti["[object String]"]=ti["[object Symbol]"]=ti["[object Uint8Array]"]=ti["[object Uint8ClampedArray]"]=ti["[object Uint16Array]"]=ti["[object Uint32Array]"]=!0,ti["[object Error]"]=ti["[object Function]"]=ti["[object WeakMap]"]=!1;var HP=function e(t,n,o,r,s,c){var f,d=1&n,_=2&n,y=4&n;if(f!==void 0)return f;if(!jl(t))return t;var b=Di(t);if(b){if(f=nne(t),!d)return LP(t,f)}else{var x=eh(t),M=x=="[object Function]"||x=="[object GeneratorFunction]";if(Qp(t))return IP(t,d);if(x=="[object Object]"||x=="[object Arguments]"||M&&!s){if(f=_||M?{}:zP(t),!d)return _?qte(t,Hte(f,t)):Xte(t,Bte(f,t))}else{if(!ti[x])return s?t:{};f=lne(t,x,d)}}c||(c=new wv);var S=c.get(t);if(S)return S;c.set(t,f),dne(t)?t.forEach(function(w){f.add(e(w,n,o,w,t,c))}):une(t)&&t.forEach(function(w,C){f.set(C,e(w,n,o,C,t,c))});var E=b?void 0:(y?_?Yte:Fw:_?dh:ep)(t);return zE(E||t,function(w,C){E&&(w=t[C=w]),j_(f,C,e(w,n,o,C,t,c))}),f},fne=function(e){return HP(e,4)},KE=function(e){return function(){return e}},ZE=function(e){return function(t,n,o){for(var r=-1,s=Object(t),c=o(t),f=c.length;f--;){var d=c[++r];if(n(s[d],d,s)===!1)break}return t}}(),JE=function(e,t){return e&&ZE(e,t,ep)},V_=function(e,t){return function(n,o){if(n==null)return n;if(!$d(n))return e(n,o);for(var r=n.length,s=-1,c=Object(n);++s<r&&o(c[s],s,c)!==!1;);return n}}(JE),fh=function(e){return e},WP=function(e){return typeof e=="function"?e:fh},XP=function(e,t){return(Di(e)?zE:V_)(e,WP(t))},qP=XP,pne=function(e,t){var n=[];return V_(e,function(o,r,s){t(o,r,s)&&n.push(o)}),n},hne=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},vne=function(e){return this.__data__.has(e)};function Mg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new C_;++t<n;)this.add(e[t])}Mg.prototype.add=Mg.prototype.push=hne,Mg.prototype.has=vne;var YP=Mg,mne=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1},KP=function(e,t){return e.has(t)},ZP=function(e,t,n,o,r,s){var c=1&n,f=e.length,d=t.length;if(f!=d&&!(c&&d>f))return!1;var _=s.get(e),y=s.get(t);if(_&&y)return _==t&&y==e;var b=-1,x=!0,M=2&n?new YP:void 0;for(s.set(e,t),s.set(t,e);++b<f;){var S=e[b],E=t[b];if(o)var w=c?o(E,S,b,t,e,s):o(S,E,b,e,t,s);if(w!==void 0){if(w)continue;x=!1;break}if(M){if(!mne(t,function(C,j){if(!KP(M,j)&&(S===C||r(S,C,n,o,s)))return M.push(j)})){x=!1;break}}else if(S!==E&&!r(S,E,n,o,s)){x=!1;break}}return s.delete(e),s.delete(t),x},yne=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n},QE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n},ZM=Fs?Fs.prototype:void 0,z1=ZM?ZM.valueOf:void 0,gne=function(e,t,n,o,r,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new e_(e),new e_(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Wv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=yne;case"[object Set]":var d=1&o;if(f||(f=QE),e.size!=t.size&&!d)return!1;var _=c.get(e);if(_)return _==t;o|=2,c.set(e,t);var y=ZP(f(e),f(t),o,r,s,c);return c.delete(e),y;case"[object Symbol]":if(z1)return z1.call(e)==z1.call(t)}return!1},_ne=Object.prototype.hasOwnProperty,bne=function(e,t,n,o,r,s){var c=1&n,f=Fw(e),d=f.length;if(d!=Fw(t).length&&!c)return!1;for(var _=d;_--;){var y=f[_];if(!(c?y in t:_ne.call(t,y)))return!1}var b=s.get(e),x=s.get(t);if(b&&x)return b==t&&x==e;var M=!0;s.set(e,t),s.set(t,e);for(var S=c;++_<d;){var E=e[y=f[_]],w=t[y];if(o)var C=c?o(w,E,y,t,e,s):o(E,w,y,e,t,s);if(!(C===void 0?E===w||r(E,w,n,o,s):C)){M=!1;break}S||(S=y=="constructor")}if(M&&!S){var j=e.constructor,B=t.constructor;j==B||!("constructor"in e)||!("constructor"in t)||typeof j=="function"&&j instanceof j&&typeof B=="function"&&B instanceof B||(M=!1)}return s.delete(e),s.delete(t),M},JM=Object.prototype.hasOwnProperty,wne=function(e,t,n,o,r,s){var c=Di(e),f=Di(t),d=c?"[object Array]":eh(e),_=f?"[object Array]":eh(t),y=(d=d=="[object Arguments]"?"[object Object]":d)=="[object Object]",b=(_=_=="[object Arguments]"?"[object Object]":_)=="[object Object]",x=d==_;if(x&&Qp(e)){if(!Qp(t))return!1;c=!0,y=!1}if(x&&!y)return s||(s=new wv),c||ay(e)?ZP(e,t,n,o,r,s):gne(e,t,d,n,o,r,s);if(!(1&n)){var M=y&&JM.call(e,"__wrapped__"),S=b&&JM.call(t,"__wrapped__");if(M||S){var E=M?e.value():e,w=S?t.value():t;return s||(s=new wv),r(E,w,n,o,s)}}return!!x&&(s||(s=new wv),bne(e,t,n,o,r,s))},JP=function e(t,n,o,r,s){return t===n||(t==null||n==null||!ku(t)&&!ku(n)?t!=t&&n!=n:wne(t,n,o,r,e,s))},Ene=function(e,t,n,o){var r=n.length,s=r;if(e==null)return!s;for(e=Object(e);r--;){var c=n[r];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<s;){var f=(c=n[r])[0],d=e[f],_=c[1];if(c[2]){if(d===void 0&&!(f in e))return!1}else{var y=new wv,b;if(!(b===void 0?JP(_,d,3,o,y):b))return!1}}return!0},QP=function(e){return e==e&&!jl(e)},One=function(e){for(var t=ep(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,QP(r)]}return t},eR=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},Sne=function(e){var t=One(e);return t.length==1&&t[0][2]?eR(t[0][0],t[0][1]):function(n){return n===e||Ene(n,e,t)}},th=function(e){return typeof e=="symbol"||ku(e)&&Qf(e)=="[object Symbol]"},xne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mne=/^\w*$/,e2=function(e,t){if(Di(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!th(e))||Mne.test(e)||!xne.test(e)||t!=null&&e in Object(t)};function t2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],s=n.cache;if(s.has(r))return s.get(r);var c=e.apply(this,o);return n.cache=s.set(r,c)||s,c};return n.cache=new(t2.Cache||C_),n}t2.Cache=C_;var Ane=t2,Tne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kne=/\\(\\)?/g,Nne=function(e){var t=Ane(e,function(o){return n.size===500&&n.clear(),o}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Tne,function(n,o,r,s){t.push(r?s.replace(kne,"$1"):o||n)}),t}),Ov=function(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},QM=Fs?Fs.prototype:void 0,eA=QM?QM.toString:void 0,Pne=function e(t){if(typeof t=="string")return t;if(Di(t))return Ov(t,e)+"";if(th(t))return eA?eA.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},tR=function(e){return e==null?"":Pne(e)},B_=function(e,t){return Di(e)?e:e2(e,t)?[e]:Nne(tR(e))},ly=function(e){if(typeof e=="string"||th(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},U_=function(e,t){for(var n=0,o=(t=B_(t,e)).length;e!=null&&n<o;)e=e[ly(t[n++])];return n&&n==o?e:void 0},Rne=function(e,t,n){var o=e==null?void 0:U_(e,t);return o===void 0?n:o},Cne=function(e,t){return e!=null&&t in Object(e)},nR=function(e,t,n){for(var o=-1,r=(t=B_(t,e)).length,s=!1;++o<r;){var c=ly(t[o]);if(!(s=e!=null&&n(e,c)))break;e=e[c]}return s||++o!=r?s:!!(r=e==null?0:e.length)&&HE(r)&&I_(c,r)&&(Di(e)||Rv(e))},rR=function(e,t){return e!=null&&nR(e,t,Cne)},Dne=function(e,t){return e2(e)&&QP(t)?eR(ly(e),t):function(n){var o=Rne(n,e);return o===void 0&&o===t?rR(n,e):JP(t,o,3)}},oR=function(e){return function(t){return t==null?void 0:t[e]}},jne=function(e){return function(t){return U_(t,e)}},Ine=function(e){return e2(e)?oR(ly(e)):jne(e)},Fd=function(e){return typeof e=="function"?e:e==null?fh:typeof e=="object"?Di(e)?Dne(e[0],e[1]):Sne(e):Ine(e)},iR=function(e,t){return(Di(e)?$P:pne)(e,Fd(t))},Lne=Object.prototype.hasOwnProperty,$ne=function(e,t){return e!=null&&Lne.call(e,t)},aR=function(e,t){return e!=null&&nR(e,t,$ne)},Fne=Object.prototype.hasOwnProperty,Vne=function(e){if(e==null)return!0;if($d(e)&&(Di(e)||typeof e=="string"||typeof e.splice=="function"||Qp(e)||ay(e)||Rv(e)))return!e.length;var t=eh(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if($_(e))return!WE(e).length;for(var n in e)if(Fne.call(e,n))return!1;return!0},lR=function(e){return e===void 0},sR=function(e,t){var n=-1,o=$d(e)?Array(e.length):[];return V_(e,function(r,s,c){o[++n]=t(r,s,c)}),o},uR=function(e,t){return(Di(e)?Ov:sR)(e,Fd(t))},Bne=function(e,t,n,o){var r=-1,s=e==null?0:e.length;for(o&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n},Une=function(e,t,n,o,r){return r(e,function(s,c,f){n=o?(o=!1,s):t(n,s,c,f)}),n},cR=function(e,t,n){var o=Di(e)?Bne:Une,r=arguments.length<3;return o(e,Fd(t),n,r,V_)},Gne=function(e){return typeof e=="string"||!Di(e)&&ku(e)&&Qf(e)=="[object String]"},zne=oR("length"),Hne=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Wne=function(e){return Hne.test(e)},Xne="[\\ud800-\\udfff]",Gw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",zw="\\ud83c[\\udffb-\\udfff]",dR="[^\\ud800-\\udfff]",fR="(?:\\ud83c[\\udde6-\\uddff]){2}",pR="[\\ud800-\\udbff][\\udc00-\\udfff]",tA="(?:"+Gw+"|"+zw+")?",qne="[\\ufe0e\\ufe0f]?"+tA+("(?:\\u200d(?:"+[dR,fR,pR].join("|")+")[\\ufe0e\\ufe0f]?"+tA+")*"),Yne="(?:"+[dR+Gw+"?",Gw,fR,pR,Xne].join("|")+")",nA=RegExp(zw+"(?="+zw+")|"+Yne+qne,"g"),Kne=function(e){for(var t=nA.lastIndex=0;nA.test(e);)++t;return t},Zne=function(e){return Wne(e)?Kne(e):zne(e)},Jne=function(e){if(e==null)return 0;if($d(e))return Gne(e)?Zne(e):e.length;var t=eh(e);return t=="[object Map]"||t=="[object Set]"?e.size:WE(e).length},Qne=function(e,t,n){var o=Di(e),r=o||Qp(e)||ay(e);if(t=Fd(t),n==null){var s=e&&e.constructor;n=r?o?new s:[]:jl(e)&&oy(s)?GP(F_(e)):{}}return(r?zE:JE)(e,function(c,f,d){return t(n,c,f,d)}),n},rA=Fs?Fs.isConcatSpreadable:void 0,ere=function(e){return Di(e)||Rv(e)||!!(rA&&e&&e[rA])},n2=function(t,n,o,r,s){var c=-1,f=t.length;for(o||(o=ere),s||(s=[]);++c<f;){var d=t[c];o(d)?qE(s,d):r||(s[s.length]=d)}return s},tre=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},oA=Math.max,hR=function(e,t,n){return t=oA(t===void 0?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=oA(o.length-t,0),c=Array(s);++r<s;)c[r]=o[t+r];r=-1;for(var f=Array(t+1);++r<t;)f[r]=o[r];return f[t]=n(c),tre(e,this,f)}},nre=Qg?function(e,t){return Qg(e,"toString",{configurable:!0,enumerable:!1,value:KE(t),writable:!0})}:fh,rre=Date.now,vR=function(e){var t=0,n=0;return function(){var o=rre(),r=16-(o-n);if(n=o,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(nre),G_=function(e,t){return vR(hR(e,t,fh),e+"")},mR=function(e,t,n,o){for(var r=e.length,s=n+-1;++s<r;)if(t(e[s],s,e))return s;return-1},ore=function(e){return e!=e},ire=function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1},are=function(e,t,n){return t==t?ire(e,t,n):mR(e,ore,n)},lre=function(e,t){return!!(e!=null&&e.length)&&are(e,t,0)>-1},sre=function(){},ure=Ev&&1/QE(new Ev([,-0]))[1]==1/0?function(e){return new Ev(e)}:sre,cre=function(e,t,n){var o=-1,r=lre,s=e.length,c=!0,f=[],d=f;if(s>=200){var _=ure(e);if(_)return QE(_);c=!1,r=KP,d=new YP}else d=f;e:for(;++o<s;){var y=e[o],b=y;if(y=y!==0?y:0,c&&b==b){for(var x=d.length;x--;)if(d[x]===b)continue e;f.push(y)}else r(d,b,n)||(d!==f&&d.push(b),f.push(y))}return f},yR=function(e){return ku(e)&&$d(e)},dre=G_(function(e){return cre(n2(e,1,yR,!0))}),fre=function(e,t){return Ov(t,function(n){return e[n]})},t_,gR=function(e){return e==null?[]:fre(e,ep(e))};try{t_={clone:fne,constant:KE,each:qP,filter:iR,has:aR,isArray:Di,isEmpty:Vne,isFunction:oy,isUndefined:lR,keys:ep,map:uR,reduce:cR,size:Jne,transform:Qne,union:dre,values:gR}}catch{}t_||(t_=window._);var Mn=t_,r2=Xr;function Xr(e){this._isDirected=!Mn.has(e,"directed")||e.directed,this._isMultigraph=!!Mn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!Mn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=Mn.constant(void 0),this._defaultEdgeLabelFn=Mn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function iA(e,t){e[t]?e[t]++:e[t]=1}function aA(e,t){--e[t]||delete e[t]}function xm(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}return r+""+s+""+(Mn.isUndefined(o)?"\0":o)}function pre(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}var f={v:r,w:s};return o&&(f.name=o),f}function H1(e,t){return xm(e,t.v,t.w,t.name)}Xr.prototype._nodeCount=0,Xr.prototype._edgeCount=0,Xr.prototype.isDirected=function(){return this._isDirected},Xr.prototype.isMultigraph=function(){return this._isMultigraph},Xr.prototype.isCompound=function(){return this._isCompound},Xr.prototype.setGraph=function(e){return this._label=e,this},Xr.prototype.graph=function(){return this._label},Xr.prototype.setDefaultNodeLabel=function(e){return Mn.isFunction(e)||(e=Mn.constant(e)),this._defaultNodeLabelFn=e,this},Xr.prototype.nodeCount=function(){return this._nodeCount},Xr.prototype.nodes=function(){return Mn.keys(this._nodes)},Xr.prototype.sources=function(){var e=this;return Mn.filter(this.nodes(),function(t){return Mn.isEmpty(e._in[t])})},Xr.prototype.sinks=function(){var e=this;return Mn.filter(this.nodes(),function(t){return Mn.isEmpty(e._out[t])})},Xr.prototype.setNodes=function(e,t){var n=arguments,o=this;return Mn.each(e,function(r){n.length>1?o.setNode(r,t):o.setNode(r)}),this},Xr.prototype.setNode=function(e,t){return Mn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Xr.prototype.node=function(e){return this._nodes[e]},Xr.prototype.hasNode=function(e){return Mn.has(this._nodes,e)},Xr.prototype.removeNode=function(e){var t=this;if(Mn.has(this._nodes,e)){var n=function(o){t.removeEdge(t._edgeObjs[o])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],Mn.each(this.children(e),function(o){t.setParent(o)}),delete this._children[e]),Mn.each(Mn.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],Mn.each(Mn.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Xr.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Mn.isUndefined(t))t="\0";else{for(var n=t+="";!Mn.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Xr.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Xr.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Xr.prototype.children=function(e){if(Mn.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return Mn.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Xr.prototype.predecessors=function(e){var t=this._preds[e];if(t)return Mn.keys(t)},Xr.prototype.successors=function(e){var t=this._sucs[e];if(t)return Mn.keys(t)},Xr.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return Mn.union(t,this.successors(e))},Xr.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Xr.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;Mn.each(this._nodes,function(s,c){e(c)&&t.setNode(c,s)}),Mn.each(this._edgeObjs,function(s){t.hasNode(s.v)&&t.hasNode(s.w)&&t.setEdge(s,n.edge(s))});var o={};function r(s){var c=n.parent(s);return c===void 0||t.hasNode(c)?(o[s]=c,c):c in o?o[c]:r(c)}return this._isCompound&&Mn.each(t.nodes(),function(s){t.setParent(s,r(s))}),t},Xr.prototype.setDefaultEdgeLabel=function(e){return Mn.isFunction(e)||(e=Mn.constant(e)),this._defaultEdgeLabelFn=e,this},Xr.prototype.edgeCount=function(){return this._edgeCount},Xr.prototype.edges=function(){return Mn.values(this._edgeObjs)},Xr.prototype.setPath=function(e,t){var n=this,o=arguments;return Mn.reduce(e,function(r,s){return o.length>1?n.setEdge(r,s,t):n.setEdge(r,s),s}),this},Xr.prototype.setEdge=function(){var e,t,n,o,r=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(o=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],r=!0)),e=""+e,t=""+t,Mn.isUndefined(n)||(n=""+n);var c=xm(this._isDirected,e,t,n);if(Mn.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=o),this;if(!Mn.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?o:this._defaultEdgeLabelFn(e,t,n);var f=pre(this._isDirected,e,t,n);return e=f.v,t=f.w,Object.freeze(f),this._edgeObjs[c]=f,iA(this._preds[t],e),iA(this._sucs[e],t),this._in[t][c]=f,this._out[e][c]=f,this._edgeCount++,this},Xr.prototype.edge=function(e,t,n){var o=arguments.length===1?H1(this._isDirected,arguments[0]):xm(this._isDirected,e,t,n);return this._edgeLabels[o]},Xr.prototype.hasEdge=function(e,t,n){var o=arguments.length===1?H1(this._isDirected,arguments[0]):xm(this._isDirected,e,t,n);return Mn.has(this._edgeLabels,o)},Xr.prototype.removeEdge=function(e,t,n){var o=arguments.length===1?H1(this._isDirected,arguments[0]):xm(this._isDirected,e,t,n),r=this._edgeObjs[o];return r&&(e=r.v,t=r.w,delete this._edgeLabels[o],delete this._edgeObjs[o],aA(this._preds[t],e),aA(this._sucs[e],t),delete this._in[t][o],delete this._out[e][o],this._edgeCount--),this},Xr.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=Mn.values(n);return t?Mn.filter(o,function(r){return r.v===t}):o}},Xr.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=Mn.values(n);return t?Mn.filter(o,function(r){return r.w===t}):o}},Xr.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var lA={Graph:r2,version:"2.1.8"},hre={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:vre(e),edges:mre(e)};return Mn.isUndefined(e.graph())||(t.value=Mn.clone(e.graph())),t},read:function(e){var t=new r2(e.options).setGraph(e.value);return Mn.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),Mn.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function vre(e){return Mn.map(e.nodes(),function(t){var n=e.node(t),o=e.parent(t),r={v:t};return Mn.isUndefined(n)||(r.value=n),Mn.isUndefined(o)||(r.parent=o),r})}function mre(e){return Mn.map(e.edges(),function(t){var n=e.edge(t),o={v:t.v,w:t.w};return Mn.isUndefined(t.name)||(o.name=t.name),Mn.isUndefined(n)||(o.value=n),o})}var yre=function(e){var t,n={},o=[];function r(s){Mn.has(n,s)||(n[s]=!0,t.push(s),Mn.each(e.successors(s),r),Mn.each(e.predecessors(s),r))}return Mn.each(e.nodes(),function(s){t=[],r(s),t.length&&o.push(t)}),o},_R=Cs;function Cs(){this._arr=[],this._keyIndices={}}Cs.prototype.size=function(){return this._arr.length},Cs.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Cs.prototype.has=function(e){return Mn.has(this._keyIndices,e)},Cs.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Cs.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Cs.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!Mn.has(n,e)){var o=this._arr,r=o.length;return n[e]=r,o.push({key:e,priority:t}),this._decrease(r),!0}return!1},Cs.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Cs.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Cs.prototype._heapify=function(e){var t=this._arr,n=2*e,o=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,o<t.length&&(r=t[o].priority<t[r].priority?o:r),r!==e&&(this._swap(e,r),this._heapify(r)))},Cs.prototype._decrease=function(e){for(var t,n=this._arr,o=n[e].priority;e!==0&&!(n[t=e>>1].priority<o);)this._swap(e,t),e=t},Cs.prototype._swap=function(e,t){var n=this._arr,o=this._keyIndices,r=n[e],s=n[t];n[e]=s,n[t]=r,o[s.key]=e,o[r.key]=t};var bR=function(e,t,n,o){return function(r,s,c,f){var d,_,y={},b=new _R,x=function(M){var S=M.v!==d?M.v:M.w,E=y[S],w=c(M),C=_.distance+w;if(w<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+M+" Weight: "+w);C<E.distance&&(E.distance=C,E.predecessor=d,b.decrease(S,C))};for(r.nodes().forEach(function(M){var S=M===s?0:Number.POSITIVE_INFINITY;y[M]={distance:S},b.add(M,S)});b.size()>0&&(d=b.removeMin(),(_=y[d]).distance!==Number.POSITIVE_INFINITY);)f(d).forEach(x);return y}(e,String(t),n||gre,o||function(r){return e.outEdges(r)})},gre=Mn.constant(1),_re=function(e,t,n){return Mn.transform(e.nodes(),function(o,r){o[r]=bR(e,r,t,n)},{})},wR=function(e){var t=0,n=[],o={},r=[];function s(c){var f=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(y){Mn.has(o,y)?o[y].onStack&&(f.lowlink=Math.min(f.lowlink,o[y].index)):(s(y),f.lowlink=Math.min(f.lowlink,o[y].lowlink))}),f.lowlink===f.index){var d,_=[];do d=n.pop(),o[d].onStack=!1,_.push(d);while(c!==d);r.push(_)}}return e.nodes().forEach(function(c){Mn.has(o,c)||s(c)}),r},bre=function(e){return Mn.filter(wR(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},wre=function(e,t,n){return function(o,r,s){var c={},f=o.nodes();return f.forEach(function(d){c[d]={},c[d][d]={distance:0},f.forEach(function(_){d!==_&&(c[d][_]={distance:Number.POSITIVE_INFINITY})}),s(d).forEach(function(_){var y=_.v===d?_.w:_.v,b=r(_);c[d][y]={distance:b,predecessor:d}})}),f.forEach(function(d){var _=c[d];f.forEach(function(y){var b=c[y];f.forEach(function(x){var M=b[d],S=_[x],E=b[x],w=M.distance+S.distance;w<E.distance&&(E.distance=w,E.predecessor=S.predecessor)})})}),c}(e,t||Ere,n||function(o){return e.outEdges(o)})},Ere=Mn.constant(1),W1=ER;function ER(e){var t={},n={},o=[];if(Mn.each(e.sinks(),function r(s){if(Mn.has(n,s))throw new n_;Mn.has(t,s)||(n[s]=!0,t[s]=!0,Mn.each(e.predecessors(s),r),delete n[s],o.push(s))}),Mn.size(t)!==e.nodeCount())throw new n_;return o}function n_(){}ER.CycleException=n_,n_.prototype=new Error;var sA=function(e,t,n){Mn.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],s={};return Mn.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);OR(e,c,n==="post",s,o,r)}),r};function OR(e,t,n,o,r,s){Mn.has(o,t)||(o[t]=!0,n||s.push(t),Mn.each(r(t),function(c){OR(e,c,n,o,r,s)}),n&&s.push(t))}var r_,Ore={Graph:lA.Graph,json:hre,alg:{components:yre,dijkstra:bR,dijkstraAll:_re,findCycles:bre,floydWarshall:wre,isAcyclic:function(e){try{W1(e)}catch(t){if(t instanceof W1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return sA(e,t,"post")},preorder:function(e,t){return sA(e,t,"pre")},prim:function(e,t){var n,o=new r2,r={},s=new _R;function c(d){var _=d.v===n?d.w:d.v,y=s.priority(_);if(y!==void 0){var b=t(d);b<y&&(r[_]=n,s.decrease(_,b))}}if(e.nodeCount()===0)return o;Mn.each(e.nodes(),function(d){s.add(d,Number.POSITIVE_INFINITY),o.setNode(d)}),s.decrease(e.nodes()[0],0);for(var f=!1;s.size()>0;){if(n=s.removeMin(),Mn.has(r,n))o.setEdge(n,r[n]);else{if(f)throw new Error("Input graph is not connected: "+e);f=!0}e.nodeEdges(n).forEach(c)}return o},tarjan:wR,topsort:W1},version:lA.version};try{r_=Ore}catch{}r_||(r_=window.graphlib);var bc=r_,Sre=function(e){return HP(e,5)},Hm=function(e,t,n){if(!jl(n))return!1;var o=typeof t;return!!(o=="number"?$d(n)&&I_(t,n.length):o=="string"&&t in n)&&Wv(n[t],e)},SR=Object.prototype,xre=SR.hasOwnProperty,Mre=G_(function(e,t){e=Object(e);var n=-1,o=t.length,r=o>2?t[2]:void 0;for(r&&Hm(t[0],t[1],r)&&(o=1);++n<o;)for(var s=t[n],c=dh(s),f=-1,d=c.length;++f<d;){var _=c[f],y=e[_];(y===void 0||Wv(y,SR[_])&&!xre.call(e,_))&&(e[_]=s[_])}return e}),Are=function(e){return function(t,n,o){var r=Object(t);if(!$d(t)){var s=Fd(n);t=ep(t),n=function(f){return s(r[f],f,r)}}var c=e(t,n,o);return c>-1?r[s?t[c]:c]:void 0}},Tre=/^\s+|\s+$/g,kre=/^[-+]0x[0-9a-f]+$/i,Nre=/^0b[01]+$/i,Pre=/^0o[0-7]+$/i,Rre=parseInt,Cre=function(e){if(typeof e=="number")return e;if(th(e))return NaN;if(jl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=jl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Tre,"");var n=Nre.test(e);return n||Pre.test(e)?Rre(e.slice(2),n?2:8):kre.test(e)?NaN:+e},Ag=function(e){return e?(e=Cre(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},Dre=function(e){var t=Ag(e),n=t%1;return t==t?n?t-n:t:0},jre=Math.max,Ire=Are(function(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:Dre(n);return r<0&&(r=jre(o+r,0)),mR(e,Fd(t),r)}),xR=function(e){return e!=null&&e.length?n2(e):[]},Lre=function(e,t){return e==null?e:ZE(e,WP(t),dh)},$re=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},Fre=function(e,t){var n={};return t=Fd(t),JE(e,function(o,r,s){D_(n,r,t(o,r,s))}),n},o2=function(e,t,n){for(var o=-1,r=e.length;++o<r;){var s=e[o],c=t(s);if(c!=null&&(f===void 0?c==c&&!th(c):n(c,f)))var f=c,d=s}return d},Vre=function(e,t){return e>t},Bre=function(e){return e&&e.length?o2(e,fh,Vre):void 0},Hw=function(e,t,n){(n!==void 0&&!Wv(e[t],n)||n===void 0&&!(t in e))&&D_(e,t,n)},Ure=Function.prototype,Gre=Object.prototype,MR=Ure.toString,zre=Gre.hasOwnProperty,Hre=MR.call(Object),Wre=function(e){if(!ku(e)||Qf(e)!="[object Object]")return!1;var t=F_(e);if(t===null)return!0;var n=zre.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&MR.call(n)==Hre},uA=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},Xre=function(e){return iy(e,dh(e))},qre=function(e,t,n,o,r,s,c){var f=uA(e,n),d=uA(t,n),_=c.get(d);if(_)Hw(e,n,_);else{var y=void 0,b=y===void 0;if(b){var x=Di(d),M=!x&&Qp(d),S=!x&&!M&&ay(d);y=d,x||M||S?Di(f)?y=f:yR(f)?y=LP(f):M?(b=!1,y=IP(d,!0)):S?(b=!1,y=UP(d,!0)):y=[]:Wre(d)||Rv(d)?(y=f,Rv(f)?y=Xre(f):jl(f)&&!oy(f)||(y=zP(d))):b=!1}b&&(c.set(d,y),r(y,d,o,s,c),c.delete(d)),Hw(e,n,y)}},Yre=function e(t,n,o,r,s){t!==n&&ZE(n,function(c,f){if(s||(s=new wv),jl(c))qre(t,n,f,o,e,r,s);else{var d=void 0;d===void 0&&(d=c),Hw(t,f,d)}},dh)},Kre=function(e){return G_(function(t,n){var o=-1,r=n.length,s=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,c&&Hm(n[0],n[1],c)&&(s=r<3?void 0:s,r=1),t=Object(t);++o<r;){var f=n[o];f&&e(t,f,o,s)}return t})}(function(e,t,n){Yre(e,t,n)}),AR=function(e,t){return e<t},Zre=function(e){return e&&e.length?o2(e,fh,AR):void 0},Jre=function(e,t){return e&&e.length?o2(e,Fd(t),AR):void 0},Qre=function(){return Nu.Date.now()},eoe=function(e,t,n,o){if(!jl(e))return e;for(var r=-1,s=(t=B_(t,e)).length,c=s-1,f=e;f!=null&&++r<s;){var d=ly(t[r]),_=n;if(d==="__proto__"||d==="constructor"||d==="prototype")return e;if(r!=c){var y=f[d];(_=void 0)==void 0&&(_=jl(y)?y:I_(t[r+1])?[]:{})}j_(f,d,_),f=f[d]}return e},toe=function(e,t,n){for(var o=-1,r=t.length,s={};++o<r;){var c=t[o],f=U_(e,c);n(f,c)&&eoe(s,B_(c,e),f)}return s},noe=function(e,t){return toe(e,t,function(n,o){return rR(e,o)})},roe=function(e){return vR(hR(e,void 0,xR),e+"")}(function(e,t){return e==null?{}:noe(e,t)}),ooe=Math.ceil,ioe=Math.max,aoe=function(e,t,n,o){for(var r=-1,s=ioe(ooe((t-e)/(n||1)),0),c=Array(s);s--;)c[++r]=e,e+=n;return c},loe=function(e){return function(t,n,o){return o&&typeof o!="number"&&Hm(t,n,o)&&(n=o=void 0),t=Ag(t),n===void 0?(n=t,t=0):n=Ag(n),o=o===void 0?t<n?1:-1:Ag(o),aoe(t,n,o)}}(),soe=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},uoe=function(e,t){if(e!==t){var n=e!==void 0,o=e===null,r=e==e,s=th(e),c=t!==void 0,f=t===null,d=t==t,_=th(t);if(!f&&!_&&!s&&e>t||s&&c&&d&&!f&&!_||o&&c&&d||!n&&d||!r)return 1;if(!o&&!s&&!_&&e<t||_&&n&&r&&!o&&!s||f&&n&&r||!c&&r||!d)return-1}return 0},coe=function(e,t,n){for(var o=-1,r=e.criteria,s=t.criteria,c=r.length,f=n.length;++o<c;){var d=uoe(r[o],s[o]);if(d)return o>=f?d:d*(n[o]=="desc"?-1:1)}return e.index-t.index},doe=function(e,t,n){t=t.length?Ov(t,function(s){return Di(s)?function(c){return U_(c,s.length===1?s[0]:s)}:s}):[fh];var o=-1;t=Ov(t,L_(Fd));var r=sR(e,function(s,c,f){return{criteria:Ov(t,function(d){return d(s)}),index:++o,value:s}});return soe(r,function(s,c){return coe(s,c,n)})},foe=G_(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Hm(e,t[0],t[1])?t=[]:n>2&&Hm(t[0],t[1],t[2])&&(t=[t[0]]),doe(e,n2(t),[])}),poe=0,hoe=function(e){var t=++poe;return tR(e)+t},voe=function(e,t,n){for(var o=-1,r=e.length,s=t.length,c={};++o<r;){var f=o<s?t[o]:void 0;n(c,e[o],f)}return c},o_,moe=function(e,t){return voe(e||[],t||[],j_)};try{o_={cloneDeep:Sre,constant:KE,defaults:Mre,each:qP,filter:iR,find:Ire,flatten:xR,forEach:XP,forIn:Lre,has:aR,isUndefined:lR,last:$re,map:uR,mapValues:Fre,max:Bre,merge:Kre,min:Zre,minBy:Jre,now:Qre,pick:roe,range:loe,reduce:cR,sortBy:foe,uniqueId:hoe,values:gR,zipObject:moe}}catch{}o_||(o_=window._);var yoe=o_;bc.Graph;yoe.constant(1);bc.Graph;bc.Graph;bc.alg.preorder;bc.alg.postorder;bc.Graph;bc.Graph;bc.Graph;bc.Graph;bc.Graph;var X1,cA;function goe(){if(cA)return X1;cA=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return X1=t,X1}var q1,dA;function _oe(){if(dA)return q1;dA=1;var e=tE(),t=goe(),n=nE(),o="[object Arguments]",r="[object Array]",s="[object Boolean]",c="[object Date]",f="[object Error]",d="[object Function]",_="[object Map]",y="[object Number]",b="[object Object]",x="[object RegExp]",M="[object Set]",S="[object String]",E="[object WeakMap]",w="[object ArrayBuffer]",C="[object DataView]",j="[object Float32Array]",B="[object Float64Array]",$="[object Int8Array]",U="[object Int16Array]",I="[object Int32Array]",F="[object Uint8Array]",Z="[object Uint8ClampedArray]",G="[object Uint16Array]",W="[object Uint32Array]",K={};K[j]=K[B]=K[$]=K[U]=K[I]=K[F]=K[Z]=K[G]=K[W]=!0,K[o]=K[r]=K[w]=K[s]=K[C]=K[c]=K[f]=K[d]=K[_]=K[y]=K[b]=K[x]=K[M]=K[S]=K[E]=!1;function J(q){return n(q)&&t(q.length)&&!!K[e(q)]}return q1=J,q1}var Y1,fA;function boe(){if(fA)return Y1;fA=1;function e(t){return function(n){return t(n)}}return Y1=e,Y1}var Mm={exports:{}};Mm.exports;var pA;function woe(){return pA||(pA=1,function(e,t){var n=JI(),o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===o,c=s&&n.process,f=function(){try{var d=r&&r.require&&r.require("util").types;return d||c&&c.binding&&c.binding("util")}catch{}}();e.exports=f}(Mm,Mm.exports)),Mm.exports}var K1,hA;function Eoe(){if(hA)return K1;hA=1;var e=_oe(),t=boe(),n=woe(),o=n&&n.isTypedArray,r=o?t(o):e;return K1=r,K1}Eoe();var Z1,vA;function Ooe(){if(vA)return Z1;vA=1;var e=tE(),t=nE(),n="[object Number]";function o(r){return typeof r=="number"||t(r)&&e(r)==n}return Z1=o,Z1}Ooe();var J1={exports:{}},Q1={exports:{}},mA;function TR(){return mA||(mA=1,function(e){function t(n,o){this.v=n,this.k=o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Q1)),Q1.exports}var ew={exports:{}},tw={exports:{}},yA;function kR(){return yA||(yA=1,function(e){function t(n,o,r,s){var c=Object.defineProperty;try{c({},"",{})}catch{c=0}e.exports=t=function(d,_,y,b){function x(M,S){t(d,M,function(E){return this._invoke(M,S,E)})}_?c?c(d,_,{value:y,enumerable:!b,configurable:!b,writable:!b}):d[_]=y:(x("next",0),x("throw",1),x("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,o,r,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(tw)),tw.exports}var gA;function NR(){return gA||(gA=1,function(e){var t=kR();function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var o,r,s=typeof Symbol=="function"?Symbol:{},c=s.iterator||"@@iterator",f=s.toStringTag||"@@toStringTag";function d(w,C,j,B){var $=C&&C.prototype instanceof y?C:y,U=Object.create($.prototype);return t(U,"_invoke",function(I,F,Z){var G,W,K,J=0,q=Z||[],ne=!1,oe={p:0,n:0,v:o,a:Me,f:Me.bind(o,4),d:function(Ee,we){return G=Ee,W=0,K=o,oe.n=we,_}};function Me(Pe,Ee){for(W=Pe,K=Ee,r=0;!ne&&J&&!we&&r<q.length;r++){var we,Be=q[r],nt=oe.p,Ot=Be[2];Pe>3?(we=Ot===Ee)&&(K=Be[(W=Be[4])?5:(W=3,3)],Be[4]=Be[5]=o):Be[0]<=nt&&((we=Pe<2&&nt<Be[1])?(W=0,oe.v=Ee,oe.n=Be[1]):nt<Ot&&(we=Pe<3||Be[0]>Ee||Ee>Ot)&&(Be[4]=Pe,Be[5]=Ee,oe.n=Ot,W=0))}if(we||Pe>1)return _;throw ne=!0,Ee}return function(Pe,Ee,we){if(J>1)throw TypeError("Generator is already running");for(ne&&Ee===1&&Me(Ee,we),W=Ee,K=we;(r=W<2?o:K)||!ne;){G||(W?W<3?(W>1&&(oe.n=-1),Me(W,K)):oe.n=K:oe.v=K);try{if(J=2,G){if(W||(Pe="next"),r=G[Pe]){if(!(r=r.call(G,K)))throw TypeError("iterator result is not an object");if(!r.done)return r;K=r.value,W<2&&(W=0)}else W===1&&(r=G.return)&&r.call(G),W<2&&(K=TypeError("The iterator does not provide a '"+Pe+"' method"),W=1);G=o}else if((r=(ne=oe.n<0)?K:I.call(F,oe))!==_)break}catch(Be){G=o,W=1,K=Be}finally{J=1}}return{value:r,done:ne}}}(w,j,B),!0),U}var _={};function y(){}function b(){}function x(){}r=Object.getPrototypeOf;var M=[][c]?r(r([][c]())):(t(r={},c,function(){return this}),r),S=x.prototype=y.prototype=Object.create(M);function E(w){return Object.setPrototypeOf?Object.setPrototypeOf(w,x):(w.__proto__=x,t(w,f,"GeneratorFunction")),w.prototype=Object.create(S),w}return b.prototype=x,t(S,"constructor",x),t(x,"constructor",b),b.displayName="GeneratorFunction",t(x,f,"GeneratorFunction"),t(S),t(S,f,"Generator"),t(S,c,function(){return this}),t(S,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:d,m:E}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ew)),ew.exports}var nw={exports:{}},rw={exports:{}},ow={exports:{}},_A;function PR(){return _A||(_A=1,function(e){var t=TR(),n=kR();function o(r,s){function c(d,_,y,b){try{var x=r[d](_),M=x.value;return M instanceof t?s.resolve(M.v).then(function(S){c("next",S,y,b)},function(S){c("throw",S,y,b)}):s.resolve(M).then(function(S){x.value=S,y(x)},function(S){return c("throw",S,y,b)})}catch(S){b(S)}}var f;this.next||(n(o.prototype),n(o.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(d,_,y){function b(){return new s(function(x,M){c(d,y,x,M)})}return f=f?f.then(b,b):b()},!0)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(ow)),ow.exports}var bA;function RR(){return bA||(bA=1,function(e){var t=NR(),n=PR();function o(r,s,c,f,d){return new n(t().w(r,s,c,f),d||Promise)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(rw)),rw.exports}var wA;function Soe(){return wA||(wA=1,function(e){var t=RR();function n(o,r,s,c,f){var d=t(o,r,s,c,f);return d.next().then(function(_){return _.done?_.value:d.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(nw)),nw.exports}var iw={exports:{}},EA;function xoe(){return EA||(EA=1,function(e){function t(n){var o=Object(n),r=[];for(var s in o)r.unshift(s);return function c(){for(;r.length;)if((s=r.pop())in o)return c.value=s,c.done=!1,c;return c.done=!0,c}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(iw)),iw.exports}var aw={exports:{}},lw={exports:{}},OA;function Moe(){return OA||(OA=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(lw)),lw.exports}var SA;function Aoe(){return SA||(SA=1,function(e){var t=Moe().default;function n(o){if(o!=null){var r=o[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],s=0;if(r)return r.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length))return{next:function(){return o&&s>=o.length&&(o=void 0),{value:o&&o[s++],done:!o}}}}throw new TypeError(t(o)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(aw)),aw.exports}var xA;function Toe(){return xA||(xA=1,function(e){var t=TR(),n=NR(),o=Soe(),r=RR(),s=PR(),c=xoe(),f=Aoe();function d(){var _=n(),y=_.m(d),b=(Object.getPrototypeOf?Object.getPrototypeOf(y):y.__proto__).constructor;function x(E){var w=typeof E=="function"&&E.constructor;return!!w&&(w===b||(w.displayName||w.name)==="GeneratorFunction")}var M={throw:1,return:2,break:3,continue:3};function S(E){var w,C;return function(j){w||(w={stop:function(){return C(j.a,2)},catch:function(){return j.v},abrupt:function($,U){return C(j.a,M[$],U)},delegateYield:function($,U,I){return w.resultName=U,C(j.d,f($),I)},finish:function($){return C(j.f,$)}},C=function($,U,I){j.p=w.prev,j.n=w.next;try{return $(U,I)}finally{w.next=j.n}}),w.resultName&&(w[w.resultName]=j.v,w.resultName=void 0),w.sent=j.v,w.next=j.n;try{return E.call(this,w)}finally{j.p=w.prev,j.n=w.next}}}return(e.exports=d=function(){return{wrap:function(C,j,B,$){return _.w(S(C),j,B,$&&$.reverse())},isGeneratorFunction:x,mark:_.m,awrap:function(C,j){return new t(C,j)},AsyncIterator:s,async:function(C,j,B,$,U){return(x(j)?r:o)(S(C),j,B,$,U)},keys:c,values:f}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports}(J1)),J1.exports}var sw,MA;function koe(){if(MA)return sw;MA=1;var e=Toe()();sw=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return sw}koe();var ln;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(ln||(ln={}));var AA;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(AA||(AA={}));var TA;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(TA||(TA={}));var kA;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(kA||(kA={}));var NA;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(NA||(NA={}));var Tg={exports:{}},Noe=Tg.exports,PA;function Poe(){return PA||(PA=1,function(e,t){(function(n,o){e.exports=o()})(Noe,function(){var n=function(z){return z instanceof Uint8Array||z instanceof Uint16Array||z instanceof Uint32Array||z instanceof Int8Array||z instanceof Int16Array||z instanceof Int32Array||z instanceof Float32Array||z instanceof Float64Array||z instanceof Uint8ClampedArray},o=function(z,ue){for(var Oe=Object.keys(ue),rt=0;rt<Oe.length;++rt)z[Oe[rt]]=ue[Oe[rt]];return z},r=`
`;function s(z){return typeof atob<"u"?atob(z):"base64:"+z}function c(z){var ue=new Error("(regl) "+z);throw console.error(ue),ue}function f(z,ue){z||c(ue)}function d(z){return z?": "+z:""}function _(z,ue,Oe){z in ue||c("unknown parameter ("+z+")"+d(Oe)+". possible values: "+Object.keys(ue).join())}function y(z,ue){n(z)||c("invalid parameter type"+d(ue)+". must be a typed array")}function b(z,ue){switch(ue){case"number":return typeof z=="number";case"object":return typeof z=="object";case"string":return typeof z=="string";case"boolean":return typeof z=="boolean";case"function":return typeof z=="function";case"undefined":return typeof z>"u";case"symbol":return typeof z=="symbol"}}function x(z,ue,Oe){b(z,ue)||c("invalid parameter type"+d(Oe)+". expected "+ue+", got "+typeof z)}function M(z,ue){z>=0&&(z|0)===z||c("invalid parameter type, ("+z+")"+d(ue)+". must be a nonnegative integer")}function S(z,ue,Oe){ue.indexOf(z)<0&&c("invalid value"+d(Oe)+". must be one of: "+ue)}var E=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function w(z){Object.keys(z).forEach(function(ue){E.indexOf(ue)<0&&c('invalid regl constructor argument "'+ue+'". must be one of '+E)})}function C(z,ue){for(z=z+"";z.length<ue;)z=" "+z;return z}function j(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function B(z,ue){this.number=z,this.line=ue,this.errors=[]}function $(z,ue,Oe){this.file=z,this.line=ue,this.message=Oe}function U(){var z=new Error,ue=(z.stack||z).toString(),Oe=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ue);if(Oe)return Oe[1];var rt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ue);return rt?rt[1]:"unknown"}function I(){var z=new Error,ue=(z.stack||z).toString(),Oe=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ue);if(Oe)return Oe[1];var rt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ue);return rt?rt[1]:"unknown"}function F(z,ue){var Oe=z.split(`
`),rt=1,vt=0,et={unknown:new j,0:new j};et.unknown.name=et[0].name=ue||U(),et.unknown.lines.push(new B(0,""));for(var pt=0;pt<Oe.length;++pt){var Ct=Oe[pt],Ft=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ct);if(Ft)switch(Ft[1]){case"line":var Dt=/(\d+)(\s+\d+)?/.exec(Ft[2]);Dt&&(rt=Dt[1]|0,Dt[2]&&(vt=Dt[2]|0,vt in et||(et[vt]=new j)));break;case"define":var ct=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Ft[2]);ct&&(et[vt].name=ct[1]?s(ct[2]):ct[2]);break}et[vt].lines.push(new B(rt++,Ct))}return Object.keys(et).forEach(function(Yt){var Gt=et[Yt];Gt.lines.forEach(function(jt){Gt.index[jt.number]=jt})}),et}function Z(z){var ue=[];return z.split(`
`).forEach(function(Oe){if(!(Oe.length<5)){var rt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Oe);rt?ue.push(new $(rt[1]|0,rt[2]|0,rt[3].trim())):Oe.length>0&&ue.push(new $("unknown",0,Oe))}}),ue}function G(z,ue){ue.forEach(function(Oe){var rt=z[Oe.file];if(rt){var vt=rt.index[Oe.line];if(vt){vt.errors.push(Oe),rt.hasErrors=!0;return}}z.unknown.hasErrors=!0,z.unknown.lines[0].errors.push(Oe)})}function W(z,ue,Oe,rt,vt){if(!z.getShaderParameter(ue,z.COMPILE_STATUS)){var et=z.getShaderInfoLog(ue),pt=rt===z.FRAGMENT_SHADER?"fragment":"vertex";Pe(Oe,"string",pt+" shader source must be a string",vt);var Ct=F(Oe,vt),Ft=Z(et);G(Ct,Ft),Object.keys(Ct).forEach(function(Dt){var ct=Ct[Dt];if(!ct.hasErrors)return;var Yt=[""],Gt=[""];function jt(Et,Ke){Yt.push(Et),Gt.push(Ke||"")}jt("file number "+Dt+": "+ct.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ct.lines.forEach(function(Et){if(Et.errors.length>0){jt(C(Et.number,4)+"|  ","background-color:yellow; font-weight:bold"),jt(Et.line+r,"color:red; background-color:yellow; font-weight:bold");var Ke=0;Et.errors.forEach(function(ut){var $t=ut.message,tn=/^\s*'(.*)'\s*:\s*(.*)$/.exec($t);if(tn){var Mt=tn[1];switch($t=tn[2],Mt){case"assign":Mt="=";break}Ke=Math.max(Et.line.indexOf(Mt,Ke),0)}else Ke=0;jt(C("| ",6)),jt(C("^^^",Ke+3)+r,"font-weight:bold"),jt(C("| ",6)),jt($t+r,"font-weight:bold")}),jt(C("| ",6)+r)}else jt(C(Et.number,4)+"|  "),jt(Et.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Gt[0]=Yt.join("%c"),console.log.apply(console,Gt)):console.log(Yt.join(""))}),f.raise("Error compiling "+pt+" shader, "+Ct[0].name)}}function K(z,ue,Oe,rt,vt){if(!z.getProgramParameter(ue,z.LINK_STATUS)){var et=z.getProgramInfoLog(ue),pt=F(Oe,vt),Ct=F(rt,vt),Ft='Error linking program with vertex shader, "'+Ct[0].name+'", and fragment shader "'+pt[0].name+'"';typeof document<"u"?console.log("%c"+Ft+r+"%c"+et,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ft+r+et),f.raise(Ft)}}function J(z){z._commandRef=U()}function q(z,ue,Oe,rt){J(z);function vt(Ft){return Ft?rt.id(Ft):0}z._fragId=vt(z.static.frag),z._vertId=vt(z.static.vert);function et(Ft,Dt){Object.keys(Dt).forEach(function(ct){Ft[rt.id(ct)]=!0})}var pt=z._uniformSet={};et(pt,ue.static),et(pt,ue.dynamic);var Ct=z._attributeSet={};et(Ct,Oe.static),et(Ct,Oe.dynamic),z._hasCount="count"in z.static||"count"in z.dynamic||"elements"in z.static||"elements"in z.dynamic}function ne(z,ue){var Oe=I();c(z+" in command "+(ue||U())+(Oe==="unknown"?"":" called from "+Oe))}function oe(z,ue,Oe){z||ne(ue,Oe||U())}function Me(z,ue,Oe,rt){z in ue||ne("unknown parameter ("+z+")"+d(Oe)+". possible values: "+Object.keys(ue).join(),rt||U())}function Pe(z,ue,Oe,rt){b(z,ue)||ne("invalid parameter type"+d(Oe)+". expected "+ue+", got "+typeof z,rt||U())}function Ee(z){z()}function we(z,ue,Oe){z.texture?S(z.texture._texture.internalformat,ue,"unsupported texture format for attachment"):S(z.renderbuffer._renderbuffer.format,Oe,"unsupported renderbuffer format for attachment")}var Be=33071,nt=9728,Ot=9984,Qe=9985,lt=9986,dt=9987,Tt=5120,bn=5121,Ue=5122,Te=5123,$e=5124,wt=5125,Wt=5126,St=32819,Zt=32820,pn=33635,An=34042,yn=36193,ht={};ht[Tt]=ht[bn]=1,ht[Ue]=ht[Te]=ht[yn]=ht[pn]=ht[St]=ht[Zt]=2,ht[$e]=ht[wt]=ht[Wt]=ht[An]=4;function kn(z,ue){return z===Zt||z===St||z===pn?2:z===An?4:ht[z]*ue}function Ie(z){return!(z&z-1)&&!!z}function wn(z,ue,Oe){var rt,vt=ue.width,et=ue.height,pt=ue.channels;f(vt>0&&vt<=Oe.maxTextureSize&&et>0&&et<=Oe.maxTextureSize,"invalid texture shape"),(z.wrapS!==Be||z.wrapT!==Be)&&f(Ie(vt)&&Ie(et),"incompatible wrap mode for texture, both width and height must be power of 2"),ue.mipmask===1?vt!==1&&et!==1&&f(z.minFilter!==Ot&&z.minFilter!==lt&&z.minFilter!==Qe&&z.minFilter!==dt,"min filter requires mipmap"):(f(Ie(vt)&&Ie(et),"texture must be a square power of 2 to support mipmapping"),f(ue.mipmask===(vt<<1)-1,"missing or incomplete mipmap data")),ue.type===Wt&&(Oe.extensions.indexOf("oes_texture_float_linear")<0&&f(z.minFilter===nt&&z.magFilter===nt,"filter not supported, must enable oes_texture_float_linear"),f(!z.genMipmaps,"mipmap generation not supported with float textures"));var Ct=ue.images;for(rt=0;rt<16;++rt)if(Ct[rt]){var Ft=vt>>rt,Dt=et>>rt;f(ue.mipmask&1<<rt,"missing mipmap data");var ct=Ct[rt];if(f(ct.width===Ft&&ct.height===Dt,"invalid shape for mip images"),f(ct.format===ue.format&&ct.internalformat===ue.internalformat&&ct.type===ue.type,"incompatible type for mip image"),!ct.compressed)if(ct.data){var Yt=Math.ceil(kn(ct.type,pt)*Ft/ct.unpackAlignment)*ct.unpackAlignment;f(ct.data.byteLength===Yt*Dt,"invalid data for image, buffer size is inconsistent with image format")}else ct.element||ct.copy}else z.genMipmaps||f((ue.mipmask&1<<rt)===0,"extra mipmap data");ue.compressed&&f(!z.genMipmaps,"mipmap generation for compressed images not supported")}function nr(z,ue,Oe,rt){var vt=z.width,et=z.height,pt=z.channels;f(vt>0&&vt<=rt.maxTextureSize&&et>0&&et<=rt.maxTextureSize,"invalid texture shape"),f(vt===et,"cube map must be square"),f(ue.wrapS===Be&&ue.wrapT===Be,"wrap mode not supported by cube map");for(var Ct=0;Ct<Oe.length;++Ct){var Ft=Oe[Ct];f(Ft.width===vt&&Ft.height===et,"inconsistent cube map face shape"),ue.genMipmaps&&(f(!Ft.compressed,"can not generate mipmap for compressed textures"),f(Ft.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Dt=Ft.images,ct=0;ct<16;++ct){var Yt=Dt[ct];if(Yt){var Gt=vt>>ct,jt=et>>ct;f(Ft.mipmask&1<<ct,"missing mipmap data"),f(Yt.width===Gt&&Yt.height===jt,"invalid shape for mip images"),f(Yt.format===z.format&&Yt.internalformat===z.internalformat&&Yt.type===z.type,"incompatible type for mip image"),Yt.compressed||(Yt.data?f(Yt.data.byteLength===Gt*jt*Math.max(kn(Yt.type,pt),Yt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Yt.element||Yt.copy)}}}}var le=o(f,{optional:Ee,raise:c,commandRaise:ne,command:oe,parameter:_,commandParameter:Me,constructor:w,type:x,commandType:Pe,isTypedArray:y,nni:M,oneOf:S,shaderError:W,linkError:K,callSite:I,saveCommandRef:J,saveDrawInfo:q,framebufferFormat:we,guessCommand:U,texture2D:wn,textureCube:nr}),rr=0,Rr=0,Sr=5,uo=6;function Vn(z,ue){this.id=rr++,this.type=z,this.data=ue}function fo(z){return z.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function xe(z){if(z.length===0)return[];var ue=z.charAt(0),Oe=z.charAt(z.length-1);if(z.length>1&&ue===Oe&&(ue==='"'||ue==="'"))return['"'+fo(z.substr(1,z.length-2))+'"'];var rt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(z);if(rt)return xe(z.substr(0,rt.index)).concat(xe(rt[1])).concat(xe(z.substr(rt.index+rt[0].length)));var vt=z.split(".");if(vt.length===1)return['"'+fo(z)+'"'];for(var et=[],pt=0;pt<vt.length;++pt)et=et.concat(xe(vt[pt]));return et}function Ye(z){return"["+xe(z).join("][")+"]"}function Le(z,ue){return new Vn(z,Ye(ue+""))}function st(z){return typeof z=="function"&&!z._reglType||z instanceof Vn}function on(z,ue){if(typeof z=="function")return new Vn(Rr,z);if(typeof z=="number"||typeof z=="boolean")return new Vn(Sr,z);if(Array.isArray(z))return new Vn(uo,z.map((Oe,rt)=>on(Oe,ue+"["+rt+"]")));if(z instanceof Vn)return z;le(!1,"invalid option type in uniform "+ue)}var en={DynamicVariable:Vn,define:Le,isDynamic:st,unbox:on,accessor:Ye},In={next:typeof requestAnimationFrame=="function"?function(z){return requestAnimationFrame(z)}:function(z){return setTimeout(z,16)},cancel:typeof cancelAnimationFrame=="function"?function(z){return cancelAnimationFrame(z)}:clearTimeout},Ar=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ui(){var z={"":0},ue=[""];return{id:function(Oe){var rt=z[Oe];return rt||(rt=z[Oe]=ue.length,ue.push(Oe),rt)},str:function(Oe){return ue[Oe]}}}function Si(z,ue,Oe){var rt=document.createElement("canvas");o(rt.style,{border:0,margin:0,padding:0,top:0,left:0}),z.appendChild(rt),z===document.body&&(rt.style.position="absolute",o(z.style,{margin:0,padding:0}));function vt(){var Ct=window.innerWidth,Ft=window.innerHeight;if(z!==document.body){var Dt=z.getBoundingClientRect();Ct=Dt.right-Dt.left,Ft=Dt.bottom-Dt.top}rt.width=Oe*Ct,rt.height=Oe*Ft,o(rt.style,{width:Ct+"px",height:Ft+"px"})}var et;z!==document.body&&typeof ResizeObserver=="function"?(et=new ResizeObserver(function(){setTimeout(vt)}),et.observe(z)):window.addEventListener("resize",vt,!1);function pt(){et?et.disconnect():window.removeEventListener("resize",vt),z.removeChild(rt)}return vt(),{canvas:rt,onDestroy:pt}}function Zo(z,ue){function Oe(rt){try{return z.getContext(rt,ue)}catch{return null}}return Oe("webgl")||Oe("experimental-webgl")||Oe("webgl-experimental")}function ri(z){return typeof z.nodeName=="string"&&typeof z.appendChild=="function"&&typeof z.getBoundingClientRect=="function"}function Nn(z){return typeof z.drawArrays=="function"||typeof z.drawElements=="function"}function zn(z){return typeof z=="string"?z.split():(le(Array.isArray(z),"invalid extension array"),z)}function Zn(z){return typeof z=="string"?(le(typeof document<"u","not supported outside of DOM"),document.querySelector(z)):z}function ur(z){var ue=z||{},Oe,rt,vt,et,pt={},Ct=[],Ft=[],Dt=typeof window>"u"?1:window.devicePixelRatio,ct=!1,Yt=function(Et){Et&&le.raise(Et)},Gt=function(){};if(typeof ue=="string"?(le(typeof document<"u","selector queries only supported in DOM enviroments"),Oe=document.querySelector(ue),le(Oe,"invalid query string for element")):typeof ue=="object"?ri(ue)?Oe=ue:Nn(ue)?(et=ue,vt=et.canvas):(le.constructor(ue),"gl"in ue?et=ue.gl:"canvas"in ue?vt=Zn(ue.canvas):"container"in ue&&(rt=Zn(ue.container)),"attributes"in ue&&(pt=ue.attributes,le.type(pt,"object","invalid context attributes")),"extensions"in ue&&(Ct=zn(ue.extensions)),"optionalExtensions"in ue&&(Ft=zn(ue.optionalExtensions)),"onDone"in ue&&(le.type(ue.onDone,"function","invalid or missing onDone callback"),Yt=ue.onDone),"profile"in ue&&(ct=!!ue.profile),"pixelRatio"in ue&&(Dt=+ue.pixelRatio,le(Dt>0,"invalid pixel ratio"))):le.raise("invalid arguments to regl"),Oe&&(Oe.nodeName.toLowerCase()==="canvas"?vt=Oe:rt=Oe),!et){if(!vt){le(typeof document<"u","must manually specify webgl context outside of DOM environments");var jt=Si(rt||document.body,Yt,Dt);if(!jt)return null;vt=jt.canvas,Gt=jt.onDestroy}pt.premultipliedAlpha===void 0&&(pt.premultipliedAlpha=!0),et=Zo(vt,pt)}return et?{gl:et,canvas:vt,container:rt,extensions:Ct,optionalExtensions:Ft,pixelRatio:Dt,profile:ct,onDone:Yt,onDestroy:Gt}:(Gt(),Yt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function oo(z,ue){var Oe={};function rt(pt){le.type(pt,"string","extension name must be string");var Ct=pt.toLowerCase(),Ft;try{Ft=Oe[Ct]=z.getExtension(Ct)}catch{}return!!Ft}for(var vt=0;vt<ue.extensions.length;++vt){var et=ue.extensions[vt];if(!rt(et))return ue.onDestroy(),ue.onDone('"'+et+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ue.optionalExtensions.forEach(rt),{extensions:Oe,restore:function(){Object.keys(Oe).forEach(function(pt){if(Oe[pt]&&!rt(pt))throw new Error("(regl): error restoring extension "+pt)})}}}function Vr(z,ue){for(var Oe=Array(z),rt=0;rt<z;++rt)Oe[rt]=ue(rt);return Oe}var gl=5120,Wa=5121,_l=5122,ls=5123,tp=5124,wc=5125,ma=5126;function Bs(z){for(var ue=16;ue<=1<<28;ue*=16)if(z<=ue)return ue;return 0}function Dn(z){var ue,Oe;return ue=(z>65535)<<4,z>>>=ue,Oe=(z>255)<<3,z>>>=Oe,ue|=Oe,Oe=(z>15)<<2,z>>>=Oe,ue|=Oe,Oe=(z>3)<<1,z>>>=Oe,ue|=Oe,ue|z>>1}function Vd(){var z=Vr(8,function(){return[]});function ue(et){var pt=Bs(et),Ct=z[Dn(pt)>>2];return Ct.length>0?Ct.pop():new ArrayBuffer(pt)}function Oe(et){z[Dn(et.byteLength)>>2].push(et)}function rt(et,pt){var Ct=null;switch(et){case gl:Ct=new Int8Array(ue(pt),0,pt);break;case Wa:Ct=new Uint8Array(ue(pt),0,pt);break;case _l:Ct=new Int16Array(ue(2*pt),0,pt);break;case ls:Ct=new Uint16Array(ue(2*pt),0,pt);break;case tp:Ct=new Int32Array(ue(4*pt),0,pt);break;case wc:Ct=new Uint32Array(ue(4*pt),0,pt);break;case ma:Ct=new Float32Array(ue(4*pt),0,pt);break;default:return null}return Ct.length!==pt?Ct.subarray(0,pt):Ct}function vt(et){Oe(et.buffer)}return{alloc:ue,free:Oe,allocType:rt,freeType:vt}}var So=Vd();So.zero=Vd();var Ec=3408,Ji=3410,aa=3411,Pu=3412,Da=3413,ya=3414,ja=3415,Oc=33901,Sc=33902,Bd=3379,Us=3386,Ud=34921,xc=36347,np=36348,Ll=35661,Gd=35660,bl=34930,Mc=36349,Ru=34076,Ac=34024,Tc=7936,rp=7937,zd=7938,Zr=35724,qr=34047,Hd=36063,ss=34852,ga=3553,Cu=34067,Wd=34069,zo=33984,$l=6408,Fl=5126,Du=5121,us=36160,xi=36053,kc=36064,Xd=16384,Nc=function(z,ue){var Oe=1;ue.ext_texture_filter_anisotropic&&(Oe=z.getParameter(qr));var rt=1,vt=1;ue.webgl_draw_buffers&&(rt=z.getParameter(ss),vt=z.getParameter(Hd));var et=!!ue.oes_texture_float;if(et){var pt=z.createTexture();z.bindTexture(ga,pt),z.texImage2D(ga,0,$l,1,1,0,$l,Fl,null);var Ct=z.createFramebuffer();if(z.bindFramebuffer(us,Ct),z.framebufferTexture2D(us,kc,ga,pt,0),z.bindTexture(ga,null),z.checkFramebufferStatus(us)!==xi)et=!1;else{z.viewport(0,0,1,1),z.clearColor(1,0,0,1),z.clear(Xd);var Ft=So.allocType(Fl,4);z.readPixels(0,0,1,1,$l,Fl,Ft),z.getError()?et=!1:(z.deleteFramebuffer(Ct),z.deleteTexture(pt),et=Ft[0]===1),So.freeType(Ft)}}var Dt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ct=!0;if(!Dt){var Yt=z.createTexture(),Gt=So.allocType(Du,36);z.activeTexture(zo),z.bindTexture(Cu,Yt),z.texImage2D(Wd,0,$l,3,3,0,$l,Du,Gt),So.freeType(Gt),z.bindTexture(Cu,null),z.deleteTexture(Yt),ct=!z.getError()}return{colorBits:[z.getParameter(Ji),z.getParameter(aa),z.getParameter(Pu),z.getParameter(Da)],depthBits:z.getParameter(ya),stencilBits:z.getParameter(ja),subpixelBits:z.getParameter(Ec),extensions:Object.keys(ue).filter(function(jt){return!!ue[jt]}),maxAnisotropic:Oe,maxDrawbuffers:rt,maxColorAttachments:vt,pointSizeDims:z.getParameter(Oc),lineWidthDims:z.getParameter(Sc),maxViewportDims:z.getParameter(Us),maxCombinedTextureUnits:z.getParameter(Ll),maxCubeMapSize:z.getParameter(Ru),maxRenderbufferSize:z.getParameter(Ac),maxTextureUnits:z.getParameter(bl),maxTextureSize:z.getParameter(Bd),maxAttributes:z.getParameter(Ud),maxVertexUniforms:z.getParameter(xc),maxVertexTextureUnits:z.getParameter(Gd),maxVaryingVectors:z.getParameter(np),maxFragmentUniforms:z.getParameter(Mc),glsl:z.getParameter(Zr),renderer:z.getParameter(rp),vendor:z.getParameter(Tc),version:z.getParameter(zd),readFloat:et,npotTextureCube:ct}};function Fi(z){return!!z&&typeof z=="object"&&Array.isArray(z.shape)&&Array.isArray(z.stride)&&typeof z.offset=="number"&&z.shape.length===z.stride.length&&(Array.isArray(z.data)||n(z.data))}var ci=function(z){return Object.keys(z).map(function(ue){return z[ue]})},_a={shape:Bi,flatten:Yd};function po(z,ue,Oe){for(var rt=0;rt<ue;++rt)Oe[rt]=z[rt]}function op(z,ue,Oe,rt){for(var vt=0,et=0;et<ue;++et)for(var pt=z[et],Ct=0;Ct<Oe;++Ct)rt[vt++]=pt[Ct]}function Vi(z,ue,Oe,rt,vt,et){for(var pt=et,Ct=0;Ct<ue;++Ct)for(var Ft=z[Ct],Dt=0;Dt<Oe;++Dt)for(var ct=Ft[Dt],Yt=0;Yt<rt;++Yt)vt[pt++]=ct[Yt]}function qd(z,ue,Oe,rt,vt){for(var et=1,pt=Oe+1;pt<ue.length;++pt)et*=ue[pt];var Ct=ue[Oe];if(ue.length-Oe===4){var Ft=ue[Oe+1],Dt=ue[Oe+2],ct=ue[Oe+3];for(pt=0;pt<Ct;++pt)Vi(z[pt],Ft,Dt,ct,rt,vt),vt+=et}else for(pt=0;pt<Ct;++pt)qd(z[pt],ue,Oe+1,rt,vt),vt+=et}function Yd(z,ue,Oe,rt){var vt=1;if(ue.length)for(var et=0;et<ue.length;++et)vt*=ue[et];else vt=0;var pt=rt||So.allocType(Oe,vt);switch(ue.length){case 0:break;case 1:po(z,ue[0],pt);break;case 2:op(z,ue[0],ue[1],pt);break;case 3:Vi(z,ue[0],ue[1],ue[2],pt,0);break;default:qd(z,ue,0,pt,0)}return pt}function Bi(z){for(var ue=[],Oe=z;Oe.length;Oe=Oe[0])ue.push(Oe.length);return ue}var Qi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Pc=5120,zr=5122,di=5124,ju=5121,Kd=5123,Rc=5125,Iu=5126,Xa=5126,Ui={int8:Pc,int16:zr,int32:di,uint8:ju,uint16:Kd,uint32:Rc,float:Iu,float32:Xa},cs=35048,ea=35040,ba={dynamic:cs,stream:ea,static:35044},Lr=_a.flatten,Gi=_a.shape,Ia=35044,gi=35040,ds=5121,Vl=5126,La=[];La[5120]=1,La[5122]=2,La[5124]=4,La[5121]=1,La[5123]=2,La[5125]=4,La[5126]=4;function _o(z){return Qi[Object.prototype.toString.call(z)]|0}function Gs(z,ue){for(var Oe=0;Oe<ue.length;++Oe)z[Oe]=ue[Oe]}function qa(z,ue,Oe,rt,vt,et,pt){for(var Ct=0,Ft=0;Ft<Oe;++Ft)for(var Dt=0;Dt<rt;++Dt)z[Ct++]=ue[vt*Ft+et*Dt+pt]}function wa(z,ue,Oe,rt){var vt=0,et={};function pt(Ke){this.id=vt++,this.buffer=z.createBuffer(),this.type=Ke,this.usage=Ia,this.byteLength=0,this.dimension=1,this.dtype=ds,this.persistentData=null,Oe.profile&&(this.stats={size:0})}pt.prototype.bind=function(){z.bindBuffer(this.type,this.buffer)},pt.prototype.destroy=function(){Gt(this)};var Ct=[];function Ft(Ke,ut){var $t=Ct.pop();return $t||($t=new pt(Ke)),$t.bind(),Yt($t,ut,gi,0,1,!1),$t}function Dt(Ke){Ct.push(Ke)}function ct(Ke,ut,$t){Ke.byteLength=ut.byteLength,z.bufferData(Ke.type,ut,$t)}function Yt(Ke,ut,$t,tn,Mt,rn){var kt;if(Ke.usage=$t,Array.isArray(ut)){if(Ke.dtype=tn||Vl,ut.length>0){var Xt;if(Array.isArray(ut[0])){kt=Gi(ut);for(var At=1,Kt=1;Kt<kt.length;++Kt)At*=kt[Kt];Ke.dimension=At,Xt=Lr(ut,kt,Ke.dtype),ct(Ke,Xt,$t),rn?Ke.persistentData=Xt:So.freeType(Xt)}else if(typeof ut[0]=="number"){Ke.dimension=Mt;var Cn=So.allocType(Ke.dtype,ut.length);Gs(Cn,ut),ct(Ke,Cn,$t),rn?Ke.persistentData=Cn:So.freeType(Cn)}else n(ut[0])?(Ke.dimension=ut[0].length,Ke.dtype=tn||_o(ut[0])||Vl,Xt=Lr(ut,[ut.length,ut[0].length],Ke.dtype),ct(Ke,Xt,$t),rn?Ke.persistentData=Xt:So.freeType(Xt)):le.raise("invalid buffer data")}}else if(n(ut))Ke.dtype=tn||_o(ut),Ke.dimension=Mt,ct(Ke,ut,$t),rn&&(Ke.persistentData=new Uint8Array(new Uint8Array(ut.buffer)));else if(Fi(ut)){kt=ut.shape;var Xn=ut.stride,It=ut.offset,Nt=0,xt=0,Bn=0,ir=0;kt.length===1?(Nt=kt[0],xt=1,Bn=Xn[0],ir=0):kt.length===2?(Nt=kt[0],xt=kt[1],Bn=Xn[0],ir=Xn[1]):le.raise("invalid shape"),Ke.dtype=tn||_o(ut.data)||Vl,Ke.dimension=xt;var fn=So.allocType(Ke.dtype,Nt*xt);qa(fn,ut.data,Nt,xt,Bn,ir,It),ct(Ke,fn,$t),rn?Ke.persistentData=fn:So.freeType(fn)}else ut instanceof ArrayBuffer?(Ke.dtype=ds,Ke.dimension=Mt,ct(Ke,ut,$t),rn&&(Ke.persistentData=new Uint8Array(new Uint8Array(ut)))):le.raise("invalid buffer data")}function Gt(Ke){ue.bufferCount--,rt(Ke);var ut=Ke.buffer;le(ut,"buffer must not be deleted already"),z.deleteBuffer(ut),Ke.buffer=null,delete et[Ke.id]}function jt(Ke,ut,$t,tn){ue.bufferCount++;var Mt=new pt(ut);et[Mt.id]=Mt;function rn(At){var Kt=Ia,Cn=null,Xn=0,It=0,Nt=1;return Array.isArray(At)||n(At)||Fi(At)||At instanceof ArrayBuffer?Cn=At:typeof At=="number"?Xn=At|0:At&&(le.type(At,"object","buffer arguments must be an object, a number or an array"),"data"in At&&(le(Cn===null||Array.isArray(Cn)||n(Cn)||Fi(Cn),"invalid data for buffer"),Cn=At.data),"usage"in At&&(le.parameter(At.usage,ba,"invalid buffer usage"),Kt=ba[At.usage]),"type"in At&&(le.parameter(At.type,Ui,"invalid buffer type"),It=Ui[At.type]),"dimension"in At&&(le.type(At.dimension,"number","invalid dimension"),Nt=At.dimension|0),"length"in At&&(le.nni(Xn,"buffer length must be a nonnegative integer"),Xn=At.length|0)),Mt.bind(),Cn?Yt(Mt,Cn,Kt,It,Nt,tn):(Xn&&z.bufferData(Mt.type,Xn,Kt),Mt.dtype=It||ds,Mt.usage=Kt,Mt.dimension=Nt,Mt.byteLength=Xn),Oe.profile&&(Mt.stats.size=Mt.byteLength*La[Mt.dtype]),rn}function kt(At,Kt){le(Kt+At.byteLength<=Mt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+At.byteLength+" starting from offset "+Kt+" to a buffer of size "+Mt.byteLength),z.bufferSubData(Mt.type,Kt,At)}function Xt(At,Kt){var Cn=(Kt||0)|0,Xn;if(Mt.bind(),n(At)||At instanceof ArrayBuffer)kt(At,Cn);else if(Array.isArray(At)){if(At.length>0)if(typeof At[0]=="number"){var It=So.allocType(Mt.dtype,At.length);Gs(It,At),kt(It,Cn),So.freeType(It)}else if(Array.isArray(At[0])||n(At[0])){Xn=Gi(At);var Nt=Lr(At,Xn,Mt.dtype);kt(Nt,Cn),So.freeType(Nt)}else le.raise("invalid buffer data")}else if(Fi(At)){Xn=At.shape;var xt=At.stride,Bn=0,ir=0,fn=0,cr=0;Xn.length===1?(Bn=Xn[0],ir=1,fn=xt[0],cr=0):Xn.length===2?(Bn=Xn[0],ir=Xn[1],fn=xt[0],cr=xt[1]):le.raise("invalid shape");var qn=Array.isArray(At.data)?Mt.dtype:_o(At.data),lr=So.allocType(qn,Bn*ir);qa(lr,At.data,Bn,ir,fn,cr,At.offset),kt(lr,Cn),So.freeType(lr)}else le.raise("invalid data for buffer subdata");return rn}return $t||rn(Ke),rn._reglType="buffer",rn._buffer=Mt,rn.subdata=Xt,Oe.profile&&(rn.stats=Mt.stats),rn.destroy=function(){Gt(Mt)},rn}function Et(){ci(et).forEach(function(Ke){Ke.buffer=z.createBuffer(),z.bindBuffer(Ke.type,Ke.buffer),z.bufferData(Ke.type,Ke.persistentData||Ke.byteLength,Ke.usage)})}return Oe.profile&&(ue.getTotalBufferSize=function(){var Ke=0;return Object.keys(et).forEach(function(ut){Ke+=et[ut].stats.size}),Ke}),{create:jt,createStream:Ft,destroyStream:Dt,clear:function(){ci(et).forEach(Gt),Ct.forEach(Gt)},getBuffer:function(Ke){return Ke&&Ke._buffer instanceof pt?Ke._buffer:null},restore:Et,_initBuffer:Yt}}var Cc=0,ip=0,Dc=1,Jo=1,zs=4,Ya=4,oi={points:Cc,point:ip,lines:Dc,line:Jo,triangles:zs,triangle:Ya,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},jc=0,la=1,Ea=4,Lu=5120,zi=5121,ta=5122,fi=5123,sa=5124,Ii=5125,ft=34963,Vt=35040,Ut=35044;function vn(z,ue,Oe,rt){var vt={},et=0,pt={uint8:zi,uint16:fi};ue.oes_element_index_uint&&(pt.uint32=Ii);function Ct(Et){this.id=et++,vt[this.id]=this,this.buffer=Et,this.primType=Ea,this.vertCount=0,this.type=0}Ct.prototype.bind=function(){this.buffer.bind()};var Ft=[];function Dt(Et){var Ke=Ft.pop();return Ke||(Ke=new Ct(Oe.create(null,ft,!0,!1)._buffer)),Yt(Ke,Et,Vt,-1,-1,0,0),Ke}function ct(Et){Ft.push(Et)}function Yt(Et,Ke,ut,$t,tn,Mt,rn){Et.buffer.bind();var kt;if(Ke){var Xt=rn;!rn&&(!n(Ke)||Fi(Ke)&&!n(Ke.data))&&(Xt=ue.oes_element_index_uint?Ii:fi),Oe._initBuffer(Et.buffer,Ke,ut,Xt,3)}else z.bufferData(ft,Mt,ut),Et.buffer.dtype=kt||zi,Et.buffer.usage=ut,Et.buffer.dimension=3,Et.buffer.byteLength=Mt;if(kt=rn,!rn){switch(Et.buffer.dtype){case zi:case Lu:kt=zi;break;case fi:case ta:kt=fi;break;case Ii:case sa:kt=Ii;break;default:le.raise("unsupported type for element array")}Et.buffer.dtype=kt}Et.type=kt,le(kt!==Ii||!!ue.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var At=tn;At<0&&(At=Et.buffer.byteLength,kt===fi?At>>=1:kt===Ii&&(At>>=2)),Et.vertCount=At;var Kt=$t;if($t<0){Kt=Ea;var Cn=Et.buffer.dimension;Cn===1&&(Kt=jc),Cn===2&&(Kt=la),Cn===3&&(Kt=Ea)}Et.primType=Kt}function Gt(Et){rt.elementsCount--,le(Et.buffer!==null,"must not double destroy elements"),delete vt[Et.id],Et.buffer.destroy(),Et.buffer=null}function jt(Et,Ke){var ut=Oe.create(null,ft,!0),$t=new Ct(ut._buffer);rt.elementsCount++;function tn(Mt){if(!Mt)ut(),$t.primType=Ea,$t.vertCount=0,$t.type=zi;else if(typeof Mt=="number")ut(Mt),$t.primType=Ea,$t.vertCount=Mt|0,$t.type=zi;else{var rn=null,kt=Ut,Xt=-1,At=-1,Kt=0,Cn=0;Array.isArray(Mt)||n(Mt)||Fi(Mt)?rn=Mt:(le.type(Mt,"object","invalid arguments for elements"),"data"in Mt&&(rn=Mt.data,le(Array.isArray(rn)||n(rn)||Fi(rn),"invalid data for element buffer")),"usage"in Mt&&(le.parameter(Mt.usage,ba,"invalid element buffer usage"),kt=ba[Mt.usage]),"primitive"in Mt&&(le.parameter(Mt.primitive,oi,"invalid element buffer primitive"),Xt=oi[Mt.primitive]),"count"in Mt&&(le(typeof Mt.count=="number"&&Mt.count>=0,"invalid vertex count for elements"),At=Mt.count|0),"type"in Mt&&(le.parameter(Mt.type,pt,"invalid buffer type"),Cn=pt[Mt.type]),"length"in Mt?Kt=Mt.length|0:(Kt=At,Cn===fi||Cn===ta?Kt*=2:(Cn===Ii||Cn===sa)&&(Kt*=4))),Yt($t,rn,kt,Xt,At,Kt,Cn)}return tn}return tn(Et),tn._reglType="elements",tn._elements=$t,tn.subdata=function(Mt,rn){return ut.subdata(Mt,rn),tn},tn.destroy=function(){Gt($t)},tn}return{create:jt,createStream:Dt,destroyStream:ct,getElements:function(Et){return typeof Et=="function"&&Et._elements instanceof Ct?Et._elements:null},clear:function(){ci(vt).forEach(Gt)}}}var hr=new Float32Array(1),$r=new Uint32Array(hr.buffer),bo=5123;function P(z){for(var ue=So.allocType(bo,z.length),Oe=0;Oe<z.length;++Oe)if(isNaN(z[Oe]))ue[Oe]=65535;else if(z[Oe]===1/0)ue[Oe]=31744;else if(z[Oe]===-1/0)ue[Oe]=64512;else{hr[0]=z[Oe];var rt=$r[0],vt=rt>>>31<<15,et=(rt<<1>>>24)-127,pt=rt>>13&1023;if(et<-24)ue[Oe]=vt;else if(et<-14){var Ct=-14-et;ue[Oe]=vt+(pt+1024>>Ct)}else et>15?ue[Oe]=vt+31744:ue[Oe]=vt+(et+15<<10)+pt}return ue}function R(z){return Array.isArray(z)||n(z)}var H=function(z){return!(z&z-1)&&!!z},ae=34467,be=3553,qe=34067,gt=34069,qt=6408,On=6406,xr=6407,dn=6409,Yr=6410,wr=32854,Ur=32855,ua=36194,Po=32819,na=32820,wl=33635,El=34042,Bl=6402,fs=34041,Ka=35904,ps=35906,ii=36193,Ul=33776,Ol=33777,Za=33778,Ja=33779,Hs=35986,ph=35987,hh=34798,ap=35840,Ic=35841,Ws=35842,Zd=35843,vh=36196,Xs=5121,Lc=5123,Jd=5125,Ho=5126,Hi=10242,Qd=10243,ef=10497,$u=33071,Xv=33648,Fu=10240,Vu=10241,$c=9728,qs=9729,hs=9984,Bu=9985,Fc=9986,vs=9987,qv=33170,Vc=4352,Yv=4353,Kv=4354,mh=34046,tf=3317,Li=37440,yh=37441,se=37443,Ys=37444,Gl=33984,$a=[hs,Fc,Bu,vs],Fr=[0,dn,Yr,xr,qt],Mi={};Mi[dn]=Mi[On]=Mi[Bl]=1,Mi[fs]=Mi[Yr]=2,Mi[xr]=Mi[Ka]=3,Mi[qt]=Mi[ps]=4;function Hr(z){return"[object "+z+"]"}var Qa=Hr("HTMLCanvasElement"),zl=Hr("OffscreenCanvas"),Oa=Hr("CanvasRenderingContext2D"),nf=Hr("ImageBitmap"),rf=Hr("HTMLImageElement"),lp=Hr("HTMLVideoElement"),gh=Object.keys(Qi).concat([Qa,zl,Oa,nf,rf,lp]),Hl=[];Hl[Xs]=1,Hl[Ho]=4,Hl[ii]=2,Hl[Lc]=2,Hl[Jd]=4;var Wo=[];Wo[wr]=2,Wo[Ur]=2,Wo[ua]=2,Wo[fs]=4,Wo[Ul]=.5,Wo[Ol]=.5,Wo[Za]=1,Wo[Ja]=1,Wo[Hs]=.5,Wo[ph]=1,Wo[hh]=1,Wo[ap]=.5,Wo[Ic]=.25,Wo[Ws]=.5,Wo[Zd]=.25,Wo[vh]=.5;function Uu(z){return Array.isArray(z)&&(z.length===0||typeof z[0]=="number")}function sp(z){if(!Array.isArray(z))return!1;var ue=z.length;return!(ue===0||!R(z[0]))}function Wl(z){return Object.prototype.toString.call(z)}function el(z){return Wl(z)===Qa}function Bc(z){return Wl(z)===zl}function ms(z){return Wl(z)===Oa}function Sa(z){return Wl(z)===nf}function up(z){return Wl(z)===rf}function cp(z){return Wl(z)===lp}function tl(z){if(!z)return!1;var ue=Wl(z);return gh.indexOf(ue)>=0?!0:Uu(z)||sp(z)||Fi(z)}function xo(z){return Qi[Object.prototype.toString.call(z)]|0}function _h(z,ue){var Oe=ue.length;switch(z.type){case Xs:case Lc:case Jd:case Ho:var rt=So.allocType(z.type,Oe);rt.set(ue),z.data=rt;break;case ii:z.data=P(ue);break;default:le.raise("unsupported texture type, must specify a typed array")}}function dp(z,ue){return So.allocType(z.type===ii?Ho:z.type,ue)}function Xo(z,ue){z.type===ii?(z.data=P(ue),So.freeType(ue)):z.data=ue}function Jr(z,ue,Oe,rt,vt,et){for(var pt=z.width,Ct=z.height,Ft=z.channels,Dt=pt*Ct*Ft,ct=dp(z,Dt),Yt=0,Gt=0;Gt<Ct;++Gt)for(var jt=0;jt<pt;++jt)for(var Et=0;Et<Ft;++Et)ct[Yt++]=ue[Oe*jt+rt*Gt+vt*Et+et];Xo(z,ct)}function ai(z,ue,Oe,rt,vt,et){var pt;if(typeof Wo[z]<"u"?pt=Wo[z]:pt=Mi[z]*Hl[ue],et&&(pt*=6),vt){for(var Ct=0,Ft=Oe;Ft>=1;)Ct+=pt*Ft*Ft,Ft/=2;return Ct}else return pt*Oe*rt}function Pr(z,ue,Oe,rt,vt,et,pt){var Ct={"don't care":Vc,"dont care":Vc,nice:Kv,fast:Yv},Ft={repeat:ef,clamp:$u,mirror:Xv},Dt={nearest:$c,linear:qs},ct=o({mipmap:vs,"nearest mipmap nearest":hs,"linear mipmap nearest":Bu,"nearest mipmap linear":Fc,"linear mipmap linear":vs},Dt),Yt={none:0,browser:Ys},Gt={uint8:Xs,rgba4:Po,rgb565:wl,"rgb5 a1":na},jt={alpha:On,luminance:dn,"luminance alpha":Yr,rgb:xr,rgba:qt,rgba4:wr,"rgb5 a1":Ur,rgb565:ua},Et={};ue.ext_srgb&&(jt.srgb=Ka,jt.srgba=ps),ue.oes_texture_float&&(Gt.float32=Gt.float=Ho),ue.oes_texture_half_float&&(Gt.float16=Gt["half float"]=ii),ue.webgl_depth_texture&&(o(jt,{depth:Bl,"depth stencil":fs}),o(Gt,{uint16:Lc,uint32:Jd,"depth stencil":El})),ue.webgl_compressed_texture_s3tc&&o(Et,{"rgb s3tc dxt1":Ul,"rgba s3tc dxt1":Ol,"rgba s3tc dxt3":Za,"rgba s3tc dxt5":Ja}),ue.webgl_compressed_texture_atc&&o(Et,{"rgb atc":Hs,"rgba atc explicit alpha":ph,"rgba atc interpolated alpha":hh}),ue.webgl_compressed_texture_pvrtc&&o(Et,{"rgb pvrtc 4bppv1":ap,"rgb pvrtc 2bppv1":Ic,"rgba pvrtc 4bppv1":Ws,"rgba pvrtc 2bppv1":Zd}),ue.webgl_compressed_texture_etc1&&(Et["rgb etc1"]=vh);var Ke=Array.prototype.slice.call(z.getParameter(ae));Object.keys(Et).forEach(function(ge){var ot=Et[ge];Ke.indexOf(ot)>=0&&(jt[ge]=ot)});var ut=Object.keys(jt);Oe.textureFormats=ut;var $t=[];Object.keys(jt).forEach(function(ge){var ot=jt[ge];$t[ot]=ge});var tn=[];Object.keys(Gt).forEach(function(ge){var ot=Gt[ge];tn[ot]=ge});var Mt=[];Object.keys(Dt).forEach(function(ge){var ot=Dt[ge];Mt[ot]=ge});var rn=[];Object.keys(ct).forEach(function(ge){var ot=ct[ge];rn[ot]=ge});var kt=[];Object.keys(Ft).forEach(function(ge){var ot=Ft[ge];kt[ot]=ge});var Xt=ut.reduce(function(ge,ot){var tt=jt[ot];return tt===dn||tt===On||tt===dn||tt===Yr||tt===Bl||tt===fs||ue.ext_srgb&&(tt===Ka||tt===ps)?ge[tt]=tt:tt===Ur||ot.indexOf("rgba")>=0?ge[tt]=qt:ge[tt]=xr,ge},{});function At(){this.internalformat=qt,this.format=qt,this.type=Xs,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Ys,this.width=0,this.height=0,this.channels=0}function Kt(ge,ot){ge.internalformat=ot.internalformat,ge.format=ot.format,ge.type=ot.type,ge.compressed=ot.compressed,ge.premultiplyAlpha=ot.premultiplyAlpha,ge.flipY=ot.flipY,ge.unpackAlignment=ot.unpackAlignment,ge.colorSpace=ot.colorSpace,ge.width=ot.width,ge.height=ot.height,ge.channels=ot.channels}function Cn(ge,ot){if(!(typeof ot!="object"||!ot)){if("premultiplyAlpha"in ot&&(le.type(ot.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ge.premultiplyAlpha=ot.premultiplyAlpha),"flipY"in ot&&(le.type(ot.flipY,"boolean","invalid texture flip"),ge.flipY=ot.flipY),"alignment"in ot&&(le.oneOf(ot.alignment,[1,2,4,8],"invalid texture unpack alignment"),ge.unpackAlignment=ot.alignment),"colorSpace"in ot&&(le.parameter(ot.colorSpace,Yt,"invalid colorSpace"),ge.colorSpace=Yt[ot.colorSpace]),"type"in ot){var tt=ot.type;le(ue.oes_texture_float||!(tt==="float"||tt==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),le(ue.oes_texture_half_float||!(tt==="half float"||tt==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),le(ue.webgl_depth_texture||!(tt==="uint16"||tt==="uint32"||tt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),le.parameter(tt,Gt,"invalid texture type"),ge.type=Gt[tt]}var sn=ge.width,vr=ge.height,ve=ge.channels,ie=!1;"shape"in ot?(le(Array.isArray(ot.shape)&&ot.shape.length>=2,"shape must be an array"),sn=ot.shape[0],vr=ot.shape[1],ot.shape.length===3&&(ve=ot.shape[2],le(ve>0&&ve<=4,"invalid number of channels"),ie=!0),le(sn>=0&&sn<=Oe.maxTextureSize,"invalid width"),le(vr>=0&&vr<=Oe.maxTextureSize,"invalid height")):("radius"in ot&&(sn=vr=ot.radius,le(sn>=0&&sn<=Oe.maxTextureSize,"invalid radius")),"width"in ot&&(sn=ot.width,le(sn>=0&&sn<=Oe.maxTextureSize,"invalid width")),"height"in ot&&(vr=ot.height,le(vr>=0&&vr<=Oe.maxTextureSize,"invalid height")),"channels"in ot&&(ve=ot.channels,le(ve>0&&ve<=4,"invalid number of channels"),ie=!0)),ge.width=sn|0,ge.height=vr|0,ge.channels=ve|0;var Re=!1;if("format"in ot){var ze=ot.format;le(ue.webgl_depth_texture||!(ze==="depth"||ze==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),le.parameter(ze,jt,"invalid texture format");var Ze=ge.internalformat=jt[ze];ge.format=Xt[Ze],ze in Gt&&("type"in ot||(ge.type=Gt[ze])),ze in Et&&(ge.compressed=!0),Re=!0}!ie&&Re?ge.channels=Mi[ge.format]:ie&&!Re?ge.channels!==Fr[ge.format]&&(ge.format=ge.internalformat=Fr[ge.channels]):Re&&ie&&le(ge.channels===Mi[ge.format],"number of channels inconsistent with specified format")}}function Xn(ge){z.pixelStorei(Li,ge.flipY),z.pixelStorei(yh,ge.premultiplyAlpha),z.pixelStorei(se,ge.colorSpace),z.pixelStorei(tf,ge.unpackAlignment)}function It(){At.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Nt(ge,ot){var tt=null;if(tl(ot)?tt=ot:ot&&(le.type(ot,"object","invalid pixel data type"),Cn(ge,ot),"x"in ot&&(ge.xOffset=ot.x|0),"y"in ot&&(ge.yOffset=ot.y|0),tl(ot.data)&&(tt=ot.data)),le(!ge.compressed||tt instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ot.copy){le(!tt,"can not specify copy and data field for the same texture");var sn=vt.viewportWidth,vr=vt.viewportHeight;ge.width=ge.width||sn-ge.xOffset,ge.height=ge.height||vr-ge.yOffset,ge.needsCopy=!0,le(ge.xOffset>=0&&ge.xOffset<sn&&ge.yOffset>=0&&ge.yOffset<vr&&ge.width>0&&ge.width<=sn&&ge.height>0&&ge.height<=vr,"copy texture read out of bounds")}else if(!tt)ge.width=ge.width||1,ge.height=ge.height||1,ge.channels=ge.channels||4;else if(n(tt))ge.channels=ge.channels||4,ge.data=tt,!("type"in ot)&&ge.type===Xs&&(ge.type=xo(tt));else if(Uu(tt))ge.channels=ge.channels||4,_h(ge,tt),ge.alignment=1,ge.needsFree=!0;else if(Fi(tt)){var ve=tt.data;!Array.isArray(ve)&&ge.type===Xs&&(ge.type=xo(ve));var ie=tt.shape,Re=tt.stride,ze,Ze,De,Ce,Fe,he;ie.length===3?(De=ie[2],he=Re[2]):(le(ie.length===2,"invalid ndarray pixel data, must be 2 or 3D"),De=1,he=1),ze=ie[0],Ze=ie[1],Ce=Re[0],Fe=Re[1],ge.alignment=1,ge.width=ze,ge.height=Ze,ge.channels=De,ge.format=ge.internalformat=Fr[De],ge.needsFree=!0,Jr(ge,ve,Ce,Fe,he,tt.offset)}else if(el(tt)||Bc(tt)||ms(tt))el(tt)||Bc(tt)?ge.element=tt:ge.element=tt.canvas,ge.width=ge.element.width,ge.height=ge.element.height,ge.channels=4;else if(Sa(tt))ge.element=tt,ge.width=tt.width,ge.height=tt.height,ge.channels=4;else if(up(tt))ge.element=tt,ge.width=tt.naturalWidth,ge.height=tt.naturalHeight,ge.channels=4;else if(cp(tt))ge.element=tt,ge.width=tt.videoWidth,ge.height=tt.videoHeight,ge.channels=4;else if(sp(tt)){var ke=ge.width||tt[0].length,pe=ge.height||tt.length,He=ge.channels;R(tt[0][0])?He=He||tt[0][0].length:He=He||1;for(var We=_a.shape(tt),h=1,g=0;g<We.length;++g)h*=We[g];var A=dp(ge,h);_a.flatten(tt,We,"",A),Xo(ge,A),ge.alignment=1,ge.width=ke,ge.height=pe,ge.channels=He,ge.format=ge.internalformat=Fr[He],ge.needsFree=!0}ge.type===Ho?le(Oe.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ge.type===ii&&le(Oe.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function xt(ge,ot,tt){var sn=ge.element,vr=ge.data,ve=ge.internalformat,ie=ge.format,Re=ge.type,ze=ge.width,Ze=ge.height;Xn(ge),sn?z.texImage2D(ot,tt,ie,ie,Re,sn):ge.compressed?z.compressedTexImage2D(ot,tt,ve,ze,Ze,0,vr):ge.needsCopy?(rt(),z.copyTexImage2D(ot,tt,ie,ge.xOffset,ge.yOffset,ze,Ze,0)):z.texImage2D(ot,tt,ie,ze,Ze,0,ie,Re,vr||null)}function Bn(ge,ot,tt,sn,vr){var ve=ge.element,ie=ge.data,Re=ge.internalformat,ze=ge.format,Ze=ge.type,De=ge.width,Ce=ge.height;Xn(ge),ve?z.texSubImage2D(ot,vr,tt,sn,ze,Ze,ve):ge.compressed?z.compressedTexSubImage2D(ot,vr,tt,sn,Re,De,Ce,ie):ge.needsCopy?(rt(),z.copyTexSubImage2D(ot,vr,tt,sn,ge.xOffset,ge.yOffset,De,Ce)):z.texSubImage2D(ot,vr,tt,sn,De,Ce,ze,Ze,ie)}var ir=[];function fn(){return ir.pop()||new It}function cr(ge){ge.needsFree&&So.freeType(ge.data),It.call(ge),ir.push(ge)}function qn(){At.call(this),this.genMipmaps=!1,this.mipmapHint=Vc,this.mipmask=0,this.images=Array(16)}function lr(ge,ot,tt){var sn=ge.images[0]=fn();ge.mipmask=1,sn.width=ge.width=ot,sn.height=ge.height=tt,sn.channels=ge.channels=4}function Or(ge,ot){var tt=null;if(tl(ot))tt=ge.images[0]=fn(),Kt(tt,ge),Nt(tt,ot),ge.mipmask=1;else if(Cn(ge,ot),Array.isArray(ot.mipmap))for(var sn=ot.mipmap,vr=0;vr<sn.length;++vr)tt=ge.images[vr]=fn(),Kt(tt,ge),tt.width>>=vr,tt.height>>=vr,Nt(tt,sn[vr]),ge.mipmask|=1<<vr;else tt=ge.images[0]=fn(),Kt(tt,ge),Nt(tt,ot),ge.mipmask=1;Kt(ge,ge.images[0]),ge.compressed&&(ge.internalformat===Ul||ge.internalformat===Ol||ge.internalformat===Za||ge.internalformat===Ja)&&le(ge.width%4===0&&ge.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Vo(ge,ot){for(var tt=ge.images,sn=0;sn<tt.length;++sn){if(!tt[sn])return;xt(tt[sn],ot,sn)}}var jo=[];function ar(){var ge=jo.pop()||new qn;At.call(ge),ge.mipmask=0;for(var ot=0;ot<16;++ot)ge.images[ot]=null;return ge}function Qo(ge){for(var ot=ge.images,tt=0;tt<ot.length;++tt)ot[tt]&&cr(ot[tt]),ot[tt]=null;jo.push(ge)}function ho(){this.minFilter=$c,this.magFilter=$c,this.wrapS=$u,this.wrapT=$u,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Vc}function Bo(ge,ot){if("min"in ot){var tt=ot.min;le.parameter(tt,ct),ge.minFilter=ct[tt],$a.indexOf(ge.minFilter)>=0&&!("faces"in ot)&&(ge.genMipmaps=!0)}if("mag"in ot){var sn=ot.mag;le.parameter(sn,Dt),ge.magFilter=Dt[sn]}var vr=ge.wrapS,ve=ge.wrapT;if("wrap"in ot){var ie=ot.wrap;typeof ie=="string"?(le.parameter(ie,Ft),vr=ve=Ft[ie]):Array.isArray(ie)&&(le.parameter(ie[0],Ft),le.parameter(ie[1],Ft),vr=Ft[ie[0]],ve=Ft[ie[1]])}else{if("wrapS"in ot){var Re=ot.wrapS;le.parameter(Re,Ft),vr=Ft[Re]}if("wrapT"in ot){var ze=ot.wrapT;le.parameter(ze,Ft),ve=Ft[ze]}}if(ge.wrapS=vr,ge.wrapT=ve,"anisotropic"in ot){var Ze=ot.anisotropic;le(typeof Ze=="number"&&Ze>=1&&Ze<=Oe.maxAnisotropic,"aniso samples must be between 1 and "),ge.anisotropic=ot.anisotropic}if("mipmap"in ot){var De=!1;switch(typeof ot.mipmap){case"string":le.parameter(ot.mipmap,Ct,"invalid mipmap hint"),ge.mipmapHint=Ct[ot.mipmap],ge.genMipmaps=!0,De=!0;break;case"boolean":De=ge.genMipmaps=ot.mipmap;break;case"object":le(Array.isArray(ot.mipmap),"invalid mipmap type"),ge.genMipmaps=!1,De=!0;break;default:le.raise("invalid mipmap type")}De&&!("min"in ot)&&(ge.minFilter=hs)}}function Ko(ge,ot){z.texParameteri(ot,Vu,ge.minFilter),z.texParameteri(ot,Fu,ge.magFilter),z.texParameteri(ot,Hi,ge.wrapS),z.texParameteri(ot,Qd,ge.wrapT),ue.ext_texture_filter_anisotropic&&z.texParameteri(ot,mh,ge.anisotropic),ge.genMipmaps&&(z.hint(qv,ge.mipmapHint),z.generateMipmap(ot))}var li=0,hi={},ei=Oe.maxTextureUnits,wo=Array(ei).map(function(){return null});function er(ge){At.call(this),this.mipmask=0,this.internalformat=qt,this.id=li++,this.refCount=1,this.target=ge,this.texture=z.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ho,pt.profile&&(this.stats={size:0})}function vi(ge){z.activeTexture(Gl),z.bindTexture(ge.target,ge.texture)}function Dr(){var ge=wo[0];ge?z.bindTexture(ge.target,ge.texture):z.bindTexture(be,null)}function $n(ge){var ot=ge.texture;le(ot,"must not double destroy texture");var tt=ge.unit,sn=ge.target;tt>=0&&(z.activeTexture(Gl+tt),z.bindTexture(sn,null),wo[tt]=null),z.deleteTexture(ot),ge.texture=null,ge.params=null,ge.pixels=null,ge.refCount=0,delete hi[ge.id],et.textureCount--}o(er.prototype,{bind:function(){var ge=this;ge.bindCount+=1;var ot=ge.unit;if(ot<0){for(var tt=0;tt<ei;++tt){var sn=wo[tt];if(sn){if(sn.bindCount>0)continue;sn.unit=-1}wo[tt]=ge,ot=tt;break}ot>=ei&&le.raise("insufficient number of texture units"),pt.profile&&et.maxTextureUnits<ot+1&&(et.maxTextureUnits=ot+1),ge.unit=ot,z.activeTexture(Gl+ot),z.bindTexture(ge.target,ge.texture)}return ot},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$n(this)}});function yr(ge,ot){var tt=new er(be);hi[tt.id]=tt,et.textureCount++;function sn(ie,Re){var ze=tt.texInfo;ho.call(ze);var Ze=ar();return typeof ie=="number"?typeof Re=="number"?lr(Ze,ie|0,Re|0):lr(Ze,ie|0,ie|0):ie?(le.type(ie,"object","invalid arguments to regl.texture"),Bo(ze,ie),Or(Ze,ie)):lr(Ze,1,1),ze.genMipmaps&&(Ze.mipmask=(Ze.width<<1)-1),tt.mipmask=Ze.mipmask,Kt(tt,Ze),le.texture2D(ze,Ze,Oe),tt.internalformat=Ze.internalformat,sn.width=Ze.width,sn.height=Ze.height,vi(tt),Vo(Ze,be),Ko(ze,be),Dr(),Qo(Ze),pt.profile&&(tt.stats.size=ai(tt.internalformat,tt.type,Ze.width,Ze.height,ze.genMipmaps,!1)),sn.format=$t[tt.internalformat],sn.type=tn[tt.type],sn.mag=Mt[ze.magFilter],sn.min=rn[ze.minFilter],sn.wrapS=kt[ze.wrapS],sn.wrapT=kt[ze.wrapT],sn}function vr(ie,Re,ze,Ze){le(!!ie,"must specify image data");var De=Re|0,Ce=ze|0,Fe=Ze|0,he=fn();return Kt(he,tt),he.width=0,he.height=0,Nt(he,ie),he.width=he.width||(tt.width>>Fe)-De,he.height=he.height||(tt.height>>Fe)-Ce,le(tt.type===he.type&&tt.format===he.format&&tt.internalformat===he.internalformat,"incompatible format for texture.subimage"),le(De>=0&&Ce>=0&&De+he.width<=tt.width&&Ce+he.height<=tt.height,"texture.subimage write out of bounds"),le(tt.mipmask&1<<Fe,"missing mipmap data"),le(he.data||he.element||he.needsCopy,"missing image data"),vi(tt),Bn(he,be,De,Ce,Fe),Dr(),cr(he),sn}function ve(ie,Re){var ze=ie|0,Ze=Re|0||ze;if(ze===tt.width&&Ze===tt.height)return sn;sn.width=tt.width=ze,sn.height=tt.height=Ze,vi(tt);for(var De=0;tt.mipmask>>De;++De){var Ce=ze>>De,Fe=Ze>>De;if(!Ce||!Fe)break;z.texImage2D(be,De,tt.format,Ce,Fe,0,tt.format,tt.type,null)}return Dr(),pt.profile&&(tt.stats.size=ai(tt.internalformat,tt.type,ze,Ze,!1,!1)),sn}return sn(ge,ot),sn.subimage=vr,sn.resize=ve,sn._reglType="texture2d",sn._texture=tt,pt.profile&&(sn.stats=tt.stats),sn.destroy=function(){tt.decRef()},sn}function tr(ge,ot,tt,sn,vr,ve){var ie=new er(qe);hi[ie.id]=ie,et.cubeCount++;var Re=new Array(6);function ze(Ce,Fe,he,ke,pe,He){var We,h=ie.texInfo;for(ho.call(h),We=0;We<6;++We)Re[We]=ar();if(typeof Ce=="number"||!Ce){var g=Ce|0||1;for(We=0;We<6;++We)lr(Re[We],g,g)}else if(typeof Ce=="object")if(Fe)Or(Re[0],Ce),Or(Re[1],Fe),Or(Re[2],he),Or(Re[3],ke),Or(Re[4],pe),Or(Re[5],He);else if(Bo(h,Ce),Cn(ie,Ce),"faces"in Ce){var A=Ce.faces;for(le(Array.isArray(A)&&A.length===6,"cube faces must be a length 6 array"),We=0;We<6;++We)le(typeof A[We]=="object"&&!!A[We],"invalid input for cube map face"),Kt(Re[We],ie),Or(Re[We],A[We])}else for(We=0;We<6;++We)Or(Re[We],Ce);else le.raise("invalid arguments to cube map");for(Kt(ie,Re[0]),Oe.npotTextureCube||le(H(ie.width)&&H(ie.height),"your browser does not support non power or two texture dimensions"),h.genMipmaps?ie.mipmask=(Re[0].width<<1)-1:ie.mipmask=Re[0].mipmask,le.textureCube(ie,h,Re,Oe),ie.internalformat=Re[0].internalformat,ze.width=Re[0].width,ze.height=Re[0].height,vi(ie),We=0;We<6;++We)Vo(Re[We],gt+We);for(Ko(h,qe),Dr(),pt.profile&&(ie.stats.size=ai(ie.internalformat,ie.type,ze.width,ze.height,h.genMipmaps,!0)),ze.format=$t[ie.internalformat],ze.type=tn[ie.type],ze.mag=Mt[h.magFilter],ze.min=rn[h.minFilter],ze.wrapS=kt[h.wrapS],ze.wrapT=kt[h.wrapT],We=0;We<6;++We)Qo(Re[We]);return ze}function Ze(Ce,Fe,he,ke,pe){le(!!Fe,"must specify image data"),le(typeof Ce=="number"&&Ce===(Ce|0)&&Ce>=0&&Ce<6,"invalid face");var He=he|0,We=ke|0,h=pe|0,g=fn();return Kt(g,ie),g.width=0,g.height=0,Nt(g,Fe),g.width=g.width||(ie.width>>h)-He,g.height=g.height||(ie.height>>h)-We,le(ie.type===g.type&&ie.format===g.format&&ie.internalformat===g.internalformat,"incompatible format for texture.subimage"),le(He>=0&&We>=0&&He+g.width<=ie.width&&We+g.height<=ie.height,"texture.subimage write out of bounds"),le(ie.mipmask&1<<h,"missing mipmap data"),le(g.data||g.element||g.needsCopy,"missing image data"),vi(ie),Bn(g,gt+Ce,He,We,h),Dr(),cr(g),ze}function De(Ce){var Fe=Ce|0;if(Fe!==ie.width){ze.width=ie.width=Fe,ze.height=ie.height=Fe,vi(ie);for(var he=0;he<6;++he)for(var ke=0;ie.mipmask>>ke;++ke)z.texImage2D(gt+he,ke,ie.format,Fe>>ke,Fe>>ke,0,ie.format,ie.type,null);return Dr(),pt.profile&&(ie.stats.size=ai(ie.internalformat,ie.type,ze.width,ze.height,!1,!0)),ze}}return ze(ge,ot,tt,sn,vr,ve),ze.subimage=Ze,ze.resize=De,ze._reglType="textureCube",ze._texture=ie,pt.profile&&(ze.stats=ie.stats),ze.destroy=function(){ie.decRef()},ze}function Eo(){for(var ge=0;ge<ei;++ge)z.activeTexture(Gl+ge),z.bindTexture(be,null),wo[ge]=null;ci(hi).forEach($n),et.cubeCount=0,et.textureCount=0}pt.profile&&(et.getTotalTextureSize=function(){var ge=0;return Object.keys(hi).forEach(function(ot){ge+=hi[ot].stats.size}),ge});function Nl(){for(var ge=0;ge<ei;++ge){var ot=wo[ge];ot&&(ot.bindCount=0,ot.unit=-1,wo[ge]=null)}ci(hi).forEach(function(tt){tt.texture=z.createTexture(),z.bindTexture(tt.target,tt.texture);for(var sn=0;sn<32;++sn)if((tt.mipmask&1<<sn)!==0)if(tt.target===be)z.texImage2D(be,sn,tt.internalformat,tt.width>>sn,tt.height>>sn,0,tt.internalformat,tt.type,null);else for(var vr=0;vr<6;++vr)z.texImage2D(gt+vr,sn,tt.internalformat,tt.width>>sn,tt.height>>sn,0,tt.internalformat,tt.type,null);Ko(tt.texInfo,tt.target)})}function Ao(){for(var ge=0;ge<ei;++ge){var ot=wo[ge];ot&&(ot.bindCount=0,ot.unit=-1,wo[ge]=null),z.activeTexture(Gl+ge),z.bindTexture(be,null),z.bindTexture(qe,null)}}return{create2D:yr,createCube:tr,clear:Eo,getTexture:function(ge){return null},restore:Nl,refresh:Ao}}var mo=36161,Ln=32854,yo=32855,Uc=36194,Sl=33189,of=36168,Ro=34041,Io=35907,fp=34836,pp=34842,Gc=34843,Wi=[];Wi[Ln]=2,Wi[yo]=2,Wi[Uc]=2,Wi[Sl]=2,Wi[of]=1,Wi[Ro]=4,Wi[Io]=4,Wi[fp]=16,Wi[pp]=8,Wi[Gc]=6;function af(z,ue,Oe){return Wi[z]*ue*Oe}var Gu=function(z,ue,Oe,rt,vt){var et={rgba4:Ln,rgb565:Uc,"rgb5 a1":yo,depth:Sl,stencil:of,"depth stencil":Ro};ue.ext_srgb&&(et.srgba=Io),ue.ext_color_buffer_half_float&&(et.rgba16f=pp,et.rgb16f=Gc),ue.webgl_color_buffer_float&&(et.rgba32f=fp);var pt=[];Object.keys(et).forEach(function(jt){var Et=et[jt];pt[Et]=jt});var Ct=0,Ft={};function Dt(jt){this.id=Ct++,this.refCount=1,this.renderbuffer=jt,this.format=Ln,this.width=0,this.height=0,vt.profile&&(this.stats={size:0})}Dt.prototype.decRef=function(){--this.refCount<=0&&ct(this)};function ct(jt){var Et=jt.renderbuffer;le(Et,"must not double destroy renderbuffer"),z.bindRenderbuffer(mo,null),z.deleteRenderbuffer(Et),jt.renderbuffer=null,jt.refCount=0,delete Ft[jt.id],rt.renderbufferCount--}function Yt(jt,Et){var Ke=new Dt(z.createRenderbuffer());Ft[Ke.id]=Ke,rt.renderbufferCount++;function ut(tn,Mt){var rn=0,kt=0,Xt=Ln;if(typeof tn=="object"&&tn){var At=tn;if("shape"in At){var Kt=At.shape;le(Array.isArray(Kt)&&Kt.length>=2,"invalid renderbuffer shape"),rn=Kt[0]|0,kt=Kt[1]|0}else"radius"in At&&(rn=kt=At.radius|0),"width"in At&&(rn=At.width|0),"height"in At&&(kt=At.height|0);"format"in At&&(le.parameter(At.format,et,"invalid renderbuffer format"),Xt=et[At.format])}else typeof tn=="number"?(rn=tn|0,typeof Mt=="number"?kt=Mt|0:kt=rn):tn?le.raise("invalid arguments to renderbuffer constructor"):rn=kt=1;if(le(rn>0&&kt>0&&rn<=Oe.maxRenderbufferSize&&kt<=Oe.maxRenderbufferSize,"invalid renderbuffer size"),!(rn===Ke.width&&kt===Ke.height&&Xt===Ke.format))return ut.width=Ke.width=rn,ut.height=Ke.height=kt,Ke.format=Xt,z.bindRenderbuffer(mo,Ke.renderbuffer),z.renderbufferStorage(mo,Xt,rn,kt),le(z.getError()===0,"invalid render buffer format"),vt.profile&&(Ke.stats.size=af(Ke.format,Ke.width,Ke.height)),ut.format=pt[Ke.format],ut}function $t(tn,Mt){var rn=tn|0,kt=Mt|0||rn;return rn===Ke.width&&kt===Ke.height||(le(rn>0&&kt>0&&rn<=Oe.maxRenderbufferSize&&kt<=Oe.maxRenderbufferSize,"invalid renderbuffer size"),ut.width=Ke.width=rn,ut.height=Ke.height=kt,z.bindRenderbuffer(mo,Ke.renderbuffer),z.renderbufferStorage(mo,Ke.format,rn,kt),le(z.getError()===0,"invalid render buffer format"),vt.profile&&(Ke.stats.size=af(Ke.format,Ke.width,Ke.height))),ut}return ut(jt,Et),ut.resize=$t,ut._reglType="renderbuffer",ut._renderbuffer=Ke,vt.profile&&(ut.stats=Ke.stats),ut.destroy=function(){Ke.decRef()},ut}vt.profile&&(rt.getTotalRenderbufferSize=function(){var jt=0;return Object.keys(Ft).forEach(function(Et){jt+=Ft[Et].stats.size}),jt});function Gt(){ci(Ft).forEach(function(jt){jt.renderbuffer=z.createRenderbuffer(),z.bindRenderbuffer(mo,jt.renderbuffer),z.renderbufferStorage(mo,jt.format,jt.width,jt.height)}),z.bindRenderbuffer(mo,null)}return{create:Yt,clear:function(){ci(Ft).forEach(ct)},restore:Gt}},Fa=36160,ys=36161,Xl=3553,Va=34069,bh=36064,xl=36096,xa=36128,hp=33306,vp=36053,lf=36054,wh=36055,Eh=36057,Oh=36061,sf=36193,mp=5121,yp=5126,zc=6407,Cr=6408,Zv=6402,gp=[zc,Cr],Ks=[];Ks[Cr]=4,Ks[zc]=3;var Hc=[];Hc[mp]=1,Hc[yp]=4,Hc[sf]=2;var Jv=32854,Sh=32855,Ma=36194,Qv=33189,Wc=36168,uf=34041,_p=35907,xh=34836,ca=34842,gs=34843,cf=[Jv,Sh,Ma,_p,ca,gs,xh],Zs={};Zs[vp]="complete",Zs[lf]="incomplete attachment",Zs[Eh]="incomplete dimensions",Zs[wh]="incomplete, missing attachment",Zs[Oh]="unsupported";function df(z,ue,Oe,rt,vt,et){var pt={cur:null,next:null,dirty:!1,setFBO:null},Ct=["rgba"],Ft=["rgba4","rgb565","rgb5 a1"];ue.ext_srgb&&Ft.push("srgba"),ue.ext_color_buffer_half_float&&Ft.push("rgba16f","rgb16f"),ue.webgl_color_buffer_float&&Ft.push("rgba32f");var Dt=["uint8"];ue.oes_texture_half_float&&Dt.push("half float","float16"),ue.oes_texture_float&&Dt.push("float","float32");function ct(It,Nt,xt){this.target=It,this.texture=Nt,this.renderbuffer=xt;var Bn=0,ir=0;Nt?(Bn=Nt.width,ir=Nt.height):xt&&(Bn=xt.width,ir=xt.height),this.width=Bn,this.height=ir}function Yt(It){It&&(It.texture&&It.texture._texture.decRef(),It.renderbuffer&&It.renderbuffer._renderbuffer.decRef())}function Gt(It,Nt,xt){if(It)if(It.texture){var Bn=It.texture._texture,ir=Math.max(1,Bn.width),fn=Math.max(1,Bn.height);le(ir===Nt&&fn===xt,"inconsistent width/height for supplied texture"),Bn.refCount+=1}else{var cr=It.renderbuffer._renderbuffer;le(cr.width===Nt&&cr.height===xt,"inconsistent width/height for renderbuffer"),cr.refCount+=1}}function jt(It,Nt){Nt&&(Nt.texture?z.framebufferTexture2D(Fa,It,Nt.target,Nt.texture._texture.texture,0):z.framebufferRenderbuffer(Fa,It,ys,Nt.renderbuffer._renderbuffer.renderbuffer))}function Et(It){var Nt=Xl,xt=null,Bn=null,ir=It;typeof It=="object"&&(ir=It.data,"target"in It&&(Nt=It.target|0)),le.type(ir,"function","invalid attachment data");var fn=ir._reglType;return fn==="texture2d"?(xt=ir,le(Nt===Xl)):fn==="textureCube"?(xt=ir,le(Nt>=Va&&Nt<Va+6,"invalid cube map target")):fn==="renderbuffer"?(Bn=ir,Nt=ys):le.raise("invalid regl object for attachment"),new ct(Nt,xt,Bn)}function Ke(It,Nt,xt,Bn,ir){if(xt){var fn=rt.create2D({width:It,height:Nt,format:Bn,type:ir});return fn._texture.refCount=0,new ct(Xl,fn,null)}else{var cr=vt.create({width:It,height:Nt,format:Bn});return cr._renderbuffer.refCount=0,new ct(ys,null,cr)}}function ut(It){return It&&(It.texture||It.renderbuffer)}function $t(It,Nt,xt){It&&(It.texture?It.texture.resize(Nt,xt):It.renderbuffer&&It.renderbuffer.resize(Nt,xt),It.width=Nt,It.height=xt)}var tn=0,Mt={};function rn(){this.id=tn++,Mt[this.id]=this,this.framebuffer=z.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function kt(It){It.colorAttachments.forEach(Yt),Yt(It.depthAttachment),Yt(It.stencilAttachment),Yt(It.depthStencilAttachment)}function Xt(It){var Nt=It.framebuffer;le(Nt,"must not double destroy framebuffer"),z.deleteFramebuffer(Nt),It.framebuffer=null,et.framebufferCount--,delete Mt[It.id]}function At(It){var Nt;z.bindFramebuffer(Fa,It.framebuffer);var xt=It.colorAttachments;for(Nt=0;Nt<xt.length;++Nt)jt(bh+Nt,xt[Nt]);for(Nt=xt.length;Nt<Oe.maxColorAttachments;++Nt)z.framebufferTexture2D(Fa,bh+Nt,Xl,null,0);z.framebufferTexture2D(Fa,hp,Xl,null,0),z.framebufferTexture2D(Fa,xl,Xl,null,0),z.framebufferTexture2D(Fa,xa,Xl,null,0),jt(xl,It.depthAttachment),jt(xa,It.stencilAttachment),jt(hp,It.depthStencilAttachment);var Bn=z.checkFramebufferStatus(Fa);!z.isContextLost()&&Bn!==vp&&le.raise("framebuffer configuration not supported, status = "+Zs[Bn]),z.bindFramebuffer(Fa,pt.next?pt.next.framebuffer:null),pt.cur=pt.next,z.getError()}function Kt(It,Nt){var xt=new rn;et.framebufferCount++;function Bn(fn,cr){var qn;le(pt.next!==xt,"can not update framebuffer which is currently in use");var lr=0,Or=0,Vo=!0,jo=!0,ar=null,Qo=!0,ho="rgba",Bo="uint8",Ko=1,li=null,hi=null,ei=null,wo=!1;if(typeof fn=="number")lr=fn|0,Or=cr|0||lr;else if(!fn)lr=Or=1;else{le.type(fn,"object","invalid arguments for framebuffer");var er=fn;if("shape"in er){var vi=er.shape;le(Array.isArray(vi)&&vi.length>=2,"invalid shape for framebuffer"),lr=vi[0],Or=vi[1]}else"radius"in er&&(lr=Or=er.radius),"width"in er&&(lr=er.width),"height"in er&&(Or=er.height);("color"in er||"colors"in er)&&(ar=er.color||er.colors,Array.isArray(ar)&&le(ar.length===1||ue.webgl_draw_buffers,"multiple render targets not supported")),ar||("colorCount"in er&&(Ko=er.colorCount|0,le(Ko>0,"invalid color buffer count")),"colorTexture"in er&&(Qo=!!er.colorTexture,ho="rgba4"),"colorType"in er&&(Bo=er.colorType,Qo?(le(ue.oes_texture_float||!(Bo==="float"||Bo==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),le(ue.oes_texture_half_float||!(Bo==="half float"||Bo==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Bo==="half float"||Bo==="float16"?(le(ue.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),ho="rgba16f"):(Bo==="float"||Bo==="float32")&&(le(ue.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),ho="rgba32f"),le.oneOf(Bo,Dt,"invalid color type")),"colorFormat"in er&&(ho=er.colorFormat,Ct.indexOf(ho)>=0?Qo=!0:Ft.indexOf(ho)>=0?Qo=!1:Qo?le.oneOf(er.colorFormat,Ct,"invalid color format for texture"):le.oneOf(er.colorFormat,Ft,"invalid color format for renderbuffer"))),("depthTexture"in er||"depthStencilTexture"in er)&&(wo=!!(er.depthTexture||er.depthStencilTexture),le(!wo||ue.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in er&&(typeof er.depth=="boolean"?Vo=er.depth:(li=er.depth,jo=!1)),"stencil"in er&&(typeof er.stencil=="boolean"?jo=er.stencil:(hi=er.stencil,Vo=!1)),"depthStencil"in er&&(typeof er.depthStencil=="boolean"?Vo=jo=er.depthStencil:(ei=er.depthStencil,Vo=!1,jo=!1))}var Dr=null,$n=null,yr=null,tr=null;if(Array.isArray(ar))Dr=ar.map(Et);else if(ar)Dr=[Et(ar)];else for(Dr=new Array(Ko),qn=0;qn<Ko;++qn)Dr[qn]=Ke(lr,Or,Qo,ho,Bo);le(ue.webgl_draw_buffers||Dr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),le(Dr.length<=Oe.maxColorAttachments,"too many color attachments, not supported"),lr=lr||Dr[0].width,Or=Or||Dr[0].height,li?$n=Et(li):Vo&&!jo&&($n=Ke(lr,Or,wo,"depth","uint32")),hi?yr=Et(hi):jo&&!Vo&&(yr=Ke(lr,Or,!1,"stencil","uint8")),ei?tr=Et(ei):!li&&!hi&&jo&&Vo&&(tr=Ke(lr,Or,wo,"depth stencil","depth stencil")),le(!!li+!!hi+!!ei<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Eo=null;for(qn=0;qn<Dr.length;++qn)if(Gt(Dr[qn],lr,Or),le(!Dr[qn]||Dr[qn].texture&&gp.indexOf(Dr[qn].texture._texture.format)>=0||Dr[qn].renderbuffer&&cf.indexOf(Dr[qn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+qn+" is invalid"),Dr[qn]&&Dr[qn].texture){var Nl=Ks[Dr[qn].texture._texture.format]*Hc[Dr[qn].texture._texture.type];Eo===null?Eo=Nl:le(Eo===Nl,"all color attachments much have the same number of bits per pixel.")}return Gt($n,lr,Or),le(!$n||$n.texture&&$n.texture._texture.format===Zv||$n.renderbuffer&&$n.renderbuffer._renderbuffer.format===Qv,"invalid depth attachment for framebuffer object"),Gt(yr,lr,Or),le(!yr||yr.renderbuffer&&yr.renderbuffer._renderbuffer.format===Wc,"invalid stencil attachment for framebuffer object"),Gt(tr,lr,Or),le(!tr||tr.texture&&tr.texture._texture.format===uf||tr.renderbuffer&&tr.renderbuffer._renderbuffer.format===uf,"invalid depth-stencil attachment for framebuffer object"),kt(xt),xt.width=lr,xt.height=Or,xt.colorAttachments=Dr,xt.depthAttachment=$n,xt.stencilAttachment=yr,xt.depthStencilAttachment=tr,Bn.color=Dr.map(ut),Bn.depth=ut($n),Bn.stencil=ut(yr),Bn.depthStencil=ut(tr),Bn.width=xt.width,Bn.height=xt.height,At(xt),Bn}function ir(fn,cr){le(pt.next!==xt,"can not resize a framebuffer which is currently in use");var qn=Math.max(fn|0,1),lr=Math.max(cr|0||qn,1);if(qn===xt.width&&lr===xt.height)return Bn;for(var Or=xt.colorAttachments,Vo=0;Vo<Or.length;++Vo)$t(Or[Vo],qn,lr);return $t(xt.depthAttachment,qn,lr),$t(xt.stencilAttachment,qn,lr),$t(xt.depthStencilAttachment,qn,lr),xt.width=Bn.width=qn,xt.height=Bn.height=lr,At(xt),Bn}return Bn(It,Nt),o(Bn,{resize:ir,_reglType:"framebuffer",_framebuffer:xt,destroy:function(){Xt(xt),kt(xt)},use:function(fn){pt.setFBO({framebuffer:Bn},fn)}})}function Cn(It){var Nt=Array(6);function xt(ir){var fn;le(Nt.indexOf(pt.next)<0,"can not update framebuffer which is currently in use");var cr={color:null},qn=0,lr=null,Or="rgba",Vo="uint8",jo=1;if(typeof ir=="number")qn=ir|0;else if(!ir)qn=1;else{le.type(ir,"object","invalid arguments for framebuffer");var ar=ir;if("shape"in ar){var Qo=ar.shape;le(Array.isArray(Qo)&&Qo.length>=2,"invalid shape for framebuffer"),le(Qo[0]===Qo[1],"cube framebuffer must be square"),qn=Qo[0]}else"radius"in ar&&(qn=ar.radius|0),"width"in ar?(qn=ar.width|0,"height"in ar&&le(ar.height===qn,"must be square")):"height"in ar&&(qn=ar.height|0);("color"in ar||"colors"in ar)&&(lr=ar.color||ar.colors,Array.isArray(lr)&&le(lr.length===1||ue.webgl_draw_buffers,"multiple render targets not supported")),lr||("colorCount"in ar&&(jo=ar.colorCount|0,le(jo>0,"invalid color buffer count")),"colorType"in ar&&(le.oneOf(ar.colorType,Dt,"invalid color type"),Vo=ar.colorType),"colorFormat"in ar&&(Or=ar.colorFormat,le.oneOf(ar.colorFormat,Ct,"invalid color format for texture"))),"depth"in ar&&(cr.depth=ar.depth),"stencil"in ar&&(cr.stencil=ar.stencil),"depthStencil"in ar&&(cr.depthStencil=ar.depthStencil)}var ho;if(lr)if(Array.isArray(lr))for(ho=[],fn=0;fn<lr.length;++fn)ho[fn]=lr[fn];else ho=[lr];else{ho=Array(jo);var Bo={radius:qn,format:Or,type:Vo};for(fn=0;fn<jo;++fn)ho[fn]=rt.createCube(Bo)}for(cr.color=Array(ho.length),fn=0;fn<ho.length;++fn){var Ko=ho[fn];le(typeof Ko=="function"&&Ko._reglType==="textureCube","invalid cube map"),qn=qn||Ko.width,le(Ko.width===qn&&Ko.height===qn,"invalid cube map shape"),cr.color[fn]={target:Va,data:ho[fn]}}for(fn=0;fn<6;++fn){for(var li=0;li<ho.length;++li)cr.color[li].target=Va+fn;fn>0&&(cr.depth=Nt[0].depth,cr.stencil=Nt[0].stencil,cr.depthStencil=Nt[0].depthStencil),Nt[fn]?Nt[fn](cr):Nt[fn]=Kt(cr)}return o(xt,{width:qn,height:qn,color:ho})}function Bn(ir){var fn,cr=ir|0;if(le(cr>0&&cr<=Oe.maxCubeMapSize,"invalid radius for cube fbo"),cr===xt.width)return xt;var qn=xt.color;for(fn=0;fn<qn.length;++fn)qn[fn].resize(cr);for(fn=0;fn<6;++fn)Nt[fn].resize(cr);return xt.width=xt.height=cr,xt}return xt(It),o(xt,{faces:Nt,resize:Bn,_reglType:"framebufferCube",destroy:function(){Nt.forEach(function(ir){ir.destroy()})}})}function Xn(){pt.cur=null,pt.next=null,pt.dirty=!0,ci(Mt).forEach(function(It){It.framebuffer=z.createFramebuffer(),At(It)})}return o(pt,{getFramebuffer:function(It){if(typeof It=="function"&&It._reglType==="framebuffer"){var Nt=It._framebuffer;if(Nt instanceof rn)return Nt}return null},create:Kt,createCube:Cn,clear:function(){ci(Mt).forEach(Xt)},restore:Xn})}var bp=5126,ff=34962;function Xc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=bp,this.offset=0,this.stride=0,this.divisor=0}function pf(z,ue,Oe,rt,vt){for(var et=Oe.maxAttributes,pt=new Array(et),Ct=0;Ct<et;++Ct)pt[Ct]=new Xc;var Ft=0,Dt={},ct={Record:Xc,scope:{},state:pt,currentVAO:null,targetVAO:null,restore:Gt()?Mt:function(){},createVAO:rn,getVAO:Et,destroyBuffer:Yt,setVAO:Gt()?Ke:ut,clear:Gt()?$t:function(){}};function Yt(kt){for(var Xt=0;Xt<pt.length;++Xt){var At=pt[Xt];At.buffer===kt&&(z.disableVertexAttribArray(Xt),At.buffer=null)}}function Gt(){return ue.oes_vertex_array_object}function jt(){return ue.angle_instanced_arrays}function Et(kt){return typeof kt=="function"&&kt._vao?kt._vao:null}function Ke(kt){if(kt!==ct.currentVAO){var Xt=Gt();kt?Xt.bindVertexArrayOES(kt.vao):Xt.bindVertexArrayOES(null),ct.currentVAO=kt}}function ut(kt){if(kt!==ct.currentVAO){if(kt)kt.bindAttrs();else for(var Xt=jt(),At=0;At<pt.length;++At){var Kt=pt[At];Kt.buffer?(z.enableVertexAttribArray(At),z.vertexAttribPointer(At,Kt.size,Kt.type,Kt.normalized,Kt.stride,Kt.offfset),Xt&&Kt.divisor&&Xt.vertexAttribDivisorANGLE(At,Kt.divisor)):(z.disableVertexAttribArray(At),z.vertexAttrib4f(At,Kt.x,Kt.y,Kt.z,Kt.w))}ct.currentVAO=kt}}function $t(){ci(Dt).forEach(function(kt){kt.destroy()})}function tn(){this.id=++Ft,this.attributes=[];var kt=Gt();kt?this.vao=kt.createVertexArrayOES():this.vao=null,Dt[this.id]=this,this.buffers=[]}tn.prototype.bindAttrs=function(){for(var kt=jt(),Xt=this.attributes,At=0;At<Xt.length;++At){var Kt=Xt[At];Kt.buffer?(z.enableVertexAttribArray(At),z.bindBuffer(ff,Kt.buffer.buffer),z.vertexAttribPointer(At,Kt.size,Kt.type,Kt.normalized,Kt.stride,Kt.offset),kt&&Kt.divisor&&kt.vertexAttribDivisorANGLE(At,Kt.divisor)):(z.disableVertexAttribArray(At),z.vertexAttrib4f(At,Kt.x,Kt.y,Kt.z,Kt.w))}for(var Cn=Xt.length;Cn<et;++Cn)z.disableVertexAttribArray(Cn)},tn.prototype.refresh=function(){var kt=Gt();kt&&(kt.bindVertexArrayOES(this.vao),this.bindAttrs(),ct.currentVAO=this)},tn.prototype.destroy=function(){if(this.vao){var kt=Gt();this===ct.currentVAO&&(ct.currentVAO=null,kt.bindVertexArrayOES(null)),kt.deleteVertexArrayOES(this.vao),this.vao=null}Dt[this.id]&&(delete Dt[this.id],rt.vaoCount-=1)};function Mt(){var kt=Gt();kt&&ci(Dt).forEach(function(Xt){Xt.refresh()})}function rn(kt){var Xt=new tn;rt.vaoCount+=1;function At(Kt){le(Array.isArray(Kt),"arguments to vertex array constructor must be an array"),le(Kt.length<et,"too many attributes"),le(Kt.length>0,"must specify at least one attribute");var Cn={},Xn=Xt.attributes;Xn.length=Kt.length;for(var It=0;It<Kt.length;++It){var Nt=Kt[It],xt=Xn[It]=new Xc,Bn=Nt.data||Nt;if(Array.isArray(Bn)||n(Bn)||Fi(Bn)){var ir;Xt.buffers[It]&&(ir=Xt.buffers[It],n(Bn)&&ir._buffer.byteLength>=Bn.byteLength?ir.subdata(Bn):(ir.destroy(),Xt.buffers[It]=null)),Xt.buffers[It]||(ir=Xt.buffers[It]=vt.create(Nt,ff,!1,!0)),xt.buffer=vt.getBuffer(ir),xt.size=xt.buffer.dimension|0,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1,Cn[It]=1}else vt.getBuffer(Nt)?(xt.buffer=vt.getBuffer(Nt),xt.size=xt.buffer.dimension|0,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1):vt.getBuffer(Nt.buffer)?(xt.buffer=vt.getBuffer(Nt.buffer),xt.size=(+Nt.size||xt.buffer.dimension)|0,xt.normalized=!!Nt.normalized||!1,"type"in Nt?(le.parameter(Nt.type,Ui,"invalid buffer type"),xt.type=Ui[Nt.type]):xt.type=xt.buffer.dtype,xt.offset=(Nt.offset||0)|0,xt.stride=(Nt.stride||0)|0,xt.divisor=(Nt.divisor||0)|0,xt.state=1,le(xt.size>=1&&xt.size<=4,"size must be between 1 and 4"),le(xt.offset>=0,"invalid offset"),le(xt.stride>=0&&xt.stride<=255,"stride must be between 0 and 255"),le(xt.divisor>=0,"divisor must be positive"),le(!xt.divisor||!!ue.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Nt?(le(It>0,"first attribute must not be a constant"),xt.x=+Nt.x||0,xt.y=+Nt.y||0,xt.z=+Nt.z||0,xt.w=+Nt.w||0,xt.state=2):le(!1,"invalid attribute spec for location "+It)}for(var fn=0;fn<Xt.buffers.length;++fn)!Cn[fn]&&Xt.buffers[fn]&&(Xt.buffers[fn].destroy(),Xt.buffers[fn]=null);return Xt.refresh(),At}return At.destroy=function(){for(var Kt=0;Kt<Xt.buffers.length;++Kt)Xt.buffers[Kt]&&Xt.buffers[Kt].destroy();Xt.buffers.length=0,Xt.destroy()},At._vao=Xt,At._reglType="vao",At(kt)}return ct}var hf=35632,Kr=35633,em=35718,io=35721;function vf(z,ue,Oe,rt){var vt={},et={};function pt(Ke,ut,$t,tn){this.name=Ke,this.id=ut,this.location=$t,this.info=tn}function Ct(Ke,ut){for(var $t=0;$t<Ke.length;++$t)if(Ke[$t].id===ut.id){Ke[$t].location=ut.location;return}Ke.push(ut)}function Ft(Ke,ut,$t){var tn=Ke===hf?vt:et,Mt=tn[ut];if(!Mt){var rn=ue.str(ut);Mt=z.createShader(Ke),z.shaderSource(Mt,rn),z.compileShader(Mt),le.shaderError(z,Mt,rn,Ke,$t),tn[ut]=Mt}return Mt}var Dt={},ct=[],Yt=0;function Gt(Ke,ut){this.id=Yt++,this.fragId=Ke,this.vertId=ut,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,rt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function jt(Ke,ut,$t){var tn,Mt,rn=Ft(hf,Ke.fragId),kt=Ft(Kr,Ke.vertId),Xt=Ke.program=z.createProgram();if(z.attachShader(Xt,rn),z.attachShader(Xt,kt),$t)for(tn=0;tn<$t.length;++tn){var At=$t[tn];z.bindAttribLocation(Xt,At[0],At[1])}z.linkProgram(Xt),le.linkError(z,Xt,ue.str(Ke.fragId),ue.str(Ke.vertId),ut);var Kt=z.getProgramParameter(Xt,em);rt.profile&&(Ke.stats.uniformsCount=Kt);var Cn=Ke.uniforms;for(tn=0;tn<Kt;++tn)if(Mt=z.getActiveUniform(Xt,tn),Mt)if(Mt.size>1)for(var Xn=0;Xn<Mt.size;++Xn){var It=Mt.name.replace("[0]","["+Xn+"]");Ct(Cn,new pt(It,ue.id(It),z.getUniformLocation(Xt,It),Mt))}else Ct(Cn,new pt(Mt.name,ue.id(Mt.name),z.getUniformLocation(Xt,Mt.name),Mt));var Nt=z.getProgramParameter(Xt,io);rt.profile&&(Ke.stats.attributesCount=Nt);var xt=Ke.attributes;for(tn=0;tn<Nt;++tn)Mt=z.getActiveAttrib(Xt,tn),Mt&&Ct(xt,new pt(Mt.name,ue.id(Mt.name),z.getAttribLocation(Xt,Mt.name),Mt))}rt.profile&&(Oe.getMaxUniformsCount=function(){var Ke=0;return ct.forEach(function(ut){ut.stats.uniformsCount>Ke&&(Ke=ut.stats.uniformsCount)}),Ke},Oe.getMaxAttributesCount=function(){var Ke=0;return ct.forEach(function(ut){ut.stats.attributesCount>Ke&&(Ke=ut.stats.attributesCount)}),Ke});function Et(){vt={},et={};for(var Ke=0;Ke<ct.length;++Ke)jt(ct[Ke],null,ct[Ke].attributes.map(function(ut){return[ut.location,ut.name]}))}return{clear:function(){var Ke=z.deleteShader.bind(z);ci(vt).forEach(Ke),vt={},ci(et).forEach(Ke),et={},ct.forEach(function(ut){z.deleteProgram(ut.program)}),ct.length=0,Dt={},Oe.shaderCount=0},program:function(Ke,ut,$t,tn){le.command(Ke>=0,"missing vertex shader",$t),le.command(ut>=0,"missing fragment shader",$t);var Mt=Dt[ut];Mt||(Mt=Dt[ut]={});var rn=Mt[Ke];if(rn&&(rn.refCount++,!tn))return rn;var kt=new Gt(ut,Ke);return Oe.shaderCount++,jt(kt,$t,tn),rn||(Mt[Ke]=kt),ct.push(kt),o(kt,{destroy:function(){if(kt.refCount--,kt.refCount<=0){z.deleteProgram(kt.program);var Xt=ct.indexOf(kt);ct.splice(Xt,1),Oe.shaderCount--}Mt[kt.vertId].refCount<=0&&(z.deleteShader(et[kt.vertId]),delete et[kt.vertId],delete Dt[kt.fragId][kt.vertId]),Object.keys(Dt[kt.fragId]).length||(z.deleteShader(vt[kt.fragId]),delete vt[kt.fragId],delete Dt[kt.fragId])}})},restore:Et,shader:Ft,frag:-1,vert:-1}}var Mh=6408,Js=5121,Ah=3333,zu=5126;function Th(z,ue,Oe,rt,vt,et,pt){function Ct(ct){var Yt;ue.next===null?(le(vt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Yt=Js):(le(ue.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Yt=ue.next.colorAttachments[0].texture._texture.type,et.oes_texture_float?(le(Yt===Js||Yt===zu,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Yt===zu&&le(pt.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):le(Yt===Js,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Gt=0,jt=0,Et=rt.framebufferWidth,Ke=rt.framebufferHeight,ut=null;n(ct)?ut=ct:ct&&(le.type(ct,"object","invalid arguments to regl.read()"),Gt=ct.x|0,jt=ct.y|0,le(Gt>=0&&Gt<rt.framebufferWidth,"invalid x offset for regl.read"),le(jt>=0&&jt<rt.framebufferHeight,"invalid y offset for regl.read"),Et=(ct.width||rt.framebufferWidth-Gt)|0,Ke=(ct.height||rt.framebufferHeight-jt)|0,ut=ct.data||null),ut&&(Yt===Js?le(ut instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Yt===zu&&le(ut instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),le(Et>0&&Et+Gt<=rt.framebufferWidth,"invalid width for read pixels"),le(Ke>0&&Ke+jt<=rt.framebufferHeight,"invalid height for read pixels"),Oe();var $t=Et*Ke*4;return ut||(Yt===Js?ut=new Uint8Array($t):Yt===zu&&(ut=ut||new Float32Array($t))),le.isTypedArray(ut,"data buffer for regl.read() must be a typedarray"),le(ut.byteLength>=$t,"data buffer for regl.read() too small"),z.pixelStorei(Ah,4),z.readPixels(Gt,jt,Et,Ke,Mh,Yt,ut),ut}function Ft(ct){var Yt;return ue.setFBO({framebuffer:ct.framebuffer},function(){Yt=Ct(ct)}),Yt}function Dt(ct){return!ct||!("framebuffer"in ct)?Ct(ct):Ft(ct)}return Dt}function Qs(z){return Array.prototype.slice.call(z)}function _i(z){return Qs(z).join("")}function nl(){var z=0,ue=[],Oe=[];function rt(Yt){for(var Gt=0;Gt<Oe.length;++Gt)if(Oe[Gt]===Yt)return ue[Gt];var jt="g"+z++;return ue.push(jt),Oe.push(Yt),jt}function vt(){var Yt=[];function Gt(){Yt.push.apply(Yt,Qs(arguments))}var jt=[];function Et(){var Ke="v"+z++;return jt.push(Ke),arguments.length>0&&(Yt.push(Ke,"="),Yt.push.apply(Yt,Qs(arguments)),Yt.push(";")),Ke}return o(Gt,{def:Et,toString:function(){return _i([jt.length>0?"var "+jt.join(",")+";":"",_i(Yt)])}})}function et(){var Yt=vt(),Gt=vt(),jt=Yt.toString,Et=Gt.toString;function Ke(ut,$t){Gt(ut,$t,"=",Yt.def(ut,$t),";")}return o(function(){Yt.apply(Yt,Qs(arguments))},{def:Yt.def,entry:Yt,exit:Gt,save:Ke,set:function(ut,$t,tn){Ke(ut,$t),Yt(ut,$t,"=",tn,";")},toString:function(){return jt()+Et()}})}function pt(){var Yt=_i(arguments),Gt=et(),jt=et(),Et=Gt.toString,Ke=jt.toString;return o(Gt,{then:function(){return Gt.apply(Gt,Qs(arguments)),this},else:function(){return jt.apply(jt,Qs(arguments)),this},toString:function(){var ut=Ke();return ut&&(ut="else{"+ut+"}"),_i(["if(",Yt,"){",Et(),"}",ut])}})}var Ct=vt(),Ft={};function Dt(Yt,Gt){var jt=[];function Et(){var Mt="a"+jt.length;return jt.push(Mt),Mt}Gt=Gt||0;for(var Ke=0;Ke<Gt;++Ke)Et();var ut=et(),$t=ut.toString,tn=Ft[Yt]=o(ut,{arg:Et,toString:function(){return _i(["function(",jt.join(),"){",$t(),"}"])}});return tn}function ct(){var Yt=['"use strict";',Ct,"return {"];Object.keys(Ft).forEach(function(Et){Yt.push('"',Et,'":',Ft[Et].toString(),",")}),Yt.push("}");var Gt=_i(Yt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),jt=Function.apply(null,ue.concat(Gt));return jt.apply(null,Oe)}return{global:Ct,link:rt,block:vt,proc:Dt,scope:et,cond:pt,compile:ct}}var ql="xyzw".split(""),eu=5121,tu=1,nu=2,mf=0,Yl=1,ru=2,yf=3,rl=4,qc=5,Yc=6,Hu="dither",Wu="blend.enable",Xu="blend.color",gf="blend.equation",qu="blend.func",wp="depth.enable",_f="depth.func",kh="depth.range",Ep="depth.mask",ol="colorMask",Op="cull.enable",Sp="cull.face",xp="frontFace",Yu="lineWidth",Ml="polygonOffset.enable",Kc="polygonOffset.offset",bf="sample.alpha",wf="sample.enable",_s="sample.coverage",bs="stencil.enable",or="stencil.mask",Ku="stencil.func",Zc="stencil.opFront",il="stencil.opBack",pi="scissor.enable",ou="scissor.box",Lo="viewport",ws="profile",ra="framebuffer",Jc="vert",$i="frag",qo="elements",Al="primitive",Tl="count",Ef="offset",Pt="instances",iu="vao",Qc="Width",ed="Height",Es=ra+Qc,au=ra+ed,Of=Lo+Qc,Mp=Lo+ed,lu="drawingBuffer",td=lu+Qc,Sf=lu+ed,Ap=[qu,gf,Ku,Zc,il,_s,Lo,ou,Kc],kl=34962,Tp=34963,al=35632,Os=35633,xf=3553,Nh=34067,Ph=2884,Rh=3042,kp=3024,Mf=2960,nd=2929,Ch=3089,ll=32823,Ss=32926,tm=32928,Mo=5126,rd=35664,su=35665,od=35666,Zu=5124,id=35667,ad=35668,ld=35669,uu=35670,Kl=35671,bi=35672,Af=35673,sd=35674,cu=35675,Ju=35676,Ai=35678,Co=35680,ud=4,Xi=1028,Hn=1029,Tf=2304,cd=2305,kf=32775,Np=32776,Dh=519,xs=7680,jh=0,du=1,Ih=32774,Pp=513,dd=36160,Lh=36064,Ba={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zl=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ms={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Wn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Rp={frag:al,vert:Os},Qu={cw:Tf,ccw:cd};function Jl(z){return Array.isArray(z)||n(z)||Fi(z)}function fd(z){return z.sort(function(ue,Oe){return ue===Lo?-1:Oe===Lo?1:ue<Oe?-1:1})}function qi(z,ue,Oe,rt){this.thisDep=z,this.contextDep=ue,this.propDep=Oe,this.append=rt}function sl(z){return z&&!(z.thisDep||z.contextDep||z.propDep)}function $o(z){return new qi(!1,!1,!1,z)}function da(z,ue){var Oe=z.type;if(Oe===mf){var rt=z.data.length;return new qi(!0,rt>=1,rt>=2,ue)}else if(Oe===rl){var vt=z.data;return new qi(vt.thisDep,vt.contextDep,vt.propDep,ue)}else{if(Oe===qc)return new qi(!1,!1,!1,ue);if(Oe===Yc){for(var et=!1,pt=!1,Ct=!1,Ft=0;Ft<z.data.length;++Ft){var Dt=z.data[Ft];if(Dt.type===Yl)Ct=!0;else if(Dt.type===ru)pt=!0;else if(Dt.type===yf)et=!0;else if(Dt.type===mf){et=!0;var ct=Dt.data;ct>=1&&(pt=!0),ct>=2&&(Ct=!0)}else Dt.type===rl&&(et=et||Dt.data.thisDep,pt=pt||Dt.data.contextDep,Ct=Ct||Dt.data.propDep)}return new qi(et,pt,Ct,ue)}else return new qi(Oe===yf,Oe===ru,Oe===Yl,ue)}}var Ua=new qi(!1,!1,!1,function(){});function nm(z,ue,Oe,rt,vt,et,pt,Ct,Ft,Dt,ct,Yt,Gt,jt,Et){var Ke=Dt.Record,ut={add:32774,subtract:32778,"reverse subtract":32779};Oe.ext_blend_minmax&&(ut.min=kf,ut.max=Np);var $t=Oe.angle_instanced_arrays,tn=Oe.webgl_draw_buffers,Mt={dirty:!0,profile:Et.profile},rn={},kt=[],Xt={},At={};function Kt(ve){return ve.replace(".","_")}function Cn(ve,ie,Re){var ze=Kt(ve);kt.push(ve),rn[ze]=Mt[ze]=!!Re,Xt[ze]=ie}function Xn(ve,ie,Re){var ze=Kt(ve);kt.push(ve),Array.isArray(Re)?(Mt[ze]=Re.slice(),rn[ze]=Re.slice()):Mt[ze]=rn[ze]=Re,At[ze]=ie}Cn(Hu,kp),Cn(Wu,Rh),Xn(Xu,"blendColor",[0,0,0,0]),Xn(gf,"blendEquationSeparate",[Ih,Ih]),Xn(qu,"blendFuncSeparate",[du,jh,du,jh]),Cn(wp,nd,!0),Xn(_f,"depthFunc",Pp),Xn(kh,"depthRange",[0,1]),Xn(Ep,"depthMask",!0),Xn(ol,ol,[!0,!0,!0,!0]),Cn(Op,Ph),Xn(Sp,"cullFace",Hn),Xn(xp,xp,cd),Xn(Yu,Yu,1),Cn(Ml,ll),Xn(Kc,"polygonOffset",[0,0]),Cn(bf,Ss),Cn(wf,tm),Xn(_s,"sampleCoverage",[1,!1]),Cn(bs,Mf),Xn(or,"stencilMask",-1),Xn(Ku,"stencilFunc",[Dh,0,-1]),Xn(Zc,"stencilOpSeparate",[Xi,xs,xs,xs]),Xn(il,"stencilOpSeparate",[Hn,xs,xs,xs]),Cn(pi,Ch),Xn(ou,"scissor",[0,0,z.drawingBufferWidth,z.drawingBufferHeight]),Xn(Lo,Lo,[0,0,z.drawingBufferWidth,z.drawingBufferHeight]);var It={gl:z,context:Gt,strings:ue,next:rn,current:Mt,draw:Yt,elements:et,buffer:vt,shader:ct,attributes:Dt.state,vao:Dt,uniforms:Ft,framebuffer:Ct,extensions:Oe,timer:jt,isBufferArgs:Jl},Nt={primTypes:oi,compareFuncs:Ms,blendFuncs:Ba,blendEquations:ut,stencilOps:Wn,glTypes:Ui,orientationType:Qu};le.optional(function(){It.isArrayLike=R}),tn&&(Nt.backBuffer=[Hn],Nt.drawBuffer=Vr(rt.maxDrawbuffers,function(ve){return ve===0?[0]:Vr(ve,function(ie){return Lh+ie})}));var xt=0;function Bn(){var ve=nl(),ie=ve.link,Re=ve.global;ve.id=xt++,ve.batchId="0";var ze=ie(It),Ze=ve.shared={props:"a0"};Object.keys(It).forEach(function(ke){Ze[ke]=Re.def(ze,".",ke)}),le.optional(function(){ve.CHECK=ie(le),ve.commandStr=le.guessCommand(),ve.command=ie(ve.commandStr),ve.assert=function(ke,pe,He){ke("if(!(",pe,"))",this.CHECK,".commandRaise(",ie(He),",",this.command,");")},Nt.invalidBlendCombinations=Zl});var De=ve.next={},Ce=ve.current={};Object.keys(At).forEach(function(ke){Array.isArray(Mt[ke])&&(De[ke]=Re.def(Ze.next,".",ke),Ce[ke]=Re.def(Ze.current,".",ke))});var Fe=ve.constants={};Object.keys(Nt).forEach(function(ke){Fe[ke]=Re.def(JSON.stringify(Nt[ke]))}),ve.invoke=function(ke,pe){switch(pe.type){case mf:var He=["this",Ze.context,Ze.props,ve.batchId];return ke.def(ie(pe.data),".call(",He.slice(0,Math.max(pe.data.length+1,4)),")");case Yl:return ke.def(Ze.props,pe.data);case ru:return ke.def(Ze.context,pe.data);case yf:return ke.def("this",pe.data);case rl:return pe.data.append(ve,ke),pe.data.ref;case qc:return pe.data.toString();case Yc:return pe.data.map(function(We){return ve.invoke(ke,We)})}},ve.attribCache={};var he={};return ve.scopeAttrib=function(ke){var pe=ue.id(ke);if(pe in he)return he[pe];var He=Dt.scope[pe];He||(He=Dt.scope[pe]=new Ke);var We=he[pe]=ie(He);return We},ve}function ir(ve){var ie=ve.static,Re=ve.dynamic,ze;if(ws in ie){var Ze=!!ie[ws];ze=$o(function(Ce,Fe){return Ze}),ze.enable=Ze}else if(ws in Re){var De=Re[ws];ze=da(De,function(Ce,Fe){return Ce.invoke(Fe,De)})}return ze}function fn(ve,ie){var Re=ve.static,ze=ve.dynamic;if(ra in Re){var Ze=Re[ra];return Ze?(Ze=Ct.getFramebuffer(Ze),le.command(Ze,"invalid framebuffer object"),$o(function(Ce,Fe){var he=Ce.link(Ze),ke=Ce.shared;Fe.set(ke.framebuffer,".next",he);var pe=ke.context;return Fe.set(pe,"."+Es,he+".width"),Fe.set(pe,"."+au,he+".height"),he})):$o(function(Ce,Fe){var he=Ce.shared;Fe.set(he.framebuffer,".next","null");var ke=he.context;return Fe.set(ke,"."+Es,ke+"."+td),Fe.set(ke,"."+au,ke+"."+Sf),"null"})}else if(ra in ze){var De=ze[ra];return da(De,function(Ce,Fe){var he=Ce.invoke(Fe,De),ke=Ce.shared,pe=ke.framebuffer,He=Fe.def(pe,".getFramebuffer(",he,")");le.optional(function(){Ce.assert(Fe,"!"+he+"||"+He,"invalid framebuffer object")}),Fe.set(pe,".next",He);var We=ke.context;return Fe.set(We,"."+Es,He+"?"+He+".width:"+We+"."+td),Fe.set(We,"."+au,He+"?"+He+".height:"+We+"."+Sf),He})}else return null}function cr(ve,ie,Re){var ze=ve.static,Ze=ve.dynamic;function De(he){if(he in ze){var ke=ze[he];le.commandType(ke,"object","invalid "+he,Re.commandStr);var pe=!0,He=ke.x|0,We=ke.y|0,h,g;return"width"in ke?(h=ke.width|0,le.command(h>=0,"invalid "+he,Re.commandStr)):pe=!1,"height"in ke?(g=ke.height|0,le.command(g>=0,"invalid "+he,Re.commandStr)):pe=!1,new qi(!pe&&ie&&ie.thisDep,!pe&&ie&&ie.contextDep,!pe&&ie&&ie.propDep,function(Q,re){var me=Q.shared.context,Se=h;"width"in ke||(Se=re.def(me,".",Es,"-",He));var Ve=g;return"height"in ke||(Ve=re.def(me,".",au,"-",We)),[He,We,Se,Ve]})}else if(he in Ze){var A=Ze[he],L=da(A,function(Q,re){var me=Q.invoke(re,A);le.optional(function(){Q.assert(re,me+"&&typeof "+me+'==="object"',"invalid "+he)});var Se=Q.shared.context,Ve=re.def(me,".x|0"),mt=re.def(me,".y|0"),bt=re.def('"width" in ',me,"?",me,".width|0:","(",Se,".",Es,"-",Ve,")"),Ht=re.def('"height" in ',me,"?",me,".height|0:","(",Se,".",au,"-",mt,")");return le.optional(function(){Q.assert(re,bt+">=0&&"+Ht+">=0","invalid "+he)}),[Ve,mt,bt,Ht]});return ie&&(L.thisDep=L.thisDep||ie.thisDep,L.contextDep=L.contextDep||ie.contextDep,L.propDep=L.propDep||ie.propDep),L}else return ie?new qi(ie.thisDep,ie.contextDep,ie.propDep,function(Q,re){var me=Q.shared.context;return[0,0,re.def(me,".",Es),re.def(me,".",au)]}):null}var Ce=De(Lo);if(Ce){var Fe=Ce;Ce=new qi(Ce.thisDep,Ce.contextDep,Ce.propDep,function(he,ke){var pe=Fe.append(he,ke),He=he.shared.context;return ke.set(He,"."+Of,pe[2]),ke.set(He,"."+Mp,pe[3]),pe})}return{viewport:Ce,scissor_box:De(ou)}}function qn(ve,ie){var Re=ve.static,ze=typeof Re[$i]=="string"&&typeof Re[Jc]=="string";if(ze){if(Object.keys(ie.dynamic).length>0)return null;var Ze=ie.static,De=Object.keys(Ze);if(De.length>0&&typeof Ze[De[0]]=="number"){for(var Ce=[],Fe=0;Fe<De.length;++Fe)le(typeof Ze[De[Fe]]=="number","must specify all vertex attribute locations when using vaos"),Ce.push([Ze[De[Fe]]|0,De[Fe]]);return Ce}}return null}function lr(ve,ie,Re){var ze=ve.static,Ze=ve.dynamic;function De(pe){if(pe in ze){var He=ue.id(ze[pe]);le.optional(function(){ct.shader(Rp[pe],He,le.guessCommand())});var We=$o(function(){return He});return We.id=He,We}else if(pe in Ze){var h=Ze[pe];return da(h,function(g,A){var L=g.invoke(A,h),Q=A.def(g.shared.strings,".id(",L,")");return le.optional(function(){A(g.shared.shader,".shader(",Rp[pe],",",Q,",",g.command,");")}),Q})}return null}var Ce=De($i),Fe=De(Jc),he=null,ke;return sl(Ce)&&sl(Fe)?(he=ct.program(Fe.id,Ce.id,null,Re),ke=$o(function(pe,He){return pe.link(he)})):ke=new qi(Ce&&Ce.thisDep||Fe&&Fe.thisDep,Ce&&Ce.contextDep||Fe&&Fe.contextDep,Ce&&Ce.propDep||Fe&&Fe.propDep,function(pe,He){var We=pe.shared.shader,h;Ce?h=Ce.append(pe,He):h=He.def(We,".",$i);var g;Fe?g=Fe.append(pe,He):g=He.def(We,".",Jc);var A=We+".program("+g+","+h;return le.optional(function(){A+=","+pe.command}),He.def(A+")")}),{frag:Ce,vert:Fe,progVar:ke,program:he}}function Or(ve,ie){var Re=ve.static,ze=ve.dynamic;function Ze(){if(qo in Re){var pe=Re[qo];Jl(pe)?pe=et.getElements(et.create(pe,!0)):pe&&(pe=et.getElements(pe),le.command(pe,"invalid elements",ie.commandStr));var He=$o(function(h,g){if(pe){var A=h.link(pe);return h.ELEMENTS=A,A}return h.ELEMENTS=null,null});return He.value=pe,He}else if(qo in ze){var We=ze[qo];return da(We,function(h,g){var A=h.shared,L=A.isBufferArgs,Q=A.elements,re=h.invoke(g,We),me=g.def("null"),Se=g.def(L,"(",re,")"),Ve=h.cond(Se).then(me,"=",Q,".createStream(",re,");").else(me,"=",Q,".getElements(",re,");");return le.optional(function(){h.assert(Ve.else,"!"+re+"||"+me,"invalid elements")}),g.entry(Ve),g.exit(h.cond(Se).then(Q,".destroyStream(",me,");")),h.ELEMENTS=me,me})}return null}var De=Ze();function Ce(){if(Al in Re){var pe=Re[Al];return le.commandParameter(pe,oi,"invalid primitve",ie.commandStr),$o(function(We,h){return oi[pe]})}else if(Al in ze){var He=ze[Al];return da(He,function(We,h){var g=We.constants.primTypes,A=We.invoke(h,He);return le.optional(function(){We.assert(h,A+" in "+g,"invalid primitive, must be one of "+Object.keys(oi))}),h.def(g,"[",A,"]")})}else if(De)return sl(De)?De.value?$o(function(We,h){return h.def(We.ELEMENTS,".primType")}):$o(function(){return ud}):new qi(De.thisDep,De.contextDep,De.propDep,function(We,h){var g=We.ELEMENTS;return h.def(g,"?",g,".primType:",ud)});return null}function Fe(pe,He){if(pe in Re){var We=Re[pe]|0;return le.command(!He||We>=0,"invalid "+pe,ie.commandStr),$o(function(g,A){return He&&(g.OFFSET=We),We})}else if(pe in ze){var h=ze[pe];return da(h,function(g,A){var L=g.invoke(A,h);return He&&(g.OFFSET=L,le.optional(function(){g.assert(A,L+">=0","invalid "+pe)})),L})}else if(He&&De)return $o(function(g,A){return g.OFFSET="0",0});return null}var he=Fe(Ef,!0);function ke(){if(Tl in Re){var pe=Re[Tl]|0;return le.command(typeof pe=="number"&&pe>=0,"invalid vertex count",ie.commandStr),$o(function(){return pe})}else if(Tl in ze){var He=ze[Tl];return da(He,function(g,A){var L=g.invoke(A,He);return le.optional(function(){g.assert(A,"typeof "+L+'==="number"&&'+L+">=0&&"+L+"===("+L+"|0)","invalid vertex count")}),L})}else if(De)if(sl(De)){if(De)return he?new qi(he.thisDep,he.contextDep,he.propDep,function(g,A){var L=A.def(g.ELEMENTS,".vertCount-",g.OFFSET);return le.optional(function(){g.assert(A,L+">=0","invalid vertex offset/element buffer too small")}),L}):$o(function(g,A){return A.def(g.ELEMENTS,".vertCount")});var We=$o(function(){return-1});return le.optional(function(){We.MISSING=!0}),We}else{var h=new qi(De.thisDep||he.thisDep,De.contextDep||he.contextDep,De.propDep||he.propDep,function(g,A){var L=g.ELEMENTS;return g.OFFSET?A.def(L,"?",L,".vertCount-",g.OFFSET,":-1"):A.def(L,"?",L,".vertCount:-1")});return le.optional(function(){h.DYNAMIC=!0}),h}return null}return{elements:De,primitive:Ce(),count:ke(),instances:Fe(Pt,!1),offset:he}}function Vo(ve,ie){var Re=ve.static,ze=ve.dynamic,Ze={};return kt.forEach(function(De){var Ce=Kt(De);function Fe(he,ke){if(De in Re){var pe=he(Re[De]);Ze[Ce]=$o(function(){return pe})}else if(De in ze){var He=ze[De];Ze[Ce]=da(He,function(We,h){return ke(We,h,We.invoke(h,He))})}}switch(De){case Op:case Wu:case Hu:case bs:case wp:case pi:case Ml:case bf:case wf:case Ep:return Fe(function(he){return le.commandType(he,"boolean",De,ie.commandStr),he},function(he,ke,pe){return le.optional(function(){he.assert(ke,"typeof "+pe+'==="boolean"',"invalid flag "+De,he.commandStr)}),pe});case _f:return Fe(function(he){return le.commandParameter(he,Ms,"invalid "+De,ie.commandStr),Ms[he]},function(he,ke,pe){var He=he.constants.compareFuncs;return le.optional(function(){he.assert(ke,pe+" in "+He,"invalid "+De+", must be one of "+Object.keys(Ms))}),ke.def(He,"[",pe,"]")});case kh:return Fe(function(he){return le.command(R(he)&&he.length===2&&typeof he[0]=="number"&&typeof he[1]=="number"&&he[0]<=he[1],"depth range is 2d array",ie.commandStr),he},function(he,ke,pe){le.optional(function(){he.assert(ke,he.shared.isArrayLike+"("+pe+")&&"+pe+".length===2&&typeof "+pe+'[0]==="number"&&typeof '+pe+'[1]==="number"&&'+pe+"[0]<="+pe+"[1]","depth range must be a 2d array")});var He=ke.def("+",pe,"[0]"),We=ke.def("+",pe,"[1]");return[He,We]});case qu:return Fe(function(he){le.commandType(he,"object","blend.func",ie.commandStr);var ke="srcRGB"in he?he.srcRGB:he.src,pe="srcAlpha"in he?he.srcAlpha:he.src,He="dstRGB"in he?he.dstRGB:he.dst,We="dstAlpha"in he?he.dstAlpha:he.dst;return le.commandParameter(ke,Ba,Ce+".srcRGB",ie.commandStr),le.commandParameter(pe,Ba,Ce+".srcAlpha",ie.commandStr),le.commandParameter(He,Ba,Ce+".dstRGB",ie.commandStr),le.commandParameter(We,Ba,Ce+".dstAlpha",ie.commandStr),le.command(Zl.indexOf(ke+", "+He)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ke+", "+He+")",ie.commandStr),[Ba[ke],Ba[He],Ba[pe],Ba[We]]},function(he,ke,pe){var He=he.constants.blendFuncs;le.optional(function(){he.assert(ke,pe+"&&typeof "+pe+'==="object"',"invalid blend func, must be an object")});function We(me,Se){var Ve=ke.def('"',me,Se,'" in ',pe,"?",pe,".",me,Se,":",pe,".",me);return le.optional(function(){he.assert(ke,Ve+" in "+He,"invalid "+De+"."+me+Se+", must be one of "+Object.keys(Ba))}),Ve}var h=We("src","RGB"),g=We("dst","RGB");le.optional(function(){var me=he.constants.invalidBlendCombinations;he.assert(ke,me+".indexOf("+h+'+", "+'+g+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var A=ke.def(He,"[",h,"]"),L=ke.def(He,"[",We("src","Alpha"),"]"),Q=ke.def(He,"[",g,"]"),re=ke.def(He,"[",We("dst","Alpha"),"]");return[A,Q,L,re]});case gf:return Fe(function(he){if(typeof he=="string")return le.commandParameter(he,ut,"invalid "+De,ie.commandStr),[ut[he],ut[he]];if(typeof he=="object")return le.commandParameter(he.rgb,ut,De+".rgb",ie.commandStr),le.commandParameter(he.alpha,ut,De+".alpha",ie.commandStr),[ut[he.rgb],ut[he.alpha]];le.commandRaise("invalid blend.equation",ie.commandStr)},function(he,ke,pe){var He=he.constants.blendEquations,We=ke.def(),h=ke.def(),g=he.cond("typeof ",pe,'==="string"');return le.optional(function(){function A(L,Q,re){he.assert(L,re+" in "+He,"invalid "+Q+", must be one of "+Object.keys(ut))}A(g.then,De,pe),he.assert(g.else,pe+"&&typeof "+pe+'==="object"',"invalid "+De),A(g.else,De+".rgb",pe+".rgb"),A(g.else,De+".alpha",pe+".alpha")}),g.then(We,"=",h,"=",He,"[",pe,"];"),g.else(We,"=",He,"[",pe,".rgb];",h,"=",He,"[",pe,".alpha];"),ke(g),[We,h]});case Xu:return Fe(function(he){return le.command(R(he)&&he.length===4,"blend.color must be a 4d array",ie.commandStr),Vr(4,function(ke){return+he[ke]})},function(he,ke,pe){return le.optional(function(){he.assert(ke,he.shared.isArrayLike+"("+pe+")&&"+pe+".length===4","blend.color must be a 4d array")}),Vr(4,function(He){return ke.def("+",pe,"[",He,"]")})});case or:return Fe(function(he){return le.commandType(he,"number",Ce,ie.commandStr),he|0},function(he,ke,pe){return le.optional(function(){he.assert(ke,"typeof "+pe+'==="number"',"invalid stencil.mask")}),ke.def(pe,"|0")});case Ku:return Fe(function(he){le.commandType(he,"object",Ce,ie.commandStr);var ke=he.cmp||"keep",pe=he.ref||0,He="mask"in he?he.mask:-1;return le.commandParameter(ke,Ms,De+".cmp",ie.commandStr),le.commandType(pe,"number",De+".ref",ie.commandStr),le.commandType(He,"number",De+".mask",ie.commandStr),[Ms[ke],pe,He]},function(he,ke,pe){var He=he.constants.compareFuncs;le.optional(function(){function A(){he.assert(ke,Array.prototype.join.call(arguments,""),"invalid stencil.func")}A(pe+"&&typeof ",pe,'==="object"'),A('!("cmp" in ',pe,")||(",pe,".cmp in ",He,")")});var We=ke.def('"cmp" in ',pe,"?",He,"[",pe,".cmp]",":",xs),h=ke.def(pe,".ref|0"),g=ke.def('"mask" in ',pe,"?",pe,".mask|0:-1");return[We,h,g]});case Zc:case il:return Fe(function(he){le.commandType(he,"object",Ce,ie.commandStr);var ke=he.fail||"keep",pe=he.zfail||"keep",He=he.zpass||"keep";return le.commandParameter(ke,Wn,De+".fail",ie.commandStr),le.commandParameter(pe,Wn,De+".zfail",ie.commandStr),le.commandParameter(He,Wn,De+".zpass",ie.commandStr),[De===il?Hn:Xi,Wn[ke],Wn[pe],Wn[He]]},function(he,ke,pe){var He=he.constants.stencilOps;le.optional(function(){he.assert(ke,pe+"&&typeof "+pe+'==="object"',"invalid "+De)});function We(h){return le.optional(function(){he.assert(ke,'!("'+h+'" in '+pe+")||("+pe+"."+h+" in "+He+")","invalid "+De+"."+h+", must be one of "+Object.keys(Wn))}),ke.def('"',h,'" in ',pe,"?",He,"[",pe,".",h,"]:",xs)}return[De===il?Hn:Xi,We("fail"),We("zfail"),We("zpass")]});case Kc:return Fe(function(he){le.commandType(he,"object",Ce,ie.commandStr);var ke=he.factor|0,pe=he.units|0;return le.commandType(ke,"number",Ce+".factor",ie.commandStr),le.commandType(pe,"number",Ce+".units",ie.commandStr),[ke,pe]},function(he,ke,pe){le.optional(function(){he.assert(ke,pe+"&&typeof "+pe+'==="object"',"invalid "+De)});var He=ke.def(pe,".factor|0"),We=ke.def(pe,".units|0");return[He,We]});case Sp:return Fe(function(he){var ke=0;return he==="front"?ke=Xi:he==="back"&&(ke=Hn),le.command(!!ke,Ce,ie.commandStr),ke},function(he,ke,pe){return le.optional(function(){he.assert(ke,pe+'==="front"||'+pe+'==="back"',"invalid cull.face")}),ke.def(pe,'==="front"?',Xi,":",Hn)});case Yu:return Fe(function(he){return le.command(typeof he=="number"&&he>=rt.lineWidthDims[0]&&he<=rt.lineWidthDims[1],"invalid line width, must be a positive number between "+rt.lineWidthDims[0]+" and "+rt.lineWidthDims[1],ie.commandStr),he},function(he,ke,pe){return le.optional(function(){he.assert(ke,"typeof "+pe+'==="number"&&'+pe+">="+rt.lineWidthDims[0]+"&&"+pe+"<="+rt.lineWidthDims[1],"invalid line width")}),pe});case xp:return Fe(function(he){return le.commandParameter(he,Qu,Ce,ie.commandStr),Qu[he]},function(he,ke,pe){return le.optional(function(){he.assert(ke,pe+'==="cw"||'+pe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ke.def(pe+'==="cw"?'+Tf+":"+cd)});case ol:return Fe(function(he){return le.command(R(he)&&he.length===4,"color.mask must be length 4 array",ie.commandStr),he.map(function(ke){return!!ke})},function(he,ke,pe){return le.optional(function(){he.assert(ke,he.shared.isArrayLike+"("+pe+")&&"+pe+".length===4","invalid color.mask")}),Vr(4,function(He){return"!!"+pe+"["+He+"]"})});case _s:return Fe(function(he){le.command(typeof he=="object"&&he,Ce,ie.commandStr);var ke="value"in he?he.value:1,pe=!!he.invert;return le.command(typeof ke=="number"&&ke>=0&&ke<=1,"sample.coverage.value must be a number between 0 and 1",ie.commandStr),[ke,pe]},function(he,ke,pe){le.optional(function(){he.assert(ke,pe+"&&typeof "+pe+'==="object"',"invalid sample.coverage")});var He=ke.def('"value" in ',pe,"?+",pe,".value:1"),We=ke.def("!!",pe,".invert");return[He,We]})}}),Ze}function jo(ve,ie){var Re=ve.static,ze=ve.dynamic,Ze={};return Object.keys(Re).forEach(function(De){var Ce=Re[De],Fe;if(typeof Ce=="number"||typeof Ce=="boolean")Fe=$o(function(){return Ce});else if(typeof Ce=="function"){var he=Ce._reglType;he==="texture2d"||he==="textureCube"?Fe=$o(function(ke){return ke.link(Ce)}):he==="framebuffer"||he==="framebufferCube"?(le.command(Ce.color.length>0,'missing color attachment for framebuffer sent to uniform "'+De+'"',ie.commandStr),Fe=$o(function(ke){return ke.link(Ce.color[0])})):le.commandRaise('invalid data for uniform "'+De+'"',ie.commandStr)}else R(Ce)?Fe=$o(function(ke){var pe=ke.global.def("[",Vr(Ce.length,function(He){return le.command(typeof Ce[He]=="number"||typeof Ce[He]=="boolean","invalid uniform "+De,ke.commandStr),Ce[He]}),"]");return pe}):le.commandRaise('invalid or missing data for uniform "'+De+'"',ie.commandStr);Fe.value=Ce,Ze[De]=Fe}),Object.keys(ze).forEach(function(De){var Ce=ze[De];Ze[De]=da(Ce,function(Fe,he){return Fe.invoke(he,Ce)})}),Ze}function ar(ve,ie){var Re=ve.static,ze=ve.dynamic,Ze={};return Object.keys(Re).forEach(function(De){var Ce=Re[De],Fe=ue.id(De),he=new Ke;if(Jl(Ce))he.state=tu,he.buffer=vt.getBuffer(vt.create(Ce,kl,!1,!0)),he.type=0;else{var ke=vt.getBuffer(Ce);if(ke)he.state=tu,he.buffer=ke,he.type=0;else if(le.command(typeof Ce=="object"&&Ce,"invalid data for attribute "+De,ie.commandStr),"constant"in Ce){var pe=Ce.constant;he.buffer="null",he.state=nu,typeof pe=="number"?he.x=pe:(le.command(R(pe)&&pe.length>0&&pe.length<=4,"invalid constant for attribute "+De,ie.commandStr),ql.forEach(function(Q,re){re<pe.length&&(he[Q]=pe[re])}))}else{Jl(Ce.buffer)?ke=vt.getBuffer(vt.create(Ce.buffer,kl,!1,!0)):ke=vt.getBuffer(Ce.buffer),le.command(!!ke,'missing buffer for attribute "'+De+'"',ie.commandStr);var He=Ce.offset|0;le.command(He>=0,'invalid offset for attribute "'+De+'"',ie.commandStr);var We=Ce.stride|0;le.command(We>=0&&We<256,'invalid stride for attribute "'+De+'", must be integer betweeen [0, 255]',ie.commandStr);var h=Ce.size|0;le.command(!("size"in Ce)||h>0&&h<=4,'invalid size for attribute "'+De+'", must be 1,2,3,4',ie.commandStr);var g=!!Ce.normalized,A=0;"type"in Ce&&(le.commandParameter(Ce.type,Ui,"invalid type for attribute "+De,ie.commandStr),A=Ui[Ce.type]);var L=Ce.divisor|0;"divisor"in Ce&&(le.command(L===0||$t,'cannot specify divisor for attribute "'+De+'", instancing not supported',ie.commandStr),le.command(L>=0,'invalid divisor for attribute "'+De+'"',ie.commandStr)),le.optional(function(){var Q=ie.commandStr,re=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ce).forEach(function(me){le.command(re.indexOf(me)>=0,'unknown parameter "'+me+'" for attribute pointer "'+De+'" (valid parameters are '+re+")",Q)})}),he.buffer=ke,he.state=tu,he.size=h,he.normalized=g,he.type=A||ke.dtype,he.offset=He,he.stride=We,he.divisor=L}}Ze[De]=$o(function(Q,re){var me=Q.attribCache;if(Fe in me)return me[Fe];var Se={isStream:!1};return Object.keys(he).forEach(function(Ve){Se[Ve]=he[Ve]}),he.buffer&&(Se.buffer=Q.link(he.buffer),Se.type=Se.type||Se.buffer+".dtype"),me[Fe]=Se,Se})}),Object.keys(ze).forEach(function(De){var Ce=ze[De];function Fe(he,ke){var pe=he.invoke(ke,Ce),He=he.shared,We=he.constants,h=He.isBufferArgs,g=He.buffer;le.optional(function(){he.assert(ke,pe+"&&(typeof "+pe+'==="object"||typeof '+pe+'==="function")&&('+h+"("+pe+")||"+g+".getBuffer("+pe+")||"+g+".getBuffer("+pe+".buffer)||"+h+"("+pe+'.buffer)||("constant" in '+pe+"&&(typeof "+pe+'.constant==="number"||'+He.isArrayLike+"("+pe+".constant))))",'invalid dynamic attribute "'+De+'"')});var A={isStream:ke.def(!1)},L=new Ke;L.state=tu,Object.keys(L).forEach(function(Se){A[Se]=ke.def(""+L[Se])});var Q=A.buffer,re=A.type;ke("if(",h,"(",pe,")){",A.isStream,"=true;",Q,"=",g,".createStream(",kl,",",pe,");",re,"=",Q,".dtype;","}else{",Q,"=",g,".getBuffer(",pe,");","if(",Q,"){",re,"=",Q,".dtype;",'}else if("constant" in ',pe,"){",A.state,"=",nu,";","if(typeof "+pe+'.constant === "number"){',A[ql[0]],"=",pe,".constant;",ql.slice(1).map(function(Se){return A[Se]}).join("="),"=0;","}else{",ql.map(function(Se,Ve){return A[Se]+"="+pe+".constant.length>"+Ve+"?"+pe+".constant["+Ve+"]:0;"}).join(""),"}}else{","if(",h,"(",pe,".buffer)){",Q,"=",g,".createStream(",kl,",",pe,".buffer);","}else{",Q,"=",g,".getBuffer(",pe,".buffer);","}",re,'="type" in ',pe,"?",We.glTypes,"[",pe,".type]:",Q,".dtype;",A.normalized,"=!!",pe,".normalized;");function me(Se){ke(A[Se],"=",pe,".",Se,"|0;")}return me("size"),me("offset"),me("stride"),me("divisor"),ke("}}"),ke.exit("if(",A.isStream,"){",g,".destroyStream(",Q,");","}"),A}Ze[De]=da(Ce,Fe)}),Ze}function Qo(ve,ie){var Re=ve.static,ze=ve.dynamic;if(iu in Re){var Ze=Re[iu];return Ze!==null&&Dt.getVAO(Ze)===null&&(Ze=Dt.createVAO(Ze)),$o(function(Ce){return Ce.link(Dt.getVAO(Ze))})}else if(iu in ze){var De=ze[iu];return da(De,function(Ce,Fe){var he=Ce.invoke(Fe,De);return Fe.def(Ce.shared.vao+".getVAO("+he+")")})}return null}function ho(ve){var ie=ve.static,Re=ve.dynamic,ze={};return Object.keys(ie).forEach(function(Ze){var De=ie[Ze];ze[Ze]=$o(function(Ce,Fe){return typeof De=="number"||typeof De=="boolean"?""+De:Ce.link(De)})}),Object.keys(Re).forEach(function(Ze){var De=Re[Ze];ze[Ze]=da(De,function(Ce,Fe){return Ce.invoke(Fe,De)})}),ze}function Bo(ve,ie,Re,ze,Ze){var De=ve.static,Ce=ve.dynamic;le.optional(function(){var me=[ra,Jc,$i,qo,Al,Ef,Tl,Pt,ws,iu].concat(kt);function Se(Ve){Object.keys(Ve).forEach(function(mt){le.command(me.indexOf(mt)>=0,'unknown parameter "'+mt+'"',Ze.commandStr)})}Se(De),Se(Ce)});var Fe=qn(ve,ie),he=fn(ve),ke=cr(ve,he,Ze),pe=Or(ve,Ze),He=Vo(ve,Ze),We=lr(ve,Ze,Fe);function h(me){var Se=ke[me];Se&&(He[me]=Se)}h(Lo),h(Kt(ou));var g=Object.keys(He).length>0,A={framebuffer:he,draw:pe,shader:We,state:He,dirty:g,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(A.profile=ir(ve),A.uniforms=jo(Re,Ze),A.drawVAO=A.scopeVAO=Qo(ve),!A.drawVAO&&We.program&&!Fe&&Oe.angle_instanced_arrays){var L=!0,Q=We.program.attributes.map(function(me){var Se=ie.static[me];return L=L&&!!Se,Se});if(L&&Q.length>0){var re=Dt.getVAO(Dt.createVAO(Q));A.drawVAO=new qi(null,null,null,function(me,Se){return me.link(re)}),A.useVAO=!0}}return Fe?A.useVAO=!0:A.attributes=ar(ie,Ze),A.context=ho(ze),A}function Ko(ve,ie,Re){var ze=ve.shared,Ze=ze.context,De=ve.scope();Object.keys(Re).forEach(function(Ce){ie.save(Ze,"."+Ce);var Fe=Re[Ce],he=Fe.append(ve,ie);Array.isArray(he)?De(Ze,".",Ce,"=[",he.join(),"];"):De(Ze,".",Ce,"=",he,";")}),ie(De)}function li(ve,ie,Re,ze){var Ze=ve.shared,De=Ze.gl,Ce=Ze.framebuffer,Fe;tn&&(Fe=ie.def(Ze.extensions,".webgl_draw_buffers"));var he=ve.constants,ke=he.drawBuffer,pe=he.backBuffer,He;Re?He=Re.append(ve,ie):He=ie.def(Ce,".next"),ze||ie("if(",He,"!==",Ce,".cur){"),ie("if(",He,"){",De,".bindFramebuffer(",dd,",",He,".framebuffer);"),tn&&ie(Fe,".drawBuffersWEBGL(",ke,"[",He,".colorAttachments.length]);"),ie("}else{",De,".bindFramebuffer(",dd,",null);"),tn&&ie(Fe,".drawBuffersWEBGL(",pe,");"),ie("}",Ce,".cur=",He,";"),ze||ie("}")}function hi(ve,ie,Re){var ze=ve.shared,Ze=ze.gl,De=ve.current,Ce=ve.next,Fe=ze.current,he=ze.next,ke=ve.cond(Fe,".dirty");kt.forEach(function(pe){var He=Kt(pe);if(!(He in Re.state)){var We,h;if(He in Ce){We=Ce[He],h=De[He];var g=Vr(Mt[He].length,function(L){return ke.def(We,"[",L,"]")});ke(ve.cond(g.map(function(L,Q){return L+"!=="+h+"["+Q+"]"}).join("||")).then(Ze,".",At[He],"(",g,");",g.map(function(L,Q){return h+"["+Q+"]="+L}).join(";"),";"))}else{We=ke.def(he,".",He);var A=ve.cond(We,"!==",Fe,".",He);ke(A),He in Xt?A(ve.cond(We).then(Ze,".enable(",Xt[He],");").else(Ze,".disable(",Xt[He],");"),Fe,".",He,"=",We,";"):A(Ze,".",At[He],"(",We,");",Fe,".",He,"=",We,";")}}}),Object.keys(Re.state).length===0&&ke(Fe,".dirty=false;"),ie(ke)}function ei(ve,ie,Re,ze){var Ze=ve.shared,De=ve.current,Ce=Ze.current,Fe=Ze.gl;fd(Object.keys(Re)).forEach(function(he){var ke=Re[he];if(!(ze&&!ze(ke))){var pe=ke.append(ve,ie);if(Xt[he]){var He=Xt[he];sl(ke)?pe?ie(Fe,".enable(",He,");"):ie(Fe,".disable(",He,");"):ie(ve.cond(pe).then(Fe,".enable(",He,");").else(Fe,".disable(",He,");")),ie(Ce,".",he,"=",pe,";")}else if(R(pe)){var We=De[he];ie(Fe,".",At[he],"(",pe,");",pe.map(function(h,g){return We+"["+g+"]="+h}).join(";"),";")}else ie(Fe,".",At[he],"(",pe,");",Ce,".",he,"=",pe,";")}})}function wo(ve,ie){$t&&(ve.instancing=ie.def(ve.shared.extensions,".angle_instanced_arrays"))}function er(ve,ie,Re,ze,Ze){var De=ve.shared,Ce=ve.stats,Fe=De.current,he=De.timer,ke=Re.profile;function pe(){return typeof performance>"u"?"Date.now()":"performance.now()"}var He,We;function h(me){He=ie.def(),me(He,"=",pe(),";"),typeof Ze=="string"?me(Ce,".count+=",Ze,";"):me(Ce,".count++;"),jt&&(ze?(We=ie.def(),me(We,"=",he,".getNumPendingQueries();")):me(he,".beginQuery(",Ce,");"))}function g(me){me(Ce,".cpuTime+=",pe(),"-",He,";"),jt&&(ze?me(he,".pushScopeStats(",We,",",he,".getNumPendingQueries(),",Ce,");"):me(he,".endQuery();"))}function A(me){var Se=ie.def(Fe,".profile");ie(Fe,".profile=",me,";"),ie.exit(Fe,".profile=",Se,";")}var L;if(ke){if(sl(ke)){ke.enable?(h(ie),g(ie.exit),A("true")):A("false");return}L=ke.append(ve,ie),A(L)}else L=ie.def(Fe,".profile");var Q=ve.block();h(Q),ie("if(",L,"){",Q,"}");var re=ve.block();g(re),ie.exit("if(",L,"){",re,"}")}function vi(ve,ie,Re,ze,Ze){var De=ve.shared;function Ce(he){switch(he){case rd:case id:case Kl:return 2;case su:case ad:case bi:return 3;case od:case ld:case Af:return 4;default:return 1}}function Fe(he,ke,pe){var He=De.gl,We=ie.def(he,".location"),h=ie.def(De.attributes,"[",We,"]"),g=pe.state,A=pe.buffer,L=[pe.x,pe.y,pe.z,pe.w],Q=["buffer","normalized","offset","stride"];function re(){ie("if(!",h,".buffer){",He,".enableVertexAttribArray(",We,");}");var Se=pe.type,Ve;if(pe.size?Ve=ie.def(pe.size,"||",ke):Ve=ke,ie("if(",h,".type!==",Se,"||",h,".size!==",Ve,"||",Q.map(function(bt){return h+"."+bt+"!=="+pe[bt]}).join("||"),"){",He,".bindBuffer(",kl,",",A,".buffer);",He,".vertexAttribPointer(",[We,Ve,Se,pe.normalized,pe.stride,pe.offset],");",h,".type=",Se,";",h,".size=",Ve,";",Q.map(function(bt){return h+"."+bt+"="+pe[bt]+";"}).join(""),"}"),$t){var mt=pe.divisor;ie("if(",h,".divisor!==",mt,"){",ve.instancing,".vertexAttribDivisorANGLE(",[We,mt],");",h,".divisor=",mt,";}")}}function me(){ie("if(",h,".buffer){",He,".disableVertexAttribArray(",We,");",h,".buffer=null;","}if(",ql.map(function(Se,Ve){return h+"."+Se+"!=="+L[Ve]}).join("||"),"){",He,".vertexAttrib4f(",We,",",L,");",ql.map(function(Se,Ve){return h+"."+Se+"="+L[Ve]+";"}).join(""),"}")}g===tu?re():g===nu?me():(ie("if(",g,"===",tu,"){"),re(),ie("}else{"),me(),ie("}"))}ze.forEach(function(he){var ke=he.name,pe=Re.attributes[ke],He;if(pe){if(!Ze(pe))return;He=pe.append(ve,ie)}else{if(!Ze(Ua))return;var We=ve.scopeAttrib(ke);le.optional(function(){ve.assert(ie,We+".state","missing attribute "+ke)}),He={},Object.keys(new Ke).forEach(function(h){He[h]=ie.def(We,".",h)})}Fe(ve.link(he),Ce(he.info.type),He)})}function Dr(ve,ie,Re,ze,Ze){for(var De=ve.shared,Ce=De.gl,Fe,he=0;he<ze.length;++he){var ke=ze[he],pe=ke.name,He=ke.info.type,We=Re.uniforms[pe],h=ve.link(ke),g=h+".location",A;if(We){if(!Ze(We))continue;if(sl(We)){var L=We.value;if(le.command(L!==null&&typeof L<"u",'missing uniform "'+pe+'"',ve.commandStr),He===Ai||He===Co){le.command(typeof L=="function"&&(He===Ai&&(L._reglType==="texture2d"||L._reglType==="framebuffer")||He===Co&&(L._reglType==="textureCube"||L._reglType==="framebufferCube")),"invalid texture for uniform "+pe,ve.commandStr);var Q=ve.link(L._texture||L.color[0]._texture);ie(Ce,".uniform1i(",g,",",Q+".bind());"),ie.exit(Q,".unbind();")}else if(He===sd||He===cu||He===Ju){le.optional(function(){le.command(R(L),"invalid matrix for uniform "+pe,ve.commandStr),le.command(He===sd&&L.length===4||He===cu&&L.length===9||He===Ju&&L.length===16,"invalid length for matrix uniform "+pe,ve.commandStr)});var re=ve.global.def("new Float32Array(["+Array.prototype.slice.call(L)+"])"),me=2;He===cu?me=3:He===Ju&&(me=4),ie(Ce,".uniformMatrix",me,"fv(",g,",false,",re,");")}else{switch(He){case Mo:le.commandType(L,"number","uniform "+pe,ve.commandStr),Fe="1f";break;case rd:le.command(R(L)&&L.length===2,"uniform "+pe,ve.commandStr),Fe="2f";break;case su:le.command(R(L)&&L.length===3,"uniform "+pe,ve.commandStr),Fe="3f";break;case od:le.command(R(L)&&L.length===4,"uniform "+pe,ve.commandStr),Fe="4f";break;case uu:le.commandType(L,"boolean","uniform "+pe,ve.commandStr),Fe="1i";break;case Zu:le.commandType(L,"number","uniform "+pe,ve.commandStr),Fe="1i";break;case Kl:le.command(R(L)&&L.length===2,"uniform "+pe,ve.commandStr),Fe="2i";break;case id:le.command(R(L)&&L.length===2,"uniform "+pe,ve.commandStr),Fe="2i";break;case bi:le.command(R(L)&&L.length===3,"uniform "+pe,ve.commandStr),Fe="3i";break;case ad:le.command(R(L)&&L.length===3,"uniform "+pe,ve.commandStr),Fe="3i";break;case Af:le.command(R(L)&&L.length===4,"uniform "+pe,ve.commandStr),Fe="4i";break;case ld:le.command(R(L)&&L.length===4,"uniform "+pe,ve.commandStr),Fe="4i";break}ie(Ce,".uniform",Fe,"(",g,",",R(L)?Array.prototype.slice.call(L):L,");")}continue}else A=We.append(ve,ie)}else{if(!Ze(Ua))continue;A=ie.def(De.uniforms,"[",ue.id(pe),"]")}He===Ai?(le(!Array.isArray(A),"must specify a scalar prop for textures"),ie("if(",A,"&&",A,'._reglType==="framebuffer"){',A,"=",A,".color[0];","}")):He===Co&&(le(!Array.isArray(A),"must specify a scalar prop for cube maps"),ie("if(",A,"&&",A,'._reglType==="framebufferCube"){',A,"=",A,".color[0];","}")),le.optional(function(){function Ht(Lt,nn){ve.assert(ie,Lt,'bad data or missing for uniform "'+pe+'".  '+nn)}function En(Lt){le(!Array.isArray(A),"must not specify an array type for uniform"),Ht("typeof "+A+'==="'+Lt+'"',"invalid type, expected "+Lt)}function Sn(Lt,nn){Array.isArray(A)?le(A.length===Lt,"must have length "+Lt):Ht(De.isArrayLike+"("+A+")&&"+A+".length==="+Lt,"invalid vector, should have length "+Lt,ve.commandStr)}function Yn(Lt){le(!Array.isArray(A),"must not specify a value type"),Ht("typeof "+A+'==="function"&&'+A+'._reglType==="texture'+(Lt===xf?"2d":"Cube")+'"',"invalid texture type",ve.commandStr)}switch(He){case Zu:En("number");break;case id:Sn(2);break;case ad:Sn(3);break;case ld:Sn(4);break;case Mo:En("number");break;case rd:Sn(2);break;case su:Sn(3);break;case od:Sn(4);break;case uu:En("boolean");break;case Kl:Sn(2);break;case bi:Sn(3);break;case Af:Sn(4);break;case sd:Sn(4);break;case cu:Sn(9);break;case Ju:Sn(16);break;case Ai:Yn(xf);break;case Co:Yn(Nh);break}});var Se=1;switch(He){case Ai:case Co:var Ve=ie.def(A,"._texture");ie(Ce,".uniform1i(",g,",",Ve,".bind());"),ie.exit(Ve,".unbind();");continue;case Zu:case uu:Fe="1i";break;case id:case Kl:Fe="2i",Se=2;break;case ad:case bi:Fe="3i",Se=3;break;case ld:case Af:Fe="4i",Se=4;break;case Mo:Fe="1f";break;case rd:Fe="2f",Se=2;break;case su:Fe="3f",Se=3;break;case od:Fe="4f",Se=4;break;case sd:Fe="Matrix2fv";break;case cu:Fe="Matrix3fv";break;case Ju:Fe="Matrix4fv";break}if(ie(Ce,".uniform",Fe,"(",g,","),Fe.charAt(0)==="M"){var mt=Math.pow(He-sd+2,2),bt=ve.global.def("new Float32Array(",mt,")");Array.isArray(A)?ie("false,(",Vr(mt,function(Ht){return bt+"["+Ht+"]="+A[Ht]}),",",bt,")"):ie("false,(Array.isArray(",A,")||",A," instanceof Float32Array)?",A,":(",Vr(mt,function(Ht){return bt+"["+Ht+"]="+A+"["+Ht+"]"}),",",bt,")")}else Se>1?ie(Vr(Se,function(Ht){return Array.isArray(A)?A[Ht]:A+"["+Ht+"]"})):(le(!Array.isArray(A),"uniform value must not be an array"),ie(A));ie(");")}}function $n(ve,ie,Re,ze){var Ze=ve.shared,De=Ze.gl,Ce=Ze.draw,Fe=ze.draw;function he(){var Ve=Fe.elements,mt,bt=ie;return Ve?((Ve.contextDep&&ze.contextDynamic||Ve.propDep)&&(bt=Re),mt=Ve.append(ve,bt)):mt=bt.def(Ce,".",qo),mt&&bt("if("+mt+")"+De+".bindBuffer("+Tp+","+mt+".buffer.buffer);"),mt}function ke(){var Ve=Fe.count,mt,bt=ie;return Ve?((Ve.contextDep&&ze.contextDynamic||Ve.propDep)&&(bt=Re),mt=Ve.append(ve,bt),le.optional(function(){Ve.MISSING&&ve.assert(ie,"false","missing vertex count"),Ve.DYNAMIC&&ve.assert(bt,mt+">=0","missing vertex count")})):(mt=bt.def(Ce,".",Tl),le.optional(function(){ve.assert(bt,mt+">=0","missing vertex count")})),mt}var pe=he();function He(Ve){var mt=Fe[Ve];return mt?mt.contextDep&&ze.contextDynamic||mt.propDep?mt.append(ve,Re):mt.append(ve,ie):ie.def(Ce,".",Ve)}var We=He(Al),h=He(Ef),g=ke();if(typeof g=="number"){if(g===0)return}else Re("if(",g,"){"),Re.exit("}");var A,L;$t&&(A=He(Pt),L=ve.instancing);var Q=pe+".type",re=Fe.elements&&sl(Fe.elements);function me(){function Ve(){Re(L,".drawElementsInstancedANGLE(",[We,g,Q,h+"<<(("+Q+"-"+eu+")>>1)",A],");")}function mt(){Re(L,".drawArraysInstancedANGLE(",[We,h,g,A],");")}pe?re?Ve():(Re("if(",pe,"){"),Ve(),Re("}else{"),mt(),Re("}")):mt()}function Se(){function Ve(){Re(De+".drawElements("+[We,g,Q,h+"<<(("+Q+"-"+eu+")>>1)"]+");")}function mt(){Re(De+".drawArrays("+[We,h,g]+");")}pe?re?Ve():(Re("if(",pe,"){"),Ve(),Re("}else{"),mt(),Re("}")):mt()}$t&&(typeof A!="number"||A>=0)?typeof A=="string"?(Re("if(",A,">0){"),me(),Re("}else if(",A,"<0){"),Se(),Re("}")):me():Se()}function yr(ve,ie,Re,ze,Ze){var De=Bn(),Ce=De.proc("body",Ze);return le.optional(function(){De.commandStr=ie.commandStr,De.command=De.link(ie.commandStr)}),$t&&(De.instancing=Ce.def(De.shared.extensions,".angle_instanced_arrays")),ve(De,Ce,Re,ze),De.compile().body}function tr(ve,ie,Re,ze){wo(ve,ie),Re.useVAO?Re.drawVAO?ie(ve.shared.vao,".setVAO(",Re.drawVAO.append(ve,ie),");"):ie(ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"):(ie(ve.shared.vao,".setVAO(null);"),vi(ve,ie,Re,ze.attributes,function(){return!0})),Dr(ve,ie,Re,ze.uniforms,function(){return!0}),$n(ve,ie,ie,Re)}function Eo(ve,ie){var Re=ve.proc("draw",1);wo(ve,Re),Ko(ve,Re,ie.context),li(ve,Re,ie.framebuffer),hi(ve,Re,ie),ei(ve,Re,ie.state),er(ve,Re,ie,!1,!0);var ze=ie.shader.progVar.append(ve,Re);if(Re(ve.shared.gl,".useProgram(",ze,".program);"),ie.shader.program)tr(ve,Re,ie,ie.shader.program);else{Re(ve.shared.vao,".setVAO(null);");var Ze=ve.global.def("{}"),De=Re.def(ze,".id"),Ce=Re.def(Ze,"[",De,"]");Re(ve.cond(Ce).then(Ce,".call(this,a0);").else(Ce,"=",Ze,"[",De,"]=",ve.link(function(Fe){return yr(tr,ve,ie,Fe,1)}),"(",ze,");",Ce,".call(this,a0);"))}Object.keys(ie.state).length>0&&Re(ve.shared.current,".dirty=true;")}function Nl(ve,ie,Re,ze){ve.batchId="a1",wo(ve,ie);function Ze(){return!0}vi(ve,ie,Re,ze.attributes,Ze),Dr(ve,ie,Re,ze.uniforms,Ze),$n(ve,ie,ie,Re)}function Ao(ve,ie,Re,ze){wo(ve,ie);var Ze=Re.contextDep,De=ie.def(),Ce="a0",Fe="a1",he=ie.def();ve.shared.props=he,ve.batchId=De;var ke=ve.scope(),pe=ve.scope();ie(ke.entry,"for(",De,"=0;",De,"<",Fe,";++",De,"){",he,"=",Ce,"[",De,"];",pe,"}",ke.exit);function He(Q){return Q.contextDep&&Ze||Q.propDep}function We(Q){return!He(Q)}if(Re.needsContext&&Ko(ve,pe,Re.context),Re.needsFramebuffer&&li(ve,pe,Re.framebuffer),ei(ve,pe,Re.state,He),Re.profile&&He(Re.profile)&&er(ve,pe,Re,!1,!0),ze)Re.useVAO?Re.drawVAO?He(Re.drawVAO)?pe(ve.shared.vao,".setVAO(",Re.drawVAO.append(ve,pe),");"):ke(ve.shared.vao,".setVAO(",Re.drawVAO.append(ve,ke),");"):ke(ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"):(ke(ve.shared.vao,".setVAO(null);"),vi(ve,ke,Re,ze.attributes,We),vi(ve,pe,Re,ze.attributes,He)),Dr(ve,ke,Re,ze.uniforms,We),Dr(ve,pe,Re,ze.uniforms,He),$n(ve,ke,pe,Re);else{var h=ve.global.def("{}"),g=Re.shader.progVar.append(ve,pe),A=pe.def(g,".id"),L=pe.def(h,"[",A,"]");pe(ve.shared.gl,".useProgram(",g,".program);","if(!",L,"){",L,"=",h,"[",A,"]=",ve.link(function(Q){return yr(Nl,ve,Re,Q,2)}),"(",g,");}",L,".call(this,a0[",De,"],",De,");")}}function ge(ve,ie){var Re=ve.proc("batch",2);ve.batchId="0",wo(ve,Re);var ze=!1,Ze=!0;Object.keys(ie.context).forEach(function(h){ze=ze||ie.context[h].propDep}),ze||(Ko(ve,Re,ie.context),Ze=!1);var De=ie.framebuffer,Ce=!1;De?(De.propDep?ze=Ce=!0:De.contextDep&&ze&&(Ce=!0),Ce||li(ve,Re,De)):li(ve,Re,null),ie.state.viewport&&ie.state.viewport.propDep&&(ze=!0);function Fe(h){return h.contextDep&&ze||h.propDep}hi(ve,Re,ie),ei(ve,Re,ie.state,function(h){return!Fe(h)}),(!ie.profile||!Fe(ie.profile))&&er(ve,Re,ie,!1,"a1"),ie.contextDep=ze,ie.needsContext=Ze,ie.needsFramebuffer=Ce;var he=ie.shader.progVar;if(he.contextDep&&ze||he.propDep)Ao(ve,Re,ie,null);else{var ke=he.append(ve,Re);if(Re(ve.shared.gl,".useProgram(",ke,".program);"),ie.shader.program)Ao(ve,Re,ie,ie.shader.program);else{Re(ve.shared.vao,".setVAO(null);");var pe=ve.global.def("{}"),He=Re.def(ke,".id"),We=Re.def(pe,"[",He,"]");Re(ve.cond(We).then(We,".call(this,a0,a1);").else(We,"=",pe,"[",He,"]=",ve.link(function(h){return yr(Ao,ve,ie,h,2)}),"(",ke,");",We,".call(this,a0,a1);"))}}Object.keys(ie.state).length>0&&Re(ve.shared.current,".dirty=true;")}function ot(ve,ie){var Re=ve.proc("scope",3);ve.batchId="a2";var ze=ve.shared,Ze=ze.current;Ko(ve,Re,ie.context),ie.framebuffer&&ie.framebuffer.append(ve,Re),fd(Object.keys(ie.state)).forEach(function(Ce){var Fe=ie.state[Ce],he=Fe.append(ve,Re);R(he)?he.forEach(function(ke,pe){Re.set(ve.next[Ce],"["+pe+"]",ke)}):Re.set(ze.next,"."+Ce,he)}),er(ve,Re,ie,!0,!0),[qo,Ef,Tl,Pt,Al].forEach(function(Ce){var Fe=ie.draw[Ce];Fe&&Re.set(ze.draw,"."+Ce,""+Fe.append(ve,Re))}),Object.keys(ie.uniforms).forEach(function(Ce){var Fe=ie.uniforms[Ce].append(ve,Re);Array.isArray(Fe)&&(Fe="["+Fe.join()+"]"),Re.set(ze.uniforms,"["+ue.id(Ce)+"]",Fe)}),Object.keys(ie.attributes).forEach(function(Ce){var Fe=ie.attributes[Ce].append(ve,Re),he=ve.scopeAttrib(Ce);Object.keys(new Ke).forEach(function(ke){Re.set(he,"."+ke,Fe[ke])})}),ie.scopeVAO&&Re.set(ze.vao,".targetVAO",ie.scopeVAO.append(ve,Re));function De(Ce){var Fe=ie.shader[Ce];Fe&&Re.set(ze.shader,"."+Ce,Fe.append(ve,Re))}De(Jc),De($i),Object.keys(ie.state).length>0&&(Re(Ze,".dirty=true;"),Re.exit(Ze,".dirty=true;")),Re("a1(",ve.shared.context,",a0,",ve.batchId,");")}function tt(ve){if(!(typeof ve!="object"||R(ve))){for(var ie=Object.keys(ve),Re=0;Re<ie.length;++Re)if(en.isDynamic(ve[ie[Re]]))return!0;return!1}}function sn(ve,ie,Re){var ze=ie.static[Re];if(!ze||!tt(ze))return;var Ze=ve.global,De=Object.keys(ze),Ce=!1,Fe=!1,he=!1,ke=ve.global.def("{}");De.forEach(function(He){var We=ze[He];if(en.isDynamic(We)){typeof We=="function"&&(We=ze[He]=en.unbox(We));var h=da(We,null);Ce=Ce||h.thisDep,he=he||h.propDep,Fe=Fe||h.contextDep}else{switch(Ze(ke,".",He,"="),typeof We){case"number":Ze(We);break;case"string":Ze('"',We,'"');break;case"object":Array.isArray(We)&&Ze("[",We.join(),"]");break;default:Ze(ve.link(We));break}Ze(";")}});function pe(He,We){De.forEach(function(h){var g=ze[h];if(en.isDynamic(g)){var A=He.invoke(We,g);We(ke,".",h,"=",A,";")}})}ie.dynamic[Re]=new en.DynamicVariable(rl,{thisDep:Ce,contextDep:Fe,propDep:he,ref:ke,append:pe}),delete ie.static[Re]}function vr(ve,ie,Re,ze,Ze){var De=Bn();De.stats=De.link(Ze),Object.keys(ie.static).forEach(function(Fe){sn(De,ie,Fe)}),Ap.forEach(function(Fe){sn(De,ve,Fe)});var Ce=Bo(ve,ie,Re,ze,De);return Eo(De,Ce),ot(De,Ce),ge(De,Ce),o(De.compile(),{destroy:function(){Ce.shader.program.destroy()}})}return{next:rn,current:Mt,procs:function(){var ve=Bn(),ie=ve.proc("poll"),Re=ve.proc("refresh"),ze=ve.block();ie(ze),Re(ze);var Ze=ve.shared,De=Ze.gl,Ce=Ze.next,Fe=Ze.current;ze(Fe,".dirty=false;"),li(ve,ie),li(ve,Re,null,!0);var he;$t&&(he=ve.link($t)),Oe.oes_vertex_array_object&&Re(ve.link(Oe.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ke=0;ke<rt.maxAttributes;++ke){var pe=Re.def(Ze.attributes,"[",ke,"]"),He=ve.cond(pe,".buffer");He.then(De,".enableVertexAttribArray(",ke,");",De,".bindBuffer(",kl,",",pe,".buffer.buffer);",De,".vertexAttribPointer(",ke,",",pe,".size,",pe,".type,",pe,".normalized,",pe,".stride,",pe,".offset);").else(De,".disableVertexAttribArray(",ke,");",De,".vertexAttrib4f(",ke,",",pe,".x,",pe,".y,",pe,".z,",pe,".w);",pe,".buffer=null;"),Re(He),$t&&Re(he,".vertexAttribDivisorANGLE(",ke,",",pe,".divisor);")}return Re(ve.shared.vao,".currentVAO=null;",ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"),Object.keys(Xt).forEach(function(We){var h=Xt[We],g=ze.def(Ce,".",We),A=ve.block();A("if(",g,"){",De,".enable(",h,")}else{",De,".disable(",h,")}",Fe,".",We,"=",g,";"),Re(A),ie("if(",g,"!==",Fe,".",We,"){",A,"}")}),Object.keys(At).forEach(function(We){var h=At[We],g=Mt[We],A,L,Q=ve.block();if(Q(De,".",h,"("),R(g)){var re=g.length;A=ve.global.def(Ce,".",We),L=ve.global.def(Fe,".",We),Q(Vr(re,function(me){return A+"["+me+"]"}),");",Vr(re,function(me){return L+"["+me+"]="+A+"["+me+"];"}).join("")),ie("if(",Vr(re,function(me){return A+"["+me+"]!=="+L+"["+me+"]"}).join("||"),"){",Q,"}")}else A=ze.def(Ce,".",We),L=ze.def(Fe,".",We),Q(A,");",Fe,".",We,"=",A,";"),ie("if(",A,"!==",L,"){",Q,"}");Re(Q)}),ve.compile()}(),compile:vr}}function pd(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var fu=34918,Er=34919,$h=35007,fa=function(z,ue){if(!ue.ext_disjoint_timer_query)return null;var Oe=[];function rt(){return Oe.pop()||ue.ext_disjoint_timer_query.createQueryEXT()}function vt($t){Oe.push($t)}var et=[];function pt($t){var tn=rt();ue.ext_disjoint_timer_query.beginQueryEXT($h,tn),et.push(tn),jt(et.length-1,et.length,$t)}function Ct(){ue.ext_disjoint_timer_query.endQueryEXT($h)}function Ft(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Dt=[];function ct(){return Dt.pop()||new Ft}function Yt($t){Dt.push($t)}var Gt=[];function jt($t,tn,Mt){var rn=ct();rn.startQueryIndex=$t,rn.endQueryIndex=tn,rn.sum=0,rn.stats=Mt,Gt.push(rn)}var Et=[],Ke=[];function ut(){var $t,tn,Mt=et.length;if(Mt!==0){Ke.length=Math.max(Ke.length,Mt+1),Et.length=Math.max(Et.length,Mt+1),Et[0]=0,Ke[0]=0;var rn=0;for($t=0,tn=0;tn<et.length;++tn){var kt=et[tn];ue.ext_disjoint_timer_query.getQueryObjectEXT(kt,Er)?(rn+=ue.ext_disjoint_timer_query.getQueryObjectEXT(kt,fu),vt(kt)):et[$t++]=kt,Et[tn+1]=rn,Ke[tn+1]=$t}for(et.length=$t,$t=0,tn=0;tn<Gt.length;++tn){var Xt=Gt[tn],At=Xt.startQueryIndex,Kt=Xt.endQueryIndex;Xt.sum+=Et[Kt]-Et[At];var Cn=Ke[At],Xn=Ke[Kt];Xn===Cn?(Xt.stats.gpuTime+=Xt.sum/1e6,Yt(Xt)):(Xt.startQueryIndex=Cn,Xt.endQueryIndex=Xn,Gt[$t++]=Xt)}Gt.length=$t}}return{beginQuery:pt,endQuery:Ct,pushScopeStats:jt,update:ut,getNumPendingQueries:function(){return et.length},clear:function(){Oe.push.apply(Oe,et);for(var $t=0;$t<Oe.length;$t++)ue.ext_disjoint_timer_query.deleteQueryEXT(Oe[$t]);et.length=0,Oe.length=0},restore:function(){et.length=0,Oe.length=0}}},Do=16384,oa=256,Cp=1024,Ti=34962,Aa="webglcontextlost",pu="webglcontextrestored",hd=1,Fo=2,Yo=3;function Nf(z,ue){for(var Oe=0;Oe<z.length;++Oe)if(z[Oe]===ue)return Oe;return-1}function Dp(z){var ue=ur(z);if(!ue)return null;var Oe=ue.gl,rt=Oe.getContextAttributes(),vt=Oe.isContextLost(),et=oo(Oe,ue);if(!et)return null;var pt=ui(),Ct=pd(),Ft=et.extensions,Dt=fa(Oe,Ft),ct=Ar(),Yt=Oe.drawingBufferWidth,Gt=Oe.drawingBufferHeight,jt={tick:0,time:0,viewportWidth:Yt,viewportHeight:Gt,framebufferWidth:Yt,framebufferHeight:Gt,drawingBufferWidth:Yt,drawingBufferHeight:Gt,pixelRatio:ue.pixelRatio},Et={},Ke={elements:null,primitive:4,count:-1,offset:0,instances:-1},ut=Nc(Oe,Ft),$t=wa(Oe,Ct,ue,Mt),tn=pf(Oe,Ft,ut,Ct,$t);function Mt($n){return tn.destroyBuffer($n)}var rn=vn(Oe,Ft,$t,Ct),kt=vf(Oe,pt,Ct,ue),Xt=Pr(Oe,Ft,ut,function(){Cn.procs.poll()},jt,Ct,ue),At=Gu(Oe,Ft,ut,Ct,ue),Kt=df(Oe,Ft,ut,Xt,At,Ct),Cn=nm(Oe,pt,Ft,ut,$t,rn,Xt,Kt,Et,tn,kt,Ke,jt,Dt,ue),Xn=Th(Oe,Kt,Cn.procs.poll,jt,rt,Ft,ut),It=Cn.next,Nt=Oe.canvas,xt=[],Bn=[],ir=[],fn=[ue.onDestroy],cr=null;function qn(){if(xt.length===0){Dt&&Dt.update(),cr=null;return}cr=In.next(qn),ei();for(var $n=xt.length-1;$n>=0;--$n){var yr=xt[$n];yr&&yr(jt,null,0)}Oe.flush(),Dt&&Dt.update()}function lr(){!cr&&xt.length>0&&(cr=In.next(qn))}function Or(){cr&&(In.cancel(qn),cr=null)}function Vo($n){$n.preventDefault(),vt=!0,Or(),Bn.forEach(function(yr){yr()})}function jo($n){Oe.getError(),vt=!1,et.restore(),kt.restore(),$t.restore(),Xt.restore(),At.restore(),Kt.restore(),tn.restore(),Dt&&Dt.restore(),Cn.procs.refresh(),lr(),ir.forEach(function(yr){yr()})}Nt&&(Nt.addEventListener(Aa,Vo,!1),Nt.addEventListener(pu,jo,!1));function ar(){xt.length=0,Or(),Nt&&(Nt.removeEventListener(Aa,Vo),Nt.removeEventListener(pu,jo)),kt.clear(),Kt.clear(),At.clear(),Xt.clear(),rn.clear(),$t.clear(),tn.clear(),Dt&&Dt.clear(),fn.forEach(function($n){$n()})}function Qo($n){le(!!$n,"invalid args to regl({...})"),le.type($n,"object","invalid args to regl({...})");function yr(Ze){var De=o({},Ze);delete De.uniforms,delete De.attributes,delete De.context,delete De.vao,"stencil"in De&&De.stencil.op&&(De.stencil.opBack=De.stencil.opFront=De.stencil.op,delete De.stencil.op);function Ce(Fe){if(Fe in De){var he=De[Fe];delete De[Fe],Object.keys(he).forEach(function(ke){De[Fe+"."+ke]=he[ke]})}}return Ce("blend"),Ce("depth"),Ce("cull"),Ce("stencil"),Ce("polygonOffset"),Ce("scissor"),Ce("sample"),"vao"in Ze&&(De.vao=Ze.vao),De}function tr(Ze,De){var Ce={},Fe={};return Object.keys(Ze).forEach(function(he){var ke=Ze[he];if(en.isDynamic(ke)){Fe[he]=en.unbox(ke,he);return}else if(De&&Array.isArray(ke)){for(var pe=0;pe<ke.length;++pe)if(en.isDynamic(ke[pe])){Fe[he]=en.unbox(ke,he);return}}Ce[he]=ke}),{dynamic:Fe,static:Ce}}var Eo=tr($n.context||{},!0),Nl=tr($n.uniforms||{},!0),Ao=tr($n.attributes||{},!1),ge=tr(yr($n),!1),ot={gpuTime:0,cpuTime:0,count:0},tt=Cn.compile(ge,Ao,Nl,Eo,ot),sn=tt.draw,vr=tt.batch,ve=tt.scope,ie=[];function Re(Ze){for(;ie.length<Ze;)ie.push(null);return ie}function ze(Ze,De){var Ce;if(vt&&le.raise("context lost"),typeof Ze=="function")return ve.call(this,null,Ze,0);if(typeof De=="function")if(typeof Ze=="number")for(Ce=0;Ce<Ze;++Ce)ve.call(this,null,De,Ce);else if(Array.isArray(Ze))for(Ce=0;Ce<Ze.length;++Ce)ve.call(this,Ze[Ce],De,Ce);else return ve.call(this,Ze,De,0);else if(typeof Ze=="number"){if(Ze>0)return vr.call(this,Re(Ze|0),Ze|0)}else if(Array.isArray(Ze)){if(Ze.length)return vr.call(this,Ze,Ze.length)}else return sn.call(this,Ze)}return o(ze,{stats:ot,destroy:function(){tt.destroy()}})}var ho=Kt.setFBO=Qo({framebuffer:en.define.call(null,hd,"framebuffer")});function Bo($n,yr){var tr=0;Cn.procs.poll();var Eo=yr.color;Eo&&(Oe.clearColor(+Eo[0]||0,+Eo[1]||0,+Eo[2]||0,+Eo[3]||0),tr|=Do),"depth"in yr&&(Oe.clearDepth(+yr.depth),tr|=oa),"stencil"in yr&&(Oe.clearStencil(yr.stencil|0),tr|=Cp),le(!!tr,"called regl.clear with no buffer specified"),Oe.clear(tr)}function Ko($n){if(le(typeof $n=="object"&&$n,"regl.clear() takes an object as input"),"framebuffer"in $n)if($n.framebuffer&&$n.framebuffer_reglType==="framebufferCube")for(var yr=0;yr<6;++yr)ho(o({framebuffer:$n.framebuffer.faces[yr]},$n),Bo);else ho($n,Bo);else Bo(null,$n)}function li($n){le.type($n,"function","regl.frame() callback must be a function"),xt.push($n);function yr(){var tr=Nf(xt,$n);le(tr>=0,"cannot cancel a frame twice");function Eo(){var Nl=Nf(xt,Eo);xt[Nl]=xt[xt.length-1],xt.length-=1,xt.length<=0&&Or()}xt[tr]=Eo}return lr(),{cancel:yr}}function hi(){var $n=It.viewport,yr=It.scissor_box;$n[0]=$n[1]=yr[0]=yr[1]=0,jt.viewportWidth=jt.framebufferWidth=jt.drawingBufferWidth=$n[2]=yr[2]=Oe.drawingBufferWidth,jt.viewportHeight=jt.framebufferHeight=jt.drawingBufferHeight=$n[3]=yr[3]=Oe.drawingBufferHeight}function ei(){jt.tick+=1,jt.time=er(),hi(),Cn.procs.poll()}function wo(){Xt.refresh(),hi(),Cn.procs.refresh(),Dt&&Dt.update()}function er(){return(Ar()-ct)/1e3}wo();function vi($n,yr){le.type(yr,"function","listener callback must be a function");var tr;switch($n){case"frame":return li(yr);case"lost":tr=Bn;break;case"restore":tr=ir;break;case"destroy":tr=fn;break;default:le.raise("invalid event, must be one of frame,lost,restore,destroy")}return tr.push(yr),{cancel:function(){for(var Eo=0;Eo<tr.length;++Eo)if(tr[Eo]===yr){tr[Eo]=tr[tr.length-1],tr.pop();return}}}}var Dr=o(Qo,{clear:Ko,prop:en.define.bind(null,hd),context:en.define.bind(null,Fo),this:en.define.bind(null,Yo),draw:Qo({}),buffer:function($n){return $t.create($n,Ti,!1,!1)},elements:function($n){return rn.create($n,!1)},texture:Xt.create2D,cube:Xt.createCube,renderbuffer:At.create,framebuffer:Kt.create,framebufferCube:Kt.createCube,vao:tn.createVAO,attributes:rt,frame:li,on:vi,limits:ut,hasExtension:function($n){return ut.extensions.indexOf($n.toLowerCase())>=0},read:Xn,destroy:ar,_gl:Oe,_refresh:wo,poll:function(){ei(),Dt&&Dt.update()},now:er,stats:Ct});return ue.onDone(null,Dr),Dr}return Dp})}(Tg)),Tg.exports}Poe();var Md,_m,Ad,Ps,bm,Vf,wm,pg,sc,Xp,ka,uc,cc,hg;Md={},un(Md,ln.POINTS,"points"),un(Md,ln.LINES,"lines"),un(Md,ln.LINE_LOOP,"line loop"),un(Md,ln.LINE_STRIP,"line strip"),un(Md,ln.TRIANGLES,"triangles"),un(Md,ln.TRIANGLE_FAN,"triangle fan"),un(Md,ln.TRIANGLE_STRIP,"triangle strip");_m={},un(_m,ln.STATIC_DRAW,"static"),un(_m,ln.DYNAMIC_DRAW,"dynamic"),un(_m,ln.STREAM_DRAW,"stream");Ad={},un(Ad,ln.BYTE,"int8"),un(Ad,ln.UNSIGNED_INT,"int16"),un(Ad,ln.INT,"int32"),un(Ad,ln.UNSIGNED_BYTE,"uint8"),un(Ad,ln.UNSIGNED_SHORT,"uint16"),un(Ad,ln.UNSIGNED_INT,"uint32"),un(Ad,ln.FLOAT,"float");Ps={},un(Ps,ln.ALPHA,"alpha"),un(Ps,ln.LUMINANCE,"luminance"),un(Ps,ln.LUMINANCE_ALPHA,"luminance alpha"),un(Ps,ln.RGB,"rgb"),un(Ps,ln.RGBA,"rgba"),un(Ps,ln.RGBA4,"rgba4"),un(Ps,ln.RGB5_A1,"rgb5 a1"),un(Ps,ln.RGB565,"rgb565"),un(Ps,ln.DEPTH_COMPONENT,"depth"),un(Ps,ln.DEPTH_STENCIL,"depth stencil");bm={},un(bm,ln.DONT_CARE,"dont care"),un(bm,ln.NICEST,"nice"),un(bm,ln.FASTEST,"fast");Vf={},un(Vf,ln.NEAREST,"nearest"),un(Vf,ln.LINEAR,"linear"),un(Vf,ln.LINEAR_MIPMAP_LINEAR,"mipmap"),un(Vf,ln.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),un(Vf,ln.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),un(Vf,ln.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");wm={},un(wm,ln.REPEAT,"repeat"),un(wm,ln.CLAMP_TO_EDGE,"clamp"),un(wm,ln.MIRRORED_REPEAT,"mirror");pg={},un(pg,ln.NONE,"none"),un(pg,ln.BROWSER_DEFAULT_WEBGL,"browser");sc={},un(sc,ln.NEVER,"never"),un(sc,ln.ALWAYS,"always"),un(sc,ln.LESS,"less"),un(sc,ln.LEQUAL,"lequal"),un(sc,ln.GREATER,"greater"),un(sc,ln.GEQUAL,"gequal"),un(sc,ln.EQUAL,"equal"),un(sc,ln.NOTEQUAL,"notequal");Xp={},un(Xp,ln.FUNC_ADD,"add"),un(Xp,ln.MIN_EXT,"min"),un(Xp,ln.MAX_EXT,"max"),un(Xp,ln.FUNC_SUBTRACT,"subtract"),un(Xp,ln.FUNC_REVERSE_SUBTRACT,"reverse subtract");ka={},un(ka,ln.ZERO,"zero"),un(ka,ln.ONE,"one"),un(ka,ln.SRC_COLOR,"src color"),un(ka,ln.ONE_MINUS_SRC_COLOR,"one minus src color"),un(ka,ln.SRC_ALPHA,"src alpha"),un(ka,ln.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),un(ka,ln.DST_COLOR,"dst color"),un(ka,ln.ONE_MINUS_DST_COLOR,"one minus dst color"),un(ka,ln.DST_ALPHA,"dst alpha"),un(ka,ln.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),un(ka,ln.CONSTANT_COLOR,"constant color"),un(ka,ln.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),un(ka,ln.CONSTANT_ALPHA,"constant alpha"),un(ka,ln.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),un(ka,ln.SRC_ALPHA_SATURATE,"src alpha saturate");uc={},un(uc,ln.NEVER,"never"),un(uc,ln.ALWAYS,"always"),un(uc,ln.LESS,"less"),un(uc,ln.LEQUAL,"lequal"),un(uc,ln.GREATER,"greater"),un(uc,ln.GEQUAL,"gequal"),un(uc,ln.EQUAL,"equal"),un(uc,ln.NOTEQUAL,"notequal");cc={},un(cc,ln.ZERO,"zero"),un(cc,ln.KEEP,"keep"),un(cc,ln.REPLACE,"replace"),un(cc,ln.INVERT,"invert"),un(cc,ln.INCR,"increment"),un(cc,ln.DECR,"decrement"),un(cc,ln.INCR_WRAP,"increment wrap"),un(cc,ln.DECR_WRAP,"decrement wrap");hg={},un(hg,ln.FRONT,"front"),un(hg,ln.BACK,"back");var uw,RA;function Roe(){if(RA)return uw;RA=1;function e(t,n){return function(o){return t(n(o))}}return uw=e,uw}var cw,CA;function Coe(){if(CA)return cw;CA=1;var e=Roe(),t=e(Object.getPrototypeOf,Object);return cw=t,cw}var dw,DA;function Doe(){if(DA)return dw;DA=1;var e=tE(),t=Coe(),n=nE(),o="[object Object]",r=Function.prototype,s=Object.prototype,c=r.toString,f=s.hasOwnProperty,d=c.call(Object);function _(y){if(!n(y)||e(y)!=o)return!1;var b=t(y);if(b===null)return!0;var x=f.call(b,"constructor")&&b.constructor;return typeof x=="function"&&x instanceof x&&c.call(x)==d}return dw=_,dw}Doe();class i2{constructor(){ha(this,"lf");ha(this,"option")}render(t){this.lf=t}layout(t={}){var _;const{nodes:n,edges:o,gridSize:r}=this.lf.graphModel;let s=40,c=40;r>20&&(s=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:c,begin:[120,120],...t},(_=new Uee(this.option).layout({nodes:n.map(y=>({id:y.id,size:{width:y.width,height:y.height},model:y})),edges:o.map(y=>({source:y.sourceNodeId,target:y.targetNodeId,model:y}))}).nodes)==null||_.forEach(y=>{const{model:b}=y;b.set_position({x:y.x,y:y.y})}),this.lf.fitView()}}ha(i2,"pluginName","dagre");let Rs=null;function jA(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function IA(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const av=40;let vg=40;function CR(e,t){const{keyboard:n}=e,{options:{keyboard:o}}=n,r=()=>{var b,x;if(vg=av,!(o!=null&&o.enabled)||t.textEditElement)return!0;const{guards:f}=e.options,d=t.getSelectElements(!1);if(!(f&&f.beforeClone?f.beforeClone(d):!0)||d.nodes.length===0&&d.edges.length===0)return Rs=null,!0;const y=d.nodes.filter(M=>M.type===Tn.Start||M.type===Tn.Base);if(y.length>0){Ra(((x=(b=y[0])==null?void 0:b.properties)==null?void 0:x.nodeName)+yt("workflow.tip.cannotCopy"));return}return Rs=ye.cloneDeep(d),Rs.nodes.forEach(M=>jA(M,av)),Rs.edges.forEach(M=>IA(M,av)),Qm(yt("workflow.tip.copyError")),!1},s=()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;const f=f_(e.graphModel.get_provide(null,null).workflowMode),d=f==null?void 0:f.flatMap(_=>_.list).map(_=>_.type);if(Rs.nodes=Rs.nodes.filter(_=>d==null?void 0:d.includes(_.type)),Rs&&(Rs.nodes||Rs.edges)){e.clearSelectElements();const _=e.addElements(Rs,vg);if(!_)return!0;_.nodes.forEach(y=>e.selectElementById(y.id,!0)),_.edges.forEach(y=>e.selectElementById(y.id,!0)),Rs.nodes.forEach(y=>jA(y,av)),Rs.edges.forEach(y=>IA(y,av)),vg=vg+av}return!1},c=()=>{var _;const f=t.getSelectElements(!0);if(e.clearSelectElements(),f.nodes.length==0&&f.edges.length==0)return;if(f.edges.length>0&&f.nodes.length==0){f.edges.filter(y=>!["loop-edge"].includes(y.type||"")).forEach(y=>e.deleteEdge(y.id));return}const d=f.nodes.filter(y=>["start-node","base-node","loop-body-node","loop-start-node","knowledge-base-node"].includes(y.type));if(d.length>0){Ra(`${(_=d[0].properties)==null?void 0:_.nodeName}${yt("workflow.delete.deleteMessage")}`);return}return nT(yt("common.tip"),yt("workflow.delete.confirmTitle"),{confirmButtonText:yt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;f.edges.forEach(y=>e.deleteEdge(y.id)),f.nodes.forEach(y=>{y.type==="loop-node"&&e.getNodeOutgoingNode(y.id).forEach(x=>{x.type==="loop-body-node"&&e.deleteNode(x.id)}),e.deleteNode(y.id)})}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],s),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(o!=null&&o.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}const joe={class:"flex-between"},Ioe={class:"flex align-center"},Loe={class:"ellipsis-1 break-all"},$oe={class:"title-decoration-1 mb-8 mt-8"},Foe=["onMouseenter"],Voe={class:"break-all"},Boe={class:"dialog-footer"},Uoe=Rn({__name:"LoopBodyContainer",props:{nodeModel:{}},setup(e,{expose:t}){QI("workflowMode",ko("loopWorkflowMode"));const n=e,o=Ae(),r=Ae(!1),s=Ae({title:""}),c=jn({set:w=>{ye.set(n.nodeModel.properties,"showNode",w)},get:()=>n.nodeModel.properties.showNode!==void 0?n.nodeModel.properties.showNode:(ye.set(n.nodeModel.properties,"showNode",!0),!0)}),f=jn(()=>n.nodeModel.properties.status?n.nodeModel.properties.status:200),d=async w=>{w&&await w.validate(C=>{var j;C&&((j=n.nodeModel.graphModel.nodes)!=null&&j.some(B=>B.properties.nodeName===s.value.title)?e8.error(yt("workflow.tip.repeatedNodeError")):(ye.set(n.nodeModel.properties,"nodeName",s.value.title),r.value=!1,w.resetFields()))})},_=()=>{n.nodeModel.graphModel.clearSelectElements(),ye.set(n.nodeModel,"isSelected",!0),ye.set(n.nodeModel,"isHovered",!0),n.nodeModel.graphModel.toFront(n.nodeModel.id)},y=Ae(null),b=Ae(600),x=jn(()=>{var w;return n.nodeModel.properties.config.fields?(w=n.nodeModel.properties.config.fields)==null?void 0:w.map(j=>({label:j.label,value:j.value,globeLabel:`{{${n.nodeModel.properties.nodeName}.${j.value}}}`,globeValue:`{{context['${n.nodeModel.id}'].${j.value}}}`})):[]}),M=Ae(!1);function S(){if(M.value=!M.value,M.value){n.nodeModel.graphModel.transformModel.focusOn(n.nodeModel.x,n.nodeModel.y,n.nodeModel.width+window.innerWidth-n.nodeModel.width,n.nodeModel.height-30),b.value=(n.nodeModel.graphModel.height-100)/n.nodeModel.graphModel.transformModel.SCALE_Y;const w=window.innerWidth/n.nodeModel.graphModel.transformModel.SCALE_X;n.nodeModel.width=w,n.nodeModel.setHeight(b.value)}else{b.value=600;const w=1920;n.nodeModel.width=w,n.nodeModel.setHeight(b.value)}}return t({close,zoom:()=>{M.value&&S()}}),(w,C)=>{var K;const j=Y("AppIcon"),B=Y("el-button"),$=Y("el-alert"),U=Y("el-tooltip"),I=Y("el-collapse-transition"),F=Y("el-input"),Z=Y("el-form-item"),G=Y("el-form"),W=Y("el-dialog");return ce(),Rt("div",{onMousedown:_,class:"workflow-node-container p-16",style:{overflow:"visible"}},[X("div",{class:Dl(["step-container app-card p-16",{isSelected:n.nodeModel.isSelected,error:f.value!==200}]),style:{overflow:"visible",background:"#fff"}},[X("div",null,[X("div",joe,[X("div",Ioe,[(ce(),Ge(Pd(Jt(Hf)(`${w.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(K=w.nodeModel)==null?void 0:K.properties.nodeData},null,8,["item"])),X("h4",Loe,fe(w.nodeModel.properties.nodeName),1)]),T(B,{link:"",onClick:S},{default:N(()=>[T(j,{iconName:M.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1})]),T(I,null,{default:N(()=>[Ca(X("div",{onMousedown:C[1]||(C[1]=Bt(()=>{},["stop"])),onKeydown:C[2]||(C[2]=Bt(()=>{},["stop"])),onClick:C[3]||(C[3]=Bt(()=>{},["stop"])),class:"mt-16"},[f.value!=200?(ce(),Ge($,{key:0,class:"mb-16",title:n.nodeModel.type==="application-node"?w.$t("workflow.tip.applicationNodeError"):w.$t("workflow.tip.functionNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):Qt("",!0),X("div",{style:Zm(`height:${b.value}px`)},[tT(w.$slots,"default",{},void 0,!0)],4),x.value.length>0?(ce(),Rt(Fn,{key:1},[X("h5",$oe,fe(w.$t("common.param.outputParam")),1),(ce(!0),Rt(Fn,null,Tr(x.value,(J,q)=>(ce(),Rt("div",{key:q,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:ne=>y.value=q,onMouseleave:C[0]||(C[0]=ne=>y.value=null)},[X("span",Voe,fe(J.label)+" "+fe("{"+J.value+"}"),1),y.value===q?(ce(),Ge(U,{key:0,effect:"dark",content:w.$t("workflow.setting.copyParam"),placement:"top"},{default:N(()=>[T(B,{link:"",onClick:ne=>Jt(Av)(J.globeLabel),style:{padding:"0"}},{default:N(()=>[T(j,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Qt("",!0)],40,Foe))),128))],64)):Qt("",!0)],544),[[Mu,c.value]])]),_:3})])],2),T(W,{title:w.$t("workflow.nodeName"),modelValue:r.value,"onUpdate:modelValue":C[8]||(C[8]=J=>r.value=J),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:C[9]||(C[9]=Bt(()=>{},["prevent"]))},{footer:N(()=>[X("span",Boe,[T(B,{onClick:C[6]||(C[6]=Bt(J=>r.value=!1,["prevent"]))},{default:N(()=>[Je(fe(w.$t("common.cancel")),1)]),_:1}),T(B,{type:"primary",onClick:C[7]||(C[7]=J=>d(o.value))},{default:N(()=>[Je(fe(w.$t("common.save")),1)]),_:1})])]),default:N(()=>[T(G,{"label-position":"top",ref_key:"titleFormRef",ref:o,model:s.value},{default:N(()=>[T(Z,{prop:"title",rules:[{required:!0,message:w.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:N(()=>[T(F,{modelValue:s.value.title,"onUpdate:modelValue":C[4]||(C[4]=J=>s.value.title=J),onBlur:C[5]||(C[5]=J=>s.value.title=s.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}}),Goe=Dd(Uoe,[["__scopeId","data-v-25aef5bc"]]),zoe=[Tn.AiChat,Tn.Reply,Tn.ToolLib,Tn.ToolLibCustom,Tn.ImageUnderstandNode,Tn.Application,Tn.SpeechToTextNode,Tn.TextToSpeechNode,Tn.ImageGenerateNode,Tn.ImageToVideoGenerateNode,Tn.TextToVideoGenerateNode,Tn.LoopBodyNode,Tn.LoopNode,Tn.LoopBreakNode,Tn.VideoUnderstandNode,Tn.VariableAssignNode,Tn.KnowledgeWriteNode],LA=[Tn.AiChat,Tn.Reply,Tn.ToolLib,Tn.ToolLibCustom,Tn.ImageUnderstandNode,Tn.VideoUnderstandNode,Tn.Application,Tn.SpeechToTextNode,Tn.TextToSpeechNode,Tn.ImageGenerateNode,Tn.ImageToVideoGenerateNode,Tn.TextToVideoGenerateNode,Tn.LoopBodyNode,Tn.LoopNode,Tn.LoopBreakNode,Tn.VariableAssignNode],Ww={[br.Application]:zoe,[br.Knowledge]:[Tn.KnowledgeWriteNode],[br.ApplicationLoop]:LA,[br.KnowledgeLoop]:[...LA,Tn.KnowledgeWriteNode]};class DR{constructor(t,n){ha(this,"nodes");ha(this,"edges");ha(this,"workFlowNodes");ha(this,"workflowModel");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[],this.workflowModel=n||br.Application}is_valid_start_node(){const t=this.nodes.filter(n=>[Tn.Start,Tn.LoopStartNode].includes(n.id));if(t.length==0)throw yt("workflow.validate.startNodeRequired");if(t.length>1)throw yt("workflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===Tn.Base);if(t.length==0)throw yt("workflow.validate.baseNodeRequired");if(t.length>1)throw yt("workflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}is_loop_valid(){this.is_valid_start_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>[Tn.Start,Tn.LoopStartNode].includes(n.id))[0]}get_base_node(){return this.nodes.filter(n=>n.id===Tn.Base)[0]}exist_break_node(){return this.nodes.some(t=>t.type===Tn.LoopBreakNode)}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const o of n)this._is_valid_work_flow(o)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==Tn.Start&&n.id!==Tn.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${yt("workflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.nodeName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const o=this.edges.filter(s=>s.sourceNodeId==t.id).map(s=>this.nodes.filter(c=>c.id==s.targetNodeId)).reduce((s,c)=>[...s,...c],[]),r=Ww[this.workflowModel];if(o.length==0&&!r.includes(t.type))throw yt("workflow.validate.noNextNode");return o}is_valid_nodes(){for(const t of this.nodes)if(t.type!==Tn.Base&&t.type!==Tn.Start&&t.type!==Tn.LoopStartNode&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${yt("workflow.validate.notInWorkFlowNode")}:${t.properties.nodeName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.nodeName} ${yt("workflow.validate.nodeUnavailable")}`;if(t.type===Tn.Condition){const n=t.properties.nodeData.branch;for(const o of n){const r=`${t.id}_${o.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.nodeName} ${yt("workflow.validate.needConnect1")}${o.type}${yt("workflow.validate.needConnect2")}`}}else{const n=this.edges.filter(r=>r.sourceNodeId==t.id),o=Ww[this.workflowModel];if(n.length==0&&!o.includes(t.type))throw`${t.properties.nodeName} ${yt("workflow.validate.cannotEndNode")}`}if(t.properties.status&&t.properties.status!==200)throw`${t.properties.nodeName} ${yt("workflow.validate.nodeUnavailable")}`}}class a2 extends DR{is_valid_start_node(){if((this.workflowModel==br.Knowledge?this.nodes.filter(n=>n.properties.kind===dc.DataSource):this.nodes.filter(n=>n.type===Tn.LoopStartNode)).length==0)throw yt("workflow.validate.startNodeRequired")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===Tn.KnowledgeBase);if(t.length==0)throw yt("workflow.validate.baseNodeRequired");if(t.length>1)throw yt("workflow.validate.baseNodeOnly")}is_valid_work_flow(){this.workFlowNodes=[],this.get_start_nodes().forEach(o=>{this._is_valid_work_flow(o)});const n=this.nodes.filter(o=>o.id!==Tn.KnowledgeBase&&o.type!==Tn.LoopStartNode&&o.properties.kind!==dc.DataSource).filter(o=>!this.workFlowNodes.includes(o));if(n.length>0)throw console.log("ss"),`${yt("workflow.validate.notInWorkFlowNode")}:${n.map(o=>o.properties.nodeName).join("，")}`;this.workFlowNodes=[]}is_valid_nodes(){for(const t of this.nodes)if(t.type!==Tn.KnowledgeBase&&t.type!==Tn.LoopStartNode&&t.properties.kind!==dc.DataSource&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${yt("workflow.validate.notInWorkFlowNode")}:${t.properties.nodeName}`}get_start_nodes(){return this.workflowModel==br.Knowledge?this.nodes.filter(t=>t.properties.kind===dc.DataSource):this.nodes.filter(t=>t.type===Tn.LoopStartNode)}get_end_nodes(){return this.get_start_nodes().flatMap(n=>this._get_end_nodes(n,[]))}_get_end_nodes(t,n){const o=this.get_next_nodes(t);return o.length==0?n.push(t):o.forEach(r=>{this._get_end_nodes(r,n)}),n}get_next_nodes(t){return this.edges.filter(o=>o.sourceNodeId==t.id).map(o=>this.nodes.filter(r=>r.id==o.targetNodeId)).reduce((o,r)=>[...o,...r],[])}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.nodeName} ${yt("workflow.validate.nodeUnavailable")}`;if(t.type===Tn.Condition){const n=t.properties.nodeData.branch;for(const o of n){const r=`${t.id}_${o.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.nodeName} ${yt("workflow.validate.needConnect1")}${o.type}${yt("workflow.validate.needConnect2")}`}}else{const n=this.edges.filter(r=>r.sourceNodeId==t.id),o=Ww[this.workflowModel];if(this.workflowModel==br.KnowledgeLoop){if(n.length==0&&!o.includes(t.type))throw`${t.properties.nodeName} ${yt("workflow.validate.cannotEndNode")}`;return}if(n.length==0&&!o.includes(t.type))if(t.type==Tn.LoopNode){if(t.properties.nodeData.loopBody&&!new a2(t.properties.nodeData.loopBody,br.KnowledgeLoop).get_end_nodes().every(s=>o.includes(s.type)))throw`${t.properties.nodeName} ${yt("workflow.validate.cannotEndNode")}`}else throw`${t.properties.nodeName} ${yt("workflow.validate.cannotEndNode")}`}if(t.properties.status&&t.properties.status!==200)throw`${t.properties.nodeName} ${yt("workflow.validate.nodeUnavailable")}`}}const Hoe=Rn({__name:"index",props:{nodeModel:{}},setup(e){const t=ko("loopWorkflowMode")||br.ApplicationLoop,n=Object.assign({"/src/workflow/nodes/ai-chat-node/index.ts":pN,"/src/workflow/nodes/application-node/index.ts":hN,"/src/workflow/nodes/base-node/index.ts":NN,"/src/workflow/nodes/condition-node/index.ts":PN,"/src/workflow/nodes/data-source-local-node/index.ts":RN,"/src/workflow/nodes/data-source-web-node/index.ts":CN,"/src/workflow/nodes/document-extract-node/index.ts":DN,"/src/workflow/nodes/document-split-node/index.ts":jN,"/src/workflow/nodes/form-node/index.ts":IN,"/src/workflow/nodes/http-node/index.ts":LN,"/src/workflow/nodes/image-generate/index.ts":$N,"/src/workflow/nodes/image-understand/index.ts":FN,"/src/workflow/nodes/intent-classify-node/index.ts":VN,"/src/workflow/nodes/knowledge-base-node/index.ts":BN,"/src/workflow/nodes/knowledge-write-node/index.ts":UN,"/src/workflow/nodes/loop-body-node/index.ts":pT,"/src/workflow/nodes/loop-break-node/index.ts":GN,"/src/workflow/nodes/loop-continue-node/index.ts":zN,"/src/workflow/nodes/loop-node/index.ts":HN,"/src/workflow/nodes/loop-start-node/index.ts":WN,"/src/workflow/nodes/mcp-node/index.ts":XN,"/src/workflow/nodes/nl2sql-node/index.ts":qN,"/src/workflow/nodes/parameter-extraction-node/index.ts":YN,"/src/workflow/nodes/question-node/index.ts":KN,"/src/workflow/nodes/reply-node/index.ts":ZN,"/src/workflow/nodes/reranker-node/index.ts":JN,"/src/workflow/nodes/search-knowledge-node/index.ts":QN,"/src/workflow/nodes/speech-to-text-node/index.ts":eP,"/src/workflow/nodes/start-node/index.ts":tP,"/src/workflow/nodes/text-to-speech-node/index.ts":nP,"/src/workflow/nodes/tool-lib-node/index.ts":rP,"/src/workflow/nodes/tool-node/index.ts":oP,"/src/workflow/nodes/user-select-node/index.ts":iP,"/src/workflow/nodes/variable-aggregation-node/index.ts":aP,"/src/workflow/nodes/variable-assign-node/index.ts":lP,"/src/workflow/nodes/variable-splitting/index.ts":sP}),o=e,r=Ae(),s=Ae(),c=()=>{const x=t==br.ApplicationLoop?new DR(_.value.getGraphData(),br.ApplicationLoop):new a2(_.value.getGraphData(),br.KnowledgeLoop);return Promise.all(_.value.graphModel.nodes.map(M=>{var S;return(S=M==null?void 0:M.validate)==null?void 0:S.call(M)})).then(()=>{const M=o.nodeModel.properties.loop_node_id,S=o.nodeModel.graphModel.getNodeModelById(M);try{return x.is_loop_valid(),S.properties.nodeData.loopType=="LOOP"&&!x.exist_break_node()?Promise.reject({node:S,errMessage:yt("workflow.validate.loopNodeBreakNodeRequired")}):Promise.resolve({})}catch(E){return Promise.reject({node:S,errMessage:E})}}).catch(M=>{throw o.nodeModel.graphModel.selectNodeById(o.nodeModel.id),o.nodeModel.graphModel.transformModel.focusOn(o.nodeModel.x,o.nodeModel.y,o.nodeModel.width,o.nodeModel.height),M})},f=()=>{const x=o.nodeModel.properties.loop_node_id,M=o.nodeModel.graphModel.getNodeModelById(x);M.properties.nodeData.loop={x:o.nodeModel.x,y:o.nodeModel.y},M.properties.nodeData.loopBody=_.value.getGraphData()},d=x=>{const M=o.nodeModel.properties.loop_node_id,S=o.nodeModel.graphModel.getNodeModelById(M);S&&(S.properties.config.fields=x,S.clear_next_node_field(!0))},_=Ae(),y=x=>{const M=r.value;if(M){let S=function(E){let w=_.value.graphModel.transformModel.SCALE_X,C=_.value.graphModel.transformModel.SCALE_Y,j=_.value.graphModel.transformModel.TRANSLATE_X,B=_.value.graphModel.transformModel.TRANSLATE_Y;const[$,U]=E;return o.nodeModel.graphModel.transformModel,w*=o.nodeModel.graphModel.transformModel.SCALE_X,C*=o.nodeModel.graphModel.transformModel.SCALE_Y,j*=o.nodeModel.graphModel.transformModel.SCALE_X,B*=o.nodeModel.graphModel.transformModel.SCALE_Y,[($-j)/w,(U-B)/C]};_.value=new Dk({plugins:[i2],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:M}),_.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),_.value.graphModel.transformModel.HtmlPointToCanvasPoint=S.bind(_.value.graphModel.transformModel),CR(_.value,_.value.graphModel),_.value.graphModel.get_provide=(E,w)=>({getNode:()=>E,getGraph:()=>w,workflowMode:t}),_.value.graphModel.refresh_loop_fields=d,_.value.graphModel.get_parent_nodes=()=>o.nodeModel.graphModel.nodes,_.value.graphModel.get_up_node_field_list=o.nodeModel.get_up_node_field_list,_.value.batchRegister([...Object.keys(n).map(E=>n[E].default),uP]),_.value.setDefaultEdgeType("app-edge"),_.value.render(x||{}),_.value.graphModel.eventCenter.on("delete_edge",E=>{E.forEach(w=>{_.value.deleteEdge(w)})}),_.value.graphModel.eventCenter.on("anchor:drop",E=>{E.nodeModel.clear_next_node_field(!1)}),_.value.graphModel.eventCenter.on("anchor:drop",E=>{E.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var E;(E=_.value)==null||E.fitView()},500)}},b=()=>{var x,M,S;(x=s.value)==null||x.zoom(),(S=(M=_.value)==null?void 0:M.extension)==null||S.dagre.layout()};return kr(()=>{y(ye.cloneDeep(o.nodeModel.properties.workflow)),ye.set(o.nodeModel,"validate",c),ye.set(o.nodeModel,"set_loop_body",f),ye.set(o.nodeModel,"loopLayout",b)}),aT(()=>{bG(_.value.graphModel.flowId),_.value=null}),(x,M)=>(ce(),Ge(Goe,{nodeModel:x.nodeModel,ref_key:"LoopBodyContainerRef",ref:s},{default:N(()=>[X("div",{ref_key:"containerRef",ref:r,onWheel:M[0]||(M[0]=Bt(()=>{},["stop"])),style:{height:"100%",width:"100%"}},null,544)]),_:1},8,["nodeModel"]))}}),Woe=Dd(Hoe,[["__scopeId","data-v-0affd21d"]]);class Xoe extends no{constructor(t){super(t,Woe)}getNodeName(){return yt("workflow.nodes.loopBodyNode.label")}get_up_node_field_list(t,n){const o=this.props.model.properties.loop_node_id;return this.props.graphModel.getNodeModelById(o).get_up_node_field_list(t,n)}}class qoe extends ro{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s}=this;this.properties.showNode===void 0||this.properties.showNode;const c=[];return c.push({edgeAddable:!1,x:n,y:o-s/2+10,id:`${t}_children`,type:"children"}),c}setHeight(t){this.properties.height=t,this.outgoing.edges.forEach(n=>{n.updatePathByAnchor()}),this.incoming.edges.forEach(n=>{n.updatePathByAnchor()})}}const Yoe={type:"loop-body-node",model:qoe,view:Xoe};class Koe extends cn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=0,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y-10};this.updateStartPoint(s);const c={x:r.x,y:r.y+3};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const Zoe={type:"loop-edge",view:cn.BezierEdge,model:Koe},Joe=Rn({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e,n=Ae(!1);function o(){var y;(y=t.lf)==null||y.zoom(!0,[0,0])}function r(){var y;(y=t.lf)==null||y.zoom(!1,[0,0])}function s(){var y,b,x;(y=t.lf)==null||y.resetZoom(),(b=t.lf)==null||b.resetTranslate(),(x=t.lf)==null||x.fitView()}const c=()=>{var y,b;(y=t.lf)==null||y.extension.dagre.layout(),console.log(t.lf),(b=t.lf)==null||b.graphModel.nodes.forEach(x=>{var M;x.type==="loop-body-node"&&((M=x==null?void 0:x.loopLayout)==null||M.call(x))})},f=()=>{var y;(y=t.lf)==null||y.graphModel.nodes.forEach(b=>{b.properties.showNode=!1})},d=()=>{var y;(y=t.lf)==null||y.graphModel.nodes.forEach(b=>{b.properties.showNode=!0})},_=y=>{var x,M,S;const b=document.querySelector(".lf-drag-able");n.value=y,y?(b.style.cursor="default",(x=t.lf)==null||x.openSelectionSelect(),(M=t.lf)==null||M.extension.selectionSelect.setSelectionSense(!0,!1)):(b.style.cursor="pointer",(S=t.lf)==null||S.closeSelectionSelect())};return(y,b)=>{const x=Y("Position"),M=Y("el-icon"),S=Y("el-button"),E=Y("el-divider"),w=Y("ZoomOut"),C=Y("el-tooltip"),j=Y("ZoomIn"),B=Y("el-card");return ce(),Ge(B,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:N(()=>[T(S,{onClick:b[0]||(b[0]=$=>_(!0)),style:{border:"none",padding:"4px",height:"24px"},class:Dl({"is-drag-active":n.value})},{default:N(()=>[T(M,{size:16},{default:N(()=>[T(x)]),_:1})]),_:1},8,["class"]),T(S,{onClick:b[1]||(b[1]=$=>_(!1)),style:{border:"none",padding:"4px",height:"24px","margin-left":"8px"},class:Dl({"is-drag-active":!n.value})},{default:N(()=>[T(fr,{iconName:"app-raisehand",size:16})]),_:1},8,["class"]),T(E,{direction:"vertical"}),T(S,{link:"",onClick:r,style:{border:"none"}},{default:N(()=>[T(C,{effect:"dark",content:y.$t("workflow.control.zoomOut"),placement:"top"},{default:N(()=>[T(M,{size:16,title:y.$t("workflow.control.zoomOut")},{default:N(()=>[T(w)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),T(S,{link:"",onClick:o,style:{border:"none"}},{default:N(()=>[T(C,{effect:"dark",content:y.$t("workflow.control.zoomIn"),placement:"top"},{default:N(()=>[T(M,{size:16,title:y.$t("workflow.control.zoomIn")},{default:N(()=>[T(j)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),T(S,{link:"",onClick:s,style:{border:"none"}},{default:N(()=>[T(C,{effect:"dark",content:y.$t("workflow.control.fitView"),placement:"top"},{default:N(()=>[T(fr,{iconName:"app-fitview",title:y.$t("workflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),T(E,{direction:"vertical"}),T(S,{link:"",onClick:f,style:{border:"none"}},{default:N(()=>[T(C,{effect:"dark",content:y.$t("workflow.control.retract"),placement:"top"},{default:N(()=>[T(fr,{style:{"font-size":"16px"},iconName:"app-retract",title:y.$t("workflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),T(S,{link:"",onClick:d,style:{border:"none"}},{default:N(()=>[T(C,{effect:"dark",content:y.$t("workflow.control.extend"),placement:"top"},{default:N(()=>[T(fr,{style:{"font-size":"16px"},iconName:"app-extend",title:y.$t("workflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),T(S,{link:"",onClick:c,style:{border:"none"}},{default:N(()=>[T(C,{effect:"dark",content:y.$t("workflow.control.beautify"),placement:"top"},{default:N(()=>[T(fr,{style:{"font-size":"16px"},iconName:"app-beautify",title:y.$t("workflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}}),Qoe=Dd(Joe,[["__scopeId","data-v-c8e52397"]]),eie=Rn({name:"WorkFlow"}),wie=Rn({...eie,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":pN,"./nodes/application-node/index.ts":hN,"./nodes/base-node/index.ts":NN,"./nodes/condition-node/index.ts":PN,"./nodes/data-source-local-node/index.ts":RN,"./nodes/data-source-web-node/index.ts":CN,"./nodes/document-extract-node/index.ts":DN,"./nodes/document-split-node/index.ts":jN,"./nodes/form-node/index.ts":IN,"./nodes/http-node/index.ts":LN,"./nodes/image-generate/index.ts":$N,"./nodes/image-understand/index.ts":FN,"./nodes/intent-classify-node/index.ts":VN,"./nodes/knowledge-base-node/index.ts":BN,"./nodes/knowledge-write-node/index.ts":UN,"./nodes/loop-body-node/index.ts":pT,"./nodes/loop-break-node/index.ts":GN,"./nodes/loop-continue-node/index.ts":zN,"./nodes/loop-node/index.ts":HN,"./nodes/loop-start-node/index.ts":WN,"./nodes/mcp-node/index.ts":XN,"./nodes/nl2sql-node/index.ts":qN,"./nodes/parameter-extraction-node/index.ts":YN,"./nodes/question-node/index.ts":KN,"./nodes/reply-node/index.ts":ZN,"./nodes/reranker-node/index.ts":JN,"./nodes/search-knowledge-node/index.ts":QN,"./nodes/speech-to-text-node/index.ts":eP,"./nodes/start-node/index.ts":tP,"./nodes/text-to-speech-node/index.ts":nP,"./nodes/tool-lib-node/index.ts":rP,"./nodes/tool-node/index.ts":oP,"./nodes/user-select-node/index.ts":iP,"./nodes/variable-aggregation-node/index.ts":aP,"./nodes/variable-assign-node/index.ts":lP,"./nodes/variable-splitting/index.ts":sP}),o=ko("workflowMode")||br.Application,r=ko("loopWorkflowMode")||br.ApplicationLoop,s=EG(),c=Ae(""),f=Ae();kr(()=>{_()}),aT(()=>{wG()});const d=E=>{f.value.render(E)},_=E=>{const w=document.querySelector("#container");w&&(f.value=new Dk({plugins:[i2,hG],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:w}),f.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),f.value.on("graph:rendered",()=>{c.value=f.value.graphModel.flowId}),CR(f.value,f.value.graphModel),f.value.batchRegister([...Object.keys(n).map(C=>n[C].default),uP,Zoe]),f.value.setDefaultEdgeType("app-edge"),f.value.render(E||{}),f.value.graphModel.get_provide=(C,j)=>({getNode:()=>C,getGraph:()=>j,workflowMode:o,loopWorkflowMode:r}),f.value.graphModel.eventCenter.on("delete_edge",C=>{C.forEach(j=>{f.value.deleteEdge(j)})}),f.value.graphModel.eventCenter.on("anchor:drop",C=>{C.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var C;(C=f.value)==null||C.fitView()},500))};return t({onmousedown:E=>{E.type&&f.value.dnd.startDrag({type:E.type,properties:{...E.properties}}),E.callback&&E.callback(f.value)},validate:()=>Promise.all(f.value.graphModel.nodes.map(E=>{var w;return(w=E==null?void 0:E.validate)==null?void 0:w.call(E)})),getGraphData:()=>{const E=f.value.getGraphData();E.nodes.forEach(C=>{C.type==="loop-body-node"&&f.value.getNodeModelById(C.id).set_loop_body()});const w=f.value.getGraphData();return w.nodes=w.nodes.filter(C=>C.type!=="loop-body-node"),w.edges=E.edges.filter(C=>C.type!=="loop-edge"),w},addNode:E=>{f.value.clearSelectElements();const{virtualRectCenterPositionX:w,virtualRectCenterPositionY:C}=f.value.graphModel.getVirtualRectSize(),j=f.value.graphModel.addNode({type:E.type,properties:E.properties,x:w,y:C-f.value.graphModel.height/2});j.isSelected=!0,j.isHovered=!0,f.value.toFront(j.id)},clearGraphData:()=>f.value.clearData(),renderGraphData:_,render:d}),(E,w)=>(ce(),Rt(Fn,null,[w[0]||(w[0]=X("div",{className:"workflow-app",id:"container"},null,-1)),f.value?(ce(),Ge(Qoe,{key:0,class:"workflow-control",lf:f.value},null,8,["lf"])):Qt("",!0),T(Jt(s),{"flow-id":c.value},null,8,["flow-id"])],64))}});export{a2 as K,DR as W,MB as _,wie as a};
