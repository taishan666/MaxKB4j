import{L as V,a as M}from"./LoginContainer-Bb8FpMbl.js";import{aJ as $,aK as k,aP as C,cE as i,cT as L,d4 as l,aS as d,aT as R,aM as N,cI as a,aX as o,aN as u,aO as p,cN as _,aV as S,ea as T,dx as q}from"./admin-48J_jRcQ.js";const z={class:"mb-24"},B={class:"mb-24"},U={class:"mb-24"},A={class:"operate-container mt-12"},I=$({__name:"ResetPassword",setup(E){const m=k(),P=C(),{params:{code:g,email:w}}=P,e=i({password:"",rePassword:"",email:"",code:""});L(()=>{g&&w?(e.value.code=g,e.value.email=w):m.push("forgot_password")});const h=i({password:[{required:!0,message:l("views.login.loginForm.rePassword.requiredMessage"),trigger:"blur"},{min:6,max:20,message:l("views.login.loginForm.password.lengthMessage"),trigger:"blur"}],rePassword:[{required:!0,message:l("views.login.loginForm.rePassword.requiredMessage"),trigger:"blur"},{min:6,max:20,message:l("views.login.loginForm.password.lengthMessage"),trigger:"blur"},{validator:(s,r,t)=>{e.value.password!=e.value.rePassword?t(new Error(l("views.login.loginForm.rePassword.validatorMessage"))):t()},trigger:"blur"}]}),c=i(),b=i(!1),y=()=>{var s;(s=c.value)==null||s.validate().then(()=>T.postResetPassword(e.value,b)).then(()=>{q(l("common.modifySuccess")),m.push({name:"login"})})};return(s,r)=>{const t=d("el-input"),f=d("el-form-item"),F=d("el-form"),v=d("el-button");return N(),R(M,null,{default:a(()=>[o(V,{subTitle:s.$t("theme.defaultSlogan")},{default:a(()=>[u("h2",z,p(s.$t("views.login.resetPassword")),1),o(F,{class:"reset-password-form",ref_key:"resetPasswordFormRef",ref:c,model:e.value,rules:h.value},{default:a(()=>[u("div",B,[o(f,{prop:"password"},{default:a(()=>[o(t,{type:"password",size:"large",class:"input-item",modelValue:e.value.password,"onUpdate:modelValue":r[0]||(r[0]=n=>e.value.password=n),placeholder:s.$t("views.login.loginForm.password.placeholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1})]),u("div",U,[o(f,{prop:"rePassword"},{default:a(()=>[o(t,{type:"password",size:"large",class:"input-item",modelValue:e.value.rePassword,"onUpdate:modelValue":r[1]||(r[1]=n=>e.value.rePassword=n),placeholder:s.$t("views.login.loginForm.rePassword.placeholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1})])]),_:1},8,["model","rules"]),o(v,{size:"large",type:"primary",class:"w-full",onClick:y},{default:a(()=>[_(p(s.$t("common.confirm")),1)]),_:1}),u("div",A,[o(v,{size:"large",class:"register",onClick:r[2]||(r[2]=n=>S(m).push("/login")),link:"",type:"primary",icon:"ArrowLeft"},{default:a(()=>[_(p(s.$t("views.login.buttons.backLogin")),1)]),_:1})])]),_:1},8,["subTitle"])]),_:1})}}});export{I as default};
