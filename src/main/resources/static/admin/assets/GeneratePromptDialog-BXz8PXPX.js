import{ay as re,aQ as Y,aP as ge,aB as n,b_ as Ie,aE as I,aG as e,aD as i,aH as l,bF as Ve,aI as u,aU as Q,aK as C,aJ as p,a_ as ne,aW as ce,aF as V,aC as ee,aX as Se,aR as se,c6 as Pe,a$ as xe,b4 as ie,b3 as we,bC as fe,cJ as _e,aA as be,dY as Ue,aT as X,aZ as Ce,aY as ke,cf as Te,c0 as Re,dZ as De,ca as Ae,b8 as Le,c4 as Ne,aS as Oe,cU as qe,cO as $e,cV as Fe,d_ as ze,bK as ye,cs as Ke,c8 as Ee,c9 as He,co as Be}from"./admin-DrZ65G2p.js";const We={class:"dialog-footer"},zl=re({__name:"AIModeParamSettingDialog",emits:["refresh"],setup(le,{expose:E,emit:H}){const q=ge(),x=Y(()=>q.path.includes("resource-management")?"systemManage":"workspace"),M=n([]),T=H,L=n(),r=n({}),d=n(!1),c=n(!1),_=(t,s)=>ce({type:"model",systemType:x.value}).getModelParamsForm(t,c),f=n(""),g=Y(()=>Ie.model[x.value]),A=(t,s,m)=>{f.value=t,r.value={},_(t).then(k=>{var w;M.value=k.data,(w=L.value)==null||w.render(M.value,m)}),d.value=!0},P=(t,s)=>{_(t).then($=>{M.value=$.data;const k=$.data.map(w=>w.show_default_value===!1?{[w.field]:void 0}:{[w.field]:w.default_value}).reduce((w,h)=>({...w,...h}),{});T("refresh",k)})},N=async()=>{var t;(t=L.value)==null||t.validate().then(()=>{T("refresh",r.value),d.value=!1})};return E({open:A,reset_default:P}),(t,s)=>{const m=i("el-button"),$=i("el-dialog");return V(),I($,{"align-center":"",title:t.$t("common.paramSetting"),modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=k=>d.value=k),style:{width:"550px"},"append-to-body":"","destroy-on-close":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:e(()=>[u("span",We,[l(m,{onClick:s[1]||(s[1]=ne(k=>d.value=!1,["prevent"]))},{default:e(()=>[C(p(t.$t("common.cancel")),1)]),_:1}),g.value.paramSetting(f.value)?(V(),I(m,{key:0,type:"primary",onClick:N,loading:c.value},{default:e(()=>[C(p(t.$t("common.confirm")),1)]),_:1},8,["loading"])):Q("",!0)])]),default:e(()=>[l(Ve,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=k=>r.value=k),model:r.value,"label-position":"top","require-asterisk-position":"right",render_data:M.value,ref_key:"dynamicsFormRef",ref:L},null,8,["modelValue","model","render_data"])]),_:1},8,["title","modelValue"])}}}),Ge={class:"p-8"},je={class:"mb-4"},Je={class:"mb-4"},Qe={class:"mb-4"},Ye={class:"flex align-center"},Ze={class:"mr-4"},Xe={class:"flex align-center"},el={class:"mr-4"},ll={class:"dialog-footer"},Kl=re({__name:"ParamSettingDialog",emits:["refresh"],setup(le,{expose:E,emit:H}){const q=H,x=n(),M=n(),T={ai_questioning:"{question}",designated_answer:ee("views.application.dialog.designated_answer")},L=ee("views.application.dialog.defaultPrompt1",{question:"{question}"})+"<data></data>"+ee("views.application.dialog.defaultPrompt2"),r=n({knowledgeSetting:{searchMode:"embedding",topN:3,similarity:.6,maxParagraphCharNumber:5e3,noReferencesSetting:{status:"ai_questioning",value:"{question}"}},problemOptimization:!1,problemOptimizationPrompt:L}),d=n({ai_questioning:T.ai_questioning,designated_answer:T.designated_answer}),c=Se({ai_questioning:[{required:!0,message:ee("views.application.form.aiModel.placeholder"),trigger:"blur"}],designated_answer:[{required:!0,message:ee("views.application.form.prompt.requiredMessage"),trigger:"blur"}]}),_=n(!1),f=n(!1),g=n(!1);se(_,t=>{var s;t||(d.value={ai_questioning:T.ai_questioning,designated_answer:T.designated_answer},(s=M.value)==null||s.clearValidate())});const A=(t,s)=>{g.value=Pe(s),r.value={knowledgeSetting:xe.cloneDeep(t.knowledgeSetting),problemOptimization:t.problemOptimization,problemOptimizationPrompt:t.problemOptimizationPrompt},g.value||(d.value[r.value.knowledgeSetting.noReferencesSetting.status]=r.value.knowledgeSetting.noReferencesSetting.value),_.value=!0},P=async t=>{if(g.value)delete r.value.noReferencesSetting,q("refresh",r.value),_.value=!1;else{if(!t)return;await t.validate((s,m)=>{s&&(r.value.knowledgeSetting.noReferencesSetting.value=d.value[r.value.knowledgeSetting.noReferencesSetting.status],q("refresh",r.value),_.value=!1)})}};function N(t){t==="keywords"?r.value.knowledgeSetting.similarity=0:r.value.knowledgeSetting.similarity=.6}return E({open:A}),(t,s)=>{const m=i("el-text"),$=i("el-radio"),k=i("el-card"),w=i("el-radio-group"),h=i("el-form-item"),B=i("el-tooltip"),F=i("el-input-number"),W=i("el-col"),b=i("el-row"),a=i("el-slider"),v=i("el-input"),R=i("el-form"),G=i("el-switch"),j=i("el-scrollbar"),O=i("el-button"),ae=i("el-dialog"),te=we("loading");return V(),I(ae,{class:"scrollbar-dialog","align-center":"",title:t.$t("common.paramSetting"),modelValue:_.value,"onUpdate:modelValue":s[11]||(s[11]=S=>_.value=S),width:"550px","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:e(()=>[u("span",ll,[l(O,{onClick:s[9]||(s[9]=ne(S=>_.value=!1,["prevent"]))},{default:e(()=>[C(p(t.$t("common.cancel")),1)]),_:1}),l(O,{type:"primary",onClick:s[10]||(s[10]=S=>P(M.value)),loading:f.value},{default:e(()=>[C(p(t.$t("common.save")),1)]),_:1},8,["loading"])])]),default:e(()=>[l(j,{"max-height":"550"},{default:e(()=>[u("div",Ge,[ie((V(),I(R,{"label-position":"top",ref_key:"paramFormRef",ref:x,model:r.value},{default:e(()=>[l(h,{label:t.$t("views.application.dialog.selectSearchMode")},{default:e(()=>[l(w,{modelValue:r.value.knowledgeSetting.searchMode,"onUpdate:modelValue":s[0]||(s[0]=S=>r.value.knowledgeSetting.searchMode=S),class:"card__radio",onChange:N},{default:e(()=>[l(k,{shadow:"never",class:fe(["mb-16",r.value.searchMode==="embedding"?"active":""])},{default:e(()=>[l($,{value:"embedding",size:"large"},{default:e(()=>[u("p",je,p(t.$t("views.application.dialog.vectorSearch")),1),l(m,{type:"info"},{default:e(()=>[C(p(t.$t("views.application.dialog.vectorSearchTooltip")),1)]),_:1})]),_:1})]),_:1},8,["class"]),l(k,{shadow:"never",class:fe(["mb-16",r.value.knowledgeSetting.searchMode==="keywords"?"active":""])},{default:e(()=>[l($,{value:"keywords",size:"large"},{default:e(()=>[u("p",Je,p(t.$t("views.application.dialog.fullTextSearch")),1),l(m,{type:"info"},{default:e(()=>[C(p(t.$t("views.application.dialog.fullTextSearchTooltip")),1)]),_:1})]),_:1})]),_:1},8,["class"]),l(k,{shadow:"never",class:fe(r.value.knowledgeSetting.searchMode==="hybrid"?"active":"")},{default:e(()=>[l($,{value:"hybrid",size:"large"},{default:e(()=>[u("p",Qe,p(t.$t("views.application.dialog.hybridSearch")),1),l(m,{type:"info"},{default:e(()=>[C(p(t.$t("views.application.dialog.hybridSearchTooltip")),1)]),_:1})]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(b,{gutter:10},{default:e(()=>[l(W,{span:12},{default:e(()=>[l(h,null,{label:e(()=>[u("div",Ye,[u("span",Ze,p(t.$t("views.application.dialog.similarityThreshold")),1),l(B,{effect:"dark",content:t.$t("views.application.dialog.similarityTooltip"),placement:"right"},{default:e(()=>[l(_e,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:e(()=>[l(F,{modelValue:r.value.knowledgeSetting.similarity,"onUpdate:modelValue":s[1]||(s[1]=S=>r.value.knowledgeSetting.similarity=S),min:0,max:r.value.knowledgeSetting.searchMode==="hybrid"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),l(W,{span:12},{default:e(()=>[l(h,{label:t.$t("views.application.dialog.topReferences")},{default:e(()=>[l(F,{modelValue:r.value.knowledgeSetting.topN,"onUpdate:modelValue":s[2]||(s[2]=S=>r.value.knowledgeSetting.topN=S),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(h,{label:t.$t("views.application.dialog.maxCharacters")},{default:e(()=>[l(a,{modelValue:r.value.knowledgeSetting.maxParagraphCharNumber,"onUpdate:modelValue":s[3]||(s[3]=S=>r.value.knowledgeSetting.maxParagraphCharNumber=S),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"]),g.value?Q("",!0):(V(),I(h,{key:0,label:t.$t("views.application.dialog.noReferencesAction")},{default:e(()=>[l(R,{"label-position":"top",ref_key:"noReferencesFormRef",ref:M,model:d.value,rules:c,"hide-required-asterisk":!0,class:"w-full"},{default:e(()=>[l(w,{modelValue:r.value.knowledgeSetting.noReferencesSetting.status,"onUpdate:modelValue":s[5]||(s[5]=S=>r.value.knowledgeSetting.noReferencesSetting.status=S),class:"radio-block-avatar"},{default:e(()=>[l($,{value:"ai_questioning"},{default:e(()=>[u("p",null,p(t.$t("views.application.dialog.continueQuestioning")),1)]),_:1}),l($,{value:"designated_answer"},{default:e(()=>[u("p",null,p(t.$t("views.application.dialog.provideAnswer")),1),r.value.knowledgeSetting.noReferencesSetting.status==="designated_answer"?(V(),I(h,{key:0,prop:"designated_answer"},{default:e(()=>[l(v,{modelValue:d.value.designated_answer,"onUpdate:modelValue":s[4]||(s[4]=S=>d.value.designated_answer=S),rows:2,type:"textarea",maxlength:"2048",placeholder:T.designated_answer},null,8,["modelValue","placeholder"])]),_:1})):Q("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model","rules"])]),_:1},8,["label"])),g.value?Q("",!0):(V(),I(h,{key:1,onClick:s[7]||(s[7]=ne(()=>{},["prevent"]))},{label:e(()=>[u("div",Xe,[u("span",el,p(t.$t("views.application.form.problemOptimization.label")),1)])]),default:e(()=>[l(G,{size:"small",modelValue:r.value.problemOptimization,"onUpdate:modelValue":s[6]||(s[6]=S=>r.value.problemOptimization=S)},null,8,["modelValue"])]),_:1})),r.value.problemOptimization?(V(),I(h,{key:2,label:t.$t("views.application.form.prompt.label")},{default:e(()=>[l(v,{modelValue:r.value.problemOptimizationPrompt,"onUpdate:modelValue":s[8]||(s[8]=S=>r.value.problemOptimizationPrompt=S),rows:6,type:"textarea",maxlength:"2048",placeholder:L},null,8,["modelValue"])]),_:1},8,["label"])):Q("",!0)]),_:1},8,["model"])),[[te,f.value]])])]),_:1})]),_:1},8,["title","modelValue"])}}}),al={class:"flex-between mb-8"},tl={class:"flex"},ol=["id"],nl={class:"p-8"},sl={class:"layout-bg"},il={class:"flex-between p-16 ml-8"},rl={class:"p-16-24 pt-0",style:{height:"calc(100vh - 200px)"}},ul=["title"],dl={class:"flex-between"},cl={class:"flex"},El=re({__name:"AddKnowledgeDialog",props:{data:{type:Array,default:()=>[]},loading:Boolean},emits:["addData"],setup(le,{expose:E,emit:H}){const q=ge(),x=le,M=H,{folder:T,user:L}=be(),r=Y(()=>q.path.includes("shared")?"systemShare":q.path.includes("resource-management")?"systemManage":"workspace"),d=n(!1),c=n([]),_=n(""),f=n(""),g=n([]),A=n([]),P=n(!1),N=Y(()=>_.value?g.value.filter(a=>a.embeddingModelId===_.value):g.value);se(d,a=>{a||(c.value=[],_.value="",f.value="",g.value=[],A.value=[])}),se(f,a=>{a?g.value=A.value.filter(v=>{var R;return v.name.includes(a)&&v.folderId===((R=h.value)==null?void 0:R.id)}):g.value=A.value.filter(v=>{var R;return v.folderId===((R=h.value)==null?void 0:R.id)})});function t(){var a,v;c.value.length>0?_.value=(v=(a=A.value)==null?void 0:a.find(R=>R.id===c.value[0]))==null?void 0:v.embeddingModelId:c.value.length===0&&(_.value="")}function s(){c.value=[],_.value=""}const m=a=>{c.value=a,W(),c.value.length>0&&(_.value=x.data.filter(v=>v.id===c.value[0])[0].embeddingModelId),d.value=!0},$=()=>{M("addData",A.value.filter(a=>c.value.includes(a.id))),d.value=!1},k=()=>{f.value="",A.value=[],b()},w=n([]),h=n({}),B=n(!1);function F(a){var v;a.id!==((v=h.value)==null?void 0:v.id)&&(h.value=a,b())}function W(){const a={};T.asyncGetFolder("KNOWLEDGE",a,r.value,B).then(v=>{var R;w.value=v.data,h.value=((R=v.data)==null?void 0:R[0])||{},b()})}function b(){var v;const a=((v=h.value)==null?void 0:v.id)||L.getWorkspaceId();ce({type:"knowledge",isShared:a==="share",systemType:r.value}).getKnowledgeList({folderId:a},P).then(R=>{A.value=Ue([...A.value,...R.data],"id"),g.value=R.data})}return E({open:m}),(a,v)=>{const R=i("el-text"),G=i("Refresh"),j=i("el-icon"),O=i("el-button"),ae=i("el-input"),te=i("el-col"),S=i("el-row"),Z=i("el-empty"),oe=i("el-scrollbar"),pe=i("el-dialog"),ue=we("loading");return V(),I(pe,{title:a.$t("views.application.dialog.addKnowledge"),modelValue:d.value,"onUpdate:modelValue":v[3]||(v[3]=o=>d.value=o),width:"1000","append-to-body":"",class:"addKnowledge-dialog","align-center":"","close-on-click-modal":!1,"close-on-press-escape":!1},{header:e(({titleId:o,titleClass:y})=>[u("div",al,[u("div",tl,[u("h4",{id:o,class:fe([y,"mr-8"])},p(a.$t("views.application.dialog.addKnowledge")),11,ol),l(R,{type:"info"},{default:e(()=>[C(p(a.$t("views.application.dialog.addKnowledgePlaceholder")),1)]),_:1})]),l(O,{link:"",class:"mr-24",onClick:k},{default:e(()=>[l(j,{size:18},{default:e(()=>[l(G)]),_:1})]),_:1})])]),footer:e(()=>[u("div",dl,[u("div",cl,[c.value.length>0?(V(),I(R,{key:0,type:"info",class:"color-secondary mr-8"},{default:e(()=>[C(p(a.$t("common.selected"))+" "+p(c.value.length),1)]),_:1})):Q("",!0),c.value.length>0?(V(),I(O,{key:1,link:"",type:"primary",onClick:s},{default:e(()=>[C(p(a.$t("common.clear")),1)]),_:1})):Q("",!0)]),u("span",null,[l(O,{onClick:v[2]||(v[2]=ne(o=>d.value=!1,["prevent"]))},{default:e(()=>[C(p(a.$t("common.cancel")),1)]),_:1}),l(O,{type:"primary",onClick:$},{default:e(()=>[C(p(a.$t("common.add")),1)]),_:1})])])]),default:e(()=>[l(Re,{showCollapse:"",class:"application-manage"},{left:e(()=>{var o;return[u("div",nl,[ie(l(Te,{data:w.value,currentNodeKey:(o=h.value)==null?void 0:o.id,onHandleNodeClick:F,canOperation:!1,showShared:"",shareTitle:a.$t("views.shared.shared_knowledge"),treeStyle:{height:"calc(100vh - 240px)"}},null,8,["data","currentNodeKey","shareTitle"]),[[ue,B.value]])])]}),default:e(()=>{var o;return[u("div",sl,[u("div",il,[u("h4",null,p((o=h.value)==null?void 0:o.name),1),l(ae,{modelValue:f.value,"onUpdate:modelValue":v[0]||(v[0]=y=>f.value=y),placeholder:a.$t("common.search"),"prefix-icon":"Search",class:"w-240 mr-8",clearable:""},null,8,["modelValue","placeholder"])]),l(oe,null,{default:e(()=>[u("div",rl,[N.value.length?ie((V(),I(S,{key:0,gutter:12},{default:e(()=>[(V(!0),X(ke,null,Ce(N.value.filter(y=>y.resourceType!=="folder"),(y,K)=>(V(),I(te,{span:8,key:K,class:"mb-16"},{default:e(()=>[l(De,{"value-field":"id",data:y,modelValue:c.value,"onUpdate:modelValue":v[1]||(v[1]=z=>c.value=z),onChange:t},{default:e(()=>[u("span",{class:"ellipsis cursor ml-12",title:y.name},p(y.name),9,ul)]),_:2},1032,["data","modelValue"])]),_:2},1024))),128))]),_:1})),[[ue,P.value]]):(V(),I(Z,{key:1,description:a.$t("common.noData")},null,8,["description"]))])]),_:1})])]}),_:1})]),_:1},8,["title","modelValue"])}}}),pl={class:"flex-between"},ml={class:"dialog-footer"},Hl=re({__name:"TTSModeParamSettingDialog",emits:["refresh"],setup(le,{expose:E,emit:H}){const q=ge(),{params:{id:x}}=q,M=Y(()=>q.path.includes("resource-management")?"systemManage":"workspace"),T=n(""),L=n([]),r=H,d=n(),c=n({}),_=n(!1),f=n(!1),g=n(!1),A=(m,$,k)=>{c.value={},T.value=m,ce({type:"model",systemType:M.value}).getModelParamsForm(m,f).then(w=>{var B;L.value=w.data;const h=w.data.map(F=>({[F.field]:F.show_default_value!==!1?F.default_value:void 0})).reduce((F,W)=>({...F,...W}),{});k&&Object.keys(k).forEach(F=>{F in h||delete k[F]}),k={...h,...k},(B=d.value)==null||B.render(L.value,k)}),_.value=!0},P=(m,$)=>{ce({type:"model",systemType:M.value}).getModelParamsForm(m,f).then(k=>{L.value=k.data;const w=k.data.map(h=>({[h.field]:h.show_default_value!==!1?h.default_value:void 0})).reduce((h,B)=>({...h,...B}),{});console.log("model_setting_data: ",w),r("refresh",w)})},N=async()=>{var m;(m=d.value)==null||m.validate().then(()=>{r("refresh",c.value),_.value=!1})},t=n(null),s=()=>{const m={...c.value,ttsModelId:T.value};ce({type:"application",systemType:M.value}).playDemoText(x,m,g).then(async $=>{if($.type==="application/json"){const h=await $.text();Ae(h);return}const k=new Blob([$],{type:"audio/mp3"}),w=URL.createObjectURL(k);t.value instanceof HTMLAudioElement?(t.value.src=w,t.value.play()):console.error("audioPlayer.value is not an instance of HTMLAudioElement")}).catch($=>{console.log("err: ",$)})};return E({open:A,reset_default:P}),(m,$)=>{const k=i("el-button"),w=i("el-dialog");return V(),X(ke,null,[l(w,{"align-center":"",title:m.$t("common.paramSetting"),modelValue:_.value,"onUpdate:modelValue":$[2]||($[2]=h=>_.value=h),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:e(()=>[u("div",pl,[l(k,{onClick:s,loading:g.value},{default:e(()=>[l(_e,{iconName:"app-video-play",class:"mr-4"}),C(" "+p(m.$t("views.application.form.voicePlay.listeningTest")),1)]),_:1},8,["loading"]),u("span",ml,[l(k,{onClick:$[1]||($[1]=ne(h=>_.value=!1,["prevent"]))},{default:e(()=>[C(p(m.$t("common.cancel")),1)]),_:1}),l(k,{type:"primary",onClick:N,loading:f.value},{default:e(()=>[C(p(m.$t("common.confirm")),1)]),_:1},8,["loading"])])])]),default:e(()=>[l(Ve,{modelValue:c.value,"onUpdate:modelValue":$[0]||($[0]=h=>c.value=h),model:c.value,"label-position":"top","require-asterisk-position":"right",render_data:L.value,ref_key:"dynamicsFormRef",ref:d},null,8,["modelValue","model","render_data"])]),_:1},8,["title","modelValue"]),u("audio",{ref_key:"audioPlayer",ref:t,controls:"",hidden:"hidden"},null,512)],64)}}}),vl={class:"dialog-footer p-16"},Bl=re({__name:"ReasoningParamSettingDialog",emits:["refresh"],setup(le,{expose:E,emit:H}){const q=H,x=n({reasoningContent_start:"<think>",reasoningContent_end:"</think>"}),M=n(!1),T=n(!1);se(M,d=>{d||(x.value={reasoningContent_start:"<think>",reasoningContent_end:"</think>"})});const L=d=>{x.value={...x.value,...d},M.value=!0},r=()=>{q("refresh",x.value),M.value=!1};return E({open:L}),(d,c)=>{const _=i("el-text"),f=i("el-input"),g=i("el-form-item"),A=i("el-col"),P=i("el-row"),N=i("el-form"),t=i("el-button"),s=i("el-dialog");return V(),I(s,{"align-center":"",title:d.$t("common.setting"),class:"param-dialog",modelValue:M.value,"onUpdate:modelValue":c[4]||(c[4]=m=>M.value=m),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:e(()=>[u("span",vl,[l(t,{onClick:c[2]||(c[2]=ne(m=>M.value=!1,["prevent"]))},{default:e(()=>[C(p(d.$t("common.cancel")),1)]),_:1}),l(t,{type:"primary",onClick:c[3]||(c[3]=m=>r()),loading:T.value},{default:e(()=>[C(p(d.$t("common.save")),1)]),_:1},8,["loading"])])]),default:e(()=>[l(N,{"label-position":"top",ref:"paramFormRef",model:x.value},{default:e(()=>[l(_,{type:"info",class:"color-secondary"},{default:e(()=>[C(p(d.$t("views.application.form.reasoningContent.tooltip")),1)]),_:1}),l(P,{class:"mt-16",gutter:20},{default:e(()=>[l(A,{span:12},{default:e(()=>[l(g,{label:d.$t("views.application.form.reasoningContent.start")},{default:e(()=>[l(f,{type:"textarea",modelValue:x.value.reasoningContent_start,"onUpdate:modelValue":c[0]||(c[0]=m=>x.value.reasoningContent_start=m),rows:6,maxlength:"50",placeholder:"<think>"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(A,{span:12},{default:e(()=>[l(g,{label:d.$t("views.application.form.reasoningContent.end")},{default:e(()=>[l(f,{type:"textarea",modelValue:x.value.reasoningContent_end,"onUpdate:modelValue":c[1]||(c[1]=m=>x.value.reasoningContent_end=m),rows:6,maxlength:"50",placeholder:"</think>"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),fl={class:"flex-between mb-8"},gl={class:"flex"},_l=["id"],hl={class:"p-8"},yl={class:"layout-bg"},wl={class:"flex-between p-16 ml-8"},bl={class:"p-16-24 pt-0",style:{height:"calc(100vh - 200px)"}},kl=["src"],$l=["title"],Vl={class:"flex-between"},Sl={class:"flex"},Wl=re({__name:"ToolDialog",emits:["refresh"],setup(le,{expose:E,emit:H}){const q=ge(),x=H,{folder:M,user:T}=be(),L=Y(()=>q.path.includes("shared")?"systemShare":q.path.includes("resource-management")?"systemManage":"workspace"),r=n(!1),d=n([]),c=n(""),_=n([]),f=n([]),g=n("CUSTOM"),A=n(!1);se(r,b=>{b||(d.value=[],c.value="",_.value=[],f.value=[])}),se(c,b=>{b?_.value=f.value.filter(a=>a.name.includes(b)&&a.toolType===g.value):_.value=f.value.filter(a=>a.toolType===g.value)});function P(){}function N(){d.value=[]}const t=b=>{d.value=b||[],F(),r.value=!0},s=()=>{x("refresh",{toolIds:d.value}),r.value=!1},m=()=>{c.value="",f.value=[],W()};function $(){_.value=f.value.filter(b=>b.name.includes(c.value)&&b.toolType===g.value)}const k=n([]),w=n({}),h=n(!1);function B(b){var a;b.id!==((a=w.value)==null?void 0:a.id)&&(w.value=b,W())}function F(){const b={};M.asyncGetFolder("TOOL",b,L.value,h).then(a=>{var v;k.value=a.data,w.value=((v=a.data)==null?void 0:v[0])||{},W()})}function W(){var a;const b=((a=w.value)==null?void 0:a.id)||T.getWorkspaceId();ce({type:"tool",isShared:b==="share",systemType:"workspace"}).getToolList({folderId:b}).then(v=>{var R,G,j;f.value=((R=v.data)==null?void 0:R.tools)||v.data||[],f.value=(G=f.value)==null?void 0:G.filter(O=>O.isActive),_.value=v.data.tools||v.data,_.value=(j=_.value)==null?void 0:j.filter(O=>O.isActive&&O.toolType===g.value)})}return E({open:t}),(b,a)=>{const v=i("Refresh"),R=i("el-icon"),G=i("el-button"),j=i("el-divider"),O=i("el-radio-button"),ae=i("el-radio-group"),te=i("el-input"),S=i("el-avatar"),Z=i("ToolIcon"),oe=i("el-col"),pe=i("el-row"),ue=i("el-empty"),o=i("el-scrollbar"),y=i("el-text"),K=i("el-dialog"),z=we("loading");return V(),I(K,{modelValue:r.value,"onUpdate:modelValue":a[4]||(a[4]=U=>r.value=U),width:"1000","append-to-body":"",class:"addTool-dialog","align-center":"","close-on-click-modal":!1,"close-on-press-escape":!1},{header:e(({titleId:U,titleClass:D})=>[u("div",fl,[u("div",gl,[u("h4",{id:U,class:fe([D,"mr-8"])},p(b.$t("views.tool.settingTool")),11,_l)]),l(G,{link:"",class:"mr-24",onClick:m},{default:e(()=>[l(R,{size:18},{default:e(()=>[l(v)]),_:1})]),_:1})])]),footer:e(()=>[u("div",Vl,[u("div",Sl,[d.value.length>0?(V(),I(y,{key:0,type:"info",class:"color-secondary mr-8"},{default:e(()=>[C(p(b.$t("common.selected"))+" "+p(d.value.length),1)]),_:1})):Q("",!0),d.value.length>0?(V(),I(G,{key:1,link:"",type:"primary",onClick:N},{default:e(()=>[C(p(b.$t("common.clear")),1)]),_:1})):Q("",!0)]),u("span",null,[l(G,{onClick:a[3]||(a[3]=ne(U=>r.value=!1,["prevent"]))},{default:e(()=>[C(p(b.$t("common.cancel")),1)]),_:1}),l(G,{type:"primary",onClick:s},{default:e(()=>[C(p(b.$t("common.add")),1)]),_:1})])])]),default:e(()=>[l(Re,{showCollapse:"",class:"application-manage"},{left:e(()=>{var U;return[u("div",hl,[ie(l(Te,{data:k.value,currentNodeKey:(U=w.value)==null?void 0:U.id,onHandleNodeClick:B,canOperation:!1,showShared:"",shareTitle:b.$t("views.shared.shared_tool"),treeStyle:{height:"calc(100vh - 240px)"}},null,8,["data","currentNodeKey","shareTitle"]),[[z,h.value]])])]}),default:e(()=>{var U;return[u("div",yl,[u("div",wl,[u("h4",null,p((U=w.value)==null?void 0:U.name),1),l(j,{direction:"vertical"}),l(ae,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=D=>g.value=D),onChange:$,class:"app-radio-button-group"},{default:e(()=>[l(O,{value:"CUSTOM"},{default:e(()=>[C(p(b.$t("views.tool.title")),1)]),_:1}),l(O,{value:"MCP"},{default:e(()=>a[5]||(a[5]=[C("MCP",-1)])),_:1,__:[5]})]),_:1},8,["modelValue"]),l(te,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=D=>c.value=D),placeholder:b.$t("common.search"),"prefix-icon":"Search",class:"w-240 mr-8",clearable:""},null,8,["modelValue","placeholder"])]),l(o,null,{default:e(()=>[u("div",bl,[_.value.length?ie((V(),I(pe,{key:0,gutter:12},{default:e(()=>[(V(!0),X(ke,null,Ce(_.value,(D,me)=>(V(),I(oe,{span:8,key:me,class:"mb-16"},{default:e(()=>[l(De,{"value-field":"id",data:D,modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=de=>d.value=de),onChange:P},{icon:e(()=>[D!=null&&D.icon?(V(),I(S,{key:0,shape:"square",size:32,style:{background:"none"},class:"mr-8"},{default:e(()=>[u("img",{src:Le(Ne)(D==null?void 0:D.icon),alt:""},null,8,kl)]),_:2},1024)):(V(),I(Z,{key:1,size:32,type:D==null?void 0:D.toolType},null,8,["type"]))]),default:e(()=>[u("span",{class:"ellipsis cursor ml-12",title:D.name},p(D.name),9,$l)]),_:2},1032,["data","modelValue"])]),_:2},1024))),128))]),_:1})),[[z,A.value]]):(V(),I(ue,{key:1,description:b.$t("common.noData")},null,8,["description"]))])]),_:1})])]}),_:1})]),_:1},8,["modelValue"])}}}),Cl={class:"generate-prompt-dialog-bg border-r-8"},Tl={class:"scrollbar-height"},Rl={class:"p-16 pb-0 lighter"},Dl={key:1,shadow:"always",style:{margin:"0.5rem 0"}},Ml={key:2,class:"flex align-center"},Il={key:0,class:"mt-8"},Pl={key:1,class:"mt-8"},xl={class:"generate-prompt-operate p-16"},Ul={key:0,class:"text-center mb-8"},Al={class:"operate-textarea"},Ll={class:"operate"},Nl={class:"text-right"},Ol={src:Fe,alt:""},ql=re({__name:"GeneratePromptDialog",emits:["replace"],setup(le,{expose:E,emit:H}){const q=H,{user:x}=be(),M=ge(),T=n([]),L=Y(()=>M.path.includes("resource-management")?"systemManage":"workspace"),r=n(""),d=n(""),c=n(""),_=n(!1),f=n(""),g=n(!1),A={INIT_TEMPLATE:`
è¯·æ ¹æ®ç”¨æˆ·æè¿°ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„AIè§’è‰²äººè®¾æ¨¡æ¿:

åº”ç”¨åç§°ï¼š{application_name}
åº”ç”¨æè¿°ï¼š{detail}
ç”¨æˆ·éœ€æ±‚ï¼š{userInput}

é‡è¦è¯´æ˜ï¼š
1. è§’è‰²è®¾å®šå¿…é¡»æœåŠ¡äº"{application_name}"åº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½
2. å…è®¸ç”¨æˆ·å¯¹è§’è‰²è®¾å®šçš„å…·ä½“å†…å®¹è¿›è¡Œè°ƒæ•´å’Œä¼˜åŒ–
3. å¦‚æœç”¨æˆ·è¦æ±‚ä¿®æ”¹æŸä¸ªæŠ€èƒ½æˆ–éƒ¨åˆ†ï¼Œåœ¨ä¿æŒåº”ç”¨ä¸»é¢˜çš„å‰æä¸‹è¿›è¡Œç›¸åº”è°ƒæ•´

è¯·æŒ‰ä»¥ä¸‹æ ¼å¼ç”Ÿæˆï¼š

å¿…é¡»ä¸¥æ ¼éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š
1. **ä¸¥æ ¼ç¦æ­¢è¾“å‡ºè§£é‡Šã€å‰è¨€ã€é¢å¤–è¯´æ˜**ï¼Œåªè¾“å‡ºæœ€ç»ˆç»“æœã€‚
2. **ä¸¥æ ¼ä½¿ç”¨ä»¥ä¸‹æ ¼å¼**ï¼Œä¸èƒ½ç¼ºå°‘æ ‡é¢˜ã€ä¸èƒ½å¤šå‡ºå…¶ä»–æ®µè½ã€‚
3. **å¦‚æœç”¨æˆ·è¦æ±‚ä¿®æ”¹è§’è‰²è®¾å®šçš„æŸä¸ªéƒ¨åˆ†ï¼Œåœ¨ä¿æŒåº”ç”¨æ ¸å¿ƒåŠŸèƒ½çš„å‰æä¸‹è¿›è¡Œè°ƒæ•´**ã€‚
4. **å¦‚æœç”¨æˆ·éœ€æ±‚ä¸è§’è‰²è®¾å®šç”Ÿæˆå®Œå…¨æ— å…³ï¼ˆå¦‚é—²èŠã€å…¶ä»–è¯é¢˜ï¼‰ï¼Œåˆ™å¿½ç•¥ç”¨æˆ·éœ€æ±‚ï¼ŒåŸºäºåº”ç”¨ä¿¡æ¯ç”Ÿæˆæ ‡å‡†è§’è‰²è®¾å®š**ã€‚

# è§’è‰²:
è§’è‰²æ¦‚è¿°å’Œä¸»è¦èŒè´£çš„ä¸€å¥è¯æè¿°

## ç›®æ ‡ï¼š
è§’è‰²çš„å·¥ä½œç›®æ ‡,å¦‚æœæœ‰å¤šç›®æ ‡å¯ä»¥åˆ†ç‚¹åˆ—å‡º,ä½†å»ºè®®æ›´èšç„¦1-2ä¸ªç›®æ ‡

## æ ¸å¿ƒæŠ€èƒ½ï¼š
### æŠ€èƒ½ 1: [æŠ€èƒ½åç§°ï¼Œå¦‚ä½œå“æ¨è/ä¿¡æ¯æŸ¥è¯¢/ä¸“ä¸šåˆ†æç­‰]
1. [æ‰§è¡Œæ­¥éª¤1 - æè¿°è¯¥æŠ€èƒ½çš„ç¬¬ä¸€ä¸ªå…·ä½“æ“ä½œæ­¥éª¤ï¼ŒåŒ…æ‹¬æ¡ä»¶åˆ¤æ–­å’Œå¤„ç†æ–¹å¼]
2. [æ‰§è¡Œæ­¥éª¤2 - æè¿°è¯¥æŠ€èƒ½çš„ç¬¬äºŒä¸ªå…·ä½“æ“ä½œæ­¥éª¤ï¼ŒåŒ…æ‹¬å¦‚ä½•è·å–æˆ–å¤„ç†ä¿¡æ¯]
3. [æ‰§è¡Œæ­¥éª¤3 - æè¿°è¯¥æŠ€èƒ½çš„æœ€ç»ˆè¾“å‡ºæ­¥éª¤ï¼Œè¯´æ˜å¦‚ä½•å‘ˆç°ç»“æœ]

===å›å¤ç¤ºä¾‹===
- ğŸ“‹ [æ ‡è¯†ç¬¦]: <å…·ä½“å†…å®¹æ ¼å¼è¯´æ˜>
- ğŸ¯ [æ ‡è¯†ç¬¦]: <å…·ä½“å†…å®¹æ ¼å¼è¯´æ˜>
- ğŸ’¡ [æ ‡è¯†ç¬¦]: <å…·ä½“å†…å®¹æ ¼å¼è¯´æ˜>
===ç¤ºä¾‹ç»“æŸ===

### æŠ€èƒ½ 2: [æŠ€èƒ½åç§°]
1. [æ‰§è¡Œæ­¥éª¤1 - æè¿°è§¦å‘æ¡ä»¶å’Œåˆå§‹å¤„ç†æ–¹å¼]
2. [æ‰§è¡Œæ­¥éª¤2 - æè¿°ä¿¡æ¯è·å–å’Œæ·±åŒ–å¤„ç†çš„å…·ä½“æ–¹æ³•]
3. [æ‰§è¡Œæ­¥éª¤3 - æè¿°æœ€ç»ˆè¾“å‡ºçš„å…·ä½“è¦æ±‚å’Œæ ¼å¼]

### æŠ€èƒ½ 3: [æŠ€èƒ½åç§°]
- [æ ¸å¿ƒèƒ½åŠ›æè¿° - è¯´æ˜è¯¥æŠ€èƒ½çš„ä¸»è¦ä½œç”¨å’ŒçŸ¥è¯†åŸºç¡€]
- [åº”ç”¨æ–¹æ³• - æè¿°å¦‚ä½•è¿ç”¨è¯¥æŠ€èƒ½ä¸ºç”¨æˆ·æä¾›æœåŠ¡ï¼ŒåŒ…æ‹¬å…·ä½“çš„å®æ–½æ–¹å¼]

## å·¥ä½œæµï¼š
1. æè¿°è§’è‰²å·¥ä½œæµç¨‹çš„ç¬¬ä¸€æ­¥
2. æè¿°è§’è‰²å·¥ä½œæµç¨‹çš„ç¬¬äºŒæ­¥
3. æè¿°è§’è‰²å·¥ä½œæµç¨‹çš„ç¬¬ä¸‰æ­¥

## è¾“å‡ºæ ¼å¼ï¼š
å¦‚æœå¯¹è§’è‰²çš„è¾“å‡ºæ ¼å¼æœ‰ç‰¹å®šè¦æ±‚ï¼Œå¯ä»¥åœ¨è¿™é‡Œå¼ºè°ƒå¹¶ä¸¾ä¾‹è¯´æ˜æƒ³è¦çš„è¾“å‡ºæ ¼å¼


## é™åˆ¶ï¼š
1. **ä¸¥æ ¼é™åˆ¶å›ç­”èŒƒå›´**ï¼šä»…å›ç­”ä¸è§’è‰²è®¾å®šç›¸å…³çš„é—®é¢˜ã€‚
   - å¦‚æœç”¨æˆ·æé—®ä¸è§’è‰²æ— å…³ï¼Œå¿…é¡»ä½¿ç”¨ä»¥ä¸‹å›ºå®šæ ¼å¼å›å¤ï¼š
     â€œå¯¹ä¸èµ·ï¼Œæˆ‘åªèƒ½å›ç­”ä¸[è§’è‰²è®¾å®š]ç›¸å…³çš„é—®é¢˜ï¼Œæ‚¨çš„é—®é¢˜ä¸åœ¨æœåŠ¡èŒƒå›´å†…ã€‚â€
   - ä¸å¾—æä¾›ä»»ä½•ä¸è§’è‰²è®¾å®šæ— å…³çš„å›ç­”ã€‚
2. æè¿°è§’è‰²åœ¨äº’åŠ¨è¿‡ç¨‹ä¸­éœ€è¦éµå¾ªçš„é™åˆ¶æ¡ä»¶2
3. æè¿°è§’è‰²åœ¨äº’åŠ¨è¿‡ç¨‹ä¸­éœ€è¦éµå¾ªçš„é™åˆ¶æ¡ä»¶3

è¾“å‡ºæ—¶ä¸å¾—åŒ…å«ä»»ä½•è§£é‡Šæˆ–é™„åŠ è¯´æ˜ï¼Œåªèƒ½è¿”å›ç¬¦åˆä»¥ä¸Šæ ¼å¼çš„å†…å®¹ã€‚
  `},P=n(!1),N=n(!1),t=n(""),s=n(0);let m=null;const $=n(!1),k=()=>{m&&clearInterval(m),P.value=!0,N.value=!1,m=setInterval(()=>{if(b.value&&!N.value){const o=T.value[T.value.length-1];o&&o.role==="ai"&&(o.content=t.value),w();return}if(!N.value&&s.value<t.value.length){const o=Math.min(3,t.value.length-s.value);s.value+=o;const y=T.value[T.value.length-1];y&&y.role==="ai"&&(y.content=t.value.substring(0,s.value))}else g.value===!1&&s.value>=t.value.length&&w()},50)},w=()=>{m&&(clearInterval(m),m=null),P.value=!1,N.value=!1,g.value=!1,$.value=!0},h=Y(()=>P.value),B=()=>{N.value=!0,P.value=!1},F=()=>{s.value<t.value.length&&k()},W=o=>{let y="";const K=Se({content:"",role:"ai"});T.value.push(K),t.value="",s.value=0,$.value=!1;let z=!1;const U=({done:D,value:me})=>{try{if(D){g.value=!1,b.value=!0;return}let J=new TextDecoder("utf-8").decode(me,{stream:!0});y+=J;const ve=y.match(/data:.*}\n\n/g);if(ve)J=ve.join(""),y=y.replace(J,"");else return o.read().then(U);if(J&&J.startsWith("data:")&&ve)for(const Me in ve){const he=JSON==null?void 0:JSON.parse(ve[Me].replace("data:",""));if(he.isEnd||(t.value+=he.content,z||(z=!0,k())),he.isEnd)return Promise.resolve()}}catch(de){return g.value=!1,w(),Promise.reject(de)}return o.read().then(U)};return U},b=n(!1),a=Y(()=>{const o=T.value[T.value.length-1];return o&&o.role=="ai"?o.content:""}),v=Y(()=>!P.value&&N.value&&s.value<t.value.length);function R(o){b.value=!1,g.value=!0;const y=x.getWorkspaceId()||"default";T.value.push({content:o,role:"user"});const K={messages:T.value,prompt:A.INIT_TEMPLATE};L.value==="workspace"?Ke.generate_prompt(y,d.value,c.value,K).then(z=>{ye(()=>{Z.value&&S.value.setScrollTop(oe())});const U=z.body.getReader();U.read().then(W(U))}):L.value==="systemManage"&&Ee.generate_prompt(c.value,d.value,K).then(z=>{ye(()=>{Z.value&&S.value.setScrollTop(oe())});const U=z.body.getReader();U.read().then(W(U))})}const G=()=>{r.value&&R("ç»“æœä¸æ»¡æ„,è¯·æŒ‰ç…§æ ¼å¼,é‡æ–°ç”Ÿæˆ")},j=n(),O=o=>{if(!(o!=null&&o.ctrlKey)&&!(o!=null&&o.shiftKey)&&!(o!=null&&o.altKey)&&!(o!=null&&o.metaKey)){if(o==null||o.preventDefault(),!f.value.trim()||g.value||P.value||(r.value||(r.value=f.value),N.value||P.value))return;f.value&&(R(f.value),f.value="")}else ae(o)},ae=o=>{const y=j.value.$el.querySelector(".el-textarea__inner"),K=y.selectionStart,z=y.selectionEnd;o.preventDefault(),f.value=f.value.slice(0,K)+`
`+f.value.slice(z),ye(()=>{y.setSelectionRange(K+1,K+1)})},te=(o,y)=>{d.value=o,c.value=y,_.value=!0,r.value="",T.value=[]},S=n(),Z=n(),oe=()=>Z.value.scrollHeight,pe=()=>{var o;S.value&&S.value.wrapRef.offsetHeight<((o=Z.value)==null?void 0:o.scrollHeight)&&S.value.setScrollTop(oe())},ue=o=>{a.value?He(ee("common.tip"),ee("views.application.generateDialog.exit"),{confirmButtonText:ee("common.confirm"),cancelButtonText:ee("common.cancel"),distinguishCancelAndClose:!0}).then(()=>{w(),T.value=[],t.value="",s.value=0,$.value=!1,o()}).catch(()=>{}):o()};return Oe(()=>{w()}),se(a,()=>{pe()},{deep:!0,immediate:!0}),E({open:te}),(o,y)=>{const K=i("Loading"),z=i("el-icon"),U=i("el-scrollbar"),D=i("el-button"),me=i("el-input"),de=i("el-dialog");return V(),I(de,{"align-center":"",title:o.$t("views.application.generateDialog.generatePrompt"),modelValue:_.value,"onUpdate:modelValue":y[3]||(y[3]=J=>_.value=J),style:{width:"600px"},"append-to-body":"","close-on-click-modal":!0,"close-on-press-escape":!0,"before-close":ue},{default:e(()=>[u("div",Cl,[u("div",Tl,[u("div",Rl,[l(U,{ref_key:"scrollDiv",ref:S},{default:e(()=>[a.value?(V(),X("div",{key:0,ref_key:"dialogScrollbar",ref:Z,class:"pre-wrap lighter",style:{"max-height":"calc(100vh - 400px)"}},p(a.value),513)):g.value?(V(),X("p",Dl,[l(z,{class:"is-loading color-primary mr-4"},{default:e(()=>[l(K)]),_:1}),C(" "+p(o.$t("views.application.generateDialog.loading"))+" ",1),y[4]||(y[4]=u("span",{class:"dotting"},null,-1))])):(V(),X("p",Ml,[l(_e,{iconName:"app-generate-star",class:"color-primary mr-4"}),C(" "+p(o.$t("views.application.generateDialog.title")),1)]))]),_:1},512),a.value&&!g.value&&!P.value&&!v.value?(V(),X("div",Il,[l(D,{type:"primary",onClick:y[0]||(y[0]=()=>q("replace",a.value))},{default:e(()=>[C(p(o.$t("views.application.generateDialog.replace")),1)]),_:1}),l(D,{onClick:G,disabled:!a.value||g.value,loading:g.value},{default:e(()=>[C(p(o.$t("views.application.generateDialog.remake")),1)]),_:1},8,["disabled","loading"])])):(V(),X("div",Pl,[v.value?(V(),I(D,{key:0,type:"primary",onClick:F,link:""},{default:e(()=>[C(p(o.$t("views.application.generateDialog.continue")),1)]),_:1})):Q("",!0)]))]),u("div",xl,[h.value?(V(),X("div",Ul,[l(D,{class:"border-primary video-stop-button",onClick:B},{default:e(()=>[l(_e,{iconName:"app-video-stop",class:"mr-8"}),C(" "+p(o.$t("views.application.generateDialog.stop")),1)]),_:1})])):Q("",!0),u("div",Al,[l(me,{ref_key:"quickInputRef",ref:j,modelValue:f.value,"onUpdate:modelValue":y[1]||(y[1]=J=>f.value=J),autosize:{minRows:1,maxRows:10},type:"textarea",placeholder:o.$t("views.application.generateDialog.placeholder"),maxlength:1e5,class:"chat-operate-textarea",onKeydown:y[2]||(y[2]=qe(J=>O(J),["enter"]))},null,8,["modelValue","placeholder"]),u("div",Ll,[u("div",Nl,[l(D,{text:"",class:"sent-button",disabled:!f.value.trim()||g.value||P.value,onClick:O},{default:e(()=>[ie(u("img",Ol,null,512),[[$e,!f.value.trim()||g.value||P.value]]),ie(l(ze,null,null,512),[[$e,f.value.trim()&&!g.value&&!P.value]])]),_:1},8,["disabled"])])])])])])])]),_:1},8,["title","modelValue"])}}}),Gl=Be(ql,[["__scopeId","data-v-2168fa76"]]);export{Gl as G,zl as _,Hl as a,Kl as b,El as c,Bl as d,Wl as e};
