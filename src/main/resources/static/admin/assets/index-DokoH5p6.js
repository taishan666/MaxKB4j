var XD=Object.defineProperty;var qD=(e,t,n)=>t in e?XD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ma=(e,t,n)=>qD(e,typeof t!="symbol"?t+"":t,n);import{aY as kv,aZ as Os,a_ as Vr,a$ as IS,b0 as ih,b1 as Ym,b2 as zd,b3 as ah,b4 as IT,b5 as ju,b6 as $u,af as Oi,b7 as YD,b8 as vc,b9 as Yw,ba as KD,bb as Km,bc as Iu,bd as Zm,be as ZD,bf as Lv,bg as i_,aE as Ms,bh as JD,bi as lh,bj as LT,bk as uh,bl as Kd,z as Kw,bm as ro,bn as a_,bo as Jm,bp as Ss,bq as Io,br as Pf,bs as mc,bt as Fv,bu as Qm,bv as ks,bw as Na,bx as Qr,by as l_,bz as QD,bA as FT,bB as Nf,bC as $T,bD as BT,bE as cw,bF as ia,ag as xs,bG as ej,bH as tj,bI as u_,bJ as UT,bK as sh,bL as VT,ab as Zw,bM as $v,A as Bv,bN as Um,bO as ey,ae as GT,bP as WT,bQ as nj,bR as Pv,bS as rj,bT as zT,bU as HT,bV as XT,bW as oj,bX as ij,bY as aj,bZ as lj,b_ as uj,b$ as sj,c0 as cj,c1 as Pg,c2 as fj,c3 as dj,c4 as qT,c5 as YT,c6 as KT,c7 as ZT,c8 as Jw,c9 as pj,ca as ty,cb as JT,cc as hj,cd as QT,ce as eM,cf as vj,cg as mj,ch as yj,ci as eh,ad as gj,cj as _j,ck as bj,aF as wj,cl as Ej,cm as Oj,cn as Sj,co as xj,cp as Aj,cq as Tj,cr as Mj,aa as kj,ah as Pj,cs as Rj,aG as Nj,ct as Cj,cu as Dj,cv as jj,cw as Ij,cx as Lj,cy as Fj,a9 as $j,ai as Bj,cz as Uj,p as Vj,cA as Gj,cB as Wj,cC as zj,cD as Hj,aJ as ir,cE as Ue,cF as Qw,aS as ee,aL as sn,aM as Ne,cG as Dr,aX as P,aN as J,aT as gt,cH as Oo,cI as C,aU as Rn,aV as ar,cJ as fw,cK as Qp,cL as LS,aO as Ee,cM as eE,cN as ut,cO as en,cP as Zd,cQ as iu,aP as aa,aQ as tE,cR as Xj,aR as or,cS as tM,cT as oo,cU as Ra,cV as qj,cW as th,cX as dw,cY as pw,cZ as FS,c_ as Eo,c$ as Re,d0 as Hd,aW as Du,d1 as Yj,d2 as hw,d3 as mi,d4 as St,d5 as nE,d6 as Ko,d7 as Cf,d8 as Cr,d9 as ou,da as Vd,Q as Kj,db as ch,dc as Rv,dd as Zj,de as Jj,df as nM,dg as rM,dh as Qj,di as eI,dj as tI,dk as nI,dl as rI,dm as Zo,dn as rE,dp as oI,dq as iI,dr as Nv,ds as aI,dt as Xd,du as fl,dv as lI,dw as $S,dx as uI,dy as sI,dz as cI,dA as fI,dB as dI,dC as oE,dD as iE,dE as pI,dF as vw,aK as hI,dG as BS,dH as vI,dI as mI,dJ as Af,dK as Pl,dL as bs,dM as Wa,dN as $d,dO as yI}from"./admin-B3OaS6Gp.js";import{g as gI,t as US,a as VS,i as yc,n as _I,c as bI,b as wI}from"./data-CWWfOZeu.js";import{_ as fh,G as oM,a as EI,b as OI,c as iM,d as SI,e as xI}from"./GeneratePromptDialog-ec6_vwIt.js";import{b as aM,c as dh,v as Uv,d as AI,e as TI,g as lM,a as MI,f as kI,r as PI,h as RI}from"./reduce-BnZBqAV2.js";import{h as NI,i as uM,j as CI,k as DI,l as jI,n as II,o as LI,p as FI,z as $I,q as BI,s as UI,f as VI,a as GI,m as WI,b as zI,d as HI,c as XI,e as qI,g as YI,r as KI,u as ZI}from"./zipObject-B-qSLvlu.js";import{l as JI,_ as QI}from"./vue-draggable-plus-CAyIXj-0.js";import{_ as e8}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-CSK8wV1G.js";import{_ as cn}from"./defineProperty-DbXIQDXj.js";import"./typeof-QjJsDpFa.js";var t8=NaN;function GS(e){return typeof e=="number"?e:kv(e)?t8:+e}function s_(e,t){return function(n,a){var r;if(n===void 0&&a===void 0)return t;if(n!==void 0&&(r=n),a!==void 0){if(r===void 0)return a;typeof n=="string"||typeof a=="string"?(n=Os(n),a=Os(a)):(n=GS(n),a=GS(a)),r=e(n,a)}return r}}var n8=s_(function(e,t){return e+t},0),r8="Expected a function";function o8(e,t){if(typeof t!="function")throw new TypeError(r8);return e=Vr(e),function(){if(--e<1)return t.apply(this,arguments)}}var Rg=IS&&new IS,sM=Rg?function(e,t){return Rg.set(e,t),e}:ih;function Vm(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ym(e.prototype),a=e.apply(n,t);return zd(a)?a:n}}var i8=1;function a8(e,t,n){var a=t&i8,r=Vm(e);function u(){var c=this&&this!==ah&&this instanceof u?r:e;return c.apply(a?n:this,arguments)}return u}var l8=Math.max;function cM(e,t,n,a){for(var r=-1,u=e.length,c=n.length,v=-1,d=t.length,g=l8(u-c,0),_=Array(d+g),b=!a;++v<d;)_[v]=t[v];for(;++r<c;)(b||r<u)&&(_[n[r]]=e[r]);for(;g--;)_[v++]=e[r++];return _}var u8=Math.max;function fM(e,t,n,a){for(var r=-1,u=e.length,c=-1,v=n.length,d=-1,g=t.length,_=u8(u-v,0),b=Array(_+g),x=!a;++r<_;)b[r]=e[r];for(var A=r;++d<g;)b[A+d]=t[d];for(;++c<v;)(x||r<u)&&(b[A+n[c]]=e[r++]);return b}function s8(e,t){for(var n=e.length,a=0;n--;)e[n]===t&&++a;return a}function c_(){}var c8=4294967295;function Jr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c8,this.__views__=[]}Jr.prototype=Ym(c_.prototype);Jr.prototype.constructor=Jr;var aE=Rg?function(e){return Rg.get(e)}:IT,wv={},f8=Object.prototype,d8=f8.hasOwnProperty;function yg(e){for(var t=e.name+"",n=wv[t],a=d8.call(wv,t)?n.length:0;a--;){var r=n[a],u=r.func;if(u==null||u==e)return r.name}return t}function Lu(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Lu.prototype=Ym(c_.prototype);Lu.prototype.constructor=Lu;function dM(e){if(e instanceof Jr)return e.clone();var t=new Lu(e.__wrapped__,e.__chain__);return t.__actions__=ju(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var p8=Object.prototype,h8=p8.hasOwnProperty;function se(e){if($u(e)&&!Oi(e)&&!(e instanceof Jr)){if(e instanceof Lu)return e;if(h8.call(e,"__wrapped__"))return dM(e)}return new Lu(e)}se.prototype=c_.prototype;se.prototype.constructor=se;function mw(e){var t=yg(e),n=se[t];if(typeof n!="function"||!(t in Jr.prototype))return!1;if(e===n)return!0;var a=aE(n);return!!a&&e===a[0]}var pM=YD(sM),v8=/\{\n\/\* \[wrapped with (.+)\] \*/,m8=/,? & /;function y8(e){var t=e.match(v8);return t?t[1].split(m8):[]}var g8=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function _8(e,t){var n=t.length;if(!n)return e;var a=n-1;return t[a]=(n>1?"& ":"")+t[a],t=t.join(n>2?", ":" "),e.replace(g8,`{
/* [wrapped with `+t+`] */
`)}var b8=1,w8=2,E8=8,O8=16,S8=32,x8=64,A8=128,T8=256,M8=512,k8=[["ary",A8],["bind",b8],["bindKey",w8],["curry",E8],["curryRight",O8],["flip",M8],["partial",S8],["partialRight",x8],["rearg",T8]];function P8(e,t){return vc(k8,function(n){var a="_."+n[0];t&n[1]&&!Yw(e,a)&&e.push(a)}),e.sort()}function hM(e,t,n){var a=t+"";return KD(e,_8(a,P8(y8(a),n)))}var R8=4,N8=8,WS=32,zS=64;function vM(e,t,n,a,r,u,c,v,d,g){var _=t&N8,b=_?c:void 0,x=_?void 0:c,A=_?u:void 0,M=_?void 0:u;t|=_?WS:zS,t&=~(_?zS:WS),t&R8||(t&=-4);var O=[e,t,r,A,b,M,x,v,d,g],S=n.apply(void 0,O);return mw(e)&&pM(S,O),S.placeholder=a,hM(S,e,t)}function Vv(e){var t=e;return t.placeholder}var C8=Math.min;function D8(e,t){for(var n=e.length,a=C8(t.length,n),r=ju(e);a--;){var u=t[a];e[a]=Km(u,n)?r[u]:void 0}return e}var HS="__lodash_placeholder__";function qd(e,t){for(var n=-1,a=e.length,r=0,u=[];++n<a;){var c=e[n];(c===t||c===HS)&&(e[n]=HS,u[r++]=n)}return u}var j8=1,I8=2,L8=8,F8=16,$8=128,B8=512;function f_(e,t,n,a,r,u,c,v,d,g){var _=t&$8,b=t&j8,x=t&I8,A=t&(L8|F8),M=t&B8,O=x?void 0:Vm(e);function S(){for(var j=arguments.length,D=Array(j),z=j;z--;)D[z]=arguments[z];if(A)var U=Vv(S),L=s8(D,U);if(a&&(D=cM(D,a,r,A)),u&&(D=fM(D,u,c,A)),j-=L,A&&j<g){var $=qd(D,U);return vM(e,t,f_,S.placeholder,n,D,$,v,d,g-j)}var X=b?n:this,Y=x?X[e]:e;return j=D.length,v?D=D8(D,v):M&&j>1&&D.reverse(),_&&d<j&&(D.length=d),this&&this!==ah&&this instanceof S&&(Y=O||Vm(Y)),Y.apply(X,D)}return S}function U8(e,t,n){var a=Vm(e);function r(){for(var u=arguments.length,c=Array(u),v=u,d=Vv(r);v--;)c[v]=arguments[v];var g=u<3&&c[0]!==d&&c[u-1]!==d?[]:qd(c,d);if(u-=g.length,u<n)return vM(e,t,f_,r.placeholder,void 0,c,g,void 0,void 0,n-u);var _=this&&this!==ah&&this instanceof r?a:e;return Iu(_,this,c)}return r}var V8=1;function G8(e,t,n,a){var r=t&V8,u=Vm(e);function c(){for(var v=-1,d=arguments.length,g=-1,_=a.length,b=Array(_+d),x=this&&this!==ah&&this instanceof c?u:e;++g<_;)b[g]=a[g];for(;d--;)b[g++]=arguments[++v];return Iu(x,r?n:this,b)}return c}var XS="__lodash_placeholder__",b1=1,W8=2,z8=4,qS=8,wm=128,YS=256,H8=Math.min;function X8(e,t){var n=e[1],a=t[1],r=n|a,u=r<(b1|W8|wm),c=a==wm&&n==qS||a==wm&&n==YS&&e[7].length<=t[8]||a==(wm|YS)&&t[7].length<=t[8]&&n==qS;if(!(u||c))return e;a&b1&&(e[2]=t[2],r|=n&b1?0:z8);var v=t[3];if(v){var d=e[3];e[3]=d?cM(d,v,t[4]):v,e[4]=d?qd(e[3],XS):t[4]}return v=t[5],v&&(d=e[5],e[5]=d?fM(d,v,t[6]):v,e[6]=d?qd(e[5],XS):t[6]),v=t[7],v&&(e[7]=v),a&wm&&(e[8]=e[8]==null?t[8]:H8(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var q8="Expected a function",KS=1,Y8=2,ZS=8,JS=16,QS=32,K8=64,ex=Math.max;function If(e,t,n,a,r,u,c,v){var d=t&Y8;if(!d&&typeof e!="function")throw new TypeError(q8);var g=a?a.length:0;if(g||(t&=-97,a=r=void 0),c=c===void 0?c:ex(Vr(c),0),v=v===void 0?v:Vr(v),g-=r?r.length:0,t&K8){var _=a,b=r;a=r=void 0}var x=d?void 0:aE(e),A=[e,t,n,a,r,_,b,u,c,v];if(x&&X8(A,x),e=A[0],t=A[1],n=A[2],a=A[3],r=A[4],v=A[9]=A[9]===void 0?d?0:e.length:ex(A[9]-g,0),!v&&t&(ZS|JS)&&(t&=-25),!t||t==KS)var M=a8(e,t,n);else t==ZS||t==JS?M=U8(e,t,v):(t==QS||t==(KS|QS))&&!r.length?M=G8(e,t,n,a):M=f_.apply(void 0,A);var O=x?sM:pM;return hM(O(M,A),e,t)}var Z8=128;function mM(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,If(e,Z8,void 0,void 0,void 0,void 0,t)}var J8=Object.prototype,Q8=J8.hasOwnProperty,eL=Zm(function(e,t){if(ZD(t)||Lv(t)){i_(t,Ms(t),e);return}for(var n in t)Q8.call(t,n)&&JD(e,n,t[n])}),tL=Zm(function(e,t){i_(t,lh(t),e)}),yw=Zm(function(e,t,n,a){i_(t,lh(t),e,a)}),nL=Zm(function(e,t,n,a){i_(t,Ms(t),e,a)});function lE(e,t){for(var n=-1,a=t.length,r=Array(a),u=e==null;++n<a;)r[n]=u?void 0:LT(e,t[n]);return r}var rL=uh(lE),oL="[object DOMException]",iL="[object Error]";function uE(e){if(!$u(e))return!1;var t=Kd(e);return t==iL||t==oL||typeof e.message=="string"&&typeof e.name=="string"&&!Kw(e)}var yM=ro(function(e,t){try{return Iu(e,void 0,t)}catch(n){return uE(n)?n:new Error(n)}}),aL="Expected a function";function gM(e,t){var n;if(typeof t!="function")throw new TypeError(aL);return e=Vr(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var lL=1,uL=32,d_=ro(function(e,t,n){var a=lL;if(n.length){var r=qd(n,Vv(d_));a|=uL}return If(e,a,t,n,r)});d_.placeholder={};var sL=uh(function(e,t){return vc(t,function(n){n=a_(n),Jm(e,n,d_(e[n],e))}),e}),cL=1,fL=2,dL=32,sE=ro(function(e,t,n){var a=cL|fL;if(n.length){var r=qd(n,Vv(sE));a|=dL}return If(t,a,e,n,r)});sE.placeholder={};function Jd(e,t,n){var a=e.length;return n=n===void 0?a:n,!t&&n>=a?e:Ss(e,t,n)}var pL="\\ud800-\\udfff",hL="\\u0300-\\u036f",vL="\\ufe20-\\ufe2f",mL="\\u20d0-\\u20ff",yL=hL+vL+mL,gL="\\ufe0e\\ufe0f",_L="\\u200d",bL=RegExp("["+_L+pL+yL+gL+"]");function Gv(e){return bL.test(e)}function wL(e){return e.split("")}var _M="\\ud800-\\udfff",EL="\\u0300-\\u036f",OL="\\ufe20-\\ufe2f",SL="\\u20d0-\\u20ff",xL=EL+OL+SL,AL="\\ufe0e\\ufe0f",TL="["+_M+"]",gw="["+xL+"]",_w="\\ud83c[\\udffb-\\udfff]",ML="(?:"+gw+"|"+_w+")",bM="[^"+_M+"]",wM="(?:\\ud83c[\\udde6-\\uddff]){2}",EM="[\\ud800-\\udbff][\\udc00-\\udfff]",kL="\\u200d",OM=ML+"?",SM="["+AL+"]?",PL="(?:"+kL+"(?:"+[bM,wM,EM].join("|")+")"+SM+OM+")*",RL=SM+OM+PL,NL="(?:"+[bM+gw+"?",gw,wM,EM,TL].join("|")+")",CL=RegExp(_w+"(?="+_w+")|"+NL+RL,"g");function DL(e){return e.match(CL)||[]}function As(e){return Gv(e)?DL(e):wL(e)}function xM(e){return function(t){t=Io(t);var n=Gv(t)?As(t):void 0,a=n?n[0]:t.charAt(0),r=n?Jd(n,1).join(""):t.slice(1);return a[e]()+r}}var cE=xM("toUpperCase");function AM(e){return cE(Io(e).toLowerCase())}function fE(e){return function(t){return e==null?void 0:e[t]}}var jL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},IL=fE(jL),LL=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,FL="\\u0300-\\u036f",$L="\\ufe20-\\ufe2f",BL="\\u20d0-\\u20ff",UL=FL+$L+BL,VL="["+UL+"]",GL=RegExp(VL,"g");function TM(e){return e=Io(e),e&&e.replace(LL,IL).replace(GL,"")}var WL=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function zL(e){return e.match(WL)||[]}var HL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function XL(e){return HL.test(e)}var MM="\\ud800-\\udfff",qL="\\u0300-\\u036f",YL="\\ufe20-\\ufe2f",KL="\\u20d0-\\u20ff",ZL=qL+YL+KL,kM="\\u2700-\\u27bf",PM="a-z\\xdf-\\xf6\\xf8-\\xff",JL="\\xac\\xb1\\xd7\\xf7",QL="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",e4="\\u2000-\\u206f",t4=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",RM="A-Z\\xc0-\\xd6\\xd8-\\xde",n4="\\ufe0e\\ufe0f",NM=JL+QL+e4+t4,CM="['’]",tx="["+NM+"]",r4="["+ZL+"]",DM="\\d+",o4="["+kM+"]",jM="["+PM+"]",IM="[^"+MM+NM+DM+kM+PM+RM+"]",i4="\\ud83c[\\udffb-\\udfff]",a4="(?:"+r4+"|"+i4+")",l4="[^"+MM+"]",LM="(?:\\ud83c[\\udde6-\\uddff]){2}",FM="[\\ud800-\\udbff][\\udc00-\\udfff]",dv="["+RM+"]",u4="\\u200d",nx="(?:"+jM+"|"+IM+")",s4="(?:"+dv+"|"+IM+")",rx="(?:"+CM+"(?:d|ll|m|re|s|t|ve))?",ox="(?:"+CM+"(?:D|LL|M|RE|S|T|VE))?",$M=a4+"?",BM="["+n4+"]?",c4="(?:"+u4+"(?:"+[l4,LM,FM].join("|")+")"+BM+$M+")*",f4="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",d4="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",p4=BM+$M+c4,h4="(?:"+[o4,LM,FM].join("|")+")"+p4,v4=RegExp([dv+"?"+jM+"+"+rx+"(?="+[tx,dv,"$"].join("|")+")",s4+"+"+ox+"(?="+[tx,dv+nx,"$"].join("|")+")",dv+"?"+nx+"+"+rx,dv+"+"+ox,d4,f4,DM,h4].join("|"),"g");function m4(e){return e.match(v4)||[]}function UM(e,t,n){return e=Io(e),t=n?void 0:t,t===void 0?XL(e)?m4(e):zL(e):e.match(t)||[]}var y4="['’]",g4=RegExp(y4,"g");function Wv(e){return function(t){return aM(UM(TM(t).replace(g4,"")),e,"")}}var _4=Wv(function(e,t,n){return t=t.toLowerCase(),e+(n?AM(t):t)}),b4=ah.isFinite,w4=Math.min;function dE(e){var t=Math[e];return function(n,a){if(n=Pf(n),a=a==null?0:w4(Vr(a),292),a&&b4(n)){var r=(Io(n)+"e").split("e"),u=t(r[0]+"e"+(+r[1]+a));return r=(Io(u)+"e").split("e"),+(r[0]+"e"+(+r[1]-a))}return t(n)}}var E4=dE("ceil");function VM(e){var t=se(e);return t.__chain__=!0,t}var O4=Math.ceil,S4=Math.max;function x4(e,t,n){(n?mc(e,t,n):t===void 0)?t=1:t=S4(Vr(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var r=0,u=0,c=Array(O4(a/t));r<a;)c[u++]=Ss(e,r,r+=t);return c}function ph(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function A4(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=Pf(n),n=n===n?n:0),t!==void 0&&(t=Pf(t),t=t===t?t:0),ph(Pf(e),t,n)}var T4=1,M4=4;function k4(e,t){return t=typeof t=="function"?t:void 0,Fv(e,T4|M4,t)}var P4=4;function R4(e,t){return t=typeof t=="function"?t:void 0,Fv(e,P4,t)}function N4(){return new Lu(this.value(),this.__chain__)}function C4(e){for(var t=-1,n=e==null?0:e.length,a=0,r=[];++t<n;){var u=e[t];u&&(r[a++]=u)}return r}function D4(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Qm(Oi(n)?ju(n):[n],ks(t,1))}var j4="Expected a function";function I4(e){var t=e==null?0:e.length,n=Qr;return e=t?Na(e,function(a){if(typeof a[1]!="function")throw new TypeError(j4);return[n(a[0]),a[1]]}):[],ro(function(a){for(var r=-1;++r<t;){var u=e[r];if(Iu(u[0],this,a))return Iu(u[1],this,a)}})}function GM(e,t,n){var a=n.length;if(e==null)return!a;for(e=Object(e);a--;){var r=n[a],u=t[r],c=e[r];if(c===void 0&&!(r in e)||!u(c))return!1}return!0}function L4(e){var t=Ms(e);return function(n){return GM(n,e,t)}}var F4=1;function $4(e){return L4(Fv(e,F4))}function B4(e,t){return t==null||GM(e,t,Ms(t))}function U4(e,t,n,a){for(var r=-1,u=e==null?0:e.length;++r<u;){var c=e[r];t(a,c,n(c),e)}return a}function V4(e,t,n,a){return l_(e,function(r,u,c){t(a,r,n(r),c)}),a}function p_(e,t){return function(n,a){var r=Oi(n)?U4:V4,u=t?t():{};return r(n,e,Qr(a),u)}}var G4=Object.prototype,W4=G4.hasOwnProperty,z4=p_(function(e,t,n){W4.call(e,n)?++e[n]:Jm(e,n,1)});function H4(e,t){var n=Ym(e);return t==null?n:QD(n,t)}var X4=8;function pE(e,t,n){t=n?void 0:t;var a=If(e,X4,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=pE.placeholder,a}pE.placeholder={};var q4=16;function hE(e,t,n){t=n?void 0:t;var a=If(e,q4,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=hE.placeholder,a}hE.placeholder={};function Y4(e,t){return e==null||e!==e?t:e}function WM(e,t,n,a,r,u){return zd(e)&&zd(t)&&(u.set(t,e),FT(e,t,void 0,WM,u),u.delete(t)),e}var zM=Zm(function(e,t,n,a){FT(e,t,n,a)}),K4=ro(function(e){return e.push(void 0,WM),Iu(zM,void 0,e)}),Z4="Expected a function";function HM(e,t,n){if(typeof e!="function")throw new TypeError(Z4);return setTimeout(function(){e.apply(void 0,n)},t)}var J4=ro(function(e,t){return HM(e,1,t)}),Q4=ro(function(e,t,n){return HM(e,Pf(t)||0,n)}),e6=200;function ny(e,t,n,a){var r=-1,u=Yw,c=!0,v=e.length,d=[],g=t.length;if(!v)return d;n&&(t=Na(t,Nf(n))),a?(u=BT,c=!1):t.length>=e6&&(u=cw,c=!1,t=new $T(t));e:for(;++r<v;){var _=e[r],b=n==null?_:n(_);if(_=a||_!==0?_:0,c&&b===b){for(var x=g;x--;)if(t[x]===b)continue e;d.push(_)}else u(t,b,a)||d.push(_)}return d}var t6=ro(function(e,t){return ia(e)?ny(e,ks(t,1,ia,!0)):[]}),n6=ro(function(e,t){var n=xs(t);return ia(n)&&(n=void 0),ia(e)?ny(e,ks(t,1,ia,!0),Qr(n)):[]}),r6=ro(function(e,t){var n=xs(t);return ia(n)&&(n=void 0),ia(e)?ny(e,ks(t,1,ia,!0),void 0,n):[]}),o6=s_(function(e,t){return e/t},1);function i6(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Vr(t),Ss(e,t<0?0:t,a)):[]}function a6(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Vr(t),t=a-t,Ss(e,0,t<0?0:t)):[]}function h_(e,t,n,a){for(var r=e.length,u=a?r:-1;(a?u--:++u<r)&&t(e[u],u,e););return n?Ss(e,a?0:u,a?u+1:r):Ss(e,a?u+1:0,a?r:u)}function l6(e,t){return e&&e.length?h_(e,Qr(t),!0,!0):[]}function u6(e,t){return e&&e.length?h_(e,Qr(t),!0):[]}function s6(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var XM=ej(!0);function vE(e,t){return e&&XM(e,t,Ms)}var qM=tj(vE,!0);function c6(e,t){var n=Oi(e)?s6:qM;return n(e,dh(t))}function f6(e,t,n){e=Io(e),t=Os(t);var a=e.length;n=n===void 0?a:ph(Vr(n),0,a);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function d6(e,t){return Na(t,function(n){return[n,e[n]]})}function p6(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=[a,a]}),n}var h6="[object Map]",v6="[object Set]";function YM(e){return function(t){var n=u_(t);return n==h6?UT(t):n==v6?p6(t):d6(t,e(t))}}var m6=YM(Ms),y6=YM(lh),g6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_6=fE(g6),KM=/[&<>"']/g,b6=RegExp(KM.source);function ZM(e){return e=Io(e),e&&b6.test(e)?e.replace(KM,_6):e}var JM=/[\\^$.*+?()[\]{}|]/g,w6=RegExp(JM.source);function E6(e){return e=Io(e),e&&w6.test(e)?e.replace(JM,"\\$&"):e}function QM(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}function O6(e,t){var n=!0;return l_(e,function(a,r,u){return n=!!t(a,r,u),n}),n}function S6(e,t,n){var a=Oi(e)?QM:O6;return n&&mc(e,t,n)&&(t=void 0),a(e,Qr(t))}var x6=4294967295;function ek(e){return e?ph(Vr(e),0,x6):0}function A6(e,t,n,a){var r=e.length;for(n=Vr(n),n<0&&(n=-n>r?0:r+n),a=a===void 0||a>r?r:Vr(a),a<0&&(a+=r),a=n>a?0:ek(a);n<a;)e[n++]=t;return e}function T6(e,t,n,a){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&mc(e,t,n)&&(n=0,a=r),A6(e,t,n,a)):[]}function tk(e,t,n){var a;return n(e,function(r,u,c){if(t(r,u,c))return a=u,!1}),a}function M6(e,t){return tk(e,Qr(t),sh)}var k6=NI(VT);function P6(e,t){return tk(e,Qr(t),vE)}function R6(e){return e&&e.length?e[0]:void 0}var N6=1/0;function C6(e,t){return ks(Zw(e,t),N6)}function D6(e,t,n){return n=n===void 0?1:Vr(n),ks(Zw(e,t),n)}function j6(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Vr(t),ks(e,t)):[]}var I6=512;function L6(e){return If(e,I6)}var F6=dE("floor"),$6="Expected a function",B6=8,U6=32,V6=128,G6=256;function nk(e){return uh(function(t){var n=t.length,a=n,r=Lu.prototype.thru;for(e&&t.reverse();a--;){var u=t[a];if(typeof u!="function")throw new TypeError($6);if(r&&!c&&yg(u)=="wrapper")var c=new Lu([],!0)}for(a=c?a:n;++a<n;){u=t[a];var v=yg(u),d=v=="wrapper"?aE(u):void 0;d&&mw(d[0])&&d[1]==(V6|B6|U6|G6)&&!d[4].length&&d[9]==1?c=c[yg(d[0])].apply(c,d[3]):c=u.length==1&&mw(u)?c[v]():c.thru(u)}return function(){var g=arguments,_=g[0];if(c&&g.length==1&&Oi(_))return c.plant(_).value();for(var b=0,x=n?t[b].apply(this,g):_;++b<n;)x=t[b].call(this,x);return x}})}var W6=nk(),z6=nk(!0);function H6(e,t){return e==null?e:XM(e,dh(t),lh)}function X6(e,t){return e&&vE(e,dh(t))}function v_(e,t){return $v(t,function(n){return Bv(e[n])})}function q6(e){return e==null?[]:v_(e,Ms(e))}function Y6(e){return e==null?[]:v_(e,lh(e))}var K6=Object.prototype,Z6=K6.hasOwnProperty,J6=p_(function(e,t,n){Z6.call(e,n)?e[n].push(t):Jm(e,n,[t])});function m_(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Pf(t),n=Pf(n)),e(t,n)}}var Q6=m_(uM),e5=m_(function(e,t){return e>=t}),t5=Math.max,n5=Math.min;function r5(e,t,n){return e>=n5(t,n)&&e<t5(t,n)}function o5(e,t,n){return t=Um(t),n===void 0?(n=t,t=0):n=Um(n),e=Pf(e),r5(e,t,n)}var i5="[object String]";function y_(e){return typeof e=="string"||!Oi(e)&&$u(e)&&Kd(e)==i5}var a5=Math.max;function l5(e,t,n,a){e=Lv(e)?e:Uv(e),n=n&&!a?Vr(n):0;var r=e.length;return n<0&&(n=a5(r+n,0)),y_(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&ey(e,t,n)>-1}var u5=Math.max;function s5(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:Vr(n);return r<0&&(r=u5(a+r,0)),ey(e,t,r)}function c5(e){var t=e==null?0:e.length;return t?Ss(e,0,-1):[]}var f5=Math.min;function mE(e,t,n){for(var a=n?BT:Yw,r=e[0].length,u=e.length,c=u,v=Array(u),d=1/0,g=[];c--;){var _=e[c];c&&t&&(_=Na(_,Nf(t))),d=f5(_.length,d),v[c]=!n&&(t||r>=120&&_.length>=120)?new $T(c&&_):void 0}_=e[0];var b=-1,x=v[0];e:for(;++b<r&&g.length<d;){var A=_[b],M=t?t(A):A;if(A=n||A!==0?A:0,!(x?cw(x,M):a(g,M,n))){for(c=u;--c;){var O=v[c];if(!(O?cw(O,M):a(e[c],M,n)))continue e}x&&x.push(M),g.push(A)}}return g}function yE(e){return ia(e)?e:[]}var d5=ro(function(e){var t=Na(e,yE);return t.length&&t[0]===e[0]?mE(t):[]}),p5=ro(function(e){var t=xs(e),n=Na(e,yE);return t===xs(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?mE(n,Qr(t)):[]}),h5=ro(function(e){var t=xs(e),n=Na(e,yE);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?mE(n,void 0,t):[]});function v5(e,t,n,a){return sh(e,function(r,u,c){t(a,n(r),u,c)}),a}function rk(e,t){return function(n,a){return v5(n,e,t(a),{})}}var m5=Object.prototype,y5=m5.toString,g5=rk(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=y5.call(t)),e[t]=n},GT(ih)),ok=Object.prototype,_5=ok.hasOwnProperty,b5=ok.toString,w5=rk(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=b5.call(t)),_5.call(e,t)?e[t].push(n):e[t]=[n]},Qr);function ry(e,t,n){t=WT(t,e),e=nj(e,t);var a=e==null?e:e[a_(xs(t))];return a==null?void 0:Iu(a,e,n)}var E5=ro(ry),O5=ro(function(e,t,n){var a=-1,r=typeof t=="function",u=Lv(e)?Array(e.length):[];return l_(e,function(c){u[++a]=r?Iu(t,c,n):ry(c,t,n)}),u}),S5="[object ArrayBuffer]";function x5(e){return $u(e)&&Kd(e)==S5}var ix=Pv&&Pv.isArrayBuffer,A5=ix?Nf(ix):x5,T5="[object Boolean]";function M5(e){return e===!0||e===!1||$u(e)&&Kd(e)==T5}var k5="[object Date]";function P5(e){return $u(e)&&Kd(e)==k5}var ax=Pv&&Pv.isDate,R5=ax?Nf(ax):P5;function N5(e){return $u(e)&&e.nodeType===1&&!Kw(e)}function C5(e,t,n){n=typeof n=="function"?n:void 0;var a=n?n(e,t):void 0;return a===void 0?rj(e,t,void 0,n):!!a}var D5=ah.isFinite;function j5(e){return typeof e=="number"&&D5(e)}function ik(e){return typeof e=="number"&&e==Vr(e)}function I5(e,t){return e===t||zT(e,t,HT(t))}function L5(e,t,n){return n=typeof n=="function"?n:void 0,zT(e,t,HT(t),n)}var F5="[object Number]";function ak(e){return typeof e=="number"||$u(e)&&Kd(e)==F5}function $5(e){return ak(e)&&e!=+e}var B5=oj?Bv:XT,U5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function V5(e){if(B5(e))throw new Error(U5);return ij(e)}var G5="[object RegExp]";function W5(e){return $u(e)&&Kd(e)==G5}var lx=Pv&&Pv.isRegExp,gE=lx?Nf(lx):W5,ux=9007199254740991;function z5(e){return ik(e)&&e>=-ux&&e<=ux}var H5="[object WeakMap]";function X5(e){return $u(e)&&u_(e)==H5}var q5="[object WeakSet]";function Y5(e){return $u(e)&&Kd(e)==q5}var K5=1;function Z5(e){return Qr(typeof e=="function"?e:Fv(e,K5))}var J5=Array.prototype,Q5=J5.join;function eF(e,t){return e==null?"":Q5.call(e,t)}var tF=Wv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),nF=p_(function(e,t,n){Jm(e,n,t)});function rF(e,t,n){for(var a=n+1;a--;)if(e[a]===t)return a;return a}var oF=Math.max,iF=Math.min;function aF(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=a;return n!==void 0&&(r=Vr(n),r=r<0?oF(a+r,0):iF(r,a-1)),t===t?rF(e,t,r):aj(e,lj,r,!0)}var lF=Wv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),uF=xM("toLowerCase"),sF=m_(CI),cF=m_(function(e,t){return e<=t});function fF(e,t){var n={};return t=Qr(t),sh(e,function(a,r,u){Jm(n,t(a,r,u),a)}),n}var dF=1;function pF(e){return uj(Fv(e,dF))}var hF=1;function vF(e,t){return sj(e,Fv(t,hF))}function mF(e,t){return e&&e.length?DI(e,Qr(t),uM):void 0}function _E(e,t){for(var n,a=-1,r=e.length;++a<r;){var u=t(e[a]);u!==void 0&&(n=n===void 0?u:n+u)}return n}var yF=NaN;function lk(e,t){var n=e==null?0:e.length;return n?_E(e,t)/n:yF}function gF(e){return lk(e,ih)}function _F(e,t){return lk(e,Qr(t))}var bF=ro(function(e,t){return function(n){return ry(n,e,t)}}),wF=ro(function(e,t){return function(n){return ry(e,n,t)}});function EF(e,t,n){var a=Ms(t),r=v_(t,a),u=!(zd(n)&&"chain"in n)||!!n.chain,c=Bv(e);return vc(r,function(v){var d=t[v];e[v]=d,c&&(e.prototype[v]=function(){var g=this.__chain__;if(u||g){var _=e(this.__wrapped__),b=_.__actions__=ju(this.__actions__);return b.push({func:d,args:arguments,thisArg:e}),_.__chain__=g,_}return d.apply(e,Qm([this.value()],arguments))})}),e}var OF=s_(function(e,t){return e*t},1),SF="Expected a function";function g_(e){if(typeof e!="function")throw new TypeError(SF);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function xF(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var AF="[object Map]",TF="[object Set]",w1=Pg?Pg.iterator:void 0;function uk(e){if(!e)return[];if(Lv(e))return y_(e)?As(e):ju(e);if(w1&&e[w1])return xF(e[w1]());var t=u_(e),n=t==AF?UT:t==TF?cj:Uv;return n(e)}function MF(){this.__values__===void 0&&(this.__values__=uk(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function sk(e,t){var n=e.length;if(n)return t+=t<0?n:0,Km(t,n)?e[t]:void 0}function kF(e,t){return e&&e.length?sk(e,Vr(t)):void 0}function PF(e){return e=Vr(e),ro(function(t){return sk(t,e)})}function ck(e,t){if(e==null)return{};var n=Na(fj(e),function(a){return[a]});return t=Qr(t),dj(e,n,function(a,r){return t(a,r[0])})}function RF(e,t){return ck(e,g_(Qr(t)))}function NF(e){return gM(2,e)}function CF(e,t,n,a){return e==null?[]:(Oi(t)||(t=t==null?[]:[t]),n=a?void 0:n,Oi(n)||(n=n==null?[]:[n]),jI(e,t,n))}function bE(e){return uh(function(t){return t=Na(t,Nf(Qr)),ro(function(n){var a=this;return e(t,function(r){return Iu(r,a,n)})})})}var DF=bE(Na),jF=ro,IF=Math.min,LF=jF(function(e,t){t=t.length==1&&Oi(t[0])?Na(t[0],Nf(Qr)):Na(ks(t,1),Nf(Qr));var n=t.length;return ro(function(a){for(var r=-1,u=IF(a.length,n);++r<u;)a[r]=t[r].call(this,a[r]);return Iu(e,this,a)})}),FF=bE(QM),$F=bE(qT),BF=9007199254740991,UF=Math.floor;function bw(e,t){var n="";if(!e||t<1||t>BF)return n;do t%2&&(n+=e),t=UF(t/2),t&&(e+=e);while(t);return n}var VF=YT("length"),fk="\\ud800-\\udfff",GF="\\u0300-\\u036f",WF="\\ufe20-\\ufe2f",zF="\\u20d0-\\u20ff",HF=GF+WF+zF,XF="\\ufe0e\\ufe0f",qF="["+fk+"]",ww="["+HF+"]",Ew="\\ud83c[\\udffb-\\udfff]",YF="(?:"+ww+"|"+Ew+")",dk="[^"+fk+"]",pk="(?:\\ud83c[\\udde6-\\uddff]){2}",hk="[\\ud800-\\udbff][\\udc00-\\udfff]",KF="\\u200d",vk=YF+"?",mk="["+XF+"]?",ZF="(?:"+KF+"(?:"+[dk,pk,hk].join("|")+")"+mk+vk+")*",JF=mk+vk+ZF,QF="(?:"+[dk+ww+"?",ww,pk,hk,qF].join("|")+")",sx=RegExp(Ew+"(?="+Ew+")|"+QF+JF,"g");function e$(e){for(var t=sx.lastIndex=0;sx.test(e);)++t;return t}function zv(e){return Gv(e)?e$(e):VF(e)}var t$=Math.ceil;function Ng(e,t){t=t===void 0?" ":Os(t);var n=t.length;if(n<2)return n?bw(t,e):t;var a=bw(t,t$(e/zv(t)));return Gv(t)?Jd(As(a),0,e).join(""):a.slice(0,e)}var n$=Math.ceil,r$=Math.floor;function o$(e,t,n){e=Io(e),t=Vr(t);var a=t?zv(e):0;if(!t||a>=t)return e;var r=(t-a)/2;return Ng(r$(r),n)+e+Ng(n$(r),n)}function i$(e,t,n){e=Io(e),t=Vr(t);var a=t?zv(e):0;return t&&a<t?e+Ng(t-a,n):e}function a$(e,t,n){e=Io(e),t=Vr(t);var a=t?zv(e):0;return t&&a<t?Ng(t-a,n)+e:e}var l$=/^\s+/,u$=ah.parseInt;function s$(e,t,n){return n||t==null?t=0:t&&(t=+t),u$(Io(e).replace(l$,""),t||0)}var c$=32,__=ro(function(e,t){var n=qd(t,Vv(__));return If(e,c$,void 0,t,n)});__.placeholder={};var f$=64,wE=ro(function(e,t){var n=qd(t,Vv(wE));return If(e,f$,void 0,t,n)});wE.placeholder={};var d$=p_(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function p$(e){for(var t,n=this;n instanceof c_;){var a=dM(n);a.__index__=0,a.__values__=void 0,t?r.__wrapped__=a:t=a;var r=a;n=n.__wrapped__}return r.__wrapped__=e,t}function h$(e){return function(t){return e==null?void 0:KT(e,t)}}function v$(e,t,n,a){for(var r=n-1,u=e.length;++r<u;)if(a(e[r],t))return r;return-1}var m$=Array.prototype,cx=m$.splice;function EE(e,t,n,a){var r=a?v$:ey,u=-1,c=t.length,v=e;for(e===t&&(t=ju(t)),n&&(v=Na(e,Nf(n)));++u<c;)for(var d=0,g=t[u],_=n?n(g):g;(d=r(v,_,d,a))>-1;)v!==e&&cx.call(v,d,1),cx.call(e,d,1);return e}function yk(e,t){return e&&e.length&&t&&t.length?EE(e,t):e}var y$=ro(yk);function g$(e,t,n){return e&&e.length&&t&&t.length?EE(e,t,Qr(n)):e}function _$(e,t,n){return e&&e.length&&t&&t.length?EE(e,t,void 0,n):e}var b$=Array.prototype,w$=b$.splice;function gk(e,t){for(var n=e?t.length:0,a=n-1;n--;){var r=t[n];if(n==a||r!==u){var u=r;Km(r)?w$.call(e,r,1):ZT(e,r)}}return e}var E$=uh(function(e,t){var n=e==null?0:e.length,a=lE(e,t);return gk(e,Na(t,function(r){return Km(r,n)?+r:r}).sort(II)),a}),O$=Math.floor,S$=Math.random;function OE(e,t){return e+O$(S$()*(t-e+1))}var x$=parseFloat,A$=Math.min,T$=Math.random;function M$(e,t,n){if(n&&typeof n!="boolean"&&mc(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Um(e),t===void 0?(t=e,e=0):t=Um(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var r=T$();return A$(e+r*(t-e+x$("1e-"+((r+"").length-1))),t)}return OE(e,t)}var k$=LI(!0),P$=256,R$=uh(function(e,t){return If(e,P$,void 0,void 0,void 0,t)});function N$(e,t,n,a){var r=e==null?0:e.length;for(a&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function C$(e,t,n){var a=Oi(e)?N$:AI,r=arguments.length<3;return a(e,Qr(t),n,r,qM)}function D$(e,t){var n=Oi(e)?$v:TI;return n(e,g_(Qr(t)))}function j$(e,t){var n=[];if(!(e&&e.length))return n;var a=-1,r=[],u=e.length;for(t=Qr(t);++a<u;){var c=e[a];t(c,a,e)&&(n.push(c),r.push(a))}return gk(e,r),n}function I$(e,t,n){return(n?mc(e,t,n):t===void 0)?t=1:t=Vr(t),bw(Io(e),t)}function L$(){var e=arguments,t=Io(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var F$="Expected a function";function $$(e,t){if(typeof e!="function")throw new TypeError(F$);return t=t===void 0?t:Vr(t),ro(e,t)}function B$(e,t,n){t=WT(t,e);var a=-1,r=t.length;for(r||(r=1,e=void 0);++a<r;){var u=e==null?void 0:e[a_(t[a])];u===void 0&&(a=r,u=n),e=Bv(u)?u.call(e):u}return e}var U$=Array.prototype,V$=U$.reverse;function Ow(e){return e==null?e:V$.call(e)}var G$=dE("round");function _k(e){var t=e.length;return t?e[OE(0,t-1)]:void 0}function W$(e){return _k(Uv(e))}function z$(e){var t=Oi(e)?_k:W$;return t(e)}function b_(e,t){var n=-1,a=e.length,r=a-1;for(t=t===void 0?a:t;++n<t;){var u=OE(n,r),c=e[u];e[u]=e[n],e[n]=c}return e.length=t,e}function H$(e,t){return b_(ju(e),ph(t,0,e.length))}function X$(e,t){var n=Uv(e);return b_(n,ph(t,0,n.length))}function q$(e,t,n){(n?mc(e,t,n):t===void 0)?t=1:t=Vr(t);var a=Oi(e)?H$:X$;return a(e,t)}function Y$(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:Jw(e,t,n,a)}function K$(e){return b_(ju(e))}function Z$(e){return b_(Uv(e))}function J$(e){var t=Oi(e)?K$:Z$;return t(e)}var Q$="[object Map]",e9="[object Set]";function t9(e){if(e==null)return 0;if(Lv(e))return y_(e)?zv(e):e.length;var t=u_(e);return t==Q$||t==e9?e.size:pj(e).length}function n9(e,t,n){var a=e==null?0:e.length;return a?(n&&typeof n!="number"&&mc(e,t,n)?(t=0,n=a):(t=t==null?0:Vr(t),n=n===void 0?a:Vr(n)),Ss(e,t,n)):[]}var r9=Wv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function o9(e,t){var n;return l_(e,function(a,r,u){return n=t(a,r,u),!n}),!!n}function i9(e,t,n){var a=Oi(e)?qT:o9;return n&&mc(e,t,n)&&(t=void 0),a(e,Qr(t))}var a9=4294967295,l9=a9-1,u9=Math.floor,s9=Math.min;function SE(e,t,n,a){var r=0,u=e==null?0:e.length;if(u===0)return 0;t=n(t);for(var c=t!==t,v=t===null,d=kv(t),g=t===void 0;r<u;){var _=u9((r+u)/2),b=n(e[_]),x=b!==void 0,A=b===null,M=b===b,O=kv(b);if(c)var S=a||M;else g?S=M&&(a||x):v?S=M&&x&&(a||!A):d?S=M&&x&&!A&&(a||!O):A||O?S=!1:S=a?b<=t:b<t;S?r=_+1:u=_}return s9(u,l9)}var c9=4294967295,f9=c9>>>1;function w_(e,t,n){var a=0,r=e==null?a:e.length;if(typeof t=="number"&&t===t&&r<=f9){for(;a<r;){var u=a+r>>>1,c=e[u];c!==null&&!kv(c)&&(n?c<=t:c<t)?a=u+1:r=u}return r}return SE(e,t,ih,n)}function d9(e,t){return w_(e,t)}function p9(e,t,n){return SE(e,t,Qr(n))}function h9(e,t){var n=e==null?0:e.length;if(n){var a=w_(e,t);if(a<n&&ty(e[a],t))return a}return-1}function v9(e,t){return w_(e,t,!0)}function m9(e,t,n){return SE(e,t,Qr(n),!0)}function y9(e,t){var n=e==null?0:e.length;if(n){var a=w_(e,t,!0)-1;if(ty(e[a],t))return a}return-1}function bk(e,t){for(var n=-1,a=e.length,r=0,u=[];++n<a;){var c=e[n],v=t?t(c):c;if(!n||!ty(v,d)){var d=v;u[r++]=c===0?0:c}}return u}function g9(e){return e&&e.length?bk(e):[]}function _9(e,t){return e&&e.length?bk(e,Qr(t)):[]}var b9=4294967295;function w9(e,t,n){return n&&typeof n!="number"&&mc(e,t,n)&&(t=n=void 0),n=n===void 0?b9:n>>>0,n?(e=Io(e),e&&(typeof t=="string"||t!=null&&!gE(t))&&(t=Os(t),!t&&Gv(e))?Jd(As(e),0,n):e.split(t,n)):[]}var E9="Expected a function",O9=Math.max;function S9(e,t){if(typeof e!="function")throw new TypeError(E9);return t=t==null?0:O9(Vr(t),0),ro(function(n){var a=n[t],r=Jd(n,0,t);return a&&Qm(r,a),Iu(e,this,r)})}var x9=Wv(function(e,t,n){return e+(n?" ":"")+cE(t)});function A9(e,t,n){return e=Io(e),n=n==null?0:ph(Vr(n),0,e.length),t=Os(t),e.slice(n,n+t.length)==t}function T9(){return{}}function M9(){return""}function k9(){return!0}var P9=s_(function(e,t){return e-t},0);function R9(e){return e&&e.length?_E(e,ih):0}function N9(e,t){return e&&e.length?_E(e,Qr(t)):0}function C9(e){var t=e==null?0:e.length;return t?Ss(e,1,t):[]}function D9(e,t,n){return e&&e.length?(t=n||t===void 0?1:Vr(t),Ss(e,0,t<0?0:t)):[]}function j9(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Vr(t),t=a-t,Ss(e,t<0?0:t,a)):[]}function I9(e,t){return e&&e.length?h_(e,Qr(t),!1,!0):[]}function L9(e,t){return e&&e.length?h_(e,Qr(t)):[]}function F9(e,t){return t(e),e}var wk=Object.prototype,$9=wk.hasOwnProperty;function fx(e,t,n,a){return e===void 0||ty(e,wk[n])&&!$9.call(a,n)?t:e}var B9={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function U9(e){return"\\"+B9[e]}var Ek=/<%=([\s\S]+?)%>/g,V9=/<%-([\s\S]+?)%>/g,G9=/<%([\s\S]+?)%>/g,Sw={escape:V9,evaluate:G9,interpolate:Ek,variable:"",imports:{_:{escape:ZM}}},W9="Invalid `variable` option passed into `_.template`",z9=/\b__p \+= '';/g,H9=/\b(__p \+=) '' \+/g,X9=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q9=/[()=,{}\[\]\/\s]/,Y9=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ag=/($^)/,K9=/['\n\r\u2028\u2029\\]/g,Z9=Object.prototype,dx=Z9.hasOwnProperty;function J9(e,t,n){var a=Sw.imports._.templateSettings||Sw;n&&mc(e,t,n)&&(t=void 0),e=Io(e),t=yw({},t,a,fx);var r=yw({},t.imports,a.imports,fx),u=Ms(r),c=lM(r,u),v,d,g=0,_=t.interpolate||ag,b="__p += '",x=RegExp((t.escape||ag).source+"|"+_.source+"|"+(_===Ek?Y9:ag).source+"|"+(t.evaluate||ag).source+"|$","g"),A=dx.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(x,function(S,j,D,z,U,L){return D||(D=z),b+=e.slice(g,L).replace(K9,U9),j&&(v=!0,b+=`' +
__e(`+j+`) +
'`),U&&(d=!0,b+=`';
`+U+`;
__p += '`),D&&(b+=`' +
((__t = (`+D+`)) == null ? '' : __t) +
'`),g=L+S.length,S}),b+=`';
`;var M=dx.call(t,"variable")&&t.variable;if(!M)b=`with (obj) {
`+b+`
}
`;else if(q9.test(M))throw new Error(W9);b=(d?b.replace(z9,""):b).replace(H9,"$1").replace(X9,"$1;"),b="function("+(M||"obj")+`) {
`+(M?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(d?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var O=yM(function(){return Function(u,A+"return "+b).apply(void 0,c)});if(O.source=b,uE(O))throw O;return O}function E_(e,t){return t(e)}var Q9=9007199254740991,E1=4294967295,e7=Math.min;function t7(e,t){if(e=Vr(e),e<1||e>Q9)return[];var n=E1,a=e7(e,E1);t=dh(t),e-=E1;for(var r=JT(a,t);++n<e;)t(n);return r}function n7(){return this}function Ok(e,t){var n=e;return n instanceof Jr&&(n=n.value()),aM(t,function(a,r){return r.func.apply(r.thisArg,Qm([a],r.args))},n)}function r7(){return Ok(this.__wrapped__,this.__actions__)}function o7(e){return Io(e).toLowerCase()}function i7(e){return Oi(e)?Na(e,a_):kv(e)?[e]:ju(hj(Io(e)))}var px=9007199254740991;function a7(e){return e?ph(Vr(e),-px,px):e===0?e:0}function l7(e){return Io(e).toUpperCase()}function u7(e,t,n){var a=Oi(e),r=a||QT(e)||eM(e);if(t=Qr(t),n==null){var u=e&&e.constructor;r?n=a?new u:[]:zd(e)?n=Bv(u)?Ym(vj(e)):{}:n={}}return(r?vc:sh)(e,function(c,v,d){return t(n,c,v,d)}),n}function Sk(e,t){for(var n=e.length;n--&&ey(t,e[n],0)>-1;);return n}function xk(e,t){for(var n=-1,a=e.length;++n<a&&ey(t,e[n],0)>-1;);return n}function s7(e,t,n){if(e=Io(e),e&&(n||t===void 0))return mj(e);if(!e||!(t=Os(t)))return e;var a=As(e),r=As(t),u=xk(a,r),c=Sk(a,r)+1;return Jd(a,u,c).join("")}function c7(e,t,n){if(e=Io(e),e&&(n||t===void 0))return e.slice(0,yj(e)+1);if(!e||!(t=Os(t)))return e;var a=As(e),r=Sk(a,As(t))+1;return Jd(a,0,r).join("")}var f7=/^\s+/;function d7(e,t,n){if(e=Io(e),e&&(n||t===void 0))return e.replace(f7,"");if(!e||!(t=Os(t)))return e;var a=As(e),r=xk(a,As(t));return Jd(a,r).join("")}var p7=30,h7="...",v7=/\w*$/;function m7(e,t){var n=p7,a=h7;if(zd(t)){var r="separator"in t?t.separator:r;n="length"in t?Vr(t.length):n,a="omission"in t?Os(t.omission):a}e=Io(e);var u=e.length;if(Gv(e)){var c=As(e);u=c.length}if(n>=u)return e;var v=n-zv(a);if(v<1)return a;var d=c?Jd(c,0,v).join(""):e.slice(0,v);if(r===void 0)return d+a;if(c&&(v+=d.length-v),gE(r)){if(e.slice(v).search(r)){var g,_=d;for(r.global||(r=RegExp(r.source,Io(v7.exec(r))+"g")),r.lastIndex=0;g=r.exec(_);)var b=g.index;d=d.slice(0,b===void 0?v:b)}}else if(e.indexOf(Os(r),v)!=v){var x=d.lastIndexOf(r);x>-1&&(d=d.slice(0,x))}return d+a}function y7(e){return mM(e,1)}var g7={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_7=fE(g7),Ak=/&(?:amp|lt|gt|quot|#39);/g,b7=RegExp(Ak.source);function w7(e){return e=Io(e),e&&b7.test(e)?e.replace(Ak,_7):e}var E7=ro(function(e){var t=xs(e);return ia(t)&&(t=void 0),eh(ks(e,1,ia,!0),Qr(t))}),O7=ro(function(e){var t=xs(e);return t=typeof t=="function"?t:void 0,eh(ks(e,1,ia,!0),void 0,t)});function S7(e){return e&&e.length?eh(e):[]}function x7(e,t){return e&&e.length?eh(e,Qr(t)):[]}function A7(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?eh(e,void 0,t):[]}function T7(e,t){return e==null?!0:ZT(e,t)}var M7=Math.max;function xE(e){if(!(e&&e.length))return[];var t=0;return e=$v(e,function(n){if(ia(n))return t=M7(n.length,t),!0}),JT(t,function(n){return Na(e,YT(n))})}function Tk(e,t){if(!(e&&e.length))return[];var n=xE(e);return t==null?n:Na(n,function(a){return Iu(t,void 0,a)})}function Mk(e,t,n,a){return Jw(e,t,n(KT(e,t)),a)}function k7(e,t,n){return e==null?e:Mk(e,t,dh(n))}function P7(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:Mk(e,t,dh(n),a)}var R7=Wv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});function N7(e){return e==null?[]:lM(e,lh(e))}var C7=ro(function(e,t){return ia(e)?ny(e,t):[]});function D7(e,t){return __(dh(t),e)}var j7=uh(function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,r=function(u){return lE(u,e)};return t>1||this.__actions__.length||!(a instanceof Jr)||!Km(n)?this.thru(r):(a=a.slice(n,+n+(t?1:0)),a.__actions__.push({func:E_,args:[r],thisArg:void 0}),new Lu(a,this.__chain__).thru(function(u){return t&&!u.length&&u.push(void 0),u}))});function I7(){return VM(this)}function L7(){var e=this.__wrapped__;if(e instanceof Jr){var t=e;return this.__actions__.length&&(t=new Jr(this)),t=t.reverse(),t.__actions__.push({func:E_,args:[Ow],thisArg:void 0}),new Lu(t,this.__chain__)}return this.thru(Ow)}function AE(e,t,n){var a=e.length;if(a<2)return a?eh(e[0]):[];for(var r=-1,u=Array(a);++r<a;)for(var c=e[r],v=-1;++v<a;)v!=r&&(u[r]=ny(u[r]||c,e[v],t,n));return eh(ks(u,1),t,n)}var F7=ro(function(e){return AE($v(e,ia))}),$7=ro(function(e){var t=xs(e);return ia(t)&&(t=void 0),AE($v(e,ia),Qr(t))}),B7=ro(function(e){var t=xs(e);return t=typeof t=="function"?t:void 0,AE($v(e,ia),void 0,t)}),U7=ro(xE);function V7(e,t){return FI(e||[],t||[],Jw)}var G7=ro(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,Tk(e,n)});const Ln={chunk:x4,compact:C4,concat:D4,difference:t6,differenceBy:n6,differenceWith:r6,drop:i6,dropRight:a6,dropRightWhile:l6,dropWhile:u6,fill:T6,findIndex:BI,findLastIndex:VT,flatten:gj,flattenDeep:_j,flattenDepth:j6,fromPairs:bj,head:R6,indexOf:s5,initial:c5,intersection:d5,intersectionBy:p5,intersectionWith:h5,join:eF,lastIndexOf:aF,nth:kF,pull:y$,pullAll:yk,pullAllBy:g$,pullAllWith:_$,pullAt:E$,remove:j$,reverse:Ow,slice:n9,sortedIndex:d9,sortedIndexBy:p9,sortedIndexOf:h9,sortedLastIndex:v9,sortedLastIndexBy:m9,sortedLastIndexOf:y9,sortedUniq:g9,sortedUniqBy:_9,tail:C9,take:D9,takeRight:j9,takeRightWhile:I9,takeWhile:L9,union:wj,unionBy:E7,unionWith:O7,uniq:S7,uniqBy:x7,uniqWith:A7,unzip:xE,unzipWith:Tk,without:C7,xor:F7,xorBy:$7,xorWith:B7,zip:U7,zipObject:$I,zipObjectDeep:V7,zipWith:G7},Lo={countBy:z4,every:S6,filter:MI,find:VI,findLast:k6,flatMap:Ej,flatMapDeep:C6,flatMapDepth:D6,forEach:kI,forEachRight:c6,groupBy:J6,includes:l5,invokeMap:O5,keyBy:nF,map:Zw,orderBy:CF,partition:d$,reduce:PI,reduceRight:C$,reject:D$,sample:z$,sampleSize:q$,shuffle:J$,size:t9,some:i9,sortBy:UI},W7={now:Oj},ji={after:o8,ary:mM,before:gM,bind:d_,bindKey:sE,curry:pE,curryRight:hE,debounce:Sj,defer:J4,delay:Q4,flip:L6,memoize:xj,once:NF,overArgs:LF,partial:__,partialRight:wE,rearg:R$,rest:$$,spread:S9,throttle:Aj,unary:y7,wrap:D7},cr={castArray:Tj,clone:kj,cloneDeep:Pj,cloneDeepWith:k4,cloneWith:R4,conformsTo:B4,eq:ty,gt:Q6,gte:e5,isArguments:Rj,isArrayBuffer:A5,isArrayLike:Lv,isArrayLikeObject:ia,isBoolean:M5,isBuffer:QT,isDate:R5,isElement:N5,isEmpty:Nj,isEqual:Cj,isEqualWith:C5,isError:uE,isFinite:j5,isFunction:Bv,isInteger:ik,isLength:Dj,isMap:jj,isMatch:I5,isMatchWith:L5,isNaN:$5,isNative:V5,isNil:Ij,isNull:Lj,isNumber:ak,isObjectLike:$u,isPlainObject:Kw,isRegExp:gE,isSafeInteger:z5,isSet:Fj,isString:y_,isSymbol:kv,isTypedArray:eM,isUndefined:$j,isWeakMap:X5,isWeakSet:Y5,lt:sF,lte:cF,toArray:uk,toFinite:Um,toLength:ek,toNumber:Pf,toPlainObject:Mj,toSafeInteger:a7,toString:Io},pl={add:n8,ceil:E4,divide:o6,floor:F6,max:GI,maxBy:mF,mean:gF,meanBy:_F,min:WI,minBy:zI,multiply:OF,round:G$,subtract:P9,sum:R9,sumBy:N9},TE={clamp:A4,inRange:o5,random:M$},Or={assign:eL,assignIn:tL,assignInWith:yw,assignWith:nL,at:rL,create:H4,defaults:HI,defaultsDeep:K4,findKey:M6,findLastKey:P6,forIn:qI,forInRight:H6,forOwn:YI,forOwnRight:X6,functions:q6,functionsIn:Y6,get:LT,has:RI,hasIn:Wj,invert:g5,invertBy:w5,invoke:E5,keysIn:lh,mapKeys:fF,mapValues:XI,merge:Bj,mergeWith:zM,omit:Uj,omitBy:RF,pick:Vj,pickBy:ck,result:B$,set:Gj,setWith:Y$,toPairs:m6,toPairsIn:y6,transform:u7,unset:T7,update:k7,updateWith:P7,values:Uv,valuesIn:N7},gc={at:j7,chain:VM,commit:N4,next:MF,plant:p$,reverse:L7,tap:F9,toIterator:n7,value:r7,wrapperChain:I7},mo={camelCase:_4,capitalize:AM,deburr:TM,endsWith:f6,escape:ZM,escapeRegExp:E6,kebabCase:tF,lowerCase:lF,lowerFirst:uF,pad:o$,padEnd:i$,padStart:a$,parseInt:s$,repeat:I$,replace:L$,snakeCase:r9,split:w9,startCase:x9,startsWith:A9,template:J9,templateSettings:Sw,toLower:o7,toUpper:l7,trim:s7,trimEnd:c7,trimStart:d7,truncate:m7,unescape:w7,upperCase:R7,upperFirst:cE,words:UM},So={attempt:yM,bindAll:sL,cond:I4,conforms:$4,constant:GT,defaultTo:Y4,flow:W6,flowRight:z6,iteratee:Z5,matches:pF,matchesProperty:vF,method:bF,methodOf:wF,noop:IT,nthArg:PF,over:DF,overEvery:FF,overSome:$F,property:zj,propertyOf:h$,range:KI,rangeRight:k$,stubArray:Hj,stubFalse:XT,stubObject:T9,stubString:M9,stubTrue:k9,times:t7,toPath:i7,uniqueId:ZI};function z7(){var e=new Jr(this.__wrapped__);return e.__actions__=ju(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ju(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ju(this.__views__),e}function H7(){if(this.__filtered__){var e=new Jr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var X7=Math.max,q7=Math.min;function Y7(e,t,n){for(var a=-1,r=n.length;++a<r;){var u=n[a],c=u.size;switch(u.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=q7(t,e+c);break;case"takeRight":e=X7(e,t-c);break}}return{start:e,end:t}}var K7=1,Z7=2,J7=Math.min;function Q7(){var e=this.__wrapped__.value(),t=this.__dir__,n=Oi(e),a=t<0,r=n?e.length:0,u=Y7(0,r,this.__views__),c=u.start,v=u.end,d=v-c,g=a?v:c-1,_=this.__iteratees__,b=_.length,x=0,A=J7(d,this.__takeCount__);if(!n||!a&&r==d&&A==d)return Ok(e,this.__actions__);var M=[];e:for(;d--&&x<A;){g+=t;for(var O=-1,S=e[g];++O<b;){var j=_[O],D=j.iteratee,z=j.type,U=D(S);if(z==Z7)S=U;else if(!U){if(z==K7)continue e;break e}}M[x++]=S}return M}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var eB="4.17.21",tB=2,nB=1,rB=3,kk=4294967295,oB=Array.prototype,iB=Object.prototype,Pk=iB.hasOwnProperty,hx=Pg?Pg.iterator:void 0,aB=Math.max,vx=Math.min,ME=function(e){return function(t,n,a){if(a==null){var r=zd(n),u=r&&Ms(n),c=u&&u.length&&v_(n,u);(c?c.length:r)||(a=n,n=t,t=this)}return e(t,n,a)}}(EF);se.after=ji.after;se.ary=ji.ary;se.assign=Or.assign;se.assignIn=Or.assignIn;se.assignInWith=Or.assignInWith;se.assignWith=Or.assignWith;se.at=Or.at;se.before=ji.before;se.bind=ji.bind;se.bindAll=So.bindAll;se.bindKey=ji.bindKey;se.castArray=cr.castArray;se.chain=gc.chain;se.chunk=Ln.chunk;se.compact=Ln.compact;se.concat=Ln.concat;se.cond=So.cond;se.conforms=So.conforms;se.constant=So.constant;se.countBy=Lo.countBy;se.create=Or.create;se.curry=ji.curry;se.curryRight=ji.curryRight;se.debounce=ji.debounce;se.defaults=Or.defaults;se.defaultsDeep=Or.defaultsDeep;se.defer=ji.defer;se.delay=ji.delay;se.difference=Ln.difference;se.differenceBy=Ln.differenceBy;se.differenceWith=Ln.differenceWith;se.drop=Ln.drop;se.dropRight=Ln.dropRight;se.dropRightWhile=Ln.dropRightWhile;se.dropWhile=Ln.dropWhile;se.fill=Ln.fill;se.filter=Lo.filter;se.flatMap=Lo.flatMap;se.flatMapDeep=Lo.flatMapDeep;se.flatMapDepth=Lo.flatMapDepth;se.flatten=Ln.flatten;se.flattenDeep=Ln.flattenDeep;se.flattenDepth=Ln.flattenDepth;se.flip=ji.flip;se.flow=So.flow;se.flowRight=So.flowRight;se.fromPairs=Ln.fromPairs;se.functions=Or.functions;se.functionsIn=Or.functionsIn;se.groupBy=Lo.groupBy;se.initial=Ln.initial;se.intersection=Ln.intersection;se.intersectionBy=Ln.intersectionBy;se.intersectionWith=Ln.intersectionWith;se.invert=Or.invert;se.invertBy=Or.invertBy;se.invokeMap=Lo.invokeMap;se.iteratee=So.iteratee;se.keyBy=Lo.keyBy;se.keys=Ms;se.keysIn=Or.keysIn;se.map=Lo.map;se.mapKeys=Or.mapKeys;se.mapValues=Or.mapValues;se.matches=So.matches;se.matchesProperty=So.matchesProperty;se.memoize=ji.memoize;se.merge=Or.merge;se.mergeWith=Or.mergeWith;se.method=So.method;se.methodOf=So.methodOf;se.mixin=ME;se.negate=g_;se.nthArg=So.nthArg;se.omit=Or.omit;se.omitBy=Or.omitBy;se.once=ji.once;se.orderBy=Lo.orderBy;se.over=So.over;se.overArgs=ji.overArgs;se.overEvery=So.overEvery;se.overSome=So.overSome;se.partial=ji.partial;se.partialRight=ji.partialRight;se.partition=Lo.partition;se.pick=Or.pick;se.pickBy=Or.pickBy;se.property=So.property;se.propertyOf=So.propertyOf;se.pull=Ln.pull;se.pullAll=Ln.pullAll;se.pullAllBy=Ln.pullAllBy;se.pullAllWith=Ln.pullAllWith;se.pullAt=Ln.pullAt;se.range=So.range;se.rangeRight=So.rangeRight;se.rearg=ji.rearg;se.reject=Lo.reject;se.remove=Ln.remove;se.rest=ji.rest;se.reverse=Ln.reverse;se.sampleSize=Lo.sampleSize;se.set=Or.set;se.setWith=Or.setWith;se.shuffle=Lo.shuffle;se.slice=Ln.slice;se.sortBy=Lo.sortBy;se.sortedUniq=Ln.sortedUniq;se.sortedUniqBy=Ln.sortedUniqBy;se.split=mo.split;se.spread=ji.spread;se.tail=Ln.tail;se.take=Ln.take;se.takeRight=Ln.takeRight;se.takeRightWhile=Ln.takeRightWhile;se.takeWhile=Ln.takeWhile;se.tap=gc.tap;se.throttle=ji.throttle;se.thru=E_;se.toArray=cr.toArray;se.toPairs=Or.toPairs;se.toPairsIn=Or.toPairsIn;se.toPath=So.toPath;se.toPlainObject=cr.toPlainObject;se.transform=Or.transform;se.unary=ji.unary;se.union=Ln.union;se.unionBy=Ln.unionBy;se.unionWith=Ln.unionWith;se.uniq=Ln.uniq;se.uniqBy=Ln.uniqBy;se.uniqWith=Ln.uniqWith;se.unset=Or.unset;se.unzip=Ln.unzip;se.unzipWith=Ln.unzipWith;se.update=Or.update;se.updateWith=Or.updateWith;se.values=Or.values;se.valuesIn=Or.valuesIn;se.without=Ln.without;se.words=mo.words;se.wrap=ji.wrap;se.xor=Ln.xor;se.xorBy=Ln.xorBy;se.xorWith=Ln.xorWith;se.zip=Ln.zip;se.zipObject=Ln.zipObject;se.zipObjectDeep=Ln.zipObjectDeep;se.zipWith=Ln.zipWith;se.entries=Or.toPairs;se.entriesIn=Or.toPairsIn;se.extend=Or.assignIn;se.extendWith=Or.assignInWith;ME(se,se);se.add=pl.add;se.attempt=So.attempt;se.camelCase=mo.camelCase;se.capitalize=mo.capitalize;se.ceil=pl.ceil;se.clamp=TE.clamp;se.clone=cr.clone;se.cloneDeep=cr.cloneDeep;se.cloneDeepWith=cr.cloneDeepWith;se.cloneWith=cr.cloneWith;se.conformsTo=cr.conformsTo;se.deburr=mo.deburr;se.defaultTo=So.defaultTo;se.divide=pl.divide;se.endsWith=mo.endsWith;se.eq=cr.eq;se.escape=mo.escape;se.escapeRegExp=mo.escapeRegExp;se.every=Lo.every;se.find=Lo.find;se.findIndex=Ln.findIndex;se.findKey=Or.findKey;se.findLast=Lo.findLast;se.findLastIndex=Ln.findLastIndex;se.findLastKey=Or.findLastKey;se.floor=pl.floor;se.forEach=Lo.forEach;se.forEachRight=Lo.forEachRight;se.forIn=Or.forIn;se.forInRight=Or.forInRight;se.forOwn=Or.forOwn;se.forOwnRight=Or.forOwnRight;se.get=Or.get;se.gt=cr.gt;se.gte=cr.gte;se.has=Or.has;se.hasIn=Or.hasIn;se.head=Ln.head;se.identity=ih;se.includes=Lo.includes;se.indexOf=Ln.indexOf;se.inRange=TE.inRange;se.invoke=Or.invoke;se.isArguments=cr.isArguments;se.isArray=Oi;se.isArrayBuffer=cr.isArrayBuffer;se.isArrayLike=cr.isArrayLike;se.isArrayLikeObject=cr.isArrayLikeObject;se.isBoolean=cr.isBoolean;se.isBuffer=cr.isBuffer;se.isDate=cr.isDate;se.isElement=cr.isElement;se.isEmpty=cr.isEmpty;se.isEqual=cr.isEqual;se.isEqualWith=cr.isEqualWith;se.isError=cr.isError;se.isFinite=cr.isFinite;se.isFunction=cr.isFunction;se.isInteger=cr.isInteger;se.isLength=cr.isLength;se.isMap=cr.isMap;se.isMatch=cr.isMatch;se.isMatchWith=cr.isMatchWith;se.isNaN=cr.isNaN;se.isNative=cr.isNative;se.isNil=cr.isNil;se.isNull=cr.isNull;se.isNumber=cr.isNumber;se.isObject=zd;se.isObjectLike=cr.isObjectLike;se.isPlainObject=cr.isPlainObject;se.isRegExp=cr.isRegExp;se.isSafeInteger=cr.isSafeInteger;se.isSet=cr.isSet;se.isString=cr.isString;se.isSymbol=cr.isSymbol;se.isTypedArray=cr.isTypedArray;se.isUndefined=cr.isUndefined;se.isWeakMap=cr.isWeakMap;se.isWeakSet=cr.isWeakSet;se.join=Ln.join;se.kebabCase=mo.kebabCase;se.last=xs;se.lastIndexOf=Ln.lastIndexOf;se.lowerCase=mo.lowerCase;se.lowerFirst=mo.lowerFirst;se.lt=cr.lt;se.lte=cr.lte;se.max=pl.max;se.maxBy=pl.maxBy;se.mean=pl.mean;se.meanBy=pl.meanBy;se.min=pl.min;se.minBy=pl.minBy;se.stubArray=So.stubArray;se.stubFalse=So.stubFalse;se.stubObject=So.stubObject;se.stubString=So.stubString;se.stubTrue=So.stubTrue;se.multiply=pl.multiply;se.nth=Ln.nth;se.noop=So.noop;se.now=W7.now;se.pad=mo.pad;se.padEnd=mo.padEnd;se.padStart=mo.padStart;se.parseInt=mo.parseInt;se.random=TE.random;se.reduce=Lo.reduce;se.reduceRight=Lo.reduceRight;se.repeat=mo.repeat;se.replace=mo.replace;se.result=Or.result;se.round=pl.round;se.sample=Lo.sample;se.size=Lo.size;se.snakeCase=mo.snakeCase;se.some=Lo.some;se.sortedIndex=Ln.sortedIndex;se.sortedIndexBy=Ln.sortedIndexBy;se.sortedIndexOf=Ln.sortedIndexOf;se.sortedLastIndex=Ln.sortedLastIndex;se.sortedLastIndexBy=Ln.sortedLastIndexBy;se.sortedLastIndexOf=Ln.sortedLastIndexOf;se.startCase=mo.startCase;se.startsWith=mo.startsWith;se.subtract=pl.subtract;se.sum=pl.sum;se.sumBy=pl.sumBy;se.template=mo.template;se.times=So.times;se.toFinite=cr.toFinite;se.toInteger=Vr;se.toLength=cr.toLength;se.toLower=mo.toLower;se.toNumber=cr.toNumber;se.toSafeInteger=cr.toSafeInteger;se.toString=cr.toString;se.toUpper=mo.toUpper;se.trim=mo.trim;se.trimEnd=mo.trimEnd;se.trimStart=mo.trimStart;se.truncate=mo.truncate;se.unescape=mo.unescape;se.uniqueId=So.uniqueId;se.upperCase=mo.upperCase;se.upperFirst=mo.upperFirst;se.each=Lo.forEach;se.eachRight=Lo.forEachRight;se.first=Ln.head;ME(se,function(){var e={};return sh(se,function(t,n){Pk.call(se.prototype,n)||(e[n]=t)}),e}(),{chain:!1});se.VERSION=eB;(se.templateSettings=mo.templateSettings).imports._=se;vc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){se[e].placeholder=se});vc(["drop","take"],function(e,t){Jr.prototype[e]=function(n){n=n===void 0?1:aB(Vr(n),0);var a=this.__filtered__&&!t?new Jr(this):this.clone();return a.__filtered__?a.__takeCount__=vx(n,a.__takeCount__):a.__views__.push({size:vx(n,kk),type:e+(a.__dir__<0?"Right":"")}),a},Jr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});vc(["filter","map","takeWhile"],function(e,t){var n=t+1,a=n==nB||n==rB;Jr.prototype[e]=function(r){var u=this.clone();return u.__iteratees__.push({iteratee:Qr(r),type:n}),u.__filtered__=u.__filtered__||a,u}});vc(["head","last"],function(e,t){var n="take"+(t?"Right":"");Jr.prototype[e]=function(){return this[n](1).value()[0]}});vc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Jr.prototype[e]=function(){return this.__filtered__?new Jr(this):this[n](1)}});Jr.prototype.compact=function(){return this.filter(ih)};Jr.prototype.find=function(e){return this.filter(e).head()};Jr.prototype.findLast=function(e){return this.reverse().find(e)};Jr.prototype.invokeMap=ro(function(e,t){return typeof e=="function"?new Jr(this):this.map(function(n){return ry(n,e,t)})});Jr.prototype.reject=function(e){return this.filter(g_(Qr(e)))};Jr.prototype.slice=function(e,t){e=Vr(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Jr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Vr(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Jr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Jr.prototype.toArray=function(){return this.take(kk)};sh(Jr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),r=se[a?"take"+(t=="last"?"Right":""):t],u=a||/^find/.test(t);r&&(se.prototype[t]=function(){var c=this.__wrapped__,v=a?[1]:arguments,d=c instanceof Jr,g=v[0],_=d||Oi(c),b=function(j){var D=r.apply(se,Qm([j],v));return a&&x?D[0]:D};_&&n&&typeof g=="function"&&g.length!=1&&(d=_=!1);var x=this.__chain__,A=!!this.__actions__.length,M=u&&!x,O=d&&!A;if(!u&&_){c=O?c:new Jr(this);var S=e.apply(c,v);return S.__actions__.push({func:E_,args:[b],thisArg:void 0}),new Lu(S,x)}return M&&O?e.apply(this,v):(S=this.thru(b),M?a?S.value()[0]:S.value():S)})});vc(["pop","push","shift","sort","splice","unshift"],function(e){var t=oB[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);se.prototype[e]=function(){var r=arguments;if(a&&!this.__chain__){var u=this.value();return t.apply(Oi(u)?u:[],r)}return this[n](function(c){return t.apply(Oi(c)?c:[],r)})}});sh(Jr.prototype,function(e,t){var n=se[t];if(n){var a=n.name+"";Pk.call(wv,a)||(wv[a]=[]),wv[a].push({name:t,func:n})}});wv[f_(void 0,tB).name]=[{name:"wrapper",func:void 0}];Jr.prototype.clone=z7;Jr.prototype.reverse=H7;Jr.prototype.value=Q7;se.prototype.at=gc.at;se.prototype.chain=gc.wrapperChain;se.prototype.commit=gc.commit;se.prototype.next=gc.next;se.prototype.plant=gc.plant;se.prototype.reverse=gc.reverse;se.prototype.toJSON=se.prototype.valueOf=se.prototype.value=gc.value;se.prototype.first=se.prototype.head;hx&&(se.prototype[hx]=gc.toIterator);const lB="data:image/svg+xml,%3csvg%20width='27'%20height='20'%20viewBox='0%200%2027%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.6667%203.33329H3.66667V16.6666H23.6667V3.33329ZM3.66667%201.66663C2.74619%201.66663%202%202.41282%202%203.33329V16.6666C2%2017.5871%202.74619%2018.3333%203.66667%2018.3333H23.6667C24.5871%2018.3333%2025.3333%2017.5871%2025.3333%2016.6666V3.33329C25.3333%202.41282%2024.5871%201.66663%2023.6667%201.66663H3.66667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.2196%206.91331H18.2767L19.4%209.89549L20.4758%206.91331L22.5375%206.83044L19.4%2014.8138L17.3565%2014.8966L18.437%2012.3756L16.2196%206.91331Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.1034%207.06327C13.1302%207.04839%2013.1574%207.03404%2013.1848%207.02023C13.5166%206.84295%2013.8759%206.77344%2014.2468%206.77344C14.9611%206.77344%2015.5729%206.97047%2015.9992%207.43635C16.419%207.89521%2016.5934%208.54454%2016.5934%209.3101V12.9168H14.7001V9.4001C14.7001%209.01738%2014.6103%208.80651%2014.5052%208.69229C14.4059%208.58445%2014.2319%208.49677%2013.9067%208.49677C13.7078%208.49677%2013.5468%208.55932%2013.4114%208.69473C13.2534%208.85274%2013.1382%209.08146%2013.1034%209.41091V12.9168H11.2101V6.91344H13.1034V7.06327Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.01665%2012.6833V12.9168H10.83V9.2001C10.83%208.50266%2010.6523%207.90623%2010.247%207.47482L10.2458%207.47354C9.77726%206.97898%209.08554%206.77344%208.26332%206.77344C7.58671%206.77344%206.97894%206.88784%206.50606%207.18452C5.95355%207.51308%205.61381%208.04132%205.48446%208.69979L5.39493%209.15558L6.60828%209.25958C6.45695%209.32645%206.3157%209.40545%206.18578%209.49774C5.6067%209.89006%205.31665%2010.4724%205.31665%2011.1801C5.31665%2011.727%205.52656%2012.1949%205.95194%2012.5464C6.34831%2012.8992%206.87585%2013.0568%207.48332%2013.0568C7.99851%2013.0568%208.45994%2012.9557%208.86073%2012.7671L8.86966%2012.7628C8.91982%2012.7377%208.96882%2012.7112%209.01665%2012.6833ZM7.33362%209.04021C7.60234%208.98907%207.88998%208.96154%208.19236%208.95358L8.93243%208.93444C8.90662%208.77431%208.84911%208.68249%208.7882%208.62627C8.69958%208.54447%208.527%208.46677%208.19332%208.46677C7.90772%208.46677%207.72064%208.51963%207.60769%208.58739L7.60328%208.59004C7.46993%208.66783%207.38847%208.77506%207.35134%208.95452L7.33362%209.04021ZM8.93782%2010.5386L8.28478%2010.5566L8.28191%2010.5567C7.83203%2010.566%207.5658%2010.6502%207.4222%2010.7499C7.3054%2010.831%207.23998%2010.9409%207.23998%2011.1401C7.23998%2011.2037%207.25413%2011.2438%207.32642%2011.2991L7.3313%2011.3029L7.33606%2011.3067C7.40443%2011.3623%207.52395%2011.4134%207.72332%2011.4134C8.07815%2011.4134%208.36218%2011.3062%208.60462%2011.1017C8.80129%2010.9357%208.90794%2010.7499%208.93782%2010.5386Z'%20fill='%23646A73'/%3e%3c/svg%3e",uB="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.6667%203.33329H3.33335V16.6666H16.6667V3.33329ZM3.33335%201.66663C2.41288%201.66663%201.66669%202.41282%201.66669%203.33329V16.6666C1.66669%2017.5871%202.41288%2018.3333%203.33335%2018.3333H16.6667C17.5872%2018.3333%2018.3334%2017.5871%2018.3334%2016.6666V3.33329C18.3334%202.41282%2017.5872%201.66663%2016.6667%201.66663H3.33335Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.33%205.83667H15.2233V13.95H13.33V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.83%205.83667H12.7233V13.95H10.83V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.51665%2013.7165V13.95H10.33V10.2333C10.33%209.53587%2010.1523%208.93943%209.747%208.50803L9.7458%208.50675C9.27726%208.01218%208.58554%207.80664%207.76332%207.80664C7.08671%207.80664%206.47894%207.92104%206.00606%208.21772C5.45355%208.54628%205.11381%209.07452%204.98446%209.733L4.89493%2010.1888L6.10828%2010.2928C5.95695%2010.3597%205.8157%2010.4386%205.68578%2010.5309C5.1067%2010.9233%204.81665%2011.5057%204.81665%2012.2133C4.81665%2012.7602%205.02656%2013.2281%205.45194%2013.5796C5.84831%2013.9324%206.37585%2014.09%206.98332%2014.09C7.49851%2014.09%207.95994%2013.9889%208.36073%2013.8003L8.36966%2013.796C8.41982%2013.7709%208.46882%2013.7444%208.51665%2013.7165ZM6.83361%2010.0734C7.10234%2010.0223%207.38998%209.99474%207.69236%209.98678L8.43243%209.96764C8.40662%209.80751%208.3491%209.71569%208.2882%209.65948C8.19958%209.57767%208.027%209.49997%207.69332%209.49997C7.40772%209.49997%207.22064%209.55283%207.10769%209.6206L7.10328%209.62324C6.96993%209.70103%206.88847%209.80826%206.85134%209.98773L6.83361%2010.0734ZM8.43782%2011.5718L7.78478%2011.5898L7.78191%2011.5899C7.33203%2011.5992%207.0658%2011.6834%206.9222%2011.7831C6.8054%2011.8642%206.73998%2011.9741%206.73998%2012.1733C6.73998%2012.2369%206.75413%2012.277%206.82642%2012.3323L6.8313%2012.3361L6.83606%2012.3399C6.90443%2012.3955%207.02395%2012.4466%207.22332%2012.4466C7.57815%2012.4466%207.86218%2012.3394%208.10462%2012.1349C8.30129%2011.9689%208.40794%2011.7831%208.43782%2011.5718Z'%20fill='%23646A73'/%3e%3c/svg%3e",sB={class:"list flex-wrap"},cB=["onClick","onMousedown"],fB=["src"],dB=["title"],pB={class:"flex-between"},hB={class:"flex align-center"},vB=["src"],mB=["title"],yB={key:0,class:"status-tag",style:{"margin-left":"auto"}},gB=ir({__name:"NodeContent",props:{list:{}},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=e,a=t,r=Ue(""),u=Ue([]);function c(v,d){return d.length?v.filter(g=>g.name.toLowerCase().includes(d.toLowerCase())):v}return Qw([()=>r.value,()=>n.list],()=>{u.value=c(n.list,r.value)}),(v,d)=>{const g=ee("el-input"),_=ee("el-avatar"),b=ee("el-tag"),x=ee("el-text"),A=ee("el-popover"),M=ee("el-empty");return Ne(),sn(Dr,null,[P(g,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=O=>r.value=O),modelModifiers:{trim:!0},placeholder:v.$t("common.search"),"prefix-icon":"Search",clearable:"",style:{padding:"12px 12px 0 12px"}},null,8,["modelValue","placeholder"]),J("div",sB,[u.value.length?(Ne(!0),sn(Dr,{key:0},Oo(u.value,O=>(Ne(),gt(A,{key:O.id,placement:"right",width:280,"show-after":500},{reference:C(()=>[J("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:en(S=>a("clickNodes",O),["stop"]),onMousedown:en(S=>a("onmousedown",O),["stop"])},[ar(fw)(O==null?void 0:O.icon)?(Ne(),gt(_,{key:0,shape:"square",size:20,style:{background:"none"}},{default:C(()=>[J("img",{src:ar(Qp)(O==null?void 0:O.icon,ar(Qp)("./favicon.ico")),alt:""},null,8,fB)]),_:2},1024)):(Ne(),gt(_,{key:1,class:"avatar-green",shape:"square",size:20},{default:C(()=>d[1]||(d[1]=[J("img",{src:LS,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[1]})),J("span",{class:"ml-8 ellipsis",title:O.name},Ee(O.name),9,dB)],40,cB)]),default:C(()=>[J("div",pB,[J("div",hB,[ar(fw)(O==null?void 0:O.icon)?(Ne(),gt(_,{key:0,shape:"square",size:20,style:{background:"none"}},{default:C(()=>[J("img",{src:ar(Qp)(O==null?void 0:O.icon,ar(Qp)("./favicon.ico")),alt:""},null,8,vB)]),_:2},1024)):(Ne(),gt(_,{key:1,class:"avatar-green",shape:"square",size:20},{default:C(()=>d[2]||(d[2]=[J("img",{src:LS,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[2]})),J("span",{class:"font-medium ml-8 break-all",title:O.name},Ee(O.name),9,mB)]),O.type?(Ne(),sn("div",yB,[ar(eE)(O.type)?(Ne(),gt(b,{key:0,class:"warning-tag"},{default:C(()=>[ut(Ee(v.$t("views.application.workflow")),1)]),_:1})):(Ne(),gt(b,{key:1,class:"blue-tag"},{default:C(()=>[ut(Ee(v.$t("views.application.simple")),1)]),_:1}))])):Rn("",!0)]),P(x,{type:"info",size:"small",class:"mt-4"},{default:C(()=>[ut(Ee(O.desc),1)]),_:2},1024)]),_:2},1024))),128)):(Ne(),gt(M,{key:1,description:v.$t("common.noData")},null,8,["description"]))])],64)}}}),mx=Zd(gB,[["__scopeId","data-v-deb1c287"]]),_B={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-12 mt-12"},bB={key:0},wB={class:"flex-wrap",style:{gap:"12px",padding:"12px"}},EB=["onClick","onMousedown"],OB={class:"lighter"},SB={class:"flex align-center mb-8"},xB={class:"lighter color-text-primary"},AB={key:1,class:"ml-16 mt-8"},TB=ir({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=iu("workflowMode"),a=aa(),{user:r,folder:u}=tE(),c=gI(n||Xj.Application),v=Ue(""),d=e,g=t,_=or(()=>a.path.includes("resource-management")?"systemManage":"workspace");or(()=>tM.tool[_.value]);const b=Ue(!1),x=Ue("base"),A=or(()=>{if(!v.value)return c||[];const H=v.value.toLowerCase();return(c||[]).reduce((B,G)=>{const K=G.list.filter(Q=>Q.label.toLowerCase().includes(H));return K.length&&B.push({...G,list:K}),B},[])});function M(H,B,G){var K;B&&(H.properties.nodeName=B.name,G=="tool"&&(H.properties.nodeData={...B,toolLibId:B.id,inputFieldList:B.inputFieldList.map(Q=>({...Q,value:Q.source=="reference"?[]:""}))}),G=="application"&&(H.properties.nodeData={name:B.name,icon:B.icon,applicationId:B.id})),(K=d.workflowRef)==null||K.addNode(H),g("clickNodes",H)}function O(H,B,G){var K;B&&(H.properties.nodeName=B.name,G=="tool"&&(H.properties.nodeData={...B,toolLibId:B.id,inputFieldList:B.inputFieldList.map(Q=>({...Q,value:Q.source=="reference"?[]:""}))}),G=="application"&&(eE(B.type)?(B.work_flow.nodes[0].properties.nodeData.file_upload_setting,H.properties.nodeData={name:B.name,icon:B.icon,applicationId:B.id}):H.properties.nodeData={name:B.name,icon:B.icon,applicationId:B.id})),(K=d.workflowRef)==null||K.onmousedown(H),g("onmousedown",H)}const S=Ue([]),j=Ue([]);async function D(){var B;const H=await u.asyncGetFolder(FS.TOOL,{},b);S.value=H.data,u.setCurrentFolder(((B=H.data)==null?void 0:B[0])||{})}async function z(){var B,G,K,Q;const H=await Eo({type:"tool",isShared:((B=u.currentFolder)==null?void 0:B.id)==="share",systemType:"workspace"}).getToolList({folderId:((G=u.currentFolder)==null?void 0:G.id)||r.getWorkspaceId(),toolType:"CUSTOM"});j.value=((K=H.data)==null?void 0:K.tools)||H.data||[],j.value=(Q=j.value)==null?void 0:Q.filter(ce=>ce.isActive)}const U=Ue([]),L=Ue([]);function $(){u.asyncGetFolder(FS.APPLICATION,{},b).then(H=>{var B;U.value=H.data,u.setCurrentFolder(((B=H.data)==null?void 0:B[0])||{})})}async function X(){var B;const H=await Eo({type:"application",systemType:"workspace"}).getAllApplication({folderId:((B=u.currentFolder)==null?void 0:B.id)||r.getWorkspaceId()});L.value=H.data.filter(G=>G.id!==d.id&&G.isPublish)}async function Y(H){H==="tool"?(await D(),z()):H==="application"&&($(),X())}return oo(()=>{}),(H,B)=>{const G=ee("search"),K=ee("el-icon"),Q=ee("el-input"),ce=ee("el-text"),ue=ee("el-popover"),de=ee("el-scrollbar"),ye=ee("el-tab-pane"),we=ee("el-tabs");return Ra((Ne(),sn("div",{class:"workflow-dropdown-menu border border-r-6 white-bg",style:qj({width:(x.value==="base","400px")})},[P(we,{modelValue:x.value,"onUpdate:modelValue":B[5]||(B[5]=me=>x.value=me),class:"workflow-dropdown-tabs",onTabChange:Y},{default:C(()=>[Ra(J("div",_B,[P(Q,{modelValue:v.value,"onUpdate:modelValue":B[0]||(B[0]=me=>v.value=me),class:"mr-12 ml-12",placeholder:H.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:C(()=>[P(K,{class:"el-input__icon"},{default:C(()=>[P(G)]),_:1})]),_:1},8,["modelValue","placeholder"])],512),[[th,x.value==="base"]]),P(ye,{label:H.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:C(()=>[P(de,{height:"400"},{default:C(()=>[A.value.length>0?(Ne(),sn("div",bB,[(Ne(!0),sn(Dr,null,Oo(A.value,(me,He)=>(Ne(),sn(Dr,{key:He},[P(ce,{type:"info",size:"small",class:"color-secondary ml-12"},{default:C(()=>[ut(Ee(me.label),1)]),_:2},1024),J("div",wB,[(Ne(!0),sn(Dr,null,Oo(me.list,(tt,Ot)=>(Ne(),gt(ue,{key:Ot,placement:"right",width:280,"show-after":500},{reference:C(()=>[J("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:en(Je=>M(tt),["stop"]),onMousedown:en(Je=>O(tt),["stop"])},[(Ne(),gt(dw(ar(pw)(`${tt.type}-icon`)),{class:"mr-8",size:20})),J("div",OB,Ee(tt.label),1)],40,EB)]),default:C(()=>[J("div",SB,[(Ne(),gt(dw(ar(pw)(`${tt.type}-icon`)),{class:"mr-8",size:32})),J("div",xB,Ee(tt.label),1)]),P(ce,{type:"info",size:"small",class:"color-secondary lighter"},{default:C(()=>[ut(Ee(tt.text),1)]),_:2},1024)]),_:2},1024))),128))])],64))),128))])):(Ne(),sn("div",AB,[P(ce,{type:"info"},{default:C(()=>[ut(Ee(H.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),P(ye,{label:H.$t("views.tool.title"),name:"tool"},{default:C(()=>[P(de,{height:"450"},{default:C(()=>[P(mx,{list:j.value,onClickNodes:B[1]||(B[1]=me=>M(ar(US),me,"tool")),onOnmousedown:B[2]||(B[2]=me=>O(ar(US),me,"tool"))},null,8,["list"])]),_:1})]),_:1},8,["label"]),P(ye,{label:H.$t("views.application.title"),name:"application"},{default:C(()=>[P(de,{height:"450"},{default:C(()=>[P(mx,{list:L.value,onClickNodes:B[3]||(B[3]=me=>M(ar(VS),me,"application")),onOnmousedown:B[4]||(B[4]=me=>O(ar(VS),me,"application"))},null,8,["list"])]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],4)),[[th,e.show]])}}}),Rk=Zd(TB,[["__scopeId","data-v-2b2bdfb7"]]),MB={class:"flex-between"},kB={class:"ellipsis-1 break-all"},PB={key:0,src:lB,alt:""},RB={key:1,src:uB,alt:""},NB={style:{width:"280px"},class:"p-12-16"},CB={class:"mt-8 lighter"},DB={class:"title-decoration-1 mb-8 mt-8"},jB=["onMouseenter"],IB={class:"break-all"},LB={class:"dialog-footer"},FB=ir({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const t=aa(),{params:{id:n}}=t,a=Ue({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),r=Ue(!1),u=Ue(),c=Ue(),v=Ue(!1),d=Ue({title:""}),g=or({set:B=>{Re.set(L.nodeModel.properties,"condition",B)},get:()=>L.nodeModel.properties.condition?L.nodeModel.properties.condition:(Re.set(L.nodeModel.properties,"condition","AND"),!0)}),_=or({set:B=>{Re.set(L.nodeModel.properties,"showNode",B)},get:()=>L.nodeModel.properties.showNode!==void 0?L.nodeModel.properties.showNode:(Re.set(L.nodeModel.properties,"showNode",!0),!0)}),b=B=>{B.ctrlKey||B.metaKey||B.stopPropagation()},x=or(()=>L.nodeModel.properties.status?L.nodeModel.properties.status:200);function A(){d.value.title=L.nodeModel.properties.nodeName,v.value=!0}const M=async B=>{B&&await B.validate(G=>{var K;G&&((K=L.nodeModel.graphModel.nodes.filter(Q=>Q.id!==L.nodeModel.id))!=null&&K.some(Q=>Q.properties.nodeName===d.value.title)?mi(St("views.applicationWorkflow.tip.repeatedNodeError")):(Re.set(L.nodeModel.properties,"nodeName",d.value.title),v.value=!1,B.resetFields()))})},O=B=>{B!=null&&B.shiftKey||L.nodeModel.graphModel.clearSelectElements(),Re.set(L.nodeModel,"isSelected",!L.nodeModel.isSelected),Re.set(L.nodeModel,"isHovered",!L.nodeModel.isSelected),L.nodeModel.graphModel.toFront(L.nodeModel.id)},S=Ue(null),j=()=>{L.nodeModel.graphModel.clearSelectElements();const B=L.nodeModel.graphModel.cloneNode(L.nodeModel.id);Re.set(B,"isSelected",!0),Re.set(B,"isHovered",!0),L.nodeModel.graphModel.toFront(B.id)},D=()=>{nE(St("common.tip"),St("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:St("common.confirm"),confirmButtonClass:"danger"}).then(()=>{L.nodeModel.type===Ko.LoopNode&&L.nodeModel.graphModel.getNodeOutgoingNode(L.nodeModel.id).forEach(G=>{G.type==="loop-body-node"&&L.nodeModel.graphModel.deleteNode(G.id)}),L.nodeModel.graphModel.deleteNode(L.nodeModel.id)}),L.nodeModel.graphModel.eventCenter.emit("delete_node")},z=B=>{B.height&&(L.nodeModel.virtual||(a.value.stepContainerHeight=B.height,L.nodeModel.setHeight(a.value.stepContainerHeight)))};function U(B){var Q,ce,ue;const G=B.properties.width?B.properties.width:214,K=L.nodeModel.graphModel.addNode({type:B.type,properties:B.properties,x:((Q=u.value)==null?void 0:Q.x)+G/2+200,y:((ce=u.value)==null?void 0:ce.y)-B.height});L.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:L.nodeModel.id,sourceAnchorId:(ue=u.value)==null?void 0:ue.id,targetNodeId:K.id,targetAnchorId:K.id+"_left"}),H()}const L=e,$=or(()=>{var B;return L.nodeModel.properties.config.fields?(B=L.nodeModel.properties.config.fields)==null?void 0:B.map(K=>({label:K.label,value:K.value,globeLabel:`{{${L.nodeModel.properties.nodeName}.${K.value}}}`,globeValue:`{{context['${L.nodeModel.id}'].${K.value}}}`})):[]});function X(B){return![Ko.Start,Ko.Base,Ko.LoopStartNode.toString()].includes(B)}const Y=B=>{r.value=!0,u.value=B},H=()=>{r.value=!1,u.value=void 0};return oo(()=>{Re.set(L.nodeModel,"openNodeMenu",B=>{r.value?H():Y(B)})}),(B,G)=>{var Se;const K=ee("ArrowDownBold"),Q=ee("el-icon"),ce=ee("el-button"),ue=ee("el-option"),de=ee("el-select"),ye=ee("el-dropdown"),we=ee("AppIcon"),me=ee("el-dropdown-item"),He=ee("el-dropdown-menu"),tt=ee("el-alert"),Ot=ee("el-tooltip"),Je=ee("el-collapse-transition"),Yt=ee("el-input"),Kt=ee("el-form-item"),Ft=ee("el-form"),An=ee("el-dialog"),Be=Hd("resize");return Ne(),sn("div",{onMousedown:O,class:"workflow-node-container p-16",style:{overflow:"visible"}},[J("div",{class:Du(["step-container app-card p-16",{isSelected:L.nodeModel.isSelected,error:x.value!==200}]),style:{overflow:"visible"}},[Ra((Ne(),sn("div",null,[J("div",MB,[J("div",{class:"flex align-center",onDragstart:G[0]||(G[0]=en(()=>{},["prevent"])),onDrag:G[1]||(G[1]=en(()=>{},["prevent"])),onDragover:G[2]||(G[2]=en(()=>{},["prevent"])),onDragend:G[3]||(G[3]=en(()=>{},["prevent"])),style:{width:"69%"}},[(Ne(),gt(dw(ar(pw)(`${B.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(Se=B.nodeModel)==null?void 0:Se.properties.node_data},null,8,["item"])),J("h4",kB,Ee(B.nodeModel.properties.nodeName),1)],32),J("div",{onMousemove:G[6]||(G[6]=en(()=>{},["stop"])),onMousedown:G[7]||(G[7]=en(()=>{},["stop"])),onKeydown:G[8]||(G[8]=en(()=>{},["stop"])),onClick:G[9]||(G[9]=en(()=>{},["stop"]))},[P(ce,{text:"",onClick:G[4]||(G[4]=Ce=>_.value=!_.value)},{default:C(()=>[P(Q,{class:Du(["arrow-icon color-secondary",_.value?"rotate-180":""])},{default:C(()=>[P(K)]),_:1},8,["class"])]),_:1}),X(B.nodeModel.type)?(Ne(),gt(ye,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:C(()=>[J("div",NB,[J("h5",null,Ee(B.$t("views.applicationWorkflow.condition.title")),1),J("p",CB,[J("span",null,Ee(B.$t("views.applicationWorkflow.condition.front")),1),P(de,{modelValue:g.value,"onUpdate:modelValue":G[5]||(G[5]=Ce=>g.value=Ce),size:"small",style:{width:"60px",margin:"0 8px"}},{default:C(()=>[P(ue,{label:B.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),P(ue,{label:B.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),J("span",null,Ee(B.$t("views.applicationWorkflow.condition.text")),1)])])]),default:C(()=>[P(ce,{text:""},{default:C(()=>[g.value==="OR"?(Ne(),sn("img",PB)):Rn("",!0),g.value==="AND"?(Ne(),sn("img",RB)):Rn("",!0)]),_:1})]),_:1})):Rn("",!0),X(B.nodeModel.type)?(Ne(),gt(ye,{key:1,teleported:!1,trigger:"click"},{dropdown:C(()=>[P(He,{style:{"min-width":"80px"}},{default:C(()=>[P(me,{onClick:A,class:"p-8"},{default:C(()=>[ut(Ee(B.$t("common.rename")),1)]),_:1}),P(me,{onClick:j,class:"p-8"},{default:C(()=>[ut(Ee(B.$t("common.copy")),1)]),_:1}),P(me,{onClick:D,class:"border-t p-8"},{default:C(()=>[ut(Ee(B.$t("common.delete")),1)]),_:1})]),_:1})]),default:C(()=>[P(ce,{text:""},{default:C(()=>[P(we,{iconName:"app-more",class:"color-secondary"})]),_:1})]),_:1})):Rn("",!0)],32)]),P(Je,null,{default:C(()=>[Ra(J("div",{onMousedown:G[11]||(G[11]=en(()=>{},["stop"])),onKeydown:G[12]||(G[12]=en(()=>{},["stop"])),onClick:G[13]||(G[13]=en(()=>{},["stop"])),class:"mt-16"},[x.value!=200?(Ne(),gt(tt,{key:0,class:"mb-16",title:L.nodeModel.type==="application-node"?B.$t("views.applicationWorkflow.tip.applicationNodeError"):B.$t("views.applicationWorkflow.tip.toolNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):Rn("",!0),Yj(B.$slots,"default",{},void 0,!0),$.value.length>0?(Ne(),sn(Dr,{key:1},[J("h5",DB,Ee(B.$t("common.param.outputParam")),1),(Ne(!0),sn(Dr,null,Oo($.value,(Ce,Xe)=>(Ne(),sn("div",{key:Xe,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:_t=>S.value=Xe,onMouseleave:G[10]||(G[10]=_t=>S.value=null)},[J("span",IB,Ee(Ce.label)+" "+Ee("{"+Ce.value+"}"),1),S.value===Xe?(Ne(),gt(Ot,{key:0,effect:"dark",content:B.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:C(()=>[P(ce,{link:"",onClick:_t=>ar(hw)(Ce.globeLabel),style:{padding:"0"}},{default:C(()=>[P(we,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Rn("",!0)],40,jB))),128))],64)):Rn("",!0)],544),[[th,_.value]])]),_:3})])),[[Be,z]])],2),P(Je,null,{default:C(()=>[r.value?(Ne(),gt(Rk,{key:0,onMousemove:G[14]||(G[14]=en(()=>{},["stop"])),onMousedown:G[15]||(G[15]=en(()=>{},["stop"])),onClick:G[16]||(G[16]=en(()=>{},["stop"])),onWheel:b,show:r.value,id:ar(n),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:U},null,8,["show","id"])):Rn("",!0)]),_:1}),P(An,{title:B.$t("views.applicationWorkflow.nodeName"),modelValue:v.value,"onUpdate:modelValue":G[21]||(G[21]=Ce=>v.value=Ce),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:G[22]||(G[22]=en(()=>{},["prevent"]))},{footer:C(()=>[J("span",LB,[P(ce,{onClick:G[19]||(G[19]=en(Ce=>v.value=!1,["prevent"]))},{default:C(()=>[ut(Ee(B.$t("common.cancel")),1)]),_:1}),P(ce,{type:"primary",onClick:G[20]||(G[20]=Ce=>M(c.value))},{default:C(()=>[ut(Ee(B.$t("common.save")),1)]),_:1})])]),default:C(()=>[P(Ft,{"label-position":"top",ref_key:"titleFormRef",ref:c,model:d.value},{default:C(()=>[P(Kt,{prop:"title",rules:[{required:!0,message:B.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:C(()=>[P(Yt,{modelValue:d.value.title,"onUpdate:modelValue":G[17]||(G[17]=Ce=>d.value.title=Ce),onBlur:G[18]||(G[18]=Ce=>d.value.title=d.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}}),Jo=Zd(FB,[["__scopeId","data-v-67b9020e"]]),$B={class:"title-decoration-1 mb-8"},BB={class:"flex-between w-full"},UB={class:"flex-between"},VB={class:"flex align-center"},GB={class:"flex align-center"},WB={class:"mr-4"},zB={class:"flex-between"},HB={class:"flex-between mb-16"},XB={class:"lighter"},qB={key:0,class:"w-full mb-16"},YB={class:"flex align-center",style:{"line-height":"20px"}},KB=["src"],ZB=["title"],JB={class:"flex-between"},QB={class:"mr-4"},eU={class:"flex"},tU={class:"flex-between"},nU={class:"flex-between"},rU={class:"flex align-center"},oU={class:"mr-4"},iU={class:"flex"},aU=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=de=>de.ctrlKey===!0?(de.preventDefault(),!0):(de.stopPropagation(),!0);function c(de){Re.set(x.nodeModel.properties.nodeData,"system",de)}function v(de){Re.set(x.nodeModel.properties.nodeData,"prompt",de)}const d=de=>{var ye;de?(ye=O.value)==null||ye.reset_default(de,a):Y({})},_={modelId:"",system:"",prompt:`${St("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${St("views.applicationWorkflow.nodes.searchKnowledgeNode.label")}.data}}
${St("views.problem.title")}：
{{${St("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:1,isResult:!0,temperature:null,maxTokens:null,dialogueType:"WORK_FLOW",toolId:[],modelSetting:{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}},b=or({get:()=>x.nodeModel.properties.nodeData?(x.nodeModel.properties.nodeData.modelSetting||Re.set(x.nodeModel.properties.nodeData,"modelSetting",{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}),x.nodeModel.properties.nodeData):(Re.set(x.nodeModel.properties,"nodeData",_),x.nodeModel.properties.nodeData),set:de=>{Re.set(x.nodeModel.properties,"nodeData",de)}}),x=e,A=Ue(),M=Ue(null),O=Ue(),S=Ue(),j=()=>{var de;return(de=A.value)==null?void 0:de.validate().catch(ye=>Promise.reject({node:x.nodeModel,errMessage:ye}))},D=t();function z(){var ye;const de=r.value==="systemManage"?{modelType:"LLM",workspaceId:(ye=D.value)==null?void 0:ye.workspaceId}:{modelType:"LLM"};Eo({type:"model",systemType:r.value}).getSelectModelList(de).then(we=>{M.value=Re.groupBy(we==null?void 0:we.data,"provider")})}const U=de=>{var ye;de&&((ye=O.value)==null||ye.open(de,a,b.value.modelParamsSetting))},L=Ue(),$=de=>{var ye;de&&((ye=L.value)==null||ye.open(de,a))},X=de=>{alert(de),Re.set(x.nodeModel.properties.nodeData,"system",de)};function Y(de){Re.set(x.nodeModel.properties.nodeData,"modelParamsSetting",de)}function H(de){let ye=Re.cloneDeep(x.nodeModel.properties.nodeData.modelSetting);ye={...ye,...de},Re.set(x.nodeModel.properties.nodeData,"modelSetting",ye)}const B=Ue();function G(){B.value.open(b.value.toolIds)}function K(de){Re.set(x.nodeModel.properties.nodeData,"toolIds",de.toolIds)}function Q(de){const ye=x.nodeModel.properties.nodeData.toolIds.filter(we=>we!==de);Re.set(x.nodeModel.properties.nodeData,"toolIds",ye)}const ce=Ue([]);function ue(){var ye;const de=r.value==="systemManage"?{scope:"WORKSPACE",workspaceId:(ye=D.value)==null?void 0:ye.workspaceId}:{scope:"WORKSPACE"};Eo({type:"tool",systemType:r.value}).getAllToolList(de).then(we=>{ce.value=[...we.data.shared_tools,...we.data.tools].filter(me=>me.isActive)})}return oo(()=>{var de,ye;z(),typeof((de=x.nodeModel.properties.nodeData)==null?void 0:de.isResult)>"u"&&yc(x.nodeModel)&&Re.set(x.nodeModel.properties.nodeData,"isResult",!0),Re.set(x.nodeModel,"validate",j),b.value.dialogueType||(b.value.dialogueType="WORK_FLOW"),((ye=x.nodeModel.properties.nodeData)==null?void 0:ye.toolOutputEnable)===void 0&&Re.set(x.nodeModel.properties.nodeData,"toolOutputEnable",!0),ue()}),(de,ye)=>{const we=ee("el-button"),me=ee("el-form-item"),He=ee("el-tooltip"),tt=ee("el-option"),Ot=ee("el-select"),Je=ee("el-input-number"),Yt=ee("Plus"),Kt=ee("el-icon"),Ft=ee("el-avatar"),An=ee("ToolIcon"),Be=ee("Close"),Se=ee("el-switch"),Ce=ee("el-form"),Xe=ee("el-card");return Ne(),gt(Jo,{nodeModel:de.nodeModel},{default:C(()=>[J("h5",$B,Ee(de.$t("views.applicationWorkflow.nodeSetting")),1),P(Xe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(Ce,{onSubmit:ye[13]||(ye[13]=en(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:A,"hide-required-asterisk":""},{default:C(()=>{var _t,pt;return[P(me,{label:de.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:de.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:C(()=>[J("div",BB,[J("div",null,[J("span",null,[ut(Ee(de.$t("views.application.form.aiModel.label")),1),ye[14]||(ye[14]=J("span",{class:"color-danger"},"*",-1))])]),P(we,{disabled:!b.value.modelId,type:"primary",link:"",onClick:ye[0]||(ye[0]=bt=>U(b.value.modelId)),onRefreshForm:Y},{default:C(()=>[P(Cr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[P(Cf,{onChange:d,onWheel:u,teleported:!1,modelValue:b.value.modelId,"onUpdate:modelValue":ye[1]||(ye[1]=bt=>b.value.modelId=bt),placeholder:de.$t("views.application.form.aiModel.placeholder"),options:M.value,onSubmitModel:z,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),P(me,null,{label:C(()=>[J("div",UB,[J("div",VB,[J("span",null,Ee(de.$t("views.application.form.roleSettings.label")),1),P(He,{effect:"dark",content:de.$t("views.application.form.roleSettings.tooltip"),placement:"right"},{default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])]),P(we,{type:"primary",link:"",onClick:ye[2]||(ye[2]=bt=>$(b.value.modelId)),disabled:!b.value.modelId},{default:C(()=>[P(Cr,{iconName:"app-generate-star"})]),_:1},8,["disabled"])])]),default:C(()=>[P(ou,{title:de.$t("views.application.form.roleSettings.label"),modelValue:b.value.system,"onUpdate:modelValue":ye[3]||(ye[3]=bt=>b.value.system=bt),style:{height:"100px"},onSubmitDialog:c,placeholder:`${ar(St)("views.applicationWorkflow.SystemPromptPlaceholder")} {{${ar(St)("views.applicationWorkflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1}),P(me,{label:de.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:de.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:C(()=>[J("div",GB,[J("div",WB,[J("span",null,[ut(Ee(de.$t("views.application.form.prompt.label")),1),ye[15]||(ye[15]=J("span",{class:"color-danger"},"*",-1))])]),P(He,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(de.$t("views.application.form.prompt.tooltip")),1)]),default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[P(ou,{onWheel:u,title:de.$t("views.application.form.prompt.label"),modelValue:b.value.prompt,"onUpdate:modelValue":ye[4]||(ye[4]=bt=>b.value.prompt=bt),style:{height:"150px"},onSubmitDialog:v,placeholder:`${ar(St)("views.applicationWorkflow.UserPromptPlaceholder")}{{${ar(St)("views.applicationWorkflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),P(me,{label:de.$t("views.application.form.historyRecord.label")},{label:C(()=>[J("div",zB,[J("div",null,Ee(de.$t("views.application.form.historyRecord.label")),1),P(Ot,{modelValue:b.value.dialogueType,"onUpdate:modelValue":ye[5]||(ye[5]=bt=>b.value.dialogueType=bt),type:"small",style:{width:"100px"}},{default:C(()=>[P(tt,{label:de.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),P(tt,{label:de.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[P(Je,{modelValue:b.value.dialogueNumber,"onUpdate:modelValue":ye[6]||(ye[6]=bt=>b.value.dialogueNumber=bt),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),J("div",HB,[J("div",XB,Ee(de.$t("views.tool.title")),1),J("div",null,[P(we,{type:"primary",class:"mr-4",link:"",onClick:G,onRefreshForm:Y},{default:C(()=>[P(Kt,null,{default:C(()=>[P(Yt)]),_:1})]),_:1})])]),((_t=b.value.toolIds)==null?void 0:_t.length)>0?(Ne(),sn("div",qB,[(Ne(!0),sn(Dr,null,Oo(b.value.toolIds,(bt,nn)=>{var on,Xt,nt,fn;return Ne(),sn("div",{key:nn,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[J("div",YB,[(on=ar(Vd)(ce.value,bt,"id"))!=null&&on.icon?(Ne(),gt(Ft,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:C(()=>{var $e;return[J("img",{src:ar(Qp)(($e=ar(Vd)(ce.value,bt,"id"))==null?void 0:$e.icon),alt:""},null,8,KB)]}),_:2},1024)):(Ne(),gt(An,{key:1,type:(Xt=ar(Vd)(ce.value,bt,"id"))==null?void 0:Xt.toolType,class:"mr-8",size:20},null,8,["type"])),J("div",{class:"ellipsis",title:(nt=ar(Vd)(ce.value,bt,"id"))==null?void 0:nt.name},Ee((fn=ar(Vd)(ce.value,bt,"id"))==null?void 0:fn.name),9,ZB)]),P(we,{text:"",onClick:$e=>Q(bt)},{default:C(()=>[P(Kt,null,{default:C(()=>[P(Be)]),_:1})]),_:2},1032,["onClick"])])}),128))])):Rn("",!0),((pt=b.value.toolIds)==null?void 0:pt.length)>0?(Ne(),gt(me,{key:1,onClick:ye[8]||(ye[8]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",JB,[J("span",QB,Ee(de.$t("views.application.form.toolOutputEnable")),1),J("div",eU,[P(Se,{class:"ml-8",size:"small",modelValue:b.value.toolOutputEnable,"onUpdate:modelValue":ye[7]||(ye[7]=bt=>b.value.toolOutputEnable=bt)},null,8,["modelValue"])])])]),_:1})):Rn("",!0),P(me,{onClick:ye[10]||(ye[10]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",tU,[J("div",null,[J("span",null,Ee(de.$t("views.application.form.reasoningContent.label")),1)]),J("div",null,[P(Se,{size:"small",modelValue:b.value.modelSetting.reasoningContentEnable,"onUpdate:modelValue":ye[9]||(ye[9]=bt=>b.value.modelSetting.reasoningContentEnable=bt)},null,8,["modelValue"])])])]),_:1}),P(me,{onClick:ye[12]||(ye[12]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",nU,[J("div",rU,[J("div",oU,[J("span",null,Ee(de.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),P(He,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(de.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),J("div",iU,[P(Se,{size:"small",modelValue:b.value.isResult,"onUpdate:modelValue":ye[11]||(ye[11]=bt=>b.value.isResult=bt)},null,8,["modelValue"])])])]),_:1})]}),_:1},8,["model"])]),_:1}),P(fh,{ref_key:"AIModeParamSettingDialogRef",ref:O,onRefresh:Y},null,512),P(oM,{onReplace:X,ref_key:"GeneratePromptDialogRef",ref:L},null,512),P(EI,{ref_key:"ReasoningParamSettingDialogRef",ref:S,onRefresh:H},null,512),P(OI,{ref_key:"toolDialogRef",ref:B,onRefresh:K},null,512)]),_:1},8,["nodeModel"])}}});var lg={exports:{}},yx;function lU(){return yx||(yx=1,function(e,t){(function(n,a){e.exports=a()})(window,function(){return function(n){var a={};function r(u){if(a[u])return a[u].exports;var c=a[u]={i:u,l:!1,exports:{}};return n[u].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=a,r.d=function(u,c,v){r.o(u,c)||Object.defineProperty(u,c,{enumerable:!0,get:v})},r.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},r.t=function(u,c){if(1&c&&(u=r(u)),8&c||4&c&&typeof u=="object"&&u&&u.__esModule)return u;var v=Object.create(null);if(r.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:u}),2&c&&typeof u!="string")for(var d in u)r.d(v,d,(function(g){return u[g]}).bind(null,d));return v},r.n=function(u){var c=u&&u.__esModule?function(){return u.default}:function(){return u};return r.d(c,"a",c),c},r.o=function(u,c){return Object.prototype.hasOwnProperty.call(u,c)},r.p="",r(r.s=222)}([function(n,a,r){r.d(a,"a",function(){return L}),r.d(a,"b",function(){return U}),r.d(a,"c",function(){return Ft}),r.d(a,"d",function(){return An}),r.d(a,"e",function(){return j}),r.d(a,"f",function(){return z}),r.d(a,"g",function(){return j}),r.d(a,"h",function(){return Kt}),r.d(a,"i",function(){return c}),r.d(a,"j",function(){return Yt}),r.d(a,"k",function(){return K});var u,c,v,d,g,_,b,x={},A=[],M=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function O(Be,Se){for(var Ce in Se)Be[Ce]=Se[Ce];return Be}function S(Be){var Se=Be.parentNode;Se&&Se.removeChild(Be)}function j(Be,Se,Ce){var Xe,_t,pt,bt={};for(pt in Se)pt=="key"?Xe=Se[pt]:pt=="ref"?_t=Se[pt]:bt[pt]=Se[pt];if(arguments.length>2&&(bt.children=arguments.length>3?u.call(arguments,2):Ce),typeof Be=="function"&&Be.defaultProps!=null)for(pt in Be.defaultProps)bt[pt]===void 0&&(bt[pt]=Be.defaultProps[pt]);return D(Be,bt,Xe,_t,null)}function D(Be,Se,Ce,Xe,_t){var pt={type:Be,props:Se,key:Ce,ref:Xe,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:_t??++v};return _t==null&&c.vnode!=null&&c.vnode(pt),pt}function z(){return{current:null}}function U(Be){return Be.children}function L(Be,Se){this.props=Be,this.context=Se}function $(Be,Se){if(Se==null)return Be.__?$(Be.__,Be.__.__k.indexOf(Be)+1):null;for(var Ce;Se<Be.__k.length;Se++)if((Ce=Be.__k[Se])!=null&&Ce.__e!=null)return Ce.__e;return typeof Be.type=="function"?$(Be):null}function X(Be){var Se,Ce;if((Be=Be.__)!=null&&Be.__c!=null){for(Be.__e=Be.__c.base=null,Se=0;Se<Be.__k.length;Se++)if((Ce=Be.__k[Se])!=null&&Ce.__e!=null){Be.__e=Be.__c.base=Ce.__e;break}return X(Be)}}function Y(Be){(!Be.__d&&(Be.__d=!0)&&d.push(Be)&&!H.__r++||_!==c.debounceRendering)&&((_=c.debounceRendering)||g)(H)}function H(){for(var Be;H.__r=d.length;)Be=d.sort(function(Se,Ce){return Se.__v.__b-Ce.__v.__b}),d=[],Be.some(function(Se){var Ce,Xe,_t,pt,bt,nn;Se.__d&&(bt=(pt=(Ce=Se).__v).__e,(nn=Ce.__P)&&(Xe=[],(_t=O({},pt)).__v=pt.__v+1,we(nn,pt,_t,Ce.__n,nn.ownerSVGElement!==void 0,pt.__h!=null?[bt]:null,Xe,bt??$(pt),pt.__h),me(Xe,pt),pt.__e!=bt&&X(pt)))})}function B(Be,Se,Ce,Xe,_t,pt,bt,nn,on,Xt){var nt,fn,$e,bn,Zn,ie,Jn,kr=Xe&&Xe.__k||A,Wr=kr.length;for(Ce.__k=[],nt=0;nt<Se.length;nt++)if((bn=Ce.__k[nt]=(bn=Se[nt])==null||typeof bn=="boolean"?null:typeof bn=="string"||typeof bn=="number"||typeof bn=="bigint"?D(null,bn,null,null,bn):Array.isArray(bn)?D(U,{children:bn},null,null,null):bn.__b>0?D(bn.type,bn.props,bn.key,null,bn.__v):bn)!=null){if(bn.__=Ce,bn.__b=Ce.__b+1,($e=kr[nt])===null||$e&&bn.key==$e.key&&bn.type===$e.type)kr[nt]=void 0;else for(fn=0;fn<Wr;fn++){if(($e=kr[fn])&&bn.key==$e.key&&bn.type===$e.type){kr[fn]=void 0;break}$e=null}we(Be,bn,$e=$e||x,_t,pt,bt,nn,on,Xt),Zn=bn.__e,(fn=bn.ref)&&$e.ref!=fn&&(Jn||(Jn=[]),$e.ref&&Jn.push($e.ref,null,bn),Jn.push(fn,bn.__c||Zn,bn)),Zn!=null?(ie==null&&(ie=Zn),typeof bn.type=="function"&&bn.__k===$e.__k?bn.__d=on=G(bn,on,Be):on=Q(Be,bn,$e,kr,Zn,on),typeof Ce.type=="function"&&(Ce.__d=on)):on&&$e.__e==on&&on.parentNode!=Be&&(on=$($e))}for(Ce.__e=ie,nt=Wr;nt--;)kr[nt]!=null&&(typeof Ce.type=="function"&&kr[nt].__e!=null&&kr[nt].__e==Ce.__d&&(Ce.__d=$(Xe,nt+1)),Ot(kr[nt],kr[nt]));if(Jn)for(nt=0;nt<Jn.length;nt++)tt(Jn[nt],Jn[++nt],Jn[++nt])}function G(Be,Se,Ce){for(var Xe,_t=Be.__k,pt=0;_t&&pt<_t.length;pt++)(Xe=_t[pt])&&(Xe.__=Be,Se=typeof Xe.type=="function"?G(Xe,Se,Ce):Q(Ce,Xe,Xe,_t,Xe.__e,Se));return Se}function K(Be,Se){return Se=Se||[],Be==null||typeof Be=="boolean"||(Array.isArray(Be)?Be.some(function(Ce){K(Ce,Se)}):Se.push(Be)),Se}function Q(Be,Se,Ce,Xe,_t,pt){var bt,nn,on;if(Se.__d!==void 0)bt=Se.__d,Se.__d=void 0;else if(Ce==null||_t!=pt||_t.parentNode==null)e:if(pt==null||pt.parentNode!==Be)Be.appendChild(_t),bt=null;else{for(nn=pt,on=0;(nn=nn.nextSibling)&&on<Xe.length;on+=2)if(nn==_t)break e;Be.insertBefore(_t,pt),bt=pt}return bt!==void 0?bt:_t.nextSibling}function ce(Be,Se,Ce){Se[0]==="-"?Be.setProperty(Se,Ce):Be[Se]=Ce==null?"":typeof Ce!="number"||M.test(Se)?Ce:Ce+"px"}function ue(Be,Se,Ce,Xe,_t){var pt;e:if(Se==="style")if(typeof Ce=="string")Be.style.cssText=Ce;else{if(typeof Xe=="string"&&(Be.style.cssText=Xe=""),Xe)for(Se in Xe)Ce&&Se in Ce||ce(Be.style,Se,"");if(Ce)for(Se in Ce)Xe&&Ce[Se]===Xe[Se]||ce(Be.style,Se,Ce[Se])}else if(Se[0]==="o"&&Se[1]==="n")pt=Se!==(Se=Se.replace(/Capture$/,"")),Se=Se.toLowerCase()in Be?Se.toLowerCase().slice(2):Se.slice(2),Be.l||(Be.l={}),Be.l[Se+pt]=Ce,Ce?Xe||Be.addEventListener(Se,pt?ye:de,pt):Be.removeEventListener(Se,pt?ye:de,pt);else if(Se!=="dangerouslySetInnerHTML"){if(_t)Se=Se.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(Se!=="href"&&Se!=="list"&&Se!=="form"&&Se!=="tabIndex"&&Se!=="download"&&Se in Be)try{Be[Se]=Ce??"";break e}catch{}typeof Ce=="function"||(Ce!=null&&(Ce!==!1||Se[0]==="a"&&Se[1]==="r")?Be.setAttribute(Se,Ce):Be.removeAttribute(Se))}}function de(Be){this.l[Be.type+!1](c.event?c.event(Be):Be)}function ye(Be){this.l[Be.type+!0](c.event?c.event(Be):Be)}function we(Be,Se,Ce,Xe,_t,pt,bt,nn,on){var Xt,nt,fn,$e,bn,Zn,ie,Jn,kr,Wr,uo,Fn=Se.type;if(Se.constructor!==void 0)return null;Ce.__h!=null&&(on=Ce.__h,nn=Se.__e=Ce.__e,Se.__h=null,pt=[nn]),(Xt=c.__b)&&Xt(Se);try{e:if(typeof Fn=="function"){if(Jn=Se.props,kr=(Xt=Fn.contextType)&&Xe[Xt.__c],Wr=Xt?kr?kr.props.value:Xt.__:Xe,Ce.__c?ie=(nt=Se.__c=Ce.__c).__=nt.__E:("prototype"in Fn&&Fn.prototype.render?Se.__c=nt=new Fn(Jn,Wr):(Se.__c=nt=new L(Jn,Wr),nt.constructor=Fn,nt.render=Je),kr&&kr.sub(nt),nt.props=Jn,nt.state||(nt.state={}),nt.context=Wr,nt.__n=Xe,fn=nt.__d=!0,nt.__h=[]),nt.__s==null&&(nt.__s=nt.state),Fn.getDerivedStateFromProps!=null&&(nt.__s==nt.state&&(nt.__s=O({},nt.__s)),O(nt.__s,Fn.getDerivedStateFromProps(Jn,nt.__s))),$e=nt.props,bn=nt.state,fn)Fn.getDerivedStateFromProps==null&&nt.componentWillMount!=null&&nt.componentWillMount(),nt.componentDidMount!=null&&nt.__h.push(nt.componentDidMount);else{if(Fn.getDerivedStateFromProps==null&&Jn!==$e&&nt.componentWillReceiveProps!=null&&nt.componentWillReceiveProps(Jn,Wr),!nt.__e&&nt.shouldComponentUpdate!=null&&nt.shouldComponentUpdate(Jn,nt.__s,Wr)===!1||Se.__v===Ce.__v){nt.props=Jn,nt.state=nt.__s,Se.__v!==Ce.__v&&(nt.__d=!1),nt.__v=Se,Se.__e=Ce.__e,Se.__k=Ce.__k,Se.__k.forEach(function(yo){yo&&(yo.__=Se)}),nt.__h.length&&bt.push(nt);break e}nt.componentWillUpdate!=null&&nt.componentWillUpdate(Jn,nt.__s,Wr),nt.componentDidUpdate!=null&&nt.__h.push(function(){nt.componentDidUpdate($e,bn,Zn)})}nt.context=Wr,nt.props=Jn,nt.state=nt.__s,(Xt=c.__r)&&Xt(Se),nt.__d=!1,nt.__v=Se,nt.__P=Be,Xt=nt.render(nt.props,nt.state,nt.context),nt.state=nt.__s,nt.getChildContext!=null&&(Xe=O(O({},Xe),nt.getChildContext())),fn||nt.getSnapshotBeforeUpdate==null||(Zn=nt.getSnapshotBeforeUpdate($e,bn)),uo=Xt!=null&&Xt.type===U&&Xt.key==null?Xt.props.children:Xt,B(Be,Array.isArray(uo)?uo:[uo],Se,Ce,Xe,_t,pt,bt,nn,on),nt.base=Se.__e,Se.__h=null,nt.__h.length&&bt.push(nt),ie&&(nt.__E=nt.__=null),nt.__e=!1}else pt==null&&Se.__v===Ce.__v?(Se.__k=Ce.__k,Se.__e=Ce.__e):Se.__e=He(Ce.__e,Se,Ce,Xe,_t,pt,bt,on);(Xt=c.diffed)&&Xt(Se)}catch(yo){Se.__v=null,(on||pt!=null)&&(Se.__e=nn,Se.__h=!!on,pt[pt.indexOf(nn)]=null),c.__e(yo,Se,Ce)}}function me(Be,Se){c.__c&&c.__c(Se,Be),Be.some(function(Ce){try{Be=Ce.__h,Ce.__h=[],Be.some(function(Xe){Xe.call(Ce)})}catch(Xe){c.__e(Xe,Ce.__v)}})}function He(Be,Se,Ce,Xe,_t,pt,bt,nn){var on,Xt,nt,fn=Ce.props,$e=Se.props,bn=Se.type,Zn=0;if(bn==="svg"&&(_t=!0),pt!=null){for(;Zn<pt.length;Zn++)if((on=pt[Zn])&&"setAttribute"in on==!!bn&&(bn?on.localName===bn:on.nodeType===3)){Be=on,pt[Zn]=null;break}}if(Be==null){if(bn===null)return document.createTextNode($e);Be=_t?document.createElementNS("http://www.w3.org/2000/svg",bn):document.createElement(bn,$e.is&&$e),pt=null,nn=!1}if(bn===null)fn===$e||nn&&Be.data===$e||(Be.data=$e);else{if(pt=pt&&u.call(Be.childNodes),Xt=(fn=Ce.props||x).dangerouslySetInnerHTML,nt=$e.dangerouslySetInnerHTML,!nn){if(pt!=null)for(fn={},Zn=0;Zn<Be.attributes.length;Zn++)fn[Be.attributes[Zn].name]=Be.attributes[Zn].value;(nt||Xt)&&(nt&&(Xt&&nt.__html==Xt.__html||nt.__html===Be.innerHTML)||(Be.innerHTML=nt&&nt.__html||""))}if(function(ie,Jn,kr,Wr,uo){var Fn;for(Fn in kr)Fn==="children"||Fn==="key"||Fn in Jn||ue(ie,Fn,null,kr[Fn],Wr);for(Fn in Jn)uo&&typeof Jn[Fn]!="function"||Fn==="children"||Fn==="key"||Fn==="value"||Fn==="checked"||kr[Fn]===Jn[Fn]||ue(ie,Fn,Jn[Fn],kr[Fn],Wr)}(Be,$e,fn,_t,nn),nt)Se.__k=[];else if(Zn=Se.props.children,B(Be,Array.isArray(Zn)?Zn:[Zn],Se,Ce,Xe,_t&&bn!=="foreignObject",pt,bt,pt?pt[0]:Ce.__k&&$(Ce,0),nn),pt!=null)for(Zn=pt.length;Zn--;)pt[Zn]!=null&&S(pt[Zn]);nn||("value"in $e&&(Zn=$e.value)!==void 0&&(Zn!==fn.value||Zn!==Be.value||bn==="progress"&&!Zn)&&ue(Be,"value",Zn,fn.value,!1),"checked"in $e&&(Zn=$e.checked)!==void 0&&Zn!==Be.checked&&ue(Be,"checked",Zn,fn.checked,!1))}return Be}function tt(Be,Se,Ce){try{typeof Be=="function"?Be(Se):Be.current=Se}catch(Xe){c.__e(Xe,Ce)}}function Ot(Be,Se,Ce){var Xe,_t;if(c.unmount&&c.unmount(Be),(Xe=Be.ref)&&(Xe.current&&Xe.current!==Be.__e||tt(Xe,null,Se)),(Xe=Be.__c)!=null){if(Xe.componentWillUnmount)try{Xe.componentWillUnmount()}catch(pt){c.__e(pt,Se)}Xe.base=Xe.__P=null}if(Xe=Be.__k)for(_t=0;_t<Xe.length;_t++)Xe[_t]&&Ot(Xe[_t],Se,typeof Be.type!="function");Ce||Be.__e==null||S(Be.__e),Be.__e=Be.__d=void 0}function Je(Be,Se,Ce){return this.constructor(Be,Ce)}function Yt(Be,Se,Ce){var Xe,_t,pt;c.__&&c.__(Be,Se),_t=(Xe=typeof Ce=="function")?null:Ce&&Ce.__k||Se.__k,pt=[],we(Se,Be=(!Xe&&Ce||Se).__k=j(U,null,[Be]),_t||x,x,Se.ownerSVGElement!==void 0,!Xe&&Ce?[Ce]:_t?null:Se.firstChild?u.call(Se.childNodes):null,pt,!Xe&&Ce?Ce:_t?_t.__e:Se.firstChild,Xe),me(pt,Be)}function Kt(Be,Se){Yt(Be,Se,Kt)}function Ft(Be,Se,Ce){var Xe,_t,pt,bt=O({},Be.props);for(pt in Se)pt=="key"?Xe=Se[pt]:pt=="ref"?_t=Se[pt]:bt[pt]=Se[pt];return arguments.length>2&&(bt.children=arguments.length>3?u.call(arguments,2):Ce),D(Be.type,bt,Xe||Be.key,_t||Be.ref,null)}function An(Be,Se){var Ce={__c:Se="__cC"+b++,__:Be,Consumer:function(Xe,_t){return Xe.children(_t)},Provider:function(Xe){var _t,pt;return this.getChildContext||(_t=[],(pt={})[Se]=this,this.getChildContext=function(){return pt},this.shouldComponentUpdate=function(bt){this.props.value!==bt.value&&_t.some(Y)},this.sub=function(bt){_t.push(bt);var nn=bt.componentWillUnmount;bt.componentWillUnmount=function(){_t.splice(_t.indexOf(bt),1),nn&&nn.call(bt)}}),Xe.children}};return Ce.Provider.__=Ce.Consumer.contextType=Ce}u=A.slice,c={__e:function(Be,Se){for(var Ce,Xe,_t;Se=Se.__;)if((Ce=Se.__c)&&!Ce.__)try{if((Xe=Ce.constructor)&&Xe.getDerivedStateFromError!=null&&(Ce.setState(Xe.getDerivedStateFromError(Be)),_t=Ce.__d),Ce.componentDidCatch!=null&&(Ce.componentDidCatch(Be),_t=Ce.__d),_t)return Ce.__E=Ce}catch(pt){Be=pt}throw Be}},v=0,L.prototype.setState=function(Be,Se){var Ce;Ce=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=O({},this.state),typeof Be=="function"&&(Be=Be(O({},Ce),this.props)),Be&&O(Ce,Be),Be!=null&&this.__v&&(Se&&this.__h.push(Se),Y(this))},L.prototype.forceUpdate=function(Be){this.__v&&(this.__e=!0,Be&&this.__h.push(Be),Y(this))},L.prototype.render=U,d=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,H.__r=0,b=0},function(n,a,r){(function(u,c){r.d(a,"a",function(){return Y}),r.d(a,"b",function(){return Cc}),r.d(a,"c",function(){return Da}),r.d(a,"d",function(){return Hn}),r.d(a,"e",function(){return Zt}),r.d(a,"f",function(){return tn}),r.d(a,"g",function(){return $n}),r.d(a,"h",function(){return Ii}),r.d(a,"i",function(){return uo}),r.d(a,"j",function(){return Tn}),r.d(a,"k",function(){return gl}),r.d(a,"l",function(){return Tc}),r.d(a,"m",function(){return ie}),r.d(a,"n",function(){return lu}),r.d(a,"o",function(){return G}),r.d(a,"p",function(){return ip}),r.d(a,"q",function(){return ya}),r.d(a,"r",function(){return uu}),r.d(a,"s",function(){return sa}),r.d(a,"t",function(){return Fo}),r.d(a,"u",function(){return Ns}),r.d(a,"v",function(){return Xf}),r.d(a,"w",function(){return kc}),r.d(a,"x",function(){return ui}),r.d(a,"y",function(){return ba}),r.d(a,"z",function(){return Ho}),r.d(a,"A",function(){return ci}),r.d(a,"B",function(){return ga}),r.d(a,"C",function(){return Xt}),r.d(a,"D",function(){return qf}),r.d(a,"E",function(){return zr}),r.d(a,"F",function(){return qr}),r.d(a,"G",function(){return xc}),r.d(a,"H",function(){return Sc}),r.d(a,"I",function(){return Pc}),r.d(a,"J",function(){return si}),r.d(a,"K",function(){return Ye}),r.d(a,"L",function(){return io}),r.d(a,"M",function(){return js});var v=[];Object.freeze(v);var d={};function g(){return++Pn.mobxGuid}function _(k){throw b(!1,k),"X"}function b(k,R){if(!k)throw new Error("[mobx] "+(R||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(d);function x(k){var R=!1;return function(){if(!R)return R=!0,k.apply(this,arguments)}}var A=function(){};function M(k){return k!==null&&typeof k=="object"}function O(k){if(k===null||typeof k!="object")return!1;var R=Object.getPrototypeOf(k);return R===Object.prototype||R===null}function S(k,R,W){Object.defineProperty(k,R,{enumerable:!1,writable:!0,configurable:!0,value:W})}function j(k,R){var W="isMobX"+k;return R.prototype[W]=!0,function(oe){return M(oe)&&oe[W]===!0}}function D(k){return k instanceof Map}function z(k){return k instanceof Set}function U(k){var R=new Set;for(var W in k)R.add(W);return Object.getOwnPropertySymbols(k).forEach(function(oe){Object.getOwnPropertyDescriptor(k,oe).enumerable&&R.add(oe)}),Array.from(R)}function L(k){return k&&k.toString?k.toString():new String(k).toString()}function $(k){return k===null?null:typeof k=="object"?""+k:k}var X=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:Object.getOwnPropertyNames,Y=Symbol("mobx administration"),H=function(){function k(R){R===void 0&&(R="Atom@"+g()),this.name=R,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=fn.NOT_TRACKING}return k.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(R){return R()})},k.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(R){return R()})},k.prototype.reportObserved=function(){return Rs(this)},k.prototype.reportChanged=function(){Zi(),function(R){R.lowestObserverState!==fn.STALE&&(R.lowestObserverState=fn.STALE,R.observers.forEach(function(W){W.dependenciesState===fn.UP_TO_DATE&&(W.isTracing!==$e.NONE&&Ca(W,R),W.onBecomeStale()),W.dependenciesState=fn.STALE}))}(this),la()},k.prototype.toString=function(){return this.name},k}(),B=j("Atom",H);function G(k,R,W){R===void 0&&(R=A),W===void 0&&(W=A);var oe,be=new H(k);return R!==A&&zf("onBecomeObserved",be,R,oe),W!==A&&zr(be,W),be}var K={structural:function(k,R){return $t(k,R)},default:function(k,R){return Object.is(k,R)}},Q=function(k,R){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,oe){W.__proto__=oe}||function(W,oe){for(var be in oe)oe.hasOwnProperty(be)&&(W[be]=oe[be])},Q(k,R)};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation. All rights reserved.
		Licensed under the Apache License, Version 2.0 (the "License"); you may not use
		this file except in compliance with the License. You may obtain a copy of the
		License at http://www.apache.org/licenses/LICENSE-2.0

		THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
		KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
		WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
		MERCHANTABLITY OR NON-INFRINGEMENT.

		See the Apache Version 2.0 License for specific language governing permissions
		and limitations under the License.
		***************************************************************************** */var ce=function(){return ce=Object.assign||function(k){for(var R,W=1,oe=arguments.length;W<oe;W++)for(var be in R=arguments[W])Object.prototype.hasOwnProperty.call(R,be)&&(k[be]=R[be]);return k},ce.apply(this,arguments)};function ue(k){var R=typeof Symbol=="function"&&k[Symbol.iterator],W=0;return R?R.call(k):{next:function(){return k&&W>=k.length&&(k=void 0),{value:k&&k[W++],done:!k}}}}function de(k,R){var W=typeof Symbol=="function"&&k[Symbol.iterator];if(!W)return k;var oe,be,qe=W.call(k),mt=[];try{for(;(R===void 0||R-- >0)&&!(oe=qe.next()).done;)mt.push(oe.value)}catch(zt){be={error:zt}}finally{try{oe&&!oe.done&&(W=qe.return)&&W.call(qe)}finally{if(be)throw be.error}}return mt}function ye(){for(var k=[],R=0;R<arguments.length;R++)k=k.concat(de(arguments[R]));return k}var we=Symbol("mobx did run lazy initializers"),me=Symbol("mobx pending decorators"),He={},tt={};function Ot(k,R){var W=R?He:tt;return W[k]||(W[k]={configurable:!0,enumerable:R,get:function(){return Je(this),this[k]},set:function(oe){Je(this),this[k]=oe}})}function Je(k){var R,W;if(k[we]!==!0){var oe=k[me];if(oe){S(k,we,!0);var be=ye(Object.getOwnPropertySymbols(oe),Object.keys(oe));try{for(var qe=ue(be),mt=qe.next();!mt.done;mt=qe.next()){var zt=oe[mt.value];zt.propertyCreator(k,zt.prop,zt.descriptor,zt.decoratorTarget,zt.decoratorArguments)}}catch(En){R={error:En}}finally{try{mt&&!mt.done&&(W=qe.return)&&W.call(qe)}finally{if(R)throw R.error}}}}}function Yt(k,R){return function(){var W,oe=function(be,qe,mt,zt){if(zt===!0)return R(be,qe,mt,be,W),null;if(!Object.prototype.hasOwnProperty.call(be,me)){var En=be[me];S(be,me,ce({},En))}return be[me][qe]={prop:qe,propertyCreator:R,descriptor:mt,decoratorTarget:be,decoratorArguments:W},Ot(qe,k)};return Kt(arguments)?(W=v,oe.apply(null,arguments)):(W=Array.prototype.slice.call(arguments),oe)}}function Kt(k){return(k.length===2||k.length===3)&&(typeof k[1]=="string"||typeof k[1]=="symbol")||k.length===4&&k[3]===!0}function Ft(k,R,W){return ui(k)?k:Array.isArray(k)?Xt.array(k,{name:W}):O(k)?Xt.object(k,void 0,{name:W}):D(k)?Xt.map(k,{name:W}):z(k)?Xt.set(k,{name:W}):k}function An(k){return k}function Be(k){b(k);var R=Yt(!0,function(oe,be,qe,mt,zt){var En=qe?qe.initializer?qe.initializer.call(oe):qe.value:void 0;ua(oe).addObservableProp(be,En,k)}),W=(u!==void 0&&u.env,R);return W.enhancer=k,W}var Se={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ce(k){return k==null?Se:typeof k=="string"?{name:k,deep:!0,proxy:!0}:k}Object.freeze(Se);var Xe=Be(Ft),_t=Be(function(k,R,W){return k==null||ci(k)||ba(k)||Ho(k)||ni(k)?k:Array.isArray(k)?Xt.array(k,{name:W,deep:!1}):O(k)?Xt.object(k,void 0,{name:W,deep:!1}):D(k)?Xt.map(k,{name:W,deep:!1}):z(k)?Xt.set(k,{name:W,deep:!1}):_(!1)}),pt=Be(An),bt=Be(function(k,R,W){return $t(k,R)?R:k});function nn(k){return k.defaultDecorator?k.defaultDecorator.enhancer:k.deep===!1?An:Ft}var on={box:function(k,R){arguments.length>2&&nt("box");var W=Ce(R);return new jr(k,nn(W),W.name,!0,W.equals)},array:function(k,R){arguments.length>2&&nt("array");var W=Ce(R);return Fl(k,nn(W),W.name)},map:function(k,R){arguments.length>2&&nt("map");var W=Ce(R);return new Cc(k,nn(W),W.name)},set:function(k,R){arguments.length>2&&nt("set");var W=Ce(R);return new Ya(k,nn(W),W.name)},object:function(k,R,W){typeof arguments[1]=="string"&&nt("object");var oe=Ce(W);if(oe.proxy===!1)return ya({},k,R,oe);var be=Cs(oe),qe=ya({},void 0,void 0,oe),mt=su(qe);return Hf(mt,k,R,be),mt},ref:pt,shallow:_t,deep:Xe,struct:bt},Xt=function(k,R,W){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return Xe.apply(null,arguments);if(ui(k))return k;var oe=O(k)?Xt.object(k,R,W):Array.isArray(k)?Xt.array(k,R):D(k)?Xt.map(k,R):z(k)?Xt.set(k,R):k;if(oe!==k)return oe;_(!1)};function nt(k){_("Expected one or two arguments to observable."+k+". Did you accidentally try to use observable."+k+" as decorator?")}Object.keys(on).forEach(function(k){return Xt[k]=on[k]});var fn,$e,bn=Yt(!1,function(k,R,W,oe,be){var qe=W.get,mt=W.set,zt=be[0]||{};ua(k).addComputedProp(k,R,ce({get:qe,set:mt,context:k},zt))}),Zn=bn({equals:K.structural}),ie=function(k,R,W){if(typeof R=="string"||k!==null&&typeof k=="object"&&arguments.length===1)return bn.apply(null,arguments);var oe=typeof R=="object"?R:{};return oe.get=k,oe.set=typeof R=="function"?R:oe.set,oe.name=oe.name||k.name||"",new Ha(oe)};ie.struct=Zn,function(k){k[k.NOT_TRACKING=-1]="NOT_TRACKING",k[k.UP_TO_DATE=0]="UP_TO_DATE",k[k.POSSIBLY_STALE=1]="POSSIBLY_STALE",k[k.STALE=2]="STALE"}(fn||(fn={})),function(k){k[k.NONE=0]="NONE",k[k.LOG=1]="LOG",k[k.BREAK=2]="BREAK"}($e||($e={}));var Jn=function(k){this.cause=k};function kr(k){return k instanceof Jn}function Wr(k){switch(k.dependenciesState){case fn.UP_TO_DATE:return!1;case fn.NOT_TRACKING:case fn.STALE:return!0;case fn.POSSIBLY_STALE:for(var R=tn(!0),W=Ie(),oe=k.observing,be=oe.length,qe=0;qe<be;qe++){var mt=oe[qe];if(yl(mt)){if(Pn.disableErrorBoundaries)mt.get();else try{mt.get()}catch{return lt(W),Zt(R),!0}if(k.dependenciesState===fn.STALE)return lt(W),Zt(R),!0}}return Nn(k),lt(W),Zt(R),!1}}function uo(){return Pn.trackingDerivation!==null}function Fn(k){var R=k.observers.size>0;Pn.computationDepth>0&&R&&_(!1),Pn.allowStateChanges||!R&&Pn.enforceActions!=="strict"||_(!1)}function yo(k,R,W){var oe=tn(!0);Nn(k),k.newObserving=new Array(k.observing.length+100),k.unboundDepsCount=0,k.runId=++Pn.runId;var be,qe=Pn.trackingDerivation;if(Pn.trackingDerivation=k,Pn.disableErrorBoundaries===!0)be=R.call(W);else try{be=R.call(W)}catch(mt){be=new Jn(mt)}return Pn.trackingDerivation=qe,function(mt){for(var zt=mt.observing,En=mt.observing=mt.newObserving,br=fn.UP_TO_DATE,dn=0,Hr=mt.unboundDepsCount,mr=0;mr<Hr;mr++)(Lr=En[mr]).diffValue===0&&(Lr.diffValue=1,dn!==mr&&(En[dn]=Lr),dn++),Lr.dependenciesState>br&&(br=Lr.dependenciesState);for(En.length=dn,mt.newObserving=null,Hr=zt.length;Hr--;)(Lr=zt[Hr]).diffValue===0&&go(Lr,mt),Lr.diffValue=0;for(;dn--;){var Lr;(Lr=En[dn]).diffValue===1&&(Lr.diffValue=0,Bf(Lr,mt))}br!==fn.UP_TO_DATE&&(mt.dependenciesState=br,mt.onBecomeStale())}(k),Zt(oe),be}function Ae(k){var R=k.observing;k.observing=[];for(var W=R.length;W--;)go(R[W],k);k.dependenciesState=fn.NOT_TRACKING}function Ye(k){var R=Ie();try{return k()}finally{lt(R)}}function Ie(){var k=Pn.trackingDerivation;return Pn.trackingDerivation=null,k}function lt(k){Pn.trackingDerivation=k}function tn(k){var R=Pn.allowStateReads;return Pn.allowStateReads=k,R}function Zt(k){Pn.allowStateReads=k}function Nn(k){if(k.dependenciesState!==fn.UP_TO_DATE){k.dependenciesState=fn.UP_TO_DATE;for(var R=k.observing,W=R.length;W--;)R[W].lowestObserverState=fn.UP_TO_DATE}}var Er=0,li=1,Si=Object.getOwnPropertyDescriptor(function(){},"name");Si&&Si.configurable;function zo(k,R,W){var oe=function(){return ti(k,R,W||this,arguments)};return oe.isMobxAction=!0,oe}function ti(k,R,W,oe){var be=Tn();try{return R.apply(W,oe)}catch(qe){throw be.error=qe,qe}finally{$n(be)}}function Tn(k,R,W){var oe=0,be=Ie();Zi();var qe={prevDerivation:be,prevAllowStateChanges:lr(!0),prevAllowStateReads:tn(!0),notifySpy:!1,startTime:oe,actionId:li++,parentActionId:Er};return Er=qe.actionId,qe}function $n(k){Er!==k.actionId&&_("invalid action stack. did you forget to finish an action?"),Er=k.parentActionId,k.error!==void 0&&(Pn.suppressReactionErrors=!0),eo(k.prevAllowStateChanges),Zt(k.prevAllowStateReads),la(),lt(k.prevDerivation),k.notifySpy,Pn.suppressReactionErrors=!1}function Hn(k,R){var W,oe=lr(k);try{W=R()}finally{eo(oe)}return W}function lr(k){var R=Pn.allowStateChanges;return Pn.allowStateChanges=k,R}function eo(k){Pn.allowStateChanges=k}var jr=function(k){function R(W,oe,be,qe,mt){be===void 0&&(be="ObservableValue@"+g()),mt===void 0&&(mt=K.default);var zt=k.call(this,be)||this;return zt.enhancer=oe,zt.name=be,zt.equals=mt,zt.hasUnreportedChange=!1,zt.value=oe(W,void 0,be),zt}return function(W,oe){function be(){this.constructor=W}Q(W,oe),W.prototype=oe===null?Object.create(oe):(be.prototype=oe.prototype,new be)}(R,k),R.prototype.dehanceValue=function(W){return this.dehancer!==void 0?this.dehancer(W):W},R.prototype.set=function(W){this.value,(W=this.prepareNewValue(W))!==Pn.UNCHANGED&&this.setNewValue(W)},R.prototype.prepareNewValue=function(W){if(Fn(this),Qi(this)){var oe=Pr(this,{object:this,type:"update",newValue:W});if(!oe)return Pn.UNCHANGED;W=oe.newValue}return W=this.enhancer(W,this.value,this.name),this.equals(this.value,W)?Pn.UNCHANGED:W},R.prototype.setNewValue=function(W){var oe=this.value;this.value=W,this.reportChanged(),Gi(this)&&yi(this,{type:"update",object:this,newValue:W,oldValue:oe})},R.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},R.prototype.intercept=function(W){return _a(this,W)},R.prototype.observe=function(W,oe){return oe&&W({object:this,type:"update",newValue:this.value,oldValue:void 0}),ja(this,W)},R.prototype.toJSON=function(){return this.get()},R.prototype.toString=function(){return this.name+"["+this.value+"]"},R.prototype.valueOf=function(){return $(this.get())},R.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},R}(H),ml=j("ObservableValue",jr),Ha=function(){function k(R){this.dependenciesState=fn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=fn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new Jn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=$e.NONE,b(R.get,"missing option for computed: get"),this.derivation=R.get,this.name=R.name||"ComputedValue@"+g(),R.set&&(this.setter=zo(this.name+"-setter",R.set)),this.equals=R.equals||(R.compareStructural||R.struct?K.structural:K.default),this.scope=R.context,this.requiresReaction=!!R.requiresReaction,this.keepAlive=!!R.keepAlive}return k.prototype.onBecomeStale=function(){(function(R){R.lowestObserverState===fn.UP_TO_DATE&&(R.lowestObserverState=fn.POSSIBLY_STALE,R.observers.forEach(function(W){W.dependenciesState===fn.UP_TO_DATE&&(W.dependenciesState=fn.POSSIBLY_STALE,W.isTracing!==$e.NONE&&Ca(W,R),W.onBecomeStale())}))})(this)},k.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(R){return R()})},k.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(R){return R()})},k.prototype.get=function(){this.isComputing&&_("Cycle detected in computation "+this.name+": "+this.derivation),Pn.inBatch!==0||this.observers.size!==0||this.keepAlive?(Rs(this),Wr(this)&&this.trackAndCompute()&&function(W){W.lowestObserverState!==fn.STALE&&(W.lowestObserverState=fn.STALE,W.observers.forEach(function(oe){oe.dependenciesState===fn.POSSIBLY_STALE?oe.dependenciesState=fn.STALE:oe.dependenciesState===fn.UP_TO_DATE&&(W.lowestObserverState=fn.UP_TO_DATE)}))}(this)):Wr(this)&&(this.warnAboutUntrackedRead(),Zi(),this.value=this.computeValue(!1),la());var R=this.value;if(kr(R))throw R.cause;return R},k.prototype.peek=function(){var R=this.computeValue(!1);if(kr(R))throw R.cause;return R},k.prototype.set=function(R){if(this.setter){b(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,R)}finally{this.isRunningSetter=!1}}else b(!1,!1)},k.prototype.trackAndCompute=function(){var R=this.value,W=this.dependenciesState===fn.NOT_TRACKING,oe=this.computeValue(!0),be=W||kr(R)||kr(oe)||!this.equals(R,oe);return be&&(this.value=oe),be},k.prototype.computeValue=function(R){var W;if(this.isComputing=!0,Pn.computationDepth++,R)W=yo(this,this.derivation,this.scope);else if(Pn.disableErrorBoundaries===!0)W=this.derivation.call(this.scope);else try{W=this.derivation.call(this.scope)}catch(oe){W=new Jn(oe)}return Pn.computationDepth--,this.isComputing=!1,W},k.prototype.suspend=function(){this.keepAlive||(Ae(this),this.value=void 0)},k.prototype.observe=function(R,W){var oe=this,be=!0,qe=void 0;return Tc(function(){var mt=oe.get();if(!be||W){var zt=Ie();R({type:"update",object:oe,newValue:mt,oldValue:qe}),lt(zt)}be=!1,qe=mt})},k.prototype.warnAboutUntrackedRead=function(){},k.prototype.toJSON=function(){return this.get()},k.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},k.prototype.valueOf=function(){return $(this.get())},k.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},k}(),yl=j("ComputedValue",Ha),au=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},np={};function bc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:np}var va=!0,Bu=!1,Pn=function(){var k=bc();return k.__mobxInstanceCount>0&&!k.__mobxGlobals&&(va=!1),k.__mobxGlobals&&k.__mobxGlobals.version!==new au().version&&(va=!1),va?k.__mobxGlobals?(k.__mobxInstanceCount+=1,k.__mobxGlobals.UNCHANGED||(k.__mobxGlobals.UNCHANGED={}),k.__mobxGlobals):(k.__mobxInstanceCount=1,k.__mobxGlobals=new au):(setTimeout(function(){Bu||_("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new au)}();function Bf(k,R){k.observers.add(R),k.lowestObserverState>R.dependenciesState&&(k.lowestObserverState=R.dependenciesState)}function go(k,R){k.observers.delete(R),k.observers.size===0&&wc(k)}function wc(k){k.isPendingUnobservation===!1&&(k.isPendingUnobservation=!0,Pn.pendingUnobservations.push(k))}function Zi(){Pn.inBatch++}function la(){if(--Pn.inBatch==0){Oc();for(var k=Pn.pendingUnobservations,R=0;R<k.length;R++){var W=k[R];W.isPendingUnobservation=!1,W.observers.size===0&&(W.isBeingObserved&&(W.isBeingObserved=!1,W.onBecomeUnobserved()),W instanceof Ha&&W.suspend())}Pn.pendingUnobservations=[]}}function Rs(k){var R=Pn.trackingDerivation;return R!==null?(R.runId!==k.lastAccessedBy&&(k.lastAccessedBy=R.runId,R.newObserving[R.unboundDepsCount++]=k,k.isBeingObserved||(k.isBeingObserved=!0,k.onBecomeObserved())),!0):(k.observers.size===0&&Pn.inBatch>0&&wc(k),!1)}function Ca(k,R){if(k.isTracing===$e.BREAK){var W=[];ma(Fo(k),W,1),new Function(`debugger;
/*
Tracing '`+k.name+`'

You are entering this break point because derivation '`+k.name+"' is being traced and '"+R.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(k instanceof Ha?k.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+W.join(`
`)+`
*/
    `)()}}function ma(k,R,W){R.length>=1e3?R.push("(and many more)"):(R.push(""+new Array(W).join("	")+k.name),k.dependencies&&k.dependencies.forEach(function(oe){return ma(oe,R,W+1)}))}var Da=function(){function k(R,W,oe,be){R===void 0&&(R="Reaction@"+g()),be===void 0&&(be=!1),this.name=R,this.onInvalidate=W,this.errorHandler=oe,this.requiresObservable=be,this.observing=[],this.newObserving=[],this.dependenciesState=fn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=$e.NONE}return k.prototype.onBecomeStale=function(){this.schedule()},k.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Pn.pendingReactions.push(this),Oc())},k.prototype.isScheduled=function(){return this._isScheduled},k.prototype.runReaction=function(){if(!this.isDisposed){if(Zi(),this._isScheduled=!1,Wr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(R){this.reportExceptionInDerivation(R)}}la()}},k.prototype.track=function(R){if(!this.isDisposed){Zi(),this._isRunning=!0;var W=yo(this,R,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ae(this),kr(W)&&this.reportExceptionInDerivation(W.cause),la()}},k.prototype.reportExceptionInDerivation=function(R){var W=this;if(this.errorHandler)this.errorHandler(R,this);else{if(Pn.disableErrorBoundaries)throw R;Pn.suppressReactionErrors,Pn.globalReactionErrorHandlers.forEach(function(oe){return oe(R,W)})}},k.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Zi(),Ae(this),la()))},k.prototype.getDisposer=function(){var R=this.dispose.bind(this);return R[Y]=this,R},k.prototype.toString=function(){return"Reaction["+this.name+"]"},k.prototype.trace=function(R){R===void 0&&(R=!1),function(){for(var W=[],oe=0;oe<arguments.length;oe++)W[oe]=arguments[oe];var be=!1;typeof W[W.length-1]=="boolean"&&(be=W.pop());var qe=$r(W);if(!qe)return _(!1);qe.isTracing,$e.NONE,qe.isTracing=be?$e.BREAK:$e.LOG}(this,R)},k}(),Ec=function(k){return k()};function Oc(){Pn.inBatch>0||Pn.isRunningReactions||Ec(Uf)}function Uf(){Pn.isRunningReactions=!0;for(var k=Pn.pendingReactions,R=0;k.length>0;){++R==100&&k.splice(0);for(var W=k.splice(0),oe=0,be=W.length;oe<be;oe++)W[oe].runReaction()}Pn.isRunningReactions=!1}var Uu=j("Reaction",Da);function Vf(k){var R=Ec;Ec=function(W){return k(function(){return R(W)})}}function Sc(k){return function(){}}function rp(){_(!1)}function jl(k){return function(R,W,oe){if(oe){if(oe.value)return{value:zo(k,oe.value),enumerable:!1,configurable:!0,writable:!0};var be=oe.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return zo(k,be.call(this))}}}return Gf(k).apply(this,arguments)}}function Gf(k){return function(R,W,oe){Object.defineProperty(R,W,{configurable:!0,enumerable:!1,get:function(){},set:function(be){S(this,W,gl(k,be))}})}}var gl=function(k,R,W,oe){return arguments.length===1&&typeof k=="function"?zo(k.name||"<unnamed action>",k):arguments.length===2&&typeof R=="function"?zo(k,R):arguments.length===1&&typeof k=="string"?jl(k):oe!==!0?jl(R).apply(null,arguments):void S(k,R,zo(k.name||R,W.value,this))};function xc(k,R){return ti(typeof k=="string"?k:k.name||"<unnamed action>",typeof k=="function"?k:R,this,void 0)}function Ns(k){return typeof k=="function"&&k.isMobxAction===!0}function Ac(k,R,W){S(k,R,zo(R,W.bind(k)))}function Tc(k,R){R===void 0&&(R=d);var W,oe=R&&R.name||k.name||"Autorun@"+g();if(!R.scheduler&&!R.delay)W=new Da(oe,function(){this.track(mt)},R.onError,R.requiresObservable);else{var be=Wf(R),qe=!1;W=new Da(oe,function(){qe||(qe=!0,be(function(){qe=!1,W.isDisposed||W.track(mt)}))},R.onError,R.requiresObservable)}function mt(){k(W)}return W.schedule(),W.getDisposer()}gl.bound=function(k,R,W,oe){return oe===!0?(Ac(k,R,W.value),null):W?{configurable:!0,enumerable:!1,get:function(){return Ac(this,R,W.value||W.initializer.call(this)),this[R]},set:rp}:{enumerable:!1,configurable:!0,set:function(be){Ac(this,R,be)},get:function(){}}};var op=function(k){return k()};function Wf(k){return k.scheduler?k.scheduler:k.delay?function(R){return setTimeout(R,k.delay)}:op}function qr(k,R,W){W===void 0&&(W=d);var oe,be,qe,mt=W.name||"Reaction@"+g(),zt=gl(mt,W.onError?(oe=W.onError,be=R,function(){try{return be.apply(this,arguments)}catch(xo){oe.call(this,xo)}}):R),En=!W.scheduler&&!W.delay,br=Wf(W),dn=!0,Hr=!1,mr=W.compareStructural?K.structural:W.equals||K.default,Lr=new Da(mt,function(){dn||En?ca():Hr||(Hr=!0,br(ca))},W.onError,W.requiresObservable);function ca(){if(Hr=!1,!Lr.isDisposed){var xo=!1;Lr.track(function(){var ta=k(Lr);xo=dn||!mr(qe,ta),qe=ta}),dn&&W.fireImmediately&&zt(qe,Lr),dn||xo!==!0||zt(qe,Lr),dn&&(dn=!1)}}return Lr.schedule(),Lr.getDisposer()}function zr(k,R,W){return zf("onBecomeUnobserved",k,R,W)}function zf(k,R,W,oe){var be=typeof oe=="function"?sa(R,W):sa(R),qe=typeof oe=="function"?oe:W,mt=k+"Listeners";return be[mt]?be[mt].add(qe):be[mt]=new Set([qe]),typeof be[k]!="function"?_(!1):function(){var zt=be[mt];zt&&(zt.delete(qe),zt.size===0&&delete be[mt])}}function lu(k){var R=k.enforceActions,W=k.computedRequiresReaction,oe=k.computedConfigurable,be=k.disableErrorBoundaries,qe=k.reactionScheduler,mt=k.reactionRequiresObservable,zt=k.observableRequiresReaction;if(k.isolateGlobalState===!0&&((Pn.pendingReactions.length||Pn.inBatch||Pn.isRunningReactions)&&_("isolateGlobalState should be called before MobX is running any reactions"),Bu=!0,va&&(--bc().__mobxInstanceCount==0&&(bc().__mobxGlobals=void 0),Pn=new au)),R!==void 0){var En=void 0;switch(R){case!0:case"observed":En=!0;break;case!1:case"never":En=!1;break;case"strict":case"always":En="strict";break;default:_("Invalid value for 'enforceActions': '"+R+"', expected 'never', 'always' or 'observed'")}Pn.enforceActions=En,Pn.allowStateChanges=En!==!0&&En!=="strict"}W!==void 0&&(Pn.computedRequiresReaction=!!W),mt!==void 0&&(Pn.reactionRequiresObservable=!!mt),zt!==void 0&&(Pn.observableRequiresReaction=!!zt,Pn.allowStateReads=!Pn.observableRequiresReaction),oe!==void 0&&(Pn.computedConfigurable=!!oe),be!==void 0&&(Pn.disableErrorBoundaries=!!be),qe&&Vf(qe)}function ya(k,R,W,oe){var be=Cs(oe=Ce(oe));return Je(k),ua(k,oe.name,be.enhancer),R&&Hf(k,R,W,be),k}function Cs(k){return k.defaultDecorator||(k.deep===!1?pt:Xe)}function Hf(k,R,W,oe){var be,qe;Zi();try{var mt=X(R);try{for(var zt=ue(mt),En=zt.next();!En.done;En=zt.next()){var br=En.value,dn=Object.getOwnPropertyDescriptor(R,br),Hr=(W&&br in W?W[br]:dn.get?bn:oe)(k,br,dn,!0);Hr&&Object.defineProperty(k,br,Hr)}}catch(mr){be={error:mr}}finally{try{En&&!En.done&&(qe=zt.return)&&qe.call(zt)}finally{if(be)throw be.error}}}finally{la()}}function Fo(k,R){return Il(sa(k,R))}function Il(k){var R,W,oe={name:k.name};return k.observing&&k.observing.length>0&&(oe.dependencies=(R=k.observing,W=[],R.forEach(function(be){W.indexOf(be)===-1&&W.push(be)}),W).map(Il)),oe}var Ll=0;function Ds(){this.message="FLOW_CANCELLED"}function uu(k){arguments.length!==1&&_("Flow expects 1 argument and cannot be used as decorator");var R=k.name||"<unnamed flow>";return function(){var W,oe=this,be=arguments,qe=++Ll,mt=gl(R+" - runid: "+qe+" - init",k).apply(oe,be),zt=void 0,En=new Promise(function(br,dn){var Hr=0;function mr(xo){var ta;zt=void 0;try{ta=gl(R+" - runid: "+qe+" - yield "+Hr++,mt.next).call(mt,xo)}catch(_l){return dn(_l)}ca(ta)}function Lr(xo){var ta;zt=void 0;try{ta=gl(R+" - runid: "+qe+" - yield "+Hr++,mt.throw).call(mt,xo)}catch(_l){return dn(_l)}ca(ta)}function ca(xo){if(!xo||typeof xo.then!="function")return xo.done?br(xo.value):(zt=Promise.resolve(xo.value)).then(mr,Lr);xo.then(ca,dn)}W=dn,mr(void 0)});return En.cancel=gl(R+" - runid: "+qe+" - cancel",function(){try{zt&&xi(zt);var br=mt.return(void 0),dn=Promise.resolve(br.value);dn.then(A,A),xi(dn),W(new Ds)}catch(Hr){W(Hr)}}),En}}function xi(k){typeof k.cancel=="function"&&k.cancel()}function Mc(k,R){if(k==null)return!1;if(R!==void 0){if(ci(k)===!1||!k[Y].values.has(R))return!1;var W=sa(k,R);return yl(W)}return yl(k)}function Xf(k){return arguments.length>1?_(!1):Mc(k)}function kc(k,R){return typeof R!="string"?_(!1):Mc(k,R)}function $i(k,R){return k!=null&&(R!==void 0?!!ci(k)&&k[Y].values.has(R):ci(k)||!!k[Y]||B(k)||Uu(k)||yl(k))}function ui(k){return arguments.length!==1&&_(!1),$i(k)}function ga(k){return ci(k)?k[Y].getKeys():Ho(k)||ni(k)?Array.from(k.keys()):ba(k)?k.map(function(R,W){return W}):_(!1)}function io(k){return ci(k)?ga(k).map(function(R){return k[R]}):Ho(k)?ga(k).map(function(R){return k.get(R)}):ni(k)?Array.from(k.values()):ba(k)?k.slice():_(!1)}function ip(k){return ci(k)?ga(k).map(function(R){return[R,k[R]]}):Ho(k)?ga(k).map(function(R){return[R,k.get(R)]}):ni(k)?Array.from(k.entries()):ba(k)?k.map(function(R,W){return[W,R]}):_(!1)}function Bi(k,R,W){if(arguments.length!==2||ni(k))if(ci(k)){var oe=k[Y],be=oe.values.get(R);be?oe.write(R,W):oe.addObservableProp(R,W,oe.defaultEnhancer)}else if(Ho(k))k.set(R,W);else if(ni(k))k.add(R);else{if(!ba(k))return _(!1);typeof R!="number"&&(R=parseInt(R,10)),b(R>=0,"Not a valid index: '"+R+"'"),Zi(),R>=k.length&&(k.length=R+1),k[R]=W,la()}else{Zi();var qe=R;try{for(var mt in qe)Bi(k,mt,qe[mt])}finally{la()}}}function qf(k,R,W,oe){return typeof W=="function"?function(be,qe,mt,zt){return Ii(be,qe).observe(mt,zt)}(k,R,W,oe):function(be,qe,mt){return Ii(be).observe(qe,mt)}(k,R,W)}Ds.prototype=Object.create(Error.prototype);var Yf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Ui(k,R,W,oe){return oe.detectCycles&&k.set(R,W),W}function Ji(k,R,W){if(!R.recurseEverything&&!ui(k)||typeof k!="object")return k;if(k===null)return null;if(k instanceof Date)return k;if(ml(k))return Ji(k.get(),R,W);if(ui(k)&&ga(k),R.detectCycles===!0&&k!==null&&W.has(k))return W.get(k);if(ba(k)||Array.isArray(k)){var oe=Ui(W,k,[],R),be=k.map(function(mr){return Ji(mr,R,W)});oe.length=be.length;for(var qe=0,mt=be.length;qe<mt;qe++)oe[qe]=be[qe];return oe}if(ni(k)||Object.getPrototypeOf(k)===Set.prototype){if(R.exportMapsAsObjects===!1){var zt=Ui(W,k,new Set,R);return k.forEach(function(mr){zt.add(Ji(mr,R,W))}),zt}var En=Ui(W,k,[],R);return k.forEach(function(mr){En.push(Ji(mr,R,W))}),En}if(Ho(k)||Object.getPrototypeOf(k)===Map.prototype){if(R.exportMapsAsObjects===!1){var br=Ui(W,k,new Map,R);return k.forEach(function(mr,Lr){br.set(Lr,Ji(mr,R,W))}),br}var dn=Ui(W,k,{},R);return k.forEach(function(mr,Lr){dn[Lr]=Ji(mr,R,W)}),dn}var Hr=Ui(W,k,{},R);return U(k).forEach(function(mr){Hr[mr]=Ji(k[mr],R,W)}),Hr}function Pc(k,R){var W;return typeof R=="boolean"&&(R={detectCycles:R}),R||(R=Yf),R.detectCycles=R.detectCycles===void 0?R.recurseEverything===!0:R.detectCycles===!0,R.detectCycles&&(W=new Map),Ji(k,R,W)}function $r(k){switch(k.length){case 0:return Pn.trackingDerivation;case 1:return sa(k[0]);case 2:return sa(k[0],k[1])}}function si(k,R){R===void 0&&(R=void 0),Zi();try{return k.apply(R)}finally{la()}}function js(k,R,W){return arguments.length===1||R&&typeof R=="object"?Rc(k,R):Kf(k,R,W||{})}function Kf(k,R,W){var oe;typeof W.timeout=="number"&&(oe=setTimeout(function(){if(!qe[Y].isDisposed){qe();var mt=new Error("WHEN_TIMEOUT");if(!W.onError)throw mt;W.onError(mt)}},W.timeout)),W.name=W.name||"When@"+g();var be=zo(W.name+"-effect",R),qe=Tc(function(mt){k()&&(mt.dispose(),oe&&clearTimeout(oe),be())},W);return qe}function Rc(k,R){var W,oe=new Promise(function(be,qe){var mt=Kf(k,be,ce(ce({},R),{onError:qe}));W=function(){mt(),qe("WHEN_CANCELLED")}});return oe.cancel=W,oe}function Is(k){return k[Y]}function Xa(k){return typeof k=="string"||typeof k=="number"||typeof k=="symbol"}var Vi={has:function(k,R){if(R===Y||R==="constructor"||R===we)return!0;var W=Is(k);return Xa(R)?W.has(R):R in k},get:function(k,R){if(R===Y||R==="constructor"||R===we)return k[R];var W=Is(k),oe=W.values.get(R);if(oe instanceof H){var be=oe.get();return be===void 0&&W.has(R),be}return Xa(R)&&W.has(R),k[R]},set:function(k,R,W){return!!Xa(R)&&(Bi(k,R,W),!0)},deleteProperty:function(k,R){return!!Xa(R)&&(Is(k).remove(R),!0)},ownKeys:function(k){return Is(k).keysAtom.reportObserved(),Reflect.ownKeys(k)},preventExtensions:function(k){return _("Dynamic observable objects cannot be frozen"),!1}};function su(k){var R=new Proxy(k,Vi);return k[Y].proxy=R,R}function Qi(k){return k.interceptors!==void 0&&k.interceptors.length>0}function _a(k,R){var W=k.interceptors||(k.interceptors=[]);return W.push(R),x(function(){var oe=W.indexOf(R);oe!==-1&&W.splice(oe,1)})}function Pr(k,R){var W=Ie();try{for(var oe=ye(k.interceptors||[]),be=0,qe=oe.length;be<qe&&(b(!(R=oe[be](R))||R.type,"Intercept handlers should return nothing or a change object"),R);be++);return R}finally{lt(W)}}function Gi(k){return k.changeListeners!==void 0&&k.changeListeners.length>0}function ja(k,R){var W=k.changeListeners||(k.changeListeners=[]);return W.push(R),x(function(){var oe=W.indexOf(R);oe!==-1&&W.splice(oe,1)})}function yi(k,R){var W=Ie(),oe=k.changeListeners;if(oe){for(var be=0,qe=(oe=oe.slice()).length;be<qe;be++)oe[be](R);lt(W)}}var cu={get:function(k,R){return R===Y?k[Y]:R==="length"?k[Y].getArrayLength():typeof R=="number"?fo.get.call(k,R):typeof R!="string"||isNaN(R)?fo.hasOwnProperty(R)?fo[R]:k[R]:fo.get.call(k,parseInt(R))},set:function(k,R,W){return R==="length"&&k[Y].setArrayLength(W),typeof R=="number"&&fo.set.call(k,R,W),typeof R=="symbol"||isNaN(R)?k[R]=W:fo.set.call(k,parseInt(R),W),!0},preventExtensions:function(k){return _("Observable arrays cannot be frozen"),!1}};function Fl(k,R,W,oe){W===void 0&&(W="ObservableArray@"+g()),oe===void 0&&(oe=!1);var be,qe,mt,zt=new Ia(W,R,oe);be=zt.values,qe=Y,mt=zt,Object.defineProperty(be,qe,{enumerable:!1,writable:!1,configurable:!0,value:mt});var En=new Proxy(zt.values,cu);if(zt.proxy=En,k&&k.length){var br=lr(!0);zt.spliceWithArray(0,0,k),eo(br)}return En}var Ia=function(){function k(R,W,oe){this.owned=oe,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new H(R||"ObservableArray@"+g()),this.enhancer=function(be,qe){return W(be,qe,R+"[..]")}}return k.prototype.dehanceValue=function(R){return this.dehancer!==void 0?this.dehancer(R):R},k.prototype.dehanceValues=function(R){return this.dehancer!==void 0&&R.length>0?R.map(this.dehancer):R},k.prototype.intercept=function(R){return _a(this,R)},k.prototype.observe=function(R,W){return W===void 0&&(W=!1),W&&R({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ja(this,R)},k.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},k.prototype.setArrayLength=function(R){if(typeof R!="number"||R<0)throw new Error("[mobx.array] Out of range: "+R);var W=this.values.length;if(R!==W)if(R>W){for(var oe=new Array(R-W),be=0;be<R-W;be++)oe[be]=void 0;this.spliceWithArray(W,0,oe)}else this.spliceWithArray(R,W-R)},k.prototype.updateArrayLength=function(R,W){if(R!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=W},k.prototype.spliceWithArray=function(R,W,oe){var be=this;Fn(this.atom);var qe=this.values.length;if(R===void 0?R=0:R>qe?R=qe:R<0&&(R=Math.max(0,qe+R)),W=arguments.length===1?qe-R:W==null?0:Math.max(0,Math.min(W,qe-R)),oe===void 0&&(oe=v),Qi(this)){var mt=Pr(this,{object:this.proxy,type:"splice",index:R,removedCount:W,added:oe});if(!mt)return v;W=mt.removedCount,oe=mt.added}oe=oe.length===0?oe:oe.map(function(En){return be.enhancer(En,void 0)});var zt=this.spliceItemsIntoValues(R,W,oe);return W===0&&oe.length===0||this.notifyArraySplice(R,oe,zt),this.dehanceValues(zt)},k.prototype.spliceItemsIntoValues=function(R,W,oe){var be;if(oe.length<1e4)return(be=this.values).splice.apply(be,ye([R,W],oe));var qe=this.values.slice(R,R+W);return this.values=this.values.slice(0,R).concat(oe,this.values.slice(R+W)),qe},k.prototype.notifyArrayChildUpdate=function(R,W,oe){var be=!this.owned&&!1,qe=Gi(this),mt=qe||be?{object:this.proxy,type:"update",index:R,newValue:W,oldValue:oe}:null;this.atom.reportChanged(),qe&&yi(this,mt)},k.prototype.notifyArraySplice=function(R,W,oe){var be=!this.owned&&!1,qe=Gi(this),mt=qe||be?{object:this.proxy,type:"splice",index:R,removed:oe,added:W,removedCount:oe.length,addedCount:W.length}:null;this.atom.reportChanged(),qe&&yi(this,mt)},k}(),fo={intercept:function(k){return this[Y].intercept(k)},observe:function(k,R){return R===void 0&&(R=!1),this[Y].observe(k,R)},clear:function(){return this.splice(0)},replace:function(k){var R=this[Y];return R.spliceWithArray(0,R.values.length,k)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(k,R){for(var W=[],oe=2;oe<arguments.length;oe++)W[oe-2]=arguments[oe];var be=this[Y];switch(arguments.length){case 0:return[];case 1:return be.spliceWithArray(k);case 2:return be.spliceWithArray(k,R)}return be.spliceWithArray(k,R,W)},spliceWithArray:function(k,R,W){return this[Y].spliceWithArray(k,R,W)},push:function(){for(var k=[],R=0;R<arguments.length;R++)k[R]=arguments[R];var W=this[Y];return W.spliceWithArray(W.values.length,0,k),W.values.length},pop:function(){return this.splice(Math.max(this[Y].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var k=[],R=0;R<arguments.length;R++)k[R]=arguments[R];var W=this[Y];return W.spliceWithArray(0,0,k),W.values.length},reverse:function(){var k=this.slice();return k.reverse.apply(k,arguments)},sort:function(k){var R=this.slice();return R.sort.apply(R,arguments)},remove:function(k){var R=this[Y],W=R.dehanceValues(R.values).indexOf(k);return W>-1&&(this.splice(W,1),!0)},get:function(k){var R=this[Y];if(R&&k<R.values.length)return R.atom.reportObserved(),R.dehanceValue(R.values[k])},set:function(k,R){var W=this[Y],oe=W.values;if(k<oe.length){Fn(W.atom);var be=oe[k];if(Qi(W)){var qe=Pr(W,{type:"update",object:W.proxy,index:k,newValue:R});if(!qe)return;R=qe.newValue}(R=W.enhancer(R,be))!==be&&(oe[k]=R,W.notifyArrayChildUpdate(k,R,be))}else{if(k!==oe.length)throw new Error("[mobx.array] Index out of bounds, "+k+" is larger than "+oe.length);W.spliceWithArray(k,0,[R])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(k){typeof Array.prototype[k]=="function"&&(fo[k]=function(){var R=this[Y];R.atom.reportObserved();var W=R.dehanceValues(R.values);return W[k].apply(W,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(k){typeof Array.prototype[k]=="function"&&(fo[k]=function(R,W){var oe=this,be=this[Y];return be.atom.reportObserved(),be.dehanceValues(be.values)[k](function(qe,mt){return R.call(W,qe,mt,oe)},W)})}),["reduce","reduceRight"].forEach(function(k){fo[k]=function(){var R=this,W=this[Y];W.atom.reportObserved();var oe=arguments[0];return arguments[0]=function(be,qe,mt){return qe=W.dehanceValue(qe),oe(be,qe,mt,R)},W.values[k].apply(W.values,arguments)}});var Vu,qa=j("ObservableArrayAdministration",Ia);function ba(k){return M(k)&&qa(k[Y])}var Nc,ap={},Cc=function(){function k(R,W,oe){if(W===void 0&&(W=Ft),oe===void 0&&(oe="ObservableMap@"+g()),this.enhancer=W,this.name=oe,this[Vu]=ap,this._keysAtom=G(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(R)}return k.prototype._has=function(R){return this._data.has(R)},k.prototype.has=function(R){var W=this;if(!Pn.trackingDerivation)return this._has(R);var oe=this._hasMap.get(R);if(!oe){var be=oe=new jr(this._has(R),An,this.name+"."+L(R)+"?",!1);this._hasMap.set(R,be),zr(be,function(){return W._hasMap.delete(R)})}return oe.get()},k.prototype.set=function(R,W){var oe=this._has(R);if(Qi(this)){var be=Pr(this,{type:oe?"update":"add",object:this,newValue:W,name:R});if(!be)return this;W=be.newValue}return oe?this._updateValue(R,W):this._addValue(R,W),this},k.prototype.delete=function(R){var W=this;if(Fn(this._keysAtom),Qi(this)&&!(be=Pr(this,{type:"delete",object:this,name:R})))return!1;if(this._has(R)){var oe=Gi(this),be=oe?{type:"delete",object:this,oldValue:this._data.get(R).value,name:R}:null;return si(function(){W._keysAtom.reportChanged(),W._updateHasMapEntry(R,!1),W._data.get(R).setNewValue(void 0),W._data.delete(R)}),oe&&yi(this,be),!0}return!1},k.prototype._updateHasMapEntry=function(R,W){var oe=this._hasMap.get(R);oe&&oe.setNewValue(W)},k.prototype._updateValue=function(R,W){var oe=this._data.get(R);if((W=oe.prepareNewValue(W))!==Pn.UNCHANGED){var be=Gi(this),qe=be?{type:"update",object:this,oldValue:oe.value,name:R,newValue:W}:null;oe.setNewValue(W),be&&yi(this,qe)}},k.prototype._addValue=function(R,W){var oe=this;Fn(this._keysAtom),si(function(){var mt=new jr(W,oe.enhancer,oe.name+"."+L(R),!1);oe._data.set(R,mt),W=mt.value,oe._updateHasMapEntry(R,!0),oe._keysAtom.reportChanged()});var be=Gi(this),qe=be?{type:"add",object:this,name:R,newValue:W}:null;be&&yi(this,qe)},k.prototype.get=function(R){return this.has(R)?this.dehanceValue(this._data.get(R).get()):this.dehanceValue(void 0)},k.prototype.dehanceValue=function(R){return this.dehancer!==void 0?this.dehancer(R):R},k.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},k.prototype.values=function(){var R=this,W=this.keys();return Rr({next:function(){var oe=W.next(),be=oe.done,qe=oe.value;return{done:be,value:be?void 0:R.get(qe)}}})},k.prototype.entries=function(){var R=this,W=this.keys();return Rr({next:function(){var oe=W.next(),be=oe.done,qe=oe.value;return{done:be,value:be?void 0:[qe,R.get(qe)]}}})},k.prototype[Vu=Y,Symbol.iterator]=function(){return this.entries()},k.prototype.forEach=function(R,W){var oe,be;try{for(var qe=ue(this),mt=qe.next();!mt.done;mt=qe.next()){var zt=de(mt.value,2),En=zt[0],br=zt[1];R.call(W,br,En,this)}}catch(dn){oe={error:dn}}finally{try{mt&&!mt.done&&(be=qe.return)&&be.call(qe)}finally{if(oe)throw oe.error}}},k.prototype.merge=function(R){var W=this;return Ho(R)&&(R=R.toJS()),si(function(){var oe=lr(!0);try{O(R)?U(R).forEach(function(be){return W.set(be,R[be])}):Array.isArray(R)?R.forEach(function(be){var qe=de(be,2),mt=qe[0],zt=qe[1];return W.set(mt,zt)}):D(R)?(R.constructor!==Map&&_("Cannot initialize from classes that inherit from Map: "+R.constructor.name),R.forEach(function(be,qe){return W.set(qe,be)})):R!=null&&_("Cannot initialize map from "+R)}finally{eo(oe)}}),this},k.prototype.clear=function(){var R=this;si(function(){Ye(function(){var W,oe;try{for(var be=ue(R.keys()),qe=be.next();!qe.done;qe=be.next()){var mt=qe.value;R.delete(mt)}}catch(zt){W={error:zt}}finally{try{qe&&!qe.done&&(oe=be.return)&&oe.call(be)}finally{if(W)throw W.error}}})})},k.prototype.replace=function(R){var W=this;return si(function(){var oe,be,qe,mt,zt=function(ri){if(D(ri)||Ho(ri))return ri;if(Array.isArray(ri))return new Map(ri);if(O(ri)){var Bl=new Map;for(var wl in ri)Bl.set(wl,ri[wl]);return Bl}return _("Cannot convert to map from '"+ri+"'")}(R),En=new Map,br=!1;try{for(var dn=ue(W._data.keys()),Hr=dn.next();!Hr.done;Hr=dn.next()){var mr=Hr.value;if(!zt.has(mr))if(W.delete(mr))br=!0;else{var Lr=W._data.get(mr);En.set(mr,Lr)}}}catch(ri){oe={error:ri}}finally{try{Hr&&!Hr.done&&(be=dn.return)&&be.call(dn)}finally{if(oe)throw oe.error}}try{for(var ca=ue(zt.entries()),xo=ca.next();!xo.done;xo=ca.next()){var ta=de(xo.value,2),_l=(mr=ta[0],Lr=ta[1],W._data.has(mr));if(W.set(mr,Lr),W._data.has(mr)){var bl=W._data.get(mr);En.set(mr,bl),_l||(br=!0)}}}catch(ri){qe={error:ri}}finally{try{xo&&!xo.done&&(mt=ca.return)&&mt.call(ca)}finally{if(qe)throw qe.error}}if(!br)if(W._data.size!==En.size)W._keysAtom.reportChanged();else for(var $l=W._data.keys(),fu=En.keys(),Ka=$l.next(),du=fu.next();!Ka.done;){if(Ka.value!==du.value){W._keysAtom.reportChanged();break}Ka=$l.next(),du=fu.next()}W._data=En}),this},Object.defineProperty(k.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),k.prototype.toPOJO=function(){var R,W,oe={};try{for(var be=ue(this),qe=be.next();!qe.done;qe=be.next()){var mt=de(qe.value,2),zt=mt[0],En=mt[1];oe[typeof zt=="symbol"?zt:L(zt)]=En}}catch(br){R={error:br}}finally{try{qe&&!qe.done&&(W=be.return)&&W.call(be)}finally{if(R)throw R.error}}return oe},k.prototype.toJS=function(){return new Map(this)},k.prototype.toJSON=function(){return this.toPOJO()},k.prototype.toString=function(){var R=this;return this.name+"[{ "+Array.from(this.keys()).map(function(W){return L(W)+": "+R.get(W)}).join(", ")+" }]"},k.prototype.observe=function(R,W){return ja(this,R)},k.prototype.intercept=function(R){return _a(this,R)},k}(),Ho=j("ObservableMap",Cc),Gu={},Ya=function(){function k(R,W,oe){if(W===void 0&&(W=Ft),oe===void 0&&(oe="ObservableSet@"+g()),this.name=oe,this[Nc]=Gu,this._data=new Set,this._atom=G(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(be,qe){return W(be,qe,oe)},R&&this.replace(R)}return k.prototype.dehanceValue=function(R){return this.dehancer!==void 0?this.dehancer(R):R},k.prototype.clear=function(){var R=this;si(function(){Ye(function(){var W,oe;try{for(var be=ue(R._data.values()),qe=be.next();!qe.done;qe=be.next()){var mt=qe.value;R.delete(mt)}}catch(zt){W={error:zt}}finally{try{qe&&!qe.done&&(oe=be.return)&&oe.call(be)}finally{if(W)throw W.error}}})})},k.prototype.forEach=function(R,W){var oe,be;try{for(var qe=ue(this),mt=qe.next();!mt.done;mt=qe.next()){var zt=mt.value;R.call(W,zt,zt,this)}}catch(En){oe={error:En}}finally{try{mt&&!mt.done&&(be=qe.return)&&be.call(qe)}finally{if(oe)throw oe.error}}},Object.defineProperty(k.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),k.prototype.add=function(R){var W=this;if(Fn(this._atom),Qi(this)&&!(be=Pr(this,{type:"add",object:this,newValue:R})))return this;if(!this.has(R)){si(function(){W._data.add(W.enhancer(R,void 0)),W._atom.reportChanged()});var oe=Gi(this),be=oe?{type:"add",object:this,newValue:R}:null;oe&&yi(this,be)}return this},k.prototype.delete=function(R){var W=this;if(Qi(this)&&!(be=Pr(this,{type:"delete",object:this,oldValue:R})))return!1;if(this.has(R)){var oe=Gi(this),be=oe?{type:"delete",object:this,oldValue:R}:null;return si(function(){W._atom.reportChanged(),W._data.delete(R)}),oe&&yi(this,be),!0}return!1},k.prototype.has=function(R){return this._atom.reportObserved(),this._data.has(this.dehanceValue(R))},k.prototype.entries=function(){var R=0,W=Array.from(this.keys()),oe=Array.from(this.values());return Rr({next:function(){var be=R;return R+=1,be<oe.length?{value:[W[be],oe[be]],done:!1}:{done:!0}}})},k.prototype.keys=function(){return this.values()},k.prototype.values=function(){this._atom.reportObserved();var R=this,W=0,oe=Array.from(this._data.values());return Rr({next:function(){return W<oe.length?{value:R.dehanceValue(oe[W++]),done:!1}:{done:!0}}})},k.prototype.replace=function(R){var W=this;return ni(R)&&(R=R.toJS()),si(function(){var oe=lr(!0);try{Array.isArray(R)||z(R)?(W.clear(),R.forEach(function(be){return W.add(be)})):R!=null&&_("Cannot initialize set from "+R)}finally{eo(oe)}}),this},k.prototype.observe=function(R,W){return ja(this,R)},k.prototype.intercept=function(R){return _a(this,R)},k.prototype.toJS=function(){return new Set(this)},k.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},k.prototype[Nc=Y,Symbol.iterator]=function(){return this.values()},k}(),ni=j("ObservableSet",Ya),Dc=function(){function k(R,W,oe,be){W===void 0&&(W=new Map),this.target=R,this.values=W,this.name=oe,this.defaultEnhancer=be,this.keysAtom=new H(oe+".keys")}return k.prototype.read=function(R){return this.values.get(R).get()},k.prototype.write=function(R,W){var oe=this.target,be=this.values.get(R);if(be instanceof Ha)be.set(W);else{if(Qi(this)){if(!(mt=Pr(this,{type:"update",object:this.proxy||oe,name:R,newValue:W})))return;W=mt.newValue}if((W=be.prepareNewValue(W))!==Pn.UNCHANGED){var qe=Gi(this),mt=qe?{type:"update",object:this.proxy||oe,oldValue:be.value,name:R,newValue:W}:null;be.setNewValue(W),qe&&yi(this,mt)}}},k.prototype.has=function(R){var W=this.pendingKeys||(this.pendingKeys=new Map),oe=W.get(R);if(oe)return oe.get();var be=!!this.values.get(R);return oe=new jr(be,An,this.name+"."+L(R)+"?",!1),W.set(R,oe),oe.get()},k.prototype.addObservableProp=function(R,W,oe){oe===void 0&&(oe=this.defaultEnhancer);var be=this.target;if(Qi(this)){var qe=Pr(this,{object:this.proxy||be,name:R,type:"add",newValue:W});if(!qe)return;W=qe.newValue}var mt=new jr(W,oe,this.name+"."+L(R),!1);this.values.set(R,mt),W=mt.value,Object.defineProperty(be,R,function(zt){return wa[zt]||(wa[zt]={configurable:!0,enumerable:!0,get:function(){return this[Y].read(zt)},set:function(En){this[Y].write(zt,En)}})}(R)),this.notifyPropertyAddition(R,W)},k.prototype.addComputedProp=function(R,W,oe){var be,qe,mt,zt=this.target;oe.name=oe.name||this.name+"."+L(W),this.values.set(W,new Ha(oe)),(R===zt||(be=R,qe=W,!(mt=Object.getOwnPropertyDescriptor(be,qe))||mt.configurable!==!1&&mt.writable!==!1))&&Object.defineProperty(R,W,function(En){return Ls[En]||(Ls[En]={configurable:Pn.computedConfigurable,enumerable:!1,get:function(){return Wi(this).read(En)},set:function(br){Wi(this).write(En,br)}})}(W))},k.prototype.remove=function(R){if(this.values.has(R)){var W=this.target;if(Qi(this)&&!(En=Pr(this,{object:this.proxy||W,name:R,type:"remove"})))return;try{Zi();var oe=Gi(this),be=!1,qe=this.values.get(R),mt=qe&&qe.get();if(qe&&qe.set(void 0),this.keysAtom.reportChanged(),this.values.delete(R),this.pendingKeys){var zt=this.pendingKeys.get(R);zt&&zt.set(!1)}delete this.target[R];var En=oe?{type:"remove",object:this.proxy||W,oldValue:mt,name:R}:null;oe&&yi(this,En)}finally{la()}}},k.prototype.illegalAccess=function(R,W){},k.prototype.observe=function(R,W){return ja(this,R)},k.prototype.intercept=function(R){return _a(this,R)},k.prototype.notifyPropertyAddition=function(R,W){var oe=Gi(this),be=oe?{type:"add",object:this.proxy||this.target,name:R,newValue:W}:null;if(oe&&yi(this,be),this.pendingKeys){var qe=this.pendingKeys.get(R);qe&&qe.set(!0)}this.keysAtom.reportChanged()},k.prototype.getKeys=function(){var R,W;this.keysAtom.reportObserved();var oe=[];try{for(var be=ue(this.values),qe=be.next();!qe.done;qe=be.next()){var mt=de(qe.value,2),zt=mt[0];mt[1]instanceof jr&&oe.push(zt)}}catch(En){R={error:En}}finally{try{qe&&!qe.done&&(W=be.return)&&W.call(be)}finally{if(R)throw R.error}}return oe},k}();function ua(k,R,W){if(R===void 0&&(R=""),W===void 0&&(W=Ft),Object.prototype.hasOwnProperty.call(k,Y))return k[Y];O(k)||(R=(k.constructor.name||"ObservableObject")+"@"+g()),R||(R="ObservableObject@"+g());var oe=new Dc(k,new Map,L(R),W);return S(k,Y,oe),oe}var wa=Object.create(null),Ls=Object.create(null);function Wi(k){var R=k[Y];return R||(Je(k),k[Y])}var ea=j("ObservableObjectAdministration",Dc);function ci(k){return!!M(k)&&(Je(k),ea(k[Y]))}function sa(k,R){if(typeof k=="object"&&k!==null){if(ba(k))return R!==void 0&&_(!1),k[Y].atom;if(ni(k))return k[Y];if(Ho(k)){var W=k;return R===void 0?W._keysAtom:((oe=W._data.get(R)||W._hasMap.get(R))||_(!1),oe)}var oe;if(Je(k),R&&!k[Y]&&k[R],ci(k))return R?((oe=k[Y].values.get(R))||_(!1),oe):_(!1);if(B(k)||yl(k)||Uu(k))return k}else if(typeof k=="function"&&Uu(k[Y]))return k[Y];return _(!1)}function Ii(k,R){return k||_("Expecting some object"),R!==void 0?Ii(sa(k,R)):B(k)||yl(k)||Uu(k)||Ho(k)||ni(k)?k:(Je(k),k[Y]?k[Y]:void _(!1))}var ft=Object.prototype.toString;function $t(k,R,W){return W===void 0&&(W=-1),Bt(k,R,W)}function Bt(k,R,W,oe,be){if(k===R)return k!==0||1/k==1/R;if(k==null||R==null)return!1;if(k!=k)return R!=R;var qe=typeof k;if(qe!=="function"&&qe!=="object"&&typeof R!="object")return!1;var mt=ft.call(k);if(mt!==ft.call(R))return!1;switch(mt){case"[object RegExp]":case"[object String]":return""+k==""+R;case"[object Number]":return+k!=+k?+R!=+R:+k==0?1/+k==1/R:+k==+R;case"[object Date]":case"[object Boolean]":return+k==+R;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(k)===Symbol.valueOf.call(R);case"[object Map]":case"[object Set]":W>=0&&W++}k=mn(k),R=mn(R);var zt=mt==="[object Array]";if(!zt){if(typeof k!="object"||typeof R!="object")return!1;var En=k.constructor,br=R.constructor;if(En!==br&&!(typeof En=="function"&&En instanceof En&&typeof br=="function"&&br instanceof br)&&"constructor"in k&&"constructor"in R)return!1}if(W===0)return!1;W<0&&(W=-1),be=be||[];for(var dn=(oe=oe||[]).length;dn--;)if(oe[dn]===k)return be[dn]===R;if(oe.push(k),be.push(R),zt){if((dn=k.length)!==R.length)return!1;for(;dn--;)if(!Bt(k[dn],R[dn],W-1,oe,be))return!1}else{var Hr=Object.keys(k),mr=void 0;if(dn=Hr.length,Object.keys(R).length!==dn)return!1;for(;dn--;)if(!fr(R,mr=Hr[dn])||!Bt(k[mr],R[mr],W-1,oe,be))return!1}return oe.pop(),be.pop(),!0}function mn(k){return ba(k)?k.slice():D(k)||Ho(k)||z(k)||ni(k)?Array.from(k.entries()):k}function fr(k,R){return Object.prototype.hasOwnProperty.call(k,R)}function Rr(k){return k[Symbol.iterator]=po,k}function po(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Sc,extras:{getDebugName:function(k,R){return(R!==void 0?sa(k,R):ci(k)||Ho(k)||ni(k)?Ii(k):sa(k)).name}},$mobx:Y})}).call(this,r(163),r(68))},function(n,a,r){var u=r(113),c=r(42),v=r(179);u||c(Object.prototype,"toString",v,{unsafe:!0})},function(n,a,r){var u=r(41),c=r(100),v=r(80),d=r(58),g=r(116),_="Array Iterator",b=d.set,x=d.getterFor(_);n.exports=g(Array,"Array",function(A,M){b(this,{type:_,target:u(A),index:0,kind:M})},function(){var A=x(this),M=A.target,O=A.kind,S=A.index++;return!M||S>=M.length?(A.target=void 0,{value:void 0,done:!0}):O=="keys"?{value:S,done:!1}:O=="values"?{value:M[S],done:!1}:{value:[S,M[S]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,a,r){var u=r(16),c=r(7),v=r(46),d=r(76),g=r(34),_=r(15),b=r(71),x=r(36),A=r(108),M=r(18),O=r(35),S=r(96),j=r(30),D=r(33),z=r(54),U=r(87),L=r(32),$=r(40),X=r(41),Y=r(86),H=r(39),B=r(69),G=r(60),K=r(77),Q=r(74),ce=r(139),ue=r(112),de=r(50),ye=r(38),we=r(84),me=r(98),He=r(42),tt=r(89),Ot=r(93),Je=r(72),Yt=r(90),Kt=r(28),Ft=r(140),An=r(141),Be=r(78),Se=r(58),Ce=r(79).forEach,Xe=Ot("hidden"),_t="Symbol",pt=Kt("toPrimitive"),bt=Se.set,nn=Se.getterFor(_t),on=Object.prototype,Xt=c.Symbol,nt=Xt&&Xt.prototype,fn=c.TypeError,$e=c.QObject,bn=v("JSON","stringify"),Zn=de.f,ie=ye.f,Jn=ce.f,kr=we.f,Wr=_([].push),uo=tt("symbols"),Fn=tt("op-symbols"),yo=tt("string-to-symbol-registry"),Ae=tt("symbol-to-string-registry"),Ye=tt("wks"),Ie=!$e||!$e.prototype||!$e.prototype.findChild,lt=x&&M(function(){return G(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a!=7})?function(Tn,$n,Hn){var lr=Zn(on,$n);lr&&delete on[$n],ie(Tn,$n,Hn),lr&&Tn!==on&&ie(on,$n,lr)}:ie,tn=function(Tn,$n){var Hn=uo[Tn]=G(nt);return bt(Hn,{type:_t,tag:Tn,description:$n}),x||(Hn.description=$n),Hn},Zt=function(Tn,$n,Hn){Tn===on&&Zt(Fn,$n,Hn),L(Tn);var lr=Y($n);return L(Hn),O(uo,lr)?(Hn.enumerable?(O(Tn,Xe)&&Tn[Xe][lr]&&(Tn[Xe][lr]=!1),Hn=G(Hn,{enumerable:B(0,!1)})):(O(Tn,Xe)||ie(Tn,Xe,B(1,{})),Tn[Xe][lr]=!0),lt(Tn,lr,Hn)):ie(Tn,lr,Hn)},Nn=function(Tn,$n){L(Tn);var Hn=X($n),lr=K(Hn).concat(zo(Hn));return Ce(lr,function(eo){x&&!g(Er,Hn,eo)||Zt(Tn,eo,Hn[eo])}),Tn},Er=function(Tn){var $n=Y(Tn),Hn=g(kr,this,$n);return!(this===on&&O(uo,$n)&&!O(Fn,$n))&&(!(Hn||!O(this,$n)||!O(uo,$n)||O(this,Xe)&&this[Xe][$n])||Hn)},li=function(Tn,$n){var Hn=X(Tn),lr=Y($n);if(Hn!==on||!O(uo,lr)||O(Fn,lr)){var eo=Zn(Hn,lr);return!eo||!O(uo,lr)||O(Hn,Xe)&&Hn[Xe][lr]||(eo.enumerable=!0),eo}},Si=function(Tn){var $n=Jn(X(Tn)),Hn=[];return Ce($n,function(lr){O(uo,lr)||O(Je,lr)||Wr(Hn,lr)}),Hn},zo=function(Tn){var $n=Tn===on,Hn=Jn($n?Fn:X(Tn)),lr=[];return Ce(Hn,function(eo){!O(uo,eo)||$n&&!O(on,eo)||Wr(lr,uo[eo])}),lr};if(A||(Xt=function(){if(z(nt,this))throw fn("Symbol is not a constructor");var Tn=arguments.length&&arguments[0]!==void 0?H(arguments[0]):void 0,$n=Yt(Tn),Hn=function(lr){this===on&&g(Hn,Fn,lr),O(this,Xe)&&O(this[Xe],$n)&&(this[Xe][$n]=!1),lt(this,$n,B(1,lr))};return x&&Ie&&lt(on,$n,{configurable:!0,set:Hn}),tn($n,Tn)},He(nt=Xt.prototype,"toString",function(){return nn(this).tag}),He(Xt,"withoutSetter",function(Tn){return tn(Yt(Tn),Tn)}),we.f=Er,ye.f=Zt,de.f=li,Q.f=ce.f=Si,ue.f=zo,Ft.f=function(Tn){return tn(Kt(Tn),Tn)},x&&(ie(nt,"description",{configurable:!0,get:function(){return nn(this).description}}),b||He(on,"propertyIsEnumerable",Er,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Xt}),Ce(K(Ye),function(Tn){An(Tn)}),u({target:_t,stat:!0,forced:!A},{for:function(Tn){var $n=H(Tn);if(O(yo,$n))return yo[$n];var Hn=Xt($n);return yo[$n]=Hn,Ae[Hn]=$n,Hn},keyFor:function(Tn){if(!U(Tn))throw fn(Tn+" is not a symbol");if(O(Ae,Tn))return Ae[Tn]},useSetter:function(){Ie=!0},useSimple:function(){Ie=!1}}),u({target:"Object",stat:!0,forced:!A,sham:!x},{create:function(Tn,$n){return $n===void 0?G(Tn):Nn(G(Tn),$n)},defineProperty:Zt,defineProperties:Nn,getOwnPropertyDescriptor:li}),u({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:Si,getOwnPropertySymbols:zo}),u({target:"Object",stat:!0,forced:M(function(){ue.f(1)})},{getOwnPropertySymbols:function(Tn){return ue.f($(Tn))}}),bn&&u({target:"JSON",stat:!0,forced:!A||M(function(){var Tn=Xt();return bn([Tn])!="[null]"||bn({a:Tn})!="{}"||bn(Object(Tn))!="{}"})},{stringify:function(Tn,$n,Hn){var lr=me(arguments),eo=$n;if((D($n)||Tn!==void 0)&&!U(Tn))return S($n)||($n=function(jr,ml){if(j(eo)&&(ml=g(eo,this,jr,ml)),!U(ml))return ml}),lr[1]=$n,d(bn,null,lr)}}),!nt[pt]){var ti=nt.valueOf;He(nt,pt,function(Tn){return g(ti,this)})}Be(Xt,_t),Je[Xe]=!0},function(n,a,r){var u=r(7),c=r(152),v=r(153),d=r(3),g=r(57),_=r(28),b=_("iterator"),x=_("toStringTag"),A=d.values,M=function(S,j){if(S){if(S[b]!==A)try{g(S,b,A)}catch{S[b]=A}if(S[x]||g(S,x,j),c[j]){for(var D in d)if(S[D]!==d[D])try{g(S,D,d[D])}catch{S[D]=d[D]}}}};for(var O in c)M(u[O]&&u[O].prototype,O);M(v,"DOMTokenList")},function(n,a,r){var u=r(151).charAt,c=r(39),v=r(58),d=r(116),g="String Iterator",_=v.set,b=v.getterFor(g);d(String,"String",function(x){_(this,{type:g,string:c(x),index:0})},function(){var x,A=b(this),M=A.string,O=A.index;return O>=M.length?{value:void 0,done:!0}:(x=u(M,O),A.index+=x.length,{value:x,done:!1})})},function(n,a,r){(function(u){var c=function(v){return v&&v.Math==Math&&v};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof u=="object"&&u)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,a,r){var u=r(16),c=r(36),v=r(7),d=r(15),g=r(35),_=r(30),b=r(54),x=r(39),A=r(38).f,M=r(134),O=v.Symbol,S=O&&O.prototype;if(c&&_(O)&&(!("description"in S)||O().description!==void 0)){var j={},D=function(){var H=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),B=b(S,this)?new O(H):H===void 0?O():O(H);return H===""&&(j[B]=!0),B};M(D,O),D.prototype=S,S.constructor=D;var z=String(O("test"))=="Symbol(test)",U=d(S.toString),L=d(S.valueOf),$=/^Symbol\((.*)\)[^)]+$/,X=d("".replace),Y=d("".slice);A(S,"description",{configurable:!0,get:function(){var H=L(this),B=U(H);if(g(j,H))return"";var G=z?Y(B,7,-1):X(B,$,"$1");return G===""?void 0:G}}),u({global:!0,forced:!0},{Symbol:D})}},function(n,a,r){r(141)("iterator")},function(n,a,r){r.d(a,"a",function(){return d.a}),r.d(a,"c",function(){return d.e}),r.d(a,"h",function(){return $}),r.d(a,"i",function(){return z}),r.d(a,"j",function(){return j}),r.d(a,"b",function(){return de}),r.d(a,"e",function(){return He}),r.d(a,"f",function(){return ye}),r.d(a,"g",function(){return uo});var u,c,v,d=r(0),g=0,_=[],b=d.i.__b,x=d.i.__r,A=d.i.diffed,M=d.i.__c,O=d.i.unmount;function S(Ae,Ye){d.i.__h&&d.i.__h(c,Ae,g||Ye),g=0;var Ie=c.__H||(c.__H={__:[],__h:[]});return Ae>=Ie.__.length&&Ie.__.push({}),Ie.__[Ae]}function j(Ae){return g=1,D(Q,Ae)}function D(Ae,Ye,Ie){var lt=S(u++,2);return lt.t=Ae,lt.__c||(lt.__=[Ie?Ie(Ye):Q(void 0,Ye),function(tn){var Zt=lt.t(lt.__[0],tn);lt.__[0]!==Zt&&(lt.__=[Zt,lt.__[1]],lt.__c.setState({}))}],lt.__c=c),lt.__}function z(Ae,Ye){var Ie=S(u++,3);!d.i.__s&&K(Ie.__H,Ye)&&(Ie.__=Ae,Ie.__H=Ye,c.__H.__h.push(Ie))}function U(Ae,Ye){var Ie=S(u++,4);!d.i.__s&&K(Ie.__H,Ye)&&(Ie.__=Ae,Ie.__H=Ye,c.__h.push(Ie))}function L(Ae,Ye){var Ie=S(u++,7);return K(Ie.__H,Ye)&&(Ie.__=Ae(),Ie.__H=Ye,Ie.__h=Ae),Ie.__}function $(Ae,Ye){return g=8,L(function(){return Ae},Ye)}function X(){var Ae;for(_.sort(function(Ye,Ie){return Ye.__v.__b-Ie.__v.__b});Ae=_.pop();)if(Ae.__P)try{Ae.__H.__h.forEach(B),Ae.__H.__h.forEach(G),Ae.__H.__h=[]}catch(Ye){Ae.__H.__h=[],d.i.__e(Ye,Ae.__v)}}d.i.__b=function(Ae){c=null,b&&b(Ae)},d.i.__r=function(Ae){x&&x(Ae),u=0;var Ye=(c=Ae.__c).__H;Ye&&(Ye.__h.forEach(B),Ye.__h.forEach(G),Ye.__h=[])},d.i.diffed=function(Ae){A&&A(Ae);var Ye=Ae.__c;Ye&&Ye.__H&&Ye.__H.__h.length&&(_.push(Ye)!==1&&v===d.i.requestAnimationFrame||((v=d.i.requestAnimationFrame)||H)(X)),c=null},d.i.__c=function(Ae,Ye){Ye.some(function(Ie){try{Ie.__h.forEach(B),Ie.__h=Ie.__h.filter(function(lt){return!lt.__||G(lt)})}catch(lt){Ye.some(function(tn){tn.__h&&(tn.__h=[])}),Ye=[],d.i.__e(lt,Ie.__v)}}),M&&M(Ae,Ye)},d.i.unmount=function(Ae){O&&O(Ae);var Ye,Ie=Ae.__c;Ie&&Ie.__H&&(Ie.__H.__.forEach(function(lt){try{B(lt)}catch(tn){Ye=tn}}),Ye&&d.i.__e(Ye,Ie.__v))};var Y=typeof requestAnimationFrame=="function";function H(Ae){var Ye,Ie=function(){clearTimeout(lt),Y&&cancelAnimationFrame(Ye),setTimeout(Ae)},lt=setTimeout(Ie,100);Y&&(Ye=requestAnimationFrame(Ie))}function B(Ae){var Ye=c,Ie=Ae.__c;typeof Ie=="function"&&(Ae.__c=void 0,Ie()),c=Ye}function G(Ae){var Ye=c;Ae.__c=Ae.__(),c=Ye}function K(Ae,Ye){return!Ae||Ae.length!==Ye.length||Ye.some(function(Ie,lt){return Ie!==Ae[lt]})}function Q(Ae,Ye){return typeof Ye=="function"?Ye(Ae):Ye}function ce(Ae,Ye){for(var Ie in Ye)Ae[Ie]=Ye[Ie];return Ae}function ue(Ae,Ye){for(var Ie in Ae)if(Ie!=="__source"&&!(Ie in Ye))return!0;for(var lt in Ye)if(lt!=="__source"&&Ae[lt]!==Ye[lt])return!0;return!1}function de(Ae){this.props=Ae}function ye(Ae,Ye){function Ie(tn){var Zt=this.props.ref,Nn=Zt==tn.ref;return!Nn&&Zt&&(Zt.call?Zt(null):Zt.current=null),Ye?!Ye(this.props,tn)||!Nn:ue(this.props,tn)}function lt(tn){return this.shouldComponentUpdate=Ie,Object(d.e)(Ae,tn)}return lt.displayName="Memo("+(Ae.displayName||Ae.name)+")",lt.prototype.isReactComponent=!0,lt.__f=!0,lt}(de.prototype=new d.a).isPureReactComponent=!0,de.prototype.shouldComponentUpdate=function(Ae,Ye){return ue(this.props,Ae)||ue(this.state,Ye)};var we=d.i.__b;d.i.__b=function(Ae){Ae.type&&Ae.type.__f&&Ae.ref&&(Ae.props.ref=Ae.ref,Ae.ref=null),we&&we(Ae)};var me=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function He(Ae){function Ye(Ie,lt){var tn=ce({},Ie);return delete tn.ref,Ae(tn,!(lt=Ie.ref||lt)||typeof lt=="object"&&!("current"in lt)?null:lt)}return Ye.$$typeof=me,Ye.render=Ye,Ye.prototype.isReactComponent=Ye.__f=!0,Ye.displayName="ForwardRef("+(Ae.displayName||Ae.name)+")",Ye}var tt=function(Ae,Ye){return Ae==null?null:Object(d.k)(Object(d.k)(Ae).map(Ye))},Ot={map:tt,forEach:tt,count:function(Ae){return Ae?Object(d.k)(Ae).length:0},only:function(Ae){var Ye=Object(d.k)(Ae);if(Ye.length!==1)throw"Children.only";return Ye[0]},toArray:d.k},Je=d.i.__e;d.i.__e=function(Ae,Ye,Ie){if(Ae.then){for(var lt,tn=Ye;tn=tn.__;)if((lt=tn.__c)&&lt.__c)return Ye.__e==null&&(Ye.__e=Ie.__e,Ye.__k=Ie.__k),lt.__c(Ae,Ye)}Je(Ae,Ye,Ie)};var Yt=d.i.unmount;function Kt(Ae,Ye,Ie){return Ae&&(Ae.__c&&Ae.__c.__H&&(Ae.__c.__H.__.forEach(function(lt){typeof lt.__c=="function"&&lt.__c()}),Ae.__c.__H=null),(Ae=ce({},Ae)).__c!=null&&(Ae.__c.__P===Ie&&(Ae.__c.__P=Ye),Ae.__c=null),Ae.__k=Ae.__k&&Ae.__k.map(function(lt){return Kt(lt,Ye,Ie)})),Ae}function Ft(Ae,Ye,Ie){return Ae&&(Ae.__v=null,Ae.__k=Ae.__k&&Ae.__k.map(function(lt){return Ft(lt,Ye,Ie)}),Ae.__c&&Ae.__c.__P===Ye&&(Ae.__e&&Ie.insertBefore(Ae.__e,Ae.__d),Ae.__c.__e=!0,Ae.__c.__P=Ie)),Ae}function An(){this.__u=0,this.t=null,this.__b=null}function Be(Ae){var Ye=Ae.__.__c;return Ye&&Ye.__e&&Ye.__e(Ae)}function Se(){this.u=null,this.o=null}d.i.unmount=function(Ae){var Ye=Ae.__c;Ye&&Ye.__R&&Ye.__R(),Ye&&Ae.__h===!0&&(Ae.type=null),Yt&&Yt(Ae)},(An.prototype=new d.a).__c=function(Ae,Ye){var Ie=Ye.__c,lt=this;lt.t==null&&(lt.t=[]),lt.t.push(Ie);var tn=Be(lt.__v),Zt=!1,Nn=function(){Zt||(Zt=!0,Ie.__R=null,tn?tn(Er):Er())};Ie.__R=Nn;var Er=function(){if(!--lt.__u){if(lt.state.__e){var Si=lt.state.__e;lt.__v.__k[0]=Ft(Si,Si.__c.__P,Si.__c.__O)}var zo;for(lt.setState({__e:lt.__b=null});zo=lt.t.pop();)zo.forceUpdate()}},li=Ye.__h===!0;lt.__u++||li||lt.setState({__e:lt.__b=lt.__v.__k[0]}),Ae.then(Nn,Nn)},An.prototype.componentWillUnmount=function(){this.t=[]},An.prototype.render=function(Ae,Ye){if(this.__b){if(this.__v.__k){var Ie=document.createElement("div"),lt=this.__v.__k[0].__c;this.__v.__k[0]=Kt(this.__b,Ie,lt.__O=lt.__P)}this.__b=null}var tn=Ye.__e&&Object(d.e)(d.b,null,Ae.fallback);return tn&&(tn.__h=null),[Object(d.e)(d.b,null,Ye.__e?null:Ae.children),tn]};var Ce=function(Ae,Ye,Ie){if(++Ie[1]===Ie[0]&&Ae.o.delete(Ye),Ae.props.revealOrder&&(Ae.props.revealOrder[0]!=="t"||!Ae.o.size))for(Ie=Ae.u;Ie;){for(;Ie.length>3;)Ie.pop()();if(Ie[1]<Ie[0])break;Ae.u=Ie=Ie[2]}};function Xe(Ae){return this.getChildContext=function(){return Ae.context},Ae.children}function _t(Ae){var Ye=this,Ie=Ae.i;Ye.componentWillUnmount=function(){Object(d.j)(null,Ye.l),Ye.l=null,Ye.i=null},Ye.i&&Ye.i!==Ie&&Ye.componentWillUnmount(),Ae.__v?(Ye.l||(Ye.i=Ie,Ye.l={nodeType:1,parentNode:Ie,childNodes:[],appendChild:function(lt){this.childNodes.push(lt),Ye.i.appendChild(lt)},insertBefore:function(lt,tn){this.childNodes.push(lt),Ye.i.appendChild(lt)},removeChild:function(lt){this.childNodes.splice(this.childNodes.indexOf(lt)>>>1,1),Ye.i.removeChild(lt)}}),Object(d.j)(Object(d.e)(Xe,{context:Ye.context},Ae.__v),Ye.l)):Ye.l&&Ye.componentWillUnmount()}(Se.prototype=new d.a).__e=function(Ae){var Ye=this,Ie=Be(Ye.__v),lt=Ye.o.get(Ae);return lt[0]++,function(tn){var Zt=function(){Ye.props.revealOrder?(lt.push(tn),Ce(Ye,Ae,lt)):tn()};Ie?Ie(Zt):Zt()}},Se.prototype.render=function(Ae){this.u=null,this.o=new Map;var Ye=Object(d.k)(Ae.children);Ae.revealOrder&&Ae.revealOrder[0]==="b"&&Ye.reverse();for(var Ie=Ye.length;Ie--;)this.o.set(Ye[Ie],this.u=[1,0,this.u]);return Ae.children},Se.prototype.componentDidUpdate=Se.prototype.componentDidMount=function(){var Ae=this;this.o.forEach(function(Ye,Ie){Ce(Ae,Ie,Ye)})};var pt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,bt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nn=typeof document<"u",on=function(Ae){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Ae)};d.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Ae){Object.defineProperty(d.a.prototype,Ae,{configurable:!0,get:function(){return this["UNSAFE_"+Ae]},set:function(Ye){Object.defineProperty(this,Ae,{configurable:!0,writable:!0,value:Ye})}})});var Xt=d.i.event;function nt(){}function fn(){return this.cancelBubble}function $e(){return this.defaultPrevented}d.i.event=function(Ae){return Xt&&(Ae=Xt(Ae)),Ae.persist=nt,Ae.isPropagationStopped=fn,Ae.isDefaultPrevented=$e,Ae.nativeEvent=Ae};var bn,Zn={configurable:!0,get:function(){return this.class}},ie=d.i.vnode;d.i.vnode=function(Ae){var Ye=Ae.type,Ie=Ae.props,lt=Ie;if(typeof Ye=="string"){var tn=Ye.indexOf("-")===-1;for(var Zt in lt={},Ie){var Nn=Ie[Zt];nn&&Zt==="children"&&Ye==="noscript"||Zt==="value"&&"defaultValue"in Ie&&Nn==null||(Zt==="defaultValue"&&"value"in Ie&&Ie.value==null?Zt="value":Zt==="download"&&Nn===!0?Nn="":/ondoubleclick/i.test(Zt)?Zt="ondblclick":/^onchange(textarea|input)/i.test(Zt+Ye)&&!on(Ie.type)?Zt="oninput":/^onfocus$/i.test(Zt)?Zt="onfocusin":/^onblur$/i.test(Zt)?Zt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Zt)?Zt=Zt.toLowerCase():tn&&bt.test(Zt)?Zt=Zt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Nn===null&&(Nn=void 0),lt[Zt]=Nn)}Ye=="select"&&lt.multiple&&Array.isArray(lt.value)&&(lt.value=Object(d.k)(Ie.children).forEach(function(Er){Er.props.selected=lt.value.indexOf(Er.props.value)!=-1})),Ye=="select"&&lt.defaultValue!=null&&(lt.value=Object(d.k)(Ie.children).forEach(function(Er){Er.props.selected=lt.multiple?lt.defaultValue.indexOf(Er.props.value)!=-1:lt.defaultValue==Er.props.value})),Ae.props=lt,Ie.class!=Ie.className&&(Zn.enumerable="className"in Ie,Ie.className!=null&&(lt.class=Ie.className),Object.defineProperty(lt,"className",Zn))}Ae.$$typeof=pt,ie&&ie(Ae)};var Jn=d.i.__r;d.i.__r=function(Ae){Jn&&Jn(Ae),bn=Ae.__c};var kr={ReactCurrentDispatcher:{current:{readContext:function(Ae){return bn.__n[Ae.__c].props.value}}}};function Wr(Ae){return!!Ae&&Ae.$$typeof===pt}var uo=function(Ae,Ye){return Ae(Ye)},Fn=d.b,yo={useState:j,useReducer:D,useEffect:z,useLayoutEffect:U,useRef:function(Ae){return g=5,L(function(){return{current:Ae}},[])},useImperativeHandle:function(Ae,Ye,Ie){g=6,U(function(){typeof Ae=="function"?Ae(Ye()):Ae&&(Ae.current=Ye())},Ie==null?Ie:Ie.concat(Ae))},useMemo:L,useCallback:$,useContext:function(Ae){var Ye=c.context[Ae.__c],Ie=S(u++,9);return Ie.c=Ae,Ye?(Ie.__==null&&(Ie.__=!0,Ye.sub(c)),Ye.props.value):Ae.__},useDebugValue:function(Ae,Ye){d.i.useDebugValue&&d.i.useDebugValue(Ye?Ye(Ae):Ae)},version:"17.0.2",Children:Ot,render:function(Ae,Ye,Ie){return Ye.__k==null&&(Ye.textContent=""),Object(d.j)(Ae,Ye),typeof Ie=="function"&&Ie(),Ae?Ae.__c:null},hydrate:function(Ae,Ye,Ie){return Object(d.h)(Ae,Ye),typeof Ie=="function"&&Ie(),Ae?Ae.__c:null},unmountComponentAtNode:function(Ae){return!!Ae.__k&&(Object(d.j)(null,Ae),!0)},createPortal:function(Ae,Ye){return Object(d.e)(_t,{__v:Ae,i:Ye})},createElement:d.e,createContext:d.d,createFactory:function(Ae){return d.e.bind(null,Ae)},cloneElement:function(Ae){return Wr(Ae)?d.c.apply(null,arguments):Ae},createRef:d.f,Fragment:d.b,isValidElement:Wr,findDOMNode:function(Ae){return Ae&&(Ae.base||Ae.nodeType===1&&Ae)||null},Component:d.a,PureComponent:de,memo:ye,forwardRef:He,flushSync:function(Ae,Ye){return Ae(Ye)},unstable_batchedUpdates:uo,StrictMode:Fn,Suspense:An,SuspenseList:Se,lazy:function(Ae){var Ye,Ie,lt;function tn(Zt){if(Ye||(Ye=Ae()).then(function(Nn){Ie=Nn.default||Nn},function(Nn){lt=Nn}),lt)throw lt;if(!Ie)throw Ye;return Object(d.e)(Ie,Zt)}return tn.displayName="Lazy",tn.__f=!0,tn},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:kr};a.d=yo},function(n,a,r){var u=r(7),c=r(152),v=r(153),d=r(187),g=r(57),_=function(x){if(x&&x.forEach!==d)try{g(x,"forEach",d)}catch{x.forEach=d}};for(var b in c)c[b]&&_(u[b]&&u[b].prototype);_(v)},function(n,a,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,a,r){var u=r(16),c=r(18),v=r(40),d=r(101),g=r(143);u({target:"Object",stat:!0,forced:c(function(){d(1)}),sham:!g},{getPrototypeOf:function(_){return d(v(_))}})},function(n,a,r){var u=r(16),c=r(46),v=r(76),d=r(203),g=r(165),_=r(32),b=r(33),x=r(60),A=r(18),M=c("Reflect","construct"),O=Object.prototype,S=[].push,j=A(function(){function U(){}return!(M(function(){},[],U)instanceof U)}),D=!A(function(){M(function(){})}),z=j||D;u({target:"Reflect",stat:!0,forced:z,sham:z},{construct:function(U,L){g(U),_(L);var $=arguments.length<3?U:g(arguments[2]);if(D&&!j)return M(U,L,$);if(U==$){switch(L.length){case 0:return new U;case 1:return new U(L[0]);case 2:return new U(L[0],L[1]);case 3:return new U(L[0],L[1],L[2]);case 4:return new U(L[0],L[1],L[2],L[3])}var X=[null];return v(S,X,L),new(v(d,U,X))}var Y=$.prototype,H=x(b(Y)?Y:O),B=v(U,H,L);return b(B)?B:H}})},function(n,a){var r=Function.prototype,u=r.bind,c=r.call,v=u&&u.bind(c);n.exports=u?function(d){return d&&v(c,d)}:function(d){return d&&function(){return c.apply(d,arguments)}}},function(n,a,r){var u=r(7),c=r(50).f,v=r(57),d=r(42),g=r(110),_=r(134),b=r(95);n.exports=function(x,A){var M,O,S,j,D,z=x.target,U=x.global,L=x.stat;if(M=U?u:L?u[z]||g(z,{}):(u[z]||{}).prototype)for(O in A){if(j=A[O],S=x.noTargetGet?(D=c(M,O))&&D.value:M[O],!b(U?O:z+(L?".":"#")+O,x.forced)&&S!==void 0){if(typeof j==typeof S)continue;_(j,S)}(x.sham||S&&S.sham)&&v(j,"sham",!0),d(M,O,j,x)}}},function(n,a,r){var u=r(16),c=r(7),v=r(96),d=r(99),g=r(33),_=r(75),b=r(45),x=r(41),A=r(63),M=r(28),O=r(81),S=r(98),j=O("slice"),D=M("species"),z=c.Array,U=Math.max;u({target:"Array",proto:!0,forced:!j},{slice:function(L,$){var X,Y,H,B=x(this),G=b(B),K=_(L,G),Q=_($===void 0?G:$,G);if(v(B)&&(X=B.constructor,(d(X)&&(X===z||v(X.prototype))||g(X)&&(X=X[D])===null)&&(X=void 0),X===z||X===void 0))return S(B,K,Q);for(Y=new(X===void 0?z:X)(U(Q-K,0)),H=0;K<Q;K++,H++)K in B&&A(Y,H,B[K]);return Y.length=H,Y}})},function(n,a){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,a,r){var u=r(16),c=r(103);u({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,a,r){var u=r(16),c=r(40),v=r(77);u({target:"Object",stat:!0,forced:r(18)(function(){v(1)})},{keys:function(d){return v(c(d))}})},function(n,a,r){var u=r(36),c=r(73).EXISTS,v=r(15),d=r(38).f,g=Function.prototype,_=v(g.toString),b=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=v(b.exec);u&&!c&&d(g,"name",{configurable:!0,get:function(){try{return x(b,_(this))[1]}catch{return""}}})},function(n,a,r){var u=r(16),c=r(18),v=r(41),d=r(50).f,g=r(36),_=c(function(){d(1)});u({target:"Object",stat:!0,forced:!g||_,sham:!g},{getOwnPropertyDescriptor:function(b,x){return d(v(b),x)}})},function(n,a,r){var u=r(16),c=r(188);u({target:"Array",stat:!0,forced:!r(120)(function(v){Array.from(v)})},{from:c})},function(n,a,r){var u=r(16),c=r(79).filter;u({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var u=r(16),c=r(36),v=r(135),d=r(41),g=r(50),_=r(63);u({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(b){for(var x,A,M=d(b),O=g.f,S=v(M),j={},D=0;S.length>D;)(A=O(M,x=S[D++]))!==void 0&&_(j,x,A);return j}})},,function(n,a,r){var u=r(16),c=r(7),v=r(18),d=r(96),g=r(33),_=r(40),b=r(45),x=r(63),A=r(115),M=r(81),O=r(28),S=r(70),j=O("isConcatSpreadable"),D=9007199254740991,z="Maximum allowed index exceeded",U=c.TypeError,L=S>=51||!v(function(){var Y=[];return Y[j]=!1,Y.concat()[0]!==Y}),$=M("concat"),X=function(Y){if(!g(Y))return!1;var H=Y[j];return H!==void 0?!!H:d(Y)};u({target:"Array",proto:!0,forced:!L||!$},{concat:function(Y){var H,B,G,K,Q,ce=_(this),ue=A(ce,0),de=0;for(H=-1,G=arguments.length;H<G;H++)if(X(Q=H===-1?ce:arguments[H])){if(de+(K=b(Q))>D)throw U(z);for(B=0;B<K;B++,de++)B in Q&&x(ue,de,Q[B])}else{if(de>=D)throw U(z);x(ue,de++,Q)}return ue.length=de,ue}})},function(n,a,r){var u=r(7),c=r(89),v=r(35),d=r(90),g=r(108),_=r(132),b=c("wks"),x=u.Symbol,A=x&&x.for,M=_?x:x&&x.withoutSetter||d;n.exports=function(O){if(!v(b,O)||!g&&typeof b[O]!="string"){var S="Symbol."+O;g&&v(x,O)?b[O]=x[O]:b[O]=_&&A?A(S):M(S)}return b[O]}},function(n,a,r){var u=r(16),c=r(202);u({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,a){n.exports=function(r){return typeof r=="function"}},function(n,a,r){var u=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,v=u.a||c||Function("return this")();a.a=v},function(n,a,r){var u=r(7),c=r(33),v=u.String,d=u.TypeError;n.exports=function(g){if(c(g))return g;throw d(v(g)+" is not an object")}},function(n,a,r){var u=r(30);n.exports=function(c){return typeof c=="object"?c!==null:u(c)}},function(n,a){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,a,r){var u=r(15),c=r(40),v=u({}.hasOwnProperty);n.exports=Object.hasOwn||function(d,g){return v(c(d),g)}},function(n,a,r){var u=r(18);n.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,a,r){var u=r(16),c=r(79).map;u({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var u=r(7),c=r(36),v=r(133),d=r(32),g=r(86),_=u.TypeError,b=Object.defineProperty;a.f=c?b:function(x,A,M){if(d(x),A=g(A),d(M),v)try{return b(x,A,M)}catch{}if("get"in M||"set"in M)throw _("Accessors not supported");return"value"in M&&(x[A]=M.value),x}},function(n,a,r){var u=r(7),c=r(97),v=u.String;n.exports=function(d){if(c(d)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(d)}},function(n,a,r){var u=r(7),c=r(44),v=u.Object;n.exports=function(d){return v(c(d))}},function(n,a,r){var u=r(85),c=r(44);n.exports=function(v){return u(c(v))}},function(n,a,r){var u=r(7),c=r(30),v=r(35),d=r(57),g=r(110),_=r(92),b=r(58),x=r(73).CONFIGURABLE,A=b.get,M=b.enforce,O=String(String).split("String");(n.exports=function(S,j,D,z){var U,L=!!z&&!!z.unsafe,$=!!z&&!!z.enumerable,X=!!z&&!!z.noTargetGet,Y=z&&z.name!==void 0?z.name:j;c(D)&&(String(Y).slice(0,7)==="Symbol("&&(Y="["+String(Y).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(D,"name")||x&&D.name!==Y)&&d(D,"name",Y),(U=M(D)).source||(U.source=O.join(typeof Y=="string"?Y:""))),S!==u?(L?!X&&S[j]&&($=!0):delete S[j],$?S[j]=D:d(S,j,D)):$?S[j]=D:g(j,D)})(Function.prototype,"toString",function(){return c(this)&&A(this).source||_(this)})},function(n,a,r){(function(u){r.d(a,"d",function(){return d}),r.d(a,"c",function(){return g}),r.d(a,"b",function(){return _}),r.d(a,"a",function(){return x});var c=r(10),v=function(A,M){var O=typeof Symbol=="function"&&A[Symbol.iterator];if(!O)return A;var S,j,D=O.call(A),z=[];try{for(;(M===void 0||M-- >0)&&!(S=D.next()).done;)z.push(S.value)}catch(U){j={error:U}}finally{try{S&&!S.done&&(O=D.return)&&O.call(D)}finally{if(j)throw j.error}}return z};function d(){var A=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){A(function(M){return M+1})},[])}function g(A){if(!A||typeof A!="object")return!1;var M=Object.getPrototypeOf(A);return!M||M===Object.prototype}function _(A){return typeof Symbol=="function"?Symbol.for(A):"__$mobx-react "+A+"__"}var b={};function x(){return typeof window<"u"?window:u!==void 0?u:typeof self<"u"?self:b}}).call(this,r(68))},function(n,a,r){var u=r(7).TypeError;n.exports=function(c){if(c==null)throw u("Can't call method on "+c);return c}},function(n,a,r){var u=r(94);n.exports=function(c){return u(c.length)}},function(n,a,r){var u=r(7),c=r(30),v=function(d){return c(d)?d:void 0};n.exports=function(d,g){return arguments.length<2?v(u[d]):u[d]&&u[d][g]}},function(n,a,r){var u=r(16),c=r(34),v=r(33),d=r(32),g=r(204),_=r(50),b=r(101);u({target:"Reflect",stat:!0},{get:function x(A,M){var O,S,j=arguments.length<3?A:arguments[2];return d(A)===j?A[M]:(O=_.f(A,M))?g(O)?O.value:O.get===void 0?void 0:c(O.get,j):v(S=b(A))?x(S,M,j):void 0}})},function(n,a,r){(function(u){var c=r(31),v=r(171),d=t&&!t.nodeType&&t,g=d&&typeof u=="object"&&u&&!u.nodeType&&u,_=g&&g.exports===d?c.a.Buffer:void 0,b=(_?_.isBuffer:void 0)||v.a;a.a=b}).call(this,r(122)(n))},function(n,a,r){(function(u){var c=r(106),v=t&&!t.nodeType&&t,d=v&&typeof u=="object"&&u&&!u.nodeType&&u,g=d&&d.exports===v&&c.a.process,_=function(){try{var b=d&&d.require&&d.require("util").types;return b||g&&g.binding&&g.binding("util")}catch{}}();a.a=_}).call(this,r(122)(n))},function(n,a,r){var u=r(36),c=r(34),v=r(84),d=r(69),g=r(41),_=r(86),b=r(35),x=r(133),A=Object.getOwnPropertyDescriptor;a.f=u?A:function(M,O){if(M=g(M),O=_(O),x)try{return A(M,O)}catch{}if(b(M,O))return d(!c(v.f,M,O),M[O])}},function(n,a,r){var u=r(15),c=u({}.toString),v=u("".slice);n.exports=function(d){return v(c(d),8,-1)}},function(n,a,r){r(182)("Map",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,a,r){var u=r(16),c=r(220).entries;u({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(n,a,r){var u=r(15);n.exports=u({}.isPrototypeOf)},function(n,a,r){var u=r(46);n.exports=u("navigator","userAgent")||""},function(n,a,r){var u=r(7),c=r(30),v=r(88),d=u.TypeError;n.exports=function(g){if(c(g))return g;throw d(v(g)+" is not a function")}},function(n,a,r){var u=r(36),c=r(38),v=r(69);n.exports=u?function(d,g,_){return c.f(d,g,v(1,_))}:function(d,g,_){return d[g]=_,d}},function(n,a,r){var u,c,v,d=r(175),g=r(7),_=r(15),b=r(33),x=r(57),A=r(35),M=r(109),O=r(93),S=r(72),j="Object already initialized",D=g.TypeError,z=g.WeakMap;if(d||M.state){var U=M.state||(M.state=new z),L=_(U.get),$=_(U.has),X=_(U.set);u=function(H,B){if($(U,H))throw new D(j);return B.facade=H,X(U,H,B),B},c=function(H){return L(U,H)||{}},v=function(H){return $(U,H)}}else{var Y=O("state");S[Y]=!0,u=function(H,B){if(A(H,Y))throw new D(j);return B.facade=H,x(H,Y,B),B},c=function(H){return A(H,Y)?H[Y]:{}},v=function(H){return A(H,Y)}}n.exports={set:u,get:c,has:v,enforce:function(H){return v(H)?c(H):u(H,{})},getterFor:function(H){return function(B){var G;if(!b(B)||(G=c(B)).type!==H)throw D("Incompatible receiver, "+H+" required");return G}}}},function(n,a){var r=Math.ceil,u=Math.floor;n.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?u:r)(v)}},function(n,a,r){var u,c=r(32),v=r(176),d=r(111),g=r(72),_=r(138),b=r(91),x=r(93),A=x("IE_PROTO"),M=function(){},O=function(D){return"<script>"+D+"<\/script>"},S=function(D){D.write(O("")),D.close();var z=D.parentWindow.Object;return D=null,z},j=function(){try{u=new ActiveXObject("htmlfile")}catch{}var D,z;j=typeof document<"u"?document.domain&&u?S(u):((z=b("iframe")).style.display="none",_.appendChild(z),z.src="javascript:",(D=z.contentWindow.document).open(),D.write(O("document.F=Object")),D.close(),D.F):S(u);for(var U=d.length;U--;)delete j.prototype[d[U]];return j()};g[A]=!0,n.exports=Object.create||function(D,z){var U;return D!==null?(M.prototype=c(D),U=new M,M.prototype=null,U[A]=D):U=j(),z===void 0?U:v(U,z)}},function(n,a,r){var u=r(36),c=r(7),v=r(15),d=r(95),g=r(42),_=r(35),b=r(148),x=r(54),A=r(87),M=r(131),O=r(18),S=r(74).f,j=r(50).f,D=r(38).f,z=r(160),U=r(161).trim,L="Number",$=c.Number,X=$.prototype,Y=c.TypeError,H=v("".slice),B=v("".charCodeAt),G=function(ye){var we=M(ye,"number");return typeof we=="bigint"?we:K(we)},K=function(ye){var we,me,He,tt,Ot,Je,Yt,Kt,Ft=M(ye,"number");if(A(Ft))throw Y("Cannot convert a Symbol value to a number");if(typeof Ft=="string"&&Ft.length>2){if(Ft=U(Ft),(we=B(Ft,0))===43||we===45){if((me=B(Ft,2))===88||me===120)return NaN}else if(we===48){switch(B(Ft,1)){case 66:case 98:He=2,tt=49;break;case 79:case 111:He=8,tt=55;break;default:return+Ft}for(Je=(Ot=H(Ft,2)).length,Yt=0;Yt<Je;Yt++)if((Kt=B(Ot,Yt))<48||Kt>tt)return NaN;return parseInt(Ot,He)}}return+Ft};if(d(L,!$(" 0o1")||!$("0b1")||$("+0x1"))){for(var Q,ce=function(ye){var we=arguments.length<1?0:$(G(ye)),me=this;return x(X,me)&&O(function(){z(me)})?b(Object(we),me,ce):we},ue=u?S($):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),de=0;ue.length>de;de++)_($,Q=ue[de])&&!_(ce,Q)&&D(ce,Q,j($,Q));ce.prototype=X,X.constructor=ce,g(c,L,ce)}},function(n,a,r){var u=r(56);n.exports=function(c,v){var d=c[v];return d==null?void 0:u(d)}},function(n,a,r){var u=r(86),c=r(38),v=r(69);n.exports=function(d,g,_){var b=u(g);b in d?c.f(d,b,v(0,_)):d[b]=_}},function(n,a,r){var u=r(15),c=r(56),v=u(u.bind);n.exports=function(d,g){return c(d),g===void 0?d:v?v(d,g):function(){return d.apply(g,arguments)}}},function(n,a,r){var u=r(16),c=r(15),v=r(85),d=r(41),g=r(121),_=c([].join),b=v!=Object,x=g("join",",");u({target:"Array",proto:!0,forced:b||!x},{join:function(A){return _(d(this),A===void 0?",":A)}})},function(n,a,r){var u=r(15),c=r(73).PROPER,v=r(42),d=r(32),g=r(54),_=r(39),b=r(18),x=r(154),A="toString",M=RegExp.prototype,O=M.toString,S=u(x),j=b(function(){return O.call({source:"a",flags:"b"})!="/a/b"}),D=c&&O.name!=A;(j||D)&&v(RegExp.prototype,A,function(){var z=d(this),U=_(z.source),L=z.flags;return"/"+U+"/"+_(L===void 0&&g(M,z)&&!("flags"in M)?S(z):L)},{unsafe:!0})},function(n,a,r){var u=r(16),c=r(217),v=r(100);u({target:"Array",proto:!0},{fill:c}),v("fill")},function(n,a){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,a){n.exports=function(r,u){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:u}}},function(n,a,r){var u,c,v=r(7),d=r(55),g=v.process,_=v.Deno,b=g&&g.versions||_&&_.version,x=b&&b.v8;x&&(c=(u=x.split("."))[0]>0&&u[0]<4?1:+(u[0]+u[1])),!c&&d&&(!(u=d.match(/Edge\/(\d+)/))||u[1]>=74)&&(u=d.match(/Chrome\/(\d+)/))&&(c=+u[1]),n.exports=c},function(n,a){n.exports=!1},function(n,a){n.exports={}},function(n,a,r){var u=r(36),c=r(35),v=Function.prototype,d=u&&Object.getOwnPropertyDescriptor,g=c(v,"name"),_=g&&(function(){}).name==="something",b=g&&(!u||u&&d(v,"name").configurable);n.exports={EXISTS:g,PROPER:_,CONFIGURABLE:b}},function(n,a,r){var u=r(136),c=r(111).concat("length","prototype");a.f=Object.getOwnPropertyNames||function(v){return u(v,c)}},function(n,a,r){var u=r(59),c=Math.max,v=Math.min;n.exports=function(d,g){var _=u(d);return _<0?c(_+g,0):v(_,g)}},function(n,a){var r=Function.prototype,u=r.apply,c=r.bind,v=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(u):function(){return v.apply(u,arguments)})},function(n,a,r){var u=r(136),c=r(111);n.exports=Object.keys||function(v){return u(v,c)}},function(n,a,r){var u=r(38).f,c=r(35),v=r(28)("toStringTag");n.exports=function(d,g,_){d&&!c(d=_?d:d.prototype,v)&&u(d,v,{configurable:!0,value:g})}},function(n,a,r){var u=r(64),c=r(15),v=r(85),d=r(40),g=r(45),_=r(115),b=c([].push),x=function(A){var M=A==1,O=A==2,S=A==3,j=A==4,D=A==6,z=A==7,U=A==5||D;return function(L,$,X,Y){for(var H,B,G=d(L),K=v(G),Q=u($,X),ce=g(K),ue=0,de=Y||_,ye=M?de(L,ce):O||z?de(L,0):void 0;ce>ue;ue++)if((U||ue in K)&&(B=Q(H=K[ue],ue,G),A))if(M)ye[ue]=B;else if(B)switch(A){case 3:return!0;case 5:return H;case 6:return ue;case 2:b(ye,H)}else switch(A){case 4:return!1;case 7:b(ye,H)}return D?-1:S||j?j:ye}};n.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},function(n,a){n.exports={}},function(n,a,r){var u=r(18),c=r(28),v=r(70),d=c("species");n.exports=function(g){return v>=51||!u(function(){var _=[];return(_.constructor={})[d]=function(){return{foo:1}},_[g](Boolean).foo!==1})}},function(n,a,r){var u=r(76),c=r(34),v=r(15),d=r(123),g=r(159),_=r(32),b=r(44),x=r(164),A=r(124),M=r(94),O=r(39),S=r(62),j=r(114),D=r(125),z=r(103),U=r(155),L=r(18),$=U.UNSUPPORTED_Y,X=4294967295,Y=Math.min,H=[].push,B=v(/./.exec),G=v(H),K=v("".slice),Q=!L(function(){var ce=/(?:)/,ue=ce.exec;ce.exec=function(){return ue.apply(this,arguments)};var de="ab".split(ce);return de.length!==2||de[0]!=="a"||de[1]!=="b"});d("split",function(ce,ue,de){var ye;return ye="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(we,me){var He=O(b(this)),tt=me===void 0?X:me>>>0;if(tt===0)return[];if(we===void 0)return[He];if(!g(we))return c(ue,He,we,tt);for(var Ot,Je,Yt,Kt=[],Ft=(we.ignoreCase?"i":"")+(we.multiline?"m":"")+(we.unicode?"u":"")+(we.sticky?"y":""),An=0,Be=new RegExp(we.source,Ft+"g");(Ot=c(z,Be,He))&&!((Je=Be.lastIndex)>An&&(G(Kt,K(He,An,Ot.index)),Ot.length>1&&Ot.index<He.length&&u(H,Kt,j(Ot,1)),Yt=Ot[0].length,An=Je,Kt.length>=tt));)Be.lastIndex===Ot.index&&Be.lastIndex++;return An===He.length?!Yt&&B(Be,"")||G(Kt,""):G(Kt,K(He,An)),Kt.length>tt?j(Kt,0,tt):Kt}:"0".split(void 0,0).length?function(we,me){return we===void 0&&me===0?[]:c(ue,this,we,me)}:ue,[function(we,me){var He=b(this),tt=we==null?void 0:S(we,ce);return tt?c(tt,we,He,me):c(ye,O(He),we,me)},function(we,me){var He=_(this),tt=O(we),Ot=de(ye,He,tt,me,ye!==ue);if(Ot.done)return Ot.value;var Je=x(He,RegExp),Yt=He.unicode,Kt=(He.ignoreCase?"i":"")+(He.multiline?"m":"")+(He.unicode?"u":"")+($?"g":"y"),Ft=new Je($?"^(?:"+He.source+")":He,Kt),An=me===void 0?X:me>>>0;if(An===0)return[];if(tt.length===0)return D(Ft,tt)===null?[tt]:[];for(var Be=0,Se=0,Ce=[];Se<tt.length;){Ft.lastIndex=$?0:Se;var Xe,_t=D(Ft,$?K(tt,Se):tt);if(_t===null||(Xe=Y(M(Ft.lastIndex+($?Se:0)),tt.length))===Be)Se=A(tt,Se,Yt);else{if(G(Ce,K(tt,Be,Se)),Ce.length===An)return Ce;for(var pt=1;pt<=_t.length-1;pt++)if(G(Ce,_t[pt]),Ce.length===An)return Ce;Se=Be=Xe}}return G(Ce,K(tt,Be)),Ce}]},!Q,$)},function(n,a,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,a,r){var u={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!u.call({1:2},1);a.f=v?function(d){var g=c(this,d);return!!g&&g.enumerable}:u},function(n,a,r){var u=r(7),c=r(15),v=r(18),d=r(51),g=u.Object,_=c("".split);n.exports=v(function(){return!g("z").propertyIsEnumerable(0)})?function(b){return d(b)=="String"?_(b,""):g(b)}:g},function(n,a,r){var u=r(131),c=r(87);n.exports=function(v){var d=u(v,"string");return c(d)?d:d+""}},function(n,a,r){var u=r(7),c=r(46),v=r(30),d=r(54),g=r(132),_=u.Object;n.exports=g?function(b){return typeof b=="symbol"}:function(b){var x=c("Symbol");return v(x)&&d(x.prototype,_(b))}},function(n,a,r){var u=r(7).String;n.exports=function(c){try{return u(c)}catch{return"Object"}}},function(n,a,r){var u=r(71),c=r(109);(n.exports=function(v,d){return c[v]||(c[v]=d!==void 0?d:{})})("versions",[]).push({version:"3.19.3",mode:u?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,a,r){var u=r(15),c=0,v=Math.random(),d=u(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+d(++c+v,36)}},function(n,a,r){var u=r(7),c=r(33),v=u.document,d=c(v)&&c(v.createElement);n.exports=function(g){return d?v.createElement(g):{}}},function(n,a,r){var u=r(15),c=r(30),v=r(109),d=u(Function.toString);c(v.inspectSource)||(v.inspectSource=function(g){return d(g)}),n.exports=v.inspectSource},function(n,a,r){var u=r(89),c=r(90),v=u("keys");n.exports=function(d){return v[d]||(v[d]=c(d))}},function(n,a,r){var u=r(59),c=Math.min;n.exports=function(v){return v>0?c(u(v),9007199254740991):0}},function(n,a,r){var u=r(18),c=r(30),v=/#|\.prototype\./,d=function(A,M){var O=_[g(A)];return O==x||O!=b&&(c(M)?u(M):!!M)},g=d.normalize=function(A){return String(A).replace(v,".").toLowerCase()},_=d.data={},b=d.NATIVE="N",x=d.POLYFILL="P";n.exports=d},function(n,a,r){var u=r(51);n.exports=Array.isArray||function(c){return u(c)=="Array"}},function(n,a,r){var u=r(7),c=r(113),v=r(30),d=r(51),g=r(28)("toStringTag"),_=u.Object,b=d(function(){return arguments}())=="Arguments";n.exports=c?d:function(x){var A,M,O;return x===void 0?"Undefined":x===null?"Null":typeof(M=function(S,j){try{return S[j]}catch{}}(A=_(x),g))=="string"?M:b?d(A):(O=d(A))=="Object"&&v(A.callee)?"Arguments":O}},function(n,a,r){var u=r(15);n.exports=u([].slice)},function(n,a,r){var u=r(15),c=r(18),v=r(30),d=r(97),g=r(46),_=r(92),b=function(){},x=[],A=g("Reflect","construct"),M=/^\s*(?:class|function)\b/,O=u(M.exec),S=!M.exec(b),j=function(D){if(!v(D))return!1;try{return A(b,x,D),!0}catch{return!1}};n.exports=!A||c(function(){var D;return j(j.call)||!j(Object)||!j(function(){D=!0})||D})?function(D){if(!v(D))return!1;switch(d(D)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return S||!!O(M,_(D))}:j},function(n,a,r){var u=r(28),c=r(60),v=r(38),d=u("unscopables"),g=Array.prototype;g[d]==null&&v.f(g,d,{configurable:!0,value:c(null)}),n.exports=function(_){g[d][_]=!0}},function(n,a,r){var u=r(7),c=r(35),v=r(30),d=r(40),g=r(93),_=r(143),b=g("IE_PROTO"),x=u.Object,A=x.prototype;n.exports=_?x.getPrototypeOf:function(M){var O=d(M);if(c(O,b))return O[b];var S=O.constructor;return v(S)&&O instanceof S?S.prototype:O instanceof x?A:null}},function(n,a,r){var u=r(15),c=r(32),v=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d,g=!1,_={};try{(d=u(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(_,[]),g=_ instanceof Array}catch{}return function(b,x){return c(b),v(x),g?d(b,x):b.__proto__=x,b}}():void 0)},function(n,a,r){var u,c,v=r(34),d=r(15),g=r(39),_=r(154),b=r(155),x=r(89),A=r(60),M=r(58).get,O=r(190),S=r(191),j=x("native-string-replace",String.prototype.replace),D=RegExp.prototype.exec,z=D,U=d("".charAt),L=d("".indexOf),$=d("".replace),X=d("".slice),Y=(c=/b*/g,v(D,u=/a/,"a"),v(D,c,"a"),u.lastIndex!==0||c.lastIndex!==0),H=b.BROKEN_CARET,B=/()??/.exec("")[1]!==void 0;(Y||B||H||O||S)&&(z=function(G){var K,Q,ce,ue,de,ye,we,me=this,He=M(me),tt=g(G),Ot=He.raw;if(Ot)return Ot.lastIndex=me.lastIndex,K=v(z,Ot,tt),me.lastIndex=Ot.lastIndex,K;var Je=He.groups,Yt=H&&me.sticky,Kt=v(_,me),Ft=me.source,An=0,Be=tt;if(Yt&&(Kt=$(Kt,"y",""),L(Kt,"g")===-1&&(Kt+="g"),Be=X(tt,me.lastIndex),me.lastIndex>0&&(!me.multiline||me.multiline&&U(tt,me.lastIndex-1)!==`
`)&&(Ft="(?: "+Ft+")",Be=" "+Be,An++),Q=new RegExp("^(?:"+Ft+")",Kt)),B&&(Q=new RegExp("^"+Ft+"$(?!\\s)",Kt)),Y&&(ce=me.lastIndex),ue=v(D,Yt?Q:me,Be),Yt?ue?(ue.input=X(ue.input,An),ue[0]=X(ue[0],An),ue.index=me.lastIndex,me.lastIndex+=ue[0].length):me.lastIndex=0:Y&&ue&&(me.lastIndex=me.global?ue.index+ue[0].length:ce),B&&ue&&ue.length>1&&v(j,ue[0],Q,function(){for(de=1;de<arguments.length-2;de++)arguments[de]===void 0&&(ue[de]=void 0)}),ue&&Je)for(ue.groups=ye=A(null),de=0;de<Je.length;de++)ye[(we=Je[de])[0]]=ue[we[1]];return ue}),n.exports=z},function(n,a,r){var u=r(16),c=r(7),v=r(75),d=r(59),g=r(45),_=r(40),b=r(115),x=r(63),A=r(81)("splice"),M=c.TypeError,O=Math.max,S=Math.min,j=9007199254740991,D="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!A},{splice:function(z,U){var L,$,X,Y,H,B,G=_(this),K=g(G),Q=v(z,K),ce=arguments.length;if(ce===0?L=$=0:ce===1?(L=0,$=K-Q):(L=ce-2,$=S(O(d(U),0),K-Q)),K+L-$>j)throw M(D);for(X=b(G,$),Y=0;Y<$;Y++)(H=Q+Y)in G&&x(X,Y,G[H]);if(X.length=$,L<$){for(Y=Q;Y<K-$;Y++)B=Y+L,(H=Y+$)in G?G[B]=G[H]:delete G[B];for(Y=K;Y>K-$+L;Y--)delete G[Y-1]}else if(L>$)for(Y=K-$;Y>Q;Y--)B=Y+L-1,(H=Y+$-1)in G?G[B]=G[H]:delete G[B];for(Y=0;Y<L;Y++)G[Y+Q]=arguments[Y+2];return G.length=K-$+L,X}})},function(n,a,r){var u=r(16),c=r(205);u({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(n,a,r){(function(u){var c=typeof u=="object"&&u&&u.Object===Object&&u;a.a=c}).call(this,r(68))},function(n,a,r){(function(u){var c=r(31),v=t&&!t.nodeType&&t,d=v&&typeof u=="object"&&u&&!u.nodeType&&u,g=d&&d.exports===v?c.a.Buffer:void 0,_=g?g.allocUnsafe:void 0;a.a=function(b,x){if(x)return b.slice();var A=b.length,M=_?_(A):new b.constructor(A);return b.copy(M),M}}).call(this,r(122)(n))},function(n,a,r){var u=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&u&&u<41})},function(n,a,r){var u=r(7),c=r(110),v="__core-js_shared__",d=u[v]||c(v,{});n.exports=d},function(n,a,r){var u=r(7),c=Object.defineProperty;n.exports=function(v,d){try{c(u,v,{value:d,configurable:!0,writable:!0})}catch{u[v]=d}return d}},function(n,a){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,a){a.f=Object.getOwnPropertySymbols},function(n,a,r){var u={};u[r(28)("toStringTag")]="z",n.exports=String(u)==="[object z]"},function(n,a,r){var u=r(7),c=r(75),v=r(45),d=r(63),g=u.Array,_=Math.max;n.exports=function(b,x,A){for(var M=v(b),O=c(x,M),S=c(A===void 0?M:A,M),j=g(_(S-O,0)),D=0;O<S;O++,D++)d(j,D,b[O]);return j.length=D,j}},function(n,a,r){var u=r(178);n.exports=function(c,v){return new(u(c))(v===0?0:v)}},function(n,a,r){var u=r(16),c=r(34),v=r(71),d=r(73),g=r(30),_=r(180),b=r(101),x=r(102),A=r(78),M=r(57),O=r(42),S=r(28),j=r(80),D=r(142),z=d.PROPER,U=d.CONFIGURABLE,L=D.IteratorPrototype,$=D.BUGGY_SAFARI_ITERATORS,X=S("iterator"),Y="keys",H="values",B="entries",G=function(){return this};n.exports=function(K,Q,ce,ue,de,ye,we){_(ce,Q,ue);var me,He,tt,Ot=function(Se){if(Se===de&&An)return An;if(!$&&Se in Kt)return Kt[Se];switch(Se){case Y:case H:case B:return function(){return new ce(this,Se)}}return function(){return new ce(this)}},Je=Q+" Iterator",Yt=!1,Kt=K.prototype,Ft=Kt[X]||Kt["@@iterator"]||de&&Kt[de],An=!$&&Ft||Ot(de),Be=Q=="Array"&&Kt.entries||Ft;if(Be&&(me=b(Be.call(new K)))!==Object.prototype&&me.next&&(v||b(me)===L||(x?x(me,L):g(me[X])||O(me,X,G)),A(me,Je,!0,!0),v&&(j[Je]=G)),z&&de==H&&Ft&&Ft.name!==H&&(!v&&U?M(Kt,"name",H):(Yt=!0,An=function(){return c(Ft,this)})),de)if(He={values:Ot(H),keys:ye?An:Ot(Y),entries:Ot(B)},we)for(tt in He)($||Yt||!(tt in Kt))&&O(Kt,tt,He[tt]);else u({target:Q,proto:!0,forced:$||Yt},He);return v&&!we||Kt[X]===An||O(Kt,X,An,{name:de}),j[Q]=An,He}},function(n,a,r){var u=r(7),c=r(64),v=r(34),d=r(32),g=r(88),_=r(145),b=r(45),x=r(54),A=r(146),M=r(118),O=r(147),S=u.TypeError,j=function(z,U){this.stopped=z,this.result=U},D=j.prototype;n.exports=function(z,U,L){var $,X,Y,H,B,G,K,Q=L&&L.that,ce=!(!L||!L.AS_ENTRIES),ue=!(!L||!L.IS_ITERATOR),de=!(!L||!L.INTERRUPTED),ye=c(U,Q),we=function(He){return $&&O($,"normal",He),new j(!0,He)},me=function(He){return ce?(d(He),de?ye(He[0],He[1],we):ye(He[0],He[1])):de?ye(He,we):ye(He)};if(ue)$=z;else{if(!(X=M(z)))throw S(g(z)+" is not iterable");if(_(X)){for(Y=0,H=b(z);H>Y;Y++)if((B=me(z[Y]))&&x(D,B))return B;return new j(!1)}$=A(z,X)}for(G=$.next;!(K=v(G,$)).done;){try{B=me(K.value)}catch(He){O($,"throw",He)}if(typeof B=="object"&&B&&x(D,B))return B}return new j(!1)}},function(n,a,r){var u=r(97),c=r(62),v=r(80),d=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,d)||c(g,"@@iterator")||v[u(g)]}},function(n,a,r){var u=r(7),c=r(54),v=u.TypeError;n.exports=function(d,g){if(c(g,d))return d;throw v("Incorrect invocation")}},function(n,a,r){var u=r(28)("iterator"),c=!1;try{var v=0,d={next:function(){return{done:!!v++}},return:function(){c=!0}};d[u]=function(){return this},Array.from(d,function(){throw 2})}catch{}n.exports=function(g,_){if(!_&&!c)return!1;var b=!1;try{var x={};x[u]=function(){return{next:function(){return{done:b=!0}}}},g(x)}catch{}return b}},function(n,a,r){var u=r(18);n.exports=function(c,v){var d=[][c];return!!d&&u(function(){d.call(null,v||function(){throw 1},1)})}},function(n,a){n.exports=function(r){if(!r.webpackPolyfill){var u=Object.create(r);u.children||(u.children=[]),Object.defineProperty(u,"loaded",{enumerable:!0,get:function(){return u.l}}),Object.defineProperty(u,"id",{enumerable:!0,get:function(){return u.i}}),Object.defineProperty(u,"exports",{enumerable:!0}),u.webpackPolyfill=1}return u}},function(n,a,r){r(19);var u=r(15),c=r(42),v=r(103),d=r(18),g=r(28),_=r(57),b=g("species"),x=RegExp.prototype;n.exports=function(A,M,O,S){var j=g(A),D=!d(function(){var $={};return $[j]=function(){return 7},""[A]($)!=7}),z=D&&!d(function(){var $=!1,X=/a/;return A==="split"&&((X={}).constructor={},X.constructor[b]=function(){return X},X.flags="",X[j]=/./[j]),X.exec=function(){return $=!0,null},X[j](""),!$});if(!D||!z||O){var U=u(/./[j]),L=M(j,""[A],function($,X,Y,H,B){var G=u($),K=X.exec;return K===v||K===x.exec?D&&!B?{done:!0,value:U(X,Y,H)}:{done:!0,value:G(Y,X,H)}:{done:!1}});c(String.prototype,A,L[0]),c(x,j,L[1])}S&&_(x[j],"sham",!0)}},function(n,a,r){var u=r(151).charAt;n.exports=function(c,v,d){return v+(d?u(c,v).length:1)}},function(n,a,r){var u=r(7),c=r(34),v=r(32),d=r(30),g=r(51),_=r(103),b=u.TypeError;n.exports=function(x,A){var M=x.exec;if(d(M)){var O=c(M,x,A);return O!==null&&v(O),O}if(g(x)==="RegExp")return c(_,x,A);throw b("RegExp#exec called on incompatible receiver")}},function(n,a,r){var u=r(76),c=r(34),v=r(15),d=r(123),g=r(18),_=r(32),b=r(30),x=r(59),A=r(94),M=r(39),O=r(44),S=r(124),j=r(62),D=r(201),z=r(125),U=r(28)("replace"),L=Math.max,$=Math.min,X=v([].concat),Y=v([].push),H=v("".indexOf),B=v("".slice),G="a".replace(/./,"$0")==="$0",K=!!/./[U]&&/./[U]("a","$0")==="";d("replace",function(Q,ce,ue){var de=K?"$":"$0";return[function(ye,we){var me=O(this),He=ye==null?void 0:j(ye,U);return He?c(He,ye,me,we):c(ce,M(me),ye,we)},function(ye,we){var me=_(this),He=M(ye);if(typeof we=="string"&&H(we,de)===-1&&H(we,"$<")===-1){var tt=ue(ce,me,He,we);if(tt.done)return tt.value}var Ot=b(we);Ot||(we=M(we));var Je=me.global;if(Je){var Yt=me.unicode;me.lastIndex=0}for(var Kt=[];;){var Ft=z(me,He);if(Ft===null||(Y(Kt,Ft),!Je))break;M(Ft[0])===""&&(me.lastIndex=S(He,A(me.lastIndex),Yt))}for(var An,Be="",Se=0,Ce=0;Ce<Kt.length;Ce++){for(var Xe=M((Ft=Kt[Ce])[0]),_t=L($(x(Ft.index),He.length),0),pt=[],bt=1;bt<Ft.length;bt++)Y(pt,(An=Ft[bt])===void 0?An:String(An));var nn=Ft.groups;if(Ot){var on=X([Xe],pt,_t,He);nn!==void 0&&Y(on,nn);var Xt=M(u(we,void 0,on))}else Xt=D(Xe,He,_t,pt,nn,we);_t>=Se&&(Be+=B(He,Se,_t)+Xt,Se=_t+Xe.length)}return Be+B(He,Se)}]},!!g(function(){var Q=/./;return Q.exec=function(){var ce=[];return ce.groups={a:"7"},ce},"".replace(Q,"$<a>")!=="7"})||!G||K)},function(n,a,r){var u=r(16),c=Math.hypot,v=Math.abs,d=Math.sqrt;u({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,_){for(var b,x,A=0,M=0,O=arguments.length,S=0;M<O;)S<(b=v(arguments[M++]))?(A=A*(x=S/b)*x+1,S=b):A+=b>0?(x=b/S)*x:b;return S===1/0?1/0:S*d(A)}})},function(n,a,r){var u=r(51),c=r(7);n.exports=u(c.process)=="process"},function(n,a,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,a,r){(function(u,c){var v;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var d,g="Expected a function",_="__lodash_hash_undefined__",b="__lodash_placeholder__",x=16,A=32,M=64,O=128,S=256,j=1/0,D=9007199254740991,z=NaN,U=4294967295,L=[["ary",O],["bind",1],["bindKey",2],["curry",8],["curryRight",x],["flip",512],["partial",A],["partialRight",M],["rearg",S]],$="[object Arguments]",X="[object Array]",Y="[object Boolean]",H="[object Date]",B="[object Error]",G="[object Function]",K="[object GeneratorFunction]",Q="[object Map]",ce="[object Number]",ue="[object Object]",de="[object Promise]",ye="[object RegExp]",we="[object Set]",me="[object String]",He="[object Symbol]",tt="[object WeakMap]",Ot="[object ArrayBuffer]",Je="[object DataView]",Yt="[object Float32Array]",Kt="[object Float64Array]",Ft="[object Int8Array]",An="[object Int16Array]",Be="[object Int32Array]",Se="[object Uint8Array]",Ce="[object Uint8ClampedArray]",Xe="[object Uint16Array]",_t="[object Uint32Array]",pt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,nn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,on=/&(?:amp|lt|gt|quot|#39);/g,Xt=/[&<>"']/g,nt=RegExp(on.source),fn=RegExp(Xt.source),$e=/<%-([\s\S]+?)%>/g,bn=/<%([\s\S]+?)%>/g,Zn=/<%=([\s\S]+?)%>/g,ie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jn=/^\w*$/,kr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wr=/[\\^$.*+?()[\]{}|]/g,uo=RegExp(Wr.source),Fn=/^\s+/,yo=/\s/,Ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,Ie=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tn=/[()=,{}\[\]\/\s]/,Zt=/\\(\\)?/g,Nn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Er=/\w*$/,li=/^[-+]0x[0-9a-f]+$/i,Si=/^0b[01]+$/i,zo=/^\[object .+?Constructor\]$/,ti=/^0o[0-7]+$/i,Tn=/^(?:0|[1-9]\d*)$/,$n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hn=/($^)/,lr=/['\n\r\u2028\u2029\\]/g,eo="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",jr="\\u2700-\\u27bf",ml="a-z\\xdf-\\xf6\\xf8-\\xff",Ha="A-Z\\xc0-\\xd6\\xd8-\\xde",yl="\\ufe0e\\ufe0f",au="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",np="['’]",bc="[\\ud800-\\udfff]",va="["+au+"]",Bu="["+eo+"]",Pn="\\d+",Bf="[\\u2700-\\u27bf]",go="["+ml+"]",wc="[^\\ud800-\\udfff"+au+Pn+jr+ml+Ha+"]",Zi="\\ud83c[\\udffb-\\udfff]",la="[^\\ud800-\\udfff]",Rs="(?:\\ud83c[\\udde6-\\uddff]){2}",Ca="[\\ud800-\\udbff][\\udc00-\\udfff]",ma="["+Ha+"]",Da="(?:"+go+"|"+wc+")",Ec="(?:"+ma+"|"+wc+")",Oc="(?:['’](?:d|ll|m|re|s|t|ve))?",Uf="(?:['’](?:D|LL|M|RE|S|T|VE))?",Uu="(?:"+Bu+"|"+Zi+")?",Vf="[\\ufe0e\\ufe0f]?",Sc=Vf+Uu+("(?:\\u200d(?:"+[la,Rs,Ca].join("|")+")"+Vf+Uu+")*"),rp="(?:"+[Bf,Rs,Ca].join("|")+")"+Sc,jl="(?:"+[la+Bu+"?",Bu,Rs,Ca,bc].join("|")+")",Gf=RegExp(np,"g"),gl=RegExp(Bu,"g"),xc=RegExp(Zi+"(?="+Zi+")|"+jl+Sc,"g"),Ns=RegExp([ma+"?"+go+"+"+Oc+"(?="+[va,ma,"$"].join("|")+")",Ec+"+"+Uf+"(?="+[va,ma+Da,"$"].join("|")+")",ma+"?"+Da+"+"+Oc,ma+"+"+Uf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pn,rp].join("|"),"g"),Ac=RegExp("[\\u200d\\ud800-\\udfff"+eo+yl+"]"),Tc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,op=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wf=-1,qr={};qr[Yt]=qr[Kt]=qr[Ft]=qr[An]=qr[Be]=qr[Se]=qr[Ce]=qr[Xe]=qr[_t]=!0,qr[$]=qr[X]=qr[Ot]=qr[Y]=qr[Je]=qr[H]=qr[B]=qr[G]=qr[Q]=qr[ce]=qr[ue]=qr[ye]=qr[we]=qr[me]=qr[tt]=!1;var zr={};zr[$]=zr[X]=zr[Ot]=zr[Je]=zr[Y]=zr[H]=zr[Yt]=zr[Kt]=zr[Ft]=zr[An]=zr[Be]=zr[Q]=zr[ce]=zr[ue]=zr[ye]=zr[we]=zr[me]=zr[He]=zr[Se]=zr[Ce]=zr[Xe]=zr[_t]=!0,zr[B]=zr[G]=zr[tt]=!1;var zf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lu=parseFloat,ya=parseInt,Cs=typeof u=="object"&&u&&u.Object===Object&&u,Hf=typeof self=="object"&&self&&self.Object===Object&&self,Fo=Cs||Hf||Function("return this")(),Il=a&&!a.nodeType&&a,Ll=Il&&typeof c=="object"&&c&&!c.nodeType&&c,Ds=Ll&&Ll.exports===Il,uu=Ds&&Cs.process,xi=function(){try{var ft=Ll&&Ll.require&&Ll.require("util").types;return ft||uu&&uu.binding&&uu.binding("util")}catch{}}(),Mc=xi&&xi.isArrayBuffer,Xf=xi&&xi.isDate,kc=xi&&xi.isMap,$i=xi&&xi.isRegExp,ui=xi&&xi.isSet,ga=xi&&xi.isTypedArray;function io(ft,$t,Bt){switch(Bt.length){case 0:return ft.call($t);case 1:return ft.call($t,Bt[0]);case 2:return ft.call($t,Bt[0],Bt[1]);case 3:return ft.call($t,Bt[0],Bt[1],Bt[2])}return ft.apply($t,Bt)}function ip(ft,$t,Bt,mn){for(var fr=-1,Rr=ft==null?0:ft.length;++fr<Rr;){var po=ft[fr];$t(mn,po,Bt(po),ft)}return mn}function Bi(ft,$t){for(var Bt=-1,mn=ft==null?0:ft.length;++Bt<mn&&$t(ft[Bt],Bt,ft)!==!1;);return ft}function qf(ft,$t){for(var Bt=ft==null?0:ft.length;Bt--&&$t(ft[Bt],Bt,ft)!==!1;);return ft}function Yf(ft,$t){for(var Bt=-1,mn=ft==null?0:ft.length;++Bt<mn;)if(!$t(ft[Bt],Bt,ft))return!1;return!0}function Ui(ft,$t){for(var Bt=-1,mn=ft==null?0:ft.length,fr=0,Rr=[];++Bt<mn;){var po=ft[Bt];$t(po,Bt,ft)&&(Rr[fr++]=po)}return Rr}function Ji(ft,$t){return!!(ft!=null&&ft.length)&&su(ft,$t,0)>-1}function Pc(ft,$t,Bt){for(var mn=-1,fr=ft==null?0:ft.length;++mn<fr;)if(Bt($t,ft[mn]))return!0;return!1}function $r(ft,$t){for(var Bt=-1,mn=ft==null?0:ft.length,fr=Array(mn);++Bt<mn;)fr[Bt]=$t(ft[Bt],Bt,ft);return fr}function si(ft,$t){for(var Bt=-1,mn=$t.length,fr=ft.length;++Bt<mn;)ft[fr+Bt]=$t[Bt];return ft}function js(ft,$t,Bt,mn){var fr=-1,Rr=ft==null?0:ft.length;for(mn&&Rr&&(Bt=ft[++fr]);++fr<Rr;)Bt=$t(Bt,ft[fr],fr,ft);return Bt}function Kf(ft,$t,Bt,mn){var fr=ft==null?0:ft.length;for(mn&&fr&&(Bt=ft[--fr]);fr--;)Bt=$t(Bt,ft[fr],fr,ft);return Bt}function Rc(ft,$t){for(var Bt=-1,mn=ft==null?0:ft.length;++Bt<mn;)if($t(ft[Bt],Bt,ft))return!0;return!1}var Is=Gi("length");function Xa(ft,$t,Bt){var mn;return Bt(ft,function(fr,Rr,po){if($t(fr,Rr,po))return mn=Rr,!1}),mn}function Vi(ft,$t,Bt,mn){for(var fr=ft.length,Rr=Bt+(mn?1:-1);mn?Rr--:++Rr<fr;)if($t(ft[Rr],Rr,ft))return Rr;return-1}function su(ft,$t,Bt){return $t==$t?function(mn,fr,Rr){for(var po=Rr-1,k=mn.length;++po<k;)if(mn[po]===fr)return po;return-1}(ft,$t,Bt):Vi(ft,_a,Bt)}function Qi(ft,$t,Bt,mn){for(var fr=Bt-1,Rr=ft.length;++fr<Rr;)if(mn(ft[fr],$t))return fr;return-1}function _a(ft){return ft!=ft}function Pr(ft,$t){var Bt=ft==null?0:ft.length;return Bt?cu(ft,$t)/Bt:z}function Gi(ft){return function($t){return $t==null?d:$t[ft]}}function ja(ft){return function($t){return ft==null?d:ft[$t]}}function yi(ft,$t,Bt,mn,fr){return fr(ft,function(Rr,po,k){Bt=mn?(mn=!1,Rr):$t(Bt,Rr,po,k)}),Bt}function cu(ft,$t){for(var Bt,mn=-1,fr=ft.length;++mn<fr;){var Rr=$t(ft[mn]);Rr!==d&&(Bt=Bt===d?Rr:Bt+Rr)}return Bt}function Fl(ft,$t){for(var Bt=-1,mn=Array(ft);++Bt<ft;)mn[Bt]=$t(Bt);return mn}function Ia(ft){return ft&&ft.slice(0,ci(ft)+1).replace(Fn,"")}function fo(ft){return function($t){return ft($t)}}function Vu(ft,$t){return $r($t,function(Bt){return ft[Bt]})}function qa(ft,$t){return ft.has($t)}function ba(ft,$t){for(var Bt=-1,mn=ft.length;++Bt<mn&&su($t,ft[Bt],0)>-1;);return Bt}function Nc(ft,$t){for(var Bt=ft.length;Bt--&&su($t,ft[Bt],0)>-1;);return Bt}function ap(ft,$t){for(var Bt=ft.length,mn=0;Bt--;)ft[Bt]===$t&&++mn;return mn}var Cc=ja({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Ho=ja({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Gu(ft){return"\\"+zf[ft]}function Ya(ft){return Ac.test(ft)}function ni(ft){var $t=-1,Bt=Array(ft.size);return ft.forEach(function(mn,fr){Bt[++$t]=[fr,mn]}),Bt}function Dc(ft,$t){return function(Bt){return ft($t(Bt))}}function ua(ft,$t){for(var Bt=-1,mn=ft.length,fr=0,Rr=[];++Bt<mn;){var po=ft[Bt];po!==$t&&po!==b||(ft[Bt]=b,Rr[fr++]=Bt)}return Rr}function wa(ft){var $t=-1,Bt=Array(ft.size);return ft.forEach(function(mn){Bt[++$t]=mn}),Bt}function Ls(ft){var $t=-1,Bt=Array(ft.size);return ft.forEach(function(mn){Bt[++$t]=[mn,mn]}),Bt}function Wi(ft){return Ya(ft)?function($t){for(var Bt=xc.lastIndex=0;xc.test($t);)++Bt;return Bt}(ft):Is(ft)}function ea(ft){return Ya(ft)?function($t){return $t.match(xc)||[]}(ft):function($t){return $t.split("")}(ft)}function ci(ft){for(var $t=ft.length;$t--&&yo.test(ft.charAt($t)););return $t}var sa=ja({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ii=function ft($t){var Bt,mn=($t=$t==null?Fo:Ii.defaults(Fo.Object(),$t,Ii.pick(Fo,op))).Array,fr=$t.Date,Rr=$t.Error,po=$t.Function,k=$t.Math,R=$t.Object,W=$t.RegExp,oe=$t.String,be=$t.TypeError,qe=mn.prototype,mt=po.prototype,zt=R.prototype,En=$t["__core-js_shared__"],br=mt.toString,dn=zt.hasOwnProperty,Hr=0,mr=(Bt=/[^.]+$/.exec(En&&En.keys&&En.keys.IE_PROTO||""))?"Symbol(src)_1."+Bt:"",Lr=zt.toString,ca=br.call(R),xo=Fo._,ta=W("^"+br.call(dn).replace(Wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_l=Ds?$t.Buffer:d,bl=$t.Symbol,$l=$t.Uint8Array,fu=_l?_l.allocUnsafe:d,Ka=Dc(R.getPrototypeOf,R),du=R.create,ri=zt.propertyIsEnumerable,Bl=qe.splice,wl=bl?bl.isConcatSpreadable:d,Za=bl?bl.iterator:d,Ja=bl?bl.toStringTag:d,Wu=function(){try{var p=il(R,"defineProperty");return p({},"",{}),p}catch{}}(),gh=$t.clearTimeout!==Fo.clearTimeout&&$t.clearTimeout,_h=fr&&fr.now!==Fo.Date.now&&fr.now,lp=$t.setTimeout!==Fo.setTimeout&&$t.setTimeout,jc=k.ceil,zu=k.floor,Zf=R.getOwnPropertySymbols,bh=_l?_l.isBuffer:d,Hu=$t.isFinite,Ic=qe.join,Jf=Dc(R.keys,R),$o=k.max,zi=k.min,Qf=fr.now,ed=$t.parseInt,Fs=k.random,Zv=qe.reverse,$s=il($t,"DataView"),Bs=il($t,"Map"),Lc=il($t,"Promise"),Xu=il($t,"Set"),pu=il($t,"WeakMap"),Us=il(R,"create"),Fc=pu&&new pu,hu={},Jv=Eu($s),$c=Eu(Bs),Qv=Eu(Lc),em=Eu(Xu),wh=Eu(pu),td=bl?bl.prototype:d,Li=td?td.valueOf:d,Eh=td?td.toString:d;function ae(p){if(Go(p)&&!gr(p)&&!(p instanceof Nr)){if(p instanceof La)return p;if(dn.call(p,"__wrapped__"))return Sd(p)}return new La(p)}var qu=function(){function p(){}return function(y){if(!Co(y))return{};if(du)return du(y);p.prototype=y;var E=new p;return p.prototype=d,E}}();function Ul(){}function La(p,y){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=d}function Nr(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function Ai(p){var y=-1,E=p==null?0:p.length;for(this.clear();++y<E;){var I=p[y];this.set(I[0],I[1])}}function Br(p){var y=-1,E=p==null?0:p.length;for(this.clear();++y<E;){var I=p[y];this.set(I[0],I[1])}}function Qa(p){var y=-1,E=p==null?0:p.length;for(this.clear();++y<E;){var I=p[y];this.set(I[0],I[1])}}function Vl(p){var y=-1,E=p==null?0:p.length;for(this.__data__=new Qa;++y<E;)this.add(p[y])}function Ea(p){var y=this.__data__=new Br(p);this.size=y.size}function nd(p,y){var E=gr(p),I=!E&&fs(p),q=!E&&!I&&ra(p),ne=!E&&!I&&!q&&Qe(p),ve=E||I||q||ne,xe=ve?Fl(p.length,oe):[],Fe=xe.length;for(var vt in p)!y&&!dn.call(p,vt)||ve&&(vt=="length"||q&&(vt=="offset"||vt=="parent")||ne&&(vt=="buffer"||vt=="byteLength"||vt=="byteOffset")||Fi(vt,Fe))||xe.push(vt);return xe}function rd(p){var y=p.length;return y?p[gp(0,y-1)]:d}function up(p,y){return Tl(gi(p),vu(y,0,p.length))}function Oh(p){return Tl(gi(p))}function Gl(p,y,E){(E!==d&&!Ua(p[y],E)||E===d&&!(y in p))&&el(p,y,E)}function Bo(p,y,E){var I=p[y];dn.call(p,y)&&Ua(I,E)&&(E!==d||y in p)||el(p,y,E)}function Vs(p,y){for(var E=p.length;E--;)if(Ua(p[E][0],y))return E;return-1}function sp(p,y,E,I){return _o(p,function(q,ne,ve){y(I,q,E(q),ve)}),I}function Wl(p,y){return p&&nl(y,Dt(y),p)}function el(p,y,E){y=="__proto__"&&Wu?Wu(p,y,{configurable:!0,enumerable:!0,value:E,writable:!0}):p[y]=E}function Bc(p,y){for(var E=-1,I=y.length,q=mn(I),ne=p==null;++E<I;)q[E]=ne?d:Wt(p,y[E]);return q}function vu(p,y,E){return p==p&&(E!==d&&(p=p<=E?p:E),y!==d&&(p=p>=y?p:y)),p}function Oa(p,y,E,I,q,ne){var ve,xe=1&y,Fe=2&y,vt=4&y;if(E&&(ve=q?E(p,I,q,ne):E(p)),ve!==d)return ve;if(!Co(p))return p;var wt=gr(p);if(wt){if(ve=function(jt){var Qt=jt.length,rr=new jt.constructor(Qt);return Qt&&typeof jt[0]=="string"&&dn.call(jt,"index")&&(rr.index=jt.index,rr.input=jt.input),rr}(p),!xe)return gi(p,ve)}else{var Gt=Ro(p),wn=Gt==G||Gt==K;if(ra(p))return Rh(p,xe);if(Gt==ue||Gt==$||wn&&!q){if(ve=Fe||wn?{}:na(p),!xe)return Fe?function(jt,Qt){return nl(jt,rs(jt),Qt)}(p,function(jt,Qt){return jt&&nl(Qt,kt(Qt),jt)}(ve,p)):function(jt,Qt){return nl(jt,fi(jt),Qt)}(p,Wl(ve,p))}else{if(!zr[Gt])return q?p:{};ve=function(jt,Qt,rr){var Mn=jt.constructor;switch(Qt){case Ot:return Zu(jt);case Y:case H:return new Mn(+jt);case Je:return function(vr,Fr){var Xn=Fr?Zu(vr.buffer):vr.buffer;return new vr.constructor(Xn,vr.byteOffset,vr.byteLength)}(jt,rr);case Yt:case Kt:case Ft:case An:case Be:case Se:case Ce:case Xe:case _t:return Nh(jt,rr);case Q:return new Mn;case ce:case me:return new Mn(jt);case ye:return function(vr){var Fr=new vr.constructor(vr.source,Er.exec(vr));return Fr.lastIndex=vr.lastIndex,Fr}(jt);case we:return new Mn;case He:return ze=jt,Li?R(Li.call(ze)):{}}var ze}(p,Gt,xe)}}ne||(ne=new Ea);var On=ne.get(p);if(On)return On;ne.set(p,ve),Oe(p)?p.forEach(function(jt){ve.add(Oa(jt,y,E,jt,p,ne))}):kd(p)&&p.forEach(function(jt,Qt){ve.set(Qt,Oa(jt,y,E,Qt,p,ne))});var Wn=wt?d:(vt?Fe?_d:Yc:Fe?kt:Dt)(p);return Bi(Wn||p,function(jt,Qt){Wn&&(jt=p[Qt=jt]),Bo(ve,Qt,Oa(jt,y,E,Qt,p,ne))}),ve}function cp(p,y,E){var I=E.length;if(p==null)return!I;for(p=R(p);I--;){var q=E[I],ne=y[q],ve=p[q];if(ve===d&&!(q in p)||!ne(ve))return!1}return!0}function fp(p,y,E){if(typeof p!="function")throw new be(g);return as(function(){p.apply(d,E)},y)}function tl(p,y,E,I){var q=-1,ne=Ji,ve=!0,xe=p.length,Fe=[],vt=y.length;if(!xe)return Fe;E&&(y=$r(y,fo(E))),I?(ne=Pc,ve=!1):y.length>=200&&(ne=qa,ve=!1,y=new Vl(y));e:for(;++q<xe;){var wt=p[q],Gt=E==null?wt:E(wt);if(wt=I||wt!==0?wt:0,ve&&Gt==Gt){for(var wn=vt;wn--;)if(y[wn]===Gt)continue e;Fe.push(wt)}else ne(y,Gt,I)||Fe.push(wt)}return Fe}ae.templateSettings={escape:$e,evaluate:bn,interpolate:Zn,variable:"",imports:{_:ae}},ae.prototype=Ul.prototype,ae.prototype.constructor=ae,La.prototype=qu(Ul.prototype),La.prototype.constructor=La,Nr.prototype=qu(Ul.prototype),Nr.prototype.constructor=Nr,Ai.prototype.clear=function(){this.__data__=Us?Us(null):{},this.size=0},Ai.prototype.delete=function(p){var y=this.has(p)&&delete this.__data__[p];return this.size-=y?1:0,y},Ai.prototype.get=function(p){var y=this.__data__;if(Us){var E=y[p];return E===_?d:E}return dn.call(y,p)?y[p]:d},Ai.prototype.has=function(p){var y=this.__data__;return Us?y[p]!==d:dn.call(y,p)},Ai.prototype.set=function(p,y){var E=this.__data__;return this.size+=this.has(p)?0:1,E[p]=Us&&y===d?_:y,this},Br.prototype.clear=function(){this.__data__=[],this.size=0},Br.prototype.delete=function(p){var y=this.__data__,E=Vs(y,p);return!(E<0)&&(E==y.length-1?y.pop():Bl.call(y,E,1),--this.size,!0)},Br.prototype.get=function(p){var y=this.__data__,E=Vs(y,p);return E<0?d:y[E][1]},Br.prototype.has=function(p){return Vs(this.__data__,p)>-1},Br.prototype.set=function(p,y){var E=this.__data__,I=Vs(E,p);return I<0?(++this.size,E.push([p,y])):E[I][1]=y,this},Qa.prototype.clear=function(){this.size=0,this.__data__={hash:new Ai,map:new(Bs||Br),string:new Ai}},Qa.prototype.delete=function(p){var y=Ks(this,p).delete(p);return this.size-=y?1:0,y},Qa.prototype.get=function(p){return Ks(this,p).get(p)},Qa.prototype.has=function(p){return Ks(this,p).has(p)},Qa.prototype.set=function(p,y){var E=Ks(this,p),I=E.size;return E.set(p,y),this.size+=E.size==I?0:1,this},Vl.prototype.add=Vl.prototype.push=function(p){return this.__data__.set(p,_),this},Vl.prototype.has=function(p){return this.__data__.has(p)},Ea.prototype.clear=function(){this.__data__=new Br,this.size=0},Ea.prototype.delete=function(p){var y=this.__data__,E=y.delete(p);return this.size=y.size,E},Ea.prototype.get=function(p){return this.__data__.get(p)},Ea.prototype.has=function(p){return this.__data__.has(p)},Ea.prototype.set=function(p,y){var E=this.__data__;if(E instanceof Br){var I=E.__data__;if(!Bs||I.length<199)return I.push([p,y]),this.size=++E.size,this;E=this.__data__=new Qa(I)}return E.set(p,y),this.size=E.size,this};var _o=es(Cn),Sh=es(co,!0);function dp(p,y){var E=!0;return _o(p,function(I,q,ne){return E=!!y(I,q,ne)}),E}function Uo(p,y,E){for(var I=-1,q=p.length;++I<q;){var ne=p[I],ve=y(ne);if(ve!=null&&(xe===d?ve==ve&&!ht(ve):E(ve,xe)))var xe=ve,Fe=ne}return Fe}function Yr(p,y){var E=[];return _o(p,function(I,q,ne){y(I,q,ne)&&E.push(I)}),E}function oi(p,y,E,I,q){var ne=-1,ve=p.length;for(E||(E=Zc),q||(q=[]);++ne<ve;){var xe=p[ne];y>0&&E(xe)?y>1?oi(xe,y-1,E,I,q):si(q,xe):I||(q[q.length]=xe)}return q}var Sr=ts(),so=ts(!0);function Cn(p,y){return p&&Sr(p,y,Dt)}function co(p,y){return p&&so(p,y,Dt)}function Uc(p,y){return Ui(y,function(E){return Aa(p[E])})}function El(p,y){for(var E=0,I=(y=Xr(y,p)).length;p!=null&&E<I;)p=p[al(y[E++])];return E&&E==I?p:d}function od(p,y,E){var I=y(p);return gr(p)?I:si(I,E(p))}function Ao(p){return p==null?p===d?"[object Undefined]":"[object Null]":Ja&&Ja in R(p)?function(y){var E=dn.call(y,Ja),I=y[Ja];try{y[Ja]=d;var q=!0}catch{}var ne=Lr.call(y);return q&&(E?y[Ja]=I:delete y[Ja]),ne}(p):function(y){return Lr.call(y)}(p)}function Po(p,y){return p>y}function pp(p,y){return p!=null&&dn.call(p,y)}function hp(p,y){return p!=null&&y in R(p)}function Vc(p,y,E){for(var I=E?Pc:Ji,q=p[0].length,ne=p.length,ve=ne,xe=mn(ne),Fe=1/0,vt=[];ve--;){var wt=p[ve];ve&&y&&(wt=$r(wt,fo(y))),Fe=zi(wt.length,Fe),xe[ve]=!E&&(y||q>=120&&wt.length>=120)?new Vl(ve&&wt):d}wt=p[0];var Gt=-1,wn=xe[0];e:for(;++Gt<q&&vt.length<Fe;){var On=wt[Gt],Wn=y?y(On):On;if(On=E||On!==0?On:0,!(wn?qa(wn,Wn):I(vt,Wn,E))){for(ve=ne;--ve;){var jt=xe[ve];if(!(jt?qa(jt,Wn):I(p[ve],Wn,E)))continue e}wn&&wn.push(Wn),vt.push(On)}}return vt}function Hi(p,y,E){var I=(p=wu(p,y=Xr(y,p)))==null?p:p[al(bo(y))];return I==null?d:io(I,p,E)}function id(p){return Go(p)&&Ao(p)==$}function Gs(p,y,E,I,q){return p===y||(p==null||y==null||!Go(p)&&!Go(y)?p!=p&&y!=y:function(ne,ve,xe,Fe,vt,wt){var Gt=gr(ne),wn=gr(ve),On=Gt?X:Ro(ne),Wn=wn?X:Ro(ve),jt=(On=On==$?ue:On)==ue,Qt=(Wn=Wn==$?ue:Wn)==ue,rr=On==Wn;if(rr&&ra(ne)){if(!ra(ve))return!1;Gt=!0,jt=!1}if(rr&&!jt)return wt||(wt=new Ea),Gt||Qe(ne)?Ys(ne,ve,xe,Fe,vt,wt):function(Xn,sr,ki,Va,Zl,Pi,Au){switch(ki){case Je:if(Xn.byteLength!=sr.byteLength||Xn.byteOffset!=sr.byteOffset)return!1;Xn=Xn.buffer,sr=sr.buffer;case Ot:return!(Xn.byteLength!=sr.byteLength||!Pi(new $l(Xn),new $l(sr)));case Y:case H:case ce:return Ua(+Xn,+sr);case B:return Xn.name==sr.name&&Xn.message==sr.message;case ye:case me:return Xn==sr+"";case Q:var ps=ni;case we:var Pd=1&Va;if(ps||(ps=wa),Xn.size!=sr.size&&!Pd)return!1;var Ip=Au.get(Xn);if(Ip)return Ip==sr;Va|=2,Au.set(Xn,sr);var Tu=Ys(ps(Xn),ps(sr),Va,Zl,Pi,Au);return Au.delete(Xn),Tu;case He:if(Li)return Li.call(Xn)==Li.call(sr)}return!1}(ne,ve,On,xe,Fe,vt,wt);if(!(1&xe)){var Mn=jt&&dn.call(ne,"__wrapped__"),ze=Qt&&dn.call(ve,"__wrapped__");if(Mn||ze){var vr=Mn?ne.value():ne,Fr=ze?ve.value():ve;return wt||(wt=new Ea),vt(vr,Fr,xe,Fe,wt)}}return rr?(wt||(wt=new Ea),function(Xn,sr,ki,Va,Zl,Pi){var Au=1&ki,ps=Yc(Xn),Pd=ps.length,Ip=Yc(sr).length;if(Pd!=Ip&&!Au)return!1;for(var Tu=Pd;Tu--;){var ec=ps[Tu];if(!(Au?ec in sr:dn.call(sr,ec)))return!1}var lm=Pi.get(Xn),Rd=Pi.get(sr);if(lm&&Rd)return lm==sr&&Rd==Xn;var Lp=!0;Pi.set(Xn,sr),Pi.set(sr,Xn);for(var um=Au;++Tu<Pd;){var Fp=Xn[ec=ps[Tu]],vf=sr[ec];if(Va)var mf=Au?Va(vf,Fp,ec,sr,Xn,Pi):Va(Fp,vf,ec,Xn,sr,Pi);if(!(mf===d?Fp===vf||Zl(Fp,vf,ki,Va,Pi):mf)){Lp=!1;break}um||(um=ec=="constructor")}if(Lp&&!um){var hs=Xn.constructor,$p=sr.constructor;hs==$p||!("constructor"in Xn)||!("constructor"in sr)||typeof hs=="function"&&hs instanceof hs&&typeof $p=="function"&&$p instanceof $p||(Lp=!1)}return Pi.delete(Xn),Pi.delete(sr),Lp}(ne,ve,xe,Fe,vt,wt)):!1}(p,y,E,I,Gs,q))}function Fa(p,y,E,I){var q=E.length,ne=q,ve=!I;if(p==null)return!ne;for(p=R(p);q--;){var xe=E[q];if(ve&&xe[2]?xe[1]!==p[xe[0]]:!(xe[0]in p))return!1}for(;++q<ne;){var Fe=(xe=E[q])[0],vt=p[Fe],wt=xe[1];if(ve&&xe[2]){if(vt===d&&!(Fe in p))return!1}else{var Gt=new Ea;if(I)var wn=I(vt,wt,Fe,p,y,Gt);if(!(wn===d?Gs(wt,vt,3,I,Gt):wn))return!1}}return!0}function mu(p){return!(!Co(p)||(y=p,mr&&mr in y))&&(Aa(p)?ta:zo).test(Eu(p));var y}function zl(p){return typeof p=="function"?p:p==null?Kn:typeof p=="object"?gr(p)?mp(p[0],p[1]):vp(p):he(p)}function $a(p){if(!Pt(p))return Jf(p);var y=[];for(var E in R(p))dn.call(p,E)&&E!="constructor"&&y.push(E);return y}function xh(p){if(!Co(p))return function(q){var ne=[];if(q!=null)for(var ve in R(q))ne.push(ve);return ne}(p);var y=Pt(p),E=[];for(var I in p)(I!="constructor"||!y&&dn.call(p,I))&&E.push(I);return E}function Ol(p,y){return p<y}function Sa(p,y){var E=-1,I=pa(p)?mn(p.length):[];return _o(p,function(q,ne,ve){I[++E]=y(q,ne,ve)}),I}function vp(p){var y=Kc(p);return y.length==1&&y[0][2]?Jc(y[0][0],y[0][1]):function(E){return E===p||Fa(E,p,y)}}function mp(p,y){return xl(p)&&os(y)?Jc(al(p),y):function(E){var I=Wt(E,p);return I===d&&I===y?Tt(E,p):Gs(y,I,3)}}function ad(p,y,E,I,q){p!==y&&Sr(y,function(ne,ve){if(q||(q=new Ea),Co(ne))(function(Fe,vt,wt,Gt,wn,On,Wn){var jt=Ed(Fe,wt),Qt=Ed(vt,wt),rr=Wn.get(Qt);if(rr)return void Gl(Fe,wt,rr);var Mn=On?On(jt,Qt,wt+"",Fe,vt,Wn):d,ze=Mn===d;if(ze){var vr=gr(Qt),Fr=!vr&&ra(Qt),Xn=!vr&&!Fr&&Qe(Qt);Mn=Qt,vr||Fr||Xn?gr(jt)?Mn=jt:Mo(jt)?Mn=gi(jt):Fr?(ze=!1,Mn=Rh(Qt,!0)):Xn?(ze=!1,Mn=Nh(Qt,!0)):Mn=[]:V(Qt)||fs(Qt)?(Mn=jt,fs(jt)?Mn=Ct(jt):Co(jt)&&!Aa(jt)||(Mn=na(Qt))):ze=!1}ze&&(Wn.set(Qt,Mn),wn(Mn,Qt,Gt,On,Wn),Wn.delete(Qt)),Gl(Fe,wt,Mn)})(p,y,ve,E,ad,I,q);else{var xe=I?I(Ed(p,ve),ne,ve+"",p,y,q):d;xe===d&&(xe=ne),Gl(p,ve,xe)}},kt)}function Ah(p,y){var E=p.length;if(E)return Fi(y+=y<0?E:0,E)?p[y]:d}function Th(p,y,E){y=y.length?$r(y,function(ne){return gr(ne)?function(ve){return El(ve,ne.length===1?ne[0]:ne)}:ne}):[Kn];var I=-1;y=$r(y,fo(Qn()));var q=Sa(p,function(ne,ve,xe){var Fe=$r(y,function(vt){return vt(ne)});return{criteria:Fe,index:++I,value:ne}});return function(ne,ve){var xe=ne.length;for(ne.sort(ve);xe--;)ne[xe]=ne[xe].value;return ne}(q,function(ne,ve){return function(xe,Fe,vt){for(var wt=-1,Gt=xe.criteria,wn=Fe.criteria,On=Gt.length,Wn=vt.length;++wt<On;){var jt=Ws(Gt[wt],wn[wt]);if(jt)return wt>=Wn?jt:jt*(vt[wt]=="desc"?-1:1)}return xe.index-Fe.index}(ne,ve,E)})}function Mh(p,y,E){for(var I=-1,q=y.length,ne={};++I<q;){var ve=y[I],xe=El(p,ve);E(xe,ve)&&Yu(ne,Xr(ve,p),xe)}return ne}function ld(p,y,E,I){var q=I?Qi:su,ne=-1,ve=y.length,xe=p;for(p===y&&(y=gi(y)),E&&(xe=$r(p,fo(E)));++ne<ve;)for(var Fe=0,vt=y[ne],wt=E?E(vt):vt;(Fe=q(xe,wt,Fe,I))>-1;)xe!==p&&Bl.call(xe,Fe,1),Bl.call(p,Fe,1);return p}function yp(p,y){for(var E=p?y.length:0,I=E-1;E--;){var q=y[E];if(E==I||q!==ne){var ne=q;Fi(q)?Bl.call(p,q,1):sd(p,q)}}return p}function gp(p,y){return p+zu(Fs()*(y-p+1))}function Gc(p,y){var E="";if(!p||y<1||y>D)return E;do y%2&&(E+=p),(y=zu(y/2))&&(p+=p);while(y);return E}function xr(p,y){return ef(Qc(p,y,Kn),p+"")}function tm(p){return rd(_r(p))}function _p(p,y){var E=_r(p);return Tl(E,vu(y,0,E.length))}function Yu(p,y,E,I){if(!Co(p))return p;for(var q=-1,ne=(y=Xr(y,p)).length,ve=ne-1,xe=p;xe!=null&&++q<ne;){var Fe=al(y[q]),vt=E;if(Fe==="__proto__"||Fe==="constructor"||Fe==="prototype")return p;if(q!=ve){var wt=xe[Fe];(vt=I?I(wt,Fe,xe):d)===d&&(vt=Co(wt)?wt:Fi(y[q+1])?[]:{})}Bo(xe,Fe,vt),xe=xe[Fe]}return p}var Wc=Fc?function(p,y){return Fc.set(p,y),p}:Kn,nm=Wu?function(p,y){return Wu(p,"toString",{configurable:!0,enumerable:!1,value:Ar(y),writable:!0})}:Kn;function kh(p){return Tl(_r(p))}function xa(p,y,E){var I=-1,q=p.length;y<0&&(y=-y>q?0:q+y),(E=E>q?q:E)<0&&(E+=q),q=y>E?0:E-y>>>0,y>>>=0;for(var ne=mn(q);++I<q;)ne[I]=p[I+y];return ne}function rm(p,y){var E;return _o(p,function(I,q,ne){return!(E=y(I,q,ne))}),!!E}function zc(p,y,E){var I=0,q=p==null?I:p.length;if(typeof y=="number"&&y==y&&q<=2147483647){for(;I<q;){var ne=I+q>>>1,ve=p[ne];ve!==null&&!ht(ve)&&(E?ve<=y:ve<y)?I=ne+1:q=ne}return q}return ud(p,y,Kn,E)}function ud(p,y,E,I){var q=0,ne=p==null?0:p.length;if(ne===0)return 0;for(var ve=(y=E(y))!=y,xe=y===null,Fe=ht(y),vt=y===d;q<ne;){var wt=zu((q+ne)/2),Gt=E(p[wt]),wn=Gt!==d,On=Gt===null,Wn=Gt==Gt,jt=ht(Gt);if(ve)var Qt=I||Wn;else Qt=vt?Wn&&(I||wn):xe?Wn&&wn&&(I||!On):Fe?Wn&&wn&&!On&&(I||!jt):!On&&!jt&&(I?Gt<=y:Gt<y);Qt?q=wt+1:ne=wt}return zi(ne,4294967294)}function bp(p,y){for(var E=-1,I=p.length,q=0,ne=[];++E<I;){var ve=p[E],xe=y?y(ve):ve;if(!E||!Ua(xe,Fe)){var Fe=xe;ne[q++]=ve===0?0:ve}}return ne}function Ph(p){return typeof p=="number"?p:ht(p)?z:+p}function fa(p){if(typeof p=="string")return p;if(gr(p))return $r(p,fa)+"";if(ht(p))return Eh?Eh.call(p):"";var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}function yu(p,y,E){var I=-1,q=Ji,ne=p.length,ve=!0,xe=[],Fe=xe;if(E)ve=!1,q=Pc;else if(ne>=200){var vt=y?null:Dh(p);if(vt)return wa(vt);ve=!1,q=qa,Fe=new Vl}else Fe=y?[]:xe;e:for(;++I<ne;){var wt=p[I],Gt=y?y(wt):wt;if(wt=E||wt!==0?wt:0,ve&&Gt==Gt){for(var wn=Fe.length;wn--;)if(Fe[wn]===Gt)continue e;y&&Fe.push(Gt),xe.push(wt)}else q(Fe,Gt,E)||(Fe!==xe&&Fe.push(Gt),xe.push(wt))}return xe}function sd(p,y){return(p=wu(p,y=Xr(y,p)))==null||delete p[al(bo(y))]}function Ku(p,y,E,I){return Yu(p,y,E(El(p,y)),I)}function cd(p,y,E,I){for(var q=p.length,ne=I?q:-1;(I?ne--:++ne<q)&&y(p[ne],ne,p););return E?xa(p,I?0:ne,I?ne+1:q):xa(p,I?ne+1:0,I?q:ne)}function wp(p,y){var E=p;return E instanceof Nr&&(E=E.value()),js(y,function(I,q){return q.func.apply(q.thisArg,si([I],q.args))},E)}function fd(p,y,E){var I=p.length;if(I<2)return I?yu(p[0]):[];for(var q=-1,ne=mn(I);++q<I;)for(var ve=p[q],xe=-1;++xe<I;)xe!=q&&(ne[q]=tl(ne[q]||ve,p[xe],y,E));return yu(oi(ne,1),y,E)}function Hc(p,y,E){for(var I=-1,q=p.length,ne=y.length,ve={};++I<q;){var xe=I<ne?y[I]:d;E(ve,p[I],xe)}return ve}function dd(p){return Mo(p)?p:[]}function pd(p){return typeof p=="function"?p:Kn}function Xr(p,y){return gr(p)?p:xl(p,y)?[p]:kp(Et(p))}var om=xr;function to(p,y,E){var I=p.length;return E=E===d?I:E,!y&&E>=I?p:xa(p,y,E)}var hd=gh||function(p){return Fo.clearTimeout(p)};function Rh(p,y){if(y)return p.slice();var E=p.length,I=fu?fu(E):new p.constructor(E);return p.copy(I),I}function Zu(p){var y=new p.constructor(p.byteLength);return new $l(y).set(new $l(p)),y}function Nh(p,y){var E=y?Zu(p.buffer):p.buffer;return new p.constructor(E,p.byteOffset,p.length)}function Ws(p,y){if(p!==y){var E=p!==d,I=p===null,q=p==p,ne=ht(p),ve=y!==d,xe=y===null,Fe=y==y,vt=ht(y);if(!xe&&!vt&&!ne&&p>y||ne&&ve&&Fe&&!xe&&!vt||I&&ve&&Fe||!E&&Fe||!q)return 1;if(!I&&!ne&&!vt&&p<y||vt&&E&&q&&!I&&!ne||xe&&E&&q||!ve&&q||!Fe)return-1}return 0}function Ch(p,y,E,I){for(var q=-1,ne=p.length,ve=E.length,xe=-1,Fe=y.length,vt=$o(ne-ve,0),wt=mn(Fe+vt),Gt=!I;++xe<Fe;)wt[xe]=y[xe];for(;++q<ve;)(Gt||q<ne)&&(wt[E[q]]=p[q]);for(;vt--;)wt[xe++]=p[q++];return wt}function Ju(p,y,E,I){for(var q=-1,ne=p.length,ve=-1,xe=E.length,Fe=-1,vt=y.length,wt=$o(ne-xe,0),Gt=mn(wt+vt),wn=!I;++q<wt;)Gt[q]=p[q];for(var On=q;++Fe<vt;)Gt[On+Fe]=y[Fe];for(;++ve<xe;)(wn||q<ne)&&(Gt[On+E[ve]]=p[q++]);return Gt}function gi(p,y){var E=-1,I=p.length;for(y||(y=mn(I));++E<I;)y[E]=p[E];return y}function nl(p,y,E,I){var q=!E;E||(E={});for(var ne=-1,ve=y.length;++ne<ve;){var xe=y[ne],Fe=I?I(E[xe],p[xe],xe,E,p):d;Fe===d&&(Fe=p[xe]),q?el(E,xe,Fe):Bo(E,xe,Fe)}return E}function Hl(p,y){return function(E,I){var q=gr(E)?ip:sp,ne=y?y():{};return q(E,p,Qn(I,2),ne)}}function Qu(p){return xr(function(y,E){var I=-1,q=E.length,ne=q>1?E[q-1]:d,ve=q>2?E[2]:d;for(ne=p.length>3&&typeof ne=="function"?(q--,ne):d,ve&&Vo(E[0],E[1],ve)&&(ne=q<3?d:ne,q=1),y=R(y);++I<q;){var xe=E[I];xe&&p(y,xe,I,ne)}return y})}function es(p,y){return function(E,I){if(E==null)return E;if(!pa(E))return p(E,I);for(var q=E.length,ne=y?q:-1,ve=R(E);(y?ne--:++ne<q)&&I(ve[ne],ne,ve)!==!1;);return E}}function ts(p){return function(y,E,I){for(var q=-1,ne=R(y),ve=I(y),xe=ve.length;xe--;){var Fe=ve[p?xe:++q];if(E(ne[Fe],Fe,ne)===!1)break}return y}}function vd(p){return function(y){var E=Ya(y=Et(y))?ea(y):d,I=E?E[0]:y.charAt(0),q=E?to(E,1).join(""):y.slice(1);return I[p]()+q}}function Xl(p){return function(y){return js(ho(tr(y).replace(Gf,"")),p,"")}}function ns(p){return function(){var y=arguments;switch(y.length){case 0:return new p;case 1:return new p(y[0]);case 2:return new p(y[0],y[1]);case 3:return new p(y[0],y[1],y[2]);case 4:return new p(y[0],y[1],y[2],y[3]);case 5:return new p(y[0],y[1],y[2],y[3],y[4]);case 6:return new p(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new p(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var E=qu(p.prototype),I=p.apply(E,y);return Co(I)?I:E}}function md(p){return function(y,E,I){var q=R(y);if(!pa(y)){var ne=Qn(E,3);y=Dt(y),E=function(xe){return ne(q[xe],xe,q)}}var ve=p(y,E,I);return ve>-1?q[ne?y[ve]:ve]:d}}function rl(p){return Sl(function(y){var E=y.length,I=E,q=La.prototype.thru;for(p&&y.reverse();I--;){var ne=y[I];if(typeof ne!="function")throw new be(g);if(q&&!ve&&gu(ne)=="wrapper")var ve=new La([],!0)}for(I=ve?I:E;++I<E;){var xe=gu(ne=y[I]),Fe=xe=="wrapper"?bd(ne):d;ve=Fe&&Al(Fe[0])&&Fe[1]==424&&!Fe[4].length&&Fe[9]==1?ve[gu(Fe[0])].apply(ve,Fe[3]):ne.length==1&&Al(ne)?ve[xe]():ve.thru(ne)}return function(){var vt=arguments,wt=vt[0];if(ve&&vt.length==1&&gr(wt))return ve.plant(wt).value();for(var Gt=0,wn=E?y[Gt].apply(this,vt):wt;++Gt<E;)wn=y[Gt].call(this,wn);return wn}})}function Xc(p,y,E,I,q,ne,ve,xe,Fe,vt){var wt=y&O,Gt=1&y,wn=2&y,On=24&y,Wn=512&y,jt=wn?d:ns(p);return function Qt(){for(var rr=arguments.length,Mn=mn(rr),ze=rr;ze--;)Mn[ze]=arguments[ze];if(On)var vr=_u(Qt),Fr=ap(Mn,vr);if(I&&(Mn=Ch(Mn,I,q,On)),ne&&(Mn=Ju(Mn,ne,ve,On)),rr-=Fr,On&&rr<vt){var Xn=ua(Mn,vr);return Ep(p,y,Xc,Qt.placeholder,E,Mn,Xn,xe,Fe,vt-rr)}var sr=Gt?E:this,ki=wn?sr[p]:p;return rr=Mn.length,xe?Mn=is(Mn,xe):Wn&&rr>1&&Mn.reverse(),wt&&Fe<rr&&(Mn.length=Fe),this&&this!==Fo&&this instanceof Qt&&(ki=jt||ns(ki)),ki.apply(sr,Mn)}}function qc(p,y){return function(E,I){return function(q,ne,ve,xe){return Cn(q,function(Fe,vt,wt){ne(xe,ve(Fe),vt,wt)}),xe}(E,p,y(I),{})}}function zs(p,y){return function(E,I){var q;if(E===d&&I===d)return y;if(E!==d&&(q=E),I!==d){if(q===d)return I;typeof E=="string"||typeof I=="string"?(E=fa(E),I=fa(I)):(E=Ph(E),I=Ph(I)),q=p(E,I)}return q}}function Hs(p){return Sl(function(y){return y=$r(y,fo(Qn())),xr(function(E){var I=this;return p(y,function(q){return io(q,I,E)})})})}function Xs(p,y){var E=(y=y===d?" ":fa(y)).length;if(E<2)return E?Gc(y,p):y;var I=Gc(y,jc(p/Wi(y)));return Ya(y)?to(ea(I),0,p).join(""):I.slice(0,p)}function yd(p){return function(y,E,I){return I&&typeof I!="number"&&Vo(y,E,I)&&(E=I=d),y=Nt(y),E===d?(E=y,y=0):E=Nt(E),function(q,ne,ve,xe){for(var Fe=-1,vt=$o(jc((ne-q)/(ve||1)),0),wt=mn(vt);vt--;)wt[xe?vt:++Fe]=q,q+=ve;return wt}(y,E,I=I===d?y<E?1:-1:Nt(I),p)}}function qs(p){return function(y,E){return typeof y=="string"&&typeof E=="string"||(y=Ut(y),E=Ut(E)),p(y,E)}}function Ep(p,y,E,I,q,ne,ve,xe,Fe,vt){var wt=8&y;y|=wt?A:M,4&(y&=~(wt?M:A))||(y&=-4);var Gt=[p,y,q,wt?ne:d,wt?ve:d,wt?d:ne,wt?d:ve,xe,Fe,vt],wn=E.apply(d,Gt);return Al(p)&&Tp(wn,Gt),wn.placeholder=I,Od(wn,p,y)}function gd(p){var y=k[p];return function(E,I){if(E=Ut(E),(I=I==null?0:zi(ct(I),292))&&Hu(E)){var q=(Et(E)+"e").split("e");return+((q=(Et(y(q[0]+"e"+(+q[1]+I)))+"e").split("e"))[0]+"e"+(+q[1]-I))}return y(E)}}var Dh=Xu&&1/wa(new Xu([,-0]))[1]==j?function(p){return new Xu(p)}:ot;function Op(p){return function(y){var E=Ro(y);return E==Q?ni(y):E==we?Ls(y):function(I,q){return $r(q,function(ne){return[ne,I[ne]]})}(y,p(y))}}function ol(p,y,E,I,q,ne,ve,xe){var Fe=2&y;if(!Fe&&typeof p!="function")throw new be(g);var vt=I?I.length:0;if(vt||(y&=-97,I=q=d),ve=ve===d?ve:$o(ct(ve),0),xe=xe===d?xe:ct(xe),vt-=q?q.length:0,y&M){var wt=I,Gt=q;I=q=d}var wn=Fe?d:bd(p),On=[p,y,E,I,q,wt,Gt,ne,ve,xe];if(wn&&function(jt,Qt){var rr=jt[1],Mn=Qt[1],ze=rr|Mn,vr=ze<131,Fr=Mn==O&&rr==8||Mn==O&&rr==S&&jt[7].length<=Qt[8]||Mn==384&&Qt[7].length<=Qt[8]&&rr==8;if(!vr&&!Fr)return jt;1&Mn&&(jt[2]=Qt[2],ze|=1&rr?0:4);var Xn=Qt[3];if(Xn){var sr=jt[3];jt[3]=sr?Ch(sr,Xn,Qt[4]):Xn,jt[4]=sr?ua(jt[3],b):Qt[4]}(Xn=Qt[5])&&(sr=jt[5],jt[5]=sr?Ju(sr,Xn,Qt[6]):Xn,jt[6]=sr?ua(jt[5],b):Qt[6]),(Xn=Qt[7])&&(jt[7]=Xn),Mn&O&&(jt[8]=jt[8]==null?Qt[8]:zi(jt[8],Qt[8])),jt[9]==null&&(jt[9]=Qt[9]),jt[0]=Qt[0],jt[1]=ze}(On,wn),p=On[0],y=On[1],E=On[2],I=On[3],q=On[4],!(xe=On[9]=On[9]===d?Fe?0:p.length:$o(On[9]-vt,0))&&24&y&&(y&=-25),y&&y!=1)Wn=y==8||y==x?function(jt,Qt,rr){var Mn=ns(jt);return function ze(){for(var vr=arguments.length,Fr=mn(vr),Xn=vr,sr=_u(ze);Xn--;)Fr[Xn]=arguments[Xn];var ki=vr<3&&Fr[0]!==sr&&Fr[vr-1]!==sr?[]:ua(Fr,sr);return(vr-=ki.length)<rr?Ep(jt,Qt,Xc,ze.placeholder,d,Fr,ki,d,d,rr-vr):io(this&&this!==Fo&&this instanceof ze?Mn:jt,this,Fr)}}(p,y,xe):y!=A&&y!=33||q.length?Xc.apply(d,On):function(jt,Qt,rr,Mn){var ze=1&Qt,vr=ns(jt);return function Fr(){for(var Xn=-1,sr=arguments.length,ki=-1,Va=Mn.length,Zl=mn(Va+sr),Pi=this&&this!==Fo&&this instanceof Fr?vr:jt;++ki<Va;)Zl[ki]=Mn[ki];for(;sr--;)Zl[ki++]=arguments[++Xn];return io(Pi,ze?rr:this,Zl)}}(p,y,E,I);else var Wn=function(jt,Qt,rr){var Mn=1&Qt,ze=ns(jt);return function vr(){return(this&&this!==Fo&&this instanceof vr?ze:jt).apply(Mn?rr:this,arguments)}}(p,y,E);return Od((wn?Wc:Tp)(Wn,On),p,y)}function Sp(p,y,E,I){return p===d||Ua(p,zt[E])&&!dn.call(I,E)?y:p}function xp(p,y,E,I,q,ne){return Co(p)&&Co(y)&&(ne.set(y,p),ad(p,y,d,xp,ne),ne.delete(y)),p}function Ap(p){return V(p)?d:p}function Ys(p,y,E,I,q,ne){var ve=1&E,xe=p.length,Fe=y.length;if(xe!=Fe&&!(ve&&Fe>xe))return!1;var vt=ne.get(p),wt=ne.get(y);if(vt&&wt)return vt==y&&wt==p;var Gt=-1,wn=!0,On=2&E?new Vl:d;for(ne.set(p,y),ne.set(y,p);++Gt<xe;){var Wn=p[Gt],jt=y[Gt];if(I)var Qt=ve?I(jt,Wn,Gt,y,p,ne):I(Wn,jt,Gt,p,y,ne);if(Qt!==d){if(Qt)continue;wn=!1;break}if(On){if(!Rc(y,function(rr,Mn){if(!qa(On,Mn)&&(Wn===rr||q(Wn,rr,E,I,ne)))return On.push(Mn)})){wn=!1;break}}else if(Wn!==jt&&!q(Wn,jt,E,I,ne)){wn=!1;break}}return ne.delete(p),ne.delete(y),wn}function Sl(p){return ef(Qc(p,d,tf),p+"")}function Yc(p){return od(p,Dt,fi)}function _d(p){return od(p,kt,rs)}var bd=Fc?function(p){return Fc.get(p)}:ot;function gu(p){for(var y=p.name+"",E=hu[y],I=dn.call(hu,y)?E.length:0;I--;){var q=E[I],ne=q.func;if(ne==null||ne==p)return q.name}return y}function _u(p){return(dn.call(ae,"placeholder")?ae:p).placeholder}function Qn(){var p=ae.iteratee||vo;return p=p===vo?zl:p,arguments.length?p(arguments[0],arguments[1]):p}function Ks(p,y){var E,I,q=p.__data__;return((I=typeof(E=y))=="string"||I=="number"||I=="symbol"||I=="boolean"?E!=="__proto__":E===null)?q[typeof y=="string"?"string":"hash"]:q.map}function Kc(p){for(var y=Dt(p),E=y.length;E--;){var I=y[E],q=p[I];y[E]=[I,q,os(q)]}return y}function il(p,y){var E=function(I,q){return I==null?d:I[q]}(p,y);return mu(E)?E:d}var fi=Zf?function(p){return p==null?[]:(p=R(p),Ui(Zf(p),function(y){return ri.call(p,y)}))}:Ve,rs=Zf?function(p){for(var y=[];p;)si(y,fi(p)),p=Ka(p);return y}:Ve,Ro=Ao;function bu(p,y,E){for(var I=-1,q=(y=Xr(y,p)).length,ne=!1;++I<q;){var ve=al(y[I]);if(!(ne=p!=null&&E(p,ve)))break;p=p[ve]}return ne||++I!=q?ne:!!(q=p==null?0:p.length)&&hf(q)&&Fi(ve,q)&&(gr(p)||fs(p))}function na(p){return typeof p.constructor!="function"||Pt(p)?{}:qu(Ka(p))}function Zc(p){return gr(p)||fs(p)||!!(wl&&p&&p[wl])}function Fi(p,y){var E=typeof p;return!!(y=y??D)&&(E=="number"||E!="symbol"&&Tn.test(p))&&p>-1&&p%1==0&&p<y}function Vo(p,y,E){if(!Co(E))return!1;var I=typeof y;return!!(I=="number"?pa(E)&&Fi(y,E.length):I=="string"&&y in E)&&Ua(E[y],p)}function xl(p,y){if(gr(p))return!1;var E=typeof p;return!(E!="number"&&E!="symbol"&&E!="boolean"&&p!=null&&!ht(p))||Jn.test(p)||!ie.test(p)||y!=null&&p in R(y)}function Al(p){var y=gu(p),E=ae[y];if(typeof E!="function"||!(y in Nr.prototype))return!1;if(p===E)return!0;var I=bd(E);return!!I&&p===I[0]}($s&&Ro(new $s(new ArrayBuffer(1)))!=Je||Bs&&Ro(new Bs)!=Q||Lc&&Ro(Lc.resolve())!=de||Xu&&Ro(new Xu)!=we||pu&&Ro(new pu)!=tt)&&(Ro=function(p){var y=Ao(p),E=y==ue?p.constructor:d,I=E?Eu(E):"";if(I)switch(I){case Jv:return Je;case $c:return Q;case Qv:return de;case em:return we;case wh:return tt}return y});var wd=En?Aa:Ze;function Pt(p){var y=p&&p.constructor;return p===(typeof y=="function"&&y.prototype||zt)}function os(p){return p==p&&!Co(p)}function Jc(p,y){return function(E){return E!=null&&E[p]===y&&(y!==d||p in R(E))}}function Qc(p,y,E){return y=$o(y===d?p.length-1:y,0),function(){for(var I=arguments,q=-1,ne=$o(I.length-y,0),ve=mn(ne);++q<ne;)ve[q]=I[y+q];q=-1;for(var xe=mn(y+1);++q<y;)xe[q]=I[q];return xe[y]=E(ve),io(p,this,xe)}}function wu(p,y){return y.length<2?p:El(p,xa(y,0,-1))}function is(p,y){for(var E=p.length,I=zi(y.length,E),q=gi(p);I--;){var ne=y[I];p[I]=Fi(ne,E)?q[ne]:d}return p}function Ed(p,y){if((y!=="constructor"||typeof p[y]!="function")&&y!="__proto__")return p[y]}var Tp=Mp(Wc),as=lp||function(p,y){return Fo.setTimeout(p,y)},ef=Mp(nm);function Od(p,y,E){var I=y+"";return ef(p,function(q,ne){var ve=ne.length;if(!ve)return q;var xe=ve-1;return ne[xe]=(ve>1?"& ":"")+ne[xe],ne=ne.join(ve>2?", ":" "),q.replace(Ae,`{
/* [wrapped with `+ne+`] */
`)}(I,function(q,ne){return Bi(L,function(ve){var xe="_."+ve[0];ne&ve[1]&&!Ji(q,xe)&&q.push(xe)}),q.sort()}(function(q){var ne=q.match(Ye);return ne?ne[1].split(Ie):[]}(I),E)))}function Mp(p){var y=0,E=0;return function(){var I=Qf(),q=16-(I-E);if(E=I,q>0){if(++y>=800)return arguments[0]}else y=0;return p.apply(d,arguments)}}function Tl(p,y){var E=-1,I=p.length,q=I-1;for(y=y===d?I:y;++E<y;){var ne=gp(E,q),ve=p[ne];p[ne]=p[E],p[E]=ve}return p.length=y,p}var kp=function(p){var y=Kl(p,function(I){return E.size===500&&E.clear(),I}),E=y.cache;return y}(function(p){var y=[];return p.charCodeAt(0)===46&&y.push(""),p.replace(kr,function(E,I,q,ne){y.push(q?ne.replace(Zt,"$1"):I||E)}),y});function al(p){if(typeof p=="string"||ht(p))return p;var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}function Eu(p){if(p!=null){try{return br.call(p)}catch{}try{return p+""}catch{}}return""}function Sd(p){if(p instanceof Nr)return p.clone();var y=new La(p.__wrapped__,p.__chain__);return y.__actions__=gi(p.__actions__),y.__index__=p.__index__,y.__values__=p.__values__,y}var jh=xr(function(p,y){return Mo(p)?tl(p,oi(y,1,Mo,!0)):[]}),Ih=xr(function(p,y){var E=bo(y);return Mo(E)&&(E=d),Mo(p)?tl(p,oi(y,1,Mo,!0),Qn(E,2)):[]}),Lh=xr(function(p,y){var E=bo(y);return Mo(E)&&(E=d),Mo(p)?tl(p,oi(y,1,Mo,!0),d,E):[]});function Pp(p,y,E){var I=p==null?0:p.length;if(!I)return-1;var q=E==null?0:ct(E);return q<0&&(q=$o(I+q,0)),Vi(p,Qn(y,3),q)}function xd(p,y,E){var I=p==null?0:p.length;if(!I)return-1;var q=I-1;return E!==d&&(q=ct(E),q=E<0?$o(I+q,0):zi(q,I-1)),Vi(p,Qn(y,3),q,!0)}function tf(p){return p!=null&&p.length?oi(p,1):[]}function Fh(p){return p&&p.length?p[0]:d}var ll=xr(function(p){var y=$r(p,dd);return y.length&&y[0]===p[0]?Vc(y):[]}),Ou=xr(function(p){var y=bo(p),E=$r(p,dd);return y===bo(E)?y=d:E.pop(),E.length&&E[0]===p[0]?Vc(E,Qn(y,2)):[]}),im=xr(function(p){var y=bo(p),E=$r(p,dd);return(y=typeof y=="function"?y:d)&&E.pop(),E.length&&E[0]===p[0]?Vc(E,d,y):[]});function bo(p){var y=p==null?0:p.length;return y?p[y-1]:d}var nf=xr(ls);function ls(p,y){return p&&p.length&&y&&y.length?ld(p,y):p}var rf=Sl(function(p,y){var E=p==null?0:p.length,I=Bc(p,y);return yp(p,$r(y,function(q){return Fi(q,E)?+q:q}).sort(Ws)),I});function Zs(p){return p==null?p:Zv.call(p)}var of=xr(function(p){return yu(oi(p,1,Mo,!0))}),af=xr(function(p){var y=bo(p);return Mo(y)&&(y=d),yu(oi(p,1,Mo,!0),Qn(y,2))}),lf=xr(function(p){var y=bo(p);return y=typeof y=="function"?y:d,yu(oi(p,1,Mo,!0),d,y)});function us(p){if(!p||!p.length)return[];var y=0;return p=Ui(p,function(E){if(Mo(E))return y=$o(E.length,y),!0}),Fl(y,function(E){return $r(p,Gi(E))})}function ql(p,y){if(!p||!p.length)return[];var E=us(p);return y==null?E:$r(E,function(I){return io(y,d,I)})}var _i=xr(function(p,y){return Mo(p)?tl(p,y):[]}),Ad=xr(function(p){return fd(Ui(p,Mo))}),uf=xr(function(p){var y=bo(p);return Mo(y)&&(y=d),fd(Ui(p,Mo),Qn(y,2))}),ss=xr(function(p){var y=bo(p);return y=typeof y=="function"?y:d,fd(Ui(p,Mo),d,y)}),Js=xr(us),Ti=xr(function(p){var y=p.length,E=y>1?p[y-1]:d;return E=typeof E=="function"?(p.pop(),E):d,ql(p,E)});function To(p){var y=ae(p);return y.__chain__=!0,y}function sf(p,y){return y(p)}var Xi=Sl(function(p){var y=p.length,E=y?p[0]:0,I=this.__wrapped__,q=function(ne){return Bc(ne,p)};return!(y>1||this.__actions__.length)&&I instanceof Nr&&Fi(E)?((I=I.slice(E,+E+(y?1:0))).__actions__.push({func:sf,args:[q],thisArg:d}),new La(I,this.__chain__).thru(function(ne){return y&&!ne.length&&ne.push(d),ne})):this.thru(q)}),Bn=Hl(function(p,y,E){dn.call(p,E)?++p[E]:el(p,E,1)}),Td=md(Pp),cf=md(xd);function Md(p,y){return(gr(p)?Bi:_o)(p,Qn(y,3))}function Rp(p,y){return(gr(p)?qf:Sh)(p,Qn(y,3))}var $h=Hl(function(p,y,E){dn.call(p,E)?p[E].push(y):el(p,E,[y])}),Su=xr(function(p,y,E){var I=-1,q=typeof y=="function",ne=pa(p)?mn(p.length):[];return _o(p,function(ve){ne[++I]=q?io(y,ve,E):Hi(ve,y,E)}),ne}),Bh=Hl(function(p,y,E){el(p,E,y)});function cs(p,y){return(gr(p)?$r:Sa)(p,Qn(y,3))}var Uh=Hl(function(p,y,E){p[E?0:1].push(y)},function(){return[[],[]]}),Np=xr(function(p,y){if(p==null)return[];var E=y.length;return E>1&&Vo(p,y[0],y[1])?y=[]:E>2&&Vo(y[0],y[1],y[2])&&(y=[y[0]]),Th(p,oi(y,1),[])}),ff=_h||function(){return Fo.Date.now()};function Vh(p,y,E){return y=E?d:y,y=p&&y==null?p.length:y,ol(p,O,d,d,d,d,y)}function Ba(p,y){var E;if(typeof y!="function")throw new be(g);return p=ct(p),function(){return--p>0&&(E=y.apply(this,arguments)),p<=1&&(y=d),E}}var Yl=xr(function(p,y,E){var I=1;if(E.length){var q=ua(E,_u(Yl));I|=A}return ol(p,I,y,E,q)}),xu=xr(function(p,y,E){var I=3;if(E.length){var q=ua(E,_u(xu));I|=A}return ol(y,I,p,E,q)});function Un(p,y,E){var I,q,ne,ve,xe,Fe,vt=0,wt=!1,Gt=!1,wn=!0;if(typeof p!="function")throw new be(g);function On(ze){var vr=I,Fr=q;return I=q=d,vt=ze,ve=p.apply(Fr,vr)}function Wn(ze){return vt=ze,xe=as(Qt,y),wt?On(ze):ve}function jt(ze){var vr=ze-Fe;return Fe===d||vr>=y||vr<0||Gt&&ze-vt>=ne}function Qt(){var ze=ff();if(jt(ze))return rr(ze);xe=as(Qt,function(vr){var Fr=y-(vr-Fe);return Gt?zi(Fr,ne-(vr-vt)):Fr}(ze))}function rr(ze){return xe=d,wn&&I?On(ze):(I=q=d,ve)}function Mn(){var ze=ff(),vr=jt(ze);if(I=arguments,q=this,Fe=ze,vr){if(xe===d)return Wn(Fe);if(Gt)return hd(xe),xe=as(Qt,y),On(Fe)}return xe===d&&(xe=as(Qt,y)),ve}return y=Ut(y)||0,Co(E)&&(wt=!!E.leading,ne=(Gt="maxWait"in E)?$o(Ut(E.maxWait)||0,y):ne,wn="trailing"in E?!!E.trailing:wn),Mn.cancel=function(){xe!==d&&hd(xe),vt=0,I=Fe=q=xe=d},Mn.flush=function(){return xe===d?ve:rr(ff())},Mn}var Cp=xr(function(p,y){return fp(p,1,y)}),Qs=xr(function(p,y,E){return fp(p,Ut(y)||0,E)});function Kl(p,y){if(typeof p!="function"||y!=null&&typeof y!="function")throw new be(g);var E=function(){var I=arguments,q=y?y.apply(this,I):I[0],ne=E.cache;if(ne.has(q))return ne.get(q);var ve=p.apply(this,I);return E.cache=ne.set(q,ve)||ne,ve};return E.cache=new(Kl.Cache||Qa),E}function df(p){if(typeof p!="function")throw new be(g);return function(){var y=arguments;switch(y.length){case 0:return!p.call(this);case 1:return!p.call(this,y[0]);case 2:return!p.call(this,y[0],y[1]);case 3:return!p.call(this,y[0],y[1],y[2])}return!p.apply(this,y)}}Kl.Cache=Qa;var qi=om(function(p,y){var E=(y=y.length==1&&gr(y[0])?$r(y[0],fo(Qn())):$r(oi(y,1),fo(Qn()))).length;return xr(function(I){for(var q=-1,ne=zi(I.length,E);++q<ne;)I[q]=y[q].call(this,I[q]);return io(p,this,I)})}),ul=xr(function(p,y){var E=ua(y,_u(ul));return ol(p,A,d,y,E)}),No=xr(function(p,y){var E=ua(y,_u(No));return ol(p,M,d,y,E)}),da=Sl(function(p,y){return ol(p,S,d,d,d,y)});function Ua(p,y){return p===y||p!=p&&y!=y}var am=qs(Po),pf=qs(function(p,y){return p>=y}),fs=id(function(){return arguments}())?id:function(p){return Go(p)&&dn.call(p,"callee")&&!ri.call(p,"callee")},gr=mn.isArray,Gh=Mc?fo(Mc):function(p){return Go(p)&&Ao(p)==Ot};function pa(p){return p!=null&&hf(p.length)&&!Aa(p)}function Mo(p){return Go(p)&&pa(p)}var ra=bh||Ze,Dp=Xf?fo(Xf):function(p){return Go(p)&&Ao(p)==H};function Mi(p){if(!Go(p))return!1;var y=Ao(p);return y==B||y=="[object DOMException]"||typeof p.message=="string"&&typeof p.name=="string"&&!V(p)}function Aa(p){if(!Co(p))return!1;var y=Ao(p);return y==G||y==K||y=="[object AsyncFunction]"||y=="[object Proxy]"}function ds(p){return typeof p=="number"&&p==ct(p)}function hf(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=D}function Co(p){var y=typeof p;return p!=null&&(y=="object"||y=="function")}function Go(p){return p!=null&&typeof p=="object"}var kd=kc?fo(kc):function(p){return Go(p)&&Ro(p)==Q};function jp(p){return typeof p=="number"||Go(p)&&Ao(p)==ce}function V(p){if(!Go(p)||Ao(p)!=ue)return!1;var y=Ka(p);if(y===null)return!0;var E=dn.call(y,"constructor")&&y.constructor;return typeof E=="function"&&E instanceof E&&br.call(E)==ca}var le=$i?fo($i):function(p){return Go(p)&&Ao(p)==ye},Oe=ui?fo(ui):function(p){return Go(p)&&Ro(p)==we};function rt(p){return typeof p=="string"||!gr(p)&&Go(p)&&Ao(p)==me}function ht(p){return typeof p=="symbol"||Go(p)&&Ao(p)==He}var Qe=ga?fo(ga):function(p){return Go(p)&&hf(p.length)&&!!qr[Ao(p)]},dt=qs(Ol),Rt=qs(function(p,y){return p<=y});function Lt(p){if(!p)return[];if(pa(p))return rt(p)?ea(p):gi(p);if(Za&&p[Za])return function(E){for(var I,q=[];!(I=E.next()).done;)q.push(I.value);return q}(p[Za]());var y=Ro(p);return(y==Q?ni:y==we?wa:_r)(p)}function Nt(p){return p?(p=Ut(p))===j||p===-1/0?17976931348623157e292*(p<0?-1:1):p==p?p:0:p===0?p:0}function ct(p){var y=Nt(p),E=y%1;return y==y?E?y-E:y:0}function Ht(p){return p?vu(ct(p),0,U):0}function Ut(p){if(typeof p=="number")return p;if(ht(p))return z;if(Co(p)){var y=typeof p.valueOf=="function"?p.valueOf():p;p=Co(y)?y+"":y}if(typeof p!="string")return p===0?p:+p;p=Ia(p);var E=Si.test(p);return E||ti.test(p)?ya(p.slice(2),E?2:8):li.test(p)?z:+p}function Ct(p){return nl(p,kt(p))}function Et(p){return p==null?"":fa(p)}var Ke=Qu(function(p,y){if(Pt(y)||pa(y))nl(y,Dt(y),p);else for(var E in y)dn.call(y,E)&&Bo(p,E,y[E])}),st=Qu(function(p,y){nl(y,kt(y),p)}),It=Qu(function(p,y,E,I){nl(y,kt(y),p,I)}),Jt=Qu(function(p,y,E,I){nl(y,Dt(y),p,I)}),At=Sl(Bc),rn=xr(function(p,y){p=R(p);var E=-1,I=y.length,q=I>2?y[2]:d;for(q&&Vo(y[0],y[1],q)&&(I=1);++E<I;)for(var ne=y[E],ve=kt(ne),xe=-1,Fe=ve.length;++xe<Fe;){var vt=ve[xe],wt=p[vt];(wt===d||Ua(wt,zt[vt])&&!dn.call(p,vt))&&(p[vt]=ne[vt])}return p}),Mt=xr(function(p){return p.push(d,xp),io(jn,d,p)});function Wt(p,y,E){var I=p==null?d:El(p,y);return I===d?E:I}function Tt(p,y){return p!=null&&bu(p,y,hp)}var qt=qc(function(p,y,E){y!=null&&typeof y.toString!="function"&&(y=Lr.call(y)),p[y]=E},Ar(Kn)),kn=qc(function(p,y,E){y!=null&&typeof y.toString!="function"&&(y=Lr.call(y)),dn.call(p,y)?p[y].push(E):p[y]=[E]},Qn),Vn=xr(Hi);function Dt(p){return pa(p)?nd(p):$a(p)}function kt(p){return pa(p)?nd(p,!0):xh(p)}var xt=Qu(function(p,y,E){ad(p,y,E)}),jn=Qu(function(p,y,E,I){ad(p,y,E,I)}),er=Sl(function(p,y){var E={};if(p==null)return E;var I=!1;y=$r(y,function(ne){return ne=Xr(ne,p),I||(I=ne.length>1),ne}),nl(p,_d(p),E),I&&(E=Oa(E,7,Ap));for(var q=y.length;q--;)sd(E,y[q]);return E}),pn=Sl(function(p,y){return p==null?{}:function(E,I){return Mh(E,I,function(q,ne){return Tt(E,ne)})}(p,y)});function ur(p,y){if(p==null)return{};var E=$r(_d(p),function(I){return[I]});return y=Qn(y),Mh(p,E,function(I,q){return y(I,q[0])})}var Gn=Op(Dt),nr=Op(kt);function _r(p){return p==null?[]:Vu(p,Dt(p))}var Do=Xl(function(p,y,E){return y=y.toLowerCase(),p+(E?ko(y):y)});function ko(p){return qo(Et(p).toLowerCase())}function tr(p){return(p=Et(p))&&p.replace($n,Cc).replace(gl,"")}var Xo=Xl(function(p,y,E){return p+(E?"-":"")+y.toLowerCase()}),ao=Xl(function(p,y,E){return p+(E?" ":"")+y.toLowerCase()}),jo=vd("toLowerCase"),Wo=Xl(function(p,y,E){return p+(E?"_":"")+y.toLowerCase()}),ii=Xl(function(p,y,E){return p+(E?" ":"")+qo(y)}),di=Xl(function(p,y,E){return p+(E?" ":"")+y.toUpperCase()}),qo=vd("toUpperCase");function ho(p,y,E){return p=Et(p),(y=E?d:y)===d?function(I){return Tc.test(I)}(p)?function(I){return I.match(Ns)||[]}(p):function(I){return I.match(lt)||[]}(p):p.match(y)||[]}var Yn=xr(function(p,y){try{return io(p,d,y)}catch(E){return Mi(E)?E:new Rr(E)}}),pi=Sl(function(p,y){return Bi(y,function(E){E=al(E),el(p,E,Yl(p[E],p))}),p});function Ar(p){return function(){return p}}var Dn=rl(),hr=rl(!0);function Kn(p){return p}function vo(p){return zl(typeof p=="function"?p:Oa(p,1))}var Ml=xr(function(p,y){return function(E){return Hi(E,p,y)}}),wo=xr(function(p,y){return function(E){return Hi(p,E,y)}});function ge(p,y,E){var I=Dt(y),q=Uc(y,I);E!=null||Co(y)&&(q.length||!I.length)||(E=y,y=p,p=this,q=Uc(y,Dt(y)));var ne=!(Co(E)&&"chain"in E&&!E.chain),ve=Aa(p);return Bi(q,function(xe){var Fe=y[xe];p[xe]=Fe,ve&&(p.prototype[xe]=function(){var vt=this.__chain__;if(ne||vt){var wt=p(this.__wrapped__),Gt=wt.__actions__=gi(this.__actions__);return Gt.push({func:Fe,args:arguments,thisArg:p}),wt.__chain__=vt,wt}return Fe.apply(p,si([this.value()],arguments))})}),p}function ot(){}var et=Hs($r),un=Hs(Yf),dr=Hs(Rc);function he(p){return xl(p)?Gi(al(p)):function(y){return function(E){return El(E,y)}}(p)}var re=yd(),ke=yd(!0);function Ve(){return[]}function Ze(){return!1}var De=zs(function(p,y){return p+y},0),Pe=gd("ceil"),Le=zs(function(p,y){return p/y},1),pe=gd("floor"),Te,fe=zs(function(p,y){return p*y},1),Ge=gd("round"),We=zs(function(p,y){return p-y},0);return ae.after=function(p,y){if(typeof y!="function")throw new be(g);return p=ct(p),function(){if(--p<1)return y.apply(this,arguments)}},ae.ary=Vh,ae.assign=Ke,ae.assignIn=st,ae.assignInWith=It,ae.assignWith=Jt,ae.at=At,ae.before=Ba,ae.bind=Yl,ae.bindAll=pi,ae.bindKey=xu,ae.castArray=function(){if(!arguments.length)return[];var p=arguments[0];return gr(p)?p:[p]},ae.chain=To,ae.chunk=function(p,y,E){y=(E?Vo(p,y,E):y===d)?1:$o(ct(y),0);var I=p==null?0:p.length;if(!I||y<1)return[];for(var q=0,ne=0,ve=mn(jc(I/y));q<I;)ve[ne++]=xa(p,q,q+=y);return ve},ae.compact=function(p){for(var y=-1,E=p==null?0:p.length,I=0,q=[];++y<E;){var ne=p[y];ne&&(q[I++]=ne)}return q},ae.concat=function(){var p=arguments.length;if(!p)return[];for(var y=mn(p-1),E=arguments[0],I=p;I--;)y[I-1]=arguments[I];return si(gr(E)?gi(E):[E],oi(y,1))},ae.cond=function(p){var y=p==null?0:p.length,E=Qn();return p=y?$r(p,function(I){if(typeof I[1]!="function")throw new be(g);return[E(I[0]),I[1]]}):[],xr(function(I){for(var q=-1;++q<y;){var ne=p[q];if(io(ne[0],this,I))return io(ne[1],this,I)}})},ae.conforms=function(p){return function(y){var E=Dt(y);return function(I){return cp(I,y,E)}}(Oa(p,1))},ae.constant=Ar,ae.countBy=Bn,ae.create=function(p,y){var E=qu(p);return y==null?E:Wl(E,y)},ae.curry=function p(y,E,I){var q=ol(y,8,d,d,d,d,d,E=I?d:E);return q.placeholder=p.placeholder,q},ae.curryRight=function p(y,E,I){var q=ol(y,x,d,d,d,d,d,E=I?d:E);return q.placeholder=p.placeholder,q},ae.debounce=Un,ae.defaults=rn,ae.defaultsDeep=Mt,ae.defer=Cp,ae.delay=Qs,ae.difference=jh,ae.differenceBy=Ih,ae.differenceWith=Lh,ae.drop=function(p,y,E){var I=p==null?0:p.length;return I?xa(p,(y=E||y===d?1:ct(y))<0?0:y,I):[]},ae.dropRight=function(p,y,E){var I=p==null?0:p.length;return I?xa(p,0,(y=I-(y=E||y===d?1:ct(y)))<0?0:y):[]},ae.dropRightWhile=function(p,y){return p&&p.length?cd(p,Qn(y,3),!0,!0):[]},ae.dropWhile=function(p,y){return p&&p.length?cd(p,Qn(y,3),!0):[]},ae.fill=function(p,y,E,I){var q=p==null?0:p.length;return q?(E&&typeof E!="number"&&Vo(p,y,E)&&(E=0,I=q),function(ne,ve,xe,Fe){var vt=ne.length;for((xe=ct(xe))<0&&(xe=-xe>vt?0:vt+xe),(Fe=Fe===d||Fe>vt?vt:ct(Fe))<0&&(Fe+=vt),Fe=xe>Fe?0:Ht(Fe);xe<Fe;)ne[xe++]=ve;return ne}(p,y,E,I)):[]},ae.filter=function(p,y){return(gr(p)?Ui:Yr)(p,Qn(y,3))},ae.flatMap=function(p,y){return oi(cs(p,y),1)},ae.flatMapDeep=function(p,y){return oi(cs(p,y),j)},ae.flatMapDepth=function(p,y,E){return E=E===d?1:ct(E),oi(cs(p,y),E)},ae.flatten=tf,ae.flattenDeep=function(p){return p!=null&&p.length?oi(p,j):[]},ae.flattenDepth=function(p,y){return p!=null&&p.length?oi(p,y=y===d?1:ct(y)):[]},ae.flip=function(p){return ol(p,512)},ae.flow=Dn,ae.flowRight=hr,ae.fromPairs=function(p){for(var y=-1,E=p==null?0:p.length,I={};++y<E;){var q=p[y];I[q[0]]=q[1]}return I},ae.functions=function(p){return p==null?[]:Uc(p,Dt(p))},ae.functionsIn=function(p){return p==null?[]:Uc(p,kt(p))},ae.groupBy=$h,ae.initial=function(p){return p!=null&&p.length?xa(p,0,-1):[]},ae.intersection=ll,ae.intersectionBy=Ou,ae.intersectionWith=im,ae.invert=qt,ae.invertBy=kn,ae.invokeMap=Su,ae.iteratee=vo,ae.keyBy=Bh,ae.keys=Dt,ae.keysIn=kt,ae.map=cs,ae.mapKeys=function(p,y){var E={};return y=Qn(y,3),Cn(p,function(I,q,ne){el(E,y(I,q,ne),I)}),E},ae.mapValues=function(p,y){var E={};return y=Qn(y,3),Cn(p,function(I,q,ne){el(E,q,y(I,q,ne))}),E},ae.matches=function(p){return vp(Oa(p,1))},ae.matchesProperty=function(p,y){return mp(p,Oa(y,1))},ae.memoize=Kl,ae.merge=xt,ae.mergeWith=jn,ae.method=Ml,ae.methodOf=wo,ae.mixin=ge,ae.negate=df,ae.nthArg=function(p){return p=ct(p),xr(function(y){return Ah(y,p)})},ae.omit=er,ae.omitBy=function(p,y){return ur(p,df(Qn(y)))},ae.once=function(p){return Ba(2,p)},ae.orderBy=function(p,y,E,I){return p==null?[]:(gr(y)||(y=y==null?[]:[y]),gr(E=I?d:E)||(E=E==null?[]:[E]),Th(p,y,E))},ae.over=et,ae.overArgs=qi,ae.overEvery=un,ae.overSome=dr,ae.partial=ul,ae.partialRight=No,ae.partition=Uh,ae.pick=pn,ae.pickBy=ur,ae.property=he,ae.propertyOf=function(p){return function(y){return p==null?d:El(p,y)}},ae.pull=nf,ae.pullAll=ls,ae.pullAllBy=function(p,y,E){return p&&p.length&&y&&y.length?ld(p,y,Qn(E,2)):p},ae.pullAllWith=function(p,y,E){return p&&p.length&&y&&y.length?ld(p,y,d,E):p},ae.pullAt=rf,ae.range=re,ae.rangeRight=ke,ae.rearg=da,ae.reject=function(p,y){return(gr(p)?Ui:Yr)(p,df(Qn(y,3)))},ae.remove=function(p,y){var E=[];if(!p||!p.length)return E;var I=-1,q=[],ne=p.length;for(y=Qn(y,3);++I<ne;){var ve=p[I];y(ve,I,p)&&(E.push(ve),q.push(I))}return yp(p,q),E},ae.rest=function(p,y){if(typeof p!="function")throw new be(g);return xr(p,y=y===d?y:ct(y))},ae.reverse=Zs,ae.sampleSize=function(p,y,E){return y=(E?Vo(p,y,E):y===d)?1:ct(y),(gr(p)?up:_p)(p,y)},ae.set=function(p,y,E){return p==null?p:Yu(p,y,E)},ae.setWith=function(p,y,E,I){return I=typeof I=="function"?I:d,p==null?p:Yu(p,y,E,I)},ae.shuffle=function(p){return(gr(p)?Oh:kh)(p)},ae.slice=function(p,y,E){var I=p==null?0:p.length;return I?(E&&typeof E!="number"&&Vo(p,y,E)?(y=0,E=I):(y=y==null?0:ct(y),E=E===d?I:ct(E)),xa(p,y,E)):[]},ae.sortBy=Np,ae.sortedUniq=function(p){return p&&p.length?bp(p):[]},ae.sortedUniqBy=function(p,y){return p&&p.length?bp(p,Qn(y,2)):[]},ae.split=function(p,y,E){return E&&typeof E!="number"&&Vo(p,y,E)&&(y=E=d),(E=E===d?U:E>>>0)?(p=Et(p))&&(typeof y=="string"||y!=null&&!le(y))&&!(y=fa(y))&&Ya(p)?to(ea(p),0,E):p.split(y,E):[]},ae.spread=function(p,y){if(typeof p!="function")throw new be(g);return y=y==null?0:$o(ct(y),0),xr(function(E){var I=E[y],q=to(E,0,y);return I&&si(q,I),io(p,this,q)})},ae.tail=function(p){var y=p==null?0:p.length;return y?xa(p,1,y):[]},ae.take=function(p,y,E){return p&&p.length?xa(p,0,(y=E||y===d?1:ct(y))<0?0:y):[]},ae.takeRight=function(p,y,E){var I=p==null?0:p.length;return I?xa(p,(y=I-(y=E||y===d?1:ct(y)))<0?0:y,I):[]},ae.takeRightWhile=function(p,y){return p&&p.length?cd(p,Qn(y,3),!1,!0):[]},ae.takeWhile=function(p,y){return p&&p.length?cd(p,Qn(y,3)):[]},ae.tap=function(p,y){return y(p),p},ae.throttle=function(p,y,E){var I=!0,q=!0;if(typeof p!="function")throw new be(g);return Co(E)&&(I="leading"in E?!!E.leading:I,q="trailing"in E?!!E.trailing:q),Un(p,y,{leading:I,maxWait:y,trailing:q})},ae.thru=sf,ae.toArray=Lt,ae.toPairs=Gn,ae.toPairsIn=nr,ae.toPath=function(p){return gr(p)?$r(p,al):ht(p)?[p]:gi(kp(Et(p)))},ae.toPlainObject=Ct,ae.transform=function(p,y,E){var I=gr(p),q=I||ra(p)||Qe(p);if(y=Qn(y,4),E==null){var ne=p&&p.constructor;E=q?I?new ne:[]:Co(p)&&Aa(ne)?qu(Ka(p)):{}}return(q?Bi:Cn)(p,function(ve,xe,Fe){return y(E,ve,xe,Fe)}),E},ae.unary=function(p){return Vh(p,1)},ae.union=of,ae.unionBy=af,ae.unionWith=lf,ae.uniq=function(p){return p&&p.length?yu(p):[]},ae.uniqBy=function(p,y){return p&&p.length?yu(p,Qn(y,2)):[]},ae.uniqWith=function(p,y){return y=typeof y=="function"?y:d,p&&p.length?yu(p,d,y):[]},ae.unset=function(p,y){return p==null||sd(p,y)},ae.unzip=us,ae.unzipWith=ql,ae.update=function(p,y,E){return p==null?p:Ku(p,y,pd(E))},ae.updateWith=function(p,y,E,I){return I=typeof I=="function"?I:d,p==null?p:Ku(p,y,pd(E),I)},ae.values=_r,ae.valuesIn=function(p){return p==null?[]:Vu(p,kt(p))},ae.without=_i,ae.words=ho,ae.wrap=function(p,y){return ul(pd(y),p)},ae.xor=Ad,ae.xorBy=uf,ae.xorWith=ss,ae.zip=Js,ae.zipObject=function(p,y){return Hc(p||[],y||[],Bo)},ae.zipObjectDeep=function(p,y){return Hc(p||[],y||[],Yu)},ae.zipWith=Ti,ae.entries=Gn,ae.entriesIn=nr,ae.extend=st,ae.extendWith=It,ge(ae,ae),ae.add=De,ae.attempt=Yn,ae.camelCase=Do,ae.capitalize=ko,ae.ceil=Pe,ae.clamp=function(p,y,E){return E===d&&(E=y,y=d),E!==d&&(E=(E=Ut(E))==E?E:0),y!==d&&(y=(y=Ut(y))==y?y:0),vu(Ut(p),y,E)},ae.clone=function(p){return Oa(p,4)},ae.cloneDeep=function(p){return Oa(p,5)},ae.cloneDeepWith=function(p,y){return Oa(p,5,y=typeof y=="function"?y:d)},ae.cloneWith=function(p,y){return Oa(p,4,y=typeof y=="function"?y:d)},ae.conformsTo=function(p,y){return y==null||cp(p,y,Dt(y))},ae.deburr=tr,ae.defaultTo=function(p,y){return p==null||p!=p?y:p},ae.divide=Le,ae.endsWith=function(p,y,E){p=Et(p),y=fa(y);var I=p.length,q=E=E===d?I:vu(ct(E),0,I);return(E-=y.length)>=0&&p.slice(E,q)==y},ae.eq=Ua,ae.escape=function(p){return(p=Et(p))&&fn.test(p)?p.replace(Xt,Ho):p},ae.escapeRegExp=function(p){return(p=Et(p))&&uo.test(p)?p.replace(Wr,"\\$&"):p},ae.every=function(p,y,E){var I=gr(p)?Yf:dp;return E&&Vo(p,y,E)&&(y=d),I(p,Qn(y,3))},ae.find=Td,ae.findIndex=Pp,ae.findKey=function(p,y){return Xa(p,Qn(y,3),Cn)},ae.findLast=cf,ae.findLastIndex=xd,ae.findLastKey=function(p,y){return Xa(p,Qn(y,3),co)},ae.floor=pe,ae.forEach=Md,ae.forEachRight=Rp,ae.forIn=function(p,y){return p==null?p:Sr(p,Qn(y,3),kt)},ae.forInRight=function(p,y){return p==null?p:so(p,Qn(y,3),kt)},ae.forOwn=function(p,y){return p&&Cn(p,Qn(y,3))},ae.forOwnRight=function(p,y){return p&&co(p,Qn(y,3))},ae.get=Wt,ae.gt=am,ae.gte=pf,ae.has=function(p,y){return p!=null&&bu(p,y,pp)},ae.hasIn=Tt,ae.head=Fh,ae.identity=Kn,ae.includes=function(p,y,E,I){p=pa(p)?p:_r(p),E=E&&!I?ct(E):0;var q=p.length;return E<0&&(E=$o(q+E,0)),rt(p)?E<=q&&p.indexOf(y,E)>-1:!!q&&su(p,y,E)>-1},ae.indexOf=function(p,y,E){var I=p==null?0:p.length;if(!I)return-1;var q=E==null?0:ct(E);return q<0&&(q=$o(I+q,0)),su(p,y,q)},ae.inRange=function(p,y,E){return y=Nt(y),E===d?(E=y,y=0):E=Nt(E),function(I,q,ne){return I>=zi(q,ne)&&I<$o(q,ne)}(p=Ut(p),y,E)},ae.invoke=Vn,ae.isArguments=fs,ae.isArray=gr,ae.isArrayBuffer=Gh,ae.isArrayLike=pa,ae.isArrayLikeObject=Mo,ae.isBoolean=function(p){return p===!0||p===!1||Go(p)&&Ao(p)==Y},ae.isBuffer=ra,ae.isDate=Dp,ae.isElement=function(p){return Go(p)&&p.nodeType===1&&!V(p)},ae.isEmpty=function(p){if(p==null)return!0;if(pa(p)&&(gr(p)||typeof p=="string"||typeof p.splice=="function"||ra(p)||Qe(p)||fs(p)))return!p.length;var y=Ro(p);if(y==Q||y==we)return!p.size;if(Pt(p))return!$a(p).length;for(var E in p)if(dn.call(p,E))return!1;return!0},ae.isEqual=function(p,y){return Gs(p,y)},ae.isEqualWith=function(p,y,E){var I=(E=typeof E=="function"?E:d)?E(p,y):d;return I===d?Gs(p,y,d,E):!!I},ae.isError=Mi,ae.isFinite=function(p){return typeof p=="number"&&Hu(p)},ae.isFunction=Aa,ae.isInteger=ds,ae.isLength=hf,ae.isMap=kd,ae.isMatch=function(p,y){return p===y||Fa(p,y,Kc(y))},ae.isMatchWith=function(p,y,E){return E=typeof E=="function"?E:d,Fa(p,y,Kc(y),E)},ae.isNaN=function(p){return jp(p)&&p!=+p},ae.isNative=function(p){if(wd(p))throw new Rr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return mu(p)},ae.isNil=function(p){return p==null},ae.isNull=function(p){return p===null},ae.isNumber=jp,ae.isObject=Co,ae.isObjectLike=Go,ae.isPlainObject=V,ae.isRegExp=le,ae.isSafeInteger=function(p){return ds(p)&&p>=-9007199254740991&&p<=D},ae.isSet=Oe,ae.isString=rt,ae.isSymbol=ht,ae.isTypedArray=Qe,ae.isUndefined=function(p){return p===d},ae.isWeakMap=function(p){return Go(p)&&Ro(p)==tt},ae.isWeakSet=function(p){return Go(p)&&Ao(p)=="[object WeakSet]"},ae.join=function(p,y){return p==null?"":Ic.call(p,y)},ae.kebabCase=Xo,ae.last=bo,ae.lastIndexOf=function(p,y,E){var I=p==null?0:p.length;if(!I)return-1;var q=I;return E!==d&&(q=(q=ct(E))<0?$o(I+q,0):zi(q,I-1)),y==y?function(ne,ve,xe){for(var Fe=xe+1;Fe--;)if(ne[Fe]===ve)return Fe;return Fe}(p,y,q):Vi(p,_a,q,!0)},ae.lowerCase=ao,ae.lowerFirst=jo,ae.lt=dt,ae.lte=Rt,ae.max=function(p){return p&&p.length?Uo(p,Kn,Po):d},ae.maxBy=function(p,y){return p&&p.length?Uo(p,Qn(y,2),Po):d},ae.mean=function(p){return Pr(p,Kn)},ae.meanBy=function(p,y){return Pr(p,Qn(y,2))},ae.min=function(p){return p&&p.length?Uo(p,Kn,Ol):d},ae.minBy=function(p,y){return p&&p.length?Uo(p,Qn(y,2),Ol):d},ae.stubArray=Ve,ae.stubFalse=Ze,ae.stubObject=function(){return{}},ae.stubString=function(){return""},ae.stubTrue=function(){return!0},ae.multiply=fe,ae.nth=function(p,y){return p&&p.length?Ah(p,ct(y)):d},ae.noConflict=function(){return Fo._===this&&(Fo._=xo),this},ae.noop=ot,ae.now=ff,ae.pad=function(p,y,E){p=Et(p);var I=(y=ct(y))?Wi(p):0;if(!y||I>=y)return p;var q=(y-I)/2;return Xs(zu(q),E)+p+Xs(jc(q),E)},ae.padEnd=function(p,y,E){p=Et(p);var I=(y=ct(y))?Wi(p):0;return y&&I<y?p+Xs(y-I,E):p},ae.padStart=function(p,y,E){p=Et(p);var I=(y=ct(y))?Wi(p):0;return y&&I<y?Xs(y-I,E)+p:p},ae.parseInt=function(p,y,E){return E||y==null?y=0:y&&(y=+y),ed(Et(p).replace(Fn,""),y||0)},ae.random=function(p,y,E){if(E&&typeof E!="boolean"&&Vo(p,y,E)&&(y=E=d),E===d&&(typeof y=="boolean"?(E=y,y=d):typeof p=="boolean"&&(E=p,p=d)),p===d&&y===d?(p=0,y=1):(p=Nt(p),y===d?(y=p,p=0):y=Nt(y)),p>y){var I=p;p=y,y=I}if(E||p%1||y%1){var q=Fs();return zi(p+q*(y-p+lu("1e-"+((q+"").length-1))),y)}return gp(p,y)},ae.reduce=function(p,y,E){var I=gr(p)?js:yi,q=arguments.length<3;return I(p,Qn(y,4),E,q,_o)},ae.reduceRight=function(p,y,E){var I=gr(p)?Kf:yi,q=arguments.length<3;return I(p,Qn(y,4),E,q,Sh)},ae.repeat=function(p,y,E){return y=(E?Vo(p,y,E):y===d)?1:ct(y),Gc(Et(p),y)},ae.replace=function(){var p=arguments,y=Et(p[0]);return p.length<3?y:y.replace(p[1],p[2])},ae.result=function(p,y,E){var I=-1,q=(y=Xr(y,p)).length;for(q||(q=1,p=d);++I<q;){var ne=p==null?d:p[al(y[I])];ne===d&&(I=q,ne=E),p=Aa(ne)?ne.call(p):ne}return p},ae.round=Ge,ae.runInContext=ft,ae.sample=function(p){return(gr(p)?rd:tm)(p)},ae.size=function(p){if(p==null)return 0;if(pa(p))return rt(p)?Wi(p):p.length;var y=Ro(p);return y==Q||y==we?p.size:$a(p).length},ae.snakeCase=Wo,ae.some=function(p,y,E){var I=gr(p)?Rc:rm;return E&&Vo(p,y,E)&&(y=d),I(p,Qn(y,3))},ae.sortedIndex=function(p,y){return zc(p,y)},ae.sortedIndexBy=function(p,y,E){return ud(p,y,Qn(E,2))},ae.sortedIndexOf=function(p,y){var E=p==null?0:p.length;if(E){var I=zc(p,y);if(I<E&&Ua(p[I],y))return I}return-1},ae.sortedLastIndex=function(p,y){return zc(p,y,!0)},ae.sortedLastIndexBy=function(p,y,E){return ud(p,y,Qn(E,2),!0)},ae.sortedLastIndexOf=function(p,y){if(p!=null&&p.length){var E=zc(p,y,!0)-1;if(Ua(p[E],y))return E}return-1},ae.startCase=ii,ae.startsWith=function(p,y,E){return p=Et(p),E=E==null?0:vu(ct(E),0,p.length),y=fa(y),p.slice(E,E+y.length)==y},ae.subtract=We,ae.sum=function(p){return p&&p.length?cu(p,Kn):0},ae.sumBy=function(p,y){return p&&p.length?cu(p,Qn(y,2)):0},ae.template=function(p,y,E){var I=ae.templateSettings;E&&Vo(p,y,E)&&(y=d),p=Et(p),y=It({},y,I,Sp);var q,ne,ve=It({},y.imports,I.imports,Sp),xe=Dt(ve),Fe=Vu(ve,xe),vt=0,wt=y.interpolate||Hn,Gt="__p += '",wn=W((y.escape||Hn).source+"|"+wt.source+"|"+(wt===Zn?Nn:Hn).source+"|"+(y.evaluate||Hn).source+"|$","g"),On="//# sourceURL="+(dn.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wf+"]")+`
`;p.replace(wn,function(Qt,rr,Mn,ze,vr,Fr){return Mn||(Mn=ze),Gt+=p.slice(vt,Fr).replace(lr,Gu),rr&&(q=!0,Gt+=`' +
__e(`+rr+`) +
'`),vr&&(ne=!0,Gt+=`';
`+vr+`;
__p += '`),Mn&&(Gt+=`' +
((__t = (`+Mn+`)) == null ? '' : __t) +
'`),vt=Fr+Qt.length,Qt}),Gt+=`';
`;var Wn=dn.call(y,"variable")&&y.variable;if(Wn){if(tn.test(Wn))throw new Rr("Invalid `variable` option passed into `_.template`")}else Gt=`with (obj) {
`+Gt+`
}
`;Gt=(ne?Gt.replace(pt,""):Gt).replace(bt,"$1").replace(nn,"$1;"),Gt="function("+(Wn||"obj")+`) {
`+(Wn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Gt+`return __p
}`;var jt=Yn(function(){return po(xe,On+"return "+Gt).apply(d,Fe)});if(jt.source=Gt,Mi(jt))throw jt;return jt},ae.times=function(p,y){if((p=ct(p))<1||p>D)return[];var E=U,I=zi(p,U);y=Qn(y),p-=U;for(var q=Fl(I,y);++E<p;)y(E);return q},ae.toFinite=Nt,ae.toInteger=ct,ae.toLength=Ht,ae.toLower=function(p){return Et(p).toLowerCase()},ae.toNumber=Ut,ae.toSafeInteger=function(p){return p?vu(ct(p),-9007199254740991,D):p===0?p:0},ae.toString=Et,ae.toUpper=function(p){return Et(p).toUpperCase()},ae.trim=function(p,y,E){if((p=Et(p))&&(E||y===d))return Ia(p);if(!p||!(y=fa(y)))return p;var I=ea(p),q=ea(y);return to(I,ba(I,q),Nc(I,q)+1).join("")},ae.trimEnd=function(p,y,E){if((p=Et(p))&&(E||y===d))return p.slice(0,ci(p)+1);if(!p||!(y=fa(y)))return p;var I=ea(p);return to(I,0,Nc(I,ea(y))+1).join("")},ae.trimStart=function(p,y,E){if((p=Et(p))&&(E||y===d))return p.replace(Fn,"");if(!p||!(y=fa(y)))return p;var I=ea(p);return to(I,ba(I,ea(y))).join("")},ae.truncate=function(p,y){var E=30,I="...";if(Co(y)){var q="separator"in y?y.separator:q;E="length"in y?ct(y.length):E,I="omission"in y?fa(y.omission):I}var ne=(p=Et(p)).length;if(Ya(p)){var ve=ea(p);ne=ve.length}if(E>=ne)return p;var xe=E-Wi(I);if(xe<1)return I;var Fe=ve?to(ve,0,xe).join(""):p.slice(0,xe);if(q===d)return Fe+I;if(ve&&(xe+=Fe.length-xe),le(q)){if(p.slice(xe).search(q)){var vt,wt=Fe;for(q.global||(q=W(q.source,Et(Er.exec(q))+"g")),q.lastIndex=0;vt=q.exec(wt);)var Gt=vt.index;Fe=Fe.slice(0,Gt===d?xe:Gt)}}else if(p.indexOf(fa(q),xe)!=xe){var wn=Fe.lastIndexOf(q);wn>-1&&(Fe=Fe.slice(0,wn))}return Fe+I},ae.unescape=function(p){return(p=Et(p))&&nt.test(p)?p.replace(on,sa):p},ae.uniqueId=function(p){var y=++Hr;return Et(p)+y},ae.upperCase=di,ae.upperFirst=qo,ae.each=Md,ae.eachRight=Rp,ae.first=Fh,ge(ae,(Te={},Cn(ae,function(p,y){dn.call(ae.prototype,y)||(Te[y]=p)}),Te),{chain:!1}),ae.VERSION="4.17.21",Bi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){ae[p].placeholder=ae}),Bi(["drop","take"],function(p,y){Nr.prototype[p]=function(E){E=E===d?1:$o(ct(E),0);var I=this.__filtered__&&!y?new Nr(this):this.clone();return I.__filtered__?I.__takeCount__=zi(E,I.__takeCount__):I.__views__.push({size:zi(E,U),type:p+(I.__dir__<0?"Right":"")}),I},Nr.prototype[p+"Right"]=function(E){return this.reverse()[p](E).reverse()}}),Bi(["filter","map","takeWhile"],function(p,y){var E=y+1,I=E==1||E==3;Nr.prototype[p]=function(q){var ne=this.clone();return ne.__iteratees__.push({iteratee:Qn(q,3),type:E}),ne.__filtered__=ne.__filtered__||I,ne}}),Bi(["head","last"],function(p,y){var E="take"+(y?"Right":"");Nr.prototype[p]=function(){return this[E](1).value()[0]}}),Bi(["initial","tail"],function(p,y){var E="drop"+(y?"":"Right");Nr.prototype[p]=function(){return this.__filtered__?new Nr(this):this[E](1)}}),Nr.prototype.compact=function(){return this.filter(Kn)},Nr.prototype.find=function(p){return this.filter(p).head()},Nr.prototype.findLast=function(p){return this.reverse().find(p)},Nr.prototype.invokeMap=xr(function(p,y){return typeof p=="function"?new Nr(this):this.map(function(E){return Hi(E,p,y)})}),Nr.prototype.reject=function(p){return this.filter(df(Qn(p)))},Nr.prototype.slice=function(p,y){p=ct(p);var E=this;return E.__filtered__&&(p>0||y<0)?new Nr(E):(p<0?E=E.takeRight(-p):p&&(E=E.drop(p)),y!==d&&(E=(y=ct(y))<0?E.dropRight(-y):E.take(y-p)),E)},Nr.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Nr.prototype.toArray=function(){return this.take(U)},Cn(Nr.prototype,function(p,y){var E=/^(?:filter|find|map|reject)|While$/.test(y),I=/^(?:head|last)$/.test(y),q=ae[I?"take"+(y=="last"?"Right":""):y],ne=I||/^find/.test(y);q&&(ae.prototype[y]=function(){var ve=this.__wrapped__,xe=I?[1]:arguments,Fe=ve instanceof Nr,vt=xe[0],wt=Fe||gr(ve),Gt=function(rr){var Mn=q.apply(ae,si([rr],xe));return I&&wn?Mn[0]:Mn};wt&&E&&typeof vt=="function"&&vt.length!=1&&(Fe=wt=!1);var wn=this.__chain__,On=!!this.__actions__.length,Wn=ne&&!wn,jt=Fe&&!On;if(!ne&&wt){ve=jt?ve:new Nr(this);var Qt=p.apply(ve,xe);return Qt.__actions__.push({func:sf,args:[Gt],thisArg:d}),new La(Qt,wn)}return Wn&&jt?p.apply(this,xe):(Qt=this.thru(Gt),Wn?I?Qt.value()[0]:Qt.value():Qt)})}),Bi(["pop","push","shift","sort","splice","unshift"],function(p){var y=qe[p],E=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",I=/^(?:pop|shift)$/.test(p);ae.prototype[p]=function(){var q=arguments;if(I&&!this.__chain__){var ne=this.value();return y.apply(gr(ne)?ne:[],q)}return this[E](function(ve){return y.apply(gr(ve)?ve:[],q)})}}),Cn(Nr.prototype,function(p,y){var E=ae[y];if(E){var I=E.name+"";dn.call(hu,I)||(hu[I]=[]),hu[I].push({name:y,func:E})}}),hu[Xc(d,2).name]=[{name:"wrapper",func:d}],Nr.prototype.clone=function(){var p=new Nr(this.__wrapped__);return p.__actions__=gi(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=gi(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=gi(this.__views__),p},Nr.prototype.reverse=function(){if(this.__filtered__){var p=new Nr(this);p.__dir__=-1,p.__filtered__=!0}else(p=this.clone()).__dir__*=-1;return p},Nr.prototype.value=function(){var p=this.__wrapped__.value(),y=this.__dir__,E=gr(p),I=y<0,q=E?p.length:0,ne=function(Fr,Xn,sr){for(var ki=-1,Va=sr.length;++ki<Va;){var Zl=sr[ki],Pi=Zl.size;switch(Zl.type){case"drop":Fr+=Pi;break;case"dropRight":Xn-=Pi;break;case"take":Xn=zi(Xn,Fr+Pi);break;case"takeRight":Fr=$o(Fr,Xn-Pi)}}return{start:Fr,end:Xn}}(0,q,this.__views__),ve=ne.start,xe=ne.end,Fe=xe-ve,vt=I?xe:ve-1,wt=this.__iteratees__,Gt=wt.length,wn=0,On=zi(Fe,this.__takeCount__);if(!E||!I&&q==Fe&&On==Fe)return wp(p,this.__actions__);var Wn=[];e:for(;Fe--&&wn<On;){for(var jt=-1,Qt=p[vt+=y];++jt<Gt;){var rr=wt[jt],Mn=rr.iteratee,ze=rr.type,vr=Mn(Qt);if(ze==2)Qt=vr;else if(!vr){if(ze==1)continue e;break e}}Wn[wn++]=Qt}return Wn},ae.prototype.at=Xi,ae.prototype.chain=function(){return To(this)},ae.prototype.commit=function(){return new La(this.value(),this.__chain__)},ae.prototype.next=function(){this.__values__===d&&(this.__values__=Lt(this.value()));var p=this.__index__>=this.__values__.length;return{done:p,value:p?d:this.__values__[this.__index__++]}},ae.prototype.plant=function(p){for(var y,E=this;E instanceof Ul;){var I=Sd(E);I.__index__=0,I.__values__=d,y?q.__wrapped__=I:y=I;var q=I;E=E.__wrapped__}return q.__wrapped__=p,y},ae.prototype.reverse=function(){var p=this.__wrapped__;if(p instanceof Nr){var y=p;return this.__actions__.length&&(y=new Nr(this)),(y=y.reverse()).__actions__.push({func:sf,args:[Zs],thisArg:d}),new La(y,this.__chain__)}return this.thru(Zs)},ae.prototype.toJSON=ae.prototype.valueOf=ae.prototype.value=function(){return wp(this.__wrapped__,this.__actions__)},ae.prototype.first=ae.prototype.head,Za&&(ae.prototype[Za]=function(){return this}),ae}();Fo._=Ii,(v=(function(){return Ii}).call(a,r,a,c))===d||(c.exports=v)}).call(this)}).call(this,r(68),r(221)(n))},function(n,a,r){var u=r(7),c=r(34),v=r(33),d=r(87),g=r(62),_=r(174),b=r(28),x=u.TypeError,A=b("toPrimitive");n.exports=function(M,O){if(!v(M)||d(M))return M;var S,j=g(M,A);if(j){if(O===void 0&&(O="default"),S=c(j,M,O),!v(S)||d(S))return S;throw x("Can't convert object to primitive value")}return O===void 0&&(O="number"),_(M,O)}},function(n,a,r){var u=r(108);n.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,a,r){var u=r(36),c=r(18),v=r(91);n.exports=!u&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(n,a,r){var u=r(35),c=r(135),v=r(50),d=r(38);n.exports=function(g,_){for(var b=c(_),x=d.f,A=v.f,M=0;M<b.length;M++){var O=b[M];u(g,O)||x(g,O,A(_,O))}}},function(n,a,r){var u=r(46),c=r(15),v=r(74),d=r(112),g=r(32),_=c([].concat);n.exports=u("Reflect","ownKeys")||function(b){var x=v.f(g(b)),A=d.f;return A?_(x,A(b)):x}},function(n,a,r){var u=r(15),c=r(35),v=r(41),d=r(137).indexOf,g=r(72),_=u([].push);n.exports=function(b,x){var A,M=v(b),O=0,S=[];for(A in M)!c(g,A)&&c(M,A)&&_(S,A);for(;x.length>O;)c(M,A=x[O++])&&(~d(S,A)||_(S,A));return S}},function(n,a,r){var u=r(41),c=r(75),v=r(45),d=function(g){return function(_,b,x){var A,M=u(_),O=v(M),S=c(x,O);if(g&&b!=b){for(;O>S;)if((A=M[S++])!=A)return!0}else for(;O>S;S++)if((g||S in M)&&M[S]===b)return g||S||0;return!g&&-1}};n.exports={includes:d(!0),indexOf:d(!1)}},function(n,a,r){var u=r(46);n.exports=u("document","documentElement")},function(n,a,r){var u=r(51),c=r(41),v=r(74).f,d=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(_){return g&&u(_)=="Window"?function(b){try{return v(b)}catch{return d(g)}}(_):v(c(_))}},function(n,a,r){var u=r(28);a.f=u},function(n,a,r){var u=r(177),c=r(35),v=r(140),d=r(38).f;n.exports=function(g){var _=u.Symbol||(u.Symbol={});c(_,g)||d(_,g,{value:v.f(g)})}},function(n,a,r){var u,c,v,d=r(18),g=r(30),_=r(60),b=r(101),x=r(42),A=r(28),M=r(71),O=A("iterator"),S=!1;[].keys&&("next"in(v=[].keys())?(c=b(b(v)))!==Object.prototype&&(u=c):S=!0),u==null||d(function(){var j={};return u[O].call(j)!==j})?u={}:M&&(u=_(u)),g(u[O])||x(u,O,function(){return this}),n.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:S}},function(n,a,r){var u=r(18);n.exports=!u(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,a,r){var u=r(16),c=r(15),v=r(72),d=r(33),g=r(35),_=r(38).f,b=r(74),x=r(139),A=r(183),M=r(90),O=r(185),S=!1,j=M("meta"),D=0,z=function(L){_(L,j,{value:{objectID:"O"+D++,weakData:{}}})},U=n.exports={enable:function(){U.enable=function(){},S=!0;var L=b.f,$=c([].splice),X={};X[j]=1,L(X).length&&(b.f=function(Y){for(var H=L(Y),B=0,G=H.length;B<G;B++)if(H[B]===j){$(H,B,1);break}return H},u({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},fastKey:function(L,$){if(!d(L))return typeof L=="symbol"?L:(typeof L=="string"?"S":"P")+L;if(!g(L,j)){if(!A(L))return"F";if(!$)return"E";z(L)}return L[j].objectID},getWeakData:function(L,$){if(!g(L,j)){if(!A(L))return!0;if(!$)return!1;z(L)}return L[j].weakData},onFreeze:function(L){return O&&S&&A(L)&&!g(L,j)&&z(L),L}};v[j]=!0},function(n,a,r){var u=r(28),c=r(80),v=u("iterator"),d=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||d[v]===g)}},function(n,a,r){var u=r(7),c=r(34),v=r(56),d=r(32),g=r(88),_=r(118),b=u.TypeError;n.exports=function(x,A){var M=arguments.length<2?_(x):A;if(v(M))return d(c(M,x));throw b(g(x)+" is not iterable")}},function(n,a,r){var u=r(34),c=r(32),v=r(62);n.exports=function(d,g,_){var b,x;c(d);try{if(!(b=v(d,"return"))){if(g==="throw")throw _;return _}b=u(b,d)}catch(A){x=!0,b=A}if(g==="throw")throw _;if(x)throw b;return c(b),_}},function(n,a,r){var u=r(30),c=r(33),v=r(102);n.exports=function(d,g,_){var b,x;return v&&u(b=g.constructor)&&b!==_&&c(x=b.prototype)&&x!==_.prototype&&v(d,x),d}},function(n,a,r){var u=r(42);n.exports=function(c,v,d){for(var g in v)u(c,g,v[g],d);return c}},function(n,a,r){var u=r(46),c=r(38),v=r(28),d=r(36),g=v("species");n.exports=function(_){var b=u(_),x=c.f;d&&b&&!b[g]&&x(b,g,{configurable:!0,get:function(){return this}})}},function(n,a,r){var u=r(15),c=r(59),v=r(39),d=r(44),g=u("".charAt),_=u("".charCodeAt),b=u("".slice),x=function(A){return function(M,O){var S,j,D=v(d(M)),z=c(O),U=D.length;return z<0||z>=U?A?"":void 0:(S=_(D,z))<55296||S>56319||z+1===U||(j=_(D,z+1))<56320||j>57343?A?g(D,z):S:A?b(D,z,z+2):j-56320+(S-55296<<10)+65536}};n.exports={codeAt:x(!1),charAt:x(!0)}},function(n,a){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,a,r){var u=r(91)("span").classList,c=u&&u.constructor&&u.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,a,r){var u=r(32);n.exports=function(){var c=u(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(n,a,r){var u=r(18),c=r(7).RegExp,v=u(function(){var _=c("a","y");return _.lastIndex=2,_.exec("abcd")!=null}),d=v||u(function(){return!c("a","y").sticky}),g=v||u(function(){var _=c("^r","gy");return _.lastIndex=2,_.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:d,UNSUPPORTED_Y:v}},function(n,a,r){var u=r(16),c=r(79).find,v=r(100),d="find",g=!0;d in[]&&Array(1).find(function(){g=!1}),u({target:"Array",proto:!0,forced:g},{find:function(_){return c(this,_,arguments.length>1?arguments[1]:void 0)}}),v(d)},function(n,a,r){var u=r(16),c=r(137).includes,v=r(100);u({target:"Array",proto:!0},{includes:function(d){return c(this,d,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(n,a,r){var u=r(16),c=r(15),v=r(197),d=r(44),g=r(39),_=r(198),b=c("".indexOf);u({target:"String",proto:!0,forced:!_("includes")},{includes:function(x){return!!~b(g(d(this)),g(v(x)),arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var u=r(33),c=r(51),v=r(28)("match");n.exports=function(d){var g;return u(d)&&((g=d[v])!==void 0?!!g:c(d)=="RegExp")}},function(n,a,r){var u=r(15);n.exports=u(1 .valueOf)},function(n,a,r){var u=r(15),c=r(44),v=r(39),d=r(162),g=u("".replace),_="["+d+"]",b=RegExp("^"+_+_+"*"),x=RegExp(_+_+"*$"),A=function(M){return function(O){var S=v(c(O));return 1&M&&(S=g(S,b,"")),2&M&&(S=g(S,x,"")),S}};n.exports={start:A(1),end:A(2),trim:A(3)}},function(n,a){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,a){var r,u,c=n.exports={};function v(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function g(D){if(r===setTimeout)return setTimeout(D,0);if((r===v||!r)&&setTimeout)return r=setTimeout,setTimeout(D,0);try{return r(D,0)}catch{try{return r.call(null,D,0)}catch{return r.call(this,D,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:v}catch{r=v}try{u=typeof clearTimeout=="function"?clearTimeout:d}catch{u=d}})();var _,b=[],x=!1,A=-1;function M(){x&&_&&(x=!1,_.length?b=_.concat(b):A=-1,b.length&&O())}function O(){if(!x){var D=g(M);x=!0;for(var z=b.length;z;){for(_=b,b=[];++A<z;)_&&_[A].run();A=-1,z=b.length}_=null,x=!1,function(U){if(u===clearTimeout)return clearTimeout(U);if((u===d||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(U);try{u(U)}catch{try{return u.call(null,U)}catch{return u.call(this,U)}}}(D)}}function S(D,z){this.fun=D,this.array=z}function j(){}c.nextTick=function(D){var z=new Array(arguments.length-1);if(arguments.length>1)for(var U=1;U<arguments.length;U++)z[U-1]=arguments[U];b.push(new S(D,z)),b.length!==1||x||g(O)},S.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=j,c.addListener=j,c.once=j,c.off=j,c.removeListener=j,c.removeAllListeners=j,c.emit=j,c.prependListener=j,c.prependOnceListener=j,c.listeners=function(D){return[]},c.binding=function(D){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(D){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,a,r){var u=r(32),c=r(165),v=r(28)("species");n.exports=function(d,g){var _,b=u(d).constructor;return b===void 0||(_=u(b)[v])==null?g:c(_)}},function(n,a,r){var u=r(7),c=r(99),v=r(88),d=u.TypeError;n.exports=function(g){if(c(g))return g;throw d(v(g)+" is not a constructor")}},function(n,a,r){var u=r(16),c=r(161).trim;u({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,a,r){var u=r(34),c=r(123),v=r(32),d=r(94),g=r(39),_=r(44),b=r(62),x=r(124),A=r(125);c("match",function(M,O,S){return[function(j){var D=_(this),z=j==null?void 0:b(j,M);return z?u(z,j,D):new RegExp(j)[M](g(D))},function(j){var D=v(this),z=g(j),U=S(O,D,z);if(U.done)return U.value;if(!D.global)return A(D,z);var L=D.unicode;D.lastIndex=0;for(var $,X=[],Y=0;($=A(D,z))!==null;){var H=g($[0]);X[Y]=H,H===""&&(D.lastIndex=x(z,d(D.lastIndex),L)),Y++}return Y===0?null:X}]})},function(n,a,r){var u,c,v,d,g=r(7),_=r(76),b=r(64),x=r(30),A=r(35),M=r(18),O=r(138),S=r(98),j=r(91),D=r(169),z=r(128),U=g.setImmediate,L=g.clearImmediate,$=g.process,X=g.Dispatch,Y=g.Function,H=g.MessageChannel,B=g.String,G=0,K={},Q="onreadystatechange";try{u=g.location}catch{}var ce=function(we){if(A(K,we)){var me=K[we];delete K[we],me()}},ue=function(we){return function(){ce(we)}},de=function(we){ce(we.data)},ye=function(we){g.postMessage(B(we),u.protocol+"//"+u.host)};U&&L||(U=function(we){var me=S(arguments,1);return K[++G]=function(){_(x(we)?we:Y(we),void 0,me)},c(G),G},L=function(we){delete K[we]},z?c=function(we){$.nextTick(ue(we))}:X&&X.now?c=function(we){X.now(ue(we))}:H&&!D?(d=(v=new H).port2,v.port1.onmessage=de,c=b(d.postMessage,d)):g.addEventListener&&x(g.postMessage)&&!g.importScripts&&u&&u.protocol!=="file:"&&!M(ye)?(c=ye,g.addEventListener("message",de,!1)):c=Q in j("script")?function(we){O.appendChild(j("script")).onreadystatechange=function(){O.removeChild(this),ce(we)}}:function(we){setTimeout(ue(we),0)}),n.exports={set:U,clear:L}},function(n,a,r){var u=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(u)},function(n,a,r){var u=r(56),c=function(v){var d,g;this.promise=new v(function(_,b){if(d!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");d=_,g=b}),this.resolve=u(d),this.reject=u(g)};n.exports.f=function(v){return new c(v)}},function(n,a,r){a.a=function(){return!1}},function(n,a,r){(function(u){r.d(a,"a",function(){return $});var c=r(1);function v(H){throw new Error("[mobx-utils] "+H)}function d(H,B){B===void 0&&(B="Illegal state"),H||v(B)}var g=function(H){return H&&H!==Object.prototype&&Object.getOwnPropertyNames(H).concat(g(Object.getPrototypeOf(H))||[])},_=function(H){return function(B){var G=g(B);return G.filter(function(K,Q){return G.indexOf(K)===Q})}(H).filter(function(B){return B!=="constructor"&&!~B.indexOf("__")})},b="pending",x="fulfilled",A="rejected";function M(H){switch(this.state){case b:return H.pending&&H.pending(this.value);case A:return H.rejected&&H.rejected(this.value);case x:return H.fulfilled?H.fulfilled(this.value):this.value}}function O(H,B){if(d(arguments.length<=2,"fromPromise expects up to two arguments"),d(typeof H=="function"||typeof H=="object"&&H&&typeof H.then=="function","Please pass a promise or function to fromPromise"),H.isPromiseBasedObservable===!0)return H;typeof H=="function"&&(H=new Promise(H));var G=H;H.then(Object(c.k)("observableFromPromise-resolve",function(Q){G.value=Q,G.state=x}),Object(c.k)("observableFromPromise-reject",function(Q){G.value=Q,G.state=A})),G.isPromiseBasedObservable=!0,G.case=M;var K=B&&B.state===x?B.value:void 0;return Object(c.q)(G,{value:K,state:b},{},{deep:!1}),G}(function(H){H.reject=Object(c.k)("fromPromise.reject",function(B){var G=H(Promise.reject(B));return G.state=A,G.value=B,G}),H.resolve=Object(c.k)("fromPromise.resolve",function(B){B===void 0&&(B=void 0);var G=H(Promise.resolve(B));return G.state=x,G.value=B,G})})(O||(O={}));var S=function(H,B,G,K){var Q,ce=arguments.length,ue=ce<3?B:K===null?K=Object.getOwnPropertyDescriptor(B,G):K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ue=Reflect.decorate(H,B,G,K);else for(var de=H.length-1;de>=0;de--)(Q=H[de])&&(ue=(ce<3?Q(ue):ce>3?Q(B,G,ue):Q(B,G))||ue);return ce>3&&ue&&Object.defineProperty(B,G,ue),ue};(function(){function H(B,G){var K=this;Object(c.G)(function(){K.current=G,K.subscription=B.subscribe(K)})}H.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},H.prototype.next=function(B){this.current=B},H.prototype.complete=function(){this.dispose()},H.prototype.error=function(B){this.current=B,this.dispose()},S([c.C.ref],H.prototype,"current",void 0),S([c.k.bound],H.prototype,"next",null),S([c.k.bound],H.prototype,"complete",null),S([c.k.bound],H.prototype,"error",null)})();var j=function(){return j=Object.assign||function(H){for(var B,G=1,K=arguments.length;G<K;G++)for(var Q in B=arguments[G])Object.prototype.hasOwnProperty.call(B,Q)&&(H[Q]=B[Q]);return H},j.apply(this,arguments)},D=function(H,B,G,K){var Q,ce=arguments.length,ue=ce<3?B:K===null?K=Object.getOwnPropertyDescriptor(B,G):K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ue=Reflect.decorate(H,B,G,K);else for(var de=H.length-1;de>=0;de--)(Q=H[de])&&(ue=(ce<3?Q(ue):ce>3?Q(B,G,ue):Q(B,G))||ue);return ce>3&&ue&&Object.defineProperty(B,G,ue),ue},z=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function H(B){var G=this;this.model=B,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(K){return G.localValues.has(K)},d(Object(c.A)(B),"createViewModel expects an observable object"),_(B).forEach(function(K){if(K!==c.a&&K!=="__mobxDidRunLazyInitializers"){if(d(z.indexOf(K)===-1,"The propertyname "+K+" is reserved and cannot be used with viewModels"),Object(c.w)(B,K)){var Q=Object(c.h)(B,K).derivation;G.localComputedValues.set(K,Object(c.m)(Q.bind(G)))}var ce=Object.getOwnPropertyDescriptor(B,K),ue=ce?{enumerable:ce.enumerable}:{};Object.defineProperty(G,K,j(j({},ue),{configurable:!0,get:function(){return Object(c.w)(B,K)?G.localComputedValues.get(K).get():G.isPropertyDirty(K)?G.localValues.get(K):G.model[K]},set:Object(c.k)(function(de){de!==G.model[K]?G.localValues.set(K,de):G.localValues.delete(K)})}))}})}Object.defineProperty(H.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),H.prototype.submit=function(){var B=this;Object(c.B)(this.localValues).forEach(function(G){var K=B.localValues.get(G),Q=B.model[G];Object(c.y)(Q)?Q.replace(K):Object(c.z)(Q)?(Q.clear(),Q.merge(K)):Object(c.v)(K)||(B.model[G]=K)}),this.localValues.clear()},H.prototype.reset=function(){this.localValues.clear()},H.prototype.resetProperty=function(B){this.localValues.delete(B)},D([c.m],H.prototype,"isDirty",null),D([c.m],H.prototype,"changedValues",null),D([c.k.bound],H.prototype,"submit",null),D([c.k.bound],H.prototype,"reset",null),D([c.k.bound],H.prototype,"resetProperty",null)})();function U(H){if(!H)return"ROOT";for(var B=[];H.parent;)B.push(H.path),H=H.parent;return B.reverse().join("/")}function L(H){return Object(c.A)(H)||Object(c.y)(H)||Object(c.z)(H)}function $(H,B){var G=new WeakMap;function K(ue){var de=G.get(ue.object);(function(ye,we){switch(ye.type){case"add":Q(ye.newValue,we,ye.name);break;case"update":ce(ye.oldValue),Q(ye.newValue,we,ye.name||""+ye.index);break;case"remove":case"delete":ce(ye.oldValue);break;case"splice":ye.removed.map(ce),ye.added.forEach(function(tt,Ot){return Q(tt,we,""+(ye.index+Ot))});for(var me=ye.index+ye.addedCount;me<ye.object.length;me++)if(L(ye.object[me])){var He=G.get(ye.object[me]);He&&(He.path=""+me)}}})(ue,de),B(ue,U(de),H)}function Q(ue,de,ye){if(L(ue)){var we=G.get(ue);if(we){if(we.parent!==de||we.path!==ye)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+U(de)+"/"+ye+"', but it already exists at '"+U(we.parent)+"/"+we.path+"'")}else{var me={parent:de,path:ye,dispose:Object(c.D)(ue,K)};G.set(ue,me),Object(c.p)(ue).forEach(function(He){var tt=He[0];return Q(He[1],me,tt)})}}}function ce(ue){if(L(ue)){var de=G.get(ue);if(!de)return;G.delete(ue),de.dispose(),Object(c.L)(ue).forEach(ce)}}return Q(H,void 0,""),function(){ce(H)}}var X,Y=(X=function(H,B){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,K){G.__proto__=K}||function(G,K){for(var Q in K)K.hasOwnProperty(Q)&&(G[Q]=K[Q])},X(H,B)},function(H,B){function G(){this.constructor=H}X(H,B),H.prototype=B===null?Object.create(B):(G.prototype=B.prototype,new G)});(function(H){function B(G,K,Q){var ce=Q===void 0?{}:Q,ue=ce.name,de=ue===void 0?"ogm"+(1e3*Math.random()|0):ue,ye=ce.keyToName,we=ye===void 0?function(tt){return""+tt}:ye,me=H.call(this)||this;me._keyToName=we,me._groupBy=K,me._ogmInfoKey=Symbol("ogmInfo"+de),me._base=G;for(var He=0;He<G.length;He++)me._addItem(G[He]);return me._disposeBaseObserver=Object(c.D)(me._base,function(tt){if(tt.type==="splice")Object(c.J)(function(){for(var Ot=0,Je=tt.removed;Ot<Je.length;Ot++){var Yt=Je[Ot];me._removeItem(Yt)}for(var Kt=0,Ft=tt.added;Kt<Ft.length;Kt++){var An=Ft[Kt];me._addItem(An)}});else{if(tt.type!=="update")throw new Error("illegal state");Object(c.J)(function(){me._removeItem(tt.oldValue),me._addItem(tt.newValue)})}}),me}Y(B,H),B.prototype.clear=function(){throw new Error("not supported")},B.prototype.delete=function(G){throw new Error("not supported")},B.prototype.set=function(G,K){throw new Error("not supported")},B.prototype.dispose=function(){this._disposeBaseObserver();for(var G=0;G<this._base.length;G++){var K=this._base[G];K[this._ogmInfoKey].reaction(),delete K[this._ogmInfoKey]}},B.prototype._getGroupArr=function(G){var K=H.prototype.get.call(this,G);return K===void 0&&(K=Object(c.C)([],{name:"GroupArray["+this._keyToName(G)+"]",deep:!1}),H.prototype.set.call(this,G,K)),K},B.prototype._removeFromGroupArr=function(G,K){var Q=H.prototype.get.call(this,G);Q.length===1?H.prototype.delete.call(this,G):(K===Q.length-1||(Q[K]=Q[Q.length-1],Q[K][this._ogmInfoKey].groupArrIndex=K),Q.length--)},B.prototype._addItem=function(G){var K=this,Q=this._groupBy(G),ce=this._getGroupArr(Q),ue={groupByValue:Q,groupArrIndex:ce.length,reaction:Object(c.F)(function(){return K._groupBy(G)},function(de,ye){var we=G[K._ogmInfoKey];K._removeFromGroupArr(we.groupByValue,we.groupArrIndex);var me=K._getGroupArr(de),He=me.length;me.push(G),we.groupByValue=de,we.groupArrIndex=He})};Object.defineProperty(G,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:ue}),ce.push(G)},B.prototype._removeItem=function(G){var K=G[this._ogmInfoKey];this._removeFromGroupArr(K.groupByValue,K.groupArrIndex),K.reaction(),delete G[this._ogmInfoKey]}})(c.b),function(){function H(B,G){this.base=B,this.args=G,this.closestIdx=0,this.isDisposed=!1;for(var K=this.closest=this.root=B,Q=0;Q<this.args.length-1&&(K=K.get(G[Q]));Q++)this.closest=K;this.closestIdx=Q}return H.prototype.exists=function(){this.assertNotDisposed();var B=this.args.length;return this.closestIdx>=B-1&&this.closest.has(this.args[B-1])},H.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},H.prototype.set=function(B){this.assertNotDisposed();for(var G=this.args.length,K=this.closest,Q=this.closestIdx;Q<G-1;Q++){var ce=new Map;K.set(this.args[Q],ce),K=ce}this.closestIdx=G-1,this.closest=K,K.set(this.args[G-1],B)},H.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var B=this.args.length;this.closest.delete(this.args[B-1]);for(var G=this.root,K=[G],Q=0;Q<B-1;Q++)G=G.get(this.args[Q]),K.push(G);for(Q=K.length-1;Q>0;Q--)K[Q].size===0&&K[Q-1].delete(this.args[Q-1]);this.isDisposed=!0},H.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},H}(),Promise.resolve(),typeof queueMicrotask<"u"||u!==void 0&&u.nextTick}).call(this,r(163))},function(n,a,r){var u;(function(c,v,d){if(c){for(var g,_={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},b={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},A={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},M=1;M<20;++M)_[111+M]="f"+M;for(M=0;M<=9;++M)_[M+96]=M.toString();L.prototype.bind=function($,X,Y){var H=this;return $=$ instanceof Array?$:[$],H._bindMultiple.call(H,$,X,Y),H},L.prototype.unbind=function($,X){return this.bind.call(this,$,function(){},X)},L.prototype.trigger=function($,X){var Y=this;return Y._directMap[$+":"+X]&&Y._directMap[$+":"+X]({},$),Y},L.prototype.reset=function(){var $=this;return $._callbacks={},$._directMap={},$},L.prototype.stopCallback=function($,X){if((" "+X.className+" ").indexOf(" mousetrap ")>-1||U(X,this.target))return!1;if("composedPath"in $&&typeof $.composedPath=="function"){var Y=$.composedPath()[0];Y!==$.target&&(X=Y)}return X.tagName=="INPUT"||X.tagName=="SELECT"||X.tagName=="TEXTAREA"||X.isContentEditable},L.prototype.handleKey=function(){var $=this;return $._handleKey.apply($,arguments)},L.addKeycodes=function($){for(var X in $)$.hasOwnProperty(X)&&(_[X]=$[X]);g=null},L.init=function(){var $=L(v);for(var X in $)X.charAt(0)!=="_"&&(L[X]=function(Y){return function(){return $[Y].apply($,arguments)}}(X))},L.init(),c.Mousetrap=L,n.exports&&(n.exports=L),(u=(function(){return L}).call(a,r,a,n))===void 0||(n.exports=u)}function O($,X,Y){$.addEventListener?$.addEventListener(X,Y,!1):$.attachEvent("on"+X,Y)}function S($){if($.type=="keypress"){var X=String.fromCharCode($.which);return $.shiftKey||(X=X.toLowerCase()),X}return _[$.which]?_[$.which]:b[$.which]?b[$.which]:String.fromCharCode($.which).toLowerCase()}function j($){return $=="shift"||$=="ctrl"||$=="alt"||$=="meta"}function D($,X,Y){return Y||(Y=function(){if(!g)for(var H in g={},_)H>95&&H<112||_.hasOwnProperty(H)&&(g[_[H]]=H);return g}()[$]?"keydown":"keypress"),Y=="keypress"&&X.length&&(Y="keydown"),Y}function z($,X){var Y,H,B,G=[];for(Y=function(K){return K==="+"?["+"]:(K=K.replace(/\+{2}/g,"+plus")).split("+")}($),B=0;B<Y.length;++B)H=Y[B],A[H]&&(H=A[H]),X&&X!="keypress"&&x[H]&&(H=x[H],G.push("shift")),j(H)&&G.push(H);return{key:H,modifiers:G,action:X=D(H,G,X)}}function U($,X){return $!==null&&$!==v&&($===X||U($.parentNode,X))}function L($){var X=this;if($=$||v,!(X instanceof L))return new L($);X.target=$,X._callbacks={},X._directMap={};var Y,H={},B=!1,G=!1,K=!1;function Q(me){me=me||{};var He,tt=!1;for(He in H)me[He]?tt=!0:H[He]=0;tt||(K=!1)}function ce(me,He,tt,Ot,Je,Yt){var Kt,Ft,An,Be,Se=[],Ce=tt.type;if(!X._callbacks[me])return[];for(Ce=="keyup"&&j(me)&&(He=[me]),Kt=0;Kt<X._callbacks[me].length;++Kt)if(Ft=X._callbacks[me][Kt],(Ot||!Ft.seq||H[Ft.seq]==Ft.level)&&Ce==Ft.action&&(Ce=="keypress"&&!tt.metaKey&&!tt.ctrlKey||(An=He,Be=Ft.modifiers,An.sort().join(",")===Be.sort().join(",")))){var Xe=!Ot&&Ft.combo==Je,_t=Ot&&Ft.seq==Ot&&Ft.level==Yt;(Xe||_t)&&X._callbacks[me].splice(Kt,1),Se.push(Ft)}return Se}function ue(me,He,tt,Ot){X.stopCallback(He,He.target||He.srcElement,tt,Ot)||me(He,tt)===!1&&(function(Je){Je.preventDefault?Je.preventDefault():Je.returnValue=!1}(He),function(Je){Je.stopPropagation?Je.stopPropagation():Je.cancelBubble=!0}(He))}function de(me){typeof me.which!="number"&&(me.which=me.keyCode);var He=S(me);He&&(me.type!="keyup"||B!==He?X.handleKey(He,function(tt){var Ot=[];return tt.shiftKey&&Ot.push("shift"),tt.altKey&&Ot.push("alt"),tt.ctrlKey&&Ot.push("ctrl"),tt.metaKey&&Ot.push("meta"),Ot}(me),me):B=!1)}function ye(me,He,tt,Ot){function Je(An){return function(){K=An,++H[me],clearTimeout(Y),Y=setTimeout(Q,1e3)}}function Yt(An){ue(tt,An,me),Ot!=="keyup"&&(B=S(An)),setTimeout(Q,10)}H[me]=0;for(var Kt=0;Kt<He.length;++Kt){var Ft=Kt+1===He.length?Yt:Je(Ot||z(He[Kt+1]).action);we(He[Kt],Ft,Ot,me,Kt)}}function we(me,He,tt,Ot,Je){X._directMap[me+":"+tt]=He;var Yt,Kt=(me=me.replace(/\s+/g," ")).split(" ");Kt.length>1?ye(me,Kt,He,tt):(Yt=z(me,tt),X._callbacks[Yt.key]=X._callbacks[Yt.key]||[],ce(Yt.key,Yt.modifiers,{type:Yt.action},Ot,me,Je),X._callbacks[Yt.key][Ot?"unshift":"push"]({callback:He,modifiers:Yt.modifiers,action:Yt.action,seq:Ot,level:Je,combo:me}))}X._handleKey=function(me,He,tt){var Ot,Je=ce(me,He,tt),Yt={},Kt=0,Ft=!1;for(Ot=0;Ot<Je.length;++Ot)Je[Ot].seq&&(Kt=Math.max(Kt,Je[Ot].level));for(Ot=0;Ot<Je.length;++Ot)if(Je[Ot].seq){if(Je[Ot].level!=Kt)continue;Ft=!0,Yt[Je[Ot].seq]=1,ue(Je[Ot].callback,tt,Je[Ot].combo,Je[Ot].seq)}else Ft||ue(Je[Ot].callback,tt,Je[Ot].combo);var An=tt.type=="keypress"&&G;tt.type!=K||j(me)||An||Q(Yt),G=Ft&&tt.type=="keydown"},X._bindMultiple=function(me,He,tt){for(var Ot=0;Ot<me.length;++Ot)we(me[Ot],He,tt)},O($,"keypress",de),O($,"keydown",de),O($,"keyup",de)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,a,r){var u=r(7),c=r(34),v=r(30),d=r(33),g=u.TypeError;n.exports=function(_,b){var x,A;if(b==="string"&&v(x=_.toString)&&!d(A=c(x,_))||v(x=_.valueOf)&&!d(A=c(x,_))||b!=="string"&&v(x=_.toString)&&!d(A=c(x,_)))return A;throw g("Can't convert object to primitive value")}},function(n,a,r){var u=r(7),c=r(30),v=r(92),d=u.WeakMap;n.exports=c(d)&&/native code/.test(v(d))},function(n,a,r){var u=r(36),c=r(38),v=r(32),d=r(41),g=r(77);n.exports=u?Object.defineProperties:function(_,b){v(_);for(var x,A=d(b),M=g(b),O=M.length,S=0;O>S;)c.f(_,x=M[S++],A[x]);return _}},function(n,a,r){var u=r(7);n.exports=u},function(n,a,r){var u=r(7),c=r(96),v=r(99),d=r(33),g=r(28)("species"),_=u.Array;n.exports=function(b){var x;return c(b)&&(x=b.constructor,(v(x)&&(x===_||c(x.prototype))||d(x)&&(x=x[g])===null)&&(x=void 0)),x===void 0?_:x}},function(n,a,r){var u=r(113),c=r(97);n.exports=u?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,a,r){var u=r(142).IteratorPrototype,c=r(60),v=r(69),d=r(78),g=r(80),_=function(){return this};n.exports=function(b,x,A,M){var O=x+" Iterator";return b.prototype=c(u,{next:v(+!M,A)}),d(b,O,!1,!0),g[O]=_,b}},function(n,a,r){var u=r(7),c=r(30),v=u.String,d=u.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw d("Can't set "+v(g)+" as a prototype")}},function(n,a,r){var u=r(16),c=r(7),v=r(15),d=r(95),g=r(42),_=r(144),b=r(117),x=r(119),A=r(30),M=r(33),O=r(18),S=r(120),j=r(78),D=r(148);n.exports=function(z,U,L){var $=z.indexOf("Map")!==-1,X=z.indexOf("Weak")!==-1,Y=$?"set":"add",H=c[z],B=H&&H.prototype,G=H,K={},Q=function(me){var He=v(B[me]);g(B,me,me=="add"?function(tt){return He(this,tt===0?0:tt),this}:me=="delete"?function(tt){return!(X&&!M(tt))&&He(this,tt===0?0:tt)}:me=="get"?function(tt){return X&&!M(tt)?void 0:He(this,tt===0?0:tt)}:me=="has"?function(tt){return!(X&&!M(tt))&&He(this,tt===0?0:tt)}:function(tt,Ot){return He(this,tt===0?0:tt,Ot),this})};if(d(z,!A(H)||!(X||B.forEach&&!O(function(){new H().entries().next()}))))G=L.getConstructor(U,z,$,Y),_.enable();else if(d(z,!0)){var ce=new G,ue=ce[Y](X?{}:-0,1)!=ce,de=O(function(){ce.has(1)}),ye=S(function(me){new H(me)}),we=!X&&O(function(){for(var me=new H,He=5;He--;)me[Y](He,He);return!me.has(-0)});ye||((G=U(function(me,He){x(me,B);var tt=D(new H,me,G);return He!=null&&b(He,tt[Y],{that:tt,AS_ENTRIES:$}),tt})).prototype=B,B.constructor=G),(de||we)&&(Q("delete"),Q("has"),$&&Q("get")),(we||ue)&&Q(Y),X&&B.clear&&delete B.clear}return K[z]=G,u({global:!0,forced:G!=H},K),j(G,z),X||L.setStrong(G,z,$),G}},function(n,a,r){var u=r(18),c=r(33),v=r(51),d=r(184),g=Object.isExtensible,_=u(function(){});n.exports=_||d?function(b){return!!c(b)&&(!d||v(b)!="ArrayBuffer")&&(!g||g(b))}:g},function(n,a,r){var u=r(18);n.exports=u(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,a,r){var u=r(18);n.exports=!u(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,a,r){var u=r(38).f,c=r(60),v=r(149),d=r(64),g=r(119),_=r(117),b=r(116),x=r(150),A=r(36),M=r(144).fastKey,O=r(58),S=O.set,j=O.getterFor;n.exports={getConstructor:function(D,z,U,L){var $=D(function(G,K){g(G,X),S(G,{type:z,index:c(null),first:void 0,last:void 0,size:0}),A||(G.size=0),K!=null&&_(K,G[L],{that:G,AS_ENTRIES:U})}),X=$.prototype,Y=j(z),H=function(G,K,Q){var ce,ue,de=Y(G),ye=B(G,K);return ye?ye.value=Q:(de.last=ye={index:ue=M(K,!0),key:K,value:Q,previous:ce=de.last,next:void 0,removed:!1},de.first||(de.first=ye),ce&&(ce.next=ye),A?de.size++:G.size++,ue!=="F"&&(de.index[ue]=ye)),G},B=function(G,K){var Q,ce=Y(G),ue=M(K);if(ue!=="F")return ce.index[ue];for(Q=ce.first;Q;Q=Q.next)if(Q.key==K)return Q};return v(X,{clear:function(){for(var G=Y(this),K=G.index,Q=G.first;Q;)Q.removed=!0,Q.previous&&(Q.previous=Q.previous.next=void 0),delete K[Q.index],Q=Q.next;G.first=G.last=void 0,A?G.size=0:this.size=0},delete:function(G){var K=this,Q=Y(K),ce=B(K,G);if(ce){var ue=ce.next,de=ce.previous;delete Q.index[ce.index],ce.removed=!0,de&&(de.next=ue),ue&&(ue.previous=de),Q.first==ce&&(Q.first=ue),Q.last==ce&&(Q.last=de),A?Q.size--:K.size--}return!!ce},forEach:function(G){for(var K,Q=Y(this),ce=d(G,arguments.length>1?arguments[1]:void 0);K=K?K.next:Q.first;)for(ce(K.value,K.key,this);K&&K.removed;)K=K.previous},has:function(G){return!!B(this,G)}}),v(X,U?{get:function(G){var K=B(this,G);return K&&K.value},set:function(G,K){return H(this,G===0?0:G,K)}}:{add:function(G){return H(this,G=G===0?0:G,G)}}),A&&u(X,"size",{get:function(){return Y(this).size}}),$},setStrong:function(D,z,U){var L=z+" Iterator",$=j(z),X=j(L);b(D,z,function(Y,H){S(this,{type:L,target:Y,state:$(Y),kind:H,last:void 0})},function(){for(var Y=X(this),H=Y.kind,B=Y.last;B&&B.removed;)B=B.previous;return Y.target&&(Y.last=B=B?B.next:Y.state.first)?H=="keys"?{value:B.key,done:!1}:H=="values"?{value:B.value,done:!1}:{value:[B.key,B.value],done:!1}:(Y.target=void 0,{value:void 0,done:!0})},U?"entries":"values",!U,!0),x(z)}}},function(n,a,r){var u=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(v){return u(this,v,arguments.length>1?arguments[1]:void 0)}},function(n,a,r){var u=r(7),c=r(64),v=r(34),d=r(40),g=r(189),_=r(145),b=r(99),x=r(45),A=r(63),M=r(146),O=r(118),S=u.Array;n.exports=function(j){var D=d(j),z=b(this),U=arguments.length,L=U>1?arguments[1]:void 0,$=L!==void 0;$&&(L=c(L,U>2?arguments[2]:void 0));var X,Y,H,B,G,K,Q=O(D),ce=0;if(!Q||this==S&&_(Q))for(X=x(D),Y=z?new this(X):S(X);X>ce;ce++)K=$?L(D[ce],ce):D[ce],A(Y,ce,K);else for(G=(B=M(D,Q)).next,Y=z?new this:[];!(H=v(G,B)).done;ce++)K=$?g(B,L,[H.value,ce],!0):H.value,A(Y,ce,K);return Y.length=ce,Y}},function(n,a,r){var u=r(32),c=r(147);n.exports=function(v,d,g,_){try{return _?d(u(g)[0],g[1]):d(g)}catch(b){c(v,"throw",b)}}},function(n,a,r){var u=r(18),c=r(7).RegExp;n.exports=u(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(n,a,r){var u=r(18),c=r(7).RegExp;n.exports=u(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(n,a,r){var u=r(16),c=r(15),v=r(56),d=r(40),g=r(45),_=r(39),b=r(18),x=r(193),A=r(121),M=r(194),O=r(195),S=r(70),j=r(196),D=[],z=c(D.sort),U=c(D.push),L=b(function(){D.sort(void 0)}),$=b(function(){D.sort(null)}),X=A("sort"),Y=!b(function(){if(S)return S<70;if(!(M&&M>3)){if(O)return!0;if(j)return j<603;var H,B,G,K,Q="";for(H=65;H<76;H++){switch(B=String.fromCharCode(H),H){case 66:case 69:case 70:case 72:G=3;break;case 68:case 71:G=4;break;default:G=2}for(K=0;K<47;K++)D.push({k:B+K,v:G})}for(D.sort(function(ce,ue){return ue.v-ce.v}),K=0;K<D.length;K++)B=D[K].k.charAt(0),Q.charAt(Q.length-1)!==B&&(Q+=B);return Q!=="DGBEFHACIJK"}});u({target:"Array",proto:!0,forced:L||!$||!X||!Y},{sort:function(H){H!==void 0&&v(H);var B=d(this);if(Y)return H===void 0?z(B):z(B,H);var G,K,Q=[],ce=g(B);for(K=0;K<ce;K++)K in B&&U(Q,B[K]);for(x(Q,function(ue){return function(de,ye){return ye===void 0?-1:de===void 0?1:ue!==void 0?+ue(de,ye)||0:_(de)>_(ye)?1:-1}}(H)),G=Q.length,K=0;K<G;)B[K]=Q[K++];for(;K<ce;)delete B[K++];return B}})},function(n,a,r){var u=r(114),c=Math.floor,v=function(_,b){var x=_.length,A=c(x/2);return x<8?d(_,b):g(_,v(u(_,0,A),b),v(u(_,A),b),b)},d=function(_,b){for(var x,A,M=_.length,O=1;O<M;){for(A=O,x=_[O];A&&b(_[A-1],x)>0;)_[A]=_[--A];A!==O++&&(_[A]=x)}return _},g=function(_,b,x,A){for(var M=b.length,O=x.length,S=0,j=0;S<M||j<O;)_[S+j]=S<M&&j<O?A(b[S],x[j])<=0?b[S++]:x[j++]:S<M?b[S++]:x[j++];return _};n.exports=v},function(n,a,r){var u=r(55).match(/firefox\/(\d+)/i);n.exports=!!u&&+u[1]},function(n,a,r){var u=r(55);n.exports=/MSIE|Trident/.test(u)},function(n,a,r){var u=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!u&&+u[1]},function(n,a,r){var u=r(7),c=r(159),v=u.TypeError;n.exports=function(d){if(c(d))throw v("The method doesn't accept regular expressions");return d}},function(n,a,r){var u=r(28)("match");n.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[u]=!1,"/./"[c](v)}catch{}}return!1}},function(n,a,r){r(16)({target:"Number",stat:!0},{isNaN:function(u){return u!=u}})},function(n,a,r){var u=r(73).PROPER,c=r(18),v=r(162);n.exports=function(d){return c(function(){return!!v[d]()||"​᠎"[d]()!=="​᠎"||u&&v[d].name!==d})}},function(n,a,r){var u=r(15),c=r(40),v=Math.floor,d=u("".charAt),g=u("".replace),_=u("".slice),b=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x=/\$([$&'`]|\d{1,2})/g;n.exports=function(A,M,O,S,j,D){var z=O+A.length,U=S.length,L=x;return j!==void 0&&(j=c(j),L=b),g(D,L,function($,X){var Y;switch(d(X,0)){case"$":return"$";case"&":return A;case"`":return _(M,0,O);case"'":return _(M,z);case"<":Y=j[_(X,1,-1)];break;default:var H=+X;if(H===0)return $;if(H>U){var B=v(H/10);return B===0?$:B<=U?S[B-1]===void 0?d(X,1):S[B-1]+d(X,1):$}Y=S[H-1]}return Y===void 0?"":Y})}},function(n,a,r){var u=r(36),c=r(15),v=r(34),d=r(18),g=r(77),_=r(112),b=r(84),x=r(40),A=r(85),M=Object.assign,O=Object.defineProperty,S=c([].concat);n.exports=!M||d(function(){if(u&&M({b:1},M(O({},"a",{enumerable:!0,get:function(){O(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var j={},D={},z=Symbol(),U="abcdefghijklmnopqrst";return j[z]=7,U.split("").forEach(function(L){D[L]=L}),M({},j)[z]!=7||g(M({},D)).join("")!=U})?function(j,D){for(var z=x(j),U=arguments.length,L=1,$=_.f,X=b.f;U>L;)for(var Y,H=A(arguments[L++]),B=$?S(g(H),$(H)):g(H),G=B.length,K=0;G>K;)Y=B[K++],u&&!v(X,H,Y)||(z[Y]=H[Y]);return z}:M},function(n,a,r){var u=r(7),c=r(15),v=r(56),d=r(33),g=r(35),_=r(98),b=u.Function,x=c([].concat),A=c([].join),M={},O=function(S,j,D){if(!g(M,j)){for(var z=[],U=0;U<j;U++)z[U]="a["+U+"]";M[j]=b("C,a","return new C("+A(z,",")+")")}return M[j](S,D)};n.exports=b.bind||function(S){var j=v(this),D=j.prototype,z=_(arguments,1),U=function(){var L=x(z,_(arguments));return this instanceof U?O(j,L.length,L):j.apply(S,L)};return d(D)&&(U.prototype=D),U}},function(n,a,r){var u=r(35);n.exports=function(c){return c!==void 0&&(u(c,"value")||u(c,"writable"))}},function(n,a,r){var u=r(15),c=r(44),v=r(39),d=/"/g,g=u("".replace);n.exports=function(_,b,x,A){var M=v(c(_)),O="<"+b;return x!==""&&(O+=" "+x+'="'+g(v(A),d,"&quot;")+'"'),O+">"+M+"</"+b+">"}},function(n,a,r){var u=r(18);n.exports=function(c){return u(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(n,a,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,a,r){var u,c,v,d,g=r(16),_=r(71),b=r(7),x=r(46),A=r(34),M=r(209),O=r(42),S=r(149),j=r(102),D=r(78),z=r(150),U=r(56),L=r(30),$=r(33),X=r(119),Y=r(92),H=r(117),B=r(120),G=r(164),K=r(168).set,Q=r(210),ce=r(213),ue=r(214),de=r(170),ye=r(215),we=r(58),me=r(95),He=r(28),tt=r(216),Ot=r(128),Je=r(70),Yt=He("species"),Kt="Promise",Ft=we.getterFor(Kt),An=we.set,Be=we.getterFor(Kt),Se=M&&M.prototype,Ce=M,Xe=Se,_t=b.TypeError,pt=b.document,bt=b.process,nn=de.f,on=nn,Xt=!!(pt&&pt.createEvent&&b.dispatchEvent),nt=L(b.PromiseRejectionEvent),fn="unhandledrejection",$e=!1,bn=me(Kt,function(){var Ie=Y(Ce),lt=Ie!==String(Ce);if(!lt&&Je===66||_&&!Xe.finally)return!0;if(Je>=51&&/native code/.test(Ie))return!1;var tn=new Ce(function(Nn){Nn(1)}),Zt=function(Nn){Nn(function(){},function(){})};return(tn.constructor={})[Yt]=Zt,!($e=tn.then(function(){})instanceof Zt)||!lt&&tt&&!nt}),Zn=bn||!B(function(Ie){Ce.all(Ie).catch(function(){})}),ie=function(Ie){var lt;return!(!$(Ie)||!L(lt=Ie.then))&&lt},Jn=function(Ie,lt){if(!Ie.notified){Ie.notified=!0;var tn=Ie.reactions;Q(function(){for(var Zt=Ie.value,Nn=Ie.state==1,Er=0;tn.length>Er;){var li,Si,zo,ti=tn[Er++],Tn=Nn?ti.ok:ti.fail,$n=ti.resolve,Hn=ti.reject,lr=ti.domain;try{Tn?(Nn||(Ie.rejection===2&&Fn(Ie),Ie.rejection=1),Tn===!0?li=Zt:(lr&&lr.enter(),li=Tn(Zt),lr&&(lr.exit(),zo=!0)),li===ti.promise?Hn(_t("Promise-chain cycle")):(Si=ie(li))?A(Si,li,$n,Hn):$n(li)):Hn(Zt)}catch(eo){lr&&!zo&&lr.exit(),Hn(eo)}}Ie.reactions=[],Ie.notified=!1,lt&&!Ie.rejection&&Wr(Ie)})}},kr=function(Ie,lt,tn){var Zt,Nn;Xt?((Zt=pt.createEvent("Event")).promise=lt,Zt.reason=tn,Zt.initEvent(Ie,!1,!0),b.dispatchEvent(Zt)):Zt={promise:lt,reason:tn},!nt&&(Nn=b["on"+Ie])?Nn(Zt):Ie===fn&&ue("Unhandled promise rejection",tn)},Wr=function(Ie){A(K,b,function(){var lt,tn=Ie.facade,Zt=Ie.value;if(uo(Ie)&&(lt=ye(function(){Ot?bt.emit("unhandledRejection",Zt,tn):kr(fn,tn,Zt)}),Ie.rejection=Ot||uo(Ie)?2:1,lt.error))throw lt.value})},uo=function(Ie){return Ie.rejection!==1&&!Ie.parent},Fn=function(Ie){A(K,b,function(){var lt=Ie.facade;Ot?bt.emit("rejectionHandled",lt):kr("rejectionhandled",lt,Ie.value)})},yo=function(Ie,lt,tn){return function(Zt){Ie(lt,Zt,tn)}},Ae=function(Ie,lt,tn){Ie.done||(Ie.done=!0,tn&&(Ie=tn),Ie.value=lt,Ie.state=2,Jn(Ie,!0))},Ye=function(Ie,lt,tn){if(!Ie.done){Ie.done=!0,tn&&(Ie=tn);try{if(Ie.facade===lt)throw _t("Promise can't be resolved itself");var Zt=ie(lt);Zt?Q(function(){var Nn={done:!1};try{A(Zt,lt,yo(Ye,Nn,Ie),yo(Ae,Nn,Ie))}catch(Er){Ae(Nn,Er,Ie)}}):(Ie.value=lt,Ie.state=1,Jn(Ie,!1))}catch(Nn){Ae({done:!1},Nn,Ie)}}};if(bn&&(Xe=(Ce=function(Ie){X(this,Xe),U(Ie),A(u,this);var lt=Ft(this);try{Ie(yo(Ye,lt),yo(Ae,lt))}catch(tn){Ae(lt,tn)}}).prototype,(u=function(Ie){An(this,{type:Kt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=S(Xe,{then:function(Ie,lt){var tn=Be(this),Zt=tn.reactions,Nn=nn(G(this,Ce));return Nn.ok=!L(Ie)||Ie,Nn.fail=L(lt)&&lt,Nn.domain=Ot?bt.domain:void 0,tn.parent=!0,Zt[Zt.length]=Nn,tn.state!=0&&Jn(tn,!1),Nn.promise},catch:function(Ie){return this.then(void 0,Ie)}}),c=function(){var Ie=new u,lt=Ft(Ie);this.promise=Ie,this.resolve=yo(Ye,lt),this.reject=yo(Ae,lt)},de.f=nn=function(Ie){return Ie===Ce||Ie===v?new c(Ie):on(Ie)},!_&&L(M)&&Se!==Object.prototype)){d=Se.then,$e||(O(Se,"then",function(Ie,lt){var tn=this;return new Ce(function(Zt,Nn){A(d,tn,Zt,Nn)}).then(Ie,lt)},{unsafe:!0}),O(Se,"catch",Xe.catch,{unsafe:!0}));try{delete Se.constructor}catch{}j&&j(Se,Xe)}g({global:!0,wrap:!0,forced:bn},{Promise:Ce}),D(Ce,Kt,!1,!0),z(Kt),v=x(Kt),g({target:Kt,stat:!0,forced:bn},{reject:function(Ie){var lt=nn(this);return A(lt.reject,void 0,Ie),lt.promise}}),g({target:Kt,stat:!0,forced:_||bn},{resolve:function(Ie){return ce(_&&this===v?Ce:this,Ie)}}),g({target:Kt,stat:!0,forced:Zn},{all:function(Ie){var lt=this,tn=nn(lt),Zt=tn.resolve,Nn=tn.reject,Er=ye(function(){var li=U(lt.resolve),Si=[],zo=0,ti=1;H(Ie,function(Tn){var $n=zo++,Hn=!1;ti++,A(li,lt,Tn).then(function(lr){Hn||(Hn=!0,Si[$n]=lr,--ti||Zt(Si))},Nn)}),--ti||Zt(Si)});return Er.error&&Nn(Er.value),tn.promise},race:function(Ie){var lt=this,tn=nn(lt),Zt=tn.reject,Nn=ye(function(){var Er=U(lt.resolve);H(Ie,function(li){A(Er,lt,li).then(tn.resolve,Zt)})});return Nn.error&&Zt(Nn.value),tn.promise}})},function(n,a,r){var u=r(7);n.exports=u.Promise},function(n,a,r){var u,c,v,d,g,_,b,x,A=r(7),M=r(64),O=r(50).f,S=r(168).set,j=r(169),D=r(211),z=r(212),U=r(128),L=A.MutationObserver||A.WebKitMutationObserver,$=A.document,X=A.process,Y=A.Promise,H=O(A,"queueMicrotask"),B=H&&H.value;B||(u=function(){var G,K;for(U&&(G=X.domain)&&G.exit();c;){K=c.fn,c=c.next;try{K()}catch(Q){throw c?d():v=void 0,Q}}v=void 0,G&&G.enter()},j||U||z||!L||!$?!D&&Y&&Y.resolve?((b=Y.resolve(void 0)).constructor=Y,x=M(b.then,b),d=function(){x(u)}):U?d=function(){X.nextTick(u)}:(S=M(S,A),d=function(){S(u)}):(g=!0,_=$.createTextNode(""),new L(u).observe(_,{characterData:!0}),d=function(){_.data=g=!g})),n.exports=B||function(G){var K={fn:G,next:void 0};v&&(v.next=K),c||(c=K,d()),v=K}},function(n,a,r){var u=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(u)&&c.Pebble!==void 0},function(n,a,r){var u=r(55);n.exports=/web0s(?!.*chrome)/i.test(u)},function(n,a,r){var u=r(32),c=r(33),v=r(170);n.exports=function(d,g){if(u(d),c(g)&&g.constructor===d)return g;var _=v.f(d);return(0,_.resolve)(g),_.promise}},function(n,a,r){var u=r(7);n.exports=function(c,v){var d=u.console;d&&d.error&&(arguments.length==1?d.error(c):d.error(c,v))}},function(n,a){n.exports=function(r){try{return{error:!1,value:r()}}catch(u){return{error:!0,value:u}}}},function(n,a){n.exports=typeof window=="object"},function(n,a,r){var u=r(40),c=r(75),v=r(45);n.exports=function(d){for(var g=u(this),_=v(g),b=arguments.length,x=c(b>1?arguments[1]:void 0,_),A=b>2?arguments[2]:void 0,M=A===void 0?_:c(A,_);M>x;)g[x++]=d;return g}},function(n,a,r){var u=r(16),c=r(7),v=r(15),d=r(59),g=r(160),_=r(219),b=r(18),x=c.RangeError,A=c.String,M=Math.floor,O=v(_),S=v("".slice),j=v(1 .toFixed),D=function($,X,Y){return X===0?Y:X%2==1?D($,X-1,Y*$):D($*$,X/2,Y)},z=function($,X,Y){for(var H=-1,B=Y;++H<6;)B+=X*$[H],$[H]=B%1e7,B=M(B/1e7)},U=function($,X){for(var Y=6,H=0;--Y>=0;)H+=$[Y],$[Y]=M(H/X),H=H%X*1e7},L=function($){for(var X=6,Y="";--X>=0;)if(Y!==""||X===0||$[X]!==0){var H=A($[X]);Y=Y===""?H:Y+O("0",7-H.length)+H}return Y};u({target:"Number",proto:!0,forced:b(function(){return j(8e-5,3)!=="0.000"||j(.9,0)!=="1"||j(1.255,2)!=="1.25"||j(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!b(function(){j({})})},{toFixed:function($){var X,Y,H,B,G=g(this),K=d($),Q=[0,0,0,0,0,0],ce="",ue="0";if(K<0||K>20)throw x("Incorrect fraction digits");if(G!=G)return"NaN";if(G<=-1e21||G>=1e21)return A(G);if(G<0&&(ce="-",G=-G),G>1e-21)if(Y=(X=function(de){for(var ye=0,we=de;we>=4096;)ye+=12,we/=4096;for(;we>=2;)ye+=1,we/=2;return ye}(G*D(2,69,1))-69)<0?G*D(2,-X,1):G/D(2,X,1),Y*=4503599627370496,(X=52-X)>0){for(z(Q,0,Y),H=K;H>=7;)z(Q,1e7,0),H-=7;for(z(Q,D(10,H,1),0),H=X-1;H>=23;)U(Q,1<<23),H-=23;U(Q,1<<H),z(Q,1,1),U(Q,2),ue=L(Q)}else z(Q,0,Y),z(Q,1<<-X,0),ue=L(Q)+O("0",K);return ue=K>0?ce+((B=ue.length)<=K?"0."+O("0",K-B)+ue:S(ue,0,B-K)+"."+S(ue,B-K)):ce+ue}})},function(n,a,r){var u=r(7),c=r(59),v=r(39),d=r(44),g=u.RangeError;n.exports=function(_){var b=v(d(this)),x="",A=c(_);if(A<0||A==1/0)throw g("Wrong number of repetitions");for(;A>0;(A>>>=1)&&(b+=b))1&A&&(x+=b);return x}},function(n,a,r){var u=r(36),c=r(15),v=r(77),d=r(41),g=c(r(84).f),_=c([].push),b=function(x){return function(A){for(var M,O=d(A),S=v(O),j=S.length,D=0,z=[];j>D;)M=S[D++],u&&!g(O,M)||_(z,x?[M,O[M]]:O[M]);return z}};n.exports={entries:b(!0),values:b(!1)}},function(n,a){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,a,r){r.r(a),r.d(a,"observer",function(){return _s}),r.d(a,"LogicFlow",function(){return _1}),r.d(a,"h",function(){return $e.g}),r.d(a,"LogicFlowUtil",function(){return u}),r.d(a,"BaseNode",function(){return wf}),r.d(a,"RectNode",function(){return c0}),r.d(a,"CircleNode",function(){return h0}),r.d(a,"PolygonNode",function(){return _0}),r.d(a,"DiamondNode",function(){return O0}),r.d(a,"EllipseNode",function(){return M0}),r.d(a,"TextNode",function(){return R0}),r.d(a,"HtmlNode",function(){return j0}),r.d(a,"BaseEdge",function(){return gm}),r.d(a,"LineEdge",function(){return Y0}),r.d(a,"PolylineEdge",function(){return e1}),r.d(a,"BezierEdge",function(){return o1}),r.d(a,"Arrow",function(){return ED}),r.d(a,"BaseEdgeModel",function(){return Td}),r.d(a,"BezierEdgeModel",function(){return mb}),r.d(a,"LineEdgeModel",function(){return Qs}),r.d(a,"PolylineEdgeModel",function(){return Aa}),r.d(a,"BaseNodeModel",function(){return bf}),r.d(a,"CircleNodeModel",function(){return Eb}),r.d(a,"DiamondNodeModel",function(){return Tb}),r.d(a,"EllipseNodeModel",function(){return Rb}),r.d(a,"PolygonNodeModel",function(){return Lb}),r.d(a,"RectNodeModel",function(){return Ub}),r.d(a,"TextNodeModel",function(){return zb}),r.d(a,"HtmlNodeModel",function(){return qb}),r.d(a,"EditConfigModel",function(){return od}),r.d(a,"GraphModel",function(){return a2}),r.d(a,"SnaplineModel",function(){return GO}),r.d(a,"Keyboard",function(){return kS}),r.d(a,"get",function(){return k2}),r.d(a,"defaults",function(){return R2}),r.d(a,"ElementState",function(){return Yr}),r.d(a,"ModelType",function(){return Sr}),r.d(a,"ElementType",function(){return so}),r.d(a,"EventType",function(){return Cn}),r.d(a,"formateAnchorConnectValidateData",function(){return ql});var u={};r.r(u),r.d(u,"createUuid",function(){return na}),r.d(u,"refreshGraphId",function(){return Zc}),r.d(u,"StepDrag",function(){return ge}),r.d(u,"setupEdgeModel",function(){return Lt}),r.d(u,"isBboxOverLapping",function(){return Nt}),r.d(u,"filterRepeatPoints",function(){return ct}),r.d(u,"getSimplePolyline",function(){return Ht}),r.d(u,"getExpandedBBox",function(){return Ut}),r.d(u,"pointDirection",function(){return Ct}),r.d(u,"getExpandedBBoxPoint",function(){return Et}),r.d(u,"mergeBBox",function(){return Ke}),r.d(u,"getBBoxOfPoints",function(){return st}),r.d(u,"getPointsFromBBox",function(){return It}),r.d(u,"isPointOutsideBBox",function(){return Jt}),r.d(u,"getBBoxXCrossPoints",function(){return At}),r.d(u,"getBBoxYCrossPoints",function(){return rn}),r.d(u,"getBBoxCrossPointsByPoint",function(){return Mt}),r.d(u,"estimateDistance",function(){return Wt}),r.d(u,"costByPoints",function(){return Tt}),r.d(u,"heuristicCostEstimate",function(){return qt}),r.d(u,"rebuildPath",function(){return kn}),r.d(u,"removeClosePointFromOpenList",function(){return Vn}),r.d(u,"isSegmentsIntersected",function(){return Dt}),r.d(u,"isSegmentCrossingBBox",function(){return kt}),r.d(u,"getNextNeighborPoints",function(){return xt}),r.d(u,"pathFinder",function(){return jn}),r.d(u,"getBoxByOriginNode",function(){return er}),r.d(u,"pointFilter",function(){return pn}),r.d(u,"getPolylinePoints",function(){return ur}),r.d(u,"getLongestEdge",function(){return Gn}),r.d(u,"isSegmentsInNode",function(){return nr}),r.d(u,"isSegmentsCrossNode",function(){return _r}),r.d(u,"getCrossPointInRect",function(){return Do}),r.d(u,"segmentDirection",function(){return ko}),r.d(u,"points2PointsList",function(){return tr}),r.d(u,"getSimplePoints",function(){return Xo}),r.d(u,"getBytesLength",function(){return jo}),r.d(u,"getTextWidth",function(){return ii}),r.d(u,"getAppendAttributes",function(){return di}),r.d(u,"getBezierControlPoints",function(){return qo}),r.d(u,"getBezierPoints",function(){return ho}),r.d(u,"getEndTangent",function(){return pi}),r.d(u,"getClosestPointOfPolyline",function(){return Ar}),r.d(u,"pickEdgeConfig",function(){return Dn}),r.d(u,"twoPointDistance",function(){return hr}),r.d(u,"createEdgeGenerator",function(){return Kn}),r.d(u,"snapToGrid",function(){return rl}),r.d(u,"getGridOffset",function(){return Xc}),r.d(u,"sampleCubic",function(){return Co}),r.d(u,"getThetaOfVector",function(){return kd}),r.d(u,"degrees",function(){return jp}),r.d(u,"Vector",function(){return We}),r.d(u,"Point",function(){return p}),r.d(u,"Matrix",function(){return Tu}),r.d(u,"RotateMatrix",function(){return ec}),r.d(u,"ScaleMatrix",function(){return lm}),r.d(u,"TranslateMatrix",function(){return Rd});var c=r(1),v=r(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var d=r(43),g=Object(d.b)("observerBatching");function _(i){i()}var b=!1;function x(){return b}function A(i){return Object(c.t)(i)}var M,O=1e4,S=new Set;function j(){M===void 0&&(M=setTimeout(D,1e4))}function D(){M=void 0;var i=Date.now();S.forEach(function(o){var l=o.current;l&&i>=l.cleanAt&&(l.reaction.dispose(),o.current=null,S.delete(o))}),S.size>0&&j()}var z=!1,U=[],L={};function $(i){return"observer"+i}function X(i,o,l){o===void 0&&(o="observed"),l===void 0&&(l=L),x();var s,h=function(N){return function(){z?U.push(N):N()}}((l.useForceUpdate||d.d)()),f=v.d.useRef(null);if(!f.current){var m=new c.c($(o),function(){w.mounted?h():(m.dispose(),f.current=null)}),w=function(N){return{cleanAt:Date.now()+O,reaction:N}}(m);f.current=w,s=f,S.add(s),j()}var T=f.current.reaction;return v.d.useDebugValue(T,A),v.d.useEffect(function(){var N;return N=f,S.delete(N),f.current?f.current.mounted=!0:(f.current={reaction:new c.c($(o),function(){h()}),cleanAt:1/0},h()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(N){z=!0,U=[];try{var F=N();z=!1;var Z=U.length>0?U:void 0;return v.d.useLayoutEffect(function(){Z&&Z.forEach(function(te){return te()})},[Z]),F}finally{z=!1}}(function(){var N,F;if(T.track(function(){try{N=i()}catch(Z){F=Z}}),F)throw F;return N})}var Y=function(){return Y=Object.assign||function(i){for(var o,l=1,s=arguments.length;l<s;l++)for(var h in o=arguments[l])Object.prototype.hasOwnProperty.call(o,h)&&(i[h]=o[h]);return i},Y.apply(this,arguments)};function H(i,o){var l,s,h,f=Y({forwardRef:!1},o),m=i.displayName||i.name,w=function(T,N){return X(function(){return i(T,N)},m)};return w.displayName=m,l=f.forwardRef?Object(v.f)(Object(v.e)(w)):Object(v.f)(w),s=i,h=l,Object.keys(s).forEach(function(T){B[T]||Object.defineProperty(h,T,Object.getOwnPropertyDescriptor(s,T))}),l.displayName=m,l}var B={$$typeof:!0,render:!0,compare:!0,type:!0};function G(i){var o=i.children,l=i.render,s=o||l;return typeof s!="function"?null:X(s)}function K(i,o,l,s,h){var f=o==="children"?"render":"children",m=typeof i[o]=="function",w=typeof i[f]=="function";return m&&w?new Error("MobX Observer: Do not use children and render in the same time in`"+l):m||w?null:new Error("Invalid prop `"+h+"` of type `"+typeof i[o]+"` supplied to `"+l+"`, expected `function`.")}G.propTypes={children:K,render:K},G.displayName="Observer";var Q;(Q=v.g)||(Q=_),Object(c.n)({reactionScheduler:Q}),Object(d.a)()[g]=!0;var ce=0,ue={};function de(i){return ue[i]||(ue[i]=function(o){if(typeof Symbol=="function")return Symbol(o);var l="__$mobx-react "+o+" ("+ce+")";return ce++,l}(i)),ue[i]}function ye(i,o){if(we(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),s=Object.keys(o);if(l.length!==s.length)return!1;for(var h=0;h<l.length;h++)if(!Object.hasOwnProperty.call(o,l[h])||!we(i[l[h]],o[l[h]]))return!1;return!0}function we(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o}function me(i,o,l){Object.hasOwnProperty.call(i,o)?i[o]=l:Object.defineProperty(i,o,{enumerable:!1,configurable:!0,writable:!0,value:l})}var He=de("patchMixins"),tt=de("patchedDefinition");function Ot(i,o){for(var l=this,s=arguments.length,h=new Array(s>2?s-2:0),f=2;f<s;f++)h[f-2]=arguments[f];o.locks++;try{var m;return i!=null&&(m=i.apply(this,h)),m}finally{o.locks--,o.locks===0&&o.methods.forEach(function(w){w.apply(l,h)})}}function Je(i,o){return function(){for(var l=arguments.length,s=new Array(l),h=0;h<l;h++)s[h]=arguments[h];Ot.call.apply(Ot,[this,i,o].concat(s))}}function Yt(i,o,l){var s=function(w,T){var N=w[He]=w[He]||{},F=N[T]=N[T]||{};return F.locks=F.locks||0,F.methods=F.methods||[],F}(i,o);s.methods.indexOf(l)<0&&s.methods.push(l);var h=Object.getOwnPropertyDescriptor(i,o);if(!h||!h[tt]){var f=i[o],m=Kt(i,o,h?h.enumerable:void 0,s,f);Object.defineProperty(i,o,m)}}function Kt(i,o,l,s,h){var f,m=Je(h,s);return(f={})[tt]=!0,f.get=function(){return m},f.set=function(w){if(this===i)m=Je(w,s);else{var T=Kt(this,o,l,s,w);Object.defineProperty(this,o,T)}},f.configurable=!0,f.enumerable=l,f}var Ft=c.a||"$mobx",An=de("isMobXReactObserver"),Be=de("isUnmounted"),Se=de("skipRender"),Ce=de("isForcingUpdate");function Xe(i){var o=i.prototype;if(i[An]?_t(o):i[An]=!0,o.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(i.__proto__!==v.b)if(o.shouldComponentUpdate){if(o.shouldComponentUpdate!==bt)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else o.shouldComponentUpdate=bt;nn(o,"props"),nn(o,"state");var l=o.render;return o.render=function(){return pt.call(this,l)},Yt(o,"componentWillUnmount",function(){var s;(s=this.render[Ft])===null||s===void 0||s.dispose(),this[Be]=!0,!this.render[Ft]&&_t(this)}),i}function _t(i){return i.displayName||i.name||i.constructor&&(i.constructor.displayName||i.constructor.name)||"<component>"}function pt(i){var o=this;me(this,Se,!1),me(this,Ce,!1);var l=_t(this),s=i.bind(this),h=!1,f=new c.c(l+".render()",function(){if(!h&&(h=!0,o[Be]!==!0)){var w=!0;try{me(o,Ce,!0),o[Se]||v.a.prototype.forceUpdate.call(o),w=!1}finally{me(o,Ce,!1),w&&f.dispose()}}});function m(){h=!1;var w=void 0,T=void 0;if(f.track(function(){try{T=Object(c.d)(!1,s)}catch(N){w=N}}),w)throw w;return T}return f.reactComponent=this,m[Ft]=f,this.render=m,m.call(this)}function bt(i,o){return this.state!==o||!ye(this.props,i)}function nn(i,o){var l=de("reactProp_"+o+"_valueHolder"),s=de("reactProp_"+o+"_atomHolder");function h(){return this[s]||me(this,s,Object(c.o)("reactive "+o)),this[s]}Object.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){var f=!1;return c.f&&c.e&&(f=Object(c.f)(!0)),h.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(f),this[l]},set:function(f){this[Ce]||ye(this[l],f)?me(this,l,f):(me(this,l,f),me(this,Se,!0),h.call(this).reportChanged(),me(this,Se,!1))}})}var on=typeof Symbol=="function"&&Symbol.for,Xt=on?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(i){return null}).$$typeof,nt=on?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(i){return null}).$$typeof;function fn(i){if(i.isMobxInjector,nt&&i.$$typeof===nt)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Xt&&i.$$typeof===Xt){var o=i.render;if(typeof o!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var l=arguments;return Object(v.c)(G,null,function(){return o.apply(void 0,l)})})}return typeof i!="function"||i.prototype&&i.prototype.render||i.isReactClass||Object.prototype.isPrototypeOf.call(v.a,i)?Xe(i):H(i)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var $e=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var bn=function(i,o){for(var l=-1,s=i==null?0:i.length,h=Array(s);++l<s;)h[l]=o(i[l],l,i);return h},Zn=function(){this.__data__=[],this.size=0},ie=function(i,o){return i===o||i!=i&&o!=o},Jn=function(i,o){for(var l=i.length;l--;)if(ie(i[l][0],o))return l;return-1},kr=Array.prototype.splice,Wr=function(i){var o=this.__data__,l=Jn(o,i);return!(l<0)&&(l==o.length-1?o.pop():kr.call(o,l,1),--this.size,!0)},uo=function(i){var o=this.__data__,l=Jn(o,i);return l<0?void 0:o[l][1]},Fn=function(i){return Jn(this.__data__,i)>-1},yo=function(i,o){var l=this.__data__,s=Jn(l,i);return s<0?(++this.size,l.push([i,o])):l[s][1]=o,this};function Ae(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}Ae.prototype.clear=Zn,Ae.prototype.delete=Wr,Ae.prototype.get=uo,Ae.prototype.has=Fn,Ae.prototype.set=yo;var Ye=Ae,Ie=function(){this.__data__=new Ye,this.size=0},lt=function(i){var o=this.__data__,l=o.delete(i);return this.size=o.size,l},tn=function(i){return this.__data__.get(i)},Zt=function(i){return this.__data__.has(i)},Nn=r(31),Er=Nn.a.Symbol,li=Object.prototype,Si=li.hasOwnProperty,zo=li.toString,ti=Er?Er.toStringTag:void 0,Tn=function(i){var o=Si.call(i,ti),l=i[ti];try{i[ti]=void 0;var s=!0}catch{}var h=zo.call(i);return s&&(o?i[ti]=l:delete i[ti]),h},$n=Object.prototype.toString,Hn=function(i){return $n.call(i)},lr=Er?Er.toStringTag:void 0,eo=function(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":lr&&lr in Object(i)?Tn(i):Hn(i)},jr=function(i){var o=typeof i;return i!=null&&(o=="object"||o=="function")},ml,Ha=function(i){if(!jr(i))return!1;var o=eo(i);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"},yl=Nn.a["__core-js_shared__"],au=(ml=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||""))?"Symbol(src)_1."+ml:"",np=function(i){return!!au&&au in i},bc=Function.prototype.toString,va=function(i){if(i!=null){try{return bc.call(i)}catch{}try{return i+""}catch{}}return""},Bu=/^\[object .+?Constructor\]$/,Pn=Function.prototype,Bf=Object.prototype,go=Pn.toString,wc=Bf.hasOwnProperty,Zi=RegExp("^"+go.call(wc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),la=function(i){return!(!jr(i)||np(i))&&(Ha(i)?Zi:Bu).test(va(i))},Rs=function(i,o){return i==null?void 0:i[o]},Ca=function(i,o){var l=Rs(i,o);return la(l)?l:void 0},ma=Ca(Nn.a,"Map"),Da=Ca(Object,"create"),Ec=function(){this.__data__=Da?Da(null):{},this.size=0},Oc=function(i){var o=this.has(i)&&delete this.__data__[i];return this.size-=o?1:0,o},Uf=Object.prototype.hasOwnProperty,Uu=function(i){var o=this.__data__;if(Da){var l=o[i];return l==="__lodash_hash_undefined__"?void 0:l}return Uf.call(o,i)?o[i]:void 0},Vf=Object.prototype.hasOwnProperty,Sc=function(i){var o=this.__data__;return Da?o[i]!==void 0:Vf.call(o,i)},rp=function(i,o){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=Da&&o===void 0?"__lodash_hash_undefined__":o,this};function jl(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}jl.prototype.clear=Ec,jl.prototype.delete=Oc,jl.prototype.get=Uu,jl.prototype.has=Sc,jl.prototype.set=rp;var Gf=jl,gl=function(){this.size=0,this.__data__={hash:new Gf,map:new(ma||Ye),string:new Gf}},xc=function(i){var o=typeof i;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?i!=="__proto__":i===null},Ns=function(i,o){var l=i.__data__;return xc(o)?l[typeof o=="string"?"string":"hash"]:l.map},Ac=function(i){var o=Ns(this,i).delete(i);return this.size-=o?1:0,o},Tc=function(i){return Ns(this,i).get(i)},op=function(i){return Ns(this,i).has(i)},Wf=function(i,o){var l=Ns(this,i),s=l.size;return l.set(i,o),this.size+=l.size==s?0:1,this};function qr(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}qr.prototype.clear=gl,qr.prototype.delete=Ac,qr.prototype.get=Tc,qr.prototype.has=op,qr.prototype.set=Wf;var zr=qr,zf=function(i,o){var l=this.__data__;if(l instanceof Ye){var s=l.__data__;if(!ma||s.length<199)return s.push([i,o]),this.size=++l.size,this;l=this.__data__=new zr(s)}return l.set(i,o),this.size=l.size,this};function lu(i){var o=this.__data__=new Ye(i);this.size=o.size}lu.prototype.clear=Ie,lu.prototype.delete=lt,lu.prototype.get=tn,lu.prototype.has=Zt,lu.prototype.set=zf;var ya=lu,Cs=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},Hf=function(i){return this.__data__.has(i)};function Fo(i){var o=-1,l=i==null?0:i.length;for(this.__data__=new zr;++o<l;)this.add(i[o])}Fo.prototype.add=Fo.prototype.push=Cs,Fo.prototype.has=Hf;var Il=Fo,Ll=function(i,o){for(var l=-1,s=i==null?0:i.length;++l<s;)if(o(i[l],l,i))return!0;return!1},Ds=function(i,o){return i.has(o)},uu=function(i,o,l,s,h,f){var m=1&l,w=i.length,T=o.length;if(w!=T&&!(m&&T>w))return!1;var N=f.get(i),F=f.get(o);if(N&&F)return N==o&&F==i;var Z=-1,te=!0,_e=2&l?new Il:void 0;for(f.set(i,o),f.set(o,i);++Z<w;){var Me=i[Z],je=o[Z];if(s)var at=m?s(je,Me,Z,o,i,f):s(Me,je,Z,i,o,f);if(at!==void 0){if(at)continue;te=!1;break}if(_e){if(!Ll(o,function(it,yt){if(!Ds(_e,yt)&&(Me===it||h(Me,it,l,s,f)))return _e.push(yt)})){te=!1;break}}else if(Me!==je&&!h(Me,je,l,s,f)){te=!1;break}}return f.delete(i),f.delete(o),te},xi=Nn.a.Uint8Array,Mc=function(i){var o=-1,l=Array(i.size);return i.forEach(function(s,h){l[++o]=[h,s]}),l},Xf=function(i){var o=-1,l=Array(i.size);return i.forEach(function(s){l[++o]=s}),l},kc=Er?Er.prototype:void 0,$i=kc?kc.valueOf:void 0,ui=function(i,o,l,s,h,f,m){switch(l){case"[object DataView]":if(i.byteLength!=o.byteLength||i.byteOffset!=o.byteOffset)return!1;i=i.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=o.byteLength||!f(new xi(i),new xi(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ie(+i,+o);case"[object Error]":return i.name==o.name&&i.message==o.message;case"[object RegExp]":case"[object String]":return i==o+"";case"[object Map]":var w=Mc;case"[object Set]":var T=1&s;if(w||(w=Xf),i.size!=o.size&&!T)return!1;var N=m.get(i);if(N)return N==o;s|=2,m.set(i,o);var F=uu(w(i),w(o),s,h,f,m);return m.delete(i),F;case"[object Symbol]":if($i)return $i.call(i)==$i.call(o)}return!1},ga=function(i,o){for(var l=-1,s=o.length,h=i.length;++l<s;)i[h+l]=o[l];return i},io=Array.isArray,ip=function(i,o,l){var s=o(i);return io(i)?s:ga(s,l(i))},Bi=function(i,o){for(var l=-1,s=i==null?0:i.length,h=0,f=[];++l<s;){var m=i[l];o(m,l,i)&&(f[h++]=m)}return f},qf=function(){return[]},Yf=Object.prototype.propertyIsEnumerable,Ui=Object.getOwnPropertySymbols,Ji=Ui?function(i){return i==null?[]:(i=Object(i),Bi(Ui(i),function(o){return Yf.call(i,o)}))}:qf,Pc=function(i,o){for(var l=-1,s=Array(i);++l<i;)s[l]=o(l);return s},$r=function(i){return i!=null&&typeof i=="object"},si=function(i){return $r(i)&&eo(i)=="[object Arguments]"},js=Object.prototype,Kf=js.hasOwnProperty,Rc=js.propertyIsEnumerable,Is=si(function(){return arguments}())?si:function(i){return $r(i)&&Kf.call(i,"callee")&&!Rc.call(i,"callee")},Xa=Is,Vi=r(48),su=/^(?:0|[1-9]\d*)$/,Qi=function(i,o){var l=typeof i;return!!(o=o??9007199254740991)&&(l=="number"||l!="symbol"&&su.test(i))&&i>-1&&i%1==0&&i<o},_a=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991},Pr={};Pr["[object Float32Array]"]=Pr["[object Float64Array]"]=Pr["[object Int8Array]"]=Pr["[object Int16Array]"]=Pr["[object Int32Array]"]=Pr["[object Uint8Array]"]=Pr["[object Uint8ClampedArray]"]=Pr["[object Uint16Array]"]=Pr["[object Uint32Array]"]=!0,Pr["[object Arguments]"]=Pr["[object Array]"]=Pr["[object ArrayBuffer]"]=Pr["[object Boolean]"]=Pr["[object DataView]"]=Pr["[object Date]"]=Pr["[object Error]"]=Pr["[object Function]"]=Pr["[object Map]"]=Pr["[object Number]"]=Pr["[object Object]"]=Pr["[object RegExp]"]=Pr["[object Set]"]=Pr["[object String]"]=Pr["[object WeakMap]"]=!1;var Gi=function(i){return $r(i)&&_a(i.length)&&!!Pr[eo(i)]},ja=function(i){return function(o){return i(o)}},yi=r(49),cu=yi.a&&yi.a.isTypedArray,Fl=cu?ja(cu):Gi,Ia=Object.prototype.hasOwnProperty,fo=function(i,o){var l=io(i),s=!l&&Xa(i),h=!l&&!s&&Object(Vi.a)(i),f=!l&&!s&&!h&&Fl(i),m=l||s||h||f,w=m?Pc(i.length,String):[],T=w.length;for(var N in i)!o&&!Ia.call(i,N)||m&&(N=="length"||h&&(N=="offset"||N=="parent")||f&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||Qi(N,T))||w.push(N);return w},Vu=Object.prototype,qa=function(i){var o=i&&i.constructor;return i===(typeof o=="function"&&o.prototype||Vu)},ba=function(i,o){return function(l){return i(o(l))}},Nc=ba(Object.keys,Object),ap=Object.prototype.hasOwnProperty,Cc=function(i){if(!qa(i))return Nc(i);var o=[];for(var l in Object(i))ap.call(i,l)&&l!="constructor"&&o.push(l);return o},Ho=function(i){return i!=null&&_a(i.length)&&!Ha(i)},Gu=function(i){return Ho(i)?fo(i):Cc(i)},Ya=function(i){return ip(i,Gu,Ji)},ni=Object.prototype.hasOwnProperty,Dc=function(i,o,l,s,h,f){var m=1&l,w=Ya(i),T=w.length;if(T!=Ya(o).length&&!m)return!1;for(var N=T;N--;){var F=w[N];if(!(m?F in o:ni.call(o,F)))return!1}var Z=f.get(i),te=f.get(o);if(Z&&te)return Z==o&&te==i;var _e=!0;f.set(i,o),f.set(o,i);for(var Me=m;++N<T;){var je=i[F=w[N]],at=o[F];if(s)var it=m?s(at,je,F,o,i,f):s(je,at,F,i,o,f);if(!(it===void 0?je===at||h(je,at,l,s,f):it)){_e=!1;break}Me||(Me=F=="constructor")}if(_e&&!Me){var yt=i.constructor,Vt=o.constructor;yt==Vt||!("constructor"in i)||!("constructor"in o)||typeof yt=="function"&&yt instanceof yt&&typeof Vt=="function"&&Vt instanceof Vt||(_e=!1)}return f.delete(i),f.delete(o),_e},ua=Ca(Nn.a,"DataView"),wa=Ca(Nn.a,"Promise"),Ls=Ca(Nn.a,"Set"),Wi=Ca(Nn.a,"WeakMap"),ea="[object Map]",ci="[object Promise]",sa="[object Set]",Ii="[object WeakMap]",ft="[object DataView]",$t=va(ua),Bt=va(ma),mn=va(wa),fr=va(Ls),Rr=va(Wi),po=eo;(ua&&po(new ua(new ArrayBuffer(1)))!=ft||ma&&po(new ma)!=ea||wa&&po(wa.resolve())!=ci||Ls&&po(new Ls)!=sa||Wi&&po(new Wi)!=Ii)&&(po=function(i){var o=eo(i),l=o=="[object Object]"?i.constructor:void 0,s=l?va(l):"";if(s)switch(s){case $t:return ft;case Bt:return ea;case mn:return ci;case fr:return sa;case Rr:return Ii}return o});var k=po,R="[object Arguments]",W="[object Array]",oe="[object Object]",be=Object.prototype.hasOwnProperty,qe=function(i,o,l,s,h,f){var m=io(i),w=io(o),T=m?W:k(i),N=w?W:k(o),F=(T=T==R?oe:T)==oe,Z=(N=N==R?oe:N)==oe,te=T==N;if(te&&Object(Vi.a)(i)){if(!Object(Vi.a)(o))return!1;m=!0,F=!1}if(te&&!F)return f||(f=new ya),m||Fl(i)?uu(i,o,l,s,h,f):ui(i,o,T,l,s,h,f);if(!(1&l)){var _e=F&&be.call(i,"__wrapped__"),Me=Z&&be.call(o,"__wrapped__");if(_e||Me){var je=_e?i.value():i,at=Me?o.value():o;return f||(f=new ya),h(je,at,l,s,f)}}return!!te&&(f||(f=new ya),Dc(i,o,l,s,h,f))},mt=function i(o,l,s,h,f){return o===l||(o==null||l==null||!$r(o)&&!$r(l)?o!=o&&l!=l:qe(o,l,s,h,i,f))},zt=function(i,o,l,s){var h=l.length,f=h;if(i==null)return!f;for(i=Object(i);h--;){var m=l[h];if(m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++h<f;){var w=(m=l[h])[0],T=i[w],N=m[1];if(m[2]){if(T===void 0&&!(w in i))return!1}else{var F=new ya,Z;if(!(Z===void 0?mt(N,T,3,s,F):Z))return!1}}return!0},En=function(i){return i==i&&!jr(i)},br=function(i){for(var o=Gu(i),l=o.length;l--;){var s=o[l],h=i[s];o[l]=[s,h,En(h)]}return o},dn=function(i,o){return function(l){return l!=null&&l[i]===o&&(o!==void 0||i in Object(l))}},Hr=function(i){var o=br(i);return o.length==1&&o[0][2]?dn(o[0][0],o[0][1]):function(l){return l===i||zt(l,i,o)}},mr=function(i){return typeof i=="symbol"||$r(i)&&eo(i)=="[object Symbol]"},Lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ca=/^\w*$/,xo=function(i,o){if(io(i))return!1;var l=typeof i;return!(l!="number"&&l!="symbol"&&l!="boolean"&&i!=null&&!mr(i))||ca.test(i)||!Lr.test(i)||o!=null&&i in Object(o)};function ta(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError("Expected a function");var l=function(){var s=arguments,h=o?o.apply(this,s):s[0],f=l.cache;if(f.has(h))return f.get(h);var m=i.apply(this,s);return l.cache=f.set(h,m)||f,m};return l.cache=new(ta.Cache||zr),l}ta.Cache=zr;var _l=ta,bl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$l=/\\(\\)?/g,fu=function(i){var o=_l(i,function(s){return l.size===500&&l.clear(),s}),l=o.cache;return o}(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(bl,function(l,s,h,f){o.push(h?f.replace($l,"$1"):s||l)}),o}),Ka=Er?Er.prototype:void 0,du=Ka?Ka.toString:void 0,ri=function i(o){if(typeof o=="string")return o;if(io(o))return bn(o,i)+"";if(mr(o))return du?du.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l},Bl=function(i){return i==null?"":ri(i)},wl=function(i,o){return io(i)?i:xo(i,o)?[i]:fu(Bl(i))},Za=function(i){if(typeof i=="string"||mr(i))return i;var o=i+"";return o=="0"&&1/i==-1/0?"-0":o},Ja=function(i,o){for(var l=0,s=(o=wl(o,i)).length;i!=null&&l<s;)i=i[Za(o[l++])];return l&&l==s?i:void 0},Wu=function(i,o,l){var s=i==null?void 0:Ja(i,o);return s===void 0?l:s},gh=function(i,o){return i!=null&&o in Object(i)},_h=function(i,o,l){for(var s=-1,h=(o=wl(o,i)).length,f=!1;++s<h;){var m=Za(o[s]);if(!(f=i!=null&&l(i,m)))break;i=i[m]}return f||++s!=h?f:!!(h=i==null?0:i.length)&&_a(h)&&Qi(m,h)&&(io(i)||Xa(i))},lp=function(i,o){return i!=null&&_h(i,o,gh)},jc=function(i,o){return xo(i)&&En(o)?dn(Za(i),o):function(l){var s=Wu(l,i);return s===void 0&&s===o?lp(l,i):mt(o,s,3)}},zu=function(i){return i},Zf=function(i){return function(o){return o==null?void 0:o[i]}},bh=function(i){return function(o){return Ja(o,i)}},Hu=function(i){return xo(i)?Zf(Za(i)):bh(i)},Ic=function(i){return typeof i=="function"?i:i==null?zu:typeof i=="object"?io(i)?jc(i[0],i[1]):Hr(i):Hu(i)},Jf=function(i){return function(o,l,s){for(var h=-1,f=Object(o),m=s(o),w=m.length;w--;){var T=m[++h];if(l(f[T],T,f)===!1)break}return o}}(),$o=function(i,o){return function(l,s){if(l==null)return l;if(!Ho(l))return i(l,s);for(var h=l.length,f=-1,m=Object(l);++f<h&&s(m[f],f,m)!==!1;);return l}}(function(i,o){return i&&Jf(i,o,Gu)}),zi=function(i,o){var l=-1,s=Ho(i)?Array(i.length):[];return $o(i,function(h,f,m){s[++l]=o(h,f,m)}),s},Qf=function(i,o){return(io(i)?bn:zi)(i,Ic(o))};Object(c.n)({isolateGlobalState:!0});var ed=function(){try{var i=Ca(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Fs=function(i,o,l){o=="__proto__"&&ed?ed(i,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[o]=l},Zv=Object.prototype.hasOwnProperty,$s=function(i,o,l){var s=i[o];Zv.call(i,o)&&ie(s,l)&&(l!==void 0||o in i)||Fs(i,o,l)},Bs=function(i,o,l,s){var h=!l;l||(l={});for(var f=-1,m=o.length;++f<m;){var w=o[f],T=void 0;T===void 0&&(T=i[w]),h?Fs(l,w,T):$s(l,w,T)}return l},Lc=function(i,o,l){switch(l.length){case 0:return i.call(o);case 1:return i.call(o,l[0]);case 2:return i.call(o,l[0],l[1]);case 3:return i.call(o,l[0],l[1],l[2])}return i.apply(o,l)},Xu=Math.max,pu=function(i,o,l){return o=Xu(o===void 0?i.length-1:o,0),function(){for(var s=arguments,h=-1,f=Xu(s.length-o,0),m=Array(f);++h<f;)m[h]=s[o+h];h=-1;for(var w=Array(o+1);++h<o;)w[h]=s[h];return w[o]=l(m),Lc(i,this,w)}},Us=function(i){return function(){return i}},Fc=ed?function(i,o){return ed(i,"toString",{configurable:!0,enumerable:!1,value:Us(o),writable:!0})}:zu,hu=Date.now,Jv=function(i){var o=0,l=0;return function(){var s=hu(),h=16-(s-l);if(l=s,h>0){if(++o>=800)return arguments[0]}else o=0;return i.apply(void 0,arguments)}},$c=Jv(Fc),Qv=function(i,o){return $c(pu(i,o,zu),i+"")},em=function(i,o,l){if(!jr(l))return!1;var s=typeof o;return!!(s=="number"?Ho(l)&&Qi(o,l.length):s=="string"&&o in l)&&ie(l[o],i)},wh=function(i){return Qv(function(o,l){var s=-1,h=l.length,f=h>1?l[h-1]:void 0,m=h>2?l[2]:void 0;for(f=i.length>3&&typeof f=="function"?(h--,f):void 0,m&&em(l[0],l[1],m)&&(f=h<3?void 0:f,h=1),o=Object(o);++s<h;){var w=l[s];w&&i(o,w,s,f)}return o})},td=Object.prototype.hasOwnProperty,Li=wh(function(i,o){if(qa(o)||Ho(o))Bs(o,Gu(o),i);else for(var l in o)td.call(o,l)&&$s(i,l,o[l])}),Eh=function(i,o,l,s){if(!jr(i))return i;for(var h=-1,f=(o=wl(o,i)).length,m=f-1,w=i;w!=null&&++h<f;){var T=Za(o[h]),N=l;if(T==="__proto__"||T==="constructor"||T==="prototype")return i;if(h!=m){var F=w[T];(N=void 0)==void 0&&(N=jr(F)?F:Qi(o[h+1])?[]:{})}$s(w,T,N),w=w[T]}return i},ae=function(i,o,l){for(var s=-1,h=o.length,f={};++s<h;){var m=o[s],w=Ja(i,m);l(w,m)&&Eh(f,wl(m,i),w)}return f},qu=function(i,o){return ae(i,o,function(l,s){return lp(i,s)})},Ul=Er?Er.isConcatSpreadable:void 0,La=function(i){return io(i)||Xa(i)||!!(Ul&&i&&i[Ul])},Nr=function(o,l,s,h,f){var m=-1,w=o.length;for(s||(s=La),f||(f=[]);++m<w;){var T=o[m];s(T)?ga(f,T):f[f.length]=T}return f},Ai=function(i){return i!=null&&i.length?Nr(i):[]},Br,Qa,Vl,Ea,nd,rd,up,Oh,Gl,Bo,Vs,sp,Wl,el,Bc,vu,Oa,cp,fp,tl=function(i){return $c(pu(i,void 0,Ai),i+"")}(function(i,o){return i==null?{}:qu(i,o)});function _o(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function Sh(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function dp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Uo(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Yr,oi,Sr,so,Cn,co,Uc={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},El=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],od=(Qa=Uo((Br=function(){function i(s){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),_o(this,"isSilentMode",Qa,this),_o(this,"stopZoomGraph",Vl,this),_o(this,"stopScrollGraph",Ea,this),_o(this,"stopMoveGraph",nd,this),_o(this,"adjustEdge",rd,this),_o(this,"adjustEdgeMiddle",up,this),_o(this,"adjustEdgeStartAndEnd",Oh,this),_o(this,"adjustNodePosition",Gl,this),_o(this,"hideAnchors",Bo,this),_o(this,"allowRotation",Vs,this),_o(this,"hoverOutline",sp,this),_o(this,"nodeSelectedOutline",Wl,this),_o(this,"edgeSelectedOutline",el,this),_o(this,"nodeTextEdit",Bc,this),_o(this,"edgeTextEdit",vu,this),_o(this,"nodeTextDraggable",Oa,this),_o(this,"edgeTextDraggable",cp,this),_o(this,"autoExpand",fp,this),dp(this,"multipleSelectKey",""),dp(this,"defaultConfig",{}),Li(this,this.getConfigDetail(s))}var o,l;return o=i,(l=[{key:"updateEditConfig",value:function(s){var h=this.getConfigDetail(s);Li(this,h)}},{key:"getConfigDetail",value:function(s){var h=s.isSilentMode,f=s.textEdit,m={};if(h===!1&&Li(m,this.defaultConfig),h===!0&&h!==this.isSilentMode){var w=tl(Uc,El);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Li(m,w)}f===!1&&Li(m,{nodeTextEdit:!1,edgeTextEdit:!1});var T=tl(s,El);return Li(m,T)}},{key:"getConfig",value:function(){return tl(this,El)}}])&&Sh(o.prototype,l),i}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vl=Uo(Br.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ea=Uo(Br.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nd=Uo(Br.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rd=Uo(Br.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),up=Uo(Br.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oh=Uo(Br.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gl=Uo(Br.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bo=Uo(Br.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vs=Uo(Br.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sp=Uo(Br.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wl=Uo(Br.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),el=Uo(Br.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bc=Uo(Br.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vu=Uo(Br.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Oa=Uo(Br.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),cp=Uo(Br.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fp=Uo(Br.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Uo(Br.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Br.prototype,"updateEditConfig"),Br.prototype),Br);r(65),r(66),function(i){i[i.DEFAULT=1]="DEFAULT",i[i.TEXT_EDIT=2]="TEXT_EDIT",i[i.SHOW_MENU=3]="SHOW_MENU",i[i.ALLOW_CONNECT=4]="ALLOW_CONNECT",i[i.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Yr||(Yr={})),function(i){i.KEY="logic-flow",i.NODE_NAME="lf-node",i.EDGE_NAME="lf-edge"}(oi||(oi={})),function(i){i.NODE="node",i.CIRCLE_NODE="circle-node",i.POLYGON_NODE="polygon-node",i.RECT_NODE="rect-node",i.TEXT_NODE="text-node",i.ELLIPSE_NODE="ellipse-node",i.DIAMOND_NODE="diamond-node",i.HTML_NODE="html-node",i.EDGE="edge",i.LINE_EDGE="line-edge",i.POLYLINE_EDGE="polyline-edge",i.BEZIER_EDGE="bezier-edge",i.GRAPH="graph"}(Sr||(Sr={})),function(i){i.NODE="node",i.EDGE="edge",i.GRAPH="graph"}(so||(so={})),function(i){i.ELEMENT_CLICK="element:click",i.NODE_CLICK="node:click",i.NODE_DBCLICK="node:dbclick",i.NODE_DELETE="node:delete",i.NODE_ADD="node:add",i.NODE_GROUP_COPY="node:group-copy-add",i.NODE_DND_ADD="node:dnd-add",i.NODE_DND_DRAG="node:dnd-drag",i.NODE_MOUSEDOWN="node:mousedown",i.NODE_DRAGSTART="node:dragstart",i.NODE_DRAG="node:drag",i.NODE_DROP="node:drop",i.NODE_MOUSEUP="node:mouseup",i.NODE_MOUSEMOVE="node:mousemove",i.NODE_MOUSEENTER="node:mouseenter",i.NODE_MOUSELEAVE="node:mouseleave",i.NODE_CONTEXTMENU="node:contextmenu",i.NODE_ROTATE="node:rotate",i.EDGE_DELETE="edge:delete",i.EDGE_ADD="edge:add",i.EDGE_CLICK="edge:click",i.EDGE_DBCLICK="edge:dbclick",i.EDGE_MOUSEENTER="edge:mouseenter",i.EDGE_MOUSELEAVE="edge:mouseleave",i.EDGE_CONTEXTMENU="edge:contextmenu",i.EDGE_ADJUST="edge:adjust",i.EDGE_EXCHANGE_NODE="edge:exchange-node",i.ANCHOR_DRAGSTART="anchor:dragstart",i.ANCHOR_DRAG="anchor:drag",i.ANCHOR_DROP="anchor:drop",i.ANCHOR_DRAGEND="anchor:dragend",i.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",i.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",i.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",i.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",i.ADJUST_POINT_DRAG="adjustPoint:drag",i.ADJUST_POINT_DROP="adjustPoint:drop",i.ADJUST_POINT_DRAGEND="adjustPoint:dragend",i.BLANK_MOUSEDOWN="blank:mousedown",i.BLANK_DRAGSTART="blank:dragstart",i.BLANK_DRAG="blank:drag",i.BLANK_DROP="blank:drop",i.BLANK_MOUSEMOVE="blank:mousemove",i.BLANK_MOUSEUP="blank:mouseup",i.BLANK_CLICK="blank:click",i.BLANK_CONTEXTMENU="blank:contextmenu",i.SELECTION_MOUSEDOWN="selection:mousedown",i.SELECTION_DRAGSTART="selection:dragstart",i.SELECTION_DRAG="selection:drag",i.SELECTION_DROP="selection:drop",i.SELECTION_MOUSEMOVE="selection:mousemove",i.SELECTION_MOUSEUP="selection:mouseup",i.SELECTION_CONTEXTMENU="selection:contextmenu",i.CONNECTION_NOT_ALLOWED="connection:not-allowed",i.HISTORY_CHANGE="history:change",i.TEXT_UPDATE="text:update",i.GRAPH_TRANSFORM="graph:transform",i.GRAPH_RENDERED="graph:rendered"}(Cn||(Cn={})),function(i){i.HORIZONTAL="horizontal",i.VERTICAL="vertical"}(co||(co={}));var Ao,Po,pp,hp,Vc,Hi,id,Gs,Fa;function mu(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return zl(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return zl(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zl(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function $a(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function xh(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Ol(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Sa(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}(function(i){i[i.DEFAULT=0]="DEFAULT",i[i.INCREASE=1]="INCREASE"})(Ao||(Ao={}));var vp={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},mp=(Po=function(){function i(s,h){(function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")})(this,i),Ol(this,"MINI_SCALE_SIZE",.2),Ol(this,"MAX_SCALE_SIZE",16),$a(this,"SCALE_X",pp,this),$a(this,"SKEW_Y",hp,this),$a(this,"SKEW_X",Vc,this),$a(this,"SCALE_Y",Hi,this),$a(this,"TRANSLATE_X",id,this),$a(this,"TRANSLATE_Y",Gs,this),$a(this,"ZOOM_SIZE",Fa,this),Ol(this,"eventCenter",void 0),Ol(this,"translateLimitMinX",void 0),Ol(this,"translateLimitMinY",void 0),Ol(this,"translateLimitMaxX",void 0),Ol(this,"translateLimitMaxY",void 0),this.eventCenter=s;var f=h.stopMoveGraph,m=f!==void 0&&f;this.updateTranslateLimits(m)}var o,l;return o=i,l=[{key:"setZoomMiniSize",value:function(s){this.MINI_SCALE_SIZE=s}},{key:"setZoomMaxSize",value:function(s){this.MAX_SCALE_SIZE=s}},{key:"HtmlPointToCanvasPoint",value:function(s){var h=mu(s,2),f=h[0],m=h[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(m-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(s){var h=mu(s,2),f=h[0],m=h[1];return[f*this.SCALE_X+this.TRANSLATE_X,m*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(s,h,f){var m=mu(s,2),w=m[0],T=m[1];return[w+h/this.SCALE_X,T+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(s,h){return[s/this.SCALE_X,h/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var s=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(s,")")}}},{key:"zoom",value:function(){var s=arguments.length>0&&arguments[0]!==void 0&&arguments[0],h=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,m=this.SCALE_Y;return s===!0?(f+=this.ZOOM_SIZE,m+=this.ZOOM_SIZE):s===!1?(f-=this.ZOOM_SIZE,m-=this.ZOOM_SIZE):typeof s=="number"&&(f=s,m=s),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(h&&(this.TRANSLATE_X-=(f-this.SCALE_X)*h[0],this.TRANSLATE_Y-=(m-this.SCALE_Y)*h[1]),this.SCALE_X=f,this.SCALE_Y=m,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(s){this.eventCenter.emit(Cn.GRAPH_TRANSFORM,{type:s,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(s,h){this.TRANSLATE_X+s<=this.translateLimitMaxX&&this.TRANSLATE_X+s>=this.translateLimitMinX&&(this.TRANSLATE_X+=s),this.TRANSLATE_Y+h<=this.translateLimitMaxY&&this.TRANSLATE_Y+h>=this.translateLimitMinY&&(this.TRANSLATE_Y+=h),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(s,h,f,m){var w=mu(this.CanvasPointToHtmlPoint([s,h]),2),T=f/2-w[0],N=m/2-w[1];this.TRANSLATE_X+=T,this.TRANSLATE_Y+=N,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(s){var h=mu(Array.isArray(s)&&s.length===4?s:vp[s.toString()],4);this.translateLimitMinX=h[0],this.translateLimitMinY=h[1],this.translateLimitMaxX=h[2],this.translateLimitMaxY=h[3]}}],l&&xh(o.prototype,l),i}(),pp=Sa(Po.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),hp=Sa(Po.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vc=Sa(Po.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hi=Sa(Po.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),id=Sa(Po.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gs=Sa(Po.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fa=Sa(Po.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Sa(Po.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(Po.prototype,"zoom"),Po.prototype),Sa(Po.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(Po.prototype,"resetZoom"),Po.prototype),Sa(Po.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(Po.prototype,"translate"),Po.prototype),Sa(Po.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(Po.prototype,"focusOn"),Po.prototype),Po),ad=function(i,o){for(var l=-1,s=i==null?0:i.length;++l<s&&o(i[l],l,i)!==!1;);return i},Ah=function(i){var o=[];if(i!=null)for(var l in Object(i))o.push(l);return o},Th=Object.prototype.hasOwnProperty,Mh=function(i){if(!jr(i))return Ah(i);var o=qa(i),l=[];for(var s in i)(s!="constructor"||!o&&Th.call(i,s))&&l.push(s);return l},ld=function(i){return Ho(i)?fo(i,!0):Mh(i)},yp=r(107),gp=function(i,o){var l=-1,s=i.length;for(o||(o=Array(s));++l<s;)o[l]=i[l];return o},Gc=ba(Object.getPrototypeOf,Object),xr=Object.prototype.hasOwnProperty,tm=function(i){var o=i.length,l=new i.constructor(o);return o&&typeof i[0]=="string"&&xr.call(i,"index")&&(l.index=i.index,l.input=i.input),l},_p=function(i){var o=new i.constructor(i.byteLength);return new xi(o).set(new xi(i)),o},Yu=function(i,o){var l=_p(i.buffer);return new i.constructor(l,i.byteOffset,i.byteLength)},Wc=/\w*$/,nm=function(i){var o=new i.constructor(i.source,Wc.exec(i));return o.lastIndex=i.lastIndex,o},kh=Er?Er.prototype:void 0,xa=kh?kh.valueOf:void 0,rm=function(i){return xa?Object(xa.call(i)):{}},zc=function(i,o){var l=o?_p(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)},ud=function(i,o,l){var s=i.constructor;switch(o){case"[object ArrayBuffer]":return _p(i);case"[object Boolean]":case"[object Date]":return new s(+i);case"[object DataView]":return Yu(i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return zc(i,l);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(i);case"[object RegExp]":return nm(i);case"[object Symbol]":return rm(i)}},bp=Object.create,Ph=function(){function i(){}return function(o){if(!jr(o))return{};if(bp)return bp(o);i.prototype=o;var l=new i;return i.prototype=void 0,l}}(),fa=function(i){return typeof i.constructor!="function"||qa(i)?{}:Ph(Gc(i))},yu=function(i){return $r(i)&&k(i)=="[object Map]"},sd=yi.a&&yi.a.isMap,Ku=sd?ja(sd):yu,cd=function(i){return $r(i)&&k(i)=="[object Set]"},wp=yi.a&&yi.a.isSet,fd=wp?ja(wp):cd,Hc="[object Arguments]",dd="[object Function]",pd="[object Object]",Xr={};Xr[Hc]=Xr["[object Array]"]=Xr["[object ArrayBuffer]"]=Xr["[object DataView]"]=Xr["[object Boolean]"]=Xr["[object Date]"]=Xr["[object Float32Array]"]=Xr["[object Float64Array]"]=Xr["[object Int8Array]"]=Xr["[object Int16Array]"]=Xr["[object Int32Array]"]=Xr["[object Map]"]=Xr["[object Number]"]=Xr["[object Object]"]=Xr["[object RegExp]"]=Xr["[object Set]"]=Xr["[object String]"]=Xr["[object Symbol]"]=Xr["[object Uint8Array]"]=Xr["[object Uint8ClampedArray]"]=Xr["[object Uint16Array]"]=Xr["[object Uint32Array]"]=!0,Xr["[object Error]"]=Xr[dd]=Xr["[object WeakMap]"]=!1;var om=function i(o,l,s,h,f,m){var w,T=1&l;if(w!==void 0)return w;if(!jr(o))return o;var N=io(o);if(N)w=tm(o);else{var F=k(o),Z=F==dd||F=="[object GeneratorFunction]";if(Object(Vi.a)(o))return Object(yp.a)(o,T);if(F==pd||F==Hc||Z&&!f)w=Z?{}:fa(o);else{if(!Xr[F])return f?o:{};w=ud(o,F,T)}}m||(m=new ya);var te=m.get(o);if(te)return te;m.set(o,w),fd(o)?o.forEach(function(Me){w.add(i(Me,l,s,Me,o,m))}):Ku(o)&&o.forEach(function(Me,je){w.set(je,i(Me,l,s,je,o,m))});var _e=N?void 0:Ya(o);return ad(_e||o,function(Me,je){_e&&(Me=o[je=Me]),$s(w,je,i(Me,l,s,je,o,m))}),w},to=function(i){return om(i,5)},hd=function(i,o,l){(l!==void 0&&!ie(i[o],l)||l===void 0&&!(o in i))&&Fs(i,o,l)},Rh=function(i){return $r(i)&&Ho(i)},Zu=Function.prototype,Nh=Object.prototype,Ws=Zu.toString,Ch=Nh.hasOwnProperty,Ju=Ws.call(Object),gi=function(i){if(!$r(i)||eo(i)!="[object Object]")return!1;var o=Gc(i);if(o===null)return!0;var l=Ch.call(o,"constructor")&&o.constructor;return typeof l=="function"&&l instanceof l&&Ws.call(l)==Ju},nl=function(i,o){if((o!=="constructor"||typeof i[o]!="function")&&o!="__proto__")return i[o]},Hl=function(i){return Bs(i,ld(i))},Qu=function(i,o,l,s,h,f,m){var w=nl(i,l),T=nl(o,l),N=m.get(T);if(N)hd(i,l,N);else{var F=void 0,Z=F===void 0;if(Z){var te=io(T),_e=!te&&Object(Vi.a)(T),Me=!te&&!_e&&Fl(T);F=T,te||_e||Me?io(w)?F=w:Rh(w)?F=gp(w):_e?(Z=!1,F=Object(yp.a)(T,!0)):Me?(Z=!1,F=zc(T,!0)):F=[]:gi(T)||Xa(T)?(F=w,Xa(w)?F=Hl(w):jr(w)&&!Ha(w)||(F=fa(T))):Z=!1}Z&&(m.set(T,F),h(F,T,s,f,m),m.delete(T)),hd(i,l,F)}},es=function i(o,l,s,h,f){o!==l&&Jf(l,function(m,w){if(f||(f=new ya),jr(m))Qu(o,l,w,s,i,h,f);else{var T=void 0;T===void 0&&(T=m),hd(o,w,T)}},ld)},ts=wh(function(i,o,l){es(i,o,l)}),vd={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},Xl=function(i){var o=to(vd);return i&&(o=ts(o,i)),o};r(82),r(166);function ns(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}var md=function(){function i(){var s,h,f;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),f={},(h="_events")in(s=this)?Object.defineProperty(s,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):s[h]=f}var o,l;return o=i,(l=[{key:"on",value:function(s,h,f){var m=this;return s==null||s.split(",").forEach(function(w){w=w.trim(),m._events[w]||(m._events[w]=[]),m._events[w].push({callback:h,once:!!f})}),this}},{key:"once",value:function(s,h){var f=this;s==null||s.split(",").forEach(function(m){return m=m.trim(),f.on(m,h,!0)})}},{key:"emit",value:function(s,h){var f=this;s==null||s.split(",").forEach(function(m){var w=f._events[m]||[],T=f._events["*"]||[],N=function(F){for(var Z=F.length,te=0;te<Z;te++)if(F[te]){var _e=F[te],Me=_e.callback;_e.once&&(F.splice(te,1),F.length===0&&delete f._events[m],Z--,te--),Me.apply(f,[h])}};N(w),N(T)})}},{key:"off",value:function(s,h){var f=this;return s||(this._events={}),s.split(",").forEach(function(m){if(h){for(var w=f._events[m]||[],T=w.length,N=0;N<T;N++)w[N].callback===h&&(w.splice(N,1),T--,N--);w.length===0&&delete f._events[m]}else delete f._events[m]}),this}},{key:"getEvents",value:function(){return this._events}}])&&ns(o.prototype,l),i}();function rl(i,o){return o*Math.round(i/o)||i}function Xc(i,o){return i%o}function qc(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return zs(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return zs(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zs(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var Hs=function(i,o,l){var s=qc(i,2),h=s[0],f=s[1],m=qc(o,2),w=m[0],T=m[1],N=qc(l,2),F=N[0],Z=N[1];return h>w&&h<F&&f>T&&f<Z},Xs=function(i,o){var l=!1;switch(o.multipleSelectKey){case"meta":l=i.metaKey;break;case"alt":l=i.altKey;break;case"shift":l=i.shiftKey;break;case"ctrl":l=i.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var yd=function(i){return function(o,l,s){var h=Object(o);if(!Ho(o)){var f=Ic(l);o=Gu(o),l=function(w){return f(h[w],w,h)}}var m=i(o,l,s);return m>-1?h[f?o[m]:m]:void 0}},qs=function(i,o,l,s){for(var h=i.length,f=l+-1;++f<h;)if(o(i[f],f,i))return f;return-1},Ep=/\s/,gd=function(i){for(var o=i.length;o--&&Ep.test(i.charAt(o)););return o},Dh=/^\s+/,Op=function(i){return i&&i.slice(0,gd(i)+1).replace(Dh,"")},ol=/^[-+]0x[0-9a-f]+$/i,Sp=/^0b[01]+$/i,xp=/^0o[0-7]+$/i,Ap=parseInt,Ys=function(i){if(typeof i=="number")return i;if(mr(i))return NaN;if(jr(i)){var o=typeof i.valueOf=="function"?i.valueOf():i;i=jr(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=Op(i);var l=Sp.test(i);return l||xp.test(i)?Ap(i.slice(2),l?2:8):ol.test(i)?NaN:+i},Sl=1/0,Yc=function(i){return i?(i=Ys(i))===Sl||i===-1/0?17976931348623157e292*(i<0?-1:1):i==i?i:0:i===0?i:0},_d=function(i){var o=Yc(i),l=o%1;return o==o?l?o-l:o:0},bd=Math.max,gu,_u=yd(function(i,o,l){var s=i==null?0:i.length;if(!s)return-1;var h=l==null?0:_d(l);return h<0&&(h=bd(s+h,0)),qs(i,Ic(o),h)}),Qn=new Uint8Array(16);function Ks(){if(!gu&&!(gu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gu(Qn)}for(var Kc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,il=function(i){return typeof i=="string"&&Kc.test(i)},fi=[],rs=0;rs<256;++rs)fi.push((rs+256).toString(16).substr(1));var Ro=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(fi[i[o+0]]+fi[i[o+1]]+fi[i[o+2]]+fi[i[o+3]]+"-"+fi[i[o+4]]+fi[i[o+5]]+"-"+fi[i[o+6]]+fi[i[o+7]]+"-"+fi[i[o+8]]+fi[i[o+9]]+"-"+fi[i[o+10]]+fi[i[o+11]]+fi[i[o+12]]+fi[i[o+13]]+fi[i[o+14]]+fi[i[o+15]]).toLowerCase();if(!il(l))throw TypeError("Stringified UUID is invalid");return l},bu=function(i,o,l){var s=(i=i||{}).random||(i.rng||Ks)();return s[6]=15&s[6]|64,s[8]=63&s[8]|128,Ro(s)},na=function(){return bu()},Zc=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=i.nodes.reduce(function(s,h){return s[h.id]=o+bu(),h.id=s[h.id],s},{});return i.edges.forEach(function(s){s.id=o+bu(),s.sourceNodeId=l[s.sourceNodeId],s.targetNodeId=l[s.targetNodeId]}),i},Fi=(r(105),r(127),r(207),function(i,o,l){var s=i.x,h=i.y,f=o.x,m=o.y,w=l.x,T=l.y,N=(T-m)/(w-f),F=m-N*f;return s>=f&&s<=w&&h>=m&&h<=T&&Math.abs(h-N*s+F)<Number.EPSILON});function Vo(i){return Vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Vo(i)}function xl(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Al(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?xl(Object(l),!0).forEach(function(s){wd(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):xl(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function wd(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Pt,os,Jc,Qc,wu,is,Ed,Tp,as,ef,Od,Mp,Tl,kp,al,Eu,Sd,jh,Ih,Lh,Pp,xd=function(i){return i.anchors},tf=function(i,o){for(var l,s=o.nodes,h=s.length-1;h>=0;h--){var f=s[h];if(im(i,f)){var m=f.getTargetAnchor(i);if(m){var w={node:f,anchorIndex:m.index,anchor:m.anchor};l&&!Fh(f,l.node,o)||(l=w)}}}return l},Fh=function(i,o,l){return i.zIndex>o.zIndex||l.nodesMap[i.id].index>l.nodesMap[o.id].index},ll=function(i,o,l,s){return Math.hypot(i-l,o-s)},Ou=function(i,o){var l=!1,s=bo(o);return i.x>=s.minX-0&&i.x<=s.maxX+0&&i.y>=s.minY-0&&i.y<=s.maxY+0&&(l=!0),l},im=function(i,o){var l=!1,s=bo(o);return i.x>=s.minX-5&&i.x<=s.maxX+5&&i.y>=s.minY-5&&i.y<=s.maxY+5&&(l=!0),l},bo=function(i){var o=i.x,l=i.y,s=i.width,h=i.height;return{minX:o-s/2,minY:l-h/2,maxX:o+s/2,maxY:l+h/2,x:o,y:l,width:s,height:h,centerX:o,centerY:l}},nf=function(i,o,l){var s,h=function(m){var w=m,T=w.x,N=w.y,F=w.width,Z=w.height,te=w.radius;return[{x:T-F/2+te,y:N-Z/2+te,r:te},{x:T+F/2-te,y:N-Z/2+te,r:te},{x:T-F/2+te,y:N+Z/2-te,r:te},{x:T+F/2-te,y:N+Z/2-te,r:te}]}(l),f=Number.MAX_SAFE_INTEGER;return h.forEach(function(m){var w=ll(i.x,i.y,m.x,m.y);w<f&&(f=w,s=m)}),ls(i,o,s)},ls=function(i,o,l){var s,h=l,f=h.x,m=h.y,w=h.r;if(o===co.HORIZONTAL){var T=f-Math.sqrt(w*w-(i.y-m)*(i.y-m)),N=f+Math.sqrt(w*w-(i.y-m)*(i.y-m));s={x:Math.abs(T-i.x)<Math.abs(N-i.x)?T:N,y:i.y}}else if(o===co.VERTICAL){var F=m-Math.sqrt(w*w-(i.x-f)*(i.x-f)),Z=m+Math.sqrt(w*w-(i.x-f)*(i.x-f)),te=Math.abs(F-i.y)<Math.abs(Z-i.y)?F:Z;s={x:i.x,y:te}}return s},rf=function(i,o){var l=o,s=!1,h=l.x-l.width/2+l.radius,f=l.x+l.width/2-l.radius,m=l.y-l.height/2+l.radius,w=l.y+l.height/2-l.radius,T=l.x,N=l.y,F=l.width,Z=l.height;return i.y===N+Z/2||i.y===N-Z/2?s=i.x>h&&i.x<f:i.x!==T+F/2&&i.x!==T-F/2||(s=i.y>m&&i.y<w),s},Zs=function(i,o,l){var s,h=l,f=h.x,m=h.y,w=h.rx,T=h.ry;if(o===co.HORIZONTAL){var N=f-Math.sqrt(w*w-(i.y-m)*(i.y-m)*w*w/(T*T)),F=f+Math.sqrt(w*w-(i.y-m)*(i.y-m)*w*w/(T*T));s={x:Math.abs(N-i.x)<Math.abs(F-i.x)?N:F,y:i.y}}else if(o===co.VERTICAL){var Z=m-Math.sqrt(T*T-(i.x-f)*(i.x-f)*T*T/(w*w)),te=m+Math.sqrt(T*T-(i.x-f)*(i.x-f)*T*T/(w*w)),_e=Math.abs(Z-i.y)<Math.abs(te-i.y)?Z:te;s={x:i.x,y:_e}}return s},of=function(i,o,l){for(var s,h=l.pointsPosition,f=Number.MAX_SAFE_INTEGER,m=[],w=0;w<h.length;w++)m.push({start:h[w],end:h[(w+1)%h.length]});return m.forEach(function(T){var N=T.start,F=T.end,Z=N,te=F;N.x>F.x&&(Z=F,te=N);var _e={x:i.x,y:i.y};if(Z.x===te.x&&o===co.HORIZONTAL&&(_e={x:Z.x,y:i.y}),Z.y===te.y&&o===co.VERTICAL&&(_e={x:i.x,y:Z.y}),Z.x!==te.x&&Z.y!==te.y){var Me=(te.y-Z.y)/(te.x-Z.x),je=(Z.x*te.y-te.x*Z.y)/(Z.x-te.x);o===co.HORIZONTAL?_e={x:(i.y-je)/Me,y:i.y}:o===co.VERTICAL&&(_e={x:i.x,y:Me*i.x+je})}if(Fi(_e,N,F)){var at=ll(_e.x,_e.y,i.x,i.y);at<f&&(f=at,s=_e)}}),s},af=function(i,o,l,s){var h=i.x,f=i.y;return o.x>i.x?h=i.x+l/2:o.x<i.x&&(h=i.x-l/2),o.y>i.y?f=i.y+s/2:o.y<i.y&&(f=i.y-s/2),{x:h,y:f}},lf=function(i){var o=i.rows,l=i.style,s=i.rowsLength,h=i.className,f=document.createElement("div");f.style.fontSize=l.fontSize,f.style.width=l.width,f.className=h,f.style.lineHeight=l.lineHeight,f.style.padding=l.padding,l.fontFamily&&(f.style.fontFamily=l.fontFamily),s>1?o.forEach(function(w){var T=document.createElement("div");T.textContent=w,f.appendChild(T)}):f.textContent=o,document.body.appendChild(f);var m=f.clientHeight;return document.body.removeChild(f),m},us=function(i){var o=i.rows,l=i.rowsLength,s=i.fontSize,h=0;return o&&o.forEach(function(f){var m=jo(f);h=m>h?m:h}),{width:Math.ceil(h/2)*s+s/4,height:l*(s+2)+s/4}},ql=function(i){return Vo(i)!=="object"?{isAllPass:!!i,msg:i?"":"不允许连接"}:i},_i=function(i){try{return JSON.parse(JSON.stringify(i))}catch{return i}},Ad=1e3,uf=999,ss=function(){return++Ad};function Js(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Ti(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Js(Object(l),!0).forEach(function(s){Xi(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Js(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function To(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function sf(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Xi(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Bn(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Td=(Pt=function(){function i(s,h){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),Xi(this,"id",""),To(this,"type",os,this),To(this,"sourceNodeId",Jc,this),To(this,"targetNodeId",Qc,this),To(this,"startPoint",wu,this),To(this,"endPoint",is,this),To(this,"text",Ed,this),To(this,"properties",Tp,this),To(this,"points",as,this),To(this,"pointsList",ef,this),To(this,"isSelected",Od,this),To(this,"isHovered",Mp,this),To(this,"isHitable",Tl,this),To(this,"draggable",kp,this),To(this,"visible",al,this),Xi(this,"virtual",!1),To(this,"isAnimation",Eu,this),To(this,"isShowAdjustPoint",Sd,this),Xi(this,"graphModel",void 0),To(this,"zIndex",jh,this),Xi(this,"BaseType",so.EDGE),Xi(this,"modelType",Sr.EDGE),To(this,"state",Ih,this),Xi(this,"additionStateData",void 0),Xi(this,"sourceAnchorId",""),Xi(this,"targetAnchorId",""),Xi(this,"menu",void 0),Xi(this,"customTextPosition",!1),To(this,"style",Lh,this),To(this,"arrowConfig",Pp,this),this.graphModel=h,this.initEdgeData(s),this.setAttributes()}var o,l;return o=i,l=[{key:"initEdgeData",value:function(s){if(s.properties||(s.properties={}),!s.id){var h=this.graphModel.idGenerator,f=h&&h(s.type),m=this.createId();s.id=m||f||na()}this.arrowConfig.markerEnd="url(#marker-end-".concat(s.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(s.id,")");var w=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=w,Li(this,Dn(s)),this.graphModel.overlapMode===Ao.INCREASE&&(this.zIndex=s.zIndex||ss()),this.setAnchors(),this.initPoints(),this.formatText(s)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Ti(Ti({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Ti({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var s=this.graphModel.theme.edgeText;return to(s)}},{key:"getEdgeAnimationStyle",value:function(){var s=this.graphModel.theme.edgeAnimation;return to(s)}},{key:"getArrowStyle",value:function(){var s=this.getEdgeStyle(),h=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,m=this.isAnimation?h.stroke:s.stroke;return Ti(Ti({},s),{},{fill:m,stroke:m},f)}},{key:"getOutlineStyle",value:function(){var s=this.graphModel.theme.outline;return to(s)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var s,h;return(s=this.graphModel)===null||s===void 0||(h=s.nodesMap[this.sourceNodeId])===null||h===void 0?void 0:h.model}},{key:"targetNode",get:function(){var s,h;return(s=this.graphModel)===null||s===void 0||(h=s.nodesMap[this.targetNodeId])===null||h===void 0?void 0:h.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(s,h,f){var m,w,T=xd(s);return f&&(m=_u(T,function(N){return N.id===f}))||T.forEach(function(N){var F=hr(N,h);(w===void 0||F<w)&&(w=F,m=N)}),m}},{key:"getEndAnchor",value:function(s,h){var f,m,w=this,T=xd(s);return h&&(f=_u(T,function(N){return N.id===h}))||T.forEach(function(N){var F=hr(N,w.startPoint);(m===void 0||F<m)&&(m=F,f=N)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var s=this.text,h=s.x,f=s.y,m=s.value,w={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return m&&(w.text={x:h,y:f,value:m}),this.graphModel.overlapMode===Ao.INCREASE&&(w.zIndex=this.zIndex),w}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(s,h){this.properties[s]=_i(h),this.setAttributes()}},{key:"deleteProperty",value:function(s){delete this.properties[s],this.setAttributes()}},{key:"setProperties",value:function(s){this.properties=Ti(Ti({},Object(c.I)(this.properties)),_i(s)),this.setAttributes()}},{key:"changeEdgeId",value:function(s){var h=this.arrowConfig,f=h.markerEnd,m=h.markerStart;m&&m==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(s,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(s,")")),this.id=s}},{key:"setStyle",value:function(s,h){this.style=Ti(Ti({},this.style),{},Xi({},s,_i(h)))}},{key:"setStyles",value:function(s){this.style=Ti(Ti({},this.style),_i(s))}},{key:"updateStyles",value:function(s){this.style=Ti({},_i(s))}},{key:"formatText",value:function(s){var h=this.textPosition,f=h.x,m=h.y;s.text&&typeof s.text!="string"?Object.prototype.toString.call(s.text)==="[object Object]"&&(this.text={x:s.text.x||f,y:s.text.y||m,value:s.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:s.text||"",x:f,y:m,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var s=this.textPosition,h=s.x,f=s.y;this.text.x=h,this.text.y=f}},{key:"moveText",value:function(s,h){if(this.text){var f=this.text,m=f.x,w=f.y,T=f.value,N=f.draggable,F=f.editable;this.text={value:T,draggable:N,x:m+s,y:w+h,editable:F}}}},{key:"setText",value:function(s){s&&Li(this.text,s)}},{key:"updateText",value:function(s){this.text=Ti(Ti({},Object(c.I)(this.text)),{},{value:s})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var s=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!s)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:s.x,y:s.y}),this.sourceAnchorId||(this.sourceAnchorId=s.id)}if(!this.targetAnchorId||!this.endPoint){var h=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!h)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:h.x,y:h.y}),this.targetAnchorId||(this.targetAnchorId=h.id)}}},{key:"setSelected",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=s}},{key:"setHovered",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=s}},{key:"setHitable",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=s}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(s,h){this.state=s,this.additionStateData=h}},{key:"updateStartPoint",value:function(s){this.startPoint=s}},{key:"moveStartPoint",value:function(s,h){this.startPoint.x+=s,this.startPoint.y+=h}},{key:"updateEndPoint",value:function(s){this.endPoint=s}},{key:"moveEndPoint",value:function(s,h){this.endPoint.x+=s,this.endPoint.y+=h}},{key:"setZIndex",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=s}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(s){Li(this,s)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(s){var h=s.startPoint,f=s.endPoint;this.updateStartPoint({x:h.x,y:h.y}),this.updateEndPoint({x:f.x,y:f.y})}}],l&&sf(o.prototype,l),i}(),os=Bn(Pt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Jc=Bn(Pt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qc=Bn(Pt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),wu=Bn(Pt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),is=Bn(Pt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ed=Bn(Pt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Tp=Bn(Pt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),as=Bn(Pt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ef=Bn(Pt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Od=Bn(Pt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mp=Bn(Pt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tl=Bn(Pt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),kp=Bn(Pt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),al=Bn(Pt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Eu=Bn(Pt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Sd=Bn(Pt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jh=Bn(Pt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ih=Bn(Pt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Lh=Bn(Pt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Pp=Bn(Pt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Bn(Pt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"sourceNode"),Pt.prototype),Bn(Pt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"targetNode"),Pt.prototype),Bn(Pt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"textPosition"),Pt.prototype),Bn(Pt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setProperty"),Pt.prototype),Bn(Pt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"deleteProperty"),Pt.prototype),Bn(Pt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setProperties"),Pt.prototype),Bn(Pt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"changeEdgeId"),Pt.prototype),Bn(Pt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setStyle"),Pt.prototype),Bn(Pt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setStyles"),Pt.prototype),Bn(Pt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateStyles"),Pt.prototype),Bn(Pt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"formatText"),Pt.prototype),Bn(Pt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"resetTextPosition"),Pt.prototype),Bn(Pt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveText"),Pt.prototype),Bn(Pt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setText"),Pt.prototype),Bn(Pt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateText"),Pt.prototype),Bn(Pt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setAnchors"),Pt.prototype),Bn(Pt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setSelected"),Pt.prototype),Bn(Pt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setHovered"),Pt.prototype),Bn(Pt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setHitable"),Pt.prototype),Bn(Pt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"openEdgeAnimation"),Pt.prototype),Bn(Pt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"closeEdgeAnimation"),Pt.prototype),Bn(Pt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setElementState"),Pt.prototype),Bn(Pt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateStartPoint"),Pt.prototype),Bn(Pt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveStartPoint"),Pt.prototype),Bn(Pt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateEndPoint"),Pt.prototype),Bn(Pt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveEndPoint"),Pt.prototype),Bn(Pt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setZIndex"),Pt.prototype),Bn(Pt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"initPoints"),Pt.prototype),Bn(Pt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateAttributes"),Pt.prototype),Bn(Pt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"getAdjustStart"),Pt.prototype),Bn(Pt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"getAdjustEnd"),Pt.prototype),Bn(Pt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateAfterAdjustStartAndEnd"),Pt.prototype),Pt),cf=Td;function Md(i){return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Md(i)}function Rp(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function $h(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Rp(Object(l),!0).forEach(function(s){xu(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Rp(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Su(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Bh(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function cs(){return cs=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=Uh(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},cs.apply(this,arguments)}function Uh(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Yl(i))!==null;);return i}function Np(i,o){return Np=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Np(i,o)}function ff(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Yl(i);if(o){var h=Yl(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return Vh(this,l)}}function Vh(i,o){if(o&&(Md(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ba(i)}function Ba(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yl(i){return Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yl(i)}function xu(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Un,Cp,Qs=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Np(f,m)})(h,i);var o,l,s=ff(h);function h(){var f;Su(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return xu(Ba(f=s.call.apply(s,[this].concat(w))),"modelType",Sr.LINE_EDGE),f}return o=h,(l=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return $h($h({},cs(Yl(h.prototype),"getEdgeStyle",this).call(this)),to(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Bh(o.prototype,l),h}(cf);function Kl(i){return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Kl(i)}function df(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return qi(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return qi(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qi(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function ul(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function No(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?ul(Object(l),!0).forEach(function(s){Dp(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):ul(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function da(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function Ua(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function am(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function pf(){return pf=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=fs(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},pf.apply(this,arguments)}function fs(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=ra(i))!==null;);return i}function gr(i,o){return gr=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},gr(i,o)}function Gh(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=ra(i);if(o){var h=ra(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return pa(this,l)}}function pa(i,o){if(o&&(Kl(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mo(i)}function Mo(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ra(i){return ra=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ra(i)}function Dp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Mi(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Aa=(Un=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&gr(f,m)})(h,i);var o,l,s=Gh(h);function h(){var f;Ua(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return Dp(Mo(f=s.call.apply(s,[this].concat(w))),"modelType",Sr.POLYLINE_EDGE),Dp(Mo(f),"draggingPointList",void 0),da(Mo(f),"dbClickPosition",Cp,Mo(f)),f}return o=h,(l=[{key:"initEdgeData",value:function(f){this.offset=30,pf(ra(h.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return No(No({},pf(ra(h.prototype),"getEdgeStyle",this).call(this)),to(f))}},{key:"getTextPosition",value:function(){var f,m=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!m){var w=this.dbClickPosition;return{x:w.x,y:w.y}}var T=tr(this.points),N=df(Gn(T),2),F=N[0],Z=N[1];return{x:(F.x+Z.x)/2,y:(F.y+Z.y)/2}}},{key:"getAfterAnchor",value:function(f,m,w){var T,N;return w.forEach(function(F){var Z;f===co.HORIZONTAL?Z=Math.abs(m.y-F.y):f===co.VERTICAL&&(Z=Math.abs(m.x-F.x)),(!N||N>Z)&&(N=Z,T=F)}),T}},{key:"getCrossPoint",value:function(f,m,w){var T;return f===co.HORIZONTAL?T={x:w.x,y:m.y}:f===co.VERTICAL&&(T={x:m.x,y:w.y}),T}},{key:"removeCrossPoints",value:function(f,m,w){var T=w.map(function(it){return it});if(f===1){var N=T[f],F=T[m],Z=T[f-1];if(nr(Z,N,this.sourceNode)){if(_r(N,F,this.sourceNode)){var te=Do(N,F,this.sourceNode);te&&(T[f]=te,T.splice(f-1,1),f--,m--)}}else this.sourceNode.anchors.forEach(function(it){(it.x===Z.x&&it.x===N.x||it.y===Z.y&&it.y===N.y)&&ll(it.x,it.y,N.x,N.y)<ll(Z.x,Z.y,N.x,N.y)&&(T[f-1]=it)})}if(m===w.length-2){var _e=T[f],Me=T[m],je=T[m+1];if(nr(Me,je,this.targetNode)){if(_r(_e,Me,this.targetNode)){var at=Do(_e,Me,this.targetNode);at&&(T[m]=at,T.splice(m+1,1))}}else this.targetNode.anchors.forEach(function(it){(it.x===je.x&&it.x===Me.x||it.y===je.y&&it.y===Me.y)&&ll(it.x,it.y,Me.x,Me.y)<ll(je.x,je.y,Me.x,Me.y)&&(T[m+1]=it)})}return T}},{key:"getDraggingPoints",value:function(f,m,w,T,N){var F=N.map(function(_e){return _e}),Z=this.getAfterAnchor(f,w,T),te=this.getCrossPoint(f,w,Z);return m==="start"?(F.unshift(te),F.unshift(Z)):(F.push(te),F.push(Z)),F}},{key:"updateCrossPoints",value:function(f){var m=f.map(function(Vt){return Vt}),w=f[0],T=f[1],N=f[m.length-2],F=f[m.length-1],Z=this.sourceNode,te=this.targetNode,_e=Z.modelType,Me=te.modelType,je=ko(w,T),at=m[0];switch(_e){case Sr.RECT_NODE:Z.radius!==0&&(rf(w,Z)||(at=nf(w,je,Z)));break;case Sr.CIRCLE_NODE:at=ls(w,je,Z);break;case Sr.ELLIPSE_NODE:at=Zs(w,je,Z);break;case Sr.DIAMOND_NODE:case Sr.POLYGON_NODE:at=of(w,je,Z)}at&&(m[0]=at);var it=ko(N,F),yt=m[m.length-1];switch(Me){case Sr.RECT_NODE:te.radius!==0&&(rf(F,te)||(yt=nf(F,it,te)));break;case Sr.CIRCLE_NODE:yt=ls(F,it,te);break;case Sr.ELLIPSE_NODE:yt=Zs(F,it,te);break;case Sr.DIAMOND_NODE:case Sr.POLYGON_NODE:yt=of(F,it,te)}return yt&&(m[m.length-1]=yt),m}},{key:"getData",value:function(){var f=pf(ra(h.prototype),"getData",this).call(this),m=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return Object.assign({},f,{pointsList:m})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=ur({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(m){return"".concat(m.x,",").concat(m.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,m){this.startPoint.x+=f,this.startPoint.y+=m,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveEndPoint",value:function(f,m){this.endPoint.x+=f,this.endPoint.y+=m,this.updatePoints()}},{key:"updatePointsList",value:function(f,m){this.pointsList.forEach(function(N){N.x+=f,N.y+=m});var w=this.pointsList[0];this.startPoint=Object.assign({},w);var T=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},T),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,m){this.isDragging=!0;var w=f.start,T=f.end,N=f.startIndex,F=f.endIndex,Z=f.direction,te=this.pointsList,_e=te;return Z===co.HORIZONTAL?(te[N]={x:w.x,y:w.y+m.y},te[F]={x:T.x,y:T.y+m.y},_e=this.pointsList.map(function(Me){return Me})):Z===co.VERTICAL&&(te[N]={x:w.x+m.x,y:w.y},te[F]={x:T.x+m.x,y:T.y},_e=this.pointsList.map(function(Me){return Me})),this.updatePointsAfterDrag(_e),this.draggingPointList=_e,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[N]),end:Object.assign({},te[F]),startIndex:N,endIndex:F,direction:Z}}},{key:"dragAppend",value:function(f,m){this.isDragging=!0;var w=f.start,T=f.end,N=f.startIndex,F=f.endIndex,Z=f.direction,te=this.pointsList;if(Z===co.HORIZONTAL){te[N]={x:w.x,y:w.y+m.y},te[F]={x:T.x,y:T.y+m.y};var _e=this.pointsList.map(function(hn){return hn});if(N!==0&&F!==this.pointsList.length-1&&(_e=this.removeCrossPoints(N,F,_e)),N===0){var Me={x:w.x,y:w.y+m.y};if(!Ou(Me,this.sourceNode)){var je=this.sourceNode.anchors;_e=this.getDraggingPoints(Z,"start",Me,je,_e)}}if(F===this.pointsList.length-1){var at={x:T.x,y:T.y+m.y};if(!Ou(at,this.targetNode)){var it=this.targetNode.anchors;_e=this.getDraggingPoints(Z,"end",at,it,_e)}}this.updatePointsAfterDrag(_e),this.draggingPointList=_e}else if(Z===co.VERTICAL){te[N]={x:w.x+m.x,y:w.y},te[F]={x:T.x+m.x,y:T.y};var yt=this.pointsList.map(function(hn){return hn});if(N!==0&&F!==this.pointsList.length-1&&(yt=this.removeCrossPoints(N,F,yt)),N===0){var Vt={x:w.x+m.x,y:w.y};if(!Ou(Vt,this.sourceNode)){var gn=this.sourceNode.anchors;yt=this.getDraggingPoints(Z,"start",Vt,gn,yt)}}if(F===this.pointsList.length-1){var yn={x:T.x+m.x,y:T.y};if(!Ou(yn,this.targetNode)){var zn=this.targetNode.anchors;yt=this.getDraggingPoints(Z,"end",yn,zn,yt)}}this.updatePointsAfterDrag(yt),this.draggingPointList=yt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[N]),end:Object.assign({},te[F]),startIndex:N,endIndex:F,direction:Z}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=pn(tr(this.points));this.pointsList=f.map(function(T){return T}),this.draggingPointList=[];var m=f[0];this.startPoint=Object.assign({},m);var w=f[f.length-1];this.endPoint=Object.assign({},w)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var m=this.updateCrossPoints(f);this.points=m.map(function(w){return"".concat(w.x,",").concat(w.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var m=f.startPoint,w=f.endPoint,T=f.sourceNode,N=f.targetNode,F=ur({x:m.x,y:m.y},{x:w.x,y:w.y},T,N,this.offset||0);this.pointsList=F,this.initPoints()}}])&&am(o.prototype,l),h}(cf),Cp=Mi(Un.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi(Un.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"initPoints"),Un.prototype),Mi(Un.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updatePoints"),Un.prototype),Mi(Un.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updateStartPoint"),Un.prototype),Mi(Un.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"moveStartPoint"),Un.prototype),Mi(Un.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updateEndPoint"),Un.prototype),Mi(Un.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"moveEndPoint"),Un.prototype),Mi(Un.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updatePointsList"),Un.prototype),Mi(Un.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppendStart"),Un.prototype),Mi(Un.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppendSimple"),Un.prototype),Mi(Un.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppend"),Un.prototype),Mi(Un.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppendEnd"),Un.prototype),Mi(Un.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updatePointsAfterDrag"),Un.prototype),Mi(Un.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"getAdjustStart"),Un.prototype),Mi(Un.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"getAdjustEnd"),Un.prototype),Mi(Un.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updateAfterAdjustStartAndEnd"),Un.prototype),Un),ds=function(i){var o=i.start,l=i.end,s=i.offset,h=i.verticalLength,f=i.type,m={leftX:0,leftY:0,rightX:0,rightY:0},w=Math.atan((l.y-o.y)/(l.x-o.x)),T=Math.atan(s/h),N=Math.sqrt(h*h+s*s);return f==="start"?l.x>=o.x?(m.leftX=o.x+N*Math.sin(w+T),m.leftY=o.y-N*Math.cos(w+T),m.rightX=o.x-N*Math.sin(w-T),m.rightY=o.y+N*Math.cos(w-T)):(m.leftX=o.x-N*Math.sin(w+T),m.leftY=o.y+N*Math.cos(w+T),m.rightX=o.x+N*Math.sin(w-T),m.rightY=o.y-N*Math.cos(w-T)):f==="end"&&(l.x>=o.x?(m.leftX=l.x+N*Math.sin(w-T),m.leftY=l.y-N*Math.cos(w-T),m.rightX=l.x-N*Math.sin(w+T),m.rightY=l.y+N*Math.cos(w+T)):(m.leftX=l.x-N*Math.sin(w-T),m.leftY=l.y+N*Math.cos(w-T),m.rightX=l.x+N*Math.sin(w+T),m.rightY=l.y-N*Math.cos(w+T))),m},hf={x:1,y:0,z:0};function Co(i,o,l,s,h){for(var f=function(Me){if(Me<0||Me>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:i.x*Math.pow(1-Me,3)+3*o.x*Me*Math.pow(1-Me,2)+3*l.x*Math.pow(Me,2)*(1-Me)+s.x*Math.pow(Me,3),y:i.y*Math.pow(1-Me,3)+3*o.y*Me*Math.pow(1-Me,2)+3*l.y*Math.pow(Me,2)*(1-Me)+s.y*Math.pow(Me,3)}},m=0,w=2,T=s.x,N=s.y,F=s;m<h&&w<50;){var Z=F=f(1-w/100),te=Z.x,_e=Z.y;m=ll(T,N,te,_e),w++}return F}function Go(i){var o=Math.hypot(i.x,i.y);return{x:i.x/o,y:i.y/o,z:0}}function kd(i){return s=function(f,m){return f.x*m.y-f.y*m.x}(o=hf,l=i),h=Math.acos(function(f,m){var w=[f.x,f.y,f.z];return[m.x,m.y,m.z].reduce(function(T,N,F){return T+N*w[F]})}(Go(o),Go(l))),s>=0?h:-h;var o,l,s,h}function jp(i){return i*(180/Math.PI)}function V(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function le(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?V(Object(l),!0).forEach(function(s){Oe(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):V(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Oe(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function rt(i){return function(o){if(Array.isArray(o))return Rt(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||dt(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ht(i){return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ht(i)}function Qe(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||dt(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dt(i,o){if(i){if(typeof i=="string")return Rt(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Rt(i,o):void 0}}function Rt(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var Lt=function(i,o){var l;switch(i.type){case"line":default:l=new Qs(i,o);break;case"polyline":l=new Aa(i,o)}return l},Nt=function(i,o){return 2*Math.abs(i.centerX-o.centerX)<i.width+o.width&&2*Math.abs(i.centerY-o.centerY)<i.height+o.height},ct=function(i){var o=[],l={};return i.forEach(function(s){var h="".concat(s.x,"-").concat(s.y);s.id=h,l[h]=s}),Object.keys(l).forEach(function(s){o.push(l[s])}),o},Ht=function(i,o){var l=[i,{x:i.x,y:o.y},o];return ct(l)},Ut=function(i,o){return i.width===0&&i.height===0?i:{centerX:i.centerX,centerY:i.centerY,minX:i.minX-o,minY:i.minY-o,maxX:i.maxX+o,maxY:i.maxY+o,height:i.height+2*o,width:i.width+2*o}},Ct=function(i,o){var l=Math.abs(i.x-o.centerX),s=Math.abs(i.y-o.centerY);return l/o.width>s/o.height?co.HORIZONTAL:co.VERTICAL},Et=function(i,o,l){return Ct(l,o)===co.HORIZONTAL?{x:l.x>i.centerX?i.maxX:i.minX,y:l.y}:{x:l.x,y:l.y>i.centerY?i.maxY:i.minY}},Ke=function(i,o){var l=Math.min(i.minX,o.minX),s=Math.min(i.minY,o.minY),h=Math.max(i.maxX,o.maxX),f=Math.max(i.maxY,o.maxY);return{centerX:(l+h)/2,centerY:(s+f)/2,minX:l,minY:s,maxX:h,maxY:f,height:f-s,width:h-l}},st=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,l=[],s=[];i.forEach(function(F){l.push(F.x),s.push(F.y)});var h=Math.min.apply(Math,l),f=Math.max.apply(Math,l),m=Math.min.apply(Math,s),w=Math.max.apply(Math,s),T=f-h,N=w-m;return o&&(T+=o,N+=o),{centerX:(h+f)/2,centerY:(m+w)/2,maxX:f,maxY:w,minX:h,minY:m,x:(h+f)/2,y:(m+w)/2,height:N,width:T}},It=function(i){var o=i.minX,l=i.minY,s=i.maxX,h=i.maxY;return[{x:o,y:l},{x:s,y:l},{x:s,y:h},{x:o,y:h}]},Jt=function(i,o){var l=i.x,s=i.y;return l<o.minX||l>o.maxX||s<o.minY||s>o.maxY},At=function(i,o){return o<i.minX||o>i.maxX?[]:[{x:o,y:i.minY},{x:o,y:i.maxY}]},rn=function(i,o){return o<i.minY||o>i.maxY?[]:[{x:i.minX,y:o},{x:i.maxX,y:o}]},Mt=function(i,o){return At(i,o.x).concat(rn(i,o.y))},Wt=function(i,o){return Math.abs(i.x-o.x)+Math.abs(i.y-o.y)},Tt=function(i,o){var l=0;return o.forEach(function(s){s&&(i.x===s.x&&(l+=-2),i.y===s.y&&(l+=-2))}),l},qt=function(i,o,l,s,h){return Wt(i,o)+Wt(i,l)+Tt(i,[o,l,s,h])},kn=function i(o,l,s,h,f){f||(f=0),o.unshift(l[h]),s[h]&&s[h]!==h&&f<=100&&i(o,l,s,s[h],f+1)},Vn=function(i,o){var l=i.indexOf(o);l>-1&&i.splice(l,1)},Dt=function(i,o,l,s){var h=o.x-i.x,f=o.y-i.y,m=s.x-l.x,w=s.y-l.y,T=(-f*(i.x-l.x)+h*(i.y-l.y))/(-m*f+h*w),N=(m*(i.y-l.y)-w*(i.x-l.x))/(-m*f+h*w);return T>=0&&T<=1&&N>=0&&N<=1},kt=function(i,o,l){if(l.width===0&&l.height===0)return!1;var s=Qe(It(l),4),h=s[0],f=s[1],m=s[2],w=s[3];return Dt(i,o,h,f)||Dt(i,o,h,w)||Dt(i,o,f,m)||Dt(i,o,m,w)},xt=function(i,o,l,s){var h=[];return i.forEach(function(f){f!==o&&(f.x!==o.x&&f.y!==o.y||kt(f,o,l)||kt(f,o,s)||h.push(f))}),ct(h)},jn=function(i,o,l,s,h,f,m){var w=[],T=[o],N={},F={},Z={};F[o.id]=0,Z[o.id]=qt(o,l,o);var te={};i.forEach(function(je){te[je.id]=je});for(var _e=function(){var je=void 0,at=1/0;if(T.forEach(function(yt){Z[yt.id]<at&&(at=Z[yt.id],je=yt)}),je===l){var it=[];return kn(it,te,N,l.id),{v:it}}Vn(T,je),w.push(je),xt(i,je,s,h).forEach(function(yt){if(w.indexOf(yt)===-1){T.indexOf(yt)===-1&&T.push(yt);var Vt=Z[je.id]+Wt(je,yt);F[yt.id]&&Vt>=F[yt.id]||(N[yt.id]=je.id,F[yt.id]=Vt,Z[yt.id]=F[yt.id]+qt(yt,l,o,f,m))}})};T.length;){var Me=_e();if(ht(Me)==="object")return Me.v}return[o,l]},er=function(i){return bo(i)},pn=function(i){for(var o=1;o<i.length-1;){var l=i[o-1],s=i[o],h=i[o+1];l.x===s.x&&s.x===h.x||l.y===s.y&&s.y===h.y?i.splice(o,1):o++}return i},ur=function(i,o,l,s,h){var f=er(l),m=er(s),w=Ut(f,h),T=Ut(m,h),N=Et(w,f,i),F=Et(T,m,o);if(Nt(w,T)){var Z=Xo(i,o,N,F);return[i,N].concat(rt(Z),[F,o])}var te=st([N,F]),_e=Ke(w,te),Me=Ke(T,te),je=[];je=(je=je.concat(It(_e))).concat(It(Me));var at={x:(i.x+o.x)/2,y:(i.y+o.y)/2};[te,_e,Me].forEach(function(yt){je=je.concat(Mt(yt,at).filter(function(Vt){return Jt(Vt,w)&&Jt(Vt,T)}))}),[{x:N.x,y:F.y},{x:F.x,y:N.y}].forEach(function(yt){Jt(yt,w)&&Jt(yt,T)&&je.push(yt)}),je.unshift(N),je.push(F),je=ct(je);var it=jn(je,N,F,f,m,i,o);return it.unshift(i),it.push(o),it.length>2&&(it=pn(it)),ct(it)},Gn=function(i){var o;if(i.length===1)o=[i[0],i[0]];else if(i.length>=2){for(var l=i[0],s=i[1],h=ll(l.x,l.y,s.x,s.y),f=1;f<i.length-1;f++){var m=i[f],w=i[f+1],T=ll(m.x,m.y,w.x,w.y);T>h&&(h=T,l=m,s=w)}o=[l,s]}return o},nr=function(i,o,l){var s=Ou(i,l),h=Ou(o,l);return s&&h},_r=function(i,o,l){var s=Ou(i,l),h=Ou(o,l);return!(s&&h)&&(s||h)},Do=function(i,o,l){for(var s,h,f=bo(l),m=It(f),w=0;w<m.length;w++)Dt(i,o,m[w],m[(w+1)%m.length])&&(h=[m[w],m[(w+1)%m.length]]);return h&&(s=function(T,N,F,Z){var te=(N.y-T.y)*(Z.x-F.x)-(T.x-N.x)*(F.y-Z.y);if(te===0)return!1;var _e=((N.x-T.x)*(Z.x-F.x)*(F.y-T.y)+(N.y-T.y)*(Z.x-F.x)*T.x-(Z.y-F.y)*(N.x-T.x)*F.x)/te,Me=-((N.y-T.y)*(Z.y-F.y)*(F.x-T.x)+(N.x-T.x)*(Z.y-F.y)*T.y-(Z.x-F.x)*(N.y-T.y)*F.y)/te;return(_e-T.x)*(_e-N.x)<=0&&(Me-T.y)*(Me-N.y)<=0&&(_e-F.x)*(_e-Z.x)<=0&&(Me-F.y)*(Me-Z.y)<=0&&{x:_e,y:Me}}(i,o,h[0],h[1])),s},ko=function(i,o){var l;return i.x===o.x?l=co.VERTICAL:i.y===o.y&&(l=co.HORIZONTAL),l},tr=function(i){var o=i.split(" "),l=[];return o&&o.forEach(function(s){var h=Qe(s.split(","),2),f=h[0],m=h[1];l.push({x:Number(f),y:Number(m)})}),l},Xo=function(i,o,l,s){var h=[];if(ko(i,l)===ko(o,s))i.y===l.y?(h.push({x:l.x,y:(l.y+s.y)/2}),h.push({x:s.x,y:(l.y+s.y)/2})):(h.push({x:(l.x+s.x)/2,y:l.y}),h.push({x:(l.x+s.x)/2,y:s.y}));else{var f={x:l.x,y:s.y},m=Fi(f,i,l),w=Fi(f,o,s);if(m||w)f={x:s.x,y:l.y};else{var T=ao(f,i,l),N=ao(f,o,s);T&&N&&(f={x:s.x,y:l.y})}h.push(f)}return h},ao=function(i,o,l){return i.x===o.x&&i.x===l.x||i.y===o.y&&i.y===l.y},jo=function(i){if(!i)return 0;for(var o=0,l=0;l<i.length;l++){var s=i.charCodeAt(l);i.match(/[A-Z]/)?o+=1.5:o+=s>=1&&s<=126||s>=65376&&s<=65439?1:2}return o},Wo=null,ii=function(i,o){Wo||(Wo=document.createElement("canvas"));var l=Wo.getContext("2d");return l.font=o,l.measureText(i).width},di=function(i){var o,l=i.start,s=i.end;if(l.x===s.x&&l.y===s.y)o="";else{var h={start:l,end:s,offset:10,verticalLength:5},f=ds(le(le({},h),{},{type:"start"})),m=ds(le(le({},h),{},{type:"end"}));o="M".concat(f.leftX," ").concat(f.leftY,` 
    L`).concat(f.rightX," ").concat(f.rightY,` 
    L`).concat(m.rightX," ").concat(m.rightY,`
    L`).concat(m.leftX," ").concat(m.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},qo=function(i){var o=i.start,l=i.end,s=i.sourceNode,h=i.targetNode,f=i.offset,m=bo(s),w=bo(h),T=Ut(m,f),N=Ut(w,f);return{sNext:Et(T,m,o),ePre:Et(N,w,l)}},ho=function(i){var o=i.replace(/M/g,"").replace(/C/g,",").split(",");return[Yn(o[0]),Yn(o[1]),Yn(o[2]),Yn(o[3])]},Yn=function(i){var o=Qe(i.replace(/(^\s*)/g,"").split(" "),2);return{x:+o[0],y:+o[1]}},pi=function(i,o){var l=Qe(i,4);return[Co(l[0],l[1],l[2],l[3],o),i[3]]},Ar=function(i,o){for(var l,s=i.x,h=i.y,f=tr(o),m=Number.MAX_SAFE_INTEGER,w=[],T=0;T<f.length;T++)w.push({start:f[T],end:f[(T+1)%f.length]});if(w.forEach(function(te){var _e=te.start,Me=te.end;if(_e.x===Me.x){var je={x:_e.x,y:h};if(Fi(je,_e,Me)){var at=Math.abs(_e.x-s);at<m&&(m=at,l=je)}}else if(_e.y===Me.y){var it={x:s,y:_e.y};if(Fi(it,_e,Me)){var yt=Math.abs(_e.y-h);yt<m&&(m=yt,l=it)}}}),!l){var N=w[0],F=N.start,Z=N.end;l={x:F.x+(Z.x-F.x)/2,y:F.y+(Z.y-F.y)/2}}return l},Dn=function(i){return tl(i,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},hr=function(i,o){return Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2))};function Kn(i,o){return typeof o!="function"?function(l,s,h){return Object.assign({type:i.edgeType},h)}:function(l,s,h){var f=o(l,s,h);return f?typeof f=="string"?Object.assign({},h,{type:f}):Object.assign({type:f},h):{type:i.edgeType}}}r(208);var vo=function(){};function Ml(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function wo(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ge=function(){function i(s){var h=this,f=s.onDragStart,m=f===void 0?vo:f,w=s.onDragging,T=w===void 0?vo:w,N=s.onDragEnd,F=N===void 0?vo:N,Z=s.eventType,te=Z===void 0?"":Z,_e=s.eventCenter,Me=_e===void 0?null:_e,je=s.step,at=je===void 0?1:je,it=s.isStopPropagation,yt=it===void 0||it,Vt=s.model,gn=Vt===void 0?null:Vt,yn=s.data,zn=yn===void 0?null:yn;(function(hn,In){if(!(hn instanceof In))throw new TypeError("Cannot call a class as a function")})(this,i),wo(this,"onDragStart",void 0),wo(this,"onDragging",void 0),wo(this,"onDragEnd",void 0),wo(this,"step",void 0),wo(this,"isStopPropagation",void 0),wo(this,"isDragging",!1),wo(this,"isStartDragging",!1),wo(this,"startX",0),wo(this,"startY",0),wo(this,"sumDeltaX",0),wo(this,"sumDeltaY",0),wo(this,"eventType",void 0),wo(this,"eventCenter",void 0),wo(this,"model",void 0),wo(this,"data",void 0),wo(this,"startTime",void 0),wo(this,"handleMouseDown",function(hn){var In,Sn,Ir,Ur=(In=window)===null||In===void 0?void 0:In.document;if(hn.button===0){h.isStopPropagation&&hn.stopPropagation(),h.isStartDragging=!0,h.startX=hn.clientX,h.startY=hn.clientY,Ur.addEventListener("mousemove",h.handleMouseMove,!1),Ur.addEventListener("mouseup",h.handleMouseUp,!1);var pr=(Sn=h.model)===null||Sn===void 0?void 0:Sn.getData();(Ir=h.eventCenter)===null||Ir===void 0||Ir.emit(Cn["".concat(h.eventType,"_MOUSEDOWN")],{e:hn,data:h.data||pr}),h.startTime=new Date().getTime()}}),wo(this,"handleMouseMove",function(hn){if(h.isStopPropagation&&hn.stopPropagation(),h.isStartDragging&&(h.sumDeltaX+=hn.clientX-h.startX,h.sumDeltaY+=hn.clientY-h.startY,h.startX=hn.clientX,h.startY=hn.clientY,h.step<=1||Math.abs(h.sumDeltaX)>h.step||Math.abs(h.sumDeltaY)>h.step)){var In,Sn=h.sumDeltaX%h.step,Ir=h.sumDeltaY%h.step,Ur=h.sumDeltaX-Sn,pr=h.sumDeltaY-Ir;h.sumDeltaX=Sn,h.sumDeltaY=Ir;var Kr,bi=(In=h.model)===null||In===void 0?void 0:In.getData();h.isDragging||((Kr=h.eventCenter)===null||Kr===void 0||Kr.emit(Cn["".concat(h.eventType,"_DRAGSTART")],{e:hn,data:h.data||bi}),h.onDragStart({event:hn})),h.isDragging=!0,Promise.resolve().then(function(){var wi,Ta;h.onDragging({deltaX:Ur,deltaY:pr,event:hn}),(wi=h.eventCenter)===null||wi===void 0||wi.emit(Cn["".concat(h.eventType,"_MOUSEMOVE")],{e:hn,data:h.data||bi}),(Ta=h.eventCenter)===null||Ta===void 0||Ta.emit(Cn["".concat(h.eventType,"_DRAG")],{e:hn,data:h.data||bi})})}}),wo(this,"handleMouseUp",function(hn){var In=window.document;h.isStartDragging=!1,h.isStopPropagation&&hn.stopPropagation(),Promise.resolve().then(function(){var Sn,Ir,Ur;In.removeEventListener("mousemove",h.handleMouseMove,!1),In.removeEventListener("mouseup",h.handleMouseUp,!1);var pr=(Sn=h.model)===null||Sn===void 0?void 0:Sn.getData();(Ir=h.eventCenter)===null||Ir===void 0||Ir.emit(Cn["".concat(h.eventType,"_MOUSEUP")],{e:hn,data:h.data||pr}),h.isDragging&&(h.isDragging=!1,h.onDragEnd({event:hn}),(Ur=h.eventCenter)===null||Ur===void 0||Ur.emit(Cn["".concat(h.eventType,"_DROP")],{e:hn,data:h.data||pr}))})}),wo(this,"cancelDrag",function(){var hn,In=(hn=window)===null||hn===void 0?void 0:hn.document;In.removeEventListener("mousemove",h.handleMouseMove,!1),In.removeEventListener("mouseup",h.handleMouseUp,!1),h.onDragEnd({event:null}),h.isDragging=!1}),this.onDragStart=m,this.onDragging=T,this.onDragEnd=F,this.step=at,this.isStopPropagation=yt,this.eventType=te,this.eventCenter=Me,this.model=gn,this.data=zn}var o,l;return o=i,(l=[{key:"setStep",value:function(s){this.step=s}},{key:"setModel",value:function(s){this.model=s}}])&&Ml(o.prototype,l),i}();function ot(i){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ot(i)}function et(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function un(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function dr(i,o,l){return o&&un(i.prototype,o),i}function he(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&Le(i,o)}function re(i){var o=Pe();return function(){var l,s=pe(i);if(o){var h=pe(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return ke(this,l)}}function ke(i,o){if(o&&(ot(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ve(i)}function Ve(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ze(i){var o=typeof Map=="function"?new Map:void 0;return Ze=function(l){if(l===null||(s=l,Function.toString.call(s).indexOf("[native code]")===-1))return l;var s;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(l))return o.get(l);o.set(l,h)}function h(){return De(l,arguments,pe(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),Le(h,l)},Ze(i)}function De(i,o,l){return De=Pe()?Reflect.construct:function(s,h,f){var m=[null];m.push.apply(m,h);var w=new(Function.bind.apply(s,m));return f&&Le(w,f.prototype),w},De.apply(null,arguments)}function Pe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Le(i,o){return Le=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Le(i,o)}function pe(i){return pe=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},pe(i)}function Te(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function fe(i,o){return i instanceof We&&o instanceof We}var Ge=function(i){he(l,i);var o=re(l);function l(s,h,f){var m;return et(this,l),Te(Ve(m=o.call(this,3)),"x",void 0),Te(Ve(m),"y",void 0),Te(Ve(m),"z",void 0),m[0]=s,m[1]=h,m[2]=f,m.x=s,m.y=h,m.z=f,Object.setPrototypeOf(Ve(m),l.prototype),m}return dr(l,[{key:"add",value:function(s){if(fe(this,s))return new We(this.x+s.x,this.y+s.y);var h=this.z+s.z;return new p((this.x+s.x)/h,(this.y+s.y)/h)}},{key:"subtract",value:function(s){if(fe(this,s))return new We(this.x-s.x,this.y-s.y);var h=this.z-s.z;return h===0?new We(this.x-s.x,this.y-s.y):new p((this.x-s.x)/h,(this.y-s.y)/h)}}]),l}(Ze(Array)),We=function(i){he(l,i);var o=re(l);function l(s,h,f){var m;return et(this,l),m=o.call(this,s,h,f??0),Object.setPrototypeOf(Ve(m),l.prototype),m}return dr(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(s){var h=this;return s.reduce(function(f,m,w){return f+m*h[w]})}},{key:"cross",value:function(s){return new l(this.y*s.z-this.z*s.y,this.z*s.x-this.x*s.z,this.x*s.y-this.y*s.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var s=this.getLength();return new l(this.x/s,this.y/s)}},{key:"crossZ",value:function(s){return this.x*s.y-this.y*s.x}},{key:"angle",value:function(s){var h=this.crossZ(s),f=Math.acos(this.normalize().dot(s.normalize()));return h>=0?f:-f}}]),l}(Ge),p=function(i){he(l,i);var o=re(l);function l(s,h){var f;return et(this,l),f=o.call(this,s,h,1),Object.setPrototypeOf(Ve(f),l.prototype),f}return dr(l,[{key:"toString",value:function(){return"Point"}}]),l}(Ge);r(67),r(218);function y(i){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},y(i)}function E(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||q(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function I(i){return function(o){if(Array.isArray(o))return ne(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||q(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function q(i,o){if(i){if(typeof i=="string")return ne(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?ne(i,o):void 0}}function ne(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function ve(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function xe(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Fe(i,o,l){return o&&xe(i.prototype,o),i}function vt(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&Qt(i,o)}function wt(i){var o=jt();return function(){var l,s=rr(i);if(o){var h=rr(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return Gt(this,l)}}function Gt(i,o){if(o&&(y(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wn(i)}function wn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function On(i){var o=typeof Map=="function"?new Map:void 0;return On=function(l){if(l===null||(s=l,Function.toString.call(s).indexOf("[native code]")===-1))return l;var s;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(l))return o.get(l);o.set(l,h)}function h(){return Wn(l,arguments,rr(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),Qt(h,l)},On(i)}function Wn(i,o,l){return Wn=jt()?Reflect.construct:function(s,h,f){var m=[null];m.push.apply(m,h);var w=new(Function.bind.apply(s,m));return f&&Qt(w,f.prototype),w},Wn.apply(null,arguments)}function jt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qt(i,o){return Qt=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Qt(i,o)}function rr(i){return rr=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},rr(i)}function Mn(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ze,vr,Fr,Xn,sr,ki,Va,Zl,Pi,Au,ps,Pd,Ip,Tu=function(i){vt(l,i);var o=wt(l);function l(){var s;ve(this,l);for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];return Mn(wn(s=o.call(this,f.length)),"rows",void 0),Mn(wn(s),"columns",void 0),s.fill(new Array(3)),f.forEach(function(w,T){s[T]=w}),s.columns=f[0].length,s.rows=f.length,Object.setPrototypeOf(wn(s),l.prototype),s}return Fe(l,[{key:"getRow",value:function(s){return this[s]}},{key:"getColumn",value:function(s){return I(this.map(function(h){return h[s]}))}},{key:"transpose",value:function(){for(var s=[],h=0;h<this.columns;h++)s.push(this.getColumn(h));return Wn(l,s)}},{key:"cross",value:function(s){var h=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===s.rows)for(var f=0;f<this.rows;f++)for(var m=this.getRow(f),w=function(N){var F=s.getColumn(N);h[f][N]=m.reduce(function(Z,te,_e){return Z+te*F[_e]},0)},T=0;T<s.columns;T++)w(T);return Wn(l,I(h))}},{key:"to2D",value:function(){return this.map(function(s){return[s[0],s[1]]})}},{key:"toPoints",value:function(){return this.map(function(s){return new p(s[0],s[1])})}},{key:"toString",value:function(){var s=E(this[0],2),h=s[0],f=s[1],m=E(this[1],2),w=m[0],T=m[1],N=E(this[2],2),F=N[0],Z=N[1];return"matrix(".concat(h," ").concat(f," ").concat(w," ").concat(T," ").concat(F," ").concat(Z,")")}},{key:"translate",value:function(s,h){return this.cross(new Rd(s,h))}},{key:"rotate",value:function(s){return this.cross(new ec(s))}},{key:"scale",value:function(s,h){return this.cross(new lm(s,h))}}]),l}(On(Array)),ec=function(i){vt(l,i);var o=wt(l);function l(s){var h;return ve(this,l),h=o.call(this,new We(+Math.cos(s).toFixed(2),+Math.sin(s).toFixed(2),0),new We(-Math.sin(s).toFixed(2),+Math.cos(s).toFixed(2),0),new We(0,0,1)),Object.setPrototypeOf(wn(h),l.prototype),h}return Fe(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Tu),lm=function(i){vt(l,i);var o=wt(l);function l(s,h){var f;return ve(this,l),Mn(wn(f=o.call(this,new We(s,0,0),new We(0,h,0),new We(0,0,1))),"sx",void 0),Mn(wn(f),"sy",void 0),f.sx=s,f.sy=h,Object.setPrototypeOf(wn(f),l.prototype),f}return Fe(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Tu),Rd=function(i){vt(l,i);var o=wt(l);function l(s,h){var f;return ve(this,l),Mn(wn(f=o.call(this,new We(1,0,0),new We(0,1,0),new We(s,h,1))),"tx",void 0),Mn(wn(f),"ty",void 0),f.tx=s,f.ty=h,Object.setPrototypeOf(wn(f),l.prototype),f}return Fe(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Tu),Lp={node:!1,edge:!1},um={node:!0,edge:!0};function Fp(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function vf(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Fp(Object(l),!0).forEach(function(s){vs(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Fp(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function mf(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||$p(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hs(i){return function(o){if(Array.isArray(o))return V_(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||$p(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $p(i,o){if(i){if(typeof i=="string")return V_(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?V_(i,o):void 0}}function V_(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function cy(i){return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},cy(i)}function Mu(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function qR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function vs(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function qn(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var o2,i2=200,a2=(ze=function(){function i(s){(function(_e,Me){if(!(_e instanceof Me))throw new TypeError("Cannot call a class as a function")})(this,i),vs(this,"rootEl",void 0),Mu(this,"width",vr,this),Mu(this,"height",Fr,this),vs(this,"theme",void 0),vs(this,"eventCenter",void 0),vs(this,"modelMap",new Map),vs(this,"topElement",void 0),vs(this,"animation",void 0),vs(this,"idGenerator",void 0),vs(this,"edgeGenerator",void 0),vs(this,"nodeMoveRules",[]),vs(this,"customTrajectory",void 0),Mu(this,"edgeType",Xn,this),Mu(this,"nodes",sr,this),Mu(this,"edges",ki,this),Mu(this,"overlapMode",Va,this),Mu(this,"background",Zl,this),Mu(this,"transformModel",Pi,this),Mu(this,"editConfigModel",Au,this),Mu(this,"gridSize",ps,this),Mu(this,"partial",Pd,this),Mu(this,"fakerNode",Ip,this);var h,f=s.container,m=s.background,w=m===void 0?{}:m,T=s.grid,N=s.idGenerator,F=s.edgeGenerator,Z=s.animation,te=s.customTrajectory;this.background=w,cy(T)==="object"&&(this.gridSize=T.size),this.rootEl=f,this.editConfigModel=new od(s),this.eventCenter=new md,this.transformModel=new mp(this.eventCenter,s),this.theme=Xl(s.style),this.edgeType=s.edgeType||"polyline",this.width=s.width,this.height=s.height,this.animation=(h=Z)&&typeof h!="boolean"?ts(to(Lp),h):to(h===!0?um:Lp),this.partial=s.partial,this.overlapMode=s.overlapMode||0,this.idGenerator=N,this.customTrajectory=te,this.edgeGenerator=Kn(this,F),this.width=s.width||this.rootEl.getBoundingClientRect().width,this.height=s.height||this.rootEl.getBoundingClientRect().height,this.flowId=na()}var o,l;return o=i,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(s,h,f){return s[h.id]={index:f,model:h},s},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(s,h,f){return s[h.id]={index:f,model:h},s},{})}},{key:"modelsMap",get:function(){return[].concat(hs(this.nodes),hs(this.edges)).reduce(function(s,h){return s[h.id]=h,s},{})}},{key:"sortElements",get:function(){var s=[];this.nodes.forEach(function(N){return s.push(N)}),this.edges.forEach(function(N){return s.push(N)}),s=s.sort(function(N,F){return N.zIndex-F.zIndex});for(var h=[],f=[-200,-200],m=[this.width+i2,this.height+i2],w=0;w<s.length;w++){var T=s[w];T.visible&&(!this.partial||T.isSelected||this.isElementInArea(T,f,m,!1,!1))&&h.push(T)}return h}},{key:"textEditElement",get:function(){var s=this.nodes.find(function(f){return f.state===Yr.TEXT_EDIT}),h=this.edges.find(function(f){return f.state===Yr.TEXT_EDIT});return s||h}},{key:"selectElements",get:function(){var s=new Map;return this.nodes.forEach(function(h){h.isSelected&&s.set(h.id,h)}),this.edges.forEach(function(h){h.isSelected&&s.set(h.id,h)}),s}},{key:"selectNodes",get:function(){var s=[];return this.nodes.forEach(function(h){h.isSelected&&s.push(h)}),s}},{key:"getAreaElement",value:function(s,h){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=arguments.length>4&&arguments[4]!==void 0&&arguments[4],T=[],N=[];this.nodes.forEach(function(te){return N.push(te)}),this.edges.forEach(function(te){return N.push(te)});for(var F=0;F<N.length;F++){var Z=N[F];w&&!Z.visible||!this.isElementInArea(Z,s,h,f,m)||T.push(Z)}return T}},{key:"getModel",value:function(s){return this.modelMap.get(s)}},{key:"getNodeModelById",value:function(s){var h;return this.fakerNode&&s===this.fakerNode.id?this.fakerNode:(h=this.nodesMap[s])===null||h===void 0?void 0:h.model}},{key:"getPointByClient",value:function(s){var h=s.x,f=s.y,m=this.rootEl.getBoundingClientRect(),w={x:h-m.left,y:f-m.top},T=mf(this.transformModel.HtmlPointToCanvasPoint([w.x,w.y]),2);return{domOverlayPosition:w,canvasOverlayPosition:{x:T[0],y:T[1]}}}},{key:"isElementInArea",value:function(s,h,f){var m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(s.BaseType===so.NODE){for(var T=bo(s=s),N=T.minX,F=T.minY,Z=T.maxX,te=T.maxY,_e=[{x:N,y:F},{x:Z,y:F},{x:Z,y:te},{x:N,y:te}],Me=w,je=0;je<_e.length;je++){var at=_e[je],it=at.x,yt=at.y,Vt=this.transformModel.CanvasPointToHtmlPoint([it,yt]),gn=mf(Vt,2);if(it=gn[0],yt=gn[1],Hs([it,yt],h,f)!==w){Me=!w;break}}return Me}if(s.BaseType===so.EDGE){var yn=s=s,zn=yn.startPoint,hn=yn.endPoint,In=this.transformModel.CanvasPointToHtmlPoint([zn.x,zn.y]),Sn=this.transformModel.CanvasPointToHtmlPoint([hn.x,hn.y]),Ir=Hs(In,h,f),Ur=Hs(Sn,h,f);return m?Ir&&Ur:Ir||Ur}return!1}},{key:"graphDataToModel",value:function(s){var h=this;if(this.width&&this.height||this.resize(),!s)return this.nodes=[],void(this.edges=[]);s.nodes?this.nodes=Qf(s.nodes,function(f){return h.getModelAfterSnapToGrid(f)}):this.nodes=[],s.edges?this.edges=Qf(s.edges,function(f){var m=h.getModel(f.type);if(!m)throw new Error("找不到".concat(f.type,"对应的边。"));return new m(f,h)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var s=[];this.edges.forEach(function(f){var m=f.getData();m&&!f.virtual&&s.push(m)});var h=[];return this.nodes.forEach(function(f){var m=f.getData();m&&!f.virtual&&h.push(m)}),{nodes:h,edges:s}}},{key:"modelToHistoryData",value:function(){for(var s=!1,h=[],f=0;f<this.nodes.length;f++){var m=this.nodes[f];if(m.isDragging){s=!0;break}h.push(m.getHistoryData())}if(s)return!1;for(var w=!1,T=[],N=0;N<this.edges.length;N++){var F=this.edges[N];if(F.isDragging){w=!0;break}T.push(F.getHistoryData())}return!w&&{nodes:h,edges:T}}},{key:"getEdgeModelById",value:function(s){var h;return(h=this.edgesMap[s])===null||h===void 0?void 0:h.model}},{key:"getElement",value:function(s){return this.modelsMap[s]}},{key:"getNodeEdges",value:function(s){for(var h=[],f=0;f<this.edges.length;f++){var m=this.edges[f],w=this.edges[f].sourceNodeId===s,T=this.edges[f].targetNodeId===s;(w||T)&&h.push(m)}return h}},{key:"getSelectElements",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],h=this.selectElements,f={nodes:[],edges:[]};return h.forEach(function(m){if(m.BaseType===so.NODE&&f.nodes.push(m.getData()),m.BaseType===so.EDGE){var w=m.getData(),T=h.get(w.sourceNodeId)&&h.get(w.targetNodeId);(s||T)&&f.edges.push(w)}}),f}},{key:"updateAttributes",value:function(s,h){this.getElement(s).updateAttributes(h)}},{key:"changeNodeId",value:function(s,h){return h||(h=na()),this.nodesMap[h]?"":this.nodesMap[s]?(this.edges.forEach(function(f){f.sourceNodeId===s&&(f.sourceNodeId=h),f.targetNodeId===s&&(f.targetNodeId=h)}),this.nodesMap[s].model.id=h,this.nodesMap[h]=this.nodesMap[s],h):""}},{key:"changeEdgeId",value:function(s,h){return h||(h=na()),this.edgesMap[h]?"":this.edgesMap[s]?(this.edges.forEach(function(f){f.id===s&&f.changeEdgeId(h)}),h):""}},{key:"setFakerNode",value:function(s){this.fakerNode=s}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(s,h){return this.modelMap.set(s,h)}},{key:"toFront",value:function(s){var h,f,m,w=((h=this.nodesMap[s])===null||h===void 0?void 0:h.model)||((f=this.edgesMap[s])===null||f===void 0?void 0:f.model);w&&(this.overlapMode===Ao.DEFAULT&&((m=this.topElement)===null||m===void 0||m.setZIndex(),w.setZIndex(9999),this.topElement=w),this.overlapMode===Ao.INCREASE&&this.setElementZIndex(s,"top"))}},{key:"setElementZIndex",value:function(s,h){var f,m,w,T=((f=this.nodesMap[s])===null||f===void 0?void 0:f.model)||((m=this.edgesMap[s])===null||m===void 0?void 0:m.model);T&&(typeof h=="number"&&(w=h),h==="top"&&(w=ss()),h==="bottom"&&(w=--uf),T.setZIndex(w))}},{key:"deleteNode",value:function(s){var h=this.nodesMap[s].model.getData();this.deleteEdgeBySource(s),this.deleteEdgeByTarget(s),this.nodes.splice(this.nodesMap[s].index,1),this.eventCenter.emit(Cn.NODE_DELETE,{data:h})}},{key:"addNode",value:function(s){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,m=_i(s);m.id&&this.nodesMap[s.id]&&delete m.id;var w=this.getModelAfterSnapToGrid(m);this.nodes.push(w);var T=w.getData(),N={data:T};return f&&(N.e=f),this.eventCenter.emit(h,N),w}},{key:"getModelAfterSnapToGrid",value:function(s){var h=this.getModel(s.type);if(!h)throw new Error("找不到".concat(s.type,"对应的节点，请确认是否已注册此类型节点。"));var f=s.x,m=s.y;return f&&m&&(s.x=rl(f,this.gridSize),s.y=rl(m,this.gridSize),cy(s.text)==="object"&&(s.text.x+=s.x-f,s.text.y+=s.y-m)),new h(s,this)}},{key:"cloneNode",value:function(s){var h=this.getNodeModelById(s),f=h.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var m=this.addNode(f);return m.setSelected(!0),h.setSelected(!1),m.getData()}},{key:"moveNode",value:function(s,h,f){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[s];if(w){var T=w.model,N=T.getMoveDistance(h,f,m),F=mf(N,2);h=F[0],f=F[1],this.moveEdge(s,h,f)}}},{key:"moveNode2Coordinate",value:function(s,h,f){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[s];if(w){var T=w.model,N=T.x,F=T.y,Z=h-N,te=f-F;this.moveNode(s,Z,te,m)}}},{key:"editText",value:function(s){this.setElementStateById(s,Yr.TEXT_EDIT)}},{key:"addEdge",value:function(s){var h=_i(s),f=h.type;f||(f=this.edgeType),h.id&&this.edgesMap[h.id]&&delete h.id;var m=this.getModel(f);if(!m)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var w=new m(vf(vf({},h),{},{type:f}),this),T=w.getData();return this.edges.push(w),this.eventCenter.emit(Cn.EDGE_ADD,{data:T}),w}},{key:"moveEdge",value:function(s,h,f){for(var m=0;m<this.edges.length;m++){var w=this.edges[m],T=w.textPosition,N=T.x,F=T.y,Z=this.edges[m].sourceNodeId===s,te=this.edges[m].targetNodeId===s;Z&&w.moveStartPoint(h,f),te&&w.moveEndPoint(h,f),(Z||te)&&this.handleEdgeTextMove(w,N,F)}}},{key:"handleEdgeTextMove",value:function(s,h,f){var m;if(s.customTextPosition===!0)s.resetTextPosition();else if(s.modelType===Sr.POLYLINE_EDGE&&(m=s.text)!==null&&m!==void 0&&m.value){var w=s.text,T=Ar(w,s.points);s.moveText(T.x-w.x,T.y-w.y)}else{var N=s.textPosition,F=N.x,Z=N.y;s.moveText(F-h,Z-f)}}},{key:"deleteEdgeBySourceAndTarget",value:function(s,h){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===s&&this.edges[f].targetNodeId===h){var m=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:m})}}},{key:"deleteEdgeById",value:function(s){if(this.edgesMap[s]){var h=this.edgesMap[s].index,f=this.edgesMap[s].model.getData();this.edges.splice(h,1),this.eventCenter.emit(Cn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(s){for(var h=0;h<this.edges.length;h++)if(this.edges[h].sourceNodeId===s){var f=this.edges[h].getData();this.edges.splice(h,1),h--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(s){for(var h=0;h<this.edges.length;h++)if(this.edges[h].targetNodeId===s){var f=this.edges[h].getData();this.edges.splice(h,1),h--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(s,h,f){this.nodes.forEach(function(m){m.id===s?m.setElementState(h,f):m.setElementState(Yr.DEFAULT)}),this.edges.forEach(function(m){m.id===s?m.setElementState(h,f):m.setElementState(Yr.DEFAULT)})}},{key:"updateText",value:function(s,h){this.nodes.forEach(function(f){f.id===s&&f.updateText(h)}),this.edges.forEach(function(f){f.id===s&&f.updateText(h)})}},{key:"selectNodeById",value:function(s){var h,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var m=(h=this.nodesMap[s])===null||h===void 0?void 0:h.model;m==null||m.setSelected(!0)}},{key:"selectEdgeById",value:function(s){var h,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var m=(h=this.edgesMap[s])===null||h===void 0?void 0:h.model;m==null||m.setSelected(!0)}},{key:"selectElementById",value:function(s){var h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];h||this.clearSelectElements();var f=this.getElement(s);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var s;this.selectElements.forEach(function(h){h==null||h.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===Ao.DEFAULT&&((s=this.topElement)===null||s===void 0||s.setZIndex())}},{key:"moveNodes",value:function(s,h,f){for(var m=this,w=arguments.length>3&&arguments[3]!==void 0&&arguments[3],T=s.reduce(function(yn,zn){var hn=m.nodesMap[zn].model.getMoveDistance(h,f,w);return yn[zn]=hn,yn},{}),N=0;N<this.edges.length;N++){var F=this.edges[N],Z=F.textPosition,te=Z.x,_e=Z.y,Me=T[F.sourceNodeId],je=T[F.targetNodeId],at=void 0,it=void 0;if(Me&&je&&F.modelType===Sr.POLYLINE_EDGE){var yt=mf(Me,2);at=yt[0],it=yt[1],F.updatePointsList(at,it)}else{if(Me){var Vt=mf(Me,2);at=Vt[0],it=Vt[1],F.moveStartPoint(at,it)}if(je){var gn=mf(je,2);at=gn[0],it=gn[1],F.moveEndPoint(at,it)}}(Me||je)&&this.handleEdgeTextMove(F,te,_e)}}},{key:"addNodeMoveRules",value:function(s){this.nodeMoveRules.includes(s)||this.nodeMoveRules.push(s)}},{key:"setDefaultEdgeType",value:function(s){this.edgeType=s}},{key:"changeNodeType",value:function(s,h){var f=this.getNodeModelById(s);if(f){var m=f.getData();m.type=h;var w=this.getModel(h);if(!w)throw new Error("找不到".concat(h,"对应的节点，请确认是否已注册此类型节点。"));var T=new w(m,this);this.nodes.splice(this.nodesMap[s].index,1,T),this.getNodeEdges(s).forEach(function(N){if(N.sourceNodeId===s){var F=af(T,N.startPoint,T.width,T.height);N.updateStartPoint(F)}if(N.targetNodeId===s){var Z=af(T,N.endPoint,T.width,T.height);N.updateEndPoint(Z)}})}}},{key:"changeEdgeType",value:function(s,h){var f=this.getEdgeModelById(s);if(f&&f.type!==h){var m=f.getData();m.type=h;var w=this.getModel(h);if(!w)throw new Error("找不到".concat(h,"对应的节点，请确认是否已注册此类型节点。"));delete m.pointsList;var T=new w(m,this);this.edges.splice(this.edgesMap[s].index,1,T)}}},{key:"getNodeIncomingEdge",value:function(s){var h=[];return this.edges.forEach(function(f){f.targetNodeId===s&&h.push(f)}),h}},{key:"getNodeOutgoingEdge",value:function(s){var h=[];return this.edges.forEach(function(f){f.sourceNodeId===s&&h.push(f)}),h}},{key:"getAnchorIncomingEdge",value:function(s){var h=[];return this.edges.forEach(function(f){f.targetAnchorId===s&&h.push(f)}),h}},{key:"getAnchorOutcomingEdge",value:function(s){var h=[];return this.edges.forEach(function(f){f.sourceAnchorId===s&&h.push(f)}),h}},{key:"getNodeIncomingNode",value:function(s){var h=this,f=[];return this.edges.forEach(function(m){m.targetNodeId===s&&f.push(h.nodesMap[m.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(s){var h=this,f=[];return this.edges.forEach(function(m){m.sourceNodeId===s&&f.push(h.nodesMap[m.targetNodeId].model)}),f}},{key:"setTheme",value:function(s){this.theme=Xl(vf(vf({},this.theme),s))}},{key:"resize",value:function(s,h){this.width=s||this.rootEl.getBoundingClientRect().width,this.height=h||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var s=this.nodes,h=[],f=[];s.forEach(function(Z){var te=Z.x,_e=Z.y,Me=Z.width,je=Z.height,at=Z.getNodeStyle().strokeWidth,it=at===void 0?0:at,yt=te+Me/2+it,Vt=te-Me/2-it,gn=_e+je/2+it,yn=_e-je/2-it;h=h.concat([yt,Vt].filter(function(zn){return!Number.isNaN(zn)})),f=f.concat([gn,yn].filter(function(zn){return!Number.isNaN(zn)}))});var m=Math.min.apply(Math,hs(h)),w=Math.max.apply(Math,hs(h)),T=Math.min.apply(Math,hs(f)),N=w-m||0,F=Math.max.apply(Math,hs(f))-T||0;return{virtualRectWidth:N,virtualRectHeight:F,virtualRectCenterPositionX:m+N/2,virtualRectCenterPositionY:T+F/2}}},{key:"translateCenter",value:function(){var s=this.nodes,h=this.width,f=this.height,m=this.rootEl,w=this.transformModel;if(s.length){var T=h||m.clientWidth,N=f||m.clientHeight,F=this.getVirtualRectSize(),Z=F.virtualRectCenterPositionX,te=F.virtualRectCenterPositionY;w.focusOn(Z,te,T,N)}}},{key:"fitView",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,m=this.width,w=this.height,T=this.rootEl,N=this.transformModel;if(f.length){var F=m||T.clientWidth,Z=w||T.clientHeight,te=this.getVirtualRectSize(),_e=te.virtualRectWidth,Me=te.virtualRectHeight,je=te.virtualRectCenterPositionX,at=te.virtualRectCenterPositionY,it=(_e+h)/F,yt=(Me+s)/Z,Vt=0;Vt=1/Math.max(it,yt);var gn=[F/2,Z/2];N.zoom(Vt,gn),N.focusOn(je,at,F,Z)}}},{key:"openEdgeAnimation",value:function(s){this.getEdgeModelById(s).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(s){this.getEdgeModelById(s).closeEdgeAnimation()}}],l&&qR(o.prototype,l),i}(),vr=qn(ze.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fr=qn(ze.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xn=qn(ze.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr=qn(ze.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ki=qn(ze.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Va=qn(ze.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ao.DEFAULT}}),Zl=qn(ze.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pi=qn(ze.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Au=qn(ze.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ps=qn(ze.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Pd=qn(ze.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ip=qn(ze.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn(ze.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(ze.prototype,"nodesMap"),ze.prototype),qn(ze.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(ze.prototype,"edgesMap"),ze.prototype),qn(ze.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(ze.prototype,"modelsMap"),ze.prototype),qn(ze.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(ze.prototype,"sortElements"),ze.prototype),qn(ze.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(ze.prototype,"textEditElement"),ze.prototype),qn(ze.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(ze.prototype,"selectElements"),ze.prototype),qn(ze.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(ze.prototype,"selectNodes"),ze.prototype),qn(ze.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"setFakerNode"),ze.prototype),qn(ze.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"removeFakerNode"),ze.prototype),qn(ze.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"setModel"),ze.prototype),qn(ze.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"toFront"),ze.prototype),qn(ze.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"setElementZIndex"),ze.prototype),qn(ze.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"deleteNode"),ze.prototype),qn(ze.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"addNode"),ze.prototype),qn(ze.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"cloneNode"),ze.prototype),qn(ze.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"moveNode"),ze.prototype),qn(ze.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"moveNode2Coordinate"),ze.prototype),qn(ze.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"editText"),ze.prototype),qn(ze.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"addEdge"),ze.prototype),qn(ze.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"moveEdge"),ze.prototype),qn(ze.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"deleteEdgeBySourceAndTarget"),ze.prototype),qn(ze.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"deleteEdgeById"),ze.prototype),qn(ze.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"deleteEdgeBySource"),ze.prototype),qn(ze.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"deleteEdgeByTarget"),ze.prototype),qn(ze.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"setElementStateById"),ze.prototype),qn(ze.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"updateText"),ze.prototype),qn(ze.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"selectNodeById"),ze.prototype),qn(ze.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"selectEdgeById"),ze.prototype),qn(ze.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"selectElementById"),ze.prototype),qn(ze.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"clearSelectElements"),ze.prototype),qn(ze.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"moveNodes"),ze.prototype),qn(ze.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"setDefaultEdgeType"),ze.prototype),qn(ze.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"changeNodeType"),ze.prototype),qn(ze.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"changeEdgeType"),ze.prototype),qn(ze.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"getNodeIncomingEdge"),ze.prototype),qn(ze.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"getNodeOutgoingEdge"),ze.prototype),qn(ze.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"getAnchorIncomingEdge"),ze.prototype),qn(ze.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"getAnchorOutcomingEdge"),ze.prototype),qn(ze.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"getNodeIncomingNode"),ze.prototype),qn(ze.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"getNodeOutgoingNode"),ze.prototype),qn(ze.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"setTheme"),ze.prototype),qn(ze.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"resize"),ze.prototype),qn(ze.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"clearData"),ze.prototype),qn(ze.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"translateCenter"),ze.prototype),qn(ze.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"fitView"),ze.prototype),qn(ze.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"openEdgeAnimation"),ze.prototype),qn(ze.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(ze.prototype,"closeEdgeAnimation"),ze.prototype),ze),YR=a2;function G_(i){return G_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},G_(i)}function W_(){return W_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},W_.apply(this,arguments)}function KR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function z_(i,o){return z_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},z_(i,o)}function ZR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=fy(i);if(o){var h=fy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return JR(this,l)}}function JR(i,o){if(o&&(G_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tc(i)}function tc(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function fy(i){return fy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},fy(i)}function yf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var l2,QR=_s(o2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&z_(f,m)})(h,i);var o,l,s=ZR(h);function h(f){var m;(function(F,Z){if(!(F instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,h),yf(tc(m=s.call(this)),"stepDrag",void 0),yf(tc(m),"stepScrollX",0),yf(tc(m),"stepScrollY",0),yf(tc(m),"onDragging",function(F){var Z=F.deltaX,te=F.deltaY;m.setState({isDragging:!0});var _e=m.props.graphModel,Me=_e.transformModel;_e.editConfigModel.stopMoveGraph!==!0&&Me.translate(Z,te)}),yf(tc(m),"onDragEnd",function(){m.setState({isDragging:!1})}),yf(tc(m),"zoomHandler",function(F){var Z=m.props,te=Z.graphModel,_e=te.editConfigModel,Me=te.transformModel,je=te.gridSize,at=Z.graphModel,it=F.deltaX,yt=F.deltaY;if(_e.stopScrollGraph||F.ctrlKey===!0){if(!_e.stopZoomGraph){F.preventDefault();var Vt=at.getPointByClient({x:F.clientX,y:F.clientY}).canvasOverlayPosition,gn=Vt.x,yn=Vt.y;Me.zoom(F.deltaY<0,[gn,yn])}}else{if(F.preventDefault(),m.stepScrollX+=it,m.stepScrollY+=yt,Math.abs(m.stepScrollX)>=je){var zn=m.stepScrollX%je,hn=m.stepScrollX-zn;Me.translate(-hn*Me.SCALE_X,0),m.stepScrollX=zn}if(Math.abs(m.stepScrollY)>=je){var In=m.stepScrollY%je,Sn=m.stepScrollY-In;Me.translate(0,-Sn*Me.SCALE_Y),m.stepScrollY=In}}}),yf(tc(m),"clickHandler",function(F){if(F.target.getAttribute("name")==="canvas-overlay"){var Z=m.props.graphModel;Z.selectElements.size>0&&Z.clearSelectElements(),Z.eventCenter.emit(Cn.BLANK_CLICK,{e:F})}}),yf(tc(m),"handleContextMenu",function(F){if(F.target.getAttribute("name")==="canvas-overlay"){F.preventDefault();var Z=m.props.graphModel,te=Z.getPointByClient({x:F.clientX,y:F.clientY});Z.eventCenter.emit(Cn.BLANK_CONTEXTMENU,{e:F,position:te})}}),yf(tc(m),"mouseDownHandler",function(F){var Z=m.props.graphModel,te=Z.eventCenter,_e=Z.editConfigModel,Me=Z.transformModel.SCALE_X,je=Z.gridSize,at=F.target,it=!_e.adjustEdge&&!_e.adjustNodePosition;(at.getAttribute("name")==="canvas-overlay"||it)&&(_e.stopMoveGraph!==!0?(m.stepDrag.setStep(je*Me),m.stepDrag.handleMouseDown(F)):te.emit(Cn.BLANK_MOUSEDOWN,{e:F}),m.clickHandler(F))});var w=f.graphModel,T=w.gridSize,N=w.eventCenter;return m.stepDrag=new ge({onDragging:m.onDragging,onDragEnd:m.onDragEnd,step:T,eventType:"BLANK",isStopPropagation:!1,eventCenter:N,model:null}),m.state={isDragging:!1},m}return o=h,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props,w=m.children,T=m.dnd,N=this.state.isDragging;return Object($e.g)("svg",W_({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:N?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},T.eventMap()),Object($e.g)("g",{transform:f},w))}}])&&KR(o.prototype,l),h}($e.a))||o2;function H_(i){return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},H_(i)}function eN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function tN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function X_(i,o){return X_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},X_(i,o)}function nN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=dy(i);if(o){var h=dy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return rN(this,l)}}function rN(i,o){if(o&&(H_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function dy(i){return dy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},dy(i)}var oN=_s(l2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&X_(f,m)})(h,i);var o,l,s=nN(h);function h(){return eN(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,m=f.tool,w=f.graphModel,T=m.getTools().map(function(N){return Object($e.g)(N,{graphModel:w,logicFlow:m.instance})});return m.components=T,T}},{key:"triggerToolRender",value:function(){var f=this.props,m=f.tool,w=f.graphModel,T=document.querySelector("#ToolOverlay_".concat(w.flowId)),N=m.getInstance();N.components.forEach(function(F){return F(N,T)}),N.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object($e.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&tN(o.prototype,l),h}($e.a))||l2;function q_(i){return q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},q_(i)}function iN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function aN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Y_(i,o){return Y_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Y_(i,o)}function lN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=py(i);if(o){var h=py(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return uN(this,l)}}function uN(i,o){if(o&&(q_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function py(i){return py=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},py(i)}var u2,sN=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Y_(f,m)})(h,i);var o,l,s=lN(h);function h(){return iN(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var f=this.props.background;return Object($e.g)("div",{className:"lf-background"},Object($e.g)("div",{style:f,className:"lf-background-area"}))}}])&&aN(o.prototype,l),h}($e.a);function K_(i){return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},K_(i)}function cN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function fN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Z_(i,o){return Z_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Z_(i,o)}function dN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=hy(i);if(o){var h=hy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return pN(this,l)}}function pN(i,o){if(o&&(K_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s2(i)}function s2(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function hy(i){return hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},hy(i)}function hN(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var c2=_s(u2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Z_(f,m)})(h,i);var o,l,s=dN(h);function h(){var f;cN(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return hN(s2(f=s.call.apply(s,[this].concat(w))),"id",na()),f}return o=h,(l=[{key:"renderDot",value:function(){var f=this.props,m=f.config,w=m.color,T=m.thickness,N=T===void 0?2:T,F=f.size,Z=f.visible,te=Math.min(Math.max(2,N),F/2),_e=1;return Z||(_e=0),Object($e.g)("rect",{width:te,height:te,rx:te/2,ry:te/2,fill:w,opacity:_e})}},{key:"renderMesh",value:function(){var f=this.props,m=f.config,w=m.color,T=m.thickness,N=T===void 0?1:T,F=f.size,Z=f.visible,te=Math.min(Math.max(1,N),F/2),_e="M ".concat(F," 0 H0 M0 0 V0 ").concat(F),Me=1;return Z||(Me=0),Object($e.g)("path",{d:_e,stroke:w,strokeWidth:te,opacity:Me})}},{key:"render",value:function(){var f=this.props,m=f.type,w=f.size,T=f.graphModel.transformModel,N=[T.SCALE_X,T.SKEW_Y,T.SKEW_X,T.SCALE_Y,T.TRANSLATE_X,T.TRANSLATE_Y].join(","),F="matrix(".concat(N,")");return Object($e.g)("div",{className:"lf-grid"},Object($e.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object($e.g)("defs",null,Object($e.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:F,x:"0",y:"0",width:w,height:w},m==="dot"&&this.renderDot(),m==="mesh"&&this.renderMesh())),Object($e.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&fN(o.prototype,l),h}($e.a))||u2;c2.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function J_(i){return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},J_(i)}function vN(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return f2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return f2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var d2,Wh=function(i){var o={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(i).forEach(function(l){var s=vN(l,2),h=s[0],f=s[1];(h==="style"||J_(f)!=="object")&&(o[h]=f)}),Object($e.g)("line",o)};function Q_(i){return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Q_(i)}function p2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function vy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?p2(Object(l),!0).forEach(function(s){mN(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):p2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function mN(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function yN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function gN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function eb(i,o){return eb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},eb(i,o)}function _N(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=my(i);if(o){var h=my(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return bN(this,l)}}function bN(i,o){if(o&&(Q_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function my(i){return my=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},my(i)}var h2,wN=_s(d2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&eb(f,m)})(h,i);var o,l,s=_N(h);function h(){return yN(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var f=this.props.snaplineModel,m=f.position,w=f.isShowHorizontal,T=f.isShowVertical,N=f.getStyle(),F=m.x,Z=F===void 0?0:F,te=m.y,_e=te===void 0?0:te,Me=vy(vy({x1:-1e5,y1:_e,x2:1e5,y2:_e},N),{},{stroke:w?N.stroke:"none"}),je=vy(vy({x1:Z,y1:-1e5,x2:Z,y2:1e5},N),{},{stroke:T?N.stroke:"none"});return Object($e.g)("g",{className:"lf-snapline"},Object($e.g)(Wh,Me),Object($e.g)(Wh,je))}}])&&gN(o.prototype,l),h}($e.a))||d2;function tb(i){return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},tb(i)}function EN(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return v2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return v2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function Nd(i){var o=i.x,l=i.y,s=i.width,h=i.height,f=i.className,m=i.radius,w=o-s/2,T=l-h/2,N={};return Object.entries(i).forEach(function(F){var Z=EN(F,2),te=Z[0],_e=Z[1];tb(_e)!=="object"&&(N[te]=_e)}),N.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",m&&(N.rx=m,N.ry=m),N.x=w,N.y=T,Object($e.g)("rect",N)}function nb(i){return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},nb(i)}function zh(){return zh=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},zh.apply(this,arguments)}function m2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function y2(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?m2(Object(l),!0).forEach(function(s){ON(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):m2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function ON(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function SN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function xN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function rb(i,o){return rb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},rb(i,o)}function AN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=yy(i);if(o){var h=yy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return TN(this,l)}}function TN(i,o){if(o&&(nb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function yy(i){return yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},yy(i)}Nd.defaultProps={className:"",radius:""};var g2,MN=_s(h2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&rb(f,m)})(h,i);var o,l,s=AN(h);function h(){return SN(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,m=f.nodes,w=f.editConfigModel,T=w.hoverOutline,N=w.nodeSelectedOutline,F=[];return m.forEach(function(Z){if(Z.isHovered||Z.isSelected){var te=Z.isHovered,_e=Z.isSelected,Me=Z.x,je=Z.y,at=Z.width,it=Z.height;if(N&&_e||T&&te){var yt=Z.getOutlineStyle(),Vt={};if(Object.keys(yt).forEach(function(yn){yn!=="hover"&&(Vt[yn]=yt[yn])}),te){var gn=yt.hover;Vt=y2(y2({},Vt),gn)}F.push(Object($e.g)(Nd,zh({transform:Z.transform,className:"lf-outline-node",x:Me,y:je,width:at+10,height:it+10},Vt)))}}}),F}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,m=f.edges,w=f.editConfigModel,T=w.edgeSelectedOutline,N=w.hoverOutline,F=[],Z=0;Z<m.length;Z++){var te=m[Z];(T&&te.isSelected||N&&te.isHovered)&&(te.modelType===Sr.LINE_EDGE?F.push(this.getLineOutline(te)):te.modelType===Sr.POLYLINE_EDGE?F.push(this.getPolylineOutline(te)):te.modelType===Sr.BEZIER_EDGE&&F.push(this.getBezierOutline(te)))}return F}},{key:"getLineOutline",value:function(f){var m=f.startPoint,w=f.endPoint,T=(m.x+w.x)/2,N=(m.y+w.y)/2,F=Math.abs(m.x-w.x)+10,Z=Math.abs(m.y-w.y)+10,te=f.getOutlineStyle();return Object($e.g)(Nd,zh({className:"lf-outline-edge",x:T,y:N,width:F,height:Z},te))}},{key:"getPolylineOutline",value:function(f){var m=f.points,w=tr(m),T=st(w,8),N=T.x,F=T.y,Z=T.width,te=T.height,_e=f.getOutlineStyle();return Object($e.g)(Nd,zh({className:"lf-outline",x:N,y:F,width:Z,height:te},_e))}},{key:"getBezierOutline",value:function(f){var m=f.path,w=ho(m),T=st(w,8),N=T.x,F=T.y,Z=T.width,te=T.height,_e=f.getOutlineStyle();return Object($e.g)(Nd,zh({className:"lf-outline",x:N,y:F,width:Z,height:te},_e))}},{key:"render",value:function(){return Object($e.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&xN(o.prototype,l),h}($e.a))||h2;function ob(i){return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ob(i)}function kN(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return _2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function Hh(i){var o=i.x,l=o===void 0?0:o,s=i.y,h=s===void 0?0:s,f=i.r,m=f===void 0?4:f,w=i.className,T={cx:l,cy:h,r:m,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(N){var F=kN(N,2),Z=F[0],te=F[1];ob(te)!=="object"&&(T[Z]=te)}),T.className=w?"lf-basic-shape ".concat(w):"lf-basic-shape",Object($e.g)("circle",T)}function ib(i){return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ib(i)}function PN(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return b2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return b2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function b2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function sm(){return sm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},sm.apply(this,arguments)}function w2(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function RN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function E2(i,o,l){return o&&RN(i.prototype,o),i}function O2(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&ab(i,o)}function ab(i,o){return ab=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},ab(i,o)}function S2(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=_y(i);if(o){var h=_y(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return NN(this,l)}}function NN(i,o){if(o&&(ib(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gy(i)}function gy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _y(i){return _y=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_y(i)}function lb(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var x2,A2=function(i){O2(l,i);var o=S2(l);function l(){var s;return w2(this,l),lb(gy(s=o.call(this)),"dragHandler",void 0),lb(gy(s),"onDragging",function(h){var f=h.event,m=s.props,w=m.graphModel,T=m.bezierModel,N=m.type,F=w.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,Z=F.x,te=F.y;T.updateAdjustAnchor({x:Z,y:te},N),w.eventCenter.emit(Cn.EDGE_ADJUST,{data:T.getData()})}),lb(gy(s),"onDragEnd",function(){s.props.bezierModel.isDragging=!1}),s.dragHandler=new ge({onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return E2(l,[{key:"render",value:function(){var s=this,h=this.props.position,f=h.x,m=h.y,w=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object($e.g)(Hh,sm({className:"lf-bezier-adjust-anchor",x:f,y:m},w,{onMouseDown:function(T){s.dragHandler.handleMouseDown(T)}}))}}]),l}($e.a),CN=_s(g2=function(i){O2(l,i);var o=S2(l);function l(){return w2(this,l),o.apply(this,arguments)}return E2(l,[{key:"getBezierAdjust",value:function(s,h){var f=s.path,m=s.id,w=PN(ho(f),4),T=w[0],N=w[1],F=w[2],Z=w[3],te=s.getEdgeStyle().adjustLine,_e=[];return _e.push(Object($e.g)(Wh,sm({x1:T.x,y1:T.y,x2:N.x,y2:N.y},te))),_e.push(Object($e.g)(A2,{position:N,bezierModel:s,graphModel:h,key:"".concat(m,"_ePre"),type:"sNext"})),_e.push(Object($e.g)(Wh,sm({x1:Z.x,y1:Z.y,x2:F.x,y2:F.y},te))),_e.push(Object($e.g)(A2,{position:F,bezierModel:s,graphModel:h,key:"".concat(m,"_sNext"),type:"ePre"})),_e}},{key:"selectedBezierEdge",value:function(){for(var s=this.props.graphModel,h=s.edges,f=[],m=0;m<h.length;m++){var w=h[m];w.isSelected&&w.modelType===Sr.BEZIER_EDGE&&w.draggable&&f.push(this.getBezierAdjust(w,s))}return f}},{key:"render",value:function(){return Object($e.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}($e.a))||g2;function ub(i){return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ub(i)}function DN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function jN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function sb(i,o){return sb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},sb(i,o)}function IN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=by(i);if(o){var h=by(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return LN(this,l)}}function LN(i,o){if(o&&(ub(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function by(i){return by=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},by(i)}var T2,FN=_s(x2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&sb(f,m)})(h,i);var o,l,s=IN(h);function h(){return DN(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props.children;return Object($e.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object($e.g)("g",{transform:f},m))}}])&&jN(o.prototype,l),h}($e.a))||x2;function cb(i){return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},cb(i)}function fb(){return fb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},fb.apply(this,arguments)}function $N(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function BN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function db(i,o){return db=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},db(i,o)}function UN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=wy(i);if(o){var h=wy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return VN(this,l)}}function VN(i,o){if(o&&(cb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function wy(i){return wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},wy(i)}var GN=_s(T2=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&db(f,m)})(h,i);var o,l,s=UN(h);function h(){return $N(this,h),s.apply(this,arguments)}return o=h,l=[{key:"getComponent",value:function(f,m){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",T=this.props.getView,N=T(f.type);return Object($e.g)(N,{key:f.id,model:f,graphModel:m,overlay:w})}},{key:"render",value:function(){var f=this,m=this.props,w=m.graphModel,T=m.tool,N=m.options,F=m.dnd,Z=m.snaplineModel,te={};N.width&&(te.width="".concat(w.width,"px")),N.height&&(te.height="".concat(w.height,"px"));var _e=N.grid,Me=w.fakerNode,je=w.editConfigModel.adjustEdge;return Object($e.g)("div",{className:"lf-graph","flow-id":w.flowId,style:te},Object($e.g)(QR,{graphModel:w,dnd:F},Object($e.g)("g",{className:"lf-base"},Qf(w.sortElements,function(at){return f.getComponent(at,w)})),Me?this.getComponent(Me,w):""),Object($e.g)(FN,{graphModel:w},Object($e.g)(MN,{graphModel:w}),je?Object($e.g)(CN,{graphModel:w}):"",N.snapline!==!1?Object($e.g)(wN,{snaplineModel:Z}):""),Object($e.g)(oN,{graphModel:w,tool:T}),N.background&&Object($e.g)(sN,{background:N.background}),N.grid&&Object($e.g)(c2,fb({},_e,{graphModel:w})))}}],l&&BN(o.prototype,l),h}($e.a))||T2,WN=GN;function M2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Ey(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?M2(Object(l),!0).forEach(function(s){gf(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):M2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function zN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function gf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var HN=function(){function i(s){var h=this;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),gf(this,"nodeConfig",void 0),gf(this,"lf",void 0),gf(this,"fakerNode",void 0),gf(this,"stopDrag",function(){h.nodeConfig=null,window.document.removeEventListener("mouseup",h.stopDrag)}),gf(this,"dragEnter",function(m){h.nodeConfig&&!h.fakerNode&&(h.fakerNode=h.lf.createFakerNode(Ey(Ey({},h.nodeConfig),h.clientToLocalPoint({x:m.clientX,y:m.clientY}))))}),gf(this,"onDragOver",function(m){if(m.preventDefault(),h.fakerNode){var w=h.clientToLocalPoint({x:m.clientX,y:m.clientY}),T=w.x,N=w.y;h.fakerNode.moveTo(T,N);var F=h.fakerNode.getData();h.lf.setNodeSnapLine(F),h.lf.graphModel.eventCenter.emit(Cn.NODE_DND_DRAG,{data:F})}return!1}),gf(this,"onDragLeave",function(){h.fakerNode&&(h.lf.removeNodeSnapLine(),h.lf.graphModel.removeFakerNode(),h.fakerNode=null)}),gf(this,"onDrop",function(m){h.lf.graphModel&&m&&h.nodeConfig&&(h.lf.addNode(Ey(Ey({},h.nodeConfig),h.clientToLocalPoint({x:m.clientX,y:m.clientY})),Cn.NODE_DND_ADD,m),m.preventDefault(),m.stopPropagation(),h.nodeConfig=null,h.lf.removeNodeSnapLine(),h.lf.graphModel.removeFakerNode(),h.fakerNode=null)});var f=s.lf;this.lf=f}var o,l;return o=i,(l=[{key:"clientToLocalPoint",value:function(s){var h=s.x,f=s.y,m=Wu(this.lf.options,["grid","size"]),w=this.lf.graphModel.getPointByClient({x:h,y:f}).canvasOverlayPosition,T=w.x,N=w.y;return{x:rl(T,m),y:rl(N,m)}}},{key:"startDrag",value:function(s){var h=this.lf.graphModel.editConfigModel;h!=null&&h.isSilentMode||(this.nodeConfig=s,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&zN(o.prototype,l),i}();function k2(i){var o=i.container,l=i.grid,s=i.width,h=i.height;if(!o)throw new Error("请检查 container 参数是否有效");if(typeof s=="string"||typeof h=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(i.grid=ts({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),ts({},R2,i)}var lo,P2,R2={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function pb(i){return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},pb(i)}function hb(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return N2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return N2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function N2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function C2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Oy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?C2(Object(l),!0).forEach(function(s){D2(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):C2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function XN(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function qN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function YN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function cm(){return cm=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=KN(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},cm.apply(this,arguments)}function KN(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Cd(i))!==null;);return i}function vb(i,o){return vb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},vb(i,o)}function ZN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Cd(i);if(o){var h=Cd(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return JN(this,l)}}function JN(i,o){if(o&&(pb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sy(i)}function Sy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cd(i){return Cd=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Cd(i)}function D2(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function ms(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var mb=(lo=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&vb(f,m)})(h,i);var o,l,s=ZN(h);function h(){var f;qN(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return D2(Sy(f=s.call.apply(s,[this].concat(w))),"modelType",Sr.BEZIER_EDGE),XN(Sy(f),"path",P2,Sy(f)),f}return o=h,(l=[{key:"initEdgeData",value:function(f){this.offset=100,cm(Cd(h.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return Oy(Oy({},cm(Cd(h.prototype),"getEdgeStyle",this).call(this)),to(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,m=0;return this.pointsList.forEach(function(w){var T=w.x,N=w.y;f+=T,m+=N}),{x:f/this.pointsList.length,y:m/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=cm(Cd(h.prototype),"getData",this).call(this),m=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return Oy(Oy({},f),{},{pointsList:m})}},{key:"getControls",value:function(){var f=this.startPoint,m=this.endPoint;return qo({start:f,end:m,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var m=hb(f,4),w=m[0],T=m[1],N=m[2],F=m[3];return"M ".concat(w.x," ").concat(w.y,`
    C `).concat(T.x," ").concat(T.y,`,
    `).concat(N.x," ").concat(N.y,`,
    `).concat(F.x," ").concat(F.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),m=f.sNext,w=f.ePre;this.updatePath(m,w)}},{key:"updatePath",value:function(f,m){f=to(f),m=to(m);var w={x:this.startPoint.x,y:this.startPoint.y},T={x:this.endPoint.x,y:this.endPoint.y};if(!f||!m){var N=this.getControls();f=N.sNext,m=N.ePre}this.pointsList=[w,f,m,T],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,m){this.startPoint.x+=f,this.startPoint.y+=m;var w=hb(this.pointsList,3),T=w[1],N=w[2];T.x+=f,T.y+=m,this.updatePath(T,N)}},{key:"moveEndPoint",value:function(f,m){this.endPoint.x+=f,this.endPoint.y+=m;var w=hb(this.pointsList,3),T=w[1],N=w[2];N.x+=f,N.y+=m,this.updatePath(T,N)}},{key:"updateAdjustAnchor",value:function(f,m){m==="sNext"?this.pointsList[1]=f:m==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var m=f.startPoint,w=f.endPoint,T=f.sourceNode,N=f.targetNode,F=qo({start:m,end:w,sourceNode:T,targetNode:N,offset:this.offset}),Z=F.sNext,te=F.ePre;this.pointsList=[m,Z,te,w],this.initPoints()}}])&&YN(o.prototype,l),h}(cf),P2=ms(lo.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ms(lo.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"initPoints"),lo.prototype),ms(lo.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"updatePoints"),lo.prototype),ms(lo.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"updateStartPoint"),lo.prototype),ms(lo.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"updateEndPoint"),lo.prototype),ms(lo.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"moveStartPoint"),lo.prototype),ms(lo.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"moveEndPoint"),lo.prototype),ms(lo.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"updateAdjustAnchor"),lo.prototype),ms(lo.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"getAdjustStart"),lo.prototype),ms(lo.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"getAdjustEnd"),lo.prototype),ms(lo.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"updateAfterAdjustStartAndEnd"),lo.prototype),lo),an,j2,I2,L2,F2,$2,B2,U2,V2,G2,W2,z2,H2,X2,q2,Y2,K2,Z2,J2,Q2,eO,tO,nO,QN=function(i){return i==null};function eC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||rO(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function yb(i){return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},yb(i)}function rO(i,o){if(i){if(typeof i=="string")return oO(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?oO(i,o):void 0}}function oO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function iO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function sl(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?iO(Object(l),!0).forEach(function(s){kl(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):iO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Ri(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function tC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function kl(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Tr(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var _f,aO,bf=(an=function(){function i(s,h){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),kl(this,"id",""),Ri(this,"type",j2,this),Ri(this,"x",I2,this),Ri(this,"y",L2,this),Ri(this,"text",F2,this),Ri(this,"properties",$2,this),Ri(this,"_width",B2,this),Ri(this,"_height",U2,this),Ri(this,"anchorsOffset",V2,this),Ri(this,"isSelected",G2,this),Ri(this,"isHovered",W2,this),Ri(this,"isShowAnchor",z2,this),Ri(this,"isDragging",H2,this),Ri(this,"isHitable",X2,this),Ri(this,"draggable",q2,this),Ri(this,"visible",Y2,this),Ri(this,"enableRotate",K2,this),kl(this,"virtual",!1),kl(this,"graphModel",void 0),Ri(this,"zIndex",Z2,this),Ri(this,"state",J2,this),Ri(this,"autoToFront",Q2,this),Ri(this,"style",eO,this),Ri(this,"transform",tO,this),Ri(this,"_rotate",nO,this),kl(this,"BaseType",so.NODE),kl(this,"modelType",Sr.NODE),kl(this,"additionStateData",void 0),kl(this,"targetRules",[]),kl(this,"sourceRules",[]),kl(this,"moveRules",[]),kl(this,"hasSetTargetRules",!1),kl(this,"hasSetSourceRules",!1),this.graphModel=h,this.initNodeData(s),this.setAttributes()}var o,l;return o=i,l=[{key:"width",get:function(){return this._width},set:function(s){this._width=s}},{key:"height",get:function(){return this._height},set:function(s){this._height=s}},{key:"rotate",get:function(){return this._rotate},set:function(s){this._rotate=s;var h=this.x,f=h===void 0?0:h,m=this.y,w=m===void 0?0:m;this.transform=new Rd(-f,-w).rotate(s).translate(f,w).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(s){if(s.properties||(s.properties={}),!s.id){var h=this.graphModel.idGenerator,f=h&&h(s.type),m=this.createId();s.id=m||f||na()}this.formatText(s),Li(this,function(w){return tl(w,["id","type","x","y","text","properties","virtual","rotate"])}(s)),this.graphModel.overlapMode===Ao.INCREASE&&(this.zIndex=s.zIndex||ss())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(s){s.text||(s.text={value:"",x:s.x,y:s.y,draggable:!1,editable:!0}),s.text&&typeof s.text=="string"?s.text={value:s.text,x:s.x,y:s.y,draggable:!1,editable:!0}:s.text&&s.text.editable===void 0&&(s.text.editable=!0)}},{key:"getData",value:function(){var s=this.text,h=s.x,f=s.y,m=s.value,w=this.properties;Object(c.x)(w)&&(w=Object(c.I)(w));var T={id:this.id,type:this.type,x:this.x,y:this.y,properties:w};return this.rotate&&(T.rotate=this.rotate),this.graphModel.overlapMode===Ao.INCREASE&&(T.zIndex=this.zIndex),m&&(T.text={x:h,y:f,value:m}),T}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return sl(sl({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var s=this.graphModel.theme.nodeText;return to(s)}},{key:"getRotateControlStyle",value:function(){var s=this.graphModel.theme.rotateControl;return to(s)}},{key:"getAnchorStyle",value:function(s){var h=this.graphModel.theme.anchor;return to(h)}},{key:"getAnchorLineStyle",value:function(s){var h=this.graphModel.theme.anchorLine;return to(h)}},{key:"getOutlineStyle",value:function(){var s=this.graphModel.theme.outline;return to(s)}},{key:"isAllowConnectedAsSource",value:function(s,h,f,m){var w=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var T,N=!0,F=0;F<w.length;F++){var Z=w[F];if(!Z.validate.call(this,this,s,h,f,m)){N=!1,T=Z.message;break}}return{isAllPass:N,msg:T}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(s,h,f,m){var w=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var T,N=!0,F=0;F<w.length;F++){var Z=w[F];if(!Z.validate.call(this,s,this,h,f,m)){N=!1,T=Z.message;break}}return{isAllPass:N,msg:T}}},{key:"isAllowMoveNode",value:function(s,h){var f,m=!0,w=!0,T=function(Z,te){var _e=typeof Symbol<"u"&&Z[Symbol.iterator]||Z["@@iterator"];if(!_e){if(Array.isArray(Z)||(_e=rO(Z))||te){_e&&(Z=_e);var Me=0,je=function(){};return{s:je,n:function(){return Me>=Z.length?{done:!0}:{done:!1,value:Z[Me++]}},e:function(Vt){throw Vt},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var at,it=!0,yt=!1;return{s:function(){_e=_e.call(Z)},n:function(){var Vt=_e.next();return it=Vt.done,Vt},e:function(Vt){yt=!0,at=Vt},f:function(){try{it||_e.return==null||_e.return()}finally{if(yt)throw at}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(T.s();!(f=T.n()).done;){var N=(0,f.value)(this,s,h);if(!N)return!1;if(yb(N)==="object"){var F=N;if(F.x===!1&&F.y===!1)return!1;m=m&&F.x,w=w&&F.y}}}catch(Z){T.e(Z)}finally{T.f()}return{x:m,y:w}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var s=this.anchorsOffset,h=this.id,f=this.x,m=this.y;return s&&s.length>0?s.map(function(w,T){return w.length?(w=w,{id:"".concat(h,"_").concat(T),x:f+w[0],y:m+w[1]}):sl(sl({},w=w),{},{x:f+w.x,y:m+w.y,id:w.id||"".concat(h,"_").concat(T)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(s){return function(h,f){for(var m,w=xd(f),T=Number.MAX_SAFE_INTEGER,N=0;N<w.length;N++){var F=ll(h.x,h.y,w[N].x,w[N].y);F<T&&(T=F,m={index:N,anchor:Al(Al({},w[N]),{},{x:w[N].x,y:w[N].y,id:w[N].id})})}return m}(s,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var s=this.getAnchorsByOffset(),h=this.x,f=this.y,m=this.rotate;return s.forEach(function(w){var T=w.x,N=w.y,F=eC(new Tu([T,N,1]).translate(-h,-f).rotate(m).translate(h,f)[0],2),Z=F[0],te=F[1];w.x=Z,w.y=te}),s}},{key:"getAnchorInfo",value:function(s){if(!QN(s))for(var h=0;h<this.anchors.length;h++){var f=this.anchors[h];if(f.id===s)return f}}},{key:"addNodeMoveRules",value:function(s){this.moveRules.includes(s)||this.moveRules.push(s)}},{key:"move",value:function(s,h){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,w=!1;if(f)m=!0,w=!0;else{var T=this.isAllowMoveNode(s,h);typeof T=="boolean"?(m=T,w=T):(m=T.x,w=T.y)}if(m){var N=this.x+s;this.x=N,this.text&&this.moveText(s,0)}if(w){var F=this.y+h;this.y=F,this.text&&this.moveText(0,h)}return m||w}},{key:"getMoveDistance",value:function(s,h){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,w=!1,T=0,N=0;if(f)m=!0,w=!0;else{var F=this.isAllowMoveNode(s,h);typeof F=="boolean"?(m=F,w=F):(m=F.x,w=F.y)}if(m&&s){var Z=this.x+s;this.x=Z,this.text&&this.moveText(s,0),T=s}if(w&&h){var te=this.y+h;this.y=te,this.text&&this.moveText(0,h),N=h}return[T,N]}},{key:"moveTo",value:function(s,h){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=s-this.x,w=h-this.y;return!(!f&&!this.isAllowMoveNode(m,w)||(this.text&&this.text&&this.moveText(m,w),this.x=s,this.y=h,0))}},{key:"moveText",value:function(s,h){var f=this.text,m=f.x,w=f.y,T=f.value,N=f.draggable,F=f.editable;this.text={value:T,editable:F,draggable:N,x:m+s,y:w+h}}},{key:"updateText",value:function(s){this.text=sl(sl({},Object(c.I)(this.text)),{},{value:s})}},{key:"setSelected",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=s}},{key:"setHovered",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=s,this.setIsShowAnchor(s)}},{key:"setIsShowAnchor",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=s}},{key:"setEnableRotate",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=s}},{key:"setHitable",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=s}},{key:"setElementState",value:function(s,h){this.state=s,this.additionStateData=h}},{key:"setProperty",value:function(s,h){this.properties=sl(sl({},Object(c.I)(this.properties)),{},kl({},s,_i(h))),this.setAttributes()}},{key:"setProperties",value:function(s){this.properties=sl(sl({},Object(c.I)(this.properties)),_i(s)),this.setAttributes()}},{key:"deleteProperty",value:function(s){delete this.properties[s],this.setAttributes()}},{key:"setStyle",value:function(s,h){this.style=sl(sl({},this.style),{},kl({},s,_i(h)))}},{key:"setStyles",value:function(s){this.style=sl(sl({},this.style),_i(s))}},{key:"updateStyles",value:function(s){this.style=sl({},_i(s))}},{key:"setZIndex",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=s}},{key:"updateAttributes",value:function(s){Li(this,s)}}],l&&tC(o.prototype,l),i}(),j2=Tr(an.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I2=Tr(an.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L2=Tr(an.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F2=Tr(an.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),$2=Tr(an.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),B2=Tr(an.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),U2=Tr(an.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),V2=Tr(an.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G2=Tr(an.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W2=Tr(an.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z2=Tr(an.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H2=Tr(an.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X2=Tr(an.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q2=Tr(an.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Y2=Tr(an.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),K2=Tr(an.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Z2=Tr(an.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),J2=Tr(an.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Q2=Tr(an.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),eO=Tr(an.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),tO=Tr(an.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nO=Tr(an.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Tr(an.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(an.prototype,"incoming"),an.prototype),Tr(an.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(an.prototype,"outgoing"),an.prototype),Tr(an.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"addNodeMoveRules"),an.prototype),Tr(an.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"move"),an.prototype),Tr(an.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"getMoveDistance"),an.prototype),Tr(an.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"moveTo"),an.prototype),Tr(an.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"moveText"),an.prototype),Tr(an.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"updateText"),an.prototype),Tr(an.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setSelected"),an.prototype),Tr(an.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setHovered"),an.prototype),Tr(an.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setIsShowAnchor"),an.prototype),Tr(an.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setEnableRotate"),an.prototype),Tr(an.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setHitable"),an.prototype),Tr(an.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setElementState"),an.prototype),Tr(an.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setProperty"),an.prototype),Tr(an.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setProperties"),an.prototype),Tr(an.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"deleteProperty"),an.prototype),Tr(an.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setStyle"),an.prototype),Tr(an.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setStyles"),an.prototype),Tr(an.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"updateStyles"),an.prototype),Tr(an.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"setZIndex"),an.prototype),Tr(an.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(an.prototype,"updateAttributes"),an.prototype),an);function gb(i){return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},gb(i)}function lO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function uO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?lO(Object(l),!0).forEach(function(s){sO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):lO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function nC(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function rC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function oC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _b(){return _b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=iC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},_b.apply(this,arguments)}function iC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Xh(i))!==null;);return i}function bb(i,o){return bb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},bb(i,o)}function aC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Xh(i);if(o){var h=Xh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return lC(this,l)}}function lC(i,o){if(o&&(gb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xy(i)}function xy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xh(i){return Xh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Xh(i)}function sO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function wb(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Ga,cO,fO,Eb=(_f=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&bb(f,m)})(h,i);var o,l,s=aC(h);function h(){var f;rC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return sO(xy(f=s.call.apply(s,[this].concat(w))),"modelType",Sr.CIRCLE_NODE),nC(xy(f),"r",aO,xy(f)),f}return o=h,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=_b(Xh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.circle;return uO(uO({},f),to(m))}},{key:"getDefaultAnchor",value:function(){var f=this.x,m=this.y,w=this.r;return[{x:f,y:m-w,id:"".concat(this.id,"_0")},{x:f+w,y:m,id:"".concat(this.id,"_1")},{x:f,y:m+w,id:"".concat(this.id,"_2")},{x:f-w,y:m,id:"".concat(this.id,"_3")}]}}])&&oC(o.prototype,l),h}(bf),aO=wb(_f.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),wb(_f.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(_f.prototype,"width"),_f.prototype),wb(_f.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(_f.prototype,"height"),_f.prototype),_f);r(129);function Ob(i){return Ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ob(i)}function Sb(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return dO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return dO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function pO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function hO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?pO(Object(l),!0).forEach(function(s){mO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):pO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function vO(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function uC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function sC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function xb(){return xb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=cC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},xb.apply(this,arguments)}function cC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Yh(i))!==null;);return i}function Ab(i,o){return Ab=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Ab(i,o)}function fC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Yh(i);if(o){var h=Yh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return dC(this,l)}}function dC(i,o){if(o&&(Ob(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qh(i)}function qh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yh(i){return Yh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yh(i)}function mO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Kh(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var nc,yO,gO,Tb=(Ga=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Ab(f,m)})(h,i);var o,l,s=fC(h);function h(){var f;uC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return mO(qh(f=s.call.apply(s,[this].concat(w))),"modelType",Sr.DIAMOND_NODE),vO(qh(f),"rx",cO,qh(f)),vO(qh(f),"ry",fO,qh(f)),f}return o=h,(l=[{key:"getNodeStyle",value:function(){var f=xb(Yh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.diamond;return hO(hO({},f),to(m))}},{key:"points",get:function(){var f=this.x,m=this.y,w=this.rx,T=this.ry;return[[f,m-T],[f+w,m],[f,m+T],[f-w,m]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=Sb(w,1)[0];T<f&&(f=T),T>m&&(m=T)}),m-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=Sb(w,2)[1];T<f&&(f=T),T>m&&(m=T)}),m-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(m,w){var T=Sb(m,2);return{x:T[0],y:T[1],id:"".concat(f.id,"_").concat(w)}})}}])&&sC(o.prototype,l),h}(bf),cO=Kh(Ga.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),fO=Kh(Ga.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Kh(Ga.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Ga.prototype,"points"),Ga.prototype),Kh(Ga.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Ga.prototype,"pointsPosition"),Ga.prototype),Kh(Ga.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ga.prototype,"width"),Ga.prototype),Kh(Ga.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ga.prototype,"height"),Ga.prototype),Ga);function Mb(i){return Mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Mb(i)}function _O(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function bO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?_O(Object(l),!0).forEach(function(s){EO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):_O(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function wO(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function pC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function hC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function kb(){return kb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=vC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},kb.apply(this,arguments)}function vC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Jh(i))!==null;);return i}function Pb(i,o){return Pb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Pb(i,o)}function mC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Jh(i);if(o){var h=Jh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return yC(this,l)}}function yC(i,o){if(o&&(Mb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zh(i)}function Zh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Jh(i){return Jh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Jh(i)}function EO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Ay(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var ku,OO,Rb=(nc=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Pb(f,m)})(h,i);var o,l,s=mC(h);function h(){var f;pC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return EO(Zh(f=s.call.apply(s,[this].concat(w))),"modelType",Sr.ELLIPSE_NODE),wO(Zh(f),"rx",yO,Zh(f)),wO(Zh(f),"ry",gO,Zh(f)),f}return o=h,(l=[{key:"getNodeStyle",value:function(){var f=kb(Jh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.ellipse;return bO(bO({},f),to(m))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,m=this.y,w=this.rx,T=this.ry;return[{x:f,y:m-T,id:"".concat(this.id,"_0")},{x:f+w,y:m,id:"".concat(this.id,"_1")},{x:f,y:m+T,id:"".concat(this.id,"_2")},{x:f-w,y:m,id:"".concat(this.id,"_3")}]}}])&&hC(o.prototype,l),h}(bf),yO=Ay(nc.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),gO=Ay(nc.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Ay(nc.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(nc.prototype,"width"),nc.prototype),Ay(nc.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(nc.prototype,"height"),nc.prototype),nc);function Nb(i){return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Nb(i)}function Cb(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return SO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return SO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function SO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function xO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function AO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?xO(Object(l),!0).forEach(function(s){TO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):xO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function gC(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function _C(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function bC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Db(){return Db=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=wC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},Db.apply(this,arguments)}function wC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Qh(i))!==null;);return i}function jb(i,o){return jb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},jb(i,o)}function EC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Qh(i);if(o){var h=Qh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return OC(this,l)}}function OC(i,o){if(o&&(Nb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ty(i)}function Ty(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Qh(i){return Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qh(i)}function TO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function My(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Ib,MO,Lb=(ku=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&jb(f,m)})(h,i);var o,l,s=EC(h);function h(){var f;_C(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return TO(Ty(f=s.call.apply(s,[this].concat(w))),"modelType",Sr.POLYGON_NODE),gC(Ty(f),"points",OO,Ty(f)),f}return o=h,(l=[{key:"getNodeStyle",value:function(){var f=Db(Qh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.polygon;return AO(AO({},f),to(m))}},{key:"pointsPosition",get:function(){var f=this.x,m=this.y,w=this.width,T=this.height;return this.points.map(function(N){return{x:N[0]+f-w/2,y:N[1]+m-T/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=Cb(w,1)[0];T<f&&(f=T),T>m&&(m=T)}),m-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=Cb(w,2)[1];T<f&&(f=T),T>m&&(m=T)}),m-f}},{key:"getDefaultAnchor",value:function(){var f=this,m=this.x,w=this.y,T=this.width,N=this.height;return this.points.map(function(F,Z){var te=Cb(F,2),_e=te[0],Me=te[1];return{x:m+_e-T/2,y:w+Me-N/2,id:"".concat(f.id,"_").concat(Z)}})}}])&&bC(o.prototype,l),h}(bf),OO=My(ku.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),My(ku.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(ku.prototype,"pointsPosition"),ku.prototype),My(ku.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(ku.prototype,"width"),ku.prototype),My(ku.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(ku.prototype,"height"),ku.prototype),ku);function Fb(i){return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Fb(i)}function kO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function PO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?kO(Object(l),!0).forEach(function(s){RO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):kO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function SC(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function xC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function AC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function $b(){return $b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=TC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},$b.apply(this,arguments)}function TC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=ev(i))!==null;);return i}function Bb(i,o){return Bb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Bb(i,o)}function MC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=ev(i);if(o){var h=ev(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return kC(this,l)}}function kC(i,o){if(o&&(Fb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ky(i)}function ky(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ev(i){return ev=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ev(i)}function RO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Dd,Ub=(Ib=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Bb(f,m)})(h,i);var o,l,s=MC(h);function h(){var f;xC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return RO(ky(f=s.call.apply(s,[this].concat(w))),"modelType",Sr.RECT_NODE),SC(ky(f),"radius",MO,ky(f)),f}return o=h,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,m=this.y,w=this.width,T=this.height;return[{x:f,y:m-T/2,id:"".concat(this.id,"_0")},{x:f+w/2,y:m,id:"".concat(this.id,"_1")},{x:f,y:m+T/2,id:"".concat(this.id,"_2")},{x:f-w/2,y:m,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=$b(ev(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.rect;return PO(PO({},f),to(m))}}])&&AC(o.prototype,l),h}(bf),MO=function(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}(Ib.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ib);function Vb(i){return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Vb(i)}function NO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function CO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?NO(Object(l),!0).forEach(function(s){jO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):NO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function PC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function RC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Gb(){return Gb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=NC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},Gb.apply(this,arguments)}function NC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=tv(i))!==null;);return i}function Wb(i,o){return Wb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Wb(i,o)}function CC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=tv(i);if(o){var h=tv(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return DC(this,l)}}function DC(i,o){if(o&&(Vb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DO(i)}function DO(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function tv(i){return tv=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},tv(i)}function jO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function IO(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var zb=(Dd=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Wb(f,m)})(h,i);var o,l,s=CC(h);function h(){var f;PC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return jO(DO(f=s.call.apply(s,[this].concat(w))),"modelType",Sr.TEXT_NODE),f}return o=h,(l=[{key:"getTextStyle",value:function(){var f=Gb(tv(h.prototype),"getTextStyle",this).call(this),m=this.graphModel.theme.text;return CO(CO({},f),to(m))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return us({rows:f,fontSize:m,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return us({rows:f,fontSize:m,rowsLength:f.length}).height}}])&&RC(o.prototype,l),h}(bf),IO(Dd.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Dd.prototype,"width"),Dd.prototype),IO(Dd.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Dd.prototype,"height"),Dd.prototype),Dd);function Hb(i){return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Hb(i)}function jC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function IC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Xb(i,o){return Xb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Xb(i,o)}function LC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Py(i);if(o){var h=Py(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return FC(this,l)}}function FC(i,o){if(o&&(Hb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LO(i)}function LO(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Py(i){return Py=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Py(i)}function $C(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ys,FO,$O,BO,qb=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Xb(f,m)})(h,i);var o,l,s=LC(h);function h(){var f;jC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return $C(LO(f=s.call.apply(s,[this].concat(w))),"modelType",Sr.HTML_NODE),f}return o=h,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,m=this.y,w=this.width,T=this.height;return[{x:f,y:m-T/2,id:"".concat(this.id,"_0")},{x:f+w/2,y:m,id:"".concat(this.id,"_1")},{x:f,y:m+T/2,id:"".concat(this.id,"_2")},{x:f-w/2,y:m,id:"".concat(this.id,"_3")}]}}])&&IC(o.prototype,l),h}(bf);function UO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Yb(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function BC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function VO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function fm(i,o,l,s,h){var f={};return Object.keys(s).forEach(function(m){f[m]=s[m]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var GO=(ys=function(){function i(s){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),VO(this,"graphModel",void 0),Yb(this,"isShowHorizontal",FO,this),Yb(this,"isShowVertical",$O,this),Yb(this,"position",BO,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=s}var o,l;return o=i,l=[{key:"getStyle",value:function(){return function(s){for(var h=1;h<arguments.length;h++){var f=arguments[h]!=null?arguments[h]:{};h%2?UO(Object(f),!0).forEach(function(m){VO(s,m,f[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(f)):UO(Object(f)).forEach(function(m){Object.defineProperty(s,m,Object.getOwnPropertyDescriptor(f,m))})}return s}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(s,h){for(var f=s.x,m=s.y,w=!1,T=!1,N=0;N<h.length;N++){var F=h[N];if(F.id!==s.id&&(f===F.x&&(w=!0),m===F.y&&(T=!0),w&&T))break}return{isShowVertical:w,isShowHorizontal:T,position:{x:f,y:m}}}},{key:"getHorizontalSnapline",value:function(s,h){var f,m,w=!1,T=s.id;if(T){var N=this.graphModel.fakerNode;if(N&&N.id===T)m=bo(N);else{var F=this.graphModel.getNodeModelById(T);m=bo(F)}}for(var Z=0;Z<h.length;Z++){var te=h[Z];if(te.id!==s.id){var _e=bo(te);if(_e.minY===m.minY||_e.maxY===m.minY){w=!0,f=m.minY;break}if(_e.minY===m.maxY||_e.maxY===m.maxY){w=!0,f=m.maxY;break}}}return Li({isShowHorizontal:w,position:{y:f}})}},{key:"getVerticalSnapline",value:function(s,h){var f,m,w=!1,T=s.id;if(T){var N=this.graphModel.fakerNode;if(N&&N.id===T)m=bo(N);else{var F=this.graphModel.getNodeModelById(T);m=bo(F)}}for(var Z=0;Z<h.length;Z++){var te=h[Z];if(te.id!==s.id){var _e=bo(te);if(_e.minX===m.minX||_e.maxX===m.minX){w=!0,f=m.minX;break}if(_e.minX===m.maxX||_e.maxX===m.maxX){w=!0,f=m.maxX;break}}}return Li({isShowVertical:w,position:{x:f}})}},{key:"getSnapLinePosition",value:function(s,h){var f=this.getCenterSnapLine(s,h),m=f.isShowHorizontal,w=f.isShowVertical;if(!m){var T=this.getHorizontalSnapline(s,h);T.isShowHorizontal&&(f.isShowHorizontal=T.isShowHorizontal,f.position.y=T.position.y)}if(!w){var N=this.getVerticalSnapline(s,h);N.isShowVertical&&(f.isShowVertical=N.isShowVertical,f.position.x=N.position.x)}return f}},{key:"setSnaplineInfo",value:function(s){var h=s.isShowHorizontal,f=s.isShowVertical,m=s.position;this.position=m,this.isShowHorizontal=h,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(s){var h=this.graphModel.nodes,f=this.getSnapLinePosition(s,h);this.setSnaplineInfo(f)}}],l&&BC(o.prototype,l),i}(),FO=fm(ys.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$O=fm(ys.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BO=fm(ys.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fm(ys.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(ys.prototype,"clearSnapline"),ys.prototype),fm(ys.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(ys.prototype,"setNodeSnapLine"),ys.prototype),ys),dm=new Map,WO=function(i){var o=na(),l=window.requestAnimationFrame(function s(){if(i(),dm.get(o)){var h=window.requestAnimationFrame(s);dm.set(o,h)}});return dm.set(o,l),o},Ry=function(i){var o=dm.get(i);o&&(window.cancelAnimationFrame(o),dm.delete(i))};function Kb(i){return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Kb(i)}function pm(){return pm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},pm.apply(this,arguments)}function zO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function hm(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?zO(Object(l),!0).forEach(function(s){oc(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):zO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function UC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return HO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return HO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function HO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function VC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Zb(i,o){return Zb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Zb(i,o)}function GC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Ny(i);if(o){var h=Ny(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return WC(this,l)}}function WC(i,o){if(o&&(Kb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rc(i)}function rc(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ny(i){return Ny=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ny(i)}function oc(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var zC=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Zb(f,m)})(h,i);var o,l,s=GC(h);function h(){var f;return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),oc(rc(f=s.call(this)),"preTargetNode",void 0),oc(rc(f),"sourceRuleResults",void 0),oc(rc(f),"targetRuleResults",void 0),oc(rc(f),"dragHandler",void 0),oc(rc(f),"t",void 0),oc(rc(f),"onDragStart",function(m){var w=m.event,T=f.props,N=T.anchorData,F=T.nodeModel,Z=T.graphModel;Z.overlapMode,Z.selectNodeById(F.id),F.autoToFront&&Z.toFront(F.id),Z.eventCenter.emit(Cn.ANCHOR_DRAGSTART,{data:N,e:w,nodeModel:F}),f.setState({startX:N.x,startY:N.y,endX:N.x,endY:N.y})}),oc(rc(f),"onDragging",function(m){var w=m.event,T=f.props,N=T.graphModel,F=T.nodeModel,Z=T.anchorData,te=N.transformModel,_e=N.eventCenter,Me=N.width,je=N.height,at=N.editConfigModel,it=at.autoExpand,yt=at.stopMoveGraph,Vt=w.clientX,gn=w.clientY,yn=N.getPointByClient({x:Vt,y:gn}),zn=yn.domOverlayPosition,hn=zn.x,In=zn.y,Sn=yn.canvasOverlayPosition,Ir=Sn.x,Ur=Sn.y;f.t&&Ry(f.t);var pr=[];hn<10?pr=[10,0]:hn+10>Me?pr=[-10,0]:In<10?pr=[0,10]:In+10>je&&(pr=[0,-10]),f.setState({endX:Ir,endY:Ur,dragging:!0}),f.moveAnchorEnd(Ir,Ur),pr.length>0&&!yt&&it&&(f.t=WO(function(){var Kr=UC(pr,2),bi=Kr[0],wi=Kr[1];te.translate(bi,wi);var Ta=f.state,eu=Ta.endX,tu=Ta.endY;f.setState({endX:eu-bi,endY:tu-wi}),f.moveAnchorEnd(eu-bi,tu-wi)})),_e.emit(Cn.ANCHOR_DRAG,{data:Z,e:w,nodeModel:F})}),oc(rc(f),"onDragEnd",function(m){var w=m.event;f.t&&Ry(f.t);var T=f.checkEnd(w);f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var N=f.props,F=N.graphModel,Z=N.nodeModel,te=N.anchorData;F.eventCenter.emit(Cn.ANCHOR_DRAGEND,{data:te,e:w,nodeModel:Z,edgeModel:T})}),oc(rc(f),"checkEnd",function(m){var w=f.props,T=w.graphModel,N=w.nodeModel,F=w.anchorData,Z=F.x,te=F.y,_e=F.id,Me=(T.edgeType,f.state),je=Me.endX,at=Me.endY,it=Me.dragging,yt=tf({x:je,y:at},T);if(f.preTargetNode&&f.preTargetNode.state!==Yr.DEFAULT&&f.preTargetNode.setElementState(Yr.DEFAULT),it&&yt&&yt.node){var Vt=yt.node,gn=yt.anchor.id,yn="".concat(N.id,"_").concat(Vt.id,"_").concat(gn,"_").concat(_e),zn=f.sourceRuleResults.get(yn)||{},hn=zn.isAllPass,In=zn.msg,Sn=f.targetRuleResults.get(yn)||{},Ir=Sn.isAllPass,Ur=Sn.msg;if(hn&&Ir){Vt.setElementState(Yr.DEFAULT);var pr=T.edgeGenerator(N.getData(),T.getNodeModelById(yt.node.id).getData()),Kr=T.addEdge(hm(hm({},pr),{},{sourceNodeId:N.id,sourceAnchorId:_e,startPoint:{x:Z,y:te},targetNodeId:yt.node.id,targetAnchorId:yt.anchor.id,endPoint:{x:yt.anchor.x,y:yt.anchor.y}})),bi=f.props.anchorData;return T.eventCenter.emit(Cn.ANCHOR_DROP,{data:bi,e:m,nodeModel:N,edgeModel:Kr}),Kr}var wi=Vt.getData();return T.eventCenter.emit(Cn.CONNECTION_NOT_ALLOWED,{data:wi,msg:Ur||In||"不允许添加连线"}),null}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new ge({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return o=h,(l=[{key:"getAnchorShape",value:function(){var f=this.props,m=f.anchorData,w=f.style,T=f.node.getAnchorShape(m);if(T)return T;var N=m.x,F=m.y,Z=hm(hm({},w),w.hover);return Object($e.g)("g",null,Object($e.g)(Hh,pm({className:"lf-node-anchor-hover"},Z,{x:N,y:F})),Object($e.g)(Hh,pm({className:"lf-node-anchor"},w,{x:N,y:F})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var f=this.props,m=f.graphModel,w=m.getAnchorIncomingEdge,T=m.getAnchorOutcomingEdge,N=f.anchorData.id;return{incomingEdgeList:w(N),outcomingEdgeList:T(N)}}},{key:"moveAnchorEnd",value:function(f,m){var w=this.props,T=w.graphModel,N=w.nodeModel,F=w.anchorData,Z=tf({x:f,y:m},T);if(Z){var te=Z.node,_e=Z.anchor.id;if(this.preTargetNode&&this.preTargetNode!==Z.node&&this.preTargetNode.setElementState(Yr.DEFAULT),F.id===_e)return;this.preTargetNode=te;var Me="".concat(N.id,"_").concat(te.id,"_").concat(_e,"_").concat(F.id);if(!this.targetRuleResults.has(Me)){var je=Z.anchor,at=N.isAllowConnectedAsSource(te,F,je),it=te.isAllowConnectedAsTarget(N,F,je);this.sourceRuleResults.set(Me,ql(at)),this.targetRuleResults.set(Me,ql(it))}var yt=this.sourceRuleResults.get(Me).isAllPass,Vt=this.targetRuleResults.get(Me).isAllPass;yt&&Vt?te.setElementState(Yr.ALLOW_CONNECT):te.setElementState(Yr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Yr.DEFAULT&&this.preTargetNode.setElementState(Yr.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,m=f.startX,w=f.startY,T=f.endX,N=f.endY;return ll(m,w,T,N)>10}},{key:"render",value:function(){var f=this,m=this.state,w=m.startX,T=m.startY,N=m.endX,F=m.endY,Z=this.props,te=Z.anchorData.edgeAddable,_e=Z.edgeStyle;return Object($e.g)("g",{className:"lf-anchor"},Object($e.g)("g",{onMouseDown:function(Me){te!==!1&&f.dragHandler.handleMouseDown(Me)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(hm({sourcePoint:{x:w,y:T},targetPoint:{x:N,y:F}},_e)):Object($e.g)(Wh,pm({x1:w,y1:T,x2:N,y2:F},_e,{"pointer-events":"none"}))))}}])&&VC(o.prototype,l),h}($e.a);function XO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function HC(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?XO(Object(l),!0).forEach(function(s){XC(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):XO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function XC(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Jb(i){return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Jb(i)}function qC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return qO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return qO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function YO(i){var o=i.x,l=o===void 0?0:o,s=i.y,h=s===void 0?0:s,f=i.value,m=i.fontSize,w=i.fill,T=w===void 0?"currentColor":w,N=i.overflowMode,F=N===void 0?"default":N,Z=i.textWidth,te=Z===void 0?"":Z,_e=i.model,Me={textAnchor:"middle","dominant-baseline":"middle",x:l,y:h,fill:T};if(Object.entries(i).forEach(function(gn){var yn=qC(gn,2),zn=yn[0],hn=yn[1];Jb(hn)!=="object"&&(Me[zn]=hn)}),f){var je=String(f).split(/[\r\n]/g),at=je.length;if(F!=="default"){var it=_e.BaseType,yt=_e.modelType;if(it===so.NODE&&yt!==Sr.TEXT_NODE||it===so.EDGE&&te)return function(gn){var yn=gn.value,zn=gn.fontSize,hn=gn.model,In=gn.fontFamily,Sn=In===void 0?"":In,Ir=gn.lineHeight,Ur=gn.wrapPadding,pr=Ur===void 0?"0, 0":Ur,Kr=gn.overflowMode,bi=gn.x,wi=gn.y,Ta=hn.width,eu=hn.textHeight,tu=gn.textWidth||Ta,lc=String(yn).split(/[\r\n]/g),Wp=lc.length,rg=lf({rows:lc,style:{fontSize:"".concat(zn,"px"),width:"".concat(tu,"px"),fontFamily:Sn,lineHeight:Ir,padding:pr},rowsLength:Wp,className:"lf-get-text-height"}),zp=hn.height>rg?hn.height:rg;eu&&(zp=eu);var Ld=Kr==="ellipsis";return Ld&&(zp=zn+2),Object($e.g)("g",null,Object($e.g)("foreignObject",{width:tu,height:zp,x:bi-tu/2,y:wi-zp/2},Object($e.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:zp,width:tu,padding:pr}},Object($e.g)("div",{className:Ld?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Ld?lc.join(""):"",style:HC({},gn)},lc.map(function(Fd){return Object($e.g)("div",{className:"lf-node-text--auto-wrap-inner"},Fd)})))))}(i)}if(at>1){var Vt=je.map(function(gn,yn){var zn=(yn-(at-1)/2)*(m+2);return Object($e.g)("tspan",{className:"lf-text-tspan",x:l,y:h+zn},gn)});return Object($e.g)("text",Me,Vt)}return Object($e.g)("text",Me,f)}}function Qb(i){return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Qb(i)}function e0(){return e0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},e0.apply(this,arguments)}function YC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return KO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return KO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function KO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function KC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function t0(i,o){return t0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},t0(i,o)}function ZC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Cy(i);if(o){var h=Cy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return JC(this,l)}}function JC(i,o){if(o&&(Qb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jd(i)}function jd(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cy(i){return Cy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Cy(i)}function Bp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ZO=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&t0(f,m)})(h,i);var o,l,s=ZC(h);function h(f){var m;(function(T,N){if(!(T instanceof N))throw new TypeError("Cannot call a class as a function")})(this,h),Bp(jd(m=s.call(this)),"dragHandler",void 0),Bp(jd(m),"sumDeltaX",0),Bp(jd(m),"sumDeltaY",0),Bp(jd(m),"stepDrag",void 0),Bp(jd(m),"onDragging",function(T){var N=T.deltaX,F=T.deltaY,Z=m.props,te=Z.model,_e=YC(Z.graphModel.transformModel.fixDeltaXY(N,F),2),Me=_e[0],je=_e[1];te.moveText(Me,je)}),Bp(jd(m),"dblClickHandler",function(){m.props.editable&&m.props.model.setElementState(Yr.TEXT_EDIT)}),Bp(jd(m),"mouseDownHandle",function(T){var N=m.props,F=N.draggable,Z=N.model,te=N.graphModel.editConfigModel.nodeTextDraggable;(F||te)&&(m.stepDrag.model=Z,m.stepDrag.handleMouseDown(T))}),f.model;var w=f.draggable;return m.stepDrag=new ge({onDragging:m.onDragging,step:1,isStopPropagation:w}),m}return o=h,(l=[{key:"getShape",value:function(){var f=this.props,m=f.model,w=f.graphModel,T=m.text,N=w.editConfigModel,F=T.value,Z=T.x,te=T.y,_e=T.editable,Me=T.draggable,je={x:Z,y:te,className:"",value:F};_e?je.className="lf-element-text":Me||N.nodeTextDraggable?je.className="lf-text-draggable":je.className="lf-text-disabled";var at=m.getTextStyle();return Object($e.g)(YO,e0({},je,at,{model:m}))}},{key:"render",value:function(){if(this.props.model.text)return Object($e.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&KC(o.prototype,l),h}($e.a),QC=Wu(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,JO=r(130);function n0(i){return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},n0(i)}function r0(){return r0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},r0.apply(this,arguments)}function e3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function o0(i,o){return o0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},o0(i,o)}function t3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Dy(i);if(o){var h=Dy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return n3(this,l)}}function n3(i,o){if(o&&(n0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nv(i)}function nv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Dy(i){return Dy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Dy(i)}function vm(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var r3=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&o0(f,m)})(h,i);var o,l,s=t3(h);function h(f){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,h),vm(nv(m=s.call(this,f)),"style",{}),vm(nv(m),"defaultAngle",void 0),vm(nv(m),"normal",void 0),vm(nv(m),"stepperDrag",void 0),vm(nv(m),"onDragging",function(w){var T,N=w.event,F=m.props,Z=F.graphModel,te=F.nodeModel,_e=F.eventCenter,Me=Z.selectNodes,je=te.x,at=te.y,it=N.clientX,yt=N.clientY,Vt=Z.getPointByClient({x:it,y:yt}).canvasOverlayPosition,gn=Vt.x,yn=Vt.y,zn=new We(gn-je,yn-at),hn=((T=m.normal)===null||T===void 0?void 0:T.angle(zn))-m.defaultAngle,In=new Rd(-je,-at).rotate(hn).translate(je,at).toString();te.transform=In,te.rotate=hn;var Sn=Object(JO.map)(Me,function(Ur){return Ur.id});Sn.indexOf(te.id)===-1&&(Sn=[te.id]);var Ir=Object(JO.reduce)(Sn,function(Ur,pr){var Kr=Z.getNodeModelById(pr);return Ur[pr]=Kr==null?void 0:Kr.getMoveDistance(0,0,!1),Ur},{});Sn.forEach(function(Ur){Z.getNodeEdges(Ur).forEach(function(pr){if(Ir[pr.sourceNodeId]){var Kr=Z.getNodeModelById(pr.sourceNodeId).anchors.find(function(wi){return wi.id===pr.sourceAnchorId});pr.updateStartPoint(Kr)}if(Ir[pr.targetNodeId]){var bi=Z.getNodeModelById(pr.targetNodeId).anchors.find(function(wi){return wi.id===pr.targetAnchorId});pr.updateEndPoint(bi)}})}),_e.emit(Cn.NODE_ROTATE,{e:N,nodeModel:te})}),m.style=f.style,m.stepperDrag=new ge({onDragging:m.onDragging}),m}return o=h,(l=[{key:"render",value:function(){var f=this,m=this.props.nodeModel,w=m.x,T=m.y,N=w+m.width/2+20,F=T-m.height/2-20;return this.normal=new We(1,0),this.defaultAngle=this.normal.angle(new We(N-w,F-T)),m.defaultAngle=this.defaultAngle,Object($e.g)("g",{className:"lf-rotate-control"},Object($e.g)("g",{onMouseDown:function(Z){f.stepperDrag.handleMouseDown(Z)}},Object($e.g)(Hh,r0({},this.style,{cx:N,cy:F}))))}}])&&e3(o.prototype,l),h}($e.a);function i0(i){return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i0(i)}var o3=["className"];function jy(){return jy=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},jy.apply(this,arguments)}function i3(i,o){if(i==null)return{};var l,s,h=function(m,w){if(m==null)return{};var T,N,F={},Z=Object.keys(m);for(N=0;N<Z.length;N++)T=Z[N],w.indexOf(T)>=0||(F[T]=m[T]);return F}(i,o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(s=0;s<f.length;s++)l=f[s],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(h[l]=i[l])}return h}function Iy(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return QO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return QO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function QO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function eS(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function a0(i,o){return a0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},a0(i,o)}function a3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Ly(i);if(o){var h=Ly(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return l3(this,l)}}function l3(i,o){if(o&&(i0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oa(i)}function oa(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ly(i){return Ly=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ly(i)}function ha(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var wf=function(i){(function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),w&&a0(m,w)})(f,i);var o,l,s,h=a3(f);function f(m){var w;(function(te,_e){if(!(te instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,f),ha(oa(w=h.call(this)),"t",void 0),ha(oa(w),"moveOffset",void 0),ha(oa(w),"stepDrag",void 0),ha(oa(w),"contextMenuTime",void 0),ha(oa(w),"mouseUpDrag",void 0),ha(oa(w),"startTime",void 0),ha(oa(w),"clickTimer",void 0),ha(oa(w),"modelDisposer",void 0),ha(oa(w),"onDragStart",function(te){var _e=te.event,Me=_e.clientX,je=_e.clientY,at=w.props,it=at.model,yt=at.graphModel.getPointByClient({x:Me,y:je}).canvasOverlayPosition,Vt=yt.x,gn=yt.y;w.moveOffset={x:it.x-Vt,y:it.y-gn}}),ha(oa(w),"onDragging",function(te){var _e=te.event,Me=w.props,je=Me.model,at=Me.graphModel,it=at.editConfigModel,yt=it.stopMoveGraph,Vt=it.autoExpand,gn=at.transformModel,yn=at.selectNodes,zn=at.width,hn=at.height,In=at.gridSize;je.isDragging=!0;var Sn=_e.clientX,Ir=_e.clientY,Ur=at.getPointByClient({x:Sn,y:Ir}).canvasOverlayPosition,pr=Ur.x,Kr=Ur.y,bi=Iy(gn.CanvasPointToHtmlPoint([pr,Kr]),2),wi=bi[0],Ta=bi[1];if(pr+=w.moveOffset.x,Kr+=w.moveOffset.y,pr=rl(pr,In),Kr=rl(Kr,In),zn&&hn){if(!Vt||yt||!(wi<0||Ta<0||wi>zn||Ta>hn)){var eu=Iy(gn.CanvasPointToHtmlPoint([pr-je.width/2,Kr-je.height/2]),2),tu=eu[0],lc=eu[1],Wp=Iy(gn.CanvasPointToHtmlPoint([pr+je.width/2,Kr+je.height/2]),2),rg=Wp[0],zp=Wp[1],Ld=Math.max(In,20),Fd=[];tu<0?Fd=[Ld,0]:rg>at.width?Fd=[-Ld,0]:lc<0?Fd=[0,Ld]:zp>at.height&&(Fd=[0,-Ld]),w.t&&Ry(w.t);var WD=new Rd(-pr,-Kr).rotate(je.rotate).translate(pr,Kr).toString();je.transform=WD;var og=yn.map(function(ig){return ig.id});og.indexOf(je.id)===-1&&(og=[je.id]),Fd.length>0&&!yt&&Vt?w.t=WO(function(){var ig=Iy(Fd,2),DS=ig[0],jS=ig[1];gn.translate(DS,jS);var zD=-DS/gn.SCALE_X,HD=-jS/gn.SCALE_X;at.moveNodes(og,zD,HD)}):at.moveNodes(og,pr-je.x,Kr-je.y)}}else at.moveNode2Coordinate(je.id,pr,Kr)}),ha(oa(w),"onDragEnd",function(){w.t&&Ry(w.t),w.props.model.isDragging=!1}),ha(oa(w),"handleMouseUp",function(){var te=w.props.model;w.mouseUpDrag=te.isDragging}),ha(oa(w),"handleClick",function(te){var _e=w.mouseUpDrag===!1;if(w.startTime){var Me=w.props,je=Me.model,at=Me.graphModel;if(_e){var it={data:je.getData(),e:te,position:at.getPointByClient({x:te.clientX,y:te.clientY}),isSelected:!1,isMultiple:!1},yt=te.button===2,Vt=te.detail===2;if(!yt){var gn=at.editConfigModel,yn=Xs(te,gn);it.isMultiple=yn,je.isSelected&&!Vt&&yn?(it.isSelected=!1,je.setSelected(!1)):(at.selectNodeById(je.id,yn),it.isSelected=!0,w.toFront()),Vt?(gn.nodeTextEdit&&je.text.editable&&(je.setSelected(!1),at.setElementStateById(je.id,Yr.TEXT_EDIT)),at.eventCenter.emit(Cn.NODE_DBCLICK,it)):(at.eventCenter.emit(Cn.ELEMENT_CLICK,it),at.eventCenter.emit(Cn.NODE_CLICK,it))}}}}),ha(oa(w),"handleContextMenu",function(te){te.preventDefault();var _e=w.props,Me=_e.model,je=_e.graphModel,at=Me.getData(),it=je.getPointByClient({x:te.clientX,y:te.clientY});je.setElementStateById(Me.id,Yr.SHOW_MENU,it.domOverlayPosition),Me.isSelected||je.selectNodeById(Me.id),je.eventCenter.emit(Cn.NODE_CONTEXTMENU,{data:at,e:te,position:it}),w.toFront()}),ha(oa(w),"handleMouseDown",function(te){var _e=w.props,Me=_e.model,je=_e.graphModel;w.startTime=new Date().getTime(),je.editConfigModel.adjustNodePosition&&Me.draggable&&w.stepDrag&&w.stepDrag.handleMouseDown(te)}),ha(oa(w),"setHoverON",function(te){var _e=w.props,Me=_e.model,je=_e.graphModel;if(!Me.isHovered){var at=Me.getData();Me.setHovered(!0),je.eventCenter.emit(Cn.NODE_MOUSEENTER,{data:at,e:te})}}),ha(oa(w),"setHoverOFF",function(te){var _e=w.props,Me=_e.model,je=_e.graphModel,at=Me.getData();Me.isHovered&&(Me.setHovered(!1),je.eventCenter.emit(Cn.NODE_MOUSELEAVE,{data:at,e:te}))}),ha(oa(w),"onMouseOut",function(te){QC&&w.setHoverOFF(te)});var T=m.graphModel,N=T.gridSize,F=T.eventCenter,Z=m.model;return w.stepDrag=new ge({onDragStart:w.onDragStart,onDragging:w.onDragging,onDragEnd:w.onDragEnd,step:N,eventType:"NODE",isStopPropagation:!1,eventCenter:F,model:Z}),w.modelDisposer=Object(c.F)(function(){return w.props},function(te){te&&te.model&&w.stepDrag.setModel(te.model)}),w}return o=f,s=[{key:"getModel",value:function(m){return m}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(m){return null}},{key:"getAnchors",value:function(){var m=this,w=this.props,T=w.model,N=w.graphModel,F=T.isSelected,Z=T.isHitable,te=T.isDragging,_e=T.isShowAnchor;return Z&&(F||_e)&&!te?Qf(T.anchors,function(Me,je){var at=T.getAnchorLineStyle(Me),it=T.getAnchorStyle(Me);return Object($e.g)(zC,{anchorData:Me,node:m,style:it,edgeStyle:at,anchorIndex:je,nodeModel:T,graphModel:N,setHoverOFF:m.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var m=this.props,w=m.model,T=m.graphModel,N=w.isSelected,F=w.isHitable,Z=w.enableRotate,te=w.isHovered,_e=w.getRotateControlStyle().style;if(F&&(N||te)&&Z)return Object($e.g)(r3,{graphModel:T,nodeModel:w,eventCenter:T.eventCenter,style:_e})}},{key:"getText",value:function(){var m=this.props,w=m.model,T=m.graphModel;if(w.state===Yr.TEXT_EDIT)return"";if(w.text){var N=T.editConfigModel,F=!1;return(w.text.draggable||N.nodeTextDraggable)&&(F=!0),Object($e.g)(ZO,{editable:N.nodeTextEdit&&w.text.editable,model:w,graphModel:T,draggable:F})}}},{key:"getStateClassName",value:function(){var m=this.props.model,w=m.state,T=m.isDragging,N=m.isSelected,F="lf-node";switch(w){case Yr.ALLOW_CONNECT:F+=" lf-node-allow";break;case Yr.NOT_ALLOW_CONNECT:F+=" lf-node-not-allow";break;default:F+=" lf-node-default"}return T&&(F+=" lf-isDragging"),N&&(F+=" lf-node-selected"),F}},{key:"toFront",value:function(){var m=this.props,w=m.model,T=m.graphModel;w.autoToFront&&T.toFront(w.id)}},{key:"render",value:function(){var m,w=this.props,T=w.model,N=w.graphModel,F=N.editConfigModel,Z=F.hideAnchors,te=F.adjustNodePosition,_e=F.allowRotation,Me=N.gridSize,je=N.transformModel.SCALE_X,at=T.isHitable,it=T.draggable,yt=T.transform,Vt=T.getOuterGAttributes(),gn=Vt.className,yn=gn===void 0?"":gn,zn=i3(Vt,o3),hn=Object($e.g)("g",{className:"lf-node-content"},Object($e.g)("g",{transform:yt},this.getShape(),this.getText(),_e&&this.getRotateControl()),!Z&&this.getAnchors());return at?(te&&it&&this.stepDrag.setStep(Me*je),m=Object($e.g)("g",jy({className:"".concat(this.getStateClassName()," ").concat(yn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},zn),hn)):m=Object($e.g)("g",jy({className:"".concat(this.getStateClassName()," ").concat(yn)},zn),hn),m}}])&&eS(o.prototype,l),s&&eS(o,s),f}($e.a);function l0(i){return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},l0(i)}function u0(){return u0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},u0.apply(this,arguments)}function u3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function s3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function s0(i,o){return s0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},s0(i,o)}function c3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Fy(i);if(o){var h=Fy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return f3(this,l)}}function f3(i,o){if(o&&(l0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Fy(i){return Fy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Fy(i)}var c0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&s0(f,m)})(h,i);var o,l,s=c3(h);function h(){return u3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var f=this.props.model,m=f.getNodeStyle();return Object($e.g)(Nd,u0({},m,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&s3(o.prototype,l),h}(wf);function f0(i){return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},f0(i)}function d0(){return d0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},d0.apply(this,arguments)}function d3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function p3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function p0(i,o){return p0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},p0(i,o)}function h3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=$y(i);if(o){var h=$y(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return v3(this,l)}}function v3(i,o){if(o&&(f0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function $y(i){return $y=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},$y(i)}var h0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&p0(f,m)})(h,i);var o,l,s=h3(h);function h(){return d3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var f=this.props.model,m=f.x,w=f.y,T=f.r,N=f.getNodeStyle();return Object($e.g)(Hh,d0({},N,{x:m,y:w,r:T}))}}])&&p3(o.prototype,l),h}(wf);function v0(i){return v0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},v0(i)}function m3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return tS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return tS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function nS(i){var o=i.points,l=i.className,s={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(i).forEach(function(h){var f=m3(h,2),m=f[0],w=f[1];v0(w)!=="object"&&(s[m]=w)}),s.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",s.points=o.map(function(h){return h.join(",")}).join(" "),Object($e.g)("polygon",s)}function m0(i){return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},m0(i)}function y0(){return y0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},y0.apply(this,arguments)}function y3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function g3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function g0(i,o){return g0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},g0(i,o)}function _3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=By(i);if(o){var h=By(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return b3(this,l)}}function b3(i,o){if(o&&(m0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function By(i){return By=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},By(i)}var _0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&g0(f,m)})(h,i);var o,l,s=_3(h);function h(){return y3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var f=this.props.model,m=f.x,w=f.y,T=f.width,N=f.height,F=f.points,Z=f.getNodeStyle(),te={transform:"matrix(1 0 0 1 ".concat(m-T/2," ").concat(w-N/2,")")};return Object($e.g)("g",te,Object($e.g)(nS,y0({},Z,{points:F,x:m,y:w})))}}])&&g3(o.prototype,l),h}(wf);function b0(i){return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},b0(i)}function w0(){return w0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},w0.apply(this,arguments)}function w3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function E3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function E0(i,o){return E0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},E0(i,o)}function O3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Uy(i);if(o){var h=Uy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return S3(this,l)}}function S3(i,o){if(o&&(b0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Uy(i){return Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Uy(i)}var O0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&E0(f,m)})(h,i);var o,l,s=O3(h);function h(){return w3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var f=this.props.model,m=f.getNodeStyle();return Object($e.g)("g",null,Object($e.g)(nS,w0({},m,{points:f.points,x:f.x,y:f.y})))}}])&&E3(o.prototype,l),h}(wf);function S0(i){return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},S0(i)}function x3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return rS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return rS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function A3(i){var o=i.x,l=o===void 0?0:o,s=i.y,h=s===void 0?0:s,f=i.rx,m=f===void 0?4:f,w=i.ry,T=w===void 0?4:w,N=i.className,F={cx:l,cy:h,rx:m,ry:T,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(Z){var te=x3(Z,2),_e=te[0],Me=te[1];S0(Me)!=="object"&&(F[_e]=Me)}),F.className=N?"lf-basic-shape ".concat(N):"lf-basic-shape",Object($e.g)("ellipse",F)}function x0(i){return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},x0(i)}function A0(){return A0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},A0.apply(this,arguments)}function T3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function M3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function T0(i,o){return T0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},T0(i,o)}function k3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Vy(i);if(o){var h=Vy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return P3(this,l)}}function P3(i,o){if(o&&(x0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Vy(i){return Vy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Vy(i)}var M0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&T0(f,m)})(h,i);var o,l,s=k3(h);function h(){return T3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var f=this.props.model,m=f.getNodeStyle();return Object($e.g)(A3,A0({},m,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&M3(o.prototype,l),h}(wf);function k0(i){return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},k0(i)}function oS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function iS(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?oS(Object(l),!0).forEach(function(s){R3(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):oS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function R3(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function N3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function C3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function P0(i,o){return P0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},P0(i,o)}function D3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Gy(i);if(o){var h=Gy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return j3(this,l)}}function j3(i,o){if(o&&(k0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Gy(i){return Gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Gy(i)}var R0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&P0(f,m)})(h,i);var o,l,s=D3(h);function h(){return N3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getBackground",value:function(){var f=this.props.model,m=f.getTextStyle(),w=f.width,T=f.height,N=f.x,F=f.y,Z=iS(iS({},m.background),{},{x:N,y:F-1,width:w,height:T});return Object($e.g)(Nd,Z)}},{key:"getShape",value:function(){return Object($e.g)("g",null,this.getBackground())}}])&&C3(o.prototype,l),h}(wf);function N0(i){return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},N0(i)}function C0(){return C0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},C0.apply(this,arguments)}function I3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function L3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function D0(i,o){return D0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},D0(i,o)}function F3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Wy(i);if(o){var h=Wy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return $3(this,l)}}function $3(i,o){if(o&&(N0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mm(i)}function mm(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Wy(i){return Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Wy(i)}function zy(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var j0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&D0(f,m)})(h,i);var o,l,s=F3(h);function h(){var f;I3(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return zy(mm(f=s.call.apply(s,[this].concat(w))),"ref",void 0),zy(mm(f),"currentProperties",void 0),zy(mm(f),"preProperties",void 0),zy(mm(f),"setRef",function(N){f.ref=N}),f}return o=h,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,m=f.x,w=f.y,T=f.height,N=f.width,F=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object($e.g)("foreignObject",C0({},F,{x:m-N/2,y:w-T/2,width:N,height:T,ref:this.setRef}))}}])&&L3(o.prototype,l),h}(wf);function I0(i){return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},I0(i)}function L0(){return L0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},L0.apply(this,arguments)}function aS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Up(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?aS(Object(l),!0).forEach(function(s){B0(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):aS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function B3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function F0(i,o){return F0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},F0(i,o)}function U3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Hy(i);if(o){var h=Hy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return V3(this,l)}}function V3(i,o){if(o&&(I0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $0(i)}function $0(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Hy(i){return Hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Hy(i)}function B0(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var G3=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&F0(f,m)})(h,i);var o,l,s=U3(h);function h(f){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,h),B0($0(m=s.call(this,f)),"setHoverON",function(){m.setState({isHovered:!0})}),B0($0(m),"setHoverOFF",function(){m.setState({isHovered:!1})}),m.state={isHovered:!1},m}return o=h,(l=[{key:"getBackground",value:function(){var f=this.props.model,m=f.getTextStyle(),w=f.text,T=f.width,N=m.background||{};if(this.state.isHovered&&m.hover&&m.hover.background&&(N=Up(Up({},N),m.hover.background)),w&&w.value&&N.fill!=="transparent"){var F,Z=m.fontSize,te=m.overflowMode,_e=m.lineHeight,Me=m.wrapPadding,je=m.textWidth,at=w.value,it=w.x,yt=w.y,Vt=String(at).split(/[\r\n]/g),gn=Vt.length;if(te==="autoWrap"&&je){var yn=lf({rows:Vt,style:{fontSize:"".concat(Z,"px"),width:"".concat(je,"px"),lineHeight:_e,padding:Me},rowsLength:gn,className:"lf-get-text-height"});F=Up(Up({},N),{},{x:it-1,y:yt-1,width:je,height:yn})}else{Vt&&Vt.forEach(function(Ir){jo(Ir)});var zn=us({rows:Vt,fontSize:Z,rowsLength:gn}),hn=zn.width,In=zn.height;if(te==="ellipsis"&&(hn=je||T,In=Z+2),typeof N.wrapPadding=="string"){var Sn=N.wrapPadding.split(",").filter(function(Ir){return Ir.trim()}).map(function(Ir){return parseFloat(Ir.trim())});Sn.length>0&&Sn.length<=4&&(Sn.length===1?Sn=[Sn[0],Sn[0],Sn[0],Sn[0]]:Sn.length===2?Sn=[Sn[0],Sn[1],Sn[0],Sn[1]]:Sn.length===3&&(Sn=[Sn[0],Sn[1],Sn[2],Sn[1]]),hn+=Sn[1]+Sn[3],In+=Sn[0]+Sn[2],it+=(Sn[1]-Sn[3])/2,yt+=(Sn[2]-Sn[0])/2)}F=Up(Up({},N),{},{x:it-1,y:yt-1,width:hn,height:In})}return Object($e.g)(Nd,F)}}},{key:"getShape",value:function(){var f=this.props.model,m=f.text,w=m.value,T=m.x,N=m.y;if(w){var F=Up({x:T,y:N,className:"lf-element-text",value:w},f.getTextStyle());return Object($e.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object($e.g)(YO,L0({},F,{model:f})))}}}])&&B3(o.prototype,l),h}(ZO);function U0(i){return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},U0(i)}var ic,W3=["text","sourceAnchorId","targetAnchorId"];function lS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Ef(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?lS(Object(l),!0).forEach(function(s){Ql(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):lS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function z3(i,o){if(i==null)return{};var l,s,h=function(m,w){if(m==null)return{};var T,N,F={},Z=Object.keys(m);for(N=0;N<Z.length;N++)T=Z[N],w.indexOf(T)>=0||(F[T]=m[T]);return F}(i,o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(s=0;s<f.length;s++)l=f[s],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(h[l]=i[l])}return h}function H3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return uS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return uS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function uS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function X3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function V0(i,o){return V0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},V0(i,o)}function q3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Xy(i);if(o){var h=Xy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return Y3(this,l)}}function Y3(i,o){if(o&&(U0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jl(i)}function Jl(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xy(i){return Xy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Xy(i)}function Ql(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(ic||(ic={}));var sS=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&V0(f,m)})(h,i);var o,l,s=q3(h);function h(f){var m;(function(F,Z){if(!(F instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,h),Ql(Jl(m=s.call(this)),"stepDragData",void 0),Ql(Jl(m),"stepDrag",void 0),Ql(Jl(m),"oldEdge",void 0),Ql(Jl(m),"preTargetNode",void 0),Ql(Jl(m),"targetRuleResults",void 0),Ql(Jl(m),"sourceRuleResults",void 0),Ql(Jl(m),"handleMouseDown",function(F){m.stepDrag&&m.stepDrag.handleMouseDown(F)}),Ql(Jl(m),"onDragStart",function(){var F=m.props,Z=F.x,te=F.y,_e=F.edgeModel,Me=_e.startPoint,je=_e.endPoint,at=_e.pointsList;m.oldEdge={startPoint:Me,endPoint:je,pointsList:at},m.setState({endX:Z,endY:te,dragging:!0})}),Ql(Jl(m),"onDragging",function(F){var Z=F.deltaX,te=F.deltaY,_e=m.state,Me=_e.endX,je=_e.endY,at=m.props,it=at.graphModel,yt=at.type,Vt=it.transformModel,gn=it.editConfigModel,yn=H3(Vt.moveCanvasPointByHtml([Me,je],Z,te),2),zn=yn[0],hn=yn[1];m.setState({endX:zn,endY:hn,dragging:!0});var In=m.props.edgeModel,Sn=tf({x:Me,y:je},it);if(Sn&&Sn.node&&m.isAllowAdjust(Sn).pass){var Ir,Ur=In.startPoint,pr=In.endPoint,Kr=In.sourceNode,bi=In.targetNode;yt===ic.SOURCE?Ir={startPoint:{x:Sn.anchor.x,y:Sn.anchor.y},endPoint:{x:pr.x,y:pr.y},sourceNode:Sn.node,targetNode:bi}:yt===ic.TARGET&&(Ir={startPoint:{x:Ur.x,y:Ur.y},endPoint:{x:Sn.anchor.x,y:Sn.anchor.y},sourceNode:Kr,targetNode:Sn.node}),In.updateAfterAdjustStartAndEnd(Ir)}else yt===ic.SOURCE?In.updateStartPoint({x:zn,y:hn}):yt===ic.TARGET&&In.updateEndPoint({x:zn,y:hn});In.text.value&&gn.adjustEdge&&In.setText(Object.assign({},In.text,In.textPosition))}),Ql(Jl(m),"onDragEnd",function(F){var Z=F.event;try{var te;m.setState({dragging:!1});var _e=m.props,Me=_e.graphModel,je=_e.edgeModel,at=_e.type,it=m.state,yt=it.endX,Vt=it.endY,gn=it.dragging,yn=tf({x:yt,y:Vt},Me);if(!gn)return;var zn,hn=!1;if(yn&&yn.node){var In=m.isAllowAdjust(yn),Sn=In.pass,Ir=In.msg,Ur=In.newTargetNode;if(Sn){var pr=je.getData(),Kr=pr.text,bi=pr.sourceAnchorId,wi=bi===void 0?"":bi,Ta=pr.targetAnchorId;zn=Ef(Ef({sourceAnchorId:wi,targetAnchorId:Ta===void 0?"":Ta},z3(pr,W3)),{},{text:(Kr==null?void 0:Kr.value)||""}),at===ic.SOURCE?(zn=Ef(Ef({},Me.edgeGenerator(Me.getNodeModelById(yn.node.id).getData(),Me.getNodeModelById(je.targetNodeId).getData(),zn)),{},{sourceNodeId:yn.node.id,sourceAnchorId:yn.anchor.id,startPoint:{x:yn.anchor.x,y:yn.anchor.y},targetNodeId:je.targetNodeId,endPoint:Ef({},je.endPoint)}),je.sourceNodeId===yn.node.id&&je.sourceAnchorId===yn.anchor.id&&(hn=!0)):at===ic.TARGET&&(zn=Ef(Ef({},Me.edgeGenerator(Me.getNodeModelById(je.sourceNodeId).getData(),Me.getNodeModelById(yn.node.id).getData(),zn)),{},{sourceNodeId:je.sourceNodeId,startPoint:Ef({},je.startPoint),targetNodeId:yn.node.id,targetAnchorId:yn.anchor.id,endPoint:{x:yn.anchor.x,y:yn.anchor.y}}),je.targetNodeId===yn.node.id&&je.targetAnchorId===yn.anchor.id&&(hn=!0))}else{hn=!0;var eu=Ur.getData();Me.eventCenter.emit(Cn.CONNECTION_NOT_ALLOWED,{data:eu,msg:Ir})}}else hn=!0;if(hn)m.recoveryEdge();else{var tu=je.getData();Me.deleteEdgeById(je.id);var lc=Me.addEdge(Ef({},zn));Me.eventCenter.emit(Cn.EDGE_EXCHANGE_NODE,{data:{newEdge:lc.getData(),oldEdge:tu}})}(te=m.preTargetNode)===null||te===void 0||te.setElementState(Yr.DEFAULT)}finally{m.props.graphModel.eventCenter.emit(Cn.ADJUST_POINT_DRAGEND,{e:Z,data:m.stepDragData})}}),Ql(Jl(m),"recoveryEdge",function(){var F=m.props.edgeModel,Z=m.oldEdge,te=Z.startPoint,_e=Z.endPoint,Me=Z.pointsList;F.updateStartPoint(te),F.updateEndPoint(_e),F.modelType!==Sr.LINE_EDGE&&(F.pointsList=Me,F.initPoints())}),Ql(Jl(m),"getAdjustPointStyle",function(){var F=m.props,Z=F.graphModel.theme;return F.edgeModel,Z.edgeAdjust}),m.state={dragging:!1,endX:0,endY:0},m.targetRuleResults=new Map,m.sourceRuleResults=new Map;var w=f.type,T=f.edgeModel,N=f.graphModel.eventCenter;return m.stepDragData={type:w,edgeData:T.getData()},m.stepDrag=new ge({onDragStart:m.onDragStart,onDragging:m.onDragging,onDragEnd:m.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:N,data:m.stepDragData}),m}return o=h,(l=[{key:"isAllowAdjust",value:function(f){var m=this.props,w=m.edgeModel,T=w.id,N=w.sourceNode,F=w.targetNode,Z=w.sourceAnchorId,te=w.targetAnchorId,_e=m.type,Me=null,je=null,at=null,it=null;if(_e===ic.SOURCE?(Me=f.node,je=F,at=f.anchor,it=F.getAnchorInfo(te)):(Me=N,je=f.node,it=f.anchor,at=N.getAnchorInfo(Z)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(Yr.DEFAULT),this.preTargetNode=f.node,it.id===at.id)return{pass:!1,msg:"",newTargetNode:je};var yt="".concat(Me.id,"_").concat(je.id,"_").concat(at.id,"_").concat(it.id);if(!this.targetRuleResults.has(yt)){var Vt=Me.isAllowConnectedAsSource(je,at,it,T),gn=je.isAllowConnectedAsTarget(Me,at,it,T);this.sourceRuleResults.set(yt,ql(Vt)),this.targetRuleResults.set(yt,ql(gn))}var yn=this.sourceRuleResults.get(yt),zn=yn.isAllPass,hn=yn.msg,In=this.targetRuleResults.get(yt),Sn=In.isAllPass,Ir=In.msg,Ur=zn&&Sn?Yr.ALLOW_CONNECT:Yr.NOT_ALLOW_CONNECT;return _e===ic.SOURCE?Me.setElementState(Ur):je.setElementState(Ur),{pass:zn&&Sn,msg:Ir||hn,newTargetNode:je}}},{key:"render",value:function(){var f=this.props,m=f.x,w=f.y,T=f.getAdjustPointShape,N=f.edgeModel,F=this.state.dragging;return Object($e.g)("g",{pointerEvents:F?"none":"",onMouseDown:this.handleMouseDown},F?"":T(m,w,N))}}])&&X3(o.prototype,l),h}($e.a);function G0(i){return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},G0(i)}function ym(){return ym=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},ym.apply(this,arguments)}function K3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return cS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return cS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function cS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function Z3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function J3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function W0(i,o){return W0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},W0(i,o)}function Q3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=qy(i);if(o){var h=qy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return eD(this,l)}}function eD(i,o){if(o&&(G0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gs(i)}function gs(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qy(i){return qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},qy(i)}function ac(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var gm=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&W0(f,m)})(h,i);var o,l,s=Q3(h);function h(){var f;Z3(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return ac(gs(f=s.call.apply(s,[this].concat(w))),"startTime",void 0),ac(gs(f),"contextMenuTime",void 0),ac(gs(f),"clickTimer",void 0),ac(gs(f),"textRef",Object($e.f)()),ac(gs(f),"handleHover",function(N,F){var Z=f.props,te=Z.model,_e=Z.graphModel.eventCenter;te.setHovered(N);var Me=N?Cn.EDGE_MOUSEENTER:Cn.EDGE_MOUSELEAVE,je=te.getData();_e.emit(Me,{data:je,e:F})}),ac(gs(f),"setHoverON",function(N){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,N))}),ac(gs(f),"setHoverOFF",function(N){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,N))}),ac(gs(f),"handleContextMenu",function(N){N.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var F=f.props,Z=F.model,te=F.graphModel,_e=te.getPointByClient({x:N.clientX,y:N.clientY});te.setElementStateById(Z.id,Yr.SHOW_MENU,_e.domOverlayPosition),f.toFront(),Z.isSelected||te.selectEdgeById(Z.id);var Me=Z==null?void 0:Z.getData();te.eventCenter.emit(Cn.EDGE_CONTEXTMENU,{data:Me,e:N,position:_e})}),ac(gs(f),"handleMouseDown",function(N){N.stopPropagation(),f.startTime=new Date().getTime()}),ac(gs(f),"handleMouseUp",function(N){if(f.startTime&&!(new Date().getTime()-f.startTime>200||N.button===2)){var F=N.detail===2,Z=f.props,te=Z.model,_e=Z.graphModel,Me=te==null?void 0:te.getData(),je=_e.getPointByClient({x:N.clientX,y:N.clientY});if(F){var at=_e.editConfigModel,it=_e.textEditElement;if(it&&it.id===te.id&&_e.setElementStateById(te.id,Yr.DEFAULT),at.edgeTextEdit&&te.text.editable&&_e.setElementStateById(te.id,Yr.TEXT_EDIT),te.modelType===Sr.POLYLINE_EDGE){var yt=te,Vt=_e.getPointByClient({x:N.x,y:N.y}).canvasOverlayPosition,gn=Vt.x,yn=Vt.y,zn=Ar({x:gn,y:yn},yt.points);yt.dbClickPosition=zn}_e.eventCenter.emit(Cn.EDGE_DBCLICK,{data:Me,e:N,position:je})}else _e.eventCenter.emit(Cn.ELEMENT_CLICK,{data:Me,e:N,position:je}),_e.eventCenter.emit(Cn.EDGE_CLICK,{data:Me,e:N,position:je});var hn=_e.editConfigModel;_e.selectEdgeById(te.id,Xs(N,hn)),f.toFront()}}),f}return o=h,(l=[{key:"getShape",value:function(){return Object($e.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,m=f.model,w=f.graphModel;if(m.state===Yr.TEXT_EDIT)return null;var T=!1,N=w.editConfigModel;return(m.text.draggable||N.edgeTextDraggable)&&(T=!0),Object($e.g)(G3,{ref:this.textRef,editable:N.edgeTextEdit&&m.text.editable,model:m,graphModel:w,draggable:T})}},{key:"getArrowInfo",value:function(){var f=this.props.model,m=f.startPoint,w=f.endPoint,T=f.isSelected;return{start:m,end:w,hover:this.state.hover,isSelected:T}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,m=f.id,w=f.getArrowStyle(),T=w.refY,N=T===void 0?0:T,F=w.refX,Z=F===void 0?2:F,te=K3(this.getLastTwoPoints(),2),_e=te[0],Me=te[1],je="auto";return _e!==null&&Me!==null&&(je=jp(kd({x:Me.x-_e.x,y:Me.y-_e.y,z:0}))),Object($e.g)("g",null,Object($e.g)("defs",null,Object($e.g)("marker",{id:"marker-start-".concat(m),refX:-Z,refY:N,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object($e.g)("marker",{id:"marker-end-".concat(m),refX:Z,refY:N,overflow:"visible",orient:je,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object($e.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),m=f.stroke,w=f.strokeWidth,T=f.offset,N=f.verticalLength;return Object($e.g)("path",{stroke:m,fill:m,strokeWidth:w,transform:"rotate(180)",d:"M 0 0 L ".concat(T," -").concat(N," L ").concat(T," ").concat(N," Z")})}},{key:"getAdjustPointShape",value:function(f,m,w){var T=w.getAdjustPointStyle();return Object($e.g)(Hh,ym({className:"lf-edge-adjust-point"},T,{x:f,y:m}))}},{key:"getAdjustPoints",value:function(){var f=this.props,m=f.model,w=f.graphModel,T=m.getAdjustStart(),N=m.getAdjustEnd();return Object($e.g)("g",null,Object($e.g)(sS,ym({type:"SOURCE"},T,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:w})),Object($e.g)(sS,ym({type:"TARGET"},N,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:w})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object($e.g)("g",null)}},{key:"getAppend",value:function(){return Object($e.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,m=f.graphModel,w=f.model;m.toFront(w.id)}},{key:"render",value:function(){var f=this.props,m=f.model,w=m.isSelected,T=m.isHitable,N=m.isShowAdjustPoint;return f.graphModel.animation,Object($e.g)("g",null,Object($e.g)("g",{className:["lf-edge",!T&&"pointer-none",w&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),N&&w?this.getAdjustPoints():"")}}])&&J3(o.prototype,l),h}($e.a);function z0(i){return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},z0(i)}function tD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return fS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return fS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var _m=function(i){var o={d:""};return Object.entries(i).forEach(function(l){var s=tD(l,2),h=s[0],f=s[1],m=z0(f);h!=="style"&&m==="object"||(o[h]=f)}),Object($e.g)("path",o)};function H0(i){return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},H0(i)}function X0(){return X0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},X0.apply(this,arguments)}function nD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function rD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function q0(i,o){return q0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},q0(i,o)}function oD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Yy(i);if(o){var h=Yy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return iD(this,l)}}function iD(i,o){if(o&&(H0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Yy(i){return Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yy(i)}var Y0=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&q0(f,m)})(h,i);var o,l,s=oD(h);function h(){return nD(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getEdge",value:function(){var f=this.props.model,m=f.startPoint,w=f.endPoint,T=f.isAnimation,N=f.arrowConfig,F=f.getEdgeStyle(),Z=f.getEdgeAnimationStyle(),te=Z.strokeDasharray,_e=Z.stroke,Me=Z.strokeDashoffset,je=Z.animationName,at=Z.animationDuration,it=Z.animationIterationCount,yt=Z.animationTimingFunction,Vt=Z.animationDirection;return Object($e.g)(Wh,X0({},F,{x1:m.x,y1:m.y,x2:w.x,y2:w.y},N,T?{strokeDasharray:te,stroke:_e,style:{strokeDashoffset:Me,animationName:je,animationDuration:at,animationIterationCount:it,animationTimingFunction:yt,animationDirection:Vt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,m=f.startPoint,w=f.endPoint,T=di({start:m,end:w}),N=T.d,F=T.strokeWidth,Z=T.fill,te=T.strokeDasharray,_e=T.stroke;return Object($e.g)(_m,{d:N,fill:Z,strokeWidth:F,stroke:_e,strokeDasharray:te})}}])&&rD(o.prototype,l),h}(gm);function K0(i){return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},K0(i)}function aD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return dS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return dS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var lD=function(i){var o={points:"",fill:"none"};return Object.entries(i).forEach(function(l){var s=aD(l,2),h=s[0],f=s[1];(h==="style"||K0(f)!=="object")&&(o[h]=f)}),Object($e.g)("polyline",o)};function Z0(i){return Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Z0(i)}function pS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Ky(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?pS(Object(l),!0).forEach(function(s){Sf(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):pS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function J0(){return J0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},J0.apply(this,arguments)}function uD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return hS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return hS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function sD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Q0(i,o){return Q0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Q0(i,o)}function cD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Zy(i);if(o){var h=Zy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return fD(this,l)}}function fD(i,o){if(o&&(Z0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Of(i)}function Of(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Zy(i){return Zy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Zy(i)}function Sf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var e1=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&Q0(f,m)})(h,i);var o,l,s=cD(h);function h(){var f;return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),Sf(Of(f=s.call(this)),"drag",void 0),Sf(Of(f),"isDragging",void 0),Sf(Of(f),"isShowAdjustPointTemp",void 0),Sf(Of(f),"appendInfo",void 0),Sf(Of(f),"onDragStart",function(){var m=f.props.model;m.dragAppendStart(),f.isShowAdjustPointTemp=m.isShowAdjustPoint,m.isShowAdjustPoint=!1}),Sf(Of(f),"onDragging",function(m){var w=m.deltaX,T=m.deltaY,N=f.props,F=N.model,Z=N.graphModel;f.isDragging=!0;var te=Z.transformModel,_e=Z.editConfigModel,Me=uD(te.fixDeltaXY(w,T),2),je=Me[0],at=Me[1],it=F,yt=_e.adjustEdgeMiddle;f.appendInfo=yt?it.dragAppendSimple(f.appendInfo,{x:je,y:at}):it.dragAppend(f.appendInfo,{x:je,y:at})}),Sf(Of(f),"onDragEnd",function(){var m=f.props,w=m.model,T=m.graphModel.eventCenter,N=w;N.dragAppendEnd(),f.isDragging=!1,N.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,T.emit(Cn.EDGE_ADJUST,{data:N.getData()})}),Sf(Of(f),"beforeDragStart",function(m,w){w.dragAble&&f.drag.handleMouseDown(m),f.appendInfo=w}),f.drag=new ge({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return o=h,(l=[{key:"getEdge",value:function(){var f=this.props.model,m=f.points,w=f.isAnimation,T=f.arrowConfig,N=f.getEdgeStyle(),F=f.getEdgeAnimationStyle(),Z=F.strokeDasharray,te=F.stroke,_e=F.strokeDashoffset,Me=F.animationName,je=F.animationDuration,at=F.animationIterationCount,it=F.animationTimingFunction,yt=F.animationDirection;return Object($e.g)(lD,J0({points:m},N,T,w?{strokeDasharray:Z,stroke:te,style:{strokeDashoffset:_e,animationName:Me,animationDuration:je,animationIterationCount:at,animationTimingFunction:it,animationDirection:yt}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,m=f.points,w=f.isSelected,T={start:null,end:null,hover:this.state.hover,isSelected:w},N=tr(m);return N.length>=2&&(T.start=N[N.length-2],T.end=N[N.length-1]),T}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,m=tr(f);return m.length>=2?[m[m.length-2],m[m.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var m,w=f.start,T=f.end;if(w.x===T.x&&w.y===T.y)m="";else{var N={start:w,end:T,offset:10,verticalLength:5},F=ds(Ky(Ky({},N),{},{type:"start"})),Z=ds(Ky(Ky({},N),{},{type:"end"}));m="M".concat(F.leftX," ").concat(F.leftY,` 
      L`).concat(F.rightX," ").concat(F.rightY,` 
      L`).concat(Z.rightX," ").concat(Z.rightY,`
      L`).concat(Z.leftX," ").concat(Z.leftY," z")}return{d:m,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var m=this.getAppendAttributes(f),w=m.d,T=m.strokeWidth,N=m.fill,F=m.strokeDasharray,Z=m.stroke;return Object($e.g)(_m,{d:w,fill:N,strokeWidth:T,stroke:Z,strokeDasharray:F})}},{key:"getAppendWidth",value:function(){for(var f=this,m=this.props,w=m.model,T=m.graphModel,N=w.pointsList,F=w.draggable,Z=[],te=N.length,_e=function(je){var at="lf-polyline-append",it={start:{x:N[je].x,y:N[je].y},end:{x:N[je+1].x,y:N[je+1].y},startIndex:je,endIndex:je+1,direction:"",dragAble:!0},yt=Object($e.g)("g",{className:at},f.getAppendShape(it)),Vt=T.editConfigModel,gn=Vt.adjustEdge,yn=Vt.adjustEdgeMiddle;if(gn&&F){var zn=it.startIndex,hn=it.endIndex,In=yn&&(zn===0||hn===te-1);it.dragAble=!In,it.start.x===it.end.x?(it.dragAble&&(at+="-ew-resize"),it.direction=co.VERTICAL):it.start.y===it.end.y&&(it.dragAble&&(at+="-ns-resize"),it.direction=co.HORIZONTAL),yt=Object($e.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Sn){return f.beforeDragStart(Sn,it)}},Object($e.g)("g",{className:at},f.getAppendShape(it)))}Z.push(yt)},Me=0;Me<te-1;Me++)_e(Me);return Object($e.g)("g",null,Z)}}])&&sD(o.prototype,l),h}(gm);function t1(i){return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t1(i)}function dD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return vS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return vS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function n1(){return n1=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},n1.apply(this,arguments)}function pD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function hD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function r1(i,o){return r1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},r1(i,o)}function vD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Jy(i);if(o){var h=Jy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return mD(this,l)}}function mD(i,o){if(o&&(t1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Jy(i){return Jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Jy(i)}var o1=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&r1(f,m)})(h,i);var o,l,s=vD(h);function h(){return pD(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getEdge",value:function(){var f=this.props.model,m=f.getEdgeStyle(),w=f.path,T=f.isAnimation,N=f.arrowConfig,F=f.getEdgeAnimationStyle(),Z=F.strokeDasharray,te=F.stroke,_e=F.strokeDashoffset,Me=F.animationName,je=F.animationDuration,at=F.animationIterationCount,it=F.animationTimingFunction,yt=F.animationDirection;return Object($e.g)(_m,n1({d:w},m,N,T?{strokeDasharray:Z,stroke:te,style:{strokeDashoffset:_e,animationName:Me,animationDuration:je,animationIterationCount:at,animationTimingFunction:it,animationDirection:yt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object($e.g)(_m,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,m=this.state.hover,w=f.isSelected,T=f.getArrowStyle().offset,N=f.pointsList.map(function(Z){return{x:Z.x,y:Z.y}}),F=dD(pi(N,T),2);return{start:F[0],end:F[1],hover:m,isSelected:w}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model,m=f.getArrowStyle().offset,w=f.pointsList.map(function(T){return{x:T.x,y:T.y}});return pi(w,m)}}])&&hD(o.prototype,l),h}(gm);function i1(i){return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i1(i)}function mS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function yD(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function gD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _D(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function a1(i,o){return a1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},a1(i,o)}function bD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Qy(i);if(o){var h=Qy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return wD(this,l)}}function wD(i,o){if(o&&(i1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Qy(i){return Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qy(i)}var ED=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&a1(f,m)})(h,i);var o,l,s=bD(h);function h(){return gD(this,h),s.apply(this,arguments)}return o=h,l=[{key:"getArrowAttributes",value:function(){var f=this.props,m=f.arrowInfo,w=f.style,T=m.start,N=m.end,F={start:T,end:N,offset:w.offset,verticalLength:w.verticalLength,type:"end"},Z=ds(F),te=Z.leftX,_e=Z.leftY,Me=Z.rightX,je=Z.rightY;return function(at){for(var it=1;it<arguments.length;it++){var yt=arguments[it]!=null?arguments[it]:{};it%2?mS(Object(yt),!0).forEach(function(Vt){yD(at,Vt,yt[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(yt)):mS(Object(yt)).forEach(function(Vt){Object.defineProperty(at,Vt,Object.getOwnPropertyDescriptor(yt,Vt))})}return at}({d:"M".concat(te," ").concat(_e," L").concat(N.x," ").concat(N.y," L").concat(Me," ").concat(je," z")},w)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),m=f.d,w=f.strokeWidth,T=f.stroke,N=f.fill;return Object($e.g)(_m,{d:m,fill:N,strokeWidth:w,stroke:T})}},{key:"render",value:function(){return Object($e.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&_D(o.prototype,l),h}($e.a),yS=function(i,o){return mt(i,o)},OD=function(i){var o=i==null?0:i.length;return o?i[o-1]:void 0},l1=function(){return Nn.a.Date.now()},SD=Math.max,xD=Math.min,AD=function(i,o,l){var s,h,f,m,w,T,N=0,F=!1,Z=!1,te=!0;if(typeof i!="function")throw new TypeError("Expected a function");function _e(Vt){var gn=s,yn=h;return s=h=void 0,N=Vt,m=i.apply(yn,gn)}function Me(Vt){return N=Vt,w=setTimeout(at,o),F?_e(Vt):m}function je(Vt){var gn=Vt-T;return T===void 0||gn>=o||gn<0||Z&&Vt-N>=f}function at(){var Vt=l1();if(je(Vt))return it(Vt);w=setTimeout(at,function(gn){var yn=o-(gn-T);return Z?xD(yn,f-(gn-N)):yn}(Vt))}function it(Vt){return w=void 0,te&&s?_e(Vt):(s=h=void 0,m)}function yt(){var Vt=l1(),gn=je(Vt);if(s=arguments,h=this,T=Vt,gn){if(w===void 0)return Me(T);if(Z)return clearTimeout(w),w=setTimeout(at,o),_e(T)}return w===void 0&&(w=setTimeout(at,o)),m}return o=Ys(o)||0,jr(l)&&(F=!!l.leading,f=(Z="maxWait"in l)?SD(Ys(l.maxWait)||0,o):f,te="trailing"in l?!!l.trailing:te),yt.cancel=function(){w!==void 0&&clearTimeout(w),N=0,s=T=h=w=void 0},yt.flush=function(){return w===void 0?m:it(l1())},yt},TD=r(172);function MD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Id(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var gS,_S,bS,kD=function(){function i(s){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),Id(this,"undos",[]),Id(this,"redos",[]),Id(this,"callbacks",[]),Id(this,"stopWatch",null),Id(this,"curData",null),Id(this,"maxSize",50),Id(this,"waitTime",100),Id(this,"eventCenter",void 0),this.eventCenter=s}var o,l;return o=i,(l=[{key:"add",value:function(s){yS(OD(this.undos),s)||(this.undos.push(s),yS(this.curData,s)||(this.redos=[]),this.eventCenter.emit(Cn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var s=this.undos.pop();this.redos.push(s);var h=this.undos.pop();return this.curData=to(h),h}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var s=this.redos.pop();return this.curData=to(s),s}}},{key:"watch",value:function(s){var h=this;this.stopWatch&&this.stopWatch(),this.undos.push(s.modelToGraphData()),this.stopWatch=Object(TD.a)(s,AD(function(){var f=s.modelToHistoryData();f&&h.add(f)},this.waitTime))}}])&&MD(o.prototype,l),i}();function u1(i){return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},u1(i)}function PD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return wS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return wS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function ES(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Vp(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?ES(Object(l),!0).forEach(function(s){Gp(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):ES(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function OS(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function s1(i,o){return s1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},s1(i,o)}function RD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=eg(i);if(o){var h=eg(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return ND(this,l)}}function ND(i,o){if(o&&(u1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rv(i)}function rv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function eg(i){return eg=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},eg(i)}function Gp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var SS,xS,AS,c1=_s((bS=_S=function(i){(function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),w&&s1(m,w)})(f,i);var o,l,s,h=RD(f);function f(){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,f),Gp(rv(m=h.call(this)),"ref",Object($e.f)()),Gp(rv(m),"__prevText",{type:"",text:"",id:""}),Gp(rv(m),"keyupHandler",function(w){var T=m.props.graphModel.textEditElement;w.key==="Enter"&&w.altKey&&T.setElementState(0)}),Gp(rv(m),"inputHandler",function(w){var T=w.target.innerText,N=m.props.graphModel.textEditElement;m.__prevText={type:N.type,text:T.replace(/(\r\n)+$|(\n)+$/,""),id:N.id}}),Gp(rv(m),"keydownHandler",function(w){w.stopPropagation()}),m.state={style:{left:0,top:0}},m}return o=f,s=[{key:"getDerivedStateFromProps",value:function(m){var w,T=m.graphModel,N=T.transformModel,F=T.theme,Z=F.inputText,te=T.textEditElement;if(te){var _e;if((_e=te.text)===null||_e===void 0||!_e.value)if(te.BaseType===so.EDGE){var Me=(te=te).text,je=te.textPosition,at=je.x,it=je.y;Me.x=at,Me.y=it,te.setText(Me)}else te=te;var yt={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(te.BaseType===so.EDGE){var Vt=F.edgeText,gn=Vt.overflowMode,yn=Vt.lineHeight,zn=Vt.wrapPadding,hn=Vt.textWidth;hn&&gn==="autoWrap"&&(w=Vp(Vp({},yt),{},{width:hn,minWidth:hn,lineHeight:yn,padding:zn}))}else if(te.BaseType===so.NODE){var In=F.nodeText,Sn=In.overflowMode,Ir=In.lineHeight,Ur=In.wrapPadding,pr=In.textWidth,Kr=te,bi=Kr.width,wi=Kr.modelType,Ta=Kr.textWidth||pr||bi;(wi!==Sr.TEXT_NODE&&Sn==="autoWrap"||wi===Sr.TEXT_NODE&&pr)&&(w=Vp(Vp({},yt),{},{width:Ta,minWidth:Ta,lineHeight:Ir,padding:Ur}))}var eu=te.text,tu=eu.x,lc=eu.y,Wp=PD(N.CanvasPointToHtmlPoint([tu,lc]),2);return{style:Vp(Vp({left:Wp[0],top:Wp[1]},w),Z)}}}}],(l=[{key:"componentDidUpdate",value:function(){var m=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var w=this.__prevText,T=w.text,N=w.id;m.updateText(N,T),m.eventCenter.emit(Cn.TEXT_UPDATE,Vp({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(m){if(window.getSelection!==void 0&&document.createRange!==void 0){var w=document.createRange();w.selectNodeContents(m),w.collapse(!1);var T=window.getSelection();T.removeAllRanges(),T.addRange(w)}}},{key:"render",value:function(){var m,w=this.props.graphModel.textEditElement,T=this.state.style;return w?Object($e.g)("div",{contentEditable:!0,className:"lf-text-input",style:T,ref:this.ref,key:w.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(m=w.text)===null||m===void 0?void 0:m.value):null}}])&&OS(o.prototype,l),s&&OS(o,s),f}($e.a),Gp(_S,"toolName","textEdit"),gS=bS))||gS,CD=function(i){return i.modelType===Sr.LINE_EDGE?function(o){var l=o.startPoint,s=o.endPoint,h=(l.x+s.x)/2,f=(l.y+s.y)/2,m=Math.abs(l.x-s.x)+10,w=Math.abs(l.y-s.y)+10;return{x:h-m/2,y:f-w/2,x1:h+m/2,y1:f+w/2}}(i):i.modelType===Sr.POLYLINE_EDGE?function(o){var l=o.points,s=tr(l),h=st(s,8),f=h.x,m=h.y,w=h.width,T=h.height;return{x:f-w/2,y:m-T/2,x1:f+w/2,y1:m+T/2}}(i):i.modelType===Sr.BEZIER_EDGE?function(o){var l=o.path,s=ho(l),h=st(s,8),f=h.x,m=h.y,w=h.width,T=h.height;return{x:f-w/2,y:m-T/2,x1:f+w/2,y1:m+T/2}}(i):void 0};function f1(i){return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},f1(i)}function TS(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,m,w=[],T=!0,N=!1;try{for(h=h.call(l);!(T=(f=h.next()).done)&&(w.push(f.value),!s||w.length!==s);T=!0);}catch(F){N=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(N)throw m}}return w}}(i,o)||MS(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function DD(i){return function(o){if(Array.isArray(o))return d1(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||MS(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function MS(i,o){if(i){if(typeof i=="string")return d1(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?d1(i,o):void 0}}function d1(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function jD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function p1(i,o){return p1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},p1(i,o)}function ID(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=tg(i);if(o){var h=tg(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return LD(this,l)}}function LD(i,o){if(o&&(f1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ov(i)}function ov(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function tg(i){return tg=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},tg(i)}function iv(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var h1=_s((AS=xS=function(i){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&p1(f,m)})(h,i);var o,l,s=ID(h);function h(f){var m;(function(F,Z){if(!(F instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,h),iv(ov(m=s.call(this)),"stepDrag",void 0),iv(ov(m),"handleMouseDown",function(F){m.stepDrag.handleMouseDown(F)}),iv(ov(m),"handleWheelEvent",function(F){var Z,te;F.preventDefault();var _e=F.deltaX,Me=F.deltaY,je=F.clientX,at=F.clientY,it=F.ctrlKey,yt=new WheelEvent("wheel",{deltaX:_e,deltaY:Me,clientX:je,clientY:at,ctrlKey:it});(Z=m.props.logicFlow.container)===null||Z===void 0||(te=Z.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||te===void 0||te.dispatchEvent(yt)}),iv(ov(m),"onDragging",function(F){var Z=F.deltaX,te=F.deltaY,_e=m.props.graphModel,Me=_e.getSelectElements(!0);_e.moveNodes(Me.nodes.map(function(je){return je.id}),Z,te)}),iv(ov(m),"handleContextMenu",function(F){F.preventDefault();var Z=m.props,te=Z.graphModel,_e=Z.graphModel,Me=_e.eventCenter,je=_e.selectElements,at=te.getPointByClient({x:F.clientX,y:F.clientY}),it={nodes:[],edges:[]};DD(je.values()).forEach(function(yt){yt.BaseType===so.NODE&&it.nodes.push(yt.getData()),yt.BaseType===so.EDGE&&it.edges.push(yt.getData())}),Me.emit(Cn.SELECTION_CONTEXTMENU,{data:it,e:F,position:at})});var w=f.graphModel,T=w.gridSize,N=w.eventCenter;return m.stepDrag=new ge({onDragging:m.onDragging,step:T,eventType:"SELECTION",eventCenter:N}),m}return o=h,(l=[{key:"render",value:function(){var f=this.props.graphModel,m=f.selectElements,w=f.transformModel;if(!(m.size<=1)){var T=Number.MAX_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER,F=Number.MIN_SAFE_INTEGER,Z=Number.MIN_SAFE_INTEGER;m.forEach(function(je){var at={x:0,y:0,x1:0,y1:0};je.BaseType===so.NODE&&(at=function(it){var yt=it.x,Vt=it.y,gn=it.width,yn=it.height;return{x:yt-gn/2,y:Vt-yn/2,x1:yt+gn/2,y1:Vt+yn/2}}(je)),je.BaseType===so.EDGE&&(at=CD(je)),T=Math.min(T,at.x),N=Math.min(N,at.y),F=Math.max(F,at.x1),Z=Math.max(Z,at.y1)});var te=TS(w.CanvasPointToHtmlPoint([T,N]),2);T=te[0],N=te[1];var _e=TS(w.CanvasPointToHtmlPoint([F,Z]),2);F=_e[0],Z=_e[1];var Me={left:"".concat(T-10,"px"),top:"".concat(N-10,"px"),width:"".concat(F-T+20,"px"),height:"".concat(Z-N+20,"px")};return Object($e.g)("div",{className:"lf-multiple-select",style:Me,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&jD(o.prototype,l),h}($e.a),iv(xS,"toolName","multipleSelect"),SS=AS))||SS;function FD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ng(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var $D=function(){function i(s){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),ng(this,"tools",void 0),ng(this,"components",void 0),ng(this,"toolMap",new Map),ng(this,"instance",void 0),this.instance=s,this.isDisabledTool(c1.toolName)||this.registerTool(c1.toolName,c1),this.isDisabledTool(h1.toolName)||this.registerTool(h1.toolName,h1);var h=s.graphModel;h.eventCenter.on("".concat(Cn.GRAPH_TRANSFORM,",").concat(Cn.NODE_CLICK,",").concat(Cn.BLANK_CLICK," "),function(){var f=h.textEditElement,m=h.editConfigModel,w=m.edgeTextEdit,T=m.nodeTextEdit;(w||T)&&f&&h.textEditElement.setElementState(Yr.DEFAULT)})}var o,l;return o=i,(l=[{key:"isDisabledTool",value:function(s){return this.instance.options.disabledTools.indexOf(s)!==-1}},{key:"registerTool",value:function(s,h){this.toolMap.set(s,h)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&FD(o.prototype,l),i}(),BD=r(173),UD=r.n(BD);function VD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function v1(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var kS=function(){function i(s){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),v1(this,"mousetrap",void 0),v1(this,"options",void 0),v1(this,"target",void 0),s.keyboard||(s.keyboard={enabled:!1}),this.options=s;var h=s.lf;this.target=h.container,this.mousetrap=new UD.a(this.target),s.keyboard.enabled&&!h.options.isSilentMode&&this.enable(!0)}var o,l;return o=i,(l=[{key:"initShortcuts",value:function(){var s=this,h=this.options.keyboard.shortcuts;if(h)if(io(h))h.forEach(function(T){var N=T.keys,F=T.callback,Z=T.action;return s.on(N,F,Z)});else{var f=h.keys,m=h.callback,w=h.action;this.on(f,m,w)}}},{key:"on",value:function(s,h,f){this.mousetrap.bind(this.getKeys(s),h,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(s,h){this.mousetrap.unbind(this.getKeys(s),h)}},{key:"enable",value:function(s){(this.disabled||s)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(s){var h=this;return(Array.isArray(s)?s:[s]).map(function(f){return h.formatKey(f)})}},{key:"formatKey",value:function(s){return s.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&VD(o.prototype,l),i}(),GD=kS,xf=null;function PS(i,o){return i.x+=o,i.y+=o,i.text&&(i.text.x+=o,i.text.y+=o),i}function RS(i,o){return i.startPoint&&(i.startPoint.x+=o,i.startPoint.y+=o),i.endPoint&&(i.endPoint.x+=o,i.endPoint.y+=o),i.pointsList&&i.pointsList.length>0&&i.pointsList.forEach(function(l){l.x+=o,l.y+=o}),i.text&&(i.text.x+=o,i.text.y+=o),i}var av=40,m1=40;function y1(i){return y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},y1(i)}function NS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function bm(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?NS(Object(l),!0).forEach(function(s){hi(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):NS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function CS(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function hi(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var g1=Symbol("plugin register by Logicflow.use"),_1=function(){function i(h){var f,m,w=this;(function(T,N){if(!(T instanceof N))throw new TypeError("Cannot call a class as a function")})(this,i),hi(this,"container",void 0),hi(this,"width",void 0),hi(this,"height",void 0),hi(this,"graphModel",void 0),hi(this,"history",void 0),hi(this,"viewMap",new Map),hi(this,"tool",void 0),hi(this,"keyboard",void 0),hi(this,"dnd",void 0),hi(this,"options",void 0),hi(this,"snaplineModel",void 0),hi(this,"components",[]),hi(this,"plugins",void 0),hi(this,"extension",{}),hi(this,"adapterIn",void 0),hi(this,"adapterOut",void 0),hi(this,"getView",function(T){return w.viewMap.get(T)}),h=k2(h),this.options=h,this.container=this.initContainer(h.container),this.plugins=h.plugins,this.graphModel=new YR(bm({},h)),this.tool=new $D(this),this.history=new kD(this.graphModel.eventCenter),this.dnd=new HN({lf:this}),this.keyboard=new GD({lf:this,keyboard:h.keyboard}),h.snapline!==!1&&(this.snaplineModel=new GO(this.graphModel),f=this.graphModel.eventCenter,m=this.snaplineModel,f.on("node:mousemove",function(T){var N=T.data;m.setNodeSnapLine(N)}),f.on("node:mouseup",function(){m.clearSnapline()})),function(T,N){var F=T.keyboard,Z=F.options.keyboard;F.on(["cmd + c","ctrl + c"],function(){if(m1=av,!Z.enabled||N.textEditElement)return!0;var te=T.options.guards,_e=N.getSelectElements(!1);return te&&te.beforeClone&&!te.beforeClone(_e)||_e.nodes.length===0&&_e.edges.length===0?(xf=null,!0):((xf=_e).nodes.forEach(function(Me){return PS(Me,av)}),xf.edges.forEach(function(Me){return RS(Me,av)}),!1)}),F.on(["cmd + v","ctrl + v"],function(){if(!Z.enabled||N.textEditElement)return!0;if(xf&&(xf.nodes||xf.edges)){T.clearSelectElements();var te=T.addElements(xf,m1);if(!te)return!0;te.nodes.forEach(function(_e){return T.selectElementById(_e.id,!0)}),te.edges.forEach(function(_e){return T.selectElementById(_e.id,!0)}),xf.nodes.forEach(function(_e){return PS(_e,av)}),xf.edges.forEach(function(_e){return RS(_e,av)}),m1+=av}return!1}),F.on(["cmd + z","ctrl + z"],function(){return!Z.enabled||!!N.textEditElement||(T.undo(),!1)}),F.on(["cmd + y","ctrl + y"],function(){return!Z.enabled||!!N.textEditElement||(T.redo(),!1)}),F.on(["backspace"],function(){if(!Z.enabled||N.textEditElement)return!0;var te=N.getSelectElements(!0);return T.clearSelectElements(),te.edges.forEach(function(_e){return T.deleteEdge(_e.id)}),te.nodes.forEach(function(_e){return T.deleteNode(_e.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(h.disabledPlugins)}var o,l,s;return o=i,l=[{key:"register",value:function(h,f){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof h=="string"){var w={BaseEdge:gm,BaseEdgeModel:Td,BaseNode:wf,BaseNodeModel:bf,RectNode:c0,RectNodeModel:Ub,CircleNode:h0,CircleNodeModel:Eb,PolygonNode:_0,PolygonNodeModel:Lb,TextNode:R0,TextNodeModel:zb,LineEdge:Y0,LineEdgeModel:Qs,DiamondNode:O0,DiamondNodeModel:Tb,PolylineEdge:e1,PolylineEdgeModel:Aa,BezierEdge:o1,BezierEdgeModel:mb,EllipseNode:M0,EllipseNodeModel:Rb,HtmlNode:j0,HtmlNodeModel:qb,h:$e.g,type:h};this.viewMap.forEach(function(te){var _e=te.extendKey;_e&&(w[_e]=te)}),this.graphModel.modelMap.forEach(function(te){var _e=te.extendKey;_e&&(w[_e]=te)});var T=f(w),N=T.view,F=T.model,Z=N;m&&!Z.isObervered&&(Z.isObervered=!0,Z=fn(Z)),this.setView(h,Z),this.graphModel.setModel(h,F)}else this.registerElement(h)}},{key:"registerElement",value:function(h){var f=h.view;h.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=fn(f)),this.setView(h.type,f),this.graphModel.setModel(h.type,h.model)}},{key:"batchRegister",value:function(){var h=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(m){h.registerElement(m)})}},{key:"defaultRegister",value:function(){this.registerElement({view:c0,model:Ub,type:"rect"}),this.registerElement({type:"circle",view:h0,model:Eb}),this.registerElement({type:"polygon",view:_0,model:Lb}),this.registerElement({type:"line",view:Y0,model:Qs}),this.registerElement({type:"polyline",view:e1,model:Aa}),this.registerElement({type:"bezier",view:o1,model:mb}),this.registerElement({type:"text",view:R0,model:zb}),this.registerElement({type:"ellipse",view:M0,model:Rb}),this.registerElement({type:"diamond",view:O0,model:Tb}),this.registerElement({type:"html",view:j0,model:qb})}},{key:"selectElementById",value:function(h){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(h,f),!f&&m&&this.graphModel.toFront(h)}},{key:"focusOn",value:function(h){var f=this.graphModel.transformModel,m=h.coordinate,w=h.id;if(!m){var T=this.getNodeModelById(w);T&&(m=T.getData());var N=this.getEdgeModelById(w);N&&(m=N.textPosition)}var F=m,Z=F.x,te=F.y;f.focusOn(Z,te,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(h){this.graphModel.setTheme(h)}},{key:"resize",value:function(h,f){this.graphModel.resize(h,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(h){this.graphModel.setDefaultEdgeType(h)}},{key:"updateText",value:function(h,f){this.graphModel.updateText(h,f)}},{key:"deleteElement",value:function(h){var f,m,w,T=this.getModelById(h);return!!T&&(m=(w=(hi(f={},so.NODE,this.deleteNode),hi(f,so.EDGE,this.deleteEdge),f)[T.BaseType])===null||w===void 0?void 0:w.call(this,h))!==null&&m!==void 0&&m}},{key:"getModelById",value:function(h){return this.graphModel.getElement(h)}},{key:"getDataById",value:function(h){var f;return(f=this.graphModel.getElement(h))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(h,f){this.graphModel.changeNodeType(h,f)}},{key:"changeEdgeType",value:function(h,f){this.graphModel.changeEdgeType(h,f)}},{key:"getNodeEdges",value:function(h){return this.graphModel.getNodeEdges(h)}},{key:"addNode",value:function(h){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn.NODE_ADD,m=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(h,f,m)}},{key:"deleteNode",value:function(h){var f=this.graphModel.getNodeModelById(h);if(!f)return!1;var m=f.getData(),w=this.options.guards,T=!w||!w.beforeDelete||w.beforeDelete(m);return T&&this.graphModel.deleteNode(h),T}},{key:"cloneNode",value:function(h){var f=this.graphModel.getNodeModelById(h).getData(),m=this.options.guards;if(!m||!m.beforeClone||m.beforeClone(f))return this.graphModel.cloneNode(h)}},{key:"changeNodeId",value:function(h,f){return this.graphModel.changeNodeId(h,f)}},{key:"getNodeModelById",value:function(h){return this.graphModel.getNodeModelById(h)}},{key:"getNodeDataById",value:function(h){var f;return(f=this.graphModel.getNodeModelById(h))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(h){return this.graphModel.addEdge(h)}},{key:"deleteEdge",value:function(h){var f=this.options.guards,m=this.graphModel.edgesMap[h];if(!m)return!1;var w=m.model.getData(),T=!f||!f.beforeDelete||f.beforeDelete(w);return T&&this.graphModel.deleteEdgeById(h),T}},{key:"deleteEdgeByNodeId",value:function(h){var f=h.sourceNodeId,m=h.targetNodeId;f&&m?this.graphModel.deleteEdgeBySourceAndTarget(f,m):f?this.graphModel.deleteEdgeBySource(f):m&&this.graphModel.deleteEdgeByTarget(m)}},{key:"changeEdgeId",value:function(h,f){return this.graphModel.changeEdgeId(h,f)}},{key:"getEdgeModelById",value:function(h){var f;return(f=this.graphModel.edgesMap[h])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(h){var f=this.graphModel.edges,m=h.sourceNodeId,w=h.targetNodeId;if(m&&w){var T=[];return f.forEach(function(Z){Z.sourceNodeId===m&&Z.targetNodeId===w&&T.push(Z)}),T}if(m){var N=[];return f.forEach(function(Z){Z.sourceNodeId===m&&N.push(Z)}),N}if(w){var F=[];return f.forEach(function(Z){Z.targetNodeId===w&&F.push(Z)}),F}return[]}},{key:"getEdgeDataById",value:function(h){var f;return(f=this.getEdgeModelById(h))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(h){return this.graphModel.getNodeIncomingEdge(h)}},{key:"getNodeOutgoingEdge",value:function(h){return this.graphModel.getNodeOutgoingEdge(h)}},{key:"getNodeIncomingNode",value:function(h){return this.graphModel.getNodeIncomingNode(h)}},{key:"getNodeOutgoingNode",value:function(h){return this.graphModel.getNodeOutgoingNode(h)}},{key:"editText",value:function(h){this.graphModel.editText(h)}},{key:"setProperties",value:function(h,f){var m;(m=this.graphModel.getElement(h))===null||m===void 0||m.setProperties(_i(f))}},{key:"deleteProperty",value:function(h,f){var m;(m=this.graphModel.getElement(h))===null||m===void 0||m.deleteProperty(f)}},{key:"getProperties",value:function(h){var f;return(f=this.graphModel.getElement(h))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(h){this.graphModel.toFront(h)}},{key:"setElementZIndex",value:function(h,f){return this.graphModel.setElementZIndex(h,f)}},{key:"addElements",value:function(h){for(var f=this,m=h.nodes,w=h.edges,T={},N={nodes:[],edges:[]},F=0;F<m.length;F++){var Z=m[F],te=Z.id,_e=this.addNode(Z);if(!_e)return;te&&(T[te]=_e.id),N.nodes.push(_e)}return w.forEach(function(Me){var je=Me.sourceNodeId,at=Me.targetNodeId;T[je]&&(je=T[je]),T[at]&&(at=T[at]);var it=f.graphModel.addEdge(bm(bm({},Me),{},{sourceNodeId:je,targetNodeId:at}));N.edges.push(it)}),N}},{key:"getAreaElement",value:function(h,f){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],w=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],T=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(h,f,m,w,T).map(function(N){return N.getData()})}},{key:"getSelectElements",value:function(){var h=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(h)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var h=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,m=new Array(f),w=0;w<f;w++)m[w]=arguments[w];return this.adapterOut.apply(this,[h].concat(m))}return h}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(h){var f=this.graphModel,m=f.editConfigModel,w=f.transformModel;m.updateEditConfig(h),(h==null?void 0:h.stopMoveGraph)!==void 0&&w.updateTranslateLimits(h.stopMoveGraph),h!=null&&h.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(h,f){return this.graphModel.getPointByClient({x:h,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var h=_i(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(h)}}},{key:"redo",value:function(){if(this.history.redoAble()){var h=_i(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(h)}}},{key:"zoom",value:function(h,f){return this.graphModel.transformModel.zoom(h,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(h){this.graphModel.transformModel.setZoomMiniSize(h)}},{key:"setZoomMaxSize",value:function(h){this.graphModel.transformModel.setZoomMaxSize(h)}},{key:"getTransform",value:function(){var h=this.graphModel.transformModel;return{SCALE_X:h.SCALE_X,SCALE_Y:h.SCALE_Y,TRANSLATE_X:h.TRANSLATE_X,TRANSLATE_Y:h.TRANSLATE_Y}}},{key:"translate",value:function(h,f){this.graphModel.transformModel.translate(h,f)}},{key:"resetTranslate",value:function(){var h=this.graphModel.transformModel,f=h.TRANSLATE_X,m=h.TRANSLATE_Y;this.translate(-f,-m)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(h,f){f===void 0&&(f=h),this.graphModel.fitView(h,f)}},{key:"openEdgeAnimation",value:function(h){this.graphModel.openEdgeAnimation(h)}},{key:"closeEdgeAnimation",value:function(h){this.graphModel.closeEdgeAnimation(h)}},{key:"on",value:function(h,f){this.graphModel.eventCenter.on(h,f)}},{key:"off",value:function(h,f){this.graphModel.eventCenter.off(h,f)}},{key:"once",value:function(h,f){this.graphModel.eventCenter.once(h,f)}},{key:"emit",value:function(h,f){this.graphModel.eventCenter.emit(h,f)}},{key:"initContainer",value:function(h){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",h.innerHTML="",h.appendChild(f),f}},{key:"installPlugins",value:function(){var h,f=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=(h=this.plugins)!==null&&h!==void 0?h:i.extensions;w.forEach(function(T){var N=null,F=null;T[g1]?(N=T.extension,F=T.props):N=T;var Z=N.pluginName||N.name;m.indexOf(Z)===-1&&f.installPlugin(N,F)})}},{key:"installPlugin",value:function(h,f){if(y1(h)==="object"){var m=h.install,w=h.render;return m&&m.call(h,this,i),w&&this.components.push(w.bind(h)),void(this.extension[h.pluginName]=h)}var T=h,N=new T({lf:this,LogicFlow:i,options:this.options.pluginsOptions,props:f});N.render&&this.components.push(N.render.bind(N)),this.extension[T.pluginName]=N}},{key:"updateAttributes",value:function(h,f){this.graphModel.updateAttributes(h,f)}},{key:"createFakerNode",value:function(h){var f=this.graphModel.modelMap.get(h.type);if(f){var m=new f(bm(bm({},h),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(m),m}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(h){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(h)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(h,f){this.viewMap.set(h,f)}},{key:"renderRawData",value:function(h){this.graphModel.graphDataToModel(_i(h)),this.options.history!==!1&&this.history.watch(this.graphModel),Object($e.j)(Object($e.g)(WN,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Cn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(h=this.adapterIn(h)),this.renderRawData(h)}}],s=[{key:"use",value:function(h,f){var m,w,T=h.pluginName;T||(T=h.name);var N=(m=this.extensions.get(T))===null||m===void 0?void 0:m.extension;N&&N.destroy&&N.destroy(),this.extensions.set(T,(hi(w={},g1,g1),hi(w,"extension",h),hi(w,"props",f),w))}}],l&&CS(o.prototype,l),s&&CS(o,s),i}();function _s(i){return fn(i)}hi(_1,"extensions",new Map),a.default=_1}])})}(lg,lg.exports)),lg.exports}var vn=lU();const uU=Kj(vn);var sU=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),cU=(globalThis==null?void 0:globalThis._ids)||new sU;function Hv(){return cU.next()}var Nk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Nk(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Hv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),a={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(a),n},t.extendKey="StartEventModel",t})(vn.CircleNodeModel);(function(e){Nk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(vn.CircleNode);var Ck=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Cg=function(){return Cg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cg.apply(this,arguments)};(function(e){Ck(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Hv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),a={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(a),n},t.extendKey="EndEventModel",t})(vn.CircleNodeModel);(function(e){Ck(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,a=n.getNodeStyle(),r=n.x,u=n.y,c=n.r,v=e.prototype.getShape.call(this);return vn.h("g",{},v,vn.h("circle",Cg(Cg({},a),{cx:r,cy:u,r:c-5})))},t.extendKey="EndEventView",t})(vn.CircleNode);var Dk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Rm=function(){return Rm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rm.apply(this,arguments)};(function(e){Dk(t,e);function t(n,a){var r=this;return n.id||(n.id="Gateway_"+Hv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(vn.PolygonNodeModel);(function(e){Dk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.points,d=n.getNodeStyle();return vn.h("g",{transform:"matrix(1 0 0 1 "+(a-u/2)+" "+(r-c/2)+")"},vn.h("polygon",Rm(Rm({},d),{x:a,y:r,points:v})),vn.h("path",Rm({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},d)))},t.extendKey="ExclusiveGatewayNode",t})(vn.PolygonNode);var jk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Dg=function(){return Dg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dg.apply(this,arguments)};(function(e){jk(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Hv()),r=e.call(this,n,a)||this,r}return t.extendKey="UserTaskModel",t})(vn.RectNodeModel);(function(e){jk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.getNodeStyle();return vn.h("svg",{x:a-u/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},vn.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.radius,d=n.getNodeStyle();return vn.h("g",{},[vn.h("rect",Dg(Dg({},d),{x:a-u/2,y:r-c/2,rx:v,ry:v,width:u,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(vn.RectNode);var Ik=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),xw=function(){return xw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xw.apply(this,arguments)};(function(e){Ik(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Hv()),r=e.call(this,n,a)||this,r}return t.extendKey="ServiceTaskModel",t})(vn.RectNodeModel);(function(e){Ik(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.getNodeStyle();return vn.h("svg",{x:a-u/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},vn.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.radius,d=n.getNodeStyle();return vn.h("g",{},[vn.h("rect",xw({x:a-u/2,y:r-c/2,rx:v,ry:v,width:u,height:c},d)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(vn.RectNode);var Lk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Lk(t,e);function t(n,a){var r=this;return n.id||(n.id="Flow_"+Hv()),r=e.call(this,n,a)||this,r}return t.extendKey="SequenceFlowModel",t})(vn.PolylineEdgeModel);(function(e){Lk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(vn.PolylineEdge);var gx={width:40,height:40},_x={width:40,height:40},bx={width:40,height:40},wx={width:100,height:80},Ex={width:100,height:80},fU=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),dU=(globalThis==null?void 0:globalThis._ids)||new fU;function Ox(){return dU.next()}function Fk(e){return Object.prototype.toString.call(e)}function pU(e){return"  ".repeat(e)}function jg(e){var t=e;return Fk(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var a=n;n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=jg(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,a){t[a]=jg(n)})),t}function hU(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(jg(e)).replace(/"/g,"'")}return t}var lv=`	
`;function gg(e,t,n){var a=pU(n),r="";if(t==="#text")return lv+a+e;if(t==="#cdata-section")return lv+a+"<![CDATA["+e+"]]>";if(t==="#comment")return lv+a+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+hU(e)+'"';if(Array.isArray(e))e.forEach(function(d){r+=gg(d,t,n+1)});else if(Fk(e)==="[object Object]"){var u=Object.keys(e),c="",v="";r+=(n===0?"":lv+a)+"<"+t,u.forEach(function(d){d.charAt(0)==="-"?c+=gg(e[d],d,n+1):v+=gg(e[d],d,n+1)}),r+=c+(v!==""?">"+v+(lv+a)+"</"+t+">":" />")}else r+=lv+a+("<"+t+">"+e.toString()+"</"+t+">");return r}function vU(e){var t="";for(var n in e)t+=gg(e[n],n,0);return t}var hl=function(){};hl.ObjTree=function(){return this};hl.ObjTree.VERSION="0.23";hl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;hl.ObjTree.prototype.attr_prefix="-";hl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};hl.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var u=this,c=n,v=a.onComplete;a.onComplete=function(_){var b;_&&_.responseXML&&_.responseXML.documentElement&&(b=u.parseDOM(_.responseXML.documentElement)),c(b,_),v&&v(_)}}else a.asynchronous=!1;var d;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(d=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(d=g.transport)}if(n)return d;if(d&&d.responseXML&&d.responseXML.documentElement)return this.parseDOM(d.responseXML.documentElement)};hl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var a={};a[e.nodeName]=n,n=a}return n}};hl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var u=e.attributes[r].nodeName;if(typeof u=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(u=this.attr_prefix+u,typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var d=e.childNodes[r].nodeType;d==3||d==4||d==8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var u=e.childNodes[r].nodeName;if(typeof u=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}}else n===null&&(n={});return n}};hl.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=a):n==1?e[t]=a:n==2?e[t]=[e[t],a]:e[t][e[t].length]=a};hl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};hl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t.hasOwnProperty(r)){var u=t[r];r.charAt(0)!=this.attr_prefix?typeof u>"u"||u==null?n[n.length]="<"+r+" />":typeof u=="object"&&u.constructor==Array?n[n.length]=this.array_to_xml(r,u):typeof u=="object"?n[n.length]=this.hash_to_xml(r,u):n[n.length]=this.scalar_to_xml(r,u):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(u)+'"'}var c=a.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};hl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};hl.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};hl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var mU=function(e){return new hl.ObjTree().parseXML(e)},yU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Aw=function(){return Aw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Aw.apply(this,arguments)},O_=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},pc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(pc||(pc={}));var $k=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Sx=["properties","startPoint","endPoint","pointsList"];function xx(e){var t=e?Sx.concat(e):Sx;return function(n){function a(r){var u={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return a(c)}):(Object.entries(r).forEach(function(c){var v=O_(c,2),d=v[0],g=v[1];typeof g!="object"?d.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(d)?u[d]=g:u["-"+d]=g:t.includes(d)?u["-"+d]=a(g):u[d]=a(g)}),u)}return a(n)}}function Ig(e){var t={};return Object.entries(e).forEach(function(n){var a=O_(n,2),r=a[0],u=a[1];r.indexOf("-")===0?t[r.substring(1)]=jg(u):typeof u=="string"?t[r]=u:Object.prototype.toString.call(u)==="[object Object]"?t[r]=Ig(u):Array.isArray(u)?t[r]=u.map(function(c){return Ig(c)}):t[r]=u}),t}function gU(e,t,n){var a=new Map;t.nodes.forEach(function(u){var c,v={"-id":u.id};if(!((c=u.text)===null||c===void 0)&&c.value&&(v["-name"]=u.text.value),u.properties){var d=xx(n)(u.properties);Object.assign(v,d)}a.set(u.id,v),e[u.type]?Array.isArray(e[u.type])?e[u.type].push(v):e[u.type]=[e[u.type],v]:e[u.type]=v});var r=t.edges.map(function(u){var c,v,d=a.get(u.targetNodeId);d["bpmn:incoming"]?Array.isArray(d["bpmn:incoming"])?d["bpmn:incoming"].push(u.id):d["bpmn:incoming"]=[d["bpmn:incoming"],u.id]:d["bpmn:incoming"]=u.id;var g={"-id":u.id,"-sourceRef":u.sourceNodeId,"-targetRef":u.targetNodeId};if(!((c=u.text)===null||c===void 0)&&c.value&&(g["-name"]=(v=u.text)===null||v===void 0?void 0:v.value),u.properties){var _=xx(n)(u.properties);Object.assign(g,_)}return g});t.edges.forEach(function(u){var c=a.get(u.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(u.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],u.id]:c["bpmn:outgoing"]=u.id}),e[pc.FLOW]=r}function _U(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,u=n.pointsList.map(function(v){var d=v.x,g=v.y;return{"-x":d,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":u};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,u=100,c=80,v=n.x,d=n.y,g=Qd.shapeConfigMap.get(n.type);g&&(u=g.width,c=g.height),v-=u/2,d-=c/2;var _={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":d,"-width":u,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),_})}function bU(e){var t=[],n=[],a=e["bpmn:definitions"];if(a){var r=a["bpmn:process"];Object.keys(r).forEach(function(u){if(u.indexOf("bpmn:")===0){var c=r[u];if(u===pc.FLOW){var v=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=EU(c,v)}else{var d=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(wU(c,d,u))}}})}return{nodes:t,edges:n}}function wU(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var d=Ax(v,n,c);a.push(d)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var u=Ax(r,n,e);a.push(u)}return a}function Ax(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),u=n["-name"],c=Qd.shapeConfigMap.get(t);c&&(a+=c.width/2,r+=c.height/2);var v;Object.entries(n).forEach(function(b){var x=O_(b,2),A=x[0],M=x[1];$k.indexOf(A)===-1&&(v||(v={}),v[A]=M)}),v&&(v=Ig(v));var d;if(u&&(d={x:a,y:r,value:u},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];d.x=Number(g["-x"])+Number(g["-width"])/2,d.y=Number(g["-y"])+Number(g["-height"])/2}var _={id:e["-bpmnElement"],type:t,x:a,y:r,properties:v};return d&&(_.text=d),_}function EU(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var u;Array.isArray(t)?u=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):u=t,n.push(Tx(u,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(Tx(a,e))}return n}function Tx(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],u=0;a.split(`
`).forEach(function(d){u<d.length&&(u=d.length)}),n={value:a,x:Number(r["-x"])+u*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(d){var g=O_(d,2),_=g[0],b=g[1];$k.indexOf(_)===-1&&(c||(c={}),c[_]=b)}),c&&(c=Ig(c));var v={id:t["-id"],type:pc.FLOW,pointsList:e["di:waypoint"].map(function(d){return{x:Number(d["-x"]),y:Number(d["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var Qd=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,u){var c=Aw({},n.processAttributes);gU(c,r,u);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};_U(v,r);var d=n.definitionAttributes;d["bpmn:process"]=c,d["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var g={"bpmn:definitions":d};return g},this.adapterIn=function(r){if(r)return bU(r)},a.adapterIn=function(r){return n.adapterIn(r)},a.adapterOut=function(r,u){return n.adapterOut(r,u)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Ox()},this.definitionAttributes={"-id":"Definitions_"+Ox(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Qd.shapeConfigMap.set(pc.START,{width:gx.width,height:gx.height});Qd.shapeConfigMap.set(pc.END,{width:_x.width,height:_x.height});Qd.shapeConfigMap.set(pc.GATEWAY,{width:bx.width,height:bx.height});Qd.shapeConfigMap.set(pc.SYSTEM,{width:wx.width,height:wx.height});Qd.shapeConfigMap.set(pc.USER,{width:Ex.width,height:Ex.height});(function(e){yU(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(u){var c=mU(u);return a.adapterIn(c)},a.adapterXmlOut=function(u,c){var v=a.adapterOut(u,c);return vU(v)};var r=n.lf;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a}return t.pluginName="bpmnXmlAdapter",t})(Qd);var OU=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),SU=(globalThis==null?void 0:globalThis._ids)||new OU;function xU(){return SU.next()}vn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),vn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});vn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});vn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var kE,Ci,Bk,Zp,Mx,Uk,Vk,Gk,PE,Tw,Mw,kw={},Wk=[],AU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,S_=Array.isArray;function kf(e,t){for(var n in t)e[n]=t[n];return e}function RE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Nm(e,t,n){var a,r,u,c={};for(u in t)u=="key"?a=t[u]:u=="ref"?r=t[u]:c[u]=t[u];if(arguments.length>2&&(c.children=arguments.length>3?kE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(u in e.defaultProps)c[u]===void 0&&(c[u]=e.defaultProps[u]);return _g(e,c,a,r,null)}function _g(e,t,n,a,r){var u={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Bk,__i:-1,__u:0};return r==null&&Ci.vnode!=null&&Ci.vnode(u),u}function NE(e){return e.children}function Ev(e,t){this.props=e,this.context=t}function Cv(e,t){if(t==null)return e.__?Cv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Cv(e):null}function zk(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return zk(e)}}function kx(e){(!e.__d&&(e.__d=!0)&&Zp.push(e)&&!Lg.__r++||Mx!=Ci.debounceRendering)&&((Mx=Ci.debounceRendering)||Uk)(Lg)}function Lg(){for(var e,t,n,a,r,u,c,v=1;Zp.length;)Zp.length>v&&Zp.sort(Vk),e=Zp.shift(),v=Zp.length,e.__d&&(n=void 0,r=(a=(t=e).__v).__e,u=[],c=[],t.__P&&((n=kf({},a)).__v=a.__v+1,Ci.vnode&&Ci.vnode(n),qk(t.__P,n,a,t.__n,t.__P.namespaceURI,32&a.__u?[r]:null,u,r??Cv(a),!!(32&a.__u),c),n.__v=a.__v,n.__.__k[n.__i]=n,kU(u,n,c),n.__e!=r&&zk(n)));Lg.__r=0}function Hk(e,t,n,a,r,u,c,v,d,g,_){var b,x,A,M,O,S,j=a&&a.__k||Wk,D=t.length;for(d=TU(n,t,j,d,D),b=0;b<D;b++)(A=n.__k[b])!=null&&(x=A.__i==-1?kw:j[A.__i]||kw,A.__i=b,S=qk(e,A,x,r,u,c,v,d,g,_),M=A.__e,A.ref&&x.ref!=A.ref&&(x.ref&&CE(x.ref,null,A),_.push(A.ref,A.__c||M,A)),O==null&&M!=null&&(O=M),4&A.__u||x.__k===A.__k?d=Xk(A,d,e):typeof A.type=="function"&&S!==void 0?d=S:M&&(d=M.nextSibling),A.__u&=-7);return n.__e=O,d}function TU(e,t,n,a,r){var u,c,v,d,g,_=n.length,b=_,x=0;for(e.__k=new Array(r),u=0;u<r;u++)(c=t[u])!=null&&typeof c!="boolean"&&typeof c!="function"?(d=u+x,(c=e.__k[u]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?_g(null,c,null,null,null):S_(c)?_g(NE,{children:c},null,null,null):c.constructor==null&&c.__b>0?_g(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,v=null,(g=c.__i=MU(c,n,d,b))!=-1&&(b--,(v=n[g])&&(v.__u|=2)),v==null||v.__v==null?(g==-1&&(r>_?x--:r<_&&x++),typeof c.type!="function"&&(c.__u|=4)):g!=d&&(g==d-1?x--:g==d+1?x++:(g>d?x--:x++,c.__u|=4))):e.__k[u]=null;if(b)for(u=0;u<_;u++)(v=n[u])!=null&&(2&v.__u)==0&&(v.__e==a&&(a=Cv(v)),Kk(v,v));return a}function Xk(e,t,n){var a,r;if(typeof e.type=="function"){for(a=e.__k,r=0;a&&r<a.length;r++)a[r]&&(a[r].__=e,t=Xk(a[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Cv(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function MU(e,t,n,a){var r,u,c=e.key,v=e.type,d=t[n];if(d===null&&e.key==null||d&&c==d.key&&v==d.type&&(2&d.__u)==0)return n;if(a>(d!=null&&(2&d.__u)==0?1:0))for(r=n-1,u=n+1;r>=0||u<t.length;){if(r>=0){if((d=t[r])&&(2&d.__u)==0&&c==d.key&&v==d.type)return r;r--}if(u<t.length){if((d=t[u])&&(2&d.__u)==0&&c==d.key&&v==d.type)return u;u++}}return-1}function Px(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||AU.test(t)?n:n+"px"}function ug(e,t,n,a,r){var u,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||Px(e.style,t,"");if(n)for(t in n)a&&n[t]==a[t]||Px(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")u=t!=(t=t.replace(Gk,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+u]=n,n?a?n.u=a.u:(n.u=PE,e.addEventListener(t,u?Mw:Tw,u)):e.removeEventListener(t,u?Mw:Tw,u);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Rx(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=PE++;else if(t.t<n.u)return;return n(Ci.event?Ci.event(t):t)}}}function qk(e,t,n,a,r,u,c,v,d,g){var _,b,x,A,M,O,S,j,D,z,U,L,$,X,Y,H,B,G=t.type;if(t.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),u=[v=t.__e=n.__e]),(_=Ci.__b)&&_(t);e:if(typeof G=="function")try{if(j=t.props,D="prototype"in G&&G.prototype.render,z=(_=G.contextType)&&a[_.__c],U=_?z?z.props.value:_.__:a,n.__c?S=(b=t.__c=n.__c).__=b.__E:(D?t.__c=b=new G(j,U):(t.__c=b=new Ev(j,U),b.constructor=G,b.render=RU),z&&z.sub(b),b.props=j,b.state||(b.state={}),b.context=U,b.__n=a,x=b.__d=!0,b.__h=[],b._sb=[]),D&&b.__s==null&&(b.__s=b.state),D&&G.getDerivedStateFromProps!=null&&(b.__s==b.state&&(b.__s=kf({},b.__s)),kf(b.__s,G.getDerivedStateFromProps(j,b.__s))),A=b.props,M=b.state,b.__v=t,x)D&&G.getDerivedStateFromProps==null&&b.componentWillMount!=null&&b.componentWillMount(),D&&b.componentDidMount!=null&&b.__h.push(b.componentDidMount);else{if(D&&G.getDerivedStateFromProps==null&&j!==A&&b.componentWillReceiveProps!=null&&b.componentWillReceiveProps(j,U),!b.__e&&b.shouldComponentUpdate!=null&&b.shouldComponentUpdate(j,b.__s,U)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(b.props=j,b.state=b.__s,b.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(K){K&&(K.__=t)}),L=0;L<b._sb.length;L++)b.__h.push(b._sb[L]);b._sb=[],b.__h.length&&c.push(b);break e}b.componentWillUpdate!=null&&b.componentWillUpdate(j,b.__s,U),D&&b.componentDidUpdate!=null&&b.__h.push(function(){b.componentDidUpdate(A,M,O)})}if(b.context=U,b.props=j,b.__P=e,b.__e=!1,$=Ci.__r,X=0,D){for(b.state=b.__s,b.__d=!1,$&&$(t),_=b.render(b.props,b.state,b.context),Y=0;Y<b._sb.length;Y++)b.__h.push(b._sb[Y]);b._sb=[]}else do b.__d=!1,$&&$(t),_=b.render(b.props,b.state,b.context),b.state=b.__s;while(b.__d&&++X<25);b.state=b.__s,b.getChildContext!=null&&(a=kf(kf({},a),b.getChildContext())),D&&!x&&b.getSnapshotBeforeUpdate!=null&&(O=b.getSnapshotBeforeUpdate(A,M)),H=_,_!=null&&_.type===NE&&_.key==null&&(H=Yk(_.props.children)),v=Hk(e,S_(H)?H:[H],t,n,a,r,u,c,v,d,g),b.base=t.__e,t.__u&=-161,b.__h.length&&c.push(b),S&&(b.__E=b.__=null)}catch(K){if(t.__v=null,d||u!=null)if(K.then){for(t.__u|=d?160:128;v&&v.nodeType==8&&v.nextSibling;)v=v.nextSibling;u[u.indexOf(v)]=null,t.__e=v}else for(B=u.length;B--;)RE(u[B]);else t.__e=n.__e,t.__k=n.__k;Ci.__e(K,t,n)}else u==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):v=t.__e=PU(n.__e,t,n,a,r,u,c,d,g);return(_=Ci.diffed)&&_(t),128&t.__u?void 0:v}function kU(e,t,n){for(var a=0;a<n.length;a++)CE(n[a],n[++a],n[++a]);Ci.__c&&Ci.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(u){u.call(r)})}catch(u){Ci.__e(u,r.__v)}})}function Yk(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:S_(e)?e.map(Yk):kf({},e)}function PU(e,t,n,a,r,u,c,v,d){var g,_,b,x,A,M,O,S=n.props,j=t.props,D=t.type;if(D=="svg"?r="http://www.w3.org/2000/svg":D=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),u!=null){for(g=0;g<u.length;g++)if((A=u[g])&&"setAttribute"in A==!!D&&(D?A.localName==D:A.nodeType==3)){e=A,u[g]=null;break}}if(e==null){if(D==null)return document.createTextNode(j);e=document.createElementNS(r,D,j.is&&j),v&&(Ci.__m&&Ci.__m(t,u),v=!1),u=null}if(D==null)S===j||v&&e.data==j||(e.data=j);else{if(u=u&&kE.call(e.childNodes),S=n.props||kw,!v&&u!=null)for(S={},g=0;g<e.attributes.length;g++)S[(A=e.attributes[g]).name]=A.value;for(g in S)if(A=S[g],g!="children"){if(g=="dangerouslySetInnerHTML")b=A;else if(!(g in j)){if(g=="value"&&"defaultValue"in j||g=="checked"&&"defaultChecked"in j)continue;ug(e,g,null,A,r)}}for(g in j)A=j[g],g=="children"?x=A:g=="dangerouslySetInnerHTML"?_=A:g=="value"?M=A:g=="checked"?O=A:v&&typeof A!="function"||S[g]===A||ug(e,g,A,S[g],r);if(_)v||b&&(_.__html==b.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(b&&(e.innerHTML=""),Hk(t.type=="template"?e.content:e,S_(x)?x:[x],t,n,a,D=="foreignObject"?"http://www.w3.org/1999/xhtml":r,u,c,u?u[0]:n.__k&&Cv(n,0),v,d),u!=null)for(g=u.length;g--;)RE(u[g]);v||(g="value",D=="progress"&&M==null?e.removeAttribute("value"):M!=null&&(M!==e[g]||D=="progress"&&!M||D=="option"&&M!=S[g])&&ug(e,g,M,S[g],r),g="checked",O!=null&&O!=e[g]&&ug(e,g,O,S[g],r))}return e}function CE(e,t,n){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Ci.__e(r,n)}}function Kk(e,t,n){var a,r;if(Ci.unmount&&Ci.unmount(e),(a=e.ref)&&(a.current&&a.current!=e.__e||CE(a,null,t)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(u){Ci.__e(u,t)}a.base=a.__P=null}if(a=e.__k)for(r=0;r<a.length;r++)a[r]&&Kk(a[r],t,n||typeof e.type!="function");n||RE(e.__e),e.__c=e.__=e.__e=void 0}function RU(e,t,n){return this.constructor(e,n)}kE=Wk.slice,Ci={__e:function(e,t,n,a){for(var r,u,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((u=r.constructor)&&u.getDerivedStateFromError!=null&&(r.setState(u.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,a||{}),c=r.__d),c)return r.__E=r}catch(v){e=v}throw e}},Bk=0,Ev.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=kf({},this.state),typeof e=="function"&&(e=e(kf({},n),this.props)),e&&kf(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),kx(this))},Ev.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),kx(this))},Ev.prototype.render=NE,Zp=[],Uk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vk=function(e,t){return e.__v.__b-t.__v.__b},Lg.__r=0,Gk=/(PointerCapture)$|Capture$/i,PE=0,Tw=Rx(!1),Mw=Rx(!0);var Cm=function(){return Cm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cm.apply(this,arguments)};function DE(e){var t=e.x,n=e.y,a=e.width,r=e.height,u=e.radius,c=e.className,v=t-a/2,d=n-r/2,g=Cm(Cm({width:10,height:10,cx:0,cy:0,rx:u||0,ry:u||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:v,y:d});return vn.h("rect",Cm({},g))}DE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var gv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(gv||(gv={}));var NU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Jp=function(){return Jp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Jp.apply(this,arguments)},CU=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},DU=vn.LogicFlowUtil.StepDrag,jU=function(e){NU(t,e);function t(n){var a=e.call(this)||this;return a.updatePosition=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel,d=v.x,g=v.y;a.nodeModel.x=d+u/2,a.nodeModel.y=g+c/2,a.nodeModel.moveText(u/2,c/2)},a.getResize=function(r){var u=r.index,c=r.deltaX,v=r.deltaY,d=r.width,g=r.height,_=r.PCTResizeInfo,b=r.pct,x=b===void 0?1:b,A=r.freezeWidth,M=A===void 0?!1:A,O=r.freezeHeight,S=O===void 0?!1:O,j={width:d,height:g,deltaX:c,deltaY:v};if(_){var D=4,z=0,U=0;switch(u){case 0:U=(c*-1-v)/D;break;case 1:U=(c-v)/D;break;case 2:U=(c+v)/D;break;case 3:U=(c*-1+v)/D;break}U!==0&&(z=Math.round(U/_.ResizeBasis.basisHeight*1e5)/1e3),_.ResizePCT.widthPCT=Math.max(Math.min(_.ResizePCT.widthPCT+z,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit),_.ResizePCT.hightPCT=Math.max(Math.min(_.ResizePCT.hightPCT+z,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit);var L=Math.round(_.ResizePCT.widthPCT*_.ResizeBasis.basisWidth/100),$=Math.round(_.ResizePCT.hightPCT*_.ResizeBasis.basisHeight/100);switch(u){case 0:c=d-L,v=g-$;break;case 1:c=L-d,v=g-$;break;case 2:c=L-d,v=$-g;break;case 3:c=d-L,v=$-g;break}return j.width=L,j.height=$,j.deltaX=c/x,j.deltaY=v/x,j}switch(u){case 0:j.width=M?d:d-c*x,j.height=S?g:g-v*x;break;case 1:j.width=M?d:d+c*x,j.height=S?g:g-v*x;break;case 2:j.width=M?d:d+c*x,j.height=S?g:g+v*x;break;case 3:j.width=M?d:d-c*x,j.height=S?g:g+v*x;break}return j},a.updateEdgePointByAnchors=function(){var r=a.nodeModel,u=r.id,c=r.anchors,v=a.getNodeEdges(u);v.sourceEdges.forEach(function(d){var g=c.find(function(_){return _.id===d.sourceAnchorId});d.updateStartPoint({x:g.x,y:g.y})}),v.targetEdges.forEach(function(d){var g=c.find(function(_){return _.id===d.targetAnchorId});d.updateEndPoint({x:g.x,y:g.y})})},a.updateRect=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel,d=v.id,g=v.x,_=v.y,b=v.width,x=v.height,A=v.radius,M=v.PCTResizeInfo,O=a.nodeModel,S=O.minWidth,j=O.minHeight,D=O.maxWidth,z=O.maxHeight,U=a.index,L=S===D,$=j===z,X=a.getResize({index:U,deltaX:u,deltaY:c,width:b,height:x,PCTResizeInfo:M,pct:1,freezeWidth:L,freezeHeight:$});if(X.width<S||X.width>D||X.height<j||X.height>z){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:L?0:X.deltaX,deltaY:$?0:X.deltaY}),a.nodeModel.width=X.width,a.nodeModel.height=X.height,a.nodeModel.setProperties({nodeSize:{width:X.width,height:X.height}}),a.getNodeEdges(d);var Y={x:g,y:_,width:b,height:x,radius:A},H={x:a.nodeModel.x,y:a.nodeModel.y,width:a.nodeModel.width,height:a.nodeModel.height,radius:A};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Y,afterNode:H})},a.updateEllipse=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel,d=v.id,g=v.rx,_=v.ry,b=v.x,x=v.y,A=v.PCTResizeInfo,M=a.index,O=a.nodeModel,S=O.minWidth,j=O.minHeight,D=O.maxWidth,z=O.maxHeight,U=S===D,L=j===z,$=g,X=_,Y=a.getResize({index:M,deltaX:u,deltaY:c,width:$,height:X,PCTResizeInfo:A,pct:1/2,freezeWidth:U,freezeHeight:L});if(Y.width<S/2||Y.width>D/2||Y.height<j/2||Y.height>z/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:U?0:Y.deltaX,deltaY:L?0:Y.deltaY}),a.nodeModel.rx=Y.width,a.nodeModel.ry=Y.height,a.nodeModel.setProperties({nodeSize:{rx:Y.width,ry:Y.height}}),a.getNodeEdges(d);var H={x:b,y:x},B={rx:Y.width,ry:Y.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Jp(Jp({},H),{rx:g,ry:_}),afterNode:B})},a.updateDiamond=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel;v.id;var d=v.rx,g=v.ry,_=v.x,b=v.y,x=v.PCTResizeInfo,A=a.index,M=a.nodeModel,O=M.minWidth,S=M.minHeight,j=M.maxWidth,D=M.maxHeight,z=O===j,U=S===D,L=d,$=g,X=a.getResize({index:A,deltaX:u,deltaY:c,width:L,height:$,PCTResizeInfo:x,pct:1/2,freezeWidth:z,freezeHeight:U});if(X.width<O/2||X.width>j/2||X.height<S/2||X.height>D/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:z?0:X.deltaX,deltaY:U?0:X.deltaY}),a.nodeModel.rx=X.width,a.nodeModel.ry=X.height,a.nodeModel.setProperties({nodeSize:{rx:X.width,ry:X.height}});var Y={x:_,y:b,rx:d,ry:g},H={rx:X.width,ry:X.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Y,afterNode:H})},a.eventEmit=function(r){var u=r.beforeNode,c=r.afterNode,v=a.nodeModel,d=v.id,g=v.modelType,_=v.type,b=Jp({id:d,modelType:g,type:_},u),x=Jp({id:d,modelType:g,type:_},c);a.graphModel.eventCenter.emit("node:resize",{oldNodeSize:b,newNodeSize:x})},a.onDragging=function(r){var u,c=r.deltaX,v=r.deltaY,d=a.graphModel.transformModel,g=a.nodeModel.modelType;u=CU(d.fixDeltaXY(c,v),2),c=u[0],v=u[1],g===gv.RECT_NODE||g===gv.HTML_NODE?a.updateRect({deltaX:c,deltaY:v}):g===gv.ELLIPSE_NODE?a.updateEllipse({deltaX:c,deltaY:v}):g===gv.DIAMOND_NODE&&a.updateDiamond({deltaX:c,deltaY:v})},a.onDragEnd=function(){var r=a.graphModel.gridSize,u=r===void 0?1:r,c=u*Math.round(a.nodeModel.x/u),v=u*Math.round(a.nodeModel.y/u);a.nodeModel.moveTo(c,v),a.updateEdgePointByAnchors()},a.index=n.index,a.nodeModel=n.model,a.graphModel=n.graphModel,a.state={},a.dragHandler=new DU({onDragging:a.onDragging,onDragEnd:a.onDragEnd,step:1}),a}return t.prototype.getNodeEdges=function(n){for(var a=this.graphModel,r=a.edges,u=[],c=[],v=0;v<r.length;v++){var d=r[v];d.sourceNodeId===n?u.push(d):r[v].targetNodeId===n&&c.push(d)}return{sourceEdges:u,targetEdges:c}},t.prototype.render=function(){var n=this.props,a=n.x,r=n.y,u=n.index,c=n.model,v=c.getControlPointStyle();return Nm("g",{className:"lf-resize-control-"+u},Nm(DE,Jp({className:"lf-node-control"},{x:a,y:r},v,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(Ev),IU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Fg=function(){return Fg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fg.apply(this,arguments)},x_=function(e){IU(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,a=n.model,r=n.graphModel,u=a.x,c=a.y,v=a.width,d=a.height,g={minX:u-v/2,minY:c-d/2,maxX:u+v/2,maxY:c+d/2},_=g.minX,b=g.minY,x=g.maxX,A=g.maxY,M=[{x:_,y:b},{x,y:b},{x,y:A},{x:_,y:A}];return M.map(function(O,S){return Nm(jU,Fg({index:S},O,{model:a,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.getResizeOutlineStyle();return Nm(DE,Fg({fill:"none"},v,{x:a,y:r,width:u,height:c}))},t.prototype.render=function(){return Nm("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(Ev),Zk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),LU=function(e){Zk(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.width=u.width,r.height=u.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,a){console.log(n,a)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},u={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t}(vn.RectNodeModel),FU=function(e){Zk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(x_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(vn.RectNode),Jk={view:FU,model:LU},Qk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Qk(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.rx=u.rx,r.ry=u.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},u={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t})(vn.EllipseNodeModel);(function(e){Qk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(x_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a.isSelected&&!r?this.getControlGroup():"")},t})(vn.EllipseNode);var Pw=function(){return Pw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Pw.apply(this,arguments)};function $U(e){var t=e.fillOpacity,n=t===void 0?1:t,a=e.strokeWidth,r=a===void 0?1:a,u=e.strokeOpacity,c=u===void 0?1:u,v=e.fill,d=v===void 0?"transparent":v,g=e.stroke,_=g===void 0?"#000":g,b=e.points,x=e.className,A=x===void 0?"lf-basic-shape":x,M={fill:d,fillOpacity:n,strokeWidth:r,stroke:_,strokeOpacity:c,points:"",className:A};return M.points=b.map(function(O){return O.join(",")}).join(" "),vn.h("polygon",Pw({},M))}var eP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Rw=function(){return Rw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rw.apply(this,arguments)};(function(e){eP(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.rx=u.rx,r.ry=u.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},u={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t})(vn.DiamondNodeModel);(function(e){eP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(x_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,a=n.points,r=n.getNodeStyle();return vn.h("g",null,vn.h($U,Rw({},r,{points:a})))},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t})(vn.DiamondNode);var tP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),BU=function(e){tP(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.width=u.width,r.height=u.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},u={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t}(vn.HtmlNodeModel),UU=function(e){tP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(x_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(vn.HtmlNode),nP={view:UU,model:BU},rP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),$g=function(){return $g=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$g.apply(this,arguments)},VU=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},GU=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(VU(arguments[t]));return e},Nx=500,Cx=300,WU=-1e4;(function(e){rP(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=Nx,n.unfoldedHight=Cx,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var a=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=Nx,this.height=Cx,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=WU,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){a.isFolded&&a.foldGroup(a.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var a=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(u){var c=a.graphModel.getElement(u),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var d=a.childrenLastFoldStatus[u];d!==void 0&&d!==c.isFolded&&c.foldGroup(d)}a.childrenLastFoldStatus[u]=v,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var a=e.prototype.getAnchorStyle.call(this,n);return a.stroke="transparent",a.fill="transparent",a.hover.fill="transparent",a.hover.stroke="transparent",a},t.prototype.foldEdge=function(n,a){var r=this;a.forEach(function(u,c){var v=u.id,d=u.sourceNodeId,g=u.targetNodeId,_=u.startPoint,b=u.endPoint,x=u.type,A=u.text,M=u.getProperties(),O={id:v+"__"+c,sourceNodeId:d,targetNodeId:g,startPoint:_,endPoint:b,type:x,properties:M,text:A==null?void 0:A.value};u.virtual&&r.graphModel.deleteEdgeById(u.id);var S=r.graphModel.group.getNodeGroup(g);S||(S=r.graphModel.getNodeModelById(g));var j=r.graphModel.group.getNodeGroup(d);j||(j=r.graphModel.getNodeModelById(d)),n&&u.visible!==!1&&(r.children.has(d)||r.id===d?(O.startPoint=void 0,O.sourceNodeId=r.id):(O.endPoint=void 0,O.targetNodeId=r.id),(S.id!==r.id||j.id!==r.id)&&r.createVirtualEdge(O),u.visible=!1),!n&&u.visible===!1&&(S&&S.isGroup&&S.isFolded?(O.targetNodeId=S.id,O.endPoint=void 0,r.createVirtualEdge(O)):j&&j.isGroup&&j.isFolded?(O.sourceNodeId=j.id,O.startPoint=void 0,r.createVirtualEdge(O)):u.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var a=this.graphModel.addEdge(n);a.virtual=!0,a.text.editable=!1,a.isFoldedEdge=!0},t.prototype.isInRange=function(n){var a=n.x1,r=n.y1,u=n.x2,c=n.y2;return a>=this.x-this.width/2&&u<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var a=n.x1,r=n.y1,u=n.x2,c=n.y2;return{x:a>=this.x-this.width/2&&u<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,a=e.prototype.getData.call(this);a.children=[],this.children.forEach(function(u){var c=n.graphModel.getNodeModelById(u);c&&!c.virtual&&a.children.push(u)});var r=a.properties;return delete r.groupAddable,delete r.isFolded,a},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=GU(this.children),n.isGroup=!0;var a=n.properties;return delete a.groupAddable,a.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(Jk.model);(function(e){rP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,a=n.resizable,r=n.properties;return a&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,a=n.width,r=n.height,u=n.x,c=n.y,v=n.radius,d=n.properties;if(!d.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,_=this.props.model.getAddableOutlineStyle(),b=a+g+8,x=r+g+8;return vn.h("rect",$g($g({},_),{width:b,height:x,x:u-b/2,y:c-x/2,rx:v,ry:v}))},t.prototype.getFoldIcon=function(){var n=this.props.model,a=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var u=vn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" M"+(a+7)+","+(r+2)+" "+(a+7)+","+(r+10):"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" "});return vn.h("g",{},[vn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),u])},t.prototype.getResizeShape=function(){return vn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(Jk.view);var Dx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Dm=function(){return Dm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dm.apply(this,arguments)};function zU(e){var t=function(a){Dx(r,a);function r(u,c){var v=this;u.id||(u.id="Flow_"+xU());var d=Dm(Dm(Dm({},{}),u.properties),{isDefaultFlow:!1});return u.properties=d,v=a.call(this,u,c)||this,v}return r.extendKey="SequenceFlowModel",r}(vn.PolylineEdgeModel),n=function(a){Dx(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var u=this.props.model,c=u.properties.isDefaultFlow;return c?vn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):vn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(vn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}zU();var jx={width:40,height:40},Ix={width:40,height:40},Lx={width:100,height:80},Bg={width:100,height:80},Fx={width:100,height:80},$x={width:100,height:80},Bx={width:100,height:80},Ux={width:100,height:80},Vx={width:100,height:80},Gx={width:100,height:80},vl=function(){};vl.ObjTree=function(){return this};vl.ObjTree.VERSION="0.23";vl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;vl.ObjTree.prototype.attr_prefix="-";vl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};vl.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var u=this,c=n,v=a.onComplete;a.onComplete=function(_){var b;_&&_.responseXML&&_.responseXML.documentElement&&(b=u.parseDOM(_.responseXML.documentElement)),c(b,_),v&&v(_)}}else a.asynchronous=!1;var d;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(d=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(d=g.transport)}if(n)return d;if(d&&d.responseXML&&d.responseXML.documentElement)return this.parseDOM(d.responseXML.documentElement)};vl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var a={};a[e.nodeName]=n,n=a}return n}};vl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var u=e.attributes[r].nodeName;if(typeof u=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(u=this.attr_prefix+u,typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var d=e.childNodes[r].nodeType;d===3||d===4||d===8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var u=e.childNodes[r].nodeName;if(typeof u=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}}else n===null&&(n={});return n}};vl.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=a):n===1?e[t]=a:n===2?e[t]=[e[t],a]:e[t][e[t].length]=a};vl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};vl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var u=t[r];r.charAt(0)!==this.attr_prefix?typeof u>"u"||u==null?n[n.length]="<"+r+" />":typeof u=="object"&&u.constructor===Array?n[n.length]=this.array_to_xml(r,u):typeof u=="object"?n[n.length]=this.hash_to_xml(r,u):n[n.length]=this.scalar_to_xml(r,u):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(u)+'"'}var c=a.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};vl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};vl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};vl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var HU=function(e){return new vl.ObjTree().parseXML(e)};function oP(e){return Object.prototype.toString.call(e)}function Wx(e){return"  ".repeat(e)}function Ug(e){return oP(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var a=n;return n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=Ug(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Ug(t)}):e}function XU(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Ug(e)).replace(/"/g,"'")}return t}var zx=`	
`;function bg(e,t,n){var a=Wx(n),r="",u=zx+a;if(t==="-json")return"";if(t==="#text")return u+e;if(t==="#cdata-section")return u+"<![CDATA["+e+"]]>";if(t==="#comment")return u+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+XU(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return bg(g,t,n+1)}).join("");else if(oP(e)==="[object Object]"){var c=Object.keys(e),v="",d=e["-json"]?zx+Wx(n+1)+e["-json"]:"";r+=(n===0?"":u)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?v+=bg(e[g],g,n+1):d+=bg(e[g],g,n+1)}),r+=v+(d!==""?">"+d+u+"</"+t+">":" />")}else r+=u+"<"+t+">"+e.toString()+"</"+t+">";return r}function qU(e){var t="";for(var n in e)t+=bg(e[n],n,0);return t}var YU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Nw=function(){return Nw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Nw.apply(this,arguments)},Hx=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},jE=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xv=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},Ov=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Xv(arguments[t]));return e},dl;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(dl||(dl={}));var iP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],KU=["properties","startPoint","endPoint","pointsList"],Vg={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},aP=function(e,t){var n=Object.keys(t||{});return n.forEach(function(a){if(e[a]){var r=t[a],u=r.in,c=r.out;u&&(e[a].in=u),c&&(e[a].out=c)}else e[a]=t[a]}),e},Cu={"bpmn:startEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Cu[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Cu[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Cu[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Cu[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,a=t.condition;return a?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+a+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+a+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,a=t.timerValue,r=t.definitionId,u=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+a+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&a?">"+u()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,a,r,u,c=e,v=t["-id"],d="",g="";try{for(var _=jE(Object.keys(t)),b=_.next();!b.done;b=_.next()){var x=b.value;x.includes("bpmn:")&&(r=Xv(x.split(":"),2),d=r[1],g=(u=t[x])===null||u===void 0?void 0:u["#text"])}}catch(A){n={error:A}}finally{try{b&&!b.done&&(a=_.return)&&a.call(_)}finally{if(n)throw n.error}}return{"-definitionId":v,"-definitionType":c,"-timerType":d,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,a="",r="";return t["#cdata-section"]?(r="cdata",a=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",a=t["#text"]),{"-condition":a,"-expressionType":r}}}};function ZU(e){var t=e??{},n=t.retainedAttrsFields,a=t.excludeFields,r=t.transformer,u=new Set(Ov(KU,n||[])),c={in:new Set(Ov(Vg.in,(a==null?void 0:a.in)||[])),out:new Set(Ov(Vg.out,(a==null?void 0:a.out)||[]))};return Cu=aP(Cu,r),function(v){var d=v.nodes,g=v.edges;function _(b,x){var A,M,O;if((b==null?void 0:b.flag)!==1){var S;if((S=Cu[b.type])&&S.out){var j=S.out(b),D=Object.keys(j);D.length>0&&D.forEach(function(B){b[B]=j[B]})}b!=null&&b.children&&(b.children=b.children.map(function(B){var G=d.find(function(K){return K.id===B})||g.find(function(K){return K.id===B});return G||{}}));var z={};if(typeof b=="string")return b;if(Array.isArray(b))return b.map(function(B){return _(B,"")}).filter(function(B){return B!=null});try{for(var U=jE(Object.entries(b)),L=U.next();!L.done;L=U.next()){var $=Xv(L.value,2),X=$[0],Y=$[1];if(((O=Y)===null||O===void 0?void 0:O.flag)===1)return;var H=[x,X].filter(function(B){return B}).join(".");c.out.has(H)||(typeof Y!="object"?X.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(X)?z[X]=Y:z["-"+X]=Y:u.has(H)?z["-"+X]=_(Y,H):z[X]=_(Y,H))}}catch(B){A={error:B}}finally{try{L&&!L.done&&(M=U.return)&&M.call(U)}finally{if(A)throw A.error}}return z}}return _(v,"")}}function Gg(e){var t,n,a={};try{for(var r=jE(Object.entries(e)),u=r.next();!u.done;u=r.next()){var c=Xv(u.value,2),v=c[0],d=c[1];v.indexOf("-")===0?a[v.substring(1)]=Ug(d):typeof d=="string"?a[v]=d:Object.prototype.toString.call(d)==="[object Object]"?a[v]=Gg(d):Array.isArray(d)?a[v]=d.map(function(g){return Gg(g)}):a[v]=d}}catch(g){t={error:g}}finally{try{u&&!u.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a}function JU(e,t,n){var a,r=new Map,u=ZU(n)(t);u.nodes.forEach(function(v){var d=v["-id"],g=v["-type"],_=v.text,b=v.children,x=Hx(v,["-id","-type","text","children"]),A={"-id":d};_!=null&&_["-value"]&&(A["-name"]=_["-value"]),x["-json"]&&(A["-json"]=x["-json"]),x["-properties"]&&Object.assign(A,x["-properties"]),b&&(A.children=b),e[g]||(e[g]=[]),e[g].push(A),r.set(d,A)});var c=u.edges.map(function(v){var d=v["-id"];v["-type"];var g=v["-sourceNodeId"],_=v["-targetNodeId"],b=v.text,x=Hx(v,["-id","-type","-sourceNodeId","-targetNodeId","text"]),A=r.get(_);A["bpmn:incoming"]||(A["bpmn:incoming"]=[]),A["bpmn:incoming"].push(d);var M={"-id":d,"-sourceRef":g,"-targetRef":_};return b!=null&&b["-value"]&&(M["-name"]=b["-value"]),x["-json"]&&(M["-json"]=x["-json"]),x["-properties"]&&Object.assign(M,x["-properties"]),M});return t.edges.forEach(function(v){var d=v.sourceNodeId,g=v.id,_=r.get(d);_["bpmn:outgoing"]||(_["bpmn:outgoing"]=[]),_["bpmn:outgoing"].push(g)}),(a=e["bpmn:subProcess"])===null||a===void 0||a.forEach(function(v){var d={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];v.children.forEach(function(O){var S,j=r.get(O["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(z){j[z]&&j[z].forEach(function(U){d[z].add(U)})});var D=(S=e[O["-type"]])===null||S===void 0?void 0:S.findIndex(function(z){return z["-id"]===O["-id"]});D>=0&&e[O["-type"]].splice(D,1),r.delete(O["-id"]),v[O["-type"]]||(v[O["-type"]]=[]),v[O["-type"]].push(j)});var _=d["bpmn:incoming"],b=d["bpmn:outgoing"];b.forEach(function(O){_.has(O)&&g.push(O)});for(var x=function(O){var S=c.findIndex(function(j){return j["-id"]===g[O]});S>=0?(v["bpmn:sequenceFlow"]||(v["bpmn:sequenceFlow"]=[]),v["bpmn:sequenceFlow"].push(c[S]),c.splice(S,1)):O++,A=O},A,M=0;M<g.length;)x(M),M=A;delete v.children}),e[dl.FLOW]=c,e}function QU(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,u=n.pointsList.map(function(v){var d=v.x,g=v.y;return{"-x":d,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":u};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,u=100,c=80,v=n.x,d=n.y,g=Dl.shapeConfigMap.get(n.type);g&&(u=g.width,c=g.height),v-=u/2,d-=c/2;var _={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":d,"-width":u,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),_})}var eV=["bpmn:incoming","bpmn:outgoing"];function tV(e,t){var n=[],a=[],r=new Map,u=t??{},c=u.transformer,v=u.excludeFields,d={in:new Set(Ov(Vg.in,(v==null?void 0:v.in)||[])),out:new Set(Ov(Vg.out,(v==null?void 0:v.out)||[]))};Cu=aP(Cu,c);var g=e["bpmn:definitions"];if(g){var _=g["bpmn:process"];(function(x,A){A.forEach(function(M){try{Object.keys(x).forEach(function(O){try{M(O)}catch(S){console.error(S)}})}catch(O){console.error(O)}})})(_,[function(x){function A(O){O["-children"]||(O["-children"]=[]),Object.keys(O).forEach(function(S){var j;S.indexOf("bpmn:")===0&&!eV.includes(S)&&(_[S]||(_[S]=[]),!Array.isArray(_[S])&&(_[S]=[_[S]]),Array.isArray(O[S])?(j=_[S]).push.apply(j,Ov(O[S])):_[S].push(O[S]),Array.isArray(O[S])?O[S].forEach(function(D){!S.includes("Flow")&&O["-children"].push(D["-id"])}):!S.includes("Flow")&&O["-children"].push(O[S]["-id"]),delete O[S])})}if(x==="bpmn:subProcess"){var M=_[x];Array.isArray(M)?M.forEach(function(O){x==="bpmn:subProcess"&&A(O)}):A(M)}},function(x){var A=function(O){Object.keys(O).forEach(function(S){var j,D;if(S.includes("bpmn:")){var z={};Cu[S]&&Cu[S].in?(z=(D=(j=Cu[S]).in)===null||D===void 0?void 0:D.call(j,S,se.cloneDeep(O[S])),delete O[S]):M(O[S]);var U=void 0;(U=Reflect.ownKeys(z)).length>0&&U.forEach(function(L){Reflect.set(O,L,z[L])})}})};function M(O){r.set(O["-id"],O),Array.isArray(O)?O.forEach(function(S){M(S)}):typeof O=="object"&&A(O)}M(_[x])},function(x){if(x.indexOf("bpmn:")===0){var A=_[x];if(x==="bpmn:sequenceFlow"){var M=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];a=rV(A,M)}else{var O=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(x==="bpmn:boundaryEvent"){var S=_[x],j=function(D){var z=D["-attachedToRef"],U=r.get(z);U["-boundaryEvents"]||(U["-boundaryEvents"]=[]),U["-boundaryEvents"].push(D["-id"])};Array.isArray(S)?S.forEach(function(D){j(D)}):j(S)}n=n.concat(nV(A,O,x))}}}])}var b=function(x,A,M){Object.keys(x).forEach(function(O){var S=M?M+"."+O:O;A.has(S)?delete x[O]:typeof x[O]=="object"&&b(x[O],A,S)})};return n.forEach(function(x){var A,M;if(!((A=t==null?void 0:t.mapping)===null||A===void 0)&&A.in){var O=(M=t==null?void 0:t.mapping)===null||M===void 0?void 0:M.in,S=x.type;O[S]&&(x.type=O[S])}b(x,d.in,"")}),a.forEach(function(x){var A,M;if(!((A=t==null?void 0:t.mapping)===null||A===void 0)&&A.in){var O=(M=t==null?void 0:t.mapping)===null||M===void 0?void 0:M.in,S=x.type;O[S]&&(x.type=O[S])}b(x,d.in,"")}),{nodes:n,edges:a}}function nV(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var d=Xx(v,n,c);a.push(d)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var u=Xx(r,n,e);a.push(u)}return a}function Xx(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),u=n["-children"],c=n["-name"],v=Dl.shapeConfigMap.get(t);v&&(a+=v.width/2,r+=v.height/2);var d={};Object.entries(n).forEach(function(x){var A=Xv(x,2),M=A[0],O=A[1];iP.includes(M)||(d[M]=O)}),d=Gg(d);var g;if(c&&(g={x:a,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var _=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(_["-x"])+Number(_["-width"])/2,g.y=Number(_["-y"])+Number(_["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:a,y:r,properties:d};return u&&(b.children=u),g&&(b.text=g),b}function rV(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var u;Array.isArray(t)?u=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):u=t,n.push(qx(u,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(qx(a,e))}return n}function qx(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],u=0;a.split(`
`).forEach(function(g){u<g.length&&(u=g.length)}),n={value:a,x:Number(r["-x"])+u*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var _=Xv(g,2),b=_[0],x=_[1];iP.includes(b)||(c[b]=x)}),c=Gg(c);var v=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),d={id:t["-id"],type:dl.FLOW,pointsList:v,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(d.text=n),d}var Dl=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,u){var c,v,d=Nw({},n.processAttributes);JU(d,r,u);var g={"-id":"BPMNPlane_1","-bpmnElement":d["-id"]};QU(g,r);var _=n.definitionAttributes;_["bpmn:process"]=d,_["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var b={"bpmn:definitions":_};if(!((c=u==null?void 0:u.mapping)===null||c===void 0)&&c.out){var x=(v=u==null?void 0:u.mapping)===null||v===void 0?void 0:v.out,A=function(M){Array.isArray(M)&&M.forEach(function(O){return A(O)}),typeof M=="object"&&Object.keys(M).forEach(function(O){var S;(S=x[O])?(M[S]=se.cloneDeep(M[O]),delete M[O],A(M[S])):A(M[O])})};A(b)}return b},this.adapterIn=function(r,u){if(r)return tV(r,u)},a.adapterIn=this.adapterIn,a.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Dl.shapeConfigMap.set(dl.START,{width:jx.width,height:jx.height});Dl.shapeConfigMap.set(dl.END,{width:Ix.width,height:Ix.height});Dl.shapeConfigMap.set(dl.INTERMEDIATE_CATCH,{width:Bg.width,height:Bg.height});Dl.shapeConfigMap.set(dl.INTERMEDIATE_THROW,{width:Bg.width,height:Bg.height});Dl.shapeConfigMap.set(dl.BOUNDARY,{width:Lx.width,height:Lx.height});Dl.shapeConfigMap.set(dl.PARALLEL_GATEWAY,{width:Fx.width,height:Fx.height});Dl.shapeConfigMap.set(dl.INCLUSIVE_GATEWAY,{width:$x.width,height:$x.height});Dl.shapeConfigMap.set(dl.EXCLUSIVE_GATEWAY,{width:Bx.width,height:Bx.height});Dl.shapeConfigMap.set(dl.SYSTEM,{width:Ux.width,height:Ux.height});Dl.shapeConfigMap.set(dl.USER,{width:Vx.width,height:Vx.height});Dl.shapeConfigMap.set(dl.SUBPROCESS,{width:Gx.width,height:Gx.height});(function(e){YU(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(c){var v=HU(c);return a.adapterIn(v,a.props)},a.adapterXmlOut=function(c){var v=a.adapterOut(c,a.props);return qU(v)};var r=n.lf,u=n.props;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a.props=u,a}return t.pluginName="BPMNAdapter",t})(Dl);var Yx;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Yx||(Yx={}));var lP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),_v=function(){return _v=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_v.apply(this,arguments)},jm=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},oV={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function iV(e){for(var t=e,n=1;n<t.length-1;){var a=jm(t[n-1],2),r=a[0],u=a[1],c=jm(t[n],2),v=c[0],d=c[1],g=jm(t[n+1],2),_=g[0],b=g[1];r===v&&v===_||u===d&&d===b?t.splice(n,1):n++}return t}function aV(e,t,n,a){var r=[e[0],e[1]],u=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=a,u[0]+=a):t==="lb"&&(r[0]+=a,u[1]+=a),[r,u];case"tr":return t==="tl"?(r[1]+=a,u[0]-=a):t==="rb"&&(r[0]-=a,u[1]+=a),[r,u];case"bl":return t==="br"?(r[1]-=a,u[0]+=a):t==="lt"&&(r[0]+=a,u[1]-=a),[r,u];case"br":return t==="bl"?(r[1]-=a,u[0]-=a):t==="rt"&&(r[0]-=a,u[1]-=a),[r,u];default:return[]}}function lV(e,t,n,a){var r,u="",c="";e[0]===t[0]?u=e[1]>t[1]?"t":"b":e[1]===t[1]&&(u=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var v=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,a)||1/5*a,d=""+u+c,g=oV[d]||"-",_="L "+e[0]+" "+e[1];if(g==="-")_+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var b=jm(aV(t,d,g,v),2),x=b[0],A=b[1];x&&A&&(_+="L "+x[0]+" "+x[1]+" Q "+t[0]+" "+t[1]+" "+A[0]+" "+A[1],r=jm(A,2),t[0]=r[0],t[1]=r[1])}return _}function uV(e,t){var n=0,a="";if(e.length===2)a+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(a+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],u=e[n],c=e[n+++1];a+=lV(r,u,c,t)}a+="L "+e[n][0]+" "+e[n][1]}return a}(function(e){lP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,a=n.points,r=n.isAnimation,u=n.arrowConfig,c=n.radius,v=c===void 0?5:c,d=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),_=iV(a.split(" ").map(function(A){return A.split(",").map(function(M){return+M})})),b=uV(_,v),x=_v(_v(_v({style:r?g:{}},d),u),{fill:"none"});return vn.h("path",_v({d:b},x))},t})(vn.PolylineEdge);(function(e){lP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(vn.PolylineEdgeModel);let A_=!1;const Wg=ch({});function uP(e,t,n,a,r,u){u||(u=(c,v)=>({nodeModel:c,graph:v})),A_&&(Wg[e]=Zj(ir({render:()=>Rv(Jj,{to:n},[Rv(t,u(a,r))]),provide:()=>({getNode:()=>a,getGraph:()=>r})})))}function sP(e){A_&&delete Wg[e]}function zg(){return A_}function sV(){return A_=!0,ir({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Wg).forEach(n=>{n.startsWith(e.flowId)&&t.push(Wg[n])}),Rv(Dr,{},t.map(n=>Rv(n)))}}})}const cV=(e,t)=>{let n=0,a=t;for(;;){if(n>0&&(a=t+n,console.log(a)),!e.some(r=>r.properties.nodeName===a.trim()))return a;n++}};class Qo extends nP.view{constructor(n,a){super(n);Ma(this,"isMounted");Ma(this,"r");Ma(this,"component");Ma(this,"app");Ma(this,"root");Ma(this,"VueNode");Ma(this,"up_node_field_dict");this.component=a,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender?delete n.model.properties.noRender:n.model.properties.nodeName=cV(n.graphModel.nodes.filter(r=>r.id!==n.model.id),n.model.properties.nodeName),n.model.properties.config=_I[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var a,r,u,c,v,d;const n=[];return this.props.model.type==="start-node"&&(n.push({value:"global",label:St("views.applicationWorkflow.variable.global"),type:"global",children:((r=(a=this.props.model.properties)==null?void 0:a.config)==null?void 0:r.globalFields)||[]}),n.push({value:"chat",label:St("views.applicationWorkflow.variable.chat"),type:"chat",children:((c=(u=this.props.model.properties)==null?void 0:u.config)==null?void 0:c.chatFields)||[]})),n.push({value:this.props.model.id,label:this.props.model.properties.nodeName,type:this.props.model.type,children:((d=(v=this.props.model.properties)==null?void 0:v.config)==null?void 0:d.fields)||[]}),n}get_up_node_field_dict(n,a){if(!this.up_node_field_dict||!a){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(u=>u.id!="start-node").map(u=>u.get_up_node_field_dict(!0,a)).reduce((u,c)=>({...u,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,a){const r=Object.values(this.get_up_node_field_dict(n,a)).reduce((c,v)=>[...c,...v],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:a,y:r,type:u}=n;let c=!1;return u=="left"?c=this.props.graphModel.edges.some(v=>v.targetAnchorId==n.id):c=this.props.graphModel.edges.some(v=>v.sourceAnchorId==n.id),vn.h("foreignObject",{...n,x:a-10,y:r-12,width:30,height:30},[vn.h("div",{style:{zindex:0},onClick:()=>{u=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const a=document.createElement("div");n.appendChild(a),this.renderVueComponent(a)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var u;this.unmountVueComponent(),this.root=n;const{model:a,graphModel:r}=this.props;if(n)if(zg())uP(this.targetId(),this.component,n,a,r);else{this.r=Rv(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=rM({render(){return this.r},provide(){return{getNode:()=>a,getGraph:()=>r}}}),this.app.use(Qj,{locale:eI}),this.app.use(tI),this.app.use(nI),this.app.use(nM);for(const[c,v]of Object.entries(rI))this.app.component(c,v);(u=this.app)==null||u.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){zg()&&sP(this.targetId()),this.unmountVueComponent()}}class ei extends nP.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:a}=t;n&&(this.x=n),a&&(this.y=a),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,a=t+100;this.height=a,this.properties.height=a,this.move(0,(a-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=nM.global;this.width=this.get_width();const n=(r,u)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const v in c){const d=c[v];if(d.id===u)return!0;if(n(d.id,u))return!0}return!1},a={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,u,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,u,c,v)=>!this.graphModel.getNodeIncomingNode(u.id).find(_=>_.id==r.id)&&!n(r.id,u.id)}),this.sourceRules.push(a),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,u,c,v)=>v.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r}=this,u=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==Ko.Base&&(this.type!==Ko.Start&&c.push({x:n-r/2+10,y:u?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:u?a:a-15,id:`${t}_right`,type:"right"})),c}}let fV=class extends Qo{constructor(t){super(t,aU)}};const dV={type:"ai-chat-node",model:ei,view:fV},pV=Object.freeze(Object.defineProperty({__proto__:null,default:dV},Symbol.toStringTag,{value:"Module"})),hV={class:"title-decoration-1 mb-8"},vV={class:"flex-between w-full"},mV={class:"flex align-center"},yV={class:"mr-4"},gV={class:"flex"},_V=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=aa(),n=or(()=>t.path.includes("resource-management")?"systemManage":"workspace"),a={questionReferenceAddress:["start-node","question"],api_input_field_list:[],user_input_field_list:[],documentList:["start-node","document"],imageList:["start-node","image"],audioList:["start-node","audio"]},r=Ue(),u=or({get:()=>(d.nodeModel.properties.nodeData||Re.set(d.nodeModel.properties,"nodeData",a),d.nodeModel.properties.nodeData),set:_=>{Re.set(d.nodeModel.properties,"nodeData",_)}});function c(_,b){const x=`${_}List`;b?(console.log("listKey",x),d.nodeModel.properties.nodeData[x]||Re.set(d.nodeModel.properties.nodeData,x,[])):delete d.nodeModel.properties.nodeData[x]}const v=()=>{if(!d.nodeModel.properties.nodeData.applicationId){Re.set(d.nodeModel.properties,"status",500);return}Eo({type:"application",systemType:n.value}).getApplicationDetail(d.nodeModel.properties.nodeData.applicationId).then(_=>{const b=Re.cloneDeep(d.nodeModel.properties.nodeData.api_input_field_list),x=Re.cloneDeep(d.nodeModel.properties.nodeData.user_input_field_list);if(eE(_.data.type)){const A=_.data.workFlow.nodes[0].properties.nodeData,M=Re.cloneDeep(_.data.workFlow.nodes[0].properties.api_input_field_list),O=Re.cloneDeep(_.data.workFlow.nodes[0].properties.user_input_field_list),S=(M||[]).map(U=>{const L=b==null?void 0:b.find($=>$.variable==U.variable);return L?{...U,value:L.value,label:typeof U.label=="object"&&U.label!=null?U.label.label:U.label}:U});Re.set(d.nodeModel.properties.nodeData,"api_input_field_list",S);const j=(O||[]).map(U=>{const L=x==null?void 0:x.find($=>$.field==U.field);return L?{...U,value:L.value,label:typeof U.label=="object"&&U.label!=null?U.label.label:U.label}:U});Re.set(d.nodeModel.properties.nodeData,"user_input_field_list",j),console.log("nodeData",A);const D=A.fileUploadEnable,z=A.fileUploadSetting;D?(c("document",z.document),c("image",z.image),c("audio",z.audio)):["documentList","imageList","audioList"].forEach(U=>{delete d.nodeModel.properties.nodeData[U]}),Re.set(d.nodeModel.properties,"status",_.data.id?200:500)}}).catch(_=>{console.log(_),Re.set(d.nodeModel.properties,"status",500)})},d=e,g=()=>{var _;return(_=r.value)==null?void 0:_.validate().catch(b=>Promise.reject({node:d.nodeModel,errMessage:b}))};return oo(()=>{v(),Re.set(d.nodeModel,"validate",g)}),(_,b)=>{const x=ee("el-form-item"),A=ee("el-tooltip"),M=ee("el-switch"),O=ee("el-form"),S=ee("el-card");return Ne(),gt(Jo,{nodeModel:_.nodeModel},{default:C(()=>[J("h5",hV,Ee(_.$t("views.applicationWorkflow.nodeSetting")),1),P(S,{shadow:"never",class:"card-never"},{default:C(()=>[P(O,{onSubmit:b[6]||(b[6]=en(()=>{},["prevent"])),model:u.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:r},{default:C(()=>[P(x,{label:_.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"questionReferenceAddress",rules:{message:_.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:C(()=>[P(Zo,{ref_key:"applicationNodeFormRef",ref:r,nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:u.value.questionReferenceAddress,"onUpdate:modelValue":b[0]||(b[0]=j=>u.value.questionReferenceAddress=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),u.value.hasOwnProperty("documentList")||"documentList"in u.value?(Ne(),gt(x,{key:0,label:_.$t("views.problem.relateParagraph.selectDocument"),prop:"documentList",rules:{message:_.$t("views.chatLog.documentPlaceholder"),trigger:"blur",required:!1}},{default:C(()=>[P(Zo,{ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.chatLog.documentPlaceholder"),modelValue:u.value.documentList,"onUpdate:modelValue":b[1]||(b[1]=j=>u.value.documentList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):Rn("",!0),u.value.hasOwnProperty("imageList")||"imageList"in u.value?(Ne(),gt(x,{key:1,label:_.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"imageList",rules:{message:_.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:C(()=>[P(Zo,{ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:u.value.imageList,"onUpdate:modelValue":b[2]||(b[2]=j=>u.value.imageList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):Rn("",!0),u.value.hasOwnProperty("audioList")||"audioList"in u.value?(Ne(),gt(x,{key:2,label:_.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:_.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:C(()=>[P(Zo,{ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:u.value.audioList,"onUpdate:modelValue":b[3]||(b[3]=j=>u.value.audioList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):Rn("",!0),(Ne(!0),sn(Dr,null,Oo(u.value.api_input_field_list,(j,D)=>(Ne(),sn("div",{key:"api-input-"+D},[P(x,{label:j.variable,prop:"api_input_field_list."+D+".value",rules:[{required:j.isRequired,message:`${_.$t("common.inputPlaceholder")}${j.variable}`,trigger:"blur"}]},{default:C(()=>[P(Zo,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:u.value.api_input_field_list[D].value,"onUpdate:modelValue":z=>u.value.api_input_field_list[D].value=z},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(Ne(!0),sn(Dr,null,Oo(u.value.user_input_field_list,(j,D)=>(Ne(),sn("div",{key:"user-input-"+D},[P(x,{label:j.label,prop:"user_input_field_list."+D+".value",rules:[{required:j.required,message:`${_.$t("common.inputPlaceholder")}${j.label}`,trigger:"blur"}]},{default:C(()=>[P(Zo,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:u.value.user_input_field_list[D].value,"onUpdate:modelValue":z=>u.value.user_input_field_list[D].value=z},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),P(x,{label:_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[5]||(b[5]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",vV,[J("div",mV,[J("div",yV,[J("span",null,Ee(_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),P(A,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),J("div",gV,[P(M,{size:"small",modelValue:u.value.isResult,"onUpdate:modelValue":b[4]||(b[4]=j=>u.value.isResult=j)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class bV extends Qo{constructor(t){super(t,_V)}}const wV={type:"application-node",model:ei,view:bV},EV=Object.freeze(Object.defineProperty({__proto__:null,default:wV},Symbol.toStringTag,{value:"Module"}));/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Kx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function hc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kx(Object(n),!0).forEach(function(a){OV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kx(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function wg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wg=function(t){return typeof t}:wg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function OV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Df(){return Df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Df.apply(this,arguments)}function SV(e,t){if(e==null)return{};var n={},a=Object.keys(e),r,u;for(u=0;u<a.length;u++)r=a[u],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function xV(e,t){if(e==null)return{};var n=SV(e,t),a,r;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)a=u[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var AV="1.15.6";function Rf(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Lf=Rf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),oy=Rf(/Edge/i),Zx=Rf(/firefox/i),Im=Rf(/safari/i)&&!Rf(/chrome/i)&&!Rf(/android/i),IE=Rf(/iP(ad|od|hone)/i),cP=Rf(/chrome/i)&&Rf(/android/i),fP={capture:!1,passive:!1};function no(e,t,n){e.addEventListener(t,n,!Lf&&fP)}function Zr(e,t,n){e.removeEventListener(t,n,!Lf&&fP)}function Hg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function dP(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Es(e,t,n,a){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Hg(e,t):Hg(e,t))||a&&e===n)return e;if(e===n)break}while(e=dP(e))}return null}var Jx=/\s+/g;function nu(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(Jx," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(Jx," ")}}function wr(e,t,n){var a=e&&e.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in a)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),a[t]=n+(typeof n=="string"?"":"px")}}function Sv(e,t){var n="";if(typeof e=="string")n=e;else do{var a=wr(e,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function pP(e,t,n){if(e){var a=e.getElementsByTagName(t),r=0,u=a.length;if(n)for(;r<u;r++)n(a[r],r);return a}return[]}function dc(){var e=document.scrollingElement;return e||document.documentElement}function Ki(e,t,n,a,r){if(!(!e.getBoundingClientRect&&e!==window)){var u,c,v,d,g,_,b;if(e!==window&&e.parentNode&&e!==dc()?(u=e.getBoundingClientRect(),c=u.top,v=u.left,d=u.bottom,g=u.right,_=u.height,b=u.width):(c=0,v=0,d=window.innerHeight,g=window.innerWidth,_=window.innerHeight,b=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!Lf))do if(r&&r.getBoundingClientRect&&(wr(r,"transform")!=="none"||n&&wr(r,"position")!=="static")){var x=r.getBoundingClientRect();c-=x.top+parseInt(wr(r,"border-top-width")),v-=x.left+parseInt(wr(r,"border-left-width")),d=c+u.height,g=v+u.width;break}while(r=r.parentNode);if(a&&e!==window){var A=Sv(r||e),M=A&&A.a,O=A&&A.d;A&&(c/=O,v/=M,b/=M,_/=O,d=c+_,g=v+b)}return{top:c,left:v,bottom:d,right:g,width:b,height:_}}}function Qx(e,t,n){for(var a=Wd(e,!0),r=Ki(e)[t];a;){var u=Ki(a)[n],c=void 0;if(c=r>=u,!c)return a;if(a===dc())break;a=Wd(a,!1)}return!1}function Dv(e,t,n,a){for(var r=0,u=0,c=e.children;u<c.length;){if(c[u].style.display!=="none"&&c[u]!==yr.ghost&&(a||c[u]!==yr.dragged)&&Es(c[u],n.draggable,e,!1)){if(r===t)return c[u];r++}u++}return null}function LE(e,t){for(var n=e.lastElementChild;n&&(n===yr.ghost||wr(n,"display")==="none"||t&&!Hg(n,t));)n=n.previousElementSibling;return n||null}function Nu(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==yr.clone&&(!t||Hg(e,t))&&n++;return n}function eA(e){var t=0,n=0,a=dc();if(e)do{var r=Sv(e),u=r.a,c=r.d;t+=e.scrollLeft*u,n+=e.scrollTop*c}while(e!==a&&(e=e.parentNode));return[t,n]}function TV(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n)}return-1}function Wd(e,t){if(!e||!e.getBoundingClientRect)return dc();var n=e,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=wr(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return dc();if(a||t)return n;a=!0}}while(n=n.parentNode);return dc()}function MV(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function O1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Lm;function hP(e,t){return function(){if(!Lm){var n=arguments,a=this;n.length===1?e.call(a,n[0]):e.apply(a,n),Lm=setTimeout(function(){Lm=void 0},t)}}}function kV(){clearTimeout(Lm),Lm=void 0}function vP(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function mP(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function yP(e,t,n){var a={};return Array.from(e.children).forEach(function(r){var u,c,v,d;if(!(!Es(r,t.draggable,e,!1)||r.animated||r===n)){var g=Ki(r);a.left=Math.min((u=a.left)!==null&&u!==void 0?u:1/0,g.left),a.top=Math.min((c=a.top)!==null&&c!==void 0?c:1/0,g.top),a.right=Math.max((v=a.right)!==null&&v!==void 0?v:-1/0,g.right),a.bottom=Math.max((d=a.bottom)!==null&&d!==void 0?d:-1/0,g.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Nl="Sortable"+new Date().getTime();function PV(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(r){if(!(wr(r,"display")==="none"||r===yr.ghost)){e.push({target:r,rect:Ki(r)});var u=hc({},e[e.length-1].rect);if(r.thisAnimationDuration){var c=Sv(r,!0);c&&(u.top-=c.f,u.left-=c.e)}r.fromRect=u}})}},addAnimationState:function(a){e.push(a)},removeAnimationState:function(a){e.splice(TV(e,{target:a}),1)},animateAll:function(a){var r=this;if(!this.options.animation){clearTimeout(t),typeof a=="function"&&a();return}var u=!1,c=0;e.forEach(function(v){var d=0,g=v.target,_=g.fromRect,b=Ki(g),x=g.prevFromRect,A=g.prevToRect,M=v.rect,O=Sv(g,!0);O&&(b.top-=O.f,b.left-=O.e),g.toRect=b,g.thisAnimationDuration&&O1(x,b)&&!O1(_,b)&&(M.top-b.top)/(M.left-b.left)===(_.top-b.top)/(_.left-b.left)&&(d=NV(M,x,A,r.options)),O1(b,_)||(g.prevFromRect=_,g.prevToRect=b,d||(d=r.options.animation),r.animate(g,M,b,d)),d&&(u=!0,c=Math.max(c,d),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},d),g.thisAnimationDuration=d)}),clearTimeout(t),u?t=setTimeout(function(){typeof a=="function"&&a()},c):typeof a=="function"&&a(),e=[]},animate:function(a,r,u,c){if(c){wr(a,"transition",""),wr(a,"transform","");var v=Sv(this.el),d=v&&v.a,g=v&&v.d,_=(r.left-u.left)/(d||1),b=(r.top-u.top)/(g||1);a.animatingX=!!_,a.animatingY=!!b,wr(a,"transform","translate3d("+_+"px,"+b+"px,0)"),this.forRepaintDummy=RV(a),wr(a,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),wr(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){wr(a,"transition",""),wr(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},c)}}}}function RV(e){return e.offsetWidth}function NV(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}var uv=[],S1={initializeByDefault:!0},iy={mount:function(t){for(var n in S1)S1.hasOwnProperty(n)&&!(n in t)&&(t[n]=S1[n]);uv.forEach(function(a){if(a.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),uv.push(t)},pluginEvent:function(t,n,a){var r=this;this.eventCanceled=!1,a.cancel=function(){r.eventCanceled=!0};var u=t+"Global";uv.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][u]&&n[c.pluginName][u](hc({sortable:n},a)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](hc({sortable:n},a)))})},initializePlugins:function(t,n,a,r){uv.forEach(function(v){var d=v.pluginName;if(!(!t.options[d]&&!v.initializeByDefault)){var g=new v(t,n,t.options);g.sortable=t,g.options=t.options,t[d]=g,Df(a,g.defaults)}});for(var u in t.options)if(t.options.hasOwnProperty(u)){var c=this.modifyOption(t,u,t.options[u]);typeof c<"u"&&(t.options[u]=c)}},getEventProperties:function(t,n){var a={};return uv.forEach(function(r){typeof r.eventProperties=="function"&&Df(a,r.eventProperties.call(n[r.pluginName],t))}),a},modifyOption:function(t,n,a){var r;return uv.forEach(function(u){t[u.pluginName]&&u.optionListeners&&typeof u.optionListeners[n]=="function"&&(r=u.optionListeners[n].call(t[u.pluginName],a))}),r}};function CV(e){var t=e.sortable,n=e.rootEl,a=e.name,r=e.targetEl,u=e.cloneEl,c=e.toEl,v=e.fromEl,d=e.oldIndex,g=e.newIndex,_=e.oldDraggableIndex,b=e.newDraggableIndex,x=e.originalEvent,A=e.putSortable,M=e.extraEventProperties;if(t=t||n&&n[Nl],!!t){var O,S=t.options,j="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Lf&&!oy?O=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(O=document.createEvent("Event"),O.initEvent(a,!0,!0)),O.to=c||n,O.from=v||n,O.item=r||n,O.clone=u,O.oldIndex=d,O.newIndex=g,O.oldDraggableIndex=_,O.newDraggableIndex=b,O.originalEvent=x,O.pullMode=A?A.lastPutMode:void 0;var D=hc(hc({},M),iy.getEventProperties(a,t));for(var z in D)O[z]=D[z];n&&n.dispatchEvent(O),S[j]&&S[j].call(t,O)}}var DV=["evt"],Rl=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=a.evt,u=xV(a,DV);iy.pluginEvent.bind(yr)(t,n,hc({dragEl:_n,parentEl:Ni,ghostEl:Mr,rootEl:vi,nextEl:Yp,lastDownEl:Eg,cloneEl:Ei,cloneHidden:Gd,dragStarted:Am,putSortable:Pa,activeSortable:yr.active,originalEvent:r,oldIndex:bv,oldDraggableIndex:Fm,newIndex:ru,newDraggableIndex:Ud,hideGhostForTarget:wP,unhideGhostForTarget:EP,cloneNowHidden:function(){Gd=!0},cloneNowShown:function(){Gd=!1},dispatchSortableEvent:function(v){cl({sortable:n,name:v,originalEvent:r})}},u))};function cl(e){CV(hc({putSortable:Pa,cloneEl:Ei,targetEl:_n,rootEl:vi,oldIndex:bv,oldDraggableIndex:Fm,newIndex:ru,newDraggableIndex:Ud},e))}var _n,Ni,Mr,vi,Yp,Eg,Ei,Gd,bv,ru,Fm,Ud,sg,Pa,pv=!1,Xg=!1,qg=[],Hp,ws,x1,A1,tA,nA,Am,sv,$m,Bm=!1,cg=!1,Og,za,T1=[],Cw=!1,Yg=[],T_=typeof document<"u",fg=IE,rA=oy||Lf?"cssFloat":"float",jV=T_&&!cP&&!IE&&"draggable"in document.createElement("div"),gP=function(){if(T_){if(Lf)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),_P=function(t,n){var a=wr(t),r=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),u=Dv(t,0,n),c=Dv(t,1,n),v=u&&wr(u),d=c&&wr(c),g=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Ki(u).width,_=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+Ki(c).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&v.float&&v.float!=="none"){var b=v.float==="left"?"left":"right";return c&&(d.clear==="both"||d.clear===b)?"vertical":"horizontal"}return u&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||g>=r&&a[rA]==="none"||c&&a[rA]==="none"&&g+_>r)?"vertical":"horizontal"},IV=function(t,n,a){var r=a?t.left:t.top,u=a?t.right:t.bottom,c=a?t.width:t.height,v=a?n.left:n.top,d=a?n.right:n.bottom,g=a?n.width:n.height;return r===v||u===d||r+c/2===v+g/2},LV=function(t,n){var a;return qg.some(function(r){var u=r[Nl].options.emptyInsertThreshold;if(!(!u||LE(r))){var c=Ki(r),v=t>=c.left-u&&t<=c.right+u,d=n>=c.top-u&&n<=c.bottom+u;if(v&&d)return a=r}}),a},bP=function(t){function n(u,c){return function(v,d,g,_){var b=v.options.group.name&&d.options.group.name&&v.options.group.name===d.options.group.name;if(u==null&&(c||b))return!0;if(u==null||u===!1)return!1;if(c&&u==="clone")return u;if(typeof u=="function")return n(u(v,d,g,_),c)(v,d,g,_);var x=(c?v:d).options.group.name;return u===!0||typeof u=="string"&&u===x||u.join&&u.indexOf(x)>-1}}var a={},r=t.group;(!r||wg(r)!="object")&&(r={name:r}),a.name=r.name,a.checkPull=n(r.pull,!0),a.checkPut=n(r.put),a.revertClone=r.revertClone,t.group=a},wP=function(){!gP&&Mr&&wr(Mr,"display","none")},EP=function(){!gP&&Mr&&wr(Mr,"display","")};T_&&!cP&&document.addEventListener("click",function(e){if(Xg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Xg=!1,!1},!0);var Xp=function(t){if(_n){t=t.touches?t.touches[0]:t;var n=LV(t.clientX,t.clientY);if(n){var a={};for(var r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);a.target=a.rootEl=n,a.preventDefault=void 0,a.stopPropagation=void 0,n[Nl]._onDragOver(a)}}},FV=function(t){_n&&_n.parentNode[Nl]._isOutsideThisEl(t.target)};function yr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Df({},t),e[Nl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _P(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,v){c.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:yr.supportPointer!==!1&&"PointerEvent"in window&&(!Im||IE),emptyInsertThreshold:5};iy.initializePlugins(this,e,n);for(var a in n)!(a in t)&&(t[a]=n[a]);bP(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:jV,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?no(e,"pointerdown",this._onTapStart):(no(e,"mousedown",this._onTapStart),no(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(no(e,"dragover",this),no(e,"dragenter",this)),qg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Df(this,PV())}yr.prototype={constructor:yr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(sv=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,_n):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,a=this.el,r=this.options,u=r.preventOnFilter,c=t.type,v=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,d=(v||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||d,_=r.filter;if(HV(a),!_n&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||r.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&Im&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=Es(d,r.draggable,a,!1),!(d&&d.animated)&&Eg!==d)){if(bv=Nu(d),Fm=Nu(d,r.draggable),typeof _=="function"){if(_.call(this,t,d,this)){cl({sortable:n,rootEl:g,name:"filter",targetEl:d,toEl:a,fromEl:a}),Rl("filter",n,{evt:t}),u&&t.preventDefault();return}}else if(_&&(_=_.split(",").some(function(b){if(b=Es(g,b.trim(),a,!1),b)return cl({sortable:n,rootEl:b,name:"filter",targetEl:d,fromEl:a,toEl:a}),Rl("filter",n,{evt:t}),!0}),_)){u&&t.preventDefault();return}r.handle&&!Es(g,r.handle,a,!1)||this._prepareDragStart(t,v,d)}}},_prepareDragStart:function(t,n,a){var r=this,u=r.el,c=r.options,v=u.ownerDocument,d;if(a&&!_n&&a.parentNode===u){var g=Ki(a);if(vi=u,_n=a,Ni=_n.parentNode,Yp=_n.nextSibling,Eg=a,sg=c.group,yr.dragged=_n,Hp={target:_n,clientX:(n||t).clientX,clientY:(n||t).clientY},tA=Hp.clientX-g.left,nA=Hp.clientY-g.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,_n.style["will-change"]="all",d=function(){if(Rl("delayEnded",r,{evt:t}),yr.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Zx&&r.nativeDraggable&&(_n.draggable=!0),r._triggerDragStart(t,n),cl({sortable:r,name:"choose",originalEvent:t}),nu(_n,c.chosenClass,!0)},c.ignore.split(",").forEach(function(_){pP(_n,_.trim(),M1)}),no(v,"dragover",Xp),no(v,"mousemove",Xp),no(v,"touchmove",Xp),c.supportPointer?(no(v,"pointerup",r._onDrop),!this.nativeDraggable&&no(v,"pointercancel",r._onDrop)):(no(v,"mouseup",r._onDrop),no(v,"touchend",r._onDrop),no(v,"touchcancel",r._onDrop)),Zx&&this.nativeDraggable&&(this.options.touchStartThreshold=4,_n.draggable=!0),Rl("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(oy||Lf))){if(yr.eventCanceled){this._onDrop();return}c.supportPointer?(no(v,"pointerup",r._disableDelayedDrag),no(v,"pointercancel",r._disableDelayedDrag)):(no(v,"mouseup",r._disableDelayedDrag),no(v,"touchend",r._disableDelayedDrag),no(v,"touchcancel",r._disableDelayedDrag)),no(v,"mousemove",r._delayedDragTouchMoveHandler),no(v,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&no(v,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(d,c.delay)}else d()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){_n&&M1(_n),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Zr(t,"mouseup",this._disableDelayedDrag),Zr(t,"touchend",this._disableDelayedDrag),Zr(t,"touchcancel",this._disableDelayedDrag),Zr(t,"pointerup",this._disableDelayedDrag),Zr(t,"pointercancel",this._disableDelayedDrag),Zr(t,"mousemove",this._delayedDragTouchMoveHandler),Zr(t,"touchmove",this._delayedDragTouchMoveHandler),Zr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?no(document,"pointermove",this._onTouchMove):n?no(document,"touchmove",this._onTouchMove):no(document,"mousemove",this._onTouchMove):(no(_n,"dragend",this),no(vi,"dragstart",this._onDragStart));try{document.selection?Sg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(pv=!1,vi&&_n){Rl("dragStarted",this,{evt:n}),this.nativeDraggable&&no(document,"dragover",FV);var a=this.options;!t&&nu(_n,a.dragClass,!1),nu(_n,a.ghostClass,!0),yr.active=this,t&&this._appendGhost(),cl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ws){this._lastX=ws.clientX,this._lastY=ws.clientY,wP();for(var t=document.elementFromPoint(ws.clientX,ws.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ws.clientX,ws.clientY),t!==n);)n=t;if(_n.parentNode[Nl]._isOutsideThisEl(t),n)do{if(n[Nl]){var a=void 0;if(a=n[Nl]._onDragOver({clientX:ws.clientX,clientY:ws.clientY,target:t,rootEl:n}),a&&!this.options.dragoverBubble)break}t=n}while(n=dP(n));EP()}},_onTouchMove:function(t){if(Hp){var n=this.options,a=n.fallbackTolerance,r=n.fallbackOffset,u=t.touches?t.touches[0]:t,c=Mr&&Sv(Mr,!0),v=Mr&&c&&c.a,d=Mr&&c&&c.d,g=fg&&za&&eA(za),_=(u.clientX-Hp.clientX+r.x)/(v||1)+(g?g[0]-T1[0]:0)/(v||1),b=(u.clientY-Hp.clientY+r.y)/(d||1)+(g?g[1]-T1[1]:0)/(d||1);if(!yr.active&&!pv){if(a&&Math.max(Math.abs(u.clientX-this._lastX),Math.abs(u.clientY-this._lastY))<a)return;this._onDragStart(t,!0)}if(Mr){c?(c.e+=_-(x1||0),c.f+=b-(A1||0)):c={a:1,b:0,c:0,d:1,e:_,f:b};var x="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");wr(Mr,"webkitTransform",x),wr(Mr,"mozTransform",x),wr(Mr,"msTransform",x),wr(Mr,"transform",x),x1=_,A1=b,ws=u}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Mr){var t=this.options.fallbackOnBody?document.body:vi,n=Ki(_n,!0,fg,!0,t),a=this.options;if(fg){for(za=t;wr(za,"position")==="static"&&wr(za,"transform")==="none"&&za!==document;)za=za.parentNode;za!==document.body&&za!==document.documentElement?(za===document&&(za=dc()),n.top+=za.scrollTop,n.left+=za.scrollLeft):za=dc(),T1=eA(za)}Mr=_n.cloneNode(!0),nu(Mr,a.ghostClass,!1),nu(Mr,a.fallbackClass,!0),nu(Mr,a.dragClass,!0),wr(Mr,"transition",""),wr(Mr,"transform",""),wr(Mr,"box-sizing","border-box"),wr(Mr,"margin",0),wr(Mr,"top",n.top),wr(Mr,"left",n.left),wr(Mr,"width",n.width),wr(Mr,"height",n.height),wr(Mr,"opacity","0.8"),wr(Mr,"position",fg?"absolute":"fixed"),wr(Mr,"zIndex","100000"),wr(Mr,"pointerEvents","none"),yr.ghost=Mr,t.appendChild(Mr),wr(Mr,"transform-origin",tA/parseInt(Mr.style.width)*100+"% "+nA/parseInt(Mr.style.height)*100+"%")}},_onDragStart:function(t,n){var a=this,r=t.dataTransfer,u=a.options;if(Rl("dragStart",this,{evt:t}),yr.eventCanceled){this._onDrop();return}Rl("setupClone",this),yr.eventCanceled||(Ei=mP(_n),Ei.removeAttribute("id"),Ei.draggable=!1,Ei.style["will-change"]="",this._hideClone(),nu(Ei,this.options.chosenClass,!1),yr.clone=Ei),a.cloneId=Sg(function(){Rl("clone",a),!yr.eventCanceled&&(a.options.removeCloneOnHide||vi.insertBefore(Ei,_n),a._hideClone(),cl({sortable:a,name:"clone"}))}),!n&&nu(_n,u.dragClass,!0),n?(Xg=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Zr(document,"mouseup",a._onDrop),Zr(document,"touchend",a._onDrop),Zr(document,"touchcancel",a._onDrop),r&&(r.effectAllowed="move",u.setData&&u.setData.call(a,r,_n)),no(document,"drop",a),wr(_n,"transform","translateZ(0)")),pv=!0,a._dragStartId=Sg(a._dragStarted.bind(a,n,t)),no(document,"selectstart",a),Am=!0,window.getSelection().removeAllRanges(),Im&&wr(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,a=t.target,r,u,c,v=this.options,d=v.group,g=yr.active,_=sg===d,b=v.sort,x=Pa||g,A,M=this,O=!1;if(Cw)return;function S(we,me){Rl(we,M,hc({evt:t,isOwner:_,axis:A?"vertical":"horizontal",revert:c,dragRect:r,targetRect:u,canSort:b,fromSortable:x,target:a,completed:D,onMove:function(tt,Ot){return dg(vi,n,_n,r,tt,Ki(tt),t,Ot)},changed:z},me))}function j(){S("dragOverAnimationCapture"),M.captureAnimationState(),M!==x&&x.captureAnimationState()}function D(we){return S("dragOverCompleted",{insertion:we}),we&&(_?g._hideClone():g._showClone(M),M!==x&&(nu(_n,Pa?Pa.options.ghostClass:g.options.ghostClass,!1),nu(_n,v.ghostClass,!0)),Pa!==M&&M!==yr.active?Pa=M:M===yr.active&&Pa&&(Pa=null),x===M&&(M._ignoreWhileAnimating=a),M.animateAll(function(){S("dragOverAnimationComplete"),M._ignoreWhileAnimating=null}),M!==x&&(x.animateAll(),x._ignoreWhileAnimating=null)),(a===_n&&!_n.animated||a===n&&!a.animated)&&(sv=null),!v.dragoverBubble&&!t.rootEl&&a!==document&&(_n.parentNode[Nl]._isOutsideThisEl(t.target),!we&&Xp(t)),!v.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),O=!0}function z(){ru=Nu(_n),Ud=Nu(_n,v.draggable),cl({sortable:M,name:"change",toEl:n,newIndex:ru,newDraggableIndex:Ud,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),a=Es(a,v.draggable,n,!0),S("dragOver"),yr.eventCanceled)return O;if(_n.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||M._ignoreWhileAnimating===a)return D(!1);if(Xg=!1,g&&!v.disabled&&(_?b||(c=Ni!==vi):Pa===this||(this.lastPutMode=sg.checkPull(this,g,_n,t))&&d.checkPut(this,g,_n,t))){if(A=this._getDirection(t,a)==="vertical",r=Ki(_n),S("dragOverValid"),yr.eventCanceled)return O;if(c)return Ni=vi,j(),this._hideClone(),S("revert"),yr.eventCanceled||(Yp?vi.insertBefore(_n,Yp):vi.appendChild(_n)),D(!0);var U=LE(n,v.draggable);if(!U||VV(t,A,this)&&!U.animated){if(U===_n)return D(!1);if(U&&n===t.target&&(a=U),a&&(u=Ki(a)),dg(vi,n,_n,r,a,u,t,!!a)!==!1)return j(),U&&U.nextSibling?n.insertBefore(_n,U.nextSibling):n.appendChild(_n),Ni=n,z(),D(!0)}else if(U&&UV(t,A,this)){var L=Dv(n,0,v,!0);if(L===_n)return D(!1);if(a=L,u=Ki(a),dg(vi,n,_n,r,a,u,t,!1)!==!1)return j(),n.insertBefore(_n,L),Ni=n,z(),D(!0)}else if(a.parentNode===n){u=Ki(a);var $=0,X,Y=_n.parentNode!==n,H=!IV(_n.animated&&_n.toRect||r,a.animated&&a.toRect||u,A),B=A?"top":"left",G=Qx(a,"top","top")||Qx(_n,"top","top"),K=G?G.scrollTop:void 0;sv!==a&&(X=u[B],Bm=!1,cg=!H&&v.invertSwap||Y),$=GV(t,a,u,A,H?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,cg,sv===a);var Q;if($!==0){var ce=Nu(_n);do ce-=$,Q=Ni.children[ce];while(Q&&(wr(Q,"display")==="none"||Q===Mr))}if($===0||Q===a)return D(!1);sv=a,$m=$;var ue=a.nextElementSibling,de=!1;de=$===1;var ye=dg(vi,n,_n,r,a,u,t,de);if(ye!==!1)return(ye===1||ye===-1)&&(de=ye===1),Cw=!0,setTimeout(BV,30),j(),de&&!ue?n.appendChild(_n):a.parentNode.insertBefore(_n,de?ue:a),G&&vP(G,0,K-G.scrollTop),Ni=_n.parentNode,X!==void 0&&!cg&&(Og=Math.abs(X-Ki(a)[B])),z(),D(!0)}if(n.contains(_n))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Zr(document,"mousemove",this._onTouchMove),Zr(document,"touchmove",this._onTouchMove),Zr(document,"pointermove",this._onTouchMove),Zr(document,"dragover",Xp),Zr(document,"mousemove",Xp),Zr(document,"touchmove",Xp)},_offUpEvents:function(){var t=this.el.ownerDocument;Zr(t,"mouseup",this._onDrop),Zr(t,"touchend",this._onDrop),Zr(t,"pointerup",this._onDrop),Zr(t,"pointercancel",this._onDrop),Zr(t,"touchcancel",this._onDrop),Zr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,a=this.options;if(ru=Nu(_n),Ud=Nu(_n,a.draggable),Rl("drop",this,{evt:t}),Ni=_n&&_n.parentNode,ru=Nu(_n),Ud=Nu(_n,a.draggable),yr.eventCanceled){this._nulling();return}pv=!1,cg=!1,Bm=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Dw(this.cloneId),Dw(this._dragStartId),this.nativeDraggable&&(Zr(document,"drop",this),Zr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Im&&wr(document.body,"user-select",""),wr(_n,"transform",""),t&&(Am&&(t.cancelable&&t.preventDefault(),!a.dropBubble&&t.stopPropagation()),Mr&&Mr.parentNode&&Mr.parentNode.removeChild(Mr),(vi===Ni||Pa&&Pa.lastPutMode!=="clone")&&Ei&&Ei.parentNode&&Ei.parentNode.removeChild(Ei),_n&&(this.nativeDraggable&&Zr(_n,"dragend",this),M1(_n),_n.style["will-change"]="",Am&&!pv&&nu(_n,Pa?Pa.options.ghostClass:this.options.ghostClass,!1),nu(_n,this.options.chosenClass,!1),cl({sortable:this,name:"unchoose",toEl:Ni,newIndex:null,newDraggableIndex:null,originalEvent:t}),vi!==Ni?(ru>=0&&(cl({rootEl:Ni,name:"add",toEl:Ni,fromEl:vi,originalEvent:t}),cl({sortable:this,name:"remove",toEl:Ni,originalEvent:t}),cl({rootEl:Ni,name:"sort",toEl:Ni,fromEl:vi,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ni,originalEvent:t})),Pa&&Pa.save()):ru!==bv&&ru>=0&&(cl({sortable:this,name:"update",toEl:Ni,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ni,originalEvent:t})),yr.active&&((ru==null||ru===-1)&&(ru=bv,Ud=Fm),cl({sortable:this,name:"end",toEl:Ni,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Rl("nulling",this),vi=_n=Ni=Mr=Yp=Ei=Eg=Gd=Hp=ws=Am=ru=Ud=bv=Fm=sv=$m=Pa=sg=yr.dragged=yr.ghost=yr.clone=yr.active=null,Yg.forEach(function(t){t.checked=!0}),Yg.length=x1=A1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":_n&&(this._onDragOver(t),$V(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,a=this.el.children,r=0,u=a.length,c=this.options;r<u;r++)n=a[r],Es(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||zV(n));return t},sort:function(t,n){var a={},r=this.el;this.toArray().forEach(function(u,c){var v=r.children[c];Es(v,this.options.draggable,r,!1)&&(a[u]=v)},this),n&&this.captureAnimationState(),t.forEach(function(u){a[u]&&(r.removeChild(a[u]),r.appendChild(a[u]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Es(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var a=this.options;if(n===void 0)return a[t];var r=iy.modifyOption(this,t,n);typeof r<"u"?a[t]=r:a[t]=n,t==="group"&&bP(a)},destroy:function(){Rl("destroy",this);var t=this.el;t[Nl]=null,Zr(t,"mousedown",this._onTapStart),Zr(t,"touchstart",this._onTapStart),Zr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Zr(t,"dragover",this),Zr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),qg.splice(qg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Gd){if(Rl("hideClone",this),yr.eventCanceled)return;wr(Ei,"display","none"),this.options.removeCloneOnHide&&Ei.parentNode&&Ei.parentNode.removeChild(Ei),Gd=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Gd){if(Rl("showClone",this),yr.eventCanceled)return;_n.parentNode==vi&&!this.options.group.revertClone?vi.insertBefore(Ei,_n):Yp?vi.insertBefore(Ei,Yp):vi.appendChild(Ei),this.options.group.revertClone&&this.animate(_n,Ei),wr(Ei,"display",""),Gd=!1}}};function $V(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function dg(e,t,n,a,r,u,c,v){var d,g=e[Nl],_=g.options.onMove,b;return window.CustomEvent&&!Lf&&!oy?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=t,d.from=e,d.dragged=n,d.draggedRect=a,d.related=r||t,d.relatedRect=u||Ki(t),d.willInsertAfter=v,d.originalEvent=c,e.dispatchEvent(d),_&&(b=_.call(g,d,c)),b}function M1(e){e.draggable=!1}function BV(){Cw=!1}function UV(e,t,n){var a=Ki(Dv(n.el,0,n.options,!0)),r=yP(n.el,n.options,Mr),u=10;return t?e.clientX<r.left-u||e.clientY<a.top&&e.clientX<a.right:e.clientY<r.top-u||e.clientY<a.bottom&&e.clientX<a.left}function VV(e,t,n){var a=Ki(LE(n.el,n.options.draggable)),r=yP(n.el,n.options,Mr),u=10;return t?e.clientX>r.right+u||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>r.bottom+u||e.clientX>a.right&&e.clientY>a.top}function GV(e,t,n,a,r,u,c,v){var d=a?e.clientY:e.clientX,g=a?n.height:n.width,_=a?n.top:n.left,b=a?n.bottom:n.right,x=!1;if(!c){if(v&&Og<g*r){if(!Bm&&($m===1?d>_+g*u/2:d<b-g*u/2)&&(Bm=!0),Bm)x=!0;else if($m===1?d<_+Og:d>b-Og)return-$m}else if(d>_+g*(1-r)/2&&d<b-g*(1-r)/2)return WV(t)}return x=x||c,x&&(d<_+g*u/2||d>b-g*u/2)?d>_+g/2?1:-1:0}function WV(e){return Nu(_n)<Nu(e)?1:-1}function zV(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function HV(e){Yg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&Yg.push(a)}}function Sg(e){return setTimeout(e,0)}function Dw(e){return clearTimeout(e)}T_&&no(document,"touchmove",function(e){(yr.active||pv)&&e.cancelable&&e.preventDefault()});yr.utils={on:no,off:Zr,css:wr,find:pP,is:function(t,n){return!!Es(t,n,t,!1)},extend:MV,throttle:hP,closest:Es,toggleClass:nu,clone:mP,index:Nu,nextTick:Sg,cancelNextTick:Dw,detectDirection:_P,getChild:Dv,expando:Nl};yr.get=function(e){return e[Nl]};yr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(yr.utils=hc(hc({},yr.utils),a.utils)),iy.mount(a)})};yr.create=function(e,t){return new yr(e,t)};yr.version=AV;var Yi=[],Tm,jw,Iw=!1,k1,P1,Kg,Mm;function XV(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var a=n.originalEvent;this.sortable.nativeDraggable?no(document,"dragover",this._handleAutoScroll):this.options.supportPointer?no(document,"pointermove",this._handleFallbackAutoScroll):a.touches?no(document,"touchmove",this._handleFallbackAutoScroll):no(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var a=n.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?Zr(document,"dragover",this._handleAutoScroll):(Zr(document,"pointermove",this._handleFallbackAutoScroll),Zr(document,"touchmove",this._handleFallbackAutoScroll),Zr(document,"mousemove",this._handleFallbackAutoScroll)),oA(),xg(),kV()},nulling:function(){Kg=jw=Tm=Iw=Mm=k1=P1=null,Yi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,a){var r=this,u=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,v=document.elementFromPoint(u,c);if(Kg=n,a||this.options.forceAutoScrollFallback||oy||Lf||Im){R1(n,this.options,v,a);var d=Wd(v,!0);Iw&&(!Mm||u!==k1||c!==P1)&&(Mm&&oA(),Mm=setInterval(function(){var g=Wd(document.elementFromPoint(u,c),!0);g!==d&&(d=g,xg()),R1(n,r.options,g,a)},10),k1=u,P1=c)}else{if(!this.options.bubbleScroll||Wd(v,!0)===dc()){xg();return}R1(n,this.options,Wd(v,!1),!1)}}},Df(e,{pluginName:"scroll",initializeByDefault:!0})}function xg(){Yi.forEach(function(e){clearInterval(e.pid)}),Yi=[]}function oA(){clearInterval(Mm)}var R1=hP(function(e,t,n,a){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,u=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,v=t.scrollSpeed,d=dc(),g=!1,_;jw!==n&&(jw=n,xg(),Tm=t.scroll,_=t.scrollFn,Tm===!0&&(Tm=Wd(n,!0)));var b=0,x=Tm;do{var A=x,M=Ki(A),O=M.top,S=M.bottom,j=M.left,D=M.right,z=M.width,U=M.height,L=void 0,$=void 0,X=A.scrollWidth,Y=A.scrollHeight,H=wr(A),B=A.scrollLeft,G=A.scrollTop;A===d?(L=z<X&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),$=U<Y&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):(L=z<X&&(H.overflowX==="auto"||H.overflowX==="scroll"),$=U<Y&&(H.overflowY==="auto"||H.overflowY==="scroll"));var K=L&&(Math.abs(D-r)<=c&&B+z<X)-(Math.abs(j-r)<=c&&!!B),Q=$&&(Math.abs(S-u)<=c&&G+U<Y)-(Math.abs(O-u)<=c&&!!G);if(!Yi[b])for(var ce=0;ce<=b;ce++)Yi[ce]||(Yi[ce]={});(Yi[b].vx!=K||Yi[b].vy!=Q||Yi[b].el!==A)&&(Yi[b].el=A,Yi[b].vx=K,Yi[b].vy=Q,clearInterval(Yi[b].pid),(K!=0||Q!=0)&&(g=!0,Yi[b].pid=setInterval((function(){a&&this.layer===0&&yr.active._onTouchMove(Kg);var ue=Yi[this.layer].vy?Yi[this.layer].vy*v:0,de=Yi[this.layer].vx?Yi[this.layer].vx*v:0;typeof _=="function"&&_.call(yr.dragged.parentNode[Nl],de,ue,e,Kg,Yi[this.layer].el)!=="continue"||vP(Yi[this.layer].el,de,ue)}).bind({layer:b}),24))),b++}while(t.bubbleScroll&&x!==d&&(x=Wd(x,!1)));Iw=g}},30),OP=function(t){var n=t.originalEvent,a=t.putSortable,r=t.dragEl,u=t.activeSortable,c=t.dispatchSortableEvent,v=t.hideGhostForTarget,d=t.unhideGhostForTarget;if(n){var g=a||u;v();var _=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,b=document.elementFromPoint(_.clientX,_.clientY);d(),g&&!g.el.contains(b)&&(c("spill"),this.onSpill({dragEl:r,putSortable:a}))}};function FE(){}FE.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,a=t.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var r=Dv(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),a&&a.animateAll()},drop:OP};Df(FE,{pluginName:"revertOnSpill"});function $E(){}$E.prototype={onSpill:function(t){var n=t.dragEl,a=t.putSortable,r=a||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:OP};Df($E,{pluginName:"removeOnSpill"});yr.mount(new XV);yr.mount($E,FE);const qV={class:"dialog-footer"},YV=ir({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ue(),u=Ue(!1),c=Ue(!1),v=Ue({name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],default_value:""}),d=ch({name:[{required:!0,message:St("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:St("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:St("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=Ue(!1);Qw(g,A=>{A||(v.value={name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const _=A=>{A&&(v.value=Re.cloneDeep(A),c.value=!0),g.value=!0},b=()=>{g.value=!1,c.value=!1},x=async A=>{A&&await A.validate(M=>{M&&a("refresh",v.value)})};return t({open:_,close:b}),(A,M)=>{const O=ee("el-input"),S=ee("el-form-item"),j=ee("el-switch"),D=ee("el-form"),z=ee("el-button"),U=ee("el-dialog");return Ne(),gt(U,{title:c.value?A.$t("common.param.editParam"):A.$t("common.param.addParam"),modelValue:g.value,"onUpdate:modelValue":M[8]||(M[8]=L=>g.value=L),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:C(()=>[J("span",qV,[P(z,{onClick:M[6]||(M[6]=en(L=>g.value=!1,["prevent"]))},{default:C(()=>[ut(Ee(A.$t("common.cancel")),1)]),_:1}),P(z,{type:"primary",onClick:M[7]||(M[7]=L=>x(r.value)),loading:u.value},{default:C(()=>[ut(Ee(c.value?A.$t("common.save"):A.$t("common.add")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(D,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:d,model:v.value,"require-asterisk-position":"right"},{default:C(()=>[P(S,{label:A.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:C(()=>[P(O,{modelValue:v.value.variable,"onUpdate:modelValue":M[0]||(M[0]=L=>v.value.variable=L),placeholder:A.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:M[1]||(M[1]=L=>v.value.variable=v.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),P(S,{label:A.$t("dynamicsForm.paramForm.required.label"),onClick:M[3]||(M[3]=en(()=>{},["prevent"]))},{default:C(()=>[P(j,{size:"small",modelValue:v.value.isRequired,"onUpdate:modelValue":M[2]||(M[2]=L=>v.value.isRequired=L)},null,8,["modelValue"])]),_:1},8,["label"]),P(S,{label:A.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:v.value.isRequired,message:A.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:C(()=>[P(O,{modelValue:v.value.default_value,"onUpdate:modelValue":M[4]||(M[4]=L=>v.value.default_value=L),placeholder:A.$t("dynamicsForm.default.placeholder"),onBlur:M[5]||(M[5]=L=>v.value.name=v.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),KV={class:"flex-between mb-16"},ZV={class:"lighter"},JV=["title"],QV=["title"],eG={class:"mr-4"},tG=ir({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ue(),a=Ue(null),r=Ue(),u=Ue([]);function c(_,b){typeof b<"u"&&(a.value=b),r.value.open(_)}function v(_){u.value.splice(_,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function d(_){for(let x=0;x<u.value.length;x++)if(u.value[x].variable===_.variable&&a.value!==x){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+_.variable);return}const b=t.nodeModel.properties.user_input_field_list;for(let x=0;x<b.length;x++)if(b[x].field===_.variable){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+_.variable);return}a.value!==null?u.value.splice(a.value,1,_):u.value.push(_),a.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const b=n.value.$el.querySelector(".el-table__body-wrapper tbody");b&&yr.create(b,{animation:150,ghostClass:"ghost-row",onEnd:x=>{if(x.oldIndex===void 0||x.newIndex===void 0)return;const A=[...u.value],[M]=A.splice(x.oldIndex,1);A.splice(x.newIndex,0,M),u.value=A,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return oo(()=>{t.nodeModel.properties.api_input_field_list?u.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(_=>_.assignment_method==="api_input").forEach(_=>{u.value.push(_)}),Re.set(t.nodeModel.properties,"api_input_field_list",u)}),(_,b)=>{var U;const x=ee("Plus"),A=ee("el-icon"),M=ee("el-button"),O=ee("el-table-column"),S=ee("el-switch"),j=ee("AppIcon"),D=ee("el-tooltip"),z=ee("el-table");return Ne(),sn(Dr,null,[J("div",KV,[J("h5",ZV,Ee(_.$t("views.model.modelForm.title.apiParamPassing")),1),P(M,{link:"",type:"primary",onClick:b[0]||(b[0]=L=>c())},{default:C(()=>[P(A,{class:"mr-4"},{default:C(()=>[P(x)]),_:1}),ut(" "+Ee(_.$t("common.add")),1)]),_:1})]),((U=t.nodeModel.properties.api_input_field_list)==null?void 0:U.length)>0?(Ne(),gt(z,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:C(()=>[P(O,{prop:"variable",label:_.$t("dynamicsForm.paramForm.field.label")},{default:C(({row:L})=>[J("span",{class:"ellipsis-1",title:L.variable},Ee(L.variable),9,JV)]),_:1},8,["label"]),P(O,{prop:"default_value",label:_.$t("dynamicsForm.default.label")},{default:C(({row:L})=>[J("span",{class:"ellipsis-1",title:L.default_value},Ee(L.default_value),9,QV)]),_:1},8,["label"]),P(O,{label:_.$t("common.required")},{default:C(({row:L})=>[J("div",{onClick:b[1]||(b[1]=en(()=>{},["stop"]))},[P(S,{disabled:"",size:"small",modelValue:L.isRequired,"onUpdate:modelValue":$=>L.isRequired=$},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),P(O,{label:_.$t("common.operation"),align:"left",width:"90"},{default:C(({row:L,$index:$})=>[J("span",eG,[P(D,{effect:"dark",content:_.$t("common.modify"),placement:"top"},{default:C(()=>[P(M,{type:"primary",text:"",onClick:en(X=>c(L,$),["stop"])},{default:C(()=>[P(j,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),P(D,{effect:"dark",content:_.$t("common.delete"),placement:"top"},{default:C(()=>[P(M,{type:"primary",text:"",onClick:X=>v($)},{default:C(()=>[P(j,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Rn("",!0),P(YV,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:d},null,512)],64)}}}),nG={class:"dialog-footer"},rG=ir({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ue(),u=Ue(!1),c=Ue(!1),v=Ue(),d=(S,j)=>S.every(D=>oI.get(j,D,void 0)!==void 0),g=or(()=>{if(v.value){const S=v.value;switch(S.type){case"input":return d(["field","input_type","label","required","attrs"],v.value)?v.value:{attrs:S.attrs||{maxlength:200,minlength:0},field:S.field||S.variable,input_type:"TextInput",label:S.label||S.name,default_value:S.default_value,required:S.required!=null?S.required:S.isRequired};case"select":return d(["field","input_type","label","required","option_list"],v.value)?v.value:{attrs:S.attrs||{},field:S.field||S.variable,input_type:"SingleSelect",label:S.label||S.name,default_value:S.default_value,required:S.required!=null?S.required:S.isRequired,option_list:S.option_list?S.option_list:S.optionList.map(j=>({key:j,value:j}))};case"date":return d(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],v.value)?v.value:{field:S.field||S.variable,input_type:"DatePicker",label:S.label||S.name,default_value:S.default_value,required:S.required!=null?S.required:S.isRequired,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return v.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:200,minlength:0},show_default_value:!0}}),_=Ue(null),b=Ue([{label:St("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:St("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:St("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:St("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:St("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:St("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:St("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),x=Ue(!1),A=(S,j)=>{x.value=!0,S?(c.value=!0,v.value=Re.cloneDeep(S),_.value=j):v.value=null},M=()=>{x.value=!1,c.value=!1,_.value=null,v.value=null},O=async()=>{const S=r.value;S&&await S.validate().then(()=>{a("refresh",S==null?void 0:S.getData(),_.value),c.value=!1,v.value=null,_.value=null})};return t({open:A,close:M}),(S,j)=>{const D=ee("el-button"),z=ee("el-dialog");return Ne(),gt(z,{title:c.value?S.$t("common.param.editParam"):S.$t("common.param.addParam"),modelValue:x.value,"onUpdate:modelValue":j[2]||(j[2]=U=>x.value=U),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":M,"append-to-body":""},{footer:C(()=>[J("span",nG,[P(D,{onClick:en(M,["prevent"])},{default:C(()=>[ut(Ee(S.$t("common.cancel")),1)]),_:1}),P(D,{type:"primary",onClick:j[1]||(j[1]=U=>O()),loading:u.value},{default:C(()=>[ut(Ee(c.value?S.$t("common.save"):S.$t("common.add")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(rE,{modelValue:g.value,"onUpdate:modelValue":j[0]||(j[0]=U=>g.value=U),"label-position":"top","require-asterisk-position":"right",input_type_list:b.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),oG={class:"dialog-footer"},iG=ir({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ue(),u=Ue(!1),c=Ue({title:St("chat.userInput")}),v=ch({title:[{required:!0,message:St("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),d=Ue(!1),g=x=>{x&&(c.value=Re.cloneDeep(x)),d.value=!0},_=()=>{d.value=!1},b=async x=>{x&&await x.validate(A=>{A&&a("refresh",c.value)})};return t({open:g,close:_}),(x,A)=>{const M=ee("el-input"),O=ee("el-form-item"),S=ee("el-form"),j=ee("el-button"),D=ee("el-dialog");return Ne(),gt(D,{title:x.$t("common.setting"),modelValue:d.value,"onUpdate:modelValue":A[4]||(A[4]=z=>d.value=z),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:C(()=>[J("span",oG,[P(j,{onClick:A[2]||(A[2]=en(z=>d.value=!1,["prevent"]))},{default:C(()=>[ut(Ee(x.$t("common.cancel")),1)]),_:1}),P(j,{type:"primary",onClick:A[3]||(A[3]=z=>b(r.value)),loading:u.value},{default:C(()=>[ut(Ee(x.$t("common.save")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(S,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:c.value,"require-asterisk-position":"right"},{default:C(()=>[P(O,{label:x.$t("common.title"),prop:"title"},{default:C(()=>[P(M,{modelValue:c.value.title,"onUpdate:modelValue":A[0]||(A[0]=z=>c.value.title=z),maxlength:"64","show-word-limit":"",onBlur:A[1]||(A[1]=z=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),aG={class:"flex-between mb-16"},lG=["title"],uG={class:"ml-4"},sG=["title"],cG={key:0},fG=["title"],dG={key:1},pG=["title"],hG=["title"],vG={class:"mr-4"},mG=ir({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ue(),a=Ue(),r=Ue(),u=Ue([]),c=Ue({title:St("chat.userInput")});function v(M,O){a.value.open(M,O)}function d(){r.value.open(c.value)}function g(M){u.value.splice(M,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),A()}function _(M,O){for(let j=0;j<u.value.length;j++)if(u.value[j].field===M.field&&O!==j){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+M.field);return}const S=t.nodeModel.properties.api_input_field_list;for(let j=0;j<S.length;j++)if(S[j].variable===M.field){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+M.field);return}O!==null?u.value.splice(O,1,M):u.value.push(M),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),A()}function b(M){c.value=M,r.value.close()}const x=M=>{var O;if(M.input_type==="PasswordInput")return"******";if(M.default_value){const S=(O=M.option_list)==null?void 0:O.filter(j=>M.default_value.indexOf(j.value)>-1).map(j=>j.label).join(",");return S||M.default_value}if(M.default_value!==void 0)return M.default_value};function A(){if(!n.value)return;const O=n.value.$el.querySelector(".el-table__body-wrapper tbody");O&&yr.create(O,{animation:150,ghostClass:"ghost-row",onEnd:S=>{if(S.oldIndex===void 0||S.newIndex===void 0)return;const j=[...u.value],[D]=j.splice(S.oldIndex,1);j.splice(S.newIndex,0,D),u.value=j,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return oo(()=>{t.nodeModel.properties.user_input_field_list?u.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(M=>M.assignment_method==="user_input").forEach(M=>{u.value.push(M)}),u.value.forEach((M,O)=>{switch(M.label=M.label||M.name,M.field=M.field||M.variable,M.required=M.required||M.isRequired,M.type){case"input":M.input_type="TextInput";break;case"select":M.input_type="SingleSelect";break;case"date":M.input_type="DatePicker";break}}),Re.set(t.nodeModel.properties,"user_input_field_list",u),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),Re.set(t.nodeModel.properties,"user_input_config",c),A()}),(M,O)=>{var H;const S=ee("AppIcon"),j=ee("el-button"),D=ee("Plus"),z=ee("el-icon"),U=ee("el-table-column"),L=ee("el-tag"),$=ee("el-switch"),X=ee("el-tooltip"),Y=ee("el-table");return Ne(),sn(Dr,null,[J("div",aG,[J("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},Ee(c.value.title),9,lG),J("div",null,[P(j,{type:"primary",link:"",onClick:d},{default:C(()=>[P(S,{iconName:"app-setting"})]),_:1}),J("span",uG,[P(j,{link:"",type:"primary",onClick:O[0]||(O[0]=B=>v())},{default:C(()=>[P(z,{class:"mr-4"},{default:C(()=>[P(D)]),_:1}),ut(" "+Ee(M.$t("common.add")),1)]),_:1})])])]),((H=t.nodeModel.properties.user_input_field_list)==null?void 0:H.length)>0?(Ne(),gt(Y,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:C(()=>[P(U,{prop:"field",label:M.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:C(({row:B})=>[J("span",{title:B.field,class:"ellipsis-1"},Ee(B.field),9,sG)]),_:1},8,["label"]),P(U,{prop:"label",label:M.$t("dynamicsForm.paramForm.name.label")},{default:C(({row:B})=>[B.label&&B.label.input_type==="TooltipLabel"?(Ne(),sn("span",cG,[J("span",{title:B.label.label,class:"ellipsis-1"},Ee(B.label.label),9,fG)])):(Ne(),sn("span",dG,[J("span",{title:B.label,class:"ellipsis-1"},Ee(B.label),9,pG)]))]),_:1},8,["label"]),P(U,{label:M.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:C(({row:B})=>[B.input_type==="TextInput"?(Ne(),gt(L,{key:0,type:"info",class:"info-tag"},{default:C(()=>[ut(Ee(M.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):Rn("",!0),B.input_type==="PasswordInput"?(Ne(),gt(L,{key:1,type:"info",class:"info-tag"},{default:C(()=>[ut(Ee(M.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):Rn("",!0),B.input_type==="Slider"?(Ne(),gt(L,{key:2,type:"info",class:"info-tag"},{default:C(()=>[ut(Ee(M.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):Rn("",!0),B.input_type==="SwitchInput"?(Ne(),gt(L,{key:3,type:"info",class:"info-tag"},{default:C(()=>[ut(Ee(M.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):Rn("",!0),B.input_type==="SingleSelect"?(Ne(),gt(L,{key:4,type:"info",class:"info-tag"},{default:C(()=>[ut(Ee(M.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):Rn("",!0),B.input_type==="MultiSelect"?(Ne(),gt(L,{key:5,type:"info",class:"info-tag"},{default:C(()=>[ut(Ee(M.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):Rn("",!0),B.input_type==="RadioCard"?(Ne(),gt(L,{key:6,type:"info",class:"info-tag"},{default:C(()=>[ut(Ee(M.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):Rn("",!0),B.input_type==="DatePicker"?(Ne(),gt(L,{key:7,type:"info",class:"info-tag"},{default:C(()=>[ut(Ee(M.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):Rn("",!0)]),_:1},8,["label"]),P(U,{prop:"default_value",label:M.$t("dynamicsForm.default.label")},{default:C(({row:B})=>[J("span",{title:B.default_value,class:"ellipsis-1"},Ee(x(B)),9,hG)]),_:1},8,["label"]),P(U,{label:M.$t("common.required")},{default:C(({row:B})=>[J("div",{onClick:O[1]||(O[1]=en(()=>{},["stop"]))},[P($,{disabled:"",size:"small",modelValue:B.required,"onUpdate:modelValue":G=>B.required=G},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),P(U,{label:M.$t("common.operation"),align:"left",width:"90"},{default:C(({row:B,$index:G})=>[J("span",vG,[P(X,{effect:"dark",content:M.$t("common.modify"),placement:"top"},{default:C(()=>[P(j,{type:"primary",text:"",onClick:en(K=>v(B,G),["stop"])},{default:C(()=>[P(S,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),P(X,{effect:"dark",content:M.$t("common.delete"),placement:"top"},{default:C(()=>[P(j,{type:"primary",text:"",onClick:K=>g(G)},{default:C(()=>[P(S,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Rn("",!0),P(rG,{ref_key:"UserFieldFormDialogRef",ref:a,onRefresh:_},null,512),P(iG,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:b},null,512)],64)}}}),yG="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.8146C19.9934%202%2020.1647%202.07183%2020.29%202.19934L26.4756%208.49255C26.5982%208.61722%2026.6668%208.78505%2026.6668%208.95987V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.02637C20.1089%202.05793%2020.2089%202.11704%2020.2899%202.19936L26.4755%208.49256C26.5261%208.54408%2026.5675%208.60297%2026.5987%208.66668H21.5135C20.6776%208.66668%2020%207.98906%2020%207.15317V2.02637Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M10.7636%2013.5757H20.8727C20.9932%2013.5757%2021.0909%2013.6734%2021.0909%2013.7939V14.8121C21.0909%2014.9326%2020.9932%2015.0303%2020.8727%2015.0303H10.7636C10.6431%2015.0303%2010.5454%2014.9326%2010.5454%2014.8121V13.7939C10.5454%2013.6734%2010.6431%2013.5757%2010.7636%2013.5757ZM10.7636%2017.9394H20.8727C20.9932%2017.9394%2021.0909%2018.0371%2021.0909%2018.1576V19.1757C21.0909%2019.2962%2020.9932%2019.3939%2020.8727%2019.3939H10.7636C10.6431%2019.3939%2010.5454%2019.2962%2010.5454%2019.1757V18.1576C10.5454%2018.0371%2010.6431%2017.9394%2010.7636%2017.9394ZM10.7636%2022.303H16.1454C16.2659%2022.303%2016.3636%2022.4007%2016.3636%2022.5212V23.5394C16.3636%2023.6599%2016.2659%2023.7576%2016.1454%2023.7576H10.7636C10.6431%2023.7576%2010.5454%2023.6599%2010.5454%2023.5394V22.5212C10.5454%2022.4007%2010.6431%2022.303%2010.7636%2022.303Z'%20fill='white'/%3e%3c/svg%3e",gG="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%2314C0FF'/%3e%3cpath%20d='M20%202.05988C20.072%202.09264%2020.1383%202.13825%2020.1953%202.19526L26.4714%208.4714C26.5284%208.52841%2026.574%208.59467%2026.6068%208.66666H21.3333C20.597%208.66666%2020%208.06971%2020%207.33333V2.05988Z'%20fill='%2311A3D9'/%3e%3cpath%20d='M11.3335%2016C12.4381%2016%2013.3335%2015.1046%2013.3335%2014C13.3335%2012.8954%2012.4381%2012%2011.3335%2012C10.2289%2012%209.3335%2012.8954%209.3335%2014C9.3335%2015.1046%2010.2289%2016%2011.3335%2016Z'%20fill='white'/%3e%3cpath%20d='M22.2785%2014.9317C22.4218%2014.7884%2022.6668%2014.8899%2022.6668%2015.0925V24.0645C22.6668%2024.1901%2022.565%2024.2919%2022.4394%2024.2919H13.4674L13.4587%2024.2918H9.56142C9.35877%2024.2918%209.25728%2024.0468%209.40058%2023.9035L14.366%2018.938C14.4549%2018.8492%2014.5989%2018.8492%2014.6877%2018.938L16.48%2020.7302L22.2785%2014.9317Z'%20fill='white'/%3e%3c/svg%3e",_G="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.05994C20.072%202.0927%2020.1383%202.13831%2020.1953%202.19532L26.4714%208.47146C26.5284%208.52847%2026.574%208.59473%2026.6068%208.66672H21.3333C20.597%208.66672%2020%208.06977%2020%207.33339V2.05994Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M19.976%2012.8794C20.254%2012.9447%2020.4595%2013.1796%2020.4872%2013.4638L20.6106%2014.7297C20.6546%2015.1805%2020.2459%2015.5429%2019.8037%2015.4455L16.7344%2014.7691C16.5577%2014.7302%2016.3944%2014.8747%2016.4116%2015.0548L17.1297%2022.5884C17.1297%2022.7046%2017.1151%2022.7812%2017.0891%2022.8249C17.0254%2024.3752%2015.7484%2025.6124%2014.1825%2025.6124C12.5759%2025.6124%2011.2734%2024.31%2011.2734%2022.7033C11.2734%2021.0967%2012.5759%2019.7942%2014.1825%2019.7942C14.8467%2019.7942%2015.4589%2020.0168%2015.9485%2020.3914L15.274%2012.6749C15.2345%2012.2228%2015.6485%2011.8642%2016.0904%2011.9678L19.976%2012.8794Z'%20fill='white'/%3e%3c/svg%3e",bG="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%202.5C4%201.94772%204.44772%201.5%205%201.5H14.7929C14.9255%201.5%2015.0527%201.55268%2015.1464%201.64645L19.8536%206.35355C19.9473%206.44732%2020%206.5745%2020%206.70711V21.5C20%2022.0523%2019.5523%2022.5%2019%2022.5H5C4.44772%2022.5%204%2022.0523%204%2021.5V2.5Z'%20fill='%238F959E'/%3e%3cpath%20d='M15%201.54492C15.054%201.56949%2015.1037%201.6037%2015.1464%201.64646L19.8536%206.35357C19.8963%206.39632%2019.9305%206.44602%2019.9551%206.50001H16C15.4477%206.50001%2015%206.0523%2015%205.50001V1.54492Z'%20fill='%23646A73'/%3e%3cpath%20d='M14.288%209.86441C13.7422%209.34739%2013.026%209.09082%2012.1353%209.09082C11.1347%209.09082%2010.3505%209.41162%209.78235%2010.065C9.30108%2010.6265%209.04179%2011.1646%209.00471%2012.013C9.00384%2012.033%209.00309%2012.0697%209.00247%2012.1122C9.00043%2012.2508%209.11287%2012.3635%209.25147%2012.3635H9.84253C9.98%2012.3635%2010.0914%2012.2525%2010.0936%2012.1151C10.0943%2012.0737%2010.0951%2012.038%2010.0961%2012.0189C10.1251%2011.4328%2010.278%2011.1262%2010.5508%2010.7851C10.8953%2010.3259%2011.4006%2010.0999%2012.0943%2010.0999C12.7134%2010.0999%2013.1776%2010.2578%2013.4979%2010.5782C13.8033%2010.8963%2013.9625%2011.3294%2013.9625%2011.8726C13.9625%2012.2435%2013.8281%2012.5967%2013.5549%2012.948C13.4678%2013.0568%2013.3425%2013.1862%2012.9388%2013.5899C12.3012%2014.1474%2011.9073%2014.601%2011.6993%2015.0468C11.5282%2015.3888%2011.441%2015.7775%2011.441%2016.1954V16.4772C11.441%2016.6153%2011.5529%2016.7272%2011.691%2016.7272H12.2956C12.4336%2016.7272%2012.5456%2016.6153%2012.5456%2016.4772V16.1954C12.5456%2015.8413%2012.6327%2015.5237%2012.8133%2015.2141C12.9486%2014.9841%2013.1223%2014.8038%2013.4251%2014.5389C14.0321%2013.9897%2014.3689%2013.6625%2014.5198%2013.4705C14.8821%2012.9923%2015.0671%2012.4446%2015.0671%2011.8454C15.0671%2011.0185%2014.8075%2010.355%2014.288%209.86441ZM11.7046%2017.8181C11.5666%2017.8181%2011.4546%2017.93%2011.4546%2018.0681V18.659C11.4546%2018.7971%2011.5666%2018.909%2011.7046%2018.909H12.2956C12.4336%2018.909%2012.5456%2018.7971%2012.5456%2018.659V18.0681C12.5456%2017.93%2012.4336%2017.8181%2012.2956%2017.8181H11.7046Z'%20fill='white'/%3e%3c/svg%3e",wG={class:"flex-between"},EG={class:"flex align-center"},OG={class:"line-height-22 mt-4"},SG={class:"flex-between"},xG={class:"flex align-center"},AG={class:"line-height-22 mt-4"},TG={class:"flex-between"},MG={class:"flex align-center"},kG={class:"line-height-22 mt-4"},PG={class:"flex-between"},RG={class:"flex align-center"},NG={class:"line-height-22 mt-4"},CG={class:"dialog-footer"},DG=ir({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=e,u=Ue(!1),c=Ue(!1),v=Ue(""),d=Ue(!1),g=Ue(),_=Ue(),b=["TXT","MD","DOCX","HTML","CSV","XLSX","XLS","PDF"],x=["JPG","JPEG","PNG","GIF"],A=["MP3","WAV","OGG","ACC","M4A"],M=Ue({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["PPT","DOC"]});function O(L){u.value=!0,Nv(()=>{M.value={...M.value,...L}})}function S(){u.value=!1}const j=L=>{M.value.otherExtensions=M.value.otherExtensions.filter($=>$!==L)},D=()=>{c.value=!0,Nv(()=>{_.value.input.focus()})},z=()=>{if(v.value){if(v.value=v.value.toUpperCase(),M.value.otherExtensions.includes(v.value)||b.includes(v.value)||x.includes(v.value)||A.includes(v.value)){c.value=!1,v.value="",aI(St("common.fileUpload.existingExtensionsTip"));return}M.value.otherExtensions.push(v.value)}c.value=!1,v.value=""};async function U(){const L=g.value;L&&await L.validate().then(()=>{const $=Re.cloneDeep(M.value);a("refresh",$),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),u.value=!1})}return t({open:O}),(L,$)=>{const X=ee("el-slider"),Y=ee("el-form-item"),H=ee("el-text"),B=ee("el-checkbox"),G=ee("el-card"),K=ee("el-tag"),Q=ee("el-input"),ce=ee("el-button"),ue=ee("el-space"),de=ee("el-form"),ye=ee("el-dialog");return Ne(),gt(ye,{title:L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:u.value,"onUpdate:modelValue":$[16]||($[16]=we=>u.value=we),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":S,"append-to-body":"",width:"800"},{footer:C(()=>[J("span",CG,[P(ce,{onClick:en(S,["prevent"])},{default:C(()=>[ut(Ee(L.$t("common.cancel")),1)]),_:1}),P(ce,{type:"primary",onClick:$[15]||($[15]=we=>U()),loading:d.value},{default:C(()=>[ut(Ee(L.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(de,{"label-position":"top",ref_key:"fieldFormRef",ref:g,model:M.value,"require-asterisk-position":"right"},{default:C(()=>[P(Y,{label:L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:C(()=>[P(X,{modelValue:M.value.maxFiles,"onUpdate:modelValue":$[0]||($[0]=we=>M.value.maxFiles=we),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),P(Y,{label:L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:C(()=>[P(X,{modelValue:M.value.fileLimit,"onUpdate:modelValue":$[1]||($[1]=we=>M.value.fileLimit=we),"show-input":"","show-input-controls":!1,min:1,max:1e3},null,8,["modelValue"])]),_:1},8,["label"]),P(Y,{label:L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:C(()=>[P(G,{shadow:"hover",class:Du(["card-checkbox cursor w-full mb-8",M.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:$[4]||($[4]=en(we=>M.value.document=!M.value.document,["stop"]))},{default:C(()=>[J("div",wG,[J("div",EG,[$[17]||($[17]=J("img",{class:"mr-12",src:yG,alt:""},null,-1)),J("div",null,[J("p",OG,[ut(Ee(L.$t("common.fileUpload.document"))+" ",1),P(H,{class:"color-secondary"},{default:C(()=>[ut(Ee(L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})]),J("p",null,Ee(b.join("、")),1)])]),P(B,{modelValue:M.value.document,"onUpdate:modelValue":$[2]||($[2]=we=>M.value.document=we),onChange:$[3]||($[3]=we=>M.value.document=!M.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),P(G,{shadow:"hover",class:Du(["card-checkbox cursor w-full mb-8",M.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:$[7]||($[7]=en(we=>M.value.image=!M.value.image,["stop"]))},{default:C(()=>[J("div",SG,[J("div",xG,[$[18]||($[18]=J("img",{class:"mr-12",src:gG,alt:""},null,-1)),J("div",null,[J("p",AG,[ut(Ee(L.$t("common.fileUpload.image"))+" ",1),P(H,{class:"color-secondary"},{default:C(()=>[ut(Ee(L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})]),J("p",null,Ee(x.join("、")),1)])]),P(B,{modelValue:M.value.image,"onUpdate:modelValue":$[5]||($[5]=we=>M.value.image=we),onChange:$[6]||($[6]=we=>M.value.image=!M.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),P(G,{shadow:"hover",class:Du(["card-checkbox cursor w-full mb-8",M.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:$[10]||($[10]=en(we=>M.value.audio=!M.value.audio,["stop"]))},{default:C(()=>[J("div",TG,[J("div",MG,[$[19]||($[19]=J("img",{class:"mr-12",src:_G,alt:""},null,-1)),J("div",null,[J("p",kG,[ut(Ee(L.$t("common.fileUpload.audio"))+" ",1),P(H,{class:"color-secondary"},{default:C(()=>[ut(Ee(L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})]),J("p",null,Ee(A.join("、")),1)])]),P(B,{modelValue:M.value.audio,"onUpdate:modelValue":$[8]||($[8]=we=>M.value.audio=we),onChange:$[9]||($[9]=we=>M.value.audio=!M.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"]),P(G,{shadow:"hover",class:Du(["card-checkbox cursor w-full mb-8",M.value.other?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:$[14]||($[14]=en(we=>M.value.other=!M.value.other,["stop"]))},{default:C(()=>[J("div",PG,[J("div",RG,[$[20]||($[20]=J("img",{class:"mr-12",width:32,src:bG,alt:""},null,-1)),J("div",null,[J("p",NG,[ut(Ee(L.$t("common.fileUpload.other"))+" ",1),P(H,{class:"color-secondary"},{default:C(()=>[ut(Ee(L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.otherText")),1)]),_:1})]),P(ue,{wrap:"",size:2,class:"mt-4"},{default:C(()=>[(Ne(!0),sn(Dr,null,Oo(M.value.otherExtensions,we=>(Ne(),gt(K,{key:we,closable:"","disable-transitions":!1,onClose:me=>j(we),type:"info",class:"mr-4",effect:"plain",style:{"--el-tag-border-radius":"4px","--el-tag-border-color":"var(--el-border-color)"}},{default:C(()=>[ut(Ee(we),1)]),_:2},1032,["onClose"]))),128)),c.value?(Ne(),gt(Q,{key:0,ref_key:"InputRef",ref:_,modelValue:v.value,"onUpdate:modelValue":$[11]||($[11]=we=>v.value=we),size:"small",onKeyup:iI(z,["enter"]),onBlur:z},null,8,["modelValue"])):(Ne(),gt(ce,{key:1,class:"button-new-tag",size:"small",onClick:en(D,["stop"])},{default:C(()=>[ut(" + "+Ee(L.$t("common.fileUpload.addExtensions")),1)]),_:1}))]),_:1})])]),P(B,{modelValue:M.value.other,"onUpdate:modelValue":$[12]||($[12]=we=>M.value.other=we),onChange:$[13]||($[13]=we=>M.value.other=!M.value.other)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),jG={class:"dialog-footer"},IG=ir({__name:"ChatFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ue(),u=Ue(!1),c=Ue(!1),v=Ue(null),d=Ue({field:"",label:""}),g=ch({label:[{required:!0,message:St("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:St("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:St("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),_=Ue(!1),b=(M,O)=>{M&&(d.value=Re.cloneDeep(M),c.value=!0,v.value=O),_.value=!0},x=()=>{_.value=!1,c.value=!1,v.value=null,d.value={field:"",label:""}},A=async M=>{M&&await M.validate(O=>{O&&a("refresh",d.value,v.value)})};return t({open:b,close:x}),(M,O)=>{const S=ee("el-input"),j=ee("el-form-item"),D=ee("el-form"),z=ee("el-button"),U=ee("el-dialog");return Ne(),gt(U,{title:c.value?M.$t("common.param.editParam"):M.$t("common.param.addParam"),modelValue:_.value,"onUpdate:modelValue":O[3]||(O[3]=L=>_.value=L),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:C(()=>[J("span",jG,[P(z,{onClick:en(x,["prevent"])},{default:C(()=>[ut(Ee(M.$t("common.cancel")),1)]),_:1}),P(z,{type:"primary",onClick:O[2]||(O[2]=L=>A(r.value)),loading:u.value},{default:C(()=>[ut(Ee(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(D,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:d.value,"require-asterisk-position":"right"},{default:C(()=>[P(j,{label:M.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:g.field},{default:C(()=>[P(S,{modelValue:d.value.field,"onUpdate:modelValue":O[0]||(O[0]=L=>d.value.field=L),maxlength:64,placeholder:M.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),P(j,{label:M.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:g.label},{default:C(()=>[P(S,{modelValue:d.value.label,"onUpdate:modelValue":O[1]||(O[1]=L=>d.value.label=L),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),LG={class:"flex-between mb-16"},FG={class:"break-all ellipsis lighter",style:{"max-width":"80%"}},$G={class:"ml-4"},BG=["title"],UG=["title"],VG={class:"mr-4"},GG=ir({__name:"ChatFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ue(),a=Ue(),r=Ue([]);function u(d,g){a.value.open(d,g)}function c(d){r.value.splice(d,1),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}function v(d,g){for(let _=0;_<r.value.length;_++)if(r.value[_].field===d.field&&g!==_){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+d.field);return}[void 0,null].includes(g)?r.value.push(d):r.value.splice(g,1,d),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}return oo(()=>{t.nodeModel.properties.chat_input_field_list&&(r.value=Re.cloneDeep(t.nodeModel.properties.chat_input_field_list)),Re.set(t.nodeModel.properties,"chat_input_field_list",r)}),(d,g)=>{var O;const _=ee("AppIcon"),b=ee("el-button"),x=ee("el-table-column"),A=ee("el-tooltip"),M=ee("el-table");return Ne(),sn(Dr,null,[J("div",LG,[J("h5",FG,Ee(d.$t("views.applicationWorkflow.variable.chat")),1),J("div",null,[J("span",$G,[P(b,{link:"",type:"primary",onClick:g[0]||(g[0]=S=>u())},{default:C(()=>[P(_,{iconName:"app-add-outlined",class:"mr-4"}),ut(" "+Ee(d.$t("common.add")),1)]),_:1})])])]),((O=t.nodeModel.properties.chat_input_field_list)==null?void 0:O.length)>0?(Ne(),gt(M,{key:0,data:t.nodeModel.properties.chat_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:C(()=>[P(x,{prop:"field",label:d.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:C(({row:S})=>[J("span",{title:S.field,class:"ellipsis-1"},Ee(S.field),9,BG)]),_:1},8,["label"]),P(x,{prop:"label",label:d.$t("dynamicsForm.paramForm.name.label")},{default:C(({row:S})=>[J("span",null,[J("span",{title:S.label,class:"ellipsis-1"},Ee(S.label),9,UG)])]),_:1},8,["label"]),P(x,{label:d.$t("common.operation"),align:"left",width:"90"},{default:C(({row:S,$index:j})=>[J("span",VG,[P(A,{effect:"dark",content:d.$t("common.modify"),placement:"top"},{default:C(()=>[P(b,{type:"primary",text:"",onClick:en(D=>u(S,j),["stop"])},{default:C(()=>[P(_,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),P(A,{effect:"dark",content:d.$t("common.delete"),placement:"top"},{default:C(()=>[P(b,{type:"primary",text:"",onClick:D=>c(j)},{default:C(()=>[P(_,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Rn("",!0),P(IG,{ref_key:"ChatFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),WG={class:"flex-between"},zG={class:"flex align-center"},HG={class:"mr-4"},XG={class:"flex-between"},qG={class:"mr-4"},YG={class:"flex"},KG={class:"flex-between"},ZG={class:"mr-4"},JG={class:"flex"},QG={class:"w-full"},eW={class:"flex-between w-full"},tW=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ue(null),v=Ue(null),d=Ue(),g=Ue(),_=Ue(),b=Ue(),x={name:"",desc:"",prologue:St("views.application.form.defaultPrologue")},A=Q=>Q.ctrlKey===!0?(Q.preventDefault(),!0):(Q.stopPropagation(),!0);function M(Q){Re.set(u.nodeModel.properties.nodeData,"prologue",Q)}const O=or({get:()=>(u.nodeModel.properties.nodeData||Re.set(u.nodeModel.properties,"nodeData",x),u.nodeModel.properties.nodeData),set:Q=>{Re.set(u.nodeModel.properties,"nodeData",Q)}}),S=Ue(),j=()=>{var Q;return O.value.ttsModelEnable&&!O.value.ttsModelId&&O.value.ttsType==="TTS"?Promise.reject({node:u.nodeModel,errMessage:St("views.application.form.voicePlay.requiredMessage")}):O.value.sttModelEnable&&!O.value.sttModelId?Promise.reject({node:u.nodeModel,errMessage:St("views.application.form.voiceInput.requiredMessage")}):(Q=S.value)==null?void 0:Q.validate().catch(ce=>Promise.reject({node:u.nodeModel,errMessage:ce}))},D=t();function z(){var ce;const Q=r.value==="systemManage"?{modelType:"STT",workspaceId:(ce=D.value)==null?void 0:ce.workspaceId}:{modelType:"STT"};Eo({type:"model",systemType:r.value}).getSelectModelList(Q).then(ue=>{c.value=Re.groupBy(ue==null?void 0:ue.data,"provider")})}function U(){var ce;const Q=r.value==="systemManage"?{modelType:"TTS",workspaceId:(ce=D.value)==null?void 0:ce.workspaceId}:{modelType:"TTS"};Eo({type:"model",systemType:r.value}).getSelectModelList(Q).then(ue=>{v.value=Re.groupBy(ue==null?void 0:ue.data,"provider")})}function L(){Nv(()=>{var Q;O.value.ttsModelId?(Q=d.value)==null||Q.reset_default(O.value.ttsModelId,a):H({})})}function $(){O.value.ttsModelEnable||(O.value.ttsModelId="",O.value.ttsType="BROWSER")}function X(){O.value.sttModelEnable||(O.value.sttModelId="")}const Y=()=>{var ce;const Q=O.value.ttsModelId;if(!Q){Xd(St("views.application.form.voicePlay.requiredMessage"));return}(ce=d.value)==null||ce.open(Q,a,O.value.ttsModelParamsSetting)},H=Q=>{O.value.ttsModelParamsSetting=Q},B=()=>{const Q={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["ppt","doc"]};O.value.fileUploadEnable&&(O.value.fileUploadSetting=O.value.fileUploadSetting||Q),u.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},G=()=>{var Q;(Q=b.value)==null||Q.open(O.value.fileUploadSetting)},K=Q=>{O.value.fileUploadSetting=Q};return oo(()=>{Re.set(u.nodeModel,"validate",j),u.nodeModel.properties.nodeData.ttsType||Re.set(u.nodeModel.properties.nodeData,"ttsType","BROWSER"),U(),z()}),(Q,ce)=>{const ue=ee("el-input"),de=ee("el-form-item"),ye=ee("el-tooltip"),we=ee("el-button"),me=ee("el-switch"),He=ee("el-checkbox"),tt=ee("el-radio"),Ot=ee("el-radio-group"),Je=ee("Operation"),Yt=ee("el-icon"),Kt=ee("el-form");return Ne(),gt(Jo,{nodeModel:Q.nodeModel},{default:C(()=>[P(Kt,{onSubmit:ce[13]||(ce[13]=en(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:S},{default:C(()=>[P(de,{label:Q.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:ar(St)("views.application.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:C(()=>[P(ue,{modelValue:O.value.name,"onUpdate:modelValue":ce[0]||(ce[0]=Ft=>O.value.name=Ft),maxlength:"64",placeholder:ar(St)("views.application.form.appName.placeholder"),"show-word-limit":"",onBlur:ce[1]||(ce[1]=Ft=>{var An;return O.value.name=(An=O.value.name)==null?void 0:An.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),P(de,{label:Q.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:C(()=>[P(ue,{modelValue:O.value.desc,"onUpdate:modelValue":ce[2]||(ce[2]=Ft=>O.value.desc=Ft),placeholder:Q.$t("views.application.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),P(de,{label:Q.$t("views.application.form.prologue")},{default:C(()=>[P(ou,{onWheel:A,title:Q.$t("views.application.form.prologue"),modelValue:O.value.prologue,"onUpdate:modelValue":ce[3]||(ce[3]=Ft=>O.value.prologue=Ft),style:{height:"150px"},onSubmitDialog:M},null,8,["title","modelValue"])]),_:1},8,["label"]),P(de,null,{label:C(()=>[J("div",WG,[J("div",zG,[J("span",HG,Ee(Q.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),P(ye,{effect:"dark",content:Q.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),J("div",null,[O.value.fileUploadEnable?(Ne(),gt(we,{key:0,type:"primary",link:"",onClick:G,class:"mr-4"},{default:C(()=>[P(Cr,{iconName:"app-setting",class:"mr-4"})]),_:1})):Rn("",!0),P(me,{size:"small",modelValue:O.value.fileUploadEnable,"onUpdate:modelValue":ce[4]||(ce[4]=Ft=>O.value.fileUploadEnable=Ft),onChange:B},null,8,["modelValue"])])])]),_:1}),P(mG,{ref_key:"UserInputFieldTableFef",ref:g,"node-model":Q.nodeModel},null,8,["node-model"]),P(tG,{ref_key:"ApiInputFieldTableFef",ref:_,"node-model":Q.nodeModel},null,8,["node-model"]),P(GG,{ref:"ChatFieldTeble","node-model":Q.nodeModel},null,8,["node-model"]),P(de,null,{label:C(()=>[J("div",XG,[J("span",qG,Ee(Q.$t("views.application.form.voiceInput.label")),1),J("div",YG,[O.value.sttModelEnable?(Ne(),gt(He,{key:0,modelValue:O.value.sttAutoSend,"onUpdate:modelValue":ce[5]||(ce[5]=Ft=>O.value.sttAutoSend=Ft)},{default:C(()=>[ut(Ee(Q.$t("views.application.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):Rn("",!0),P(me,{class:"ml-8",size:"small",modelValue:O.value.sttModelEnable,"onUpdate:modelValue":ce[6]||(ce[6]=Ft=>O.value.sttModelEnable=Ft),onChange:X},null,8,["modelValue"])])])]),default:C(()=>[Ra(P(Cf,{onWheel:A,modelValue:O.value.sttModelId,"onUpdate:modelValue":ce[7]||(ce[7]=Ft=>O.value.sttModelId=Ft),placeholder:Q.$t("views.application.form.voiceInput.placeholder"),options:c.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"]),[[th,O.value.sttModelEnable]])]),_:1}),P(de,null,{label:C(()=>[J("div",KG,[J("span",ZG,Ee(Q.$t("views.application.form.voicePlay.label")),1),J("div",JG,[O.value.ttsModelEnable?(Ne(),gt(He,{key:0,modelValue:O.value.ttsAutoplay,"onUpdate:modelValue":ce[8]||(ce[8]=Ft=>O.value.ttsAutoplay=Ft)},{default:C(()=>[ut(Ee(Q.$t("views.application.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):Rn("",!0),P(me,{class:"ml-8",size:"small",modelValue:O.value.ttsModelEnable,"onUpdate:modelValue":ce[9]||(ce[9]=Ft=>O.value.ttsModelEnable=Ft),onChange:$},null,8,["modelValue"])])])]),default:C(()=>[J("div",QG,[Ra(P(Ot,{modelValue:O.value.ttsType,"onUpdate:modelValue":ce[10]||(ce[10]=Ft=>O.value.ttsType=Ft)},{default:C(()=>[P(tt,{label:Q.$t("views.application.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),P(tt,{label:Q.$t("views.application.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[th,O.value.ttsModelEnable]])]),J("div",eW,[O.value.ttsType==="TTS"&&O.value.ttsModelEnable?(Ne(),gt(Cf,{key:0,onWheel:A,modelValue:O.value.ttsModelId,"onUpdate:modelValue":ce[11]||(ce[11]=Ft=>O.value.ttsModelId=Ft),placeholder:Q.$t("views.application.form.voicePlay.placeholder"),options:v.value,onChange:ce[12]||(ce[12]=Ft=>L()),showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])):Rn("",!0),O.value.ttsType==="TTS"&&O.value.ttsModelEnable?(Ne(),gt(we,{key:1,onClick:Y,disabled:!O.value.ttsModelId,class:"ml-8"},{default:C(()=>[P(Yt,null,{default:C(()=>[P(Yt,null,{default:C(()=>[P(Je)]),_:1})]),_:1})]),_:1},8,["disabled"])):Rn("",!0)])]),_:1})]),_:1},8,["model"]),P(iM,{ref_key:"TTSModeParamSettingDialogRef",ref:d,onRefresh:H},null,512),P(DG,{ref_key:"FileUploadSettingDialogRef",ref:b,"node-model":Q.nodeModel,onRefresh:K},null,8,["node-model"])]),_:1},8,["nodeModel"])}}}),nW=Zd(tW,[["__scopeId","data-v-9868f90e"]]);class rW extends Qo{constructor(t){super(t,nW)}}class oW extends ei{constructor(t,n){super(t,n)}get_width(){return 600}}const iW={type:"base-node",model:oW,view:rW},aW=Object.freeze(Object.defineProperty({__proto__:null,default:iW},Symbol.toStringTag,{value:"Module"})),lW={class:"handle flex-between lighter"},uW={class:"flex align-center"},sW={key:0,class:"info"},cW={key:0,class:"mt-8"},fW=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:fl(),type:"IF",condition:"and"},{conditions:[],id:fl(),type:"ELSE",condition:"and"}]},a=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),r=(O,S,j)=>{const z=Re.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]).map(U=>U.id===S.id?{...U,height:O.height,index:j}:U);Re.set(t.nodeModel.properties,"branch_condition_list",z),b(t.nodeModel.properties.nodeData.branch,!0)},u=or({get:()=>(t.nodeModel.properties.nodeData||(Re.set(t.nodeModel.properties,"nodeData",n),b(n.branch,!0)),t.nodeModel.properties.nodeData),set:O=>{Re.set(t.nodeModel.properties,"nodeData",O)}}),c=Ue(),v=Ue(),d=()=>{var S;const O=[(S=c.value)==null?void 0:S.validate(),...v.value.map(j=>j.validate())];return Promise.all(O).catch(j=>Promise.reject({node:t.nodeModel,errMessage:j}))};function g(O){const{oldIndex:S,newIndex:j}=O;if(S===void 0||j===void 0)return;const D=Re.cloneDeep(t.nodeModel.properties.nodeData.branch);if(S===D.length-1||j===D.length-1)return;const z={...D[S],type:D[j].type,id:D[j].id},U={...D[j],type:D[S].type,id:D[S].id};D[j]=z,D[S]=U,Re.set(t.nodeModel.properties.nodeData,"branch",D)}function _(){const O=Re.cloneDeep(t.nodeModel.properties.nodeData.branch),S={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(O.length-1),id:fl(),condition:"and"};O.splice(O.length-1,0,S),b(O,!0),Re.set(t.nodeModel.properties.nodeData,"branch",O)}function b(O,S){const j=Re.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]),D=O.map((z,U)=>{const L=j.find($=>$.id===z.id);if(L)return{index:U,height:L.height,id:z.id};if(S)return{index:U,height:12,id:z.id}}).filter(z=>z);Re.set(t.nodeModel.properties,"branch_condition_list",D),t.nodeModel.refreshBranch()}function x(O){const S=Re.cloneDeep(t.nodeModel.properties.nodeData.branch);S[O].conditions.push({field:[],compare:"",value:""}),Re.set(t.nodeModel.properties.nodeData,"branch",S)}function A(O,S){const j=Re.cloneDeep(t.nodeModel.properties.nodeData.branch);if(j[O].conditions.splice(S,1),j[O].conditions.length===0){const z=j.splice(O,1).map(U=>t.nodeModel.id+"_"+U.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(U=>z.includes(U.sourceAnchorId)).map(U=>U.id)),b(j,!1),j.forEach((U,L)=>{U.type==="ELSE IF "+(L+1)&&(U.type="ELSE IF "+L)})}Re.set(t.nodeModel.properties.nodeData,"branch",j)}function M(O,S,j){if(["is_null","is_not_null","is_true","is_not_true"].includes(O)){const D=Re.cloneDeep(t.nodeModel.properties.nodeData.branch);D[S].conditions[j].value=1,Re.set(t.nodeModel.properties.nodeData,"branch",D)}}return oo(()=>{Re.set(t.nodeModel,"validate",d)}),(O,S)=>{const j=ee("el-option"),D=ee("el-select"),z=ee("el-form-item"),U=ee("el-col"),L=ee("el-input"),$=ee("AppIcon"),X=ee("el-button"),Y=ee("el-row"),H=ee("Plus"),B=ee("el-icon"),G=ee("el-card"),K=ee("el-form"),Q=Hd("resize");return Ne(),gt(Jo,{nodeModel:O.nodeModel},{default:C(()=>[P(K,{model:u.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:S[0]||(S[0]=en(()=>{},["prevent"]))},{default:C(()=>[P(ar(JI),{ref:"el",modelValue:u.value.branch,disabled:u.value.branch===2,handle:".handle",animation:150,ghostClass:"ghost",onEnd:g},{default:C(()=>[(Ne(!0),sn(Dr,null,Oo(u.value.branch,(ce,ue)=>Ra((Ne(),gt(G,{key:ce.id,shadow:"never",class:Du(["drag-card card-never mb-8",{"no-drag":ue===u.value.branch.length-1||u.value.branch.length===2}]),style:{"--el-card-padding":"12px"}},{default:C(()=>[J("div",lW,[J("span",uW,[S[1]||(S[1]=J("img",{src:QI,alt:"",height:"15",class:"handle-img mr-4"},null,-1)),ut(" "+Ee(ce.type),1)]),ce.conditions.length>1?(Ne(),sn("div",sW,[J("span",null,Ee(O.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),P(D,{teleported:!1,modelValue:ce.condition,"onUpdate:modelValue":de=>ce.condition=de,size:"small",style:{width:"60px",margin:"0 8px"}},{default:C(()=>[P(j,{label:O.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),P(j,{label:O.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),J("span",null,Ee(O.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):Rn("",!0)]),ue!==u.value.branch.length-1?(Ne(),sn("div",cW,[(Ne(!0),sn(Dr,null,Oo(ce.conditions,(de,ye)=>(Ne(),gt(Y,{key:ye,gutter:8},{default:C(()=>[P(U,{span:11},{default:C(()=>[P(z,{prop:"branch."+ue+".conditions."+ye+".field",rules:{type:"array",required:!0,message:O.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:C(()=>[P(Zo,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.variable.placeholder"),modelValue:de.field,"onUpdate:modelValue":we=>de.field=we},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),P(U,{span:6},{default:C(()=>[P(z,{prop:"branch."+ue+".conditions."+ye+".compare",rules:{required:!0,message:O.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:C(()=>[P(D,{onWheel:a,teleported:!1,modelValue:de.compare,"onUpdate:modelValue":we=>de.compare=we,placeholder:O.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:we=>M(we,ue,ye)},{default:C(()=>[(Ne(!0),sn(Dr,null,Oo(ar(bI),(we,me)=>(Ne(),gt(j,{key:me,label:we.label,value:we.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),P(U,{span:6},{default:C(()=>[["is_null","is_not_null","is_true","is_not_true"].includes(de.compare)?Rn("",!0):(Ne(),gt(z,{key:0,prop:"branch."+ue+".conditions."+ye+".value",rules:{required:!0,message:O.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:C(()=>[P(L,{modelValue:de.value,"onUpdate:modelValue":we=>de.value=we,placeholder:O.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"]))]),_:2},1024),P(U,{span:1},{default:C(()=>[P(X,{disabled:ue===0&&ye===0,link:"",type:"info",class:"mt-4",onClick:we=>A(ue,ye)},{default:C(()=>[P($,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):Rn("",!0),ue!==u.value.branch.length-1?(Ne(),gt(X,{key:1,link:"",type:"primary",onClick:de=>x(ue)},{default:C(()=>[P(B,{class:"mr-4"},{default:C(()=>[P(H)]),_:1}),ut(" "+Ee(O.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):Rn("",!0)]),_:2},1032,["class"])),[[Q,de=>r(de,ce,ue)]])),128))]),_:1},8,["modelValue","disabled"]),P(X,{link:"",type:"primary",onClick:_},{default:C(()=>[P(B,{class:"mr-4"},{default:C(()=>[P(H)]),_:1}),ut(" "+Ee(O.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}}),dW=Zd(fW,[["__scopeId","data-v-05396cf6"]]);class pW extends Qo{constructor(t){super(t,dW)}}const hW=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class vW extends ei{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:u,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,d=[];if(d.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const _=c[g],b=hW(c,g);d.push({x:n+r/2-10,y:v?a-u/2+75+b+_.height/2:a-15,id:`${t}_${_.id}_right`,type:"right"})}return d}}const mW={type:"condition-node",model:vW,view:pW},yW=Object.freeze(Object.defineProperty({__proto__:null,default:mW},Symbol.toStringTag,{value:"Module"})),gW={class:"title-decoration-1 mb-8"},_W=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]},a=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:r=>{Re.set(t.nodeModel.properties,"nodeData",r)}});return(r,u)=>{const c=ee("el-form-item"),v=ee("el-form"),d=ee("el-card");return Ne(),gt(Jo,{nodeModel:r.nodeModel},{default:C(()=>[J("h5",gW,Ee(r.$t("views.applicationWorkflow.nodeSetting")),1),P(d,{shadow:"never",class:"card-never"},{default:C(()=>[P(v,{onSubmit:u[1]||(u[1]=en(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto"},{default:C(()=>[P(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.chatLog.documentPlaceholder"),trigger:"change"}},{default:C(()=>[P(Zo,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.chatLog.documentPlaceholder"),modelValue:a.value.documentList,"onUpdate:modelValue":u[0]||(u[0]=g=>a.value.documentList=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let bW=class extends Qo{constructor(t){super(t,_W)}};const wW={type:"document-extract-node",model:ei,view:bW},EW=Object.freeze(Object.defineProperty({__proto__:null,default:wW},Symbol.toStringTag,{value:"Module"})),OW={class:"dialog-footer"},SW=ir({__name:"AddFormCollect",props:{title:{default:St("common.param.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=Ue(!1),u=Ue(),c=Ue({}),v=Ue(!1),d=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},_=()=>{var b;(b=u.value)==null||b.validate().then(()=>{var x;a.addFormField((x=u.value)==null?void 0:x.getData()),g()})};return t({close:g,open:d}),(b,x)=>{const A=ee("el-button"),M=ee("el-dialog");return Ne(),gt(M,{title:b.title,modelValue:r.value,"onUpdate:modelValue":x[3]||(x[3]=O=>r.value=O),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:C(()=>[J("span",OW,[P(A,{onClick:x[1]||(x[1]=en(O=>r.value=!1,["prevent"]))},{default:C(()=>[ut(Ee(b.$t("common.cancel")),1)]),_:1}),P(A,{type:"primary",onClick:x[2]||(x[2]=O=>_()),loading:v.value},{default:C(()=>[ut(Ee(b.$t("common.add")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(rE,{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=O=>c.value=O),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:u},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),xW={class:"dialog-footer"},AW=ir({__name:"EditFormCollect",props:{title:{default:St("common.param.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=Ue(!1),u=Ue(),c=Ue({}),v=Ue(0),d=Ue(!1),g=(x,A)=>{r.value=!0,c.value=x,v.value=A},_=()=>{r.value=!1,c.value={}},b=()=>{var x;(x=u.value)==null||x.validate().then(()=>{var A;a.editFormField((A=u.value)==null?void 0:A.getData(),v.value),_()})};return t({close:_,open:g}),(x,A)=>{const M=ee("el-button"),O=ee("el-dialog");return Ne(),gt(O,{title:x.title,modelValue:r.value,"onUpdate:modelValue":A[3]||(A[3]=S=>r.value=S),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:C(()=>[J("span",xW,[P(M,{onClick:A[1]||(A[1]=en(S=>r.value=!1,["prevent"]))},{default:C(()=>[ut(Ee(x.$t("common.cancel")),1)]),_:1}),P(M,{type:"primary",onClick:A[2]||(A[2]=S=>b()),loading:d.value},{default:C(()=>[ut(Ee(x.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(rE,{modelValue:c.value,"onUpdate:modelValue":A[0]||(A[0]=S=>c.value=S),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:u},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),TW={class:"title-decoration-1 mb-8"},MW={class:"flex align-center"},kW={class:"mr-4"},PW={class:"flex-between"},RW={class:"lighter"},NW=["title"],CW={key:0},DW=["title"],jW={key:1},IW=["title"],LW=["title"],FW={class:"mr-4"},$W=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ue(),a=Ue(),r=(D,z)=>{const U=A.value.form_field_list.map((L,$)=>z===$?Re.cloneDeep(D):Re.cloneDeep(L));A.value.form_field_list=U,c()},u=D=>{if(A.value.form_field_list.some(z=>z.field===D.field)){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+D.field);return}A.value.form_field_list=Re.cloneDeep([...A.value.form_field_list,D]),c()},c=()=>{const D=[{label:St("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"form_data"},...A.value.form_field_list.map(z=>({value:z.field,label:typeof z.label=="string"?z.label:z.label.label}))];Re.set(t.nodeModel.properties.config,"fields",D),t.nodeModel.clear_next_node_field(!1),j()},v=Ue(),d=Ue(),g=()=>{var D;(D=v.value)==null||D.open()},_=(D,z)=>{var U;(U=d.value)==null||U.open(Re.cloneDeep(D),z)},b=D=>{A.value.form_field_list=A.value.form_field_list.filter(z=>z.field!==D.field),c()},x=Ue({isResult:!0,form_content_format:`${St("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${St("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),A=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",x.value),t.nodeModel.properties.nodeData),set:D=>{Re.set(t.nodeModel.properties,"nodeData",D)}}),M=D=>{var z;if(D.default_value){const U=(z=D.option_list)==null?void 0:z.filter(L=>D.default_value.indexOf(L.value)>-1).map(L=>L.label).join(",");return U||D.default_value}if(D.default_value!==void 0)return D.default_value},O=()=>{var D;return(D=n.value)==null?void 0:D.validate()};function S(D){Re.set(t.nodeModel.properties.nodeData,"form_content_format",D)}function j(){if(!a.value)return;const z=a.value.$el.querySelector(".el-table__body-wrapper tbody");z&&yr.create(z,{animation:150,ghostClass:"ghost-row",onEnd:U=>{if(U.oldIndex===void 0||U.newIndex===void 0)return;const L=[...A.value.form_field_list],[$]=L.splice(U.oldIndex,1);L.splice(U.newIndex,0,$),A.value.form_field_list=L,c()}})}return oo(()=>{Re.set(t.nodeModel,"validate",O),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(D,z)=>{const U=ee("AppIcon"),L=ee("el-tooltip"),$=ee("MdEditorMagnify"),X=ee("el-form-item"),Y=ee("Plus"),H=ee("el-icon"),B=ee("el-button"),G=ee("el-table-column"),K=ee("el-tag"),Q=ee("el-switch"),ce=ee("el-table"),ue=ee("el-form"),de=ee("el-card");return Ne(),gt(Jo,{nodeModel:D.nodeModel},{default:C(()=>[J("h5",TW,Ee(D.$t("views.applicationWorkflow.nodeSetting")),1),P(de,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(ue,{onSubmit:z[4]||(z[4]=en(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:C(()=>[P(X,{label:D.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:D.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:C(()=>[J("div",MW,[J("div",kW,[J("span",null,[ut(Ee(D.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),z[5]||(z[5]=J("span",{class:"color-danger"},"*",-1))])]),P(L,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(D.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:C(()=>[P(U,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[P($,{title:D.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:A.value.form_content_format,"onUpdate:modelValue":z[0]||(z[0]=ye=>A.value.form_content_format=ye),style:{height:"150px"},onSubmitDialog:S},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),P(X,{label:D.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:z[3]||(z[3]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",PW,[J("h5",RW,Ee(D.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),P(B,{link:"",type:"primary",onClick:z[1]||(z[1]=ye=>g())},{default:C(()=>[P(H,{class:"mr-4"},{default:C(()=>[P(Y)]),_:1}),ut(" "+Ee(D.$t("common.add")),1)]),_:1})])]),default:C(()=>[A.value.form_field_list.length>0?(Ne(),gt(ce,{key:0,class:"border",data:A.value.form_field_list,ref_key:"tableRef",ref:a,"row-key":"field"},{default:C(()=>[P(G,{prop:"field",label:D.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:C(({row:ye})=>[J("span",{title:ye.field,class:"ellipsis-1"},Ee(ye.field),9,NW)]),_:1},8,["label"]),P(G,{prop:"label",label:D.$t("dynamicsForm.paramForm.name.label")},{default:C(({row:ye})=>[ye.label&&ye.label.input_type==="TooltipLabel"?(Ne(),sn("span",CW,[J("span",{title:ye.label.label,class:"ellipsis-1"},Ee(ye.label.label),9,DW)])):(Ne(),sn("span",jW,[J("span",{title:ye.label,class:"ellipsis-1"},Ee(ye.label),9,IW)]))]),_:1},8,["label"]),P(G,{label:D.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:C(({row:ye})=>[P(K,{type:"info",class:"info-tag"},{default:C(()=>{var we;return[ut(Ee((we=ar(lI).find(me=>me.value===ye.input_type))==null?void 0:we.label),1)]}),_:2},1024)]),_:1},8,["label"]),P(G,{prop:"default_value",label:D.$t("dynamicsForm.default.label")},{default:C(({row:ye})=>[J("span",{title:ye.default_value,class:"ellipsis-1"},Ee(M(ye)),9,LW)]),_:1},8,["label"]),P(G,{label:D.$t("common.required"),width:"85"},{default:C(({row:ye})=>[J("div",{onClick:z[2]||(z[2]=en(()=>{},["stop"]))},[P(Q,{disabled:"",size:"small",modelValue:ye.required,"onUpdate:modelValue":we=>ye.required=we},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),P(G,{label:D.$t("common.operation"),align:"left",width:"90"},{default:C(({row:ye,$index:we})=>[J("span",FW,[P(L,{effect:"dark",content:D.$t("common.modify"),placement:"top"},{default:C(()=>[P(B,{type:"primary",text:"",onClick:en(me=>_(ye,we),["stop"])},{default:C(()=>[P(U,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),P(L,{effect:"dark",content:D.$t("common.delete"),placement:"top"},{default:C(()=>[P(B,{type:"primary",text:"",onClick:me=>b(ye)},{default:C(()=>[P(U,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Rn("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),P(SW,{ref_key:"addFormCollectRef",ref:v,addFormField:u},null,512),P(AW,{ref_key:"editFormCollectRef",ref:d,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class BW extends Qo{constructor(t){super(t,$W)}}const UW={type:"form-node",model:ei,view:BW},VW=Object.freeze(Object.defineProperty({__proto__:null,default:UW},Symbol.toStringTag,{value:"Module"})),GW={class:"title-decoration-1 mb-8"},WW={class:"flex-between mb-8"},zW={class:"lighter"},HW={class:"flex w-full"},XW={class:"flex-between mb-8"},qW={class:"lighter"},YW={class:"flex-between mb-8"},KW={class:"lighter"},ZW=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ue(),a=["GET","POST","PUT","DELETE","PATCH"],r=["none","form-data","x-www-form-urlencoded","json","xml","raw-text"],u=x=>x.ctrlKey===!0?(x.preventDefault(),!0):(x.stopPropagation(),!0),c=Ue({activeTab:"params",method:"GET",url:"",timeout:30,headers:[{}],params:[{}],contentType:"json",authType:"none",token:"",username:"",password:"",body:""}),v=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",c.value),t.nodeModel.properties.nodeData),set:x=>{Re.set(t.nodeModel.properties,"nodeData",x)}}),d=()=>{var x;return(x=n.value)==null?void 0:x.validate()},g=()=>{const x=v.value.activeTab,A=v.value.contentType,M={...v.value};x==="params"?M.params[v.value.params.length-1].name.trim()!==""&&(M.params=[...M.params||[],{name:"",value:""}]):x==="headers"?M.headers[v.value.headers.length-1].name.trim()!==""&&(M.headers=[...M.headers||[],{name:"",value:""}]):x==="body"&&["form-data","x-www-form-urlencoded"].includes(A)&&M.params[v.value.params.length-1].name.trim()!==""&&(M.params=[...M.params||[],{name:"",value:""}]),v.value=M};function _(x){const A=v.value.activeTab,M=v.value.contentType,O={...v.value};A==="params"?O.params=(O.params||[]).filter((S,j)=>j!==x):A==="headers"?O.headers=(O.headers||[]).filter((S,j)=>j!==x):A==="body"&&["form-data","x-www-form-urlencoded"].includes(M)&&(O.params=(O.params||[]).filter((S,j)=>j!==x)),v.value=O}function b(x){Re.set(t.nodeModel.properties.nodeData,"body",x)}return oo(()=>{Re.set(t.nodeModel,"validate",d),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(x,A)=>{const M=ee("el-option"),O=ee("el-select"),S=ee("el-input"),j=ee("el-form-item"),D=ee("el-input-number"),z=ee("el-table-column"),U=ee("Delete"),L=ee("el-icon"),$=ee("el-button"),X=ee("el-tooltip"),Y=ee("el-table"),H=ee("el-tab-pane"),B=ee("el-radio"),G=ee("el-radio-group"),K=ee("el-tabs"),Q=ee("el-form"),ce=ee("el-card");return Ne(),gt(Jo,{nodeModel:x.nodeModel},{default:C(()=>[J("h5",GW,Ee(x.$t("views.applicationWorkflow.nodeSetting")),1),P(ce,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(Q,{onSubmit:A[11]||(A[11]=en(()=>{},["prevent"])),model:v.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:C(()=>[J("div",WW,[J("span",zW,[ut(Ee(x.$t("views.applicationWorkflow.nodes.httpNode.configuration")),1),A[12]||(A[12]=J("span",{class:"color-danger"},"*",-1))])]),J("div",HW,[P(O,{modelValue:c.value.method,"onUpdate:modelValue":A[0]||(A[0]=ue=>c.value.method=ue),style:{"max-width":"85px"},class:"mr-8",onChange:A[1]||(A[1]=ue=>c.value.method=null)},{default:C(()=>[(Ne(),sn(Dr,null,Oo(a,ue=>P(M,{key:ue,label:ue,value:ue},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),P(j,{prop:"url",rules:{message:ar(St)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:C(()=>[P(S,{modelValue:v.value.url,"onUpdate:modelValue":A[2]||(A[2]=ue=>v.value.url=ue),placeholder:x.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:u,style:{"min-width":"400px"}},null,8,["modelValue","placeholder"])]),_:1},8,["rules"])]),J("div",XW,[J("span",qW,[ut(Ee(x.$t("views.applicationWorkflow.nodes.httpNode.timeout")),1),A[13]||(A[13]=J("span",{class:"color-danger"},"*",-1))]),P(D,{modelValue:c.value.timeout,"onUpdate:modelValue":A[3]||(A[3]=ue=>c.value.timeout=ue)},null,8,["modelValue"])]),J("div",YW,[J("span",KW,[ut(Ee(x.$t("views.applicationWorkflow.nodes.httpNode.params")),1),A[14]||(A[14]=J("span",{class:"color-danger"},"*",-1))])]),P(K,{modelValue:v.value.activeTab,"onUpdate:modelValue":A[10]||(A[10]=ue=>v.value.activeTab=ue),class:"w-full"},{default:C(()=>[P(H,{name:"params",label:"Params"},{default:C(()=>[P(Y,{data:v.value.params,border:"",style:{width:"100%"}},{default:C(()=>[P(z,{prop:"name",label:"Name"},{default:C(ue=>[P(S,{modelValue:ue.row.name,"onUpdate:modelValue":de=>ue.row.name=de,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(z,{prop:"value",label:"Value"},{default:C(ue=>[P(S,{modelValue:ue.row.value,"onUpdate:modelValue":de=>ue.row.value=de,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(z,{label:"",width:"50"},{default:C(ue=>[ue.$index!==v.value.params.length-1?(Ne(),gt(X,{key:0,effect:"dark",content:x.$t("common.delete"),placement:"top"},{default:C(()=>[P($,{type:"primary",text:"",onClick:de=>_(ue.$index)},{default:C(()=>[P(L,null,{default:C(()=>[P(U)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Rn("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),P(H,{name:"authorization",label:"Authorization"},{default:C(()=>[P(G,{modelValue:v.value.authType,"onUpdate:modelValue":A[7]||(A[7]=ue=>v.value.authType=ue)},{default:C(()=>[P(B,{label:"No Auth",value:"none"}),P(B,{label:"Bearer Token",value:"bearer"}),P(B,{label:"Basic Auth",value:"basic"}),v.value.authType==="bearer"?(Ne(),gt(S,{key:0,placeholder:x.$t("views.applicationWorkflow.nodes.httpNode.authToken"),"show-word-limit":"",modelValue:v.value.token,"onUpdate:modelValue":A[4]||(A[4]=ue=>v.value.token=ue),clearable:"",onWheel:u},null,8,["placeholder","modelValue"])):Rn("",!0),v.value.authType==="basic"?(Ne(),gt(S,{key:1,placeholder:x.$t("views.applicationWorkflow.nodes.httpNode.authUsername"),"show-word-limit":"",modelValue:v.value.username,"onUpdate:modelValue":A[5]||(A[5]=ue=>v.value.username=ue),clearable:"",onWheel:u},null,8,["placeholder","modelValue"])):Rn("",!0),v.value.authType==="basic"?(Ne(),gt(S,{key:2,placeholder:x.$t("views.applicationWorkflow.nodes.httpNode.authPassword"),"show-word-limit":"",modelValue:v.value.password,"onUpdate:modelValue":A[6]||(A[6]=ue=>v.value.password=ue),clearable:"",onWheel:u},null,8,["placeholder","modelValue"])):Rn("",!0)]),_:1},8,["modelValue"])]),_:1}),P(H,{name:"headers",label:"Headers"},{default:C(()=>[P(Y,{data:v.value.headers,border:"",style:{width:"100%"}},{default:C(()=>[P(z,{prop:"name",label:"Name"},{default:C(ue=>[P(S,{modelValue:ue.row.name,"onUpdate:modelValue":de=>ue.row.name=de,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(z,{prop:"value",label:"Value"},{default:C(ue=>[P(S,{modelValue:ue.row.value,"onUpdate:modelValue":de=>ue.row.value=de,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(z,{label:"",width:"50"},{default:C(ue=>[ue.$index!==v.value.headers.length-1?(Ne(),gt(X,{key:0,effect:"dark",content:x.$t("common.delete"),placement:"top"},{default:C(()=>[P($,{type:"primary",text:"",onClick:de=>_(ue.$index)},{default:C(()=>[P(L,null,{default:C(()=>[P(U)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Rn("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),P(H,{name:"body",label:"Body"},{default:C(()=>[P(G,{modelValue:v.value.contentType,"onUpdate:modelValue":A[9]||(A[9]=ue=>v.value.contentType=ue)},{default:C(()=>[(Ne(),sn(Dr,null,Oo(r,ue=>P(B,{key:ue,label:ue,value:ue},null,8,["label","value"])),64)),["form-data","x-www-form-urlencoded"].includes(v.value.contentType)?(Ne(),gt(Y,{key:0,data:v.value.params,border:"",style:{width:"100%"}},{default:C(()=>[P(z,{prop:"name",label:"Name"},{default:C(ue=>[P(S,{modelValue:ue.row.name,"onUpdate:modelValue":de=>ue.row.name=de,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(z,{prop:"value",label:"Value"},{default:C(ue=>[P(S,{modelValue:ue.row.value,"onUpdate:modelValue":de=>ue.row.value=de,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(z,{label:"",width:"50"},{default:C(ue=>[ue.$index!==0?(Ne(),gt(X,{key:0,effect:"dark",content:x.$t("common.delete"),placement:"top"},{default:C(()=>[P($,{type:"primary",text:"",onClick:de=>_(ue.$index)},{default:C(()=>[P(L,null,{default:C(()=>[P(U)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Rn("",!0)]),_:1})]),_:1},8,["data"])):Rn("",!0),["json","xml","raw-text"].includes(v.value.contentType)?(Ne(),gt(ou,{key:1,title:x.$t("views.applicationWorkflow.nodes.httpNode.body"),modelValue:v.value.body,"onUpdate:modelValue":A[8]||(A[8]=ue=>v.value.body=ue),style:{height:"150px"},onSubmitDialog:b},null,8,["title","modelValue"])):Rn("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}}),JW=Zd(ZW,[["__scopeId","data-v-ac24d5c2"]]);class QW extends Qo{constructor(t){super(t,JW)}}const ez={type:"http-node",model:ei,view:QW},tz=Object.freeze(Object.defineProperty({__proto__:null,default:ez},Symbol.toStringTag,{value:"Module"})),nz={class:"title-decoration-1 mb-8"},rz={class:"flex-between w-full"},oz={class:"flex align-center"},iz={class:"mr-4"},az={class:"flex align-center"},lz={class:"mr-4"},uz={class:"flex-between w-full"},sz={class:"flex align-center"},cz={class:"mr-4"},fz={class:"flex"},dz=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ue(null),v=Ue(),d=Ue(),g=()=>{var L;return(L=d.value)==null?void 0:L.validate().catch($=>Promise.reject({node:u.nodeModel,errMessage:$}))},_=L=>L.ctrlKey===!0?(L.preventDefault(),!0):(L.stopPropagation(),!0),x={modelId:"",system:"",prompt:`{{${St("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null},A=or({get:()=>(u.nodeModel.properties.nodeData||Re.set(u.nodeModel.properties,"nodeData",x),u.nodeModel.properties.nodeData),set:L=>{Re.set(u.nodeModel.properties,"nodeData",L)}}),M=t();function O(){var $;const L=r.value==="systemManage"?{modelType:"TTI",workspaceId:($=M.value)==null?void 0:$.workspaceId}:{modelType:"TTI"};Eo({type:"model",systemType:r.value}).getSelectModelList(L).then(X=>{c.value=Re.groupBy(X==null?void 0:X.data,"provider")})}const S=()=>{Nv(()=>{var L;A.value.modelId?(L=v.value)==null||L.reset_default(A.value.modelId,a):D({})})},j=L=>{var $;L&&(($=v.value)==null||$.open(L,a,A.value.modelParamsSetting))};function D(L){Re.set(u.nodeModel.properties.nodeData,"modelParamsSetting",L)}function z(L){Re.set(u.nodeModel.properties.nodeData,"prompt",L)}function U(L){Re.set(u.nodeModel.properties.nodeData,"negative_prompt",L)}return oo(()=>{O(),Re.set(u.nodeModel,"validate",g)}),(L,$)=>{const X=ee("AppIcon"),Y=ee("el-button"),H=ee("ModelSelect"),B=ee("el-form-item"),G=ee("el-tooltip"),K=ee("el-switch"),Q=ee("el-form"),ce=ee("el-card");return Ne(),gt(Jo,{"node-model":L.nodeModel},{default:C(()=>[J("h5",nz,Ee(L.$t("views.applicationWorkflow.nodeSetting")),1),P(ce,{shadow:"never",class:"card-never"},{default:C(()=>[P(Q,{onSubmit:$[6]||($[6]=en(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:d,"hide-required-asterisk":""},{default:C(()=>[P(B,{label:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"modelId",rules:{required:!0,message:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:C(()=>[J("div",rz,[J("div",null,[J("span",null,[ut(Ee(L.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),$[7]||($[7]=J("span",{class:"color-danger"},"*",-1))])]),P(Y,{disabled:!A.value.modelId,type:"primary",link:"",onClick:$[0]||($[0]=ue=>j(A.value.modelId)),onRefreshForm:D},{default:C(()=>[P(X,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[P(H,{onChange:S,onWheel:_,teleported:!1,modelValue:A.value.modelId,"onUpdate:modelValue":$[1]||($[1]=ue=>A.value.modelId=ue),placeholder:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:c.value,showFooter:"","model-type":"TTI"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),P(B,{label:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:L.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:C(()=>[J("div",oz,[J("div",iz,[J("span",null,[ut(Ee(L.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),$[8]||($[8]=J("span",{class:"color-danger"},"*",-1))])]),P(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(L.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:C(()=>[P(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[P(ou,{onWheel:_,title:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:A.value.prompt,"onUpdate:modelValue":$[2]||($[2]=ue=>A.value.prompt=ue),style:{height:"150px"},onSubmitDialog:z},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),P(B,{label:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:L.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:C(()=>[J("div",az,[J("div",lz,[J("span",null,Ee(L.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),P(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(L.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:C(()=>[P(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[P(ou,{onWheel:_,title:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:A.value.negative_prompt,"onUpdate:modelValue":$[3]||($[3]=ue=>A.value.negative_prompt=ue),placeholder:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:U},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),P(B,{label:L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[5]||($[5]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",uz,[J("div",sz,[J("div",cz,[J("span",null,Ee(L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),P(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[P(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),J("div",fz,[P(K,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":$[4]||($[4]=ue=>A.value.isResult=ue)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),P(fh,{ref_key:"AIModeParamSettingDialogRef",ref:v,onRefresh:D},null,512)]),_:1},8,["node-model"])}}});let pz=class extends Qo{constructor(t){super(t,dz)}};const hz={type:"image-generate-node",model:ei,view:pz},vz=Object.freeze(Object.defineProperty({__proto__:null,default:hz},Symbol.toStringTag,{value:"Module"})),mz={class:"title-decoration-1 mb-8"},yz={class:"flex-between w-full"},gz={class:"flex-between"},_z={class:"flex align-center"},bz={class:"flex align-center"},wz={class:"mr-4"},Ez={class:"flex-between"},Oz={class:"flex-between w-full"},Sz={class:"flex align-center"},xz={class:"mr-4"},Az={class:"flex"},Tz=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ue(null),v=Ue(),d=Ue(),g=Ue(),_=()=>{var Y;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(Y=d.value)==null?void 0:Y.validate()]).catch(H=>Promise.reject({node:u.nodeModel,errMessage:H}))},b=Y=>Y.ctrlKey===!0?(Y.preventDefault(),!0):(Y.stopPropagation(),!0),A={modelId:"",system:"",prompt:`{{${St("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null,imageList:["start-node","image"]},M=or({get:()=>(u.nodeModel.properties.nodeData||Re.set(u.nodeModel.properties,"nodeData",A),u.nodeModel.properties.nodeData),set:Y=>{Re.set(u.nodeModel.properties,"nodeData",Y)}}),O=t();function S(){var H;const Y=r.value==="systemManage"?{modelType:"VISION",workspaceId:(H=O.value)==null?void 0:H.workspaceId}:{modelType:"VISION"};Eo({type:"model",systemType:r.value}).getSelectModelList(Y).then(B=>{c.value=Re.groupBy(B==null?void 0:B.data,"provider")})}function j(Y){Re.set(u.nodeModel.properties.nodeData,"system",Y)}function D(Y){Re.set(u.nodeModel.properties.nodeData,"prompt",Y)}const z=Y=>{var H;Y&&((H=v.value)==null||H.open(Y,a,M.value.modelParamsSetting))},U=Ue(),L=Y=>{var H;Y&&((H=U.value)==null||H.open(Y,a))},$=Y=>{Re.set(u.nodeModel.properties.nodeData,"system",Y)};function X(Y){Re.set(u.nodeModel.properties.nodeData,"modelParamsSetting",Y)}return oo(()=>{S(),Re.set(u.nodeModel,"validate",_)}),(Y,H)=>{const B=ee("el-button"),G=ee("el-form-item"),K=ee("el-tooltip"),Q=ee("el-option"),ce=ee("el-select"),ue=ee("el-input-number"),de=ee("el-switch"),ye=ee("el-form"),we=ee("el-card");return Ne(),gt(Jo,{"node-model":Y.nodeModel},{default:C(()=>[J("h5",mz,Ee(Y.$t("views.applicationWorkflow.nodeSetting")),1),P(we,{shadow:"never",class:"card-never"},{default:C(()=>[P(ye,{onSubmit:H[10]||(H[10]=en(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:d,"hide-required-asterisk":""},{default:C(()=>[P(G,{label:Y.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"modelId",rules:{required:!0,message:Y.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:C(()=>[J("div",yz,[J("div",null,[J("span",null,[ut(Ee(ar(St)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),H[11]||(H[11]=J("span",{class:"color-danger"},"*",-1))])]),P(B,{disabled:!M.value.modelId,type:"primary",link:"",onClick:H[0]||(H[0]=me=>z(M.value.modelId)),onRefreshForm:X},{default:C(()=>[P(Cr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[P(Cf,{onWheel:b,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":H[1]||(H[1]=me=>M.value.modelId=me),placeholder:Y.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:c.value,showFooter:"","model-type":"VISION"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),P(G,{label:Y.$t("views.application.form.roleSettings.label")},{label:C(()=>[J("div",gz,[J("div",_z,[J("span",null,Ee(Y.$t("views.application.form.roleSettings.label")),1),P(K,{effect:"dark",content:Y.$t("views.application.form.roleSettings.tooltip"),placement:"right"},{default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])]),P(B,{type:"primary",link:"",onClick:H[2]||(H[2]=me=>L(M.value.modelId)),disabled:!M.value.modelId},{default:C(()=>[P(Cr,{iconName:"app-generate-star"})]),_:1},8,["disabled"])])]),default:C(()=>[P(ou,{title:Y.$t("views.application.form.roleSettings.label"),modelValue:M.value.system,"onUpdate:modelValue":H[3]||(H[3]=me=>M.value.system=me),style:{height:"100px"},onSubmitDialog:j,placeholder:`${ar(St)("views.applicationWorkflow.SystemPromptPlaceholder")} {{${ar(St)("views.applicationWorkflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),P(G,{label:Y.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:Y.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:C(()=>[J("div",bz,[J("div",wz,[J("span",null,[ut(Ee(Y.$t("views.application.form.prompt.label")),1),H[12]||(H[12]=J("span",{class:"color-danger"},"*",-1))])]),P(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(Y.$t("views.application.form.prompt.tooltip")),1)]),default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[P(ou,{onWheel:b,title:Y.$t("views.application.form.prompt.label"),modelValue:M.value.prompt,"onUpdate:modelValue":H[4]||(H[4]=me=>M.value.prompt=me),style:{height:"150px"},onSubmitDialog:D},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),P(G,null,{label:C(()=>[J("div",Ez,[J("div",null,Ee(Y.$t("views.application.form.historyRecord.label")),1),P(ce,{modelValue:M.value.dialogue_type,"onUpdate:modelValue":H[5]||(H[5]=me=>M.value.dialogue_type=me),type:"small",style:{width:"100px"}},{default:C(()=>[P(Q,{label:Y.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),P(Q,{label:Y.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[P(ue,{modelValue:M.value.dialogueNumber,"onUpdate:modelValue":H[6]||(H[6]=me=>M.value.dialogueNumber=me),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),P(G,{label:Y.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:Y.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:C(()=>[ut(Ee(Y.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),H[13]||(H[13]=J("span",{class:"color-danger"},"*",-1))]),default:C(()=>[P(Zo,{ref_key:"nodeCascaderRef",ref:g,nodeModel:Y.nodeModel,class:"w-full",placeholder:Y.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:M.value.imageList,"onUpdate:modelValue":H[7]||(H[7]=me=>M.value.imageList=me)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),P(G,{label:Y.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:H[9]||(H[9]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",Oz,[J("div",Sz,[J("div",xz,[J("span",null,Ee(Y.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),P(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(Y.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),J("div",Az,[P(de,{size:"small",modelValue:M.value.isResult,"onUpdate:modelValue":H[8]||(H[8]=me=>M.value.isResult=me)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),P(fh,{ref_key:"AIModeParamSettingDialogRef",ref:v,onRefresh:X},null,512),P(oM,{onReplace:$,ref_key:"GeneratePromptDialogRef",ref:U},null,512)]),_:1},8,["node-model"])}}});let Mz=class extends Qo{constructor(t){super(t,Tz)}};const kz={type:"image-understand-node",model:ei,view:Mz},Pz=Object.freeze(Object.defineProperty({__proto__:null,default:kz},Symbol.toStringTag,{value:"Module"})),Rz={class:"title-decoration-1 mb-8"},Nz={class:"flex-between"},Cz={class:"flex-between"},Dz={class:"flex-between"},jz=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=Ue(),c=Ue();function v(){const $=Re.cloneDeep(S.nodeModel.properties.nodeData.branch),X={id:fl(),content:"",isOther:!1};$.splice($.length-1,0,X),g($,!0),Re.set(S.nodeModel.properties.nodeData,"branch",$),S.nodeModel.refreshBranch()}function d($){var Q;const X=Re.cloneDeep(S.nodeModel.properties.nodeData.branch),Y=X.find(ce=>ce.id===$);if(!Y||Y.isOther||X.filter(ce=>!ce.isOther).length<=1)return;const B=`${S.nodeModel.id}_${$}_right`,G=(((Q=S.nodeModel.outgoing)==null?void 0:Q.edges)||[]).filter(ce=>ce.sourceAnchorId===B).map(ce=>ce.id);G.length>0&&S.nodeModel.graphModel.eventCenter.emit("delete_edge",G);const K=X.filter(ce=>ce.id!==$);Re.set(S.nodeModel.properties.nodeData,"branch",K),g(K,!1)}function g($,X){const Y=Re.cloneDeep(S.nodeModel.properties.branch_condition_list?S.nodeModel.properties.branch_condition_list:[]),H=$.map((B,G)=>{const K=Y.find(Q=>Q.id===B.id);if(K)return{index:G,height:K.height,id:B.id};if(X)return{index:G,height:12,id:B.id}}).filter(B=>B);Re.set(S.nodeModel.properties,"branch_condition_list",H),S.nodeModel.refreshBranch()}const _=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),b=$=>{var X;$?(X=c.value)==null||X.reset_default($,a):A({})},x={modelId:"",branch:[{id:fl(),content:"",isOther:!1},{id:fl(),content:St("views.applicationWorkflow.nodes.intentNode.other"),isOther:!0}],dialogueNumber:1,contentList:[]};function A($){Re.set(S.nodeModel.properties.nodeData,"modelParamsSetting",$)}const M=$=>{var X;$&&((X=c.value)==null||X.open($,a,O.value.modelParamsSetting))},O=or({get:()=>(S.nodeModel.properties.nodeData||(Re.set(S.nodeModel.properties,"nodeData",x),g(x.branch,!0)),S.nodeModel.properties.nodeData),set:$=>{Re.set(S.nodeModel.properties,"nodeData",$)}}),S=e,j=Ue(),D=Ue(null),z=()=>{var $;return Promise.all([u.value?u.value.validate():Promise.resolve(""),($=j.value)==null?void 0:$.validate()]).then(()=>{if(O.value.branch.length!=new Set(O.value.branch.map(X=>X.content)).size)throw St("views.applicationWorkflow.nodes.intentNode.error2")}).catch(X=>Promise.reject({node:S.nodeModel,errMessage:X}))},U=t();function L(){var X;const $=r.value==="systemManage"?{modelType:"LLM",workspaceId:(X=U.value)==null?void 0:X.workspaceId}:{modelType:"LLM"};Eo({type:"model",systemType:r.value}).getSelectModelList($).then(Y=>{D.value=Re.groupBy(Y==null?void 0:Y.data,"provider")})}return oo(()=>{var $;L(),typeof(($=S.nodeModel.properties.nodeData)==null?void 0:$.isResult)>"u"&&yc(S.nodeModel)&&Re.set(S.nodeModel.properties.nodeData,"isResult",!0),Re.set(S.nodeModel,"validate",z)}),($,X)=>{const Y=ee("el-button"),H=ee("el-form-item"),B=ee("el-input-number"),G=ee("Plus"),K=ee("el-icon"),Q=ee("el-input"),ce=ee("el-col"),ue=ee("Delete"),de=ee("el-row"),ye=ee("el-form"),we=ee("el-card");return Ne(),gt(Jo,{nodeModel:$.nodeModel},{default:C(()=>[J("h5",Rz,Ee($.$t("views.applicationWorkflow.nodeSetting")),1),P(we,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(ye,{onSubmit:X[4]||(X[4]=en(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"IntentClassifyNodeFormRef",ref:j,"hide-required-asterisk":""},{default:C(()=>[P(H,{label:$.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:$.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:C(()=>[J("div",Nz,[J("div",null,[J("span",null,[ut(Ee($.$t("views.application.form.aiModel.label")),1),X[5]||(X[5]=J("span",{class:"color-danger"},"*",-1))])]),P(Y,{type:"primary",link:"",disabled:!O.value.modelId,onClick:X[0]||(X[0]=me=>M(O.value.modelId)),onRefreshForm:A},{default:C(()=>[P(Cr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[P(Cf,{onChange:b,onWheel:_,teleported:!1,modelValue:O.value.modelId,"onUpdate:modelValue":X[1]||(X[1]=me=>O.value.modelId=me),placeholder:$.$t("views.application.form.aiModel.placeholder"),options:D.value,onSubmitModel:L,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),P(H,{prop:"contentList",label:$.$t("views.applicationWorkflow.nodes.intentNode.input.label"),rules:{message:$.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"change",required:!0}},{label:C(()=>[J("div",Cz,[J("div",null,[J("span",null,[ut(Ee($.$t("views.applicationWorkflow.nodes.intentNode.input.label")),1),X[6]||(X[6]=J("span",{class:"color-danger"},"*",-1))])])])]),default:C(()=>[P(Zo,{ref_key:"nodeCascaderRef",ref:u,nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:O.value.contentList,"onUpdate:modelValue":X[2]||(X[2]=me=>O.value.contentList=me)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),P(H,{label:$.$t("views.application.form.historyRecord.label")},{default:C(()=>[P(B,{modelValue:O.value.dialogueNumber,"onUpdate:modelValue":X[3]||(X[3]=me=>O.value.dialogueNumber=me),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),P(H,null,{label:C(()=>[J("div",Dz,[J("div",null,[J("span",null,[ut(Ee($.$t("views.applicationWorkflow.nodes.intentNode.classify.label")),1),X[7]||(X[7]=J("span",{class:"color-danger"},"*",-1))])]),P(Y,{onClick:v,type:"primary",size:"large",link:""},{default:C(()=>[P(K,null,{default:C(()=>[P(G)]),_:1})]),_:1})])]),default:C(()=>[J("div",null,[(Ne(!0),sn(Dr,null,Oo(O.value.branch,(me,He)=>(Ne(),sn("div",{key:me.id,class:"mb-8"},[P(H,{prop:`branch.${He}.content`,rules:{message:$.$t("views.applicationWorkflow.nodes.intentNode.classify.placeholder"),trigger:"change",required:!0}},{default:C(()=>[P(de,{gutter:12,align:"middle"},{default:C(()=>[P(ce,{span:21},{default:C(()=>[P(Q,{modelValue:me.content,"onUpdate:modelValue":tt=>me.content=tt,style:{width:"210px"},disabled:me.isOther,placeholder:$.$t("views.applicationWorkflow.nodes.intentNode.classify.placeholder")},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])]),_:2},1024),P(ce,{span:3},{default:C(()=>[me.isOther?Rn("",!0):(Ne(),gt(Y,{key:0,link:"",size:"large",disabled:O.value.branch.filter(tt=>!tt.isOther).length<=1,onClick:tt=>d(me.id)},{default:C(()=>[P(K,null,{default:C(()=>[P(ue)]),_:1})]),_:2},1032,["disabled","onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["prop","rules"])]))),128))])]),_:1})]),_:1},8,["model"])]),_:1}),P(fh,{ref_key:"AIModeParamSettingDialogRef",ref:c,onRefresh:A},null,512)]),_:1},8,["nodeModel"])}}});class Iz extends Qo{constructor(t){super(t,jz)}}class Lz extends ei{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:u,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,d=[];if(d.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let _=0;_<c.length;_++){const b=c[_];d.push({x:n+r/2-10,y:v?a-u/2+397+_*41.36:a-15,id:`${t}_${b.id}_right`,type:"right"}),console.log(a-u/2+397+100/2)}return d}}const Fz={type:"intent-node",model:Lz,view:Iz},$z=Object.freeze(Object.defineProperty({__proto__:null,default:Fz},Symbol.toStringTag,{value:"Module"})),Bz={class:"title-decoration-1 mb-8"},Uz={class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},Vz={class:"flex-between"},Gz={class:"flex align-center"},Wz=["src"],zz={class:"flex-between"},Hz={class:"ml-4"},Xz={class:"title-decoration-1 mb-8"},qz={key:0,class:"p-8-12"},Yz={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},Kz={class:"flex-between"},Zz={key:0,class:"color-danger"},Jz={key:0,class:"p-8-12"},Qz={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},eH={class:"flex-between"},tH={key:0,class:"color-danger"},nH=`{
  "math": {
    "url": "your_server",
    "type": "sse"
  }
}`,rH=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e;tE();const n=aa(),{params:{id:a}}=n,u=iu("getApplicationDetail")(),c=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),v=Ue(),d=Ue(!1),g=U=>U.ctrlKey===!0?(U.preventDefault(),!0):(U.stopPropagation(),!0),_={mcpTool:"",mcpTools:[],mcpServers:"",mcpServer:"",mcpSource:"referencing",mcpToolId:"",toolParams:{},tool_form_field:[],params_nested:""},b=Ue([]);function x(U){Re.set(t.nodeModel.properties.nodeData,"mcpServers",U)}async function A(){const U=await Eo({type:"tool",systemType:c.value}).getToolById(S.value.mcpToolId,d);S.value.mcpServers=U.data.code}function M(){if(S.value.mcpSource==="referencing"&&!S.value.mcpToolId){mi(St("views.applicationWorkflow.nodes.mcpNode.mcpToolTip"));return}if(S.value.mcpSource==="custom"&&!S.value.mcpServers){mi(St("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}try{JSON.parse(S.value.mcpServers)}catch{mi(St("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}Eo({type:"application",systemType:c.value}).getMcpTools(a,S.value.mcpServers,d).then(U=>{var L;S.value.mcpTools=U.data,Xd(St("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess")),S.value.mcpServer=(L=S.value.mcpTools.find($=>$.name===S.value.mcpTool))==null?void 0:L.server})}function O(){var L,$,X,Y,H,B;S.value.mcpServer=(L=S.value.mcpTools.find(G=>G.name===S.value.mcpTool))==null?void 0:L.server;const U=($=S.value.mcpTools.find(G=>G.name===S.value.mcpTool))==null?void 0:$.args_schema;S.value.tool_form_field=[];for(const G in U==null?void 0:U.properties){const K=U==null?void 0:U.properties[G].properties;if(K){S.value.params_nested=G;for(const Q in K){let ce="TextInput";K[Q].type==="string"?ce="TextInput":K[Q].type==="number"?ce="NumberInput":K[Q].type==="boolean"?ce="SwitchInput":(K[Q].type==="array"||K[Q].type==="object")&&(ce="JsonInput"),S.value.tool_form_field.push({field:Q,label:{input_type:"TooltipLabel",label:Q,attrs:{tooltip:K[Q].description},props_info:{}},input_type:ce,source:"referencing",required:((X=U.properties[G].required)==null?void 0:X.indexOf(Q))!==-1,props_info:{rules:[{required:((Y=U.properties[G].required)==null?void 0:Y.indexOf(Q))!==-1,message:St("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{S.value.params_nested="";let Q="TextInput";U.properties[G].type==="string"?Q="TextInput":U.properties[G].type==="number"?Q="NumberInput":U.properties[G].type==="boolean"?Q="SwitchInput":(U.properties[G].type==="array"||U.properties[G].type==="object")&&(Q="JsonInput"),S.value.tool_form_field.push({field:G,label:{input_type:"TooltipLabel",label:G,attrs:{tooltip:U.properties[G].description},props_info:{}},input_type:Q,source:"referencing",required:((H=U.required)==null?void 0:H.indexOf(G))!==-1,props_info:{rules:[{required:((B=U.required)==null?void 0:B.indexOf(G))!==-1,message:St("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}S.value.params_nested?S.value.toolParams={[S.value.params_nested]:{}}:S.value.toolParams={}}const S=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",_),t.nodeModel.properties.nodeData),set:U=>{Re.set(t.nodeModel.properties,"nodeData",U)}}),j=Ue(),D=async()=>{if(v.value){const U=S.value.tool_form_field.filter(L=>L.required).map(L=>L.label.label);if(U.length>0){for(const L of U)if(S.value.params_nested){if(!S.value.toolParams[S.value.params_nested][L])return Promise.reject({node:t.nodeModel,errMessage:L+St("dynamicsForm.tip.requiredMessage")})}else if(!S.value.toolParams[L])return Promise.reject({node:t.nodeModel,errMessage:L+St("dynamicsForm.tip.requiredMessage")})}}if(j.value){const U=Re.cloneDeep(S.value);if(!U.mcpServers)return Promise.reject({node:t.nodeModel,errMessage:St("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!U.mcpTool)return Promise.reject({node:t.nodeModel,errMessage:St("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};function z(){var L;const U=c.value==="systemManage"?{scope:"WORKSPACE",toolType:"MCP",workspaceId:(L=u.value)==null?void 0:L.workspaceId}:{scope:"WORKSPACE",toolType:"MCP"};Eo({type:"tool",systemType:c.value}).getAllToolList(U,d).then($=>{b.value=[...$.data.shared_tools,...$.data.tools].filter(X=>X.isActive)})}return oo(()=>{var U;typeof((U=t.nodeModel.properties.nodeData)==null?void 0:U.isResult)>"u"&&yc(t.nodeModel)&&Re.set(t.nodeModel.properties.nodeData,"isResult",!0),z(),Re.set(t.nodeModel,"validate",D)}),(U,L)=>{const $=ee("el-option"),X=ee("el-select"),Y=ee("el-avatar"),H=ee("ToolIcon"),B=ee("el-tag"),G=ee("el-form-item"),K=ee("Plus"),Q=ee("el-icon"),ce=ee("el-button"),ue=ee("AppIcon"),de=ee("el-tooltip"),ye=ee("el-form"),we=ee("el-text"),me=ee("el-input"),He=ee("el-input-number"),tt=ee("el-switch"),Ot=Hd("loading");return Ne(),gt(Jo,{nodeModel:U.nodeModel},{default:C(()=>[J("h5",Bz,Ee(U.$t("views.applicationWorkflow.nodeSetting")),1),J("div",Uz,[P(ye,{onSubmit:L[5]||(L[5]=en(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:j,"hide-required-asterisk":""},{default:C(()=>[P(G,{label:"MCP Server Config"},{label:C(()=>[J("div",Vz,[L[9]||(L[9]=J("div",null,[ut(" MCP Server Config "),J("span",{class:"color-danger"},"*")],-1)),P(X,{teleported:!1,modelValue:S.value.mcpSource,"onUpdate:modelValue":L[0]||(L[0]=Je=>S.value.mcpSource=Je),size:"small",style:{width:"85px"}},{default:C(()=>[P($,{label:U.$t("views.applicationWorkflow.nodes.mcpNode.reference"),value:"referencing"},null,8,["label"]),P($,{label:U.$t("common.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[S.value.mcpSource==="custom"?(Ne(),gt(ou,{key:0,onWheel:g,title:"MCP Server Config",modelValue:S.value.mcpServers,"onUpdate:modelValue":L[1]||(L[1]=Je=>S.value.mcpServers=Je),style:{height:"150px"},onSubmitDialog:x,placeholder:nH},null,8,["modelValue"])):(Ne(),gt(X,{key:1,modelValue:S.value.mcpToolId,"onUpdate:modelValue":L[2]||(L[2]=Je=>S.value.mcpToolId=Je),filterable:"",onChange:A},{default:C(()=>[(Ne(!0),sn(Dr,null,Oo(b.value,Je=>(Ne(),gt($,{key:Je.id,label:Je.name,value:Je.id},{default:C(()=>[J("div",Gz,[Je!=null&&Je.icon?(Ne(),gt(Y,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:C(()=>[J("img",{src:ar(Qp)(Je==null?void 0:Je.icon),alt:""},null,8,Wz)]),_:2},1024)):(Ne(),gt(H,{key:1,size:20,type:Je==null?void 0:Je.toolType,class:"mr-8"},null,8,["type"])),J("span",null,Ee(Je.name),1),Je.scope==="SHARED"?(Ne(),gt(B,{key:2,type:"info",class:"info-tag ml-8"},{default:C(()=>[ut(Ee(ar(St)("views.shared.title")),1)]),_:1})):Rn("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1}),P(G,null,{label:C(()=>[J("div",zz,[J("span",null,Ee(U.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),P(ce,{type:"primary",link:"",onClick:L[3]||(L[3]=Je=>M())},{default:C(()=>[P(Q,{class:"mr-4"},{default:C(()=>[P(K)]),_:1}),ut(" "+Ee(U.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:C(()=>[P(X,{modelValue:S.value.mcpTool,"onUpdate:modelValue":L[4]||(L[4]=Je=>S.value.mcpTool=Je),onChange:O,filterable:""},{default:C(()=>[(Ne(!0),sn(Dr,null,Oo(S.value.mcpTools,Je=>(Ne(),gt($,{key:Je.value,label:Je.name,value:Je.name,class:"flex align-center"},{default:C(()=>[P(de,{effect:"dark",content:Je.description,placement:"top-start","popper-class":"max-w-350"},{default:C(()=>[P(ue,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),J("span",Hz,Ee(Je.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),J("h5",Xz,Ee(U.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),S.value.toolParams[S.value.params_nested]?(Ne(),sn(Dr,{key:0},[S.value.mcpTool?(Ne(),sn("div",Yz,[S.value.mcpTool?Ra((Ne(),gt(ye,{key:0,ref_key:"dynamicsFormRef",ref:v,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:L[7]||(L[7]=en(()=>{},["prevent"]))},{default:C(()=>[(Ne(!0),sn(Dr,null,Oo(S.value.tool_form_field,Je=>(Ne(),gt(G,{key:Je.field,required:Je.required},{label:C(()=>[J("div",Kz,[J("div",null,[P($S,{label:Je.label.label,tooltip:Je.label.attrs.tooltip},null,8,["label","tooltip"]),Je.required?(Ne(),sn("span",Zz,"*")):Rn("",!0)]),P(X,{teleported:!1,modelValue:Je.source,"onUpdate:modelValue":Yt=>Je.source=Yt,size:"small",style:{width:"85px"},onChange:L[6]||(L[6]=Yt=>S.value.toolParams[S.value.params_nested]={})},{default:C(()=>[P($,{label:U.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),P($,{label:U.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:C(()=>[Je.source==="custom"&&Je.input_type==="TextInput"?(Ne(),gt(me,{key:0,modelValue:S.value.toolParams[S.value.params_nested][Je.label.label],"onUpdate:modelValue":Yt=>S.value.toolParams[S.value.params_nested][Je.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="NumberInput"?(Ne(),gt(He,{key:1,modelValue:S.value.toolParams[S.value.params_nested][Je.label.label],"onUpdate:modelValue":Yt=>S.value.toolParams[S.value.params_nested][Je.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="SwitchInput"?(Ne(),gt(tt,{key:2,modelValue:S.value.toolParams[S.value.params_nested][Je.label.label],"onUpdate:modelValue":Yt=>S.value.toolParams[S.value.params_nested][Je.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="JsonInput"?(Ne(),gt(me,{key:3,modelValue:S.value.toolParams[S.value.params_nested][Je.label.label],"onUpdate:modelValue":Yt=>S.value.toolParams[S.value.params_nested][Je.label.label]=Yt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):Rn("",!0),Je.source==="referencing"?(Ne(),gt(Zo,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.variable.placeholder"),modelValue:S.value.toolParams[S.value.params_nested][Je.label.label],"onUpdate:modelValue":Yt=>S.value.toolParams[S.value.params_nested][Je.label.label]=Yt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):Rn("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[Ot,d.value]]):Rn("",!0)])):(Ne(),sn("div",qz,[P(we,{type:"info"},{default:C(()=>[ut(Ee(U.$t("common.noData")),1)]),_:1})]))],64)):(Ne(),sn(Dr,{key:1},[S.value.mcpTool?(Ne(),sn("div",Qz,[S.value.mcpTool?Ra((Ne(),gt(ye,{key:0,ref_key:"dynamicsFormRef",ref:v,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:L[8]||(L[8]=en(()=>{},["prevent"]))},{default:C(()=>[(Ne(!0),sn(Dr,null,Oo(S.value.tool_form_field,Je=>(Ne(),gt(G,{key:Je.field,required:Je.required},{label:C(()=>[J("div",eH,[J("div",null,[P($S,{label:Je.label.label,tooltip:Je.label.attrs.tooltip},null,8,["label","tooltip"]),Je.required?(Ne(),sn("span",tH,"*")):Rn("",!0)]),P(X,{teleported:!1,modelValue:Je.source,"onUpdate:modelValue":Yt=>Je.source=Yt,size:"small",style:{width:"85px"}},{default:C(()=>[P($,{label:U.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),P($,{label:U.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:C(()=>[Je.source==="custom"&&Je.input_type==="TextInput"?(Ne(),gt(me,{key:0,modelValue:S.value.toolParams[Je.label.label],"onUpdate:modelValue":Yt=>S.value.toolParams[Je.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="NumberInput"?(Ne(),gt(He,{key:1,modelValue:S.value.toolParams[Je.label.label],"onUpdate:modelValue":Yt=>S.value.toolParams[Je.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="SwitchInput"?(Ne(),gt(tt,{key:2,modelValue:S.value.toolParams[Je.label.label],"onUpdate:modelValue":Yt=>S.value.toolParams[Je.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Je.source==="custom"&&Je.input_type==="JsonInput"?(Ne(),gt(me,{key:3,modelValue:S.value.toolParams[Je.label.label],"onUpdate:modelValue":Yt=>S.value.toolParams[Je.label.label]=Yt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):Rn("",!0),Je.source==="referencing"?(Ne(),gt(Zo,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.variable.placeholder"),modelValue:S.value.toolParams[Je.label.label],"onUpdate:modelValue":Yt=>S.value.toolParams[Je.label.label]=Yt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):Rn("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[Ot,d.value]]):Rn("",!0)])):(Ne(),sn("div",Jz,[P(we,{type:"info"},{default:C(()=>[ut(Ee(U.$t("common.noData")),1)]),_:1})]))],64))]),_:1},8,["nodeModel"])}}});class oH extends Qo{constructor(t){super(t,rH)}}const iH={type:"mcp-node",model:ei,view:oH},aH=Object.freeze(Object.defineProperty({__proto__:null,default:iH},Symbol.toStringTag,{value:"Module"})),lH={class:"p-8"},uH={class:"dialog-footer"},sH=ir({__name:"DatabaseSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ue(),u=Ue({databaseSetting:{type:"mysql",host:"127.0.0.1",port:3306,username:"",password:"",database:"mysql"}}),c=Ue(!1),v=Ue(!1),d=b=>{u.value={databaseSetting:Re.cloneDeep(b.databaseSetting)},c.value=!0},g=async()=>{a("refresh",u.value),c.value=!1};function _(b){b==="mysql"?(u.value.databaseSetting.port=3306,u.value.databaseSetting.database="mysql"):b==="postgresql"&&(u.value.databaseSetting.port=5432,u.value.databaseSetting.database="postgres")}return t({open:d}),(b,x)=>{const A=ee("el-radio"),M=ee("el-card"),O=ee("el-radio-group"),S=ee("el-form-item"),j=ee("el-input"),D=ee("el-col"),z=ee("el-input-number"),U=ee("el-row"),L=ee("el-form"),$=ee("el-scrollbar"),X=ee("el-button"),Y=ee("el-dialog"),H=Hd("loading");return Ne(),gt(Y,{class:"scrollbar-dialog","align-center":"",title:b.$t("common.paramSetting"),modelValue:c.value,"onUpdate:modelValue":x[8]||(x[8]=B=>c.value=B),width:"550px","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:C(()=>[J("span",uH,[P(X,{onClick:x[6]||(x[6]=en(B=>c.value=!1,["prevent"]))},{default:C(()=>[ut(Ee(b.$t("common.cancel")),1)]),_:1}),P(X,{type:"primary",onClick:x[7]||(x[7]=B=>g()),loading:v.value},{default:C(()=>[ut(Ee(b.$t("common.save")),1)]),_:1},8,["loading"])])]),default:C(()=>[P($,{"max-height":"550"},{default:C(()=>[J("div",lH,[Ra((Ne(),gt(L,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:u.value},{default:C(()=>[P(S,{label:"数据库类型"},{default:C(()=>[P(O,{modelValue:u.value.databaseSetting.type,"onUpdate:modelValue":x[0]||(x[0]=B=>u.value.databaseSetting.type=B),class:"card__radio",onChange:_},{default:C(()=>[P(M,{shadow:"never",class:Du(["mb-16",u.value.type==="mysql"?"active":""])},{default:C(()=>[P(A,{value:"mysql",size:"small"},{default:C(()=>x[9]||(x[9]=[J("p",{class:"mb-4"}," MYSQL ",-1)])),_:1,__:[9]})]),_:1},8,["class"]),P(M,{shadow:"never",class:Du(["mb-16",u.value.databaseSetting.type==="postgresql"?"active":""])},{default:C(()=>[P(A,{value:"postgresql",size:"small"},{default:C(()=>x[10]||(x[10]=[J("p",{class:"mb-4"}," POSTGRESQL ",-1)])),_:1,__:[10]})]),_:1},8,["class"])]),_:1},8,["modelValue"])]),_:1}),P(U,{gutter:10},{default:C(()=>[P(D,{span:12},{default:C(()=>[P(S,null,{label:C(()=>x[11]||(x[11]=[J("div",{class:"flex align-center"},[J("span",{class:"mr-4"},"host")],-1)])),default:C(()=>[P(j,{modelValue:u.value.databaseSetting.host,"onUpdate:modelValue":x[1]||(x[1]=B=>u.value.databaseSetting.host=B),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),P(D,{span:12},{default:C(()=>[P(S,{label:"port"},{default:C(()=>[P(z,{modelValue:u.value.databaseSetting.port,"onUpdate:modelValue":x[2]||(x[2]=B=>u.value.databaseSetting.port=B),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),P(U,{gutter:10},{default:C(()=>[P(D,{span:12},{default:C(()=>[P(S,null,{label:C(()=>x[12]||(x[12]=[J("div",{class:"flex align-center"},[J("span",{class:"mr-4"},"username")],-1)])),default:C(()=>[P(j,{modelValue:u.value.databaseSetting.username,"onUpdate:modelValue":x[3]||(x[3]=B=>u.value.databaseSetting.username=B),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),P(D,{span:12},{default:C(()=>[P(S,{label:"password"},{default:C(()=>[P(j,{modelValue:u.value.databaseSetting.password,"onUpdate:modelValue":x[4]||(x[4]=B=>u.value.databaseSetting.password=B),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),P(S,{label:"database"},{default:C(()=>[P(j,{modelValue:u.value.databaseSetting.database,"onUpdate:modelValue":x[5]||(x[5]=B=>u.value.databaseSetting.database=B),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[H,v.value]])])]),_:1})]),_:1},8,["title","modelValue"])}}}),cH={class:"title-decoration-1 mb-8"},fH={class:"flex-between w-full"},dH={class:"flex-between"},pH={class:"flex-between"},hH={class:"w-full"},vH=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=Ue(),c=()=>{var $;($=u.value)==null||$.open(_.value)},v=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),d=$=>{var X;$?(X=M.value)==null||X.reset_default($,a):z({})},g={dialogueNumber:1,dialogueType:"WORK_FLOW",databaseSetting:{type:"mysql",host:"127.0.0.1",port:3306,database:"mysql",username:"root",password:"123456"},questionReferenceAddress:[]},_=or({get:()=>(b.nodeModel.properties.nodeData||Re.set(b.nodeModel.properties,"nodeData",g),b.nodeModel.properties.nodeData),set:$=>{Re.set(b.nodeModel.properties,"nodeData",$)}}),b=e,x=Ue(),A=Ue(null),M=Ue(),O=()=>{var $;return($=x.value)==null?void 0:$.validate().catch(X=>Promise.reject({node:b.nodeModel,errMessage:X}))},S=t();function j(){var X;const $=r.value==="systemManage"?{modelType:"LLM",workspaceId:(X=S.value)==null?void 0:X.workspaceId}:{modelType:"LLM"};Eo({type:"model",systemType:r.value}).getSelectModelList($).then(Y=>{A.value=Re.groupBy(Y==null?void 0:Y.data,"provider")})}const D=$=>{var X;$&&((X=M.value)==null||X.open($,a,_.value.modelParamsSetting))};function z($){Re.set(b.nodeModel.properties.nodeData,"modelParamsSetting",$)}function U($){Re.set(b.nodeModel.properties.nodeData,"databaseSetting",$.databaseSetting)}const L=Ue();return oo(()=>{var $;j(),typeof(($=b.nodeModel.properties.nodeData)==null?void 0:$.isResult)>"u"&&yc(b.nodeModel)&&Re.set(b.nodeModel.properties.nodeData,"isResult",!0),Re.set(b.nodeModel,"validate",O),_.value.type||(_.value.type="mysql")}),($,X)=>{const Y=ee("el-button"),H=ee("el-form-item"),B=ee("el-option"),G=ee("el-select"),K=ee("el-input-number"),Q=ee("el-col"),ce=ee("el-row"),ue=ee("el-form"),de=ee("el-card");return Ne(),gt(Jo,{nodeModel:$.nodeModel},{default:C(()=>[J("h5",cH,Ee($.$t("views.applicationWorkflow.nodeSetting")),1),P(de,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(ue,{onSubmit:X[5]||(X[5]=en(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:x,"hide-required-asterisk":""},{default:C(()=>[P(H,{label:$.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:$.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:C(()=>[J("div",fH,[J("div",null,[J("span",null,[ut(Ee($.$t("views.application.form.aiModel.label")),1),X[6]||(X[6]=J("span",{class:"color-danger"},"*",-1))])]),P(Y,{disabled:!_.value.modelId,type:"primary",link:"",onClick:X[0]||(X[0]=ye=>D(_.value.modelId)),onRefreshForm:z},{default:C(()=>[P(Cr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[P(Cf,{onChange:d,onWheel:v,teleported:!1,modelValue:_.value.modelId,"onUpdate:modelValue":X[1]||(X[1]=ye=>_.value.modelId=ye),placeholder:$.$t("views.application.form.aiModel.placeholder"),options:A.value,onSubmitModel:j,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),P(H,{label:$.$t("views.application.form.historyRecord.label")},{label:C(()=>[J("div",dH,[J("div",null,Ee($.$t("views.application.form.historyRecord.label")),1),P(G,{modelValue:_.value.dialogueType,"onUpdate:modelValue":X[2]||(X[2]=ye=>_.value.dialogueType=ye),type:"small",style:{width:"100px"}},{default:C(()=>[P(B,{label:$.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),P(B,{label:$.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[P(K,{modelValue:_.value.dialogueNumber,"onUpdate:modelValue":X[3]||(X[3]=ye=>_.value.dialogueNumber=ye),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),P(H,{label:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:C(()=>[J("div",pH,[X[7]||(X[7]=J("span",null,"数据库配置",-1)),P(Y,{type:"primary",link:"",onClick:c},{default:C(()=>[P(Cr,{iconName:"app-setting"})]),_:1})])]),default:C(()=>[J("div",hH,[P(ce,null,{default:C(()=>[P(Q,{span:12,class:"color-secondary lighter"},{default:C(()=>X[8]||(X[8]=[ut("数据库类型",-1)])),_:1,__:[8]}),P(Q,{span:12,class:"lighter"},{default:C(()=>[ut(Ee(_.value.databaseSetting.type),1)]),_:1}),P(Q,{span:12,class:"color-secondary lighter"},{default:C(()=>X[9]||(X[9]=[ut("host",-1)])),_:1,__:[9]}),P(Q,{span:12,class:"lighter"},{default:C(()=>[ut(Ee(_.value.databaseSetting.host),1)]),_:1}),P(Q,{span:12,class:"color-secondary lighter"},{default:C(()=>X[10]||(X[10]=[ut("port",-1)])),_:1,__:[10]}),P(Q,{span:12,class:"lighter"},{default:C(()=>[ut(Ee(_.value.databaseSetting.port),1)]),_:1}),P(Q,{span:12,class:"color-secondary lighter"},{default:C(()=>X[11]||(X[11]=[ut("database",-1)])),_:1,__:[11]}),P(Q,{span:12,class:"lighter"},{default:C(()=>[ut(Ee(_.value.databaseSetting.database),1)]),_:1})]),_:1})])]),_:1},8,["label"]),P(H,{label:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:C(()=>[P(Zo,{ref_key:"nodeCascaderRef",ref:L,nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:_.value.questionReferenceAddress,"onUpdate:modelValue":X[4]||(X[4]=ye=>_.value.questionReferenceAddress=ye)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),P(fh,{ref_key:"AIModeParamSettingDialogRef",ref:M,onRefresh:z},null,512),P(sH,{ref_key:"ParamSettingDialogRef",ref:u,onRefresh:U},null,512)]),_:1},8,["nodeModel"])}}});class mH extends Qo{constructor(t){super(t,vH)}}const yH={type:"nl2sql-node",model:ei,view:mH},gH=Object.freeze(Object.defineProperty({__proto__:null,default:yH},Symbol.toStringTag,{value:"Module"})),_H={class:"dialog-footer"},bH=ir({__name:"ParametersFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"boolean",label:"Boolean"},{value:"array",label:"Array"}],u=Ue(),c=Ue(!1),v=Ue(!1),d=Ue(null),g=Ue({field:"",label:"",parameterType:"",desc:""}),_=ch({label:[{required:!0,message:St("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:St("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:St("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),b=Ue(!1),x=(O,S)=>{O&&(g.value=Re.cloneDeep(O),v.value=!0,d.value=S),b.value=!0},A=()=>{b.value=!1,v.value=!1,d.value=null,g.value={field:"",label:""}},M=async O=>{O&&await O.validate(S=>{S&&a("refresh",g.value,d.value)})};return t({open:x,close:A}),(O,S)=>{const j=ee("el-input"),D=ee("el-form-item"),z=ee("el-option"),U=ee("el-select"),L=ee("el-form"),$=ee("el-button"),X=ee("el-dialog");return Ne(),gt(X,{title:v.value?O.$t("common.param.editParam"):O.$t("common.param.addParam"),modelValue:b.value,"onUpdate:modelValue":S[5]||(S[5]=Y=>b.value=Y),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":A,"append-to-body":""},{footer:C(()=>[J("span",_H,[P($,{onClick:en(A,["prevent"])},{default:C(()=>[ut(Ee(O.$t("common.cancel")),1)]),_:1}),P($,{type:"primary",onClick:S[4]||(S[4]=Y=>M(u.value)),loading:c.value},{default:C(()=>[ut(Ee(O.$t("common.save")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(L,{"label-position":"top",ref_key:"fieldFormRef",ref:u,rules:_,model:g.value,"require-asterisk-position":"right"},{default:C(()=>[P(D,{label:O.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:_.field},{default:C(()=>[P(j,{modelValue:g.value.field,"onUpdate:modelValue":S[0]||(S[0]=Y=>g.value.field=Y),maxlength:64,placeholder:O.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),P(D,{label:O.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:_.label},{default:C(()=>[P(j,{modelValue:g.value.label,"onUpdate:modelValue":S[1]||(S[1]=Y=>g.value.label=Y),maxlength:64,"show-word-limit":"",placeholder:O.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),P(D,{label:O.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType"),required:!0,prop:"parameterType",rules:_.label},{default:C(()=>[P(U,{modelValue:g.value.parameterType,"onUpdate:modelValue":S[2]||(S[2]=Y=>g.value.parameterType=Y),placeholder:O.$t("common.selectPlaceholder")+O.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType"),style:{width:"100%"}},{default:C(()=>[(Ne(),sn(Dr,null,Oo(r,Y=>P(z,{key:Y.value,label:Y.label,value:Y.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),P(D,{label:O.$t("common.desc"),prop:"desc"},{default:C(()=>[P(j,{modelValue:g.value.desc,"onUpdate:modelValue":S[3]||(S[3]=Y=>g.value.desc=Y),style:{width:"100%"},rows:2,type:"textarea",placeholder:O.$t("common.descPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),wH={class:"flex-between w-full"},EH={class:"break-all lighter"},OH={class:"ml-4",style:{"margin-top":"-4px"}},SH=["title"],xH=["title"],AH={class:"mr-4"},TH=ir({__name:"ParametersFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ue(),a=Ue(),r=Ue([]);function u(d,g){a.value.open(d,g)}function c(d){r.value.splice(d,1);const g=[{label:St("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];Re.set(t.nodeModel.properties.config,"fields",g)}function v(d,g){for(let b=0;b<r.value.length;b++)if(r.value[b].field===d.field&&g!==b){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+d.field);return}[void 0,null].includes(g)?r.value.push(d):r.value.splice(g,1,d),a.value.close();const _=[{label:St("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];Re.set(t.nodeModel.properties.config,"fields",_)}return oo(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=Re.cloneDeep(t.nodeModel.properties.nodeData.variableList)),Re.set(t.nodeModel.properties.nodeData,"variableList",r);const d=[{label:St("common.result"),value:"result"},...r.value.map(g=>({label:g.label,value:g.field}))];Re.set(t.nodeModel.properties.config,"fields",d)}),(d,g)=>{var O;const _=ee("el-button"),b=ee("el-table-column"),x=ee("el-tag"),A=ee("el-tooltip"),M=ee("el-table");return Ne(),sn(Dr,null,[J("div",wH,[J("h5",EH,[ut(Ee(d.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.label"))+" ",1),g[1]||(g[1]=J("span",{class:"color-danger"},"*",-1))]),J("span",OH,[P(_,{link:"",type:"primary",onClick:g[0]||(g[0]=S=>u())},{default:C(()=>[P(Cr,{iconName:"app-add-outlined",class:"mr-4"})]),_:1})])]),((O=t.nodeModel.properties.nodeData.variableList)==null?void 0:O.length)>0?(Ne(),gt(M,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:C(()=>[P(b,{prop:"field",label:d.$t("dynamicsForm.paramForm.field.label"),width:"90"},{default:C(({row:S})=>[J("span",{title:S.field,class:"ellipsis-1"},Ee(S.field),9,SH)]),_:1},8,["label"]),P(b,{prop:"label",label:d.$t("dynamicsForm.paramForm.name.label")},{default:C(({row:S})=>[J("span",null,[J("span",{title:S.label,class:"ellipsis-1"},Ee(S.label),9,xH)])]),_:1},8,["label"]),P(b,{prop:"label",label:d.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType")},{default:C(({row:S})=>[P(x,{type:"info",class:"info-tag"},{default:C(()=>[ut(Ee(S.parameterType),1)]),_:2},1024)]),_:1},8,["label"]),P(b,{label:d.$t("common.operation"),align:"left",width:"80"},{default:C(({row:S,$index:j})=>[J("span",AH,[P(A,{effect:"dark",content:d.$t("common.modify"),placement:"top"},{default:C(()=>[P(_,{type:"primary",text:"",onClick:en(D=>u(S,j),["stop"])},{default:C(()=>[P(Cr,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),P(A,{effect:"dark",content:d.$t("common.delete"),placement:"top"},{default:C(()=>[P(_,{type:"primary",text:"",onClick:D=>c(j)},{default:C(()=>[P(Cr,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Rn("",!0),P(bH,{ref_key:"ParametersFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),MH={class:"title-decoration-1 mb-8"},kH={class:"flex-between w-full"},PH={class:"flex-between"},RH=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=e,a=Ue(),r=aa(),{params:{id:u}}=r,c=D=>{var z;D&&((z=a.value)==null||z.open(D,u,M.value.modelParamsSetting))};function v(D){Re.set(n.nodeModel.properties.nodeData,"modelParamsSetting",D)}const d=t(),g=Ue(null),_=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0),b=or(()=>r.path.includes("resource-management")?"systemManage":"workspace");function x(){var z;const D=b.value==="systemManage"?{modelType:"LLM",workspace_id:(z=d.value)==null?void 0:z.workspace_id}:{modelType:"LLM"};Eo({type:"model",systemType:b.value}).getSelectModelList(D).then(U=>{g.value=Re.groupBy(U==null?void 0:U.data,"provider")})}const A={inputVariable:[],modelParamsSetting:{},modelId:"",variableList:[]},M=or({get:()=>(n.nodeModel.properties.nodeData||Re.set(n.nodeModel.properties,"nodeData",A),n.nodeModel.properties.nodeData),set:D=>{Re.set(n.nodeModel.properties,"nodeData",D)}}),O=D=>{var z;D?(z=a.value)==null||z.reset_default(D,u):v({})},S=Ue(),j=async()=>S.value.validate();return oo(()=>{x(),Re.set(n.nodeModel,"validate",j)}),(D,z)=>{const U=ee("el-button"),L=ee("el-form-item"),$=ee("el-form"),X=ee("el-card");return Ne(),gt(Jo,{nodeModel:D.nodeModel},{default:C(()=>[J("h5",MH,Ee(D.$t("views.applicationWorkflow.nodeSetting")),1),P(X,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P($,{onSubmit:z[3]||(z[3]=en(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:S,"hide-required-asterisk":""},{default:C(()=>[P(L,{label:D.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:D.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:C(()=>[J("div",kH,[J("div",null,[J("span",null,[ut(Ee(D.$t("views.application.form.aiModel.label")),1),z[4]||(z[4]=J("span",{class:"color-danger ml-4"},"*",-1))])]),P(U,{disabled:!M.value.modelId,type:"primary",link:"",onClick:z[0]||(z[0]=Y=>c(M.value.modelId)),onRefreshForm:v},{default:C(()=>[P(Cr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[P(Cf,{onChange:O,onWheel:_,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":z[1]||(z[1]=Y=>M.value.modelId=Y),placeholder:D.$t("views.application.form.aiModel.placeholder"),options:g.value,onSubmitModel:x,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),P(L,{prop:"inputVariable",rules:{message:D.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:C(()=>[J("div",PH,[J("div",null,[ut(Ee(D.$t("views.applicationWorkflow.nodes.variableSplittingNode.inputVariables"))+" ",1),z[5]||(z[5]=J("span",{class:"color-danger"},"*",-1))])])]),default:C(()=>[P(Zo,{ref:"nodeCascaderRef",nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.variable.placeholder"),modelValue:M.value.inputVariable,"onUpdate:modelValue":z[2]||(z[2]=Y=>M.value.inputVariable=Y)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),P(L,{prop:"variableList",rules:{message:D.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.label"),trigger:"blur",required:!0}},{default:C(()=>[P(TH,{ref:"ParametersFieldTableRef","node-model":D.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),P(fh,{ref_key:"AIModeParamSettingDialogRef",ref:a,onRefresh:v},null,512)]),_:1},8,["nodeModel"])}}});class NH extends Qo{constructor(t){super(t,RH)}}const CH={type:"parameter-extraction-node",model:ei,view:NH},DH=Object.freeze(Object.defineProperty({__proto__:null,default:CH},Symbol.toStringTag,{value:"Module"})),jH={class:"title-decoration-1 mb-8"},IH={class:"flex-between"},LH={class:"flex align-center"},FH={class:"mr-4"},$H={class:"flex-between w-full"},BH={class:"flex align-center"},UH={class:"mr-4"},VH={class:"flex"},GH=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=Ue(),c=L=>L.ctrlKey===!0?(L.preventDefault(),!0):(L.stopPropagation(),!0),v=L=>{var $;L?($=u.value)==null||$.reset_default(L,a):x({})};function d(L){Re.set(O.nodeModel.properties.nodeData,"prompt",L)}function g(L){Re.set(O.nodeModel.properties.nodeData,"system",L)}const _=`${St("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${St("views.applicationWorkflow.nodes.startNode.label")}.question}}
${St("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,b={modelId:"",system:St("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:_,dialogueNumber:1,isResult:!1};function x(L){Re.set(O.nodeModel.properties.nodeData,"modelParamsSetting",L)}const A=L=>{var $;L&&(($=u.value)==null||$.open(L,a,M.value.modelParamsSetting))},M=or({get:()=>(O.nodeModel.properties.nodeData||Re.set(O.nodeModel.properties,"nodeData",b),O.nodeModel.properties.nodeData),set:L=>{Re.set(O.nodeModel.properties,"nodeData",L)}}),O=e,S=Ue(),j=Ue(null),D=()=>{var L;return(L=S.value)==null?void 0:L.validate().catch($=>Promise.reject({node:O.nodeModel,errMessage:$}))},z=t();function U(){var $;const L=r.value==="systemManage"?{modelType:"LLM",workspaceId:($=z.value)==null?void 0:$.workspaceId}:{modelType:"LLM"};Eo({type:"model",systemType:r.value}).getSelectModelList(L).then(X=>{j.value=Re.groupBy(X==null?void 0:X.data,"provider")})}return oo(()=>{var L;U(),typeof((L=O.nodeModel.properties.nodeData)==null?void 0:L.isResult)>"u"&&yc(O.nodeModel)&&Re.set(O.nodeModel.properties.nodeData,"isResult",!0),Re.set(O.nodeModel,"validate",D)}),(L,$)=>{const X=ee("AppIcon"),Y=ee("el-button"),H=ee("ModelSelect"),B=ee("el-form-item"),G=ee("el-tooltip"),K=ee("el-input-number"),Q=ee("el-switch"),ce=ee("el-form"),ue=ee("el-card");return Ne(),gt(Jo,{nodeModel:L.nodeModel},{default:C(()=>[J("h5",jH,Ee(L.$t("views.applicationWorkflow.nodeSetting")),1),P(ue,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(ce,{onSubmit:$[7]||($[7]=en(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"questionNodeFormRef",ref:S,"hide-required-asterisk":""},{default:C(()=>[P(B,{label:L.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:L.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:C(()=>[J("div",IH,[J("div",null,[J("span",null,[ut(Ee(L.$t("views.application.form.aiModel.label")),1),$[8]||($[8]=J("span",{class:"color-danger"},"*",-1))])]),P(Y,{type:"primary",link:"",disabled:!M.value.modelId,onClick:$[0]||($[0]=de=>A(M.value.modelId)),onRefreshForm:x},{default:C(()=>[P(X,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[P(H,{onChange:v,onWheel:c,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":$[1]||($[1]=de=>M.value.modelId=de),placeholder:L.$t("views.application.form.aiModel.placeholder"),options:j.value,onSubmitModel:U,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),P(B,{label:L.$t("views.application.form.roleSettings.label")},{default:C(()=>[P(ou,{title:L.$t("views.application.form.roleSettings.label"),modelValue:M.value.system,"onUpdate:modelValue":$[2]||($[2]=de=>M.value.system=de),style:{height:"100px"},onSubmitDialog:g,placeholder:L.$t("views.application.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),P(B,{label:L.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:L.$t("views.application.form.prompt.tooltip"),trigger:"blur"}},{label:C(()=>[J("div",LH,[J("div",FH,[J("span",null,[ut(Ee(L.$t("views.application.form.prompt.label")),1),$[9]||($[9]=J("span",{class:"color-danger"},"*",-1))])]),P(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(L.$t("views.application.form.prompt.tooltip")),1)]),default:C(()=>[P(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[P(ou,{onWheel:c,title:L.$t("views.application.form.prompt.label"),modelValue:M.value.prompt,"onUpdate:modelValue":$[3]||($[3]=de=>M.value.prompt=de),style:{height:"150px"},onSubmitDialog:d},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),P(B,{label:L.$t("views.application.form.historyRecord.label")},{default:C(()=>[P(K,{modelValue:M.value.dialogueNumber,"onUpdate:modelValue":$[4]||($[4]=de=>M.value.dialogueNumber=de),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),P(B,{label:L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[6]||($[6]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",$H,[J("div",BH,[J("div",UH,[J("span",null,Ee(L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),P(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[P(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),J("div",VH,[P(Q,{size:"small",modelValue:M.value.isResult,"onUpdate:modelValue":$[5]||($[5]=de=>M.value.isResult=de)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),P(fh,{ref_key:"AIModeParamSettingDialogRef",ref:u,onRefresh:x},null,512)]),_:1},8,["nodeModel"])}}});class WH extends Qo{constructor(t){super(t,GH)}}const zH={type:"question-node",model:ei,view:WH},HH=Object.freeze(Object.defineProperty({__proto__:null,default:zH},Symbol.toStringTag,{value:"Module"})),XH={class:"flex-between"},qH={class:"flex-between w-full"},YH={class:"flex align-center"},KH={class:"mr-4"},ZH={class:"flex"},JH=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),a={replyType:"content",content:"",fields:[],isResult:!0},r=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:g=>{Re.set(t.nodeModel.properties,"nodeData",g)}});function u(g){Re.set(t.nodeModel.properties.nodeData,"content",g)}const c=Ue(),v=Ue(),d=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))};return oo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&yc(t.nodeModel)&&Re.set(t.nodeModel.properties.nodeData,"isResult",!0),Re.set(t.nodeModel,"validate",d)}),(g,_)=>{const b=ee("el-option"),x=ee("el-select"),A=ee("el-form-item"),M=ee("el-tooltip"),O=ee("el-switch"),S=ee("el-form"),j=ee("el-card");return Ne(),gt(Jo,{nodeModel:g.nodeModel},{default:C(()=>[P(j,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(S,{onSubmit:_[5]||(_[5]=en(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:C(()=>[P(A,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:C(()=>[J("div",XH,[J("span",null,Ee(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),P(x,{teleported:!1,modelValue:r.value.replyType,"onUpdate:modelValue":_[0]||(_[0]=D=>r.value.replyType=D),size:"small",style:{width:"85px"}},{default:C(()=>[P(b,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),P(b,{label:g.$t("common.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[r.value.replyType==="content"?(Ne(),gt(ou,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":_[1]||(_[1]=D=>r.value.content=D),style:{height:"150px"},onSubmitDialog:u},null,8,["title","modelValue"])):(Ne(),gt(Zo,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":_[2]||(_[2]=D=>r.value.fields=D)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),P(A,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[4]||(_[4]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",qH,[J("div",YH,[J("div",KH,[J("span",null,Ee(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),P(M,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),J("div",ZH,[P(O,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":_[3]||(_[3]=D=>r.value.isResult=D)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class QH extends Qo{constructor(t){super(t,JH)}}const eX={type:"reply-node",model:ei,view:QH},tX=Object.freeze(Object.defineProperty({__proto__:null,default:eX},Symbol.toStringTag,{value:"Module"})),nX={class:"flex align-center"},rX={class:"mr-4"},oX={class:"dialog-footer"},iX=ir({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ue(),u=Ue({topN:3,similarity:0,maxParagraphCharNumber:5e3}),c=Ue(!1),v=Ue(!1);Qw(c,_=>{_||(u.value={topN:3,similarity:0,maxParagraphCharNumber:5e3})});const d=_=>{u.value={...u.value,...Re.cloneDeep(_)},c.value=!0},g=()=>{var _;(_=r==null?void 0:r.value)==null||_.validate((b,x)=>{b&&(a("refresh",Re.cloneDeep(u.value)),c.value=!1)})};return t({open:d}),(_,b)=>{const x=ee("AppIcon"),A=ee("el-tooltip"),M=ee("el-input-number"),O=ee("el-form-item"),S=ee("el-col"),j=ee("el-row"),D=ee("el-slider"),z=ee("el-form"),U=ee("el-button"),L=ee("el-dialog");return Ne(),gt(L,{"align-center":"",title:_.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":b[5]||(b[5]=$=>c.value=$),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:C(()=>[J("span",oX,[P(U,{onClick:b[3]||(b[3]=en($=>c.value=!1,["prevent"]))},{default:C(()=>[ut(Ee(_.$t("common.cancel")),1)]),_:1}),P(U,{type:"primary",onClick:b[4]||(b[4]=$=>g()),loading:v.value},{default:C(()=>[ut(Ee(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(z,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:u.value},{default:C(()=>[P(j,{gutter:12},{default:C(()=>[P(S,{span:12},{default:C(()=>[P(O,null,{label:C(()=>[J("div",nX,[J("span",rX,"Score "+Ee(_.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),P(A,{effect:"dark",content:_.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:C(()=>[P(x,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:C(()=>[P(M,{modelValue:u.value.similarity,"onUpdate:modelValue":b[0]||(b[0]=$=>u.value.similarity=$),min:0,max:u.value.searchMode==="hybrid"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),P(S,{span:12},{default:C(()=>[P(O,{label:_.$t("views.application.dialog.topReferences")},{default:C(()=>[P(M,{modelValue:u.value.topN,"onUpdate:modelValue":b[1]||(b[1]=$=>u.value.topN=$),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),P(O,{label:_.$t("views.application.dialog.maxCharacters")},{default:C(()=>[P(D,{modelValue:u.value.maxParagraphCharNumber,"onUpdate:modelValue":b[2]||(b[2]=$=>u.value.maxParagraphCharNumber=$),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),aX={class:"flex-between"},lX={class:"flex-between"},uX={class:"w-full"},sX={class:"flex-between"},cX={class:"flex-between"},fX={class:"flex-between"},dX=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ue(),v={reranker_reference_list:[[]],reranker_model_id:"",questionReferenceAddress:[],reranker_setting:{topN:3,similarity:0,maxParagraphCharNumber:5e3},show_knowledge:!1},d=Ue(null),g=()=>{var U;(U=c.value)==null||U.open(x.value.reranker_setting)},_=U=>{const L=Re.cloneDeep(u.nodeModel.properties.nodeData.reranker_reference_list);L.splice(U,1),Re.set(u.nodeModel.properties.nodeData,"reranker_reference_list",L)},b=U=>U.ctrlKey===!0?(U.preventDefault(),!0):(U.stopPropagation(),!0),x=or({get:()=>(u.nodeModel.properties.nodeData||Re.set(u.nodeModel.properties,"nodeData",v),u.nodeModel.properties.nodeData),set:U=>{Re.set(u.nodeModel.properties,"nodeData",U)}});function A(U){Re.set(u.nodeModel.properties.nodeData,"reranker_setting",U)}const M=t();function O(){var L;const U=r.value==="systemManage"?{modelType:"RERANKER",workspaceId:(L=M.value)==null?void 0:L.workspaceId}:{modelType:"RERANKER"};Eo({type:"model",systemType:r.value}).getSelectModelList(U).then($=>{d.value=Re.groupBy($==null?void 0:$.data,"provider")})}const S=()=>{const U=Re.cloneDeep(u.nodeModel.properties.nodeData.reranker_reference_list);U.push([]),Re.set(u.nodeModel.properties.nodeData,"reranker_reference_list",U)},j=Ue(),D=Ue(),z=()=>{var U;return Promise.all([D.value?D.value.validate():Promise.resolve(""),(U=j.value)==null?void 0:U.validate()]).catch(L=>Promise.reject({node:u.nodeModel,errMessage:L}))};return oo(()=>{O(),Re.set(u.nodeModel,"validate",z)}),(U,L)=>{const $=ee("Plus"),X=ee("el-icon"),Y=ee("el-button"),H=ee("el-form-item"),B=ee("el-col"),G=ee("AppIcon"),K=ee("el-row"),Q=ee("el-switch"),ce=ee("el-form"),ue=ee("el-card");return Ne(),gt(Jo,{nodeModel:U.nodeModel},{default:C(()=>[P(ue,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(ce,{onSubmit:L[4]||(L[4]=en(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:j,"hide-required-asterisk":""},{default:C(()=>[P(H,{label:U.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:U.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:C(()=>[J("div",aX,[J("span",null,[ut(Ee(U.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),L[5]||(L[5]=J("span",{class:"color-danger"},"*",-1))]),P(Y,{onClick:S,link:"",type:"primary"},{default:C(()=>[P(X,{class:"mr-4"},{default:C(()=>[P($)]),_:1})]),_:1})])]),default:C(()=>[(Ne(!0),sn(Dr,null,Oo(x.value.reranker_reference_list,(de,ye)=>(Ne(),gt(K,{gutter:8,style:{"margin-bottom":"8px"},key:ye,class:"w-full"},{default:C(()=>[P(B,{span:22},{default:C(()=>[P(H,{prop:"reranker_reference_list."+ye,rules:{type:"array",required:!0,message:U.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:C(()=>[(Ne(),gt(Zo,{key:ye,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:x.value.reranker_reference_list[ye],"onUpdate:modelValue":we=>x.value.reranker_reference_list[ye]=we},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),P(B,{span:2},{default:C(()=>[P(Y,{link:"",type:"info",onClick:we=>_(ye)},{default:C(()=>[P(G,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),P(H,{label:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:C(()=>[J("div",lX,[J("span",null,Ee(U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")),1),P(Y,{type:"primary",link:"",onClick:g},{default:C(()=>[P(G,{iconName:"app-setting"})]),_:1})])]),default:C(()=>[J("div",uX,[P(K,null,{default:C(()=>[P(B,{span:12,class:"color-secondary lighter"},{default:C(()=>[ut(" Score "+Ee(U.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),P(B,{span:12,class:"lighter"},{default:C(()=>{var de;return[ut(Ee((de=x.value.reranker_setting.similarity)==null?void 0:de.toFixed(3)),1)]}),_:1}),P(B,{span:12,class:"color-secondary lighter"},{default:C(()=>[ut(Ee(U.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),P(B,{span:12,class:"lighter"},{default:C(()=>[ut(Ee(x.value.reranker_setting.topN),1)]),_:1}),P(B,{span:12,class:"color-secondary lighter"},{default:C(()=>[ut(Ee(U.$t("views.applicationWorkflow.nodes.rerankerNode.maxParagraphCharNumber")),1)]),_:1}),P(B,{span:12,class:"lighter"},{default:C(()=>[ut(Ee(x.value.reranker_setting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),P(H,{label:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:C(()=>[J("div",sX,[J("span",null,[ut(Ee(U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label")),1),L[6]||(L[6]=J("span",{class:"color-danger"},"*",-1))])])]),default:C(()=>[P(Zo,{ref_key:"nodeCascaderRef",ref:D,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),modelValue:x.value.questionReferenceAddress,"onUpdate:modelValue":L[0]||(L[0]=de=>x.value.questionReferenceAddress=de)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),P(H,{label:U.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:U.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:C(()=>[J("div",cX,[J("span",null,[ut(Ee(U.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label")),1),L[7]||(L[7]=J("span",{class:"color-danger"},"*",-1))])])]),default:C(()=>[P(Cf,{onWheel:b,teleported:!1,modelValue:x.value.reranker_model_id,"onUpdate:modelValue":L[1]||(L[1]=de=>x.value.reranker_model_id=de),placeholder:U.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),options:d.value,onSubmitModel:O,showFooter:"","model-type":"RERANKER"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),P(H,{onClick:L[3]||(L[3]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",fX,[J("div",null,[J("span",null,Ee(U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.label")),1)]),J("div",null,[P(Q,{size:"small",modelValue:x.value.showKnowledge,"onUpdate:modelValue":L[2]||(L[2]=de=>x.value.showKnowledge=de)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1}),P(iX,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:A},null,512)]),_:1},8,["nodeModel"])}}}),pX=Zd(dX,[["__scopeId","data-v-4457ae3f"]]);class hX extends Qo{constructor(t){super(t,pX)}}const vX={type:"reranker-node",model:ei,view:hX},mX=Object.freeze(Object.defineProperty({__proto__:null,default:vX},Symbol.toStringTag,{value:"Module"})),yX={class:"title-decoration-1 mb-8"},gX={class:"flex-between"},_X={class:"w-full"},bX={class:"flex align-center",style:{"line-height":"20px"}},wX=["title"],EX={class:"flex-between"},OX={class:"w-full"},SX={class:"flex-between"},xX=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ue(),a={knowledgeIdList:[],knowledgeSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding"},questionReferenceAddress:[],showKnowledge:!1},r=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:S=>{Re.set(t.nodeModel.properties,"nodeData",S)}}),u=Ue(),c=Ue(),v=Ue(),d=Ue([]),g=Ue(!1);function _(S){Re.set(t.nodeModel.properties.nodeData,"knowledgeSetting",S.knowledgeSetting)}const b=()=>{var S;(S=c.value)==null||S.open(r.value,"WORK_FLOW")};function x(S){const j=t.nodeModel.properties.nodeData.knowledgeIdList.filter(D=>D!==S);Re.set(t.nodeModel.properties.nodeData,"knowledgeIdList",j)}function A(S){Re.set(t.nodeModel.properties.nodeData,"knowledgeIdList",S.map(j=>j.id)),d.value=S}function M(){v.value&&v.value.open(r.value.knowledgeIdList)}const O=()=>{var S;return Promise.all([n.value.validate(),(S=u.value)==null?void 0:S.validate()]).catch(j=>Promise.reject({node:t.nodeModel,errMessage:j}))};return oo(()=>{d.value=t.nodeModel.properties.nodeData.knowledgeList,Re.set(t.nodeModel,"validate",O)}),(S,j)=>{const D=ee("Plus"),z=ee("el-icon"),U=ee("el-button"),L=ee("el-text"),$=ee("Close"),X=ee("el-form-item"),Y=ee("el-col"),H=ee("el-row"),B=ee("el-switch"),G=ee("el-form"),K=ee("el-card");return Ne(),gt(Jo,{nodeModel:S.nodeModel},{default:C(()=>[J("h5",yX,Ee(S.$t("views.applicationWorkflow.nodeSetting")),1),P(K,{shadow:"never",class:"card-never"},{default:C(()=>[P(G,{onSubmit:j[3]||(j[3]=en(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"knowledgeNodeFormRef",ref:u},{default:C(()=>[P(X,{label:S.$t("views.chatLog.selectKnowledge")},{label:C(()=>[J("div",gX,[J("span",null,Ee(S.$t("views.chatLog.selectKnowledge")),1),P(U,{type:"primary",link:"",onClick:M},{default:C(()=>[P(z,null,{default:C(()=>[P(D)]),_:1})]),_:1})])]),default:C(()=>{var Q;return[J("div",_X,[((Q=r.value.knowledgeIdList)==null?void 0:Q.length)===0?(Ne(),gt(L,{key:0,type:"info"},{default:C(()=>[ut(Ee(S.$t("views.application.form.relatedKnowledge.placeholder")),1)]),_:1})):(Ne(!0),sn(Dr,{key:1},Oo(r.value.knowledgeIdList,(ce,ue)=>{var de,ye,we;return Ne(),sn("div",{key:ue,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[J("div",bX,[P(uI,{type:(de=ar(Vd)(d.value,ce,"id"))==null?void 0:de.type,class:"mr-8",size:20},null,8,["type"]),J("div",{class:"ellipsis",title:(ye=ar(Vd)(d.value,ce,"id"))==null?void 0:ye.name},Ee((we=ar(Vd)(d.value,ce,"id"))==null?void 0:we.name),9,wX)]),P(U,{text:"",onClick:me=>x(ce)},{default:C(()=>[P(z,null,{default:C(()=>[P($)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),P(X,{label:S.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:C(()=>[J("div",EX,[J("span",null,Ee(S.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")),1),P(U,{type:"primary",link:"",onClick:b},{default:C(()=>[P(Cr,{iconName:"app-setting"})]),_:1})])]),default:C(()=>[J("div",OX,[P(H,null,{default:C(()=>[P(Y,{span:12,class:"color-secondary lighter"},{default:C(()=>[ut(Ee(S.$t("views.application.dialog.selectSearchMode")),1)]),_:1}),P(Y,{span:12,class:"lighter"},{default:C(()=>[ut(Ee(S.$t(ar(sI)[r.value.knowledgeSetting.searchMode])),1)]),_:1}),P(Y,{span:12,class:"color-secondary lighter"},{default:C(()=>[ut(Ee(S.$t("views.application.dialog.similarityThreshold")),1)]),_:1}),P(Y,{span:12,class:"lighter"},{default:C(()=>{var Q;return[ut(Ee((Q=r.value.knowledgeSetting.similarity)==null?void 0:Q.toFixed(3)),1)]}),_:1}),P(Y,{span:12,class:"color-secondary lighter"},{default:C(()=>[ut(Ee(S.$t("views.application.dialog.topReferences")),1)]),_:1}),P(Y,{span:12,class:"lighter"},{default:C(()=>[ut(Ee(r.value.knowledgeSetting.topN),1)]),_:1}),P(Y,{span:12,class:"color-secondary lighter"},{default:C(()=>[ut(Ee(S.$t("views.application.dialog.maxCharacters")),1)]),_:1}),P(Y,{span:12,class:"lighter"},{default:C(()=>[ut(Ee(r.value.knowledgeSetting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),P(X,{label:S.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:S.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:C(()=>[P(Zo,{ref_key:"nodeCascaderRef",ref:n,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:r.value.questionReferenceAddress,"onUpdate:modelValue":j[0]||(j[0]=Q=>r.value.questionReferenceAddress=Q)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),P(X,{onClick:j[2]||(j[2]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",SX,[J("div",null,[J("span",null,Ee(S.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.label")),1)]),J("div",null,[P(B,{size:"small",modelValue:r.value.showKnowledge,"onUpdate:modelValue":j[1]||(j[1]=Q=>r.value.showKnowledge=Q)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1}),P(SI,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:_},null,512),P(xI,{ref_key:"AddKnowledgeDialogRef",ref:v,onAddData:A,data:d.value,loading:g.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class AX extends Qo{constructor(t){super(t,xX)}}const TX={type:"search-knowledge-node",model:ei,view:AX},MX=Object.freeze(Object.defineProperty({__proto__:null,default:TX},Symbol.toStringTag,{value:"Module"})),kX={class:"flex-between"},PX={class:"dialog-footer"},RX=ir({__name:"STTModelParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=aa(),{params:{id:r}}=a,u=or(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=Ue(!1),v=Ue({}),d=Ue(),g=Ue(""),_=Ue(!1),b=Ue([]),x=n,A=(S,j,D)=>{v.value={},g.value=S,Eo({type:"model",systemType:u.value}).getModelParamsForm(S,_).then(z=>{var L;b.value=z.data;const U=z.data.map($=>({[$.field]:$.show_default_value!==!1?$.default_value:void 0})).reduce(($,X)=>({...$,...X}),{});D&&Object.keys(D).forEach($=>{$ in U||delete D[$]}),D={...U,...D},(L=d.value)==null||L.render(b.value,D)}),c.value=!0},M=async()=>{var S;(S=d.value)==null||S.validate().then(()=>{x("refresh",v.value),c.value=!1})};return t({open:A,reset_default:(S,j)=>{Eo({type:"model",systemType:u.value}).getModelParamsForm(S,_).then(D=>{b.value=D.data;const z=D.data.map(U=>({[U.field]:U.show_default_value!==!1?U.default_value:void 0})).reduce((U,L)=>({...U,...L}),{});x("refresh",z)})}}),(S,j)=>{const D=ee("el-button"),z=ee("el-dialog");return Ne(),gt(z,{"align-center":"",title:S.$t("common.paramSetting"),modelValue:c.value,"onUpdate:modelValue":j[2]||(j[2]=U=>c.value=U),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:C(()=>[J("div",kX,[J("span",PX,[P(D,{onClick:j[1]||(j[1]=en(U=>c.value=!1,["prevent"]))},{default:C(()=>[ut(Ee(S.$t("common.cancel")),1)]),_:1}),P(D,{type:"primary",onClick:M,loading:_.value},{default:C(()=>[ut(Ee(S.$t("common.confirm")),1)]),_:1},8,["loading"])])])]),default:C(()=>[P(cI,{modelValue:v.value,"onUpdate:modelValue":j[0]||(j[0]=U=>v.value=U),model:v.value,"label-position":"top","require-asterisk-position":"right",render_data:b.value,ref_key:"dynamicsFormRef",ref:d},null,8,["modelValue","model","render_data"])]),_:1},8,["title","modelValue"])}}}),NX={class:"title-decoration-1 mb-8"},CX={class:"flex-between w-full"},DX={class:"flex-between w-full"},jX={class:"flex-between w-full"},IX={class:"flex align-center"},LX={class:"mr-4"},FX={class:"flex"},$X=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ue(null),v=Ue(),d=Ue(),g=Ue(),_=()=>{var z;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(z=d.value)==null?void 0:z.validate()]).catch(U=>Promise.reject({node:u.nodeModel,errMessage:U}))},b=z=>z.ctrlKey===!0?(z.preventDefault(),!0):(z.stopPropagation(),!0),x={stt_model_id:"",isResult:!0,audioList:[],modelParamsSetting:{}},A=or({get:()=>(u.nodeModel.properties.nodeData||Re.set(u.nodeModel.properties,"nodeData",x),u.nodeModel.properties.nodeData),set:z=>{Re.set(u.nodeModel.properties,"nodeData",z)}}),M=()=>{var U;const z=A.value.stt_model_id;if(!z){Xd(St("views.application.form.voiceInput.requiredMessage"));return}(U=v.value)==null||U.open(z,a,A.value.modelParamsSetting)},O=z=>{Re.set(u.nodeModel.properties.nodeData,"modelParamsSetting",z)};function S(z){var U;z?(U=v.value)==null||U.reset_default(z,a):O({})}const j=t();function D(){var U;const z=r.value==="systemManage"?{modelType:"STT",workspace_id:(U=j.value)==null?void 0:U.workspace_id}:{modelType:"STT"};Eo({type:"model",systemType:r.value}).getSelectModelList(z).then(L=>{c.value=Re.groupBy(L==null?void 0:L.data,"provider")})}return oo(()=>{D(),Re.set(u.nodeModel,"validate",_)}),(z,U)=>{const L=ee("el-button"),$=ee("el-form-item"),X=ee("el-tooltip"),Y=ee("el-switch"),H=ee("el-form"),B=ee("el-card");return Ne(),gt(Jo,{"node-model":z.nodeModel},{default:C(()=>[J("h5",NX,Ee(z.$t("views.applicationWorkflow.nodeSetting")),1),P(B,{shadow:"never",class:"card-never"},{default:C(()=>[P(H,{onSubmit:U[4]||(U[4]=en(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:d,"hide-required-asterisk":""},{default:C(()=>[P($,{label:z.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label"),prop:"stt_model_id",rules:{required:!0,message:z.$t("views.application.form.voiceInput.placeholder"),trigger:"change"}},{label:C(()=>[J("div",CX,[J("div",null,[J("span",null,[ut(Ee(z.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),U[5]||(U[5]=J("span",{class:"color-danger"},"*",-1))])]),P(L,{type:"primary",link:"",onClick:M,disabled:!A.value.stt_model_id,class:"mr-4"},{default:C(()=>[P(Cr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[P(Cf,{onWheel:b,teleported:!1,onChange:S,modelValue:A.value.stt_model_id,"onUpdate:modelValue":U[0]||(U[0]=G=>A.value.stt_model_id=G),placeholder:z.$t("views.application.form.voiceInput.placeholder"),options:c.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),P($,{label:z.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:z.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:C(()=>[J("div",DX,[J("div",null,[J("span",null,[ut(Ee(z.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),U[6]||(U[6]=J("span",{class:"color-danger"},"*",-1))])])])]),default:C(()=>[P(Zo,{ref_key:"nodeCascaderRef",ref:g,nodeModel:z.nodeModel,class:"w-full",placeholder:z.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:A.value.audioList,"onUpdate:modelValue":U[1]||(U[1]=G=>A.value.audioList=G)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),P($,{label:z.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:U[3]||(U[3]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",jX,[J("div",IX,[J("div",LX,[J("span",null,Ee(z.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),P(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(z.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),J("div",FX,[P(Y,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":U[2]||(U[2]=G=>A.value.isResult=G)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),P(RX,{ref_key:"STTModeParamSettingDialogRef",ref:v,onRefresh:O},null,512)]),_:1},8,["node-model"])}}});class BX extends Qo{constructor(t){super(t,$X)}}const UX={type:"speech-to-text-node",model:ei,view:BX},VX=Object.freeze(Object.defineProperty({__proto__:null,default:UX},Symbol.toStringTag,{value:"Module"})),GX={class:"title-decoration-1 mb-8"},WX={class:"break-all"},zX={class:"title-decoration-1 mb-8"},HX={class:"break-all"},XX=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ue(!1),a=[{label:St("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:St("views.application.form.historyRecord.label"),value:"historyContext"},{label:St("chat.chatId"),value:"chatId"},{label:St("chat.chatUserId"),value:"chatUserId"},{label:St("chat.chatUserType"),value:"chatUserType"},{label:St("chat.chatUser"),value:"chatUser"}],r=()=>{const d=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").map(_=>Re.cloneDeep(_.properties.user_input_field_list)).reduce((_,b)=>[..._,...b],[]).map(_=>_.label&&_.label.input_type==="TooltipLabel"?{label:_.label.label,value:_.field||_.variable}:{label:_.label||_.name,value:_.field||_.variable}),g=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").map(_=>Re.cloneDeep(_.properties.api_input_field_list)).reduce((_,b)=>[..._,...b],[]).map(_=>({label:_.name||_.variable,value:_.variable}));return[...d,...g]},u=()=>{const d=r();Re.set(t.nodeModel.properties.config,"globalFields",[...a,...d])},c=()=>{const d=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>Re.cloneDeep(g.properties.chat_input_field_list)).reduce((g,_)=>[...g,..._],[]).map(g=>({label:g.label,value:g.field}));Re.set(t.nodeModel.properties.config,"chatFields",d)};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",u),t.nodeModel.graphModel.eventCenter.on("chatFieldList",c);const v=()=>{let d=Re.cloneDeep(t.nodeModel.properties.config.fields);const g=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").filter(b=>b.properties.nodeData.fileUploadEnable).map(b=>Re.cloneDeep(b.properties.nodeData.fileUploadSetting)).filter(b=>b);if(d=d.filter(b=>b.value!=="image"&&b.value!=="document"&&b.value!=="audio"&&b.value!=="video"&&b.value!=="other"),g.length===0){Re.set(t.nodeModel.properties.config,"fields",d);return}const _=[];g[0].document&&_.push({label:St("common.fileUpload.document"),value:"document"}),g[0].image&&_.push({label:St("common.fileUpload.image"),value:"image"}),g[0].audio&&_.push({label:St("common.fileUpload.audio"),value:"audio"}),g[0].video&&_.push({label:St("common.fileUpload.video"),value:"video"}),g[0].other&&_.push({label:St("common.fileUpload.other"),value:"other"}),Re.set(t.nodeModel.properties.config,"fields",[...d,..._])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",v),oo(()=>{c(),u(),v()}),(d,g)=>{const _=ee("el-button"),b=ee("el-tooltip");return Ne(),gt(Jo,{nodeModel:d.nodeModel},{default:C(()=>[J("h5",GX,Ee(d.$t("views.applicationWorkflow.variable.global")),1),(Ne(!0),sn(Dr,null,Oo(d.nodeModel.properties.config.globalFields,(x,A)=>(Ne(),sn("div",{key:A,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:g[0]||(g[0]=M=>n.value=!0),onMouseleave:g[1]||(g[1]=M=>n.value=!1)},[J("span",WX,Ee(x.label)+" "+Ee("{"+x.value+"}"),1),n.value===!0?(Ne(),gt(b,{key:0,effect:"dark",content:d.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:C(()=>[P(_,{link:"",onClick:M=>ar(hw)(`{{global.${x.value}}}`),style:{padding:"0"}},{default:C(()=>[P(Cr,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Rn("",!0)],32))),128)),d.nodeModel.properties.config.chatFields?(Ne(),sn(Dr,{key:0},[J("h5",zX,Ee(d.$t("views.applicationWorkflow.variable.chat")),1),(Ne(!0),sn(Dr,null,Oo(d.nodeModel.properties.config.chatFields?d.nodeModel.properties.config.chatFields:[],(x,A)=>(Ne(),sn("div",{key:A,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:g[2]||(g[2]=M=>n.value=!0),onMouseleave:g[3]||(g[3]=M=>n.value=!1)},[J("span",HX,Ee(x.label)+" "+Ee("{"+x.value+"}"),1),n.value===!0?(Ne(),gt(b,{key:0,effect:"dark",content:d.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:C(()=>[P(_,{link:"",onClick:M=>ar(hw)(`{{chat.${x.value}}}`),style:{padding:"0"}},{default:C(()=>[P(Cr,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Rn("",!0)],32))),128))],64)):Rn("",!0)]),_:1},8,["nodeModel"])}}});class qX extends Qo{constructor(t){super(t,XX)}}const YX={type:"start-node",model:ei,view:qX},KX=Object.freeze(Object.defineProperty({__proto__:null,default:YX},Symbol.toStringTag,{value:"Module"})),ZX={class:"title-decoration-1 mb-8"},JX={class:"flex-between w-full"},QX={class:"flex-between w-full"},eq={class:"flex-between w-full"},tq={class:"flex align-center"},nq={class:"mr-4"},rq={class:"flex"},oq=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=iu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ue(),v=Ue(null),d=Ue(),g=Ue(),_=()=>{var D;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(D=d.value)==null?void 0:D.validate()]).catch(z=>Promise.reject({node:u.nodeModel,errMessage:z}))},b=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0),x={ttsModelId:"",isResult:!0,content_list:[],modelParamsSetting:{}},A=or({get:()=>(u.nodeModel.properties.nodeData||Re.set(u.nodeModel.properties,"nodeData",x),u.nodeModel.properties.nodeData),set:D=>{Re.set(u.nodeModel.properties,"nodeData",D)}}),M=t();function O(){var z;const D=r.value==="systemManage"?{modelType:"TTS",workspaceId:(z=M.value)==null?void 0:z.workspaceId}:{modelType:"TTS"};Eo({type:"model",systemType:r.value}).getSelectModelList(D).then(U=>{v.value=Re.groupBy(U==null?void 0:U.data,"provider")})}const S=()=>{var z;const D=A.value.ttsModelId;if(!D){Xd(St("views.application.form.voicePlay.requiredMessage"));return}(z=c.value)==null||z.open(D,a,A.value.modelParamsSetting)},j=D=>{A.value.modelParamsSetting=D};return oo(()=>{O(),Re.set(u.nodeModel,"validate",_)}),(D,z)=>{const U=ee("el-button"),L=ee("ModelSelect"),$=ee("el-form-item"),X=ee("el-tooltip"),Y=ee("el-switch"),H=ee("el-form"),B=ee("el-card");return Ne(),gt(Jo,{"node-model":D.nodeModel},{default:C(()=>[J("h5",ZX,Ee(D.$t("views.applicationWorkflow.nodeSetting")),1),P(B,{shadow:"never",class:"card-never"},{default:C(()=>[P(H,{onSubmit:z[4]||(z[4]=en(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:d,"hide-required-asterisk":""},{default:C(()=>[P($,{label:D.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label"),prop:"ttsModelId",rules:{required:!0,message:D.$t("views.application.form.voicePlay.placeholder"),trigger:"change"}},{label:C(()=>[J("div",JX,[J("div",null,[J("span",null,[ut(Ee(D.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),z[5]||(z[5]=J("span",{class:"color-danger"},"*",-1))])]),P(U,{type:"primary",link:"",onClick:S,disabled:!A.value.ttsModelId,class:"mr-4"},{default:C(()=>[P(Cr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[P(L,{onWheel:b,teleported:!1,modelValue:A.value.ttsModelId,"onUpdate:modelValue":z[0]||(z[0]=G=>A.value.ttsModelId=G),placeholder:D.$t("views.application.form.voicePlay.placeholder"),options:v.value,showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),P($,{prop:"content_list",label:D.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:D.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:C(()=>[J("div",QX,[J("div",null,[J("span",null,[ut(Ee(D.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),z[6]||(z[6]=J("span",{class:"color-danger"},"*",-1))])])])]),default:C(()=>[P(Zo,{ref_key:"nodeCascaderRef",ref:g,nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:A.value.content_list,"onUpdate:modelValue":z[1]||(z[1]=G=>A.value.content_list=G)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),P($,{label:D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:z[3]||(z[3]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",eq,[J("div",tq,[J("div",nq,[J("span",null,Ee(D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),P(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),J("div",rq,[P(Y,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":z[2]||(z[2]=G=>A.value.isResult=G)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),P(iM,{ref_key:"TTSModeParamSettingDialogRef",ref:c,onRefresh:j},null,512)]),_:1},8,["node-model"])}}});class iq extends Qo{constructor(t){super(t,oq)}}const aq={type:"text-to-speech-node",model:ei,view:iq},lq=Object.freeze(Object.defineProperty({__proto__:null,default:aq},Symbol.toStringTag,{value:"Module"})),uq={class:"title-decoration-1 mb-16"},sq={class:"lighter mb-8"},cq={key:0},fq={class:"flex-between"},dq={class:"flex"},pq={class:"flex"},hq={key:0,class:"color-danger"},vq={class:"flex-between w-full"},mq={class:"flex align-center"},yq={class:"mr-4"},gq={class:"flex"},_q=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=aa(),a=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),r=Ue(),u={inputFieldList:[],isResult:!1},c=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",u),t.nodeModel.properties.nodeData),set:_=>{Re.set(t.nodeModel.properties,"nodeData",_)}}),v=Ue(),d=()=>{var _;return(_=v.value)==null?void 0:_.validate().catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))},g=()=>{if(!t.nodeModel.properties.nodeData.toolLibId){Re.set(t.nodeModel.properties,"status",500);return}Eo({type:"tool",systemType:a.value}).getToolById(t.nodeModel.properties.nodeData.toolLibId).then(_=>{const b=t.nodeModel.properties.nodeData.inputFieldList,x=_.data.inputFieldList.map(A=>{const M=b.find(O=>O.name==A.name);return M&&M.source==A.source?{...A,value:JSON.parse(JSON.stringify(M.value))}:{...A,value:A.source=="reference"?[]:""}});Re.set(t.nodeModel.properties.nodeData,"inputFieldList",x),Re.set(t.nodeModel.properties,"status",_.data.isActive?200:500)}).catch(()=>{Re.set(t.nodeModel.properties,"status",500)})};return oo(()=>{var _;typeof((_=t.nodeModel.properties.nodeData)==null?void 0:_.isResult)>"u"&&yc(t.nodeModel)&&Re.set(t.nodeModel.properties.nodeData,"isResult",!0),g(),Re.set(t.nodeModel,"validate",d)}),(_,b)=>{const x=ee("el-tag"),A=ee("el-option"),M=ee("el-select"),O=ee("el-input"),S=ee("el-form-item"),j=ee("el-text"),D=ee("el-card"),z=ee("el-tooltip"),U=ee("el-switch"),L=ee("el-form");return Ne(),gt(Jo,{nodeModel:_.nodeModel},{default:C(()=>[J("h5",uq,Ee(_.$t("views.applicationWorkflow.nodeSetting")),1),J("h5",sq,Ee(_.$t("common.param.inputParam")),1),P(L,{onSubmit:b[2]||(b[2]=en(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:v,model:c.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:C(()=>[P(D,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:C(()=>{var $;return[(($=c.value.inputFieldList)==null?void 0:$.length)>0?(Ne(),sn("div",cq,[(Ne(!0),sn(Dr,null,Oo(c.value.inputFieldList,(X,Y)=>(Ne(),gt(S,{key:X.name,label:X.name,prop:"inputFieldList."+Y+".value",rules:{required:X.isRequired,message:X.source==="reference"?_.$t("views.tool.form.param.selectPlaceholder"):_.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:C(()=>[J("div",fq,[J("div",dq,[J("span",pq,[P(fI,{content:X.name,style:{"max-width":"130px"}},{default:C(()=>[ut(Ee(X.name),1)]),_:2},1032,["content"]),X.isRequired?(Ne(),sn("span",hq,"*")):Rn("",!0)]),P(x,{type:"info",class:"info-tag ml-4"},{default:C(()=>[ut(Ee(X.type),1)]),_:2},1024)]),P(M,{teleported:!1,modelValue:X.source,"onUpdate:modelValue":H=>X.source=H,size:"small",style:{width:"85px"}},{default:C(()=>[P(A,{label:_.$t("common.reference"),value:"reference"},null,8,["label"]),P(A,{label:_.$t("common.custom"),value:"content"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:C(()=>[X.source==="reference"?(Ne(),gt(Zo,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.tool.form.param.selectPlaceholder"),modelValue:X.value,"onUpdate:modelValue":H=>X.value=H},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Ne(),gt(O,{key:1,modelValue:X.value,"onUpdate:modelValue":H=>X.value=H,placeholder:_.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Ne(),gt(j,{key:1,type:"info"},{default:C(()=>[ut(Ee(_.$t("common.noData")),1)]),_:1}))]}),_:1}),P(S,{label:_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[1]||(b[1]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",vq,[J("div",mq,[J("div",yq,[J("span",null,Ee(_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),P(z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),J("div",gq,[P(U,{size:"small",modelValue:c.value.isResult,"onUpdate:modelValue":b[0]||(b[0]=$=>c.value.isResult=$)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class bq extends Qo{constructor(t){super(t,_q)}}const wq={type:"tool-lib-node",model:ei,view:bq},Eq=Object.freeze(Object.defineProperty({__proto__:null,default:wq},Symbol.toStringTag,{value:"Module"})),Oq={class:"title-decoration-1 mb-16"},Sq={class:"flex-between"},xq={class:"lighter mb-8"},Aq={key:0},Tq={class:"flex-between"},Mq={class:"flex"},kq={class:"flex"},Pq={key:0,class:"color-danger"},Rq={class:"lighter mb-8"},Nq={key:0,class:"mb-8"},Cq={class:"flex-between w-full"},Dq={class:"flex align-center"},jq={class:"mr-4"},Iq={class:"flex"},Lq=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),a=Ue(),r=Ue(),u={code:"",inputFieldList:[],isResult:!1},c=Ue(null),v=Ue(!1),d=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",u),t.nodeModel.properties.nodeData),set:O=>{Re.set(t.nodeModel.properties,"nodeData",O)}}),g=Ue(),_=()=>{var O;return(O=g.value)==null?void 0:O.validate().catch(S=>Promise.reject({node:t.nodeModel,errMessage:S}))};function b(O){Re.set(t.nodeModel.properties.nodeData,"code",O)}function x(O,S){typeof S<"u"&&(c.value=S),a.value.open(O)}function A(O){const S=Re.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList);S.splice(O,1),Re.set(t.nodeModel.properties.nodeData,"inputFieldList",S)}function M(O){const S=Re.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList),j={...O,value:O.source==="reference"?[]:""};c.value!==null?S.splice(c.value,1,j):S.push(j),Re.set(t.nodeModel.properties.nodeData,"inputFieldList",S),c.value=null}return oo(()=>{var O;typeof((O=t.nodeModel.properties.nodeData)==null?void 0:O.isResult)>"u"&&yc(t.nodeModel)&&Re.set(t.nodeModel.properties.nodeData,"isResult",!0),Re.set(t.nodeModel,"validate",_),setTimeout(()=>{v.value=!0},100)}),(O,S)=>{const j=ee("Plus"),D=ee("el-icon"),z=ee("el-button"),U=ee("auto-tooltip"),L=ee("el-tag"),$=ee("el-input"),X=ee("el-form-item"),Y=ee("el-text"),H=ee("el-card"),B=ee("el-tooltip"),G=ee("el-switch"),K=ee("el-form");return Ne(),gt(Jo,{nodeModel:O.nodeModel},{default:C(()=>[J("h5",Oq,Ee(O.$t("views.applicationWorkflow.nodeSetting")),1),J("div",Sq,[J("h5",xq,Ee(O.$t("common.param.inputParam")),1),P(z,{link:"",type:"primary",onClick:S[0]||(S[0]=Q=>x())},{default:C(()=>[P(D,{class:"mr-4"},{default:C(()=>[P(j)]),_:1}),ut(" "+Ee(O.$t("common.add")),1)]),_:1})]),P(K,{onSubmit:S[4]||(S[4]=en(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:g,model:d.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:C(()=>[P(H,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:C(()=>{var Q;return[((Q=d.value.inputFieldList)==null?void 0:Q.length)>0?(Ne(),sn("div",Aq,[(Ne(!0),sn(Dr,null,Oo(d.value.inputFieldList,(ce,ue)=>(Ne(),gt(X,{key:ue,label:ce.name,prop:"inputFieldList."+ue+".value",rules:{required:ce.isRequired,message:ce.source==="reference"?O.$t("views.tool.form.param.selectPlaceholder"):O.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:C(()=>[J("div",Tq,[J("div",Mq,[J("span",kq,[P(U,{content:ce.name,style:{"max-width":"130px"}},{default:C(()=>[ut(Ee(ce.name),1)]),_:2},1032,["content"]),ce.isRequired?(Ne(),sn("span",Pq,"*")):Rn("",!0)]),P(L,{type:"info",class:"info-tag ml-4"},{default:C(()=>[ut(Ee(ce.type),1)]),_:2},1024)]),J("div",null,[P(z,{text:"",onClick:en(de=>x(ce,ue),["stop"])},{default:C(()=>[P(Cr,{iconName:"app-edit"})]),_:2},1032,["onClick"]),P(z,{text:"",onClick:de=>A(ue),style:{"margin-left":"4px !important"}},{default:C(()=>[P(Cr,{iconName:"app-delete"})]),_:2},1032,["onClick"])])])]),default:C(()=>[ce.source==="reference"?(Ne(),gt(Zo,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.tool.form.param.selectPlaceholder"),modelValue:ce.value,"onUpdate:modelValue":de=>ce.value=de,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Ne(),gt($,{key:1,modelValue:ce.value,"onUpdate:modelValue":de=>ce.value=de,placeholder:O.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Ne(),gt(Y,{key:1,type:"info"},{default:C(()=>[ut(Ee(O.$t("common.noData")),1)]),_:1}))]}),_:1}),J("h5",Rq,Ee(O.$t("views.tool.form.param.code")),1),v.value?(Ne(),sn("div",Nq,[P(dI,{title:O.$t("views.tool.form.param.code"),modelValue:d.value.code,"onUpdate:modelValue":S[1]||(S[1]=Q=>d.value.code=Q),onWheel:n,style:{height:"130px !important"},onSubmitDialog:b},null,8,["title","modelValue"])])):Rn("",!0),P(X,{label:O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:S[3]||(S[3]=en(()=>{},["prevent"]))},{label:C(()=>[J("div",Cq,[J("div",Dq,[J("div",jq,[J("span",null,Ee(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),P(B,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ut(Ee(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[P(Cr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),J("div",Iq,[P(G,{size:"small",modelValue:d.value.isResult,"onUpdate:modelValue":S[2]||(S[2]=Q=>d.value.isResult=Q)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"]),P(e8,{ref_key:"FieldFormDialogRef",ref:a,onRefresh:M},null,512)]),_:1},8,["nodeModel"])}}});class Fq extends Qo{constructor(t){super(t,Lq)}}const $q={type:"tool-node",model:ei,view:Fq},Bq=Object.freeze(Object.defineProperty({__proto__:null,default:$q},Symbol.toStringTag,{value:"Module"})),Uq={class:"title-decoration-1 mb-8"},Vq={class:"flex-between lighter"},Gq={key:0,class:"mt-8"},Wq=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={isResult:!0,labelName:"",branch:[{id:fl(),type:"选项 1",option:""}]},a=(_,b,x)=>{const M=Re.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(O=>O.id===b.id?{...O,height:_.height,index:x}:O);Re.set(t.nodeModel.properties,"branchConditionList",M),d(t.nodeModel.properties.nodeData.branch,!0)},r=or({get:()=>(t.nodeModel.properties.nodeData||(Re.set(t.nodeModel.properties,"nodeData",n),d(n.branch,!0)),t.nodeModel.properties.nodeData),set:_=>{Re.set(t.nodeModel.properties,"nodeData",_)}}),u=Ue();Ue();const c=()=>{var b;const _=[(b=u.value)==null?void 0:b.validate()];return Promise.all(_).catch(x=>Promise.reject({node:t.nodeModel,errMessage:x}))};function v(){const _=Re.cloneDeep(t.nodeModel.properties.nodeData.branch),b={type:"选项 "+(_.length+1),id:fl(),option:"选项 "+(_.length+1)};_.splice(_.length,0,b),d(_,!0),Re.set(t.nodeModel.properties.nodeData,"branch",_)}function d(_,b){const x=Re.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),A=_.map((M,O)=>{const S=x.find(j=>j.id===M.id);if(S)return{index:O,height:S.height,id:M.id};if(b)return{index:O,height:100,id:M.id}}).filter(M=>M);Re.set(t.nodeModel.properties,"branchConditionList",A),t.nodeModel.refreshBranch()}function g(_){const b=Re.cloneDeep(t.nodeModel.properties.nodeData.branch);if(b[_].conditions.length===0){const A=b.splice(_,1).map(M=>t.nodeModel.id+"_"+M.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(M=>A.includes(M.sourceAnchorId)).map(M=>M.id)),d(b,!1),b.forEach((M,O)=>{M.type="选项 "+(O+1)})}Re.set(t.nodeModel.properties.nodeData,"branch",b)}return oo(()=>{Re.set(t.nodeModel,"validate",c)}),(_,b)=>{const x=ee("el-form-item"),A=ee("el-input"),M=ee("el-col"),O=ee("Delete"),S=ee("el-icon"),j=ee("el-button"),D=ee("el-row"),z=ee("el-card"),U=ee("Plus"),L=ee("el-form"),$=Hd("resize");return Ne(),gt(Jo,{nodeModel:_.nodeModel},{default:C(()=>[J("h5",Uq,Ee(_.$t("views.applicationWorkflow.nodeSetting")),1),P(z,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(L,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"UserSelectNodeFormRef",ref:u,onSubmit:b[1]||(b[1]=en(()=>{},["prevent"]))},{default:C(()=>[P(x,{label:_.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},{default:C(()=>[P(ou,{title:_.$t("views.applicationWorkflow.nodes.userSelectNode.caption"),modelValue:r.value.labelName,"onUpdate:modelValue":b[0]||(b[0]=X=>r.value.labelName=X),style:{height:"100px"},placeholder:_.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),(Ne(!0),sn(Dr,null,Oo(r.value.branch,(X,Y)=>Ra((Ne(),gt(z,{key:X.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:C(()=>[J("div",Vq,Ee(X.type),1),Y!==r.value.branch.length?(Ne(),sn("div",Gq,[P(D,{gutter:8},{default:C(()=>[P(M,{span:23},{default:C(()=>[P(x,{prop:"branch."+Y+".option",rules:{required:!0,message:_.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage"),trigger:"blur"}},{default:C(()=>[P(A,{modelValue:X.option,"onUpdate:modelValue":H=>X.option=H,placeholder:_.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),P(M,{span:1},{default:C(()=>[P(j,{disabled:Y===0,link:"",type:"info",class:"mt-4",onClick:H=>g(Y)},{default:C(()=>[P(S,null,{default:C(()=>[P(O)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):Rn("",!0)]),_:2},1024)),[[$,H=>a(H,X,Y)]])),128)),P(j,{link:"",type:"primary",onClick:v},{default:C(()=>[P(S,{class:"mr-4"},{default:C(()=>[P(U)]),_:1}),ut(" "+Ee(_.$t("views.applicationWorkflow.nodes.userSelectNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class zq extends Qo{constructor(t){super(t,Wq)}}const Hq=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class Xq extends ei{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:u,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,d=[];if(d.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const _=c[g],b=Hq(c,g);d.push({x:n+r/2-10,y:v?a-u/2+275+b+_.height/2:a-15,id:`${t}_${_.id}_right`,type:"right"})}return d}}const qq={type:"user-select-node",model:Xq,view:zq},Yq=Object.freeze(Object.defineProperty({__proto__:null,default:qq},Symbol.toStringTag,{value:"Module"})),Kq={class:"dialog-footer"},Zq=ir({__name:"GroupFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ue(),u=Ue(!1),c=Ue(!1),v=Ue(null),d=Ue({field:"",label:""}),g=ch({label:[{required:!0,message:St("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"}],field:[{required:!0,message:St("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:St("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),_=Ue(!1),b=(M,O)=>{M&&(d.value=Re.cloneDeep(M),c.value=!0,v.value=O),_.value=!0},x=()=>{_.value=!1,c.value=!1,v.value=null,d.value={field:"",label:""}},A=async M=>{M&&await M.validate(O=>{O&&a("refresh",d.value,v.value)})};return t({open:b,close:x}),(M,O)=>{const S=ee("el-input"),j=ee("el-form-item"),D=ee("el-form"),z=ee("el-button"),U=ee("el-dialog");return Ne(),gt(U,{title:c.value?M.$t("views.applicationWorkflow.nodes.variableAggregationNode.editGroup"):M.$t("views.applicationWorkflow.nodes.variableAggregationNode.addGroup"),modelValue:_.value,"onUpdate:modelValue":O[3]||(O[3]=L=>_.value=L),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:C(()=>[J("span",Kq,[P(z,{onClick:en(x,["prevent"])},{default:C(()=>[ut(Ee(M.$t("common.cancel")),1)]),_:1}),P(z,{type:"primary",onClick:O[2]||(O[2]=L=>A(r.value)),loading:u.value},{default:C(()=>[ut(Ee(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(D,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:d.value,"require-asterisk-position":"right"},{default:C(()=>[P(j,{label:M.$t("common.variable"),required:!0,prop:"field",rules:g.field},{default:C(()=>[P(S,{modelValue:d.value.field,"onUpdate:modelValue":O[0]||(O[0]=L=>d.value.field=L),maxlength:64,placeholder:M.$t("views.applicationWorkflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),P(j,{label:M.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:g.label},{default:C(()=>[P(S,{modelValue:d.value.label,"onUpdate:modelValue":O[1]||(O[1]=L=>d.value.label=L),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),Jq={class:"title-decoration-1 mb-8"},Qq={class:"flex-between"},eY={class:"flex-between mb-12"},tY={class:"font-bold"},nY={class:"flex align-center",style:{"margin-right":"-3px"}},rY=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ue(),a=Ue(),r=Ue(),u={strategy:"first_non_null",groupList:[{id:fl(),label:"Group1",field:"Group1",variableList:[{v_id:fl(),variable:[]}]}]},c=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",u),t.nodeModel.properties.nodeData),set:S=>{Re.set(t.nodeModel.properties,"nodeData",S)}}),v=Ue([]);function d(S,j){let D=null;S&&j!==void 0&&(D={field:S.field,label:S.label}),r.value.open(D,j)}function g(S,j){for(let z=0;z<v.value.length;z++)if(v.value[z].field===S.field&&j!==z){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+S.field);return}[void 0,null].includes(j)?(v.value.push(S),M(S)):(v.value.splice(j,1,S),_(S,j)),r.value.close();const D=[...v.value.map(z=>({label:z.label,value:z.field}))];Re.set(t.nodeModel.properties.config,"fields",D)}const _=(S,j)=>{const D=Re.cloneDeep(c.value.groupList);D[j].field=S.field,D[j].label=S.label,c.value.groupList=D},b=S=>{const j=Re.cloneDeep(c.value.groupList);j.splice(S,1),c.value.groupList=j,v.value.splice(S,1);const D=j.map(z=>({label:z.label,value:z.field}));Re.set(t.nodeModel.properties.config,"fields",D)},x=S=>{const j=Re.cloneDeep(c.value.groupList);j[S].variableList.push({v_id:fl(),variable:[]}),c.value.groupList=j},A=(S,j)=>{const D=Re.cloneDeep(c.value.groupList);D[S].variableList.splice(j,1),c.value.groupList=D},M=S=>{const j=Re.cloneDeep(c.value.groupList);j.push({id:fl(),field:S.field,label:S.label,variableList:[{v_id:fl(),variable:[]}]}),c.value.groupList=j},O=async()=>{var j;const S=[...a.value.map(D=>D.validate()),(j=n.value)==null?void 0:j.validate()];return Promise.all(S).catch(D=>Promise.reject({node:t.nodeModel,errMessage:D}))};return oo(()=>{var j;typeof((j=t.nodeModel.properties.nodeData)==null?void 0:j.isResult)>"u"&&yc(t.nodeModel)&&Re.set(t.nodeModel.properties.nodeData,"isResult",!0),Re.set(t.nodeModel,"validate",O),t.nodeModel.properties.nodeData.groupList&&(v.value=c.value.groupList.map(D=>({label:D.label,field:D.field})));const S=c.value.groupList.map(D=>({label:D.label,value:D.field}));Re.set(t.nodeModel.properties.config,"fields",S)}),(S,j)=>{const D=ee("el-option"),z=ee("el-select"),U=ee("el-form-item"),L=ee("EditPen"),$=ee("el-icon"),X=ee("el-button"),Y=ee("el-col"),H=ee("el-row"),B=ee("el-card"),G=ee("el-form");return Ne(),gt(Jo,{nodeModel:S.nodeModel},{default:C(()=>[J("h5",Jq,Ee(S.$t("views.applicationWorkflow.nodeSetting")),1),P(G,{onSubmit:j[2]||(j[2]=en(()=>{},["prevent"])),model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableAggregationRef",ref:n,"hide-required-asterisk":""},{default:C(()=>[P(U,{label:S.$t("views.applicationWorkflow.nodes.variableAggregationNode.Strategy"),rules:{required:!0,trigger:"change"}},{label:C(()=>[J("div",Qq,[J("div",null,[J("span",null,[ut(Ee(S.$t("views.applicationWorkflow.nodes.variableAggregationNode.Strategy"))+" ",1),j[3]||(j[3]=J("span",{class:"color-danger"},"*",-1))])])])]),default:C(()=>[P(z,{modelValue:c.value.strategy,"onUpdate:modelValue":j[0]||(j[0]=K=>c.value.strategy=K)},{default:C(()=>[P(D,{label:ar(St)("views.applicationWorkflow.nodes.variableAggregationNode.placeholder"),value:"first_non_null"},null,8,["label"]),P(D,{label:ar(St)("views.applicationWorkflow.nodes.variableAggregationNode.placeholder1"),value:"variable_to_json"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),(Ne(!0),sn(Dr,null,Oo(c.value.groupList,(K,Q)=>(Ne(),sn("div",{key:K.id,class:"mb-8"},[P(B,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[J("div",eY,[J("span",tY,Ee(K.label),1),J("div",nY,[P(X,{onClick:ce=>d(K,Q),link:""},{default:C(()=>[P($,null,{default:C(()=>[P(L)]),_:1})]),_:2},1032,["onClick"]),P(X,{onClick:ce=>b(Q),link:"",disabled:c.value.groupList.length<=1},{default:C(()=>[P(Cr,{iconName:"app-delete"})]),_:2},1032,["onClick","disabled"])])]),(Ne(!0),sn(Dr,null,Oo(K.variableList,(ce,ue)=>(Ne(),sn("div",{key:ce.v_id},[P(H,null,{default:C(()=>[P(Y,{span:22},{default:C(()=>[P(U,{prop:`groupList.${Q}.variableList.${ue}.variable`,rules:{type:"array",required:!0,message:S.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:C(()=>[P(Zo,{ref_for:!0,ref_key:"nodeCascaderRef",ref:a,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:ce.variable,"onUpdate:modelValue":de=>ce.variable=de},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),P(Y,{span:2},{default:C(()=>[P(X,{link:"",class:"mt-4 ml-4",disabled:K.variableList.length<=1,onClick:de=>A(Q,ue)},{default:C(()=>[P(Cr,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]))),128)),P(X,{onClick:ce=>x(Q),type:"primary",size:"large",link:""},{default:C(()=>[P(Cr,{iconName:"app-add-outlined",class:"mr-4"}),ut(" "+Ee(S.$t("common.add")),1)]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),P(X,{onClick:j[1]||(j[1]=K=>d()),type:"primary",size:"large",link:""},{default:C(()=>[P(Cr,{iconName:"app-add-outlined",class:"mr-4"}),ut(" "+Ee(S.$t("views.applicationWorkflow.nodes.variableAggregationNode.addGroup")),1)]),_:1})]),_:1},8,["model"]),P(Zq,{ref_key:"GroupFieldDialogRef",ref:r,onRefresh:g},null,512)]),_:1},8,["nodeModel"])}}});class oY extends Qo{constructor(t){super(t,rY)}getConfig(t){return t.model.properties.config}}const iY={type:"variable-aggregation-node",model:ei,view:oY},aY=Object.freeze(Object.defineProperty({__proto__:null,default:iY},Symbol.toStringTag,{value:"Module"})),lY={class:"flex-between"},uY={class:"flex-between mb-8"},sY={class:"lighter"},cY={key:0,class:"flex w-full"},fY=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],a=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),r={variableList:[{id:fl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},u=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:A=>{Re.set(t.nodeModel.properties,"nodeData",A)}}),c=Ue(),v=Ue(),d=Ue(),g=async()=>{var M;let A=[(M=c.value)==null?void 0:M.validate(),...v.value.map(O=>O.validate())];return d.value&&(A=[...A,...v.value.map(O=>O.validate())]),Promise.all(A).catch(O=>Promise.reject({node:t.nodeModel,errMessage:O}))};function _(){const A=Re.cloneDeep(t.nodeModel.properties.nodeData.variableList),M={id:fl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};A.push(M),Re.set(t.nodeModel.properties.nodeData,"variableList",A)}function b(A){const M=Re.cloneDeep(t.nodeModel.properties.nodeData.variableList);M.splice(A,1),Re.set(t.nodeModel.properties.nodeData,"variableList",M)}function x(A){t.nodeModel.graphModel.nodes.map(M=>{M.id==="start-node"&&(M.properties.config.globalFields.forEach(O=>{O.value===A.fields[1]&&(A.name=O.label)}),M.properties.config.chatFields.forEach(O=>{O.value===A.fields[1]&&(A.name=O.label)}))})}return oo(()=>{var A;typeof((A=t.nodeModel.properties.nodeData)==null?void 0:A.isResult)>"u"&&yc(t.nodeModel)&&Re.set(t.nodeModel.properties.nodeData,"isResult",!0),Re.set(t.nodeModel,"validate",g)}),(A,M)=>{const O=ee("AppIcon"),S=ee("el-button"),j=ee("el-form-item"),D=ee("el-option"),z=ee("el-select"),U=ee("el-input"),L=ee("el-input-number"),$=ee("CodemirrorEditor"),X=ee("el-card"),Y=ee("Plus"),H=ee("el-icon"),B=ee("el-form");return Ne(),gt(Jo,{nodeModel:A.nodeModel},{default:C(()=>[P(B,{onSubmit:M[0]||(M[0]=en(()=>{},["prevent"])),model:u.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:C(()=>[(Ne(!0),sn(Dr,null,Oo(u.value.variableList,(G,K)=>(Ne(),gt(X,{key:G.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(j,{label:A.$t("views.applicationWorkflow.variable.label")},{label:C(()=>[J("div",lY,[J("div",null,[ut(Ee(A.$t("views.applicationWorkflow.variable.label"))+" ",1),M[1]||(M[1]=J("span",{class:"color-danger"},"*",-1))]),u.value.variableList.length>1?(Ne(),gt(S,{key:0,text:"",onClick:Q=>b(K)},{default:C(()=>[P(O,{iconName:"app-delete"})]),_:2},1032,["onClick"])):Rn("",!0)])]),default:C(()=>[P(Zo,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.variable.placeholder"),modelValue:G.fields,"onUpdate:modelValue":Q=>G.fields=Q,global:!0,onChange:Q=>x(G)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),J("div",uY,[J("span",sY,[ut(Ee(A.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),M[2]||(M[2]=J("span",{class:"color-danger"},"*",-1))]),P(z,{teleported:!1,modelValue:G.source,"onUpdate:modelValue":Q=>G.source=Q,size:"small",style:{width:"85px"}},{default:C(()=>[P(D,{label:A.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),P(D,{label:A.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),G.source==="custom"?(Ne(),sn("div",cY,[P(z,{modelValue:G.type,"onUpdate:modelValue":Q=>G.type=Q,style:{"max-width":"85px"},class:"mr-8",onChange:Q=>u.value.variableList[K].value=null},{default:C(()=>[(Ne(),sn(Dr,null,Oo(n,Q=>P(D,{key:Q,label:Q,value:Q},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),G.type==="string"?(Ne(),gt(j,{key:0,prop:"variableList."+K+".value",rules:{message:ar(St)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:C(()=>[P(U,{modelValue:G.value,"onUpdate:modelValue":Q=>G.value=Q,placeholder:A.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:a},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):G.type==="num"?(Ne(),gt(j,{key:1,prop:"variableList."+K+".value",rules:{message:A.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:C(()=>[P(L,{modelValue:G.value,"onUpdate:modelValue":Q=>G.value=Q},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):G.type==="json"?(Ne(),gt(j,{key:2,class:"w-full",prop:"variableList."+K+".value",rules:[{message:A.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(Q,ce,ue)=>{try{JSON.parse(ce),ue()}catch{ue(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:C(()=>[P($,{title:"JSON",modelValue:G.value,"onUpdate:modelValue":Q=>G.value=Q,style:{height:"100px",width:"155px"},onSubmitDialog:Q=>u.value.variableList[K].value=Q},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):Rn("",!0)])):(Ne(),gt(j,{key:1},{default:C(()=>[P(Zo,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:d,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.variable.placeholder"),modelValue:G.reference,"onUpdate:modelValue":Q=>G.reference=Q},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),P(S,{link:"",type:"primary",onClick:_},{default:C(()=>[P(H,{class:"mr-4"},{default:C(()=>[P(Y)]),_:1}),ut(" "+Ee(A.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class dY extends Qo{constructor(t){super(t,fY)}}const pY={type:"variable-assign-node",model:ei,view:dY},hY=Object.freeze(Object.defineProperty({__proto__:null,default:pY},Symbol.toStringTag,{value:"Module"})),vY={class:"flex align-center"},mY={class:"mr-4"},yY={class:"flex align-center"},gY={class:"mr-4"},_Y={class:"flex align-center"},bY={class:"mr-4"},wY={class:"dialog-footer"},EY=ir({__name:"VariableFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ue(),u=Ue(!1),c=Ue(!1),v=Ue(null),d=Ue({field:"",label:"",expression:""}),g=ch({label:[{required:!0,message:St("dynamicsForm.paramForm.name.placeholder"),trigger:"blur"}],field:[{required:!0,message:St("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:St("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}],expression:[{required:!0,message:St("views.applicationWorkflow.nodes.variableSplittingNode.expression.placeholder"),trigger:"blur"}]}),_=Ue(!1),b=(M,O)=>{M&&(d.value=Re.cloneDeep(M),c.value=!0,v.value=O),_.value=!0},x=()=>{_.value=!1,c.value=!1,v.value=null,d.value={field:"",label:""}},A=async M=>{M&&await M.validate(O=>{O&&a("refresh",d.value,v.value)})};return t({open:b,close:x}),(M,O)=>{const S=ee("el-input"),j=ee("el-form-item"),D=ee("AppIcon"),z=ee("el-tooltip"),U=ee("el-form"),L=ee("el-button"),$=ee("el-dialog");return Ne(),gt($,{title:c.value?M.$t("views.applicationWorkflow.nodes.variableSplittingNode.editVariables"):M.$t("views.applicationWorkflow.nodes.variableSplittingNode.addVariables"),modelValue:_.value,"onUpdate:modelValue":O[4]||(O[4]=X=>_.value=X),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:C(()=>[J("span",wY,[P(L,{onClick:en(x,["prevent"])},{default:C(()=>[ut(Ee(M.$t("common.cancel")),1)]),_:1}),P(L,{type:"primary",onClick:O[3]||(O[3]=X=>A(r.value)),loading:u.value},{default:C(()=>[ut(Ee(M.$t("common.save")),1)]),_:1},8,["loading"])])]),default:C(()=>[P(U,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:d.value,"require-asterisk-position":"right","hide-required-asterisk":""},{default:C(()=>[P(j,{prop:"field"},{label:C(()=>[J("div",vY,[J("span",mY,Ee(M.$t("common.variable")),1),O[5]||(O[5]=J("span",{class:"color-danger"},"*",-1))])]),default:C(()=>[P(S,{modelValue:d.value.field,"onUpdate:modelValue":O[0]||(O[0]=X=>d.value.field=X),maxlength:64,placeholder:M.$t("views.applicationWorkflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1}),P(j,{prop:"label"},{label:C(()=>[J("div",yY,[J("span",gY,Ee(M.$t("dynamicsForm.paramForm.name.label")),1),O[6]||(O[6]=J("span",{class:"color-danger"},"*",-1))])]),default:C(()=>[P(S,{modelValue:d.value.label,"onUpdate:modelValue":O[1]||(O[1]=X=>d.value.label=X),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),P(j,{prop:"expression"},{label:C(()=>[J("div",_Y,[J("span",bY,[ut(Ee(M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.label"))+" ",1),O[7]||(O[7]=J("span",{class:"color-danger"},"*",-1))]),P(z,{effect:"dark",content:M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.tooltip"),placement:"right"},{default:C(()=>[P(D,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:C(()=>[P(S,{modelValue:d.value.expression,"onUpdate:modelValue":O[2]||(O[2]=X=>d.value.expression=X),maxlength:64,"show-word-limit":"",placeholder:M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),OY={class:"flex-between w-full"},SY={class:"break-all lighter"},xY={class:"ml-4",style:{"margin-top":"-4px"}},AY=["title"],TY=["title"],MY={class:"mr-4"},kY=ir({__name:"VariableFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ue(),a=Ue(),r=Ue([]);function u(d,g){a.value.open(d,g)}function c(d){r.value.splice(d,1);const g=[{label:St("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];Re.set(t.nodeModel.properties.config,"fields",g)}function v(d,g){for(let b=0;b<r.value.length;b++)if(r.value[b].field===d.field&&g!==b){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+d.field);return}[void 0,null].includes(g)?r.value.push(d):r.value.splice(g,1,d),a.value.close();const _=[{label:St("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];Re.set(t.nodeModel.properties.config,"fields",_)}return oo(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=Re.cloneDeep(t.nodeModel.properties.nodeData.variableList)),Re.set(t.nodeModel.properties.nodeData,"variableList",r);const d=[{label:St("common.result"),value:"result"},...r.value.map(g=>({label:g.label,value:g.field}))];Re.set(t.nodeModel.properties.config,"fields",d)}),(d,g)=>{var O;const _=ee("AppIcon"),b=ee("el-button"),x=ee("el-table-column"),A=ee("el-tooltip"),M=ee("el-table");return Ne(),sn(Dr,null,[J("div",OY,[J("h5",SY,[ut(Ee(d.$t("views.applicationWorkflow.nodes.variableSplittingNode.splitVariables"))+" ",1),g[1]||(g[1]=J("span",{class:"color-danger"},"*",-1))]),J("span",xY,[P(b,{link:"",type:"primary",onClick:g[0]||(g[0]=S=>u())},{default:C(()=>[P(_,{iconName:"app-add-outlined"})]),_:1})])]),((O=t.nodeModel.properties.nodeData.variableList)==null?void 0:O.length)>0?(Ne(),gt(M,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:C(()=>[P(x,{prop:"field",label:d.$t("common.variable"),width:"95"},{default:C(({row:S})=>[J("span",{title:S.field,class:"ellipsis-1"},Ee(S.field),9,AY)]),_:1},8,["label"]),P(x,{prop:"label",label:d.$t("dynamicsForm.paramForm.name.label")},{default:C(({row:S})=>[J("span",{title:S.label,class:"ellipsis-1"},Ee(S.label),9,TY)]),_:1},8,["label"]),P(x,{label:d.$t("common.operation"),align:"left",width:"90"},{default:C(({row:S,$index:j})=>[J("span",MY,[P(A,{effect:"dark",content:d.$t("common.modify"),placement:"top"},{default:C(()=>[P(b,{type:"primary",text:"",onClick:en(D=>u(S,j),["stop"])},{default:C(()=>[P(_,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),P(A,{effect:"dark",content:d.$t("common.delete"),placement:"top"},{default:C(()=>[P(b,{type:"primary",text:"",onClick:D=>c(j)},{default:C(()=>[P(_,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Rn("",!0),P(EY,{ref_key:"VariableFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),PY={class:"title-decoration-1 mb-8"},RY={class:"flex-between"},NY=ir({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={inputVariable:[],variableList:[]},a=or({get:()=>(t.nodeModel.properties.nodeData||Re.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:c=>{Re.set(t.nodeModel.properties,"nodeData",c)}}),r=Ue(),u=async()=>r.value.validate();return oo(()=>{Re.set(t.nodeModel,"validate",u)}),(c,v)=>{const d=ee("el-form-item"),g=ee("el-form"),_=ee("el-card");return Ne(),gt(Jo,{nodeModel:c.nodeModel},{default:C(()=>[J("h5",PY,Ee(c.$t("views.applicationWorkflow.nodeSetting")),1),P(_,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[P(g,{onSubmit:v[1]||(v[1]=en(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:r,"hide-required-asterisk":""},{default:C(()=>[P(d,{prop:"inputVariable",rules:{message:c.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:C(()=>[J("div",RY,[J("div",null,[ut(Ee(c.$t("views.applicationWorkflow.nodes.variableSplittingNode.inputVariables"))+" ",1),v[2]||(v[2]=J("span",{class:"color-danger"},"*",-1))])])]),default:C(()=>[P(Zo,{ref:"nodeCascaderRef",nodeModel:c.nodeModel,class:"w-full",placeholder:c.$t("views.applicationWorkflow.variable.placeholder"),modelValue:a.value.inputVariable,"onUpdate:modelValue":v[0]||(v[0]=b=>a.value.inputVariable=b)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),P(d,{prop:"variableList",rules:{message:c.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{default:C(()=>[P(kY,{ref:"VariableFieldTableRef","node-model":c.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class CY extends Qo{constructor(t){super(t,NY)}}const DY={type:"variable-splitting-node",model:ei,view:CY},jY=Object.freeze(Object.defineProperty({__proto__:null,default:DY},Symbol.toStringTag,{value:"Module"})),iA=ir({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(a,r)=>Ra((Ne(),sn("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=en(()=>{},["stop"])),onClick:r[1]||(r[1]=en(()=>{},["stop"]))},[(Ne(),sn("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[J("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),J("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[th,t.model.isHovered]])}});function IY(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const LY=32,FY=32;class $Y extends vn.BezierEdge{constructor(){super();Ma(this,"isMounted");Ma(this,"customLineApp");Ma(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const a=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");IY(a,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:a}=this.props;n&&(zg()?uP(this.targetId(),iA,n,this.props.model,a,(u,c)=>({model:u,graph:c})):(this.customLineApp=rM({render:()=>Rv(iA,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),zg()&&sP(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,a=n.id,{customWidth:r=LY,customHeight:u=FY}=n.getProperties(),{startPoint:c,endPoint:v,path:d,isAnimation:g,arrowConfig:_}=n,b=n.getEdgeAnimationStyle(),{strokeDasharray:x,stroke:A,strokeDashoffset:M,animationName:O,animationDuration:S,animationIterationCount:j,animationTimingFunction:D,animationDirection:z}=b,U={x:(c.x+v.x-r)/2,y:(c.y+v.y-u)/2,width:r,height:u},L=n.getEdgeStyle(),$={width:r,height:u};return setTimeout(()=>{const X=document.getElementById(a);X&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(X))},0),delete L.stroke,vn.h("g",{},[vn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),vn.h("path",{d,...L,..._,...g?{strokeDasharray:x,stroke:A,style:{strokeDashoffset:M,animationName:O,animationDuration:S,animationIterationCount:j,animationTimingFunction:D,animationDirection:z}}:{}}),vn.h("foreignObject",{...U,y:U.y+5,x:U.x+5,style:{}},[vn.h("div",{id:a,style:{...$},className:"lf-custom-edge-wrapper"})])])}}class BY extends vn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(u=>u.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(u=>u.id===this.targetAnchorId);if(n&&r){const u={x:n.x,y:n.y};this.updateStartPoint(u);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const UY={type:"app-edge",view:$Y,model:BY},VY=ir({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var d;(d=t.lf)==null||d.zoom(!0,[0,0])}function a(){var d;(d=t.lf)==null||d.zoom(!1,[0,0])}function r(){var d,g,_;(d=t.lf)==null||d.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(_=t.lf)==null||_.fitView()}const u=()=>{var d;(d=t.lf)==null||d.extension.dagre.layout()},c=()=>{var d;(d=t.lf)==null||d.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},v=()=>{var d;(d=t.lf)==null||d.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(d,g)=>{const _=ee("ZoomOut"),b=ee("el-icon"),x=ee("el-tooltip"),A=ee("el-button"),M=ee("ZoomIn"),O=ee("AppIcon"),S=ee("el-divider"),j=ee("el-card");return Ne(),gt(j,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:C(()=>[P(A,{link:"",onClick:a,style:{border:"none"}},{default:C(()=>[P(x,{effect:"dark",content:d.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:C(()=>[P(b,{size:16,title:d.$t("views.applicationWorkflow.control.zoomOut")},{default:C(()=>[P(_)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),P(A,{link:"",onClick:n,style:{border:"none"}},{default:C(()=>[P(x,{effect:"dark",content:d.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:C(()=>[P(b,{size:16,title:d.$t("views.applicationWorkflow.control.zoomIn")},{default:C(()=>[P(M)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),P(A,{link:"",onClick:r,style:{border:"none"}},{default:C(()=>[P(x,{effect:"dark",content:d.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:C(()=>[P(O,{iconName:"app-fitview",title:d.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),P(S,{direction:"vertical"}),P(A,{link:"",onClick:c,style:{border:"none"}},{default:C(()=>[P(x,{effect:"dark",content:d.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:C(()=>[P(O,{style:{"font-size":"16px"},iconName:"app-retract",title:d.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),P(A,{link:"",onClick:v,style:{border:"none"}},{default:C(()=>[P(x,{effect:"dark",content:d.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:C(()=>[P(O,{style:{"font-size":"16px"},iconName:"app-extend",title:d.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),P(A,{link:"",onClick:u,style:{border:"none"}},{default:C(()=>[P(x,{effect:"dark",content:d.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:C(()=>[P(O,{style:{"font-size":"16px"},iconName:"app-beautify",title:d.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let uc=null;function aA(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function lA(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const cv=40;let pg=40;function GY(e,t){const{keyboard:n}=e,{options:{keyboard:a}}=n,r=()=>{var b,x;if(pg=cv,!(a!=null&&a.enabled)||t.textEditElement)return!0;const{guards:v}=e.options,d=t.getSelectElements(!1);if(!(v&&v.beforeClone?v.beforeClone(d):!0)||d.nodes.length===0&&d.edges.length===0)return uc=null,!0;const _=d.nodes.filter(A=>A.type===Ko.Start||A.type===Ko.Base);if(_.length>0){mi(((x=(b=_[0])==null?void 0:b.properties)==null?void 0:x.nodeName)+St("views.applicationWorkflow.tip.cannotCopy"));return}return uc=d,uc.nodes.forEach(A=>aA(A,cv)),uc.edges.forEach(A=>lA(A,cv)),Xd(St("views.applicationWorkflow.tip.copyError")),!1},u=()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;if(uc&&(uc.nodes||uc.edges)){e.clearSelectElements();const v=e.addElements(uc,pg);if(!v)return!0;v.nodes.forEach(d=>e.selectElementById(d.id,!0)),v.edges.forEach(d=>e.selectElementById(d.id,!0)),uc.nodes.forEach(d=>aA(d,cv)),uc.edges.forEach(d=>lA(d,cv)),pg=pg+cv}return!1},c=()=>{var g;const v=t.getSelectElements(!0);if(e.clearSelectElements(),v.nodes.length==0&&v.edges.length==0)return;if(v.edges.length>0&&v.nodes.length==0){v.edges.forEach(_=>e.deleteEdge(_.id));return}const d=v.nodes.filter(_=>["start-node","base-node"].includes(_.type));if(d.length>0){mi(`${(g=d[0].properties)==null?void 0:g.nodeName}${St("views.applicationWorkflow.delete.deleteMessage")}`);return}return nE(St("common.tip"),St("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:St("common.confirm"),confirmButtonClass:"color-danger"}).then(()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;v.edges.forEach(_=>e.deleteEdge(_.id)),v.nodes.forEach(_=>e.deleteNode(_.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],u),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(a!=null&&a.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class WY{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const zY=e=>typeof e=="string",uA=Array.isArray,Zg=e=>typeof e=="number",SP=e=>e!==null&&typeof e=="object",Jg=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Jg(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Jg(t[n])}),t}return e},fv=(e,t)=>{const n=e[t];return SP(n)?n.cell:n},sA=(e,t,n)=>{let a;return n?a=n:Zg(e)?a=()=>e:a=()=>t,a},HY=(e,t)=>{if(e!=="next"&&e!=="prev")return t},cA=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let XY=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return cA(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&cA(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let a=n.prev;for(;a!==n;)t.push(JSON.stringify(a,HY)),a=a==null?void 0:a.prev;return`[${t.join(", ")}]`}};var xv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(xv||(xv={}));function fA(e,t){var n=e.get(t)||0;e.set(t,n+1)}function dA(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function xP(e,t,n,a){var r=String(t),u=String(n);if(!e&&r>u){var c=r;r=u,u=c}return r+xv.EDGE_KEY_DELIM+u+xv.EDGE_KEY_DELIM+(a===void 0?xv.DEFAULT_EDGE_NAME:a)}function pA(e,t,n,a){var r=String(t),u=String(n),c={v:t,w:n};if(!e&&r>u){var v=c.v;c.v=c.w,c.w=v}return a!==void 0&&(c.name=a),c}function N1(e,t){return xP(e,t.v,t.w,t.name)}function hA(e){return typeof e=="function"}var qY=function(t){return t.nodes().map(function(n){var a=t.node(n),r=t.parent(n),u={id:n,value:a,parent:r};return u.value===void 0&&delete u.value,u.parent===void 0&&delete u.parent,u})},YY=function(t){return t.edges().map(function(n){var a=t.edge(n),r={v:n.v,w:n.w,value:a,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},KY=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:qY(t),edges:YY(t),value:t.graph()};return n.value===void 0&&delete n.value,n},ZY=function(t){var n=new qv(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(a){n.setNode(a.id,a.value),a.parent&&n.setParent(a.id,a.parent)}),t.edges.forEach(function(a){n.setEdge(a.v,a.w,a.value,a.name)}),n};function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function mA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(n),!0).forEach(function(a){JY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function JY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eK(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function tK(e,t,n){return t&&eK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var nK={compound:!1,multigraph:!1,directed:!0},qv=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};QY(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=xv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return hA(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var u;return!(!((u=t.inEdgesMap.get(r))===null||u===void 0)&&u.size)})},this.sinks=function(){return t.nodes().filter(function(r){var u;return!(!((u=t.outEdgesMap.get(r))===null||u===void 0)&&u.size)})},this.setNodes=function(r,u){return r.map(function(c){return t.setNode(c,u)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var u,c=(u=t.parentMap)===null||u===void 0?void 0:u.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var u=t.parentMap.get(r);t.childrenMap.get(u).delete(r)},this.setParent=function(r,u){var c,v;t.checkCompound();for(var d=u===void 0?t.GRAPH_NODE:u,g=t.parent(d);g;){if(r===g)throw new Error("Setting "+u+" as parent of "+r+" would create a cycle");g=t.parent(g)}u&&t.setNode(u),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,d);var _=t.childrenMap.get(d);return _.set(r,!0),(v=t.childrenMap)===null||v===void 0||v.set(d,_),t},this.children=function(r){var u=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,v=(c=t.childrenMap)===null||c===void 0?void 0:c.get(u);return v?Array.from(v.keys()):void 0}if(u===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var u=t.predecessorsMap.get(r);return u?Array.from(u.keys()):void 0},this.successors=function(r){var u=t.successorsMap.get(r);return u?Array.from(u.keys()):void 0},this.neighbors=function(r){var u;if(t.hasNode(r))return Array.from(new Set((u=t.predecessors(r))===null||u===void 0?void 0:u.concat(t.successors(r))))},this.isLeaf=function(r){var u;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((u=t.neighbors(r))===null||u===void 0)&&u.length)},this.filterNodes=function(r){var u=t.directed,c=t.multigraph,v=t.compound,d=new e({directed:u,multigraph:c,compound:v});if(d.setGraph(t.graph()),t.nodes().forEach(function(_){r(_)&&d.setNode(_,t.node(_))}),t.edges().forEach(function(_){d.hasNode(_.v)&&d.hasNode(_.w)&&d.setEdgeObj(_,t.edge(_))}),v){var g=function(b){for(var x=t.parent(b);x!==void 0&&!d.hasNode(x);)x=t.parent(x);return x};d.nodes().forEach(function(_){d.setParent(_,g(_))})}return d},this.setDefaultEdgeLabel=function(r){return hA(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,u){return t.setEdge(r.v,r.w,u,r.name)},this.setPath=function(r,u){return r.reduce(function(c,v){return t.setEdge(c,v,u),v}),t},this.edgeFromArgs=function(r,u,c){return t.edge({v:r,w:u,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(N1(t.isDirected(),r))},this.hasEdge=function(r,u,c){return t.edgesLabelsMap.has(N1(t.isDirected(),{v:r,w:u,name:c}))},this.removeEdgeObj=function(r){var u=r.v,c=r.w,v=r.name;return t.removeEdge(u,c,v)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,u){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!u||v.v===u})},this.outEdges=function(r,u){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!u||v.w===u})},this.nodeEdges=function(r,u){var c;if(t.hasNode(r))return(c=t.inEdges(r,u))===null||c===void 0?void 0:c.concat(t.outEdges(r,u))},this.toJSON=function(){return KY(t)},this.nodeInDegree=function(r){var u=t.inEdgesMap.get(r);return u?u.size:0},this.nodeOutDegree=function(r){var u=t.outEdgesMap.get(r);return u?u.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var a=mA(mA({},nK),n);this.compound=a.compound,this.directed=a.directed,this.multigraph=a.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return tK(e,[{key:"setNode",value:function(n,a){var r=this.nodesLabelMap,u=this.defaultNodeLabelFn,c=this.isCompound,v=this.parentMap,d=this.childrenMap,g=this.inEdgesMap,_=this.outEdgesMap,b=this.predecessorsMap,x=this.successorsMap;if(r.has(n))return a!==void 0&&r.set(n,a),this;if(r.set(n,a||u(n)),c()){var A;v==null||v.set(n,this.GRAPH_NODE),d==null||d.set(n,new Map),d!=null&&d.has(this.GRAPH_NODE)||d==null||d.set(this.GRAPH_NODE,new Map),d==null||(A=d.get(this.GRAPH_NODE))===null||A===void 0||A.set(n,!0)}return[g,_,b,x].forEach(function(M){return M.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var a=this;if(this.hasNode(n)){var r=function(S){a.removeEdge(S.v,S.w,S.name)},u=this.inEdgesMap,c=this.outEdgesMap,v=this.predecessorsMap,d=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var _,b,x;this.removeFromParentsChildList(n),(_=this.parentMap)===null||_===void 0||_.delete(n),(b=this.children(n))===null||b===void 0||b.forEach(function(O){return a.setParent(O)}),(x=this.childrenMap)===null||x===void 0||x.delete(n)}var A=u.get(n),M=c.get(n);Array.from(A.values()).forEach(function(O){return r(O)}),Array.from(M.values()).forEach(function(O){return r(O)}),g.delete(n),u.delete(n),c.delete(n),v.delete(n),d.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,a,r,u){var c,v,d=pA(this.isDirected(),n,a,u),g=N1(this.isDirected(),d),_=d.v,b=d.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(u!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(_),this.setNode(b),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(_,b,u)),Object.freeze(d),this.edgesMap.set(g,d);var x=this.predecessorsMap.get(b),A=this.successorsMap.get(_);return fA(x,_),fA(A,b),(c=this.inEdgesMap.get(b))===null||c===void 0||c.set(g,d),(v=this.outEdgesMap.get(_))===null||v===void 0||v.set(g,d),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,a,r){var u=xP(this.isDirected(),n,a,r),c=this.edgesMap.get(u);if(c){var v=pA(this.isDirected(),n,a,r),d=v.v,g=v.w;this.edgesLabelsMap.delete(u),this.edgesMap.delete(u);var _=this.predecessorsMap.get(g),b=this.successorsMap.get(d);dA(_,d),dA(b,g),this.inEdgesMap.get(g).delete(u),this.outEdgesMap.get(d).delete(u),this.edgeCountNum-=1}return this}}]),e}();qv.fromJSON=ZY;function rK(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function oK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var AP=rK(function e(){var t=this;oK(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var a=t.keyIndice.get(n);if(a!==void 0)return t.arr[a].priority},this.swap=function(n,a){var r=t.arr,u=t.keyIndice,c=[r[n],r[a]],v=c[0],d=c[1];r[n]=d,r[a]=v,u.set(v.key,a),u.set(d.key,n)},this.innerDecrease=function(n){for(var a=t.arr,r=a[n].priority,u,c=n;c!==0;){var v;if(u=c>>1,((v=a[u])===null||v===void 0?void 0:v.priority)<r)break;t.swap(c,u),c=u}},this.heapify=function(n){var a=t.arr,r=n<<1,u=r+1,c=n;r<a.length&&(c=a[r].priority<a[c].priority?r:c,u<a.length&&(c=a[u].priority<a[c].priority?u:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,a){var r=t.keyIndice,u=t.arr;if(!r.has(n)){var c=u.length;return r.set(n,c),u.push({key:n,priority:a}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,a){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(a>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(a));t.arr[r].priority=a,t.innerDecrease(r)}}),iK=function(t,n){var a=new qv,r=new Map,u=new AP,c;function v(_){var b=_.v===c?_.w:_.v,x=u.priority(b);if(x!==void 0){var A=n(_);A<x&&(r.set(b,c),u.decrease(b,A))}}if(t.nodeCount()===0)return a;t.nodes().forEach(function(_){u.add(_,Number.POSITIVE_INFINITY),a.setNode(_)}),u.decrease(t.nodes()[0],0);for(var d=!1;u.size()>0;){var g;if(c=u.removeMin(),r.has(c))a.setEdge(c,r.get(c));else{if(d)throw new Error("Input graph is not connected: "+t.graph());d=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(v)}return a},aK=function(t){var n=new Set,a=[],r=t.nodes();return r.forEach(function(u){for(var c=[],v=[u];v.length>0;){var d=v.pop();if(!n.has(d)){var g,_;n.add(d),c.push(d),(g=t.successors(d))===null||g===void 0||g.forEach(function(b){return v.push(b)}),(_=t.predecessors(d))===null||_===void 0||_.forEach(function(b){return v.push(b)})}}c.length&&a.push(c)}),a},lK=function e(t,n,a,r,u,c){r.includes(n)||(r.push(n),a||c.push(n),u(n).forEach(function(v){return e(t,v,a,r,u,c)}),a&&c.push(n))},BE=function(t,n,a){var r=Array.isArray(n)?n:[n],u=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],v=[];return r.forEach(function(d){if(t.hasNode(d))lK(t,d,a==="post",v,u,c);else throw new Error("Graph does not have node: "+d)}),c};function uK(e,t){return dK(e)||fK(e,t)||cK(e,t)||sK()}function sK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cK(e,t){if(e){if(typeof e=="string")return yA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yA(e,t)}}function yA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function fK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],r=!0,u=!1,c,v;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(a.push(c.value),!(t&&a.length===t));r=!0);}catch(d){u=!0,v=d}finally{try{!r&&n.return!=null&&n.return()}finally{if(u)throw v}}return a}}function dK(e){if(Array.isArray(e))return e}var pK=function(){return 1},TP=function(t,n,a,r){return hK(t,n,a||pK,r||function(u){return t.outEdges(u)})},hK=function(t,n,a,r){var u=new Map,c=new AP,v,d,g=function(x){var A=x.v!==v?x.v:x.w,M=u.get(A),O=a(x),S=d.distance+O;if(O<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+O);S<M.distance&&(M.distance=S,M.predecessor=v,c.decrease(A,S))};for(t.nodes().forEach(function(b){var x=b===n?0:Number.POSITIVE_INFINITY;u.set(b,{distance:x}),c.add(b,x)});c.size()>0&&(v=c.removeMin(),d=u.get(v),!(d&&d.distance===Number.POSITIVE_INFINITY));)r(v).forEach(g);var _={};return Array.from(u.entries()).forEach(function(b){var x=uK(b,2),A=x[0],M=x[1];return _[String(A)]=M,_}),_},vK=function(t,n,a){var r={};return t.nodes().forEach(function(u){return r[String(u)]=TP(t,u,n,a),r}),r},MP=function(t){var n=0,a=[],r=new Map,u=[];function c(v){var d,g={onStack:!0,lowlink:n,index:n};if(r.set(v,g),n+=1,a.push(v),(d=t.successors(v))===null||d===void 0||d.forEach(function(A){var M;if(r.has(A)){if(!((M=r.get(A))===null||M===void 0)&&M.onStack){var S=r.get(A);g.lowlink=Math.min(g.lowlink,S.index)}}else{c(A);var O=r.get(A);g.lowlink=Math.min(g.lowlink,O.lowlink)}}),g.lowlink===g.index){var _=[],b;do{b=a.pop();var x=r.get(b);x.onStack=!1,_.push(b)}while(v!==b);u.push(_)}}return t.nodes().forEach(function(v){r.has(v)||c(v)}),u},mK=function(t){return MP(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function Lw(e){"@babel/helpers - typeof";return Lw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lw(e)}function yK(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function gK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _K(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gm(e,t)}function bK(e){var t=kP();return function(){var a=Wm(e),r;if(t){var u=Wm(this).constructor;r=Reflect.construct(a,arguments,u)}else r=a.apply(this,arguments);return wK(this,r)}}function wK(e,t){if(t&&(Lw(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EK(e)}function EK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fw(e){var t=typeof Map=="function"?new Map:void 0;return Fw=function(a){if(a===null||!OK(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,r)}function r(){return Ag(a,arguments,Wm(this).constructor)}return r.prototype=Object.create(a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Gm(r,a)},Fw(e)}function Ag(e,t,n){return kP()?Ag=Reflect.construct:Ag=function(r,u,c){var v=[null];v.push.apply(v,u);var d=Function.bind.apply(r,v),g=new d;return c&&Gm(g,c.prototype),g},Ag.apply(null,arguments)}function kP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function OK(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Gm(e,t){return Gm=Object.setPrototypeOf||function(a,r){return a.__proto__=r,a},Gm(e,t)}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Wm(e)}var $w=function(e){_K(n,e);var t=bK(n);function n(){return gK(this,n),t.apply(this,arguments)}return yK(n)}(Fw(Error));function PP(e){var t=new Set,n=new Set,a=[];function r(u){if(n.has(u))throw new $w;if(!t.has(u)){var c;n.add(u),t.add(u),(c=e.predecessors(u))===null||c===void 0||c.forEach(r),n.delete(u),a.push(u)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new $w;return a}var SK=function(t){try{PP(t)}catch(n){if(n instanceof $w)return!1;throw n}return!0},xK=function(t,n){return BE(t,n,"post")},AK=function(t,n){return BE(t,n,"pre")},TK=function(){return 1};function MK(e,t,n){return kK(e,t||TK,n||function(a){return e.outEdges(a)})}function kK(e,t,n){var a={},r=e.nodes();return r.forEach(function(u){var c=String(u);a[c]={},a[c][c]={distance:0},r.forEach(function(v){u!==v&&(a[c][String(v)]={distance:Number.POSITIVE_INFINITY})}),n(u).forEach(function(v){var d=v.v===u?v.w:v.v,g=t(v);a[c][String(d)]={distance:g,predecessor:u}})}),r.forEach(function(u){var c=String(u),v=a[c];r.forEach(function(d){var g=String(d),_=a[g];r.forEach(function(b){var x=String(b),A=_[c],M=v[x],O=_[x],S=A.distance+M.distance;S<O.distance&&(O.distance=S,O.predecessor=M.predecessor)})})}),a}const PK=Object.freeze(Object.defineProperty({__proto__:null,components:aK,dfs:BE,dijkstra:TP,dijkstraAll:vK,findCycles:mK,floydWarshall:MK,isAcyclic:SK,postorder:xK,preorder:AK,prim:iK,tarjan:MP,topsort:PP},Symbol.toStringTag,{value:"Module"}));class RK extends XY{}class NK extends qv{}const CK=()=>1,DK=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const a=IK(e,t||CK);return(n=jK(a.graph,a.buckets,a.zeroIdx).map(u=>e.outEdges(u.v,u.w)))===null||n===void 0?void 0:n.flat()},jK=(e,t,n)=>{let a=[];const r=t[t.length-1],u=t[0];let c;for(;e.nodeCount();){for(;c=u.dequeue();)C1(e,t,n,c);for(;c=r.dequeue();)C1(e,t,n,c);if(e.nodeCount()){for(let v=t.length-2;v>0;--v)if(c=t[v].dequeue(),c){a=a.concat(C1(e,t,n,c,!0));break}}}return a},C1=(e,t,n,a,r)=>{var u,c;const v=[];return(u=e.inEdges(a.v))===null||u===void 0||u.forEach(d=>{const g=e.edge(d),_=e.node(d.v);r&&v.push({v:d.v,w:d.w,in:0,out:0}),_.out===void 0&&(_.out=0),_.out-=g,Bw(t,n,_)}),(c=e.outEdges(a.v))===null||c===void 0||c.forEach(d=>{const g=e.edge(d),_=d.w,b=e.node(_);b.in===void 0&&(b.in=0),b.in-=g,Bw(t,n,b)}),e.removeNode(a.v),r?v:void 0},IK=(e,t)=>{const n=new NK;let a=0,r=0;e.nodes().forEach(d=>{n.setNode(d,{v:d,in:0,out:0})}),e.edges().forEach(d=>{const g=n.edge(d)||0,_=(t==null?void 0:t(d))||1,b=g+_;n.setEdge(d.v,d.w,b),r=Math.max(r,n.node(d.v).out+=_),a=Math.max(a,n.node(d.w).in+=_)});const u=[],c=r+a+3;for(let d=0;d<c;d++)u.push(new RK);const v=a+1;return n.nodes().forEach(d=>{Bw(u,v,n.node(d))}),{buckets:u,zeroIdx:v,graph:n}},Bw=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},LK=e=>{const t=a=>r=>{var u;return((u=a.edge(r))===null||u===void 0?void 0:u.weight)||1},n=e.graph().acyclicer==="greedy"?DK(e,t(e)):FK(e);n==null||n.forEach(a=>{const r=e.edge(a);e.removeEdgeObj(a),r.forwardName=a.name,r.reversed=!0,e.setEdge(a.w,a.v,r,`rev-${Math.random()}`)})},FK=e=>{const t=[],n={},a={},r=u=>{var c;a[u]||(a[u]=!0,n[u]=!0,(c=e.outEdges(u))===null||c===void 0||c.forEach(v=>{n[v.w]?t.push(v):r(v.w)}),delete n[u])};return e.nodes().forEach(r),t},$K=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const a=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,a)}})},gA={run:LK,undo:$K};class jf extends qv{}const BK=(e,t)=>Number(e)-Number(t),Yv=(e,t,n,a)=>{let r;do r=`${a}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},UK=e=>{const t=new jf().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const a=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:a.weight+r.weight,minlen:Math.max(a.minlen,r.minlen)})}),t},RP=e=>{const t=new jf({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var a;!((a=e.children(n))===null||a===void 0)&&a.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},VK=(e,t)=>e==null?void 0:e.reduce((n,a,r)=>(n[a]=t[r],n),{}),_A=(e,t)=>{const n=Number(e.x),a=Number(e.y),r=Number(t.x)-n,u=Number(t.y)-a;let c=Number(e.width)/2,v=Number(e.height)/2;if(!r&&!u)return{x:0,y:0};let d,g;return Math.abs(u)*c>Math.abs(r)*v?(u<0&&(v=-v),d=v*r/u,g=v):(r<0&&(c=-c),d=c,g=c*u/r),{x:n+d,y:a+g}},zm=e=>{const t=[],n=NP(e)+1;for(let a=0;a<n;a++)t.push([]);e.nodes().forEach(a=>{const r=e.node(a);if(!r)return;const u=r.rank;u!==void 0&&t[u]&&t[u].push(a)});for(let a=0;a<n;a++)t[a]=t[a].sort((r,u)=>{var c,v;return BK((c=e.node(r))===null||c===void 0?void 0:c.order,(v=e.node(u))===null||v===void 0?void 0:v.order)});return t},GK=e=>{const t=e.nodes().filter(a=>{var r;return((r=e.node(a))===null||r===void 0?void 0:r.rank)!==void 0}).map(a=>e.node(a).rank),n=Math.min(...t);e.nodes().forEach(a=>{const r=e.node(a);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},WK=e=>{const t=e.nodes(),n=t.filter(v=>{var d;return((d=e.node(v))===null||d===void 0?void 0:d.rank)!==void 0}).map(v=>e.node(v).rank),a=Math.min(...n),r=[];t.forEach(v=>{var d;const g=(((d=e.node(v))===null||d===void 0?void 0:d.rank)||0)-a;r[g]||(r[g]=[]),r[g].push(v)});let u=0;const c=e.graph().nodeRankFactor||0;for(let v=0;v<r.length;v++){const d=r[v];d===void 0?v%c!==0&&(u-=1):u&&(d==null||d.forEach(g=>{const _=e.node(g);_&&(_.rank=_.rank||0,_.rank+=u)}))}},bA=(e,t,n,a)=>{const r={width:0,height:0};return Zg(n)&&Zg(a)&&(r.rank=n,r.order=a),Yv(e,"border",r,t)},NP=e=>{let t;return e.nodes().forEach(n=>{var a;const r=(a=e.node(n))===null||a===void 0?void 0:a.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},zK=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(a=>{t(a)?n.lhs.push(a):n.rhs.push(a)}),n},CP=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},DP=(e,t)=>t(),UE=(e,t)=>e.reduce((n,a)=>{const r=t(n),u=t(a);return r>u?a:n}),HK=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>XK(e,t))},XK=(e,t)=>{let n=t.v,a=e.node(n).rank;const r=t.w,u=e.node(r).rank,c=t.name,v=e.edge(t),d=v.labelRank;if(u===a+1)return;e.removeEdgeObj(t);const g=e.graph();let _,b,x;for(x=0,++a;a<u;++x,++a)v.points=[],b={edgeLabel:v,width:0,height:0,edgeObj:t,rank:a},_=Yv(e,"edge",b,"_d"),a===d&&(b.width=v.width,b.height=v.height,b.dummy="edge-label",b.labelpos=v.labelpos),e.setEdge(n,_,{weight:v.weight},c),x===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(_)),n=_;e.setEdge(n,r,{weight:v.weight},c)},qK=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let a=e.node(n);const r=a.edgeLabel;let u;a.edgeObj&&e.setEdgeObj(a.edgeObj,r);let c=n;for(;a.dummy;)u=e.successors(c)[0],e.removeNode(c),r.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height),c=u,a=e.node(c)})},wA={run:HK,undo:qK},jP=e=>{var t;const n={},a=r=>{var u;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let v;return(u=e.outEdges(r))===null||u===void 0||u.forEach(d=>{const g=a(d.w),_=e.edge(d).minlen,b=g-_;b&&(v===void 0||b<v)&&(v=b)}),v||(v=0),c.rank=v,v};(t=e.sources())===null||t===void 0||t.forEach(r=>a(r))},YK=e=>{var t;const n={};let a;const r=v=>{var d;const g=e.node(v);if(!g)return 0;if(n[v])return g.rank;n[v]=!0;let _;return(d=e.outEdges(v))===null||d===void 0||d.forEach(b=>{const x=r(b.w),A=e.edge(b).minlen,M=x-A;M&&(_===void 0||M<_)&&(_=M)}),_||(_=0),(a===void 0||_<a)&&(a=_),g.rank=_,_};(t=e.sources())===null||t===void 0||t.forEach(v=>{e.node(v)&&r(v)}),a===void 0&&(a=0);const u={},c=(v,d)=>{var g;const _=e.node(v),b=isNaN(_.layer)?d:_.layer;(_.rank===void 0||_.rank<b)&&(_.rank=b),!u[v]&&(u[v]=!0,(g=e.outEdges(v))===null||g===void 0||g.map(x=>{c(x.w,b+e.edge(x).minlen)}))};e.nodes().forEach(v=>{const d=e.node(v);d&&(isNaN(d.layer)?d.rank-=a:c(v,d.layer))})},Yd=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,KK=e=>{const t=new jf({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});let r,u;for(;ZK(t,e)<a;)r=IP(t,e),u=t.hasNode(r.v)?Yd(e,r):-Yd(e,r),LP(t,e,u);return t},ZK=(e,t)=>{const n=a=>{t.nodeEdges(a).forEach(r=>{const u=r.v,c=a===u?r.w:u;!e.hasNode(c)&&!Yd(t,r)&&(e.setNode(c,{}),e.setEdge(a,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},JK=e=>{const t=new jf({directed:!1}),n=e.nodes()[0],a=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,u;for(;QK(t,e)<a;)r=IP(t,e),u=t.hasNode(r.v)?Yd(e,r):-Yd(e,r),LP(t,e,u);return t},QK=(e,t)=>{const n=a=>{var r;(r=t.nodeEdges(a))===null||r===void 0||r.forEach(u=>{const c=u.v,v=a===c?u.w:c;!e.hasNode(v)&&(t.node(v).layer!==void 0||!Yd(t,u))&&(e.setNode(v,{}),e.setEdge(a,v,{}),n(v))})};return e.nodes().forEach(n),e.nodeCount()},IP=(e,t)=>UE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Yd(t,n):1/0),LP=(e,t,n)=>{e.nodes().forEach(a=>{t.node(a).rank||(t.node(a).rank=0),t.node(a).rank+=n})},{preorder:eZ,postorder:tZ}=PK,nZ=e=>{const t=UK(e);jP(t);const n=KK(t);$P(n),FP(n,t);let a,r;for(;a=iZ(n);)r=aZ(n,t,a),lZ(n,t,a,r)},FP=(e,t)=>{let n=tZ(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(a=>{rZ(e,t,a)})},rZ=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=oZ(e,t,n)},oZ=(e,t,n)=>{var a;const u=e.node(n).parent;let c=!0,v=t.edgeFromArgs(n,u),d=0;return v||(c=!1,v=t.edgeFromArgs(u,n)),d=v.weight,(a=t.nodeEdges(n))===null||a===void 0||a.forEach(g=>{const _=g.v===n,b=_?g.w:g.v;if(b!==u){const x=_===c,A=t.edge(g).weight;if(d+=x?A:-A,sZ(e,n,b)){const M=e.edgeFromArgs(n,b).cutvalue;d+=x?-M:M}}}),d},$P=(e,t=e.nodes()[0])=>{BP(e,{},1,t)},BP=(e,t,n,a,r)=>{var u;const c=n;let v=n;const d=e.node(a);return t[a]=!0,(u=e.neighbors(a))===null||u===void 0||u.forEach(g=>{t[g]||(v=BP(e,t,v,g,a))}),d.low=c,d.lim=v++,r?d.parent=r:delete d.parent,v},iZ=e=>e.edges().find(t=>e.edge(t).cutvalue<0),aZ=(e,t,n)=>{let a=n.v,r=n.w;t.hasEdge(a,r)||(a=n.w,r=n.v);const u=e.node(a),c=e.node(r);let v=u,d=!1;u.lim>c.lim&&(v=c,d=!0);const g=t.edges().filter(_=>d===EA(e,e.node(_.v),v)&&d!==EA(e,e.node(_.w),v));return UE(g,_=>Yd(t,_))},lZ=(e,t,n,a)=>{const r=n.v,u=n.w;e.removeEdge(r,u),e.setEdge(a.v,a.w,{}),$P(e),FP(e,t),uZ(e,t)},uZ=(e,t)=>{const n=e.nodes().find(r=>{var u;return!(!((u=t.node(r))===null||u===void 0)&&u.parent)});let a=eZ(e,n);a=a==null?void 0:a.slice(1),a==null||a.forEach(r=>{const u=e.node(r).parent;let c=t.edgeFromArgs(r,u),v=!1;c||(c=t.edgeFromArgs(u,r),v=!0),t.node(r).rank=t.node(u).rank+(v?c.minlen:-c.minlen)})},sZ=(e,t,n)=>e.hasEdge(t,n),EA=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,cZ=e=>{switch(e.graph().ranker){case"network-simplex":dZ(e);break;case"tight-tree":OA(e);break;case"longest-path":fZ(e);break;default:OA(e)}},fZ=jP,OA=e=>{YK(e),JK(e)},dZ=e=>{nZ(e)},pZ=e=>{var t;const n={};let a=0;const r=u=>{var c;const v=a;(c=e.children(u))===null||c===void 0||c.forEach(r),n[u]={low:v,lim:a++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},hZ=(e,t,n,a)=>{const r=[],u=[],c=Math.min(t[n].low,t[a].low),v=Math.max(t[n].lim,t[a].lim);let d,g;d=n;do d=e.parent(d),r.push(d);while(d&&(t[d].low>c||v>t[d].lim));for(g=d,d=a;d&&d!==g;)u.push(d),d=e.parent(d);return{lca:g,path:r.concat(u.reverse())}},vZ=e=>{var t;const n=pZ(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(a=>{var r,u;let c=a,v=e.node(c);const d=v.edgeObj;if(!d)return;const g=hZ(e,n,d.v,d.w),_=g.path,b=g.lca;let x=0,A=_[x],M=!0;for(;c!==d.w;){if(v=e.node(c),M){for(;A!==b&&((r=e.node(A))===null||r===void 0?void 0:r.maxRank)<v.rank;)x++,A=_[x];A===b&&(M=!1)}if(!M){for(;x<_.length-1&&((u=e.node(_[x+1]))===null||u===void 0?void 0:u.minRank)<=v.rank;)x++;A=_[x]}e.setParent(c,A),c=e.successors(c)[0]}})},mZ=e=>{var t;const n=Yv(e,"root",{},"_root"),a=yZ(e);let r=Math.max(...Object.values(a));Math.abs(r)===1/0&&(r=1);const u=r-1,c=2*u+1;e.graph().nestingRoot=n,e.edges().forEach(d=>{e.edge(d).minlen*=c});const v=gZ(e)+1;(t=e.children())===null||t===void 0||t.forEach(d=>{UP(e,n,c,v,u,a,d)}),e.graph().nodeRankFactor=c},UP=(e,t,n,a,r,u,c)=>{const v=e.children(c);if(!(v!=null&&v.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const d=bA(e,"_bt"),g=bA(e,"_bb"),_=e.node(c);e.setParent(d,c),_.borderTop=d,e.setParent(g,c),_.borderBottom=g,v==null||v.forEach(b=>{UP(e,t,n,a,r,u,b);const x=e.node(b),A=x.borderTop?x.borderTop:b,M=x.borderBottom?x.borderBottom:b,O=x.borderTop?a:2*a,S=A!==M?1:r-u[c]+1;e.setEdge(d,A,{minlen:S,weight:O,nestingEdge:!0}),e.setEdge(M,g,{minlen:S,weight:O,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,d,{weight:0,minlen:r+u[c]})},yZ=e=>{var t;const n={},a=(r,u)=>{const c=e.children(r);c==null||c.forEach(v=>a(v,u+1)),n[r]=u};return(t=e.children())===null||t===void 0||t.forEach(r=>a(r,1)),n},gZ=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},_Z=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},SA={run:mZ,cleanup:_Z},bZ=e=>{var t;const n=a=>{const r=e.children(a),u=e.node(a);if(r!=null&&r.length&&r.forEach(c=>n(c)),u.hasOwnProperty("minRank")){u.borderLeft=[],u.borderRight=[];for(let c=u.minRank,v=u.maxRank+1;c<v;c+=1)xA(e,"borderLeft","_bl",a,u,c),xA(e,"borderRight","_br",a,u,c)}};(t=e.children())===null||t===void 0||t.forEach(a=>n(a))},xA=(e,t,n,a,r,u)=>{const c={rank:u,borderType:t,width:0,height:0},v=r[t][u-1],d=Yv(e,"border",c,n);r[t][u]=d,e.setParent(d,a),v&&e.setEdge(v,d,{weight:1})},wZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&VP(e)},EZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&OZ(e),(n==="lr"||n==="rl")&&(SZ(e),VP(e))},VP=e=>{e.nodes().forEach(t=>{AA(e.node(t))}),e.edges().forEach(t=>{AA(e.edge(t))})},AA=e=>{const t=e.width;e.width=e.height,e.height=t},OZ=e=>{e.nodes().forEach(t=>{D1(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>D1(r)),a.hasOwnProperty("y")&&D1(a)})},D1=e=>{e!=null&&e.y&&(e.y=-e.y)},SZ=e=>{e.nodes().forEach(t=>{j1(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>j1(r)),a.hasOwnProperty("x")&&j1(a)})},j1=e=>{const t=e.x;e.x=e.y,e.y=t},TA={adjust:wZ,undo:EZ};function xZ(e){return Array.isArray(e)}function Uw(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],a=1;a<t;a++)n=Math.max(n,e[a]);return n}const MA=function(e){if(xZ(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},kA=e=>{const t={},n=e.nodes().filter(_=>{var b;return!(!((b=e.children(_))===null||b===void 0)&&b.length)}),a=n.map(_=>e.node(_).rank),r=Uw(a),u=[];for(let _=0;_<r+1;_++)u.push([]);const c=_=>{var b;if(t.hasOwnProperty(_))return;t[_]=!0;const x=e.node(_);isNaN(x.rank)||u[x.rank].push(_),(b=e.successors(_))===null||b===void 0||b.forEach(A=>c(A))},v=n.sort((_,b)=>e.node(_).rank-e.node(b).rank),g=v.filter(_=>e.node(_).fixorder!==void 0).sort((_,b)=>e.node(_).fixorder-e.node(b).fixorder);return g==null||g.forEach(_=>{isNaN(e.node(_).rank)||u[e.node(_).rank].push(_),t[_]=!0}),v==null||v.forEach(c),u},AZ=(e,t,n)=>{const a=VK(n,n.map((_,b)=>b)),u=t.map(_=>{var b;const x=(b=e.outEdges(_))===null||b===void 0?void 0:b.map(A=>({pos:a[A.w]||0,weight:e.edge(A).weight}));return x==null?void 0:x.sort((A,M)=>A.pos-M.pos)}).flat().filter(_=>_!==void 0);let c=1;for(;c<n.length;)c<<=1;const v=2*c-1;c-=1;const d=Array(v).fill(0,0,v);let g=0;return u==null||u.forEach(_=>{if(_){let b=_.pos+c;d[b]+=_.weight;let x=0;for(;b>0;)b%2&&(x+=d[b+1]),b=b-1>>1,d[b]+=_.weight;g+=_.weight*x}}),g},PA=(e,t)=>{let n=0;for(let a=1;a<(t==null?void 0:t.length);a+=1)n+=AZ(e,t[a-1],t[a]);return n},TZ=(e,t,n)=>{const a=MZ(e),r=new jf({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(u=>e.node(u));return e.nodes().forEach(u=>{var c;const v=e.node(u),d=e.parent(u);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(r.setNode(u),r.setParent(u,d||a),(c=e[n](u))===null||c===void 0||c.forEach(g=>{const _=g.v===u?g.w:g.v,b=r.edgeFromArgs(_,u),x=b!==void 0?b.weight:0;r.setEdge(_,u,{weight:e.edge(g).weight+x})}),v.hasOwnProperty("minRank")&&r.setNode(u,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),r},MZ=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},kZ=(e,t,n)=>{const a={};let r;n==null||n.forEach(u=>{let c=e.parent(u),v,d;for(;c;){if(v=e.parent(c),v?(d=a[v],a[v]=c):(d=r,r=c),d&&d!==c){t.setEdge(d,c);return}c=v}})},PZ=(e,t)=>t.map(n=>{const a=e.inEdges(n);if(!(a!=null&&a.length))return{v:n};{const r={sum:0,weight:0};return a==null||a.forEach(u=>{const c=e.edge(u),v=e.node(u.v);r.sum+=c.weight*v.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),RZ=(e,t)=>{var n,a,r;const u={};e==null||e.forEach((v,d)=>{u[v.v]={i:d,indegree:0,in:[],out:[],vs:[v.v]};const g=u[v.v];v.barycenter!==void 0&&(g.barycenter=v.barycenter,g.weight=v.weight)}),(n=t.edges())===null||n===void 0||n.forEach(v=>{const d=u[v.v],g=u[v.w];d!==void 0&&g!==void 0&&(g.indegree++,d.out.push(u[v.w]))});const c=(r=(a=Object.values(u)).filter)===null||r===void 0?void 0:r.call(a,v=>!v.indegree);return NZ(c)},NZ=e=>{var t,n;const a=[],r=d=>g=>{g.merged||(g.barycenter===void 0||d.barycenter===void 0||g.barycenter>=d.barycenter)&&CZ(d,g)},u=d=>g=>{g.in.push(d),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const d=e.pop();a.push(d),(t=d.in.reverse())===null||t===void 0||t.forEach(g=>r(d)(g)),(n=d.out)===null||n===void 0||n.forEach(g=>u(d)(g))}const c=a.filter(d=>!d.merged),v=["vs","i","barycenter","weight"];return c.map(d=>{const g={};return v==null||v.forEach(_=>{d[_]!==void 0&&(g[_]=d[_])}),g})},CZ=(e,t)=>{var n;let a=0,r=0;e.weight&&(a+=e.barycenter*e.weight,r+=e.weight),t.weight&&(a+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=a/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},DZ=(e,t,n,a)=>{const r=zK(e,x=>{const A=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return a?!A&&x.hasOwnProperty("barycenter"):A||x.hasOwnProperty("barycenter")}),u=r.lhs,c=r.rhs.sort((x,A)=>-x.i- -A.i),v=[];let d=0,g=0,_=0;u==null||u.sort(jZ(!!t,!!n)),_=RA(v,c,_),u==null||u.forEach(x=>{var A;_+=(A=x.vs)===null||A===void 0?void 0:A.length,v.push(x.vs),d+=x.barycenter*x.weight,g+=x.weight,_=RA(v,c,_)});const b={vs:v.flat()};return g&&(b.barycenter=d/g,b.weight=g),b},RA=(e,t,n)=>{let a=n,r;for(;t.length&&(r=t[t.length-1]).i<=a;)t.pop(),e==null||e.push(r.vs),a++;return a},jZ=(e,t)=>(n,a)=>{if(n.fixorder!==void 0&&a.fixorder!==void 0)return n.fixorder-a.fixorder;if(n.barycenter<a.barycenter)return-1;if(n.barycenter>a.barycenter)return 1;if(t&&n.order!==void 0&&a.order!==void 0){if(n.order<a.order)return-1;if(n.order>a.order)return 1}return e?a.i-n.i:n.i-a.i},GP=(e,t,n,a,r,u)=>{var c,v,d,g;let _=e.children(t);const b=e.node(t),x=b?b.borderLeft:void 0,A=b?b.borderRight:void 0,M={};x&&(_=_==null?void 0:_.filter(D=>D!==x&&D!==A));const O=PZ(e,_||[]);O==null||O.forEach(D=>{var z;if(!((z=e.children(D.v))===null||z===void 0)&&z.length){const U=GP(e,D.v,n,a,u);M[D.v]=U,U.hasOwnProperty("barycenter")&&LZ(D,U)}});const S=RZ(O,n);IZ(S,M),(c=S.filter(D=>D.vs.length>0))===null||c===void 0||c.forEach(D=>{const z=e.node(D.vs[0]);z&&(D.fixorder=z.fixorder,D.order=z.order)});const j=DZ(S,a,r,u);if(x&&(j.vs=[x,j.vs,A].flat(),!((v=e.predecessors(x))===null||v===void 0)&&v.length)){const D=e.node(((d=e.predecessors(x))===null||d===void 0?void 0:d[0])||""),z=e.node(((g=e.predecessors(A))===null||g===void 0?void 0:g[0])||"");j.hasOwnProperty("barycenter")||(j.barycenter=0,j.weight=0),j.barycenter=(j.barycenter*j.weight+D.order+z.order)/(j.weight+2),j.weight+=2}return j},IZ=(e,t)=>{e==null||e.forEach(n=>{var a;const r=(a=n.vs)===null||a===void 0?void 0:a.map(u=>t[u]?t[u].vs:u);n.vs=r.flat()})},LZ=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},FZ=(e,t)=>{const n=NP(e),a=[],r=[];for(let _=1;_<n+1;_++)a.push(_);for(let _=n-1;_>-1;_--)r.push(_);const u=NA(e,a,"inEdges"),c=NA(e,r,"outEdges");let v=kA(e);I1(e,v);let d=Number.POSITIVE_INFINITY,g;for(let _=0,b=0;b<4;++_,++b){CA(_%2?u:c,_%4>=2,!1,t),v=zm(e);const x=PA(e,v);x<d&&(b=0,g=Jg(v),d=x)}v=kA(e),I1(e,v);for(let _=0,b=0;b<4;++_,++b){CA(_%2?u:c,_%4>=2,!0,t),v=zm(e);const x=PA(e,v);x<d&&(b=0,g=Jg(v),d=x)}I1(e,g)},NA=(e,t,n)=>t.map(a=>TZ(e,a,n)),CA=(e,t,n,a)=>{const r=new jf;e==null||e.forEach(u=>{var c;const v=u.graph().root,d=GP(u,v,r,t,n,a);for(let g=0;g<((c=d.vs)===null||c===void 0?void 0:c.length);g++){const _=u.node(d.vs[g]);_&&(_.order=g)}kZ(u,r,d.vs)})},I1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((a,r)=>{e.node(a).order=r})})};class $Z extends qv{}const BZ=(e,t)=>{const n={},a=(r,u)=>{let c=0,v=0;const d=r.length,g=u==null?void 0:u[(u==null?void 0:u.length)-1];return u==null||u.forEach((_,b)=>{var x;const A=VZ(e,_),M=A?e.node(A).order:d;(A||_===g)&&((x=u.slice(v,b+1))===null||x===void 0||x.forEach(O=>{var S;(S=e.predecessors(O))===null||S===void 0||S.forEach(j=>{var D;const z=e.node(j),U=z.order;(U<c||M<U)&&!(z.dummy&&(!((D=e.node(O))===null||D===void 0)&&D.dummy))&&WP(n,j,O)})}),v=b+1,c=M)}),u};return t!=null&&t.length&&t.reduce(a),n},UZ=(e,t)=>{const n={};function a(v,d,g,_,b){var x,A;let M;for(let O=d;O<g;O++)M=v[O],!((x=e.node(M))===null||x===void 0)&&x.dummy&&((A=e.predecessors(M))===null||A===void 0||A.forEach(S=>{const j=e.node(S);j.dummy&&(j.order<_||j.order>b)&&WP(n,S,M)}))}function r(v){return JSON.stringify(v.slice(1))}function u(v,d){const g=r(v);d.get(g)||(a(...v),d.set(g,!0))}const c=(v,d)=>{let g=-1,_,b=0;const x=new Map;return d==null||d.forEach((A,M)=>{var O;if(((O=e.node(A))===null||O===void 0?void 0:O.dummy)==="border"){const S=e.predecessors(A)||[];S.length&&(_=e.node(S[0]).order,u([d,b,M,g,_],x),b=M,g=_)}u([d,b,d.length,_,v.length],x)}),d};return t!=null&&t.length&&t.reduce(c),n},VZ=(e,t)=>{var n,a;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(a=e.predecessors(t))===null||a===void 0?void 0:a.find(r=>e.node(r).dummy)},WP=(e,t,n)=>{let a=t,r=n;if(a>r){const c=a;a=r,r=c}let u=e[a];u||(e[a]=u={}),u[r]=!0},GZ=(e,t,n)=>{let a=t,r=n;if(a>r){const u=t;a=r,r=u}return!!e[a]},WZ=(e,t,n,a)=>{const r={},u={},c={};return t==null||t.forEach(v=>{v==null||v.forEach((d,g)=>{r[d]=d,u[d]=d,c[d]=g})}),t==null||t.forEach(v=>{let d=-1;v==null||v.forEach(g=>{let _=a(g);if(_.length){_=_.sort((x,A)=>c[x]-c[A]);const b=(_.length-1)/2;for(let x=Math.floor(b),A=Math.ceil(b);x<=A;++x){const M=_[x];u[g]===g&&d<c[M]&&!GZ(n,g,M)&&(u[M]=g,u[g]=r[g]=r[M],d=c[M])}}})}),{root:r,align:u}},zZ=(e,t,n,a,r)=>{var u;const c={},v=HZ(e,t,n,r),d=r?"borderLeft":"borderRight",g=(x,A)=>{let M=v.nodes(),O=M.pop();const S={};for(;O;)S[O]?x(O):(S[O]=!0,M.push(O),M=M.concat(A(O))),O=M.pop()},_=x=>{c[x]=(v.inEdges(x)||[]).reduce((A,M)=>Math.max(A,(c[M.v]||0)+v.edge(M)),0)},b=x=>{const A=(v.outEdges(x)||[]).reduce((O,S)=>Math.min(O,(c[S.w]||0)-v.edge(S)),Number.POSITIVE_INFINITY),M=e.node(x);A!==Number.POSITIVE_INFINITY&&M.borderType!==d&&(c[x]=Math.max(c[x],A))};return g(_,v.predecessors.bind(v)),g(b,v.successors.bind(v)),(u=Object.values(a))===null||u===void 0||u.forEach(x=>{c[x]=c[n[x]]}),c},HZ=(e,t,n,a)=>{const r=new $Z,u=e.graph(),c=KZ(u.nodesep,u.edgesep,a);return t==null||t.forEach(v=>{let d;v==null||v.forEach(g=>{const _=n[g];if(r.setNode(_),d){const b=n[d],x=r.edgeFromArgs(b,_);r.setEdge(b,_,Math.max(c(e,g,d),x||0))}d=g})}),r},XZ=(e,t)=>UE(Object.values(t),n=>{var a;let r=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;return(a=Object.keys(n))===null||a===void 0||a.forEach(c=>{const v=n[c],d=ZZ(e,c)/2;r=Math.max(v+d,r),u=Math.min(v-d,u)}),r-u});function qZ(e,t){const n=Object.values(t),a=MA(n),r=Uw(n);["u","d"].forEach(u=>{["l","r"].forEach(c=>{const v=u+c,d=e[v];let g;if(d===t)return;const _=Object.values(d);g=c==="l"?a-MA(_):r-Uw(_),g&&(e[v]={},Object.keys(d).forEach(b=>{e[v][b]=d[b]+g}))})})}const YZ=(e,t)=>{const n={};return Object.keys(e.ul).forEach(a=>{if(t)n[a]=e[t.toLowerCase()][a];else{const r=Object.values(e).map(u=>u[a]);n[a]=(r[0]+r[1])/2}}),n},KZ=(e,t,n)=>(a,r,u)=>{const c=a.node(r),v=a.node(u);let d=0,g;if(d+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(d+=n?g:-g),g=0,d+=(c.dummy?t:e)/2,d+=(v.dummy?t:e)/2,d+=v.width/2,v.labelpos)switch((v.labelpos||"").toLowerCase()){case"l":g=v.width/2;break;case"r":g=-v.width/2;break}return g&&(d+=n?g:-g),g=0,d},ZZ=(e,t)=>e.node(t).width||0,JZ=e=>{const t=zm(e),n=e.graph().ranksep;let a=0;t==null||t.forEach(r=>{const u=r.map(v=>e.node(v).height),c=Math.max(...u,0);r==null||r.forEach(v=>{e.node(v).y=a+c/2}),a+=c+n})},QZ=e=>{const t=zm(e),n=Object.assign(BZ(e,t),UZ(e,t)),a={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(v=>{v==="r"&&(r=r.map(b=>Object.values(b).reverse()));const d=(c==="u"?e.predecessors:e.successors).bind(e),g=WZ(e,r,n,d),_=zZ(e,r,g.root,g.align,v==="r");v==="r"&&Object.keys(_).forEach(b=>_[b]=-_[b]),a[c+v]=_})});const u=XZ(e,a);return u&&qZ(a,u),YZ(a,e.graph().align)},eJ=e=>{var t;const n=RP(e);JZ(n);const a=QZ(n);(t=Object.keys(a))===null||t===void 0||t.forEach(r=>{n.node(r).x=a[r]})},tJ=(e,t)=>{const a=e.nodes().filter(c=>{var v;return!(!((v=e.children(c))===null||v===void 0)&&v.length)}).map(c=>e.node(c).rank),r=Math.max(...a),u=[];for(let c=0;c<r+1;c++)u[c]=[];t==null||t.forEach(c=>{const v=e.node(c);!v||v!=null&&v.dummy||isNaN(v.rank)||(v.fixorder=u[v.rank].length,u[v.rank].push(c))})},nJ=(e,t)=>{const n=t&&t.debugTiming?CP:DP;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{oJ(e,t.prevGraph)});const a=n("  buildLayoutGraph",()=>dJ(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{pJ(a)});try{n("  runLayout",()=>{rJ(a,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{iJ(e,a)})})},rJ=(e,t,n)=>{t("    removeSelfEdges",()=>{EJ(e)}),t("    acyclic",()=>{gA.run(e)}),t("    nestingGraph.run",()=>{SA.run(e)}),t("    rank",()=>{cZ(RP(e))}),t("    injectEdgeLabelProxies",()=>{hJ(e)}),t("    removeEmptyRanks",()=>{WK(e)}),t("    nestingGraph.cleanup",()=>{SA.cleanup(e)}),t("    normalizeRanks",()=>{GK(e)}),t("    assignRankMinMax",()=>{vJ(e)}),t("    removeEdgeLabelProxies",()=>{mJ(e)}),t("    normalize.run",()=>{wA.run(e)}),t("    parentDummyChains",()=>{vZ(e)}),t("    addBorderSegments",()=>{bZ(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{tJ(e,n.nodeOrder)}),t("    order",()=>{FZ(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{OJ(e)}),t("    adjustCoordinateSystem",()=>{TA.adjust(e)}),t("    position",()=>{eJ(e)}),t("    positionSelfEdges",()=>{SJ(e)}),t("    removeBorderNodes",()=>{wJ(e)}),t("    normalize.undo",()=>{wA.undo(e)}),t("    fixupEdgeLabelCoords",()=>{_J(e)}),t("    undoCoordinateSystem",()=>{TA.undo(e)}),t("    translateGraph",()=>{yJ(e)}),t("    assignNodeIntersects",()=>{gJ(e)}),t("    reversePoints",()=>{bJ(e)}),t("    acyclic.undo",()=>{gA.undo(e)})},oJ=(e,t)=>{e.nodes().forEach(n=>{const a=e.node(n),r=t.node(n);r!==void 0?(a.fixorder=r._order,delete r._order):delete a.fixorder})},iJ=(e,t)=>{e.nodes().forEach(n=>{var a;const r=e.node(n);if(r){const u=t.node(n);r.x=u.x,r.y=u.y,r._order=u.order,r._rank=u.rank,!((a=t.children(n))===null||a===void 0)&&a.length&&(r.width=u.width,r.height=u.height)}}),e.edges().forEach(n=>{const a=e.edge(n),r=t.edge(n);a.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(a.x=r.x,a.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},aJ=["nodesep","edgesep","ranksep","marginx","marginy"],lJ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},L1=["acyclicer","ranker","rankdir","align"],uJ=["width","height","layer","fixorder"],sJ={width:0,height:0},cJ=["minlen","weight","width","height","labeloffset"],fJ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},F1=["labelpos"],dJ=e=>{const t=new jf({multigraph:!0,compound:!0}),n=B1(e.graph()),a={};return L1==null||L1.forEach(r=>{n[r]!==void 0&&(a[r]=n[r])}),t.setGraph(Object.assign({},lJ,$1(n,aJ),a)),e.nodes().forEach(r=>{const u=B1(e.node(r)),c=Object.assign(Object.assign({},sJ),u),v=$1(c,uJ);t.setNode(r,v),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const u=B1(e.edge(r)),c={};F1==null||F1.forEach(v=>{u[v]!==void 0&&(c[v]=u[v])}),t.setEdgeObj(r,Object.assign({},fJ,$1(u,cJ),c))}),t},pJ=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const a=e.node(n);isNaN(a.layer)||a.layer||(a.layer=0)}),e.edges().forEach(n=>{var a;const r=e.edge(n);r.minlen*=2,((a=r.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},hJ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const a=e.node(t.v),r=e.node(t.w),u={e:t,rank:(r.rank-a.rank)/2+a.rank};Yv(e,"edge-proxy",u,"_ep")}})},vJ=e=>{let t=0;e.nodes().forEach(n=>{var a,r;const u=e.node(n);u.borderTop&&(u.minRank=(a=e.node(u.borderTop))===null||a===void 0?void 0:a.rank,u.maxRank=(r=e.node(u.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,u.maxRank||-1/0))}),e.graph().maxRank=t},mJ=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},yJ=e=>{let t,n=0,a,r=0;const u=e.graph(),c=u.marginx||0,v=u.marginy||0,d=g=>{if(!g)return;const _=g.x,b=g.y,x=g.width,A=g.height;!isNaN(_)&&!isNaN(x)&&(t===void 0&&(t=_-x/2),t=Math.min(t,_-x/2),n=Math.max(n,_+x/2)),!isNaN(b)&&!isNaN(A)&&(a===void 0&&(a=b-A/2),a=Math.min(a,b-A/2),r=Math.max(r,b+A/2))};e.nodes().forEach(g=>{d(e.node(g))}),e.edges().forEach(g=>{const _=e.edge(g);_!=null&&_.hasOwnProperty("x")&&d(_)}),t-=c,a-=v,e.nodes().forEach(g=>{const _=e.node(g);_&&(_.x-=t,_.y-=a)}),e.edges().forEach(g=>{var _;const b=e.edge(g);(_=b.points)===null||_===void 0||_.forEach(x=>{x.x-=t,x.y-=a}),b.hasOwnProperty("x")&&(b.x-=t),b.hasOwnProperty("y")&&(b.y-=a)}),u.width=n-t+c,u.height=r-a+v},gJ=e=>{e.edges().forEach(t=>{const n=e.edge(t),a=e.node(t.v),r=e.node(t.w);let u,c;n.points?(u=n.points[0],c=n.points[n.points.length-1]):(n.points=[],u=r,c=a),n.points.unshift(_A(a,u)),n.points.push(_A(r,c))})},_J=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},bJ=e=>{e.edges().forEach(t=>{var n;const a=e.edge(t);a.reversed&&((n=a.points)===null||n===void 0||n.reverse())})},wJ=e=>{e.nodes().forEach(t=>{var n,a,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const u=e.node(t),c=e.node(u.borderTop),v=e.node(u.borderBottom),d=e.node(u.borderLeft[((a=u.borderLeft)===null||a===void 0?void 0:a.length)-1]),g=e.node(u.borderRight[((r=u.borderRight)===null||r===void 0?void 0:r.length)-1]);u.width=Math.abs((g==null?void 0:g.x)-(d==null?void 0:d.x))||10,u.height=Math.abs((v==null?void 0:v.y)-(c==null?void 0:c.y))||10,u.x=((d==null?void 0:d.x)||0)+u.width/2,u.y=((c==null?void 0:c.y)||0)+u.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},EJ=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},OJ=e=>{const t=zm(e);t==null||t.forEach(n=>{let a=0;n==null||n.forEach((r,u)=>{var c;const v=e.node(r);v.order=u+a,(c=v.selfEdges)===null||c===void 0||c.forEach(d=>{Yv(e,"selfedge",{width:d.label.width,height:d.label.height,rank:v.rank,order:u+ ++a,e:d.e,label:d.label},"_se")}),delete v.selfEdges})})},SJ=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const a=e.node(n.e.v),r=a.x+a.width/2,u=a.y,c=n.x-r,v=a.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:u-v},{x:r+5*c/6,y:u-v},{y:u,x:r+c},{x:r+5*c/6,y:u+v},{x:r+2*c/3,y:u+v}],n.label.x=n.x,n.label.y=n.y}})},$1=(e,t)=>{const n={};return t==null||t.forEach(a=>{e[a]!==void 0&&(n[a]=+e[a])}),n},B1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},xJ={layout:nJ,util:{time:CP,notime:DP}};class AJ extends WY{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const a=this,{nodes:r}=a,u=r.find(c=>c.id===n);return u?u.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,a,r;const u=this,{nodes:c,nodeSize:v,rankdir:d,combos:g,begin:_,radial:b,comboEdges:x=[],vedges:A=[]}=u;if(!c)return;const M=u.edges||[],O=new jf({multigraph:!0,compound:!0});u.nodeMap={};const S={};c.forEach(K=>{u.nodeMap[K.id]=K,K.comboId&&(S[K.comboId]=S[K.comboId]||[],S[K.comboId].push(K.id))});let j=[];const D={};!((t=u.nodeOrder)===null||t===void 0)&&t.length?(u.nodeOrder.forEach(K=>{D[K]=!0,j.push(u.nodeMap[K])}),c.forEach(K=>{D[K.id]||j.push(K)})):j=c;let z;v?uA(v)?z=()=>v:z=()=>[v,v]:z=K=>K.size?uA(K.size)?K.size:SP(K.size)?[K.size.width||40,K.size.height||40]:[K.size,K.size]:[40,40];const U=sA(u.ranksep,50,u.ranksepFunc),L=sA(u.nodesep,50,u.nodesepFunc);let $=L,X=U;(d==="LR"||d==="RL")&&($=U,X=L),O.setDefaultEdgeLabel(()=>({})),O.setGraph(u);const Y={};this.sortByCombo&&g&&g.forEach(K=>{if(Y[K.id]=K,K.collapsed){const Q=z(K),ce=X(K),ue=$(K),de=Q[0]+2*ue,ye=Q[1]+2*ce;O.setNode(K.id,{width:de,height:ye})}K.parentId&&(Y[K.parentId]||O.setNode(K.parentId,{}),O.setParent(K.id,K.parentId))}),j.filter(K=>K.layout!==!1).forEach(K=>{const Q=z(K),ce=X(K),ue=$(K),de=Q[0]+2*ue,ye=Q[1]+2*ce,we=K.layer;Zg(we)?O.setNode(K.id,{width:de,height:ye,layer:we}):O.setNode(K.id,{width:de,height:ye}),this.sortByCombo&&K.comboId&&(Y[K.comboId]||(Y[K.comboId]={id:K.comboId},O.setNode(K.comboId,{})),O.setParent(K.id,K.comboId))}),M.forEach(K=>{const Q=fv(K,"source"),ce=fv(K,"target");this.layoutNode(Q)&&this.layoutNode(ce)&&O.setEdge(Q,ce,{weight:K.weight||1})}),(n=x==null?void 0:x.concat(A||[]))===null||n===void 0||n.forEach(K=>{var Q,ce;const{source:ue,target:de}=K,ye=!((Q=Y[ue])===null||Q===void 0)&&Q.collapsed?[ue]:S[ue]||[ue],we=!((ce=Y[de])===null||ce===void 0)&&ce.collapsed?[de]:S[de]||[de];ye.forEach(me=>{we.forEach(He=>{O.setEdge(me,He,{weight:K.weight||1})})})});let H;!((a=u.preset)===null||a===void 0)&&a.nodes&&(H=new jf({multigraph:!0,compound:!0}),u.preset.nodes.forEach(K=>{H==null||H.setNode(K.id,K)})),xJ.layout(O,{prevGraph:H,edgeLabelSpace:u.edgeLabelSpace,keepNodeOrder:!!u.nodeOrder,nodeOrder:u.nodeOrder});const B=[0,0];if(_){let K=1/0,Q=1/0;O.nodes().forEach(ce=>{const ue=O.node(ce);K>ue.x&&(K=ue.x),Q>ue.y&&(Q=ue.y)}),O.edges().forEach(ce=>{var ue;(ue=O.edge(ce).points)===null||ue===void 0||ue.forEach(ye=>{K>ye.x&&(K=ye.x),Q>ye.y&&(Q=ye.y)})}),B[0]=_[0]-K,B[1]=_[1]-Q}const G=d==="LR"||d==="RL";if(b){const{focusNode:K,ranksep:Q,getRadialPos:ce}=this,ue=zY(K)?K:K==null?void 0:K.id,de=ue?(r=O.node(ue))===null||r===void 0?void 0:r._rank:0,ye=[],we=G?"y":"x",me=G?"height":"width";let He=1/0,tt=-1/0;O.nodes().forEach(Se=>{const Ce=O.node(Se);if(!u.nodeMap[Se])return;const Xe=L(u.nodeMap[Se]);if(de===0)ye[Ce._rank]||(ye[Ce._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),ye[Ce._rank].nodes.push(Se),ye[Ce._rank].totalWidth+=Xe*2+Ce[me],ye[Ce._rank].maxSize<Math.max(Ce.width,Ce.height)&&(ye[Ce._rank].maxSize=Math.max(Ce.width,Ce.height));else{const bt=Ce._rank-de;if(bt===0)ye[bt]||(ye[bt]={nodes:[],totalWidth:0,maxSize:-1/0}),ye[bt].nodes.push(Se),ye[bt].totalWidth+=Xe*2+Ce[me],ye[bt].maxSize<Math.max(Ce.width,Ce.height)&&(ye[bt].maxSize=Math.max(Ce.width,Ce.height));else{const nn=Math.abs(bt);ye[nn]||(ye[nn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),ye[nn].totalWidth+=Xe*2+Ce[me],ye[nn].maxSize<Math.max(Ce.width,Ce.height)&&(ye[nn].maxSize=Math.max(Ce.width,Ce.height)),bt<0?ye[nn].left.push(Se):ye[nn].right.push(Se)}}const _t=Ce[we]-Ce[me]/2-Xe,pt=Ce[we]+Ce[me]/2+Xe;_t<He&&(He=_t),pt>tt&&(tt=pt)});let Ot=Q||50;const Je={},Yt=(tt-He)/.9,Kt=[(He+tt-Yt)*.5,(He+tt+Yt)*.5],Ft=(Se,Ce,Xe=-1/0,_t=[0,1])=>{let pt=Xe;return Se.forEach(bt=>{const nn=O.node(bt);Je[bt]=Ce;const{x:on,y:Xt}=ce(nn[we],Kt,Yt,Ce,_t);if(!u.nodeMap[bt])return;u.nodeMap[bt].x=on+B[0],u.nodeMap[bt].y=Xt+B[1],u.nodeMap[bt]._order=nn._order;const nt=U(u.nodeMap[bt]);pt<nt&&(pt=nt)}),pt};let An=!0;const Be=0;ye.forEach(Se=>{var Ce,Xe,_t,pt,bt,nn,on;if(!(!((Ce=Se==null?void 0:Se.nodes)===null||Ce===void 0)&&Ce.length)&&!(!((Xe=Se==null?void 0:Se.left)===null||Xe===void 0)&&Xe.length)&&!(!((_t=Se==null?void 0:Se.right)===null||_t===void 0)&&_t.length))return;if(An&&Se.nodes.length===1){const nt=Se.nodes[0];if(!u.nodeMap[nt])return;u.nodeMap[nt].x=B[0],u.nodeMap[nt].y=B[1],Je[Se.nodes[0]]=0,Ot=U(u.nodeMap[nt]),An=!1;return}Ot=Math.max(Ot,Se.totalWidth/(2*Math.PI));let Xt=-1/0;if(de===0||!((pt=Se.nodes)===null||pt===void 0)&&pt.length)Xt=Ft(Se.nodes,Ot,Xt,[0,1]);else{const nt=((bt=Se.left)===null||bt===void 0?void 0:bt.length)/(((nn=Se.left)===null||nn===void 0?void 0:nn.length)+((on=Se.right)===null||on===void 0?void 0:on.length));Xt=Ft(Se.left,Ot,Xt,[0,nt]),Xt=Ft(Se.right,Ot,Xt,[nt+.05,1])}Ot+=Xt,An=!1,Be-Se.maxSize}),O.edges().forEach(Se=>{var Ce,Xe,_t;const pt=O.edge(Se),bt=M.findIndex(nn=>{const on=fv(nn,"source"),Xt=fv(nn,"target");return on===Se.v&&Xt===Se.w});if(!(bt<=-1)&&u.edgeLabelSpace&&u.controlPoints&&M[bt].type!=="loop"){const nn=we==="x"?"y":"x",on=(Ce=pt==null?void 0:pt.points)===null||Ce===void 0?void 0:Ce.slice(1,pt.points.length-1),Xt=[],nt=(Xe=O.node(Se.v))===null||Xe===void 0?void 0:Xe[nn],fn=nt-((_t=O.node(Se.w))===null||_t===void 0?void 0:_t[nn]),$e=Je[Se.v],bn=$e-Je[Se.w];on==null||on.forEach(Zn=>{const ie=(Zn[nn]-nt)/fn*bn+$e,Jn=ce(Zn[we],Kt,Yt,ie);Xt.push({x:Jn.x+B[0],y:Jn.y+B[1]})}),M[bt].controlPoints=Xt}})}else{const K=new Set,ce=d==="BT"||d==="RL"?(we,me)=>me-we:(we,me)=>we-me;O.nodes().forEach(we=>{const me=O.node(we);if(!me)return;let He=this.nodeMap[we];He||(He=g==null?void 0:g.find(tt=>tt.id===we)),He&&(He.x=me.x+B[0],He.y=me.y+B[1],He._order=me._order,K.add(G?He.x:He.y))});const ue=Array.from(K).sort(ce),de=G?(we,me)=>we.x!==me.x:(we,me)=>we.y!==me.y,ye=G?(we,me,He)=>{const tt=Math.max(me.y,He.y),Ot=Math.min(me.y,He.y);return we.filter(Je=>Je.y<=tt&&Je.y>=Ot)}:(we,me,He)=>{const tt=Math.max(me.x,He.x),Ot=Math.min(me.x,He.x);return we.filter(Je=>Je.x<=tt&&Je.x>=Ot)};O.edges().forEach(we=>{var me;const He=O.edge(we),tt=M.findIndex(Ot=>{const Je=fv(Ot,"source"),Yt=fv(Ot,"target");return Je===we.v&&Yt===we.w});if(!(tt<=-1)&&u.edgeLabelSpace&&u.controlPoints&&M[tt].type!=="loop"){(me=He==null?void 0:He.points)===null||me===void 0||me.forEach(Yt=>{Yt.x+=B[0],Yt.y+=B[1]});const Ot=u.nodeMap[we.v],Je=u.nodeMap[we.w];M[tt].controlPoints=TJ(He==null?void 0:He.points,Ot,Je,ue,G,de,ye)}})}return u.onLayoutEnd&&u.onLayoutEnd(),{nodes:c,edges:M}}getRadialPos(t,n,a,r,u=[0,1]){let c=(t-n[0])/a;c=c*(u[1]-u[0])+u[0];const v=c*2*Math.PI;return{x:Math.cos(v)*r,y:Math.sin(v)*r}}getType(){return"dagre"}}const TJ=(e,t,n,a,r,u,c)=>{let v=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:d,y:g}=t,{x:_,y:b}=n;if(r&&(d=t.y,g=t.x,_=n.y,b=n.x),b!==g&&d!==_){const x=a.indexOf(g),A=a[x+1];if(A){const S=v[0],j=r?{x:(g+A)/2,y:(S==null?void 0:S.y)||_}:{x:(S==null?void 0:S.x)||_,y:(g+A)/2};(!S||u(S,j))&&v.unshift(j)}const M=a.indexOf(b),O=Math.abs(M-x);if(O===1)v=c(v,t,n),v.length||v.push(r?{x:(g+b)/2,y:d}:{x:d,y:(g+b)/2});else if(O>1){const S=a[M-1];if(S){const j=v[v.length-1],D=r?{x:(b+S)/2,y:(j==null?void 0:j.y)||_}:{x:(j==null?void 0:j.x)||d,y:(b+S)/2};(!j||u(j,D))&&v.push(D)}}}}return v};var DA,jA,IA,LA;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(DA||(DA={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(jA||(jA={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(IA||(IA={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(LA||(LA={}));var hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function VE(e,t){return e(t={exports:{}},t.exports),t.exports}var MJ=function(){this.__data__=[],this.size=0},Kv=function(e,t){return e===t||e!=e&&t!=t},M_=function(e,t){for(var n=e.length;n--;)if(Kv(e[n][0],t))return n;return-1},kJ=Array.prototype.splice,PJ=function(e){var t=this.__data__,n=M_(t,e);return!(n<0)&&(n==t.length-1?t.pop():kJ.call(t,n,1),--this.size,!0)},RJ=function(e){var t=this.__data__,n=M_(t,e);return n<0?void 0:t[n][1]},NJ=function(e){return M_(this.__data__,e)>-1},CJ=function(e,t){var n=this.__data__,a=M_(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this};function hv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}hv.prototype.clear=MJ,hv.prototype.delete=PJ,hv.prototype.get=RJ,hv.prototype.has=NJ,hv.prototype.set=CJ;var k_=hv,DJ=function(){this.__data__=new k_,this.size=0},jJ=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},IJ=function(e){return this.__data__.get(e)},LJ=function(e){return this.__data__.has(e)},zP=typeof hg=="object"&&hg&&hg.Object===Object&&hg,FJ=typeof self=="object"&&self&&self.Object===Object&&self,Ps=zP||FJ||Function("return this")(),Fu=Ps.Symbol,HP=Object.prototype,$J=HP.hasOwnProperty,BJ=HP.toString,Em=Fu?Fu.toStringTag:void 0,UJ=function(e){var t=$J.call(e,Em),n=e[Em];try{e[Em]=void 0;var a=!0}catch{}var r=BJ.call(e);return a&&(t?e[Em]=n:delete e[Em]),r},VJ=Object.prototype.toString,GJ=function(e){return VJ.call(e)},FA=Fu?Fu.toStringTag:void 0,ep=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":FA&&FA in Object(e)?UJ(e):GJ(e)},Cl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},$A,ay=function(e){if(!Cl(e))return!1;var t=ep(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},U1=Ps["__core-js_shared__"],BA=($A=/[^.]+$/.exec(U1&&U1.keys&&U1.keys.IE_PROTO||""))?"Symbol(src)_1."+$A:"",WJ=function(e){return!!BA&&BA in e},zJ=Function.prototype.toString,hh=function(e){if(e!=null){try{return zJ.call(e)}catch{}try{return e+""}catch{}}return""},HJ=/^\[object .+?Constructor\]$/,XJ=Function.prototype,qJ=Object.prototype,YJ=XJ.toString,KJ=qJ.hasOwnProperty,ZJ=RegExp("^"+YJ.call(KJ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),JJ=function(e){return!(!Cl(e)||WJ(e))&&(ay(e)?ZJ:HJ).test(hh(e))},QJ=function(e,t){return e==null?void 0:e[t]},vh=function(e,t){var n=QJ(e,t);return JJ(n)?n:void 0},Hm=vh(Ps,"Map"),Xm=vh(Object,"create"),eQ=function(){this.__data__=Xm?Xm(null):{},this.size=0},tQ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},nQ=Object.prototype.hasOwnProperty,rQ=function(e){var t=this.__data__;if(Xm){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return nQ.call(t,e)?t[e]:void 0},oQ=Object.prototype.hasOwnProperty,iQ=function(e){var t=this.__data__;return Xm?t[e]!==void 0:oQ.call(t,e)},aQ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Xm&&t===void 0?"__lodash_hash_undefined__":t,this};function vv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}vv.prototype.clear=eQ,vv.prototype.delete=tQ,vv.prototype.get=rQ,vv.prototype.has=iQ,vv.prototype.set=aQ;var UA=vv,lQ=function(){this.size=0,this.__data__={hash:new UA,map:new(Hm||k_),string:new UA}},uQ=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},P_=function(e,t){var n=e.__data__;return uQ(t)?n[typeof t=="string"?"string":"hash"]:n.map},sQ=function(e){var t=P_(this,e).delete(e);return this.size-=t?1:0,t},cQ=function(e){return P_(this,e).get(e)},fQ=function(e){return P_(this,e).has(e)},dQ=function(e,t){var n=P_(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};function mv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}mv.prototype.clear=lQ,mv.prototype.delete=sQ,mv.prototype.get=cQ,mv.prototype.has=fQ,mv.prototype.set=dQ;var R_=mv,pQ=function(e,t){var n=this.__data__;if(n instanceof k_){var a=n.__data__;if(!Hm||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new R_(a)}return n.set(e,t),this.size=n.size,this};function yv(e){var t=this.__data__=new k_(e);this.size=t.size}yv.prototype.clear=DJ,yv.prototype.delete=jJ,yv.prototype.get=IJ,yv.prototype.has=LJ,yv.prototype.set=pQ;var Av=yv,GE=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a&&t(e[n],n,e)!==!1;);return e},Qg=function(){try{var e=vh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),N_=function(e,t,n){t=="__proto__"&&Qg?Qg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},hQ=Object.prototype.hasOwnProperty,C_=function(e,t,n){var a=e[t];hQ.call(e,t)&&Kv(a,n)&&(n!==void 0||t in e)||N_(e,t,n)},ly=function(e,t,n,a){var r=!n;n||(n={});for(var u=-1,c=t.length;++u<c;){var v=t[u],d=void 0;d===void 0&&(d=e[v]),r?N_(n,v,d):C_(n,v,d)}return n},vQ=function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a},Ts=function(e){return e!=null&&typeof e=="object"},VA=function(e){return Ts(e)&&ep(e)=="[object Arguments]"},XP=Object.prototype,mQ=XP.hasOwnProperty,yQ=XP.propertyIsEnumerable,jv=VA(function(){return arguments}())?VA:function(e){return Ts(e)&&mQ.call(e,"callee")&&!yQ.call(e,"callee")},Di=Array.isArray,gQ=function(){return!1},nh=VE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?Ps.Buffer:void 0,u=(r?r.isBuffer:void 0)||gQ;e.exports=u}),_Q=/^(?:0|[1-9]\d*)$/,D_=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&_Q.test(e))&&e>-1&&e%1==0&&e<t},WE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ai={};ai["[object Float32Array]"]=ai["[object Float64Array]"]=ai["[object Int8Array]"]=ai["[object Int16Array]"]=ai["[object Int32Array]"]=ai["[object Uint8Array]"]=ai["[object Uint8ClampedArray]"]=ai["[object Uint16Array]"]=ai["[object Uint32Array]"]=!0,ai["[object Arguments]"]=ai["[object Array]"]=ai["[object ArrayBuffer]"]=ai["[object Boolean]"]=ai["[object DataView]"]=ai["[object Date]"]=ai["[object Error]"]=ai["[object Function]"]=ai["[object Map]"]=ai["[object Number]"]=ai["[object Object]"]=ai["[object RegExp]"]=ai["[object Set]"]=ai["[object String]"]=ai["[object WeakMap]"]=!1;var bQ=function(e){return Ts(e)&&WE(e.length)&&!!ai[ep(e)]},j_=function(e){return function(t){return e(t)}},Iv=VE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n&&zP.process,u=function(){try{var c=a&&a.require&&a.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=u}),GA=Iv&&Iv.isTypedArray,uy=GA?j_(GA):bQ,wQ=Object.prototype.hasOwnProperty,qP=function(e,t){var n=Di(e),a=!n&&jv(e),r=!n&&!a&&nh(e),u=!n&&!a&&!r&&uy(e),c=n||a||r||u,v=c?vQ(e.length,String):[],d=v.length;for(var g in e)!t&&!wQ.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||u&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||D_(g,d))||v.push(g);return v},EQ=Object.prototype,I_=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||EQ)},YP=function(e,t){return function(n){return e(t(n))}},OQ=YP(Object.keys,Object),SQ=Object.prototype.hasOwnProperty,zE=function(e){if(!I_(e))return OQ(e);var t=[];for(var n in Object(e))SQ.call(e,n)&&n!="constructor"&&t.push(n);return t},Ff=function(e){return e!=null&&WE(e.length)&&!ay(e)},tp=function(e){return Ff(e)?qP(e):zE(e)},xQ=function(e,t){return e&&ly(t,tp(t),e)},AQ=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},TQ=Object.prototype.hasOwnProperty,MQ=function(e){if(!Cl(e))return AQ(e);var t=I_(e),n=[];for(var a in e)(a!="constructor"||!t&&TQ.call(e,a))&&n.push(a);return n},mh=function(e){return Ff(e)?qP(e,!0):MQ(e)},kQ=function(e,t){return e&&ly(t,mh(t),e)},KP=VE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?Ps.Buffer:void 0,u=r?r.allocUnsafe:void 0;e.exports=function(c,v){if(v)return c.slice();var d=c.length,g=u?u(d):new c.constructor(d);return c.copy(g),g}}),ZP=function(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t},JP=function(e,t){for(var n=-1,a=e==null?0:e.length,r=0,u=[];++n<a;){var c=e[n];t(c,n,e)&&(u[r++]=c)}return u},QP=function(){return[]},PQ=Object.prototype.propertyIsEnumerable,WA=Object.getOwnPropertySymbols,HE=WA?function(e){return e==null?[]:(e=Object(e),JP(WA(e),function(t){return PQ.call(e,t)}))}:QP,RQ=function(e,t){return ly(e,HE(e),t)},XE=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e},L_=YP(Object.getPrototypeOf,Object),eR=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)XE(t,HE(e)),e=L_(e);return t}:QP,NQ=function(e,t){return ly(e,eR(e),t)},tR=function(e,t,n){var a=t(e);return Di(e)?a:XE(a,n(e))},Vw=function(e){return tR(e,tp,HE)},CQ=function(e){return tR(e,mh,eR)},Gw=vh(Ps,"DataView"),Ww=vh(Ps,"Promise"),Tv=vh(Ps,"Set"),zw=vh(Ps,"WeakMap"),DQ=hh(Gw),jQ=hh(Hm),IQ=hh(Ww),LQ=hh(Tv),FQ=hh(zw),Kp=ep;(Gw&&Kp(new Gw(new ArrayBuffer(1)))!="[object DataView]"||Hm&&Kp(new Hm)!="[object Map]"||Ww&&Kp(Ww.resolve())!="[object Promise]"||Tv&&Kp(new Tv)!="[object Set]"||zw&&Kp(new zw)!="[object WeakMap]")&&(Kp=function(e){var t=ep(e),n=t=="[object Object]"?e.constructor:void 0,a=n?hh(n):"";if(a)switch(a){case DQ:return"[object DataView]";case jQ:return"[object Map]";case IQ:return"[object Promise]";case LQ:return"[object Set]";case FQ:return"[object WeakMap]"}return t});var rh=Kp,$Q=Object.prototype.hasOwnProperty,BQ=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&$Q.call(e,"index")&&(n.index=e.index,n.input=e.input),n},e_=Ps.Uint8Array,qE=function(e){var t=new e.constructor(e.byteLength);return new e_(t).set(new e_(e)),t},UQ=function(e,t){var n=t?qE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},VQ=/\w*$/,GQ=function(e){var t=new e.constructor(e.source,VQ.exec(e));return t.lastIndex=e.lastIndex,t},zA=Fu?Fu.prototype:void 0,HA=zA?zA.valueOf:void 0,WQ=function(e){return HA?Object(HA.call(e)):{}},nR=function(e,t){var n=t?qE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},zQ=function(e,t,n){var a=e.constructor;switch(t){case"[object ArrayBuffer]":return qE(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return UQ(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return nR(e,n);case"[object Map]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return GQ(e);case"[object Set]":return new a;case"[object Symbol]":return WQ(e)}},XA=Object.create,rR=function(){function e(){}return function(t){if(!Cl(t))return{};if(XA)return XA(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),oR=function(e){return typeof e.constructor!="function"||I_(e)?{}:rR(L_(e))},HQ=function(e){return Ts(e)&&rh(e)=="[object Map]"},qA=Iv&&Iv.isMap,XQ=qA?j_(qA):HQ,qQ=function(e){return Ts(e)&&rh(e)=="[object Set]"},YA=Iv&&Iv.isSet,YQ=YA?j_(YA):qQ,Yo={};Yo["[object Arguments]"]=Yo["[object Array]"]=Yo["[object ArrayBuffer]"]=Yo["[object DataView]"]=Yo["[object Boolean]"]=Yo["[object Date]"]=Yo["[object Float32Array]"]=Yo["[object Float64Array]"]=Yo["[object Int8Array]"]=Yo["[object Int16Array]"]=Yo["[object Int32Array]"]=Yo["[object Map]"]=Yo["[object Number]"]=Yo["[object Object]"]=Yo["[object RegExp]"]=Yo["[object Set]"]=Yo["[object String]"]=Yo["[object Symbol]"]=Yo["[object Uint8Array]"]=Yo["[object Uint8ClampedArray]"]=Yo["[object Uint16Array]"]=Yo["[object Uint32Array]"]=!0,Yo["[object Error]"]=Yo["[object Function]"]=Yo["[object WeakMap]"]=!1;var iR=function e(t,n,a,r,u,c){var v,d=1&n,g=2&n,_=4&n;if(v!==void 0)return v;if(!Cl(t))return t;var b=Di(t);if(b){if(v=BQ(t),!d)return ZP(t,v)}else{var x=rh(t),A=x=="[object Function]"||x=="[object GeneratorFunction]";if(nh(t))return KP(t,d);if(x=="[object Object]"||x=="[object Arguments]"||A&&!u){if(v=g||A?{}:oR(t),!d)return g?NQ(t,kQ(v,t)):RQ(t,xQ(v,t))}else{if(!Yo[x])return u?t:{};v=zQ(t,x,d)}}c||(c=new Av);var M=c.get(t);if(M)return M;c.set(t,v),YQ(t)?t.forEach(function(S){v.add(e(S,n,a,S,t,c))}):XQ(t)&&t.forEach(function(S,j){v.set(j,e(S,n,a,j,t,c))});var O=b?void 0:(_?g?CQ:Vw:g?mh:tp)(t);return GE(O||t,function(S,j){O&&(S=t[j=S]),C_(v,j,e(S,n,a,j,t,c))}),v},KQ=function(e){return iR(e,4)},YE=function(e){return function(){return e}},KE=function(e){return function(t,n,a){for(var r=-1,u=Object(t),c=a(t),v=c.length;v--;){var d=c[++r];if(n(u[d],d,u)===!1)break}return t}}(),ZE=function(e,t){return e&&KE(e,t,tp)},F_=function(e,t){return function(n,a){if(n==null)return n;if(!Ff(n))return e(n,a);for(var r=n.length,u=-1,c=Object(n);++u<r&&a(c[u],u,c)!==!1;);return n}}(ZE),yh=function(e){return e},aR=function(e){return typeof e=="function"?e:yh},lR=function(e,t){return(Di(e)?GE:F_)(e,aR(t))},uR=lR,ZQ=function(e,t){var n=[];return F_(e,function(a,r,u){t(a,r,u)&&n.push(a)}),n},JQ=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},QQ=function(e){return this.__data__.has(e)};function Tg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new R_;++t<n;)this.add(e[t])}Tg.prototype.add=Tg.prototype.push=JQ,Tg.prototype.has=QQ;var sR=Tg,eee=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1},cR=function(e,t){return e.has(t)},fR=function(e,t,n,a,r,u){var c=1&n,v=e.length,d=t.length;if(v!=d&&!(c&&d>v))return!1;var g=u.get(e),_=u.get(t);if(g&&_)return g==t&&_==e;var b=-1,x=!0,A=2&n?new sR:void 0;for(u.set(e,t),u.set(t,e);++b<v;){var M=e[b],O=t[b];if(a)var S=c?a(O,M,b,t,e,u):a(M,O,b,e,t,u);if(S!==void 0){if(S)continue;x=!1;break}if(A){if(!eee(t,function(j,D){if(!cR(A,D)&&(M===j||r(M,j,n,a,u)))return A.push(D)})){x=!1;break}}else if(M!==O&&!r(M,O,n,a,u)){x=!1;break}}return u.delete(e),u.delete(t),x},tee=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a,r){n[++t]=[r,a]}),n},JE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n},KA=Fu?Fu.prototype:void 0,V1=KA?KA.valueOf:void 0,nee=function(e,t,n,a,r,u,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new e_(e),new e_(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Kv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=tee;case"[object Set]":var d=1&a;if(v||(v=JE),e.size!=t.size&&!d)return!1;var g=c.get(e);if(g)return g==t;a|=2,c.set(e,t);var _=fR(v(e),v(t),a,r,u,c);return c.delete(e),_;case"[object Symbol]":if(V1)return V1.call(e)==V1.call(t)}return!1},ree=Object.prototype.hasOwnProperty,oee=function(e,t,n,a,r,u){var c=1&n,v=Vw(e),d=v.length;if(d!=Vw(t).length&&!c)return!1;for(var g=d;g--;){var _=v[g];if(!(c?_ in t:ree.call(t,_)))return!1}var b=u.get(e),x=u.get(t);if(b&&x)return b==t&&x==e;var A=!0;u.set(e,t),u.set(t,e);for(var M=c;++g<d;){var O=e[_=v[g]],S=t[_];if(a)var j=c?a(S,O,_,t,e,u):a(O,S,_,e,t,u);if(!(j===void 0?O===S||r(O,S,n,a,u):j)){A=!1;break}M||(M=_=="constructor")}if(A&&!M){var D=e.constructor,z=t.constructor;D==z||!("constructor"in e)||!("constructor"in t)||typeof D=="function"&&D instanceof D&&typeof z=="function"&&z instanceof z||(A=!1)}return u.delete(e),u.delete(t),A},ZA=Object.prototype.hasOwnProperty,iee=function(e,t,n,a,r,u){var c=Di(e),v=Di(t),d=c?"[object Array]":rh(e),g=v?"[object Array]":rh(t),_=(d=d=="[object Arguments]"?"[object Object]":d)=="[object Object]",b=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",x=d==g;if(x&&nh(e)){if(!nh(t))return!1;c=!0,_=!1}if(x&&!_)return u||(u=new Av),c||uy(e)?fR(e,t,n,a,r,u):nee(e,t,d,n,a,r,u);if(!(1&n)){var A=_&&ZA.call(e,"__wrapped__"),M=b&&ZA.call(t,"__wrapped__");if(A||M){var O=A?e.value():e,S=M?t.value():t;return u||(u=new Av),r(O,S,n,a,u)}}return!!x&&(u||(u=new Av),oee(e,t,n,a,r,u))},dR=function e(t,n,a,r,u){return t===n||(t==null||n==null||!Ts(t)&&!Ts(n)?t!=t&&n!=n:iee(t,n,a,r,e,u))},aee=function(e,t,n,a){var r=n.length,u=r;if(e==null)return!u;for(e=Object(e);r--;){var c=n[r];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<u;){var v=(c=n[r])[0],d=e[v],g=c[1];if(c[2]){if(d===void 0&&!(v in e))return!1}else{var _=new Av,b;if(!(b===void 0?dR(g,d,3,a,_):b))return!1}}return!0},pR=function(e){return e==e&&!Cl(e)},lee=function(e){for(var t=tp(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,pR(r)]}return t},hR=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},uee=function(e){var t=lee(e);return t.length==1&&t[0][2]?hR(t[0][0],t[0][1]):function(n){return n===e||aee(n,e,t)}},oh=function(e){return typeof e=="symbol"||Ts(e)&&ep(e)=="[object Symbol]"},see=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cee=/^\w*$/,QE=function(e,t){if(Di(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!oh(e))||cee.test(e)||!see.test(e)||t!=null&&e in Object(t)};function e2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],u=n.cache;if(u.has(r))return u.get(r);var c=e.apply(this,a);return n.cache=u.set(r,c)||u,c};return n.cache=new(e2.Cache||R_),n}e2.Cache=R_;var fee=e2,dee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pee=/\\(\\)?/g,hee=function(e){var t=fee(e,function(a){return n.size===500&&n.clear(),a}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(dee,function(n,a,r,u){t.push(r?u.replace(pee,"$1"):a||n)}),t}),Mv=function(e,t){for(var n=-1,a=e==null?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r},JA=Fu?Fu.prototype:void 0,QA=JA?JA.toString:void 0,vee=function e(t){if(typeof t=="string")return t;if(Di(t))return Mv(t,e)+"";if(oh(t))return QA?QA.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},vR=function(e){return e==null?"":vee(e)},$_=function(e,t){return Di(e)?e:QE(e,t)?[e]:hee(vR(e))},sy=function(e){if(typeof e=="string"||oh(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},B_=function(e,t){for(var n=0,a=(t=$_(t,e)).length;e!=null&&n<a;)e=e[sy(t[n++])];return n&&n==a?e:void 0},mee=function(e,t,n){var a=e==null?void 0:B_(e,t);return a===void 0?n:a},yee=function(e,t){return e!=null&&t in Object(e)},mR=function(e,t,n){for(var a=-1,r=(t=$_(t,e)).length,u=!1;++a<r;){var c=sy(t[a]);if(!(u=e!=null&&n(e,c)))break;e=e[c]}return u||++a!=r?u:!!(r=e==null?0:e.length)&&WE(r)&&D_(c,r)&&(Di(e)||jv(e))},yR=function(e,t){return e!=null&&mR(e,t,yee)},gee=function(e,t){return QE(e)&&pR(t)?hR(sy(e),t):function(n){var a=mee(n,e);return a===void 0&&a===t?yR(n,e):dR(t,a,3)}},gR=function(e){return function(t){return t==null?void 0:t[e]}},_ee=function(e){return function(t){return B_(t,e)}},bee=function(e){return QE(e)?gR(sy(e)):_ee(e)},$f=function(e){return typeof e=="function"?e:e==null?yh:typeof e=="object"?Di(e)?gee(e[0],e[1]):uee(e):bee(e)},_R=function(e,t){return(Di(e)?JP:ZQ)(e,$f(t))},wee=Object.prototype.hasOwnProperty,Eee=function(e,t){return e!=null&&wee.call(e,t)},bR=function(e,t){return e!=null&&mR(e,t,Eee)},Oee=Object.prototype.hasOwnProperty,See=function(e){if(e==null)return!0;if(Ff(e)&&(Di(e)||typeof e=="string"||typeof e.splice=="function"||nh(e)||uy(e)||jv(e)))return!e.length;var t=rh(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(I_(e))return!zE(e).length;for(var n in e)if(Oee.call(e,n))return!1;return!0},wR=function(e){return e===void 0},ER=function(e,t){var n=-1,a=Ff(e)?Array(e.length):[];return F_(e,function(r,u,c){a[++n]=t(r,u,c)}),a},OR=function(e,t){return(Di(e)?Mv:ER)(e,$f(t))},xee=function(e,t,n,a){var r=-1,u=e==null?0:e.length;for(a&&u&&(n=e[++r]);++r<u;)n=t(n,e[r],r,e);return n},Aee=function(e,t,n,a,r){return r(e,function(u,c,v){n=a?(a=!1,u):t(n,u,c,v)}),n},SR=function(e,t,n){var a=Di(e)?xee:Aee,r=arguments.length<3;return a(e,$f(t),n,r,F_)},Tee=function(e){return typeof e=="string"||!Di(e)&&Ts(e)&&ep(e)=="[object String]"},Mee=gR("length"),kee=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Pee=function(e){return kee.test(e)},Ree="[\\ud800-\\udfff]",Hw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Xw="\\ud83c[\\udffb-\\udfff]",xR="[^\\ud800-\\udfff]",AR="(?:\\ud83c[\\udde6-\\uddff]){2}",TR="[\\ud800-\\udbff][\\udc00-\\udfff]",eT="(?:"+Hw+"|"+Xw+")?",Nee="[\\ufe0e\\ufe0f]?"+eT+("(?:\\u200d(?:"+[xR,AR,TR].join("|")+")[\\ufe0e\\ufe0f]?"+eT+")*"),Cee="(?:"+[xR+Hw+"?",Hw,AR,TR,Ree].join("|")+")",tT=RegExp(Xw+"(?="+Xw+")|"+Cee+Nee,"g"),Dee=function(e){for(var t=tT.lastIndex=0;tT.test(e);)++t;return t},jee=function(e){return Pee(e)?Dee(e):Mee(e)},Iee=function(e){if(e==null)return 0;if(Ff(e))return Tee(e)?jee(e):e.length;var t=rh(e);return t=="[object Map]"||t=="[object Set]"?e.size:zE(e).length},Lee=function(e,t,n){var a=Di(e),r=a||nh(e)||uy(e);if(t=$f(t),n==null){var u=e&&e.constructor;n=r?a?new u:[]:Cl(e)&&ay(u)?rR(L_(e)):{}}return(r?GE:ZE)(e,function(c,v,d){return t(n,c,v,d)}),n},nT=Fu?Fu.isConcatSpreadable:void 0,Fee=function(e){return Di(e)||jv(e)||!!(nT&&e&&e[nT])},t2=function(t,n,a,r,u){var c=-1,v=t.length;for(a||(a=Fee),u||(u=[]);++c<v;){var d=t[c];a(d)?XE(u,d):r||(u[u.length]=d)}return u},$ee=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},rT=Math.max,MR=function(e,t,n){return t=rT(t===void 0?e.length-1:t,0),function(){for(var a=arguments,r=-1,u=rT(a.length-t,0),c=Array(u);++r<u;)c[r]=a[t+r];r=-1;for(var v=Array(t+1);++r<t;)v[r]=a[r];return v[t]=n(c),$ee(e,this,v)}},Bee=Qg?function(e,t){return Qg(e,"toString",{configurable:!0,enumerable:!1,value:YE(t),writable:!0})}:yh,Uee=Date.now,kR=function(e){var t=0,n=0;return function(){var a=Uee(),r=16-(a-n);if(n=a,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Bee),U_=function(e,t){return kR(MR(e,t,yh),e+"")},PR=function(e,t,n,a){for(var r=e.length,u=n+-1;++u<r;)if(t(e[u],u,e))return u;return-1},Vee=function(e){return e!=e},Gee=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1},Wee=function(e,t,n){return t==t?Gee(e,t,n):PR(e,Vee,n)},zee=function(e,t){return!!(e!=null&&e.length)&&Wee(e,t,0)>-1},Hee=function(){},Xee=Tv&&1/JE(new Tv([,-0]))[1]==1/0?function(e){return new Tv(e)}:Hee,qee=function(e,t,n){var a=-1,r=zee,u=e.length,c=!0,v=[],d=v;if(u>=200){var g=Xee(e);if(g)return JE(g);c=!1,r=cR,d=new sR}else d=v;e:for(;++a<u;){var _=e[a],b=_;if(_=_!==0?_:0,c&&b==b){for(var x=d.length;x--;)if(d[x]===b)continue e;v.push(_)}else r(d,b,n)||(d!==v&&d.push(b),v.push(_))}return v},RR=function(e){return Ts(e)&&Ff(e)},Yee=U_(function(e){return qee(t2(e,1,RR,!0))}),Kee=function(e,t){return Mv(t,function(n){return e[n]})},t_,NR=function(e){return e==null?[]:Kee(e,tp(e))};try{t_={clone:KQ,constant:YE,each:uR,filter:_R,has:bR,isArray:Di,isEmpty:See,isFunction:ay,isUndefined:wR,keys:tp,map:OR,reduce:SR,size:Iee,transform:Lee,union:Yee,values:NR}}catch{}t_||(t_=window._);var xn=t_,n2=Gr;function Gr(e){this._isDirected=!xn.has(e,"directed")||e.directed,this._isMultigraph=!!xn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!xn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=xn.constant(void 0),this._defaultEdgeLabelFn=xn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function oT(e,t){e[t]?e[t]++:e[t]=1}function iT(e,t){--e[t]||delete e[t]}function km(e,t,n,a){var r=""+t,u=""+n;if(!e&&r>u){var c=r;r=u,u=c}return r+""+u+""+(xn.isUndefined(a)?"\0":a)}function Zee(e,t,n,a){var r=""+t,u=""+n;if(!e&&r>u){var c=r;r=u,u=c}var v={v:r,w:u};return a&&(v.name=a),v}function G1(e,t){return km(e,t.v,t.w,t.name)}Gr.prototype._nodeCount=0,Gr.prototype._edgeCount=0,Gr.prototype.isDirected=function(){return this._isDirected},Gr.prototype.isMultigraph=function(){return this._isMultigraph},Gr.prototype.isCompound=function(){return this._isCompound},Gr.prototype.setGraph=function(e){return this._label=e,this},Gr.prototype.graph=function(){return this._label},Gr.prototype.setDefaultNodeLabel=function(e){return xn.isFunction(e)||(e=xn.constant(e)),this._defaultNodeLabelFn=e,this},Gr.prototype.nodeCount=function(){return this._nodeCount},Gr.prototype.nodes=function(){return xn.keys(this._nodes)},Gr.prototype.sources=function(){var e=this;return xn.filter(this.nodes(),function(t){return xn.isEmpty(e._in[t])})},Gr.prototype.sinks=function(){var e=this;return xn.filter(this.nodes(),function(t){return xn.isEmpty(e._out[t])})},Gr.prototype.setNodes=function(e,t){var n=arguments,a=this;return xn.each(e,function(r){n.length>1?a.setNode(r,t):a.setNode(r)}),this},Gr.prototype.setNode=function(e,t){return xn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Gr.prototype.node=function(e){return this._nodes[e]},Gr.prototype.hasNode=function(e){return xn.has(this._nodes,e)},Gr.prototype.removeNode=function(e){var t=this;if(xn.has(this._nodes,e)){var n=function(a){t.removeEdge(t._edgeObjs[a])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],xn.each(this.children(e),function(a){t.setParent(a)}),delete this._children[e]),xn.each(xn.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],xn.each(xn.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Gr.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(xn.isUndefined(t))t="\0";else{for(var n=t+="";!xn.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Gr.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Gr.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Gr.prototype.children=function(e){if(xn.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return xn.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Gr.prototype.predecessors=function(e){var t=this._preds[e];if(t)return xn.keys(t)},Gr.prototype.successors=function(e){var t=this._sucs[e];if(t)return xn.keys(t)},Gr.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return xn.union(t,this.successors(e))},Gr.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Gr.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;xn.each(this._nodes,function(u,c){e(c)&&t.setNode(c,u)}),xn.each(this._edgeObjs,function(u){t.hasNode(u.v)&&t.hasNode(u.w)&&t.setEdge(u,n.edge(u))});var a={};function r(u){var c=n.parent(u);return c===void 0||t.hasNode(c)?(a[u]=c,c):c in a?a[c]:r(c)}return this._isCompound&&xn.each(t.nodes(),function(u){t.setParent(u,r(u))}),t},Gr.prototype.setDefaultEdgeLabel=function(e){return xn.isFunction(e)||(e=xn.constant(e)),this._defaultEdgeLabelFn=e,this},Gr.prototype.edgeCount=function(){return this._edgeCount},Gr.prototype.edges=function(){return xn.values(this._edgeObjs)},Gr.prototype.setPath=function(e,t){var n=this,a=arguments;return xn.reduce(e,function(r,u){return a.length>1?n.setEdge(r,u,t):n.setEdge(r,u),u}),this},Gr.prototype.setEdge=function(){var e,t,n,a,r=!1,u=arguments[0];typeof u=="object"&&u!==null&&"v"in u?(e=u.v,t=u.w,n=u.name,arguments.length===2&&(a=arguments[1],r=!0)):(e=u,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,xn.isUndefined(n)||(n=""+n);var c=km(this._isDirected,e,t,n);if(xn.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=a),this;if(!xn.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?a:this._defaultEdgeLabelFn(e,t,n);var v=Zee(this._isDirected,e,t,n);return e=v.v,t=v.w,Object.freeze(v),this._edgeObjs[c]=v,oT(this._preds[t],e),oT(this._sucs[e],t),this._in[t][c]=v,this._out[e][c]=v,this._edgeCount++,this},Gr.prototype.edge=function(e,t,n){var a=arguments.length===1?G1(this._isDirected,arguments[0]):km(this._isDirected,e,t,n);return this._edgeLabels[a]},Gr.prototype.hasEdge=function(e,t,n){var a=arguments.length===1?G1(this._isDirected,arguments[0]):km(this._isDirected,e,t,n);return xn.has(this._edgeLabels,a)},Gr.prototype.removeEdge=function(e,t,n){var a=arguments.length===1?G1(this._isDirected,arguments[0]):km(this._isDirected,e,t,n),r=this._edgeObjs[a];return r&&(e=r.v,t=r.w,delete this._edgeLabels[a],delete this._edgeObjs[a],iT(this._preds[t],e),iT(this._sucs[e],t),delete this._in[t][a],delete this._out[e][a],this._edgeCount--),this},Gr.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var a=xn.values(n);return t?xn.filter(a,function(r){return r.v===t}):a}},Gr.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var a=xn.values(n);return t?xn.filter(a,function(r){return r.w===t}):a}},Gr.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var aT={Graph:n2,version:"2.1.8"},Jee={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Qee(e),edges:ete(e)};return xn.isUndefined(e.graph())||(t.value=xn.clone(e.graph())),t},read:function(e){var t=new n2(e.options).setGraph(e.value);return xn.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),xn.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function Qee(e){return xn.map(e.nodes(),function(t){var n=e.node(t),a=e.parent(t),r={v:t};return xn.isUndefined(n)||(r.value=n),xn.isUndefined(a)||(r.parent=a),r})}function ete(e){return xn.map(e.edges(),function(t){var n=e.edge(t),a={v:t.v,w:t.w};return xn.isUndefined(t.name)||(a.name=t.name),xn.isUndefined(n)||(a.value=n),a})}var tte=function(e){var t,n={},a=[];function r(u){xn.has(n,u)||(n[u]=!0,t.push(u),xn.each(e.successors(u),r),xn.each(e.predecessors(u),r))}return xn.each(e.nodes(),function(u){t=[],r(u),t.length&&a.push(t)}),a},CR=Ru;function Ru(){this._arr=[],this._keyIndices={}}Ru.prototype.size=function(){return this._arr.length},Ru.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Ru.prototype.has=function(e){return xn.has(this._keyIndices,e)},Ru.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Ru.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Ru.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!xn.has(n,e)){var a=this._arr,r=a.length;return n[e]=r,a.push({key:e,priority:t}),this._decrease(r),!0}return!1},Ru.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Ru.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Ru.prototype._heapify=function(e){var t=this._arr,n=2*e,a=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,a<t.length&&(r=t[a].priority<t[r].priority?a:r),r!==e&&(this._swap(e,r),this._heapify(r)))},Ru.prototype._decrease=function(e){for(var t,n=this._arr,a=n[e].priority;e!==0&&!(n[t=e>>1].priority<a);)this._swap(e,t),e=t},Ru.prototype._swap=function(e,t){var n=this._arr,a=this._keyIndices,r=n[e],u=n[t];n[e]=u,n[t]=r,a[u.key]=e,a[r.key]=t};var DR=function(e,t,n,a){return function(r,u,c,v){var d,g,_={},b=new CR,x=function(A){var M=A.v!==d?A.v:A.w,O=_[M],S=c(A),j=g.distance+S;if(S<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+A+" Weight: "+S);j<O.distance&&(O.distance=j,O.predecessor=d,b.decrease(M,j))};for(r.nodes().forEach(function(A){var M=A===u?0:Number.POSITIVE_INFINITY;_[A]={distance:M},b.add(A,M)});b.size()>0&&(d=b.removeMin(),(g=_[d]).distance!==Number.POSITIVE_INFINITY);)v(d).forEach(x);return _}(e,String(t),n||nte,a||function(r){return e.outEdges(r)})},nte=xn.constant(1),rte=function(e,t,n){return xn.transform(e.nodes(),function(a,r){a[r]=DR(e,r,t,n)},{})},jR=function(e){var t=0,n=[],a={},r=[];function u(c){var v=a[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(_){xn.has(a,_)?a[_].onStack&&(v.lowlink=Math.min(v.lowlink,a[_].index)):(u(_),v.lowlink=Math.min(v.lowlink,a[_].lowlink))}),v.lowlink===v.index){var d,g=[];do d=n.pop(),a[d].onStack=!1,g.push(d);while(c!==d);r.push(g)}}return e.nodes().forEach(function(c){xn.has(a,c)||u(c)}),r},ote=function(e){return xn.filter(jR(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},ite=function(e,t,n){return function(a,r,u){var c={},v=a.nodes();return v.forEach(function(d){c[d]={},c[d][d]={distance:0},v.forEach(function(g){d!==g&&(c[d][g]={distance:Number.POSITIVE_INFINITY})}),u(d).forEach(function(g){var _=g.v===d?g.w:g.v,b=r(g);c[d][_]={distance:b,predecessor:d}})}),v.forEach(function(d){var g=c[d];v.forEach(function(_){var b=c[_];v.forEach(function(x){var A=b[d],M=g[x],O=b[x],S=A.distance+M.distance;S<O.distance&&(O.distance=S,O.predecessor=M.predecessor)})})}),c}(e,t||ate,n||function(a){return e.outEdges(a)})},ate=xn.constant(1),W1=IR;function IR(e){var t={},n={},a=[];if(xn.each(e.sinks(),function r(u){if(xn.has(n,u))throw new n_;xn.has(t,u)||(n[u]=!0,t[u]=!0,xn.each(e.predecessors(u),r),delete n[u],a.push(u))}),xn.size(t)!==e.nodeCount())throw new n_;return a}function n_(){}IR.CycleException=n_,n_.prototype=new Error;var lT=function(e,t,n){xn.isArray(t)||(t=[t]);var a=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],u={};return xn.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);LR(e,c,n==="post",u,a,r)}),r};function LR(e,t,n,a,r,u){xn.has(a,t)||(a[t]=!0,n||u.push(t),xn.each(r(t),function(c){LR(e,c,n,a,r,u)}),n&&u.push(t))}var r_,lte={Graph:aT.Graph,json:Jee,alg:{components:tte,dijkstra:DR,dijkstraAll:rte,findCycles:ote,floydWarshall:ite,isAcyclic:function(e){try{W1(e)}catch(t){if(t instanceof W1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return lT(e,t,"post")},preorder:function(e,t){return lT(e,t,"pre")},prim:function(e,t){var n,a=new n2,r={},u=new CR;function c(d){var g=d.v===n?d.w:d.v,_=u.priority(g);if(_!==void 0){var b=t(d);b<_&&(r[g]=n,u.decrease(g,b))}}if(e.nodeCount()===0)return a;xn.each(e.nodes(),function(d){u.add(d,Number.POSITIVE_INFINITY),a.setNode(d)}),u.decrease(e.nodes()[0],0);for(var v=!1;u.size()>0;){if(n=u.removeMin(),xn.has(r,n))a.setEdge(n,r[n]);else{if(v)throw new Error("Input graph is not connected: "+e);v=!0}e.nodeEdges(n).forEach(c)}return a},tarjan:jR,topsort:W1},version:aT.version};try{r_=lte}catch{}r_||(r_=window.graphlib);var _c=r_,ute=function(e){return iR(e,5)},qm=function(e,t,n){if(!Cl(n))return!1;var a=typeof t;return!!(a=="number"?Ff(n)&&D_(t,n.length):a=="string"&&t in n)&&Kv(n[t],e)},FR=Object.prototype,ste=FR.hasOwnProperty,cte=U_(function(e,t){e=Object(e);var n=-1,a=t.length,r=a>2?t[2]:void 0;for(r&&qm(t[0],t[1],r)&&(a=1);++n<a;)for(var u=t[n],c=mh(u),v=-1,d=c.length;++v<d;){var g=c[v],_=e[g];(_===void 0||Kv(_,FR[g])&&!ste.call(e,g))&&(e[g]=u[g])}return e}),fte=function(e){return function(t,n,a){var r=Object(t);if(!Ff(t)){var u=$f(n);t=tp(t),n=function(v){return u(r[v],v,r)}}var c=e(t,n,a);return c>-1?r[u?t[c]:c]:void 0}},dte=/^\s+|\s+$/g,pte=/^[-+]0x[0-9a-f]+$/i,hte=/^0b[01]+$/i,vte=/^0o[0-7]+$/i,mte=parseInt,yte=function(e){if(typeof e=="number")return e;if(oh(e))return NaN;if(Cl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(dte,"");var n=hte.test(e);return n||vte.test(e)?mte(e.slice(2),n?2:8):pte.test(e)?NaN:+e},Mg=function(e){return e?(e=yte(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},gte=function(e){var t=Mg(e),n=t%1;return t==t?n?t-n:t:0},_te=Math.max,bte=fte(function(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:gte(n);return r<0&&(r=_te(a+r,0)),PR(e,$f(t),r)}),$R=function(e){return e!=null&&e.length?t2(e):[]},wte=function(e,t){return e==null?e:KE(e,aR(t),mh)},Ete=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},Ote=function(e,t){var n={};return t=$f(t),ZE(e,function(a,r,u){N_(n,r,t(a,r,u))}),n},r2=function(e,t,n){for(var a=-1,r=e.length;++a<r;){var u=e[a],c=t(u);if(c!=null&&(v===void 0?c==c&&!oh(c):n(c,v)))var v=c,d=u}return d},Ste=function(e,t){return e>t},xte=function(e){return e&&e.length?r2(e,yh,Ste):void 0},qw=function(e,t,n){(n!==void 0&&!Kv(e[t],n)||n===void 0&&!(t in e))&&N_(e,t,n)},Ate=Function.prototype,Tte=Object.prototype,BR=Ate.toString,Mte=Tte.hasOwnProperty,kte=BR.call(Object),Pte=function(e){if(!Ts(e)||ep(e)!="[object Object]")return!1;var t=L_(e);if(t===null)return!0;var n=Mte.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&BR.call(n)==kte},uT=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},Rte=function(e){return ly(e,mh(e))},Nte=function(e,t,n,a,r,u,c){var v=uT(e,n),d=uT(t,n),g=c.get(d);if(g)qw(e,n,g);else{var _=void 0,b=_===void 0;if(b){var x=Di(d),A=!x&&nh(d),M=!x&&!A&&uy(d);_=d,x||A||M?Di(v)?_=v:RR(v)?_=ZP(v):A?(b=!1,_=KP(d,!0)):M?(b=!1,_=nR(d,!0)):_=[]:Pte(d)||jv(d)?(_=v,jv(v)?_=Rte(v):Cl(v)&&!ay(v)||(_=oR(d))):b=!1}b&&(c.set(d,_),r(_,d,a,u,c),c.delete(d)),qw(e,n,_)}},Cte=function e(t,n,a,r,u){t!==n&&KE(n,function(c,v){if(u||(u=new Av),Cl(c))Nte(t,n,v,a,e,r,u);else{var d=void 0;d===void 0&&(d=c),qw(t,v,d)}},mh)},Dte=function(e){return U_(function(t,n){var a=-1,r=n.length,u=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(u=e.length>3&&typeof u=="function"?(r--,u):void 0,c&&qm(n[0],n[1],c)&&(u=r<3?void 0:u,r=1),t=Object(t);++a<r;){var v=n[a];v&&e(t,v,a,u)}return t})}(function(e,t,n){Cte(e,t,n)}),UR=function(e,t){return e<t},jte=function(e){return e&&e.length?r2(e,yh,UR):void 0},Ite=function(e,t){return e&&e.length?r2(e,$f(t),UR):void 0},Lte=function(){return Ps.Date.now()},Fte=function(e,t,n,a){if(!Cl(e))return e;for(var r=-1,u=(t=$_(t,e)).length,c=u-1,v=e;v!=null&&++r<u;){var d=sy(t[r]),g=n;if(d==="__proto__"||d==="constructor"||d==="prototype")return e;if(r!=c){var _=v[d];(g=void 0)==void 0&&(g=Cl(_)?_:D_(t[r+1])?[]:{})}C_(v,d,g),v=v[d]}return e},$te=function(e,t,n){for(var a=-1,r=t.length,u={};++a<r;){var c=t[a],v=B_(e,c);n(v,c)&&Fte(u,$_(c,e),v)}return u},Bte=function(e,t){return $te(e,t,function(n,a){return yR(e,a)})},Ute=function(e){return kR(MR(e,void 0,$R),e+"")}(function(e,t){return e==null?{}:Bte(e,t)}),Vte=Math.ceil,Gte=Math.max,Wte=function(e,t,n,a){for(var r=-1,u=Gte(Vte((t-e)/(n||1)),0),c=Array(u);u--;)c[++r]=e,e+=n;return c},zte=function(e){return function(t,n,a){return a&&typeof a!="number"&&qm(t,n,a)&&(n=a=void 0),t=Mg(t),n===void 0?(n=t,t=0):n=Mg(n),a=a===void 0?t<n?1:-1:Mg(a),Wte(t,n,a)}}(),Hte=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Xte=function(e,t){if(e!==t){var n=e!==void 0,a=e===null,r=e==e,u=oh(e),c=t!==void 0,v=t===null,d=t==t,g=oh(t);if(!v&&!g&&!u&&e>t||u&&c&&d&&!v&&!g||a&&c&&d||!n&&d||!r)return 1;if(!a&&!u&&!g&&e<t||g&&n&&r&&!a&&!u||v&&n&&r||!c&&r||!d)return-1}return 0},qte=function(e,t,n){for(var a=-1,r=e.criteria,u=t.criteria,c=r.length,v=n.length;++a<c;){var d=Xte(r[a],u[a]);if(d)return a>=v?d:d*(n[a]=="desc"?-1:1)}return e.index-t.index},Yte=function(e,t,n){t=t.length?Mv(t,function(u){return Di(u)?function(c){return B_(c,u.length===1?u[0]:u)}:u}):[yh];var a=-1;t=Mv(t,j_($f));var r=ER(e,function(u,c,v){return{criteria:Mv(t,function(d){return d(u)}),index:++a,value:u}});return Hte(r,function(u,c){return qte(u,c,n)})},Kte=U_(function(e,t){if(e==null)return[];var n=t.length;return n>1&&qm(e,t[0],t[1])?t=[]:n>2&&qm(t[0],t[1],t[2])&&(t=[t[0]]),Yte(e,t2(t),[])}),Zte=0,Jte=function(e){var t=++Zte;return vR(e)+t},Qte=function(e,t,n){for(var a=-1,r=e.length,u=t.length,c={};++a<r;){var v=a<u?t[a]:void 0;n(c,e[a],v)}return c},o_,ene=function(e,t){return Qte(e||[],t||[],C_)};try{o_={cloneDeep:ute,constant:YE,defaults:cte,each:uR,filter:_R,find:bte,flatten:$R,forEach:lR,forIn:wte,has:bR,isUndefined:wR,last:Ete,map:OR,mapValues:Ote,max:xte,merge:Dte,min:jte,minBy:Ite,now:Lte,pick:Ute,range:zte,reduce:SR,sortBy:Kte,uniqueId:Jte,values:NR,zipObject:ene}}catch{}o_||(o_=window._);var tne=o_;_c.Graph;tne.constant(1);_c.Graph;_c.Graph;_c.alg.preorder;_c.alg.postorder;_c.Graph;_c.Graph;_c.Graph;_c.Graph;_c.Graph;var z1,sT;function nne(){if(sT)return z1;sT=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return z1=t,z1}var H1,cT;function rne(){if(cT)return H1;cT=1;var e=oE(),t=nne(),n=iE(),a="[object Arguments]",r="[object Array]",u="[object Boolean]",c="[object Date]",v="[object Error]",d="[object Function]",g="[object Map]",_="[object Number]",b="[object Object]",x="[object RegExp]",A="[object Set]",M="[object String]",O="[object WeakMap]",S="[object ArrayBuffer]",j="[object DataView]",D="[object Float32Array]",z="[object Float64Array]",U="[object Int8Array]",L="[object Int16Array]",$="[object Int32Array]",X="[object Uint8Array]",Y="[object Uint8ClampedArray]",H="[object Uint16Array]",B="[object Uint32Array]",G={};G[D]=G[z]=G[U]=G[L]=G[$]=G[X]=G[Y]=G[H]=G[B]=!0,G[a]=G[r]=G[S]=G[u]=G[j]=G[c]=G[v]=G[d]=G[g]=G[_]=G[b]=G[x]=G[A]=G[M]=G[O]=!1;function K(Q){return n(Q)&&t(Q.length)&&!!G[e(Q)]}return H1=K,H1}var X1,fT;function one(){if(fT)return X1;fT=1;function e(t){return function(n){return t(n)}}return X1=e,X1}var Pm={exports:{}};Pm.exports;var dT;function ine(){return dT||(dT=1,function(e,t){var n=pI(),a=t&&!t.nodeType&&t,r=a&&!0&&e&&!e.nodeType&&e,u=r&&r.exports===a,c=u&&n.process,v=function(){try{var d=r&&r.require&&r.require("util").types;return d||c&&c.binding&&c.binding("util")}catch{}}();e.exports=v}(Pm,Pm.exports)),Pm.exports}var q1,pT;function ane(){if(pT)return q1;pT=1;var e=rne(),t=one(),n=ine(),a=n&&n.isTypedArray,r=a?t(a):e;return q1=r,q1}ane();var Y1,hT;function lne(){if(hT)return Y1;hT=1;var e=oE(),t=iE(),n="[object Number]";function a(r){return typeof r=="number"||t(r)&&e(r)==n}return Y1=a,Y1}lne();var K1={exports:{}},Z1={exports:{}},vT;function VR(){return vT||(vT=1,function(e){function t(n,a){this.v=n,this.k=a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Z1)),Z1.exports}var J1={exports:{}},Q1={exports:{}},mT;function GR(){return mT||(mT=1,function(e){function t(n,a,r,u){var c=Object.defineProperty;try{c({},"",{})}catch{c=0}e.exports=t=function(d,g,_,b){function x(A,M){t(d,A,function(O){return this._invoke(A,M,O)})}g?c?c(d,g,{value:_,enumerable:!b,configurable:!b,writable:!b}):d[g]=_:(x("next",0),x("throw",1),x("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,a,r,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Q1)),Q1.exports}var yT;function WR(){return yT||(yT=1,function(e){var t=GR();function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var a,r,u=typeof Symbol=="function"?Symbol:{},c=u.iterator||"@@iterator",v=u.toStringTag||"@@toStringTag";function d(S,j,D,z){var U=j&&j.prototype instanceof _?j:_,L=Object.create(U.prototype);return t(L,"_invoke",function($,X,Y){var H,B,G,K=0,Q=Y||[],ce=!1,ue={p:0,n:0,v:a,a:de,f:de.bind(a,4),d:function(we,me){return H=we,B=0,G=a,ue.n=me,g}};function de(ye,we){for(B=ye,G=we,r=0;!ce&&K&&!me&&r<Q.length;r++){var me,He=Q[r],tt=ue.p,Ot=He[2];ye>3?(me=Ot===we)&&(G=He[(B=He[4])?5:(B=3,3)],He[4]=He[5]=a):He[0]<=tt&&((me=ye<2&&tt<He[1])?(B=0,ue.v=we,ue.n=He[1]):tt<Ot&&(me=ye<3||He[0]>we||we>Ot)&&(He[4]=ye,He[5]=we,ue.n=Ot,B=0))}if(me||ye>1)return g;throw ce=!0,we}return function(ye,we,me){if(K>1)throw TypeError("Generator is already running");for(ce&&we===1&&de(we,me),B=we,G=me;(r=B<2?a:G)||!ce;){H||(B?B<3?(B>1&&(ue.n=-1),de(B,G)):ue.n=G:ue.v=G);try{if(K=2,H){if(B||(ye="next"),r=H[ye]){if(!(r=r.call(H,G)))throw TypeError("iterator result is not an object");if(!r.done)return r;G=r.value,B<2&&(B=0)}else B===1&&(r=H.return)&&r.call(H),B<2&&(G=TypeError("The iterator does not provide a '"+ye+"' method"),B=1);H=a}else if((r=(ce=ue.n<0)?G:$.call(X,ue))!==g)break}catch(He){H=a,B=1,G=He}finally{K=1}}return{value:r,done:ce}}}(S,D,z),!0),L}var g={};function _(){}function b(){}function x(){}r=Object.getPrototypeOf;var A=[][c]?r(r([][c]())):(t(r={},c,function(){return this}),r),M=x.prototype=_.prototype=Object.create(A);function O(S){return Object.setPrototypeOf?Object.setPrototypeOf(S,x):(S.__proto__=x,t(S,v,"GeneratorFunction")),S.prototype=Object.create(M),S}return b.prototype=x,t(M,"constructor",x),t(x,"constructor",b),b.displayName="GeneratorFunction",t(x,v,"GeneratorFunction"),t(M),t(M,v,"Generator"),t(M,c,function(){return this}),t(M,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:d,m:O}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(J1)),J1.exports}var ew={exports:{}},tw={exports:{}},nw={exports:{}},gT;function zR(){return gT||(gT=1,function(e){var t=VR(),n=GR();function a(r,u){function c(d,g,_,b){try{var x=r[d](g),A=x.value;return A instanceof t?u.resolve(A.v).then(function(M){c("next",M,_,b)},function(M){c("throw",M,_,b)}):u.resolve(A).then(function(M){x.value=M,_(x)},function(M){return c("throw",M,_,b)})}catch(M){b(M)}}var v;this.next||(n(a.prototype),n(a.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(d,g,_){function b(){return new u(function(x,A){c(d,_,x,A)})}return v=v?v.then(b,b):b()},!0)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(nw)),nw.exports}var _T;function HR(){return _T||(_T=1,function(e){var t=WR(),n=zR();function a(r,u,c,v,d){return new n(t().w(r,u,c,v),d||Promise)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(tw)),tw.exports}var bT;function une(){return bT||(bT=1,function(e){var t=HR();function n(a,r,u,c,v){var d=t(a,r,u,c,v);return d.next().then(function(g){return g.done?g.value:d.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ew)),ew.exports}var rw={exports:{}},wT;function sne(){return wT||(wT=1,function(e){function t(n){var a=Object(n),r=[];for(var u in a)r.unshift(u);return function c(){for(;r.length;)if((u=r.pop())in a)return c.value=u,c.done=!1,c;return c.done=!0,c}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(rw)),rw.exports}var ow={exports:{}},iw={exports:{}},ET;function cne(){return ET||(ET=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(iw)),iw.exports}var OT;function fne(){return OT||(OT=1,function(e){var t=cne().default;function n(a){if(a!=null){var r=a[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],u=0;if(r)return r.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length))return{next:function(){return a&&u>=a.length&&(a=void 0),{value:a&&a[u++],done:!a}}}}throw new TypeError(t(a)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ow)),ow.exports}var ST;function dne(){return ST||(ST=1,function(e){var t=VR(),n=WR(),a=une(),r=HR(),u=zR(),c=sne(),v=fne();function d(){var g=n(),_=g.m(d),b=(Object.getPrototypeOf?Object.getPrototypeOf(_):_.__proto__).constructor;function x(O){var S=typeof O=="function"&&O.constructor;return!!S&&(S===b||(S.displayName||S.name)==="GeneratorFunction")}var A={throw:1,return:2,break:3,continue:3};function M(O){var S,j;return function(D){S||(S={stop:function(){return j(D.a,2)},catch:function(){return D.v},abrupt:function(U,L){return j(D.a,A[U],L)},delegateYield:function(U,L,$){return S.resultName=L,j(D.d,v(U),$)},finish:function(U){return j(D.f,U)}},j=function(U,L,$){D.p=S.prev,D.n=S.next;try{return U(L,$)}finally{S.next=D.n}}),S.resultName&&(S[S.resultName]=D.v,S.resultName=void 0),S.sent=D.v,S.next=D.n;try{return O.call(this,S)}finally{D.p=S.prev,D.n=S.next}}}return(e.exports=d=function(){return{wrap:function(j,D,z,U){return g.w(M(j),D,z,U&&U.reverse())},isGeneratorFunction:x,mark:g.m,awrap:function(j,D){return new t(j,D)},AsyncIterator:u,async:function(j,D,z,U,L){return(x(D)?r:a)(M(j),D,z,U,L)},keys:c,values:v}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports}(K1)),K1.exports}var aw,xT;function pne(){if(xT)return aw;xT=1;var e=dne()();aw=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return aw}pne();var ln;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(ln||(ln={}));var AT;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(AT||(AT={}));var TT;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(TT||(TT={}));var MT;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(MT||(MT={}));var kT;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(kT||(kT={}));var kg={exports:{}},hne=kg.exports,PT;function vne(){return PT||(PT=1,function(e,t){(function(n,a){e.exports=a()})(hne,function(){var n=function(V){return V instanceof Uint8Array||V instanceof Uint16Array||V instanceof Uint32Array||V instanceof Int8Array||V instanceof Int16Array||V instanceof Int32Array||V instanceof Float32Array||V instanceof Float64Array||V instanceof Uint8ClampedArray},a=function(V,le){for(var Oe=Object.keys(le),rt=0;rt<Oe.length;++rt)V[Oe[rt]]=le[Oe[rt]];return V},r=`
`;function u(V){return typeof atob<"u"?atob(V):"base64:"+V}function c(V){var le=new Error("(regl) "+V);throw console.error(le),le}function v(V,le){V||c(le)}function d(V){return V?": "+V:""}function g(V,le,Oe){V in le||c("unknown parameter ("+V+")"+d(Oe)+". possible values: "+Object.keys(le).join())}function _(V,le){n(V)||c("invalid parameter type"+d(le)+". must be a typed array")}function b(V,le){switch(le){case"number":return typeof V=="number";case"object":return typeof V=="object";case"string":return typeof V=="string";case"boolean":return typeof V=="boolean";case"function":return typeof V=="function";case"undefined":return typeof V>"u";case"symbol":return typeof V=="symbol"}}function x(V,le,Oe){b(V,le)||c("invalid parameter type"+d(Oe)+". expected "+le+", got "+typeof V)}function A(V,le){V>=0&&(V|0)===V||c("invalid parameter type, ("+V+")"+d(le)+". must be a nonnegative integer")}function M(V,le,Oe){le.indexOf(V)<0&&c("invalid value"+d(Oe)+". must be one of: "+le)}var O=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function S(V){Object.keys(V).forEach(function(le){O.indexOf(le)<0&&c('invalid regl constructor argument "'+le+'". must be one of '+O)})}function j(V,le){for(V=V+"";V.length<le;)V=" "+V;return V}function D(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function z(V,le){this.number=V,this.line=le,this.errors=[]}function U(V,le,Oe){this.file=V,this.line=le,this.message=Oe}function L(){var V=new Error,le=(V.stack||V).toString(),Oe=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(le);if(Oe)return Oe[1];var rt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(le);return rt?rt[1]:"unknown"}function $(){var V=new Error,le=(V.stack||V).toString(),Oe=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(le);if(Oe)return Oe[1];var rt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(le);return rt?rt[1]:"unknown"}function X(V,le){var Oe=V.split(`
`),rt=1,ht=0,Qe={unknown:new D,0:new D};Qe.unknown.name=Qe[0].name=le||L(),Qe.unknown.lines.push(new z(0,""));for(var dt=0;dt<Oe.length;++dt){var Rt=Oe[dt],Lt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Rt);if(Lt)switch(Lt[1]){case"line":var Nt=/(\d+)(\s+\d+)?/.exec(Lt[2]);Nt&&(rt=Nt[1]|0,Nt[2]&&(ht=Nt[2]|0,ht in Qe||(Qe[ht]=new D)));break;case"define":var ct=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Lt[2]);ct&&(Qe[ht].name=ct[1]?u(ct[2]):ct[2]);break}Qe[ht].lines.push(new z(rt++,Rt))}return Object.keys(Qe).forEach(function(Ht){var Ut=Qe[Ht];Ut.lines.forEach(function(Ct){Ut.index[Ct.number]=Ct})}),Qe}function Y(V){var le=[];return V.split(`
`).forEach(function(Oe){if(!(Oe.length<5)){var rt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Oe);rt?le.push(new U(rt[1]|0,rt[2]|0,rt[3].trim())):Oe.length>0&&le.push(new U("unknown",0,Oe))}}),le}function H(V,le){le.forEach(function(Oe){var rt=V[Oe.file];if(rt){var ht=rt.index[Oe.line];if(ht){ht.errors.push(Oe),rt.hasErrors=!0;return}}V.unknown.hasErrors=!0,V.unknown.lines[0].errors.push(Oe)})}function B(V,le,Oe,rt,ht){if(!V.getShaderParameter(le,V.COMPILE_STATUS)){var Qe=V.getShaderInfoLog(le),dt=rt===V.FRAGMENT_SHADER?"fragment":"vertex";ye(Oe,"string",dt+" shader source must be a string",ht);var Rt=X(Oe,ht),Lt=Y(Qe);H(Rt,Lt),Object.keys(Rt).forEach(function(Nt){var ct=Rt[Nt];if(!ct.hasErrors)return;var Ht=[""],Ut=[""];function Ct(Et,Ke){Ht.push(Et),Ut.push(Ke||"")}Ct("file number "+Nt+": "+ct.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ct.lines.forEach(function(Et){if(Et.errors.length>0){Ct(j(Et.number,4)+"|  ","background-color:yellow; font-weight:bold"),Ct(Et.line+r,"color:red; background-color:yellow; font-weight:bold");var Ke=0;Et.errors.forEach(function(st){var It=st.message,Jt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(It);if(Jt){var At=Jt[1];switch(It=Jt[2],At){case"assign":At="=";break}Ke=Math.max(Et.line.indexOf(At,Ke),0)}else Ke=0;Ct(j("| ",6)),Ct(j("^^^",Ke+3)+r,"font-weight:bold"),Ct(j("| ",6)),Ct(It+r,"font-weight:bold")}),Ct(j("| ",6)+r)}else Ct(j(Et.number,4)+"|  "),Ct(Et.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Ut[0]=Ht.join("%c"),console.log.apply(console,Ut)):console.log(Ht.join(""))}),v.raise("Error compiling "+dt+" shader, "+Rt[0].name)}}function G(V,le,Oe,rt,ht){if(!V.getProgramParameter(le,V.LINK_STATUS)){var Qe=V.getProgramInfoLog(le),dt=X(Oe,ht),Rt=X(rt,ht),Lt='Error linking program with vertex shader, "'+Rt[0].name+'", and fragment shader "'+dt[0].name+'"';typeof document<"u"?console.log("%c"+Lt+r+"%c"+Qe,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Lt+r+Qe),v.raise(Lt)}}function K(V){V._commandRef=L()}function Q(V,le,Oe,rt){K(V);function ht(Lt){return Lt?rt.id(Lt):0}V._fragId=ht(V.static.frag),V._vertId=ht(V.static.vert);function Qe(Lt,Nt){Object.keys(Nt).forEach(function(ct){Lt[rt.id(ct)]=!0})}var dt=V._uniformSet={};Qe(dt,le.static),Qe(dt,le.dynamic);var Rt=V._attributeSet={};Qe(Rt,Oe.static),Qe(Rt,Oe.dynamic),V._hasCount="count"in V.static||"count"in V.dynamic||"elements"in V.static||"elements"in V.dynamic}function ce(V,le){var Oe=$();c(V+" in command "+(le||L())+(Oe==="unknown"?"":" called from "+Oe))}function ue(V,le,Oe){V||ce(le,Oe||L())}function de(V,le,Oe,rt){V in le||ce("unknown parameter ("+V+")"+d(Oe)+". possible values: "+Object.keys(le).join(),rt||L())}function ye(V,le,Oe,rt){b(V,le)||ce("invalid parameter type"+d(Oe)+". expected "+le+", got "+typeof V,rt||L())}function we(V){V()}function me(V,le,Oe){V.texture?M(V.texture._texture.internalformat,le,"unsupported texture format for attachment"):M(V.renderbuffer._renderbuffer.format,Oe,"unsupported renderbuffer format for attachment")}var He=33071,tt=9728,Ot=9984,Je=9985,Yt=9986,Kt=9987,Ft=5120,An=5121,Be=5122,Se=5123,Ce=5124,Xe=5125,_t=5126,pt=32819,bt=32820,nn=33635,on=34042,Xt=36193,nt={};nt[Ft]=nt[An]=1,nt[Be]=nt[Se]=nt[Xt]=nt[nn]=nt[pt]=nt[bt]=2,nt[Ce]=nt[Xe]=nt[_t]=nt[on]=4;function fn(V,le){return V===bt||V===pt||V===nn?2:V===on?4:nt[V]*le}function $e(V){return!(V&V-1)&&!!V}function bn(V,le,Oe){var rt,ht=le.width,Qe=le.height,dt=le.channels;v(ht>0&&ht<=Oe.maxTextureSize&&Qe>0&&Qe<=Oe.maxTextureSize,"invalid texture shape"),(V.wrapS!==He||V.wrapT!==He)&&v($e(ht)&&$e(Qe),"incompatible wrap mode for texture, both width and height must be power of 2"),le.mipmask===1?ht!==1&&Qe!==1&&v(V.minFilter!==Ot&&V.minFilter!==Yt&&V.minFilter!==Je&&V.minFilter!==Kt,"min filter requires mipmap"):(v($e(ht)&&$e(Qe),"texture must be a square power of 2 to support mipmapping"),v(le.mipmask===(ht<<1)-1,"missing or incomplete mipmap data")),le.type===_t&&(Oe.extensions.indexOf("oes_texture_float_linear")<0&&v(V.minFilter===tt&&V.magFilter===tt,"filter not supported, must enable oes_texture_float_linear"),v(!V.genMipmaps,"mipmap generation not supported with float textures"));var Rt=le.images;for(rt=0;rt<16;++rt)if(Rt[rt]){var Lt=ht>>rt,Nt=Qe>>rt;v(le.mipmask&1<<rt,"missing mipmap data");var ct=Rt[rt];if(v(ct.width===Lt&&ct.height===Nt,"invalid shape for mip images"),v(ct.format===le.format&&ct.internalformat===le.internalformat&&ct.type===le.type,"incompatible type for mip image"),!ct.compressed)if(ct.data){var Ht=Math.ceil(fn(ct.type,dt)*Lt/ct.unpackAlignment)*ct.unpackAlignment;v(ct.data.byteLength===Ht*Nt,"invalid data for image, buffer size is inconsistent with image format")}else ct.element||ct.copy}else V.genMipmaps||v((le.mipmask&1<<rt)===0,"extra mipmap data");le.compressed&&v(!V.genMipmaps,"mipmap generation for compressed images not supported")}function Zn(V,le,Oe,rt){var ht=V.width,Qe=V.height,dt=V.channels;v(ht>0&&ht<=rt.maxTextureSize&&Qe>0&&Qe<=rt.maxTextureSize,"invalid texture shape"),v(ht===Qe,"cube map must be square"),v(le.wrapS===He&&le.wrapT===He,"wrap mode not supported by cube map");for(var Rt=0;Rt<Oe.length;++Rt){var Lt=Oe[Rt];v(Lt.width===ht&&Lt.height===Qe,"inconsistent cube map face shape"),le.genMipmaps&&(v(!Lt.compressed,"can not generate mipmap for compressed textures"),v(Lt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Nt=Lt.images,ct=0;ct<16;++ct){var Ht=Nt[ct];if(Ht){var Ut=ht>>ct,Ct=Qe>>ct;v(Lt.mipmask&1<<ct,"missing mipmap data"),v(Ht.width===Ut&&Ht.height===Ct,"invalid shape for mip images"),v(Ht.format===V.format&&Ht.internalformat===V.internalformat&&Ht.type===V.type,"incompatible type for mip image"),Ht.compressed||(Ht.data?v(Ht.data.byteLength===Ut*Ct*Math.max(fn(Ht.type,dt),Ht.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ht.element||Ht.copy)}}}}var ie=a(v,{optional:we,raise:c,commandRaise:ce,command:ue,parameter:g,commandParameter:de,constructor:S,type:x,commandType:ye,isTypedArray:_,nni:A,oneOf:M,shaderError:B,linkError:G,callSite:$,saveCommandRef:K,saveDrawInfo:Q,framebufferFormat:me,guessCommand:L,texture2D:bn,textureCube:Zn}),Jn=0,kr=0,Wr=5,uo=6;function Fn(V,le){this.id=Jn++,this.type=V,this.data=le}function yo(V){return V.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ae(V){if(V.length===0)return[];var le=V.charAt(0),Oe=V.charAt(V.length-1);if(V.length>1&&le===Oe&&(le==='"'||le==="'"))return['"'+yo(V.substr(1,V.length-2))+'"'];var rt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(V);if(rt)return Ae(V.substr(0,rt.index)).concat(Ae(rt[1])).concat(Ae(V.substr(rt.index+rt[0].length)));var ht=V.split(".");if(ht.length===1)return['"'+yo(V)+'"'];for(var Qe=[],dt=0;dt<ht.length;++dt)Qe=Qe.concat(Ae(ht[dt]));return Qe}function Ye(V){return"["+Ae(V).join("][")+"]"}function Ie(V,le){return new Fn(V,Ye(le+""))}function lt(V){return typeof V=="function"&&!V._reglType||V instanceof Fn}function tn(V,le){if(typeof V=="function")return new Fn(kr,V);if(typeof V=="number"||typeof V=="boolean")return new Fn(Wr,V);if(Array.isArray(V))return new Fn(uo,V.map((Oe,rt)=>tn(Oe,le+"["+rt+"]")));if(V instanceof Fn)return V;ie(!1,"invalid option type in uniform "+le)}var Zt={DynamicVariable:Fn,define:Ie,isDynamic:lt,unbox:tn,accessor:Ye},Nn={next:typeof requestAnimationFrame=="function"?function(V){return requestAnimationFrame(V)}:function(V){return setTimeout(V,16)},cancel:typeof cancelAnimationFrame=="function"?function(V){return cancelAnimationFrame(V)}:clearTimeout},Er=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function li(){var V={"":0},le=[""];return{id:function(Oe){var rt=V[Oe];return rt||(rt=V[Oe]=le.length,le.push(Oe),rt)},str:function(Oe){return le[Oe]}}}function Si(V,le,Oe){var rt=document.createElement("canvas");a(rt.style,{border:0,margin:0,padding:0,top:0,left:0}),V.appendChild(rt),V===document.body&&(rt.style.position="absolute",a(V.style,{margin:0,padding:0}));function ht(){var Rt=window.innerWidth,Lt=window.innerHeight;if(V!==document.body){var Nt=V.getBoundingClientRect();Rt=Nt.right-Nt.left,Lt=Nt.bottom-Nt.top}rt.width=Oe*Rt,rt.height=Oe*Lt,a(rt.style,{width:Rt+"px",height:Lt+"px"})}var Qe;V!==document.body&&typeof ResizeObserver=="function"?(Qe=new ResizeObserver(function(){setTimeout(ht)}),Qe.observe(V)):window.addEventListener("resize",ht,!1);function dt(){Qe?Qe.disconnect():window.removeEventListener("resize",ht),V.removeChild(rt)}return ht(),{canvas:rt,onDestroy:dt}}function zo(V,le){function Oe(rt){try{return V.getContext(rt,le)}catch{return null}}return Oe("webgl")||Oe("experimental-webgl")||Oe("webgl-experimental")}function ti(V){return typeof V.nodeName=="string"&&typeof V.appendChild=="function"&&typeof V.getBoundingClientRect=="function"}function Tn(V){return typeof V.drawArrays=="function"||typeof V.drawElements=="function"}function $n(V){return typeof V=="string"?V.split():(ie(Array.isArray(V),"invalid extension array"),V)}function Hn(V){return typeof V=="string"?(ie(typeof document<"u","not supported outside of DOM"),document.querySelector(V)):V}function lr(V){var le=V||{},Oe,rt,ht,Qe,dt={},Rt=[],Lt=[],Nt=typeof window>"u"?1:window.devicePixelRatio,ct=!1,Ht=function(Et){Et&&ie.raise(Et)},Ut=function(){};if(typeof le=="string"?(ie(typeof document<"u","selector queries only supported in DOM enviroments"),Oe=document.querySelector(le),ie(Oe,"invalid query string for element")):typeof le=="object"?ti(le)?Oe=le:Tn(le)?(Qe=le,ht=Qe.canvas):(ie.constructor(le),"gl"in le?Qe=le.gl:"canvas"in le?ht=Hn(le.canvas):"container"in le&&(rt=Hn(le.container)),"attributes"in le&&(dt=le.attributes,ie.type(dt,"object","invalid context attributes")),"extensions"in le&&(Rt=$n(le.extensions)),"optionalExtensions"in le&&(Lt=$n(le.optionalExtensions)),"onDone"in le&&(ie.type(le.onDone,"function","invalid or missing onDone callback"),Ht=le.onDone),"profile"in le&&(ct=!!le.profile),"pixelRatio"in le&&(Nt=+le.pixelRatio,ie(Nt>0,"invalid pixel ratio"))):ie.raise("invalid arguments to regl"),Oe&&(Oe.nodeName.toLowerCase()==="canvas"?ht=Oe:rt=Oe),!Qe){if(!ht){ie(typeof document<"u","must manually specify webgl context outside of DOM environments");var Ct=Si(rt||document.body,Ht,Nt);if(!Ct)return null;ht=Ct.canvas,Ut=Ct.onDestroy}dt.premultipliedAlpha===void 0&&(dt.premultipliedAlpha=!0),Qe=zo(ht,dt)}return Qe?{gl:Qe,canvas:ht,container:rt,extensions:Rt,optionalExtensions:Lt,pixelRatio:Nt,profile:ct,onDone:Ht,onDestroy:Ut}:(Ut(),Ht("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function eo(V,le){var Oe={};function rt(dt){ie.type(dt,"string","extension name must be string");var Rt=dt.toLowerCase(),Lt;try{Lt=Oe[Rt]=V.getExtension(Rt)}catch{}return!!Lt}for(var ht=0;ht<le.extensions.length;++ht){var Qe=le.extensions[ht];if(!rt(Qe))return le.onDestroy(),le.onDone('"'+Qe+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return le.optionalExtensions.forEach(rt),{extensions:Oe,restore:function(){Object.keys(Oe).forEach(function(dt){if(Oe[dt]&&!rt(dt))throw new Error("(regl): error restoring extension "+dt)})}}}function jr(V,le){for(var Oe=Array(V),rt=0;rt<V;++rt)Oe[rt]=le(rt);return Oe}var ml=5120,Ha=5121,yl=5122,au=5123,np=5124,bc=5125,va=5126;function Bu(V){for(var le=16;le<=1<<28;le*=16)if(V<=le)return le;return 0}function Pn(V){var le,Oe;return le=(V>65535)<<4,V>>>=le,Oe=(V>255)<<3,V>>>=Oe,le|=Oe,Oe=(V>15)<<2,V>>>=Oe,le|=Oe,Oe=(V>3)<<1,V>>>=Oe,le|=Oe,le|V>>1}function Bf(){var V=jr(8,function(){return[]});function le(Qe){var dt=Bu(Qe),Rt=V[Pn(dt)>>2];return Rt.length>0?Rt.pop():new ArrayBuffer(dt)}function Oe(Qe){V[Pn(Qe.byteLength)>>2].push(Qe)}function rt(Qe,dt){var Rt=null;switch(Qe){case ml:Rt=new Int8Array(le(dt),0,dt);break;case Ha:Rt=new Uint8Array(le(dt),0,dt);break;case yl:Rt=new Int16Array(le(2*dt),0,dt);break;case au:Rt=new Uint16Array(le(2*dt),0,dt);break;case np:Rt=new Int32Array(le(4*dt),0,dt);break;case bc:Rt=new Uint32Array(le(4*dt),0,dt);break;case va:Rt=new Float32Array(le(4*dt),0,dt);break;default:return null}return Rt.length!==dt?Rt.subarray(0,dt):Rt}function ht(Qe){Oe(Qe.buffer)}return{alloc:le,free:Oe,allocType:rt,freeType:ht}}var go=Bf();go.zero=Bf();var wc=3408,Zi=3410,la=3411,Rs=3412,Ca=3413,ma=3414,Da=3415,Ec=33901,Oc=33902,Uf=3379,Uu=3386,Vf=34921,Sc=36347,rp=36348,jl=35661,Gf=35660,gl=34930,xc=36349,Ns=34076,Ac=34024,Tc=7936,op=7937,Wf=7938,qr=35724,zr=34047,zf=36063,lu=34852,ya=3553,Cs=34067,Hf=34069,Fo=33984,Il=6408,Ll=5126,Ds=5121,uu=36160,xi=36053,Mc=36064,Xf=16384,kc=function(V,le){var Oe=1;le.ext_texture_filter_anisotropic&&(Oe=V.getParameter(zr));var rt=1,ht=1;le.webgl_draw_buffers&&(rt=V.getParameter(lu),ht=V.getParameter(zf));var Qe=!!le.oes_texture_float;if(Qe){var dt=V.createTexture();V.bindTexture(ya,dt),V.texImage2D(ya,0,Il,1,1,0,Il,Ll,null);var Rt=V.createFramebuffer();if(V.bindFramebuffer(uu,Rt),V.framebufferTexture2D(uu,Mc,ya,dt,0),V.bindTexture(ya,null),V.checkFramebufferStatus(uu)!==xi)Qe=!1;else{V.viewport(0,0,1,1),V.clearColor(1,0,0,1),V.clear(Xf);var Lt=go.allocType(Ll,4);V.readPixels(0,0,1,1,Il,Ll,Lt),V.getError()?Qe=!1:(V.deleteFramebuffer(Rt),V.deleteTexture(dt),Qe=Lt[0]===1),go.freeType(Lt)}}var Nt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ct=!0;if(!Nt){var Ht=V.createTexture(),Ut=go.allocType(Ds,36);V.activeTexture(Fo),V.bindTexture(Cs,Ht),V.texImage2D(Hf,0,Il,3,3,0,Il,Ds,Ut),go.freeType(Ut),V.bindTexture(Cs,null),V.deleteTexture(Ht),ct=!V.getError()}return{colorBits:[V.getParameter(Zi),V.getParameter(la),V.getParameter(Rs),V.getParameter(Ca)],depthBits:V.getParameter(ma),stencilBits:V.getParameter(Da),subpixelBits:V.getParameter(wc),extensions:Object.keys(le).filter(function(Ct){return!!le[Ct]}),maxAnisotropic:Oe,maxDrawbuffers:rt,maxColorAttachments:ht,pointSizeDims:V.getParameter(Ec),lineWidthDims:V.getParameter(Oc),maxViewportDims:V.getParameter(Uu),maxCombinedTextureUnits:V.getParameter(jl),maxCubeMapSize:V.getParameter(Ns),maxRenderbufferSize:V.getParameter(Ac),maxTextureUnits:V.getParameter(gl),maxTextureSize:V.getParameter(Uf),maxAttributes:V.getParameter(Vf),maxVertexUniforms:V.getParameter(Sc),maxVertexTextureUnits:V.getParameter(Gf),maxVaryingVectors:V.getParameter(rp),maxFragmentUniforms:V.getParameter(xc),glsl:V.getParameter(qr),renderer:V.getParameter(op),vendor:V.getParameter(Tc),version:V.getParameter(Wf),readFloat:Qe,npotTextureCube:ct}};function $i(V){return!!V&&typeof V=="object"&&Array.isArray(V.shape)&&Array.isArray(V.stride)&&typeof V.offset=="number"&&V.shape.length===V.stride.length&&(Array.isArray(V.data)||n(V.data))}var ui=function(V){return Object.keys(V).map(function(le){return V[le]})},ga={shape:Ui,flatten:Yf};function io(V,le,Oe){for(var rt=0;rt<le;++rt)Oe[rt]=V[rt]}function ip(V,le,Oe,rt){for(var ht=0,Qe=0;Qe<le;++Qe)for(var dt=V[Qe],Rt=0;Rt<Oe;++Rt)rt[ht++]=dt[Rt]}function Bi(V,le,Oe,rt,ht,Qe){for(var dt=Qe,Rt=0;Rt<le;++Rt)for(var Lt=V[Rt],Nt=0;Nt<Oe;++Nt)for(var ct=Lt[Nt],Ht=0;Ht<rt;++Ht)ht[dt++]=ct[Ht]}function qf(V,le,Oe,rt,ht){for(var Qe=1,dt=Oe+1;dt<le.length;++dt)Qe*=le[dt];var Rt=le[Oe];if(le.length-Oe===4){var Lt=le[Oe+1],Nt=le[Oe+2],ct=le[Oe+3];for(dt=0;dt<Rt;++dt)Bi(V[dt],Lt,Nt,ct,rt,ht),ht+=Qe}else for(dt=0;dt<Rt;++dt)qf(V[dt],le,Oe+1,rt,ht),ht+=Qe}function Yf(V,le,Oe,rt){var ht=1;if(le.length)for(var Qe=0;Qe<le.length;++Qe)ht*=le[Qe];else ht=0;var dt=rt||go.allocType(Oe,ht);switch(le.length){case 0:break;case 1:io(V,le[0],dt);break;case 2:ip(V,le[0],le[1],dt);break;case 3:Bi(V,le[0],le[1],le[2],dt,0);break;default:qf(V,le,0,dt,0)}return dt}function Ui(V){for(var le=[],Oe=V;Oe.length;Oe=Oe[0])le.push(Oe.length);return le}var Ji={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Pc=5120,$r=5122,si=5124,js=5121,Kf=5123,Rc=5125,Is=5126,Xa=5126,Vi={int8:Pc,int16:$r,int32:si,uint8:js,uint16:Kf,uint32:Rc,float:Is,float32:Xa},su=35048,Qi=35040,_a={dynamic:su,stream:Qi,static:35044},Pr=ga.flatten,Gi=ga.shape,ja=35044,yi=35040,cu=5121,Fl=5126,Ia=[];Ia[5120]=1,Ia[5122]=2,Ia[5124]=4,Ia[5121]=1,Ia[5123]=2,Ia[5125]=4,Ia[5126]=4;function fo(V){return Ji[Object.prototype.toString.call(V)]|0}function Vu(V,le){for(var Oe=0;Oe<le.length;++Oe)V[Oe]=le[Oe]}function qa(V,le,Oe,rt,ht,Qe,dt){for(var Rt=0,Lt=0;Lt<Oe;++Lt)for(var Nt=0;Nt<rt;++Nt)V[Rt++]=le[ht*Lt+Qe*Nt+dt]}function ba(V,le,Oe,rt){var ht=0,Qe={};function dt(Ke){this.id=ht++,this.buffer=V.createBuffer(),this.type=Ke,this.usage=ja,this.byteLength=0,this.dimension=1,this.dtype=cu,this.persistentData=null,Oe.profile&&(this.stats={size:0})}dt.prototype.bind=function(){V.bindBuffer(this.type,this.buffer)},dt.prototype.destroy=function(){Ut(this)};var Rt=[];function Lt(Ke,st){var It=Rt.pop();return It||(It=new dt(Ke)),It.bind(),Ht(It,st,yi,0,1,!1),It}function Nt(Ke){Rt.push(Ke)}function ct(Ke,st,It){Ke.byteLength=st.byteLength,V.bufferData(Ke.type,st,It)}function Ht(Ke,st,It,Jt,At,rn){var Mt;if(Ke.usage=It,Array.isArray(st)){if(Ke.dtype=Jt||Fl,st.length>0){var Wt;if(Array.isArray(st[0])){Mt=Gi(st);for(var Tt=1,qt=1;qt<Mt.length;++qt)Tt*=Mt[qt];Ke.dimension=Tt,Wt=Pr(st,Mt,Ke.dtype),ct(Ke,Wt,It),rn?Ke.persistentData=Wt:go.freeType(Wt)}else if(typeof st[0]=="number"){Ke.dimension=At;var kn=go.allocType(Ke.dtype,st.length);Vu(kn,st),ct(Ke,kn,It),rn?Ke.persistentData=kn:go.freeType(kn)}else n(st[0])?(Ke.dimension=st[0].length,Ke.dtype=Jt||fo(st[0])||Fl,Wt=Pr(st,[st.length,st[0].length],Ke.dtype),ct(Ke,Wt,It),rn?Ke.persistentData=Wt:go.freeType(Wt)):ie.raise("invalid buffer data")}}else if(n(st))Ke.dtype=Jt||fo(st),Ke.dimension=At,ct(Ke,st,It),rn&&(Ke.persistentData=new Uint8Array(new Uint8Array(st.buffer)));else if($i(st)){Mt=st.shape;var Vn=st.stride,Dt=st.offset,kt=0,xt=0,jn=0,er=0;Mt.length===1?(kt=Mt[0],xt=1,jn=Vn[0],er=0):Mt.length===2?(kt=Mt[0],xt=Mt[1],jn=Vn[0],er=Vn[1]):ie.raise("invalid shape"),Ke.dtype=Jt||fo(st.data)||Fl,Ke.dimension=xt;var pn=go.allocType(Ke.dtype,kt*xt);qa(pn,st.data,kt,xt,jn,er,Dt),ct(Ke,pn,It),rn?Ke.persistentData=pn:go.freeType(pn)}else st instanceof ArrayBuffer?(Ke.dtype=cu,Ke.dimension=At,ct(Ke,st,It),rn&&(Ke.persistentData=new Uint8Array(new Uint8Array(st)))):ie.raise("invalid buffer data")}function Ut(Ke){le.bufferCount--,rt(Ke);var st=Ke.buffer;ie(st,"buffer must not be deleted already"),V.deleteBuffer(st),Ke.buffer=null,delete Qe[Ke.id]}function Ct(Ke,st,It,Jt){le.bufferCount++;var At=new dt(st);Qe[At.id]=At;function rn(Tt){var qt=ja,kn=null,Vn=0,Dt=0,kt=1;return Array.isArray(Tt)||n(Tt)||$i(Tt)||Tt instanceof ArrayBuffer?kn=Tt:typeof Tt=="number"?Vn=Tt|0:Tt&&(ie.type(Tt,"object","buffer arguments must be an object, a number or an array"),"data"in Tt&&(ie(kn===null||Array.isArray(kn)||n(kn)||$i(kn),"invalid data for buffer"),kn=Tt.data),"usage"in Tt&&(ie.parameter(Tt.usage,_a,"invalid buffer usage"),qt=_a[Tt.usage]),"type"in Tt&&(ie.parameter(Tt.type,Vi,"invalid buffer type"),Dt=Vi[Tt.type]),"dimension"in Tt&&(ie.type(Tt.dimension,"number","invalid dimension"),kt=Tt.dimension|0),"length"in Tt&&(ie.nni(Vn,"buffer length must be a nonnegative integer"),Vn=Tt.length|0)),At.bind(),kn?Ht(At,kn,qt,Dt,kt,Jt):(Vn&&V.bufferData(At.type,Vn,qt),At.dtype=Dt||cu,At.usage=qt,At.dimension=kt,At.byteLength=Vn),Oe.profile&&(At.stats.size=At.byteLength*Ia[At.dtype]),rn}function Mt(Tt,qt){ie(qt+Tt.byteLength<=At.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Tt.byteLength+" starting from offset "+qt+" to a buffer of size "+At.byteLength),V.bufferSubData(At.type,qt,Tt)}function Wt(Tt,qt){var kn=(qt||0)|0,Vn;if(At.bind(),n(Tt)||Tt instanceof ArrayBuffer)Mt(Tt,kn);else if(Array.isArray(Tt)){if(Tt.length>0)if(typeof Tt[0]=="number"){var Dt=go.allocType(At.dtype,Tt.length);Vu(Dt,Tt),Mt(Dt,kn),go.freeType(Dt)}else if(Array.isArray(Tt[0])||n(Tt[0])){Vn=Gi(Tt);var kt=Pr(Tt,Vn,At.dtype);Mt(kt,kn),go.freeType(kt)}else ie.raise("invalid buffer data")}else if($i(Tt)){Vn=Tt.shape;var xt=Tt.stride,jn=0,er=0,pn=0,ur=0;Vn.length===1?(jn=Vn[0],er=1,pn=xt[0],ur=0):Vn.length===2?(jn=Vn[0],er=Vn[1],pn=xt[0],ur=xt[1]):ie.raise("invalid shape");var Gn=Array.isArray(Tt.data)?At.dtype:fo(Tt.data),nr=go.allocType(Gn,jn*er);qa(nr,Tt.data,jn,er,pn,ur,Tt.offset),Mt(nr,kn),go.freeType(nr)}else ie.raise("invalid data for buffer subdata");return rn}return It||rn(Ke),rn._reglType="buffer",rn._buffer=At,rn.subdata=Wt,Oe.profile&&(rn.stats=At.stats),rn.destroy=function(){Ut(At)},rn}function Et(){ui(Qe).forEach(function(Ke){Ke.buffer=V.createBuffer(),V.bindBuffer(Ke.type,Ke.buffer),V.bufferData(Ke.type,Ke.persistentData||Ke.byteLength,Ke.usage)})}return Oe.profile&&(le.getTotalBufferSize=function(){var Ke=0;return Object.keys(Qe).forEach(function(st){Ke+=Qe[st].stats.size}),Ke}),{create:Ct,createStream:Lt,destroyStream:Nt,clear:function(){ui(Qe).forEach(Ut),Rt.forEach(Ut)},getBuffer:function(Ke){return Ke&&Ke._buffer instanceof dt?Ke._buffer:null},restore:Et,_initBuffer:Ht}}var Nc=0,ap=0,Cc=1,Ho=1,Gu=4,Ya=4,ni={points:Nc,point:ap,lines:Cc,line:Ho,triangles:Gu,triangle:Ya,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Dc=0,ua=1,wa=4,Ls=5120,Wi=5121,ea=5122,ci=5123,sa=5124,Ii=5125,ft=34963,$t=35040,Bt=35044;function mn(V,le,Oe,rt){var ht={},Qe=0,dt={uint8:Wi,uint16:ci};le.oes_element_index_uint&&(dt.uint32=Ii);function Rt(Et){this.id=Qe++,ht[this.id]=this,this.buffer=Et,this.primType=wa,this.vertCount=0,this.type=0}Rt.prototype.bind=function(){this.buffer.bind()};var Lt=[];function Nt(Et){var Ke=Lt.pop();return Ke||(Ke=new Rt(Oe.create(null,ft,!0,!1)._buffer)),Ht(Ke,Et,$t,-1,-1,0,0),Ke}function ct(Et){Lt.push(Et)}function Ht(Et,Ke,st,It,Jt,At,rn){Et.buffer.bind();var Mt;if(Ke){var Wt=rn;!rn&&(!n(Ke)||$i(Ke)&&!n(Ke.data))&&(Wt=le.oes_element_index_uint?Ii:ci),Oe._initBuffer(Et.buffer,Ke,st,Wt,3)}else V.bufferData(ft,At,st),Et.buffer.dtype=Mt||Wi,Et.buffer.usage=st,Et.buffer.dimension=3,Et.buffer.byteLength=At;if(Mt=rn,!rn){switch(Et.buffer.dtype){case Wi:case Ls:Mt=Wi;break;case ci:case ea:Mt=ci;break;case Ii:case sa:Mt=Ii;break;default:ie.raise("unsupported type for element array")}Et.buffer.dtype=Mt}Et.type=Mt,ie(Mt!==Ii||!!le.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Tt=Jt;Tt<0&&(Tt=Et.buffer.byteLength,Mt===ci?Tt>>=1:Mt===Ii&&(Tt>>=2)),Et.vertCount=Tt;var qt=It;if(It<0){qt=wa;var kn=Et.buffer.dimension;kn===1&&(qt=Dc),kn===2&&(qt=ua),kn===3&&(qt=wa)}Et.primType=qt}function Ut(Et){rt.elementsCount--,ie(Et.buffer!==null,"must not double destroy elements"),delete ht[Et.id],Et.buffer.destroy(),Et.buffer=null}function Ct(Et,Ke){var st=Oe.create(null,ft,!0),It=new Rt(st._buffer);rt.elementsCount++;function Jt(At){if(!At)st(),It.primType=wa,It.vertCount=0,It.type=Wi;else if(typeof At=="number")st(At),It.primType=wa,It.vertCount=At|0,It.type=Wi;else{var rn=null,Mt=Bt,Wt=-1,Tt=-1,qt=0,kn=0;Array.isArray(At)||n(At)||$i(At)?rn=At:(ie.type(At,"object","invalid arguments for elements"),"data"in At&&(rn=At.data,ie(Array.isArray(rn)||n(rn)||$i(rn),"invalid data for element buffer")),"usage"in At&&(ie.parameter(At.usage,_a,"invalid element buffer usage"),Mt=_a[At.usage]),"primitive"in At&&(ie.parameter(At.primitive,ni,"invalid element buffer primitive"),Wt=ni[At.primitive]),"count"in At&&(ie(typeof At.count=="number"&&At.count>=0,"invalid vertex count for elements"),Tt=At.count|0),"type"in At&&(ie.parameter(At.type,dt,"invalid buffer type"),kn=dt[At.type]),"length"in At?qt=At.length|0:(qt=Tt,kn===ci||kn===ea?qt*=2:(kn===Ii||kn===sa)&&(qt*=4))),Ht(It,rn,Mt,Wt,Tt,qt,kn)}return Jt}return Jt(Et),Jt._reglType="elements",Jt._elements=It,Jt.subdata=function(At,rn){return st.subdata(At,rn),Jt},Jt.destroy=function(){Ut(It)},Jt}return{create:Ct,createStream:Nt,destroyStream:ct,getElements:function(Et){return typeof Et=="function"&&Et._elements instanceof Rt?Et._elements:null},clear:function(){ui(ht).forEach(Ut)}}}var fr=new Float32Array(1),Rr=new Uint32Array(fr.buffer),po=5123;function k(V){for(var le=go.allocType(po,V.length),Oe=0;Oe<V.length;++Oe)if(isNaN(V[Oe]))le[Oe]=65535;else if(V[Oe]===1/0)le[Oe]=31744;else if(V[Oe]===-1/0)le[Oe]=64512;else{fr[0]=V[Oe];var rt=Rr[0],ht=rt>>>31<<15,Qe=(rt<<1>>>24)-127,dt=rt>>13&1023;if(Qe<-24)le[Oe]=ht;else if(Qe<-14){var Rt=-14-Qe;le[Oe]=ht+(dt+1024>>Rt)}else Qe>15?le[Oe]=ht+31744:le[Oe]=ht+(Qe+15<<10)+dt}return le}function R(V){return Array.isArray(V)||n(V)}var W=function(V){return!(V&V-1)&&!!V},oe=34467,be=3553,qe=34067,mt=34069,zt=6408,En=6406,br=6407,dn=6409,Hr=6410,mr=32854,Lr=32855,ca=36194,xo=32819,ta=32820,_l=33635,bl=34042,$l=6402,fu=34041,Ka=35904,du=35906,ri=36193,Bl=33776,wl=33777,Za=33778,Ja=33779,Wu=35986,gh=35987,_h=34798,lp=35840,jc=35841,zu=35842,Zf=35843,bh=36196,Hu=5121,Ic=5123,Jf=5125,$o=5126,zi=10242,Qf=10243,ed=10497,Fs=33071,Zv=33648,$s=10240,Bs=10241,Lc=9728,Xu=9729,pu=9984,Us=9985,Fc=9986,hu=9987,Jv=33170,$c=4352,Qv=4353,em=4354,wh=34046,td=3317,Li=37440,Eh=37441,ae=37443,qu=37444,Ul=33984,La=[pu,Fc,Us,hu],Nr=[0,dn,Hr,br,zt],Ai={};Ai[dn]=Ai[En]=Ai[$l]=1,Ai[fu]=Ai[Hr]=2,Ai[br]=Ai[Ka]=3,Ai[zt]=Ai[du]=4;function Br(V){return"[object "+V+"]"}var Qa=Br("HTMLCanvasElement"),Vl=Br("OffscreenCanvas"),Ea=Br("CanvasRenderingContext2D"),nd=Br("ImageBitmap"),rd=Br("HTMLImageElement"),up=Br("HTMLVideoElement"),Oh=Object.keys(Ji).concat([Qa,Vl,Ea,nd,rd,up]),Gl=[];Gl[Hu]=1,Gl[$o]=4,Gl[ri]=2,Gl[Ic]=2,Gl[Jf]=4;var Bo=[];Bo[mr]=2,Bo[Lr]=2,Bo[ca]=2,Bo[fu]=4,Bo[Bl]=.5,Bo[wl]=.5,Bo[Za]=1,Bo[Ja]=1,Bo[Wu]=.5,Bo[gh]=1,Bo[_h]=1,Bo[lp]=.5,Bo[jc]=.25,Bo[zu]=.5,Bo[Zf]=.25,Bo[bh]=.5;function Vs(V){return Array.isArray(V)&&(V.length===0||typeof V[0]=="number")}function sp(V){if(!Array.isArray(V))return!1;var le=V.length;return!(le===0||!R(V[0]))}function Wl(V){return Object.prototype.toString.call(V)}function el(V){return Wl(V)===Qa}function Bc(V){return Wl(V)===Vl}function vu(V){return Wl(V)===Ea}function Oa(V){return Wl(V)===nd}function cp(V){return Wl(V)===rd}function fp(V){return Wl(V)===up}function tl(V){if(!V)return!1;var le=Wl(V);return Oh.indexOf(le)>=0?!0:Vs(V)||sp(V)||$i(V)}function _o(V){return Ji[Object.prototype.toString.call(V)]|0}function Sh(V,le){var Oe=le.length;switch(V.type){case Hu:case Ic:case Jf:case $o:var rt=go.allocType(V.type,Oe);rt.set(le),V.data=rt;break;case ri:V.data=k(le);break;default:ie.raise("unsupported texture type, must specify a typed array")}}function dp(V,le){return go.allocType(V.type===ri?$o:V.type,le)}function Uo(V,le){V.type===ri?(V.data=k(le),go.freeType(le)):V.data=le}function Yr(V,le,Oe,rt,ht,Qe){for(var dt=V.width,Rt=V.height,Lt=V.channels,Nt=dt*Rt*Lt,ct=dp(V,Nt),Ht=0,Ut=0;Ut<Rt;++Ut)for(var Ct=0;Ct<dt;++Ct)for(var Et=0;Et<Lt;++Et)ct[Ht++]=le[Oe*Ct+rt*Ut+ht*Et+Qe];Uo(V,ct)}function oi(V,le,Oe,rt,ht,Qe){var dt;if(typeof Bo[V]<"u"?dt=Bo[V]:dt=Ai[V]*Gl[le],Qe&&(dt*=6),ht){for(var Rt=0,Lt=Oe;Lt>=1;)Rt+=dt*Lt*Lt,Lt/=2;return Rt}else return dt*Oe*rt}function Sr(V,le,Oe,rt,ht,Qe,dt){var Rt={"don't care":$c,"dont care":$c,nice:em,fast:Qv},Lt={repeat:ed,clamp:Fs,mirror:Zv},Nt={nearest:Lc,linear:Xu},ct=a({mipmap:hu,"nearest mipmap nearest":pu,"linear mipmap nearest":Us,"nearest mipmap linear":Fc,"linear mipmap linear":hu},Nt),Ht={none:0,browser:qu},Ut={uint8:Hu,rgba4:xo,rgb565:_l,"rgb5 a1":ta},Ct={alpha:En,luminance:dn,"luminance alpha":Hr,rgb:br,rgba:zt,rgba4:mr,"rgb5 a1":Lr,rgb565:ca},Et={};le.ext_srgb&&(Ct.srgb=Ka,Ct.srgba=du),le.oes_texture_float&&(Ut.float32=Ut.float=$o),le.oes_texture_half_float&&(Ut.float16=Ut["half float"]=ri),le.webgl_depth_texture&&(a(Ct,{depth:$l,"depth stencil":fu}),a(Ut,{uint16:Ic,uint32:Jf,"depth stencil":bl})),le.webgl_compressed_texture_s3tc&&a(Et,{"rgb s3tc dxt1":Bl,"rgba s3tc dxt1":wl,"rgba s3tc dxt3":Za,"rgba s3tc dxt5":Ja}),le.webgl_compressed_texture_atc&&a(Et,{"rgb atc":Wu,"rgba atc explicit alpha":gh,"rgba atc interpolated alpha":_h}),le.webgl_compressed_texture_pvrtc&&a(Et,{"rgb pvrtc 4bppv1":lp,"rgb pvrtc 2bppv1":jc,"rgba pvrtc 4bppv1":zu,"rgba pvrtc 2bppv1":Zf}),le.webgl_compressed_texture_etc1&&(Et["rgb etc1"]=bh);var Ke=Array.prototype.slice.call(V.getParameter(oe));Object.keys(Et).forEach(function(ge){var ot=Et[ge];Ke.indexOf(ot)>=0&&(Ct[ge]=ot)});var st=Object.keys(Ct);Oe.textureFormats=st;var It=[];Object.keys(Ct).forEach(function(ge){var ot=Ct[ge];It[ot]=ge});var Jt=[];Object.keys(Ut).forEach(function(ge){var ot=Ut[ge];Jt[ot]=ge});var At=[];Object.keys(Nt).forEach(function(ge){var ot=Nt[ge];At[ot]=ge});var rn=[];Object.keys(ct).forEach(function(ge){var ot=ct[ge];rn[ot]=ge});var Mt=[];Object.keys(Lt).forEach(function(ge){var ot=Lt[ge];Mt[ot]=ge});var Wt=st.reduce(function(ge,ot){var et=Ct[ot];return et===dn||et===En||et===dn||et===Hr||et===$l||et===fu||le.ext_srgb&&(et===Ka||et===du)?ge[et]=et:et===Lr||ot.indexOf("rgba")>=0?ge[et]=zt:ge[et]=br,ge},{});function Tt(){this.internalformat=zt,this.format=zt,this.type=Hu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=qu,this.width=0,this.height=0,this.channels=0}function qt(ge,ot){ge.internalformat=ot.internalformat,ge.format=ot.format,ge.type=ot.type,ge.compressed=ot.compressed,ge.premultiplyAlpha=ot.premultiplyAlpha,ge.flipY=ot.flipY,ge.unpackAlignment=ot.unpackAlignment,ge.colorSpace=ot.colorSpace,ge.width=ot.width,ge.height=ot.height,ge.channels=ot.channels}function kn(ge,ot){if(!(typeof ot!="object"||!ot)){if("premultiplyAlpha"in ot&&(ie.type(ot.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ge.premultiplyAlpha=ot.premultiplyAlpha),"flipY"in ot&&(ie.type(ot.flipY,"boolean","invalid texture flip"),ge.flipY=ot.flipY),"alignment"in ot&&(ie.oneOf(ot.alignment,[1,2,4,8],"invalid texture unpack alignment"),ge.unpackAlignment=ot.alignment),"colorSpace"in ot&&(ie.parameter(ot.colorSpace,Ht,"invalid colorSpace"),ge.colorSpace=Ht[ot.colorSpace]),"type"in ot){var et=ot.type;ie(le.oes_texture_float||!(et==="float"||et==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ie(le.oes_texture_half_float||!(et==="half float"||et==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ie(le.webgl_depth_texture||!(et==="uint16"||et==="uint32"||et==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ie.parameter(et,Ut,"invalid texture type"),ge.type=Ut[et]}var un=ge.width,dr=ge.height,he=ge.channels,re=!1;"shape"in ot?(ie(Array.isArray(ot.shape)&&ot.shape.length>=2,"shape must be an array"),un=ot.shape[0],dr=ot.shape[1],ot.shape.length===3&&(he=ot.shape[2],ie(he>0&&he<=4,"invalid number of channels"),re=!0),ie(un>=0&&un<=Oe.maxTextureSize,"invalid width"),ie(dr>=0&&dr<=Oe.maxTextureSize,"invalid height")):("radius"in ot&&(un=dr=ot.radius,ie(un>=0&&un<=Oe.maxTextureSize,"invalid radius")),"width"in ot&&(un=ot.width,ie(un>=0&&un<=Oe.maxTextureSize,"invalid width")),"height"in ot&&(dr=ot.height,ie(dr>=0&&dr<=Oe.maxTextureSize,"invalid height")),"channels"in ot&&(he=ot.channels,ie(he>0&&he<=4,"invalid number of channels"),re=!0)),ge.width=un|0,ge.height=dr|0,ge.channels=he|0;var ke=!1;if("format"in ot){var Ve=ot.format;ie(le.webgl_depth_texture||!(Ve==="depth"||Ve==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ie.parameter(Ve,Ct,"invalid texture format");var Ze=ge.internalformat=Ct[Ve];ge.format=Wt[Ze],Ve in Ut&&("type"in ot||(ge.type=Ut[Ve])),Ve in Et&&(ge.compressed=!0),ke=!0}!re&&ke?ge.channels=Ai[ge.format]:re&&!ke?ge.channels!==Nr[ge.format]&&(ge.format=ge.internalformat=Nr[ge.channels]):ke&&re&&ie(ge.channels===Ai[ge.format],"number of channels inconsistent with specified format")}}function Vn(ge){V.pixelStorei(Li,ge.flipY),V.pixelStorei(Eh,ge.premultiplyAlpha),V.pixelStorei(ae,ge.colorSpace),V.pixelStorei(td,ge.unpackAlignment)}function Dt(){Tt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function kt(ge,ot){var et=null;if(tl(ot)?et=ot:ot&&(ie.type(ot,"object","invalid pixel data type"),kn(ge,ot),"x"in ot&&(ge.xOffset=ot.x|0),"y"in ot&&(ge.yOffset=ot.y|0),tl(ot.data)&&(et=ot.data)),ie(!ge.compressed||et instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ot.copy){ie(!et,"can not specify copy and data field for the same texture");var un=ht.viewportWidth,dr=ht.viewportHeight;ge.width=ge.width||un-ge.xOffset,ge.height=ge.height||dr-ge.yOffset,ge.needsCopy=!0,ie(ge.xOffset>=0&&ge.xOffset<un&&ge.yOffset>=0&&ge.yOffset<dr&&ge.width>0&&ge.width<=un&&ge.height>0&&ge.height<=dr,"copy texture read out of bounds")}else if(!et)ge.width=ge.width||1,ge.height=ge.height||1,ge.channels=ge.channels||4;else if(n(et))ge.channels=ge.channels||4,ge.data=et,!("type"in ot)&&ge.type===Hu&&(ge.type=_o(et));else if(Vs(et))ge.channels=ge.channels||4,Sh(ge,et),ge.alignment=1,ge.needsFree=!0;else if($i(et)){var he=et.data;!Array.isArray(he)&&ge.type===Hu&&(ge.type=_o(he));var re=et.shape,ke=et.stride,Ve,Ze,De,Pe,Le,pe;re.length===3?(De=re[2],pe=ke[2]):(ie(re.length===2,"invalid ndarray pixel data, must be 2 or 3D"),De=1,pe=1),Ve=re[0],Ze=re[1],Pe=ke[0],Le=ke[1],ge.alignment=1,ge.width=Ve,ge.height=Ze,ge.channels=De,ge.format=ge.internalformat=Nr[De],ge.needsFree=!0,Yr(ge,he,Pe,Le,pe,et.offset)}else if(el(et)||Bc(et)||vu(et))el(et)||Bc(et)?ge.element=et:ge.element=et.canvas,ge.width=ge.element.width,ge.height=ge.element.height,ge.channels=4;else if(Oa(et))ge.element=et,ge.width=et.width,ge.height=et.height,ge.channels=4;else if(cp(et))ge.element=et,ge.width=et.naturalWidth,ge.height=et.naturalHeight,ge.channels=4;else if(fp(et))ge.element=et,ge.width=et.videoWidth,ge.height=et.videoHeight,ge.channels=4;else if(sp(et)){var Te=ge.width||et[0].length,fe=ge.height||et.length,Ge=ge.channels;R(et[0][0])?Ge=Ge||et[0][0].length:Ge=Ge||1;for(var We=ga.shape(et),p=1,y=0;y<We.length;++y)p*=We[y];var E=dp(ge,p);ga.flatten(et,We,"",E),Uo(ge,E),ge.alignment=1,ge.width=Te,ge.height=fe,ge.channels=Ge,ge.format=ge.internalformat=Nr[Ge],ge.needsFree=!0}ge.type===$o?ie(Oe.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ge.type===ri&&ie(Oe.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function xt(ge,ot,et){var un=ge.element,dr=ge.data,he=ge.internalformat,re=ge.format,ke=ge.type,Ve=ge.width,Ze=ge.height;Vn(ge),un?V.texImage2D(ot,et,re,re,ke,un):ge.compressed?V.compressedTexImage2D(ot,et,he,Ve,Ze,0,dr):ge.needsCopy?(rt(),V.copyTexImage2D(ot,et,re,ge.xOffset,ge.yOffset,Ve,Ze,0)):V.texImage2D(ot,et,re,Ve,Ze,0,re,ke,dr||null)}function jn(ge,ot,et,un,dr){var he=ge.element,re=ge.data,ke=ge.internalformat,Ve=ge.format,Ze=ge.type,De=ge.width,Pe=ge.height;Vn(ge),he?V.texSubImage2D(ot,dr,et,un,Ve,Ze,he):ge.compressed?V.compressedTexSubImage2D(ot,dr,et,un,ke,De,Pe,re):ge.needsCopy?(rt(),V.copyTexSubImage2D(ot,dr,et,un,ge.xOffset,ge.yOffset,De,Pe)):V.texSubImage2D(ot,dr,et,un,De,Pe,Ve,Ze,re)}var er=[];function pn(){return er.pop()||new Dt}function ur(ge){ge.needsFree&&go.freeType(ge.data),Dt.call(ge),er.push(ge)}function Gn(){Tt.call(this),this.genMipmaps=!1,this.mipmapHint=$c,this.mipmask=0,this.images=Array(16)}function nr(ge,ot,et){var un=ge.images[0]=pn();ge.mipmask=1,un.width=ge.width=ot,un.height=ge.height=et,un.channels=ge.channels=4}function _r(ge,ot){var et=null;if(tl(ot))et=ge.images[0]=pn(),qt(et,ge),kt(et,ot),ge.mipmask=1;else if(kn(ge,ot),Array.isArray(ot.mipmap))for(var un=ot.mipmap,dr=0;dr<un.length;++dr)et=ge.images[dr]=pn(),qt(et,ge),et.width>>=dr,et.height>>=dr,kt(et,un[dr]),ge.mipmask|=1<<dr;else et=ge.images[0]=pn(),qt(et,ge),kt(et,ot),ge.mipmask=1;qt(ge,ge.images[0]),ge.compressed&&(ge.internalformat===Bl||ge.internalformat===wl||ge.internalformat===Za||ge.internalformat===Ja)&&ie(ge.width%4===0&&ge.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Do(ge,ot){for(var et=ge.images,un=0;un<et.length;++un){if(!et[un])return;xt(et[un],ot,un)}}var ko=[];function tr(){var ge=ko.pop()||new Gn;Tt.call(ge),ge.mipmask=0;for(var ot=0;ot<16;++ot)ge.images[ot]=null;return ge}function Xo(ge){for(var ot=ge.images,et=0;et<ot.length;++et)ot[et]&&ur(ot[et]),ot[et]=null;ko.push(ge)}function ao(){this.minFilter=Lc,this.magFilter=Lc,this.wrapS=Fs,this.wrapT=Fs,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=$c}function jo(ge,ot){if("min"in ot){var et=ot.min;ie.parameter(et,ct),ge.minFilter=ct[et],La.indexOf(ge.minFilter)>=0&&!("faces"in ot)&&(ge.genMipmaps=!0)}if("mag"in ot){var un=ot.mag;ie.parameter(un,Nt),ge.magFilter=Nt[un]}var dr=ge.wrapS,he=ge.wrapT;if("wrap"in ot){var re=ot.wrap;typeof re=="string"?(ie.parameter(re,Lt),dr=he=Lt[re]):Array.isArray(re)&&(ie.parameter(re[0],Lt),ie.parameter(re[1],Lt),dr=Lt[re[0]],he=Lt[re[1]])}else{if("wrapS"in ot){var ke=ot.wrapS;ie.parameter(ke,Lt),dr=Lt[ke]}if("wrapT"in ot){var Ve=ot.wrapT;ie.parameter(Ve,Lt),he=Lt[Ve]}}if(ge.wrapS=dr,ge.wrapT=he,"anisotropic"in ot){var Ze=ot.anisotropic;ie(typeof Ze=="number"&&Ze>=1&&Ze<=Oe.maxAnisotropic,"aniso samples must be between 1 and "),ge.anisotropic=ot.anisotropic}if("mipmap"in ot){var De=!1;switch(typeof ot.mipmap){case"string":ie.parameter(ot.mipmap,Rt,"invalid mipmap hint"),ge.mipmapHint=Rt[ot.mipmap],ge.genMipmaps=!0,De=!0;break;case"boolean":De=ge.genMipmaps=ot.mipmap;break;case"object":ie(Array.isArray(ot.mipmap),"invalid mipmap type"),ge.genMipmaps=!1,De=!0;break;default:ie.raise("invalid mipmap type")}De&&!("min"in ot)&&(ge.minFilter=pu)}}function Wo(ge,ot){V.texParameteri(ot,Bs,ge.minFilter),V.texParameteri(ot,$s,ge.magFilter),V.texParameteri(ot,zi,ge.wrapS),V.texParameteri(ot,Qf,ge.wrapT),le.ext_texture_filter_anisotropic&&V.texParameteri(ot,wh,ge.anisotropic),ge.genMipmaps&&(V.hint(Jv,ge.mipmapHint),V.generateMipmap(ot))}var ii=0,di={},qo=Oe.maxTextureUnits,ho=Array(qo).map(function(){return null});function Yn(ge){Tt.call(this),this.mipmask=0,this.internalformat=zt,this.id=ii++,this.refCount=1,this.target=ge,this.texture=V.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ao,dt.profile&&(this.stats={size:0})}function pi(ge){V.activeTexture(Ul),V.bindTexture(ge.target,ge.texture)}function Ar(){var ge=ho[0];ge?V.bindTexture(ge.target,ge.texture):V.bindTexture(be,null)}function Dn(ge){var ot=ge.texture;ie(ot,"must not double destroy texture");var et=ge.unit,un=ge.target;et>=0&&(V.activeTexture(Ul+et),V.bindTexture(un,null),ho[et]=null),V.deleteTexture(ot),ge.texture=null,ge.params=null,ge.pixels=null,ge.refCount=0,delete di[ge.id],Qe.textureCount--}a(Yn.prototype,{bind:function(){var ge=this;ge.bindCount+=1;var ot=ge.unit;if(ot<0){for(var et=0;et<qo;++et){var un=ho[et];if(un){if(un.bindCount>0)continue;un.unit=-1}ho[et]=ge,ot=et;break}ot>=qo&&ie.raise("insufficient number of texture units"),dt.profile&&Qe.maxTextureUnits<ot+1&&(Qe.maxTextureUnits=ot+1),ge.unit=ot,V.activeTexture(Ul+ot),V.bindTexture(ge.target,ge.texture)}return ot},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Dn(this)}});function hr(ge,ot){var et=new Yn(be);di[et.id]=et,Qe.textureCount++;function un(re,ke){var Ve=et.texInfo;ao.call(Ve);var Ze=tr();return typeof re=="number"?typeof ke=="number"?nr(Ze,re|0,ke|0):nr(Ze,re|0,re|0):re?(ie.type(re,"object","invalid arguments to regl.texture"),jo(Ve,re),_r(Ze,re)):nr(Ze,1,1),Ve.genMipmaps&&(Ze.mipmask=(Ze.width<<1)-1),et.mipmask=Ze.mipmask,qt(et,Ze),ie.texture2D(Ve,Ze,Oe),et.internalformat=Ze.internalformat,un.width=Ze.width,un.height=Ze.height,pi(et),Do(Ze,be),Wo(Ve,be),Ar(),Xo(Ze),dt.profile&&(et.stats.size=oi(et.internalformat,et.type,Ze.width,Ze.height,Ve.genMipmaps,!1)),un.format=It[et.internalformat],un.type=Jt[et.type],un.mag=At[Ve.magFilter],un.min=rn[Ve.minFilter],un.wrapS=Mt[Ve.wrapS],un.wrapT=Mt[Ve.wrapT],un}function dr(re,ke,Ve,Ze){ie(!!re,"must specify image data");var De=ke|0,Pe=Ve|0,Le=Ze|0,pe=pn();return qt(pe,et),pe.width=0,pe.height=0,kt(pe,re),pe.width=pe.width||(et.width>>Le)-De,pe.height=pe.height||(et.height>>Le)-Pe,ie(et.type===pe.type&&et.format===pe.format&&et.internalformat===pe.internalformat,"incompatible format for texture.subimage"),ie(De>=0&&Pe>=0&&De+pe.width<=et.width&&Pe+pe.height<=et.height,"texture.subimage write out of bounds"),ie(et.mipmask&1<<Le,"missing mipmap data"),ie(pe.data||pe.element||pe.needsCopy,"missing image data"),pi(et),jn(pe,be,De,Pe,Le),Ar(),ur(pe),un}function he(re,ke){var Ve=re|0,Ze=ke|0||Ve;if(Ve===et.width&&Ze===et.height)return un;un.width=et.width=Ve,un.height=et.height=Ze,pi(et);for(var De=0;et.mipmask>>De;++De){var Pe=Ve>>De,Le=Ze>>De;if(!Pe||!Le)break;V.texImage2D(be,De,et.format,Pe,Le,0,et.format,et.type,null)}return Ar(),dt.profile&&(et.stats.size=oi(et.internalformat,et.type,Ve,Ze,!1,!1)),un}return un(ge,ot),un.subimage=dr,un.resize=he,un._reglType="texture2d",un._texture=et,dt.profile&&(un.stats=et.stats),un.destroy=function(){et.decRef()},un}function Kn(ge,ot,et,un,dr,he){var re=new Yn(qe);di[re.id]=re,Qe.cubeCount++;var ke=new Array(6);function Ve(Pe,Le,pe,Te,fe,Ge){var We,p=re.texInfo;for(ao.call(p),We=0;We<6;++We)ke[We]=tr();if(typeof Pe=="number"||!Pe){var y=Pe|0||1;for(We=0;We<6;++We)nr(ke[We],y,y)}else if(typeof Pe=="object")if(Le)_r(ke[0],Pe),_r(ke[1],Le),_r(ke[2],pe),_r(ke[3],Te),_r(ke[4],fe),_r(ke[5],Ge);else if(jo(p,Pe),kn(re,Pe),"faces"in Pe){var E=Pe.faces;for(ie(Array.isArray(E)&&E.length===6,"cube faces must be a length 6 array"),We=0;We<6;++We)ie(typeof E[We]=="object"&&!!E[We],"invalid input for cube map face"),qt(ke[We],re),_r(ke[We],E[We])}else for(We=0;We<6;++We)_r(ke[We],Pe);else ie.raise("invalid arguments to cube map");for(qt(re,ke[0]),Oe.npotTextureCube||ie(W(re.width)&&W(re.height),"your browser does not support non power or two texture dimensions"),p.genMipmaps?re.mipmask=(ke[0].width<<1)-1:re.mipmask=ke[0].mipmask,ie.textureCube(re,p,ke,Oe),re.internalformat=ke[0].internalformat,Ve.width=ke[0].width,Ve.height=ke[0].height,pi(re),We=0;We<6;++We)Do(ke[We],mt+We);for(Wo(p,qe),Ar(),dt.profile&&(re.stats.size=oi(re.internalformat,re.type,Ve.width,Ve.height,p.genMipmaps,!0)),Ve.format=It[re.internalformat],Ve.type=Jt[re.type],Ve.mag=At[p.magFilter],Ve.min=rn[p.minFilter],Ve.wrapS=Mt[p.wrapS],Ve.wrapT=Mt[p.wrapT],We=0;We<6;++We)Xo(ke[We]);return Ve}function Ze(Pe,Le,pe,Te,fe){ie(!!Le,"must specify image data"),ie(typeof Pe=="number"&&Pe===(Pe|0)&&Pe>=0&&Pe<6,"invalid face");var Ge=pe|0,We=Te|0,p=fe|0,y=pn();return qt(y,re),y.width=0,y.height=0,kt(y,Le),y.width=y.width||(re.width>>p)-Ge,y.height=y.height||(re.height>>p)-We,ie(re.type===y.type&&re.format===y.format&&re.internalformat===y.internalformat,"incompatible format for texture.subimage"),ie(Ge>=0&&We>=0&&Ge+y.width<=re.width&&We+y.height<=re.height,"texture.subimage write out of bounds"),ie(re.mipmask&1<<p,"missing mipmap data"),ie(y.data||y.element||y.needsCopy,"missing image data"),pi(re),jn(y,mt+Pe,Ge,We,p),Ar(),ur(y),Ve}function De(Pe){var Le=Pe|0;if(Le!==re.width){Ve.width=re.width=Le,Ve.height=re.height=Le,pi(re);for(var pe=0;pe<6;++pe)for(var Te=0;re.mipmask>>Te;++Te)V.texImage2D(mt+pe,Te,re.format,Le>>Te,Le>>Te,0,re.format,re.type,null);return Ar(),dt.profile&&(re.stats.size=oi(re.internalformat,re.type,Ve.width,Ve.height,!1,!0)),Ve}}return Ve(ge,ot,et,un,dr,he),Ve.subimage=Ze,Ve.resize=De,Ve._reglType="textureCube",Ve._texture=re,dt.profile&&(Ve.stats=re.stats),Ve.destroy=function(){re.decRef()},Ve}function vo(){for(var ge=0;ge<qo;++ge)V.activeTexture(Ul+ge),V.bindTexture(be,null),ho[ge]=null;ui(di).forEach(Dn),Qe.cubeCount=0,Qe.textureCount=0}dt.profile&&(Qe.getTotalTextureSize=function(){var ge=0;return Object.keys(di).forEach(function(ot){ge+=di[ot].stats.size}),ge});function Ml(){for(var ge=0;ge<qo;++ge){var ot=ho[ge];ot&&(ot.bindCount=0,ot.unit=-1,ho[ge]=null)}ui(di).forEach(function(et){et.texture=V.createTexture(),V.bindTexture(et.target,et.texture);for(var un=0;un<32;++un)if((et.mipmask&1<<un)!==0)if(et.target===be)V.texImage2D(be,un,et.internalformat,et.width>>un,et.height>>un,0,et.internalformat,et.type,null);else for(var dr=0;dr<6;++dr)V.texImage2D(mt+dr,un,et.internalformat,et.width>>un,et.height>>un,0,et.internalformat,et.type,null);Wo(et.texInfo,et.target)})}function wo(){for(var ge=0;ge<qo;++ge){var ot=ho[ge];ot&&(ot.bindCount=0,ot.unit=-1,ho[ge]=null),V.activeTexture(Ul+ge),V.bindTexture(be,null),V.bindTexture(qe,null)}}return{create2D:hr,createCube:Kn,clear:vo,getTexture:function(ge){return null},restore:Ml,refresh:wo}}var so=36161,Cn=32854,co=32855,Uc=36194,El=33189,od=36168,Ao=34041,Po=35907,pp=34836,hp=34842,Vc=34843,Hi=[];Hi[Cn]=2,Hi[co]=2,Hi[Uc]=2,Hi[El]=2,Hi[od]=1,Hi[Ao]=4,Hi[Po]=4,Hi[pp]=16,Hi[hp]=8,Hi[Vc]=6;function id(V,le,Oe){return Hi[V]*le*Oe}var Gs=function(V,le,Oe,rt,ht){var Qe={rgba4:Cn,rgb565:Uc,"rgb5 a1":co,depth:El,stencil:od,"depth stencil":Ao};le.ext_srgb&&(Qe.srgba=Po),le.ext_color_buffer_half_float&&(Qe.rgba16f=hp,Qe.rgb16f=Vc),le.webgl_color_buffer_float&&(Qe.rgba32f=pp);var dt=[];Object.keys(Qe).forEach(function(Ct){var Et=Qe[Ct];dt[Et]=Ct});var Rt=0,Lt={};function Nt(Ct){this.id=Rt++,this.refCount=1,this.renderbuffer=Ct,this.format=Cn,this.width=0,this.height=0,ht.profile&&(this.stats={size:0})}Nt.prototype.decRef=function(){--this.refCount<=0&&ct(this)};function ct(Ct){var Et=Ct.renderbuffer;ie(Et,"must not double destroy renderbuffer"),V.bindRenderbuffer(so,null),V.deleteRenderbuffer(Et),Ct.renderbuffer=null,Ct.refCount=0,delete Lt[Ct.id],rt.renderbufferCount--}function Ht(Ct,Et){var Ke=new Nt(V.createRenderbuffer());Lt[Ke.id]=Ke,rt.renderbufferCount++;function st(Jt,At){var rn=0,Mt=0,Wt=Cn;if(typeof Jt=="object"&&Jt){var Tt=Jt;if("shape"in Tt){var qt=Tt.shape;ie(Array.isArray(qt)&&qt.length>=2,"invalid renderbuffer shape"),rn=qt[0]|0,Mt=qt[1]|0}else"radius"in Tt&&(rn=Mt=Tt.radius|0),"width"in Tt&&(rn=Tt.width|0),"height"in Tt&&(Mt=Tt.height|0);"format"in Tt&&(ie.parameter(Tt.format,Qe,"invalid renderbuffer format"),Wt=Qe[Tt.format])}else typeof Jt=="number"?(rn=Jt|0,typeof At=="number"?Mt=At|0:Mt=rn):Jt?ie.raise("invalid arguments to renderbuffer constructor"):rn=Mt=1;if(ie(rn>0&&Mt>0&&rn<=Oe.maxRenderbufferSize&&Mt<=Oe.maxRenderbufferSize,"invalid renderbuffer size"),!(rn===Ke.width&&Mt===Ke.height&&Wt===Ke.format))return st.width=Ke.width=rn,st.height=Ke.height=Mt,Ke.format=Wt,V.bindRenderbuffer(so,Ke.renderbuffer),V.renderbufferStorage(so,Wt,rn,Mt),ie(V.getError()===0,"invalid render buffer format"),ht.profile&&(Ke.stats.size=id(Ke.format,Ke.width,Ke.height)),st.format=dt[Ke.format],st}function It(Jt,At){var rn=Jt|0,Mt=At|0||rn;return rn===Ke.width&&Mt===Ke.height||(ie(rn>0&&Mt>0&&rn<=Oe.maxRenderbufferSize&&Mt<=Oe.maxRenderbufferSize,"invalid renderbuffer size"),st.width=Ke.width=rn,st.height=Ke.height=Mt,V.bindRenderbuffer(so,Ke.renderbuffer),V.renderbufferStorage(so,Ke.format,rn,Mt),ie(V.getError()===0,"invalid render buffer format"),ht.profile&&(Ke.stats.size=id(Ke.format,Ke.width,Ke.height))),st}return st(Ct,Et),st.resize=It,st._reglType="renderbuffer",st._renderbuffer=Ke,ht.profile&&(st.stats=Ke.stats),st.destroy=function(){Ke.decRef()},st}ht.profile&&(rt.getTotalRenderbufferSize=function(){var Ct=0;return Object.keys(Lt).forEach(function(Et){Ct+=Lt[Et].stats.size}),Ct});function Ut(){ui(Lt).forEach(function(Ct){Ct.renderbuffer=V.createRenderbuffer(),V.bindRenderbuffer(so,Ct.renderbuffer),V.renderbufferStorage(so,Ct.format,Ct.width,Ct.height)}),V.bindRenderbuffer(so,null)}return{create:Ht,clear:function(){ui(Lt).forEach(ct)},restore:Ut}},Fa=36160,mu=36161,zl=3553,$a=34069,xh=36064,Ol=36096,Sa=36128,vp=33306,mp=36053,ad=36054,Ah=36055,Th=36057,Mh=36061,ld=36193,yp=5121,gp=5126,Gc=6407,xr=6408,tm=6402,_p=[Gc,xr],Yu=[];Yu[xr]=4,Yu[Gc]=3;var Wc=[];Wc[yp]=1,Wc[gp]=4,Wc[ld]=2;var nm=32854,kh=32855,xa=36194,rm=33189,zc=36168,ud=34041,bp=35907,Ph=34836,fa=34842,yu=34843,sd=[nm,kh,xa,bp,fa,yu,Ph],Ku={};Ku[mp]="complete",Ku[ad]="incomplete attachment",Ku[Th]="incomplete dimensions",Ku[Ah]="incomplete, missing attachment",Ku[Mh]="unsupported";function cd(V,le,Oe,rt,ht,Qe){var dt={cur:null,next:null,dirty:!1,setFBO:null},Rt=["rgba"],Lt=["rgba4","rgb565","rgb5 a1"];le.ext_srgb&&Lt.push("srgba"),le.ext_color_buffer_half_float&&Lt.push("rgba16f","rgb16f"),le.webgl_color_buffer_float&&Lt.push("rgba32f");var Nt=["uint8"];le.oes_texture_half_float&&Nt.push("half float","float16"),le.oes_texture_float&&Nt.push("float","float32");function ct(Dt,kt,xt){this.target=Dt,this.texture=kt,this.renderbuffer=xt;var jn=0,er=0;kt?(jn=kt.width,er=kt.height):xt&&(jn=xt.width,er=xt.height),this.width=jn,this.height=er}function Ht(Dt){Dt&&(Dt.texture&&Dt.texture._texture.decRef(),Dt.renderbuffer&&Dt.renderbuffer._renderbuffer.decRef())}function Ut(Dt,kt,xt){if(Dt)if(Dt.texture){var jn=Dt.texture._texture,er=Math.max(1,jn.width),pn=Math.max(1,jn.height);ie(er===kt&&pn===xt,"inconsistent width/height for supplied texture"),jn.refCount+=1}else{var ur=Dt.renderbuffer._renderbuffer;ie(ur.width===kt&&ur.height===xt,"inconsistent width/height for renderbuffer"),ur.refCount+=1}}function Ct(Dt,kt){kt&&(kt.texture?V.framebufferTexture2D(Fa,Dt,kt.target,kt.texture._texture.texture,0):V.framebufferRenderbuffer(Fa,Dt,mu,kt.renderbuffer._renderbuffer.renderbuffer))}function Et(Dt){var kt=zl,xt=null,jn=null,er=Dt;typeof Dt=="object"&&(er=Dt.data,"target"in Dt&&(kt=Dt.target|0)),ie.type(er,"function","invalid attachment data");var pn=er._reglType;return pn==="texture2d"?(xt=er,ie(kt===zl)):pn==="textureCube"?(xt=er,ie(kt>=$a&&kt<$a+6,"invalid cube map target")):pn==="renderbuffer"?(jn=er,kt=mu):ie.raise("invalid regl object for attachment"),new ct(kt,xt,jn)}function Ke(Dt,kt,xt,jn,er){if(xt){var pn=rt.create2D({width:Dt,height:kt,format:jn,type:er});return pn._texture.refCount=0,new ct(zl,pn,null)}else{var ur=ht.create({width:Dt,height:kt,format:jn});return ur._renderbuffer.refCount=0,new ct(mu,null,ur)}}function st(Dt){return Dt&&(Dt.texture||Dt.renderbuffer)}function It(Dt,kt,xt){Dt&&(Dt.texture?Dt.texture.resize(kt,xt):Dt.renderbuffer&&Dt.renderbuffer.resize(kt,xt),Dt.width=kt,Dt.height=xt)}var Jt=0,At={};function rn(){this.id=Jt++,At[this.id]=this,this.framebuffer=V.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Mt(Dt){Dt.colorAttachments.forEach(Ht),Ht(Dt.depthAttachment),Ht(Dt.stencilAttachment),Ht(Dt.depthStencilAttachment)}function Wt(Dt){var kt=Dt.framebuffer;ie(kt,"must not double destroy framebuffer"),V.deleteFramebuffer(kt),Dt.framebuffer=null,Qe.framebufferCount--,delete At[Dt.id]}function Tt(Dt){var kt;V.bindFramebuffer(Fa,Dt.framebuffer);var xt=Dt.colorAttachments;for(kt=0;kt<xt.length;++kt)Ct(xh+kt,xt[kt]);for(kt=xt.length;kt<Oe.maxColorAttachments;++kt)V.framebufferTexture2D(Fa,xh+kt,zl,null,0);V.framebufferTexture2D(Fa,vp,zl,null,0),V.framebufferTexture2D(Fa,Ol,zl,null,0),V.framebufferTexture2D(Fa,Sa,zl,null,0),Ct(Ol,Dt.depthAttachment),Ct(Sa,Dt.stencilAttachment),Ct(vp,Dt.depthStencilAttachment);var jn=V.checkFramebufferStatus(Fa);!V.isContextLost()&&jn!==mp&&ie.raise("framebuffer configuration not supported, status = "+Ku[jn]),V.bindFramebuffer(Fa,dt.next?dt.next.framebuffer:null),dt.cur=dt.next,V.getError()}function qt(Dt,kt){var xt=new rn;Qe.framebufferCount++;function jn(pn,ur){var Gn;ie(dt.next!==xt,"can not update framebuffer which is currently in use");var nr=0,_r=0,Do=!0,ko=!0,tr=null,Xo=!0,ao="rgba",jo="uint8",Wo=1,ii=null,di=null,qo=null,ho=!1;if(typeof pn=="number")nr=pn|0,_r=ur|0||nr;else if(!pn)nr=_r=1;else{ie.type(pn,"object","invalid arguments for framebuffer");var Yn=pn;if("shape"in Yn){var pi=Yn.shape;ie(Array.isArray(pi)&&pi.length>=2,"invalid shape for framebuffer"),nr=pi[0],_r=pi[1]}else"radius"in Yn&&(nr=_r=Yn.radius),"width"in Yn&&(nr=Yn.width),"height"in Yn&&(_r=Yn.height);("color"in Yn||"colors"in Yn)&&(tr=Yn.color||Yn.colors,Array.isArray(tr)&&ie(tr.length===1||le.webgl_draw_buffers,"multiple render targets not supported")),tr||("colorCount"in Yn&&(Wo=Yn.colorCount|0,ie(Wo>0,"invalid color buffer count")),"colorTexture"in Yn&&(Xo=!!Yn.colorTexture,ao="rgba4"),"colorType"in Yn&&(jo=Yn.colorType,Xo?(ie(le.oes_texture_float||!(jo==="float"||jo==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ie(le.oes_texture_half_float||!(jo==="half float"||jo==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):jo==="half float"||jo==="float16"?(ie(le.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),ao="rgba16f"):(jo==="float"||jo==="float32")&&(ie(le.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),ao="rgba32f"),ie.oneOf(jo,Nt,"invalid color type")),"colorFormat"in Yn&&(ao=Yn.colorFormat,Rt.indexOf(ao)>=0?Xo=!0:Lt.indexOf(ao)>=0?Xo=!1:Xo?ie.oneOf(Yn.colorFormat,Rt,"invalid color format for texture"):ie.oneOf(Yn.colorFormat,Lt,"invalid color format for renderbuffer"))),("depthTexture"in Yn||"depthStencilTexture"in Yn)&&(ho=!!(Yn.depthTexture||Yn.depthStencilTexture),ie(!ho||le.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Yn&&(typeof Yn.depth=="boolean"?Do=Yn.depth:(ii=Yn.depth,ko=!1)),"stencil"in Yn&&(typeof Yn.stencil=="boolean"?ko=Yn.stencil:(di=Yn.stencil,Do=!1)),"depthStencil"in Yn&&(typeof Yn.depthStencil=="boolean"?Do=ko=Yn.depthStencil:(qo=Yn.depthStencil,Do=!1,ko=!1))}var Ar=null,Dn=null,hr=null,Kn=null;if(Array.isArray(tr))Ar=tr.map(Et);else if(tr)Ar=[Et(tr)];else for(Ar=new Array(Wo),Gn=0;Gn<Wo;++Gn)Ar[Gn]=Ke(nr,_r,Xo,ao,jo);ie(le.webgl_draw_buffers||Ar.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ie(Ar.length<=Oe.maxColorAttachments,"too many color attachments, not supported"),nr=nr||Ar[0].width,_r=_r||Ar[0].height,ii?Dn=Et(ii):Do&&!ko&&(Dn=Ke(nr,_r,ho,"depth","uint32")),di?hr=Et(di):ko&&!Do&&(hr=Ke(nr,_r,!1,"stencil","uint8")),qo?Kn=Et(qo):!ii&&!di&&ko&&Do&&(Kn=Ke(nr,_r,ho,"depth stencil","depth stencil")),ie(!!ii+!!di+!!qo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var vo=null;for(Gn=0;Gn<Ar.length;++Gn)if(Ut(Ar[Gn],nr,_r),ie(!Ar[Gn]||Ar[Gn].texture&&_p.indexOf(Ar[Gn].texture._texture.format)>=0||Ar[Gn].renderbuffer&&sd.indexOf(Ar[Gn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Gn+" is invalid"),Ar[Gn]&&Ar[Gn].texture){var Ml=Yu[Ar[Gn].texture._texture.format]*Wc[Ar[Gn].texture._texture.type];vo===null?vo=Ml:ie(vo===Ml,"all color attachments much have the same number of bits per pixel.")}return Ut(Dn,nr,_r),ie(!Dn||Dn.texture&&Dn.texture._texture.format===tm||Dn.renderbuffer&&Dn.renderbuffer._renderbuffer.format===rm,"invalid depth attachment for framebuffer object"),Ut(hr,nr,_r),ie(!hr||hr.renderbuffer&&hr.renderbuffer._renderbuffer.format===zc,"invalid stencil attachment for framebuffer object"),Ut(Kn,nr,_r),ie(!Kn||Kn.texture&&Kn.texture._texture.format===ud||Kn.renderbuffer&&Kn.renderbuffer._renderbuffer.format===ud,"invalid depth-stencil attachment for framebuffer object"),Mt(xt),xt.width=nr,xt.height=_r,xt.colorAttachments=Ar,xt.depthAttachment=Dn,xt.stencilAttachment=hr,xt.depthStencilAttachment=Kn,jn.color=Ar.map(st),jn.depth=st(Dn),jn.stencil=st(hr),jn.depthStencil=st(Kn),jn.width=xt.width,jn.height=xt.height,Tt(xt),jn}function er(pn,ur){ie(dt.next!==xt,"can not resize a framebuffer which is currently in use");var Gn=Math.max(pn|0,1),nr=Math.max(ur|0||Gn,1);if(Gn===xt.width&&nr===xt.height)return jn;for(var _r=xt.colorAttachments,Do=0;Do<_r.length;++Do)It(_r[Do],Gn,nr);return It(xt.depthAttachment,Gn,nr),It(xt.stencilAttachment,Gn,nr),It(xt.depthStencilAttachment,Gn,nr),xt.width=jn.width=Gn,xt.height=jn.height=nr,Tt(xt),jn}return jn(Dt,kt),a(jn,{resize:er,_reglType:"framebuffer",_framebuffer:xt,destroy:function(){Wt(xt),Mt(xt)},use:function(pn){dt.setFBO({framebuffer:jn},pn)}})}function kn(Dt){var kt=Array(6);function xt(er){var pn;ie(kt.indexOf(dt.next)<0,"can not update framebuffer which is currently in use");var ur={color:null},Gn=0,nr=null,_r="rgba",Do="uint8",ko=1;if(typeof er=="number")Gn=er|0;else if(!er)Gn=1;else{ie.type(er,"object","invalid arguments for framebuffer");var tr=er;if("shape"in tr){var Xo=tr.shape;ie(Array.isArray(Xo)&&Xo.length>=2,"invalid shape for framebuffer"),ie(Xo[0]===Xo[1],"cube framebuffer must be square"),Gn=Xo[0]}else"radius"in tr&&(Gn=tr.radius|0),"width"in tr?(Gn=tr.width|0,"height"in tr&&ie(tr.height===Gn,"must be square")):"height"in tr&&(Gn=tr.height|0);("color"in tr||"colors"in tr)&&(nr=tr.color||tr.colors,Array.isArray(nr)&&ie(nr.length===1||le.webgl_draw_buffers,"multiple render targets not supported")),nr||("colorCount"in tr&&(ko=tr.colorCount|0,ie(ko>0,"invalid color buffer count")),"colorType"in tr&&(ie.oneOf(tr.colorType,Nt,"invalid color type"),Do=tr.colorType),"colorFormat"in tr&&(_r=tr.colorFormat,ie.oneOf(tr.colorFormat,Rt,"invalid color format for texture"))),"depth"in tr&&(ur.depth=tr.depth),"stencil"in tr&&(ur.stencil=tr.stencil),"depthStencil"in tr&&(ur.depthStencil=tr.depthStencil)}var ao;if(nr)if(Array.isArray(nr))for(ao=[],pn=0;pn<nr.length;++pn)ao[pn]=nr[pn];else ao=[nr];else{ao=Array(ko);var jo={radius:Gn,format:_r,type:Do};for(pn=0;pn<ko;++pn)ao[pn]=rt.createCube(jo)}for(ur.color=Array(ao.length),pn=0;pn<ao.length;++pn){var Wo=ao[pn];ie(typeof Wo=="function"&&Wo._reglType==="textureCube","invalid cube map"),Gn=Gn||Wo.width,ie(Wo.width===Gn&&Wo.height===Gn,"invalid cube map shape"),ur.color[pn]={target:$a,data:ao[pn]}}for(pn=0;pn<6;++pn){for(var ii=0;ii<ao.length;++ii)ur.color[ii].target=$a+pn;pn>0&&(ur.depth=kt[0].depth,ur.stencil=kt[0].stencil,ur.depthStencil=kt[0].depthStencil),kt[pn]?kt[pn](ur):kt[pn]=qt(ur)}return a(xt,{width:Gn,height:Gn,color:ao})}function jn(er){var pn,ur=er|0;if(ie(ur>0&&ur<=Oe.maxCubeMapSize,"invalid radius for cube fbo"),ur===xt.width)return xt;var Gn=xt.color;for(pn=0;pn<Gn.length;++pn)Gn[pn].resize(ur);for(pn=0;pn<6;++pn)kt[pn].resize(ur);return xt.width=xt.height=ur,xt}return xt(Dt),a(xt,{faces:kt,resize:jn,_reglType:"framebufferCube",destroy:function(){kt.forEach(function(er){er.destroy()})}})}function Vn(){dt.cur=null,dt.next=null,dt.dirty=!0,ui(At).forEach(function(Dt){Dt.framebuffer=V.createFramebuffer(),Tt(Dt)})}return a(dt,{getFramebuffer:function(Dt){if(typeof Dt=="function"&&Dt._reglType==="framebuffer"){var kt=Dt._framebuffer;if(kt instanceof rn)return kt}return null},create:qt,createCube:kn,clear:function(){ui(At).forEach(Wt)},restore:Vn})}var wp=5126,fd=34962;function Hc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=wp,this.offset=0,this.stride=0,this.divisor=0}function dd(V,le,Oe,rt,ht){for(var Qe=Oe.maxAttributes,dt=new Array(Qe),Rt=0;Rt<Qe;++Rt)dt[Rt]=new Hc;var Lt=0,Nt={},ct={Record:Hc,scope:{},state:dt,currentVAO:null,targetVAO:null,restore:Ut()?At:function(){},createVAO:rn,getVAO:Et,destroyBuffer:Ht,setVAO:Ut()?Ke:st,clear:Ut()?It:function(){}};function Ht(Mt){for(var Wt=0;Wt<dt.length;++Wt){var Tt=dt[Wt];Tt.buffer===Mt&&(V.disableVertexAttribArray(Wt),Tt.buffer=null)}}function Ut(){return le.oes_vertex_array_object}function Ct(){return le.angle_instanced_arrays}function Et(Mt){return typeof Mt=="function"&&Mt._vao?Mt._vao:null}function Ke(Mt){if(Mt!==ct.currentVAO){var Wt=Ut();Mt?Wt.bindVertexArrayOES(Mt.vao):Wt.bindVertexArrayOES(null),ct.currentVAO=Mt}}function st(Mt){if(Mt!==ct.currentVAO){if(Mt)Mt.bindAttrs();else for(var Wt=Ct(),Tt=0;Tt<dt.length;++Tt){var qt=dt[Tt];qt.buffer?(V.enableVertexAttribArray(Tt),V.vertexAttribPointer(Tt,qt.size,qt.type,qt.normalized,qt.stride,qt.offfset),Wt&&qt.divisor&&Wt.vertexAttribDivisorANGLE(Tt,qt.divisor)):(V.disableVertexAttribArray(Tt),V.vertexAttrib4f(Tt,qt.x,qt.y,qt.z,qt.w))}ct.currentVAO=Mt}}function It(){ui(Nt).forEach(function(Mt){Mt.destroy()})}function Jt(){this.id=++Lt,this.attributes=[];var Mt=Ut();Mt?this.vao=Mt.createVertexArrayOES():this.vao=null,Nt[this.id]=this,this.buffers=[]}Jt.prototype.bindAttrs=function(){for(var Mt=Ct(),Wt=this.attributes,Tt=0;Tt<Wt.length;++Tt){var qt=Wt[Tt];qt.buffer?(V.enableVertexAttribArray(Tt),V.bindBuffer(fd,qt.buffer.buffer),V.vertexAttribPointer(Tt,qt.size,qt.type,qt.normalized,qt.stride,qt.offset),Mt&&qt.divisor&&Mt.vertexAttribDivisorANGLE(Tt,qt.divisor)):(V.disableVertexAttribArray(Tt),V.vertexAttrib4f(Tt,qt.x,qt.y,qt.z,qt.w))}for(var kn=Wt.length;kn<Qe;++kn)V.disableVertexAttribArray(kn)},Jt.prototype.refresh=function(){var Mt=Ut();Mt&&(Mt.bindVertexArrayOES(this.vao),this.bindAttrs(),ct.currentVAO=this)},Jt.prototype.destroy=function(){if(this.vao){var Mt=Ut();this===ct.currentVAO&&(ct.currentVAO=null,Mt.bindVertexArrayOES(null)),Mt.deleteVertexArrayOES(this.vao),this.vao=null}Nt[this.id]&&(delete Nt[this.id],rt.vaoCount-=1)};function At(){var Mt=Ut();Mt&&ui(Nt).forEach(function(Wt){Wt.refresh()})}function rn(Mt){var Wt=new Jt;rt.vaoCount+=1;function Tt(qt){ie(Array.isArray(qt),"arguments to vertex array constructor must be an array"),ie(qt.length<Qe,"too many attributes"),ie(qt.length>0,"must specify at least one attribute");var kn={},Vn=Wt.attributes;Vn.length=qt.length;for(var Dt=0;Dt<qt.length;++Dt){var kt=qt[Dt],xt=Vn[Dt]=new Hc,jn=kt.data||kt;if(Array.isArray(jn)||n(jn)||$i(jn)){var er;Wt.buffers[Dt]&&(er=Wt.buffers[Dt],n(jn)&&er._buffer.byteLength>=jn.byteLength?er.subdata(jn):(er.destroy(),Wt.buffers[Dt]=null)),Wt.buffers[Dt]||(er=Wt.buffers[Dt]=ht.create(kt,fd,!1,!0)),xt.buffer=ht.getBuffer(er),xt.size=xt.buffer.dimension|0,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1,kn[Dt]=1}else ht.getBuffer(kt)?(xt.buffer=ht.getBuffer(kt),xt.size=xt.buffer.dimension|0,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1):ht.getBuffer(kt.buffer)?(xt.buffer=ht.getBuffer(kt.buffer),xt.size=(+kt.size||xt.buffer.dimension)|0,xt.normalized=!!kt.normalized||!1,"type"in kt?(ie.parameter(kt.type,Vi,"invalid buffer type"),xt.type=Vi[kt.type]):xt.type=xt.buffer.dtype,xt.offset=(kt.offset||0)|0,xt.stride=(kt.stride||0)|0,xt.divisor=(kt.divisor||0)|0,xt.state=1,ie(xt.size>=1&&xt.size<=4,"size must be between 1 and 4"),ie(xt.offset>=0,"invalid offset"),ie(xt.stride>=0&&xt.stride<=255,"stride must be between 0 and 255"),ie(xt.divisor>=0,"divisor must be positive"),ie(!xt.divisor||!!le.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in kt?(ie(Dt>0,"first attribute must not be a constant"),xt.x=+kt.x||0,xt.y=+kt.y||0,xt.z=+kt.z||0,xt.w=+kt.w||0,xt.state=2):ie(!1,"invalid attribute spec for location "+Dt)}for(var pn=0;pn<Wt.buffers.length;++pn)!kn[pn]&&Wt.buffers[pn]&&(Wt.buffers[pn].destroy(),Wt.buffers[pn]=null);return Wt.refresh(),Tt}return Tt.destroy=function(){for(var qt=0;qt<Wt.buffers.length;++qt)Wt.buffers[qt]&&Wt.buffers[qt].destroy();Wt.buffers.length=0,Wt.destroy()},Tt._vao=Wt,Tt._reglType="vao",Tt(Mt)}return ct}var pd=35632,Xr=35633,om=35718,to=35721;function hd(V,le,Oe,rt){var ht={},Qe={};function dt(Ke,st,It,Jt){this.name=Ke,this.id=st,this.location=It,this.info=Jt}function Rt(Ke,st){for(var It=0;It<Ke.length;++It)if(Ke[It].id===st.id){Ke[It].location=st.location;return}Ke.push(st)}function Lt(Ke,st,It){var Jt=Ke===pd?ht:Qe,At=Jt[st];if(!At){var rn=le.str(st);At=V.createShader(Ke),V.shaderSource(At,rn),V.compileShader(At),ie.shaderError(V,At,rn,Ke,It),Jt[st]=At}return At}var Nt={},ct=[],Ht=0;function Ut(Ke,st){this.id=Ht++,this.fragId=Ke,this.vertId=st,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,rt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ct(Ke,st,It){var Jt,At,rn=Lt(pd,Ke.fragId),Mt=Lt(Xr,Ke.vertId),Wt=Ke.program=V.createProgram();if(V.attachShader(Wt,rn),V.attachShader(Wt,Mt),It)for(Jt=0;Jt<It.length;++Jt){var Tt=It[Jt];V.bindAttribLocation(Wt,Tt[0],Tt[1])}V.linkProgram(Wt),ie.linkError(V,Wt,le.str(Ke.fragId),le.str(Ke.vertId),st);var qt=V.getProgramParameter(Wt,om);rt.profile&&(Ke.stats.uniformsCount=qt);var kn=Ke.uniforms;for(Jt=0;Jt<qt;++Jt)if(At=V.getActiveUniform(Wt,Jt),At)if(At.size>1)for(var Vn=0;Vn<At.size;++Vn){var Dt=At.name.replace("[0]","["+Vn+"]");Rt(kn,new dt(Dt,le.id(Dt),V.getUniformLocation(Wt,Dt),At))}else Rt(kn,new dt(At.name,le.id(At.name),V.getUniformLocation(Wt,At.name),At));var kt=V.getProgramParameter(Wt,to);rt.profile&&(Ke.stats.attributesCount=kt);var xt=Ke.attributes;for(Jt=0;Jt<kt;++Jt)At=V.getActiveAttrib(Wt,Jt),At&&Rt(xt,new dt(At.name,le.id(At.name),V.getAttribLocation(Wt,At.name),At))}rt.profile&&(Oe.getMaxUniformsCount=function(){var Ke=0;return ct.forEach(function(st){st.stats.uniformsCount>Ke&&(Ke=st.stats.uniformsCount)}),Ke},Oe.getMaxAttributesCount=function(){var Ke=0;return ct.forEach(function(st){st.stats.attributesCount>Ke&&(Ke=st.stats.attributesCount)}),Ke});function Et(){ht={},Qe={};for(var Ke=0;Ke<ct.length;++Ke)Ct(ct[Ke],null,ct[Ke].attributes.map(function(st){return[st.location,st.name]}))}return{clear:function(){var Ke=V.deleteShader.bind(V);ui(ht).forEach(Ke),ht={},ui(Qe).forEach(Ke),Qe={},ct.forEach(function(st){V.deleteProgram(st.program)}),ct.length=0,Nt={},Oe.shaderCount=0},program:function(Ke,st,It,Jt){ie.command(Ke>=0,"missing vertex shader",It),ie.command(st>=0,"missing fragment shader",It);var At=Nt[st];At||(At=Nt[st]={});var rn=At[Ke];if(rn&&(rn.refCount++,!Jt))return rn;var Mt=new Ut(st,Ke);return Oe.shaderCount++,Ct(Mt,It,Jt),rn||(At[Ke]=Mt),ct.push(Mt),a(Mt,{destroy:function(){if(Mt.refCount--,Mt.refCount<=0){V.deleteProgram(Mt.program);var Wt=ct.indexOf(Mt);ct.splice(Wt,1),Oe.shaderCount--}At[Mt.vertId].refCount<=0&&(V.deleteShader(Qe[Mt.vertId]),delete Qe[Mt.vertId],delete Nt[Mt.fragId][Mt.vertId]),Object.keys(Nt[Mt.fragId]).length||(V.deleteShader(ht[Mt.fragId]),delete ht[Mt.fragId],delete Nt[Mt.fragId])}})},restore:Et,shader:Lt,frag:-1,vert:-1}}var Rh=6408,Zu=5121,Nh=3333,Ws=5126;function Ch(V,le,Oe,rt,ht,Qe,dt){function Rt(ct){var Ht;le.next===null?(ie(ht.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ht=Zu):(ie(le.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ht=le.next.colorAttachments[0].texture._texture.type,Qe.oes_texture_float?(ie(Ht===Zu||Ht===Ws,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ht===Ws&&ie(dt.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ie(Ht===Zu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ut=0,Ct=0,Et=rt.framebufferWidth,Ke=rt.framebufferHeight,st=null;n(ct)?st=ct:ct&&(ie.type(ct,"object","invalid arguments to regl.read()"),Ut=ct.x|0,Ct=ct.y|0,ie(Ut>=0&&Ut<rt.framebufferWidth,"invalid x offset for regl.read"),ie(Ct>=0&&Ct<rt.framebufferHeight,"invalid y offset for regl.read"),Et=(ct.width||rt.framebufferWidth-Ut)|0,Ke=(ct.height||rt.framebufferHeight-Ct)|0,st=ct.data||null),st&&(Ht===Zu?ie(st instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ht===Ws&&ie(st instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ie(Et>0&&Et+Ut<=rt.framebufferWidth,"invalid width for read pixels"),ie(Ke>0&&Ke+Ct<=rt.framebufferHeight,"invalid height for read pixels"),Oe();var It=Et*Ke*4;return st||(Ht===Zu?st=new Uint8Array(It):Ht===Ws&&(st=st||new Float32Array(It))),ie.isTypedArray(st,"data buffer for regl.read() must be a typedarray"),ie(st.byteLength>=It,"data buffer for regl.read() too small"),V.pixelStorei(Nh,4),V.readPixels(Ut,Ct,Et,Ke,Rh,Ht,st),st}function Lt(ct){var Ht;return le.setFBO({framebuffer:ct.framebuffer},function(){Ht=Rt(ct)}),Ht}function Nt(ct){return!ct||!("framebuffer"in ct)?Rt(ct):Lt(ct)}return Nt}function Ju(V){return Array.prototype.slice.call(V)}function gi(V){return Ju(V).join("")}function nl(){var V=0,le=[],Oe=[];function rt(Ht){for(var Ut=0;Ut<Oe.length;++Ut)if(Oe[Ut]===Ht)return le[Ut];var Ct="g"+V++;return le.push(Ct),Oe.push(Ht),Ct}function ht(){var Ht=[];function Ut(){Ht.push.apply(Ht,Ju(arguments))}var Ct=[];function Et(){var Ke="v"+V++;return Ct.push(Ke),arguments.length>0&&(Ht.push(Ke,"="),Ht.push.apply(Ht,Ju(arguments)),Ht.push(";")),Ke}return a(Ut,{def:Et,toString:function(){return gi([Ct.length>0?"var "+Ct.join(",")+";":"",gi(Ht)])}})}function Qe(){var Ht=ht(),Ut=ht(),Ct=Ht.toString,Et=Ut.toString;function Ke(st,It){Ut(st,It,"=",Ht.def(st,It),";")}return a(function(){Ht.apply(Ht,Ju(arguments))},{def:Ht.def,entry:Ht,exit:Ut,save:Ke,set:function(st,It,Jt){Ke(st,It),Ht(st,It,"=",Jt,";")},toString:function(){return Ct()+Et()}})}function dt(){var Ht=gi(arguments),Ut=Qe(),Ct=Qe(),Et=Ut.toString,Ke=Ct.toString;return a(Ut,{then:function(){return Ut.apply(Ut,Ju(arguments)),this},else:function(){return Ct.apply(Ct,Ju(arguments)),this},toString:function(){var st=Ke();return st&&(st="else{"+st+"}"),gi(["if(",Ht,"){",Et(),"}",st])}})}var Rt=ht(),Lt={};function Nt(Ht,Ut){var Ct=[];function Et(){var At="a"+Ct.length;return Ct.push(At),At}Ut=Ut||0;for(var Ke=0;Ke<Ut;++Ke)Et();var st=Qe(),It=st.toString,Jt=Lt[Ht]=a(st,{arg:Et,toString:function(){return gi(["function(",Ct.join(),"){",It(),"}"])}});return Jt}function ct(){var Ht=['"use strict";',Rt,"return {"];Object.keys(Lt).forEach(function(Et){Ht.push('"',Et,'":',Lt[Et].toString(),",")}),Ht.push("}");var Ut=gi(Ht).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Ct=Function.apply(null,le.concat(Ut));return Ct.apply(null,Oe)}return{global:Rt,link:rt,block:ht,proc:Nt,scope:Qe,cond:dt,compile:ct}}var Hl="xyzw".split(""),Qu=5121,es=1,ts=2,vd=0,Xl=1,ns=2,md=3,rl=4,Xc=5,qc=6,zs="dither",Hs="blend.enable",Xs="blend.color",yd="blend.equation",qs="blend.func",Ep="depth.enable",gd="depth.func",Dh="depth.range",Op="depth.mask",ol="colorMask",Sp="cull.enable",xp="cull.face",Ap="frontFace",Ys="lineWidth",Sl="polygonOffset.enable",Yc="polygonOffset.offset",_d="sample.alpha",bd="sample.enable",gu="sample.coverage",_u="stencil.enable",Qn="stencil.mask",Ks="stencil.func",Kc="stencil.opFront",il="stencil.opBack",fi="scissor.enable",rs="scissor.box",Ro="viewport",bu="profile",na="framebuffer",Zc="vert",Fi="frag",Vo="elements",xl="primitive",Al="count",wd="offset",Pt="instances",os="vao",Jc="Width",Qc="Height",wu=na+Jc,is=na+Qc,Ed=Ro+Jc,Tp=Ro+Qc,as="drawingBuffer",ef=as+Jc,Od=as+Qc,Mp=[qs,yd,Ks,Kc,il,gu,Ro,rs,Yc],Tl=34962,kp=34963,al=35632,Eu=35633,Sd=3553,jh=34067,Ih=2884,Lh=3042,Pp=3024,xd=2960,tf=2929,Fh=3089,ll=32823,Ou=32926,im=32928,bo=5126,nf=35664,ls=35665,rf=35666,Zs=5124,of=35667,af=35668,lf=35669,us=35670,ql=35671,_i=35672,Ad=35673,uf=35674,ss=35675,Js=35676,Ti=35678,To=35680,sf=4,Xi=1028,Bn=1029,Td=2304,cf=2305,Md=32775,Rp=32776,$h=519,Su=7680,Bh=0,cs=1,Uh=32774,Np=513,ff=36160,Vh=36064,Ba={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Yl=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Un={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Cp={frag:al,vert:Eu},Qs={cw:Td,ccw:cf};function Kl(V){return Array.isArray(V)||n(V)||$i(V)}function df(V){return V.sort(function(le,Oe){return le===Ro?-1:Oe===Ro?1:le<Oe?-1:1})}function qi(V,le,Oe,rt){this.thisDep=V,this.contextDep=le,this.propDep=Oe,this.append=rt}function ul(V){return V&&!(V.thisDep||V.contextDep||V.propDep)}function No(V){return new qi(!1,!1,!1,V)}function da(V,le){var Oe=V.type;if(Oe===vd){var rt=V.data.length;return new qi(!0,rt>=1,rt>=2,le)}else if(Oe===rl){var ht=V.data;return new qi(ht.thisDep,ht.contextDep,ht.propDep,le)}else{if(Oe===Xc)return new qi(!1,!1,!1,le);if(Oe===qc){for(var Qe=!1,dt=!1,Rt=!1,Lt=0;Lt<V.data.length;++Lt){var Nt=V.data[Lt];if(Nt.type===Xl)Rt=!0;else if(Nt.type===ns)dt=!0;else if(Nt.type===md)Qe=!0;else if(Nt.type===vd){Qe=!0;var ct=Nt.data;ct>=1&&(dt=!0),ct>=2&&(Rt=!0)}else Nt.type===rl&&(Qe=Qe||Nt.data.thisDep,dt=dt||Nt.data.contextDep,Rt=Rt||Nt.data.propDep)}return new qi(Qe,dt,Rt,le)}else return new qi(Oe===md,Oe===ns,Oe===Xl,le)}}var Ua=new qi(!1,!1,!1,function(){});function am(V,le,Oe,rt,ht,Qe,dt,Rt,Lt,Nt,ct,Ht,Ut,Ct,Et){var Ke=Nt.Record,st={add:32774,subtract:32778,"reverse subtract":32779};Oe.ext_blend_minmax&&(st.min=Md,st.max=Rp);var It=Oe.angle_instanced_arrays,Jt=Oe.webgl_draw_buffers,At={dirty:!0,profile:Et.profile},rn={},Mt=[],Wt={},Tt={};function qt(he){return he.replace(".","_")}function kn(he,re,ke){var Ve=qt(he);Mt.push(he),rn[Ve]=At[Ve]=!!ke,Wt[Ve]=re}function Vn(he,re,ke){var Ve=qt(he);Mt.push(he),Array.isArray(ke)?(At[Ve]=ke.slice(),rn[Ve]=ke.slice()):At[Ve]=rn[Ve]=ke,Tt[Ve]=re}kn(zs,Pp),kn(Hs,Lh),Vn(Xs,"blendColor",[0,0,0,0]),Vn(yd,"blendEquationSeparate",[Uh,Uh]),Vn(qs,"blendFuncSeparate",[cs,Bh,cs,Bh]),kn(Ep,tf,!0),Vn(gd,"depthFunc",Np),Vn(Dh,"depthRange",[0,1]),Vn(Op,"depthMask",!0),Vn(ol,ol,[!0,!0,!0,!0]),kn(Sp,Ih),Vn(xp,"cullFace",Bn),Vn(Ap,Ap,cf),Vn(Ys,Ys,1),kn(Sl,ll),Vn(Yc,"polygonOffset",[0,0]),kn(_d,Ou),kn(bd,im),Vn(gu,"sampleCoverage",[1,!1]),kn(_u,xd),Vn(Qn,"stencilMask",-1),Vn(Ks,"stencilFunc",[$h,0,-1]),Vn(Kc,"stencilOpSeparate",[Xi,Su,Su,Su]),Vn(il,"stencilOpSeparate",[Bn,Su,Su,Su]),kn(fi,Fh),Vn(rs,"scissor",[0,0,V.drawingBufferWidth,V.drawingBufferHeight]),Vn(Ro,Ro,[0,0,V.drawingBufferWidth,V.drawingBufferHeight]);var Dt={gl:V,context:Ut,strings:le,next:rn,current:At,draw:Ht,elements:Qe,buffer:ht,shader:ct,attributes:Nt.state,vao:Nt,uniforms:Lt,framebuffer:Rt,extensions:Oe,timer:Ct,isBufferArgs:Kl},kt={primTypes:ni,compareFuncs:xu,blendFuncs:Ba,blendEquations:st,stencilOps:Un,glTypes:Vi,orientationType:Qs};ie.optional(function(){Dt.isArrayLike=R}),Jt&&(kt.backBuffer=[Bn],kt.drawBuffer=jr(rt.maxDrawbuffers,function(he){return he===0?[0]:jr(he,function(re){return Vh+re})}));var xt=0;function jn(){var he=nl(),re=he.link,ke=he.global;he.id=xt++,he.batchId="0";var Ve=re(Dt),Ze=he.shared={props:"a0"};Object.keys(Dt).forEach(function(Te){Ze[Te]=ke.def(Ve,".",Te)}),ie.optional(function(){he.CHECK=re(ie),he.commandStr=ie.guessCommand(),he.command=re(he.commandStr),he.assert=function(Te,fe,Ge){Te("if(!(",fe,"))",this.CHECK,".commandRaise(",re(Ge),",",this.command,");")},kt.invalidBlendCombinations=Yl});var De=he.next={},Pe=he.current={};Object.keys(Tt).forEach(function(Te){Array.isArray(At[Te])&&(De[Te]=ke.def(Ze.next,".",Te),Pe[Te]=ke.def(Ze.current,".",Te))});var Le=he.constants={};Object.keys(kt).forEach(function(Te){Le[Te]=ke.def(JSON.stringify(kt[Te]))}),he.invoke=function(Te,fe){switch(fe.type){case vd:var Ge=["this",Ze.context,Ze.props,he.batchId];return Te.def(re(fe.data),".call(",Ge.slice(0,Math.max(fe.data.length+1,4)),")");case Xl:return Te.def(Ze.props,fe.data);case ns:return Te.def(Ze.context,fe.data);case md:return Te.def("this",fe.data);case rl:return fe.data.append(he,Te),fe.data.ref;case Xc:return fe.data.toString();case qc:return fe.data.map(function(We){return he.invoke(Te,We)})}},he.attribCache={};var pe={};return he.scopeAttrib=function(Te){var fe=le.id(Te);if(fe in pe)return pe[fe];var Ge=Nt.scope[fe];Ge||(Ge=Nt.scope[fe]=new Ke);var We=pe[fe]=re(Ge);return We},he}function er(he){var re=he.static,ke=he.dynamic,Ve;if(bu in re){var Ze=!!re[bu];Ve=No(function(Pe,Le){return Ze}),Ve.enable=Ze}else if(bu in ke){var De=ke[bu];Ve=da(De,function(Pe,Le){return Pe.invoke(Le,De)})}return Ve}function pn(he,re){var ke=he.static,Ve=he.dynamic;if(na in ke){var Ze=ke[na];return Ze?(Ze=Rt.getFramebuffer(Ze),ie.command(Ze,"invalid framebuffer object"),No(function(Pe,Le){var pe=Pe.link(Ze),Te=Pe.shared;Le.set(Te.framebuffer,".next",pe);var fe=Te.context;return Le.set(fe,"."+wu,pe+".width"),Le.set(fe,"."+is,pe+".height"),pe})):No(function(Pe,Le){var pe=Pe.shared;Le.set(pe.framebuffer,".next","null");var Te=pe.context;return Le.set(Te,"."+wu,Te+"."+ef),Le.set(Te,"."+is,Te+"."+Od),"null"})}else if(na in Ve){var De=Ve[na];return da(De,function(Pe,Le){var pe=Pe.invoke(Le,De),Te=Pe.shared,fe=Te.framebuffer,Ge=Le.def(fe,".getFramebuffer(",pe,")");ie.optional(function(){Pe.assert(Le,"!"+pe+"||"+Ge,"invalid framebuffer object")}),Le.set(fe,".next",Ge);var We=Te.context;return Le.set(We,"."+wu,Ge+"?"+Ge+".width:"+We+"."+ef),Le.set(We,"."+is,Ge+"?"+Ge+".height:"+We+"."+Od),Ge})}else return null}function ur(he,re,ke){var Ve=he.static,Ze=he.dynamic;function De(pe){if(pe in Ve){var Te=Ve[pe];ie.commandType(Te,"object","invalid "+pe,ke.commandStr);var fe=!0,Ge=Te.x|0,We=Te.y|0,p,y;return"width"in Te?(p=Te.width|0,ie.command(p>=0,"invalid "+pe,ke.commandStr)):fe=!1,"height"in Te?(y=Te.height|0,ie.command(y>=0,"invalid "+pe,ke.commandStr)):fe=!1,new qi(!fe&&re&&re.thisDep,!fe&&re&&re.contextDep,!fe&&re&&re.propDep,function(q,ne){var ve=q.shared.context,xe=p;"width"in Te||(xe=ne.def(ve,".",wu,"-",Ge));var Fe=y;return"height"in Te||(Fe=ne.def(ve,".",is,"-",We)),[Ge,We,xe,Fe]})}else if(pe in Ze){var E=Ze[pe],I=da(E,function(q,ne){var ve=q.invoke(ne,E);ie.optional(function(){q.assert(ne,ve+"&&typeof "+ve+'==="object"',"invalid "+pe)});var xe=q.shared.context,Fe=ne.def(ve,".x|0"),vt=ne.def(ve,".y|0"),wt=ne.def('"width" in ',ve,"?",ve,".width|0:","(",xe,".",wu,"-",Fe,")"),Gt=ne.def('"height" in ',ve,"?",ve,".height|0:","(",xe,".",is,"-",vt,")");return ie.optional(function(){q.assert(ne,wt+">=0&&"+Gt+">=0","invalid "+pe)}),[Fe,vt,wt,Gt]});return re&&(I.thisDep=I.thisDep||re.thisDep,I.contextDep=I.contextDep||re.contextDep,I.propDep=I.propDep||re.propDep),I}else return re?new qi(re.thisDep,re.contextDep,re.propDep,function(q,ne){var ve=q.shared.context;return[0,0,ne.def(ve,".",wu),ne.def(ve,".",is)]}):null}var Pe=De(Ro);if(Pe){var Le=Pe;Pe=new qi(Pe.thisDep,Pe.contextDep,Pe.propDep,function(pe,Te){var fe=Le.append(pe,Te),Ge=pe.shared.context;return Te.set(Ge,"."+Ed,fe[2]),Te.set(Ge,"."+Tp,fe[3]),fe})}return{viewport:Pe,scissor_box:De(rs)}}function Gn(he,re){var ke=he.static,Ve=typeof ke[Fi]=="string"&&typeof ke[Zc]=="string";if(Ve){if(Object.keys(re.dynamic).length>0)return null;var Ze=re.static,De=Object.keys(Ze);if(De.length>0&&typeof Ze[De[0]]=="number"){for(var Pe=[],Le=0;Le<De.length;++Le)ie(typeof Ze[De[Le]]=="number","must specify all vertex attribute locations when using vaos"),Pe.push([Ze[De[Le]]|0,De[Le]]);return Pe}}return null}function nr(he,re,ke){var Ve=he.static,Ze=he.dynamic;function De(fe){if(fe in Ve){var Ge=le.id(Ve[fe]);ie.optional(function(){ct.shader(Cp[fe],Ge,ie.guessCommand())});var We=No(function(){return Ge});return We.id=Ge,We}else if(fe in Ze){var p=Ze[fe];return da(p,function(y,E){var I=y.invoke(E,p),q=E.def(y.shared.strings,".id(",I,")");return ie.optional(function(){E(y.shared.shader,".shader(",Cp[fe],",",q,",",y.command,");")}),q})}return null}var Pe=De(Fi),Le=De(Zc),pe=null,Te;return ul(Pe)&&ul(Le)?(pe=ct.program(Le.id,Pe.id,null,ke),Te=No(function(fe,Ge){return fe.link(pe)})):Te=new qi(Pe&&Pe.thisDep||Le&&Le.thisDep,Pe&&Pe.contextDep||Le&&Le.contextDep,Pe&&Pe.propDep||Le&&Le.propDep,function(fe,Ge){var We=fe.shared.shader,p;Pe?p=Pe.append(fe,Ge):p=Ge.def(We,".",Fi);var y;Le?y=Le.append(fe,Ge):y=Ge.def(We,".",Zc);var E=We+".program("+y+","+p;return ie.optional(function(){E+=","+fe.command}),Ge.def(E+")")}),{frag:Pe,vert:Le,progVar:Te,program:pe}}function _r(he,re){var ke=he.static,Ve=he.dynamic;function Ze(){if(Vo in ke){var fe=ke[Vo];Kl(fe)?fe=Qe.getElements(Qe.create(fe,!0)):fe&&(fe=Qe.getElements(fe),ie.command(fe,"invalid elements",re.commandStr));var Ge=No(function(p,y){if(fe){var E=p.link(fe);return p.ELEMENTS=E,E}return p.ELEMENTS=null,null});return Ge.value=fe,Ge}else if(Vo in Ve){var We=Ve[Vo];return da(We,function(p,y){var E=p.shared,I=E.isBufferArgs,q=E.elements,ne=p.invoke(y,We),ve=y.def("null"),xe=y.def(I,"(",ne,")"),Fe=p.cond(xe).then(ve,"=",q,".createStream(",ne,");").else(ve,"=",q,".getElements(",ne,");");return ie.optional(function(){p.assert(Fe.else,"!"+ne+"||"+ve,"invalid elements")}),y.entry(Fe),y.exit(p.cond(xe).then(q,".destroyStream(",ve,");")),p.ELEMENTS=ve,ve})}return null}var De=Ze();function Pe(){if(xl in ke){var fe=ke[xl];return ie.commandParameter(fe,ni,"invalid primitve",re.commandStr),No(function(We,p){return ni[fe]})}else if(xl in Ve){var Ge=Ve[xl];return da(Ge,function(We,p){var y=We.constants.primTypes,E=We.invoke(p,Ge);return ie.optional(function(){We.assert(p,E+" in "+y,"invalid primitive, must be one of "+Object.keys(ni))}),p.def(y,"[",E,"]")})}else if(De)return ul(De)?De.value?No(function(We,p){return p.def(We.ELEMENTS,".primType")}):No(function(){return sf}):new qi(De.thisDep,De.contextDep,De.propDep,function(We,p){var y=We.ELEMENTS;return p.def(y,"?",y,".primType:",sf)});return null}function Le(fe,Ge){if(fe in ke){var We=ke[fe]|0;return ie.command(!Ge||We>=0,"invalid "+fe,re.commandStr),No(function(y,E){return Ge&&(y.OFFSET=We),We})}else if(fe in Ve){var p=Ve[fe];return da(p,function(y,E){var I=y.invoke(E,p);return Ge&&(y.OFFSET=I,ie.optional(function(){y.assert(E,I+">=0","invalid "+fe)})),I})}else if(Ge&&De)return No(function(y,E){return y.OFFSET="0",0});return null}var pe=Le(wd,!0);function Te(){if(Al in ke){var fe=ke[Al]|0;return ie.command(typeof fe=="number"&&fe>=0,"invalid vertex count",re.commandStr),No(function(){return fe})}else if(Al in Ve){var Ge=Ve[Al];return da(Ge,function(y,E){var I=y.invoke(E,Ge);return ie.optional(function(){y.assert(E,"typeof "+I+'==="number"&&'+I+">=0&&"+I+"===("+I+"|0)","invalid vertex count")}),I})}else if(De)if(ul(De)){if(De)return pe?new qi(pe.thisDep,pe.contextDep,pe.propDep,function(y,E){var I=E.def(y.ELEMENTS,".vertCount-",y.OFFSET);return ie.optional(function(){y.assert(E,I+">=0","invalid vertex offset/element buffer too small")}),I}):No(function(y,E){return E.def(y.ELEMENTS,".vertCount")});var We=No(function(){return-1});return ie.optional(function(){We.MISSING=!0}),We}else{var p=new qi(De.thisDep||pe.thisDep,De.contextDep||pe.contextDep,De.propDep||pe.propDep,function(y,E){var I=y.ELEMENTS;return y.OFFSET?E.def(I,"?",I,".vertCount-",y.OFFSET,":-1"):E.def(I,"?",I,".vertCount:-1")});return ie.optional(function(){p.DYNAMIC=!0}),p}return null}return{elements:De,primitive:Pe(),count:Te(),instances:Le(Pt,!1),offset:pe}}function Do(he,re){var ke=he.static,Ve=he.dynamic,Ze={};return Mt.forEach(function(De){var Pe=qt(De);function Le(pe,Te){if(De in ke){var fe=pe(ke[De]);Ze[Pe]=No(function(){return fe})}else if(De in Ve){var Ge=Ve[De];Ze[Pe]=da(Ge,function(We,p){return Te(We,p,We.invoke(p,Ge))})}}switch(De){case Sp:case Hs:case zs:case _u:case Ep:case fi:case Sl:case _d:case bd:case Op:return Le(function(pe){return ie.commandType(pe,"boolean",De,re.commandStr),pe},function(pe,Te,fe){return ie.optional(function(){pe.assert(Te,"typeof "+fe+'==="boolean"',"invalid flag "+De,pe.commandStr)}),fe});case gd:return Le(function(pe){return ie.commandParameter(pe,xu,"invalid "+De,re.commandStr),xu[pe]},function(pe,Te,fe){var Ge=pe.constants.compareFuncs;return ie.optional(function(){pe.assert(Te,fe+" in "+Ge,"invalid "+De+", must be one of "+Object.keys(xu))}),Te.def(Ge,"[",fe,"]")});case Dh:return Le(function(pe){return ie.command(R(pe)&&pe.length===2&&typeof pe[0]=="number"&&typeof pe[1]=="number"&&pe[0]<=pe[1],"depth range is 2d array",re.commandStr),pe},function(pe,Te,fe){ie.optional(function(){pe.assert(Te,pe.shared.isArrayLike+"("+fe+")&&"+fe+".length===2&&typeof "+fe+'[0]==="number"&&typeof '+fe+'[1]==="number"&&'+fe+"[0]<="+fe+"[1]","depth range must be a 2d array")});var Ge=Te.def("+",fe,"[0]"),We=Te.def("+",fe,"[1]");return[Ge,We]});case qs:return Le(function(pe){ie.commandType(pe,"object","blend.func",re.commandStr);var Te="srcRGB"in pe?pe.srcRGB:pe.src,fe="srcAlpha"in pe?pe.srcAlpha:pe.src,Ge="dstRGB"in pe?pe.dstRGB:pe.dst,We="dstAlpha"in pe?pe.dstAlpha:pe.dst;return ie.commandParameter(Te,Ba,Pe+".srcRGB",re.commandStr),ie.commandParameter(fe,Ba,Pe+".srcAlpha",re.commandStr),ie.commandParameter(Ge,Ba,Pe+".dstRGB",re.commandStr),ie.commandParameter(We,Ba,Pe+".dstAlpha",re.commandStr),ie.command(Yl.indexOf(Te+", "+Ge)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Te+", "+Ge+")",re.commandStr),[Ba[Te],Ba[Ge],Ba[fe],Ba[We]]},function(pe,Te,fe){var Ge=pe.constants.blendFuncs;ie.optional(function(){pe.assert(Te,fe+"&&typeof "+fe+'==="object"',"invalid blend func, must be an object")});function We(ve,xe){var Fe=Te.def('"',ve,xe,'" in ',fe,"?",fe,".",ve,xe,":",fe,".",ve);return ie.optional(function(){pe.assert(Te,Fe+" in "+Ge,"invalid "+De+"."+ve+xe+", must be one of "+Object.keys(Ba))}),Fe}var p=We("src","RGB"),y=We("dst","RGB");ie.optional(function(){var ve=pe.constants.invalidBlendCombinations;pe.assert(Te,ve+".indexOf("+p+'+", "+'+y+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var E=Te.def(Ge,"[",p,"]"),I=Te.def(Ge,"[",We("src","Alpha"),"]"),q=Te.def(Ge,"[",y,"]"),ne=Te.def(Ge,"[",We("dst","Alpha"),"]");return[E,q,I,ne]});case yd:return Le(function(pe){if(typeof pe=="string")return ie.commandParameter(pe,st,"invalid "+De,re.commandStr),[st[pe],st[pe]];if(typeof pe=="object")return ie.commandParameter(pe.rgb,st,De+".rgb",re.commandStr),ie.commandParameter(pe.alpha,st,De+".alpha",re.commandStr),[st[pe.rgb],st[pe.alpha]];ie.commandRaise("invalid blend.equation",re.commandStr)},function(pe,Te,fe){var Ge=pe.constants.blendEquations,We=Te.def(),p=Te.def(),y=pe.cond("typeof ",fe,'==="string"');return ie.optional(function(){function E(I,q,ne){pe.assert(I,ne+" in "+Ge,"invalid "+q+", must be one of "+Object.keys(st))}E(y.then,De,fe),pe.assert(y.else,fe+"&&typeof "+fe+'==="object"',"invalid "+De),E(y.else,De+".rgb",fe+".rgb"),E(y.else,De+".alpha",fe+".alpha")}),y.then(We,"=",p,"=",Ge,"[",fe,"];"),y.else(We,"=",Ge,"[",fe,".rgb];",p,"=",Ge,"[",fe,".alpha];"),Te(y),[We,p]});case Xs:return Le(function(pe){return ie.command(R(pe)&&pe.length===4,"blend.color must be a 4d array",re.commandStr),jr(4,function(Te){return+pe[Te]})},function(pe,Te,fe){return ie.optional(function(){pe.assert(Te,pe.shared.isArrayLike+"("+fe+")&&"+fe+".length===4","blend.color must be a 4d array")}),jr(4,function(Ge){return Te.def("+",fe,"[",Ge,"]")})});case Qn:return Le(function(pe){return ie.commandType(pe,"number",Pe,re.commandStr),pe|0},function(pe,Te,fe){return ie.optional(function(){pe.assert(Te,"typeof "+fe+'==="number"',"invalid stencil.mask")}),Te.def(fe,"|0")});case Ks:return Le(function(pe){ie.commandType(pe,"object",Pe,re.commandStr);var Te=pe.cmp||"keep",fe=pe.ref||0,Ge="mask"in pe?pe.mask:-1;return ie.commandParameter(Te,xu,De+".cmp",re.commandStr),ie.commandType(fe,"number",De+".ref",re.commandStr),ie.commandType(Ge,"number",De+".mask",re.commandStr),[xu[Te],fe,Ge]},function(pe,Te,fe){var Ge=pe.constants.compareFuncs;ie.optional(function(){function E(){pe.assert(Te,Array.prototype.join.call(arguments,""),"invalid stencil.func")}E(fe+"&&typeof ",fe,'==="object"'),E('!("cmp" in ',fe,")||(",fe,".cmp in ",Ge,")")});var We=Te.def('"cmp" in ',fe,"?",Ge,"[",fe,".cmp]",":",Su),p=Te.def(fe,".ref|0"),y=Te.def('"mask" in ',fe,"?",fe,".mask|0:-1");return[We,p,y]});case Kc:case il:return Le(function(pe){ie.commandType(pe,"object",Pe,re.commandStr);var Te=pe.fail||"keep",fe=pe.zfail||"keep",Ge=pe.zpass||"keep";return ie.commandParameter(Te,Un,De+".fail",re.commandStr),ie.commandParameter(fe,Un,De+".zfail",re.commandStr),ie.commandParameter(Ge,Un,De+".zpass",re.commandStr),[De===il?Bn:Xi,Un[Te],Un[fe],Un[Ge]]},function(pe,Te,fe){var Ge=pe.constants.stencilOps;ie.optional(function(){pe.assert(Te,fe+"&&typeof "+fe+'==="object"',"invalid "+De)});function We(p){return ie.optional(function(){pe.assert(Te,'!("'+p+'" in '+fe+")||("+fe+"."+p+" in "+Ge+")","invalid "+De+"."+p+", must be one of "+Object.keys(Un))}),Te.def('"',p,'" in ',fe,"?",Ge,"[",fe,".",p,"]:",Su)}return[De===il?Bn:Xi,We("fail"),We("zfail"),We("zpass")]});case Yc:return Le(function(pe){ie.commandType(pe,"object",Pe,re.commandStr);var Te=pe.factor|0,fe=pe.units|0;return ie.commandType(Te,"number",Pe+".factor",re.commandStr),ie.commandType(fe,"number",Pe+".units",re.commandStr),[Te,fe]},function(pe,Te,fe){ie.optional(function(){pe.assert(Te,fe+"&&typeof "+fe+'==="object"',"invalid "+De)});var Ge=Te.def(fe,".factor|0"),We=Te.def(fe,".units|0");return[Ge,We]});case xp:return Le(function(pe){var Te=0;return pe==="front"?Te=Xi:pe==="back"&&(Te=Bn),ie.command(!!Te,Pe,re.commandStr),Te},function(pe,Te,fe){return ie.optional(function(){pe.assert(Te,fe+'==="front"||'+fe+'==="back"',"invalid cull.face")}),Te.def(fe,'==="front"?',Xi,":",Bn)});case Ys:return Le(function(pe){return ie.command(typeof pe=="number"&&pe>=rt.lineWidthDims[0]&&pe<=rt.lineWidthDims[1],"invalid line width, must be a positive number between "+rt.lineWidthDims[0]+" and "+rt.lineWidthDims[1],re.commandStr),pe},function(pe,Te,fe){return ie.optional(function(){pe.assert(Te,"typeof "+fe+'==="number"&&'+fe+">="+rt.lineWidthDims[0]+"&&"+fe+"<="+rt.lineWidthDims[1],"invalid line width")}),fe});case Ap:return Le(function(pe){return ie.commandParameter(pe,Qs,Pe,re.commandStr),Qs[pe]},function(pe,Te,fe){return ie.optional(function(){pe.assert(Te,fe+'==="cw"||'+fe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Te.def(fe+'==="cw"?'+Td+":"+cf)});case ol:return Le(function(pe){return ie.command(R(pe)&&pe.length===4,"color.mask must be length 4 array",re.commandStr),pe.map(function(Te){return!!Te})},function(pe,Te,fe){return ie.optional(function(){pe.assert(Te,pe.shared.isArrayLike+"("+fe+")&&"+fe+".length===4","invalid color.mask")}),jr(4,function(Ge){return"!!"+fe+"["+Ge+"]"})});case gu:return Le(function(pe){ie.command(typeof pe=="object"&&pe,Pe,re.commandStr);var Te="value"in pe?pe.value:1,fe=!!pe.invert;return ie.command(typeof Te=="number"&&Te>=0&&Te<=1,"sample.coverage.value must be a number between 0 and 1",re.commandStr),[Te,fe]},function(pe,Te,fe){ie.optional(function(){pe.assert(Te,fe+"&&typeof "+fe+'==="object"',"invalid sample.coverage")});var Ge=Te.def('"value" in ',fe,"?+",fe,".value:1"),We=Te.def("!!",fe,".invert");return[Ge,We]})}}),Ze}function ko(he,re){var ke=he.static,Ve=he.dynamic,Ze={};return Object.keys(ke).forEach(function(De){var Pe=ke[De],Le;if(typeof Pe=="number"||typeof Pe=="boolean")Le=No(function(){return Pe});else if(typeof Pe=="function"){var pe=Pe._reglType;pe==="texture2d"||pe==="textureCube"?Le=No(function(Te){return Te.link(Pe)}):pe==="framebuffer"||pe==="framebufferCube"?(ie.command(Pe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+De+'"',re.commandStr),Le=No(function(Te){return Te.link(Pe.color[0])})):ie.commandRaise('invalid data for uniform "'+De+'"',re.commandStr)}else R(Pe)?Le=No(function(Te){var fe=Te.global.def("[",jr(Pe.length,function(Ge){return ie.command(typeof Pe[Ge]=="number"||typeof Pe[Ge]=="boolean","invalid uniform "+De,Te.commandStr),Pe[Ge]}),"]");return fe}):ie.commandRaise('invalid or missing data for uniform "'+De+'"',re.commandStr);Le.value=Pe,Ze[De]=Le}),Object.keys(Ve).forEach(function(De){var Pe=Ve[De];Ze[De]=da(Pe,function(Le,pe){return Le.invoke(pe,Pe)})}),Ze}function tr(he,re){var ke=he.static,Ve=he.dynamic,Ze={};return Object.keys(ke).forEach(function(De){var Pe=ke[De],Le=le.id(De),pe=new Ke;if(Kl(Pe))pe.state=es,pe.buffer=ht.getBuffer(ht.create(Pe,Tl,!1,!0)),pe.type=0;else{var Te=ht.getBuffer(Pe);if(Te)pe.state=es,pe.buffer=Te,pe.type=0;else if(ie.command(typeof Pe=="object"&&Pe,"invalid data for attribute "+De,re.commandStr),"constant"in Pe){var fe=Pe.constant;pe.buffer="null",pe.state=ts,typeof fe=="number"?pe.x=fe:(ie.command(R(fe)&&fe.length>0&&fe.length<=4,"invalid constant for attribute "+De,re.commandStr),Hl.forEach(function(q,ne){ne<fe.length&&(pe[q]=fe[ne])}))}else{Kl(Pe.buffer)?Te=ht.getBuffer(ht.create(Pe.buffer,Tl,!1,!0)):Te=ht.getBuffer(Pe.buffer),ie.command(!!Te,'missing buffer for attribute "'+De+'"',re.commandStr);var Ge=Pe.offset|0;ie.command(Ge>=0,'invalid offset for attribute "'+De+'"',re.commandStr);var We=Pe.stride|0;ie.command(We>=0&&We<256,'invalid stride for attribute "'+De+'", must be integer betweeen [0, 255]',re.commandStr);var p=Pe.size|0;ie.command(!("size"in Pe)||p>0&&p<=4,'invalid size for attribute "'+De+'", must be 1,2,3,4',re.commandStr);var y=!!Pe.normalized,E=0;"type"in Pe&&(ie.commandParameter(Pe.type,Vi,"invalid type for attribute "+De,re.commandStr),E=Vi[Pe.type]);var I=Pe.divisor|0;"divisor"in Pe&&(ie.command(I===0||It,'cannot specify divisor for attribute "'+De+'", instancing not supported',re.commandStr),ie.command(I>=0,'invalid divisor for attribute "'+De+'"',re.commandStr)),ie.optional(function(){var q=re.commandStr,ne=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Pe).forEach(function(ve){ie.command(ne.indexOf(ve)>=0,'unknown parameter "'+ve+'" for attribute pointer "'+De+'" (valid parameters are '+ne+")",q)})}),pe.buffer=Te,pe.state=es,pe.size=p,pe.normalized=y,pe.type=E||Te.dtype,pe.offset=Ge,pe.stride=We,pe.divisor=I}}Ze[De]=No(function(q,ne){var ve=q.attribCache;if(Le in ve)return ve[Le];var xe={isStream:!1};return Object.keys(pe).forEach(function(Fe){xe[Fe]=pe[Fe]}),pe.buffer&&(xe.buffer=q.link(pe.buffer),xe.type=xe.type||xe.buffer+".dtype"),ve[Le]=xe,xe})}),Object.keys(Ve).forEach(function(De){var Pe=Ve[De];function Le(pe,Te){var fe=pe.invoke(Te,Pe),Ge=pe.shared,We=pe.constants,p=Ge.isBufferArgs,y=Ge.buffer;ie.optional(function(){pe.assert(Te,fe+"&&(typeof "+fe+'==="object"||typeof '+fe+'==="function")&&('+p+"("+fe+")||"+y+".getBuffer("+fe+")||"+y+".getBuffer("+fe+".buffer)||"+p+"("+fe+'.buffer)||("constant" in '+fe+"&&(typeof "+fe+'.constant==="number"||'+Ge.isArrayLike+"("+fe+".constant))))",'invalid dynamic attribute "'+De+'"')});var E={isStream:Te.def(!1)},I=new Ke;I.state=es,Object.keys(I).forEach(function(xe){E[xe]=Te.def(""+I[xe])});var q=E.buffer,ne=E.type;Te("if(",p,"(",fe,")){",E.isStream,"=true;",q,"=",y,".createStream(",Tl,",",fe,");",ne,"=",q,".dtype;","}else{",q,"=",y,".getBuffer(",fe,");","if(",q,"){",ne,"=",q,".dtype;",'}else if("constant" in ',fe,"){",E.state,"=",ts,";","if(typeof "+fe+'.constant === "number"){',E[Hl[0]],"=",fe,".constant;",Hl.slice(1).map(function(xe){return E[xe]}).join("="),"=0;","}else{",Hl.map(function(xe,Fe){return E[xe]+"="+fe+".constant.length>"+Fe+"?"+fe+".constant["+Fe+"]:0;"}).join(""),"}}else{","if(",p,"(",fe,".buffer)){",q,"=",y,".createStream(",Tl,",",fe,".buffer);","}else{",q,"=",y,".getBuffer(",fe,".buffer);","}",ne,'="type" in ',fe,"?",We.glTypes,"[",fe,".type]:",q,".dtype;",E.normalized,"=!!",fe,".normalized;");function ve(xe){Te(E[xe],"=",fe,".",xe,"|0;")}return ve("size"),ve("offset"),ve("stride"),ve("divisor"),Te("}}"),Te.exit("if(",E.isStream,"){",y,".destroyStream(",q,");","}"),E}Ze[De]=da(Pe,Le)}),Ze}function Xo(he,re){var ke=he.static,Ve=he.dynamic;if(os in ke){var Ze=ke[os];return Ze!==null&&Nt.getVAO(Ze)===null&&(Ze=Nt.createVAO(Ze)),No(function(Pe){return Pe.link(Nt.getVAO(Ze))})}else if(os in Ve){var De=Ve[os];return da(De,function(Pe,Le){var pe=Pe.invoke(Le,De);return Le.def(Pe.shared.vao+".getVAO("+pe+")")})}return null}function ao(he){var re=he.static,ke=he.dynamic,Ve={};return Object.keys(re).forEach(function(Ze){var De=re[Ze];Ve[Ze]=No(function(Pe,Le){return typeof De=="number"||typeof De=="boolean"?""+De:Pe.link(De)})}),Object.keys(ke).forEach(function(Ze){var De=ke[Ze];Ve[Ze]=da(De,function(Pe,Le){return Pe.invoke(Le,De)})}),Ve}function jo(he,re,ke,Ve,Ze){var De=he.static,Pe=he.dynamic;ie.optional(function(){var ve=[na,Zc,Fi,Vo,xl,wd,Al,Pt,bu,os].concat(Mt);function xe(Fe){Object.keys(Fe).forEach(function(vt){ie.command(ve.indexOf(vt)>=0,'unknown parameter "'+vt+'"',Ze.commandStr)})}xe(De),xe(Pe)});var Le=Gn(he,re),pe=pn(he),Te=ur(he,pe,Ze),fe=_r(he,Ze),Ge=Do(he,Ze),We=nr(he,Ze,Le);function p(ve){var xe=Te[ve];xe&&(Ge[ve]=xe)}p(Ro),p(qt(rs));var y=Object.keys(Ge).length>0,E={framebuffer:pe,draw:fe,shader:We,state:Ge,dirty:y,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(E.profile=er(he),E.uniforms=ko(ke,Ze),E.drawVAO=E.scopeVAO=Xo(he),!E.drawVAO&&We.program&&!Le&&Oe.angle_instanced_arrays){var I=!0,q=We.program.attributes.map(function(ve){var xe=re.static[ve];return I=I&&!!xe,xe});if(I&&q.length>0){var ne=Nt.getVAO(Nt.createVAO(q));E.drawVAO=new qi(null,null,null,function(ve,xe){return ve.link(ne)}),E.useVAO=!0}}return Le?E.useVAO=!0:E.attributes=tr(re,Ze),E.context=ao(Ve),E}function Wo(he,re,ke){var Ve=he.shared,Ze=Ve.context,De=he.scope();Object.keys(ke).forEach(function(Pe){re.save(Ze,"."+Pe);var Le=ke[Pe],pe=Le.append(he,re);Array.isArray(pe)?De(Ze,".",Pe,"=[",pe.join(),"];"):De(Ze,".",Pe,"=",pe,";")}),re(De)}function ii(he,re,ke,Ve){var Ze=he.shared,De=Ze.gl,Pe=Ze.framebuffer,Le;Jt&&(Le=re.def(Ze.extensions,".webgl_draw_buffers"));var pe=he.constants,Te=pe.drawBuffer,fe=pe.backBuffer,Ge;ke?Ge=ke.append(he,re):Ge=re.def(Pe,".next"),Ve||re("if(",Ge,"!==",Pe,".cur){"),re("if(",Ge,"){",De,".bindFramebuffer(",ff,",",Ge,".framebuffer);"),Jt&&re(Le,".drawBuffersWEBGL(",Te,"[",Ge,".colorAttachments.length]);"),re("}else{",De,".bindFramebuffer(",ff,",null);"),Jt&&re(Le,".drawBuffersWEBGL(",fe,");"),re("}",Pe,".cur=",Ge,";"),Ve||re("}")}function di(he,re,ke){var Ve=he.shared,Ze=Ve.gl,De=he.current,Pe=he.next,Le=Ve.current,pe=Ve.next,Te=he.cond(Le,".dirty");Mt.forEach(function(fe){var Ge=qt(fe);if(!(Ge in ke.state)){var We,p;if(Ge in Pe){We=Pe[Ge],p=De[Ge];var y=jr(At[Ge].length,function(I){return Te.def(We,"[",I,"]")});Te(he.cond(y.map(function(I,q){return I+"!=="+p+"["+q+"]"}).join("||")).then(Ze,".",Tt[Ge],"(",y,");",y.map(function(I,q){return p+"["+q+"]="+I}).join(";"),";"))}else{We=Te.def(pe,".",Ge);var E=he.cond(We,"!==",Le,".",Ge);Te(E),Ge in Wt?E(he.cond(We).then(Ze,".enable(",Wt[Ge],");").else(Ze,".disable(",Wt[Ge],");"),Le,".",Ge,"=",We,";"):E(Ze,".",Tt[Ge],"(",We,");",Le,".",Ge,"=",We,";")}}}),Object.keys(ke.state).length===0&&Te(Le,".dirty=false;"),re(Te)}function qo(he,re,ke,Ve){var Ze=he.shared,De=he.current,Pe=Ze.current,Le=Ze.gl;df(Object.keys(ke)).forEach(function(pe){var Te=ke[pe];if(!(Ve&&!Ve(Te))){var fe=Te.append(he,re);if(Wt[pe]){var Ge=Wt[pe];ul(Te)?fe?re(Le,".enable(",Ge,");"):re(Le,".disable(",Ge,");"):re(he.cond(fe).then(Le,".enable(",Ge,");").else(Le,".disable(",Ge,");")),re(Pe,".",pe,"=",fe,";")}else if(R(fe)){var We=De[pe];re(Le,".",Tt[pe],"(",fe,");",fe.map(function(p,y){return We+"["+y+"]="+p}).join(";"),";")}else re(Le,".",Tt[pe],"(",fe,");",Pe,".",pe,"=",fe,";")}})}function ho(he,re){It&&(he.instancing=re.def(he.shared.extensions,".angle_instanced_arrays"))}function Yn(he,re,ke,Ve,Ze){var De=he.shared,Pe=he.stats,Le=De.current,pe=De.timer,Te=ke.profile;function fe(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Ge,We;function p(ve){Ge=re.def(),ve(Ge,"=",fe(),";"),typeof Ze=="string"?ve(Pe,".count+=",Ze,";"):ve(Pe,".count++;"),Ct&&(Ve?(We=re.def(),ve(We,"=",pe,".getNumPendingQueries();")):ve(pe,".beginQuery(",Pe,");"))}function y(ve){ve(Pe,".cpuTime+=",fe(),"-",Ge,";"),Ct&&(Ve?ve(pe,".pushScopeStats(",We,",",pe,".getNumPendingQueries(),",Pe,");"):ve(pe,".endQuery();"))}function E(ve){var xe=re.def(Le,".profile");re(Le,".profile=",ve,";"),re.exit(Le,".profile=",xe,";")}var I;if(Te){if(ul(Te)){Te.enable?(p(re),y(re.exit),E("true")):E("false");return}I=Te.append(he,re),E(I)}else I=re.def(Le,".profile");var q=he.block();p(q),re("if(",I,"){",q,"}");var ne=he.block();y(ne),re.exit("if(",I,"){",ne,"}")}function pi(he,re,ke,Ve,Ze){var De=he.shared;function Pe(pe){switch(pe){case nf:case of:case ql:return 2;case ls:case af:case _i:return 3;case rf:case lf:case Ad:return 4;default:return 1}}function Le(pe,Te,fe){var Ge=De.gl,We=re.def(pe,".location"),p=re.def(De.attributes,"[",We,"]"),y=fe.state,E=fe.buffer,I=[fe.x,fe.y,fe.z,fe.w],q=["buffer","normalized","offset","stride"];function ne(){re("if(!",p,".buffer){",Ge,".enableVertexAttribArray(",We,");}");var xe=fe.type,Fe;if(fe.size?Fe=re.def(fe.size,"||",Te):Fe=Te,re("if(",p,".type!==",xe,"||",p,".size!==",Fe,"||",q.map(function(wt){return p+"."+wt+"!=="+fe[wt]}).join("||"),"){",Ge,".bindBuffer(",Tl,",",E,".buffer);",Ge,".vertexAttribPointer(",[We,Fe,xe,fe.normalized,fe.stride,fe.offset],");",p,".type=",xe,";",p,".size=",Fe,";",q.map(function(wt){return p+"."+wt+"="+fe[wt]+";"}).join(""),"}"),It){var vt=fe.divisor;re("if(",p,".divisor!==",vt,"){",he.instancing,".vertexAttribDivisorANGLE(",[We,vt],");",p,".divisor=",vt,";}")}}function ve(){re("if(",p,".buffer){",Ge,".disableVertexAttribArray(",We,");",p,".buffer=null;","}if(",Hl.map(function(xe,Fe){return p+"."+xe+"!=="+I[Fe]}).join("||"),"){",Ge,".vertexAttrib4f(",We,",",I,");",Hl.map(function(xe,Fe){return p+"."+xe+"="+I[Fe]+";"}).join(""),"}")}y===es?ne():y===ts?ve():(re("if(",y,"===",es,"){"),ne(),re("}else{"),ve(),re("}"))}Ve.forEach(function(pe){var Te=pe.name,fe=ke.attributes[Te],Ge;if(fe){if(!Ze(fe))return;Ge=fe.append(he,re)}else{if(!Ze(Ua))return;var We=he.scopeAttrib(Te);ie.optional(function(){he.assert(re,We+".state","missing attribute "+Te)}),Ge={},Object.keys(new Ke).forEach(function(p){Ge[p]=re.def(We,".",p)})}Le(he.link(pe),Pe(pe.info.type),Ge)})}function Ar(he,re,ke,Ve,Ze){for(var De=he.shared,Pe=De.gl,Le,pe=0;pe<Ve.length;++pe){var Te=Ve[pe],fe=Te.name,Ge=Te.info.type,We=ke.uniforms[fe],p=he.link(Te),y=p+".location",E;if(We){if(!Ze(We))continue;if(ul(We)){var I=We.value;if(ie.command(I!==null&&typeof I<"u",'missing uniform "'+fe+'"',he.commandStr),Ge===Ti||Ge===To){ie.command(typeof I=="function"&&(Ge===Ti&&(I._reglType==="texture2d"||I._reglType==="framebuffer")||Ge===To&&(I._reglType==="textureCube"||I._reglType==="framebufferCube")),"invalid texture for uniform "+fe,he.commandStr);var q=he.link(I._texture||I.color[0]._texture);re(Pe,".uniform1i(",y,",",q+".bind());"),re.exit(q,".unbind();")}else if(Ge===uf||Ge===ss||Ge===Js){ie.optional(function(){ie.command(R(I),"invalid matrix for uniform "+fe,he.commandStr),ie.command(Ge===uf&&I.length===4||Ge===ss&&I.length===9||Ge===Js&&I.length===16,"invalid length for matrix uniform "+fe,he.commandStr)});var ne=he.global.def("new Float32Array(["+Array.prototype.slice.call(I)+"])"),ve=2;Ge===ss?ve=3:Ge===Js&&(ve=4),re(Pe,".uniformMatrix",ve,"fv(",y,",false,",ne,");")}else{switch(Ge){case bo:ie.commandType(I,"number","uniform "+fe,he.commandStr),Le="1f";break;case nf:ie.command(R(I)&&I.length===2,"uniform "+fe,he.commandStr),Le="2f";break;case ls:ie.command(R(I)&&I.length===3,"uniform "+fe,he.commandStr),Le="3f";break;case rf:ie.command(R(I)&&I.length===4,"uniform "+fe,he.commandStr),Le="4f";break;case us:ie.commandType(I,"boolean","uniform "+fe,he.commandStr),Le="1i";break;case Zs:ie.commandType(I,"number","uniform "+fe,he.commandStr),Le="1i";break;case ql:ie.command(R(I)&&I.length===2,"uniform "+fe,he.commandStr),Le="2i";break;case of:ie.command(R(I)&&I.length===2,"uniform "+fe,he.commandStr),Le="2i";break;case _i:ie.command(R(I)&&I.length===3,"uniform "+fe,he.commandStr),Le="3i";break;case af:ie.command(R(I)&&I.length===3,"uniform "+fe,he.commandStr),Le="3i";break;case Ad:ie.command(R(I)&&I.length===4,"uniform "+fe,he.commandStr),Le="4i";break;case lf:ie.command(R(I)&&I.length===4,"uniform "+fe,he.commandStr),Le="4i";break}re(Pe,".uniform",Le,"(",y,",",R(I)?Array.prototype.slice.call(I):I,");")}continue}else E=We.append(he,re)}else{if(!Ze(Ua))continue;E=re.def(De.uniforms,"[",le.id(fe),"]")}Ge===Ti?(ie(!Array.isArray(E),"must specify a scalar prop for textures"),re("if(",E,"&&",E,'._reglType==="framebuffer"){',E,"=",E,".color[0];","}")):Ge===To&&(ie(!Array.isArray(E),"must specify a scalar prop for cube maps"),re("if(",E,"&&",E,'._reglType==="framebufferCube"){',E,"=",E,".color[0];","}")),ie.optional(function(){function Gt(jt,Qt){he.assert(re,jt,'bad data or missing for uniform "'+fe+'".  '+Qt)}function wn(jt){ie(!Array.isArray(E),"must not specify an array type for uniform"),Gt("typeof "+E+'==="'+jt+'"',"invalid type, expected "+jt)}function On(jt,Qt){Array.isArray(E)?ie(E.length===jt,"must have length "+jt):Gt(De.isArrayLike+"("+E+")&&"+E+".length==="+jt,"invalid vector, should have length "+jt,he.commandStr)}function Wn(jt){ie(!Array.isArray(E),"must not specify a value type"),Gt("typeof "+E+'==="function"&&'+E+'._reglType==="texture'+(jt===Sd?"2d":"Cube")+'"',"invalid texture type",he.commandStr)}switch(Ge){case Zs:wn("number");break;case of:On(2);break;case af:On(3);break;case lf:On(4);break;case bo:wn("number");break;case nf:On(2);break;case ls:On(3);break;case rf:On(4);break;case us:wn("boolean");break;case ql:On(2);break;case _i:On(3);break;case Ad:On(4);break;case uf:On(4);break;case ss:On(9);break;case Js:On(16);break;case Ti:Wn(Sd);break;case To:Wn(jh);break}});var xe=1;switch(Ge){case Ti:case To:var Fe=re.def(E,"._texture");re(Pe,".uniform1i(",y,",",Fe,".bind());"),re.exit(Fe,".unbind();");continue;case Zs:case us:Le="1i";break;case of:case ql:Le="2i",xe=2;break;case af:case _i:Le="3i",xe=3;break;case lf:case Ad:Le="4i",xe=4;break;case bo:Le="1f";break;case nf:Le="2f",xe=2;break;case ls:Le="3f",xe=3;break;case rf:Le="4f",xe=4;break;case uf:Le="Matrix2fv";break;case ss:Le="Matrix3fv";break;case Js:Le="Matrix4fv";break}if(re(Pe,".uniform",Le,"(",y,","),Le.charAt(0)==="M"){var vt=Math.pow(Ge-uf+2,2),wt=he.global.def("new Float32Array(",vt,")");Array.isArray(E)?re("false,(",jr(vt,function(Gt){return wt+"["+Gt+"]="+E[Gt]}),",",wt,")"):re("false,(Array.isArray(",E,")||",E," instanceof Float32Array)?",E,":(",jr(vt,function(Gt){return wt+"["+Gt+"]="+E+"["+Gt+"]"}),",",wt,")")}else xe>1?re(jr(xe,function(Gt){return Array.isArray(E)?E[Gt]:E+"["+Gt+"]"})):(ie(!Array.isArray(E),"uniform value must not be an array"),re(E));re(");")}}function Dn(he,re,ke,Ve){var Ze=he.shared,De=Ze.gl,Pe=Ze.draw,Le=Ve.draw;function pe(){var Fe=Le.elements,vt,wt=re;return Fe?((Fe.contextDep&&Ve.contextDynamic||Fe.propDep)&&(wt=ke),vt=Fe.append(he,wt)):vt=wt.def(Pe,".",Vo),vt&&wt("if("+vt+")"+De+".bindBuffer("+kp+","+vt+".buffer.buffer);"),vt}function Te(){var Fe=Le.count,vt,wt=re;return Fe?((Fe.contextDep&&Ve.contextDynamic||Fe.propDep)&&(wt=ke),vt=Fe.append(he,wt),ie.optional(function(){Fe.MISSING&&he.assert(re,"false","missing vertex count"),Fe.DYNAMIC&&he.assert(wt,vt+">=0","missing vertex count")})):(vt=wt.def(Pe,".",Al),ie.optional(function(){he.assert(wt,vt+">=0","missing vertex count")})),vt}var fe=pe();function Ge(Fe){var vt=Le[Fe];return vt?vt.contextDep&&Ve.contextDynamic||vt.propDep?vt.append(he,ke):vt.append(he,re):re.def(Pe,".",Fe)}var We=Ge(xl),p=Ge(wd),y=Te();if(typeof y=="number"){if(y===0)return}else ke("if(",y,"){"),ke.exit("}");var E,I;It&&(E=Ge(Pt),I=he.instancing);var q=fe+".type",ne=Le.elements&&ul(Le.elements);function ve(){function Fe(){ke(I,".drawElementsInstancedANGLE(",[We,y,q,p+"<<(("+q+"-"+Qu+")>>1)",E],");")}function vt(){ke(I,".drawArraysInstancedANGLE(",[We,p,y,E],");")}fe?ne?Fe():(ke("if(",fe,"){"),Fe(),ke("}else{"),vt(),ke("}")):vt()}function xe(){function Fe(){ke(De+".drawElements("+[We,y,q,p+"<<(("+q+"-"+Qu+")>>1)"]+");")}function vt(){ke(De+".drawArrays("+[We,p,y]+");")}fe?ne?Fe():(ke("if(",fe,"){"),Fe(),ke("}else{"),vt(),ke("}")):vt()}It&&(typeof E!="number"||E>=0)?typeof E=="string"?(ke("if(",E,">0){"),ve(),ke("}else if(",E,"<0){"),xe(),ke("}")):ve():xe()}function hr(he,re,ke,Ve,Ze){var De=jn(),Pe=De.proc("body",Ze);return ie.optional(function(){De.commandStr=re.commandStr,De.command=De.link(re.commandStr)}),It&&(De.instancing=Pe.def(De.shared.extensions,".angle_instanced_arrays")),he(De,Pe,ke,Ve),De.compile().body}function Kn(he,re,ke,Ve){ho(he,re),ke.useVAO?ke.drawVAO?re(he.shared.vao,".setVAO(",ke.drawVAO.append(he,re),");"):re(he.shared.vao,".setVAO(",he.shared.vao,".targetVAO);"):(re(he.shared.vao,".setVAO(null);"),pi(he,re,ke,Ve.attributes,function(){return!0})),Ar(he,re,ke,Ve.uniforms,function(){return!0}),Dn(he,re,re,ke)}function vo(he,re){var ke=he.proc("draw",1);ho(he,ke),Wo(he,ke,re.context),ii(he,ke,re.framebuffer),di(he,ke,re),qo(he,ke,re.state),Yn(he,ke,re,!1,!0);var Ve=re.shader.progVar.append(he,ke);if(ke(he.shared.gl,".useProgram(",Ve,".program);"),re.shader.program)Kn(he,ke,re,re.shader.program);else{ke(he.shared.vao,".setVAO(null);");var Ze=he.global.def("{}"),De=ke.def(Ve,".id"),Pe=ke.def(Ze,"[",De,"]");ke(he.cond(Pe).then(Pe,".call(this,a0);").else(Pe,"=",Ze,"[",De,"]=",he.link(function(Le){return hr(Kn,he,re,Le,1)}),"(",Ve,");",Pe,".call(this,a0);"))}Object.keys(re.state).length>0&&ke(he.shared.current,".dirty=true;")}function Ml(he,re,ke,Ve){he.batchId="a1",ho(he,re);function Ze(){return!0}pi(he,re,ke,Ve.attributes,Ze),Ar(he,re,ke,Ve.uniforms,Ze),Dn(he,re,re,ke)}function wo(he,re,ke,Ve){ho(he,re);var Ze=ke.contextDep,De=re.def(),Pe="a0",Le="a1",pe=re.def();he.shared.props=pe,he.batchId=De;var Te=he.scope(),fe=he.scope();re(Te.entry,"for(",De,"=0;",De,"<",Le,";++",De,"){",pe,"=",Pe,"[",De,"];",fe,"}",Te.exit);function Ge(q){return q.contextDep&&Ze||q.propDep}function We(q){return!Ge(q)}if(ke.needsContext&&Wo(he,fe,ke.context),ke.needsFramebuffer&&ii(he,fe,ke.framebuffer),qo(he,fe,ke.state,Ge),ke.profile&&Ge(ke.profile)&&Yn(he,fe,ke,!1,!0),Ve)ke.useVAO?ke.drawVAO?Ge(ke.drawVAO)?fe(he.shared.vao,".setVAO(",ke.drawVAO.append(he,fe),");"):Te(he.shared.vao,".setVAO(",ke.drawVAO.append(he,Te),");"):Te(he.shared.vao,".setVAO(",he.shared.vao,".targetVAO);"):(Te(he.shared.vao,".setVAO(null);"),pi(he,Te,ke,Ve.attributes,We),pi(he,fe,ke,Ve.attributes,Ge)),Ar(he,Te,ke,Ve.uniforms,We),Ar(he,fe,ke,Ve.uniforms,Ge),Dn(he,Te,fe,ke);else{var p=he.global.def("{}"),y=ke.shader.progVar.append(he,fe),E=fe.def(y,".id"),I=fe.def(p,"[",E,"]");fe(he.shared.gl,".useProgram(",y,".program);","if(!",I,"){",I,"=",p,"[",E,"]=",he.link(function(q){return hr(Ml,he,ke,q,2)}),"(",y,");}",I,".call(this,a0[",De,"],",De,");")}}function ge(he,re){var ke=he.proc("batch",2);he.batchId="0",ho(he,ke);var Ve=!1,Ze=!0;Object.keys(re.context).forEach(function(p){Ve=Ve||re.context[p].propDep}),Ve||(Wo(he,ke,re.context),Ze=!1);var De=re.framebuffer,Pe=!1;De?(De.propDep?Ve=Pe=!0:De.contextDep&&Ve&&(Pe=!0),Pe||ii(he,ke,De)):ii(he,ke,null),re.state.viewport&&re.state.viewport.propDep&&(Ve=!0);function Le(p){return p.contextDep&&Ve||p.propDep}di(he,ke,re),qo(he,ke,re.state,function(p){return!Le(p)}),(!re.profile||!Le(re.profile))&&Yn(he,ke,re,!1,"a1"),re.contextDep=Ve,re.needsContext=Ze,re.needsFramebuffer=Pe;var pe=re.shader.progVar;if(pe.contextDep&&Ve||pe.propDep)wo(he,ke,re,null);else{var Te=pe.append(he,ke);if(ke(he.shared.gl,".useProgram(",Te,".program);"),re.shader.program)wo(he,ke,re,re.shader.program);else{ke(he.shared.vao,".setVAO(null);");var fe=he.global.def("{}"),Ge=ke.def(Te,".id"),We=ke.def(fe,"[",Ge,"]");ke(he.cond(We).then(We,".call(this,a0,a1);").else(We,"=",fe,"[",Ge,"]=",he.link(function(p){return hr(wo,he,re,p,2)}),"(",Te,");",We,".call(this,a0,a1);"))}}Object.keys(re.state).length>0&&ke(he.shared.current,".dirty=true;")}function ot(he,re){var ke=he.proc("scope",3);he.batchId="a2";var Ve=he.shared,Ze=Ve.current;Wo(he,ke,re.context),re.framebuffer&&re.framebuffer.append(he,ke),df(Object.keys(re.state)).forEach(function(Pe){var Le=re.state[Pe],pe=Le.append(he,ke);R(pe)?pe.forEach(function(Te,fe){ke.set(he.next[Pe],"["+fe+"]",Te)}):ke.set(Ve.next,"."+Pe,pe)}),Yn(he,ke,re,!0,!0),[Vo,wd,Al,Pt,xl].forEach(function(Pe){var Le=re.draw[Pe];Le&&ke.set(Ve.draw,"."+Pe,""+Le.append(he,ke))}),Object.keys(re.uniforms).forEach(function(Pe){var Le=re.uniforms[Pe].append(he,ke);Array.isArray(Le)&&(Le="["+Le.join()+"]"),ke.set(Ve.uniforms,"["+le.id(Pe)+"]",Le)}),Object.keys(re.attributes).forEach(function(Pe){var Le=re.attributes[Pe].append(he,ke),pe=he.scopeAttrib(Pe);Object.keys(new Ke).forEach(function(Te){ke.set(pe,"."+Te,Le[Te])})}),re.scopeVAO&&ke.set(Ve.vao,".targetVAO",re.scopeVAO.append(he,ke));function De(Pe){var Le=re.shader[Pe];Le&&ke.set(Ve.shader,"."+Pe,Le.append(he,ke))}De(Zc),De(Fi),Object.keys(re.state).length>0&&(ke(Ze,".dirty=true;"),ke.exit(Ze,".dirty=true;")),ke("a1(",he.shared.context,",a0,",he.batchId,");")}function et(he){if(!(typeof he!="object"||R(he))){for(var re=Object.keys(he),ke=0;ke<re.length;++ke)if(Zt.isDynamic(he[re[ke]]))return!0;return!1}}function un(he,re,ke){var Ve=re.static[ke];if(!Ve||!et(Ve))return;var Ze=he.global,De=Object.keys(Ve),Pe=!1,Le=!1,pe=!1,Te=he.global.def("{}");De.forEach(function(Ge){var We=Ve[Ge];if(Zt.isDynamic(We)){typeof We=="function"&&(We=Ve[Ge]=Zt.unbox(We));var p=da(We,null);Pe=Pe||p.thisDep,pe=pe||p.propDep,Le=Le||p.contextDep}else{switch(Ze(Te,".",Ge,"="),typeof We){case"number":Ze(We);break;case"string":Ze('"',We,'"');break;case"object":Array.isArray(We)&&Ze("[",We.join(),"]");break;default:Ze(he.link(We));break}Ze(";")}});function fe(Ge,We){De.forEach(function(p){var y=Ve[p];if(Zt.isDynamic(y)){var E=Ge.invoke(We,y);We(Te,".",p,"=",E,";")}})}re.dynamic[ke]=new Zt.DynamicVariable(rl,{thisDep:Pe,contextDep:Le,propDep:pe,ref:Te,append:fe}),delete re.static[ke]}function dr(he,re,ke,Ve,Ze){var De=jn();De.stats=De.link(Ze),Object.keys(re.static).forEach(function(Le){un(De,re,Le)}),Mp.forEach(function(Le){un(De,he,Le)});var Pe=jo(he,re,ke,Ve,De);return vo(De,Pe),ot(De,Pe),ge(De,Pe),a(De.compile(),{destroy:function(){Pe.shader.program.destroy()}})}return{next:rn,current:At,procs:function(){var he=jn(),re=he.proc("poll"),ke=he.proc("refresh"),Ve=he.block();re(Ve),ke(Ve);var Ze=he.shared,De=Ze.gl,Pe=Ze.next,Le=Ze.current;Ve(Le,".dirty=false;"),ii(he,re),ii(he,ke,null,!0);var pe;It&&(pe=he.link(It)),Oe.oes_vertex_array_object&&ke(he.link(Oe.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Te=0;Te<rt.maxAttributes;++Te){var fe=ke.def(Ze.attributes,"[",Te,"]"),Ge=he.cond(fe,".buffer");Ge.then(De,".enableVertexAttribArray(",Te,");",De,".bindBuffer(",Tl,",",fe,".buffer.buffer);",De,".vertexAttribPointer(",Te,",",fe,".size,",fe,".type,",fe,".normalized,",fe,".stride,",fe,".offset);").else(De,".disableVertexAttribArray(",Te,");",De,".vertexAttrib4f(",Te,",",fe,".x,",fe,".y,",fe,".z,",fe,".w);",fe,".buffer=null;"),ke(Ge),It&&ke(pe,".vertexAttribDivisorANGLE(",Te,",",fe,".divisor);")}return ke(he.shared.vao,".currentVAO=null;",he.shared.vao,".setVAO(",he.shared.vao,".targetVAO);"),Object.keys(Wt).forEach(function(We){var p=Wt[We],y=Ve.def(Pe,".",We),E=he.block();E("if(",y,"){",De,".enable(",p,")}else{",De,".disable(",p,")}",Le,".",We,"=",y,";"),ke(E),re("if(",y,"!==",Le,".",We,"){",E,"}")}),Object.keys(Tt).forEach(function(We){var p=Tt[We],y=At[We],E,I,q=he.block();if(q(De,".",p,"("),R(y)){var ne=y.length;E=he.global.def(Pe,".",We),I=he.global.def(Le,".",We),q(jr(ne,function(ve){return E+"["+ve+"]"}),");",jr(ne,function(ve){return I+"["+ve+"]="+E+"["+ve+"];"}).join("")),re("if(",jr(ne,function(ve){return E+"["+ve+"]!=="+I+"["+ve+"]"}).join("||"),"){",q,"}")}else E=Ve.def(Pe,".",We),I=Ve.def(Le,".",We),q(E,");",Le,".",We,"=",E,";"),re("if(",E,"!==",I,"){",q,"}");ke(q)}),he.compile()}(),compile:dr}}function pf(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var fs=34918,gr=34919,Gh=35007,pa=function(V,le){if(!le.ext_disjoint_timer_query)return null;var Oe=[];function rt(){return Oe.pop()||le.ext_disjoint_timer_query.createQueryEXT()}function ht(It){Oe.push(It)}var Qe=[];function dt(It){var Jt=rt();le.ext_disjoint_timer_query.beginQueryEXT(Gh,Jt),Qe.push(Jt),Ct(Qe.length-1,Qe.length,It)}function Rt(){le.ext_disjoint_timer_query.endQueryEXT(Gh)}function Lt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Nt=[];function ct(){return Nt.pop()||new Lt}function Ht(It){Nt.push(It)}var Ut=[];function Ct(It,Jt,At){var rn=ct();rn.startQueryIndex=It,rn.endQueryIndex=Jt,rn.sum=0,rn.stats=At,Ut.push(rn)}var Et=[],Ke=[];function st(){var It,Jt,At=Qe.length;if(At!==0){Ke.length=Math.max(Ke.length,At+1),Et.length=Math.max(Et.length,At+1),Et[0]=0,Ke[0]=0;var rn=0;for(It=0,Jt=0;Jt<Qe.length;++Jt){var Mt=Qe[Jt];le.ext_disjoint_timer_query.getQueryObjectEXT(Mt,gr)?(rn+=le.ext_disjoint_timer_query.getQueryObjectEXT(Mt,fs),ht(Mt)):Qe[It++]=Mt,Et[Jt+1]=rn,Ke[Jt+1]=It}for(Qe.length=It,It=0,Jt=0;Jt<Ut.length;++Jt){var Wt=Ut[Jt],Tt=Wt.startQueryIndex,qt=Wt.endQueryIndex;Wt.sum+=Et[qt]-Et[Tt];var kn=Ke[Tt],Vn=Ke[qt];Vn===kn?(Wt.stats.gpuTime+=Wt.sum/1e6,Ht(Wt)):(Wt.startQueryIndex=kn,Wt.endQueryIndex=Vn,Ut[It++]=Wt)}Ut.length=It}}return{beginQuery:dt,endQuery:Rt,pushScopeStats:Ct,update:st,getNumPendingQueries:function(){return Qe.length},clear:function(){Oe.push.apply(Oe,Qe);for(var It=0;It<Oe.length;It++)le.ext_disjoint_timer_query.deleteQueryEXT(Oe[It]);Qe.length=0,Oe.length=0},restore:function(){Qe.length=0,Oe.length=0}}},Mo=16384,ra=256,Dp=1024,Mi=34962,Aa="webglcontextlost",ds="webglcontextrestored",hf=1,Co=2,Go=3;function kd(V,le){for(var Oe=0;Oe<V.length;++Oe)if(V[Oe]===le)return Oe;return-1}function jp(V){var le=lr(V);if(!le)return null;var Oe=le.gl,rt=Oe.getContextAttributes(),ht=Oe.isContextLost(),Qe=eo(Oe,le);if(!Qe)return null;var dt=li(),Rt=pf(),Lt=Qe.extensions,Nt=pa(Oe,Lt),ct=Er(),Ht=Oe.drawingBufferWidth,Ut=Oe.drawingBufferHeight,Ct={tick:0,time:0,viewportWidth:Ht,viewportHeight:Ut,framebufferWidth:Ht,framebufferHeight:Ut,drawingBufferWidth:Ht,drawingBufferHeight:Ut,pixelRatio:le.pixelRatio},Et={},Ke={elements:null,primitive:4,count:-1,offset:0,instances:-1},st=kc(Oe,Lt),It=ba(Oe,Rt,le,At),Jt=dd(Oe,Lt,st,Rt,It);function At(Dn){return Jt.destroyBuffer(Dn)}var rn=mn(Oe,Lt,It,Rt),Mt=hd(Oe,dt,Rt,le),Wt=Sr(Oe,Lt,st,function(){kn.procs.poll()},Ct,Rt,le),Tt=Gs(Oe,Lt,st,Rt,le),qt=cd(Oe,Lt,st,Wt,Tt,Rt),kn=am(Oe,dt,Lt,st,It,rn,Wt,qt,Et,Jt,Mt,Ke,Ct,Nt,le),Vn=Ch(Oe,qt,kn.procs.poll,Ct,rt,Lt,st),Dt=kn.next,kt=Oe.canvas,xt=[],jn=[],er=[],pn=[le.onDestroy],ur=null;function Gn(){if(xt.length===0){Nt&&Nt.update(),ur=null;return}ur=Nn.next(Gn),qo();for(var Dn=xt.length-1;Dn>=0;--Dn){var hr=xt[Dn];hr&&hr(Ct,null,0)}Oe.flush(),Nt&&Nt.update()}function nr(){!ur&&xt.length>0&&(ur=Nn.next(Gn))}function _r(){ur&&(Nn.cancel(Gn),ur=null)}function Do(Dn){Dn.preventDefault(),ht=!0,_r(),jn.forEach(function(hr){hr()})}function ko(Dn){Oe.getError(),ht=!1,Qe.restore(),Mt.restore(),It.restore(),Wt.restore(),Tt.restore(),qt.restore(),Jt.restore(),Nt&&Nt.restore(),kn.procs.refresh(),nr(),er.forEach(function(hr){hr()})}kt&&(kt.addEventListener(Aa,Do,!1),kt.addEventListener(ds,ko,!1));function tr(){xt.length=0,_r(),kt&&(kt.removeEventListener(Aa,Do),kt.removeEventListener(ds,ko)),Mt.clear(),qt.clear(),Tt.clear(),Wt.clear(),rn.clear(),It.clear(),Jt.clear(),Nt&&Nt.clear(),pn.forEach(function(Dn){Dn()})}function Xo(Dn){ie(!!Dn,"invalid args to regl({...})"),ie.type(Dn,"object","invalid args to regl({...})");function hr(Ze){var De=a({},Ze);delete De.uniforms,delete De.attributes,delete De.context,delete De.vao,"stencil"in De&&De.stencil.op&&(De.stencil.opBack=De.stencil.opFront=De.stencil.op,delete De.stencil.op);function Pe(Le){if(Le in De){var pe=De[Le];delete De[Le],Object.keys(pe).forEach(function(Te){De[Le+"."+Te]=pe[Te]})}}return Pe("blend"),Pe("depth"),Pe("cull"),Pe("stencil"),Pe("polygonOffset"),Pe("scissor"),Pe("sample"),"vao"in Ze&&(De.vao=Ze.vao),De}function Kn(Ze,De){var Pe={},Le={};return Object.keys(Ze).forEach(function(pe){var Te=Ze[pe];if(Zt.isDynamic(Te)){Le[pe]=Zt.unbox(Te,pe);return}else if(De&&Array.isArray(Te)){for(var fe=0;fe<Te.length;++fe)if(Zt.isDynamic(Te[fe])){Le[pe]=Zt.unbox(Te,pe);return}}Pe[pe]=Te}),{dynamic:Le,static:Pe}}var vo=Kn(Dn.context||{},!0),Ml=Kn(Dn.uniforms||{},!0),wo=Kn(Dn.attributes||{},!1),ge=Kn(hr(Dn),!1),ot={gpuTime:0,cpuTime:0,count:0},et=kn.compile(ge,wo,Ml,vo,ot),un=et.draw,dr=et.batch,he=et.scope,re=[];function ke(Ze){for(;re.length<Ze;)re.push(null);return re}function Ve(Ze,De){var Pe;if(ht&&ie.raise("context lost"),typeof Ze=="function")return he.call(this,null,Ze,0);if(typeof De=="function")if(typeof Ze=="number")for(Pe=0;Pe<Ze;++Pe)he.call(this,null,De,Pe);else if(Array.isArray(Ze))for(Pe=0;Pe<Ze.length;++Pe)he.call(this,Ze[Pe],De,Pe);else return he.call(this,Ze,De,0);else if(typeof Ze=="number"){if(Ze>0)return dr.call(this,ke(Ze|0),Ze|0)}else if(Array.isArray(Ze)){if(Ze.length)return dr.call(this,Ze,Ze.length)}else return un.call(this,Ze)}return a(Ve,{stats:ot,destroy:function(){et.destroy()}})}var ao=qt.setFBO=Xo({framebuffer:Zt.define.call(null,hf,"framebuffer")});function jo(Dn,hr){var Kn=0;kn.procs.poll();var vo=hr.color;vo&&(Oe.clearColor(+vo[0]||0,+vo[1]||0,+vo[2]||0,+vo[3]||0),Kn|=Mo),"depth"in hr&&(Oe.clearDepth(+hr.depth),Kn|=ra),"stencil"in hr&&(Oe.clearStencil(hr.stencil|0),Kn|=Dp),ie(!!Kn,"called regl.clear with no buffer specified"),Oe.clear(Kn)}function Wo(Dn){if(ie(typeof Dn=="object"&&Dn,"regl.clear() takes an object as input"),"framebuffer"in Dn)if(Dn.framebuffer&&Dn.framebuffer_reglType==="framebufferCube")for(var hr=0;hr<6;++hr)ao(a({framebuffer:Dn.framebuffer.faces[hr]},Dn),jo);else ao(Dn,jo);else jo(null,Dn)}function ii(Dn){ie.type(Dn,"function","regl.frame() callback must be a function"),xt.push(Dn);function hr(){var Kn=kd(xt,Dn);ie(Kn>=0,"cannot cancel a frame twice");function vo(){var Ml=kd(xt,vo);xt[Ml]=xt[xt.length-1],xt.length-=1,xt.length<=0&&_r()}xt[Kn]=vo}return nr(),{cancel:hr}}function di(){var Dn=Dt.viewport,hr=Dt.scissor_box;Dn[0]=Dn[1]=hr[0]=hr[1]=0,Ct.viewportWidth=Ct.framebufferWidth=Ct.drawingBufferWidth=Dn[2]=hr[2]=Oe.drawingBufferWidth,Ct.viewportHeight=Ct.framebufferHeight=Ct.drawingBufferHeight=Dn[3]=hr[3]=Oe.drawingBufferHeight}function qo(){Ct.tick+=1,Ct.time=Yn(),di(),kn.procs.poll()}function ho(){Wt.refresh(),di(),kn.procs.refresh(),Nt&&Nt.update()}function Yn(){return(Er()-ct)/1e3}ho();function pi(Dn,hr){ie.type(hr,"function","listener callback must be a function");var Kn;switch(Dn){case"frame":return ii(hr);case"lost":Kn=jn;break;case"restore":Kn=er;break;case"destroy":Kn=pn;break;default:ie.raise("invalid event, must be one of frame,lost,restore,destroy")}return Kn.push(hr),{cancel:function(){for(var vo=0;vo<Kn.length;++vo)if(Kn[vo]===hr){Kn[vo]=Kn[Kn.length-1],Kn.pop();return}}}}var Ar=a(Xo,{clear:Wo,prop:Zt.define.bind(null,hf),context:Zt.define.bind(null,Co),this:Zt.define.bind(null,Go),draw:Xo({}),buffer:function(Dn){return It.create(Dn,Mi,!1,!1)},elements:function(Dn){return rn.create(Dn,!1)},texture:Wt.create2D,cube:Wt.createCube,renderbuffer:Tt.create,framebuffer:qt.create,framebufferCube:qt.createCube,vao:Jt.createVAO,attributes:rt,frame:ii,on:pi,limits:st,hasExtension:function(Dn){return st.extensions.indexOf(Dn.toLowerCase())>=0},read:Vn,destroy:tr,_gl:Oe,_refresh:ho,poll:function(){qo(),Nt&&Nt.update()},now:Yn,stats:Rt});return le.onDone(null,Ar),Ar}return jp})}(kg)),kg.exports}vne();var Tf,Om,Mf,Pu,Sm,Bd,xm,vg,sc,qp,ka,cc,fc,mg;Tf={},cn(Tf,ln.POINTS,"points"),cn(Tf,ln.LINES,"lines"),cn(Tf,ln.LINE_LOOP,"line loop"),cn(Tf,ln.LINE_STRIP,"line strip"),cn(Tf,ln.TRIANGLES,"triangles"),cn(Tf,ln.TRIANGLE_FAN,"triangle fan"),cn(Tf,ln.TRIANGLE_STRIP,"triangle strip");Om={},cn(Om,ln.STATIC_DRAW,"static"),cn(Om,ln.DYNAMIC_DRAW,"dynamic"),cn(Om,ln.STREAM_DRAW,"stream");Mf={},cn(Mf,ln.BYTE,"int8"),cn(Mf,ln.UNSIGNED_INT,"int16"),cn(Mf,ln.INT,"int32"),cn(Mf,ln.UNSIGNED_BYTE,"uint8"),cn(Mf,ln.UNSIGNED_SHORT,"uint16"),cn(Mf,ln.UNSIGNED_INT,"uint32"),cn(Mf,ln.FLOAT,"float");Pu={},cn(Pu,ln.ALPHA,"alpha"),cn(Pu,ln.LUMINANCE,"luminance"),cn(Pu,ln.LUMINANCE_ALPHA,"luminance alpha"),cn(Pu,ln.RGB,"rgb"),cn(Pu,ln.RGBA,"rgba"),cn(Pu,ln.RGBA4,"rgba4"),cn(Pu,ln.RGB5_A1,"rgb5 a1"),cn(Pu,ln.RGB565,"rgb565"),cn(Pu,ln.DEPTH_COMPONENT,"depth"),cn(Pu,ln.DEPTH_STENCIL,"depth stencil");Sm={},cn(Sm,ln.DONT_CARE,"dont care"),cn(Sm,ln.NICEST,"nice"),cn(Sm,ln.FASTEST,"fast");Bd={},cn(Bd,ln.NEAREST,"nearest"),cn(Bd,ln.LINEAR,"linear"),cn(Bd,ln.LINEAR_MIPMAP_LINEAR,"mipmap"),cn(Bd,ln.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),cn(Bd,ln.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),cn(Bd,ln.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");xm={},cn(xm,ln.REPEAT,"repeat"),cn(xm,ln.CLAMP_TO_EDGE,"clamp"),cn(xm,ln.MIRRORED_REPEAT,"mirror");vg={},cn(vg,ln.NONE,"none"),cn(vg,ln.BROWSER_DEFAULT_WEBGL,"browser");sc={},cn(sc,ln.NEVER,"never"),cn(sc,ln.ALWAYS,"always"),cn(sc,ln.LESS,"less"),cn(sc,ln.LEQUAL,"lequal"),cn(sc,ln.GREATER,"greater"),cn(sc,ln.GEQUAL,"gequal"),cn(sc,ln.EQUAL,"equal"),cn(sc,ln.NOTEQUAL,"notequal");qp={},cn(qp,ln.FUNC_ADD,"add"),cn(qp,ln.MIN_EXT,"min"),cn(qp,ln.MAX_EXT,"max"),cn(qp,ln.FUNC_SUBTRACT,"subtract"),cn(qp,ln.FUNC_REVERSE_SUBTRACT,"reverse subtract");ka={},cn(ka,ln.ZERO,"zero"),cn(ka,ln.ONE,"one"),cn(ka,ln.SRC_COLOR,"src color"),cn(ka,ln.ONE_MINUS_SRC_COLOR,"one minus src color"),cn(ka,ln.SRC_ALPHA,"src alpha"),cn(ka,ln.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),cn(ka,ln.DST_COLOR,"dst color"),cn(ka,ln.ONE_MINUS_DST_COLOR,"one minus dst color"),cn(ka,ln.DST_ALPHA,"dst alpha"),cn(ka,ln.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),cn(ka,ln.CONSTANT_COLOR,"constant color"),cn(ka,ln.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),cn(ka,ln.CONSTANT_ALPHA,"constant alpha"),cn(ka,ln.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),cn(ka,ln.SRC_ALPHA_SATURATE,"src alpha saturate");cc={},cn(cc,ln.NEVER,"never"),cn(cc,ln.ALWAYS,"always"),cn(cc,ln.LESS,"less"),cn(cc,ln.LEQUAL,"lequal"),cn(cc,ln.GREATER,"greater"),cn(cc,ln.GEQUAL,"gequal"),cn(cc,ln.EQUAL,"equal"),cn(cc,ln.NOTEQUAL,"notequal");fc={},cn(fc,ln.ZERO,"zero"),cn(fc,ln.KEEP,"keep"),cn(fc,ln.REPLACE,"replace"),cn(fc,ln.INVERT,"invert"),cn(fc,ln.INCR,"increment"),cn(fc,ln.DECR,"decrement"),cn(fc,ln.INCR_WRAP,"increment wrap"),cn(fc,ln.DECR_WRAP,"decrement wrap");mg={},cn(mg,ln.FRONT,"front"),cn(mg,ln.BACK,"back");var lw,RT;function mne(){if(RT)return lw;RT=1;function e(t,n){return function(a){return t(n(a))}}return lw=e,lw}var uw,NT;function yne(){if(NT)return uw;NT=1;var e=mne(),t=e(Object.getPrototypeOf,Object);return uw=t,uw}var sw,CT;function gne(){if(CT)return sw;CT=1;var e=oE(),t=yne(),n=iE(),a="[object Object]",r=Function.prototype,u=Object.prototype,c=r.toString,v=u.hasOwnProperty,d=c.call(Object);function g(_){if(!n(_)||e(_)!=a)return!1;var b=t(_);if(b===null)return!0;var x=v.call(b,"constructor")&&b.constructor;return typeof x=="function"&&x instanceof x&&c.call(x)==d}return sw=g,sw}gne();class XR{constructor(){Ma(this,"lf");Ma(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:a,gridSize:r}=this.lf.graphModel;let u=40,c=40;r>20&&(u=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:u,ranksep:c,begin:[120,120],...t},(g=new AJ(this.option).layout({nodes:n.map(_=>({id:_.id,size:{width:_.width,height:_.height},model:_})),edges:a.map(_=>({source:_.sourceNodeId,target:_.targetNodeId,model:_}))}).nodes)==null||g.forEach(_=>{const{model:b}=_;b.set_position({x:_.x,y:_.y})}),this.lf.fitView()}}Ma(XR,"pluginName","dagre");const _ne=ir({name:"WorkFlow"}),bne=ir({..._ne,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":pV,"./nodes/application-node/index.ts":EV,"./nodes/base-node/index.ts":aW,"./nodes/condition-node/index.ts":yW,"./nodes/document-extract-node/index.ts":EW,"./nodes/form-node/index.ts":VW,"./nodes/http-node/index.ts":tz,"./nodes/image-generate/index.ts":vz,"./nodes/image-understand/index.ts":Pz,"./nodes/intent-classify-node/index.ts":$z,"./nodes/mcp-node/index.ts":aH,"./nodes/nl2sql-node/index.ts":gH,"./nodes/parameter-extraction-node/index.ts":DH,"./nodes/question-node/index.ts":HH,"./nodes/reply-node/index.ts":tX,"./nodes/reranker-node/index.ts":mX,"./nodes/search-knowledge-node/index.ts":MX,"./nodes/speech-to-text-node/index.ts":VX,"./nodes/start-node/index.ts":KX,"./nodes/text-to-speech-node/index.ts":lq,"./nodes/tool-lib-node/index.ts":Eq,"./nodes/tool-node/index.ts":Bq,"./nodes/user-select-node/index.ts":Yq,"./nodes/variable-aggregation-node/index.ts":aY,"./nodes/variable-assign-node/index.ts":hY,"./nodes/variable-splitting/index.ts":jY}),a=sV(),r=Ue(""),u=e,c={nodes:[...wI]};or({get:()=>u.data?u.data:c,set:O=>O});const v=Ue();oo(()=>{g()});const d=O=>{v.value.render(O)},g=O=>{const S=document.querySelector("#container");S&&(v.value=new uU({plugins:[XR],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:S}),v.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),v.value.on("graph:rendered",()=>{r.value=v.value.graphModel.flowId}),GY(v.value,v.value.graphModel),v.value.batchRegister([...Object.keys(n).map(j=>n[j].default),UY]),v.value.setDefaultEdgeType("app-edge"),v.value.render(O||{}),v.value.graphModel.eventCenter.on("delete_edge",j=>{j.forEach(D=>{v.value.deleteEdge(D)})}),v.value.graphModel.eventCenter.on("anchor:drop",j=>{j.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var j;(j=v.value)==null||j.fitView()},500))};return t({onmousedown:O=>{O.type&&v.value.dnd.startDrag({type:O.type,properties:{...O.properties}}),O.callback&&O.callback(v.value)},validate:()=>Promise.all(v.value.graphModel.nodes.map(O=>{var S;return(S=O==null?void 0:O.validate)==null?void 0:S.call(O)})),getGraphData:()=>v.value.getGraphData(),addNode:O=>{v.value.clearSelectElements();const{virtualRectCenterPositionX:S,virtualRectCenterPositionY:j}=v.value.graphModel.getVirtualRectSize(),D=v.value.graphModel.addNode({type:O.type,properties:O.properties,x:S,y:j-v.value.graphModel.height/2});D.isSelected=!0,D.isHovered=!0,v.value.toFront(D.id)},clearGraphData:()=>v.value.clearData(),renderGraphData:g,render:d}),(O,S)=>(Ne(),sn(Dr,null,[S[0]||(S[0]=J("div",{className:"workflow-app",id:"container"},null,-1)),v.value?(Ne(),gt(VY,{key:0,class:"workflow-control",lf:v.value},null,8,["lf"])):Rn("",!0),P(ar(a),{"flow-id":r.value},null,8,["flow-id"])],64))}}),wne={class:"workflow-publish-history border-l white-bg"},Ene={class:"border-b p-16-24"},One={class:"list-height pt-0"},Sne={class:"p-8 pt-0"},xne={class:"flex-between"},Ane={style:{"max-width":"80%"}},Tne={class:"text-center"},Mne=ir({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=aa(),{params:{id:a}}=n,r=or(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=t,c=Ue(!1),v=Ue([]),d=Ue("");function g(S){d.value=S.id}function _(S){u("click",S)}function b(S){u("refreshVersion",S)}function x(S){S.writeStatus=!0}function A(S){S.writeStatus=!1}function M(S,j){if(S){const D={name:S};Eo({type:"workflowVersion",systemType:r.value}).putWorkFlowVersion(a,j.id,D,c).then(()=>{Xd(St("common.modifySuccess")),j.writeStatus=!1,O()})}else mi(St("views.applicationWorkflow.tip.nameMessage"))}function O(){Eo({type:"workflowVersion",systemType:r.value}).getWorkFlowVersion(a,c).then(S=>{v.value=S.data})}return oo(()=>{O()}),(S,j)=>{const D=ee("ReadWrite"),z=ee("el-tag"),U=ee("UserFilled"),L=ee("el-icon"),$=ee("el-avatar"),X=ee("el-text"),Y=ee("AppIcon"),H=ee("el-button"),B=ee("el-dropdown-item"),G=ee("RefreshLeft"),K=ee("el-dropdown-menu"),Q=ee("el-dropdown"),ce=ee("common-list"),ue=ee("el-scrollbar"),de=Hd("loading");return Ne(),sn("div",wne,[J("h4",Ene,Ee(S.$t("views.applicationWorkflow.setting.releaseHistory")),1),J("div",One,[P(ue,null,{default:C(()=>[J("div",Sne,[Ra((Ne(),gt(ce,{data:v.value,class:"mt-8",onClick:_,onMouseenter:g,onMouseleave:j[1]||(j[1]=ye=>d.value="")},{default:C(({row:ye,index:we})=>[J("div",xne,[J("div",Ane,[J("h5",{class:Du([we===0?"primary":"","flex align-center"])},[P(D,{onChange:me=>M(me,ye),data:ye.name||ar(vw)(ye.update_time),trigger:"manual",write:ye.writeStatus,onClose:me=>A(ye)},null,8,["onChange","data","write","onClose"]),we===0?(Ne(),gt(z,{key:0,class:"default-tag ml-4"},{default:C(()=>[ut(Ee(S.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):Rn("",!0)],2),P(X,{type:"info",class:"color-secondary flex align-center mt-8"},{default:C(()=>[P($,{size:20,class:"avatar-grey mr-4"},{default:C(()=>[P(L,null,{default:C(()=>[P(U)]),_:1})]),_:1}),ut(" "+Ee(ye.publish_user_name),1)]),_:2},1024)]),Ra(J("div",{onClick:j[0]||(j[0]=en(()=>{},["stop"]))},[P(Q,{trigger:"click",teleported:!1},{dropdown:C(()=>[P(K,null,{default:C(()=>[P(B,{onClick:en(me=>x(ye),["stop"])},{default:C(()=>[P(Y,{iconName:"app-edit",class:"color-secondary"}),ut(" "+Ee(S.$t("common.edit")),1)]),_:2},1032,["onClick"]),P(B,{onClick:me=>b(ye)},{default:C(()=>[P(L,{class:"color-secondary"},{default:C(()=>[P(G)]),_:1}),ut(" "+Ee(S.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:C(()=>[P(H,{text:""},{default:C(()=>[P(Y,{iconName:"app-more"})]),_:1})]),_:2},1024)],512),[[th,d.value===ye.id]])])]),empty:C(()=>[J("div",Tne,[P(X,{type:"info"},{default:C(()=>[ut(Ee(S.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[de,c.value]])])]),_:1})])])}}}),kne=Zd(Mne,[["__scopeId","data-v-85be1165"]]),DT=[Ko.AiChat,Ko.Reply,Ko.ToolLib,Ko.ToolLibCustom,Ko.ImageUnderstandNode,Ko.Application,Ko.SpeechToTextNode,Ko.TextToSpeechNode,Ko.ImageGenerateNode];class jT{constructor(t){Ma(this,"nodes");Ma(this,"edges");Ma(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===Ko.Start);if(t.length==0)throw St("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw St("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===Ko.Base);if(t.length==0)throw St("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw St("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===Ko.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===Ko.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const a of n)this._is_valid_work_flow(a)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==Ko.Start&&n.id!==Ko.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${St("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.nodeName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const a=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(u=>u.id==r.targetNodeId)).reduce((r,u)=>[...r,...u],[]);if(a.length==0&&!DT.includes(t.type))throw St("views.applicationWorkflow.validate.noNextNode");return a}is_valid_nodes(){for(const t of this.nodes)if(t.type!==Ko.Base&&t.type!==Ko.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${St("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.nodeName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.nodeName} ${St("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===Ko.Condition){const n=t.properties.nodeData.branch;for(const a of n){const r=`${t.id}_${a.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.nodeName} ${St("views.applicationWorkflow.validate.needConnect1")}${a.type}${St("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(a=>a.sourceNodeId==t.id).length==0&&!DT.includes(t.type))throw`${t.properties.nodeName} ${St("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.nodeName} ${St("views.applicationWorkflow.validate.nodeUnavailable")}`}}const Pne={class:"application-workflow"},Rne={class:"header border-b flex-between p-12-24 white-bg"},Nne={class:"flex align-center"},Cne=["title"],Dne={key:0},jne={key:0},Ine={key:1},Lne=["href"],Fne={class:"ml-4"},$ne={class:"flex-between"},Bne={class:"flex align-center"},Une={class:"mr-12 ml-24 flex"},Vne=["src"],Gne=["title"],Wne={class:"mr-16"},zne={class:"scrollbar-height"},lre=ir({__name:"index",setup(e){yI("getApplicationDetail",()=>A);const{theme:t}=tE(),n=hI(),a=aa(),{params:{id:r,from:u}}=a,c=or(()=>a.path.includes("resource-management")?"systemManage":"workspace"),v=or(()=>tM.application[c.value]),d=or(()=>t.isDefaultTheme());let g;const _=Ue(),b=Ue(),x=Ue(!1),A=Ue(null),M=Ue(!1),O=Ue(!1),S=Ue(!1),j=Ue(""),D=Ue(!1),z=Ue(!1),U=Ue(!1),L=Ue({}),$=Ue(null),X=Ue([]),Y=or(()=>BS(X.value)?"?"+BS(X.value):""),H=or(()=>{var Xe;return`${window.location.origin}/chat/`+((Xe=A.value)==null?void 0:Xe.accessToken)+Y.value});function B(){JSON.stringify($.value)!==JSON.stringify(Je())?nE(St("common.tip"),St("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:St("views.applicationWorkflow.setting.exitSave"),cancelButtonText:St("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{Kt(!0,!0)}).catch(Xe=>{Xe==="cancel"&&Ft()}):Ft()}function G(){U.value||(z.value=!1,U.value=!1)}function K(Xe){Xe&&ce(Xe),z.value=!1,U.value=!1}function Q(Xe){U.value=!0,L.value=Xe,ce(Xe),Ce()}function ce(Xe){var _t;Xe.workFlow.nodes.map(pt=>{pt.properties.noRender=!0}),A.value.workFlow=Xe.workFlow,j.value=Xe==null?void 0:Xe.update_time,(_t=_.value)==null||_t.clearGraphData(),Nv(()=>{var pt;(pt=_.value)==null||pt.render(Xe.workFlow)})}function ue(){Yt(),D.value&&Se(),z.value=!1,U.value=!1}function de(){z.value=!0}function ye(Xe){Xe?Se():Ce(),localStorage.setItem("workflowAutoSave",Xe.toString())}function we(Xe){M.value=!1}function me(Xe){M.value=!1}function He(){M.value=!1}const tt=()=>{var Xe;(Xe=_.value)==null||Xe.validate().then(()=>{const _t=Je(),pt=new jT(_t);try{pt.is_valid()}catch(bt){mi(bt.toString());return}Eo({type:"application",systemType:c.value}).putApplication(r,{workFlow:_t},x).then(()=>Eo({type:"application",systemType:c.value}).publish(r,{},x)).then(bt=>{A.value.name=bt.data.name,Xd(St("views.application.tip.publishSuccess"))}).catch(bt=>{var Xt,nt,fn,$e;const nn=bt.node,on=bt.errMessage;if(typeof on=="string")mi(((Xt=bt.node.properties)==null?void 0:Xt.nodeName)+` ${St("views.applicationWorkflow.node").toLowerCase()} `+on.toLowerCase());else{const bn=Object.keys(on);mi(((nt=nn.properties)==null?void 0:nt.nodeName)+` ${St("views.applicationWorkflow.node").toLowerCase()} `+(($e=(fn=on[bn[0]])==null?void 0:fn[0])==null?void 0:$e.message.toLowerCase()))}})}).catch(_t=>{var nn,on,Xt,nt;const pt=_t.node,bt=_t.errMessage;if(typeof bt=="string")mi(((nn=_t.node.properties)==null?void 0:nn.nodeName)+` ${St("views.applicationWorkflow.node")}，`+bt);else{const fn=Object.keys(bt);mi(((on=pt.properties)==null?void 0:on.nodeName)+` ${St("views.applicationWorkflow.node")}，`+((nt=(Xt=bt[fn[0]])==null?void 0:Xt[0])==null?void 0:nt.message))}})},Ot=()=>{var Xe;(Xe=_.value)==null||Xe.validate().then(()=>{var bt;const _t=Je(),pt=new jT(_t);try{pt.is_valid(),A.value={...A.value,type:"WORK_FLOW",...(bt=pt.get_base_node())==null?void 0:bt.properties.nodeData,workFlow:Je()},O.value=!0}catch(nn){mi(nn.toString())}}).catch(_t=>{var nn,on,Xt,nt;const pt=_t.node,bt=_t.errMessage;if(typeof bt=="string")mi(((nn=_t.node.properties)==null?void 0:nn.nodeName)+` ${St("views.applicationWorkflow.node")}，`+bt);else{const fn=Object.keys(bt);mi(((on=pt.properties)==null?void 0:on.nodeName)+` ${St("views.applicationWorkflow.node")}，`+((nt=(Xt=bt[fn[0]])==null?void 0:Xt[0])==null?void 0:nt.message))}})};function Je(){var Xe;return(Xe=_.value)==null?void 0:Xe.getGraphData()}function Yt(){Eo({type:"application",systemType:c.value}).getApplicationDetail(r).then(Xe=>{var _t,pt,bt,nn,on;(_t=Xe.data)==null||_t.workFlow.nodes.map(Xt=>{Xt.properties.noRender=!0}),A.value=Xe.data,A.value.stt_model_id=Xe.data.stt_model,A.value.ttsModelId=Xe.data.tts_model,A.value.ttsType=Xe.data.ttsType,j.value=(pt=Xe.data)==null?void 0:pt.update_time,(nn=(bt=A.value.workFlow)==null?void 0:bt.nodes)==null||nn.filter(Xt=>Xt.id==="base-node").map(Xt=>{X.value=Xt.properties.api_input_field_list?Xt.properties.api_input_field_list.map(nt=>({name:nt.variable,value:nt.default_value})):Xt.properties.inputFieldList?Xt.properties.inputFieldList.filter(nt=>nt.assignment_method==="api_input").map(nt=>({name:nt.variable,value:nt.default_value})):[]}),Eo({type:"application",systemType:c.value}).getAccessToken(r,x).then(Xt=>{A.value={...A.value,...Xt.data}}),(on=_.value)==null||on.clearGraphData(),Nv(()=>{var Xt;(Xt=_.value)==null||Xt.render(A.value.workFlow),$.value=Je()}),Af([Pl.IS_EE,Pl.IS_PE],"OR")&&Eo({type:"application",systemType:c.value}).getApplicationSetting(r).then(Xt=>{A.value={...A.value,...Xt.data}})})}function Kt(Xe,_t){const pt={workFlow:Je()};x.value=_t||!1,Eo({type:"application",systemType:c.value}).putApplication(r,pt).then(()=>{j.value=new Date,Xe&&($.value=Je(),Xd(St("common.saveSuccess")),_t&&Ft())}).catch(()=>{x.value=!1})}const Ft=()=>a.path.includes("workspace")?n.push({path:Be()}):n.push({path:An()}),An=()=>Af([bs.ADMIN,Wa.RESOURCE_APPLICATION_OVERVIEW_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/overview`:Af([bs.ADMIN,Wa.RESOURCE_APPLICATION_ACCESS_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/access`:Af([bs.ADMIN,Wa.RESOURCE_APPLICATION_CHAT_USER_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-user`:Af([bs.ADMIN,Wa.RESOURCE_APPLICATION_CHAT_LOG_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-log`:"/system/resource-management/application",Be=()=>Af([new $d([bs.USER],[Wa.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[],"AND"),bs.WORKSPACE_MANAGE.getWorkspaceRole,Wa.APPLICATION_OVERVIEW_READ.getWorkspacePermissionWorkspaceManageRole,Wa.APPLICATION_OVERVIEW_READ.getApplicationWorkspaceResourcePermission(r)],"OR")?`/application/${u}/${r}/WORK_FLOW/overview`:Af([new $d([bs.USER],[Wa.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"AND"),new $d([bs.WORKSPACE_MANAGE.getWorkspaceRole],[Wa.APPLICATION_ACCESS_READ.getWorkspacePermissionWorkspaceManageRole],[Pl.IS_EE,Pl.IS_PE],"OR"),new $d([],[Wa.APPLICATION_ACCESS_READ.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"OR")],"OR")?`/application/${u}/${r}/WORK_FLOW/access`:Af([new $d([bs.USER],[Wa.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"AND"),new $d([bs.WORKSPACE_MANAGE.getWorkspaceRole],[Wa.APPLICATION_CHAT_USER_READ.getWorkspacePermissionWorkspaceManageRole],[Pl.IS_EE,Pl.IS_PE],"OR"),new $d([],[Wa.APPLICATION_CHAT_USER_READ.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"OR")],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-user`:Af([new $d([bs.USER],[Wa.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[],"AND"),Wa.APPLICATION_CHAT_LOG_READ.getWorkspacePermissionWorkspaceManageRole,Wa.APPLICATION_CHAT_LOG_READ.getApplicationWorkspaceResourcePermission(r)],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-log`:"/application",Se=()=>{g=setInterval(()=>{Kt()},6e4)},Ce=()=>{g&&clearInterval(g)};return oo(()=>{Yt();const Xe=localStorage.getItem("workflowAutoSave");D.value=Xe==="true",D.value&&Se()}),vI(()=>{var Xe;Ce(),(Xe=_.value)==null||Xe.clearGraphData()}),(Xe,_t)=>{var Fn,yo,Ae;const pt=ee("el-text"),bt=ee("el-button"),nn=ee("el-divider"),on=ee("Close"),Xt=ee("el-icon"),nt=ee("el-dropdown-item"),fn=ee("el-switch"),$e=ee("el-dropdown-menu"),bn=ee("el-dropdown"),Zn=ee("el-collapse-transition"),ie=ee("el-avatar"),Jn=ee("LogoIcon"),kr=ee("AiChat"),Wr=Hd("click-outside"),uo=Hd("loading");return Ra((Ne(),sn("div",Pne,[J("div",Rne,[J("div",Nne,[P(mI,{onClick:B}),J("h4",{class:"ellipsis",style:{"max-width":"300px"},title:(Fn=A.value)==null?void 0:Fn.name},Ee((yo=A.value)==null?void 0:yo.name),9,Cne),z.value&&U.value?(Ne(),sn("div",Dne,[P(pt,{type:"info",class:"ml-16 color-secondary"},{default:C(()=>[ut(Ee(Xe.$t("views.applicationWorkflow.info.previewVersion"))+" "+Ee(L.value.name||ar(vw)(L.value.update_time)),1)]),_:1})])):j.value?(Ne(),gt(pt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:C(()=>[ut(Ee(Xe.$t("views.applicationWorkflow.info.saveTime"))+Ee(ar(vw)(j.value)),1)]),_:1})):Rn("",!0)]),z.value&&U.value?(Ne(),sn("div",jne,[P(bt,{type:"primary",class:"mr-8",onClick:_t[0]||(_t[0]=Ye=>K())},{default:C(()=>[ut(Ee(Xe.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),P(nn,{direction:"vertical"}),P(bt,{text:"",onClick:ue},{default:C(()=>[P(Xt,null,{default:C(()=>[P(on)]),_:1})]),_:1})])):(Ne(),sn("div",Ine,[P(bt,{icon:"Plus",onClick:_t[1]||(_t[1]=Ye=>M.value=!M.value)},{default:C(()=>[ut(Ee(Xe.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),v.value.debug(ar(r))?(Ne(),gt(bt,{key:0,onClick:Ot,disabled:O.value},{default:C(()=>[P(Cr,{iconName:"app-debug-outlined",class:"mr-4"}),ut(" "+Ee(Xe.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"])):Rn("",!0),P(bt,{onClick:_t[2]||(_t[2]=Ye=>Kt(!0))},{default:C(()=>[P(Cr,{iconName:"app-save-outlined",class:"mr-4"}),ut(" "+Ee(Xe.$t("common.save")),1)]),_:1}),P(bt,{type:"primary",onClick:tt},{default:C(()=>[ut(Ee(Xe.$t("views.application.operation.publish")),1)]),_:1}),P(bn,{trigger:"click"},{dropdown:C(()=>[P($e,null,{default:C(()=>[J("a",{href:H.value,target:"_blank"},[P(nt,null,{default:C(()=>[P(Cr,{iconName:"app-create-chat",class:"color-secondary"}),ut(" "+Ee(Xe.$t("views.application.operation.toChat")),1)]),_:1})],8,Lne),P(nt,{onClick:de},{default:C(()=>[P(Cr,{iconName:"app-history-outlined",class:"color-secondary"}),ut(" "+Ee(Xe.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),P(nt,null,{default:C(()=>[P(Cr,{iconName:"app-save-outlined",class:"color-secondary"}),ut(" "+Ee(Xe.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),J("div",Fne,[P(fn,{size:"small",modelValue:D.value,"onUpdate:modelValue":_t[4]||(_t[4]=Ye=>D.value=Ye),onChange:ye},null,8,["modelValue"])])]),_:1})]),_:1})]),default:C(()=>[P(bt,{text:"",onClick:_t[3]||(_t[3]=en(()=>{},["stop"])),class:"ml-8 mt-4"},{default:C(()=>[P(Cr,{iconName:"app-more",class:"rotate-90"})]),_:1})]),_:1})]))]),P(Zn,null,{default:C(()=>[Ra(P(Rk,{show:M.value,id:ar(r),onClickNodes:we,onOnmousedown:me,workflowRef:_.value},null,8,["show","id","workflowRef"]),[[Wr,He]])]),_:1}),J("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:b},[A.value?(Ne(),gt(bne,{key:0,ref_key:"workflowRef",ref:_,data:(Ae=A.value)==null?void 0:Ae.workFlow},null,8,["data"])):Rn("",!0)],512),P(Zn,null,{default:C(()=>{var Ye,Ie,lt;return[O.value?(Ne(),sn("div",{key:0,class:Du(["workflow-debug-container",S.value?"enlarge":""])},[J("div",{class:Du(["workflow-debug-header",d.value?"":"custom-header"])},[J("div",$ne,[J("div",Bne,[J("div",Une,[ar(fw)((Ye=A.value)==null?void 0:Ye.icon)?(Ne(),gt(ie,{key:0,shape:"square",size:32,style:{background:"none"}},{default:C(()=>{var tn;return[J("img",{src:ar(Qp)((tn=A.value)==null?void 0:tn.icon),alt:""},null,8,Vne)]}),_:1})):(Ne(),gt(Jn,{key:1,height:"32px"}))]),J("h4",{class:"ellipsis",style:{"max-width":"270px"},title:(Ie=A.value)==null?void 0:Ie.name},Ee(((lt=A.value)==null?void 0:lt.name)||Xe.$t("views.application.form.appName.label")),9,Gne)]),J("div",Wne,[P(bt,{link:"",onClick:_t[5]||(_t[5]=tn=>S.value=!S.value)},{default:C(()=>[P(Cr,{iconName:S.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),P(bt,{link:"",onClick:_t[6]||(_t[6]=tn=>O.value=!1)},{default:C(()=>[P(Xt,{size:20,class:"color-secondary"},{default:C(()=>[P(on)]),_:1})]),_:1})])])],2),J("div",zne,[P(kr,{"application-details":A.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):Rn("",!0)]}),_:1}),z.value?Ra((Ne(),gt(kne,{key:0,onClick:Q,onRefreshVersion:K},null,512)),[[Wr,G]]):Rn("",!0)])),[[uo,x.value]])}}});export{lre as default};
