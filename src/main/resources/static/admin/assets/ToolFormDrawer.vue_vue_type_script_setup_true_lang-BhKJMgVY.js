import{aJ as G,aP as ae,aR as O,cE as i,cF as Z,aS as u,aT as L,aM as h,cI as l,aN as s,aL as Y,aU as M,aX as t,dz as $e,cN as $,aO as d,c_ as K,dt as ue,d4 as R,c$ as x,db as he,cO as E,d0 as ke,cU as we,cG as Ue,cH as Ie,aW as Ae,dn as Ee,dp as Me,cL as de,cJ as me,d3 as ye,aQ as ze,cS as Ne,aV as be,d8 as X,dv as Be,d5 as Ye}from"./admin-B8yAtLQA.js";import{_ as He}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-C7nT6RYu.js";const Oe={key:0},Ll=G({__name:"InitParamDrawer",emits:["refresh"],setup(j,{expose:I,emit:U}){const S=U,q=ae(),P=O(()=>q.path.includes("shared")?"systemShare":q.path.includes("resource-management")?"systemManage":"workspace"),y=i(),r=i(!1),w=i(!1),f=i({initParams:{}});Z(w,c=>{c||(f.value={initParams:{},isActive:!1})});const k=async()=>{y.value.validate().then(()=>{var c;K({type:"tool",systemType:P.value}).putTool((c=f.value)==null?void 0:c.id,f.value,r).then(g=>{ue(R("common.editSuccess")),S("refresh"),w.value=!1})})};return I({open:(c,g)=>{c&&(f.value=x.cloneDeep(c),f.value.isActive=g);const p=f.value.initFieldList.map(n=>n.show_default_value===!1?{[n.field]:void 0}:{[n.field]:n.default_value}).reduce((n,e)=>({...n,...e}),{});f.value.initParams={...p,...f.value.initParams},w.value=!0}}),(c,g)=>{const p=u("el-button"),n=u("el-drawer");return h(),L(n,{modelValue:w.value,"onUpdate:modelValue":g[2]||(g[2]=e=>w.value=e),size:"60%","append-to-body":!0},{header:l(()=>[s("h4",null,d(c.$t("common.param.initParam"))+"-",1)]),footer:l(()=>[s("div",null,[t(p,{type:"primary",onClick:g[1]||(g[1]=e=>k()),loading:r.value},{default:l(()=>[$(d(c.$t("common.save")),1)]),_:1},8,["loading"])])]),default:l(()=>{var e;return[s("div",null,[((e=f.value.initFieldList)==null?void 0:e.length)>0?(h(),Y("div",Oe,[t($e,{modelValue:f.value.initParams,"onUpdate:modelValue":g[0]||(g[0]=_=>f.value.initParams=_),model:f.value.initParams,"label-position":"top","require-asterisk-position":"right",render_data:f.value.initFieldList,ref_key:"dynamicsFormRef",ref:y},null,8,["modelValue","model","render_data"])])):M("",!0)])]}),_:1},8,["modelValue"])}}}),je={class:"dialog-footer"},Rl=G({__name:"AddInternalToolDialog",emits:["refresh"],setup(j,{expose:I,emit:U}){const S=U,q=i(),P=i(!1),y=i(!1),r=i({name:""}),w=he({name:[{required:!0,message:R("views.tool.form.toolName.placeholder"),trigger:"blur"}]}),f=i(!1);Z(f,c=>{c||(r.value={name:""})});const k=(c,g)=>{c&&(r.value=x.cloneDeep(c)),y.value=g||!1,f.value=!0},b=async c=>{c&&await c.validate(g=>{g&&(S("refresh",r.value,y.value),f.value=!1)})};return I({open:k}),(c,g)=>{const p=u("el-input"),n=u("el-form-item"),e=u("el-form"),_=u("el-button"),F=u("el-dialog");return h(),L(F,{title:c.$t("views.tool.form.toolName.name"),modelValue:f.value,"onUpdate:modelValue":g[3]||(g[3]=D=>f.value=D),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",width:"450"},{footer:l(()=>[s("span",je,[t(_,{onClick:g[1]||(g[1]=E(D=>f.value=!1,["prevent"]))},{default:l(()=>[$(d(c.$t("common.cancel")),1)]),_:1}),t(_,{type:"primary",onClick:g[2]||(g[2]=D=>b(q.value)),loading:P.value},{default:l(()=>[$(d(y.value?c.$t("common.save"):c.$t("common.add")),1)]),_:1},8,["loading"])])]),default:l(()=>[t(e,{"label-position":"top",ref_key:"fieldFormRef",ref:q,rules:w,model:r.value,"require-asterisk-position":"right"},{default:l(()=>[t(n,{prop:"name",label:c.$t("common.name")},{default:l(()=>[t(p,{modelValue:r.value.name,"onUpdate:modelValue":g[0]||(g[0]=D=>r.value.name=D),maxlength:"64","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),Je={class:"flex align-center",style:{"margin-left":"-8px"}},Ge={key:0,class:"mb-16"},Qe={class:"title-decoration-1 mb-16"},We={key:1,class:"mb-16"},Xe={class:"title-decoration-1 mb-16"},Ke={class:"flex"},Ze={key:0,class:"color-danger"},xe={key:2,class:"mt-8"},el={class:"title-decoration-1 mb-16 mt-16"},ll={class:"mb-16"},tl={class:"lighter mb-8"},ol=G({__name:"ToolDebugDrawer",setup(j,{expose:I}){const U=ae(),S=O(()=>U.path.includes("shared")?"systemShare":U.path.includes("resource-management")?"systemManage":"workspace"),q=i(),P=i(),y=i(!1),r=i(!1),w=i(!1),f=i(!1),k=i(""),b=i({debugFieldList:[],code:"",inputFieldList:[],initFieldList:[],initParams:{}});Z(r,p=>{p||(w.value=!1,f.value=!1,k.value="",b.value={debugFieldList:[],code:"",inputFieldList:[],initFieldList:[],initParams:{}})});const c=async p=>{var e;const n=p?await p.validate():await Promise.resolve();Promise.all([(e=P.value)==null?void 0:e.validate(),n]).then(()=>{K({type:"tool",systemType:S.value}).postToolDebug(b.value,y).then(_=>{_.code===500?(w.value=!0,f.value=!1,k.value=_.message):(w.value=!0,f.value=!0,k.value=_.data)})})};return I({open:p=>{p.inputFieldList.length>0&&p.inputFieldList.forEach(n=>{b.value.debugFieldList.push({value:"",...n})}),b.value.code=p.code,b.value.inputFieldList=p.inputFieldList,b.value.initFieldList=p.initFieldList,b.value.initParams=p.initParams,r.value=!0}}),(p,n)=>{const e=u("Back"),_=u("el-icon"),F=u("el-button"),D=u("el-card"),C=u("el-tag"),H=u("el-input"),m=u("el-form-item"),B=u("el-form"),ee=u("el-alert"),ne=u("el-drawer"),se=ke("loading");return h(),L(ne,{modelValue:r.value,"onUpdate:modelValue":n[4]||(n[4]=T=>r.value=T),size:"60%","append-to-body":!0,modal:!1},{header:l(()=>[s("div",Je,[t(F,{class:"cursor mr-4",link:"",onClick:n[0]||(n[0]=E(T=>r.value=!1,["prevent"]))},{default:l(()=>[t(_,{size:20},{default:l(()=>[t(e)]),_:1})]),_:1}),s("h4",null,d(p.$t("common.debug")),1)])]),default:l(()=>[s("div",null,[b.value.initFieldList.length>0?(h(),Y("div",Ge,[s("h4",Qe,d(p.$t("common.param.initParam")),1),t(D,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:l(()=>[t($e,{modelValue:b.value.initParams,"onUpdate:modelValue":n[1]||(n[1]=T=>b.value.initParams=T),model:b.value.initParams,"label-position":"top","require-asterisk-position":"right",render_data:b.value.initFieldList,ref_key:"dynamicsFormRef",ref:P},null,8,["modelValue","model","render_data"])]),_:1})])):M("",!0),b.value.debugFieldList.length>0?(h(),Y("div",We,[s("h4",Xe,d(p.$t("common.param.inputParam")),1),t(D,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:l(()=>[we((h(),L(B,{ref_key:"FormRef",ref:q,model:b.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":"",onSubmit:n[2]||(n[2]=E(()=>{},["prevent"]))},{default:l(()=>[(h(!0),Y(Ue,null,Ie(b.value.debugFieldList,(T,le)=>(h(),L(m,{key:le,label:T.name,prop:"debugFieldList."+le+".value",rules:{required:T.isRequired,message:p.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:l(()=>[s("div",Ke,[s("span",null,[$(d(T.name)+" ",1),T.isRequired?(h(),Y("span",Ze,"*")):M("",!0)]),t(C,{type:"info",class:"info-tag ml-4"},{default:l(()=>[$(d(T.type),1)]),_:2},1024)])]),default:l(()=>[t(H,{modelValue:T.value,"onUpdate:modelValue":te=>T.value=te,placeholder:p.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop","rules"]))),128))]),_:1},8,["model"])),[[se,y.value]])]),_:1})])):M("",!0),t(F,{type:"primary",onClick:n[3]||(n[3]=T=>c(q.value)),loading:y.value},{default:l(()=>[$(d(p.$t("views.tool.form.debug.run")),1)]),_:1},8,["loading"]),w.value?(h(),Y("div",xe,[s("h4",el,d(p.$t("views.tool.form.debug.runResult")),1),s("div",ll,[f.value?(h(),L(ee,{key:0,title:p.$t("views.tool.form.debug.runSuccess"),type:"success","show-icon":"",closable:!1},null,8,["title"])):(h(),L(ee,{key:1,title:p.$t("views.tool.form.debug.runFailed"),type:"error","show-icon":"",closable:!1},null,8,["title"]))]),s("p",tl,d(p.$t("views.tool.form.debug.output")),1),t(D,{class:Ae([f.value?"":"color-danger","pre-wrap"]),shadow:"never"},{default:l(()=>[$(d(String(k.value)=="0"?0:k.value||"-"),1)]),_:1},8,["class"])])):M("",!0)])]),_:1},8,["modelValue"])}}}),al={class:"dialog-footer"},nl=G({__name:"UserFieldFormDialog",emits:["refresh"],setup(j,{expose:I,emit:U}){const S=U,q=i(),P=i(!1),y=i(!1),r=i(),w=(e,_)=>e.every(F=>Me.get(_,F,void 0)!==void 0),f=O(()=>{if(r.value){const e=r.value;switch(e.type){case"input":return w(["field","input_type","label","required","attrs"],r.value)?r.value:{attrs:e.attrs||{maxlength:200,minlength:0},field:e.field||e.variable,input_type:"TextInput",label:e.label||e.name,default_value:e.default_value,required:e.required!=null?e.required:e.isRequired};case"select":return w(["field","input_type","label","required","option_list"],r.value)?r.value:{attrs:e.attrs||{},field:e.field||e.variable,input_type:"SingleSelect",label:e.label||e.name,default_value:e.default_value,required:e.required!=null?e.required:e.isRequired,option_list:e.option_list?e.option_list:e.optionList.map(_=>({key:_,value:_}))};case"date":return w(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],r.value)?r.value:{field:e.field||e.variable,input_type:"DatePicker",label:e.label||e.name,default_value:e.default_value,required:e.required!=null?e.required:e.isRequired,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return r.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:200,minlength:0},show_default_value:!0}}),k=i(null),b=i([{label:R("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:R("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:R("dynamicsForm.input_type_list.Slider"),value:"SliderConstructor"},{label:R("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:R("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:R("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:R("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:R("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),c=i(!1),g=(e,_)=>{c.value=!0,e?(y.value=!0,r.value=x.cloneDeep(e),k.value=_):r.value=null},p=()=>{c.value=!1,y.value=!1,k.value=null,r.value=null},n=async()=>{const e=q.value;e&&await e.validate().then(()=>{S("refresh",e==null?void 0:e.getData(),k.value),y.value=!1,r.value=null,k.value=null})};return I({open:g,close:p}),(e,_)=>{const F=u("el-button"),D=u("el-dialog");return h(),L(D,{title:y.value?e.$t("common.param.editParam"):e.$t("common.param.addParam"),modelValue:c.value,"onUpdate:modelValue":_[2]||(_[2]=C=>c.value=C),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":p,"append-to-body":""},{footer:l(()=>[s("span",al,[t(F,{onClick:E(p,["prevent"])},{default:l(()=>[$(d(e.$t("common.cancel")),1)]),_:1}),t(F,{type:"primary",onClick:_[1]||(_[1]=C=>n()),loading:P.value},{default:l(()=>[$(d(y.value?e.$t("common.save"):e.$t("common.add")),1)]),_:1},8,["loading"])])]),default:l(()=>[t(Ee,{modelValue:f.value,"onUpdate:modelValue":_[0]||(_[0]=C=>f.value=C),"label-position":"top","require-asterisk-position":"right",input_type_list:b.value,ref_key:"DynamicsFormConstructorRef",ref:q},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),sl={class:"flex mt-8"},il=["src"],rl={class:"el-upload__tip info mt-8"},ul={class:"dialog-footer"},dl=G({__name:"EditAvatarDialog",emits:["refresh"],setup(j,{expose:I,emit:U}){const S=U,q=ae(),P=i(null),y=i(null),r=i(!1),w=i(!1),f=i(null),k=i("default"),b=O(()=>q.path.includes("shared")?"systemShare":q.path.includes("resource-management")?"systemManage":"workspace");O(()=>q.path.includes("shared")),Z(r,n=>{n||(P.value=null,y.value=null)});const c=n=>{k.value=me(n.icon)?"custom":"default",y.value=me(n.icon)?n.icon:null,f.value=x.cloneDeep(n),r.value=!0},g=n=>{if((n==null?void 0:n.size)/1024/1024<10)P.value=n,y.value=URL.createObjectURL(n.raw);else return ye(R("common.EditAvatarDialog.fileSizeExceeded")),!1};function p(){if(k.value==="default")S("refresh",""),r.value=!1;else if(k.value==="custom"&&P.value){const n=new FormData;n.append("file",P.value.raw),K({type:"tool",systemType:b.value}).putToolIcon(f.value.id,n,w).then(e=>{S("refresh",e.data),r.value=!1})}else ye(R("common.EditAvatarDialog.uploadImagePrompt"))}return I({open:c}),(n,e)=>{const _=u("el-avatar"),F=u("el-radio"),D=u("el-button"),C=u("el-upload"),H=u("el-radio-group"),m=u("el-dialog");return h(),L(m,{title:`Logo ${n.$t("common.setting")}`,modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=B=>r.value=B),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"550"},{footer:l(()=>[s("span",ul,[t(D,{onClick:e[1]||(e[1]=E(B=>r.value=!1,["prevent"]))},{default:l(()=>[$(d(n.$t("common.cancel")),1)]),_:1}),t(D,{type:"primary",onClick:p,loading:w.value},{default:l(()=>[$(d(n.$t("common.save")),1)]),_:1},8,["loading"])])]),default:l(()=>[t(H,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=B=>k.value=B),class:"radio-block mb-16"},{default:l(()=>[t(F,{value:"default"},{default:l(()=>[s("p",null,d(n.$t("common.EditAvatarDialog.default")),1),t(_,{class:"avatar-green",shape:"square",size:32},{default:l(()=>e[3]||(e[3]=[s("img",{src:de,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[3]})]),_:1}),t(F,{value:"custom"},{default:l(()=>[s("p",null,d(n.$t("common.EditAvatarDialog.customizeUpload")),1),s("div",sl,[y.value?(h(),L(_,{key:0,shape:"square",size:32,style:{background:"none"},class:"mr-16"},{default:l(()=>[s("img",{src:y.value,alt:""},null,8,il)]),_:1})):M("",!0),t(C,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":g},{default:l(()=>[t(D,{icon:"Upload",disabled:k.value!=="custom"},{default:l(()=>[$(d(n.$t("common.EditAvatarDialog.upload")),1)]),_:1},8,["disabled"])]),_:1},512)]),s("div",rl,d(n.$t("common.EditAvatarDialog.sizeTip")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),ml={class:"title-decoration-1 mb-16"},cl={class:"flex w-full"},pl=["src"],fl={class:"flex-between"},vl={class:"title-decoration-1 mb-16"},_l=["title"],gl={class:"mr-4"},yl={class:"flex-between"},bl={class:"title-decoration-1 mb-16"},$l={class:"mr-4"},hl={class:"title-decoration-1 mb-16"},kl={key:0,class:"mb-8"},wl={class:"title-decoration-1 mb-16 mt-16"},Fl={class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter"},ql=G({__name:"ToolFormDrawer",props:{title:String},emits:["refresh"],setup(j,{expose:I,emit:U}){const S=ae(),{folder:q,user:P}=ze(),y=O(()=>S.path.includes("shared")?"systemShare":S.path.includes("resource-management")?"systemManage":"workspace"),r=O(()=>Ne.tool[y.value]),w=U,f=i(),k=i(),b=i(),c=i(),g=i(),p=i(),n=i(),e=i(!1),_=i(!1),F=i(!1),D=i(!1),C=i(null),H=i(!1),m=i({name:"",desc:"",code:"",icon:"",inputFieldList:[],initFieldList:[],toolType:"CUSTOM"});Z(F,o=>{var a;o||(e.value=!1,D.value=!1,C.value=null,m.value={name:"",desc:"",code:"",icon:"",inputFieldList:[],initFieldList:[]},(a=n.value)==null||a.clearValidate())});const B=he({name:[{required:!0,message:R("views.tool.form.toolName.requiredMessage"),trigger:"blur"}]});function ee(o){m.value.code=o}function ne(){e.value||!se(m.value)?F.value=!1:Ye(R("common.tip"),R("views.tool.tip.saveMessage"),{confirmButtonText:R("common.confirm"),type:"warning"}).then(()=>{F.value=!1}).catch(()=>{})}function se(o){return Object.values(o).some(a=>Array.isArray(a)?a.length!==0:a!=null&&a!=="")}function T(){k.value.open(m.value)}function le(o){var a;(a=m.value.inputFieldList)==null||a.splice(o,1)}function te(o,a){typeof a<"u"&&(C.value=a),f.value.open(o)}function Fe(o){var a,A;C.value!==null?(a=m.value.inputFieldList)==null||a.splice(C.value,1,o):(A=m.value.inputFieldList)==null||A.push(o),C.value=null}function ce(o,a){typeof a<"u"&&(C.value=a),b.value.open(o)}function Ve(o){var a,A;C.value!==null?(a=m.value.initFieldList)==null||a.splice(C.value,1,o):(A=m.value.initFieldList)==null||A.push(o),C.value=null,b.value.close()}function De(o){m.value.icon=o}function Ce(o){var a;(a=m.value.initFieldList)==null||a.splice(o,1)}function Le(){c.value.open(m.value)}const Re=async o=>{o&&await o.validate(a=>{var A,Q;if(a)if(e.value)K({type:"tool",systemType:y.value}).putTool((A=m.value)==null?void 0:A.id,m.value,_).then(J=>(ue(R("common.editSuccess")),w("refresh",J.data),P.profile())).then(()=>{F.value=!1});else{const J={folderId:(Q=q.currentFolder)==null?void 0:Q.id,...m.value};K({type:"tool",systemType:y.value}).postTool(J,_).then(ie=>(ue(R("common.createSuccess")),w("refresh"),P.profile())).then(()=>{F.value=!1})}})};return I({open:o=>{o&&(e.value=!!(o!=null&&o.id),m.value=x.cloneDeep(o)),F.value=!0,setTimeout(()=>{D.value=!0},100)}}),(o,a)=>{const A=u("el-Avatar"),Q=u("el-avatar"),J=u("el-input"),ie=u("el-form-item"),qe=u("el-form"),pe=u("Plus"),fe=u("el-icon"),z=u("el-button"),N=u("el-table-column"),ve=u("el-tag"),_e=u("el-switch"),oe=u("el-tooltip"),ge=u("el-table"),re=u("el-text"),Pe=u("CodemirrorEditor"),Te=u("el-drawer"),Se=ke("loading");return h(),L(Te,{modelValue:F.value,"onUpdate:modelValue":a[14]||(a[14]=v=>F.value=v),size:"60%","before-close":ne},{header:l(()=>[s("h4",null,d(j.title),1)]),footer:l(()=>{var v;return[s("div",null,[t(z,{loading:_.value,onClick:a[12]||(a[12]=V=>F.value=!1)},{default:l(()=>[$(d(o.$t("common.cancel")),1)]),_:1},8,["loading"]),r.value.debug()?(h(),L(z,{key:0,loading:_.value,onClick:T},{default:l(()=>[$(d(o.$t("common.debug")),1)]),_:1},8,["loading"])):M("",!0),(e.value?r.value.edit((v=m.value)==null?void 0:v.id):r.value.create())?(h(),L(z,{key:1,type:"primary",onClick:a[13]||(a[13]=V=>Re(n.value)),loading:_.value},{default:l(()=>[$(d(e.value?o.$t("common.save"):o.$t("common.create")),1)]),_:1},8,["loading"])):M("",!0)])]}),default:l(()=>[s("div",null,[s("h4",ml,d(o.$t("views.model.modelForm.title.baseInfo")),1),we((h(),L(qe,{ref_key:"FormRef",ref:n,model:m.value,rules:B,"label-position":"top","require-asterisk-position":"right",onSubmit:a[6]||(a[6]=E(()=>{},["prevent"]))},{default:l(()=>[t(ie,{label:o.$t("views.tool.form.toolName.label"),prop:"name"},{default:l(()=>[s("div",cl,[m.value.id?(h(),Y("div",{key:0,class:"edit-avatar mr-12",onMouseenter:a[0]||(a[0]=v=>H.value=!0),onMouseleave:a[1]||(a[1]=v=>H.value=!1)},[be(me)(m.value.icon)?(h(),L(A,{key:0,id:m.value.id,shape:"square",size:32,style:{background:"none"}},{default:l(()=>[s("img",{src:String(m.value.icon),alt:""},null,8,pl)]),_:1},8,["id"])):(h(),L(Q,{key:1,class:"avatar-green",shape:"square",size:32},{default:l(()=>a[15]||(a[15]=[s("img",{src:de,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[15]})),H.value?(h(),L(A,{key:2,id:m.value.id,shape:"square",class:"edit-mask",size:32,onClick:Le},{default:l(()=>[t(X,{iconName:"app-edit"})]),_:1},8,["id"])):M("",!0)],32)):(h(),L(Q,{key:1,class:"avatar-green mr-12",shape:"square",size:32},{default:l(()=>a[16]||(a[16]=[s("img",{src:de,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[16]})),t(J,{modelValue:m.value.name,"onUpdate:modelValue":a[2]||(a[2]=v=>m.value.name=v),placeholder:o.$t("views.tool.form.toolName.placeholder"),maxlength:"64","show-word-limit":"",onBlur:a[3]||(a[3]=v=>{var V;return m.value.name=(V=m.value.name)==null?void 0:V.trim()})},null,8,["modelValue","placeholder"])])]),_:1},8,["label"]),t(ie,{label:o.$t("views.tool.form.toolDescription.label")},{default:l(()=>[t(J,{modelValue:m.value.desc,"onUpdate:modelValue":a[4]||(a[4]=v=>m.value.desc=v),type:"textarea",placeholder:o.$t("views.tool.form.toolDescription.placeholder"),maxlength:"128","show-word-limit":"",autosize:{minRows:3},onBlur:a[5]||(a[5]=v=>{var V;return m.value.desc=(V=m.value.desc)==null?void 0:V.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[Se,_.value]]),s("div",fl,[s("h4",vl,d(o.$t("common.param.initParam")),1),t(z,{link:"",type:"primary",onClick:a[7]||(a[7]=v=>ce())},{default:l(()=>[t(fe,{class:"mr-4"},{default:l(()=>[t(pe)]),_:1}),$(" "+d(o.$t("common.add")),1)]),_:1})]),t(ge,{ref_key:"initFieldTableRef",ref:g,data:m.value.initFieldList,class:"mb-16"},{default:l(()=>[t(N,{prop:"field",label:o.$t("dynamicsForm.paramForm.field.label")},{default:l(({row:v})=>[s("span",{title:v.field,class:"ellipsis-1"},d(v.field),9,_l)]),_:1},8,["label"]),t(N,{label:o.$t("dynamicsForm.paramForm.input_type.label")},{default:l(({row:v})=>[t(ve,{type:"info",class:"info-tag"},{default:l(()=>{var V;return[$(d((V=be(Be).find(W=>W.value===v.input_type))==null?void 0:V.label),1)]}),_:2},1024)]),_:1},8,["label"]),t(N,{label:o.$t("common.required")},{default:l(({row:v})=>[s("div",{onClick:a[8]||(a[8]=E(()=>{},["stop"]))},[t(_e,{disabled:"",size:"small",modelValue:v.required,"onUpdate:modelValue":V=>v.required=V},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),t(N,{label:o.$t("common.operation"),align:"left",width:"90"},{default:l(({row:v,$index:V})=>[s("span",gl,[t(oe,{effect:"dark",content:o.$t("common.modify"),placement:"top"},{default:l(()=>[t(z,{type:"primary",text:"",onClick:E(W=>ce(v,V),["stop"])},{default:l(()=>[t(X,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),t(oe,{effect:"dark",content:o.$t("common.delete"),placement:"top"},{default:l(()=>[t(z,{type:"primary",text:"",onClick:W=>Ce(V)},{default:l(()=>[t(X,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"]),s("div",yl,[s("h4",bl,[$(d(o.$t("common.param.inputParam"))+" ",1),t(re,{type:"info",class:"color-secondary"},{default:l(()=>[$(d(o.$t("views.tool.form.param.paramInfo1")),1)]),_:1})]),t(z,{link:"",type:"primary",onClick:a[9]||(a[9]=v=>te())},{default:l(()=>[t(fe,{class:"mr-4"},{default:l(()=>[t(pe)]),_:1}),$(" "+d(o.$t("common.add")),1)]),_:1})]),t(ge,{ref_key:"inputFieldTableRef",ref:p,data:m.value.inputFieldList,class:"mb-16"},{default:l(()=>[t(N,{prop:"name",label:o.$t("views.tool.form.paramName.label")},null,8,["label"]),t(N,{label:o.$t("views.tool.form.dataType.label")},{default:l(({row:v})=>[t(ve,{type:"info",class:"info-tag"},{default:l(()=>[$(d(v.type),1)]),_:2},1024)]),_:1},8,["label"]),t(N,{label:o.$t("common.required")},{default:l(({row:v})=>[s("div",{onClick:a[10]||(a[10]=E(()=>{},["stop"]))},[t(_e,{size:"small",modelValue:v.isRequired,"onUpdate:modelValue":V=>v.isRequired=V},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),t(N,{prop:"source",label:o.$t("views.tool.form.source.label")},{default:l(({row:v})=>[$(d(v.source==="custom"?o.$t("common.custom"):o.$t("views.tool.form.source.reference")),1)]),_:1},8,["label"]),t(N,{label:o.$t("common.operation"),align:"left",width:"90"},{default:l(({row:v,$index:V})=>[s("span",$l,[t(oe,{effect:"dark",content:o.$t("common.modify"),placement:"top"},{default:l(()=>[t(z,{type:"primary",text:"",onClick:E(W=>te(v,V),["stop"])},{default:l(()=>[t(X,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),t(oe,{effect:"dark",content:o.$t("common.delete"),placement:"top"},{default:l(()=>[t(z,{type:"primary",text:"",onClick:W=>le(V)},{default:l(()=>[t(X,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"]),s("h4",hl,[$(d(o.$t("views.tool.form.param.code"))+" ",1),a[17]||(a[17]=s("span",{style:{color:"red","margin-left":"-10px"}},"*",-1)),t(re,{type:"info",class:"color-secondary"},{default:l(()=>[$(d(o.$t("views.tool.form.param.paramInfo2")),1)]),_:1})]),D.value?(h(),Y("div",kl,[t(Pe,{title:o.$t("views.tool.form.param.code"),modelValue:m.value.code,"onUpdate:modelValue":a[11]||(a[11]=v=>m.value.code=v),onSubmitDialog:ee},null,8,["title","modelValue"])])):M("",!0),s("h4",wl,[$(d(o.$t("common.param.outputParam"))+" ",1),t(re,{type:"info",class:"color-secondary"},{default:l(()=>[$(d(o.$t("views.tool.form.param.paramInfo1")),1)]),_:1})]),s("div",Fl,[s("span",null,d(o.$t("common.result"))+" {result}",1)])]),t(ol,{ref_key:"ToolDebugDrawerRef",ref:k},null,512),t(He,{ref_key:"FieldFormDialogRef",ref:f,onRefresh:Fe},null,512),t(nl,{ref_key:"UserFieldFormDialogRef",ref:b,onRefresh:Ve},null,512),t(dl,{ref_key:"EditAvatarDialogRef",ref:c,onRefresh:De},null,512)]),_:1},8,["modelValue"])}}});export{Ll as _,ql as a,Rl as b,dl as c};
