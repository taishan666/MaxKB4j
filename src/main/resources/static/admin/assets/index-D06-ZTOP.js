var bt=Object.defineProperty;var $t=(O,$,R)=>$ in O?bt(O,$,{enumerable:!0,configurable:!0,writable:!0,value:R}):O[$]=R;var He=(O,$,R)=>$t(O,typeof $!="symbol"?$+"":$,R);import{aJ as ve,aP as Se,aR as oe,cE as T,df as Dt,d4 as v,cF as je,aS as _,aT as c,aM as o,cI as t,aX as l,aU as E,aL as W,cG as ce,cH as be,aV as a,cN as r,aO as s,aN as M,cO as Y,c_ as F,dx as J,aQ as qe,c$ as Ke,cV as Mt,aK as Tt,eT as Rt,ew as Nt,cS as It,cT as Ut,dK as Vt,d0 as At,cU as Lt,dc as K,eG as Gt,eU as Bt,aW as te,eA as Pt,dI as Oe,d5 as ye,d3 as Ft,cP as Ht}from"./admin-DFhI7UQw.js";import{S as Kt}from"./SyncWebDialog-ChWkvIkl.js";import{_ as Ot}from"./index.vue_vue_type_script_setup_true_lang-BJ6QTjW_.js";var he=(O=>(O.optimization="views.document.hitHandlingMethod.optimization",O.directly_return="views.document.hitHandlingMethod.directly_return",O))(he||{});const zt={class:"flex align-center"},jt={class:"mr-4"},qt={class:"lighter w-full",style:{"margin-top":"-20px"}},Qt={class:"dialog-footer"},Wt=ve({__name:"ImportDocumentDialog",props:{title:String},emits:["refresh"],setup(O,{expose:$,emit:R}){const i=Se(),{params:{id:D}}=i,L=oe(()=>i.path.includes("shared")?"systemShare":i.path.includes("resource-management")?"systemManage":"workspace"),w=R,p=T(),n=T(!1),S=T(!1),f=T({sourceUrl:"",selector:"",hitHandlingMethod:"optimization",directlyReturnSimilarity:.9}),G=T(""),N=T(""),h=T([]),U=Dt({sourceUrl:[{required:!0,message:v("views.document.form.sourceUrl.requiredMessage"),trigger:"blur"}],directlyReturnSimilarity:[{required:!0,message:v("views.document.form.similarity.requiredMessage"),trigger:"blur"}]}),V=T(!1);je(V,m=>{m||(f.value={sourceUrl:"",selector:"",hitHandlingMethod:"optimization",directlyReturnSimilarity:.9},S.value=!1,N.value="",G.value="",h.value=[])});const le=(m,k)=>{m?(N.value=m.type,G.value=m.id,f.value={hitHandlingMethod:m.hitHandlingMethod,directlyReturnSimilarity:m.directlyReturnSimilarity,...m.meta,meta:m.meta},S.value=!1):k?h.value=k:(N.value=1,S.value=!0),V.value=!0},B=async m=>{m&&await m.validate(k=>{if(k){if(S.value){const b={sourceUrlList:f.value.sourceUrl.split(`
`),selector:f.value.selector};F({type:"document",systemType:L.value}).postWebDocument(D,b,n).then(()=>{J(v("views.document.tip.importMessage")),w("refresh"),V.value=!1})}else if(G.value){const b={hitHandlingMethod:f.value.hitHandlingMethod,directlyReturnSimilarity:f.value.directlyReturnSimilarity,meta:{...f.value.meta,sourceUrl:f.value.sourceUrl,selector:f.value.selector}};F({type:"document",systemType:L.value}).putDocument(D,G.value,b,n).then(()=>{J(v("common.settingSuccess")),w("refresh"),V.value=!1})}else if(h.value.length>0){const b={hitHandlingMethod:f.value.hitHandlingMethod,directlyReturnSimilarity:f.value.directlyReturnSimilarity,idList:h.value};F({type:"document",systemType:L.value}).putBatchEditHitHandling(D,b,n).then(()=>{J(v("common.settingSuccess")),w("refresh"),V.value=!1})}}})};return $({open:le}),(m,k)=>{const b=_("el-input"),Q=_("el-form-item"),ae=_("AppIcon"),re=_("el-tooltip"),P=_("el-radio"),X=_("el-radio-group"),se=_("el-input-number"),q=_("el-form"),A=_("el-button"),me=_("el-dialog");return o(),c(me,{title:O.title,modelValue:V.value,"onUpdate:modelValue":k[7]||(k[7]=j=>V.value=j),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,width:"550"},{footer:t(()=>[M("span",Qt,[l(A,{onClick:k[5]||(k[5]=Y(j=>V.value=!1,["prevent"]))},{default:t(()=>[r(s(m.$t("common.cancel")),1)]),_:1}),l(A,{type:"primary",onClick:k[6]||(k[6]=j=>B(p.value)),loading:n.value},{default:t(()=>[r(s(m.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[l(q,{"label-position":"top",ref_key:"webFormRef",ref:p,rules:U,model:f.value,"require-asterisk-position":"right"},{default:t(()=>[S.value?(o(),c(Q,{key:0,label:m.$t("views.document.form.sourceUrl.label"),prop:"sourceUrl"},{default:t(()=>[l(b,{modelValue:f.value.sourceUrl,"onUpdate:modelValue":k[0]||(k[0]=j=>f.value.sourceUrl=j),placeholder:m.$t("views.document.form.sourceUrl.placeholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):!S.value&&N.value===1?(o(),c(Q,{key:1,label:m.$t("views.document.form.sourceUrl.label"),prop:"sourceUrl"},{default:t(()=>[l(b,{modelValue:f.value.sourceUrl,"onUpdate:modelValue":k[1]||(k[1]=j=>f.value.sourceUrl=j),placeholder:m.$t("views.document.form.sourceUrl.requiredMessage")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):E("",!0),N.value===1?(o(),c(Q,{key:2,label:m.$t("views.document.form.selector.label")},{default:t(()=>[l(b,{modelValue:f.value.selector,"onUpdate:modelValue":k[2]||(k[2]=j=>f.value.selector=j),placeholder:m.$t("views.document.form.selector.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):E("",!0),S.value?E("",!0):(o(),c(Q,{key:3},{label:t(()=>[M("div",zt,[M("span",jt,s(m.$t("views.document.form.hitHandlingMethod.label")),1),l(re,{effect:"dark",content:m.$t("views.document.form.hitHandlingMethod.tooltip"),placement:"right"},{default:t(()=>[l(ae,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:t(()=>[l(X,{modelValue:f.value.hitHandlingMethod,"onUpdate:modelValue":k[3]||(k[3]=j=>f.value.hitHandlingMethod=j),class:"radio-block mt-4"},{default:t(()=>[(o(!0),W(ce,null,be(a(he),(j,fe)=>(o(),c(P,{key:fe,value:fe},{default:t(()=>[r(s(m.$t(j)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})),!S.value&&f.value.hitHandlingMethod==="directly_return"?(o(),c(Q,{key:4,prop:"directlyReturnSimilarity"},{default:t(()=>[M("div",qt,[M("span",null,s(m.$t("views.document.form.similarity.label")),1),l(se,{modelValue:f.value.directlyReturnSimilarity,"onUpdate:modelValue":k[4]||(k[4]=j=>f.value.directlyReturnSimilarity=j),min:0,max:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",size:"small",class:"ml-4 mr-4"},null,8,["modelValue"]),M("span",null,s(m.$t("views.document.form.similarity.placeholder")),1)])]),_:1})):E("",!0)]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),Zt="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.833496%203.33333C0.833496%202.8731%201.20659%202.5%201.66683%202.5H8.6518C8.96744%202.5%209.256%202.67834%209.39716%202.96066L10.0002%204.16667H18.3335C18.7937%204.16667%2019.1668%204.53976%2019.1668%205V16.6667C19.1668%2017.1269%2018.7937%2017.5%2018.3335%2017.5H1.66683C1.20659%2017.5%200.833496%2017.1269%200.833496%2016.6667V3.33333Z'%20fill='%23FFA53D'/%3e%3cpath%20d='M0.833496%204.99999C0.833496%204.53975%201.20659%204.16666%201.66683%204.16666H18.3335C18.7937%204.16666%2019.1668%204.53975%2019.1668%204.99999V16.6667C19.1668%2017.1269%2018.7937%2017.5%2018.3335%2017.5H1.66683C1.20659%2017.5%200.833496%2017.1269%200.833496%2016.6667V4.99999Z'%20fill='%23FFC60A'/%3e%3c/svg%3e",Yt={class:"flex align-center"},Jt={class:"dialog-footer"},Xt=ve({__name:"SelectKnowledgeDialog",props:{workspaceId:{type:String}},emits:["refresh"],setup(O,{expose:$,emit:R}){const i=Se(),{params:{id:D}}=i,{user:L}=qe(),w=O,p=oe(()=>i.path.includes("shared")?"systemShare":i.path.includes("resource-management")?"systemManage":"workspace"),n=R,S=T(!1),f=T(!1),G=T([]),N=T([]),h=T({selectKnowledge:""}),U={children:"children",label:"name",isLeaf:m=>m.resourceType?m.resourceType!=="folder":m.workspaceId==="None",disabled:(m,k)=>m.id===D||m.resourceType==="folder"&&(k==null?void 0:k.isLeaf)},V=async(m,k)=>{if(m.isLeaf)return k([]);const b=m.level===0?L.getWorkspaceId():m.data.id,Q=p.value==="systemManage"?{workspaceId:w.workspaceId,folderId:m.level===0?w.workspaceId:m.data.id}:{folderId:b};await F({type:"knowledge",systemType:p.value}).getKnowledgeList(Q,S).then(ae=>{k(ae.data)})};je(f,m=>{m||(h.value.selectKnowledge="",G.value=[],N.value=[])});const le=m=>{N.value=m,f.value=!0},B=()=>{F({type:"document",systemType:p.value}).putMigrateMulDocument(D,h.value.selectKnowledge,N.value,S).then(()=>{n("refresh"),f.value=!1})};return $({open:le}),(m,k)=>{const b=_("KnowledgeIcon"),Q=_("el-avatar"),ae=_("el-tree-select"),re=_("el-form-item"),P=_("el-form"),X=_("el-button"),se=_("el-dialog");return o(),c(se,{title:`${m.$t("views.document.migrateDocument")}`,modelValue:f.value,"onUpdate:modelValue":k[2]||(k[2]=q=>f.value=q),width:"600",class:"select-knowledge-dialog","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[M("span",Jt,[l(X,{onClick:k[1]||(k[1]=Y(q=>f.value=!1,["prevent"]))},{default:t(()=>[r(s(m.$t("common.cancel")),1)]),_:1}),l(X,{type:"primary",onClick:B,disabled:!h.value.selectKnowledge||S.value},{default:t(()=>[r(s(m.$t("common.confirm")),1)]),_:1},8,["disabled"])])]),default:t(()=>[l(P,{ref:"FormRef",model:h.value,"label-position":"top","require-asterisk-position":"right"},{default:t(()=>[l(re,{label:m.$t("views.chatLog.selectKnowledge"),required:""},{default:t(()=>[l(ae,{modelValue:h.value.selectKnowledge,"onUpdate:modelValue":k[0]||(k[0]=q=>h.value.selectKnowledge=q),props:U,"node-key":"id",lazy:"",load:V,placeholder:m.$t("views.chatLog.selectKnowledgePlaceholder")},{default:t(({data:q})=>[M("div",Yt,[q.resourceType!=="folder"?(o(),c(b,{key:0,class:"mr-12",size:20,type:q.type},null,8,["type"])):(o(),c(Q,{key:1,class:"mr-12",shape:"square",size:20,style:{background:"none"}},{default:t(()=>k[3]||(k[3]=[M("img",{src:Zt,style:{width:"100%"},alt:""},null,-1)])),_:1,__:[3]})),r(" "+s(q.name),1)])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),I={EMBEDDING:1,GENERATE_PROBLEM:2,SYNC:3},y={PENDING:"0",STARTED:"1",SUCCESS:"2",FAILURE:"3",REVOKE:"4",REVOKED:"5",IGNORED:"n"};class ze{constructor($){He(this,"task_status");$||($=""),$=$.split("").reverse().join(""),this.task_status={};for(const R in I){const i=I[R],D=i-1;this.task_status[i]=$[D]?$[D]:"n"}}toString(){const $=[];for(const R in I){const i=I[R];$.push(this.task_status[i])}return $.reverse().join("")}}const xt=ve({__name:"StatusTable",props:{status:{},statusMeta:{},stateMap:{},taskTypeMap:{}},setup(O){const $=O,R=w=>{const p=new ze(w.status);return Object.keys(I).map(n=>{const S=I[n];return{[S]:{[p.task_status[S]]:w.count}}}).reduce((n,S)=>({...n,...S}),{})},i=(w,p)=>w==null&&p?p:p==null&&w?w:typeof w=="object"&&typeof p=="object"?Ke.mergeWith(w,p,i):w+p,D=oe(()=>($.statusMeta.aggs?$.statusMeta.aggs:[]).map(w=>R(w)).reduce((w,p)=>Ke.mergeWith(w,p,i),{})),L=oe(()=>Object.keys(I).map(w=>{const p=I[w],n=new ze($.status);return{type:p,state:n.task_status[p],aggs:D.value[p],time:$.statusMeta.state_time[p]}}).filter(w=>w.state!==y.IGNORED));return(w,p)=>{const n=_("SuccessFilled"),S=_("el-icon"),f=_("el-text"),G=_("CircleCloseFilled"),N=_("Loading");return o(!0),W(ce,null,be(L.value,h=>(o(),W("div",{key:h.type},[M("span",null,s(w.taskTypeMap[h.type])+"ï¼š",1),M("span",null,[h.state===a(y).SUCCESS||h.state===a(y).REVOKED?(o(),c(f,{key:0},{default:t(()=>[l(S,{class:"color-success"},{default:t(()=>[l(n)]),_:1}),r(" "+s(w.stateMap[h.state](h.type)),1)]),_:2},1024)):h.state===a(y).FAILURE?(o(),c(f,{key:1},{default:t(()=>[l(S,{class:"color-danger"},{default:t(()=>[l(G)]),_:1}),r(" "+s(w.stateMap[h.state](h.type)),1)]),_:2},1024)):h.state===a(y).STARTED?(o(),c(f,{key:2},{default:t(()=>[l(S,{class:"is-loading color-primary"},{default:t(()=>[l(N)]),_:1}),r(" "+s(w.stateMap[h.state](h.type)),1)]),_:2},1024)):h.state===a(y).PENDING?(o(),c(f,{key:3},{default:t(()=>[l(S,{class:"is-loading color-primary"},{default:t(()=>[l(N)]),_:1}),r(" "+s(w.stateMap[h.state](h.type)),1)]),_:2},1024)):h.state===a(y).REVOKE?(o(),c(f,{key:4},{default:t(()=>[l(S,{class:"is-loading color-primary"},{default:t(()=>[l(N)]),_:1}),r(" "+s(w.stateMap[h.state](h.type)),1)]),_:2},1024)):E("",!0)]),M("span",{class:"ml-8 lighter",style:Mt({color:[a(y).FAILURE,a(y).REVOKED].includes(h.state)?"#F54A45":""})},s(w.$t("views.document.fileStatus.finish"))+" "+s(Object.keys(h.aggs?h.aggs:{}).filter(U=>U==a(y).SUCCESS).map(U=>h.aggs[U]).reduce((U,V)=>U+V,0))+"/"+s(Object.values(h.aggs?h.aggs:{}).reduce((U,V)=>U+V,0)),5),l(f,{type:"info",class:"ml-12"},{default:t(()=>{var U;return[r(s(h.time?(U=h.time[h.state==a(y).REVOKED?a(y).REVOKED:a(y).PENDING])==null?void 0:U.substring(0,19):void 0),1)]}),_:2},1024)]))),128)}}}),el=ve({__name:"Status",props:{status:{},statusMeta:{}},setup(O){const $=O,R=T(!1),i=[y.REVOKE,y.STARTED,y.PENDING,y.FAILURE,y.REVOKED,y.SUCCESS],D=oe(()=>{let n={key:0,value:""};for(const S in i){const f=i[S],G=$.status.indexOf(f);if(G>-1){n={key:$.status.length-G,value:f};break}}return n}),L={[I.EMBEDDING]:v("views.document.fileStatus.EMBEDDING"),[I.GENERATE_PROBLEM]:v("views.document.fileStatus.GENERATE"),[I.SYNC]:v("views.document.fileStatus.SYNC")},w={[I.EMBEDDING]:v("views.knowledge.setting.vectorization"),[I.GENERATE_PROBLEM]:v("views.document.generateQuestion.title"),[I.SYNC]:v("views.knowledge.setting.sync")},p={[y.PENDING]:n=>v("views.document.fileStatus.PENDING"),[y.STARTED]:n=>L[n],[y.REVOKE]:n=>v("views.document.fileStatus.REVOKE"),[y.REVOKED]:n=>v("views.document.fileStatus.SUCCESS"),[y.FAILURE]:n=>v("views.document.fileStatus.FAILURE"),[y.SUCCESS]:n=>v("views.document.fileStatus.SUCCESS")};return(n,S)=>{const f=_("SuccessFilled"),G=_("el-icon"),N=_("el-text"),h=_("CircleCloseFilled"),U=_("Loading"),V=_("el-popover");return o(),c(V,{visible:R.value,"onUpdate:visible":S[0]||(S[0]=le=>R.value=le),placement:"top",trigger:"hover","popper-style":{width:"auto"}},{default:t(()=>[R.value?(o(),c(xt,{key:0,status:n.status,statusMeta:n.statusMeta,taskTypeMap:w,stateMap:p},null,8,["status","statusMeta"])):E("",!0)]),reference:t(()=>{var le,B,m,k,b,Q;return[((le=D.value)==null?void 0:le.value)===a(y).SUCCESS||((B=D.value)==null?void 0:B.value)===a(y).REVOKED?(o(),c(N,{key:0},{default:t(()=>[l(G,{class:"color-success"},{default:t(()=>[l(f)]),_:1}),r(" "+s(p[D.value.value](D.value.key)),1)]),_:1})):((m=D.value)==null?void 0:m.value)===a(y).FAILURE?(o(),c(N,{key:1},{default:t(()=>[l(G,{class:"color-danger"},{default:t(()=>[l(h)]),_:1}),r(" "+s(p[D.value.value](D.value.key)),1)]),_:1})):((k=D.value)==null?void 0:k.value)===a(y).STARTED?(o(),c(N,{key:2},{default:t(()=>[l(G,{class:"is-loading color-primary"},{default:t(()=>[l(U)]),_:1}),r(" "+s(p[D.value.value](D.value.key)),1)]),_:1})):((b=D.value)==null?void 0:b.value)===a(y).PENDING?(o(),c(N,{key:3},{default:t(()=>[l(G,{class:"is-loading color-primary"},{default:t(()=>[l(U)]),_:1}),r(" "+s(p[D.value.value](D.value.key)),1)]),_:1})):((Q=D.value)==null?void 0:Q.value)===a(y).REVOKE?(o(),c(N,{key:4},{default:t(()=>[l(G,{class:"is-loading color-primary"},{default:t(()=>[l(U)]),_:1}),r(" "+s(p[D.value.value](D.value.key)),1)]),_:1})):E("",!0)]}),_:1},8,["visible"])}}}),tl={class:"dialog-footer"},ll=ve({__name:"EmbeddingContentDialog",setup(O,{expose:$}){const R=T(!1),i=T("error"),D={all:["0","1","2","3","4","5","n"],error:["0","1","3","4","5","n"]},L=T(),w=()=>{L.value&&L.value(D[i.value]),n()},p=S=>{L.value=S,R.value=!0},n=()=>{L.value=void 0,R.value=!1};return $({open:p,close:n}),(S,f)=>{const G=_("el-radio"),N=_("el-radio-group"),h=_("el-button"),U=_("el-dialog");return o(),c(U,{modelValue:R.value,"onUpdate:modelValue":f[1]||(f[1]=V=>R.value=V),title:S.$t("components.selectParagraph.title"),"before-close":n,width:"450"},{footer:t(()=>[M("div",tl,[l(h,{onClick:n},{default:t(()=>[r(s(S.$t("common.cancel")),1)]),_:1}),l(h,{type:"primary",onClick:w},{default:t(()=>[r(s(S.$t("common.submit")),1)]),_:1})])]),default:t(()=>[l(N,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=V=>i.value=V),class:"radio-block"},{default:t(()=>[l(G,{value:"error",size:"large"},{default:t(()=>[r(s(S.$t("components.selectParagraph.error")),1)]),_:1}),l(G,{value:"all",size:"large"},{default:t(()=>[r(s(S.$t("components.selectParagraph.all")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","title"])}}}),al={class:"document p-16-24"},nl={class:"mb-16"},ol={class:"main-calc-height"},sl={class:"p-24"},il={class:"flex-between"},ul={key:1},cl={key:0,class:"flex align-center"},rl={class:"color-secondary"},dl={key:1,class:"flex align-center"},ml={class:"color-secondary"},pl={class:"mr-4"},vl={key:0,class:"mr-4"},fl={class:"mr-4"},yl={class:"mr-4"},gl={class:"mr-4"},_l={class:"mr-4"},hl={key:0,class:"mul-operation w-full flex"},ue="documents",kl=ve({__name:"index",setup(O){const $=Se(),R=Tt(),{params:{id:i,folderId:D}}=$,{common:L}=qe();Rt(()=>{L.savePage(ue,null),L.saveCondition(ue,null)}),Nt(e=>{e.name!=="Paragraph"?(L.savePage(ue,null),L.saveCondition(ue,null)):L.saveCondition(ue,{filterText:k.value,filterMethod:b.value})});const w=oe(()=>D==="share"),p=oe(()=>$.path.includes("shared")?"systemShare":$.path.includes("resource-management")?"systemManage":$.path.includes("share/")?"workspaceShare":"workspace"),n=oe(()=>It.knowledge[p.value]),S=e=>n.value.doc_edit(e)||(P==null?void 0:P.value.type)===1&&n.value.doc_sync(e)||(P==null?void 0:P.value.type)===2&&n.value.doc_sync(e)||n.value.doc_delete(e),f=e=>n.value.doc_generate(e)||n.value.doc_migrate(e)||n.value.doc_export(e)||n.value.doc_download(e)||n.value.doc_delete(e),G=e=>n.value.doc_edit(e)||n.value.doc_generate(e)||n.value.doc_migrate(e)||n.value.doc_export(e)||n.value.doc_delete(e),N=(e,u)=>{const g=e.split("").reverse();return u-1>g.length+1?"n":g[u-1]},h=oe(()=>L.paginationConfig[ue]),U=oe(()=>L.search[ue]),V=T(),le=T(),B=T(!1);let m;const k=T(""),b=T({}),Q=T(""),ae=T([]),re=T(null),P=T({}),X=T({current_page:1,page_size:10,total:0}),se=T(),q=T(),A=T([]),me=T(""),j=T(),fe=e=>{F({type:"document",systemType:p.value}).exportDocument(e.name,e.knowledge_id,e.id,B).then(()=>{J(v("common.exportSuccess"))})},$e=e=>{F({type:"document",systemType:p.value}).exportDocumentZip(e.name,e.knowledge_id,e.id,B).then(()=>{J(v("common.exportSuccess"))})};function De(e){const u=[];A.value.map(C=>{C&&u.push(C.id)});const g={idList:u,type:e};F({type:"document",systemType:p.value}).putBatchCancelTask(i,g,B).then(()=>{var C;J(v("views.document.tip.cancelSuccess")),(C=q.value)==null||C.clearSelection()})}function Qe(){var e;(e=q.value)==null||e.clearSelection()}function ke(e){const u=[];e?u.push(e.id):A.value.map(g=>{g&&u.push(g.id)}),j.value.open(u)}function we(e){b.value[e.attr]=e.command,e.attr=="status"&&(b.value.task_type=e.task_type),z()}function x(e,u,g){return{attr:e,command:u,task_type:g}}const ge=(e,u)=>{F({type:"document",systemType:p.value}).putCancelTask(i,e.id,{type:u}).then(()=>{J(v("views.document.tip.sendMessage"))})};function We(){me.value=v("views.document.importDocument"),se.value.open()}function Me(e){me.value=v("common.setting"),se.value.open(e)}const Ze=e=>{A.value=e};function Ye(){me.value=v("common.setting");const e=A.value.map(u=>u.id);se.value.open(null,e)}const Je=()=>{m=setInterval(()=>{z(!0)},6e3)},Xe=()=>{m&&clearInterval(m)};function xe(e){+e.type==1?tt(e):et(e)}function et(e){ye(v("views.document.sync.confirmTitle"),v("views.document.sync.confirmMessage1"),{confirmButtonText:v("views.document.sync.label"),confirmButtonClass:"danger"}).then(()=>{F({type:"document",systemType:p.value}).putLarkDocumentSync(i,e.id).then(()=>{z()})}).catch(()=>{})}function tt(e){var u;(u=e.meta)!=null&&u.sourceUrl?ye(v("views.document.sync.confirmTitle"),v("views.document.sync.confirmMessage1"),{confirmButtonText:v("views.document.sync.label"),confirmButtonClass:"danger"}).then(()=>{F({type:"document",systemType:p.value}).putDocumentSync(e.knowledge_id,e.id).then(()=>{z()})}).catch(()=>{}):ye(v("common.tip"),v("views.document.sync.confirmMessage2"),{confirmButtonText:v("common.confirm"),type:"warning"}).then(()=>{}).catch(()=>{})}function Te(e){var g;const u=C=>F({type:"document",systemType:p.value}).putDocumentRefresh(e.knowledgeId,e.id,C).then(()=>{z()});(g=V.value)==null||g.open(u)}function lt(e,u){u&&u.type==="selection"||R.push({path:`/paragraph/${i}/${e.id}`,query:{from:p.value,isShared:w.value?"true":"false"}})}function at(e){B.value=!0;const u=[{name:e}];F({type:"document",systemType:p.value}).putMulDocument(i,u).then(()=>{z(),J(v("common.createSuccess"))}).catch(()=>{B.value=!1})}function nt(){const e=[];A.value.map(u=>{u&&e.push(u.id)}),F({type:"document",systemType:p.value}).putMulSyncDocument(i,e,B).then(()=>{J(v("views.document.sync.successMessage")),z()})}function ot(){const e=[];A.value.map(u=>{u&&e.push(u.id)}),F({type:"document",systemType:p.value}).putMulLarkSyncDocument(i,e,B).then(()=>{J(v("views.document.sync.successMessage")),z()})}function st(){ye(`${v("views.document.delete.confirmTitle1")} ${A.value.length} ${v("views.document.delete.confirmTitle2")}`,v("views.document.delete.confirmMessage"),{confirmButtonText:v("common.confirm"),confirmButtonClass:"danger"}).then(()=>{const e=[];A.value.map(u=>{u&&e.push(u.id)}),F({type:"document",systemType:p.value}).delMulDocument(i,e,B).then(()=>{var u;J(v("views.document.delete.successMessage")),(u=q.value)==null||u.clearSelection(),z()})}).catch(()=>{})}function it(){var g;const e=A.value.map(C=>C.id),u=C=>{F({type:"document",systemType:p.value}).putBatchRefresh(i,e,C,B).then(()=>{var ee;J(v("views.document.tip.vectorizationSuccess")),(ee=q.value)==null||ee.clearSelection()})};(g=V.value)==null||g.open(u)}function ut(e){F({type:"document",systemType:p.value}).getDownloadSourceFile(i,e.id,e.name).then(()=>{z()})}function Re(e){ye(`${v("views.document.delete.confirmTitle3")} ${e.name} ?`,`${v("views.document.delete.confirmMessage1")} ${e.paragraphCount} ${v("views.document.delete.confirmMessage2")}`,{confirmButtonText:v("common.confirm"),confirmButtonClass:"danger"}).then(()=>{F({type:"document",systemType:p.value}).delDocument(i,e.id,B).then(()=>{J(v("common.deleteSuccess")),z()})}).catch(()=>{})}function Ne(e,u,g){F({type:"document",systemType:p.value}).putDocument(i,e,u,B).then(C=>{const ee=ae.value.findIndex(ie=>ie.id===e);return ae.value.splice(ee,1,C.data),J(g),!0}).catch(()=>!1)}async function ct(e){const u={isActive:!e.isActive},g=e.isActive?v("common.status.disableSuccess"):v("common.status.enableSuccess");await Ne(e.id,u,g)}function rt(e,u){e?Ne(u,{name:e},v("common.modifySuccess")):Ft(v("views.document.tip.nameMessage"))}function dt(e){re.value=e.id}function mt(){re.value=null}function pt(){X.value.current_page=1,z()}function vt({prop:e,order:u}){Q.value=u==="ascending"?e:`-${e}`,z()}function z(e){const u={...k.value&&{name:k.value},...b.value,order_by:Q.value,folderId:D};F({type:"document",isShared:w.value,systemType:p.value}).getDocumentPage(i,X.value,u,e?void 0:B).then(g=>{ae.value=g.data.records,X.value.total=g.data.total})}function ft(){F({type:"knowledge",isShared:w.value,systemType:p.value}).getKnowledgeDetail(i,B).then(e=>{P.value=e.data})}function yt(){var e;(e=q.value)==null||e.clearSelection(),z()}function Ie(){X.value.current_page=1,z()}const Ue=T();function Ee(e){const u=[];e?u.push(e.id):A.value.map(g=>{g&&u.push(g.id)}),Ue.value.open(u,"document")}return Ut(()=>{ft(),h.value&&(X.value=h.value),U.value&&(k.value=U.value.filterText,b.value=U.value.filterMethod),z(),Je()}),Vt(()=>{Xe()}),(e,u)=>{var Ae;const g=_("el-button"),C=_("el-dropdown-item"),ee=_("el-dropdown-menu"),ie=_("el-dropdown"),gt=_("el-input"),ne=_("el-table-column"),Ce=_("Filter"),de=_("el-icon"),_t=_("SuccessFilled"),ht=_("el-switch"),kt=_("el-divider"),Ve=_("Close"),pe=_("el-tooltip"),wt=_("Download"),Et=_("el-card"),Ct=_("el-text"),St=At("loading");return o(),W("div",al,[M("h2",nl,s(e.$t("common.fileUpload.document")),1),l(Et,{style:{"--el-card-padding":"0"}},{default:t(()=>{var _e,Le,Ge,Be;return[M("div",ol,[M("div",sl,[M("div",il,[M("div",null,[w.value?E("",!0):(o(),W(ce,{key:0},[((_e=P.value)==null?void 0:_e.type)===0&&n.value.doc_create(a(i))?(o(),c(g,{key:0,type:"primary",onClick:u[0]||(u[0]=d=>a(R).push({path:`/knowledge/document/upload/${a(D)}`,query:{id:a(i)}}))},{default:t(()=>[r(s(e.$t("views.document.uploadDocument")),1)]),_:1})):E("",!0),((Le=P.value)==null?void 0:Le.type)===1&&n.value.doc_create(a(i))?(o(),c(g,{key:1,type:"primary",onClick:We},{default:t(()=>[r(s(e.$t("views.document.importDocument")),1)]),_:1})):E("",!0),((Ge=P.value)==null?void 0:Ge.type)===2&&n.value.doc_create(a(i))?(o(),c(g,{key:2,type:"primary",onClick:u[1]||(u[1]=d=>{var Z;return a(R).push({path:`/knowledge/import/${a(D)}`,query:{id:a(i),folder_token:(Z=P.value)==null?void 0:Z.meta.folder_token}})})},{default:t(()=>[r(s(e.$t("views.document.importDocument")),1)]),_:1})):E("",!0),n.value.doc_vector(a(i))?(o(),c(g,{key:3,onClick:it,disabled:A.value.length===0},{default:t(()=>[r(s(e.$t("views.knowledge.setting.vectorization")),1)]),_:1},8,["disabled"])):E("",!0),n.value.doc_generate(a(i))?(o(),c(g,{key:4,onClick:u[2]||(u[2]=d=>Ee()),disabled:A.value.length===0},{default:t(()=>[r(s(e.$t("views.document.generateQuestion.title")),1)]),_:1},8,["disabled"])):E("",!0),n.value.doc_migrate(a(i))?(o(),c(g,{key:5,onClick:u[3]||(u[3]=d=>ke()),disabled:A.value.length===0},{default:t(()=>[r(s(e.$t("views.document.setting.migration")),1)]),_:1},8,["disabled"])):E("",!0),S(a(i))?(o(),c(ie,{key:6},{dropdown:t(()=>[l(ee,null,{default:t(()=>{var d,Z;return[n.value.doc_edit(a(i))?(o(),c(C,{key:0,onClick:Ye,disabled:A.value.length===0},{default:t(()=>[r(s(e.$t("common.setting")),1)]),_:1},8,["disabled"])):E("",!0),((d=P.value)==null?void 0:d.type)===1&&n.value.doc_sync(a(i))?(o(),c(C,{key:1,divided:"",onClick:nt,disabled:A.value.length===0},{default:t(()=>[r(s(e.$t("views.document.syncDocument")),1)]),_:1},8,["disabled"])):E("",!0),((Z=P.value)==null?void 0:Z.type)===2&&n.value.doc_sync(a(i))?(o(),c(C,{key:2,divided:"",onClick:ot,disabled:A.value.length===0},{default:t(()=>[r(s(e.$t("views.document.syncDocument")),1)]),_:1},8,["disabled"])):E("",!0),n.value.doc_delete(a(i))?(o(),c(C,{key:3,divided:"",onClick:st,disabled:A.value.length===0},{default:t(()=>[r(s(e.$t("common.delete")),1)]),_:1},8,["disabled"])):E("",!0)]}),_:1})]),default:t(()=>[l(g,{class:"ml-12 mr-12"},{default:t(()=>[l(K,{iconName:"app-more"})]),_:1})]),_:1})):E("",!0)],64))]),l(gt,{modelValue:k.value,"onUpdate:modelValue":u[4]||(u[4]=d=>k.value=d),placeholder:e.$t("common.searchBar.placeholder"),"prefix-icon":"Search",class:"w-240",onChange:z,clearable:""},null,8,["modelValue","placeholder"])]),Lt((o(),c(Gt,{ref_key:"multipleTableRef",ref:q,class:"mt-16",data:ae.value,"pagination-config":X.value,"quick-create":((Be=P.value)==null?void 0:Be.type)===0&&n.value.doc_create(a(i))&&!w.value,onSizeChange:pt,onChangePage:z,onCellMouseEnter:dt,onCellMouseLeave:mt,onCreatQuick:at,onRowClick:lt,onSelectionChange:Ze,onSortChange:vt,"row-key":d=>d.id,storeKey:ue},{default:t(()=>[w.value?E("",!0):(o(),c(ne,{key:0,type:"selection",width:"55","reserve-selection":!0})),l(ne,{prop:"name",label:e.$t("views.document.table.name"),"min-width":"280"},{default:t(({row:d})=>[w.value?(o(),W("span",ul,s(d.name),1)):(o(),c(Bt,{key:0,onChange:Z=>rt(Z,d.id),data:d.name,showEditIcon:d.id===re.value},null,8,["onChange","data","showEditIcon"]))]),_:1},8,["label"]),l(ne,{prop:"status",label:e.$t("views.document.fileStatus.label"),width:"130"},{header:t(()=>[M("div",null,[M("span",null,s(e.$t("views.document.fileStatus.label")),1),l(ie,{trigger:"click",onCommand:we},{dropdown:t(()=>[l(ee,{style:{width:"100px"}},{default:t(()=>[l(C,{class:te([b.value.status?"":"is-active","justify-center"]),command:x("status","")},{default:t(()=>[r(s(e.$t("views.document.table.all")),1)]),_:1},8,["class","command"]),l(C,{class:te([b.value.status===a(y).SUCCESS?"is-active":"","justify-center"]),command:x("status",a(y).SUCCESS)},{default:t(()=>[r(s(e.$t("views.document.fileStatus.SUCCESS")),1)]),_:1},8,["class","command"]),l(C,{class:te([b.value.status===a(y).FAILURE?"is-active":"","justify-center"]),command:x("status",a(y).FAILURE)},{default:t(()=>[r(s(e.$t("views.document.fileStatus.FAILURE")),1)]),_:1},8,["class","command"]),l(C,{class:te([b.value.status===a(y).STARTED&&b.value.task_type==a(I).EMBEDDING?"is-active":"","justify-center"]),command:x("status",a(y).STARTED,a(I).EMBEDDING)},{default:t(()=>[r(s(e.$t("views.document.fileStatus.EMBEDDING")),1)]),_:1},8,["class","command"]),l(C,{class:te([b.value.status===a(y).PENDING?"is-active":"","justify-center"]),command:x("status",a(y).PENDING)},{default:t(()=>[r(s(e.$t("views.document.fileStatus.PENDING")),1)]),_:1},8,["class","command"]),l(C,{class:te([b.value.status===a(y).STARTED&&b.value.task_type===a(I).GENERATE_PROBLEM?"is-active":"","justify-center"]),command:x("status",a(y).STARTED,a(I).GENERATE_PROBLEM)},{default:t(()=>[r(s(e.$t("views.document.fileStatus.GENERATE")),1)]),_:1},8,["class","command"])]),_:1})]),default:t(()=>[l(g,{style:{"margin-top":"1px"},link:"",type:b.value.status?"primary":""},{default:t(()=>[l(de,null,{default:t(()=>[l(Ce)]),_:1})]),_:1},8,["type"])]),_:1})])]),default:t(({row:d})=>[l(el,{status:d.status,"status-meta":d.statusMeta},null,8,["status","status-meta"])]),_:1},8,["label"]),l(ne,{prop:"charLength",label:e.$t("views.document.table.char_length"),align:"right","min-width":"90",sortable:""},{default:t(({row:d})=>[r(s(a(Pt)(d.charLength)),1)]),_:1},8,["label"]),l(ne,{prop:"paragraphCount",label:e.$t("views.document.table.paragraph"),align:"right","min-width":"90",sortable:""},null,8,["label"]),l(ne,{width:"130"},{header:t(()=>[M("div",null,[M("span",null,s(e.$t("views.document.enableStatus.label")),1),l(ie,{trigger:"click",onCommand:we},{dropdown:t(()=>[l(ee,{style:{width:"100px"}},{default:t(()=>[l(C,{class:te([b.value.isActive===""?"is-active":"","justify-center"]),command:x("isActive","")},{default:t(()=>[r(s(e.$t("views.document.table.all")),1)]),_:1},8,["class","command"]),l(C,{class:te([b.value.isActive===!0?"is-active":"","justify-center"]),command:x("isActive",!0)},{default:t(()=>[r(s(e.$t("views.document.enableStatus.enable")),1)]),_:1},8,["class","command"]),l(C,{class:te([b.value.isActive===!1?"is-active":"","justify-center"]),command:x("isActive",!1)},{default:t(()=>[r(s(e.$t("views.document.enableStatus.close")),1)]),_:1},8,["class","command"])]),_:1})]),default:t(()=>[l(g,{style:{"margin-top":"1px"},link:"",type:b.value.isActive?"primary":""},{default:t(()=>[l(de,null,{default:t(()=>[l(Ce)]),_:1})]),_:1},8,["type"])]),_:1})])]),default:t(({row:d})=>[d.isActive?(o(),W("div",cl,[l(de,{class:"color-success mr-8",style:{"font-size":"16px"}},{default:t(()=>[l(_t)]),_:1}),M("span",rl,s(e.$t("common.status.enabled")),1)])):(o(),W("div",dl,[l(K,{iconName:"app-disabled",class:"color-secondary mr-8"}),M("span",ml,s(e.$t("common.status.disabled")),1)]))]),_:1}),l(ne,{width:"170"},{header:t(()=>[M("div",null,[M("span",null,s(e.$t("views.document.form.hitHandlingMethod.label")),1),l(ie,{trigger:"click",onCommand:we},{dropdown:t(()=>[l(ee,{style:{width:"150px"}},{default:t(()=>[l(C,{class:te([b.value.hitHandlingMethod?"":"is-active","justify-center"]),command:x("hitHandlingMethod","")},{default:t(()=>[r(s(e.$t("views.document.table.all")),1)]),_:1},8,["class","command"]),(o(!0),W(ce,null,be(a(he),(d,Z)=>(o(),c(C,{key:Z,class:te([b.value.hitHandlingMethod===Z?"is-active":"","justify-center"]),command:x("hitHandlingMethod",Z)},{default:t(()=>[r(s(e.$t(d)),1)]),_:2},1032,["class","command"]))),128))]),_:1})]),default:t(()=>[l(g,{style:{"margin-top":"1px"},link:"",type:b.value.hitHandlingMethod?"primary":""},{default:t(()=>[l(de,null,{default:t(()=>[l(Ce)]),_:1})]),_:1},8,["type"])]),_:1})])]),default:t(({row:d})=>[r(s(e.$t(a(he)[d.hitHandlingMethod])),1)]),_:1}),l(ne,{prop:"createTime",label:e.$t("common.createTime"),width:"175",sortable:""},{default:t(({row:d})=>[r(s(a(Oe)(d.createTime)),1)]),_:1},8,["label"]),l(ne,{prop:"updateTime",label:e.$t("views.document.table.updateTime"),width:"175",sortable:""},{default:t(({row:d})=>[r(s(a(Oe)(d.updateTime)),1)]),_:1},8,["label"]),w.value?E("",!0):(o(),c(ne,{key:1,label:e.$t("common.operation"),align:"left",width:"160",fixed:"right"},{default:t(({row:d})=>{var Z,Pe,Fe;return[M("span",{onClick:u[5]||(u[5]=Y(()=>{},["stop"]))},[n.value.doc_edit(a(i))?(o(),c(ht,{key:0,loading:B.value,size:"small",modelValue:d.isActive,"onUpdate:modelValue":H=>d.isActive=H,"before-change":()=>ct(d)},null,8,["loading","modelValue","onUpdate:modelValue","before-change"])):E("",!0)]),l(kt,{direction:"vertical"}),((Z=P.value)==null?void 0:Z.type)===0?(o(),W(ce,{key:0},[[a(y).STARTED,a(y).PENDING].includes(N(d.status,a(I).EMBEDDING))?(o(),c(pe,{key:0,effect:"dark",content:e.$t("views.document.setting.cancelVectorization"),placement:"top"},{default:t(()=>[M("span",pl,[n.value.doc_vector(a(i))?(o(),c(g,{key:0,type:"primary",text:"",onClick:Y(H=>ge(d,a(I).EMBEDDING),["stop"])},{default:t(()=>[l(de,null,{default:t(()=>[l(Ve)]),_:1})]),_:2},1032,["onClick"])):E("",!0)])]),_:2},1032,["content"])):(o(),c(pe,{key:1,effect:"dark",content:e.$t("views.knowledge.setting.vectorization"),placement:"top"},{default:t(()=>[n.value.doc_vector(a(i))?(o(),W("span",vl,[l(g,{type:"primary",text:"",onClick:Y(H=>Te(d),["stop"])},{default:t(()=>[l(K,{iconName:"app-document-refresh",style:{"font-size":"16px"}})]),_:2},1032,["onClick"])])):E("",!0)]),_:2},1032,["content"])),n.value.doc_edit(a(i))?(o(),c(pe,{key:2,effect:"dark",content:e.$t("common.setting"),placement:"top"},{default:t(()=>[M("span",fl,[l(g,{type:"primary",text:"",onClick:Y(H=>Me(d),["stop"])},{default:t(()=>[l(K,{iconName:"app-setting"})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])):E("",!0),M("span",{onClick:u[6]||(u[6]=Y(()=>{},["stop"]))},[f(a(i))?(o(),c(ie,{key:0,trigger:"click"},{dropdown:t(()=>[l(ee,null,{default:t(()=>[[a(y).STARTED,a(y).PENDING].includes(N(d.status,a(I).GENERATE_PROBLEM))&&n.value.doc_generate(a(i))?(o(),c(C,{key:0,onClick:H=>ge(d,a(I).GENERATE_PROBLEM)},{default:t(()=>[l(K,{iconName:"app-generate-question",class:"color-secondary"}),r(" "+s(e.$t("views.document.setting.cancelGenerateQuestion")),1)]),_:2},1032,["onClick"])):(o(),W(ce,{key:1},[n.value.doc_generate(a(i))?(o(),c(C,{key:0,onClick:H=>Ee(d)},{default:t(()=>[l(K,{iconName:"app-generate-question",class:"color-secondary"}),r(" "+s(e.$t("views.document.generateQuestion.title")),1)]),_:2},1032,["onClick"])):E("",!0)],64)),n.value.doc_migrate(a(i))?(o(),c(C,{key:2,onClick:H=>ke(d)},{default:t(()=>[l(K,{iconName:"app-migrate",class:"color-secondary"}),r(" "+s(e.$t("views.document.setting.migration")),1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_export(a(i))?(o(),c(C,{key:3,onClick:H=>fe(d)},{default:t(()=>[l(K,{iconName:"app-export",class:"color-secondary"}),r(" "+s(e.$t("views.document.setting.export"))+" Excel ",1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_export(a(i))?(o(),c(C,{key:4,onClick:H=>$e(d)},{default:t(()=>[l(K,{iconName:"app-export",class:"color-secondary"}),r(" "+s(e.$t("views.document.setting.export"))+" Zip ",1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_download(a(i))?(o(),c(C,{key:5,onClick:Y(H=>ut(d),["stop"])},{default:t(()=>[l(de,{class:"color-secondary"},{default:t(()=>[l(wt)]),_:1}),r(" "+s(e.$t("views.document.setting.download")),1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_delete(a(i))?(o(),c(C,{key:6,onClick:Y(H=>Re(d),["stop"])},{default:t(()=>[l(K,{iconName:"app-delete",class:"color-secondary"}),r(" "+s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])):E("",!0)]),_:2},1024)]),default:t(()=>[l(g,{text:"",type:"primary"},{default:t(()=>[l(K,{iconName:"app-more"})]),_:1})]),_:2},1024)):E("",!0)])],64)):E("",!0),((Pe=P.value)==null?void 0:Pe.type)===1||((Fe=P.value)==null?void 0:Fe.type)===2?(o(),W(ce,{key:1},[n.value.sync(a(i))?(o(),c(pe,{key:0,effect:"dark",content:e.$t("views.knowledge.setting.sync"),placement:"top"},{default:t(()=>[M("span",yl,[l(g,{type:"primary",text:"",onClick:Y(H=>xe(d),["stop"])},{default:t(()=>[l(K,{iconName:"app-sync"})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])):E("",!0),[a(y).STARTED,a(y).PENDING].includes(N(d.status,a(I).EMBEDDING))&&n.value.doc_vector(a(i))?(o(),c(pe,{key:1,effect:"dark",content:e.$t("views.document.setting.cancelVectorization"),placement:"top"},{default:t(()=>[M("span",gl,[l(g,{type:"primary",text:"",onClick:Y(H=>ge(d,a(I).EMBEDDING),["stop"])},{default:t(()=>[l(de,null,{default:t(()=>[l(Ve)]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])):(o(),c(pe,{key:2,effect:"dark",content:e.$t("views.knowledge.setting.vectorization"),placement:"top"},{default:t(()=>[M("span",_l,[l(g,{type:"primary",text:"",onClick:Y(H=>Te(d),["stop"])},{default:t(()=>[l(K,{iconName:"app-document-refresh",style:{"font-size":"16px"}})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])),M("span",{onClick:u[7]||(u[7]=Y(()=>{},["stop"]))},[G(a(i))?(o(),c(ie,{key:0,trigger:"click"},{dropdown:t(()=>[l(ee,null,{default:t(()=>[n.value.doc_edit(a(i))?(o(),c(C,{key:0,onClick:H=>Me(d)},{default:t(()=>[l(K,{iconName:"app-setting"}),r(" "+s(e.$t("common.setting")),1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_generate(a(i))&&[a(y).STARTED,a(y).PENDING].includes(N(d.status,a(I).GENERATE_PROBLEM))?(o(),c(C,{key:1,onClick:H=>ge(d,a(I).GENERATE_PROBLEM)},{default:t(()=>[l(K,{iconName:"app-generate-question"}),r(" "+s(e.$t("views.document.setting.cancelGenerateQuestion")),1)]),_:2},1032,["onClick"])):(o(),W(ce,{key:2},[n.value.doc_generate(a(i))?(o(),c(C,{key:0,onClick:H=>Ee(d)},{default:t(()=>[l(K,{iconName:"app-generate-question"}),r(" "+s(e.$t("views.document.generateQuestion.title")),1)]),_:2},1032,["onClick"])):E("",!0)],64)),n.value.doc_migrate(a(i))?(o(),c(C,{key:3,onClick:H=>ke(d)},{default:t(()=>[l(K,{iconName:"app-migrate"}),r(" "+s(e.$t("views.document.setting.migration")),1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_export(a(i))?(o(),c(C,{key:4,onClick:H=>fe(d)},{default:t(()=>[l(K,{iconName:"app-export"}),r(" "+s(e.$t("views.document.setting.export"))+" Excel ",1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_export(a(i))?(o(),c(C,{key:5,onClick:H=>$e(d)},{default:t(()=>[l(K,{iconName:"app-export"}),r(" "+s(e.$t("views.document.setting.export"))+" Zip ",1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_delete(a(i))?(o(),c(C,{key:6,onClick:Y(H=>Re(d),["stop"])},{default:t(()=>[l(K,{iconName:"app-delete"}),r(" "+s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])):E("",!0)]),_:2},1024)]),default:t(()=>[l(g,{text:"",type:"primary"},{default:t(()=>[l(K,{iconName:"app-more"})]),_:1})]),_:2},1024)):E("",!0)])],64)):E("",!0)]}),_:1},8,["label"]))]),_:1},8,["data","pagination-config","quick-create","row-key"])),[[St,B.value]])])])]}),_:1}),A.value.length!==0?(o(),W("div",hl,[n.value.doc_vector(a(i))?(o(),c(g,{key:0,disabled:A.value.length===0,onClick:u[8]||(u[8]=_e=>De(1))},{default:t(()=>[r(s(e.$t("views.document.setting.cancelVectorization")),1)]),_:1},8,["disabled"])):E("",!0),n.value.doc_generate(a(i))?(o(),c(g,{key:1,disabled:A.value.length===0,onClick:u[9]||(u[9]=_e=>De(2))},{default:t(()=>[r(s(e.$t("views.document.setting.cancelGenerate")),1)]),_:1},8,["disabled"])):E("",!0),l(Ct,{type:"info",class:"secondary ml-24"},{default:t(()=>[r(s(e.$t("common.selected"))+" "+s(A.value.length)+" "+s(e.$t("views.document.items")),1)]),_:1}),l(g,{class:"ml-16",type:"primary",link:"",onClick:Qe},{default:t(()=>[r(s(e.$t("common.clear")),1)]),_:1})])):E("",!0),l(ll,{ref_key:"embeddingContentDialogRef",ref:V},null,512),l(Wt,{ref_key:"ImportDocumentDialogRef",ref:se,title:me.value,onRefresh:Ie},null,8,["title"]),l(Kt,{ref_key:"SyncWebDialogRef",ref:le,onRefresh:Ie},null,512),l(Xt,{ref_key:"selectKnowledgeDialogRef",ref:j,onRefresh:yt,workspaceId:(Ae=P.value)==null?void 0:Ae.workspaceId},null,8,["workspaceId"]),l(Ot,{ref_key:"GenerateRelatedDialogRef",ref:Ue,onRefresh:z,apiType:p.value},null,8,["apiType"])])}}}),bl=Ht(kl,[["__scopeId","data-v-d9093e2d"]]);export{bl as default};
