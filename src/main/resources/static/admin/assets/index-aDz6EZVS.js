var $t=Object.defineProperty;var Ct=(z,C,R)=>C in z?$t(z,C,{enumerable:!0,configurable:!0,writable:!0,value:R}):z[C]=R;var Ke=(z,C,R)=>Ct(z,typeof C!="symbol"?C+"":C,R);import{aJ as ve,aP as be,aR as oe,cE as T,df as Dt,d5 as v,cF as je,aS as g,aT as c,aM as o,cI as t,aX as l,aU as E,aL as W,cG as ce,cH as $e,aV as a,cN as r,aO as s,aN as M,cO as Z,c_ as F,dx as J,aQ as qe,eT as Mt,c$ as Oe,cV as Tt,aK as Rt,eU as Nt,eu as It,cS as Vt,cT as At,dK as Lt,d0 as Gt,cU as Bt,d1 as O,eG as Ut,eV as Pt,aW as te,ez as Ft,dI as ze,d6 as ye,d4 as Kt,cP as Ot}from"./admin-BcxOdjvc.js";import{S as zt}from"./SyncWebDialog-DEz0Eg_b.js";import{_ as Ht}from"./index.vue_vue_type_script_setup_true_lang-BmZ5yEIJ.js";var he=(z=>(z.optimization="views.document.hitHandlingMethod.optimization",z.directly_return="views.document.hitHandlingMethod.directly_return",z))(he||{});const jt={class:"flex align-center"},qt={class:"mr-4"},Qt={class:"lighter w-full",style:{"margin-top":"-20px"}},Wt={class:"dialog-footer"},Yt=ve({__name:"ImportDocumentDialog",props:{title:String},emits:["refresh"],setup(z,{expose:C,emit:R}){const i=be(),{params:{id:D}}=i,G=oe(()=>i.path.includes("shared")?"systemShare":i.path.includes("resource-management")?"systemManage":"workspace"),w=R,p=T(),n=T(!1),b=T(!1),f=T({source_url:"",selector:"",hitHandlingMethod:"optimization",directlyReturnSimilarity:.9}),B=T(""),N=T(""),h=T([]),V=Dt({source_url:[{required:!0,message:v("views.document.form.source_url.requiredMessage"),trigger:"blur"}],directlyReturnSimilarity:[{required:!0,message:v("views.document.form.similarity.requiredMessage"),trigger:"blur"}]}),A=T(!1);je(A,m=>{m||(f.value={source_url:"",selector:"",hitHandlingMethod:"optimization",directlyReturnSimilarity:.9},b.value=!1,N.value="",B.value="",h.value=[])});const le=(m,k)=>{m?(N.value=m.type,B.value=m.id,f.value={hitHandlingMethod:m.hitHandlingMethod,directlyReturnSimilarity:m.directlyReturnSimilarity,...m.meta,meta:m.meta},b.value=!1):k?h.value=k:(N.value=1,b.value=!0),A.value=!0},U=async m=>{m&&await m.validate(k=>{if(k){if(b.value){const $={source_url_list:f.value.source_url.split(`
`),selector:f.value.selector};F({type:"document",systemType:G.value}).postWebDocument(D,$,n).then(()=>{J(v("views.document.tip.importMessage")),w("refresh"),A.value=!1})}else if(B.value){const $={hitHandlingMethod:f.value.hitHandlingMethod,directlyReturnSimilarity:f.value.directlyReturnSimilarity,meta:{...f.value.meta,source_url:f.value.source_url,selector:f.value.selector}};F({type:"document",systemType:G.value}).putDocument(D,B.value,$,n).then(()=>{J(v("common.settingSuccess")),w("refresh"),A.value=!1})}else if(h.value.length>0){const $={hitHandlingMethod:f.value.hitHandlingMethod,directlyReturnSimilarity:f.value.directlyReturnSimilarity,idList:h.value};F({type:"document",systemType:G.value}).putBatchEditHitHandling(D,$,n).then(()=>{J(v("common.settingSuccess")),w("refresh"),A.value=!1})}}})};return C({open:le}),(m,k)=>{const $=g("el-input"),Q=g("el-form-item"),ae=g("AppIcon"),re=g("el-tooltip"),P=g("el-radio"),X=g("el-radio-group"),se=g("el-input-number"),q=g("el-form"),L=g("el-button"),me=g("el-dialog");return o(),c(me,{title:z.title,modelValue:A.value,"onUpdate:modelValue":k[7]||(k[7]=j=>A.value=j),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,width:"550"},{footer:t(()=>[M("span",Wt,[l(L,{onClick:k[5]||(k[5]=Z(j=>A.value=!1,["prevent"]))},{default:t(()=>[r(s(m.$t("common.cancel")),1)]),_:1}),l(L,{type:"primary",onClick:k[6]||(k[6]=j=>U(p.value)),loading:n.value},{default:t(()=>[r(s(m.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[l(q,{"label-position":"top",ref_key:"webFormRef",ref:p,rules:V,model:f.value,"require-asterisk-position":"right"},{default:t(()=>[b.value?(o(),c(Q,{key:0,label:m.$t("views.document.form.source_url.label"),prop:"source_url"},{default:t(()=>[l($,{modelValue:f.value.source_url,"onUpdate:modelValue":k[0]||(k[0]=j=>f.value.source_url=j),placeholder:m.$t("views.document.form.source_url.placeholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):!b.value&&N.value===1?(o(),c(Q,{key:1,label:m.$t("views.document.form.source_url.label"),prop:"source_url"},{default:t(()=>[l($,{modelValue:f.value.source_url,"onUpdate:modelValue":k[1]||(k[1]=j=>f.value.source_url=j),placeholder:m.$t("views.document.form.source_url.requiredMessage")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):E("",!0),N.value===1?(o(),c(Q,{key:2,label:m.$t("views.document.form.selector.label")},{default:t(()=>[l($,{modelValue:f.value.selector,"onUpdate:modelValue":k[2]||(k[2]=j=>f.value.selector=j),placeholder:m.$t("views.document.form.selector.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):E("",!0),b.value?E("",!0):(o(),c(Q,{key:3},{label:t(()=>[M("div",jt,[M("span",qt,s(m.$t("views.document.form.hitHandlingMethod.label")),1),l(re,{effect:"dark",content:m.$t("views.document.form.hitHandlingMethod.tooltip"),placement:"right"},{default:t(()=>[l(ae,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:t(()=>[l(X,{modelValue:f.value.hitHandlingMethod,"onUpdate:modelValue":k[3]||(k[3]=j=>f.value.hitHandlingMethod=j),class:"radio-block mt-4"},{default:t(()=>[(o(!0),W(ce,null,$e(a(he),(j,fe)=>(o(),c(P,{key:fe,value:fe},{default:t(()=>[r(s(m.$t(j)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})),!b.value&&f.value.hitHandlingMethod==="directly_return"?(o(),c(Q,{key:4,prop:"directlyReturnSimilarity"},{default:t(()=>[M("div",Qt,[M("span",null,s(m.$t("views.document.form.similarity.label")),1),l(se,{modelValue:f.value.directlyReturnSimilarity,"onUpdate:modelValue":k[4]||(k[4]=j=>f.value.directlyReturnSimilarity=j),min:0,max:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",size:"small",class:"ml-4 mr-4"},null,8,["modelValue"]),M("span",null,s(m.$t("views.document.form.similarity.placeholder")),1)])]),_:1})):E("",!0)]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),Zt={class:"flex align-center"},Jt={class:"dialog-footer"},Xt=ve({__name:"SelectKnowledgeDialog",props:{workspaceId:{type:String}},emits:["refresh"],setup(z,{expose:C,emit:R}){const i=be(),{params:{id:D}}=i,{user:G}=qe(),w=z,p=oe(()=>i.path.includes("shared")?"systemShare":i.path.includes("resource-management")?"systemManage":"workspace"),n=R,b=T(!1),f=T(!1),B=T([]),N=T([]),h=T({selectKnowledge:""}),V={children:"children",label:"name",isLeaf:m=>m.resourceType?m.resourceType!=="folder":m.workspaceId==="None",disabled:(m,k)=>m.id===D||m.resourceType==="folder"&&(k==null?void 0:k.isLeaf)},A=async(m,k)=>{if(m.isLeaf)return k([]);const $=m.level===0?G.getWorkspaceId():m.data.id,Q=p.value==="systemManage"?{workspaceId:w.workspaceId,folderId:m.level===0?w.workspaceId:m.data.id}:{folderId:$};await F({type:"knowledge",systemType:p.value}).getKnowledgeList(Q,b).then(ae=>{k(ae.data)})};je(f,m=>{m||(h.value.selectKnowledge="",B.value=[],N.value=[])});const le=m=>{N.value=m,f.value=!0},U=()=>{F({type:"document",systemType:p.value}).putMigrateMulDocument(D,h.value.selectKnowledge,N.value,b).then(()=>{n("refresh"),f.value=!1})};return C({open:le}),(m,k)=>{const $=g("KnowledgeIcon"),Q=g("el-avatar"),ae=g("el-tree-select"),re=g("el-form-item"),P=g("el-form"),X=g("el-button"),se=g("el-dialog");return o(),c(se,{title:`${m.$t("views.document.migrateDocument")}`,modelValue:f.value,"onUpdate:modelValue":k[2]||(k[2]=q=>f.value=q),width:"600",class:"select-knowledge-dialog","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[M("span",Jt,[l(X,{onClick:k[1]||(k[1]=Z(q=>f.value=!1,["prevent"]))},{default:t(()=>[r(s(m.$t("common.cancel")),1)]),_:1}),l(X,{type:"primary",onClick:U,disabled:!h.value.selectKnowledge||b.value},{default:t(()=>[r(s(m.$t("common.confirm")),1)]),_:1},8,["disabled"])])]),default:t(()=>[l(P,{ref:"FormRef",model:h.value,"label-position":"top","require-asterisk-position":"right"},{default:t(()=>[l(re,{label:m.$t("views.chatLog.selectKnowledge"),required:""},{default:t(()=>[l(ae,{modelValue:h.value.selectKnowledge,"onUpdate:modelValue":k[0]||(k[0]=q=>h.value.selectKnowledge=q),props:V,"node-key":"id",lazy:"",load:A,placeholder:m.$t("views.chatLog.selectKnowledgePlaceholder")},{default:t(({data:q})=>[M("div",Zt,[q.resourceType!=="folder"?(o(),c($,{key:0,class:"mr-12",size:20,type:q.type},null,8,["type"])):(o(),c(Q,{key:1,class:"mr-12",shape:"square",size:20,style:{background:"none"}},{default:t(()=>k[3]||(k[3]=[M("img",{src:Mt,style:{width:"100%"},alt:""},null,-1)])),_:1,__:[3]})),r(" "+s(q.name),1)])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),I={EMBEDDING:1,GENERATE_PROBLEM:2,SYNC:3},y={PENDING:"0",STARTED:"1",SUCCESS:"2",FAILURE:"3",REVOKE:"4",REVOKED:"5",IGNORED:"n"};class He{constructor(C){Ke(this,"task_status");C||(C=""),C=C.split("").reverse().join(""),this.task_status={};for(const R in I){const i=I[R],D=i-1;this.task_status[i]=C[D]?C[D]:"n"}}toString(){const C=[];for(const R in I){const i=I[R];C.push(this.task_status[i])}return C.reverse().join("")}}const xt=ve({__name:"StatusTable",props:{status:{},statusMeta:{},stateMap:{},taskTypeMap:{}},setup(z){const C=z,R=w=>{const p=new He(w.status);return Object.keys(I).map(n=>{const b=I[n];return{[b]:{[p.task_status[b]]:w.count}}}).reduce((n,b)=>({...n,...b}),{})},i=(w,p)=>w==null&&p?p:p==null&&w?w:typeof w=="object"&&typeof p=="object"?Oe.mergeWith(w,p,i):w+p,D=oe(()=>(C.statusMeta.aggs?C.statusMeta.aggs:[]).map(w=>R(w)).reduce((w,p)=>Oe.mergeWith(w,p,i),{})),G=oe(()=>Object.keys(I).map(w=>{const p=I[w],n=new He(C.status);return{type:p,state:n.task_status[p],aggs:D.value[p],time:C.statusMeta.state_time[p]}}).filter(w=>w.state!==y.IGNORED));return(w,p)=>{const n=g("SuccessFilled"),b=g("el-icon"),f=g("el-text"),B=g("CircleCloseFilled"),N=g("Loading");return o(!0),W(ce,null,$e(G.value,h=>(o(),W("div",{key:h.type},[M("span",null,s(w.taskTypeMap[h.type])+"ï¼š",1),M("span",null,[h.state===a(y).SUCCESS||h.state===a(y).REVOKED?(o(),c(f,{key:0},{default:t(()=>[l(b,{class:"color-success"},{default:t(()=>[l(n)]),_:1}),r(" "+s(w.stateMap[h.state](h.type)),1)]),_:2},1024)):h.state===a(y).FAILURE?(o(),c(f,{key:1},{default:t(()=>[l(b,{class:"color-danger"},{default:t(()=>[l(B)]),_:1}),r(" "+s(w.stateMap[h.state](h.type)),1)]),_:2},1024)):h.state===a(y).STARTED?(o(),c(f,{key:2},{default:t(()=>[l(b,{class:"is-loading color-primary"},{default:t(()=>[l(N)]),_:1}),r(" "+s(w.stateMap[h.state](h.type)),1)]),_:2},1024)):h.state===a(y).PENDING?(o(),c(f,{key:3},{default:t(()=>[l(b,{class:"is-loading color-primary"},{default:t(()=>[l(N)]),_:1}),r(" "+s(w.stateMap[h.state](h.type)),1)]),_:2},1024)):h.state===a(y).REVOKE?(o(),c(f,{key:4},{default:t(()=>[l(b,{class:"is-loading color-primary"},{default:t(()=>[l(N)]),_:1}),r(" "+s(w.stateMap[h.state](h.type)),1)]),_:2},1024)):E("",!0)]),M("span",{class:"ml-8 lighter",style:Tt({color:[a(y).FAILURE,a(y).REVOKED].includes(h.state)?"#F54A45":""})},s(w.$t("views.document.fileStatus.finish"))+" "+s(Object.keys(h.aggs?h.aggs:{}).filter(V=>V==a(y).SUCCESS).map(V=>h.aggs[V]).reduce((V,A)=>V+A,0))+"/"+s(Object.values(h.aggs?h.aggs:{}).reduce((V,A)=>V+A,0)),5),l(f,{type:"info",class:"ml-12"},{default:t(()=>{var V;return[r(s(h.time?(V=h.time[h.state==a(y).REVOKED?a(y).REVOKED:a(y).PENDING])==null?void 0:V.substring(0,19):void 0),1)]}),_:2},1024)]))),128)}}}),el=ve({__name:"Status",props:{status:{},statusMeta:{}},setup(z){const C=z,R=T(!1),i=[y.REVOKE,y.STARTED,y.PENDING,y.FAILURE,y.REVOKED,y.SUCCESS],D=oe(()=>{let n={key:0,value:""};for(const b in i){const f=i[b],B=C.status.indexOf(f);if(B>-1){n={key:C.status.length-B,value:f};break}}return n}),G={[I.EMBEDDING]:v("views.document.fileStatus.EMBEDDING"),[I.GENERATE_PROBLEM]:v("views.document.fileStatus.GENERATE"),[I.SYNC]:v("views.document.fileStatus.SYNC")},w={[I.EMBEDDING]:v("views.knowledge.setting.vectorization"),[I.GENERATE_PROBLEM]:v("views.document.generateQuestion.title"),[I.SYNC]:v("views.knowledge.setting.sync")},p={[y.PENDING]:n=>v("views.document.fileStatus.PENDING"),[y.STARTED]:n=>G[n],[y.REVOKE]:n=>v("views.document.fileStatus.REVOKE"),[y.REVOKED]:n=>v("views.document.fileStatus.SUCCESS"),[y.FAILURE]:n=>v("views.document.fileStatus.FAILURE"),[y.SUCCESS]:n=>v("views.document.fileStatus.SUCCESS")};return(n,b)=>{const f=g("SuccessFilled"),B=g("el-icon"),N=g("el-text"),h=g("CircleCloseFilled"),V=g("Loading"),A=g("el-popover");return o(),c(A,{visible:R.value,"onUpdate:visible":b[0]||(b[0]=le=>R.value=le),placement:"top",trigger:"hover","popper-style":{width:"auto"}},{default:t(()=>[R.value?(o(),c(xt,{key:0,status:n.status,statusMeta:n.statusMeta,taskTypeMap:w,stateMap:p},null,8,["status","statusMeta"])):E("",!0)]),reference:t(()=>{var le,U,m,k,$,Q;return[((le=D.value)==null?void 0:le.value)===a(y).SUCCESS||((U=D.value)==null?void 0:U.value)===a(y).REVOKED?(o(),c(N,{key:0},{default:t(()=>[l(B,{class:"color-success"},{default:t(()=>[l(f)]),_:1}),r(" "+s(p[D.value.value](D.value.key)),1)]),_:1})):((m=D.value)==null?void 0:m.value)===a(y).FAILURE?(o(),c(N,{key:1},{default:t(()=>[l(B,{class:"color-danger"},{default:t(()=>[l(h)]),_:1}),r(" "+s(p[D.value.value](D.value.key)),1)]),_:1})):((k=D.value)==null?void 0:k.value)===a(y).STARTED?(o(),c(N,{key:2},{default:t(()=>[l(B,{class:"is-loading color-primary"},{default:t(()=>[l(V)]),_:1}),r(" "+s(p[D.value.value](D.value.key)),1)]),_:1})):(($=D.value)==null?void 0:$.value)===a(y).PENDING?(o(),c(N,{key:3},{default:t(()=>[l(B,{class:"is-loading color-primary"},{default:t(()=>[l(V)]),_:1}),r(" "+s(p[D.value.value](D.value.key)),1)]),_:1})):((Q=D.value)==null?void 0:Q.value)===a(y).REVOKE?(o(),c(N,{key:4},{default:t(()=>[l(B,{class:"is-loading color-primary"},{default:t(()=>[l(V)]),_:1}),r(" "+s(p[D.value.value](D.value.key)),1)]),_:1})):E("",!0)]}),_:1},8,["visible"])}}}),tl={class:"dialog-footer"},ll=ve({__name:"EmbeddingContentDialog",setup(z,{expose:C}){const R=T(!1),i=T("error"),D={all:["0","1","2","3","4","5","n"],error:["0","1","3","4","5","n"]},G=T(),w=()=>{G.value&&G.value(D[i.value]),n()},p=b=>{G.value=b,R.value=!0},n=()=>{G.value=void 0,R.value=!1};return C({open:p,close:n}),(b,f)=>{const B=g("el-radio"),N=g("el-radio-group"),h=g("el-button"),V=g("el-dialog");return o(),c(V,{modelValue:R.value,"onUpdate:modelValue":f[1]||(f[1]=A=>R.value=A),title:b.$t("components.selectParagraph.title"),"before-close":n,width:"450"},{footer:t(()=>[M("div",tl,[l(h,{onClick:n},{default:t(()=>[r(s(b.$t("common.cancel")),1)]),_:1}),l(h,{type:"primary",onClick:w},{default:t(()=>[r(s(b.$t("common.submit")),1)]),_:1})])]),default:t(()=>[l(N,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=A=>i.value=A),class:"radio-block"},{default:t(()=>[l(B,{value:"error",size:"large"},{default:t(()=>[r(s(b.$t("components.selectParagraph.error")),1)]),_:1}),l(B,{value:"all",size:"large"},{default:t(()=>[r(s(b.$t("components.selectParagraph.all")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","title"])}}}),al={class:"document p-16-24"},nl={class:"mb-16"},ol={class:"main-calc-height"},sl={class:"p-24"},il={class:"flex-between"},ul={key:1},cl={key:0,class:"flex align-center"},rl={class:"color-secondary"},dl={key:1,class:"flex align-center"},ml={class:"color-secondary"},pl={class:"mr-4"},vl={key:0,class:"mr-4"},fl={class:"mr-4"},yl={class:"mr-4"},_l={class:"mr-4"},gl={class:"mr-4"},hl={key:0,class:"mul-operation w-full flex"},ue="documents",kl=ve({__name:"index",setup(z){const C=be(),R=Rt(),{params:{id:i,folderId:D}}=C,{common:G}=qe();Nt(()=>{G.savePage(ue,null),G.saveCondition(ue,null)}),It(e=>{e.name!=="Paragraph"?(G.savePage(ue,null),G.saveCondition(ue,null)):G.saveCondition(ue,{filterText:k.value,filterMethod:$.value})});const w=oe(()=>D==="share"),p=oe(()=>C.path.includes("shared")?"systemShare":C.path.includes("resource-management")?"systemManage":C.path.includes("share/")?"workspaceShare":"workspace"),n=oe(()=>Vt.knowledge[p.value]),b=e=>n.value.doc_edit(e)||(P==null?void 0:P.value.type)===1&&n.value.doc_sync(e)||(P==null?void 0:P.value.type)===2&&n.value.doc_sync(e)||n.value.doc_delete(e),f=e=>n.value.doc_generate(e)||n.value.doc_migrate(e)||n.value.doc_export(e)||n.value.doc_download(e)||n.value.doc_delete(e),B=e=>n.value.doc_edit(e)||n.value.doc_generate(e)||n.value.doc_migrate(e)||n.value.doc_export(e)||n.value.doc_delete(e),N=(e,u)=>{const _=e.split("").reverse();return u-1>_.length+1?"n":_[u-1]},h=oe(()=>G.paginationConfig[ue]),V=oe(()=>G.search[ue]),A=T(),le=T(),U=T(!1);let m;const k=T(""),$=T({}),Q=T(""),ae=T([]),re=T(null),P=T({}),X=T({current_page:1,page_size:10,total:0}),se=T(),q=T(),L=T([]),me=T(""),j=T(),fe=e=>{F({type:"document",systemType:p.value}).exportDocument(e.name,e.knowledge_id,e.id,U).then(()=>{J(v("common.exportSuccess"))})},Ce=e=>{F({type:"document",systemType:p.value}).exportDocumentZip(e.name,e.knowledge_id,e.id,U).then(()=>{J(v("common.exportSuccess"))})};function De(e){const u=[];L.value.map(S=>{S&&u.push(S.id)});const _={idList:u,type:e};F({type:"document",systemType:p.value}).putBatchCancelTask(i,_,U).then(()=>{var S;J(v("views.document.tip.cancelSuccess")),(S=q.value)==null||S.clearSelection()})}function Qe(){var e;(e=q.value)==null||e.clearSelection()}function ke(e){const u=[];e?u.push(e.id):L.value.map(_=>{_&&u.push(_.id)}),j.value.open(u)}function we(e){$.value[e.attr]=e.command,e.attr=="status"&&($.value.task_type=e.task_type),H()}function x(e,u,_){return{attr:e,command:u,task_type:_}}const _e=(e,u)=>{F({type:"document",systemType:p.value}).putCancelTask(i,e.id,{type:u}).then(()=>{J(v("views.document.tip.sendMessage"))})};function We(){me.value=v("views.document.importDocument"),se.value.open()}function Me(e){me.value=v("common.setting"),se.value.open(e)}const Ye=e=>{L.value=e};function Ze(){me.value=v("common.setting");const e=L.value.map(u=>u.id);se.value.open(null,e)}const Je=()=>{m=setInterval(()=>{H(!0)},6e3)},Xe=()=>{m&&clearInterval(m)};function xe(e){+e.type==1?tt(e):et(e)}function et(e){ye(v("views.document.sync.confirmTitle"),v("views.document.sync.confirmMessage1"),{confirmButtonText:v("views.document.sync.label"),confirmButtonClass:"danger"}).then(()=>{F({type:"document",systemType:p.value}).putLarkDocumentSync(i,e.id).then(()=>{H()})}).catch(()=>{})}function tt(e){var u;(u=e.meta)!=null&&u.source_url?ye(v("views.document.sync.confirmTitle"),v("views.document.sync.confirmMessage1"),{confirmButtonText:v("views.document.sync.label"),confirmButtonClass:"danger"}).then(()=>{F({type:"document",systemType:p.value}).putDocumentSync(e.knowledge_id,e.id).then(()=>{H()})}).catch(()=>{}):ye(v("common.tip"),v("views.document.sync.confirmMessage2"),{confirmButtonText:v("common.confirm"),type:"warning"}).then(()=>{}).catch(()=>{})}function Te(e){var _;const u=S=>F({type:"document",systemType:p.value}).putDocumentRefresh(e.knowledge_id,e.id,S).then(()=>{H()});(_=A.value)==null||_.open(u)}function lt(e,u){u&&u.type==="selection"||R.push({path:`/paragraph/${i}/${e.id}`,query:{from:p.value,isShared:w.value?"true":"false"}})}function at(e){U.value=!0;const u=[{name:e}];F({type:"document",systemType:p.value}).putMulDocument(i,u).then(()=>{H(),J(v("common.createSuccess"))}).catch(()=>{U.value=!1})}function nt(){const e=[];L.value.map(u=>{u&&e.push(u.id)}),F({type:"document",systemType:p.value}).putMulSyncDocument(i,e,U).then(()=>{J(v("views.document.sync.successMessage")),H()})}function ot(){const e=[];L.value.map(u=>{u&&e.push(u.id)}),F({type:"document",systemType:p.value}).putMulLarkSyncDocument(i,e,U).then(()=>{J(v("views.document.sync.successMessage")),H()})}function st(){ye(`${v("views.document.delete.confirmTitle1")} ${L.value.length} ${v("views.document.delete.confirmTitle2")}`,v("views.document.delete.confirmMessage"),{confirmButtonText:v("common.confirm"),confirmButtonClass:"danger"}).then(()=>{const e=[];L.value.map(u=>{u&&e.push(u.id)}),F({type:"document",systemType:p.value}).delMulDocument(i,e,U).then(()=>{var u;J(v("views.document.delete.successMessage")),(u=q.value)==null||u.clearSelection(),H()})}).catch(()=>{})}function it(){var _;const e=L.value.map(S=>S.id),u=S=>{F({type:"document",systemType:p.value}).putBatchRefresh(i,e,S,U).then(()=>{var ee;J(v("views.document.tip.vectorizationSuccess")),(ee=q.value)==null||ee.clearSelection()})};(_=A.value)==null||_.open(u)}function ut(e){F({type:"document",systemType:p.value}).getDownloadSourceFile(i,e.id,e.name).then(()=>{H()})}function Re(e){ye(`${v("views.document.delete.confirmTitle3")} ${e.name} ?`,`${v("views.document.delete.confirmMessage1")} ${e.paragraphCount} ${v("views.document.delete.confirmMessage2")}`,{confirmButtonText:v("common.confirm"),confirmButtonClass:"danger"}).then(()=>{F({type:"document",systemType:p.value}).delDocument(i,e.id,U).then(()=>{J(v("common.deleteSuccess")),H()})}).catch(()=>{})}function Ne(e,u,_){F({type:"document",systemType:p.value}).putDocument(i,e,u,U).then(S=>{const ee=ae.value.findIndex(ie=>ie.id===e);return ae.value.splice(ee,1,S.data),J(_),!0}).catch(()=>!1)}async function ct(e){const u={isActive:!e.isActive},_=e.isActive?v("common.status.disableSuccess"):v("common.status.enableSuccess");await Ne(e.id,u,_)}function rt(e,u){e?Ne(u,{name:e},v("common.modifySuccess")):Kt(v("views.document.tip.nameMessage"))}function dt(e){re.value=e.id}function mt(){re.value=null}function pt(){X.value.current_page=1,H()}function vt({prop:e,order:u}){Q.value=u==="ascending"?e:`-${e}`,H()}function H(e){const u={...k.value&&{name:k.value},...$.value,order_by:Q.value,folderId:D};F({type:"document",isShared:w.value,systemType:p.value}).getDocumentPage(i,X.value,u,e?void 0:U).then(_=>{ae.value=_.data.records,X.value.total=_.data.total})}function ft(){F({type:"knowledge",isShared:w.value,systemType:p.value}).getKnowledgeDetail(i,U).then(e=>{P.value=e.data})}function yt(){var e;(e=q.value)==null||e.clearSelection(),H()}function Ie(){X.value.current_page=1,H()}const Ve=T();function Ee(e){const u=[];e?u.push(e.id):L.value.map(_=>{_&&u.push(_.id)}),Ve.value.open(u,"document")}return At(()=>{ft(),h.value&&(X.value=h.value),V.value&&(k.value=V.value.filterText,$.value=V.value.filterMethod),H(),Je()}),Lt(()=>{Xe()}),(e,u)=>{var Le;const _=g("el-button"),S=g("el-dropdown-item"),ee=g("el-dropdown-menu"),ie=g("el-dropdown"),_t=g("el-input"),ne=g("el-table-column"),Se=g("Filter"),de=g("el-icon"),gt=g("SuccessFilled"),ht=g("el-switch"),kt=g("el-divider"),Ae=g("Close"),pe=g("el-tooltip"),wt=g("Download"),Et=g("el-card"),St=g("el-text"),bt=Gt("loading");return o(),W("div",al,[M("h2",nl,s(e.$t("common.fileUpload.document")),1),l(Et,{style:{"--el-card-padding":"0"}},{default:t(()=>{var ge,Ge,Be,Ue;return[M("div",ol,[M("div",sl,[M("div",il,[M("div",null,[w.value?E("",!0):(o(),W(ce,{key:0},[((ge=P.value)==null?void 0:ge.type)===0&&n.value.doc_create(a(i))?(o(),c(_,{key:0,type:"primary",onClick:u[0]||(u[0]=d=>a(R).push({path:`/knowledge/document/upload/${a(D)}`,query:{id:a(i)}}))},{default:t(()=>[r(s(e.$t("views.document.uploadDocument")),1)]),_:1})):E("",!0),((Ge=P.value)==null?void 0:Ge.type)===1&&n.value.doc_create(a(i))?(o(),c(_,{key:1,type:"primary",onClick:We},{default:t(()=>[r(s(e.$t("views.document.importDocument")),1)]),_:1})):E("",!0),((Be=P.value)==null?void 0:Be.type)===2&&n.value.doc_create(a(i))?(o(),c(_,{key:2,type:"primary",onClick:u[1]||(u[1]=d=>{var Y;return a(R).push({path:`/knowledge/import/${a(D)}`,query:{id:a(i),folder_token:(Y=P.value)==null?void 0:Y.meta.folder_token}})})},{default:t(()=>[r(s(e.$t("views.document.importDocument")),1)]),_:1})):E("",!0),n.value.doc_vector(a(i))?(o(),c(_,{key:3,onClick:it,disabled:L.value.length===0},{default:t(()=>[r(s(e.$t("views.knowledge.setting.vectorization")),1)]),_:1},8,["disabled"])):E("",!0),n.value.doc_generate(a(i))?(o(),c(_,{key:4,onClick:u[2]||(u[2]=d=>Ee()),disabled:L.value.length===0},{default:t(()=>[r(s(e.$t("views.document.generateQuestion.title")),1)]),_:1},8,["disabled"])):E("",!0),n.value.doc_migrate(a(i))?(o(),c(_,{key:5,onClick:u[3]||(u[3]=d=>ke()),disabled:L.value.length===0},{default:t(()=>[r(s(e.$t("views.document.setting.migration")),1)]),_:1},8,["disabled"])):E("",!0),b(a(i))?(o(),c(ie,{key:6},{dropdown:t(()=>[l(ee,null,{default:t(()=>{var d,Y;return[n.value.doc_edit(a(i))?(o(),c(S,{key:0,onClick:Ze,disabled:L.value.length===0},{default:t(()=>[r(s(e.$t("common.setting")),1)]),_:1},8,["disabled"])):E("",!0),((d=P.value)==null?void 0:d.type)===1&&n.value.doc_sync(a(i))?(o(),c(S,{key:1,divided:"",onClick:nt,disabled:L.value.length===0},{default:t(()=>[r(s(e.$t("views.document.syncDocument")),1)]),_:1},8,["disabled"])):E("",!0),((Y=P.value)==null?void 0:Y.type)===2&&n.value.doc_sync(a(i))?(o(),c(S,{key:2,divided:"",onClick:ot,disabled:L.value.length===0},{default:t(()=>[r(s(e.$t("views.document.syncDocument")),1)]),_:1},8,["disabled"])):E("",!0),n.value.doc_delete(a(i))?(o(),c(S,{key:3,divided:"",onClick:st,disabled:L.value.length===0},{default:t(()=>[r(s(e.$t("common.delete")),1)]),_:1},8,["disabled"])):E("",!0)]}),_:1})]),default:t(()=>[l(_,{class:"ml-12 mr-12"},{default:t(()=>[l(O,{iconName:"app-more"})]),_:1})]),_:1})):E("",!0)],64))]),l(_t,{modelValue:k.value,"onUpdate:modelValue":u[4]||(u[4]=d=>k.value=d),placeholder:e.$t("common.searchBar.placeholder"),"prefix-icon":"Search",class:"w-240",onChange:H,clearable:""},null,8,["modelValue","placeholder"])]),Bt((o(),c(Ut,{ref_key:"multipleTableRef",ref:q,class:"mt-16",data:ae.value,"pagination-config":X.value,"quick-create":((Ue=P.value)==null?void 0:Ue.type)===0&&n.value.doc_create(a(i))&&!w.value,onSizeChange:pt,onChangePage:H,onCellMouseEnter:dt,onCellMouseLeave:mt,onCreatQuick:at,onRowClick:lt,onSelectionChange:Ye,onSortChange:vt,"row-key":d=>d.id,storeKey:ue},{default:t(()=>[w.value?E("",!0):(o(),c(ne,{key:0,type:"selection",width:"55","reserve-selection":!0})),l(ne,{prop:"name",label:e.$t("views.document.table.name"),"min-width":"280"},{default:t(({row:d})=>[w.value?(o(),W("span",ul,s(d.name),1)):(o(),c(Pt,{key:0,onChange:Y=>rt(Y,d.id),data:d.name,showEditIcon:d.id===re.value},null,8,["onChange","data","showEditIcon"]))]),_:1},8,["label"]),l(ne,{prop:"status",label:e.$t("views.document.fileStatus.label"),width:"130"},{header:t(()=>[M("div",null,[M("span",null,s(e.$t("views.document.fileStatus.label")),1),l(ie,{trigger:"click",onCommand:we},{dropdown:t(()=>[l(ee,{style:{width:"100px"}},{default:t(()=>[l(S,{class:te([$.value.status?"":"is-active","justify-center"]),command:x("status","")},{default:t(()=>[r(s(e.$t("views.document.table.all")),1)]),_:1},8,["class","command"]),l(S,{class:te([$.value.status===a(y).SUCCESS?"is-active":"","justify-center"]),command:x("status",a(y).SUCCESS)},{default:t(()=>[r(s(e.$t("views.document.fileStatus.SUCCESS")),1)]),_:1},8,["class","command"]),l(S,{class:te([$.value.status===a(y).FAILURE?"is-active":"","justify-center"]),command:x("status",a(y).FAILURE)},{default:t(()=>[r(s(e.$t("views.document.fileStatus.FAILURE")),1)]),_:1},8,["class","command"]),l(S,{class:te([$.value.status===a(y).STARTED&&$.value.task_type==a(I).EMBEDDING?"is-active":"","justify-center"]),command:x("status",a(y).STARTED,a(I).EMBEDDING)},{default:t(()=>[r(s(e.$t("views.document.fileStatus.EMBEDDING")),1)]),_:1},8,["class","command"]),l(S,{class:te([$.value.status===a(y).PENDING?"is-active":"","justify-center"]),command:x("status",a(y).PENDING)},{default:t(()=>[r(s(e.$t("views.document.fileStatus.PENDING")),1)]),_:1},8,["class","command"]),l(S,{class:te([$.value.status===a(y).STARTED&&$.value.task_type===a(I).GENERATE_PROBLEM?"is-active":"","justify-center"]),command:x("status",a(y).STARTED,a(I).GENERATE_PROBLEM)},{default:t(()=>[r(s(e.$t("views.document.fileStatus.GENERATE")),1)]),_:1},8,["class","command"])]),_:1})]),default:t(()=>[l(_,{style:{"margin-top":"1px"},link:"",type:$.value.status?"primary":""},{default:t(()=>[l(de,null,{default:t(()=>[l(Se)]),_:1})]),_:1},8,["type"])]),_:1})])]),default:t(({row:d})=>[l(el,{status:d.status,"status-meta":d.statusMeta},null,8,["status","status-meta"])]),_:1},8,["label"]),l(ne,{prop:"charLength",label:e.$t("views.document.table.char_length"),align:"right","min-width":"90",sortable:""},{default:t(({row:d})=>[r(s(a(Ft)(d.charLength)),1)]),_:1},8,["label"]),l(ne,{prop:"paragraphCount",label:e.$t("views.document.table.paragraph"),align:"right","min-width":"90",sortable:""},null,8,["label"]),l(ne,{width:"130"},{header:t(()=>[M("div",null,[M("span",null,s(e.$t("views.document.enableStatus.label")),1),l(ie,{trigger:"click",onCommand:we},{dropdown:t(()=>[l(ee,{style:{width:"100px"}},{default:t(()=>[l(S,{class:te([$.value.isActive===""?"is-active":"","justify-center"]),command:x("isActive","")},{default:t(()=>[r(s(e.$t("views.document.table.all")),1)]),_:1},8,["class","command"]),l(S,{class:te([$.value.isActive===!0?"is-active":"","justify-center"]),command:x("isActive",!0)},{default:t(()=>[r(s(e.$t("views.document.enableStatus.enable")),1)]),_:1},8,["class","command"]),l(S,{class:te([$.value.isActive===!1?"is-active":"","justify-center"]),command:x("isActive",!1)},{default:t(()=>[r(s(e.$t("views.document.enableStatus.close")),1)]),_:1},8,["class","command"])]),_:1})]),default:t(()=>[l(_,{style:{"margin-top":"1px"},link:"",type:$.value.isActive?"primary":""},{default:t(()=>[l(de,null,{default:t(()=>[l(Se)]),_:1})]),_:1},8,["type"])]),_:1})])]),default:t(({row:d})=>[d.isActive?(o(),W("div",cl,[l(de,{class:"color-success mr-8",style:{"font-size":"16px"}},{default:t(()=>[l(gt)]),_:1}),M("span",rl,s(e.$t("common.status.enabled")),1)])):(o(),W("div",dl,[l(O,{iconName:"app-disabled",class:"color-secondary mr-8"}),M("span",ml,s(e.$t("common.status.disabled")),1)]))]),_:1}),l(ne,{width:"170"},{header:t(()=>[M("div",null,[M("span",null,s(e.$t("views.document.form.hitHandlingMethod.label")),1),l(ie,{trigger:"click",onCommand:we},{dropdown:t(()=>[l(ee,{style:{width:"150px"}},{default:t(()=>[l(S,{class:te([$.value.hitHandlingMethod?"":"is-active","justify-center"]),command:x("hitHandlingMethod","")},{default:t(()=>[r(s(e.$t("views.document.table.all")),1)]),_:1},8,["class","command"]),(o(!0),W(ce,null,$e(a(he),(d,Y)=>(o(),c(S,{key:Y,class:te([$.value.hitHandlingMethod===Y?"is-active":"","justify-center"]),command:x("hitHandlingMethod",Y)},{default:t(()=>[r(s(e.$t(d)),1)]),_:2},1032,["class","command"]))),128))]),_:1})]),default:t(()=>[l(_,{style:{"margin-top":"1px"},link:"",type:$.value.hitHandlingMethod?"primary":""},{default:t(()=>[l(de,null,{default:t(()=>[l(Se)]),_:1})]),_:1},8,["type"])]),_:1})])]),default:t(({row:d})=>[r(s(e.$t(a(he)[d.hitHandlingMethod])),1)]),_:1}),l(ne,{prop:"createTime",label:e.$t("common.createTime"),width:"175",sortable:""},{default:t(({row:d})=>[r(s(a(ze)(d.createTime)),1)]),_:1},8,["label"]),l(ne,{prop:"updateTime",label:e.$t("views.document.table.updateTime"),width:"175",sortable:""},{default:t(({row:d})=>[r(s(a(ze)(d.updateTime)),1)]),_:1},8,["label"]),w.value?E("",!0):(o(),c(ne,{key:1,label:e.$t("common.operation"),align:"left",width:"160",fixed:"right"},{default:t(({row:d})=>{var Y,Pe,Fe;return[M("span",{onClick:u[5]||(u[5]=Z(()=>{},["stop"]))},[n.value.doc_edit(a(i))?(o(),c(ht,{key:0,loading:U.value,size:"small",modelValue:d.isActive,"onUpdate:modelValue":K=>d.isActive=K,"before-change":()=>ct(d)},null,8,["loading","modelValue","onUpdate:modelValue","before-change"])):E("",!0)]),l(kt,{direction:"vertical"}),((Y=P.value)==null?void 0:Y.type)===0?(o(),W(ce,{key:0},[[a(y).STARTED,a(y).PENDING].includes(N(d.status,a(I).EMBEDDING))?(o(),c(pe,{key:0,effect:"dark",content:e.$t("views.document.setting.cancelVectorization"),placement:"top"},{default:t(()=>[M("span",pl,[n.value.doc_vector(a(i))?(o(),c(_,{key:0,type:"primary",text:"",onClick:Z(K=>_e(d,a(I).EMBEDDING),["stop"])},{default:t(()=>[l(de,null,{default:t(()=>[l(Ae)]),_:1})]),_:2},1032,["onClick"])):E("",!0)])]),_:2},1032,["content"])):(o(),c(pe,{key:1,effect:"dark",content:e.$t("views.knowledge.setting.vectorization"),placement:"top"},{default:t(()=>[n.value.doc_vector(a(i))?(o(),W("span",vl,[l(_,{type:"primary",text:"",onClick:Z(K=>Te(d),["stop"])},{default:t(()=>[l(O,{iconName:"app-document-refresh",style:{"font-size":"16px"}})]),_:2},1032,["onClick"])])):E("",!0)]),_:2},1032,["content"])),n.value.doc_edit(a(i))?(o(),c(pe,{key:2,effect:"dark",content:e.$t("common.setting"),placement:"top"},{default:t(()=>[M("span",fl,[l(_,{type:"primary",text:"",onClick:Z(K=>Me(d),["stop"])},{default:t(()=>[l(O,{iconName:"app-setting"})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])):E("",!0),M("span",{onClick:u[6]||(u[6]=Z(()=>{},["stop"]))},[f(a(i))?(o(),c(ie,{key:0,trigger:"click"},{dropdown:t(()=>[l(ee,null,{default:t(()=>[[a(y).STARTED,a(y).PENDING].includes(N(d.status,a(I).GENERATE_PROBLEM))&&n.value.doc_generate(a(i))?(o(),c(S,{key:0,onClick:K=>_e(d,a(I).GENERATE_PROBLEM)},{default:t(()=>[l(O,{iconName:"app-generate-question",class:"color-secondary"}),r(" "+s(e.$t("views.document.setting.cancelGenerateQuestion")),1)]),_:2},1032,["onClick"])):(o(),W(ce,{key:1},[n.value.doc_generate(a(i))?(o(),c(S,{key:0,onClick:K=>Ee(d)},{default:t(()=>[l(O,{iconName:"app-generate-question",class:"color-secondary"}),r(" "+s(e.$t("views.document.generateQuestion.title")),1)]),_:2},1032,["onClick"])):E("",!0)],64)),n.value.doc_migrate(a(i))?(o(),c(S,{key:2,onClick:K=>ke(d)},{default:t(()=>[l(O,{iconName:"app-migrate",class:"color-secondary"}),r(" "+s(e.$t("views.document.setting.migration")),1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_export(a(i))?(o(),c(S,{key:3,onClick:K=>fe(d)},{default:t(()=>[l(O,{iconName:"app-export",class:"color-secondary"}),r(" "+s(e.$t("views.document.setting.export"))+" Excel ",1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_export(a(i))?(o(),c(S,{key:4,onClick:K=>Ce(d)},{default:t(()=>[l(O,{iconName:"app-export",class:"color-secondary"}),r(" "+s(e.$t("views.document.setting.export"))+" Zip ",1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_download(a(i))?(o(),c(S,{key:5,onClick:Z(K=>ut(d),["stop"])},{default:t(()=>[l(de,{class:"color-secondary"},{default:t(()=>[l(wt)]),_:1}),r(" "+s(e.$t("views.document.setting.download")),1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_delete(a(i))?(o(),c(S,{key:6,onClick:Z(K=>Re(d),["stop"])},{default:t(()=>[l(O,{iconName:"app-delete",class:"color-secondary"}),r(" "+s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])):E("",!0)]),_:2},1024)]),default:t(()=>[l(_,{text:"",type:"primary"},{default:t(()=>[l(O,{iconName:"app-more"})]),_:1})]),_:2},1024)):E("",!0)])],64)):E("",!0),((Pe=P.value)==null?void 0:Pe.type)===1||((Fe=P.value)==null?void 0:Fe.type)===2?(o(),W(ce,{key:1},[n.value.sync(a(i))?(o(),c(pe,{key:0,effect:"dark",content:e.$t("views.knowledge.setting.sync"),placement:"top"},{default:t(()=>[M("span",yl,[l(_,{type:"primary",text:"",onClick:Z(K=>xe(d),["stop"])},{default:t(()=>[l(O,{iconName:"app-sync"})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])):E("",!0),[a(y).STARTED,a(y).PENDING].includes(N(d.status,a(I).EMBEDDING))&&n.value.doc_vector(a(i))?(o(),c(pe,{key:1,effect:"dark",content:e.$t("views.document.setting.cancelVectorization"),placement:"top"},{default:t(()=>[M("span",_l,[l(_,{type:"primary",text:"",onClick:Z(K=>_e(d,a(I).EMBEDDING),["stop"])},{default:t(()=>[l(de,null,{default:t(()=>[l(Ae)]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])):(o(),c(pe,{key:2,effect:"dark",content:e.$t("views.knowledge.setting.vectorization"),placement:"top"},{default:t(()=>[M("span",gl,[l(_,{type:"primary",text:"",onClick:Z(K=>Te(d),["stop"])},{default:t(()=>[l(O,{iconName:"app-document-refresh",style:{"font-size":"16px"}})]),_:2},1032,["onClick"])])]),_:2},1032,["content"])),M("span",{onClick:u[7]||(u[7]=Z(()=>{},["stop"]))},[B(a(i))?(o(),c(ie,{key:0,trigger:"click"},{dropdown:t(()=>[l(ee,null,{default:t(()=>[n.value.doc_edit(a(i))?(o(),c(S,{key:0,onClick:K=>Me(d)},{default:t(()=>[l(O,{iconName:"app-setting"}),r(" "+s(e.$t("common.setting")),1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_generate(a(i))&&[a(y).STARTED,a(y).PENDING].includes(N(d.status,a(I).GENERATE_PROBLEM))?(o(),c(S,{key:1,onClick:K=>_e(d,a(I).GENERATE_PROBLEM)},{default:t(()=>[l(O,{iconName:"app-generate-question"}),r(" "+s(e.$t("views.document.setting.cancelGenerateQuestion")),1)]),_:2},1032,["onClick"])):(o(),W(ce,{key:2},[n.value.doc_generate(a(i))?(o(),c(S,{key:0,onClick:K=>Ee(d)},{default:t(()=>[l(O,{iconName:"app-generate-question"}),r(" "+s(e.$t("views.document.generateQuestion.title")),1)]),_:2},1032,["onClick"])):E("",!0)],64)),n.value.doc_migrate(a(i))?(o(),c(S,{key:3,onClick:K=>ke(d)},{default:t(()=>[l(O,{iconName:"app-migrate"}),r(" "+s(e.$t("views.document.setting.migration")),1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_export(a(i))?(o(),c(S,{key:4,onClick:K=>fe(d)},{default:t(()=>[l(O,{iconName:"app-export"}),r(" "+s(e.$t("views.document.setting.export"))+" Excel ",1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_export(a(i))?(o(),c(S,{key:5,onClick:K=>Ce(d)},{default:t(()=>[l(O,{iconName:"app-export"}),r(" "+s(e.$t("views.document.setting.export"))+" Zip ",1)]),_:2},1032,["onClick"])):E("",!0),n.value.doc_delete(a(i))?(o(),c(S,{key:6,onClick:Z(K=>Re(d),["stop"])},{default:t(()=>[l(O,{iconName:"app-delete"}),r(" "+s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])):E("",!0)]),_:2},1024)]),default:t(()=>[l(_,{text:"",type:"primary"},{default:t(()=>[l(O,{iconName:"app-more"})]),_:1})]),_:2},1024)):E("",!0)])],64)):E("",!0)]}),_:1},8,["label"]))]),_:1},8,["data","pagination-config","quick-create","row-key"])),[[bt,U.value]])])])]}),_:1}),L.value.length!==0?(o(),W("div",hl,[n.value.doc_vector(a(i))?(o(),c(_,{key:0,disabled:L.value.length===0,onClick:u[8]||(u[8]=ge=>De(1))},{default:t(()=>[r(s(e.$t("views.document.setting.cancelVectorization")),1)]),_:1},8,["disabled"])):E("",!0),n.value.doc_generate(a(i))?(o(),c(_,{key:1,disabled:L.value.length===0,onClick:u[9]||(u[9]=ge=>De(2))},{default:t(()=>[r(s(e.$t("views.document.setting.cancelGenerate")),1)]),_:1},8,["disabled"])):E("",!0),l(St,{type:"info",class:"secondary ml-24"},{default:t(()=>[r(s(e.$t("common.selected"))+" "+s(L.value.length)+" "+s(e.$t("views.document.items")),1)]),_:1}),l(_,{class:"ml-16",type:"primary",link:"",onClick:Qe},{default:t(()=>[r(s(e.$t("common.clear")),1)]),_:1})])):E("",!0),l(ll,{ref_key:"embeddingContentDialogRef",ref:A},null,512),l(Yt,{ref_key:"ImportDocumentDialogRef",ref:se,title:me.value,onRefresh:Ie},null,8,["title"]),l(zt,{ref_key:"SyncWebDialogRef",ref:le,onRefresh:Ie},null,512),l(Xt,{ref_key:"selectKnowledgeDialogRef",ref:j,onRefresh:yt,workspaceId:(Le=P.value)==null?void 0:Le.workspaceId},null,8,["workspaceId"]),l(Ht,{ref_key:"GenerateRelatedDialogRef",ref:Ve,onRefresh:H,apiType:p.value},null,8,["apiType"])])}}}),$l=Ot(kl,[["__scopeId","data-v-e6ccd3de"]]);export{$l as default};
