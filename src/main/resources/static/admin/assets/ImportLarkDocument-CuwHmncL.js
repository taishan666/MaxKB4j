import{ay as U,az as G,aP as H,aQ as J,aB as v,aX as j,aC as w,aD as c,b3 as O,aT as a,aF as l,aI as t,aH as i,aJ as _,aG as m,b4 as P,aK as x,aU as Q,cC as X,cD as Y,cE as Z,cF as ee,cG as te,cH as se,cI as oe,cJ as ne,cK as ae,cL as le,b8 as ie,aW as T,cM as ce,b5 as re,cn as de}from"./admin-C26zVPd1.js";const _e={class:"create-knowledge p-12-24"},me={class:"flex align-center mb-16"},ue={style:{display:"inline-block"}},pe={class:"create-knowledge__main flex"},he={class:"create-knowledge__component main-calc-height"},fe={class:"upload-document p-24",style:{"min-width":"850px"}},ge={class:"title-decoration-1 mb-8"},ve={class:"mt-16 mb-16"},ke={class:"update-info flex p-8-12 border-r-6 mb-16"},ye={class:"mt-4"},be={class:"ml-16 lighter"},we={class:"card-never border-r-6 mb-16"},xe={style:{height:"calc(100vh - 450px)"}},Ce={class:"flex align-center lighter"},De={key:0,src:X,alt:"",height:"20"},We={key:1,src:Y,alt:"",height:"22"},Le={key:2,src:Z,alt:"",height:"22"},Ne={key:3,src:ee,alt:"",height:"22"},Te={key:4,src:te,alt:"",height:"22"},Ve={key:5,src:se,alt:"",height:"22"},$e={key:6,src:oe,alt:"",height:"22"},Ie={key:7,src:ne,alt:"",height:"22"},Me={key:8,src:ae,alt:"",height:"22"},ze={key:9,src:le,alt:"",height:"22"},Fe={class:"ml-4"},Re={class:"create-knowledge__footer text-right border-t"},qe=U({__name:"ImportLarkDocument",setup(Ae){const C=G(),y=H(),{query:{id:V,folder_token:$}}=y,D=J(()=>y.path.includes("shared")?"systemShare":y.path.includes("resource-management")?"systemManage":"workspace"),W=V,I=$,p=v(!1),g=v(!1),L=v(!1),h=v(null),b=v({fileType:"txt",fileList:[]}),M=j({fileList:[{required:!0,message:w("views.document.upload.requiredMessage"),trigger:"change"}]}),z={label:"name",children:"zones",isLeaf:e=>e.type!=="folder",disabled:e=>e.is_exist},F=(e,o)=>{const r=e.level===0?I:e.data.token;T({type:"document",systemType:D.value}).getLarkDocumentList(W,r,{},p).then(d=>{const s=d.data.files;o(s),s.forEach(u=>{var k;u.is_exist&&((k=h.value)==null||k.setChecked(u.token,!0,!1))})}).catch(d=>{console.error("Failed to load tree nodes:",d)})},R=e=>{var o,r;e?Object.values(((o=h.value)==null?void 0:o.store.nodesMap)||{}).forEach(s=>{var u;s.disabled||(u=h.value)==null||u.setChecked(s.data,!0,!1)}):(r=h.value)==null||r.setCheckedKeys([])};function q(){var d;p.value=!0,g.value=!0;const r=(((d=h.value)==null?void 0:d.getCheckedNodes())||[]).filter(s=>!s.is_exist).map(s=>({name:s.name,token:s.token,type:s.type}));if(r.length===0){g.value=!1,ce(w("views.document.feishu.errorMessage1")),p.value=!1;return}T({type:"document",systemType:D.value}).importLarkDocument(W,r,p).then(()=>{re(w("views.document.tip.importMessage")),g.value=!1,C.go(-1)}).catch(s=>{console.error("Failed to load tree nodes:",s)}).finally(()=>{g.value=!1}),p.value=!1}return(e,o)=>{const r=c("back-button"),d=c("el-radio-button"),s=c("el-radio-group"),u=c("AppIcon"),k=c("el-checkbox"),A=c("el-tree"),B=c("el-scrollbar"),E=c("el-form"),S=c("el-card"),N=c("el-button"),K=O("loading");return l(),a("div",_e,[t("div",me,[i(r,{to:"-1",style:{"margin-left":"-4px"}}),t("h3",ue,_(e.$t("views.document.importDocument")),1)]),i(S,{style:{"--el-card-padding":"0"}},{default:m(()=>[P((l(),a("div",pe,[t("div",he,[t("div",fe,[t("h4",ge,_(e.$t("views.document.feishu.selectDocument")),1),i(E,{ref:"FormRef",model:b.value,rules:M,"label-position":"top","require-asterisk-position":"right"},{default:m(()=>[t("div",ve,[i(s,{modelValue:b.value.fileType,"onUpdate:modelValue":o[0]||(o[0]=f=>b.value.fileType=f),class:"app-radio-button-group"},{default:m(()=>[i(d,{value:"txt"},{default:m(()=>[x(_(e.$t("views.document.fileType.txt.label")),1)]),_:1})]),_:1},8,["modelValue"])]),t("div",ke,[t("div",ye,[i(u,{iconName:"app-warning-colorful",style:{"font-size":"16px"}})]),t("div",be,[t("p",null,_(e.$t("views.document.feishu.tip1")),1),t("p",null,_(e.$t("views.document.feishu.tip2")),1)])]),t("div",we,[i(k,{modelValue:L.value,"onUpdate:modelValue":o[1]||(o[1]=f=>L.value=f),label:e.$t("views.document.feishu.allCheck"),size:"large",class:"ml-24",onChange:R},null,8,["modelValue","label"])]),t("div",xe,[i(B,null,{default:m(()=>[i(A,{props:z,load:F,lazy:"","show-checkbox":"","node-key":"token",ref_key:"treeRef",ref:h},{default:m(({node:f,data:n})=>[t("div",Ce,[n.type==="folder"?(l(),a("img",De)):n.type==="docx"||n.name.endsWith(".docx")?(l(),a("img",We)):n.type==="sheet"||n.name.endsWith(".xlsx")?(l(),a("img",Le)):n.name.endsWith("xls")?(l(),a("img",Ne)):n.name.endsWith("csv")?(l(),a("img",Te)):n.name.endsWith(".pdf")?(l(),a("img",Ve)):n.name.endsWith(".html")?(l(),a("img",$e)):n.name.endsWith(".txt")?(l(),a("img",Ie)):n.name.endsWith(".zip")?(l(),a("img",Me)):n.name.endsWith(".md")?(l(),a("img",ze)):Q("",!0),t("span",Fe,_(f.label),1)])]),_:1},512)]),_:1})])]),_:1},8,["model","rules"])])])])),[[K,p.value]])]),_:1}),t("div",Re,[i(N,{onClick:o[2]||(o[2]=f=>ie(C).go(-1))},{default:m(()=>[x(_(e.$t("common.cancel")),1)]),_:1}),i(N,{onClick:q,type:"primary",disabled:g.value},{default:m(()=>[x(_(e.$t("views.document.buttons.import")),1)]),_:1},8,["disabled"])])])}}}),Ee=de(qe,[["__scopeId","data-v-fccd3d6b"]]);export{Ee as default};
