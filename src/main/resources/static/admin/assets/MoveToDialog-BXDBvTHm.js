import{aJ as K,aQ as E,cE as t,cF as L,aS as g,aT as D,aM as F,cI as v,aX as _,aN as R,cO as $,cN as b,aO as x,cZ as h,eR as T,dx as m,d4 as r,eS as B,eI as H,d3 as P,cP as G}from"./admin-CylDRYrg.js";const j={class:"dialog-footer"},q=K({__name:"MoveToDialog",props:{source:{type:String,default:""}},emits:["refresh"],setup(y,{expose:C,emit:N}){const{folder:M}=E(),u=N,d=y,S=t(),s=t(!1),l=t(!1),n=t([]),a=t({}),i=t(""),f=t("");L(l,e=>{var o;e||(a.value={},i.value="",n.value=[],f.value="",(o=S.value)==null||o.clearCurrentKey())});const A=e=>{a.value=e,I(),l.value=!0};function I(){const e={};M.asyncGetFolder(d.source,e,s).then(o=>{var p,c;n.value=o.data,((p=n.value)==null?void 0:p.length)>0?f.value=(c=n.value[0])==null?void 0:c.id:f.value=""})}function O(e){i.value=e.id}const V=async()=>{if(i.value){const e={...a.value,folderId:i.value};d.source===h.KNOWLEDGE?a.value.type===2?T.putLarkKnowledge(a.value.id,e,s).then(()=>{m(r("common.saveSuccess")),u("refresh",a.value),l.value=!1}):T.putKnowledge(a.value.id,e,s).then(()=>{m(r("common.saveSuccess")),u("refresh",a.value),l.value=!1}):d.source===h.TOOL?B.putTool(a.value.id,e,s).then(()=>{m(r("common.saveSuccess")),u("refresh",a.value),l.value=!1}):d.source===h.APPLICATION&&H.putApplication(a.value.id,e,s).then(o=>{m(r("common.saveSuccess")),u("refresh",a.value),l.value=!1})}else P(r("components.folder.requiredMessage"))};return C({open:A}),(e,o)=>{const p=g("folder-tree"),c=g("el-button"),w=g("el-dialog");return F(),D(w,{title:e.$t("common.moveTo"),modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=k=>l.value=k),"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,"align-center":""},{footer:v(()=>[R("span",j,[_(c,{onClick:o[0]||(o[0]=$(k=>l.value=!1,["prevent"])),loading:s.value},{default:v(()=>[b(x(e.$t("common.cancel")),1)]),_:1},8,["loading"]),_(c,{type:"primary",onClick:V,loading:s.value},{default:v(()=>[b(x(e.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:v(()=>[_(p,{ref_key:"treeRef",ref:S,source:y.source,data:n.value,treeStyle:{height:"calc(100vh - 320px)",border:"1px solid #ebeef5",borderRadius:"6px",padding:"8px"},"default-expanded-keys":[f.value],canOperation:!1,class:"move-to-dialog-tree",onHandleNodeClick:O},null,8,["source","data","default-expanded-keys"])]),_:1},8,["title","modelValue"])}}}),Q=G(q,[["__scopeId","data-v-fb288900"]]);export{Q as M};
