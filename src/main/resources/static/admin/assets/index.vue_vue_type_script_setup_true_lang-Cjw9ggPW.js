import{ec as ve,ed as ye,aJ as B,aQ as ee,aR as se,cE as E,cF as pe,d5 as P,aS as l,d0 as ae,aT as y,aM as c,aW as Y,cI as o,cU as le,aN as n,aL as V,aU as k,aO as s,cN as R,aV as e,ee as ie,aX as t,ef as ge,aP as _e,d3 as ce,cO as Z,dI as he,d6 as be,dx as re,aK as me,cT as we,cG as J,dY as ue,dL as z,dM as X,dN as b,dP as Q,dO as H,cH as Ae,eg as ke,cP as te,d1 as q,eh as $e,ei as Ie,ej as Ce,cX as Ee}from"./admin-CM9VkLWb.js";import{_ as Re}from"./ResetPassword.vue_vue_type_script_setup_true_lang-l_GIYZrY.js";import{_ as xe,s as j}from"./SettingAPIKeyDialog.vue_vue_type_script_setup_true_lang-B4r45E-8.js";const fe="/license",Ne=M=>ye(`${fe}/profile`,void 0,M),Pe=(M,a)=>ve(`${fe}/profile`,M,void 0,a),de={getLicense:Ne,putLicense:Pe},Se=["id"],De={class:"about-ui"},Ke={class:"flex"},Oe={class:"label"},Te={class:"flex"},Me={class:"label"},Ue={key:0,class:"color-danger"},Le={class:"flex"},Ve={class:"label"},We={class:"flex"},Ge={class:"label"},ze={class:"flex"},Be={class:"label"},Fe={class:"flex"},Xe={class:"label"},He={key:0,class:"mt-16 flex align-center"},je={class:"border-t text-center mt-16 p-16 pb-0"},Ye=B({__name:"AboutDialog",setup(M,{expose:a}){const{user:d,theme:p}=ee(),g=se(()=>p.isDefaultTheme()),f=E(!1),h=E(!1),_=E(null),w=E(!1);pe(f,r=>{r||(w.value&&window.location.reload(),w.value=!1)});const S=()=>{d.showXpack()&&u(),f.value=!0},A=r=>{const $=new FormData;$.append("license_file",r.raw),de.putLicense($,h).then(D=>{u(),w.value=!0})},F=se(()=>d?d.getEditionName()==="PE"?P("layout.about.edition.professional"):d.getEditionName()==="EE"?P("layout.about.edition.enterprise"):P("layout.about.edition.community"):"-");function u(){de.getLicense(h).then(r=>{var $;_.value=($=r.data)==null?void 0:$.license})}return a({open:S}),(r,$)=>{const D=l("LogoFull"),W=l("el-button"),i=l("el-upload"),m=l("el-text"),U=l("el-dialog"),K=ae("hasPermission"),x=ae("loading");return c(),y(U,{modelValue:f.value,"onUpdate:modelValue":$[0]||($[0]=N=>f.value=N),class:Y(["about-dialog border-r-6",g.value?"":"dialog-custom-header"])},{header:o(({titleId:N,titleClass:I})=>[n("div",{class:Y(["logo flex-center",I]),id:N},[t(D,{height:"59px"})],10,Se)]),default:o(()=>{var N,I,O,L,G,C,v;return[le((c(),V("div",De,[n("div",Ke,[n("span",Oe,s(r.$t("layout.about.authorize")),1),n("span",null,s(((N=_.value)==null?void 0:N.corporation)||"-"),1)]),n("div",Te,[n("span",Me,s(r.$t("layout.about.expiredTime")),1),n("span",null,[R(s(((I=_.value)==null?void 0:I.expired)||"-")+" ",1),(O=_.value)!=null&&O.expired&&e(ie)((L=_.value)==null?void 0:L.expired)?(c(),V("span",Ue,"（"+s(e(ie)((G=_.value)==null?void 0:G.expired))+"）",1)):k("",!0)])]),n("div",Le,[n("span",Ve,s(r.$t("layout.about.edition.label")),1),n("span",null,s(F.value),1)]),n("div",We,[n("span",Ge,s(r.$t("layout.about.version")),1),n("span",null,s(e(d).version),1)]),n("div",ze,[n("span",Be,s(r.$t("layout.about.serialNo")),1),n("span",null,s(((C=_.value)==null?void 0:C.serialNo)||"-"),1)]),n("div",Fe,[n("span",Xe,s(r.$t("layout.about.remark")),1),n("span",null,s(((v=_.value)==null?void 0:v.remark)||"-"),1)]),e(d).showXpack()?(c(),V("div",He,[le((c(),y(i,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,"on-change":A},{default:o(()=>[t(W,{class:"border-primary mr-16"},{default:o(()=>[R(s(r.$t("layout.about.update"))+" License ",1)]),_:1})]),_:1})),[[K,new(e(ge))("ADMIN")]])])):k("",!0)])),[[x,h.value]]),n("div",je,[t(m,{type:"info"},{default:o(()=>[R(s(r.$t("layout.copyright")),1)]),_:1})])]}),_:1},8,["modelValue","class"])}}}),Je={style:{"margin-top":"10px"}},Qe={class:"vertical-middle lighter break-all"},qe={class:"mr-4"},Ze=B({__name:"APIKeyDialog",props:{userId:{type:String,default:""}},emits:["addData"],setup(M,{expose:a,emit:d}){const p=_e(),{params:{id:g}}=p,f=window.location.origin+"/doc/",h=E(),_=E(!1),w=E(!1),S=E(null);pe(_,i=>{i||(S.value=null)});function A(i){h.value.open(i,"USER")}function F(i){be(`${P("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm1")}: ${i.secretKey}?`,P(P("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm2")),{confirmButtonText:P("common.confirm"),cancelButtonText:P("common.cancel"),confirmButtonClass:"color-danger"}).then(()=>{j.delAPIKey(i.id,w).then(()=>{re(P("common.deleteSuccess")),D()})}).catch(()=>{})}function u(i,m){const U={isActive:i},K=i?P("views.applicationOverview.appInfo.APIKeyDialog.enabledSuccess"):P("views.applicationOverview.appInfo.APIKeyDialog.disabledSuccess");j.putAPIKey(m.id,U,w).then(x=>{re(K),D()})}function r(){j.postAPIKey(w).then(i=>{D()})}const $=()=>{D(),_.value=!0};function D(){j.getAPIKey().then(i=>{i.data.sort((m,U)=>m.name<U.name?1:-1),S.value=i.data})}function W(){D()}return a({open:$}),(i,m)=>{const U=l("el-text"),K=l("AppIcon"),x=l("el-button"),N=l("el-card"),I=l("el-table-column"),O=l("el-switch"),L=l("el-tooltip"),G=l("el-table"),C=l("el-dialog");return c(),y(C,{title:i.$t("layout.apiKey"),modelValue:_.value,"onUpdate:modelValue":m[2]||(m[2]=v=>_.value=v),width:"800","close-on-click-modal":!1,"close-on-press-escape":!1},{default:o(()=>[t(N,{shadow:"never",class:"layout-bg mb-16"},{default:o(()=>[t(U,{type:"info",class:"color-secondary"},{default:o(()=>[R(s(i.$t("layout.apiServiceAddress")),1)]),_:1}),n("p",Je,[n("span",{class:"vertical-middle lighter break-all"},s(f)),t(x,{type:"primary",text:"",onClick:m[0]||(m[0]=v=>e(ce)(f))},{default:o(()=>[t(K,{iconName:"app-copy"})]),_:1})])]),_:1}),t(x,{type:"primary",class:"mb-16",onClick:r},{default:o(()=>[R(s(i.$t("common.create")),1)]),_:1}),t(G,{data:S.value,class:"mb-16",loading:w.value},{default:o(()=>[t(I,{prop:"secretKey",label:"API Key"},{default:o(({row:v})=>[n("span",Qe,s(v.secretKey),1),t(x,{type:"primary",text:"",onClick:T=>e(ce)(v.secretKey)},{default:o(()=>[t(K,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:1}),t(I,{label:i.$t("common.status.label"),width:"80"},{default:o(({row:v})=>[n("div",{onClick:m[1]||(m[1]=Z(()=>{},["stop"]))},[t(O,{size:"small",modelValue:v.isActive,"onUpdate:modelValue":T=>v.isActive=T,onChange:T=>u(T,v)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:1},8,["label"]),t(I,{prop:"name",label:i.$t("common.createDate"),width:"170"},{default:o(({row:v})=>[R(s(e(he)(v.createTime)),1)]),_:1},8,["label"]),t(I,{label:i.$t("common.setting"),align:"left",width:"80"},{default:o(({row:v})=>[n("span",qe,[t(L,{effect:"dark",content:i.$t("common.setting"),placement:"top"},{default:o(()=>[t(x,{type:"primary",text:"",onClick:Z(T=>A(v),["stop"])},{default:o(()=>[t(K,{iconName:"app-setting"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),t(L,{effect:"dark",content:i.$t("common.delete"),placement:"top"},{default:o(()=>[t(x,{type:"primary",text:"",onClick:T=>F(v)},{default:o(()=>[t(K,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data","loading"]),t(xe,{ref_key:"SettingAPIKeyDialogRef",ref:h,onRefresh:W},null,512)]),_:1},8,["title","modelValue"])}}}),et={class:"flex-center cursor"},tt={class:"ml-8 color-text-primary"},ot={class:"userInfo flex align-center"},nt={class:"mr-12 flex align-center"},st={style:{width:"90%"}},at={class:"bold mb-4",style:{"font-size":"14px"}},lt={class:"flex-between w-full"},it={class:"flex-between w-full",style:{"line-height":"22px",padding:"12px 11px"}},ct=B({__name:"index",setup(M){const{user:a,login:d}=ee(),p=me(),g=E(),f=E(),h=E(),_=u=>{a.postUserLanguage(u)},w=()=>{var u;(u=g.value)==null||u.open()};function S(){f.value.open()}const A=()=>{var u;(u=h.value)==null||u.open()},F=()=>{d.logout().then(()=>{p.push({name:"login"})})};return we(()=>{var u;(u=a.userInfo)!=null&&u.is_edit_password}),(u,r)=>{var I;const $=l("el-avatar"),D=l("CaretBottom"),W=l("el-icon"),i=l("TagGroup"),m=l("el-dropdown-item"),U=l("ArrowRight"),K=l("Check"),x=l("el-dropdown-menu"),N=l("el-dropdown");return c(),V(J,null,[t(N,{trigger:"click",type:"primary"},{dropdown:o(()=>[t(x,{class:"avatar-dropdown"},{default:o(()=>{var O,L,G;return[n("div",ot,[n("div",nt,[t($,{size:30},{default:o(()=>r[3]||(r[3]=[n("img",{src:ue,style:{width:"54%"},alt:""},null,-1)])),_:1,__:[3]})]),n("div",st,[n("p",at,s((O=e(a).userInfo)==null?void 0:O.username),1),(L=e(a).userInfo)!=null&&L.role_name&&e(a).userInfo.role_name.length>0?(c(),V(J,{key:0},[e(z)([e(X).IS_EE,e(X).IS_PE],"OR")?(c(),y(i,{key:0,size:"small",tags:(G=e(a).userInfo)==null?void 0:G.role_name},null,8,["tags"])):k("",!0)],64)):k("",!0)])]),e(z)([e(b).EXTENDS_ADMIN,e(b).EXTENDS_WORKSPACE_MANAGE,e(b).ADMIN,e(b).WORKSPACE_MANAGE],"OR")?(c(),y(m,{key:0,class:"border-t",onClick:r[0]||(r[0]=C=>e(p).push({path:"/system/user"}))},{default:o(()=>[n("div",lt,s(u.$t("views.system.title")),1)]),_:1})):k("",!0),e(z)(new(e(Q))([e(b).ADMIN,e(b).WORKSPACE_MANAGE,e(b).USER],[e(H).CHANGE_PASSWORD],[],"OR"),"OR")?(c(),y(m,{key:1,onClick:A},{default:o(()=>[R(s(u.$t("views.login.resetPassword")),1)]),_:1})):k("",!0),n("div",null,[e(z)(new(e(Q))([e(b).ADMIN],[e(H).SYSTEM_API_KEY_EDIT],[e(X).IS_EE,e(X).IS_PE],"OR"),"OR")?(c(),y(m,{key:0,class:"p-8",onClick:S},{default:o(()=>[R(s(u.$t("layout.apiKey")),1)]),_:1})):k("",!0)]),e(z)(new(e(Q))([e(b).ADMIN,e(b).WORKSPACE_MANAGE,e(b).USER],[e(H).SWITCH_LANGUAGE],[],"OR"),"OR")?(c(),y(m,{key:2,style:{padding:"0"},onClick:r[1]||(r[1]=Z(()=>{},["stop"]))},{default:o(()=>[t(N,{class:"w-full",trigger:"hover",placement:"left-start"},{dropdown:o(()=>[t(x,{style:{width:"180px"}},{default:o(()=>[(c(!0),V(J,null,Ae(e(ke),(C,v)=>(c(),y(m,{key:v,value:C.value,onClick:T=>_(C.value),class:"flex-between"},{default:o(()=>{var T,oe,ne;return[n("span",{class:Y(C.value===((T=e(a).userInfo)==null?void 0:T.language)?"primary":"")},s(C.label),3),C.value===((oe=e(a).userInfo)==null?void 0:oe.language)?(c(),y(W,{key:0,class:Y(C.value===((ne=e(a).userInfo)==null?void 0:ne.language)?"primary":"")},{default:o(()=>[t(K)]),_:2},1032,["class"])):k("",!0)]}),_:2},1032,["value","onClick"]))),128))]),_:1})]),default:o(()=>[n("div",it,[n("span",null,s(u.$t("layout.language")),1),t(W,null,{default:o(()=>[t(U)]),_:1})])]),_:1})]),_:1})):k("",!0),e(z)([e(b).ADMIN,e(H).ABOUT_READ],"OR")?(c(),y(m,{key:3,onClick:w},{default:o(()=>[R(s(u.$t("layout.about.title")),1)]),_:1})):k("",!0),t(m,{class:"border-t",onClick:F},{default:o(()=>[R(s(u.$t("layout.logout")),1)]),_:1})]}),_:1})]),default:o(()=>{var O;return[n("div",et,[t($,{size:30},{default:o(()=>r[2]||(r[2]=[n("img",{src:ue,style:{width:"54%"},alt:""},null,-1)])),_:1,__:[2]}),n("span",tt,s((O=e(a).userInfo)==null?void 0:O.username),1),t(W,{class:"el-icon--right"},{default:o(()=>[t(D)]),_:1})])]}),_:1}),t(Ze,{"user-id":(I=e(a).userInfo)==null?void 0:I.id,ref_key:"APIKeyDialogRef",ref:f},null,8,["user-id"]),t(Re,{ref_key:"resetPasswordRef",ref:h},null,512),t(Ye,{ref_key:"AboutDialogRef",ref:g},null,512)],64)}}}),rt=te(ct,[["__scopeId","data-v-3bf01337"]]),ut={class:"flex align-center"},dt=B({__name:"index",setup(M){const{theme:a}=ee();function d(p){window.open(p,"_blank")}return(p,g)=>{var h,_,w;const f=l("el-tooltip");return c(),V("div",ut,[(h=e(a).themeInfo)!=null&&h.showProject?(c(),y(f,{key:0,effect:"dark",content:p.$t("layout.github"),placement:"top"},{default:o(()=>[t(q,{iconName:"app-github",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"},onClick:g[0]||(g[0]=S=>{var A;return d((A=e(a).themeInfo)==null?void 0:A.projectUrl)})})]),_:1},8,["content"])):k("",!0),(_=e(a).themeInfo)!=null&&_.showUserManual?(c(),y(f,{key:1,effect:"dark",content:p.$t("layout.wiki"),placement:"top"},{default:o(()=>[t(q,{iconName:"app-user-manual",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"},onClick:g[1]||(g[1]=S=>{var A;return d((A=e(a).themeInfo)==null?void 0:A.userManualUrl)})})]),_:1},8,["content"])):k("",!0),(w=e(a).themeInfo)!=null&&w.showForum?(c(),y(f,{key:2,effect:"dark",content:p.$t("layout.forum"),placement:"top"},{default:o(()=>[t(q,{iconName:"app-help",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"},onClick:g[2]||(g[2]=S=>{var A;return d((A=e(a).themeInfo)==null?void 0:A.forumUrl)})})]),_:1},8,["content"])):k("",!0)])}}}),pt=te(dt,[["__scopeId","data-v-bff0fa46"]]),_t={class:"app-top-bar-container border-b flex-center"},mt={class:"logo mt-4"},ft={class:"flex-between w-full align-center"},vt={class:"flex align-center mr-8"},yt=B({__name:"SystemHeader",setup(M){const a=me();return(d,p)=>{const g=l("LogoFull"),f=l("el-divider"),h=l("AppIcon"),_=l("el-button");return c(),V("div",_t,[n("div",mt,[t(g)]),n("div",ft,[n("h4",null,[t(f,{class:"ml-16 mr-16",direction:"vertical"}),R(s(d.$t("views.system.title")),1)]),n("div",vt,[t(pt),t(f,{class:"ml-8 mr-8",direction:"vertical"}),e(z)([e(b).USER.getWorkspaceRole,e(b).EXTENDS_USER.getWorkspaceRole,e(b).EXTENDS_WORKSPACE_MANAGE.getWorkspaceRole,e(b).WORKSPACE_MANAGE.getWorkspaceRole],"OR")?(c(),y(_,{key:0,link:"",onClick:p[0]||(p[0]=w=>e(a).push({path:"/"})),style:{color:"var(--el-text-color-primary)"}},{default:o(()=>[t(h,{class:"mr-8",iconName:"app-workspace",style:{"font-size":"16px"}}),R(" "+s(d.$t("views.workspace.toWorkspace")),1)]),_:1})):k("",!0)])]),t(rt)])}}}),wt=te(yt,[["__scopeId","data-v-c20e3067"]]),At=B({__name:"index",setup(M){const a=_e(),d=E([]);return $e(()=>{const{name:p,meta:g}=a;p&&!d.value.includes(p)&&d.value.push(p)}),(p,g)=>{const f=l("router-view");return c(),y(f,null,{default:o(({Component:h})=>[t(Ie,{appear:"",name:"fade-transform",mode:"out-in"},{default:o(()=>[(c(),y(Ce,{include:d.value},[(c(),y(Ee(h),{key:e(a).path}))],1032,["include"]))]),_:2},1024)]),_:1})}}});export{rt as A,wt as S,pt as T,At as _};
