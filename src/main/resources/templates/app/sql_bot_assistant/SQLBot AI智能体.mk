{"application":{"name":"SQLBot AI 智能体","desc":"用于在 MaxKB 中智能调用 SQLBot 查询数据的 AI 智能体。","prologue":"您好，我是SQLBot小助手，您可以向我提出数据分析等问题。\n- 用柱状图展示近1个月应用的创建趋势\n- 用条形图展示7月用户的创建趋势\n- 查询学生成绩等级，返回饼图\n- 查询辽宁省各地市的gdp，返回柱状图","dialogueNumber":1,"knowledgeSetting":{"topN":3,"maxParagraphCharNumber":5000,"searchMode":"embedding","similarity":0.6,"noReferencesSetting":{"status":"ai_questioning","value":"{question}"}},"modelSetting":{"system":"系统提示词，可以引用系统中的变量： 是命中知识库中的分段； 是用户提出的问题。","prompt":"已知信息：{data}\n用户问题：{question}\n回答要求：\n- 请使用中文回答用户问题","noReferencesPrompt":"{question}"},"problemOptimization":false,"userId":"ee95e0e38acaad23bd73d9bea414a97d","icon":"./favicon.ico","type":"WORK_FLOW","workFlow":{"edges":[{"id":"9f0b9262-74b4-4ca2-a88d-738d453312c0","type":"app-edge","endPoint":{"x":920,"y":3020},"pointsList":[{"x":770,"y":2850},{"x":880,"y":2850},{"x":810,"y":3020},{"x":920,"y":3020}],"properties":{},"startPoint":{"x":770,"y":2850},"sourceNodeId":"start-node","targetNodeId":"22ed052b-2892-4ad9-b8c2-25d56eb6c90f","sourceAnchorId":"start-node_right","targetAnchorId":"22ed052b-2892-4ad9-b8c2-25d56eb6c90f_left"}],"nodes":[{"x":50,"y":2910,"id":"base-node","type":"base-node","properties":{"config":{},"height":931.76,"nodeData":{"desc":"用于在 MaxKB 中智能调用 SQLBot 查询数据的 AI 智能体。","name":"SQLBot AI 智能体","ttsType":"BROWSER","prologue":"您好，我是SQLBot小助手，您可以向我提出数据分析等问题。\n- 用柱状图展示近1个月应用的创建趋势\n- 用条形图展示7月用户的创建趋势\n- 查询学生成绩等级，返回饼图\n- 查询辽宁省各地市的gdp，返回柱状图"},"nodeName":"基本信息","showNode":true,"inputFieldList":[],"enableException":false,"userInputConfig":{"title":"用户输入"},"apiInputFieldList":[],"chatInputFieldList":[],"userInputFieldList":[{"attrs":{"maxlength":200,"minlength":1,"show-word-limit":true},"field":"username","label":{"attrs":{"tooltip":"用户名"},"label":"username","input_type":"TooltipLabel","props_info":{}},"required":true,"input_type":"TextInput","props_info":{"rules":[{"message":"username 为必填属性","required":true},{"max":200,"min":1,"message":"username长度在 1 到 200 个字符","trigger":"blur"}]},"defaultValue":"admin","show_default_value":true},{"attrs":{"maxlength":200,"minlength":1,"show-word-limit":true},"field":"password","label":{"attrs":{"tooltip":"密码"},"label":"password","input_type":"TooltipLabel","props_info":{}},"required":true,"input_type":"TextInput","props_info":{"rules":[{"message":"password 为必填属性","required":true},{"max":200,"min":1,"message":"password长度在 1 到 200 个字符","trigger":"blur"}]},"defaultValue":"SQLBot@123456","show_default_value":true}]}},{"x":610,"y":2850,"id":"start-node","type":"start-node","properties":{"config":{"fields":[{"label":"用户问题","value":"question"}],"chatFields":[],"globalFields":[{"label":"当前时间","value":"time"},{"label":"历史聊天记录","value":"historyContext"},{"label":"对话 ID","value":"chatId"},{"label":"对话用户 ID","value":"chatUserId"},{"label":"对话用户类型","value":"chatUserType"},{"label":"对话用户","value":"chatUser"},{"label":"username","value":"username"},{"label":"password","value":"password"}]},"fields":[{"label":"用户问题","value":"question"}],"height":612,"nodeName":"开始","showNode":true,"globalFields":[{"label":"当前时间","value":"time"}],"enableException":false}},{"x":1080,"y":3020,"id":"22ed052b-2892-4ad9-b8c2-25d56eb6c90f","type":"ai-chat-node","properties":{"config":{"fields":[{"label":"AI 回答内容","value":"answer"},{"label":"思考过程","value":"reasoningContent"}]},"height":1085.771,"nodeData":{"prompt":"# 回答要求：\n按需调用 mcp_start 和 mcp_question 工具获取信息回答问题。\n\nmcp_start 账号密码：\nusername:{{global.username}}\npassword:{{global.password}}\n\n工具调用逻辑：\n首先调用 mcp_start 工具，获取 access_token 和 chat_id ，帮我记住这两个参数，之后不要重复调用 mcp_start，直接使用即可；然后再调用 mcp_question 工具，其中 token 和 chat_id 参数是调用 mcp_start 工具返回，question 是用户提问。\n\n\n# 用户提问：\n{{开始.question}}\n\n# 输出要求\n - 如果 mcp_question 中有图片，请直接返回图片\n - 请将 mcp_question 的执行结果中的数据、SQL以及图片内容展示\n - 请将 mcp_question 的执行过程在结尾进行总结\n   \n# 限制\n - 不要输出MCP详细执行过程\n - 生成内容不要放在 mcp_question 执行过程中\n - 严格按照输出要求输出内容，不要输出MCP调用过程\n\n\n","system":"# 角色\nBI 数据分析师\n\n# 技能\n你可以调用MCP工具生成SQL语句、获取数据信息同时可以基于数据生成的图片格式的图表","toolId":[],"modelId":"698f3675c81dcd15c7303a5299037ce9","toolIds":["21b67a6bce17546a56fd5156e5eaf42c"],"isResult":true,"dialogueType":"WORK_FLOW","modelSetting":{"reasoningContent_end":"</think>","reasoningContentEnable":false,"reasoningContent_start":"<think>"},"dialogueNumber":1,"toolOutputEnable":true,"modelParamsSetting":{}},"nodeName":"AI 对话","showNode":true,"condition":"AND","enableException":false}}]},"modelParamsSetting":{},"sttModelEnable":false,"sttAutoSend":false,"ttsModelEnable":false,"ttsAutoplay":false,"ttsType":"BROWSER","isPublish":false,"publishTime":1769759048847,"problemOptimizationPrompt":"()里面是用户问题,根据上下文回答揣测用户问题({question}) 要求: 输出一个补全问题,并且放在<data></data>标签中","ttsModelParamsSetting":{},"cleanTime":365,"fileUploadEnable":false,"fileUploadSetting":{},"folderId":"default","toolIds":[],"applicationIds":[],"knowledgeIds":[],"toolOutputEnable":true,"id":"4313252921c1befd3ad33b53bb465730","createTime":1770008655725,"updateTime":1770010845221},"toolList":[],"version":"v2"}