{"name":"Echarts基础图表工具","desc":"Echarts基础图表工具 饼状图、柱状图、折线图","code":"import groovy.json.JsonBuilder\nimport groovy.json.JsonSlurper\n\ndef jsonSlurper = new JsonSlurper()\n\n// 解析传入的字符串为 List\ndef xAxisData = jsonSlurper.parseText(xAxisStr)\ndef yAxisData = jsonSlurper.parseText(yAxisStr)\n\ndef style = [\n    height: \"400px\",\n    width: \"100%\"\n]\n\ndef title = [\n    text: chartTitle,\n    left: \"center\"\n]\n\ndef tooltip = [:]\n\ndef option = [\n    title: title\n]\n\ndef series = [\n    type: chartType\n]\n\nif (chartType != \"pie\") {\n    def xAxis = [\n        type: \"category\",\n        boundaryGap: false,\n        data: xAxisData\n    ]\n\n    def yAxis = [\n        type: \"value\"\n    ]\n\n    def markPointDataMax = [type: \"max\", name: \"最大值\"]\n    def markPointDataMin = [type: \"min\", name: \"最小值\"]\n    def onlineMarkPoint = [\n        data: [markPointDataMax, markPointDataMin]\n    ]\n\n    series.data = yAxisData\n    series.markPoint = onlineMarkPoint\n\n    option.xAxis = xAxis\n    option.yAxis = yAxis\n    tooltip.trigger = \"axis\"\n} else {\n    def seriesData = []\n    for (int i = 0; i < xAxisData.size(); i++) {\n        seriesData << [\n            value: yAxisData[i],\n            name: xAxisData[i]\n        ]\n    }\n    series.data = seriesData\n    tooltip.trigger = \"item\"\n}\n\noption.tooltip = tooltip\noption.series = [series]\n\ndef formSetting = [\n    actionType: \"JSON\",\n    style: style,\n    option: option\n]\n\n// 返回 JSON 字符串或 Map？根据上下文，这里返回 Map 更符合 Groovy 风格\n// 如果需要字符串，可用 new JsonBuilder(formSetting).toString()\nreturn formSetting","inputFieldList":[{"name":"chartTitle","type":"string","source":"reference","isRequired":true},{"name":"xAxisStr","type":"string","source":"reference","isRequired":true},{"name":"yAxisStr","type":"string","source":"reference","isRequired":true}],"initFieldList":[{"attrs":{},"field":"chartType","label":{"attrs":{"tooltip":"图表类型"},"label":"chartType","input_type":"TooltipLabel","props_info":{}},"required":true,"input_type":"SingleSelect","text_field":"label","option_list":[{"label":"折线图","value":"line"},{"label":"柱状图","value":"bar"},{"label":"饼图","value":"pie"}],"value_field":"value","default_value":"line","show_default_value":true}],"initParams":{},"userId":"ee95e0e38acaad23bd73d9bea414a97d","isActive":true,"toolType":"CUSTOM","label":"developer","scope":"WORKSPACE","icon":"./tool/echarts/icon.png","folderId":"default","id":"f9198bc6335d3d86b4b79d34b9671637","version":"1.0.0","createTime":1762331514000,"updateTime":1764484878228}