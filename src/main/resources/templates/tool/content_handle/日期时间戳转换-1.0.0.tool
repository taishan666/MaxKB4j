{"name":"日期时间戳转换","desc":"日期和毫秒级别时间戳的相互转换，如果输入是日期字符串，则转换为毫秒级别时间戳，如果输入是毫秒级别时间戳，则转换为日期。(默认时区：Asia/Shanghai)","code":"import java.time.*\nimport java.time.format.*\n\n\nfinal ZoneId UTC8 = ZoneId.of(\"Asia/Shanghai\")\nfinal DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\")\nfinal DateTimeFormatter DATE_ONLY_FORMATTER = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\")\n\n// 处理字符串类型的时间戳（先转为 Long）\nif (inputData instanceof String && inputData.matches(/^\\d{13}$/)) {\n    inputData = inputData as Long\n}\n\n// 1. 处理毫秒级时间戳（转换为UTC+8日期字符串）\nif (inputData instanceof Long) {\n    // 验证时间戳合理性（13位数字，大致覆盖1973-2286年）\n    if (inputData >= 1e12 && inputData <= 1e15) {\n        Instant instant = Instant.ofEpochMilli(inputData)\n        ZonedDateTime utc8Time = instant.atZone(UTC8)\n        return utc8Time.format(DATE_TIME_FORMATTER)\n    } else {\n        throw new IllegalArgumentException(\"输入的整数不是有效的毫秒级时间戳（需13位合理范围数字）\")\n    }\n}\n\n// 2. 处理UTC+8日期字符串（转换为毫秒级时间戳）\nelse if (inputData instanceof String) {\n    String str = inputData.trim()\n\n    // 检查是否符合日期或日期时间格式\n    boolean isDateOnly = str.matches(/^\\d{4}-\\d{2}-\\d{2}$/)\n    boolean isDateTime = str.matches(/^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/)\n\n    if (!isDateOnly && !isDateTime) {\n        throw new IllegalArgumentException(\"异常：日期字符串格式不支持，请使用'YYYY-MM-DD'或'YYYY-MM-DD HH:MM:SS'\")\n    }\n\n    // 补全时间为 00:00:00（如果只有日期）\n    if (isDateOnly) {\n        str += \" 00:00:00\"\n    }\n\n    try {\n        LocalDateTime localDateTime = LocalDateTime.parse(str, DATE_TIME_FORMATTER)\n        ZonedDateTime utc8Zoned = localDateTime.atZone(UTC8)\n\n        // 转换为 UTC 的毫秒时间戳\n        long timestampMillis = utc8Zoned.toInstant().toEpochMilli()\n        return timestampMillis\n    } catch (DateTimeParseException e) {\n        throw new IllegalArgumentException(\"日期格式无效（如月份/日期超出范围）：${e.message}\", e)\n    }\n}\n\n// 3. 不支持的输入类型\nthrow new IllegalArgumentException(\"异常：输入类型不支持，请输入Long（时间戳）或String（日期）\")","inputFieldList":[{"name":"inputData","type":"string","source":"reference","isRequired":true}],"initFieldList":[],"initParams":{},"userId":"ee95e0e38acaad23bd73d9bea414a97d","isActive":true,"toolType":"CUSTOM","label":"content_handle","scope":"WORKSPACE","icon":"https://apps-assets.fit2cloud.com/stable/maxkb/timestamp/logo.png","folderId":"default","id":"bcf88ec26f598eb82de7420a5dd1338e","version":"1.0.0","createTime":1768809528727,"updateTime":1768809528727}